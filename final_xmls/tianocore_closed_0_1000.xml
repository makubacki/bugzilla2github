<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.tianocore.org/page.cgi?id=bugzilla.dtd">

<bugzilla version="5.0.4"
          urlbase="https://bugzilla.tianocore.org/"
          
          maintainer="john.mathews@intel.com"
>

    <bug>
          <bug_id>776</bug_id>
          
          <creation_ts>2017-11-12 21:38:51 +0000</creation_ts>
          <short_desc>AP in ApInHltLoop mode cannot be initialized with different configuration from BSP</short_desc>
          <delta_ts>2018-01-09 23:00:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Highest</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3034</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2017-11-12 21:38:51 +0000</bug_when>
    <thetext>For IA multi-processor, if AP loop mode is ApInHltLoop, EFI_MP_SERVICES_PROTOCOL.StartupAllAPs() will always reset all APs with cpu data from BSP, which will overwrite any re-configuration made on APs (such as different GDTR, IDTR, TR, etc.)

In the method WakeUpAp() in file UefiCpuPkg\Library\MpInitLib\MpLib.c:

  if (CpuMpData-&gt;ApLoopMode == ApInHltLoop ||
      CpuMpData-&gt;InitFlag   != ApInitDone) {
    ResetVectorRequired = TRUE;
    AllocateResetVector (CpuMpData);
    FillExchangeInfoData (CpuMpData);
    SaveLocalApicTimerSetting (CpuMpData);
  } else if (CpuMpData-&gt;ApLoopMode == ApInMwaitLoop) {


FillExchangeInfoData() in above will only fill CpuMpData with data got from BSP. In addition, CpuMpData-&gt;MpCpuExchangeInfo doesn&apos;t contain enough cpu data to re-configure a logic processor (such as TR which must be set with a valid GDT selector).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3036</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2017-11-13 02:30:06 +0000</bug_when>
    <thetext>The part of AP&apos;s configuration is saved and restored by CPU_AP_DATA.VolatileRegisters, which doesn&apos;t contain all volatile registers during INIT-SIPI-SIPI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3091</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-16 19:12:44 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3363</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-01-09 22:55:09 +0000</bug_when>
    <thetext>Fixed at e9415e4846dd8e93c5cabff66e3d599a7844a740</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3365</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-01-09 23:00:28 +0000</bug_when>
    <thetext>Fixed at checkin e9415e4846dd8e93c5cabff66e3d599a7844a740</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>451</bug_id>
          
          <creation_ts>2017-03-31 06:09:47 +0000</creation_ts>
          <short_desc>Open up posting to the edk2-devel mailing list for non-subscribers</short_desc>
          <delta_ts>2017-11-09 07:39:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Process</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Highest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>brian.richardson</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1713</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-31 06:09:47 +0000</bug_when>
    <thetext>The edk2-devel mailing list &lt;https://lists.01.org/mailman/listinfo/edk2-devel&gt; diverges from most other open source development mailing lists in that it requires people to complete the subscription process before the list software will reflect their emails to other subscribers.

In other words, if you post to edk2-devel right now without having a live subscription, your email will be lost. This is extremely rude to people who have only occasional interest in firmware development, and it is an obstacle for cross-disciplinary collaboration. There have been several examples in the past where Linux kernel developers, QEMU developers and similar participants have lost their edk2-devel messages. All other open source development mailing lists that I&apos;m familiar with allow non-subscribers to post, even very high traffic ones (libvir-list, qemu-devel, all of the linux kernel mailing lists, and so on).

The concern about spam is *NOT* justified. All those other lists see a minimal amount of spam. The list software (mailman 2) can surely be configured to filter spam, and the minimal amount that (rarely) gets through can be easily caught by client-side filtering, or plainly ignored by subscribers.

Please open up the list to non-subscribers for posting. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2002</commentid>
    <comment_count>1</comment_count>
    <who name="Jordan Justen">jordan.l.justen</who>
    <bug_when>2017-05-05 17:20:50 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #0)
&gt; The concern about spam is *NOT* justified. All those other lists see a
&gt; minimal amount of spam. The list software (mailman 2) can surely be
&gt; configured to filter spam, and the minimal amount that (rarely) gets through
&gt; can be easily caught by client-side filtering, or plainly ignored by
&gt; subscribers.

I asked a lists.01.org admin about this. He recommended against
opening the list as you described due to the risk of it becoming
a spam target. He did say that we might consider opening it to
emails from some known domains, but I think that would only
cause more confusion.

Maybe another email list hosting location would be able to better
handle spam filtering.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2003</commentid>
    <comment_count>2</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2017-05-06 07:18:50 +0000</bug_when>
    <thetext>(In reply to Jordan Justen from comment #1)
&gt; I asked a lists.01.org admin about this. He recommended against
&gt; opening the list as you described due to the risk of it becoming
&gt; a spam target. He did say that we might consider opening it to
&gt; emails from some known domains, but I think that would only
&gt; cause more confusion.
&gt; 
&gt; Maybe another email list hosting location would be able to better
&gt; handle spam filtering.

An alternative solution, and what I&apos;m using on linaro-uefi@lists.linaro.org is to automatically send all non-subscriber posts to moderation. Then, as the moderator, I manually add senders of all valid emails to the automatic accept list. That way, people only see a delay on their first post.

It does require manual moderation effort, but I find it quite manageable.

What I&apos;m telling people these days who want to be able to send email occasionally but don&apos;t really care about the list in general is to subscribe and then configure their subscription to not actually send email.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2005</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-05-06 15:48:35 +0000</bug_when>
    <thetext>(In reply to Leif Lindholm from comment #2)
&gt; What I&apos;m telling people these days who want to be able to send email
&gt; occasionally but don&apos;t really care about the list in general is to
&gt; subscribe and then configure their subscription to not actually send email.

The problem is, the discussion usually goes like this:

(a) contributor mainly used to the &quot;GitHub workflow&quot;:
- sends a pull request
- &quot;we don&apos;t accept pull requests without review on the list, please post the patches&quot;
- *groan*
- sends the patches nonetheless, the patches are dropped
- &quot;please subscribe first&quot;
- *GROAN* kthxbye
- &quot;BTW you can disable mail delivery&quot; &lt;--- this is the step we don&apos;t get to

(b) contributor used to ~all other open source lists:
- sends a patch series (or just a reply to some cross-posted message)
- emails are dropped
- &quot;please subscribe first&quot;
- &quot;are you kidding me?&quot;

I don&apos;t understand why spam is expected to be a problem for lists.01.org mailing lists when all those other lists cope with spam without problems.

That said, I do agree with a manually maintained whitelist:

(In reply to Leif Lindholm from comment #2)
&gt;
&gt; An alternative solution, and what I&apos;m using on linaro-uefi@lists.linaro.org
&gt; is to automatically send all non-subscriber posts to moderation. Then, as
&gt; the moderator, I manually add senders of all valid emails to the automatic
&gt; accept list. That way, people only see a delay on their first post.
&gt; 
&gt; It does require manual moderation effort, but I find it quite manageable.

If noone else is volunteering for this role, make me the moderator I guess?

Or, if that were a problem, I could ask for (yet another) edk2-devel list at Red Hat. For example, the following lists are public, and require no subscription:

https://www.redhat.com/mailman/listinfo/libvir-list
https://www.redhat.com/mailman/listinfo/vfio-users

The former even says explicitly,

&gt; Subscription is not required for posting; list policy is reply-to-all so
&gt; that non-subscribers remain in the loop. First-time posts (whether you are
&gt; subscribed or not) are subject to moderation delay. Please keep list posts
&gt; under 150k.

I think moving to yet another place would be disruptive, and so I&apos;d strongly prefer if we could adopt the &quot;human moderation for first post&quot; / whitelist rule. I think that kind of moderation is a Community Manager or Steward job, but if nothing else works and the bottleneck is &quot;no volunteers&quot;, I&apos;m willing to take it too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2155</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-05-24 12:02:35 +0000</bug_when>
    <thetext>Brian, as our new community manager (as far as I understand), can you please comment on this? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2156</commentid>
    <comment_count>5</comment_count>
    <who name="Jordan Justen">jordan.l.justen</who>
    <bug_when>2017-05-24 14:08:46 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; 
&gt; I don&apos;t understand why spam is expected to be a problem for lists.01.org
&gt; mailing lists when all those other lists cope with spam without problems.

It could be that they don&apos;t run a spam scanner on the
system. I don&apos;t know.

&gt; (In reply to Leif Lindholm from comment #2)
&gt; &gt;
&gt; &gt; An alternative solution, and what I&apos;m using on linaro-uefi@lists.linaro.org
&gt; &gt; is to automatically send all non-subscriber posts to moderation. Then, as
&gt; &gt; the moderator, I manually add senders of all valid emails to the automatic
&gt; &gt; accept list. That way, people only see a delay on their first post.
&gt; &gt; 
&gt; &gt; It does require manual moderation effort, but I find it quite manageable.
&gt; 
&gt; If noone else is volunteering for this role, make me the moderator I guess?

I guess we could try the moderation based settings.

I added my gmail account as a moderator some months back.
Shortly thereafter I was informed that only intel.com email
addresses could be admins or moderators on lists.01.org. This
definitely made me think we made the wrong choice of list
hosting providers when moving from sourceforge.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2157</commentid>
    <comment_count>6</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-05-24 15:51:24 +0000</bug_when>
    <thetext>I recommend the moderation system for the short-term, and I am willing to help moderate e-mails. If we don&apos;t see spam issues after a few months, we can revisit opening up the list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2175</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-05-25 10:05:45 +0000</bug_when>
    <thetext>Thank you Jordan and Brian for the feedback!

Brian&apos;s idea in comment 6 sounds really good! Who can make that happen?

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2176</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-05-25 10:06:59 +0000</bug_when>
    <thetext>(That is, who can switch the list settings over to personal moderation for the initial postings of non-subscribers?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2177</commentid>
    <comment_count>9</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-05-25 10:19:29 +0000</bug_when>
    <thetext>Mike Kinney - any comment?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2290</commentid>
    <comment_count>10</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-15 20:06:54 +0000</bug_when>
    <thetext>Bug scrub: Assign to Mike to follow up first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2895</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-18 04:41:34 +0000</bug_when>
    <thetext>Can we please proceed with this request?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3007</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-09 07:31:39 +0000</bug_when>
    <thetext>The edk2-devel list has gotten two moderators (one of them is yours truly, the other one is very welcome to confirm here as well :) ), so emails from constructive non-subscribers should no longer have trouble getting through (after some initial delay / validation). Closing this BZ as fixed. Thanks everyone!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3008</commentid>
    <comment_count>13</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2017-11-09 07:39:45 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #12)
&gt; The edk2-devel list has gotten two moderators (one of them is yours truly,
&gt; the other one is very welcome to confirm here as well :) )

Confirmed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>958</bug_id>
          
          <creation_ts>2018-05-25 10:31:49 +0000</creation_ts>
          <short_desc>Cannot build most platforms for x64 on Windows</short_desc>
          <delta_ts>2018-05-30 11:57:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ian">yodadude2003</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4013</commentid>
    <comment_count>0</comment_count>
    <who name="Ian">yodadude2003</who>
    <bug_when>2018-05-25 10:31:49 +0000</bug_when>
    <thetext>Hello, 
I am trying to build my code for the x64 platform in debug mode using the VS2017 toolset on Windows 10. I&apos;ve tried building several packages in order to accomplish this, such as DuetPkgX64 and Nt32Pkg (which I later discovered to be incompatible with x64), and it seems that the build is tripping up while building libraries that are related to MdePkg.  

Here are the logs:
----------------------------------------------
1&gt;d:\efi_workspace\edk2\MdePkg\Library\BaseCacheMaintenanceLib\X86Cache.c(69): error C2220: warning treated as error - no &apos;object&apos; file generated
1&gt;d:\efi_workspace\edk2\MdePkg\Library\BaseCacheMaintenanceLib\X86Cache.c(69): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;void *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\BaseCacheMaintenanceLib\X86Cache.c(135): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;void *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\BaseCacheMaintenanceLib\X86Cache.c(152): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;void *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\BaseCacheMaintenanceLib\X86Cache.c(160): warning C4312: &apos;type cast&apos;: conversion from &apos;UINTN&apos; to &apos;void *&apos; of greater size
1&gt;d:\efi_workspace\edk2\MdePkg\Library\BaseCacheMaintenanceLib\X86Cache.c(160): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;void *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\SmmIoLib\SmmIoLib.c(183): error C2220: warning treated as error - no &apos;object&apos; file generated
1&gt;d:\efi_workspace\edk2\MdePkg\Library\SmmIoLib\SmmIoLib.c(183): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;EFI_GCD_MEMORY_SPACE_DESCRIPTOR *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\SmmIoLib\SmmIoLib.c(188): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;EFI_GCD_MEMORY_SPACE_DESCRIPTOR *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\SmmIoLib\SmmIoLib.c(208): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;EFI_GCD_MEMORY_SPACE_DESCRIPTOR *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\SmmMemLib\SmmMemLib.c(209): error C2220: warning treated as error - no &apos;object&apos; file generated
1&gt;d:\efi_workspace\edk2\MdePkg\Library\SmmMemLib\SmmMemLib.c(209): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;const void *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\SmmMemLib\SmmMemLib.c(242): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;void *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\SmmMemLib\SmmMemLib.c(276): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;void *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\SmmMemLib\SmmMemLib.c(280): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;const void *&apos; to &apos;UINTN&apos;
1&gt;d:\efi_workspace\edk2\MdePkg\Library\SmmMemLib\SmmMemLib.c(312): warning C4311: &apos;type cast&apos;: pointer truncation from &apos;void *&apos; to &apos;UINTN&apos;
1&gt;NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.10.25017\bin\Hostx86\x64\cl.exe&quot;&apos; : return code &apos;0x2&apos;
1&gt;Stop.
1&gt;
1&gt;
1&gt;build...
1&gt;EXEC : error 7000: Failed to execute command
1&gt;	C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.10.25017\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\efi_workspace\edk2\Build\Mde\DEBUG_VS2017\X64\MdePkg\Library\BaseCacheMaintenanceLib\BaseCacheMaintenanceLib]
1&gt;
1&gt;
1&gt;build...
1&gt;EXEC : error 7000: Failed to execute command
1&gt;	C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.10.25017\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\efi_workspace\edk2\Build\Mde\DEBUG_VS2017\X64\MdePkg\Library\SmmIoLib\SmmIoLib]
1&gt;
1&gt;
1&gt;build...
1&gt;EXEC : error 7000: Failed to execute command
1&gt;	C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.10.25017\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\efi_workspace\edk2\Build\Mde\DEBUG_VS2017\X64\MdePkg\Library\SmmMemLib\SmmMemLib]
1&gt;
1&gt;
1&gt;build...
1&gt;EXEC : error F002: Failed to build module
1&gt;	d:\efi_workspace\edk2\MdePkg\Library\BaseCacheMaintenanceLib\BaseCacheMaintenanceLib.inf [X64, VS2017, DEBUG]
1&gt;
1&gt;- Failed -
1&gt;Build end time: 09:07:49, May.25 2018
1&gt;Build total time: 00:00:18
-------------------------------------------------------------
I&apos;m trying to code a simple bootloader and I am unable to test it on my hardware, which runs on X64 UEFI firmware.  My local edk2 and basetools trees are up to date, and I have had no problems with compiling for IA32.  This is a major roadblock for my project and I would appreciate any kind of help. 
Kind Regards, 
Ian</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4014</commentid>
    <comment_count>1</comment_count>
      <attachid>176</attachid>
    <who name="Ian">yodadude2003</who>
    <bug_when>2018-05-25 14:07:36 +0000</bug_when>
    <thetext>Created attachment 176
CYGWIN with GCC compiler - DuetPkgX64 build logs</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4015</commentid>
    <comment_count>2</comment_count>
    <who name="Ian">yodadude2003</who>
    <bug_when>2018-05-25 14:17:18 +0000</bug_when>
    <thetext>Edit: 
I just now tried building DuetPkgX64 using CYGWIN with GCC.  I am still getting warnings that point to the same lines of code that the VS2017 build had complained about.  I then removed the -Werror flag from the command line arguments to see if the build still failed.  The build failed, this time with the same warnings along with a couple of errors. (See the attached logs above).  
I do not have a linux hosted environment available.  I am not sure if this issue is specific to windows, or if it is an issue across the board.  
Thanks in advance, 
Ian</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4030</commentid>
    <comment_count>3</comment_count>
    <who name="Ian">yodadude2003</who>
    <bug_when>2018-05-30 11:57:09 +0000</bug_when>
    <thetext>Resolution: 
I figured out what the issue was, in order to build for x64 you need to copy ProcessorBind.h from MdePkg/Include/x64 to MdePkg/Include.  
I sure feel stupid :P</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>176</attachid>
            <date>2018-05-25 14:07:36 +0000</date>
            <delta_ts>2018-05-25 14:07:36 +0000</delta_ts>
            <desc>CYGWIN with GCC compiler - DuetPkgX64 build logs</desc>
            <filename>build_fail.txt</filename>
            <type>text/plain</type>
            <size>229564</size>
            <attacher name="Ian">yodadude2003</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>953</bug_id>
          
          <creation_ts>2018-05-15 12:06:28 +0000</creation_ts>
          <short_desc>VfrCompile.exe crashes on both Windows 7 &amp; 10 PCs</short_desc>
          <delta_ts>2018-06-27 03:42:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Alexei">Alexei.Fedorov</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>Alexei.Fedorov</cc>
    
    <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>evan.lloyd</cc>
    
    <cc>matteo.carlini</cc>
    
    <cc>sami.mujawar</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3994</commentid>
    <comment_count>0</comment_count>
      <attachid>175</attachid>
    <who name="Alexei">Alexei.Fedorov</who>
    <bug_when>2018-05-15 12:06:28 +0000</bug_when>
    <thetext>Created attachment 175
VfrCompile error message

VfrCompile.exe from commit b2e7ee1d3e90d530c3a32d08519c432f73061acc
crashes on both Windows 7 &amp; 10 PCs.
 Visual Studio reports the following:
 &quot;Unhandled exception at 0x7772E9FB (ntdll.dll) in VfrCompile.exe: 0xC0000374: A heap has been corrupted (parameters: 0x77764270).&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3996</commentid>
    <comment_count>1</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-05-16 01:11:14 +0000</bug_when>
    <thetext>Hi,

We have already fixed a vfrcomiple crash issue with following commit in Edk2 master:
SHA-1: 13e3f8c03339ebc8cd25c454fca1abde098fe7ed
* BaseTools/VfrCompile: Avoid using uninitialized pointer

You can build vfrCompile binary with latest source code and then try again.

Thanks,
Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3997</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-05-16 21:04:07 +0000</bug_when>
    <thetext>assign to Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4215</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-06-27 03:42:02 +0000</bug_when>
    <thetext>fix it on edk2 master at 13e3f8c03339ebc8cd25c454fca1abde098fe7ed</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>175</attachid>
            <date>2018-05-15 12:06:28 +0000</date>
            <delta_ts>2018-05-15 12:06:28 +0000</delta_ts>
            <desc>VfrCompile error message</desc>
            <filename>VfrCompile_Crash.jpg</filename>
            <type>image/jpeg</type>
            <size>52187</size>
            <attacher name="Alexei">Alexei.Fedorov</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>198</bug_id>
          
          <creation_ts>2016-11-01 02:01:15 +0000</creation_ts>
          <short_desc>OPAL password issue</short_desc>
          <delta_ts>2019-08-01 13:12:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>ayellet.wolman</cc>
    
    <cc>hot.tian</cc>
    
    <cc>john.loucaides</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ryan.ware</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>803</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-11-01 02:01:15 +0000</bug_when>
    <thetext>Issue #1
\mdepkg\library\uefidevicepathlib\devicepathutilities.c

Attacker can read beyond the end of the (untrusted) commbuffer into controlled memory. Attacker can get access outside of valid SMM memory regions. Here is no pointer validation for ((EFI_DEVICE_PATH_PROTOCOL *)(Node))-&gt;Type  from  DevicePathType()  function.

UINT8
EFIAPI
DevicePathType (
  IN CONST VOID  *Node
  )
{
  ASSERT (Node != NULL);
  return ((EFI_DEVICE_PATH_PROTOCOL *)(Node))-&gt;Type; &lt;&lt;= no any sanity checks for return value
}

Issue #2
\mdepkg\library\baselib\unaligned.c

UINT16
EFIAPI
ReadUnaligned16 (
  IN CONST UINT16              *Buffer
  )
{
  ASSERT (Buffer != NULL);
  return *Buffer;  &lt;&lt;= no any sanity checks for return value
}


=========================================
Additional Information:
OpalPasswordSmm
CommBuffer: 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 01 00 00 00 91 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
 
1. Access outside of valid memory regions in (100.txt) on address 0x18f79859 (1 byte(s) 0)!
0x8cd9cf78 mov al,byte ptr [rax]  line: 110  file: c:\concolic\excite\flow\workspace\mdepkg\library\uefidevicepathlib\devicepathutilities.c
    UINT8
    EFIAPI
    DevicePathType (
      IN CONST VOID  *Node
      )
    {
      ASSERT (Node != NULL);
=&gt;    return ((EFI_DEVICE_PATH_PROTOCOL *)(Node))-&gt;Type;
 
Call stack:
0x8cd9d038  line: 211  file: c:\concolic\excite\flow\workspace\mdepkg\library\uefidevicepathlib\devicepathutilities.c
    BOOLEAN
    EFIAPI
    IsDevicePathEndType (
      IN CONST VOID  *Node
      )
    {
      ASSERT (Node != NULL);
=&gt;    return (BOOLEAN) (DevicePathType (Node) == END_DEVICE_PATH_TYPE);
 
0x8cd9cfc0  line: 238  file: c:\concolic\excite\flow\workspace\mdepkg\library\uefidevicepathlib\devicepathutilities.c
    BOOLEAN
    EFIAPI
    IsDevicePathEnd (
      IN CONST VOID  *Node
      )
    {
      ASSERT (Node != NULL);
=&gt;    return (BOOLEAN) (IsDevicePathEndType (Node) &amp;&amp; DevicePathSubType(Node) == END_ENTIRE_DEVICE_PATH_SUBTYPE);
 
0x8cd9d0c4  line: 64  file: c:\concolic\excite\flow\workspace\mdepkg\library\uefidevicepathlib\devicepathutilities.c
    {
      UINTN Count;
      UINTN Size;
      UINTN NodeLength;
   
      ASSERT (DevicePath != NULL);
   
=&gt;    for (Count = 0, Size = 0; !IsDevicePathEnd (DevicePath); DevicePath = NextDevicePathNode (DevicePath)) {
 
0x8cd9d1e4  line: 349  file: c:\concolic\excite\flow\workspace\mdepkg\library\uefidevicepathlib\devicepathutilities.c
    {
      CONST EFI_DEVICE_PATH_PROTOCOL  *Start;
  
      if (DevicePath == NULL) {
        return 0;
      }
   
=&gt;    if (!IsDevicePathValid (DevicePath, 0)) {
 
0x8cd9d25e  line: 44  file: c:\concolic\excite\flow\workspace\mdepkg\library\uefidevicepathlib\uefidevicepathlib.c
    **/
    UINTN
    EFIAPI
    GetDevicePathSize (
      IN CONST EFI_DEVICE_PATH_PROTOCOL  *DevicePath
      )
    {
=&gt;    return UefiDevicePathLibGetDevicePathSize (DevicePath);
 
0x8cd862b0  line: 274  file: c:\concolic\excite\flow\workspace\kabylakeplatsamplepkg\override\bpcommonpkg\universal\opalpassword\smm\opalpasswordsmm.c
      )
    {
      OPAL_DEVICE_LIST                  *List;
      OPAL_DEVICE_LIST                  *Dev;
      LIST_ENTRY                        *Entry;
      UINTN                             DevicePathLen;
   
=&gt;    DevicePathLen = GetDevicePathSize (DevicePath);
 
0x8cd8688a  line: 666  file: c:\concolic\excite\flow\workspace\kabylakeplatsamplepkg\override\bpcommonpkg\universal\opalpassword\smm\opalpasswordsmm.c
        case SMM_FUNCTION_SET_OPAL_PASSWORD:
            if (PasswordIsFullZero (NewPassword) || PasswordLength == 0) {
              Status = EFI_INVALID_PARAMETER;
              goto EXIT;
            }
   
            DEBUG ((DEBUG_INFO, &quot;call SavePasswordToSmm\n&quot;));
=&gt;          Status = SavePasswordToSmm (DevicePath, NewPassword, PasswordLength);
 
 
2. Access outside of valid memory regions in (100.txt) on address 0x18f7985b (2 byte(s) 0)!
0x8cda08c0 movzx eax, word ptr [rax]  line: 40  file: c:\concolic\excite\flow\workspace\mdepkg\library\baselib\unaligned.c
    EFIAPI
    ReadUnaligned16 (
      IN CONST UINT16              *Buffer
      )
    {
      ASSERT (Buffer != NULL);
   
=&gt;    return *Buffer;
 
Call stack:
0x8cd9cee1  line: 157  file: c:\concolic\excite\flow\workspace\mdepkg\library\uefidevicepathlib\devicepathutilities.c
    UINTN
    EFIAPI
    DevicePathNodeLength (
      IN CONST VOID  *Node
      )
    {
      ASSERT (Node != NULL);
=&gt;    return ReadUnaligned16 ((UINT16 *)&amp;((EFI_DEVICE_PATH_PROTOCOL *)(Node))-&gt;Length[0]);
 
0x8cd9d0d5  line: 65  file: c:\concolic\excite\flow\workspace\mdepkg\library\uefidevicepathlib\devicepathutilities.c
      UINTN Count;
      UINTN Size;
      UINTN NodeLength;
   
      ASSERT (DevicePath != NULL);
   
      for (Count = 0, Size = 0; !IsDevicePathEnd (DevicePath); DevicePath = NextDevicePathNode (DevicePath)) {
=&gt;      NodeLength = DevicePathNodeLength (DevicePath);
 
0x8cd9d1e4  line: 349  file: c:\concolic\excite\flow\workspace\mdepkg\library\uefidevicepathlib\devicepathutilities.c
    {
      CONST EFI_DEVICE_PATH_PROTOCOL  *Start;
   
      if (DevicePath == NULL) {
        return 0;
      }
   
=&gt;    if (!IsDevicePathValid (DevicePath, 0)) {
 
0x8cd9d25e  line: 44  file: c:\concolic\excite\flow\workspace\mdepkg\library\uefidevicepathlib\uefidevicepathlib.c
    **/
    UINTN
    EFIAPI
    GetDevicePathSize (
      IN CONST EFI_DEVICE_PATH_PROTOCOL  *DevicePath
      )
    {
=&gt;    return UefiDevicePathLibGetDevicePathSize (DevicePath);
 
0x8cd862b0  line: 274  file: c:\concolic\excite\flow\workspace\kabylakeplatsamplepkg\override\bpcommonpkg\universal\opalpassword\smm\opalpasswordsmm.c
      )
    {
      OPAL_DEVICE_LIST                  *List;
      OPAL_DEVICE_LIST                  *Dev;
      LIST_ENTRY                        *Entry;
      UINTN                             DevicePathLen;
   
=&gt;    DevicePathLen = GetDevicePathSize (DevicePath);
 
0x8cd8688a  line: 666  file: c:\concolic\excite\flow\workspace\kabylakeplatsamplepkg\override\bpcommonpkg\universal\opalpassword\smm\opalpasswordsmm.c
        case SMM_FUNCTION_SET_OPAL_PASSWORD:
            if (PasswordIsFullZero (NewPassword) || PasswordLength == 0) {
              Status = EFI_INVALID_PARAMETER;
              goto EXIT;
            }
   
            DEBUG ((DEBUG_INFO, &quot;call SavePasswordToSmm\n&quot;));
=&gt;          Status = SavePasswordToSmm (DevicePath, NewPassword, PasswordLength);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>849</commentid>
    <comment_count>1</comment_count>
      <attachid>19</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2016-11-08 09:22:15 +0000</bug_when>
    <thetext>Created attachment 19
attach patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>917</commentid>
    <comment_count>2</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2016-11-14 15:43:52 +0000</bug_when>
    <thetext>The code was included in the former UDK so it should be considered &apos;new&apos;. Recommend following industry recommendation of the 6 month embargo if deemed a security critical issue by InfoSec group bug scrub.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>942</commentid>
    <comment_count>3</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2016-11-15 09:40:54 +0000</bug_when>
    <thetext>agree this is a critical issue.  code has been shipping in &gt; 0 UDK, etc.   Should be subject to embargo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>944</commentid>
    <comment_count>4</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2016-11-15 09:48:09 +0000</bug_when>
    <thetext>Suggest reporting this to the USRT, too.  Send mail to USRT saying &apos;Potential issue in EDKII, see details in bugzilla 198&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2858</commentid>
    <comment_count>5</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2017-10-11 03:31:56 +0000</bug_when>
    <thetext>embargo expired.

please move fix to the truck</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3577</commentid>
    <comment_count>6</comment_count>
    <who name="John Loucaides">john.loucaides</who>
    <bug_when>2018-02-12 18:09:57 +0000</bug_when>
    <thetext>Intel is aligning various firmware releases to include this patch. We expect to update the public advisories once complete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3883</commentid>
    <comment_count>7</comment_count>
    <who name="">ayellet.wolman</who>
    <bug_when>2018-04-16 21:09:14 +0000</bug_when>
    <thetext>
Title:	EDK II Opal Password SMM Issue
Reference:	CVE-2018-3642
Impact:	Elevation of Privilege
Severity:	
7.5 (High) - CVSS:3.0/AV:L/AC:H/PR:H/UI:N/S:C/C:H/I:H/A:H

July 10, 2018 - Coordinated Public Disclosure date (Intel plans to publish a security advisory for Tianocore on on this date.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4403</commentid>
    <comment_count>8</comment_count>
    <who name="Ryan Ware">ryan.ware</who>
    <bug_when>2018-07-25 19:14:57 +0000</bug_when>
    <thetext>Jiewen, please submit this code to public.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4472</commentid>
    <comment_count>9</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2018-08-01 07:18:02 +0000</bug_when>
    <thetext>EdkII trunk and UDK2018 not have this issue because Opal remodeling. Checked in the attach patch to UDK2017 and cherry pick to UDK2015 after pass community code review.


UDK2015 change log:
SHA-1: 1a55083d6a815a02dc0225eb95868ec64c72e8ee

* SecurityPkg OpalPasswordSupportLib: Add check to avoid potential buffer overflow.

Current code not check the CommunicationBuffer size before use it. Attacker can
read beyond the end of the (untrusted) commbuffer into controlled memory. Attacker
can get access outside of valid SMM memory regions. This patch add check before
use it.

bugz: https://bugzilla.tianocore.org/show_bug.cgi?id=198

Cc: Yao Jiewen &lt;jiewen.yao@intel.com&gt;
Cc: Wu Hao &lt;hao.a.wu@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Yao Jiewen &lt;jiewen.yao@intel.com&gt;
(cherry picked from commit 87acb6e298e718250dd8b741b6888a3a54c7cb5a)


UDK2017 change log:
SHA-1: 87acb6e298e718250dd8b741b6888a3a54c7cb5a

* SecurityPkg OpalPasswordSupportLib: Add check to avoid potential buffer overflow.

Current code not check the CommunicationBuffer size before use it. Attacker can
read beyond the end of the (untrusted) commbuffer into controlled memory. Attacker
can get access outside of valid SMM memory regions. This patch add check before
use it.

bugz: https://bugzilla.tianocore.org/show_bug.cgi?id=198

Cc: Yao Jiewen &lt;jiewen.yao@intel.com&gt;
Cc: Wu Hao &lt;hao.a.wu@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Yao Jiewen &lt;jiewen.yao@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7119</commentid>
    <comment_count>10</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-04-12 14:33:22 +0000</bug_when>
    <thetext>if fixed, did we create an advisory entry https://legacy.gitbook.com/book/edk2-docs/security-advisory/details for this and convert the bug to open?</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>19</attachid>
            <date>2016-11-08 09:22:15 +0000</date>
            <delta_ts>2016-11-08 09:22:15 +0000</delta_ts>
            <desc>attach patch</desc>
            <filename>0001-SecurityPkg-OpalPasswordSupportLib-Add-check-to-avoi.patch</filename>
            <type>text/plain</type>
            <size>7451</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>112</bug_id>
          
          <creation_ts>2016-09-07 16:33:48 +0000</creation_ts>
          <short_desc>UEFI Shell &apos;devtree&apos; command causes ASSERT</short_desc>
          <delta_ts>2016-09-08 14:47:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>tapandshah</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>tapandshah</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>468</commentid>
    <comment_count>0</comment_count>
      <attachid>10</attachid>
    <who name="">tapandshah</who>
    <bug_when>2016-09-07 16:33:48 +0000</bug_when>
    <thetext>Created attachment 10
DEVTREE_ASSERT_ON_NT32_SNAPSHOT

When running UEFI Shell ‘devtree’ command on NT32 system using EDK2 trunk code, it causes ASSERT in system. The same issue is reproducible on a real hardware as well.

ASSERT!: c:\materials\uefi\sourceforge\ShellPkg\Library\UefiHandleParsingLib\UefiHandleParsingLib.c (2812): (MatchingHandleBuffer == ((void *) 0)) || (*MatchingHandleCount == 0 &amp;&amp; *Mat</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>470</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-09-08 03:28:25 +0000</bug_when>
    <thetext>I too have recently seen some crashes with the DEVTREE command:

https://lists.01.org/pipermail/edk2-devel/2016-August/000929.html

On 08/19/16 14:49, Laszlo Ersek wrote:
&gt;   I also ran into a couple of UEFI shell crashes with &quot;devtree&quot; and &quot;dh
&gt;   -d -v&quot; (when listing all devices in the system). [...]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>471</commentid>
    <comment_count>2</comment_count>
    <who name="">tapandshah</who>
    <bug_when>2016-09-08 10:05:17 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; I too have recently seen some crashes with the DEVTREE command:
&gt; 
&gt; https://lists.01.org/pipermail/edk2-devel/2016-August/000929.html
&gt; 
&gt; On 08/19/16 14:49, Laszlo Ersek wrote:
&gt; &gt;   I also ran into a couple of UEFI shell crashes with &quot;devtree&quot; and &quot;dh
&gt; &gt;   -d -v&quot; (when listing all devices in the system). [...]

Yes, I saw ASSERT on &apos;dh -d -v&apos; as well on NT32. ASSERT in both commands come from the same file UefiHandleParsingLib.c and line # 2812.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>472</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-09-08 10:52:19 +0000</bug_when>
    <thetext>Okay, looking at the ParseHandleDatabaseForChildControllers() function, I can see the bug.

The bug happens when ParseHandleDatabaseForChildControllers() finds no child controller handles at all.

Consider:

  if (MatchingHandleBuffer != NULL) {
    *MatchingHandleBuffer = HandleBufferForReturn;
  } else {
    FreePool(HandleBufferForReturn);
  }
  ASSERT ((MatchingHandleBuffer == NULL) ||
          (*MatchingHandleCount == 0 &amp;&amp; *MatchingHandleBuffer == NULL) ||
          (*MatchingHandleCount != 0 &amp;&amp; *MatchingHandleBuffer != NULL));

If (MatchingHandleBuffer == NULL), that&apos;s fine; it means that the caller is not interested in the actual handles, only in their count.

However, if (MatchingHandleBuffer != NULL) -- i.e., the caller is interested in the child controller handles themselves --, but we find zero such handles, the following happens:

- *MatchingHandleCount keeps its initial value of zero,
- *MatchingHandleBuffer is set to HandleBufferForReturn,
- however, HandleBufferForReturn is definitely non-NULL, because we allocated
  it like this:

  //
  // Get a buffer big enough for all the controllers.
  //
  HandleBufferForReturn = GetHandleListByProtocol(NULL);
  if (HandleBufferForReturn == NULL) {
    FreePool (DriverBindingHandleBuffer);
    return (EFI_NOT_FOUND);
  }

The fix goes like:

diff --git a/ShellPkg/Library/UefiHandleParsingLib/UefiHandleParsingLib.c b/ShellPkg/Library/UefiHandleParsingLib/UefiHandleParsingLib.c
index 3fb55df8cc14..10df25fc071a 100644
--- a/ShellPkg/Library/UefiHandleParsingLib/UefiHandleParsingLib.c
+++ b/ShellPkg/Library/UefiHandleParsingLib/UefiHandleParsingLib.c
@@ -2802,11 +2802,18 @@ ParseHandleDatabaseForChildControllers(
 
   FreePool (DriverBindingHandleBuffer);
 
+  if (MatchingHandleBuffer == NULL || *MatchingHandleCount == 0) {
+    //
+    // The caller is not interested in the actual handles, or we&apos;ve found none.
+    //
+    FreePool (HandleBufferForReturn);
+    HandleBufferForReturn = NULL;
+  }
+
   if (MatchingHandleBuffer != NULL) {
     *MatchingHandleBuffer = HandleBufferForReturn;
-  } else {
-    FreePool(HandleBufferForReturn);
   }
+
   ASSERT ((MatchingHandleBuffer == NULL) ||
           (*MatchingHandleCount == 0 &amp;&amp; *MatchingHandleBuffer == NULL) ||
           (*MatchingHandleCount != 0 &amp;&amp; *MatchingHandleBuffer != NULL));

I&apos;ll send this to the list (after testing it, of course).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>474</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-09-08 12:15:14 +0000</bug_when>
    <thetext>Posted patches:
https://lists.01.org/pipermail/edk2-devel/2016-September/001538.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>475</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-09-08 14:47:27 +0000</bug_when>
    <thetext>Fixed in commit range 1b3be4a12e7d..7eb3bb6c552d.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>10</attachid>
            <date>2016-09-07 16:33:48 +0000</date>
            <delta_ts>2016-09-07 16:33:48 +0000</delta_ts>
            <desc>DEVTREE_ASSERT_ON_NT32_SNAPSHOT</desc>
            <filename>devtree_assert.jpg</filename>
            <type>image/jpeg</type>
            <size>196429</size>
            <attacher>tapandshah</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>148</bug_id>
          
          <creation_ts>2016-10-14 03:02:10 +0000</creation_ts>
          <short_desc>[UefiCpuPkg] CLANG38 build failed on CpuId.c</short_desc>
          <delta_ts>2016-10-19 01:52:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Jeff Fan">vanjeff_919</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>602</commentid>
    <comment_count>0</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-10-14 03:02:10 +0000</bug_when>
    <thetext>while-loop should be removed from the following code.

  AsmCpuidEx (
    CPUID_STRUCTURED_EXTENDED_FEATURE_FLAGS,
    CPUID_STRUCTURED_EXTENDED_FEATURE_FLAGS_SUB_LEAF_INFO,
    &amp;Eax, NULL, NULL, NULL
    );
  for (SubLeaf = 0; SubLeaf &lt;= Eax; SubLeaf++) {
    AsmCpuidEx (
      CPUID_STRUCTURED_EXTENDED_FEATURE_FLAGS,
      SubLeaf,
      NULL, &amp;Ebx.Uint32, &amp;Ecx.Uint32, NULL
      );
    SubLeaf++;
  } while (SubLeaf &lt;= Eax);

It caused CLANG38 build failed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>627</commentid>
    <comment_count>1</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-10-19 01:49:24 +0000</bug_when>
    <thetext>Fixed it one trunk and pass CLANG38 build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>628</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-10-19 01:52:21 +0000</bug_when>
    <thetext>push the fix SHA-1: d93a10c02bd963cc11670a9e02ce396764838768</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>413</bug_id>
          
          <creation_ts>2017-03-02 01:15:20 +0000</creation_ts>
          <short_desc>Overflowed array index</short_desc>
          <delta_ts>2018-12-27 12:25:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>karunakar_poosapalli</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1557</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-03-02 01:15:20 +0000</bug_when>
    <thetext>[Issue Details]
File Path: NetworkPkg/HttpBootDxe/HttpBootClient.c
HttpBootDhcp4ExtractUriInfo()
Line No 160
  ASSERT (Private-&gt;SelectIndex != 0);
  SelectIndex = Private-&gt;SelectIndex - 1;
[Issue]
If  Private-&gt;SelectIndex is 0, it can be the SelectIndex as overflowed array index
In DEBUG Mode it will give the ASSERT and no issues,
But in Release Mode ASSERT won&apos;t happen and SelectIndex will becomes Negative
      SelectIndex = Private-&gt;SelectIndex - 1; // SelectIndex = 0 - 1;

The same issue in Dhcp6 case also
HttpBootDhcp6ExtractUriInfo()

[Changes Proposed]
EFI_STATUS
HttpBootDhcp4ExtractUriInfo (
  IN     HTTP_BOOT_PRIVATE_DATA   *Private
  )
{
.....
......
  - ASSERT (Private-&gt;SelectIndex != 0);
  + if (Private-&gt;SelectIndex == 0) {
  +    return EFI_DEVICE_ERROR;
  + }
  SelectIndex = Private-&gt;SelectIndex - 1;
...
...
}


EFI_STATUS
HttpBootDhcp6ExtractUriInfo (
  IN     HTTP_BOOT_PRIVATE_DATA   *Private
  )
{
...
...

  - ASSERT (Private-&gt;SelectIndex != 0);
  +   if (Private-&gt;SelectIndex == 0) {
  +    return EFI_DEVICE_ERROR;
  + }
   SelectIndex = Private-&gt;SelectIndex - 1;
...
...
}

Update if this can be addressed.

Regards,
Karunakar.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1563</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-02 19:07:39 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1573</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-02 21:19:51 +0000</bug_when>
    <thetext>
Identify it&apos;s not the bug since the case won&apos;t happen according the code logic.

Analysis:
Private-&gt;SelectIndex can&apos;t be zero once the HttpBoot finished the D.O.R.A/S.A.R.R exchange successfully.

  Status = HttpBootDhcp (Private);
  if (EFI_ERROR (Status)) {
    return Status;
  }

  if (!Private-&gt;UsingIpv6) {
    Status = HttpBootDhcp4ExtractUriInfo (Private);
  } else {
    Status = HttpBootDhcp6ExtractUriInfo (Private);
  }

According the current HttpBoot DHCP configuration, DHCP4/DHCP6 Start() function call is a blocking operation, which means the Private-&gt;SelectIndex must be updated in DhcpCallBack during the HttpBootDhcp process. The returned status code of DhcpCallBack determines the behavior of the DHCP Protocol. Detailed see HttpBootDhcp4CallBack/HttpBootDhcp6CallBack:

    //
    // Select offer according to the priority in UEFI spec, and record the SelectIndex 
    // and SelectProxyType.
    //
    HttpBootSelectDhcpOffer (Private);

    if (Private-&gt;SelectIndex == 0) {
      Status = EFI_ABORTED;
    }

So, ASSERTION in HttpBootDhcp4ExtractUriInfo/HttpBootDhcp6ExtractUriInfo should be fine.


Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1644</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-20 03:42:31 +0000</bug_when>
    <thetext>No commit.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>741</bug_id>
          
          <creation_ts>2017-10-22 22:29:43 +0000</creation_ts>
          <short_desc>UefiLib.c Compilation failure under macOS High Sierra/Xcode9</short_desc>
          <delta_ts>2018-01-18 23:52:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Mac OS</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shiyao Wang">wangshiyao</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>wangshiyao</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2017</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2910</commentid>
    <comment_count>0</comment_count>
    <who name="Shiyao Wang">wangshiyao</who>
    <bug_when>2017-10-22 22:29:43 +0000</bug_when>
    <thetext>I&apos;m using macOS High Sierra with Xcode 9.0.1
When building EDK2, both the master branch and the UDK2017 branch, UDK2015 branch, I got a warning and the build is terminated by &quot;-Werror&quot; and &quot;-Wvarargs&quot; parameter, saying &quot;/Users/wsy/code/github.com/tianocore/edk2/MdePkg/Library/UefiLib/UefiLib.c:1530:19: error: passing an object that undergoes default argument promotion to &apos;va_start&apos; has undefined behavior [-Werror,-Wvarargs]&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2950</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-26 20:09:24 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner to quick check first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2959</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-10-29 22:44:45 +0000</bug_when>
    <thetext>This is the same issue with https://bugzilla.tianocore.org/show_bug.cgi?id=410. 

We only add the -Wno-varargs and depress the warning in CLANG38 tool chain. Please try to add -Wno-varargs in XCODE5 build flag to disable this warning. Please refer the 47bfbd7f8069e523798ef973c8eb0abd5c6b0746</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3336</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-04 03:40:15 +0000</bug_when>
    <thetext>I will add -Wno-varargs in XCODE5 tool chain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3343</commentid>
    <comment_count>4</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2018-01-04 19:28:36 +0000</bug_when>
    <thetext>Should we fix the API as the C code is not legal per the C standard? This is same as the &lt;&lt; 32 issues we cleaned up, it is all undefined behavior. The only real fix is to remove the integer promotion like Shiyan Wang&apos;s patch. 

Given it is undefined behavior the compiler is not required to generate code for this API. At some point in the future clang may enforce the C standard and optimize away the undefined behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3344</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-04 20:17:22 +0000</bug_when>
    <thetext>Here is the discussion mail in edk2 community https://lists.01.org/pipermail/edk2-devel/2018-January/019707.html. There are two reasons to disable this warning now.
1. Disable this warning has no functionality impact.
2. PI S3SaveState protocol is also required to be updated. We need to update PI spec first. 


For now, I choose to disable this warning. For long term, I will submit PI ECR to update PI spec, then change edk2 code to resolve this warning. Is this plan OK?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3449</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-18 23:51:48 +0000</bug_when>
    <thetext>https://bugzilla.tianocore.org/show_bug.cgi?id=741</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3450</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-18 23:52:46 +0000</bug_when>
    <thetext>Fix at https://github.com/tianocore/edk2/commit/24a105a7d8b4b8312743cf265f869dc049b7ff92</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>625</bug_id>
          
          <creation_ts>2017-07-11 08:53:44 +0000</creation_ts>
          <short_desc>UEFI AARCH64 code must not use X18 register</short_desc>
          <delta_ts>2019-05-18 10:29:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Alexei">Alexei.Fedorov</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>Alexei.Fedorov</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>shala.arshi</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2416</commentid>
    <comment_count>0</comment_count>
    <who name="Alexei">Alexei.Fedorov</who>
    <bug_when>2017-07-11 08:53:44 +0000</bug_when>
    <thetext>UEFI 2.7 Specification states that &quot;The EFI AArch64 platform binding defines the platform register (r18) as “do not use”. Avoiding use of r18 in firmware makes the code compatible with both a fixed role for r18 defined by the OS platform ABI and the use of r18 by the OS and its applications as a temporary register.&quot;
If AARCH64 UEFI image is generated with optimisation level 2 or higher GCC compiler generates code which makes use of X18 register preventing Windows OS from booting (Data Abort exception was raised in Windows boot loader as the content of its X18 got corrupted.)
This UEFI code generation with X18 being used was observed with the Linaro GCC 7.1-2017.05 Release
https://releases.linaro.org/components/toolchain/binaries/7.1-2017.05/aarch64-elf/
but previous GCC version also might be affected.
Also see
https://bugs.winehq.org/show_bug.cgi?id=38780
https://gcc.gnu.org/ml/gcc/2015-07/msg00106.html

The simple work-around is to add &quot;-ffixed-x18&quot; option to 
DEFINE GCC_AARCH64_CC_FLAGS section of edk2\BaseTools\Conf\tools_def.template</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2433</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-07-12 21:04:00 +0000</bug_when>
    <thetext>arm related</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7655</commentid>
    <comment_count>2</comment_count>
      <attachid>342</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:14:22 +0000</bug_when>
    <thetext>Created attachment 342
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7685</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-17 16:00:08 +0000</bug_when>
    <thetext>change assignee back to Ard.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7699</commentid>
    <comment_count>4</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-05-18 10:29:08 +0000</bug_when>
    <thetext>Fixed in commit 6d73863b5464f dated 13 July 2017</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>342</attachid>
            <date>2019-05-17 13:14:22 +0000</date>
            <delta_ts>2019-05-17 13:14:22 +0000</delta_ts>
            <desc>data</desc>
            <filename>file_625.txt</filename>
            <type>text/plain</type>
            <size>4</size>
            <attacher>shala.arshi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>132</bug_id>
          
          <creation_ts>2016-09-28 20:49:42 +0000</creation_ts>
          <short_desc>GenFds crashes if [FmpPayload] FILE DATA points to file generated by [FV] or [FD] section</short_desc>
          <delta_ts>2016-11-14 02:29:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>528</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-09-28 20:49:42 +0000</bug_when>
    <thetext>The [FmpPayload] section in an FDF file supports a FILE DATA
statement to provide the path to the data file to put into
an FMP Payload.  This feature works if the file already exists.

GenFds will crash if the file does not exist at the time the 
FDF file is parsed.  This is expected if the path is to a file
that will never exit.

However, it is common for an FMP Payload to contain an FV or 
FD image file generated by the same FDF file that produces
the FMP Payload file.

WORKAROUND: Create a dummy file for the FV or FD output file
that is referenced in the FMP FILE DATA statement before running 
the build.  

Proposed Solutions:
1) Process [FmpPayload] sections last in GenFds.
2) When FDF file is parsed by GenFds, detect dependencies
like these and process the sections of the FDF file in
the proper order.

Here is a build log of a failure:

Build environment: Windows-post2008Server-6.2.9200
Build start time: 17:46:13, Sep.28 2016

WORKSPACE        = d:\work\github\tianocore
PACKAGES_PATH    = d:\work\github\tianocore\edk2;d:\work\github\tianocore\edk2-non-osi
ECP_SOURCE       = d:\work\github\tianocore\edk2\edkcompatibilitypkg
EDK_SOURCE       = d:\work\github\tianocore\edk2\edkcompatibilitypkg
EFI_SOURCE       = d:\work\github\tianocore\edk2\edkcompatibilitypkg
EDK_TOOLS_PATH   = d:\work\github\tianocore\edk2\basetools
EDK_TOOLS_BIN    = d:\work\github\tianocore\edk2-basetools-win32
CONF_PATH        = d:\work\github\tianocore\conf


Architecture(s)  = IA32
Build target     = DEBUG
Toolchain        = VS2015x86

Active Platform          = d:\work\github\tianocore\edk2\QuarkPlatformPkg\QuarkCapsule.dsc
Flash Image Definition   = d:\work\github\tianocore\edk2\QuarkPlatformPkg\QuarkCapsule.fdf


GenFds...
 : error 000E: File/directory not found in workspace
	d:\work\github\tianocore\Build\Quark\DEBUG_VS2015x86\FV\BIOSUPDATECARGO.Fv is not found in packages path:
	d:\work\github\tianocore\edk2
	d:\work\github\tianocore\edk2-non-osi


build...
 : error 7000: Failed to execute command
	GenFds -f d:\work\github\tianocore\edk2\QuarkPlatformPkg\QuarkCapsule.fdf --conf=d:\work\github\tianocore\conf -o d:\work\github\tianocore\Build\Quark\DEBUG_VS2015x86 -t VS2015x86 -b DEBUG -p d:\work\github\tianocore\edk2\QuarkPlatformPkg\QuarkCapsule.dsc -a IA32  -D &quot;EFI_SOURCE=d:\\work\\github\\tianocore\\edk2\\edkcompatibilitypkg&quot;  -D &quot;EDK_SOURCE=d:\\work\\github\\tianocore\\edk2\\edkcompatibilitypkg&quot;  -D &quot;TOOL_CHAIN_TAG=VS2015x86&quot;  -D &quot;TOOLCHAIN=VS2015x86&quot;  -D &quot;TARGET=DEBUG&quot;  -D &quot;FAMILY=MSFT&quot;  -D &quot;WORKSPACE=d:\\work\\github\\tianocore&quot;  -D &quot;EDK_TOOLS_PATH=d:\\work\\github\\tianocore\\edk2\\basetools&quot;  -D &quot;ARCH=IA32&quot;  -D &quot;ECP_SOURCE=d:\\work\\github\\tianocore\\edk2\\edkcompatibilitypkg&quot; [d:\work\github\tianocore]

- Failed -
Build end time: 17:46:16, Sep.28 2016
Build total time: 00:00:03</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>530</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-09-28 21:09:06 +0000</bug_when>
    <thetext>it block additional FMP generation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>559</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-10-05 19:35:42 +0000</bug_when>
    <thetext>I have a proposed fix to skip the file present verification for FILE DATA statements in [FmpPayload] sections when the FDF file is parsed if the file path is in $(OUTPUT_DIRECTORY).  This file present verification step can be moved to the step where the [FmpPayload] sections are processed and the FMP Payload output files are generated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>594</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-13 01:38:23 +0000</bug_when>
    <thetext>push the fix version: SHA-1: 19e3aa7a8a8dcd661e0c2c45d139c5a6bda57dbb

We extend FMP EBNF to support FV statement and FD statement.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>941</bug_id>
          
          <creation_ts>2018-04-24 13:10:53 +0000</creation_ts>
          <short_desc>Build fails for platforms using hierarchical dsc</short_desc>
          <delta_ts>2018-05-01 21:52:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3921</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2018-04-24 13:10:53 +0000</bug_when>
    <thetext>Commit 3378782691af1158560579444a23bdd2f0a7d154

Author: Yunhua Feng &lt;yunhuax.feng@intel.com&gt;  2018-04-09 19:50:25
Committer: Yonghong Zhu &lt;yonghong.zhu@intel.com&gt;  2018-04-19 00:47:36
Parent: 25598f8bdbd63dd96194fd3f43dd53dd814cd1c0 (BaseTools: merge towards minimum PCD MAX &lt;something&gt; methods)
Child:  411a373ed6426fb1bff253905b6a59ada44e18ad (ArmPkg/TimerDxe: remove workaround for KVM timer handling)
Branches: bcm/master, master, remotes/origin/master
Follows: 
Precedes: 

    BaseTools: Support DSC component !include PCD items
    
    DSC format:
    [Components]
      TestPkg/TestDriver.inf {
        &lt;PcdsFixedAtBuild&gt;
          !include TestPkg/Test.txt
      }
    
    Test.txt content:
    PcdToken.PcdCName | 0x123
    
    Per spec we should support this usage.
    
    Contributed-under: TianoCore Contribution Agreement 1.1
    Signed-off-by: Yunhua Feng &lt;yunhuax.feng@intel.com&gt;
    Reviewed-by: Yonghong Zhu &lt;yonghong.zhu@intel.com&gt;
causes build failure for platforms using hierarchical dsc.

My platforms are using hierarchical dsc like this:
board-specific.dsc
|--Common_defines.inc
|     |---Platform_defines.inc (does not !include anything)
|--Platform_dsc.inc
      |---Common_dsc.inc (does not !include anything)

This way it is easy to add new boards/platforms.
Note that platform_def.inc is included only once for a platform from Common_def.inc. !include is not used by any platform for a certain component.
Now when I build platform1, build succeeds.
However, if I want to build another platform, I immediately get
&quot;build.py...
/edk2/BroadcomPlatformPkg/NS2Pkg/NS2Pkg_defines.dsc.inc(237): error 000D: File or directory already exists
        /edk2/BroadcomPlatformPkg/NS2Pkg/NS2Pkg_defines.dsc.inc is already included at a higher level.&quot;
Then I do &quot;clean&quot; for failed platform.
I get the same issue. But then I do &quot;clean&quot; again for the failed platform, and this time it succeeds and I can build that platform. However, now when I build the previously &quot;good&quot; platform, it fails to build with
&quot;build.py...
/edk2/BroadcomPlatformPkg/StingrayPkg/StingrayPkg_defines.dsc.inc(237): error 000D: File or directory already exists
        /edk2/BroadcomPlatformPkg/StingrayPkg/StingrayPkg_defines.dsc.inc is already included at a higher level.&quot;
Again, I do &quot;clean&quot; twice, and then I can build this platform, but after that I cannot build another platform until I do &quot;clean&quot; twice for it.

Here is excerpt from Common_defines.inc:

[Defines]

  PLATFORM_NAME       = $(PLAT)

  #
  # These vars are default for .fdf
  # Platform may override as needed
  #
!ifndef $(FV_SIZE)
!if $(EMULATION)  == TRUE
  # FV volume adjustment (only if the board has not yet specified it)
  FV_SIZE              = 0xf00000
  FV_BLOCK_SIZE        = 0xf00
  FV_BLOCK_COUNT       = 0x1000
!else
  FV_SIZE             = 0x122000
  FV_BLOCK_SIZE       = 0x1000
  FV_BLOCK_COUNT      = 0x122
!if $(TARGET)    == RELEASE
  FV_SIZE             = 0xcb000
  FV_BLOCK_SIZE       = 0xcb
  FV_BLOCK_COUNT      = 0x1000
!endif
!endif
!endif

!ifndef $(FV_BASE_ADDRESS)
  FV_BASE_ADDRESS     = 0x80000000
!endif

  _REPLY              = TRUE

!if $(BARE_MINIMUM) == TRUE
  _REPLY              = FALSE

  #
  # Note this might cause memory fragmentation.
  # Reboot will be required if it is not possible to
  # load an EFI image from within BDS.
  # It is possible to set required parameters in the
  # platform (see RD_DATA_PAGES etc. settings), but setting
  # this in the platform is tricky, and needs many trials and errors.
  #
!ifndef $(AUTO_PAGES)
  AUTO_PAGES          = TRUE
!endif

!endif
  #
  # Generic BDS has become a standard. Intel BDS has issues
  # when image is built with RELEASE. Set Generic BDS by default.
  #
!ifndef $(USE_INTEL_BDS)
  USE_INTEL_BDS       = FALSE
  SECURE_BOOT_ENABLE  = FALSE
!endif
  BUILD_SHELL         = TRUE
  USE_TEST_SERIALDRV  = FALSE

  DEFINE EDK2_SKIP_PEICORE = 1

  #
  # Enable devices for the platform
  # Override in the platform dsc as needed
  #
!ifndef $(ENABLE_AMAC)
  ENABLE_AMAC             = $(_REPLY)
!endif
!ifndef $(ENABLE_EMMC)
  ENABLE_MMC              = $(_REPLY)
!endif
!ifndef $(ENABLE_NAND)
  ENABLE_NAND             = $(_REPLY)
!endif
!ifndef $(ENABLE_QSPI)
  ENABLE_QSPI             = $(_REPLY)
!endif
!ifndef $(ENABLE_QSPIBLOCK)
  ENABLE_QSPIBLOCK        = $(ENABLE_QSPI)
!endif
!ifndef $(ENABLE_RESET)
  ENABLE_RESET            = $(_REPLY)
!endif
!ifndef $(ENABLE_RTC)
  ENABLE_RTC              = $(_REPLY)
!endif
  ENABLE_UART             = TRUE
!ifndef $(ENABLE_NON_DISCOVERABLE)
  ENABLE_NON_DISCOVERABLE = $(_REPLY)
!endif

!ifndef $(ENABLE_GRAPHICS_CONSOLE)
  ENABLE_GRAPHICS_CONSOLE = FALSE
!endif
!ifndef $(ENABLE_PCI_PLATFORM)
  ENABLE_PCI_PLATFORM     = $(_REPLY)
!endif
!ifndef $(ENABLE_USB_OTG)
  ENABLE_USB_OTG          = FALSE
!endif

!if $(ENABLE_NON_DISCOVERABLE) == TRUE
  ENABLE_USB_SUPPORT      = TRUE
  ENABLE_PCI              = TRUE
!endif

!if $(ENABLE_USB_SUPPORT)      == TRUE
  !ifndef $(ENABLE_USB_NET)
    ENABLE_USB_NET          = TRUE
    !ifndef $(USB_NET_TYPE)
      USB_NET_TYPE            = Ax88772b
    !endif
  !endif
!endif

!if $(ENABLE_AMAC) == TRUE
  ENABLE_LAN              = TRUE
!endif
!if $(ENABLE_USB_NET) == TRUE
  ENABLE_LAN              = TRUE
!endif

  # Enable Software support
!ifndef $(ENABLE_VARS)
  ENABLE_VARS             = $(_REPLY)
!endif
!ifndef $(ENABLE_SHELL)
  ENABLE_SHELL            = $(_REPLY)
!endif
!ifndef $(ENABLE_RUNTIME)
  ENABLE_RUNTIME          = $(_REPLY)
!endif
!ifndef $(EMULATION)
  EMULATION               = FALSE
!endif

  # Optional software (in alphabetical order)
  # Platform can override

!ifndef $(MEMTEST)
  MEMTEST                 = $(_REPLY)
!endif
!ifndef $(RAMDISK)
  RAMDISK                 = $(_REPLY)
!endif

  # Include platform-specific defines
!include BroadcomPlatformPkg/$(PLATFORM_NAME)Pkg/$(PLATFORM_NAME)Pkg_defines.dsc.inc

Here is a platform-specific define:

  # Platform-related defines (common for the platform; can be overriden by board)
  PLATFORM_GUID            = bea9e4e4-d268-4e28-833f-aaf5a1940064
  PLATFORM_VERSION         = 0.1

  FIRMWARE_RELEASE         = 0.01
  PLATFORM_SHORT_NAME      = NS2
  FV_BASE_ADDRESS          = 0x85000000
  FV_BLOCK_COUNT           = 0x160
  FV_BLOCK_SIZE            = 0x1000
  FV_SIZE                  = 0x160000

  SECURE_BOOT_ENABLE       = TRUE
# End of platform defines file

Is it not supported anymore?
Reverting this commit lets me build all platforms with no issues.

Thank you,
Vladimir</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3928</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-25 20:58:11 +0000</bug_when>
    <thetext>Hi Vladimir,

I will debug it soon, can we get your platform to debug ? is it open source ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3930</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-04-25 21:05:41 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3934</commentid>
    <comment_count>3</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2018-04-26 13:13:41 +0000</bug_when>
    <thetext>Hi Yonghong,

It is internal only currently, but we would like to opensource it and then upstream as an edk2 platform. Do you have any guideline on how to opensource? Meanwhile I requested an approval on releasing of the platform/platforms as an opensource.

Thank you,
Vladimir</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3957</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-01 21:52:39 +0000</bug_when>
    <thetext>fix it by SHA-1: a802b269061cf83c17b74dc166cf21efe25f938f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>582</bug_id>
          
          <creation_ts>2017-06-02 17:44:52 +0000</creation_ts>
          <short_desc>Use /WHOLEARCHIVE in MSFT family DLINK_FLAGS to improve detection of multiple defined symbols</short_desc>
          <delta_ts>2017-08-28 21:38:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2227</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-06-02 17:44:52 +0000</bug_when>
    <thetext>Here is the link to the complete thread on this topic

https://lists.01.org/pipermail/edk2-devel/2017-May/010922.html

A duplicate symbol was detected using XCODE5 tool chain.  This same
duplicate symbol was actually present in all tool chains, but was
not being detected.

The linker flag added for VS 2015 Update 2 that detects this duplicate symbol is /WHOLEARCHIVE:

https://lists.01.org/pipermail/edk2-devel/2017-May/011009.html

The size impact for adding /WHOLEARCHIVE to VS2015 and higher builds
is large,so the recommendation is to *not* add /WHOLEARCHIVE to DLINK_FLAGS
for all VS2015 and higher tool chains.

In order to add duplicate symbol detection without a size impact, there
are 2 proposals

1. Only add /WHOLEARCHIVE to NOOPT builds and only detect duplicate 
symbols for this build target.

2. Add an extra link step in build_rules.txt that links to a temp output
file using /WHOLEARCHIVE.  This temp file is never used, but performing
the action will detect duplicate symbols.  This may impact build
performance, so link time code generation and other linker flags that
take more time should be disabled for this extra link action.  If the
build performance for doing the extra link action is considered too large
than option (1) should be used instead.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2256</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-07 21:07:27 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2651</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-08-28 21:38:46 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/578211b882fa99b1f7c82c3e5fd7eeee1510772c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>428</bug_id>
          
          <creation_ts>2017-03-16 10:47:52 +0000</creation_ts>
          <short_desc>Abstract and refine UefiCpuPkg to be a generic package for all processor architectures.</short_desc>
          <delta_ts>2023-11-27 21:57:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>daniel.schaefer</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1623</commentid>
    <comment_count>0</comment_count>
      <attachid>45</attachid>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2017-03-16 10:47:52 +0000</bug_when>
    <thetext>Created attachment 45
Possible solution to abstarct UEfiCpuPkg

Modules under UefiCpuPkg has dependency with Intel IA32/X64 processor architecture. This gives difficulties to other processor architectures to leverage UefiCpuPkg, RISC-V processor architecture is one of the example. 
Currently RISC-V EDK2 port still stays in edk2-staging branch and should be  migrated to edk2 trunk as soon as possible to reflect the UEFI spec version 2.7. Prior to leverage modules under UefiCpuPkg, we will have to abstract and refine UefiCPuPkg as a generic processor package.
One possible solution to abstract UefiCpuPkg is attached.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1626</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-16 20:03:18 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22195</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2023-11-27 21:57:54 +0000</bug_when>
    <thetext>I believe this ticket is no longer valid...and no chance to go any further.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>45</attachid>
            <date>2017-03-16 10:47:52 +0000</date>
            <delta_ts>2017-03-16 10:47:52 +0000</delta_ts>
            <desc>Possible solution to abstarct UEfiCpuPkg</desc>
            <filename>UefiCpuPkg.pdf</filename>
            <type>application/pdf</type>
            <size>153000</size>
            <attacher name="Chang, Abner">abner.chang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>97</bug_id>
          
          <creation_ts>2016-08-11 01:58:19 +0000</creation_ts>
          <short_desc>[FDF Spec] FMPPAYLOAD section add the definition for CERTIFICATE_GUID and  MONOTONIC_COUNT</short_desc>
          <delta_ts>2016-10-12 17:24:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Kevin Shaw">kevin.w.shaw</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>kevin.w.shaw</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>420</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-08-11 01:58:19 +0000</bug_when>
    <thetext>FMP capsule cannot generate auth info. Current BaseTools can not support generating UEFI spec defined EFI_FIRMWARE_IMAGE_AUTHENTICATION.

so we propose FDF Spec  [FMPPAYLOAD] section add the definition for CERTIFICATE_GUID and  MONOTONIC_COUNT:

[FMPPAYLOAD.Payload1]
   MONOTONIC_COUNT = &lt;NumValUint64&gt;
   CERTIFICATE_GUID = &lt;GUID&gt;

a. The BaseTools will find the tool based upon the CERTIFICATE_GUID
b. CERTIFICATE_GUID  and MONOTONIC_COUNT must work as a pair
c. If CERTIFICATE_GUID is provided, the FMP payload is processed as UEFI FMP Authentication format. And MONOTONIC_COUNT MUST be provided.
d. If CERTIFICATE_GUID is not provided, the FMP payload is processed as UEFI FMP non-Authentication format. And MONOTONIC_COUNT MUST NOT be provided.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>432</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-08-12 03:17:41 +0000</bug_when>
    <thetext>advise to update: CERTIFICATE_GUID = &lt;RegistryFormatGUID&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>437</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-08-17 21:10:28 +0000</bug_when>
    <thetext>Bug scrub:  assign to proper owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>488</commentid>
    <comment_count>3</comment_count>
    <who name="Kevin Shaw">kevin.w.shaw</who>
    <bug_when>2016-09-13 19:57:39 +0000</bug_when>
    <thetext>Proposed FDF spec changes for version 1.27, including changes to resolve this bug, can be found at https://github.com/tianocore/tianocore.github.io/wiki/EDK%20II%20Specifications. Changes are per discussion with Zhu Yonghong, and review of DCDNs at ttps://lhauch.gitbooks.io/edk2specdcns/content/FdfSpec/index.html.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>585</commentid>
    <comment_count>4</comment_count>
    <who name="Kevin Shaw">kevin.w.shaw</who>
    <bug_when>2016-10-12 17:24:40 +0000</bug_when>
    <thetext>Since there has been no further feedback on the version 1.27 (draft) changes, that will become the new published version.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>115</bug_id>
          
          <creation_ts>2016-09-09 01:23:44 +0000</creation_ts>
          <short_desc>In Linux, Rsa2048Sha256Sign and Pkcs7Sign are not found</short_desc>
          <delta_ts>2016-11-14 02:29:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>478</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-09-09 01:23:44 +0000</bug_when>
    <thetext>Edk2 BaseTools adds some new tools Rsa2048Sha256Sign, Rsa2048Sha256GenerateKeys and Pkcs7Sign. But, their posixlike are missing in BaseTools\BinWrappers\PosixLike directory. So, they can&apos;t be used in Linux.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>507</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-21 10:41:02 +0000</bug_when>
    <thetext>choose BaseTools Package</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>512</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-09-22 01:25:56 +0000</bug_when>
    <thetext>assigned</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>520</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-22 20:46:41 +0000</bug_when>
    <thetext>change owner to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>526</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-27 02:02:45 +0000</bug_when>
    <thetext>fix it on version 324dd9b468fc53c1b162035334620e47a0637b41</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>583</bug_id>
          
          <creation_ts>2017-06-02 18:02:22 +0000</creation_ts>
          <short_desc>Add /Gw to CC_FLAGS for VS 2013 and higher tool chains</short_desc>
          <delta_ts>2017-06-23 00:34:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
    
    <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2228</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-06-02 18:02:22 +0000</bug_when>
    <thetext>The /Gw flag provides better size optimization by removing referenced
data elements in the data section of a PE/COFF image.

Gere is an overview of this flag:

https://blogs.msdn.microsoft.com/vcblog/2013/09/11/introducing-gw-compiler-switch/

Details:

VS2015: https://msdn.microsoft.com/en-us/library/dn305952(v=vs.140).aspx
VS2013: https://msdn.microsoft.com/en-us/library/dn305952(v=vs.120).aspx

The /Gw flag does a better job at size optimization than use of the
GLOBAL_REMOVE_IF_UNREFERENCED macro that is currently used for VS20xx
tool chains to remove unreferenced global variables.

The recommendation is to add /Gw to CC_FLAGS for VS2013 and higher
tool chain tags and update Base.h in MdePkg to check the _MSC_VER
and define GLOBAL_REMOVE_IF_UNREFERENCED to nothing for VS2013 and
higher tool chain tags.

For tool chains older than VS2013, /Gw must *not* be added to 
CC_FLAGS and GLOBAL_REMOVE_IF_UNREFERENCED must be defined to
__declspec(selectany) to support removal of referenced globals.

Supported _MSC_VER values:

  https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B

Proposed change for Base.h
===============================
//
// The Microsoft* C compiler can removed references to unreferenced data items
//  if the /OPT:REF linker option is used. We defined a macro as this is a
//  a non standard extension
//
#if defined(_MSC_EXTENSIONS) &amp;&amp; _MSC_VER &lt; 1800 &amp;&amp; !defined (MDE_CPU_EBC)
  ///
  /// Remove global variable from the linked image if there are no references to
  /// it after all compiler and linker optimizations have been performed.
  /// The non standard extension is only used for tool chains before VS2013.
  /// For VS2013 and newer tool chains, the compiler flag /Gw is used.
  ///
  #define GLOBAL_REMOVE_IF_UNREFERENCED __declspec(selectany)
#else
  ///
  /// Remove the global variable from the linked image if there are no references
  ///  to it after all compiler and linker optimizations have been performed.
  ///
  #define GLOBAL_REMOVE_IF_UNREFERENCED
#endif</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2229</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-06-02 18:07:43 +0000</bug_when>
    <thetext>edk2-devel thread that discusses /Gw flag and GLOBAL_REMOVE_IF_UNREFERENCED

https://lists.01.org/pipermail/edk2-devel/2017-May/010922.html

https://lists.01.org/pipermail/edk2-devel/2017-May/011015.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2230</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-06-02 18:12:34 +0000</bug_when>
    <thetext>There was also some discussion of the interaction between static
and GLOBAL_REMOVE_IF_UNREFERENCED.

GLOBAL_REMOVE_IF_UNREFERENCED must not be defined to static.  Some
global variables are intended to be visible across multiple source
files in a module or library.  If this macro is unconditionally defined
as static, then no cross source file sharing is possible.

For VS tool chains older than VS2013, GLOBAL_REMOVE_IF_UNREFERENCED is
define to __declspec(selectany).  This VS specific extension is not
compatible with static, so static can not mixed with the  
GLOBAL_REMOVE_OF_UNREFERENCED macro.  There is not know workaround 
for this compatibility issue at this time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2257</commentid>
    <comment_count>3</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-07 21:08:29 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2332</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-23 00:34:53 +0000</bug_when>
    <thetext>pushed the fix
BaseTools: SHA-1: 75f0094ef75f35869d70bd96375be8109da20553
MdePkg: SHA-1: b243ead0aa6b0ca904a5b3f30d31e2917dda360f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>203</bug_id>
          
          <creation_ts>2016-11-02 03:58:24 +0000</creation_ts>
          <short_desc>Windows GCC Build Failure with too long path</short_desc>
          <delta_ts>2016-11-14 02:32:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>812</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-02 03:58:24 +0000</bug_when>
    <thetext>When path is too long, build tool will wrap them into resp.txt, then call gcc @resp.txt. It will cause windows GCC build failure, because resp.txt still uses windows directory separator \.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>817</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-11-02 21:12:52 +0000</bug_when>
    <thetext>bug scrub:assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>844</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-04 03:01:25 +0000</bug_when>
    <thetext>Fix it in SHA-1: 669b6cc60bf610bbee32e79ed165ca604764c169</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>448</bug_id>
          
          <creation_ts>2017-03-28 14:08:52 +0000</creation_ts>
          <short_desc>VFRcompiler needs to update IMAGE_TOKEN</short_desc>
          <delta_ts>2017-04-26 01:19:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jannis Ötjengerdes">j.oetjengerdes</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>naveens</cc>
    
    <cc>nobody</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1697</commentid>
    <comment_count>0</comment_count>
    <who name="Jannis Ötjengerdes">j.oetjengerdes</who>
    <bug_when>2017-03-28 14:08:52 +0000</bug_when>
    <thetext>As I don&apos;t know what is happening exactly in your build scripts, I&apos;ll describe here what I expect and what&apos;s actually happen (or don&apos;t happen).

I am using IMAGE_TOKEN which I use similar to STRING_TOKEN

For example: 

if I have: 

#image IMAGE_TEST_IMAGE image.bmp 

the identifier isn&apos;t replaced by an id (s.th. like 0x0001) which is by when I&apos;m using strings. The result is that I get an error by vfr compile.

The actual failure is in the .vfr file itself (not in the .uni file).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1708</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-30 16:30:53 +0000</bug_when>
    <thetext>The VFR compiler is part of BaseTools; I&apos;m updating the Package field accordingly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1742</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-05 22:09:30 +0000</bug_when>
    <thetext>assign to Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1743</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-04-05 23:29:46 +0000</bug_when>
    <thetext>VFR Compiler has already supported IMAGE_TOKEN.
We have constructed case to pass build.
Case:
1. Add Image.bmp 
2. Add Image.idf file which contains following token:
   #image IMAGE_TEST_IMAGE Image.bmp
3. Add Image.bmp and Image.idf to the [Sources] section of the INF file of the  
   Driver.
4. Add image opcode in the VFR file
   image = IMAGE_TOKEN (IMAGE_TEST_IMAGE);

Use the latest edk2-BaseTools-win32.

It can pass build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1745</commentid>
    <comment_count>4</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-04-05 23:39:21 +0000</bug_when>
    <thetext>*** Bug 454 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1930</commentid>
    <comment_count>5</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-04-26 01:19:43 +0000</bug_when>
    <thetext>VFR Compiler has already supported IMAGE_TOKEN</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>586</bug_id>
          
          <creation_ts>2017-06-02 21:11:21 +0000</creation_ts>
          <short_desc>OID check in Time based AuthVariable code is not valid</short_desc>
          <delta_ts>2017-06-14 13:09:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="chao">chao.b.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>qin.long</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2237</commentid>
    <comment_count>0</comment_count>
      <attachid>74</attachid>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2017-06-02 21:11:21 +0000</bug_when>
    <thetext>Created attachment 74
ASN1 of detached P7B geneated with signtool

https://github.com/tianocore/edk2/commit/c035e37335ae43229d7e68de74a65f2c01ebc0af

That commit introduced a check for the Sha256 OID in the signed data (line 2250 of SecurityPkg/Library/AuthVariableLib/AuthService.c ).

This code makes bad assumptions about the ASN.1 format of the data.  Windows Signtool generates signatures that are not valid with this code and therefore get rejected.  

How is this tested?  Are there publicly available scripts and tools for verifying this?  

ASN.1 allows a huge amount of flexibility and just assuming it the digest algorithm OID will be located at SigData+13 is not going to work across tools.  This breaks PK verification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2259</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-08 20:08:01 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2260</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-06-08 22:59:58 +0000</bug_when>
    <thetext>One typical ASN.1 structure of PKCS7 Signature is
  ContentInfo {
     contentType = 1.2.840.113549.1.7.2   //(signedData)
     content {
       SignedData {
         version = 1
         ...
       }
     }
  }

The AuthData format defined in UEFI spec only use the &quot;SignedData&quot; part as payload, which means the ContentType must be discarded in final AuthData signature.

We double-checked the detached P7 signature generated from MSFT SignTool utility (from Visual Studio 2015):
&gt; signtool sign /fd sha256 /p7 .\ /p7co 1.2.840.113549.1.7.1 /p7ce DetachedSignedData /a /f TestPk.pfx /p 123 Test.bin

The output Test.bin.p7 follow the SignedData part struct (without ContentType).

In EDKII-implementation, the fixed offset (SigData + 13) was used to check the Digest Algo OID to avoid too heavy ASN.1 parser codes.
Yes, it&apos;s a little tricky and risky (ASN.1 format may be more flexibie). And this assumption just work well for the current test vectors.

The attached P7B signature looks one full-structured PKCS7 data, which is different with the UEFI spec and SignTool&apos;s output (for detached signature). 

Could you provide more data (signature, signing process) for our further evaluation?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2269</commentid>
    <comment_count>3</comment_count>
      <attachid>77</attachid>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-06-14 01:32:37 +0000</bug_when>
    <thetext>Created attachment 77
The interpretation of the signedData in UEFI Spec</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2270</commentid>
    <comment_count>4</comment_count>
      <attachid>78</attachid>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-06-14 01:33:36 +0000</bug_when>
    <thetext>Created attachment 78
ASN.1 From SignTool for Detached signing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2271</commentid>
    <comment_count>5</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-06-14 01:34:49 +0000</bug_when>
    <thetext>[Add more clarifications]

From the attached PNG file, the P7B encoding data includes the extra ContentType header, which is not compliant with the AuthData payload layout description defined in UEFI specification. (See attached email thread about the final conclusion of this structure definition). 

We also verify the results with SignTool utility from Windows Kits 8.0 and 8.1. (The file versions of SignTool are 6.2.9200.20789 and 6.3.9600.17298). The output P7 detached data is compliant the UEFI definition (without contentType). See attached ASN.1 structure attached in PNG file.

The offset may also be impacted by the length encoding: it&apos;s possible to encode the length with short (&lt;128 octets) and long form (&gt;=128 octets) for DER-encoded P7 data. Based on the description of construcing process of the signedData content in UEFI spec. Two-octets should be reaonable for AuthData payload here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2273</commentid>
    <comment_count>6</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2017-06-14 13:09:51 +0000</bug_when>
    <thetext>Thanks for the clarification.  Looks like we were using the wrong parameter for signing which caused this OID check to fail due to binary layout compatibility problems.  Fixing that has resolved the OID check failing but we still are not able to provision our PK with the latest UDK.  But lets close this bug since the OID problem was user error.   Thanks</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>74</attachid>
            <date>2017-06-02 21:11:21 +0000</date>
            <delta_ts>2017-06-02 21:11:21 +0000</delta_ts>
            <desc>ASN1 of detached P7B geneated with signtool</desc>
            <filename>ASN1 from signtool.PNG</filename>
            <type>image/png</type>
            <size>136758</size>
            <attacher name="Sean Brogan">sean.brogan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>77</attachid>
            <date>2017-06-14 01:32:37 +0000</date>
            <delta_ts>2017-06-14 01:32:37 +0000</delta_ts>
            <desc>The interpretation of the signedData in UEFI Spec</desc>
            <filename>FW UTWG Meeting (92111) minutes.pdf</filename>
            <type>application/pdf</type>
            <size>826408</size>
            <attacher name="Qin Long">qin.long</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>78</attachid>
            <date>2017-06-14 01:33:36 +0000</date>
            <delta_ts>2017-06-14 01:33:36 +0000</delta_ts>
            <desc>ASN.1 From SignTool for Detached signing</desc>
            <filename>ASN.1 From SignTool-Detached.png</filename>
            <type>image/png</type>
            <size>53718</size>
            <attacher name="Qin Long">qin.long</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>467</bug_id>
          
          <creation_ts>2017-04-10 04:33:56 +0000</creation_ts>
          <short_desc>BaseTools regression issue on the increment build</short_desc>
          <delta_ts>2017-04-12 23:00:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1785</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-04-10 04:33:56 +0000</bug_when>
    <thetext>In the latest edk2 BaseTools, I find two regression issues in the incremental build issue. 

1) After modify the tool chain option in tools_def.txt, it won&apos;t trig rebuild. 
2) After build clean or cleanall, build again will cause build failure. The error message says some autogen files are missing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1786</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-04-10 04:34:39 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1801</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-12 23:00:12 +0000</bug_when>
    <thetext>already push the fix in EDKII trunk and UDK2017.

EDKII trunk:
SHA-1: 86601b78955fbb7fbb4a2a7d8cdda99344b24384
SHA-1: 8ac3309f1bf6479268f9d01f0758d22359a1adc8


UDK2017:
SHA-1: e83897e90cba2e3221b470cadef286bf2e48cc74
SHA-1: 4df14106411c4e0f7a521862c68d7110264fd2e0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>121</bug_id>
          
          <creation_ts>2016-09-14 02:49:50 +0000</creation_ts>
          <short_desc>[BaseTools] change &apos;r+b&apos; mode to &apos;rb&apos; mode to handle the readonly RAW files</short_desc>
          <delta_ts>2016-11-14 02:28:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>489</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-14 02:49:50 +0000</bug_when>
    <thetext>BaseTools\Source\Python\GenFds\FfsFileStatement.py, line 104:

try:
   f = open(File, &apos;r+b&apos;)
except:
   GenFdsGlobalVariable.ErrorLogger(&quot;Error opening RAW file %s.&quot; % (File))


when user input the read-only files as the RAW file, it cause the open &apos;r+b&apos; mode operation failure. since this RAW file, we only read it  and no need to write it, so we should update it to &apos;rb&apos; mode to open the file.


example:
FDF file, the test.bin&apos;s attribute is set Read-only.

FILE RAW = 197DB236-F856-4924-90F8-CDF12FB875F3 {
  $(OUTPUT_DIRECTORY)/$(TARGET)_$(TOOL_CHAIN_TAG)/$(PLATFORM_ARCH)/test.bin
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>509</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-09-21 21:08:39 +0000</bug_when>
    <thetext>assign to Yonghong , fix soon</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>511</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-21 21:24:04 +0000</bug_when>
    <thetext>the fix patch is pushed, version f8db6527da8678f1480f08ba99b745279e8d104a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>141</bug_id>
          
          <creation_ts>2016-10-07 12:01:00 +0000</creation_ts>
          <short_desc>GenFds should support FDF file sections in any order</short_desc>
          <delta_ts>2016-10-28 02:32:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>142</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>567</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-10-07 12:01:00 +0000</bug_when>
    <thetext>The FDF parse in GenFds current requires sections to be placed in the FDF file in a fixed order.  As the FDF syntax has been extended, this restriction makes it difficult for a platform developer to organize FDF files in a way that makes sense for a specific platform.  

The current fixed order is: Fd, Fv, Fmp, Capsule, Vtf, Rule, OptionRom

The EDK II FDF Specification does currently require a specific order of sections.

Another issue with the current implementation is that sections that do not appear in the fixes order are silently ignored and may generate build breaks with no information on why the build broke.  Even worse, the build may complete with no errors, but does not produce content associated with the sections that were skipped.

This issue was discovered during evaluation of FMP based system firmware updates when attempting to interleave [FmpPayload] and [Capsule] sections for firmware update and recovery on Galileo platforms. 

The proposed fix is to relax the FDF parser in GenFds to allow sections to appear in any order and collect the information from all valid section not matter what order they appear in the FDF file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>570</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-10-07 12:05:27 +0000</bug_when>
    <thetext>EDK II FDF Specification update is at:

https://bugzilla.tianocore.org/show_bug.cgi?id=142</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>571</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-07 12:21:53 +0000</bug_when>
    <thetext>See also the report / discussion in the following edk2-devel thread:

[edk2] Question on OvmfPkgX64.fdf
https://www.mail-archive.com/edk2-devel@lists.01.org/msg02183.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>588</commentid>
    <comment_count>3</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-10-12 21:07:28 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>789</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-10-28 02:32:47 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/dd170333f6444a4256e75356a8f0758a40bfb77d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>950</bug_id>
          
          <creation_ts>2018-05-09 01:54:34 +0000</creation_ts>
          <short_desc>BaseTools: the size in autogen is incorrect when module override pcd value use byte array format</short_desc>
          <delta_ts>2018-05-10 21:40:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3986</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-09 01:54:34 +0000</bug_when>
    <thetext>when the module override pcd value use byte array format and its size is larger than common PCD section, we found the size in the autogen.c file is incorrect.


Case:

DSC:
 [PcdsFixedAtBuild]
  PcdToken.PcdName | &quot;A&quot;
 [Components]
 TestPkg/TestDriver.inf {
  PcdToken.PcdName | {0x41,0x42,0x43,0x44}
 }


GLOBAL_REMOVE_IF_UNREFERENCED const UINT8
 _gPcd_FixedAtBuild_PcdName[2] = {0x41,0x42,0x43,0x44};</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3988</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-05-09 21:04:07 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3991</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-10 21:40:31 +0000</bug_when>
    <thetext>fixed it in SHA-1: 6b285ca3663d3c71cc68d01684a98f0d7537885e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>91</bug_id>
          
          <creation_ts>2016-07-28 10:46:53 +0000</creation_ts>
          <short_desc>BaseTools should check CONF_PATH env to get the configure files</short_desc>
          <delta_ts>2016-11-14 02:27:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>387</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-07-28 10:46:53 +0000</bug_when>
    <thetext>BaseTools setup script bases on CONF_PATH env to store the configure files. But, Build tool doesn&apos;t check this env. It should check this env exists. If it exists, try to get build configure files (target.txt, tools_def.txt and build_rule.txt). And, once Build tool gets the configure files, it had better print CONF_PATH directory in build log to let user know it, like WORKSPACE env.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>434</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-08-16 21:46:56 +0000</bug_when>
    <thetext>bug Scrub: confirmed and assign to feature  owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>441</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-08-18 23:10:44 +0000</bug_when>
    <thetext>Fix it on git version 00bcb5c27a5bb781099482c5763937334be91e76, Change it to Submitter to do verify.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>715</bug_id>
          
          <creation_ts>2017-09-21 19:19:28 +0000</creation_ts>
          <short_desc>BdsEntry initialization deletes boot next too early</short_desc>
          <delta_ts>2017-09-29 03:24:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2755</commentid>
    <comment_count>0</comment_count>
      <attachid>101</attachid>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-09-21 19:19:28 +0000</bug_when>
    <thetext>Created attachment 101
Moving the delete of BootNext to after the call to AfterConsole.

There are platform callouts BeforeConsole and AfterConsole that allow a platform to perform operations just before booting.   If any of these operations cause a reset, then a queued BootNext operation will be lost.

This patch moves the caching and deleting of BootNext until the call to AfterConsole.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2756</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-21 20:03:54 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2767</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-22 08:04:35 +0000</bug_when>
    <thetext>Michael,

can you please post your patch to edk2-devel for review and discussion?

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2807</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-29 03:24:28 +0000</bug_when>
    <thetext>pushed @ 0e6584e38650cef9a6b4579553679c0f12d897bc</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>101</attachid>
            <date>2017-09-21 19:19:28 +0000</date>
            <delta_ts>2017-09-21 19:19:28 +0000</delta_ts>
            <desc>Moving the delete of BootNext to after the call to AfterConsole.</desc>
            <filename>BdsBootNextFix.patch</filename>
            <type>application/octet-stream</type>
            <size>2001</size>
            <attacher name="Michael Turner">Michael.Turner</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>215</bug_id>
          
          <creation_ts>2016-11-09 02:46:29 +0000</creation_ts>
          <short_desc>Update LZMA SDK from 4.65 to the latest 16.04 version</short_desc>
          <delta_ts>2018-07-11 14:05:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>deb.topu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>852</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-09 02:46:29 +0000</bug_when>
    <thetext>New version LZMA SDK improves the compression performance on windows OS,
and has no change on the compression ratio. I compress 8M FVMAIN image,
the compression time is reduced from 2.590s to 1.419s.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>853</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-09 02:48:22 +0000</bug_when>
    <thetext>Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>854</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-09 02:49:59 +0000</bug_when>
    <thetext>Fixed at c4ab09ef2f543ebf420da5d7cd8d48988c99b89c..00f5e11913a8706a1733da2b591502d59f848a99</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4257</commentid>
    <comment_count>3</comment_count>
    <who name="Debasish Nath">deb.topu</who>
    <bug_when>2018-07-11 09:17:13 +0000</bug_when>
    <thetext>Hi Liming,

I am trying to decompress the 7zip file. Used file system getinfo() to get the zip file buffer and size. It is coming correct. Then called LzmaUefiDecompressGetInfo() to get the destination size but LzmaUefiDecompress() is returning INVALID_PARAMETER. 
My file size is DB3, LzmaUefiDecompressGetInfo() is returning 8604001C as destination size and scratch size as 10000. I have zipped only 1 file which is of 7kb in size.
Would u plz tell me cause.

Thanks,
Debasish</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4258</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-07-11 09:32:39 +0000</bug_when>
    <thetext>LZMA and 7Z file format are not same. They don&apos;t support each other.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4259</commentid>
    <comment_count>5</comment_count>
    <who name="Debasish Nath">deb.topu</who>
    <bug_when>2018-07-11 10:20:20 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #4)
&gt; LZMA and 7Z file format are not same. They don&apos;t support each other.

I have upgraded LzmaCustomDecompressLib module from 4.65 to 16.04. I am using 7Zip verion 18.01 to zip the files. Is it because of that ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4260</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-07-11 11:33:22 +0000</bug_when>
    <thetext>Not related to the version. They are the different format. I download lzma zip from https://www.7-zip.org/a/lzma1604.7z. It includes 7zr.exe and lzma.exe. Their formats are different.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4263</commentid>
    <comment_count>7</comment_count>
    <who name="Debasish Nath">deb.topu</who>
    <bug_when>2018-07-11 14:05:26 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #6)
&gt; Not related to the version. They are the different format. I download lzma
&gt; zip from https://www.7-zip.org/a/lzma1604.7z. It includes 7zr.exe and
&gt; lzma.exe. Their formats are different.

Read about lzma and 7zip way of compression and headers difference. Tried lzma compression. It seems like lzma will work only with .lzma files and supports only one file per archive. Is there any way to compress and decompress multiple files in a single archive with lzma method ? If not, would you suggest me any module/source which i can add in my bios code to support this feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>681</bug_id>
          
          <creation_ts>2017-08-24 10:23:11 +0000</creation_ts>
          <short_desc>HiiValidateSettings issue with string item</short_desc>
          <delta_ts>2017-08-29 04:07:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="wvervoorn@eltan.com">wvervoorn</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>wvervoorn</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2015</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2637</commentid>
    <comment_count>0</comment_count>
    <who name="wvervoorn@eltan.com">wvervoorn</who>
    <bug_when>2017-08-24 10:23:11 +0000</bug_when>
    <thetext>I am running into an issue with HiiValidateSettings (); when my VFR contains a string item that is filled with a string of maximum length. In this case the validation returns an error because it thinks the string is too long.

During the validation ValidateQuestionFromVfr (); checks if the stringlength is valid. The issue is that this uses the &quot;maxsize&quot; value * 2 from the VFR. It does this using the StrSize function which includes the trailing terminator. This is of course correct. The maxsize from the VFR indicates only the amount of characters excluding the terminator.

As a quickfix I changed the ValidateQuestionFromVfr () to take this into account but I am doubting if this is the correct solution. Can you shed some light here?

Below is the fragment where I see this issue:

 //
 // Get Offset/Width by Question header and OneOf Flags
 //
 Offset = IfrString-&gt;Question.VarStoreInfo.VarOffset;
 //
 // Check whether this question is in current block array.
 //
 if (!BlockArrayCheck (CurrentBlockArray, Offset, Width)) {
 //
 // This question is not in the current configuration string. Skip it.
 //
   break;
 }
 //
 // Check this var question is in the var storage
 //
 if ((Offset + Width) &gt; VarStoreData.Size) {
   //
   // This question exceeds the var store size.
   //
   return EFI_INVALID_PARAMETER;
 }

 //
 // Check current string length is less than maxsize
 //
 // Please note we subtract sizeof(CHAR16) here because the StrSize returns the length including the terminator
// while we specify the length in characters in the VFR!
//
ORG -&gt;    // if ( (StrSize ((CHAR16 *) (VarBuffer + Offset)) &gt; Width) {
CHANGED-&gt; if ( (StrSize ((CHAR16 *) (VarBuffer + Offset)) - sizeof(CHAR16)) &gt; Width) {
          return EFI_INVALID_PARAMETER;
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2640</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-24 20:09:22 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2645</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-25 09:11:52 +0000</bug_when>
    <thetext>change owner to Dandan.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2653</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-08-29 04:07:53 +0000</bug_when>
    <thetext>Fix this on EDK2 Trunk @ https://github.com/tianocore/edk2/commit/1696b221b15e439162cfccd6bd04132e425dd2ff</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>596</bug_id>
          
          <creation_ts>2017-06-15 23:53:29 +0000</creation_ts>
          <short_desc>Missing BaseLib in IntrinsicLib.inf</short_desc>
          <delta_ts>2018-12-12 02:17:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Baranee">anbazhagan</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2293</commentid>
    <comment_count>0</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2017-06-15 23:53:29 +0000</bug_when>
    <thetext>Unresolved error for AsciiStrCmp with latest CryptoPkg in one of our module that uses IntrinsicLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2328</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-22 20:13:12 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2330</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-06-22 20:59:53 +0000</bug_when>
    <thetext>Any module will use IntrinsicLib directly?

The IntrinsicLib is one wrapper instance to pack some possible intrinsic symbols, and just designed to satisfy the openssl build. It&apos;s not recommended for any external module to use this library directly. (esp. IntrinsicLib was built with different option under visual studio.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2382</commentid>
    <comment_count>3</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2017-07-02 20:07:01 +0000</bug_when>
    <thetext>Build issue is in our module that uses IntrinsicLib and understand that module needs to be modified. 

BaseLib header file is included in MemoryIntrinsics.c but BaseLib is not listed in corresponding INF file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5834</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-12-12 02:17:37 +0000</bug_when>
    <thetext>Fixed@366a7672cfaa230cecd40619e0941def4fd82130
Reviewed@https://lists.01.org/pipermail/edk2-devel/2018-December/033616.html</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>977</bug_id>
          
          <creation_ts>2018-06-06 03:26:38 +0000</creation_ts>
          <short_desc>Capsule generation tools to add some check for capsule flag option</short_desc>
          <delta_ts>2018-08-09 13:57:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4065</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-06 03:26:38 +0000</bug_when>
    <thetext>From UEFI spec 2.6 “A capsule which has the CAPSULE_FLAGS_INITIATE_RESET Flag must have CAPSULE_FLAGS_PERSIST_ACROSS_RESET set in its header as well.”
another rule “A capsule which has the CAPSULE_FLAGS_POPULATE_SYSTEM_TABLE Flag must have CAPSULE_FLAGS_PERSIST_ACROSS_RESET set in its header as well.”

the capsule generation tool need add this check for capsule flag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4074</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-06-06 21:08:09 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4546</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:54:16 +0000</bug_when>
    <thetext>Patch email for review

https://lists.01.org/pipermail/edk2-devel/2018-July/027793.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4547</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:57:18 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/8b63877aca1e5a3576b7275439c494a6d40ed1b5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>248</bug_id>
          
          <creation_ts>2016-11-23 04:32:45 +0000</creation_ts>
          <short_desc>RAW format doesn&apos;t support &quot;Align=32 and 64&quot; while it should support base on FDF Spec</short_desc>
          <delta_ts>2019-09-23 22:26:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1006</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2016-11-23 04:32:45 +0000</bug_when>
    <thetext>Generating FVMAIN FV
########################################
########
Generate Region at Offset 0xC30000
   Region Size = 0x20000
   Region Name = FV

Generating OEM_FV FV

Generate Region at Offset 0xC50000
   Region Size = 0x30000
   Region Name = FV

Generating FLAVOR_FV FV

Generate Region at Offset 0xC80000
   Region Size = 0x20000
   Region Name = FV

Generating MICROCODE_FV FV
#Return Value = 2
GenFfs: ERROR 1003: Invalid option value
  -a = 32




GenFds...

 : error 7000: Failed to generate FFS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1018</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-24 10:04:01 +0000</bug_when>
    <thetext>
assign to yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1225</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-29 03:59:11 +0000</bug_when>
    <thetext>fix it SHA-1: d2192f12b2d0b93416ff63ac73a3276a07d26c9e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>523</bug_id>
          
          <creation_ts>2017-05-02 09:24:53 +0000</creation_ts>
          <short_desc>Build spec: add EBNF for the --pcd syntax in the Section D.4</short_desc>
          <delta_ts>2017-05-30 16:50:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1976</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-02 09:24:53 +0000</bug_when>
    <thetext>We&apos;d like to add EBNF for the --pcd syntax in the Section D.4, follow the format like -D macro.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1997</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-05 03:58:48 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2187</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-27 00:41:23 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2200</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-30 16:50:21 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-BuildSpecification/commit/febd90bad29928809f93245b71e1371ca3ef45fe</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>903</bug_id>
          
          <creation_ts>2018-03-15 12:41:07 +0000</creation_ts>
          <short_desc>Version and VersionName in ESRT table don&apos;t seem to change after a capsule update</short_desc>
          <delta_ts>2018-03-29 22:06:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard Max</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samah Mansour">smansour</reporter>
          <assigned_to name="mang.guo@intel.com">mang.guo</assigned_to>
          <cc>david.wei</cc>
    
    <cc>smansour</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SignedCapsulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3716</commentid>
    <comment_count>0</comment_count>
    <who name="Samah Mansour">smansour</who>
    <bug_when>2018-03-15 12:41:07 +0000</bug_when>
    <thetext>Hello,

I am trying to capsule update a  minnow board Max (UDK2017) following the steps in your git Wiki: https://github.com/tianocore/tianocore.github.io/wiki/Capsule-Based-System-Firmware-Update. 
I am using CapsuleApp.efi with the generated Capsule. The update actually goes through and after the second reboot the new bios is detected, however when I use CapsuleApp.efi to read the ESRT table the version and version name don’t seem to be changing! The LastAttemptStatus is a success and LastAttemptVersion corresponds to the new version that I just flashed, so the ESRT table is being updated for some entries but not all???


Thanks,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3717</commentid>
    <comment_count>1</comment_count>
      <attachid>154</attachid>
    <who name="Samah Mansour">smansour</who>
    <bug_when>2018-03-15 12:49:28 +0000</bug_when>
    <thetext>Created attachment 154
ESRT Table after a successful update</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3719</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-15 20:03:38 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3759</commentid>
    <comment_count>3</comment_count>
    <who name="">david.wei</who>
    <bug_when>2018-03-23 04:08:11 +0000</bug_when>
    <thetext>Assign to Mang Guo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3760</commentid>
    <comment_count>4</comment_count>
    <who name="mang.guo@intel.com">mang.guo</who>
    <bug_when>2018-03-23 04:44:30 +0000</bug_when>
    <thetext>Thanks for reporting, it is because only part of BIOS was updated, please see SystemFirmwareUpdateConfig.ini for details. We are now adding all parts of BIOS to capsule update to fix this issue.  Will post the patch after test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3763</commentid>
    <comment_count>5</comment_count>
      <attachid>156</attachid>
    <who name="Samah Mansour">smansour</who>
    <bug_when>2018-03-23 09:59:06 +0000</bug_when>
    <thetext>Created attachment 156
SystemFirmwareUpdateConfig</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3764</commentid>
    <comment_count>6</comment_count>
    <who name="Samah Mansour">smansour</who>
    <bug_when>2018-03-23 09:59:34 +0000</bug_when>
    <thetext>Hi Zhu,
Thank you for replying. I already debugged this and actually arrived at the same conclusion as you. I tried modifying the SystemFirmwareUpdateConfig.ini to update all the parts:

[Head]
NumOfUpdate = 4
NumOfRecovery = 1
Update0 = Vlv2FvMicrocode
Update1 = Vlv2FvMain
Update2 = Vlv2FvRecovery2
Update3 = Vlv2FvRecovery
Recovery0 = Vlv2FvMain

It didn&apos;t solve the issue the FW version reported by the ESRT table is still not changed. 
I attached my current SystemFirmwareUpdateConfig.ini. Is there something else to change maybe?

Samah</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3795</commentid>
    <comment_count>7</comment_count>
    <who name="mang.guo@intel.com">mang.guo</who>
    <bug_when>2018-03-29 03:06:23 +0000</bug_when>
    <thetext>BaseAddress also need to be changed. Attached a patch to fix this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3796</commentid>
    <comment_count>8</comment_count>
      <attachid>162</attachid>
    <who name="mang.guo@intel.com">mang.guo</who>
    <bug_when>2018-03-29 03:07:37 +0000</bug_when>
    <thetext>Created attachment 162
Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3797</commentid>
    <comment_count>9</comment_count>
    <who name="Samah Mansour">smansour</who>
    <bug_when>2018-03-29 10:24:57 +0000</bug_when>
    <thetext>Thank you very much, it works perfectly now with the patch. Great Feature :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3799</commentid>
    <comment_count>10</comment_count>
    <who name="mang.guo@intel.com">mang.guo</who>
    <bug_when>2018-03-29 22:06:13 +0000</bug_when>
    <thetext>Fixed version： 57656ddd49ede3586d7fcd065b177f127417b432</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>154</attachid>
            <date>2018-03-15 12:49:28 +0000</date>
            <delta_ts>2018-03-15 12:49:28 +0000</delta_ts>
            <desc>ESRT Table after a successful update</desc>
            <filename>ESRTTableAfterUpdate.jpg</filename>
            <type>image/jpeg</type>
            <size>320810</size>
            <attacher name="Samah Mansour">smansour</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>156</attachid>
            <date>2018-03-23 09:59:06 +0000</date>
            <delta_ts>2018-03-23 09:59:06 +0000</delta_ts>
            <desc>SystemFirmwareUpdateConfig</desc>
            <filename>SystemFirmwareUpdateConfig.ini</filename>
            <type>application/octet-stream</type>
            <size>3065</size>
            <attacher name="Samah Mansour">smansour</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>162</attachid>
            <date>2018-03-29 03:07:37 +0000</date>
            <delta_ts>2018-03-29 03:07:37 +0000</delta_ts>
            <desc>Patch</desc>
            <filename>0001-Capsule-update.patch</filename>
            <type>application/octet-stream</type>
            <size>47539</size>
            <attacher name="mang.guo@intel.com">mang.guo</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>442</bug_id>
          
          <creation_ts>2017-03-24 05:14:56 +0000</creation_ts>
          <short_desc>MdeModulePkg: Remove unsupported PcdExpression usage in module INF to avoid confuse</short_desc>
          <delta_ts>2017-04-06 00:59:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1683</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-03-24 05:14:56 +0000</bug_when>
    <thetext>Some MdeModulePkg module INF files have the below usages to use PcdExpression to disable source files or PCD. But, this feature is not supported by BaseTools. Those usages bring confuse to the developer. To avoid further confuse, I suggest to clean up INF files and replace them with comments. 

MdeModulePkg\Application\HelloWorld\HelloWorld.inf:58:  gEfiMdeModulePkgTokenSpaceGuid.PcdHelloWorldPrintString || gEfiMdeModulePkgTokenSpaceGuid.PcdHelloWorldPrintEnable    ## SOMETIMES_CONSUMES
MdeModulePkg\Application\HelloWorld\HelloWorld.inf:59:  gEfiMdeModulePkgTokenSpaceGuid.PcdHelloWorldPrintTimes  || gEfiMdeModulePkgTokenSpaceGuid.PcdHelloWorldPrintEnable    ## SOMETIMES_CONSUMES
MdeModulePkg\Core\DxeIplPeim\DxeIpl.inf:42:  X64/VirtualMemory.h  ||||gEfiMdeModulePkgTokenSpaceGuid.PcdDxeIplSwitchToLongMode
MdeModulePkg\Core\DxeIplPeim\DxeIpl.inf:43:  X64/VirtualMemory.c  ||||gEfiMdeModulePkgTokenSpaceGuid.PcdDxeIplSwitchToLongMode
MdeModulePkg\Core\DxeIplPeim\DxeIpl.inf:45:  Ia32/IdtVectorAsm.nasm||||gEfiMdeModulePkgTokenSpaceGuid.PcdDxeIplSwitchToLongMode
MdeModulePkg\Core\DxeIplPeim\DxeIpl.inf:46:  Ia32/IdtVectorAsm.asm||||gEfiMdeModulePkgTokenSpaceGuid.PcdDxeIplSwitchToLongMode
MdeModulePkg\Core\DxeIplPeim\DxeIpl.inf:47:  Ia32/IdtVectorAsm.S  ||||gEfiMdeModulePkgTokenSpaceGuid.PcdDxeIplSwitchToLongMode
MdeModulePkg\Universal\CapsuleRuntimeDxe\CapsuleRuntimeDxe.inf:84:  gEfiMdeModulePkgTokenSpaceGuid.PcdMaxSizePopulateCapsule || gEfiMdeModulePkgTokenSpaceGuid.PcdSupportUpdateCapsuleReset ## SOMETIMES_CONSUMES # Populate Image requires reset support.
MdeModulePkg\Universal\PCD\Pei\Pcd.inf:346:  gEfiMdeModulePkgTokenSpaceGuid.PcdMaxPeiPcdCallBackNumberPerPcdEntry || gEfiMdeModulePkgTokenSpaceGuid.PcdPeiFullPcdDatabaseEnable ## SOMETIMES_CONSUMES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1684</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-03-24 05:15:26 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1747</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-04-06 00:59:54 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/307a19a7ec790a7d9ff7fe8332ad4c326b2d32a0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>923</bug_id>
          
          <creation_ts>2018-04-04 18:42:05 +0000</creation_ts>
          <short_desc>Deprecated function X509_NAME_get_text_by_NID used.</short_desc>
          <delta_ts>2018-06-04 22:21:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3828</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2018-04-04 18:42:05 +0000</bug_when>
    <thetext>X509_NAME_get_text_by_NID is a legacy function and does not convert or indicate what type of text field was obtained.  The openssl docs at https://www.openssl.org/docs/man1.0.2/crypto/X509_NAME_get_text_by_NID.html indicate this function should not be used.  Some certificates may include CHAR16 strings.  When this occurs, the data returned by X509_NAME_get_text_by_NID is not usable.

Code similar to the following should be used instead:

 Indx = X509_NAME_get_index_by_NID(X509Name, Request_NID, 0);

  if (Indx &lt; 0) {
    DEBUG((DEBUG_ERROR,&quot;NID not found\n&quot;));
    goto _Exit;
  }

  Entry = X509_NAME_get_entry(X509Name, Indx);
  if (Entry == NULL) {
    DEBUG((DEBUG_ERROR,&quot;Entry %d not found\n&quot;, Indx));
    goto _Exit;
  }

  EntryData = X509_NAME_ENTRY_get_data( Entry );

  Length = ASN1_STRING_to_UTF8(&amp;UTF8Name, EntryData);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3867</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-12 20:15:50 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4053</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2018-06-04 22:21:50 +0000</bug_when>
    <thetext>Fixed by the commit: 0b6457efabf6f47bc55690874dde82d2f8616abc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>283</bug_id>
          
          <creation_ts>2016-12-05 04:43:13 +0000</creation_ts>
          <short_desc>GUIDED tool path can&apos;t be overriden in [BuildOptions] of DSC file</short_desc>
          <delta_ts>2017-02-16 20:38:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1114</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-12-05 04:43:13 +0000</bug_when>
    <thetext>Other tool path, like ASL can be set to the different path in [BuildOptions] of DSC file. But, GUIDED tool path doesn&apos;t work. 

[BuildOptions]
  *_*_*_ASL_PATH = IaslUser  # work
  *_*_*_RSA2048SHA256SIGN_PATH = Rsa2048Shdfdfdsfa256SignUser # doesn&apos;t work</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1129</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-12-07 20:05:00 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1464</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-16 20:38:03 +0000</bug_when>
    <thetext>fix it SHA-1: 958163561e9b6d8fa40ea4aac49d46cc889015ac</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>474</bug_id>
          
          <creation_ts>2017-04-13 03:04:50 +0000</creation_ts>
          <short_desc>DxeCore DEBUG message to print GUID value with GUID data type</short_desc>
          <delta_ts>2017-04-19 03:13:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1804</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-04-13 03:04:50 +0000</bug_when>
    <thetext>Base on PrintLib, %g is used to print GUID value. It requires the input parameter is a pointer. DxeCore DEBUG message specifies GUID data type, not a pointer. It will cause CLANG38 boot failure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1805</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-04-13 03:05:27 +0000</bug_when>
    <thetext>assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1825</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-04-14 03:42:28 +0000</bug_when>
    <thetext> https://github.com/tianocore/edk2/commit/e06179889586c37101e2900e7f52be9f0da12cda</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>387</bug_id>
          
          <creation_ts>2017-02-17 04:17:02 +0000</creation_ts>
          <short_desc>GenFds fails to get the base address and size for FV image in FD region</short_desc>
          <delta_ts>2017-03-18 04:40:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1470</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-02-17 04:17:02 +0000</bug_when>
    <thetext>When I change [FD.OVMF] ==&gt; [FD.OVMFIA32] in OvmfPkg\OvmfPkgIa32.fdf. The PEIFV image size will be changed to the smaller one 0x30000. But, PEIFV is specified in [FD.MEMFD] with region size 0x0E0000. So, its FV size should be always 0x0E0000. 

When OVMFIA32 FD is generated first, FVMAIN_COMPACT will be required, then PEIFV and DXEFV are generated. In this process, BaseTools doesn’t get the correct information of PEIFV and DXEFV. If MEMFD is generated first,  PEIFV and DXEFV can be parsed correctly and generated, then there is no problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1471</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-02-17 05:28:53 +0000</bug_when>
    <thetext>This -- or a very similar -- issue has been reported previously; please see the following thread:

Subject: [edk2] Question on OvmfPkgX64.fdf
msgid: &lt;CADYnCT8ZXVjg-_wqJOEqSa1Co6XRFAiysO_4PCSBbgxpcTJf3A@mail.gmail.com&gt;
URL: https://www.mail-archive.com/edk2-devel@lists.01.org/msg02183.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1502</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-02-22 20:06:41 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1641</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-18 04:40:19 +0000</bug_when>
    <thetext>push the fix SHA-1: 135ae8c873bb18600b8474524453c9ecc6eeed16</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>771</bug_id>
          
          <creation_ts>2017-11-08 21:26:12 +0000</creation_ts>
          <short_desc>CVfrStringDB::SetStringFileName will cause memory leak</short_desc>
          <delta_ts>2018-03-27 09:04:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Justin">justin_wu</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3005</commentid>
    <comment_count>0</comment_count>
    <who name="Justin">justin_wu</who>
    <bug_when>2017-11-08 21:26:12 +0000</bug_when>
    <thetext>VOID 
CVfrStringDB::SetStringFileName(IN CHAR8 *StringFileName)
{
  UINT32 FileLen = 0;

  if (StringFileName == NULL) {
    return;
  }

  FileLen = strlen (StringFileName) + 1;
  mStringFileName = new CHAR8[FileLen];
  if (mStringFileName == NULL) {
    return;
  }

  strcpy (mStringFileName, StringFileName);
  mStringFileName[FileLen - 1] = &apos;\0&apos;;
}

this function will cause memory leak at call second time.
for example,if I am a newbee, and write the code like this:
 setStringFileName(&quot;file1&quot;);
 ....
 setStringFileName(&quot;file2&quot;);
 ...
 setStringFileName(&quot;file3&quot;);

the first malloc mStringFileName will never free.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3076</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-11-15 20:06:15 +0000</bug_when>
    <thetext>assign to Bidandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3774</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-03-27 09:04:18 +0000</bug_when>
    <thetext>Fix it on edk2 trunk: 65e0e10d23323b18f31bf9aa9eef3c2434f53780</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>321</bug_id>
          
          <creation_ts>2017-01-03 01:02:34 +0000</creation_ts>
          <short_desc>Ip4Config2/Ip6Config setting invalid DNS server address cause ASSERT</short_desc>
          <delta_ts>2017-01-03 19:56:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="jiaxinwu">jiaxin.wu</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>ting.ye</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1233</commentid>
    <comment_count>0</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-01-03 01:02:34 +0000</bug_when>
    <thetext>Ip4Config2SetDnsServer/Ip6ConfigSetDnsServer may cause ASSERT if the invalid DNS server address received.

The issue is caused by the NULL pointer free: FreePool (Tmp).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1234</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-01-03 01:06:31 +0000</bug_when>
    <thetext>Working on the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1236</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-01-03 19:56:03 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/d52f9163debb523e06d49ed8a4627a0317bab92c
https://github.com/tianocore/edk2/commit/ab50ab6ea159821d780be60759874dcf38835d1b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>232</bug_id>
          
          <creation_ts>2016-11-14 23:37:23 +0000</creation_ts>
          <short_desc>DisplayEngine doesn&apos;t show the menu correctly</short_desc>
          <delta_ts>2016-11-23 00:16:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2015</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>930</commentid>
    <comment_count>0</comment_count>
      <attachid>22</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2016-11-14 23:37:23 +0000</bug_when>
    <thetext>Created attachment 22
show menu incorrectly

When a form has more than one page, and all the menus in the first page cannot be selected and the first menu of the second page can be selected. In this case, when entering the form, the menu can&apos;t be shown correctly. 
In this case, when searching the selectable menu, it has reached the boundary value, but DisplayEngine doesn&apos;t handle this case correctly.

The attached pictures show the incorrect behaviors.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>931</commentid>
    <comment_count>1</comment_count>
      <attachid>23</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2016-11-14 23:42:41 +0000</bug_when>
    <thetext>Created attachment 23
reproduce patch

With the attached patch can reproduce this issue on NT32.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>982</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-17 19:13:45 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1002</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2016-11-23 00:16:11 +0000</bug_when>
    <thetext>fix this issue in EDKII trunk:
https://github.com/tianocore/edk2/commit/0265811dbe56cf46fb3c152b2ccdefd8fb47a170 


fix this issue in UDK2015: https://github.com/tianocore/edk2/commit/041f1c54614cf24120f265f58b2461e4a7bb3dd7</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>22</attachid>
            <date>2016-11-14 23:37:23 +0000</date>
            <delta_ts>2016-11-14 23:37:23 +0000</delta_ts>
            <desc>show menu incorrectly</desc>
            <filename>display incorrectly1.PNG</filename>
            <type>image/png</type>
            <size>7730</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>23</attachid>
            <date>2016-11-14 23:42:41 +0000</date>
            <delta_ts>2016-11-14 23:42:41 +0000</delta_ts>
            <desc>reproduce patch</desc>
            <filename>0001-ReproducePatch.patch</filename>
            <type>text/plain</type>
            <size>6163</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>978</bug_id>
          
          <creation_ts>2018-06-06 04:24:29 +0000</creation_ts>
          <short_desc>TPM 2.0 ACPI tableTPM2 table event log</short_desc>
          <delta_ts>2019-10-24 03:00:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Derek Lin">derek.lin2</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4067</commentid>
    <comment_count>0</comment_count>
    <who name="Derek Lin">derek.lin2</who>
    <bug_when>2018-06-06 04:24:29 +0000</bug_when>
    <thetext>There are new fields in TPM2 ACPI table for getting TCG event log under OS.

https://trustedcomputinggroup.org/wp-content/uploads/TCG_ACPIGeneralSpecification_v1.20_r8.pdf
Page 11.
Log Area Minimum Length (LAML)
Log Area Start Address (LASA)

I remember they are not existed in older TCG ACPI spec.
However, we don&apos;t have it in current Tcg2Dxe driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4084</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-07 20:14:03 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4093</commentid>
    <comment_count>2</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2018-06-07 22:26:46 +0000</bug_when>
    <thetext>LAML, LASA are optional in TPM2.0 ACPI table .
The event log for TPM2.0 are returned by EFI_TCG2_PROTOCOL.GetEventLog and FinalEvent configuration table. The event data structure is self-descriptive. Combined with other information, it will provide equivalent information as LAML, LASA in TPM 1.2 ACPI table.

Conclusion:
It is not a bug. EFI solution complies with TCG specs including PFP 00.51, ACPI 1.2, EFI 00.13</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4095</commentid>
    <comment_count>3</comment_count>
    <who name="Derek Lin">derek.lin2</who>
    <bug_when>2018-06-07 23:02:25 +0000</bug_when>
    <thetext>We think the problem is we can&apos;t get TPM 2.0 TCG event log in Linux.

EFI_TCG2_PROTOCOL.GetEventLog() has to be called in BootX64.efi before ExitBootService. But apparently not all the OS do this. So there&apos;s no way to read TCG event log under OS.


I understand that current EDK2 code complied with TCG specs since LAML and LASA are optional. But it will be good to implement, and have a PCD switch to enable/disable in build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4141</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-14 20:11:36 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8438</commentid>
    <comment_count>5</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-07-12 08:20:32 +0000</bug_when>
    <thetext>I agree with submitter. We should add this feature to support get TPM2 event log in Linux.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9996</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-10-10 22:16:57 +0000</bug_when>
    <thetext>fix at 5970cb23b767d32515b3fd463612166b27abe4af..a7e2d20193e853020a1415c25b53280955055394</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10136</commentid>
    <comment_count>7</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-10-20 11:00:59 +0000</bug_when>
    <thetext>add e026bb4c39a28ca9be5dc994c14bb21cc283c9e8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10210</commentid>
    <comment_count>8</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-24 02:45:43 +0000</bug_when>
    <thetext>The patch has been submitted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10211</commentid>
    <comment_count>9</comment_count>
    <who name="Derek Lin">derek.lin2</who>
    <bug_when>2019-10-24 03:00:14 +0000</bug_when>
    <thetext>Thanks Jiewen for supporting this feature!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>883</bug_id>
          
          <creation_ts>2018-03-02 03:29:58 +0000</creation_ts>
          <short_desc>Undefined behavior of a 16-bit integer overflow after multiply operation in Dhcp6Utility.c</short_desc>
          <delta_ts>2018-10-21 21:17:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3649</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-03-02 03:29:58 +0000</bug_when>
    <thetext>In Dhcp6Dxe module file NetworkPkg\Dhcp6Dxe\Dhcp6Utility.c line 124:

    Stamp = (UINT32)
      (
        (((((Time.Year - 2000) * 360 + (Time.Month - 1)) * 30 + (Time.Day - 1)) * 24 + Time.Hour) * 60 + Time.Minute) *
        60 +
        Time.Second
      );

Because the types of Time.Year, Time.Month, Time.Day, Time.Hour and Time.Minute are UINT16 or UINT8 as defined in below MdePkg\Include\Uefi\UefiBaseType.h. 

typedef struct {
  UINT16  Year;
  UINT8   Month;
  UINT8   Day;
  UINT8   Hour;
  UINT8   Minute;
  UINT8   Second;
  UINT8   Pad1;
  UINT32  Nanosecond;
  INT16   TimeZone;
  UINT8   Daylight;
  UINT8   Pad2;
} EFI_TIME;

So the default type of result in line 126 multiplication is UINT16, which is (Time.Year - 2000) * 360 + (Time.Month - 1)) * 30 + (Time.Day - 1)) * 24 + Time.Hour) * 60 + Time.Minute). But on my OVMF platform, this value is 0x10B0D51C in fact, which cause the 16-bits result overflow.

Edk2 undefined behavior sanitizer catch this issue, and you can reproduce it in another way as below steps:
1. Apply below patch on file Dhcp6Utility.c to print the original line calculation result through debug log
diff --git a/NetworkPkg/Dhcp6Dxe/Dhcp6Utility.c b/NetworkPkg/Dhcp6Dxe/Dhcp6Utility.c
old mode 100644
new mode 100755
index a65ed6d..cfa1094
--- a/NetworkPkg/Dhcp6Dxe/Dhcp6Utility.c
+++ b/NetworkPkg/Dhcp6Dxe/Dhcp6Utility.c
@@ -121,9 +121,11 @@ Dhcp6GenerateClientId (
     // Generate a time stamp of the seconds from 2000/1/1, assume 30day/month.
     //
     gRT-&gt;GetTime (&amp;Time, NULL);
+    Stamp = (UINT32)(((((Time.Year - 2000) * 360 + (Time.Month - 1)) * 30 + (Time.Day - 1)) * 24 + Time.Hour) * 60 + Time.Minute);
+    DEBUG ((EFI_D_ERROR, &quot;Stamp = 0x%x\n&quot;, Stamp));
     Stamp = (UINT32)
       (

2. Build OVMF with below command:
build -p OvmfPkg/OvmfPkgIa32X64.dsc -t GCC5 -a IA32 -a X64 -b DEBUG -DDEBUG_ON_SERIAL_PORT -n 5 -DSMM_REQUIRE=TRUE -DNETWORK_IP6_ENABLE=TRUE -DHTTP_BOOT_ENABLE=TRUE -DTLS_ENABLE=TRUE -DSECURE_BOOT_ENABLE=TRUE


3. Run the OVMF image:
mkdir Build/rootfs
cd Build/rootfs
qemu-system-x86_64 -m 5120 -pflash ../Ovmf3264/DEBUG_GCC5/FV/OVMF.fd -serial file:serial.log -machine q35,smm=on,accel=kvm -global driver=cfi.pflash01,property=secure,value=on -global mch.extended-tseg-mbytes=64 -hda fat:.

In the log, search the &quot;Stamp =&quot;, then you will see it is Stamp = 0x10B0D51C

To fix it is easy, just force convert the multiplication result as type UINT32:
diff --git a/NetworkPkg/Dhcp6Dxe/Dhcp6Utility.c b/NetworkPkg/Dhcp6Dxe/Dhcp6Utility.c
old mode 100644
new mode 100755
index a65ed6d..0d04ad0
--- a/NetworkPkg/Dhcp6Dxe/Dhcp6Utility.c
+++ b/NetworkPkg/Dhcp6Dxe/Dhcp6Utility.c
@@ -121,9 +121,11 @@ Dhcp6GenerateClientId (
     // Generate a time stamp of the seconds from 2000/1/1, assume 30day/month.
     //
     gRT-&gt;GetTime (&amp;Time, NULL);
     Stamp = (UINT32)
       (
-        (((((Time.Year - 2000) * 360 + (Time.Month - 1)) * 30 + (Time.Day - 1)) * 24 + Time.Hour) * 60 + Time.Minute) *
+        (UINT32)(((((Time.Year - 2000) * 360 + (Time.Month - 1)) * 30 + (Time.Day - 1)) * 24 + Time.Hour) * 60 + Time.Minute) *
         60 +
         Time.Second
       );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3650</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-03-04 07:44:03 +0000</bug_when>
    <thetext>There is similar integer overflow happen in Dhcp6Dxe module file NetworkPkg\Dhcp6Dxe\Dhcp6Utility.c line 886~889:

      ((((((Time.Year - 2000) * 360 +
       (Time.Month - 1)) * 30 +
       (Time.Day - 1)) * 24 + Time.Hour) * 60 +
       Time.Minute) * 60 + Time.Second) * 100</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3651</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-03-04 18:23:47 +0000</bug_when>
    <thetext>There is a similar integer overflow happen in UefiPxeBcDxe module file NetworkPkg/UefiPxeBcDxe/PxeBcSupport.c 1485~1488:

      (((((Time.Year - 1900) * 360 +
       (Time.Month - 1)) * 30 +
       (Time.Day - 1)) * 24 + Time.Hour) * 60 +
       Time.Minute) * 60 + Time.Second) * 100

A simple fix could be below:

diff --git a/NetworkPkg/UefiPxeBcDxe/PxeBcSupport.c b/NetworkPkg/UefiPxeBcDxe/PxeBcSupport.c
old mode 100644
new mode 100755
index 47bb7c5dbb..983619ca09
--- a/NetworkPkg/UefiPxeBcDxe/PxeBcSupport.c
+++ b/NetworkPkg/UefiPxeBcDxe/PxeBcSupport.c
@@ -1482,7 +1482,7 @@ CalcElapsedTime (
   gRT-&gt;GetTime (&amp;Time, NULL);
   CurrentStamp = (UINT64)
     (
-      ((((((Time.Year - 1900) * 360 +
+      ((((((UINT64)(Time.Year - 1900) * 360 +
        (Time.Month - 1)) * 30 +
        (Time.Day - 1)) * 24 + Time.Hour) * 60 +
        Time.Minute) * 60 + Time.Second) * 100</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3670</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-08 19:07:46 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3674</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-03-12 00:46:13 +0000</bug_when>
    <thetext>No impact to the current functionality, just integer overflow happen. We will provide the patches to fix the it later.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5274</commentid>
    <comment_count>5</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-10-16 01:45:52 +0000</bug_when>
    <thetext>During the fix, I found the calculation of time stamp is incorrect:

    Stamp = (UINT32)
      (
        (((((Time.Year - 2000) * 360 + (Time.Month - 1)) * 30 + (Time.Day - 1)) * 24 + Time.Hour) * 60 + Time.Minute) *
        60 +
        Time.Second
      );

should be: 

    Stamp = (UINT32)
      (
        ((((UINT32)(Time.Year - 2000) * 360 + (Time.Month - 1) * 30 + (Time.Day - 1)) * 24 + Time.Hour) * 60 + Time.Minute) *
        60 +
        Time.Second
      );

Others are the same.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5343</commentid>
    <comment_count>6</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-10-21 21:17:44 +0000</bug_when>
    <thetext>Commit version:

https://github.com/tianocore/edk2/commit/ddc6d41d128c57dec8e79a0ad1eae7a80ec0280b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>904</bug_id>
          
          <creation_ts>2018-03-16 14:47:25 +0000</creation_ts>
          <short_desc>PCD Dxe driver asserts if no dynamic PCDs</short_desc>
          <delta_ts>2018-11-21 21:52:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dmitry Antipov">dmanti</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3724</commentid>
    <comment_count>0</comment_count>
    <who name="Dmitry Antipov">dmanti</who>
    <bug_when>2018-03-16 14:47:25 +0000</bug_when>
    <thetext>The assert from the log:
ASSERT [PcdDxe] MdeModulePkg\Universal\PCD\Dxe\Service.c(758): ((BOOLEAN)(0==1))

If there are no dynamic PCDs in the build, the DXEPcdDataBase.raw file is empty in the build output folder. This means the GUID and version checks fail in LocateExPcdBinary in MdeModulePkg\Universal\PCD\Dxe\Service.c.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3757</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-22 20:04:50 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5676</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-11-21 21:52:05 +0000</bug_when>
    <thetext>Fixed on SHA-1: 0a4f2d48696f094cec73e28a4402775dc6262eef</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>265</bug_id>
          
          <creation_ts>2016-11-29 07:32:55 +0000</creation_ts>
          <short_desc>PRE/POST Build fails when add quotation mark while it should be supported</short_desc>
          <delta_ts>2016-12-01 22:09:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1045</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2016-11-29 07:32:55 +0000</bug_when>
    <thetext>Add below into Nt32Pkg.dsc
PREBUILD                       = &quot;edk2/edksetup.bat --NT32&quot;


Build fails
///////////
build...
 : error F007: the prebuild script c:\new_daily\&quot;edk2\edksetup.bat is not exist.
 If you&apos;d like to disable the Prebuild process, please use the format: -D PREBUILD=&quot;&quot;
////////////////</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1082</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-11-30 20:04:55 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1105</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-01 22:09:49 +0000</bug_when>
    <thetext>fix it SHA-1: c62f1874f4df469e620dd72a9d31b51d9d99be27</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>667</bug_id>
          
          <creation_ts>2017-08-10 16:50:46 +0000</creation_ts>
          <short_desc>double free pages on LoadImage failure path.</short_desc>
          <delta_ts>2017-08-14 04:50:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2582</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2017-08-10 16:50:46 +0000</bug_when>
    <thetext>CoreLoadPeImage() frees the Image-&gt;ImageContext.ImageAddress and so does CoreUnloadAndCloseImage()

CoreLoadPeImage()
  return EFI_SUCCESS;

Done:

  //
  // Free memory.
  //
  if (DstBufAlocated) {
    CoreFreePages (Image-&gt;ImageContext.ImageAddress, Image-&gt;NumberOfPages);
  }


CoreUnloadAndCloseImage()
  if ((Image-&gt;ImageBasePage != 0) &amp;&amp; FreePage) {
    CoreFreePages (Image-&gt;ImageBasePage, Image-&gt;NumberOfPages);
  }


I fixed it locally by setting Image-&gt;ImageBasePage to 0 after CoreLoadPeImage() freed Image-&gt;ImageContext.ImageAddress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2583</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-10 20:04:10 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2600</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-08-14 04:50:27 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/compare/0024172d909e...9a701955a55d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>581</bug_id>
          
          <creation_ts>2017-06-02 17:36:00 +0000</creation_ts>
          <short_desc>Add --wholearchive to GCC family DLINK_FLAGS to improve detection of multiply defined symbols</short_desc>
          <delta_ts>2017-09-04 21:41:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2226</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-06-02 17:36:00 +0000</bug_when>
    <thetext>Here is the link to the complete thread on this topic

https://lists.01.org/pipermail/edk2-devel/2017-May/010922.html

A duplicate symbol was detected using XCODE5 tool chain.  This same
duplicate symbol was actually present in all tool chains, but was
not being detected.

The linker flag for GCC builds that detects this duplicate symbol
is --wholearchive:

https://lists.01.org/pipermail/edk2-devel/2017-May/010991.html

The size impact for adding --wholearchive to GCC builds is minimal,
so the recommendation is to add --wholearchive to DLINK_FLAGS for
all GCC tool chains that support this flag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2255</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-07 21:06:09 +0000</bug_when>
    <thetext>assign to Yonghong 
Liming: confirm with Mike offline has patch or not</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2673</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-04 21:41:06 +0000</bug_when>
    <thetext>already fixed by liming.
SHA-1: f3f0bd168f816b1315ebf0a3fe4522cf6f5b6883</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>683</bug_id>
          
          <creation_ts>2017-08-28 02:22:14 +0000</creation_ts>
          <short_desc>Need to update VFR Data Struct Definition in edk2-VfrSpecification</short_desc>
          <delta_ts>2017-09-15 04:01:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2648</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-08-28 02:22:14 +0000</bug_when>
    <thetext>Since our VfrCompiler will be enhanced to support Union and bit field, so the edk2-VfrSpecification need to be updated accordingly.
Update part: 2.3 VFR Data Struct Definition</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2662</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-31 20:06:58 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2739</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-09-15 04:01:44 +0000</bug_when>
    <thetext>https://github.com/tianocore-docs/edk2-VfrSpecification/commit/2b9e56c530df33bf82f905007c6c4e297ce690c8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>509</bug_id>
          
          <creation_ts>2017-04-26 05:04:08 +0000</creation_ts>
          <short_desc>Build spec: in Section 8.2.5, the Pcd value priority is not include FDF PCD settings</short_desc>
          <delta_ts>2017-05-26 23:26:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>518</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1931</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-26 05:04:08 +0000</bug_when>
    <thetext>in section 8.2.5 Post processing chapter, it only mention below PCD value priority, but missed the FDF pcd settings.

The DSC file&apos;s component INF scoping &lt;Pcds*&gt; sections
The DSC file&apos;s [Pcd*.arch.skuid] sections
The DSC file&apos;s [Pcd*.common.skuid] sections
The DSC file&apos;s [Pcd*.arch] sections
The DSC file&apos;s [Pcd*.common] sections
The INF file&apos;s PCD sections
The DEC file&apos;s PCD sections</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1935</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-26 21:07:10 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2183</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-26 23:26:32 +0000</bug_when>
    <thetext>This issue is the same as 518.  518 provides a more detailed 
description of the change.

*** This bug has been marked as a duplicate of bug 518 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>998</bug_id>
          
          <creation_ts>2018-07-03 21:06:19 +0000</creation_ts>
          <short_desc>using of goto in .nsh script within for loop causes script abort if goto label is inside the loop</short_desc>
          <delta_ts>2019-02-05 11:40:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="Vladimir Olovyannikov">vladimir.olovyannikov</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4233</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2018-07-03 21:06:19 +0000</bug_when>
    <thetext>Example:

for %r run (1 %chunks_count%)
  parse %temp%\offsets.txt Offset 2 -i %r &gt;v chunk_file
  parse %temp%\offsets.txt Offset 3 -i %r &gt;v chunk_offset

:DOWNLOAD_ROOTFS_CHUNK
  echo &quot; --- PROCESSING CHUNK %r/%chunks_count% [%p_desc% - dir %dir_name%]&quot;
  tftp %eth_int% -s %tftp_blocksize% %serverip% %tftp_dir%/%dir_name%/%chunk_file% %esp_root%\%chunk_file%
  if %lasterror% ne 0x0 then
    set -v flash_err_msg &quot;FAILED TO DOWNLOAD NEXT CHUNK (%r) for %dir_name%.&quot;
    if &quot;%always_retry_download%.&quot; == &quot;1.&quot; then
      echo &quot;%flash_err_msg%&quot;
      goto DOWNLOAD_ROOTFS_CHUNK
    else
      set -v flash_err 13
      goto EXIT
    endif
  endif
...

endfor

Now, if tftp utility returned an error, and we need to always retry download, the script is doomed: the script engine would not find :DOWNLOAD_ROOTFS_CHUNK label, and as a result ShellCommandRunGoto would print STR_SYNTAX_NO_MATCHING for Goto with error line pointing to the line where &quot;goto&quot; statement is located.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4237</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-05 20:02:58 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4346</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-07-19 04:57:45 +0000</bug_when>
    <thetext>(In reply to Vladimir Olovyannikov from comment #0)
&gt; Example:
&gt; 
&gt; for %r run (1 %chunks_count%)
&gt;   parse %temp%\offsets.txt Offset 2 -i %r &gt;v chunk_file
&gt;   parse %temp%\offsets.txt Offset 3 -i %r &gt;v chunk_offset
&gt; 
&gt; :DOWNLOAD_ROOTFS_CHUNK
&gt;   echo &quot; --- PROCESSING CHUNK %r/%chunks_count% [%p_desc% - dir %dir_name%]&quot;
&gt;   tftp %eth_int% -s %tftp_blocksize% %serverip%
&gt; %tftp_dir%/%dir_name%/%chunk_file% %esp_root%\%chunk_file%
&gt;   if %lasterror% ne 0x0 then
&gt;     set -v flash_err_msg &quot;FAILED TO DOWNLOAD NEXT CHUNK (%r) for %dir_name%.&quot;
&gt;     if &quot;%always_retry_download%.&quot; == &quot;1.&quot; then
&gt;       echo &quot;%flash_err_msg%&quot;
&gt;       goto DOWNLOAD_ROOTFS_CHUNK
&gt;     else
&gt;       set -v flash_err 13
&gt;       goto EXIT
&gt;     endif
&gt;   endif
&gt; ...
&gt; 
&gt; endfor
&gt; 
&gt; Now, if tftp utility returned an error, and we need to always retry
&gt; download, the script is doomed: the script engine would not find
&gt; :DOWNLOAD_ROOTFS_CHUNK label, and as a result ShellCommandRunGoto would
&gt; print STR_SYNTAX_NO_MATCHING for Goto with error line pointing to the line
&gt; where &quot;goto&quot; statement is located.

Which revision of EDKII code are you using? We cannot reproduce it using latest code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4716</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-27 01:17:45 +0000</bug_when>
    <thetext>Assign back to submitter for more information.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6174</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-22 21:44:09 +0000</bug_when>
    <thetext>Hi  Vladimir Olovyannikov , whether you still can reproduce this issue ? if both you and us can&apos;t reproduce it, how about we close this one first ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6175</commentid>
    <comment_count>5</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2019-01-22 22:04:29 +0000</bug_when>
    <thetext>Hi Yonghong Zhu,

I have since then made a workaround.
I can undo it and repeat.
Let me do that. If I cannot reproduce, this ticket can be closed.

Thank you,
Vladimir</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6296</commentid>
    <comment_count>6</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2019-02-05 11:40:57 +0000</bug_when>
    <thetext>Hi Ray Ni, Yonghong Zhu,

I cannot reproduce with the latest edk2. Closing.
If the bug arises, will reopen.

Thanks,
Vladimir</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>444</bug_id>
          
          <creation_ts>2017-03-24 13:00:20 +0000</creation_ts>
          <short_desc>document FixedAtBuild (VOID*) PCD use in the [DEPEX] section of INF files</short_desc>
          <delta_ts>2019-01-10 03:23:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>443</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>karunakar_poosapalli</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>star.zeng</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1688</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-24 13:00:20 +0000</bug_when>
    <thetext>This is the documentation counterpart of &lt;https://bugzilla.tianocore.org/show_bug.cgi?id=443&gt;, and as such, this docs BZ depends on the code BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1867</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-19 21:06:09 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4161</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-19 01:53:45 +0000</bug_when>
    <thetext>SHA-1: f9dcd0ebb4d01ac3db3e9749331c60f7e1c49c7d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>266</bug_id>
          
          <creation_ts>2016-11-29 07:54:02 +0000</creation_ts>
          <short_desc>asm_resp/app_resp.txt can not be generated successfully</short_desc>
          <delta_ts>2017-02-15 04:07:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1046</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2016-11-29 07:54:02 +0000</bug_when>
    <thetext>BaseTools already implemented a function to let user set a value of command lenth from build command. then tools will generated a *.txt file to store the command temporary. this is to walk around NASM limitation.

but after testing, asm_resp/app_resp.txt can not be generated successfully</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1083</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-11-30 20:05:49 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1450</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-15 04:07:37 +0000</bug_when>
    <thetext>For app_resp.txt file, the input file is &quot;?.dxs, ?.Dxs, ?.DXS&quot;, but the test source tree doesn&apos;t have such files. It is test case issue.
 
For asm_resp.txt file, because in the tools_def.txt file, we have following build rule order &quot;*_*_*_*_BUILDRULEORDER = nasm asm Asm ASM S s&quot;, the nasm file has higher priority than asm file, so in the test source tree, the asm file is not built. For tester, the easiest way to generate the asm_resp.txt is remove the &apos;nasm&apos; from the build rule order.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>925</bug_id>
          
          <creation_ts>2018-04-05 14:03:49 +0000</creation_ts>
          <short_desc>Shell tftp app causes assertion and a memory leak if a file cannot be opened after download succeeded</short_desc>
          <delta_ts>2018-08-15 00:57:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3831</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2018-04-05 14:03:49 +0000</bug_when>
    <thetext>Reproducing:
1. Boot into UEFI Shell and do not set a current folder (that is stay on Shell&gt; )
2. tftp something
3. observe that after successful download on FreePages there is an assertion
ASSERT [DxeCore] /uefi/MdeModulePkg/Core/Dxe/Mem/Page.c(731): NumberOfPages
And pages are not freed.

Cause:
Instead of using FileSize, Tftp app uses DataSize which is only assigned at line 542 of Tftp.c, and only if ShellOpenFileByName succeeded. This DataSize variable is then used to free pages.

Solution:
this DataSize variable is useless, use FileSize instead; remove DataSize declaration, and then the issue would gone.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3832</commentid>
    <comment_count>1</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2018-04-05 14:08:39 +0000</bug_when>
    <thetext>Actually, simply move DataSize = FileSize from line 542 right after DownloadFile() call (line 514 of Tftp.c) and this should do.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3903</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-19 20:13:11 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3932</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-04-26 02:16:56 +0000</bug_when>
    <thetext>
We should not remove the DataSize directly because the FileSize may be changed due to the ShellWriteFile(). So, move DataSize = FileSize after DownloadFile() is fine to me. 

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4582</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-08-15 00:57:23 +0000</bug_when>
    <thetext>The fixed version is https://github.com/tianocore/edk2/commit/280f49b81170aee9176a47085b168ff3bc9fd3e7.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>373</bug_id>
          
          <creation_ts>2017-02-08 18:33:29 +0000</creation_ts>
          <short_desc>[FDF spec] Conditional statement examples incorrect</short_desc>
          <delta_ts>2017-04-12 12:42:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brandon Huber">brandon.huber</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>brandon.huber</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          <cf_documents>EDK II FDF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1403</commentid>
    <comment_count>0</comment_count>
    <who name="Brandon Huber">brandon.huber</who>
    <bug_when>2017-02-08 18:33:29 +0000</bug_when>
    <thetext>In section 2.2.8 &quot;Conditional Statements (!if...)&quot; of the FDF spec v1.26, it states:
&gt;&gt; When using a marco in the !if or !elseif conditionals, the macro name must be
&gt;&gt; encapsulated between $( and ).

In the examples that follow, however, it shows a macro being used without the `$(` and `)` wrapping it:
&gt;&gt; !elseif BARFOO

Additionally, an earlier example shows a space between `!else` and `if`, yet the spec doesn&apos;t mention if this is acceptable or not:
&gt;&gt; !else if $(FAMILY) == &quot;GCC&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1410</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-02-08 21:13:59 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1795</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-12 12:42:45 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore-docs/edk2-FdfSpecification/commit/9d7b374d7dbf13d72f51a1640d1076fb76a9b192</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>844</bug_id>
          
          <creation_ts>2018-01-09 17:40:57 +0000</creation_ts>
          <short_desc>Not always reflecting current Shift or Toggle state when calling ReadKeyStroke()</short_desc>
          <delta_ts>2018-02-01 01:20:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael A. Rothman">michael.a.rothman</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.a.rothman</cc>
    
    <cc>Michael.Turner</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3361</commentid>
    <comment_count>0</comment_count>
    <who name="Michael A. Rothman">michael.a.rothman</who>
    <bug_when>2018-01-09 17:40:57 +0000</bug_when>
    <thetext>Today&apos;s specification contains the following text:

UEFI drivers which implement the EFI_SIMPLE_TEXT_INPUT_EX protocol are required to return KeyData.Key and KeyData.KeyState values. These drivers must always return the most current state of KeyData.KeyState.KeyShiftState and KeyData.KeyState.KeyToggleState.


Problem:

However, our implementations are not exposing the current shift and toggle states when a key is not present. 

This is a bug.

This is especially a concern when someone wants to expose partial key states (e.g. reading if a shift key is held down or other types of keys) they must set the EFI_KEY_STATE_EXPOSED state. To do that, they need to be able to get the current KeyData.KeyState values so they can Read/Mod/Write via the SetState() command. Today, if current KeyState information isn&apos;t reflected even in an EFI_NOT_READY situation, this isn&apos;t possible.

All implementations of EFI_SIMPLE_TEXT_INPUT_EX should always reflect the current KeyData.KeyState values.

In addition, since the consplitter also aggregates and produces this protocol, it needs to comprehend this requirement.

Realize as well, some types of input devices (e.g. serial) may not be able to expose shift or toggle state data. In those cases, the EFI_SHIFT_STATE_VALID and EFI_TOGGLE_STATE_VALID bits wouldn&apos;t be active if a device cannot expose valid toggle/shift states.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3362</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-09 21:40:57 +0000</bug_when>
    <thetext>Rothman,
Do you request ReadKeyStrokeEx() returns NotReady status but with valid shift/toggle state when no key is pressed and EFI_KEY_STATE_EXPOSED bit is cleared?

Is this request from OSV&apos;s OS loader?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3371</commentid>
    <comment_count>2</comment_count>
    <who name="Michael A. Rothman">michael.a.rothman</who>
    <bug_when>2018-01-10 13:57:33 +0000</bug_when>
    <thetext>ReadKeyStrokeEx() should always return the current shift/toggle state when called (if possible).

The example to think about is that when someone wants to call SetState() and change one of the toggle bits without changing the rest, they MUST be able to get the current state to do that. So, they&apos;d call ReadKeyStrokeEx(), the KeyData.KeyState would reflect both the current shift and toggle states. Then they&apos;d modify whatever bit they desire, whether it&apos;s EFI_KEY_STATE_EXPOSED or anything else. And finally, they&apos;d call SetState() with the modified information to adjust the state.

This applies to all users of the protocol, whether an OS Loader or a UEFI application.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3372</commentid>
    <comment_count>3</comment_count>
    <who name="Michael A. Rothman">michael.a.rothman</who>
    <bug_when>2018-01-10 14:02:11 +0000</bug_when>
    <thetext>&gt;Do you request ReadKeyStrokeEx() returns NotReady status but with valid shift/toggle state when no key is pressed and EFI_KEY_STATE_EXPOSED bit is cleared?

Also, to be clear - even if no key is present and ReadKeyStrokeEx() is going to return EFI_NOT_READY, the KeyData.KeyState field must always be filled with current state information if possible..

The above is of course applicable to devices that are CAPABLE of reflecting toggle state. Devices such as Serial terminals don&apos;t have such a capability and would accordingly return no valid state information.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3373</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-10 22:26:22 +0000</bug_when>
    <thetext>Mike,
I agree with your concern and requirements. Do you think a UEFI Spec clarification is necessary for this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3374</commentid>
    <comment_count>5</comment_count>
    <who name="Michael A. Rothman">michael.a.rothman</who>
    <bug_when>2018-01-10 22:57:02 +0000</bug_when>
    <thetext>(In reply to Ruiyu Ni from comment #4)
&gt; Mike,
&gt; I agree with your concern and requirements. Do you think a UEFI Spec
&gt; clarification is necessary for this?

Actually, the spec already says this behavior is required, but I&apos;m actually adding a slight clarification in the description of the EFI_NOT_READY to point out again that even in an error condition, the current KeyState must be returned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3378</commentid>
    <comment_count>6</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-11 19:08:35 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to fix it on UDK2018 and trunk.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3525</commentid>
    <comment_count>7</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-02-01 01:20:06 +0000</bug_when>
    <thetext>pushed @ UDK2018:
a919bfcd28bdabc80a310c77eefc4a46184b672a..
e8bfb85874a9b8714245264006a958db7de19a6b

pushed @ master:
2de87e461d37680ebbae455b51341dbf49a27567..
821807bcefb9a36e598d71a8004fae5aab2052a0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>305</bug_id>
          
          <creation_ts>2016-12-21 21:55:29 +0000</creation_ts>
          <short_desc>[Build/DSC/FDF/INF/DEC][Spec] Update spec to support flexible PCD value formats</short_desc>
          <delta_ts>2018-04-11 03:33:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>306</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>
    
    <cf_documents>EDK II DEC Specification</cf_documents>
    
    <cf_documents>EDK II DSC Specification</cf_documents>
    
    <cf_documents>EDK II FDF Specification</cf_documents>
    
    <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1202</commentid>
    <comment_count>0</comment_count>
      <attachid>29</attachid>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-21 21:55:29 +0000</bug_when>
    <thetext>Created attachment 29
RFC mail

The RFC is approved, so this bug is for document to update. (Attached the RFC)


Some examples of this additional flexibility are:
  BOOLEAN TRUE
  BOOLEAN 1
  BOOLEAN {0}
  UINT8   TRUE
  UINT8   0x12
  UINT8   &apos;A&apos;
  UINT8   {TRUE}
  UINT8   {&apos;A&apos;}
  UINT64  &quot;ABCDEFG&quot;
  UINT64  L&quot;ABC&quot;
  UINT64  {0x12, 27, TRUE, FALSE, &apos;A&apos;, &apos;B&apos;, &apos;C&apos;, &apos;D&apos;}
  VOID*   {&apos;X&apos;, &apos;Y&apos;, &apos;Z&apos;}
  VOID*   { UINT8(7), UINT16(8), UINT32(0x27), UINT64(0x1234567812345678) }
  VOID*   { &apos;AB&apos;, L&apos;AB&apos;, &quot;AB&quot;, L&quot;AB&quot; }
  VOID*   { GUID(&quot;11E13869-1896-4A07-8B21-D8B23DD2A2B4&quot;) }
  VOID*   { GUID({ 0x11e13869, 0x1896, 0x4a07, { 0x8b, 0x21, 0xd8, 0xb2, 0x3d, 0xd2, 0xa2, 0xb4 } }) }
  VOID*   { GUID(gEfiBlockIoProtocolGuid) }
  VOID*   { DEVICE_PATH(&quot;PciRoot(0)/Pci(0,0)&quot;) }
  VOID*   { 0, 1, 2, LABEL(Start) 3, 4, 5, LABEL(End) 6, UINT8(OFFSET_OF(End) - OFFSET_OF(Start)) }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1248</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-01-04 20:07:53 +0000</bug_when>
    <thetext>bug scrub: assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3854</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-11 03:33:31 +0000</bug_when>
    <thetext>the spec already be published with UDK2018.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>29</attachid>
            <date>2016-12-21 21:55:29 +0000</date>
            <delta_ts>2016-12-21 21:55:29 +0000</delta_ts>
            <desc>RFC mail</desc>
            <filename>RFC V2 Add more flexible PCD value formats in DECINFDSCFDF files.msg</filename>
            <type>application/octet-stream</type>
            <size>45056</size>
            <attacher name="Yonghong Zhu">yonghong.zhu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>306</bug_id>
          
          <creation_ts>2016-12-21 22:07:32 +0000</creation_ts>
          <short_desc>BaseTools need to support flexible PCD value formats</short_desc>
          <delta_ts>2017-08-09 05:13:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>541</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>305</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1203</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-21 22:07:32 +0000</bug_when>
    <thetext>The RFC is approved, so this bug is for BaseTools to add support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1249</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-01-04 20:08:32 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2574</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-09 05:13:43 +0000</bug_when>
    <thetext>it is duplicate with 541, so close it.

*** This bug has been marked as a duplicate of bug 541 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>134</bug_id>
          
          <creation_ts>2016-09-30 03:27:02 +0000</creation_ts>
          <short_desc>Introduce VS prefix env for VS tool chain customization in tools_def.txt</short_desc>
          <delta_ts>2016-11-14 02:32:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>548</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-09-30 03:27:02 +0000</bug_when>
    <thetext>VS tool chain uses the hard code tool path in tools_def.txt. They are not easy to be customized. To resolve it, new VS prefix envs are introduced. User can configure those ENV for the customization. To keep compatible, VS prefix envs will be set in toolsetup.bat.

DEFINE VS2013_BIN      = C:\Program Files\Microsoft Visual Studio 12.0\Vc\bin
DEFINE VS2013_DLL      = C:\Program Files\Microsoft Visual Studio 12.0\Common7\IDE;DEF(VS2012_BIN)
DEFINE WINSDK8_BIN     = c:\Program Files\Windows Kits\8.0\bin\x86
DEFINE WINDDK_BIN16    = C:\WINDDK\3790.1830\bin\bin16
DEFINE WIN_IASL_BIN    = C:\ASL\iasl.exe
==&gt;
DEFINE VS2013_BIN      = ENV(VS2013_PREFIX)\Vc\bin
DEFINE VS2013_DLL      = ENV(VS2013_PREFIX)\Common7\IDE;DEF(VS2013_BIN)
DEFINE WINSDK8_BIN     = ENV(WINSDK8_PREFIX)\x86
DEFINE WINDDK_BIN16    = ENV(WINDDK3790_PREFIX)\bin16
DEFINE WIN_IASL_BIN    = ENV(IASL_PREFIX)iasl</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>609</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-17 00:48:37 +0000</bug_when>
    <thetext>VS2013_PREFIX=%VS120COMNTOOLS:~0,-14%
WINSDK8_PREFIX=c:\Program Files\Windows Kits\8.0\bin\
WINDDK3790_PREFIX=C:\WINDDK\3790.1830\bin\</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>639</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-10-19 21:05:24 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>828</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-03 03:49:55 +0000</bug_when>
    <thetext>The fix is :
SHA-1: 40d7406f6e151ccbcbebd5dae1e137d6fb0ac981
SHA-1: 314b26a847e6ebad4126ee724cd329e4d4c9338b
SHA-1: 90a40219673303f97890d5ea2e367ee2dc04a0b3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>960</bug_id>
          <alias>CVE-2019-14553</alias>
          <creation_ts>2018-05-29 10:22:25 +0000</creation_ts>
          <short_desc>server certificate with invalid domain name (CN) accepted in HTTPS-over-IPv6 boot</short_desc>
          <delta_ts>2019-11-04 06:36:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>dannf</cc>
    
    <cc>dwmw2</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ericj</cc>
    
    <cc>f4bug</cc>
    
    <cc>glin</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>qin.long</cc>
    
    <cc>rocky.ni</cc>
    
    <cc>rschiron</cc>
    
    <cc>ryan.ware</cc>
    
    <cc>ting.ye</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4026</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-05-29 10:22:25 +0000</bug_when>
    <thetext>Hi,

* I created a new CA certificate, and a new website certificate (signed by
  the former). I set up dhcpd (IPv4) and Apache to serve HTTPSv4, using the
  website certificate. I also imported the CA certificate into OVMF, and the
  HTTPSv4 boot succeeded. The website is called (IP only, no DNS)
  &quot;192.168.124.2&quot;, and this is the Common Name in the website certificate
  too.

  As a part of verifying the environment, I tested the netboot file with
  &quot;curl -v -I&quot;, against the CA certificate, and &quot;curl&quot; accepts the website
  certificate:

&gt; $ curl -I -v \
&gt;     https://192.168.124.2/RHEL-7.4-20170711.0-Server-x86_64-boot.iso
&gt; * About to connect() to 192.168.124.2 port 443 (#0)
&gt; *   Trying 192.168.124.2...
&gt; * Connected to 192.168.124.2 (192.168.124.2) port 443 (#0)
&gt; * Initializing NSS with certpath: sql:/etc/pki/nssdb
&gt; *   CAfile: /etc/pki/tls/certs/ca-bundle.crt
&gt;   CApath: none
&gt; * SSL connection using TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
&gt; * Server certificate:
&gt; *       subject: CN=192.168.124.2,OU=RHBZ 1536624,O=Laszlo Ersek Website,L=Budapest,ST=Budapest,C=HU
&gt; *       start date: May 29 10:10:23 2018 GMT
&gt; *       expire date: Jun 28 10:10:23 2018 GMT
&gt; *       common name: 192.168.124.2
&gt; *       issuer: E=lersek@redhat.com,CN=Laszlo Ersek CA,OU=RHBZ 1536624,O=Laszlo Ersek,L=Budapest,ST=Budapest,C=HU
&gt; &gt; HEAD /RHEL-7.4-20170711.0-Server-x86_64-boot.iso HTTP/1.1
&gt; &gt; User-Agent: curl/7.29.0
&gt; &gt; Host: 192.168.124.2
&gt; &gt; Accept: */*
&gt; &gt;
&gt; &lt; HTTP/1.1 200 OK
&gt; &lt; Date: Tue, 29 May 2018 13:35:52 GMT
&gt; &lt; Server: Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips
&gt; &lt; Last-Modified: Tue, 11 Jul 2017 05:01:59 GMT
&gt; &lt; ETag: &quot;1c800000-5540399693fc0&quot;
&gt; &lt; Accept-Ranges: bytes
&gt; &lt; Content-Length: 478150656
&gt; &lt; Content-Type: application/octet-stream

* As next step, I enabled IPv6. The IPv6 address of the same server (and the
  same network interface) is &quot;fd33:eb1b:9b36::2&quot;. I wrote the dhcpd6 (IPv6)
  configuration such that the bootfile URL returned to OVMF would point to
  this address.

  As a part of verifying the environment, I tested the netboot file with
  &quot;curl -v -I&quot; again. Using the IPv6 address to reach the server, &quot;curl&quot; now
  aborts the connection, because the website certificate from above is good
  for &quot;192.168.124.2&quot; only, and not for &quot;fd33:eb1b:9b36::2&quot;:

&gt; $ curl --globoff -v -I \
&gt;     https://&apos;[fd33:eb1b:9b36::2]&apos;/RHEL-7.4-20170711.0-Server-x86_64-boot.iso
&gt; * About to connect() to fd33:eb1b:9b36::2 port 443 (#0)
&gt; *   Trying fd33:eb1b:9b36::2...
&gt; * Connected to fd33:eb1b:9b36::2 (fd33:eb1b:9b36::2) port 443 (#0)
&gt; * Initializing NSS with certpath: sql:/etc/pki/nssdb
&gt; *   CAfile: /etc/pki/tls/certs/ca-bundle.crt
&gt;   CApath: none
&gt; * Server certificate:
&gt; *       subject: CN=192.168.124.2,OU=RHBZ 1536624,O=Laszlo Ersek Website,L=Budapest,ST=Budapest,C=HU
&gt; *       start date: May 29 10:10:23 2018 GMT
&gt; *       expire date: Jun 28 10:10:23 2018 GMT
&gt; *       common name: 192.168.124.2
&gt; *       issuer: E=lersek@redhat.com,CN=Laszlo Ersek CA,OU=RHBZ 1536624,O=Laszlo Ersek,L=Budapest,ST=Budapest,C=HU
&gt; * NSS error -12276 (SSL_ERROR_BAD_CERT_DOMAIN)
&gt; * Unable to communicate securely with peer: requested domain name does not match the server&apos;s certificate.
&gt; * Closing connection 0

  This is the correct HTTPSv6 client behavior, and the Apache configuration
  will have to be extended (with a new IPv6 virtual host stanza that has its
  own matching website certificate).

  However, the HTTPSv6 boot succeeds at this stage:

&gt; &gt;&gt;Start HTTP Boot over IPv6....
&gt;   Station IPv6 address is FD33:EB1B:9B36:0:0:0:0:C8
&gt;
&gt;   URI: https://[fd33:eb1b:9b36::2]/RHEL-7.4-20170711.0-Server-x86_64-boot.iso
&gt;   File Size: 478150656 Bytes
&gt;   Downloading...23%

  This means that the website at fd33:eb1b:9b36::2 successfully impersonated
  the website at 192.168.124.2, for HTTPSv6 boot.


The edk2 wiki article at
&lt;https://github.com/tianocore/tianocore.github.io/wiki/HTTPS-Boot&gt; says that
edk2 HTTPS implements one-way authentication, thus I believe the above is
not intended behavior.

The OpenSSL wiki has a relevant article at
&lt;https://wiki.openssl.org/index.php/Hostname_validation&gt;. One important part
is setting &quot;SSL_VERIFY_PEER&quot; with SSL_set_verify(). Indeed,
&quot;NetworkPkg/HttpDxe/HttpsSupport.c&quot; sets EFI_TLS_VERIFY_PEER (value 1) by
default, and that equals SSL_VERIFY_PEER:

  TlsConfigureSession()  [NetworkPkg/HttpDxe/HttpsSupport.c]
    TlsSetSessionData()  [NetworkPkg/TlsDxe/TlsProtocol.c]
      TlsSetVerify()     [CryptoPkg/Library/TlsLib/TlsConfig.c]
        SSL_set_verify()

However, edk2 never calls either X509_VERIFY_PARAM_set1_host() or
SSL_set1_host(), which would be the other critical piece, according to the
OpenSSL wiki article.

CryptoPkg has an API called X509GetCommonName(), but we don&apos;t appear to use
that either, for this purpose.

Can someone please confirm? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4027</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-05-29 10:45:04 +0000</bug_when>
    <thetext>(Small correction: &quot;same server&quot; -- yes, &quot;same network interface&quot; -- no. I used a separate network interface for IPv6. I don&apos;t think this correction makes any difference, but it&apos;s better to be precise.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4029</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2018-05-30 04:54:52 +0000</bug_when>
    <thetext>Laszlo,

Yes, I think this is one left bug on EDKII TLS Stack.
We enabled the SSL_set_verify() with default SSL_VERIFY_PEER, but didn&apos;t set the expected hostname (by X509_VERIFY_PARAM_set1_host or SSL_set1_host) for validation. Then in fact, hostname checks are not performed on the peer certificate (which will be under potential Man-in-middle attack).

Will work with Jiaxin on this. This hostname validation may cover many opens: DNS wildcard support; DANE/DNSSEC consideration; CN/AltSubject in Cert, etc ...

And, thanks for raising this.


Best Regards &amp; Thanks,
LONG, Qin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4096</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-06-07 23:28:02 +0000</bug_when>
    <thetext>Add my comments:

For UEFI client, we set the EFI_TLS_VERIFY_PEER is intended to verify the certificate *chain* so as to accomplish server certificate verification (One way authentication requirement). So, mapping to OpenSSL, it’s equivalent to set the SSL_VERIFY_PEER via SSL_set_verify(). Combining the implementation of OpenSSL, *hostname validation* is not part of the certificate *chain verification*. So, the peer name check is not performed during the chain verification. 

Talking to the hostname validation, I think it means the name within the certificate presented by the server should match the hostname in the URL used by the client. I agree it’s the necessary verfication so as to avoid the potential but limited Man-In-The-Middle attacks. OpenSSL also provides the interface for the caller to enable the peer name verification (SSL_set_hostflags / SSL_set1_host). But UEFI TLS doesn’t follow that. Unfortunately, there is no APIs for the user to set which hostname should be checked via UEFI TLS protocol. 

If we want to support hostname validation, looks the API changes are necessary. I will continue work with Qin to support that. 

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4127</commentid>
    <comment_count>4</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2018-06-13 22:14:07 +0000</bug_when>
    <thetext>agree on issue.  ecr prepared to address api gap</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4236</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-07-05 12:00:08 +0000</bug_when>
    <thetext>Vincent, Jiaxin, Qin -- does Intel plan to request a CVE number for this vulnerability? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4282</commentid>
    <comment_count>6</comment_count>
      <attachid>185</attachid>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-07-17 03:02:54 +0000</bug_when>
    <thetext>Created attachment 185
Patches to support https hostname validation

Hi Laszlo,

Can you help to review and verify the attached patches?

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4288</commentid>
    <comment_count>7</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2018-07-17 03:53:19 +0000</bug_when>
    <thetext>The patches work for me.

After applying the patches, OVMF only accepts the server with the name in the certificate CN. If I set an arbitrary name in the certificate, I got the errors:

TlsDoHandshake SSL_HANDSHAKE_ERROR State=0x4 SSL_ERROR_SSL
TlsDoHandshake ERROR 0x1416F086=L14:F16F:R86</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4289</commentid>
    <comment_count>8</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-07-17 04:00:10 +0000</bug_when>
    <thetext>
Thanks the verification. 

ERROR code (0x1416F086=L14:F16F:R86) returned from TlsDoHandshake() is the expected result:

# define ERR_LIB_SSL             20
# define SSL_F_TLS_PROCESS_SERVER_CERTIFICATE             367
# define SSL_R_CERTIFICATE_VERIFY_FAILED                  134</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4309</commentid>
    <comment_count>9</comment_count>
      <attachid>185</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-07-17 16:35:49 +0000</bug_when>
    <thetext>Comment on attachment 185
Patches to support https hostname validation

Hi Jiaxin,

I just got back from PTO. I&apos;ll try to look at your patches soon, thank you for attaching them. For now I&apos;ll only fix the &quot;MIME Type&quot; and the &quot;patch&quot; metadata on the attachment -- the attachment is a ZIP archive, so &quot;MIME Type&quot; should be &quot;application/zip&quot; (not &quot;text/plain&quot;), plus &quot;patch&quot; should be unchecked. (If you tick &quot;patch&quot;, then Bugzilla will assume that the attachment is indeed a textual patch file, and it will offer an in-browser &quot;Diff view&quot;. That can&apos;t work for ZIP attachments.)

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4310</commentid>
    <comment_count>10</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-07-17 20:43:52 +0000</bug_when>
    <thetext>Yes, you are right. Thanks the correction.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4313</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-07-18 05:19:25 +0000</bug_when>
    <thetext>Hi Jiaxin,

I applied the patches from comment 6 on top of f63a3e286765
(&quot;UefiCpuPkg/MpInitLib: Load uCode once for each core.&quot;, 2018-07-18).

(1) when applying the patches, git issued some warnings, due to trailing
whitespace:

&gt; Applying: MdePkg/Include/Protocol/Tls.h: Add the data type of
&gt; EfiTlsVerifyHost
&gt; warning: 9 lines add whitespace errors.
&gt;
&gt; Applying: CryptoPkg/TlsLib: Add the library to check the specified host
&gt; name.
&gt; warning: 5 lines add whitespace errors.
&gt;
&gt; Applying: NetworkPkg/TlsDxe: Support host validation feature.
&gt; warning: 6 lines add whitespace errors.
&gt;
&gt; Applying: NetworkPkg/HttpDxe: Set the hostname for the verification.
&gt; warning: 1 line adds whitespace errors.

If you look at the paches with &quot;git show --color&quot;, then the trailing
whitespace is displayed in red, so it&apos;s not hard to remove.

--*--

Before testing the patches, I tried to briefly review them.

(2) For patch #1:

The changes seem to match the related Mantis ticket (1921). However, I don&apos;t
understand why the comments &quot;Session Configuration&quot; and &quot;Session
information&quot; are removed. I thought that the reason for inserting
&quot;EfiTlsVerifyHost&quot; in the middle was exactly that we wanted to keep it under
&quot;Session Configuration&quot;, separate from &quot;Session information&quot;. If those
comments no longer make sense, then we could simply add &quot;EfiTlsVerifyHost&quot;
at the end, just before &quot;EfiTlsSessionDataTypeMaximum&quot;. And then
&quot;EfiTlsVerifyHost&quot; would automatically get the value 11, without manual
assignment.

(Note that, in patch #1, I mostly focused on the EFI_TLS_SESSION_DATA_TYPE
changes only, not the flags.)

(3) For patch #2:

(3a) First, I think we should compare the return value of SSL_set1_host()
explicitly against 0, for complying with the edk2 coding style.

(3b) Second, I couldn&apos;t figure out whether SSL_set1_host() creates an
internal deep-copy of the hostname that is passed to it. Can you confirm
that? The examples (both in the wiki, and in the SSL_set1_host() API
documentation) only use string literals for host names. We should avoid both
that SSL_set1_host() save just a pointer to storage that goes away soon
after, and that SSL_set1_host() create a deep copy of the hostname that is
leaked if e.g. the HTTPS boot fails and the TLS connection is closed.

Actually, this might be something we should clarify at the spec level. I
notice that Tls*Get*SessionData() doesn&apos;t yet get support for the new data
type (and that&apos;s OK); however, I think we should clarify whether the caller
is free to release the hostname after setting the new item.

(4) For patch #3:

(4a) First, the multi-line controlling expressions for the &quot;if&quot; statements
don&apos;t appear indented according to the edk2 coding style.

(4b) Second, after the This-&gt;GetSessionData() method, I think we shouldn&apos;t
*just* check that Status is fine, but we should also check that, on output,
&quot;VerifyMethodSize&quot; equals sizeof VerifyMethod. Because, GetSessionData()
does not return an error if the session datum is *smaller* than the buffer
provided by the caller. Just an idea anyway; you might consider this overly
cautious.

(5) For patch #4:

(5a) First, considering the high-level protocol usage in
TlsConfigureSession(), and the lifecycle of the hostname, I *think* the
patch should be fine. Basically we pass a reference to
&quot;HttpInstance-&gt;RemoteHost&quot; down to SSL_set1_host(). My understanding is that
the latter will create a deep copy (and release it when the TLS session is
torn down), while we release &quot;HttpInstance-&gt;RemoteHost&quot; ourselves. Is my
understanding correct?

(5b) Second, I believe we don&apos;t really have to add the &quot;VerifyHost&quot; field to
the TLS_CONFIG_DATA structure. In TlsConfigureSession(), we could just use a
temporary (local variable) EFI_TLS_VERIFY_HOST object. But, the way you
wrote it, is consistent with the rest of the code, so I guess it&apos;s OK.

(5c) Third, and most importantly, I don&apos;t understand the change in the
EfiHttpRequest() function. The intent seems to be stripping the &apos;[&apos; and &apos;]&apos;
characters around numeric IPv6 addresses, but why is that necessary?

And, if it really is necessary, I think it should be in a separate patch.

(5d) Furthermore, the change introduces a leak to the EfiHttpRequest()
function. If the AllocatePool() call fails, we jump to &quot;Error1&quot; with
(HostName==NULL) -- and then we will leak &quot;TempHostName&quot;.

In fact, for stripping the &apos;[&apos; and &apos;]&apos; characters, I suggest:

- A more careful format check -- in addition to the current check, verify
  explicitly if the string length is at least 2 (or, string *size* is at
  least 3), and that the last (non-NUL) character is &apos;]&apos;,

- After the check, you can strip the brackets *without* additional memory
  allocation. CopyMem() is required to work between overlapping buffers
  (similarly to memmove()), so you can simply move the substring starting at
  offset 1 to the beginning of the string, and then NUL-terminate the string
  in-place so that the trailing &apos;]&apos; disappears. This way you can eliminate
  &quot;TempHostName&quot;.

- An optimization could be a new, OUT OPTIONAL parameter for the
  HttpUrlGetHostName() API in HttpLib, namely &quot;HostNameSize&quot;. This would
  save you the external AsciiStrSize() call(s). Of course, if you do this,
  it should be in a separate patch.

(I guess it would be better to discuss the patches on edk2-devel, after we
have good initial test results, and you post the patches for real -- I just
couldn&apos;t resist commenting on the code at once. But, Bugzilla is not a good
medium for patch reviews, so I agree that the review really belongs on the
list.)

--*--

I&apos;ll come back with test results for the current patch set in a later
comment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4314</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-07-18 05:49:27 +0000</bug_when>
    <thetext>Regarding (5c) -- I think I got it now. In URL encoding, the IPv6 address is protected with [] so that the colons (&quot;:&quot;) are not mistaken for port number separators and such. But, in the Common Name field of the certificate, the IPv6 address is stored without the [] brackets. So, for comparison, we have to grab the hostname from the URL, and strip the brackets.

I still claim that this should be done in a separate patch -- the &quot;HttpInstance-&gt;RemoteHost&quot; field should not contain the brackets in its own right, regardless of TLS hostname verification. The brackets are not part of the (numeric) hostname, they are part of the URL encoding only, AIUI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4315</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-07-18 07:20:10 +0000</bug_when>
    <thetext>I tested the patches in comment 6, on top of commit f63a3e286765.

I first tested both HTTPSv4 and HTTPSv6 with valid certificates, and then
both with invalid certificates. For the invalid cert tests, I swapped the
certificates between each other, so that the cert issued for the numeric
IPv4 address would be returned by Apache on the IPv6 interface, and the cert
issued for the numeric IPv6 address would be returned by Apache on the IPv4
interface.

All four tests passed -- the valid certificate cases booted (both HTTPSv4
and HTTPSv6), and the invalid cert cases were rejected (both HTTPSv4 and
HTTPSv6). In the latter two cases, the error message was the same as
reported by Gary in comment 7:

&gt; TlsDoHandshake SSL_HANDSHAKE_ERROR State=0x4 SSL_ERROR_SSL
&gt; TlsDoHandshake ERROR 0x1416F086=L14:F16F:R86

In addition, I confirmed that all four results were consistent with those
returned by &quot;curl -v -I&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4343</commentid>
    <comment_count>14</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-07-19 01:56:18 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #11)
&gt; Hi Jiaxin,
&gt; 
&gt; I applied the patches from comment 6 on top of f63a3e286765
&gt; (&quot;UefiCpuPkg/MpInitLib: Load uCode once for each core.&quot;, 2018-07-18).
&gt; 
&gt; (1) when applying the patches, git issued some warnings, due to trailing
&gt; whitespace:
&gt; 
&gt; &gt; Applying: MdePkg/Include/Protocol/Tls.h: Add the data type of
&gt; &gt; EfiTlsVerifyHost
&gt; &gt; warning: 9 lines add whitespace errors.
&gt; &gt;
&gt; &gt; Applying: CryptoPkg/TlsLib: Add the library to check the specified host
&gt; &gt; name.
&gt; &gt; warning: 5 lines add whitespace errors.
&gt; &gt;
&gt; &gt; Applying: NetworkPkg/TlsDxe: Support host validation feature.
&gt; &gt; warning: 6 lines add whitespace errors.
&gt; &gt;
&gt; &gt; Applying: NetworkPkg/HttpDxe: Set the hostname for the verification.
&gt; &gt; warning: 1 line adds whitespace errors.
&gt; 
&gt; If you look at the paches with &quot;git show --color&quot;, then the trailing
&gt; whitespace is displayed in red, so it&apos;s not hard to remove.
&gt; 
&gt; --*--


Thanks, I will fix them within next version patches.


&gt; 
&gt; Before testing the patches, I tried to briefly review them.
&gt; 
&gt; (2) For patch #1:
&gt; 
&gt; The changes seem to match the related Mantis ticket (1921). However, I don&apos;t
&gt; understand why the comments &quot;Session Configuration&quot; and &quot;Session
&gt; information&quot; are removed. I thought that the reason for inserting
&gt; &quot;EfiTlsVerifyHost&quot; in the middle was exactly that we wanted to keep it under
&gt; &quot;Session Configuration&quot;, separate from &quot;Session information&quot;. If those
&gt; comments no longer make sense, then we could simply add &quot;EfiTlsVerifyHost&quot;
&gt; at the end, just before &quot;EfiTlsSessionDataTypeMaximum&quot;. And then
&gt; &quot;EfiTlsVerifyHost&quot; would automatically get the value 11, without manual
&gt; assignment.
&gt; 


It was removed by mistake. In the latest version ECR, we keep &quot;EfiTlsVerifyHost&quot; in the middle of enum, so, I will add it back.  


&gt; (Note that, in patch #1, I mostly focused on the EFI_TLS_SESSION_DATA_TYPE
&gt; changes only, not the flags.)
&gt; 
&gt; (3) For patch #2:
&gt; 
&gt; (3a) First, I think we should compare the return value of SSL_set1_host()
&gt; explicitly against 0, for complying with the edk2 coding style.
&gt; 


Agree.


&gt; (3b) Second, I couldn&apos;t figure out whether SSL_set1_host() creates an
&gt; internal deep-copy of the hostname that is passed to it. Can you confirm
&gt; that? The examples (both in the wiki, and in the SSL_set1_host() API
&gt; documentation) only use string literals for host names. We should avoid both
&gt; that SSL_set1_host() save just a pointer to storage that goes away soon
&gt; after, and that SSL_set1_host() create a deep copy of the hostname that is
&gt; leaked if e.g. the HTTPS boot fails and the TLS connection is closed.
&gt; 


SSL_set1_host() invokes OPENSSL_strndup() to allocate its own maintained memory, it doesn&apos;t use the pointer directly. Besides, memory leak will not happen since it will be freed once we close the session (Already comfirmed).    


&gt; Actually, this might be something we should clarify at the spec level. I
&gt; notice that Tls*Get*SessionData() doesn&apos;t yet get support for the new data
&gt; type (and that&apos;s OK); however, I think we should clarify whether the caller
&gt; is free to release the hostname after setting the new item.
&gt; 

For TlsGetSessionData(), I don&apos;t perform to support get the host info currently, so just return unsupported.

For the setting operation, all the data pointer from the API parameter will not be saved to openssl directly (Actually, it&apos;s not allowed). So, it&apos;s depend on the consumer whether need to free the data pass in. Usually, we need to clarify the additional free steps for the data out, not data in. 
 

&gt; (4) For patch #3:
&gt; 
&gt; (4a) First, the multi-line controlling expressions for the &quot;if&quot; statements
&gt; don&apos;t appear indented according to the edk2 coding style.
&gt; 


Thanks the reminder.


&gt; (4b) Second, after the This-&gt;GetSessionData() method, I think we shouldn&apos;t
&gt; *just* check that Status is fine, but we should also check that, on output,
&gt; &quot;VerifyMethodSize&quot; equals sizeof VerifyMethod. Because, GetSessionData()
&gt; does not return an error if the session datum is *smaller* than the buffer
&gt; provided by the caller. Just an idea anyway; you might consider this overly
&gt; cautious.
&gt; 


If EFI_SUCCESS returned from GetSessionData(), the data size must be equal to the sizeof data type. Spec also declares &quot;On output, it means the size of copied Data buffer if EFI_SUCCESS&quot;. So, I think just check that Status is fine.


&gt; (5) For patch #4:
&gt; 
&gt; (5a) First, considering the high-level protocol usage in
&gt; TlsConfigureSession(), and the lifecycle of the hostname, I *think* the
&gt; patch should be fine. Basically we pass a reference to
&gt; &quot;HttpInstance-&gt;RemoteHost&quot; down to SSL_set1_host(). My understanding is that
&gt; the latter will create a deep copy (and release it when the TLS session is
&gt; torn down), while we release &quot;HttpInstance-&gt;RemoteHost&quot; ourselves. Is my
&gt; understanding correct?
&gt; 


Yes, correct.


&gt; (5b) Second, I believe we don&apos;t really have to add the &quot;VerifyHost&quot; field to
&gt; the TLS_CONFIG_DATA structure. In TlsConfigureSession(), we could just use a
&gt; temporary (local variable) EFI_TLS_VERIFY_HOST object. But, the way you
&gt; wrote it, is consistent with the rest of the code, so I guess it&apos;s OK.
&gt; 
&gt; (5c) Third, and most importantly, I don&apos;t understand the change in the
&gt; EfiHttpRequest() function. The intent seems to be stripping the &apos;[&apos; and &apos;]&apos;
&gt; characters around numeric IPv6 addresses, but why is that necessary?
&gt; 


You have explained in Comment 12 :).


&gt; And, if it really is necessary, I think it should be in a separate patch.


Agree, will follow that.


&gt; 
&gt; (5d) Furthermore, the change introduces a leak to the EfiHttpRequest()
&gt; function. If the AllocatePool() call fails, we jump to &quot;Error1&quot; with
&gt; (HostName==NULL) -- and then we will leak &quot;TempHostName&quot;.
&gt; 


Agree, thanks point that.


&gt; In fact, for stripping the &apos;[&apos; and &apos;]&apos; characters, I suggest:
&gt; 
&gt; - A more careful format check -- in addition to the current check, verify
&gt;   explicitly if the string length is at least 2 (or, string *size* is at
&gt;   least 3), and that the last (non-NUL) character is &apos;]&apos;,
&gt; 
&gt; - After the check, you can strip the brackets *without* additional memory
&gt;   allocation. CopyMem() is required to work between overlapping buffers
&gt;   (similarly to memmove()), so you can simply move the substring starting at
&gt;   offset 1 to the beginning of the string, and then NUL-terminate the string
&gt;   in-place so that the trailing &apos;]&apos; disappears. This way you can eliminate
&gt;   &quot;TempHostName&quot;.
&gt; 


Thanks the suggestion:).


&gt; - An optimization could be a new, OUT OPTIONAL parameter for the
&gt;   HttpUrlGetHostName() API in HttpLib, namely &quot;HostNameSize&quot;. This would
&gt;   save you the external AsciiStrSize() call(s). Of course, if you do this,
&gt;   it should be in a separate patch.
&gt; 


I prefer to keep the current API definition since the change will bring the compatibility issue. 


&gt; (I guess it would be better to discuss the patches on edk2-devel, after we
&gt; have good initial test results, and you post the patches for real -- I just
&gt; couldn&apos;t resist commenting on the code at once. But, Bugzilla is not a good
&gt; medium for patch reviews, so I agree that the review really belongs on the
&gt; list.)
&gt; 


For the security consideration, we *CAN NOT* discuss the patches on edk2-devel. Besides, the Spec is not published yet.


&gt; --*--
&gt; 
&gt; I&apos;ll come back with test results for the current patch set in a later
&gt; comment.



Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4347</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-07-19 06:33:06 +0000</bug_when>
    <thetext>Hi Jiaxin,

thanks for the responses, everything looks fine to me. Specifically,

(In reply to jiaxinwu from comment #14)
&gt; (In reply to Laszlo Ersek from comment #11)

&gt; &gt; (4b) Second, after the This-&gt;GetSessionData() method, I think we shouldn&apos;t
&gt; &gt; *just* check that Status is fine, but we should also check that, on output,
&gt; &gt; &quot;VerifyMethodSize&quot; equals sizeof VerifyMethod. Because, GetSessionData()
&gt; &gt; does not return an error if the session datum is *smaller* than the buffer
&gt; &gt; provided by the caller. Just an idea anyway; you might consider this overly
&gt; &gt; cautious.
&gt; 
&gt; If EFI_SUCCESS returned from GetSessionData(), the data size must be equal
&gt; to the sizeof data type. Spec also declares &quot;On output, it means the size of
&gt; copied Data buffer if EFI_SUCCESS&quot;. So, I think just check that Status is
&gt; fine.

the spec says, in general about the GetSessionData() interface,

  DataSize  Total size of session data. On input, it means the size of Data
            buffer. On output, it means the size of copied Data buffer if
            EFI_SUCCESS, and means the size of desired Data buffer if
            EFI_BUFFER_TOO_SMALL.

and in particular about (DataType == EfiTlsVerifyMethod),

  EfiTlsVerifyMethod  TLS session verify method. The corresponding Data is of
                      type EFI_TLS_VERIFY.

IOW, if GetSessionData() returns EFI_SUCCESS, then *in general* the output DataSize may be less than the input (available) DataSize, but it may not be less than the size of the *particular* data type that was requested with the DataType parameter.

So, this looks OK as well. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4639</commentid>
    <comment_count>16</comment_count>
      <attachid>206</attachid>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-08-19 23:46:47 +0000</bug_when>
    <thetext>Created attachment 206
Patches For HTTPS HostName Validation


Attach the new version patches according the feedbacks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4655</commentid>
    <comment_count>17</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-21 12:40:54 +0000</bug_when>
    <thetext>I compared the patches from comment 16 against those in comment 6.

* For patches #1 and #2:

Acked-by: Laszlo Ersek &lt;lersek@redhat.com&gt;

* For patch #3:

- The patch adds one LF line terminator. It should be a CRLF:

&gt; diff --git a/NetworkPkg/TlsDxe/TlsProtocol.c b/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; index ada7c493493b..e922ca5c54d7 100644
&gt; --- a/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; +++ b/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; @@ -181,7 +181,7 @@ TlsSetSessionData (
&gt;      }
&gt;
&gt;      Status = This-&gt;GetSessionData (This, EfiTlsVerifyMethod, &amp;VerifyMethod, &amp;VerifyMethodSize);
&gt; -    if (EFI_ERROR (Status)) {
&gt; +    if (EFI_ERROR (Status)) {
&gt;        goto ON_EXIT;
&gt;      }
&gt;

- An indentation is still not correct:

&gt; diff --git a/NetworkPkg/TlsDxe/TlsProtocol.c b/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; index ada7c493493b..b12442d47383 100644
&gt; --- a/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; +++ b/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; @@ -175,13 +175,13 @@ TlsSetSessionData (
&gt;
&gt;      if ((TlsVerifyHost-&gt;Flags &amp; EFI_TLS_VERIFY_FLAG_NO_WILDCARDS) != 0 &amp;&amp;
&gt;          ((TlsVerifyHost-&gt;Flags &amp; EFI_TLS_VERIFY_FLAG_NO_PARTIAL_WILDCARDS) != 0 ||
&gt; -        (TlsVerifyHost-&gt;Flags &amp; EFI_TLS_VERIFY_FLAG_MULTI_LABEL_WILDCARDS) != 0)) {
&gt; +         (TlsVerifyHost-&gt;Flags &amp; EFI_TLS_VERIFY_FLAG_MULTI_LABEL_WILDCARDS) != 0)) {
&gt;        Status = EFI_INVALID_PARAMETER;
&gt;        goto ON_EXIT;
&gt;      }

With those fixed, for patch #3:

Acked-by: Laszlo Ersek &lt;lersek@redhat.com&gt;

* For patch #4:

My remarks (5c) / (5d) -- see comment 11, comment 12 -- have been addressed
meanwhile, separately in commit 7191827f90b4 (&quot;NetworkPkg/HttpDxe: Strip
square brackets in IPv6 expressed HostName.&quot;, 2018-08-03). Thus,

Acked-by: Laszlo Ersek &lt;lersek@redhat.com&gt;

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4659</commentid>
    <comment_count>18</comment_count>
      <attachid>208</attachid>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-08-21 23:00:21 +0000</bug_when>
    <thetext>Created attachment 208
Patches For HTTPS HostName Validation (Included the comments from Laszlo)


Refined the patches according Laszlo&apos;s comments.

Appreciate Laszlo&apos;s carefully checking.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4661</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-22 04:11:25 +0000</bug_when>
    <thetext>(In reply to jiaxinwu from comment #18)
&gt; Created attachment 208 [details]
&gt; Patches For HTTPS HostName Validation (Included the comments from Laszlo)
&gt; 
&gt; Refined the patches according Laszlo&apos;s comments.

These look good to me, thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4666</commentid>
    <comment_count>20</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-22 05:03:11 +0000</bug_when>
    <thetext>Jiaxin,

when do you plan to upstream these patches to edk2?

I realize that the spec changes (Mantis#1921) might need to go in first. Do
we have an ETA on that?

- The latest public spec release is &quot;2.7 Errata A&quot;.

- The final version of &quot;2.7 Errata B&quot; was uploaded, for USWG review, on
  2018-07-26 19:22:24 (in US West Coast time).

- So I don&apos;t think Mantis#1921 can be addressed in &quot;2.7 Errata B&quot;; instead,
  we might need &quot;2.7 Errata C&quot;. See also Vincent&apos;s comment
  &lt;https://mantis.uefi.org/mantis/view.php?id=1921#c5934&gt; on the Mantis
  ticket.

Do we really have to wait with the edk2 patches until &quot;Errata C&quot; are out?

--*--

Also, to repeat my question from comment 5 -- has a CVE number been
requested to track this issue? If not:

- why not?

- should I ask RH Product Security to request a CVE number?


Please allow us insight into your schedule for this issue. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4675</commentid>
    <comment_count>21</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2018-08-22 21:25:47 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #5)
&gt; Vincent, Jiaxin, Qin -- does Intel plan to request a CVE number for this
&gt; vulnerability? Thanks!

Intel will assign a CVE - TBD right now. 

Here&apos;s our CVSS grading.  

Severity
 
CVSS Base Score: 5.9

Access Vector (AV): Network

Access Complexity (AC): High

Confidentiality (C): High

Integrity (I): High

Availability (A): None

CVSS v3 Vector: 

AV:N/AC:H/PR:H/UI:N/S:U/C:H/I:H/A:N/E:F/RL:O/RC:C/CR:M/IR:M/AR:L/MAV:N/MAC:H/MPR:H/MUI:N/MS:U/MC:H/MI:H/MA:N</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4676</commentid>
    <comment_count>22</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-08-22 21:52:03 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #20)
&gt; Jiaxin,
&gt; 
&gt; when do you plan to upstream these patches to edk2?
&gt; 
&gt; I realize that the spec changes (Mantis#1921) might need to go in first. Do
&gt; we have an ETA on that?
&gt; 
&gt; - The latest public spec release is &quot;2.7 Errata A&quot;.
&gt; 
&gt; - The final version of &quot;2.7 Errata B&quot; was uploaded, for USWG review, on
&gt;   2018-07-26 19:22:24 (in US West Coast time).
&gt; 
&gt; - So I don&apos;t think Mantis#1921 can be addressed in &quot;2.7 Errata B&quot;; instead,
&gt;   we might need &quot;2.7 Errata C&quot;. See also Vincent&apos;s comment
&gt;   &lt;https://mantis.uefi.org/mantis/view.php?id=1921#c5934&gt; on the Mantis
&gt;   ticket.
&gt; 
&gt; Do we really have to wait with the edk2 patches until &quot;Errata C&quot; are out?
&gt; 


To upstream these patches to edk2, we have to wait until the UEFI Spec ready. 
         

&gt; --*--
&gt; 
&gt; Also, to repeat my question from comment 5 -- has a CVE number been
&gt; requested to track this issue? If not:
&gt; 
&gt; - why not?
&gt; 
&gt; - should I ask RH Product Security to request a CVE number?
&gt; 


Vincent gave the answer in comment 21.


&gt; 
&gt; Please allow us insight into your schedule for this issue. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6534</commentid>
    <comment_count>23</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-26 11:54:19 +0000</bug_when>
    <thetext>(In reply to Vincent Zimmer from comment #21)

&gt; Intel will assign a CVE - TBD right now. 

This was six months ago. Please assign a CVE number to this BZ. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6643</commentid>
    <comment_count>24</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-07 12:17:27 +0000</bug_when>
    <thetext>Jiaxin, to repeat my question from comment 20 / August 2018, when is the UEFI spec v2.8 going to be released, with the spec fix? And when is the code going to be published? Will the code fix be part of edk2-stable201906? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7003</commentid>
    <comment_count>25</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-04 09:09:15 +0000</bug_when>
    <thetext>Hello Jiaxin, UEFI-2.8 has been published at &lt;https://uefi.org/specifications&gt;. That effectively ends the embargo. Can we please open up this BZ to the public, and post the patches to the (new) mailing list? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7744</commentid>
    <comment_count>26</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-22 03:08:59 +0000</bug_when>
    <thetext>Another month has passed, without any updates whatsoever.

Is the fix now targeted at edk2-stable201908?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7745</commentid>
    <comment_count>27</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-22 03:13:43 +0000</bug_when>
    <thetext>(BTW it&apos;s been one week shy of a full year since I reported this bug: 2018-05-29.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8037</commentid>
    <comment_count>28</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-13 16:13:39 +0000</bug_when>
    <thetext>Sorry, missed the notification email. Let&apos;s end the embargo and disclosure the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8068</commentid>
    <comment_count>29</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2019-06-14 05:18:55 +0000</bug_when>
    <thetext>Could we have a CVE before disclosure for better tracking? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8070</commentid>
    <comment_count>30</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-14 17:35:20 +0000</bug_when>
    <thetext>(In reply to Riccardo Schirone from comment #29)
&gt; Could we have a CVE before disclosure for better tracking? Thanks.

Of course. Working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8138</commentid>
    <comment_count>31</comment_count>
    <who name="David Woodhouse">dwmw2</who>
    <bug_when>2019-06-20 11:06:51 +0000</bug_when>
    <thetext>In patch 2 in TlsSetVerifyHost() you unconditionally call SSL_set1_host(), which calls X509_VERIFY_PARAM_set1_host() on the underlying verify params.

For IP addresses you need X509_VERIFY_PARAM_set1_ip() (or ip_asc).

I&apos;m not sure there&apos;s an SSL_set1_ip() function, or s-&gt;params is available now. You might need to install your own verify func on the SSL and then do it there, instead of using SSL_set1_host. After filing the bug upstream with OpenSSL, of course.

(Don&apos;t forget IPv6 addresses are in [] so you need to cope with that when checking if the &quot;hostname&quot; is really an IP literal).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8139</commentid>
    <comment_count>32</comment_count>
    <who name="David Woodhouse">dwmw2</who>
    <bug_when>2019-06-20 11:17:54 +0000</bug_when>
    <thetext>Note: the callback you&apos;re after is the final argument to SSL_set_verify(), which you are calling from TlsSetVerify() with a NULL argument. You need to point it at your own function of type SSL_verify_cb which does the checking correctly.

For an example, see OpenConnect&apos;s ssl_app_verify_callback() at
http://git.infradead.org/users/dwmw2/openconnect.git/blob/HEAD:/openssl.c#l121
and match_cert_hostname() at
http://git.infradead.org/users/dwmw2/openconnect.git/blob/HEAD:/openssl.c#l1363</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8141</commentid>
    <comment_count>33</comment_count>
    <who name="David Woodhouse">dwmw2</who>
    <bug_when>2019-06-20 16:49:02 +0000</bug_when>
    <thetext>See https://github.com/openssl/openssl/pull/9201</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8151</commentid>
    <comment_count>34</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-23 22:05:28 +0000</bug_when>
    <thetext>(Comments from patch developer[Jiaxin])

I think from TLS part, there is no problem to call SSL_set1_host directly since TlsSetVerifyHost is to set the specified host name that need to be verified. In UEFI Spec 2.8, we intended to add one new data type named “EfiTlsVerifyHost” for the TLS protocol consumer to enable the *host name* check when needed.

Besides, it’s tolerant to set IP addresses in &quot;host name&quot; fields, there is a specific iPAddress alternative name format, designed to hold IPv4 or IPv6. See https://tools.ietf.org/html/rfc5280#section-4.2.1.6

So, I think there is no necessary for the patch to provide additional API to check the ip.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8157</commentid>
    <comment_count>35</comment_count>
    <who name="David Woodhouse">dwmw2</who>
    <bug_when>2019-06-24 03:51:55 +0000</bug_when>
    <thetext>
&gt; Besides, it’s tolerant to set IP addresses in &quot;host name&quot; fields, 

No.

Empirically, and by code inspection, OpenSSL is not tolerant to IP addresses in the string you pass to SSL_set1_host().

If you meant anything else with the pronoun &quot;it&quot; in your sentence, then you were looking in the wrong place :)

&gt; So, I think there is no necessary for the patch to provide additional API to 
&gt; check the ip.

I find this response rather surprising, given that testing is failing and code inspection shows it would never have been expected to work.

Perhaps I&apos;m missing something. Please demonstrate your own testing showing that URLs with IPv6 literals of the form https://[2001:8b0:10b:1236::1]/ are working and being validated correctly. Or even Legacy IP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8158</commentid>
    <comment_count>36</comment_count>
    <who name="David Woodhouse">dwmw2</who>
    <bug_when>2019-06-24 03:56:25 +0000</bug_when>
    <thetext>
&gt; So, I think there is no necessary for the patch to provide additional API to check the ip.

Looking harder for a way I can interpret this which makes sense... if you mean we don&apos;t need an additional API on the UEFI side, and should just accept the IP literal in the existing TlsSetVerifyHost() function, then distinguish between hostname and IP literals for itself to call the correct OpenSSL APIs, then I agree.

I would have suggested that for OpenSSL too in my pull request, except that would have made it inconsistent with its own X509_VERIFY_PARAM_* functions which do force the user to distinguish between the two.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8160</commentid>
    <comment_count>37</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-24 11:19:07 +0000</bug_when>
    <thetext>Can we please open up this BZ to the public. From the thread at [*], the problem is public knowledge anyway, at this point. (Not to mention the UEFI 2.8 release in March/April 2019.)

[*] Re: [edk2-devel] reg: Multiple Host Name Certificate
    https://edk2.groups.io/g/devel/message/42591
    http://mid.mail-archive.com/B4DE137BDB63634BAC03BD9DE765F197028B255A3A@VENUS1.in.megatrends.com

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8167</commentid>
    <comment_count>38</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-06-24 17:36:31 +0000</bug_when>
    <thetext>Second the motion to open this bug up so that a fix can be collaborated on in the open. We have changes we would like to contribute.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8303</commentid>
    <comment_count>39</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-07-01 17:17:22 +0000</bug_when>
    <thetext>from the 6/27 infosec meeting
&quot;Support immediate un-embargo&quot;
960 - No objections to immediate un-embargo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8306</commentid>
    <comment_count>40</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-07-01 17:36:12 +0000</bug_when>
    <thetext>We have a PR currently up for Mu...
https://github.com/microsoft/mu_basecore/pull/31

We made one change to the hostname flags to support host matching functionality that is important to us. Happy to discuss an alternate API to allow platform specification.

We may have to make another change or two to support building on GCC. Evaluating CI build results now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9789</commentid>
    <comment_count>41</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-25 01:45:01 +0000</bug_when>
    <thetext>CVE-2019-14553</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9894</commentid>
    <comment_count>42</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-30 19:22:17 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v1 0/4]
Support HTTPS HostName validation feature(CVE-2019-14553)

https://edk2.groups.io/g/devel/message/48183
http://mid.mail-archive.com/20190927034441.3096-1-Jiaxin.wu@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10030</commentid>
    <comment_count>43</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-15 19:15:03 +0000</bug_when>
    <thetext>Tried to edk2-ify David&apos;s suggestions, but they don&apos;t seem to work (in
my implementation anyway). See the failures in the Notes section of the
RFC patch:

  [edk2-devel [RFC v1 5/4]
  CryptoPkg/TlsLib: accept peer certs via both DNS names and IP addresses

  http://mid.mail-archive.com/20191015230839.27708-1-lersek@redhat.com
  https://edk2.groups.io/g/devel/message/49034

(Discussion should continue on the list, I just like to capture postings
in the BZ too.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10214</commentid>
    <comment_count>44</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-24 15:48:34 +0000</bug_when>
    <thetext>Taking this bug per

http://mid.mail-archive.com/21320051-2364-803f-8b35-58c3f4323c15@redhat.com
https://edk2.groups.io/g/devel/message/49435</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10220</commentid>
    <comment_count>45</comment_count>
      <attachid>422</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-26 00:58:07 +0000</bug_when>
    <thetext>Created attachment 422
test certificate generator script

I&apos;m about to post v2 to the list. After an excruciating test session, I
have good test results. Before I post the series, I&apos;ll capture two
things here:

(1) A bash script that I wrote for generating test certificates. (See
the script, it has more comments.)

(2) Below, the test matrix, using the test certificates, and the v2
series (to be posted), applied on top of commit 6996ec88a244
(&quot;NetworkPkg: Add missing components to DSC file&quot;, 2019-10-24).

&gt;| Server Certificate     URL                   cURL              edk2 unpatched    edk2 patched
&gt;| ---------------------  --------------------  ----------------  ----------------  ----------------
&gt;| Common      Subject    hostname    resolves  status  expected  status  expected  status  expected
&gt;| Name        Alt. Name              to IPvX
&gt;| -------------------------------------------------------------------------------------------------
&gt;| IP-literal  -          IP-literal  IPv4      accept  COMPAT/1  accept  NO/2      reject  yes
&gt;| IP-literal  -          IP-literal  IPv6      accept  COMPAT/1  accept  NO/2      reject  yes
&gt;| IP-literal  -          domainname  IPv4      reject  yes       accept  NO/2      reject  yes
&gt;| IP-literal  -          domainname  IPv6      reject  yes       accept  NO/2      reject  yes
&gt;| IP-literal  IP         IP-literal  IPv4      accept  yes       accept  yes       accept  yes
&gt;| IP-literal  IP         IP-literal  IPv6      accept  yes       accept  yes       accept  yes
&gt;| IP-literal  IP         domainname  IPv4      reject  yes       accept  NO/2      reject  yes
&gt;| IP-literal  IP         domainname  IPv6      reject  yes       accept  NO/2      reject  yes
&gt;| domainname  -          IP-literal  IPv4      reject  yes       accept  NO/2      reject  yes
&gt;| domainname  -          IP-literal  IPv6      reject  yes       accept  NO/2      reject  yes
&gt;| domainname  -          domainname  IPv4      accept  yes       accept  yes       accept  yes
&gt;| domainname  -          domainname  IPv6      accept  yes       accept  yes       accept  yes
&gt;| domainname  IP         IP-literal  IPv4      accept  yes       accept  yes       accept  yes
&gt;| domainname  IP         IP-literal  IPv6      accept  yes       accept  yes       accept  yes
&gt;| domainname  IP         domainname  IPv4      accept  yes       accept  yes       accept  yes
&gt;| domainname  IP         domainname  IPv6      accept  yes       accept  yes       accept  yes

Remarks:

#1 -- should not be accepted: an IP literal in the URL must match the IP
address in the SAN, regardless of the Common Name; but cURL accepts it
for compatibility

#2 -- this is (or exemplifies) CVE-2019-14553


Another word on my test setup: I have 4 httpd setups (covering the 4
&quot;Server Certificate&quot; cases), and 2 dhcpd[6] setups (covering the two
&quot;URL hostname&quot; cases, for both IPv4 and IPv6). While working through the
&quot;cURL&quot; / &quot;edk2 unpatched&quot; / &quot;edk2 pached&quot; columns, I&apos;d switch httpd and
dhcpd[6] between said sets of config files as necessary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10221</commentid>
    <comment_count>46</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-26 01:39:36 +0000</bug_when>
    <thetext>Posted

  [edk2-devel] [PATCH v2 0/8]
  support server identity validation in HTTPS Boot (CVE-2019-14553)

  http://mid.mail-archive.com/20191026053719.10453-1-lersek@redhat.com
  https://edk2.groups.io/g/devel/message/49462</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10289</commentid>
    <comment_count>47</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-02 07:24:48 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #46)
&gt; Posted
&gt; 
&gt;   [edk2-devel] [PATCH v2 0/8]
&gt;   support server identity validation in HTTPS Boot (CVE-2019-14553)
&gt; 
&gt;   http://mid.mail-archive.com/20191026053719.10453-1-lersek@redhat.com
&gt;   https://edk2.groups.io/g/devel/message/49462

Pushed as commit range b15646484eaf..e2fc50812895. Closing this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10315</commentid>
    <comment_count>48</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-04 06:36:52 +0000</bug_when>
    <thetext>(The mail-archive.com link doesn&apos;t seem to work, from comment 46; here&apos;s another alternative link: &lt;https://www.redhat.com/archives/edk2-devel-archive/2019-October/msg01133.html&gt;.)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>185</attachid>
            <date>2018-07-17 03:02:54 +0000</date>
            <delta_ts>2019-10-26 00:58:07 +0000</delta_ts>
            <desc>Patches to support https hostname validation</desc>
            <filename>patches_for_https_hostname_validation.zip</filename>
            <type>application/zip</type>
            <size>8081</size>
            <attacher name="jiaxinwu">jiaxin.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>206</attachid>
            <date>2018-08-19 23:46:47 +0000</date>
            <delta_ts>2019-10-26 00:58:07 +0000</delta_ts>
            <desc>Patches For HTTPS HostName Validation</desc>
            <filename>Patches_For_HTTPS_HostName_Validation.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>7913</size>
            <attacher name="jiaxinwu">jiaxin.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>208</attachid>
            <date>2018-08-21 23:00:21 +0000</date>
            <delta_ts>2019-10-26 00:58:07 +0000</delta_ts>
            <desc>Patches For HTTPS HostName Validation (Included the comments from Laszlo)</desc>
            <filename>Patches_For_HTTPS_HostName_Validation.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>8607</size>
            <attacher name="jiaxinwu">jiaxin.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>422</attachid>
            <date>2019-10-26 00:58:07 +0000</date>
            <delta_ts>2019-10-26 00:58:07 +0000</delta_ts>
            <desc>test certificate generator script</desc>
            <filename>gencerts.sh</filename>
            <type>text/plain</type>
            <size>4753</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>684</bug_id>
          
          <creation_ts>2017-08-30 02:43:36 +0000</creation_ts>
          <short_desc>[PCI] Add PciSegmentLib that supports multi-segment platforms.</short_desc>
          <delta_ts>2017-09-05 22:49:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2655</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-08-30 02:43:36 +0000</bug_when>
    <thetext>The existing PciSegmentLib instance in MdePkg either is based on the PciRootBridgeIo protocol or based on PciLib that only support single-segment PCI configuration access.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2661</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-31 20:05:03 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2683</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-05 22:49:23 +0000</bug_when>
    <thetext>pushed @ ebdde8ff266872632bd6400adcd96d21294e32de..5c9bb86f171c9a3a89ac4b5b00518cb00bf32132, 7d8e8474f98bcefc6cc18914c995b04fa8a7e39d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>793</bug_id>
          
          <creation_ts>2017-11-22 18:47:08 +0000</creation_ts>
          <short_desc>The meaning of the ARCH environment variable is unclear during BaseTools build</short_desc>
          <delta_ts>2017-12-07 02:28:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nathaniel L DeSimone">nathaniel.l.desimone</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3113</commentid>
    <comment_count>0</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2017-11-22 18:47:08 +0000</bug_when>
    <thetext>When building BaseTools, the ARCH environment variable needs to be specified. This can be confusing, because if BaseTools is being compiled as part of a larger firmware build script, ARCH could mean either the architecture of the the target platform being built, or it could mean the architecture of the build machine.

Having the name of the environment variable be more descriptive would help this. Potential names that have been considered are HOST_ARCH or BASETOOLS_ARCH. But other names are fine as well, as long as it is clear.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3139</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-11-29 20:06:11 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3192</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-07 02:26:45 +0000</bug_when>
    <thetext>edk2 UDK2017 54cbe51db4894424f7939c84ada72dd0550cc617</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3193</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-07 02:27:38 +0000</bug_when>
    <thetext>edk2 trunk https://github.com/tianocore/edk2/commit/582225d2f34bda7ca546d973dd95e951f1ba8581
UDK2017 branch 582225d2f34bda7ca546d973dd95e951f1ba8581</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3194</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-07 02:28:36 +0000</bug_when>
    <thetext>Fix it in edk2 trunk and UDK2017 branch</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>616</bug_id>
          
          <creation_ts>2017-06-28 11:47:08 +0000</creation_ts>
          <short_desc>BaseTools: Update edksetup.bat to expose Rebuild and ForceRebuild option</short_desc>
          <delta_ts>2017-07-03 22:18:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2361</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-06-28 11:47:08 +0000</bug_when>
    <thetext>After BaseTools supports run from source, BaseTools C source can be build or force rebuild. Rebuild and ForceRebuild option have been supported in BaseTools\toolsetup.bat. And, edksetup.bat calls toolsetup.bat. So, these two options are exposed in edksetup.bat. This tracker asks to add help message in edksetup.bat on these two options.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2377</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-28 21:12:42 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2388</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-03 22:18:12 +0000</bug_when>
    <thetext>pushed the fix: SHA-1: 1e6add9e476696461526163bde843570cfdffb39</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>201</bug_id>
          
          <creation_ts>2016-11-01 10:08:55 +0000</creation_ts>
          <short_desc>Update MdePkg\Include\IndustryStandard\SdramSpd.h to align with the latest SPD spec</short_desc>
          <delta_ts>2016-11-27 22:19:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>808</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-01 10:08:55 +0000</bug_when>
    <thetext>Add SPD DDR3, DDR4 and LPDDR3/LPDDR4 definitions into MdePkg\Include\IndustryStandard\SdramSpd.h. 

DDR3 http://www.jedec.org/sites/default/files/docs/4_01_02_11R21A.pdf
DDR4 http://www.jedec.org/standards-documents/docs/spd412l-4
LPDDR3 and LPDDR4 http://www.jedec.org/standards-documents/docs/spd412m-2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>809</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-01 10:10:23 +0000</bug_when>
    <thetext>Assign to Package owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1028</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-27 22:19:13 +0000</bug_when>
    <thetext>Fix in edk2 
https://github.com/tianocore/edk2/commit/6a82ceb69093cf77ac36dff63225c05f764999ca</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>846</bug_id>
          
          <creation_ts>2018-01-10 06:59:19 +0000</creation_ts>
          <short_desc>FrameBufferBltLib ignores GOP&apos;s PixelsPerScanLine field</short_desc>
          <delta_ts>2018-01-16 02:33:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christian Ehrhardt">ehrhardt</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3370</commentid>
    <comment_count>0</comment_count>
    <who name="Christian Ehrhardt">ehrhardt</who>
    <bug_when>2018-01-10 06:59:19 +0000</bug_when>
    <thetext>The Graphics Output Protocol&apos;s mode information specifies the PixelsPerScanLine property. Most of the time this is identical to HorizontalResolution. However, due to alignment requirements etc. it may be slightly larger. I.e. each scanline will have some &quot;pixels&quot; that are not visible on the screen but consume space in the frame buffer.

In my case the graphics output protocol correctly initializes HorizontalResolution to 1366 and PixelsPerScanLine to 1376. As a result the graphics output is broken.

If I set HorizontalResolution to 1376 instead, the output is fine (except for 10 invisible pixels on the right of the screen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3379</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-11 19:10:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3388</commentid>
    <comment_count>2</comment_count>
      <attachid>127</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-11 22:38:58 +0000</bug_when>
    <thetext>Created attachment 127
draft fix</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3389</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-11 22:39:52 +0000</bug_when>
    <thetext>Christian,
Thanks for reporting this issue.
Could you please verify the attached patch?
If it works, I will send to the mailing list for review and then check it in.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3399</commentid>
    <comment_count>4</comment_count>
    <who name="Christian Ehrhardt">ehrhardt</who>
    <bug_when>2018-01-13 02:49:42 +0000</bug_when>
    <thetext>Thanks for looking into this. Testing the patch will take a view days. However, from looking at the code it is probably not enough to just replace all instances of HorizontalResolution with PixelsPerScanLine.

At least the sanity checks for the arguments to FrameBufferBltLibVideoToBltBuffer (around line 372) and FrameBufferBltLibVideoFill (around line 218) should continue use HorizontalResolution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3400</commentid>
    <comment_count>5</comment_count>
    <who name="Christian Ehrhardt">ehrhardt</who>
    <bug_when>2018-01-14 17:46:26 +0000</bug_when>
    <thetext>I&apos;ve come up with another diff that fixes this problem.

While reading the code I stumbled across some code that looks broken, too. This proposed fix for this is included in the diff but maybe it should be two commits...

My version of the fix has been tested on KVM with fake resolutions where
HorizontalResolution and PixelsPerScanLine differ.

Comments?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3402</commentid>
    <comment_count>6</comment_count>
      <attachid>131</attachid>
    <who name="Christian Ehrhardt">ehrhardt</who>
    <bug_when>2018-01-14 17:49:27 +0000</bug_when>
    <thetext>Created attachment 131
proposed fix</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3405</commentid>
    <comment_count>7</comment_count>
      <attachid>132</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-14 22:48:35 +0000</bug_when>
    <thetext>Created attachment 132
patch 1/3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3406</commentid>
    <comment_count>8</comment_count>
      <attachid>133</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-14 22:48:55 +0000</bug_when>
    <thetext>Created attachment 133
patch 2/3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3407</commentid>
    <comment_count>9</comment_count>
      <attachid>134</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-14 22:49:15 +0000</bug_when>
    <thetext>Created attachment 134
patch 3/3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3408</commentid>
    <comment_count>10</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-14 22:50:03 +0000</bug_when>
    <thetext>Christian,
I modified a bit to your patch. So that the change looks smaller against the original code. Can you have a check?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3414</commentid>
    <comment_count>11</comment_count>
    <who name="Christian Ehrhardt">ehrhardt</who>
    <bug_when>2018-01-15 14:08:20 +0000</bug_when>
    <thetext>Tested on kvm with fake resolutions again. Looks good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3424</commentid>
    <comment_count>12</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-16 02:33:40 +0000</bug_when>
    <thetext>pushed to master: 043944c5505500ed2cf0fc34e1417ccbc0aff0d2,5ae0723355962166cce0bec2a5453e5c70ffb40e,0e58b55a46b7e3249306a9371124708c80b13726

pushed to UDK2018:
20e16af964931b821a6a3e36a1b5e7a19722d10c,a6f4c90a054e0aa472793a9131e92b855b9f0e93,ce45421cb6a4ea55fffd3b2ff9c0d8696fed86e0</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>127</attachid>
            <date>2018-01-11 22:38:58 +0000</date>
            <delta_ts>2018-01-11 22:38:58 +0000</delta_ts>
            <desc>draft fix</desc>
            <filename>0001-MdeModulePkg-FrameBufferBltLib-Fix-a-bug-causing-dis.patch</filename>
            <type>text/plain</type>
            <size>3238</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>131</attachid>
            <date>2018-01-14 17:49:27 +0000</date>
            <delta_ts>2018-01-14 17:49:27 +0000</delta_ts>
            <desc>proposed fix</desc>
            <filename>patch.framebuffer</filename>
            <type>text/plain</type>
            <size>7281</size>
            <attacher name="Christian Ehrhardt">ehrhardt</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>132</attachid>
            <date>2018-01-14 22:48:35 +0000</date>
            <delta_ts>2018-01-14 22:48:35 +0000</delta_ts>
            <desc>patch 1/3</desc>
            <filename>0001-MdeModulePkg-FrameBufferBltLib-Use-UINT32-type-for-i.patch</filename>
            <type>text/plain</type>
            <size>3681</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>133</attachid>
            <date>2018-01-14 22:48:55 +0000</date>
            <delta_ts>2018-01-14 22:48:55 +0000</delta_ts>
            <desc>patch 2/3</desc>
            <filename>0002-MdeModulePkg-FrameBufferBltLib-Fix-a-bug-causing-dis.patch</filename>
            <type>text/plain</type>
            <size>7451</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>134</attachid>
            <date>2018-01-14 22:49:15 +0000</date>
            <delta_ts>2018-01-14 22:49:15 +0000</delta_ts>
            <desc>patch 3/3</desc>
            <filename>0003-MdeModulePkg-FrameBufferBltLib-Fix-copying-of-unalig.patch</filename>
            <type>text/plain</type>
            <size>1499</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>669</bug_id>
          
          <creation_ts>2017-08-11 14:08:39 +0000</creation_ts>
          <short_desc>Build and DSC Specs: Add multi-arg support to PREBUILD/POSTBUILD in DSC file [Defines] section</short_desc>
          <delta_ts>2017-09-10 03:06:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>670</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>
    
    <cf_documents>EDK II DSC Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2596</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-08-11 14:08:39 +0000</bug_when>
    <thetext>A platform DSC file can provide PREBUILD and POSTBUILD actions in the 
[Defines] section of the DSC file.  The EDK II DSC specification only allows
a single argument for these two defines, which means the PREBUILD and 
POSTBUILD actions are limited to simple batch files, shell scripts, or
applications with no additional arguments.  This also means that a platform
DSC file that uses the PREBUILD/POSTBUILD feature is typically limited to
single OS development environment.

* Expand the PREBUILD and POSTBUILD define syntax to support multiple arguments.
* All arguments are scanned.
* Arguments that are WORKSPACE or PACKAGES_PATH relative file paths are converted
  to absolute paths.  

Supporting multiple arguments allows PREBUILD and POSTBUILD
actions to be implemented in OS independent scripts such as Python. The 
following is an example of a PREBUILD action that runs the python interpreter
on a python script provided in a platform package:

[Defines]
  PREBUILD = python MyPlatformPackage/MyPreBuildScript.py

Supporting multiple arguments also allows additional platform arguments to be
passed into the script:

[Defines]
  PREBUILD = python MyPlatformPackage/MyPreBuildScript.py --FlashSize 4MB

In addition, the EDK II Build Specification states that TARGET, ARCH, and
TOOL_CHAIN_TAG are passed to the PREBUILD and POSTBUILD commands.  The path
to the platform DSC file being build, the path to the Conf directory, and the 
build target form the following set are not provided:

  [all|fds|genc|genmake|clean|cleanall|cleanlib|modules|libraries|run]
  
It is important for the PREBUILD and POSTBUILD actions to receive the same 
context that is provided to the build command. 

Expands the context passed into the PREBUILD and POSTBUILD actions to
include the -p &lt;DSC File&gt;, --conf=&lt;Conf Directory&gt;, and build target
arguments.

Update the following sections of the EDK II Build Specification:
* 8.2.4.13 Pre Build Processing
  + Add Platform DSC, Conf Directory, and build target to set of
    parameters passed to the PREBUILD script
  + Describe support for multiple arguments
  + Describe path expansion for arguments that are WORKSPACE or
    PACKAGES_PATH relative paths 
  + Quotes may be used for arguments that have spaces or special
    characters
* 10.6 Post Build Processing
  + Add Platform DSC, Conf Directory, and build target to set of
    parameters passed to the POSTBUILD script
  + Describe support for multiple arguments
  + Describe path expansion for arguments that are WORKSPACE or
    PACKAGES_PATH relative paths 
  + Quotes may be used for arguments that have spaces or special
    characters

Update the following sections of the EDK II DSC Specification:
* Section 2.3 [Defines] Section Processing
  + Describe support for multiple arguments
  + Describe path expansion for arguments that are WORKSPACE or
    PACKAGES_PATH relative paths 
  + Quotes may be used for arguments that have spaces or special
    characters
* Section 2.3 - Table 6 EDK II [Defines] Section Elements
  + Add PREBUILD as an optional define 
  + Add POSTBUILD as an optional define 
* Section 3.5 [Defines] Section
  + Update EBNF for PREBUILD and POSTBUILD to support multiple
    arguments.  
  + Update EBNF to allow quotes for arguments that have spaces
    or special characters.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2598</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-08-11 14:18:29 +0000</bug_when>
    <thetext>edk2-devel RFC discussion:

https://lists.01.org/pipermail/edk2-devel/2017-August/012883.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2611</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-08-16 21:06:13 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2716</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-10 03:06:17 +0000</bug_when>
    <thetext>fixed it by:
DSC spec: 
https://github.com/tianocore-docs/edk2-DscSpecification/commit/7f47b4cf290d4bc14d0739112d21fa952e77b831

Build spec:
https://github.com/tianocore-docs/edk2-BuildSpecification/commit/ef3a262203595a2873b7b78cc1530aa42be79d2f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>685</bug_id>
          
          <creation_ts>2017-08-30 02:48:54 +0000</creation_ts>
          <short_desc>[PCI] Add S3PciSegmentLib library class and instance</short_desc>
          <delta_ts>2017-09-05 22:49:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2656</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-08-30 02:48:54 +0000</bug_when>
    <thetext>There is S3PciLib for PciLib to provide S3 support. But there is no S3PciSegmentLib library class. We need to add.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2660</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-31 20:04:31 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2684</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-05 22:49:46 +0000</bug_when>
    <thetext>pushed @ a2285a8963840683a28ed051077190b086c423eb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>887</bug_id>
          
          <creation_ts>2018-03-07 22:12:16 +0000</creation_ts>
          <short_desc>[BaseTools]auto-build C tool binaries when they are out-of-dated from build.py</short_desc>
          <delta_ts>2022-02-15 22:33:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3665</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-03-07 22:12:16 +0000</bug_when>
    <thetext>Current build.py assumes the C tool binaries are up-to-date and directly invokes them.
This implicitly requires developer builds C tool binaries manually before invoking build.py.
It wastes time.

If we can rebuild the .obj when the accordingly C file is changed.
Build.py can use the same algorithm to rebuild GenFw.exe when the accordingly GenFw.c/xxx.c/xxx.h are changed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3666</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-03-07 22:12:57 +0000</bug_when>
    <thetext>I would treat this is the last few enhancements before we retire the BaseTools binary repo completely.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3700</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-03-14 21:05:32 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong( increment build issue) 
           QA: check test case</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5475</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:36:12 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18392</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-15 22:33:30 +0000</bug_when>
    <thetext>Rebuild C tools is not the build command responsibility.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>617</bug_id>
          
          <creation_ts>2017-06-28 17:16:53 +0000</creation_ts>
          <short_desc>please document the semantics of the FvForceRebase element of [FV] sections</short_desc>
          <delta_ts>2023-01-03 03:47:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=615</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II FDF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2363</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-06-28 17:16:53 +0000</bug_when>
    <thetext>The FDF spec (Revision 1.26, January 2016) documents the syntax restrictions around the FvForceRebase element. However, the semantics are not provided.

I suggest something like:

----------
If a Firmware Volume is associated with a nonzero BaseAddress in one of the [FD] sections, then the EDKII build tools relocate the following file types within the Firmware Volume (FV):

- EFI_FV_FILETYPE_SECURITY_CORE
- EFI_FV_FILETYPE_PEI_CORE
- EFI_FV_FILETYPE_PEIM
- EFI_FV_FILETYPE_COMBINED_PEIM_DRIVER
- EFI_FV_FILETYPE_DRIVER
- EFI_FV_FILETYPE_DXE_CORE

In particular, relocating a firmware volume at build time that contains only EFI_FV_FILETYPE_DXE_CORE and EFI_FV_FILETYPE_DRIVER type files may look strange at first, given that such modules are generally relocated at runtime anyway, in system RAM. However, EDKII supports a feature called LMFA (Load Module at Fixed Address), which instructs the DXE Core to avoid runtime relocation for EFI_FV_FILETYPE_DRIVER modules, and to dispatch them in-place instead. The build tools accommodate this behavior (if the FV BaseAddress is nonzero), therefore EFI_FV_FILETYPE_DRIVER modules too are subjected to build-time relocation by default.

If a platform does not enable LMFA and places only EFI_FV_FILETYPE_DRIVER and EFI_FV_FILETYPE_DXE_CORE type modules in a Firmware Volume with nonzero BaseAddress, then the FvForceRebase=FALSE setting can be used in the [FV] section to disable build-time relocation for the Firmware Volume. Relocation will occur at runtime anyway, and this allows for more flexibility with the PE/COFF image files that can be included in the FV (for example, on-disk and in-memory section alignments can differ, which would otherwise prevent build-time relocation).
----------

Please see the discussion in bug 615.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2378</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-28 21:13:20 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5470</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:35:03 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12378</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 18:40:29 +0000</bug_when>
    <thetext>I think this feature request remains relevant. The FDF spec still doesn&apos;t explain FvForceRebase, at commit fedc02b646b1 (&quot;FDF spec: Fix the issue in Rule section for RAW Type File&quot;, 2019-05-30).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20374</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 03:47:47 +0000</bug_when>
    <thetext>Noone appears to have had capacity for this, closing. Web search engines will find the proposed wording above, if someone is interested in FvForceRebase.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>944</bug_id>
          
          <creation_ts>2018-05-01 16:49:35 +0000</creation_ts>
          <short_desc>Functional Issues within BaseBmpSupportLib</short_desc>
          <delta_ts>2018-07-09 01:16:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>brent.holtsclaw</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3954</commentid>
    <comment_count>0</comment_count>
    <who name="">brent.holtsclaw</who>
    <bug_when>2018-05-01 16:49:35 +0000</bug_when>
    <thetext>Line 288 Mismatch between print arguements (change to PixelWidth,PixelHeight opposed to BltBufferSize OR BltBufferSize:0x%x\n opposed to PixelWidth:0x...)  

if (EFI_ERROR (Status)) {
    DEBUG ((
      DEBUG_ERROR,
      &quot;TranslateBmpToGopBlt: invalid BltBuffer needed size... PixelWidth:0x%x PixelHeight:0x%x\n&quot;,
      BltBufferSize
      ));


Line 297: BltBufferSize is UINTN and Temp is UINT32.  Could have a type mismatch.  Note Temp is only used for debug.
Temp = BltBufferSize


Line 244: Missing Case where BmpHeader-&gt;ImageOffset = sizeof(BMP_IMAGE_HEADER).  Change to BmpHeader-&gt;ImageOffset &lt;= sizeof (BMP_IMAGE_HEADER)
  if (BmpHeader-&gt;ImageOffset &lt; sizeof (BMP_IMAGE_HEADER)) {
    return RETURN_UNSUPPORTED;
  }

  if (BmpHeader-&gt;ImageOffset &gt; sizeof (BMP_IMAGE_HEADER)) {

Line 155: Add logic to ensure that BmpHeader-&gt;PixelWidth and BmpHeader-&gt;PixelHeight are not 0.  (i.e. BmpHeader-&gt;PixelWidth ==0 || BmpHeader-&gt;PixelHeight == 0).  In the case where PixelHeight is large and PixelWidth is 0 line 350 will take large amount of time to process.

if (BmpHeader-&gt;HeaderSize != sizeof (BMP_IMAGE_HEADER) - OFFSET_OF (BMP_IMAGE_HEADER, HeaderSize)) {

Line 249: Consider changing Switch statement default logic to return unsupported.  The same switch statement and logic is used within line 353 and it returns unsupported.  

Line 483: Add cases to check PixelWidth and PixelHeight are not 0. (i.e. PixelWidth == 0 || PixelHeight == 0)
  if (GopBlt == NULL || BmpImage == NULL || BmpImageSize == NULL) {
    return RETURN_INVALID_PARAMETER;
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3980</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-03 20:06:15 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4208</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-06-25 02:51:09 +0000</bug_when>
    <thetext>(In reply to brent.holtsclaw from comment #0)
&gt; Line 288 Mismatch between print arguements (change to PixelWidth,PixelHeight
&gt; opposed to BltBufferSize OR BltBufferSize:0x%x\n opposed to
&gt; PixelWidth:0x...)  
&gt; 
&gt; if (EFI_ERROR (Status)) {
&gt;     DEBUG ((
&gt;       DEBUG_ERROR,
&gt;       &quot;TranslateBmpToGopBlt: invalid BltBuffer needed size...
&gt; PixelWidth:0x%x PixelHeight:0x%x\n&quot;,
&gt;       BltBufferSize
&gt;       ));
&gt; 
OK.
&gt; 
&gt; Line 297: BltBufferSize is UINTN and Temp is UINT32.  Could have a type
&gt; mismatch.  Note Temp is only used for debug.
&gt; Temp = BltBufferSize
&gt; 
Type matches. Both are UINT32. But the DEBUG() message is also wrong, using &quot;%lx&quot;. Will fix it.

&gt; 
&gt; Line 244: Missing Case where BmpHeader-&gt;ImageOffset =
&gt; sizeof(BMP_IMAGE_HEADER).  Change to BmpHeader-&gt;ImageOffset &lt;= sizeof
&gt; (BMP_IMAGE_HEADER)
&gt;   if (BmpHeader-&gt;ImageOffset &lt; sizeof (BMP_IMAGE_HEADER)) {
&gt;     return RETURN_UNSUPPORTED;
&gt;   }
&gt; 
&gt;   if (BmpHeader-&gt;ImageOffset &gt; sizeof (BMP_IMAGE_HEADER)) {
&gt; 

It&apos;s not an issue.
BmpHeader-&gt;ImageOffset == sizeof (BMP_IMAGE_HEADER) is a valid case.
In such case, the color pallete doesn&apos;t exist for the BMP file.


&gt; Line 155: Add logic to ensure that BmpHeader-&gt;PixelWidth and
&gt; BmpHeader-&gt;PixelHeight are not 0.  (i.e. BmpHeader-&gt;PixelWidth ==0 ||
&gt; BmpHeader-&gt;PixelHeight == 0).  In the case where PixelHeight is large and
&gt; PixelWidth is 0 line 350 will take large amount of time to process.
&gt; 
&gt; if (BmpHeader-&gt;HeaderSize != sizeof (BMP_IMAGE_HEADER) - OFFSET_OF
&gt; (BMP_IMAGE_HEADER, HeaderSize)) {
&gt; 
It&apos;s not an issue.
But I agree adding a check is better. Will fix it.

&gt; Line 249: Consider changing Switch statement default logic to return
&gt; unsupported.  The same switch statement and logic is used within line 353
&gt; and it returns unsupported.  

As said in above, when BitPerPixel is 24, there is no color palette. It&apos;s valid.

&gt; 
&gt; Line 483: Add cases to check PixelWidth and PixelHeight are not 0. (i.e.
&gt; PixelWidth == 0 || PixelHeight == 0)
&gt;   if (GopBlt == NULL || BmpImage == NULL || BmpImageSize == NULL) {
&gt;     return RETURN_INVALID_PARAMETER;
&gt;   }

It&apos;s not an issue. But I agree adding the check is better. Will fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4232</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-07-02 23:39:27 +0000</bug_when>
    <thetext>pushed @ master 2a9e1b97c9a86a736707388fe5e22cb75c378b35,51fe5b5140ba9ecb168fb03da328983355880c7a

BaseBmpSupportLib is not in UDK2018 yet. Unable to sync to UDK2018 now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4244</commentid>
    <comment_count>4</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-07-09 01:16:52 +0000</bug_when>
    <thetext>synced patches to UDK2018 branch 0c3ac72a88d12e1ea43375457b433f076d61ca57 and 56bda6da0becf9ae4e474063a28f73e1ad7d9298.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>670</bug_id>
          
          <creation_ts>2017-08-11 14:17:40 +0000</creation_ts>
          <short_desc>Add multi-arg support to PREBUILD/POSTBUILD in DSC file [Defines] section</short_desc>
          <delta_ts>2017-11-14 20:55:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>669</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2597</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-08-11 14:17:40 +0000</bug_when>
    <thetext>edk2-devel RFC discussion:

https://lists.01.org/pipermail/edk2-devel/2017-August/012883.html

A platform DSC file can provide PREBUILD and POSTBUILD actions in the 
[Defines] section of the DSC file.  The EDK II DSC specification only allows
a single argument for these two defines, which means the PREBUILD and 
POSTBUILD actions are limited to simple batch files, shell scripts, or
applications with no additional arguments.  This also means that a platform
DSC file that uses the PREBUILD/POSTBUILD feature is typically limited to
single OS development environment.

* Expand the PREBUILD and POSTBUILD define syntax to support multiple arguments.
* All arguments are scanned.
* Arguments that are WORKSPACE or PACKAGES_PATH relative file paths are converted
  to absolute paths.  

Supporting multiple arguments allows PREBUILD and POSTBUILD
actions to be implemented in OS independent scripts such as Python. The 
following is an example of a PREBUILD action that runs the python interpreter
on a python script provided in a platform package:

[Defines]
  PREBUILD = python MyPlatformPackage/MyPreBuildScript.py

Supporting multiple arguments also allows additional platform arguments to be
passed into the script:

[Defines]
  PREBUILD = python MyPlatformPackage/MyPreBuildScript.py --FlashSize 4MB

In addition, the EDK II Build Specification states that TARGET, ARCH, and
TOOL_CHAIN_TAG are passed to the PREBUILD and POSTBUILD commands.  The path
to the platform DSC file being build, the path to the Conf directory, and the 
build target form the following set are not provided:

  [all|fds|genc|genmake|clean|cleanall|cleanlib|modules|libraries|run]
  
It is important for the PREBUILD and POSTBUILD actions to receive the same 
context that is provided to the build command. 

Expands the context passed into the PREBUILD and POSTBUILD actions to
include the -p &lt;DSC File&gt;, --conf=&lt;Conf Directory&gt;, and build target
arguments.

There have also been requests to support makefiles in the PREBUILD
and POSTBUILD actions.  Makefiles receive context from system environment
and define values passed in on the command line.  In order to support
makefiles, add a generic python script in /BaseTools/Scripts/RunMakefile.py
This python script converts command line arguments to makefile defines
and runs a makefile specified with the --makefile flag.

Also provide a sample makefile that echos the relevant system environment
variables and defines in BaseTools/Scripts/RunMakefileSample.mak.

An example PREBUIILD action that runs a makefile is as follows:

[Defines]
  PREBUILD = python BaseTools/Script/RunMakefile.py --makefile BaseTools/Scripts/RunMakefileSample.mak

The example above contains 4 arguments.  2 of these arguments are WORKSPACE or
PACKAGES_PATH relative paths that must be converted to absolute paths.  This
is a sample use case for PREBUILD and POSTBUILD define statements that support
multiple arguments and can be used to test this feature and provide a template
makefile for implementing makefiles for PREBUILD and POSTBUILD actions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2610</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-08-16 21:04:48 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2623</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-08-22 21:58:45 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/af9c4e5e67ab12a77434564ff61c124ef0e5b5dd
https://github.com/tianocore/edk2/commit/c8d385265fa38e0933768fccc8dc0bf5b8725037
https://github.com/tianocore/edk2/commit/ef190542b4dbc4577ef7d1f99209199f0c1b6e66</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3065</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-11-14 20:55:22 +0000</bug_when>
    <thetext>*** Bug 627 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>253</bug_id>
          
          <creation_ts>2016-11-24 10:08:56 +0000</creation_ts>
          <short_desc>The Pcd offset in the report &quot;FD VPD Region&quot; is incorrect</short_desc>
          <delta_ts>2016-11-25 05:11:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1019</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-24 10:08:56 +0000</bug_when>
    <thetext>If we set the VPD Pcd offset to a Decimal value, eg: 22, but this VPD pcd offset display in the &quot;FD VPD Region&quot; in the report is 0x22, it is incorrect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1020</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-24 10:09:24 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1025</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-25 05:11:28 +0000</bug_when>
    <thetext>fix it SHA-1: 0584f88083c729894c68d4f0fc56747ce7b7cce9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>548</bug_id>
          
          <creation_ts>2017-05-17 09:59:51 +0000</creation_ts>
          <short_desc>[INF spec] INF [LibraryClasses] section should not support ModuleType</short_desc>
          <delta_ts>2017-05-30 16:39:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2048</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-05-17 09:59:51 +0000</bug_when>
    <thetext>Edk2 community report this issue:
Why does INF syntax support [LibraryClasses.common.DXE_RUNTIME_DRIVER] if it does nothing? 

https://edk2-docs.gitbooks.io/edk-ii-inf-specification/content/3_edk_ii_inf_file_format/36_[libraryclasses]_sections.html

INF Module Type is fixed. It can&apos;t specify the library class for the different module type. So, ModuleType extension in [LibraryClasses] should be drop. Current BaseTools do nothing. This is only doc change, no BaseTools change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2050</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-17 21:07:00 +0000</bug_when>
    <thetext>assign to Mike . only spec need update, no code  need update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2182</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-26 22:30:14 +0000</bug_when>
    <thetext>patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2199</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-30 16:39:52 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-InfSpecification/commit/263ae5c2d64e22b2044f787226cc998eac592162</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>463</bug_id>
          
          <creation_ts>2017-04-06 19:06:40 +0000</creation_ts>
          <short_desc>INF spec: document the LIB file type under the [Binaries] Section</short_desc>
          <delta_ts>2017-05-30 16:39:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1754</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-04-06 19:06:40 +0000</bug_when>
    <thetext>The INF spec (version 1.25) describes a number of file types in chapter

  2.7 [Binaries] Section

However, the file types listed there do not include the LIB type.

LIB should be documented because it enables a powerful feature: in combination with PACKAGES_PATH &lt;https://github.com/tianocore/tianocore.github.io/wiki/Multiple_Workspace&gt;, platforms can resolve library classes to externally provided, binary-only library instances.

An example can be found here:

subject: [edk2] Pull in pre-built library during edk2 build?
msgid: &lt;98692150-a0be-5735-8452-3f316008f8c7@redhat.com&gt;
URL: https://lists.01.org/pipermail/edk2-devel/2017-April/009681.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1874</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-19 23:33:47 +0000</bug_when>
    <thetext>only for doc. code is ready.
assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2180</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-26 20:51:35 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2198</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-30 16:39:15 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-InfSpecification/commit/544302415ff139daa425f5813fe1b60b688403b4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>945</bug_id>
          
          <creation_ts>2018-05-02 00:02:21 +0000</creation_ts>
          <short_desc>Add standalone tools to generate UEFI capsules that are compatible with the FmpDevicePkg</short_desc>
          <delta_ts>2018-08-09 14:00:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3961</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-05-02 00:02:21 +0000</bug_when>
    <thetext>Add python tools to generate a UEFI capsule that is compatible with
the FmpDevicePkg.

The recommended implementation is a set of python modules that can
encode and decode each of the following header types

* EFI_CAPSULE_HEADER
* EFI_FIRMWARE_MANAGEMENT_CAPSULE_HEADER followed by 1 or more 
  EFI_FIRMWARE_MANAGEMENT_CAPSULE_IMAGE_HEADERs
* Payload signing using a provided signing tool (e.g. signtool or OpenSSL)
* FMP_PAYLOAD_HEADER

And a python script that uses these 4 modules to generate a UEFI capsule
image.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3970</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-05-02 21:05:19 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4548</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 14:00:24 +0000</bug_when>
    <thetext>RFC Patch email for review

https://lists.01.org/pipermail/edk2-devel/2018-May/025277.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4549</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 14:00:31 +0000</bug_when>
    <thetext>Patch email for review

https://lists.01.org/pipermail/edk2-devel/2018-July/027793.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4550</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 14:00:55 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/8b63877aca1e5a3576b7275439c494a6d40ed1b5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>849</bug_id>
          
          <creation_ts>2018-01-11 21:08:21 +0000</creation_ts>
          <short_desc>Enable XCODE5 tool chain for UefiCpuPkg with nasm source code</short_desc>
          <delta_ts>2019-11-13 16:40:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2340</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3384</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-11 21:08:21 +0000</bug_when>
    <thetext>XCODE tool chain requires the relative addressing in the assembly code. UefiCpuPkg nasm source code doesn&apos;t meet with this requirement. Below way can fix it.

1. Use lea instruction to get the address instead of mov instruction.
2. Use the dummy address as jmp destination, and add the logic to fix up
the address to the absolute address at boot time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3385</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-11 21:10:15 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3396</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-01-12 11:58:59 +0000</bug_when>
    <thetext>The XCODE tool chain uses PIE and links to a Mach image, which
is then converted to a PE/COFF image using the tool mtoc.

A Mach image using PIE does not support a 64-bit absolute
address relocation fixup, so any assembly code that generates
this type of fixup must be updated to avoid the use of this
type of relocation fixup.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3451</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-18 23:55:46 +0000</bug_when>
    <thetext>Fix at 2db0ccc2d7fef249487f95db41042943c0617f54..e21e355e2ca7fefb15b4df7078f995d3fb9c2b89</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>965</bug_id>
          
          <creation_ts>2018-05-30 23:40:26 +0000</creation_ts>
          <short_desc>BaseTools: BinToPcd: Enhance BinToPcd to check VOID* PCDs must be 8-byte aligned if the value is a byte array</short_desc>
          <delta_ts>2018-08-09 15:30:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sun Yanyan">yanyan.sun</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4034</commentid>
    <comment_count>0</comment_count>
    <who name="Sun Yanyan">yanyan.sun</who>
    <bug_when>2018-05-30 23:40:26 +0000</bug_when>
    <thetext>Enhance BinToPcd: BinToPcd has an error check and error message when VOID* PCDs is not 8-byte aligned if the value is a byte array.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4075</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-06-06 21:08:29 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4103</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-06-09 02:17:17 +0000</bug_when>
    <thetext>Patch for review

https://lists.01.org/pipermail/edk2-devel/2018-June/025747.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4556</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 15:30:39 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/8e965809998bfb674515e9d13d93a4fcec0f95c5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>778</bug_id>
          
          <creation_ts>2017-11-13 21:03:04 +0000</creation_ts>
          <short_desc>Guid.xref doesn&apos;t contain information from FILE statements in FDF file.</short_desc>
          <delta_ts>2017-11-20 07:54:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dmitry Antipov">dmanti</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3047</commentid>
    <comment_count>0</comment_count>
    <who name="Dmitry Antipov">dmanti</who>
    <bug_when>2017-11-13 21:03:04 +0000</bug_when>
    <thetext>For FILE statements in an FDF file, a GUID -&gt; name mapping should be created using the UI section.

If a FILE statement is present in an FDF file without a UI section, then the GUID -&gt; name mapping should use the PE32, TE, FV_IMAGE, PIC, or RAW section file path as the name.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3081</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-16 04:17:45 +0000</bug_when>
    <thetext>take it. Patch already be sent out for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3101</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-20 07:54:03 +0000</bug_when>
    <thetext>fixed by SHA-1: 5e9256cd7f54ffd6f1fd9837df92a911fcd2d7c2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>796</bug_id>
          
          <creation_ts>2017-11-26 10:22:12 +0000</creation_ts>
          <short_desc>conflicting external definitions between DxeIplPeim and SecPeiDebugAgentLib</short_desc>
          <delta_ts>2017-12-01 05:10:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>573</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SourceLevelDebugPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3124</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-11-26 10:22:12 +0000</bug_when>
    <thetext>Latest edk2 OVMF build fails if turn on the SOURCE_DEBUG_ENABLE as below:

$ build -p OvmfPkg/OvmfPkgX64.dsc -t GCC5 -DSECURE_BOOT_ENABLE=TRUE -a IA32 -a X64 -b NOOPT -DDEBUG_ON_SERIAL_PORT -n 1 -DSOURCE_DEBUG_ENABLE

&quot;gcc&quot; -o /home/jshi19/wksp_efi/edk2/Build/OvmfX64/NOOPT_GCC5/X64/MdeModulePkg/Core/DxeIplPeim/DxeIpl/DEBUG/DxeIpl.dll -nostdlib -Wl,-n,-q,--gc-sections -z common-page-size=0x40 -Wl,--entry,_ModuleEntryPoint -u _ModuleEntryPoint -Wl,-Map,/home/jshi19/wksp_efi/edk2/Build/OvmfX64/NOOPT_GCC5/X64/MdeModulePkg/Core/DxeIplPeim/DxeIpl/DEBUG/DxeIpl.map,--whole-archive -Wl,-melf_x86_64,--oformat=elf64-x86-64,-pie -O0 -Wl,--start-group,@/home/jshi19/wksp_efi/edk2/Build/OvmfX64/NOOPT_GCC5/X64/MdeModulePkg/Core/DxeIplPeim/DxeIpl/OUTPUT/static_library_files.lst,--end-group -g -fshort-wchar -fno-builtin -fno-strict-aliasing -Wall -Werror -Wno-array-bounds -ffunction-sections -fdata-sections -include AutoGen.h -fno-common -DSTRING_ARRAY_NAME=DxeIplStrings -m64 -fno-stack-protector &quot;-DEFIAPI=__attribute__((ms_abi))&quot; -maccumulate-outgoing-args -mno-red-zone -Wno-address -mcmodel=small -fpie -fno-asynchronous-unwind-tables -Wno-address -O0 -mno-mmx -mno-sse -D DISABLE_NEW_DEPRECATED_INTERFACES -Wl,--defsym=PECOFF_HEADER_SIZE=0x228 -Wl,--script=/home/jshi19/wksp_efi/edk2/BaseTools/Scripts/GccBase.lds -Wno-error
/home/jshi19/wksp_efi/edk2/Build/OvmfX64/NOOPT_GCC5/X64/MdeModulePkg/Core/DxeIplPeim/DxeIpl/OUTPUT/DxeIpl.lib(DxeLoad.obj):/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/DxeIplPeim/DxeLoad.c:54: multiple definition of `mMemoryDiscoveredNotifyList&apos;
/home/jshi19/wksp_efi/edk2/Build/OvmfX64/NOOPT_GCC5/X64/SourceLevelDebugPkg/Library/DebugAgent/SecPeiDebugAgentLib/OUTPUT/SecPeiDebugAgentLib.lib(SecPeiDebugAgentLib.obj):/home/jshi19/wksp_efi/edk2/SourceLevelDebugPkg/Library/DebugAgent/SecPeiDebugAgent/SecPeiDebugAgentLib.c:35: first defined here
collect2: error: ld returned 1 exit status
make: *** [/home/jshi19/wksp_efi/edk2/Build/OvmfX64/NOOPT_GCC5/X64/MdeModulePkg/Core/DxeIplPeim/DxeIpl/DEBUG/DxeIpl.dll] Error 1
GNUmakefile:430: recipe for target &apos;/home/jshi19/wksp_efi/edk2/Build/OvmfX64/NOOPT_GCC5/X64/MdeModulePkg/Core/DxeIplPeim/DxeIpl/DEBUG/DxeIpl.dll&apos; failed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3129</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-27 10:48:38 +0000</bug_when>
    <thetext>Looks like the &quot;-fno-common&quot; option that we added in commit 214a3b79417f (&quot;BaseTools GCC: avoid the use of COMMON symbols&quot;, 2015-12-08) is paying off!

MdeModulePkg/Core/DxeIplPeim/DxeLoad.c:

&gt; CONST EFI_PEI_NOTIFY_DESCRIPTOR mMemoryDiscoveredNotifyList = {

SourceLevelDebugPkg/Library/DebugAgent/SecPeiDebugAgent/SecPeiDebugAgentLib.c:

&gt; GLOBAL_REMOVE_IF_UNREFERENCED EFI_PEI_NOTIFY_DESCRIPTOR mMemoryDiscoveredNotifyList[1] = {

According to the C standard, each of these constitutes an external definition. Any object may have at most one external definition in the whole program.

It&apos;s a good thing the compiler now catches this error, because otherwise the two objects would be merged -- incorrectly -- into one common object.

Solution: either rename one of the objects, or make them both STATIC.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3154</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-30 19:12:04 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3155</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-30 19:14:33 +0000</bug_when>
    <thetext>bug scrub: it is duplicate with 573</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3174</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-12-01 05:10:30 +0000</bug_when>
    <thetext>(In reply to Yonghong Zhu from comment #3)
&gt; bug scrub: it is duplicate with 573

Good catch!

*** This bug has been marked as a duplicate of bug 573 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>254</bug_id>
          
          <creation_ts>2016-11-24 10:12:05 +0000</creation_ts>
          <short_desc>Fail to generate Patchable Pcd info into Asbuilt inf on GCC5 Tool chain</short_desc>
          <delta_ts>2016-12-01 22:10:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1021</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-24 10:12:05 +0000</bug_when>
    <thetext>when we build on GCC5 tool chain, we found that no Patchable Pcd display in the driver&apos;s Asbuilt inf while the pcd is exist in its map file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1022</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-24 10:12:26 +0000</bug_when>
    <thetext>assign to yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1106</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-01 22:10:07 +0000</bug_when>
    <thetext>fix it SHA-1: 3e7e8571da891122c6821ebc428ce6dbd8a35ff3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>620</bug_id>
          
          <creation_ts>2017-07-07 02:17:13 +0000</creation_ts>
          <short_desc>[BDS] Support to display meaningful description form SD/EMMC boot devices</short_desc>
          <delta_ts>2017-09-05 21:59:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2402</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-07 02:17:13 +0000</bug_when>
    <thetext>Current BDS core library supports to query the device brand/modal/serial information from AHCI/SCSI/NVME devices.
We need to add the similar support for SD/EMMC devices.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2403</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-07 02:17:41 +0000</bug_when>
    <thetext>Include Wu Hao.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2437</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-13 20:13:57 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2681</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-05 21:59:59 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/3f3a69b87a2d9b8e0186f6c078302614f55a3357</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>360</bug_id>
          
          <creation_ts>2017-01-26 10:50:04 +0000</creation_ts>
          <short_desc>[Patch] VfrUtility: error: ISO C++ forbids comparison between pointer and integer</short_desc>
          <delta_ts>2017-02-21 21:48:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nikolai Saoukh">nms</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1378</commentid>
    <comment_count>0</comment_count>
      <attachid>38</attachid>
    <who name="Nikolai Saoukh">nms</who>
    <bug_when>2017-01-26 10:50:04 +0000</bug_when>
    <thetext>Created attachment 38
NULL pointer comparison to a char literal should be to NULL

GCC7 complaint -- error: ISO C++ forbids comparison between pointer and integer.

Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Nikolai SAOUKH &lt;nms@otdel-1.org&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1409</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-02-08 21:12:28 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1499</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-21 21:48:14 +0000</bug_when>
    <thetext>push the fix SHA-1: d37fa01fbbe2cf0cd8b49069a71706a33cb4a53e</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>38</attachid>
            <date>2017-01-26 10:50:04 +0000</date>
            <delta_ts>2017-01-26 10:50:04 +0000</delta_ts>
            <desc>NULL pointer comparison to a char literal should be to NULL</desc>
            <filename>vfr-gcc7.diff</filename>
            <type>application/octet-stream</type>
            <size>516</size>
            <attacher name="Nikolai Saoukh">nms</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>829</bug_id>
          
          <creation_ts>2017-12-28 13:48:12 +0000</creation_ts>
          <short_desc>StdLib package does not build with VS2015 tool chains because __STDC_HOSTED__ is already defined</short_desc>
          <delta_ts>2021-08-18 20:42:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Jaben Carsey">jaben.carsey</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>milan.kase</cc>
    
    <cc>prasad.hegde.sirsi</cc>
    
    <cc>yitzhak.briskman</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StdLib</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3283</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-12-28 13:48:12 +0000</bug_when>
    <thetext>The StdLib package defines __STD_HOSTED__ in StdLib/Include/sys/EfiCdefs.h
and this generates the following warning:

warning C4117: macro name &apos;__STDC_HOSTED__&apos; is reserved, &apos;#define&apos; ignored

It appears that starting with VS2015, __STDC_HOSTED__ is defined by the 
compiler.

The following change is recommended so StdLib package only defines
__STDC_HOSTED__ if it is not already defined.

diff --git a/StdLib/Include/sys/EfiCdefs.h b/StdLib/Include/sys/EfiCdefs.h
index 2fa7ba6ae5..3b99e7fd98 100644
--- a/StdLib/Include/sys/EfiCdefs.h
+++ b/StdLib/Include/sys/EfiCdefs.h
@@ -339,7 +339,9 @@

   #define __STDC__            1
   #define __STDC_VERSION__    199409L
+  #ifndef __STDC_HOSTED__^M
   #define __STDC_HOSTED__     1
+  #endif^M

 #endif  /* defined(_MSC_VER) */
 extern int _fltused;    // VC++ requires this if you use floating point.  KEEP for all compilers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3285</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-28 19:03:59 +0000</bug_when>
    <thetext>Bug scrub: Assign to package owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16976</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 19:58:29 +0000</bug_when>
    <thetext>Commit:
https://github.com/tianocore/edk2-libc/commit/61687168fe02ac4d933a36c9145fdd242ac424d1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16980</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 20:42:34 +0000</bug_when>
    <thetext>*** Bug 1534 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>739</bug_id>
          
          <creation_ts>2017-10-19 12:55:40 +0000</creation_ts>
          <short_desc>Disable Bus Master on all P2P bridges at ExitBootServices</short_desc>
          <delta_ts>2017-11-06 22:29:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2902</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-10-19 12:55:40 +0000</bug_when>
    <thetext>To reduce the bus master attack surface, disable BME on all P2P bridges at ExitBootServices.

Code is available at:

https://github.com/Microsoft/MS_UEFI/tree/share/disablebmeonexit2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2903</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-19 20:03:47 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2979</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-11-06 22:29:24 +0000</bug_when>
    <thetext>pushed @ 050763db0730a0bb46235cec87e3716632dc532c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>480</bug_id>
          
          <creation_ts>2017-04-13 22:46:48 +0000</creation_ts>
          <short_desc>Build spec: add description for Override PCD value on the command line</short_desc>
          <delta_ts>2017-04-26 23:11:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1816</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-13 22:46:48 +0000</bug_when>
    <thetext>We&apos;d like to add the support for Override PCD value on the command line</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1869</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-19 21:13:40 +0000</bug_when>
    <thetext>only for doc, code already support.
assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1913</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-24 22:45:44 +0000</bug_when>
    <thetext>As part of this change, the following item should be
removed from Section 8.4.1.1 General Rules:

5.Command line cannot be used to set the PCD value.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1917</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-25 13:01:34 +0000</bug_when>
    <thetext>The following should be added to Appendix D.4 Usage 

--pcd=OPTIONPCD       Set PCD value by command line. Format: &quot;PcdName=Value&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-25 15:56:28 +0000</bug_when>
    <thetext>Patch review email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1947</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-26 23:11:03 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore-docs/edk2-BuildSpecification/commit/b9ac5b2354623c26fa35c11ce0fe2273cfe014f8

https://github.com/tianocore-docs/edk2-BuildSpecification/commit/45920ba39cc510a9c46b319cacbe5fbfbe648d13</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>850</bug_id>
          
          <creation_ts>2018-01-11 21:12:12 +0000</creation_ts>
          <short_desc>Use Nasm as preferred assembly sources for XCODE5</short_desc>
          <delta_ts>2018-01-18 23:56:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3386</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-11 21:12:12 +0000</bug_when>
    <thetext>Use nasm source file for all X86 tool chain, then ASM and S file can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3387</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-11 21:12:47 +0000</bug_when>
    <thetext>assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3452</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-18 23:56:15 +0000</bug_when>
    <thetext>Fix at 2583352f2427be24019e97f18905d8d2b1c64872</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>310</bug_id>
          
          <creation_ts>2016-12-26 11:37:17 +0000</creation_ts>
          <short_desc>[Build] CLANG38 toolchain missing NOOPT target</short_desc>
          <delta_ts>2017-02-13 02:27:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nikolai Saoukh">nms</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1213</commentid>
    <comment_count>0</comment_count>
    <who name="Nikolai Saoukh">nms</who>
    <bug_when>2016-12-26 11:37:17 +0000</bug_when>
    <thetext>Well,
summary says all. Oversight?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1250</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-01-04 20:09:46 +0000</bug_when>
    <thetext>bug scrub: assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1430</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-02-13 02:27:58 +0000</bug_when>
    <thetext>Fix it in edk2 https://github.com/tianocore/edk2/commit/296153c5bf9976a3b5f00566819f109d1c23c135</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>498</bug_id>
          
          <creation_ts>2017-04-20 14:21:57 +0000</creation_ts>
          <short_desc>build.py: hardcoded /bin/bash for PreBuild/PostBuild scripts is not good</short_desc>
          <delta_ts>2017-05-07 21:48:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nikolai Saoukh">nms</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1884</commentid>
    <comment_count>0</comment_count>
    <who name="Nikolai Saoukh">nms</who>
    <bug_when>2017-04-20 14:21:57 +0000</bug_when>
    <thetext>There are some systems where &apos;bash&apos; located elsewhere, like /usr/local/bin, ...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1934</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-26 21:06:15 +0000</bug_when>
    <thetext>assign to Yonghong. executable files should work as expect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2007</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-07 21:48:11 +0000</bug_when>
    <thetext>trunk: SHA-1: 34816e7e16c4c337888d2518222268096f67c4fc
UDK2017: SHA-1: 91751a082579f5778df43ecfa6eb365a571fb7e5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>689</bug_id>
          
          <creation_ts>2017-09-01 05:05:45 +0000</creation_ts>
          <short_desc>Build spec: add description for build with binary cache</short_desc>
          <delta_ts>2017-09-27 05:25:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2666</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-01 05:05:45 +0000</bug_when>
    <thetext>we plan to implement a new feature for build with binary cache. so it request build spec to add such descriptions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2699</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-09-06 21:03:40 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2792</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-27 05:25:20 +0000</bug_when>
    <thetext>fixed it by: SHA-1: 904fd05404fcaf87ce2a5efc9ddfb7162486e7f0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>603</bug_id>
          
          <creation_ts>2017-06-21 05:19:46 +0000</creation_ts>
          <short_desc>[BaseTools] VfrCompiler supports UNION type as VarStore in VFR</short_desc>
          <delta_ts>2017-10-11 01:41:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2304</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-06-21 05:19:46 +0000</bug_when>
    <thetext>Update VfrCompiler to support Union type used for VarStore and EfiVarStore.  This is only VfrCompiler change, there is no firmware code change. 

POC code has been sent to edk2 mail list, and will be added into edk2-staging https://github.com/tianocore/edk2-staging Branch StructurePcd.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2366</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-28 21:05:13 +0000</bug_when>
    <thetext>assign to Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2774</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-09-24 21:06:03 +0000</bug_when>
    <thetext>Update VfrCompiler：
https://github.com/tianocore/edk2/commit/2b7f3d4a6bb7e024b3c45f328bdd635f878387f7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2854</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-10-11 01:41:28 +0000</bug_when>
    <thetext>Add sample questions in DriverSample to refer Union type Varstore
https://github.com/tianocore/edk2/commit/911405a3f1122892f4d40a0f44e4e0c79b379f07</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>985</bug_id>
          
          <creation_ts>2018-06-15 00:22:43 +0000</creation_ts>
          <short_desc>UefiShellAcpiViewCommandLib fails to build under VS2017. Part 2.</short_desc>
          <delta_ts>2018-08-16 04:08:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4144</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2018-06-15 00:22:43 +0000</bug_when>
    <thetext>On our build we treat warnings as errors, and this module has the following errors.

ShellPkg\Library\UefiShellAcpiViewCommandLib\Parsers\Gtdt\GtdtParser.c(168): error C2220: warning treated as error - no &apos;object&apos; file generated
ShellPkg\Library\UefiShellAcpiViewCommandLib\Parsers\Gtdt\GtdtParser.c(168): warning C4244: &apos;=&apos;: conversion from &apos;UINT32&apos; to &apos;UINT16&apos;, possible loss of data
ShellPkg\Library\UefiShellAcpiViewCommandLib\Parsers\Gtdt\GtdtParser.c(169): warning C4244: &apos;-=&apos;: conversion from &apos;UINT32&apos; to &apos;UINT16&apos;, possible loss of data
ShellPkg\Library\UefiShellAcpiViewCommandLib\Parsers\Gtdt\GtdtParser.c(185): warning C4244: &apos;-=&apos;: conversion from &apos;UINT32&apos; to &apos;UINT16&apos;, possible loss of data</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4151</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2018-06-15 13:09:44 +0000</bug_when>
    <thetext>Perhaps this should be leveraging SafeIntLib if these truncating casts are actually necessary?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4190</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-21 21:04:30 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner

there have similar bug on VS2017 (bug 984), VS2017 Part2 (bug 985), VS2017 Part3 (bug 986).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4597</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-16 04:08:35 +0000</bug_when>
    <thetext>fixed @ ed8746801e0d9a5fc5fec006efdedac1c09e7bbf..7343bc8062c893ed6d40b25a9329d51340e0d703</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>255</bug_id>
          
          <creation_ts>2016-11-25 02:09:55 +0000</creation_ts>
          <short_desc>VolInfo tool will report assert message if GuidedSectionTools.txt has no extra empty line</short_desc>
          <delta_ts>2016-11-29 19:47:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1024</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-25 02:09:55 +0000</bug_when>
    <thetext>VolInfo tool parses GuidedSectionTools.txt to get GuidTool map table. If  GuidedSectionTools.txt has no extra empty line in the file end, VolInfo tool will report message: 
Assertion failed: MemoryFile-&gt;CurrentFilePointer &lt;= MemoryFile-&gt;Eof, file MemoryFile.c, line 250

We need to update VolInfo tool to support it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1070</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-29 19:46:24 +0000</bug_when>
    <thetext>Fix it in edk2 
https://github.com/tianocore/edk2/commit/60a5378208f8b60e0a04ac724a639ad19158e778</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1071</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-29 19:47:09 +0000</bug_when>
    <thetext>Fix</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>621</bug_id>
          
          <creation_ts>2017-07-07 04:48:56 +0000</creation_ts>
          <short_desc>[S3SaveStateDxe] doesn&apos;t follow PI spec when handling opcode like EFI_BOOT_SCRIPT_PCI_CONFIG2_WRITE_OPCODE</short_desc>
          <delta_ts>2017-10-10 01:29:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2405</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-07 04:48:56 +0000</bug_when>
    <thetext>EFI_BOOT_SCRIPT_WRITE() interface is a var-arg interface.

Spec defines the order of parameters for EFI_BOOT_SCRIPT_PCI_CONFIG2_WRITE_OPCODE as below:
typedef
EFI_STATUS
(EFIAPI *EFI_BOOT_SCRIPT_WRITE) (
IN CONST EFI_S3_SAVE_STATE_PROTOCOL *This,
IN UINT16 OpCode,
IN EFI_BOOT_SCRIPT_WIDTH Width,
IN UINT16 Segment,
IN UINT64 Address,
IN UINTN Count,
IN VOID *Buffer
);

But implementation assumes Segment is in the very end, after Buffer.
Similar spec/implementation gaps are also found for opcode 
EFI_BOOT_SCRIPT_PCI_CONFIG2_READ_WRITE_OPCODE and EFI_BOOT_SCRIPT_PCI_CONFIG2_POLL_OPCODE.

Since there is no consumer code to use these 3 op-codes, so no critical bugs are found. But we&apos;d better to fix it ASAP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2436</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-13 20:13:08 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner to update implemetation to align with spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2845</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-10 01:29:39 +0000</bug_when>
    <thetext>pushed @ 0a274516ff7efdd5a1ea8193423850ff02025e90</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>465</bug_id>
          
          <creation_ts>2017-04-07 06:15:57 +0000</creation_ts>
          <short_desc>DEC spec: document private definitions</short_desc>
          <delta_ts>2017-04-26 22:16:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>qin.long</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II DEC Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1780</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-04-07 06:15:57 +0000</bug_when>
    <thetext>The DEC spec (version 1.25) does not seem to document the facility introduced in edk2 commit c28d2e104781 (&quot;BaseTools: support private package definition&quot;, 2016-05-10). This looks like a powerful feature for encapsulation of internals, so it should be documented please.

One example for using this feature is commit abc4c8173dab (&quot;CryptoPkg: Move openssl and CRT headers to private include section&quot;, 2017-04-06).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1868</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-19 21:12:57 +0000</bug_when>
    <thetext>only for doc , code already support.
assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1906</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-24 21:14:31 +0000</bug_when>
    <thetext>Patch email sent for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1938</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-26 21:26:36 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore-docs/edk2-DecSpecification/commit/977d19a6eb18552ffcc23bf217a9eb418b16c03c

https://github.com/tianocore-docs/edk2-DecSpecification/commit/0f78bc09799c63cfbe80c68276a6ae2f4fa4c38c

https://github.com/tianocore-docs/edk2-DecSpecification/commit/c2b51b893d37042afdc6af7e8dd2b3ed4a7bc726

https://github.com/tianocore-docs/edk2-DecSpecification/commit/a3c7ee4d2e6f66fb9e85bc9bc65d86ec99bb28a2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1940</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-26 22:16:04 +0000</bug_when>
    <thetext>Additional commit to EDK II Build Specification

https://github.com/tianocore-docs/edk2-BuildSpecification/commit/afb505572de767fa05ca6348d36015faae387df9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>740</bug_id>
          
          <creation_ts>2017-10-20 12:49:11 +0000</creation_ts>
          <short_desc>INIT_CAR_VALUE should be defined in a central location</short_desc>
          <delta_ts>2017-11-03 05:58:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>747</blocked>
    
    <blocked>748</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2908</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2017-10-20 12:49:11 +0000</bug_when>
    <thetext>Certain SEC implementations seed the temporary stack with a magic number that helps PEI core decide how much stack space has actually been used.

It is currently defined as

MdeModulePkg/Core/Pei/Dispatcher/Dispatcher.c:#define INIT_CAR_VALUE 0x5AA55AA5

while Nt32Pkg and EmulatorPkg open code the value

EmulatorPkg/Unix/Host/Host.c:    *StackPointer = 0x5AA55AA5;
Nt32Pkg/Sec/SecMain.c:    *StackPointer = 0x5AA55AA5;

Before adding this functionality to OVMF and ArmPlatformPkg, we should define this in a central location, and not add more open coded instances.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2936</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-10-26 01:15:06 +0000</bug_when>
    <thetext>I suggest to define one UINT32 FixedAtBuild PCD in MdeModulePkg.dec for the value share between the different modules. PCD default value is 0x5AA55AA5. The PCD name can be gEfiMdeModulePkgTokenSpaceGuid.PcdInitCarValue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2937</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-26 03:43:01 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #1)
&gt; I suggest to define one UINT32 FixedAtBuild PCD in MdeModulePkg.dec for the
&gt; value share between the different modules. PCD default value is 0x5AA55AA5.

Sounds good to me, thanks!

&gt; The PCD name can be gEfiMdeModulePkgTokenSpaceGuid.PcdInitCarValue.

I meant to ask this before -- what does &quot;CAR&quot; stand for?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2938</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-10-26 03:46:29 +0000</bug_when>
    <thetext>How about this name PcdInitValueInTempStack?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2939</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-26 03:54:33 +0000</bug_when>
    <thetext>&quot;PcdInitValueInTempStack&quot; looks great, thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2948</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-26 20:03:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2973</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-11-03 05:58:35 +0000</bug_when>
    <thetext>Fix at edk2 eb3abca30855c5ec0698585e2c1f64f7853fc36e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>481</bug_id>
          
          <creation_ts>2017-04-13 22:48:07 +0000</creation_ts>
          <short_desc>Build Spec: add clarification for not used Pcd that build tool will not do additional checks on its value</short_desc>
          <delta_ts>2017-05-31 01:35:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1817</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-13 22:48:07 +0000</bug_when>
    <thetext>Add some clarification in the build spec build report chapter, PCDs not used by modules or in conditional directives section, for those Pcds build tool will not  do additional checks  on its value since no module use it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1870</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-19 21:14:23 +0000</bug_when>
    <thetext>only for doc, code already support
assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1949</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-26 23:13:59 +0000</bug_when>
    <thetext>Patch review email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2212</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-31 01:35:05 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-BuildSpecification/commit/adb6dcc6ece250d5ad05f3199ac6989cbddaf2c8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>780</bug_id>
          
          <creation_ts>2017-11-14 00:36:30 +0000</creation_ts>
          <short_desc>[BaseTools] BuildRuleFamily doesn&apos;t work on INF [Sources] section</short_desc>
          <delta_ts>2017-11-19 22:23:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3050</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-11-14 00:36:30 +0000</bug_when>
    <thetext>BuildRuleFamily may be set to the different one. It will impact BuildRule and source files in INF file. But now, it doesn&apos;t work on INF file. 

In BaseLib.inf [Sources] section, Thunk16.S should be used when BuildRuleFamily is set to XCODE. But it doesn&apos;t work now. 

Ia32/Thunk16.S | XCODE</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3078</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-11-15 20:07:54 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3082</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-16 04:19:35 +0000</bug_when>
    <thetext>Patch already be sent out for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3099</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-19 22:23:43 +0000</bug_when>
    <thetext>pushed the patch: SHA-1: e259779974ea7e109ee75b9b853f73bd0f66a4b3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>895</bug_id>
          
          <creation_ts>2018-03-14 03:21:55 +0000</creation_ts>
          <short_desc>Issues in HttpDxe when there is huge data request send</short_desc>
          <delta_ts>2018-08-15 00:56:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>ting.ye</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3695</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2018-03-14 03:21:55 +0000</bug_when>
    <thetext>Hi All,

I’m facing  2 issues in HttpDxe, please find the below details

1. ASSERT issue in HttpDxe
2. TlsProcessPacket() returns EFI_INVALID_PARAMETER when we send large amount(~300KB) of data using EfiHttpRequest() 

1. ASSERT issue in HttpDxe

[Issue Details]

EFI_STATUS
EFIAPI
TlsProcessMessage (
  IN     HTTP_PROTOCOL            *HttpInstance,
  IN     UINT8                    *Message,
  IN     UINTN                    MessageSize,
  IN     EFI_TLS_CRYPT_MODE       ProcessMode,
  IN OUT NET_FRAGMENT             *Fragment
  )
{
  EFI_STATUS                      Status;
  UINT8                           *Buffer;
  UINT32                          BufferSize;
  UINT32                          BytesCopied;
  EFI_TLS_FRAGMENT_DATA           *FragmentTable;
  UINT32                          FragmentCount;
  EFI_TLS_FRAGMENT_DATA           *OriginalFragmentTable;
  UINTN                           Index;
.
.
.
  Status = HttpInstance-&gt;Tls-&gt;ProcessPacket (
                                HttpInstance-&gt;Tls,
                                &amp;FragmentTable,
                                &amp;FragmentCount,
                                ProcessMode
                                );
  if (EFI_ERROR (Status)) {
    goto ON_EXIT;
  }
.
.
.
ON_EXIT:

  if (OriginalFragmentTable != NULL) {
    FreePool (OriginalFragmentTable);
    OriginalFragmentTable = NULL;
  }

  //
  // Caller has the responsibility to free the FragmentTable.
  //
  if (FragmentTable != NULL) {
    FreePool (FragmentTable);
    FragmentTable = NULL;
  }

  return Status;
}


1. When HttpInstance-&gt;Tls-&gt;ProcessPacket() returns EFI_INVALID_PARAMETER, OriginalFragmentTable and FragmentTable both the Pointers pointing the same memory Location
   OriginalFragmentTable pointer will be freed first and assigned with NULL, But FragmentTable still having same address but the memory location is freed.
   Hence FreePool (FragmentTable); cause the issue.

[Solution]
Anyway we need to handle ProcessPacket() failure case
We can add a condition check to resolve this issue, like below
  
ON_EXIT:

  if (OriginalFragmentTable != NULL) {
+      if( FragmentTable == OriginalFragmentTable) {     
+          FragmentTable = NULL;
+      }
    FreePool (OriginalFragmentTable);
    OriginalFragmentTable = NULL;
  }


2. TlsProcessPacket() returns EFI_INVALID_PARAMETER when we send large amount of data using EfiHttpRequest() 

TlsProcessPacket() -&gt; TlsEncryptPacket()

EFI_STATUS
TlsEncryptPacket (
  IN     TLS_INSTANCE                  *TlsInstance,
  IN OUT EFI_TLS_FRAGMENT_DATA         **FragmentTable,
  IN     UINT32                        *FragmentCount
  )
{
  EFI_STATUS          Status;
  UINTN               Index;
.
.
.

  while ((UINTN) BufferInPtr &lt; (UINTN) BufferIn + BufferInSize) {
    RecordHeaderIn = (TLS_RECORD_HEADER *) BufferInPtr;

    if (RecordHeaderIn-&gt;ContentType != TlsContentTypeApplicationData) {
      Status = EFI_INVALID_PARAMETER;
      goto ERROR;
    }

.
.
.
}

[Issue]
For the first time I&apos;m getting ContentType as TlsContentTypeApplicationData, But next time onwards getting 0x20(32) and 0 both are unassigned values, hence returning EFI_INVALID_PARAMETER


I think network stack is failing to handle huge data. I hope network stack trying to split and send, somehow the split doesn&apos;t taken care of header properly.

Could you please provide your comments/suggestions on this

Thanks &amp; Regards,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3699</commentid>
    <comment_count>1</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2018-03-14 11:25:30 +0000</bug_when>
    <thetext>typedef struct {
  UINT8                   ContentType;
  EFI_TLS_VERSION         Version;
  UINT16                  Length;
} TLS_RECORD_HEADER;


Length is UINT16, But the Length value coming from HttpRequest is greater than 2 bytes, This may causing the issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3702</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-03-14 22:37:20 +0000</bug_when>
    <thetext>Identified it&apos;s the HttpDxe driver bug, which doesn&apos;t handle the large data request via HTTPS channel correctly.

We will provide the patch to resolve the issue later for your verification.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3703</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-03-14 23:23:10 +0000</bug_when>
    <thetext>
More input:
The definition of TLS_RECORD_HEADER is correct/mandatory to use the UINT16 type for Length since it&apos;s already declaried in RFC RFC5246 section 6.2.1.                

typedef struct {
  UINT8                   ContentType;
  EFI_TLS_VERSION         Version;
  UINT16                  Length;
} TLS_RECORD_HEADER;


length
The length (in bytes) of the following TLSPlaintext.fragment. The
length MUST NOT exceed 2^14.

So, the caller of HttpDxe doesn&apos;t follow the RFC definitions, then error returns from TLS driver. 

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3706</commentid>
    <comment_count>4</comment_count>
      <attachid>151</attachid>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-03-15 06:50:41 +0000</bug_when>
    <thetext>Created attachment 151
[Patch 1/3]

[Patch 1/3] MdePkg/Tls1.h: Add TLS record header length and max
 payload length.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3707</commentid>
    <comment_count>5</comment_count>
      <attachid>152</attachid>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-03-15 06:51:34 +0000</bug_when>
    <thetext>Created attachment 152
[Patch 2/3]

[Patch 2/3] NetworkPkg/TlsDxe: Handle the multiple TLS record
 messages encryption/decryption.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3708</commentid>
    <comment_count>6</comment_count>
      <attachid>153</attachid>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-03-15 06:52:19 +0000</bug_when>
    <thetext>Created attachment 153
[Patch 3/3]

[Patch 3/3] NetworkPkg/HttpDxe: Handle the large data request via
 HTTPS channel.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3709</commentid>
    <comment_count>7</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-03-15 06:52:52 +0000</bug_when>
    <thetext>
Hi Karunakar,

Please help to verify the attached patches, then feedback to me whether it can resolve the issue.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3715</commentid>
    <comment_count>8</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2018-03-15 11:09:51 +0000</bug_when>
    <thetext>Hi Jiaxin,

1. There is a build error, conversion from &apos;UINTN&apos; to &apos;UINT32&apos;, possible loss of data
We need to to typecast to UINT32
HttpTransmitTcp()
{
.
.
.

 RecordCount = TxStringLen / TLS_PLAINTEXT_RECORD_MAX_PAYLOAD_LENGTH + 1;
//We need to to typecast it to UINT32 
.
.
.
}

2. There is ASSERT issue after TlsEncryptPacket Success

TlsProcessPacket: TlsEncryptPacket status Success
ASSERT d:\Pro\MdeModulePkg\Core\Dxe\Mem\Pool.c(693): CR has Bad Signature

Sometimes also face ASSERT after TlsDecryptPacket Success 
TlsProcessPacket: TlsEncryptPacket TlsDecryptPacket Success 
ASSERT d:\Pro\MdePkg\Library\BaseLib\String.c(1082): String != ((void *) 0)


Thanks,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3720</commentid>
    <comment_count>9</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-15 20:05:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4581</commentid>
    <comment_count>10</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-08-15 00:56:07 +0000</bug_when>
    <thetext>The fixed commits are:

https://github.com/tianocore/edk2/commit/cb3350ec62b9649cd699328710928b2c25e9a1bf

https://github.com/tianocore/edk2/commit/07bd82d42bab4defd777dc21b3aa627469dc347e</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>151</attachid>
            <date>2018-03-15 06:50:41 +0000</date>
            <delta_ts>2018-03-15 06:50:41 +0000</delta_ts>
            <desc>[Patch 1/3]</desc>
            <filename>0001-MdePkg-Tls1.h-Add-TLS-record-header-length-and-max-p.patch</filename>
            <type>text/plain</type>
            <size>2099</size>
            <attacher name="jiaxinwu">jiaxin.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>152</attachid>
            <date>2018-03-15 06:51:34 +0000</date>
            <delta_ts>2018-03-15 06:51:34 +0000</delta_ts>
            <desc>[Patch 2/3]</desc>
            <filename>0002-NetworkPkg-TlsDxe-Handle-the-multiple-TLS-record-mes.patch</filename>
            <type>text/plain</type>
            <size>9574</size>
            <attacher name="jiaxinwu">jiaxin.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>153</attachid>
            <date>2018-03-15 06:52:19 +0000</date>
            <delta_ts>2018-03-15 06:52:19 +0000</delta_ts>
            <desc>[Patch 3/3]</desc>
            <filename>0003-NetworkPkg-HttpDxe-Handle-the-large-data-request-via.patch</filename>
            <type>text/plain</type>
            <size>13581</size>
            <attacher name="jiaxinwu">jiaxin.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>434</bug_id>
          
          <creation_ts>2017-03-21 02:10:16 +0000</creation_ts>
          <short_desc>BaseTools: DynamicEx Pcd used in Lib cause build failure</short_desc>
          <delta_ts>2017-03-26 22:42:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1650</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-21 02:10:16 +0000</bug_when>
    <thetext>&gt;-----Original Message-----
&gt;From: edk2-devel [mailto:edk2-devel-bounces@lists.01.org] On Behalf Of 
&gt;wang xiaofeng
&gt;Sent: Thursday, March 09, 2017 10:46 AM
&gt;To: edk2-devel@lists.01.org
&gt;Subject: [edk2] Do edk2 support PcdGetEx64 in library
&gt;
&gt;Hi ,
&gt;   Anyone knows whether edk2 support PcdGetEx64 in library?
&gt;
&gt;   First I declare a PcdsDynamicEx in dec file [PcdsDynamicEx]
&gt;   gEfixxxTokenSpaceGuid.PcdPasswordToken|0|UINT64|0x10000009
&gt;
&gt;  Then I tried to use PcdGetEx64 in a library construct function
&gt;   OldToken = PcdGetEx64((CONST GUID
&gt;*)&amp;gEfixxxTokenSpaceGuid,PcdPasswordToken);
&gt;
&gt;
&gt;   There is a compile error:
&gt; warning C4013: &apos;_PCD_TOKEN_EX_PcdPasswordToken&apos; undefined; assuming 
&gt;extern returning int NMAKE : fatal error U1077: &apos;&quot;C:\Program Files 
&gt;(x86)\Microsoft Visual Studio 12.0\Vc\bin\x86_amd64\cl.exe&quot;&apos; : return 
&gt;code &apos;0x2&apos;
&gt;
&gt;
&gt;  But I can use PcdGetEx64 or PcdSetEx64S in DXE drivers, so is there a 
&gt;limitation to set/get PcdsDynamicEx with PcdGetEx64/ PcdSetEx64S  in 
&gt;library？</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1659</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-22 21:10:42 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1691</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-26 22:42:24 +0000</bug_when>
    <thetext>pushed the fix SHA-1: d590cce5cd9b9d31848eda4fcb62d1ab3fd05dfd</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>798</bug_id>
          
          <creation_ts>2017-11-29 23:44:46 +0000</creation_ts>
          <short_desc>Add SafeIntLib support</short_desc>
          <delta_ts>2018-01-25 14:54:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3144</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-11-29 23:44:46 +0000</bug_when>
    <thetext>Add IntSafeLib in below open source git:

https://github.com/Microsoft/MS_UEFI/tree/share/MsCapsuleSupport/MdePkg/Library/IntSafeLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3164</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-30 19:53:05 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3493</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-01-25 14:53:39 +0000</bug_when>
    <thetext>Patch email for review

https://lists.01.org/pipermail/edk2-devel/2017-December/019267.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3494</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-01-25 14:54:28 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/d7a09cb86a0416c099fa3a9e0fbe2c8f399b28de</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>706</bug_id>
          
          <creation_ts>2017-09-13 01:43:57 +0000</creation_ts>
          <short_desc>[BaseTools] Build report update for Structure PCD value and SKU, DefaultStore info</short_desc>
          <delta_ts>2017-11-07 01:27:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2725</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-09-13 01:43:57 +0000</bug_when>
    <thetext>The detail proposal is listed in
https://lists.01.org/pipermail/edk2-devel/2017-September/014111.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2726</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-09-13 02:51:31 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2980</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-07 01:27:24 +0000</bug_when>
    <thetext>patch was pushed into Structure Pcd staging.
SHA-1: e0450b637b4cb9755d436664c3fa09787b991205</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>815</bug_id>
          
          <creation_ts>2017-12-12 13:17:27 +0000</creation_ts>
          <short_desc>Fix build break in NetworkPkg/HttpDxe driver when CHAR8 is unsigned</short_desc>
          <delta_ts>2018-01-22 20:25:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3215</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-12-12 13:17:27 +0000</bug_when>
    <thetext>If a compiler treats CHAR8 type as unsigned, then the HttpDxe driver in the NetworkPkg does not build.

The issue is in the function AsciiStrCaseStr() in HtpsSupport.c.  The
code that performs the case insensitive comparison on strings depends
on CHAR8 being a signed type to convert a character to lower case.

The following patch performs the same conversion that is compatible
with CHAR8 signed or unsigned.

@@ -65,15 +65,15 @@ AsciiStrCaseStr (
             &amp;&amp; (*String != &apos;\0&apos;)) {
       Src = *String;
       Dst = *SearchStringTmp;

       if ((Src &gt;= &apos;A&apos;) &amp;&amp; (Src &lt;= &apos;Z&apos;)) {
-        Src -= (&apos;A&apos; - &apos;a&apos;);
+        Src += (&apos;a&apos; - &apos;A&apos;);
       }

       if ((Dst &gt;= &apos;A&apos;) &amp;&amp; (Dst &lt;= &apos;Z&apos;)) {
-        Dst -= (&apos;A&apos; - &apos;a&apos;);
+        Dst += (&apos;a&apos; - &apos;A&apos;);
       }

       if (Src != Dst) {
         break;
       }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3216</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-12-12 13:18:31 +0000</bug_when>
    <thetext>For Visual Studio compilers, this issue can be reproduced by 
setting the -J flag in the [BuildOptions] section.

[BuildOptions]
  *_*_*_CC_FLAGS = -J</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3234</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-14 19:18:24 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3463</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-01-22 20:25:52 +0000</bug_when>
    <thetext>Commit version:

Trunk:
https://github.com/tianocore/edk2/commit/1e4725e569960b1107c11df6c404312d26129eab

UDK2018:
https://github.com/tianocore/edk2/commit/4276a385329c8b16ac994b494c4d24598a954cae</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>466</bug_id>
          
          <creation_ts>2017-04-10 00:38:52 +0000</creation_ts>
          <short_desc>Add the option in CLANG38 tool chain to disable warning unknown-warning-option</short_desc>
          <delta_ts>2017-04-14 03:35:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1783</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-04-10 00:38:52 +0000</bug_when>
    <thetext>CryptoPkg update causes CLANG38 build failure, because CLANG38 doesn&apos;t know maybe-uninitialized option. The fix is to update CLANG38 tool chain tag to disable this option.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1784</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-04-10 00:39:27 +0000</bug_when>
    <thetext>Assign to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1823</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-04-14 03:35:28 +0000</bug_when>
    <thetext> https://github.com/tianocore/edk2/commit/ab200776cdba018c4b6e5f712628482d46ba4931</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>831</bug_id>
          
          <creation_ts>2017-12-28 19:10:51 +0000</creation_ts>
          <short_desc>QuarkPlatformPkg build break from commit: BaseTools: Support PCD flexible values format</short_desc>
          <delta_ts>2018-01-02 09:17:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3289</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-12-28 19:10:51 +0000</bug_when>
    <thetext>The following commit breaks QuarkPlatformPkg builds

  https://github.com/tianocore/edk2/commit/726c501c2c9a1ef103fab7846e2d1a34506715d8#diff-a7d3d525d66b246a9a84bdb0d19a2e48

The line in Quark.dsc that it causing the issue is:

  !if $(TPM_12_HARDWARE) == LPC
    Tpm12DeviceLib|SecurityPkg/Library/Tpm12DeviceLibDTpm/Tpm12DeviceLibDTpm.inf
  !endif

The issue is that the string &apos;LPC&apos; starts with the &apos;L&apos;character and this is being confused with L&quot; or L&apos; for
a Unicode string or Unicode character.

The following patch performs a more complete check for L&quot; or L&apos;.

diff --git a/BaseTools/Source/Python/Common/Expression.py b/BaseTools/Source/Python/Common/Expression.py
index 953a412e80..55fa06d414 100644
--- a/BaseTools/Source/Python/Common/Expression.py
+++ b/BaseTools/Source/Python/Common/Expression.py
@@ -164,7 +164,7 @@ class ValueExpression(object):
                 else:
                     Oprand1,Size = ParseFieldValue(&apos;&quot;&apos; + Oprand1 + &apos;&quot;&apos;)
             if type(Oprand2) == type(&apos;&apos;):
-                if Oprand2[0] in [&apos;&quot;&apos;, &quot;&apos;&quot;, &apos;L&apos;] or Oprand2.startswith(&apos;UINT&apos;):
+                if Oprand2[0] in [&apos;&quot;&apos;, &quot;&apos;&quot;] or Oprand2.startswith(&apos;L&quot;&apos;) or Oprand2.startswith(&quot;L&apos;&quot;) or Oprand2.startswith(&apos;UINT&apos;):^M
                     Oprand2, Size = ParseFieldValue(Oprand2)
                 else:
                     Oprand2, Size = ParseFieldValue(&apos;&quot;&apos; + Oprand2 + &apos;&quot;&apos;)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3290</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-28 19:14:50 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3316</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-02 09:17:25 +0000</bug_when>
    <thetext>pushed the fix. SHA-1: f13f306b3b07330191ba4620e49c2a9151b8e575</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>207</bug_id>
          
          <creation_ts>2016-11-03 01:14:47 +0000</creation_ts>
          <short_desc>[basetool] add DATAC to generate binary from data section.</short_desc>
          <delta_ts>2022-02-15 22:31:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>aaron.li</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>822</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-11-03 01:14:47 +0000</bug_when>
    <thetext>Currently, we only have ASLC extension to generate binary from a data section.

It is confusing because sometimes the data section is not for ACPI. Also some ACPI related check is performed on that, such as signature or length.

We propose to add DATAC extension to generate binary from the c code data section.
The signature check and length check should not be there.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>863</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-09 20:13:38 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5486</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:38:34 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18387</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-15 22:31:17 +0000</bug_when>
    <thetext>still suggest users use ASLC extension because it&apos;s been used.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>948</bug_id>
          
          <creation_ts>2018-05-03 15:21:02 +0000</creation_ts>
          <short_desc>PciBusDxe: PCI BAR programming fails when bus address is required</short_desc>
          <delta_ts>2019-03-25 17:01:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>roman.bacik</reporter>
          <assigned_to>roman.bacik</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>roman.bacik</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3978</commentid>
    <comment_count>0</comment_count>
      <attachid>172</attachid>
    <who name="">roman.bacik</who>
    <bug_when>2018-05-03 15:21:02 +0000</bug_when>
    <thetext>Created attachment 172
example of working patch

Our SoC requires BARs to be programmed with bus address instead of memory address. However, the memory address must be kept in order for the drivers calling it to use the proper address. The attached is a patch to PciResourceSupport.c which works for us in order to make it more clear.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3979</commentid>
    <comment_count>1</comment_count>
      <attachid>173</attachid>
    <who name="">roman.bacik</who>
    <bug_when>2018-05-03 19:06:01 +0000</bug_when>
    <thetext>Created attachment 173
Proposed patch

This patch has been submitted to edk2-devel@lists.01.org with subject &quot;Enable using device address when programming BARs&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3989</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-10 20:02:39 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4058</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-06-05 21:18:27 +0000</bug_when>
    <thetext>Assign back to submitter because I saw discussion in mailing list that this change is not required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6912</commentid>
    <comment_count>4</comment_count>
    <who name="">roman.bacik</who>
    <bug_when>2019-03-25 17:01:21 +0000</bug_when>
    <thetext>We will try a workaround.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>172</attachid>
            <date>2018-05-03 15:21:02 +0000</date>
            <delta_ts>2018-05-03 15:21:02 +0000</delta_ts>
            <desc>example of working patch</desc>
            <filename>PciResourceSupport.patch</filename>
            <type>application/octet-stream</type>
            <size>1230</size>
            <attacher>roman.bacik</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>173</attachid>
            <date>2018-05-03 19:06:01 +0000</date>
            <delta_ts>2018-05-03 19:06:01 +0000</delta_ts>
            <desc>Proposed patch</desc>
            <filename>0001-Enable-using-device-address-when-programming-BARs.patch</filename>
            <type>text/plain</type>
            <size>3942</size>
            <attacher>roman.bacik</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>482</bug_id>
          
          <creation_ts>2017-04-13 22:49:40 +0000</creation_ts>
          <short_desc>DEC Spec: add clarification for [Ppis], [Guids], [Protocols], [Includes] Private support</short_desc>
          <delta_ts>2017-04-26 21:18:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II DEC Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1818</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-13 22:49:40 +0000</bug_when>
    <thetext>We need add clarification for [Guids] section Private support, if user define the same guid both in [Guids] section and [Guids.common.Private], build tool should break with reasonable error message.

This clarification also for [Ppis], [Protocols], [Includes] section Private support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1871</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-19 21:14:55 +0000</bug_when>
    <thetext>only for doc, code already support
assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1907</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-24 21:14:59 +0000</bug_when>
    <thetext>Patch email sent for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1937</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-26 21:18:37 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore-docs/edk2-DecSpecification/commit/977d19a6eb18552ffcc23bf217a9eb418b16c03c

https://github.com/tianocore-docs/edk2-DecSpecification/commit/0f78bc09799c63cfbe80c68276a6ae2f4fa4c38c

https://github.com/tianocore-docs/edk2-DecSpecification/commit/c2b51b893d37042afdc6af7e8dd2b3ed4a7bc726

https://github.com/tianocore-docs/edk2-DecSpecification/commit/a3c7ee4d2e6f66fb9e85bc9bc65d86ec99bb28a2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>224</bug_id>
          
          <creation_ts>2016-11-11 20:12:53 +0000</creation_ts>
          <short_desc>NVMExpress Shutdown on EfiResetSystem</short_desc>
          <delta_ts>2017-09-05 22:59:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>feng.tian</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>889</commentid>
    <comment_count>0</comment_count>
      <attachid>20</attachid>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2016-11-11 20:12:53 +0000</bug_when>
    <thetext>Created attachment 20
git diff output

NVMExpress drives require advanced notification prior to a reset to prevent data corruption.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>910</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-14 04:17:08 +0000</bug_when>
    <thetext>(In reply to Michael Turner from comment #0)
&gt; Created attachment 20 [details]
&gt; git diff output
&gt; 
&gt; NVMExpress drives require advanced notification prior to a reset to prevent
&gt; data corruption.

Michael,

can you please send the patch to the list for review?

(Also, the name &quot;gEfiResetNotifyCallbackProtocolGuid&quot; seems to imply a standard protocol, but I don&apos;t see that name anywhere in edk2 or in the spec. Is there an in-progress Mantis ticket perhaps?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>936</commentid>
    <comment_count>2</comment_count>
    <who name="Feng Tian">feng.tian</who>
    <bug_when>2016-11-15 03:55:23 +0000</bug_when>
    <thetext>Mike &amp; Laszlo,

I think this patch is used to execute steps defined in NVMe spec (see NVMe1.2 chapter 7.6.2) when a power-off condition happens.

My opinion is it should be a platform behavior rather than core behavior, which means platform driver should hook shutdown(S3/S4) to perform NVMe controller shutdown.

This way could avoid introducing a implementation specific guid.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>940</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-15 09:22:06 +0000</bug_when>
    <thetext>Generally speaking, how can a platform hook shutdown? Do you mean the ResetSystemLib interfaces that are called from MdeModulePkg/Universal/ResetSystemRuntimeDxe (which provides gEfiResetArchProtocolGuid)? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>947</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2016-11-15 17:26:24 +0000</bug_when>
    <thetext>I do apologize for exposing our private reset notification.

However, I do not agree that this problem is a platform issue.  This is a problem with the UEFI Core NVM/E driver (and the TPM driver, for that matter) that have been implemented without regard to certain device specifications.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>949</commentid>
    <comment_count>5</comment_count>
    <who name="Feng Tian">feng.tian</who>
    <bug_when>2016-11-15 21:15:59 +0000</bug_when>
    <thetext>Mike,

What I mean is although the device shutdown notification is defined in NVMe spec we can have a platform-specific solution to solve this.

for example, disconnect NVMe controller and set CC.SHN bit at platform code for normal shutdown.

Another point of view is NVMe is the only device I know which needs a shutdown notification. so whether introducing such guid is valuable may depend on how device shutdown notification becomes popular.

PS: do you know what&apos;s the impact of not executing the NVMe shutdown process? NVMe spec doesn&apos;t say it...

Laszlo,

I also don&apos;t know how MS implements/signals this gEfiResetNotifyCallbackProtocolGuid. but I guess so, that&apos;s install this protocol guid in ResetSystemLib. Mike, please correct me if I am wrong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>959</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-16 11:14:14 +0000</bug_when>
    <thetext>(In reply to Feng Tian from comment #5)

&gt; Laszlo,
&gt; 
&gt; I also don&apos;t know how MS implements/signals this
&gt; gEfiResetNotifyCallbackProtocolGuid. but I guess so, that&apos;s install this
&gt; protocol guid in ResetSystemLib. Mike, please correct me if I am wrong.

My question is how you *suggest* to implement the shutdown / reset hook.

In other words, how a platform *should* add its cleanup code, so that it runs when the ResetSystem() runtime service is called. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>974</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2016-11-17 12:53:46 +0000</bug_when>
    <thetext>We have made public our ResetSystem interface that we have used over the last year.

https://github.com/Microsoft/MS_UEFI/tree/share/ResetSystem

This is used by both our NVME code and TPM code (yes, the TPM requires a shutdown notification also - just as a counter to &quot;no other hardware needs a reset notification&quot;).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>977</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-17 13:50:17 +0000</bug_when>
    <thetext>Can we perhaps standardize this feature? It could see other uses as well; a writeback-caching filesystem implementation, for example. (The write cache would have to be flushed at reset / shutdown / ready-to-boot / legacy-boot, I assume.)

I have no current proposal for a caching filesystem, mind you, I just recall thinking about it a few months (?) back, and telling myself it would be unsafe after all because there was no shutdown / reset notification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2329</commentid>
    <comment_count>9</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-22 20:14:24 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2686</commentid>
    <comment_count>10</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-05 22:59:19 +0000</bug_when>
    <thetext>pushed @ 7111e46fdebca0e03f6ddfcb029522c2fe68c74b.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>20</attachid>
            <date>2016-11-11 20:12:53 +0000</date>
            <delta_ts>2016-11-11 20:12:53 +0000</delta_ts>
            <desc>git diff output</desc>
            <filename>changes.txt</filename>
            <type>text/plain</type>
            <size>10960</size>
            <attacher name="Michael Turner">Michael.Turner</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>691</bug_id>
          
          <creation_ts>2017-09-04 08:36:28 +0000</creation_ts>
          <short_desc>AppPkg/Applications/Sockets/WebServer fails to build after commit e25352c207cc</short_desc>
          <delta_ts>2017-09-13 20:58:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jaben.carsey</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2669</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-04 08:36:28 +0000</bug_when>
    <thetext>Please see my original report in:
http://mid.mail-archive.com/97a3d5e0-c3f4-5b5d-fd08-23acf345cddb@redhat.com

Commit e25352c207cc (&quot;UefiCpuPkg MtrrLib: Remove deprecated micro.&quot;, 2017-08-03) removed a number of MTRR_LIB_* macro definitions. However,

  AppPkg/Applications/Sockets/WebServer/Mtrr.c

still uses those macros, and therefore WebServer no longer builds.

The solution is likely to add, or open-code, those macros in

  AppPkg/Applications/Sockets/WebServer/Mtrr.c

I&apos;m filing this BZ for UefiCpuPkg, because macro definitions should not be removed before all users (in the open source edk2 tree) are detached from them. The &quot;AppPkg/Applications/Sockets/WebServer&quot; application should have been updated in the original UefiCpuPkg series:

[edk2] [Patch 0/7] Remove deprecated macro.
http://mid.mail-archive.com/1501752726-14072-1-git-send-email-eric.dong@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2709</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-07 20:07:11 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2728</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2017-09-13 20:58:23 +0000</bug_when>
    <thetext>Fixed this issue in below patch:

SHA-1: b30abe7df464d91b84a42763e61bb3c85bfd80c9

* AppPkg/WebServer: Fix build failure.

Fix build failure caused by UefiCpuPkg/MtrrLib removes deprecated macros.
related bugz: https://bugzilla.tianocore.org/show_bug.cgi?id=691

Cc: Daryl McDaniel &lt;edk2-lists@mc2research.org&gt;
Cc: Jaben Carsey &lt;jaben.carsey@intel.com&gt;
Cc: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Daryl McDaniel &lt;edk2-lists@mc2research.org&gt;
Reviewed-by: Jaben Carsey &lt;jaben.carsey@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>605</bug_id>
          
          <creation_ts>2017-06-21 17:26:46 +0000</creation_ts>
          <short_desc>Crypto package</short_desc>
          <delta_ts>2017-12-06 03:41:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2306</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-06-21 17:26:46 +0000</bug_when>
    <thetext>Crypto package shim causes buffer overflows.  See CryptoPkg\Library\BaseCryptLib\SysCall\BaseMemAllocation.c.  There is even a comment calling what they are doing a BUG.

Causes Special Pool exception.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2327</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-22 20:12:29 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3187</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-12-06 03:41:43 +0000</bug_when>
    <thetext>Fixed by the commit: cf8197a39d07179027455421a182598bd6989999 and
                     6fe575d052e36b243657a5885b5457decac41f03</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>799</bug_id>
          
          <creation_ts>2017-11-30 00:12:07 +0000</creation_ts>
          <short_desc>Add boot logo 2 protocol</short_desc>
          <delta_ts>2018-02-28 16:10:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3145</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-11-30 00:12:07 +0000</bug_when>
    <thetext>Add boot log2 protocol, at https://github.com/Microsoft/MS_UEFI/blob/share/MsCapsuleSupport/MdeModulePkg/Include/Protocol/BootLogo2.h

and the implementation at
https://github.com/Microsoft/MS_UEFI/tree/share/MsCapsuleSupport/MdeModulePkg/Universal/Acpi/BootGraphicsResourceTableDxe</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3146</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-11-30 00:13:15 +0000</bug_when>
    <thetext>add 
https://github.com/Microsoft/MS_UEFI/tree/share/MsCapsuleSupport/MdeModulePkg/Library/BootLogoLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3163</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-30 19:51:33 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3179</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-12-01 07:23:18 +0000</bug_when>
    <thetext>The protocol is called &quot;EFI_BOOT_LOGO_PROTOCOL2&quot; in the patches.

Is it meant as an upcoming UEFI spec feature, or an edk2 extension? If the former, can you please give me the Mantis ticket number for it?

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3238</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-12-14 19:50:24 +0000</bug_when>
    <thetext>This is EDKII implementation, not UEFI spec defined protocol.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3309</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-01-02 08:52:12 +0000</bug_when>
    <thetext>Thanks, Jiewen -- in such cases I think we use the EDKII_ prefix, in general.

(Either way, this should be discussed on the list, not in the BZ entry. I&apos;m just back from PTO and could only take a quick glance at the list thus far, but I&apos;m not seeing the patch(es) there.)

NB. my interest in this feature is not specific; I&apos;d just like to see all patches posted to edk2-devel for review. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3603</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-15 18:01:55 +0000</bug_when>
    <thetext>Patch email for review

https://lists.01.org/pipermail/edk2-devel/2018-February/021437.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3604</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-15 18:02:33 +0000</bug_when>
    <thetext>Patch V2 for review

https://lists.01.org/pipermail/edk2-devel/2018-February/021482.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3643</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-28 16:10:32 +0000</bug_when>
    <thetext>Commits

https://github.com/tianocore/edk2/commit/b7c7ec8c178d4a6de7ee8d75be2cc505a72b56f6
https://github.com/tianocore/edk2/commit/7777360637d590d694cb805c5edfb930ff7379d0
https://github.com/tianocore/edk2/commit/90f7f19ae7929af5662497af3318ed5c8bd96351</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>257</bug_id>
          
          <creation_ts>2016-11-28 01:48:27 +0000</creation_ts>
          <short_desc>[BaseTools/VolInfo] The output information of VolInfo tool is incorrect on Linux</short_desc>
          <delta_ts>2016-12-04 20:57:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1031</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-11-28 01:48:27 +0000</bug_when>
    <thetext>When passing a .Fv file as input to the VolInfo tool, the output information for section &quot;EFI_SECTION_USER_INTERFACE&quot; is not correct:

============================================================
File Name:        D6A2CB7F-6A18-4E2F-B43B-9920A733700A  
File Offset:      0x00000098
File Length:      0x0001E5FE
File Attributes:  0x00
File State:       0xF8
        EFI_FILE_DATA_VALID
File Type:        0x05  EFI_FV_FILETYPE_DXE_CORE
------------------------------------------------------------
  Type:  EFI_SECTION_PE32
  Size:  0x0001E5C4
------------------------------------------------------------
  Type:  EFI_SECTION_USER_INTERFACE
  Size:  0x00000014
  String: ------------------------------------------------------------
  Type:  EFI_SECTION_VERSION
  Size:  0x0000000E
  Build Number:  0x00
  Version Strg:  1
============================================================

The &quot;String:&quot; field information is missing in the above output.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1087</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-11-30 20:09:51 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1088</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-11-30 20:11:05 +0000</bug_when>
    <thetext>re-assign to Hao</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1113</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-12-04 20:57:23 +0000</bug_when>
    <thetext>Resolved via commit 3883e2cb52fa1582165d6558c67649835d0eada3.

https://github.com/tianocore/edk2/commit/3883e2cb52fa1582165d6558c67649835d0eada3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>641</bug_id>
          
          <creation_ts>2017-07-19 10:34:47 +0000</creation_ts>
          <short_desc>[BaseTools] Remove /Gw option from VS2013 &amp; VS2015 tool chain NOOPT target</short_desc>
          <delta_ts>2017-08-28 21:40:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2463</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-07-19 10:34:47 +0000</bug_when>
    <thetext>/Gw option is for size optimization. NOOPT is designed to disable size opt. So, /Gw option should be removed from VS tool chain. Because it is added since VS2013, it will be removed from VS2013 &amp; VS2015 tool chain NOOPT target. After this change, the package that supports NOOPT must be verified.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2465</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-19 21:03:57 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2652</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-08-28 21:40:26 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/02739b0f41300da70369be7c1982180306e8ca95</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>292</bug_id>
          
          <creation_ts>2016-12-12 14:54:13 +0000</creation_ts>
          <short_desc>Can not run GenDepex.py from python sources</short_desc>
          <delta_ts>2016-12-19 20:17:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1158</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-12-12 14:54:13 +0000</bug_when>
    <thetext>The WindowsLike and PosixLike bin wrappers for GenDepex.py do not use correct path.  GenDepex.py is not in a GenDepex directory.  Instead, it is in the AutoGen directory.

For example, the WindowsLike should be changed from:

@%PYTHON_HOME%\python.exe %BASE_TOOLS_PATH%\Source\Python\%ToolName%\%ToolName%.py %*

To: 

@%PYTHON_HOME%\python.exe %BASE_TOOLS_PATH%\Source\Python\AutoGen\%ToolName%.py %*</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1161</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-12-14 20:09:49 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1185</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-19 20:17:40 +0000</bug_when>
    <thetext>push the fix in SHA-1: 83c6c3bfe293cd0a5983375dfbf46d4f364b38aa</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>764</bug_id>
          
          <creation_ts>2017-11-07 22:44:28 +0000</creation_ts>
          <short_desc>memory leak on VfrUtilityLib.cpp</short_desc>
          <delta_ts>2018-03-27 09:02:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Justin">justin_wu</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2989</commentid>
    <comment_count>0</comment_count>
    <who name="Justin">justin_wu</who>
    <bug_when>2017-11-07 22:44:28 +0000</bug_when>
    <thetext>here are multiple &quot;new-delete&quot; with string operation in VfrUtilityLib.cpp.
and then delete is uncompleted, it will cause memory leaked.

for example:
mStringFileName = new CHAR8[FileLen];
.....
delete mStringFileName;

the correct write is:
mStringFileName = new CHAR8[FileLen];
.....
delete [] mStringFileName;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3003</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-11-08 20:05:57 +0000</bug_when>
    <thetext>assign to Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3773</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-03-27 09:02:24 +0000</bug_when>
    <thetext>fix it on edk2 trunk:f7e98581021b2dd29824f1de03c523b9c1ec617a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>675</bug_id>
          
          <creation_ts>2017-08-16 21:20:55 +0000</creation_ts>
          <short_desc>Bus Master Enable bit should not be set on P2P bridges by default.</short_desc>
          <delta_ts>2019-05-22 23:04:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2612</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2017-08-16 21:20:55 +0000</bug_when>
    <thetext>Bus master enable bit should not be set on P2P bridges by default.  It also is &quot;bad practice&quot; to test for the capability by setting it on (even if only for a small period of time).  

BME should only be enabled once a device driver requests it by setting attributes.  

Please see the proposed implementation here. 
https://github.com/microsoft/ms_uefi/tree/share/DynamicBmeEnable

This implementation has been tests to work on numerous &quot;client&quot; class devices using Intel silicon.  There is a possibility if device drivers (like gop, nic, etc) don&apos;t request the BME attribute that they will no longer work but this would be an error on the device driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2613</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-17 05:25:42 +0000</bug_when>
    <thetext>Please add a note / reminder to this BZ when the patch set is posted to edk2-devel for review. I think we should regression test the changes with OvmfPkg and ArmVirtPkg on QEMU. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2616</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-17 20:04:01 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2794</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-28 00:55:49 +0000</bug_when>
    <thetext>pushed @ 5db417ed2522367290c365831f9d6628d31c346c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7755</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-05-22 23:04:09 +0000</bug_when>
    <thetext>5db417ed2522367290c365831f9d6628d31c346c is to prevent DMA attacks when IO MMU is not enabled. But it caused Win OS resume failure, so that patch was reverted in commit a8035b908655afd59321173752b29970ae61601b.

On an environment with IO MMU enabled, such DMA attacks can be prevented by IO MMU.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>875</bug_id>
          
          <creation_ts>2018-02-12 14:54:43 +0000</creation_ts>
          <short_desc>NetworkPkg/HttpDxe: let the platform control the TLS (HTTPS) cipher suites</short_desc>
          <delta_ts>2018-03-28 07:51:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3574</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-02-12 14:54:43 +0000</bug_when>
    <thetext>NetworkPkg/HttpDxe currently takes the trusted CA certs (for the purpose of peer (server) verification in HTTPS connections) from a UEFI variable. Another aspect of HTTPS connections that platforms might reasonably want to control is the cipher suite list, which is currently not exposed as controllable to the platform by HttpDxe. This feature request is about such a knob.

On-list discussion:

[edk2] setting the TLS cipher list for HTTPS booting
https://lists.01.org/pipermail/edk2-devel/2018-January/020242.html
https://lists.01.org/pipermail/edk2-devel/2018-February/020944.html

The consensus seems that another UEFI variable is an appropriate means for the TLS (HTTPS) cert list, in EFI_TLS_CIPHER format. The variable need not be non-volatile; the platform may choose to make it volatile and/or boot time only.

Patch sets from Jiaxin:

[edk2] [Patch 0/2] NetworkPkg: Support the platform to configure TLS
                   CipherList.
https://lists.01.org/pipermail/edk2-devel/2018-February/021264.html

[edk2] [PATCH v2 0/2] NetworkPkg: Support the platform to configure HTTPS
                      CipherList.
https://lists.01.org/pipermail/edk2-devel/2018-February/021344.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3575</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-02-12 14:58:43 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #0)

&gt; The consensus seems that another UEFI variable is an appropriate means for
&gt; the TLS (HTTPS) cert list,

sorry, typo: replace &quot;cert list&quot; with &quot;cipher list&quot; in the above.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3620</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-22 19:07:38 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3783</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-28 07:51:01 +0000</bug_when>
    <thetext>This has been fixed in the following patches:

e34914db193f NetworkPkg: Define one private variable for HTTPS to set Tls
             CipherList.
7ff68b5edc9f NetworkPkg: Read HttpTlsCipherList variable and configure it for
             HTTPS session.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>606</bug_id>
          
          <creation_ts>2017-06-21 17:33:20 +0000</creation_ts>
          <short_desc>DEBUG print in AllocatePage causes lock ASSERT</short_desc>
          <delta_ts>2018-12-11 02:39:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1114</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2307</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-06-21 17:33:20 +0000</bug_when>
    <thetext>Recursive memory error caused by AllocatePage.  Any AllocatePool can cause an AllocatePage.  There is an AllocatePool in the DEBUG() path.  The default is to print some of these error messages.  No DEBUG messages inside the locked region should have the debug flags set other than DEBUG_PAGE|POOOL. (this was exacerbated by the special pool implementation of calling allocatepage for every allocatepool).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314</commentid>
    <comment_count>1</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-06-21 21:27:03 +0000</bug_when>
    <thetext>(In reply to Michael Turner from comment #0)
&gt; Recursive memory error caused by AllocatePage.  Any AllocatePool can cause
&gt; an AllocatePage.  There is an AllocatePool in the DEBUG() path.  The default
&gt; is to print some of these error messages.  No DEBUG messages inside the
&gt; locked region should have the debug flags set other than DEBUG_PAGE|POOOL.
&gt; (this was exacerbated by the special pool implementation of calling
&gt; allocatepage for every allocatepool).

Michael,
Could you help show the detailed code flow for the case?

Thanks,
Star</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2323</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-06-22 14:59:29 +0000</bug_when>
    <thetext>Here is the call stack of the failure.  In this case, Special Pool is converting the AllocatePool in ReportStatusCodeEx to an AllocatePages.  I assert this is legal in that any AllocatePool, when a pool is exhausted, can be converted to an AllocatePages. This stack trace repeats until a stack fault occurs.

2e2 00000000`8a29cb30 00000000`8a2b3838 DxeCore!DebugAssert+0xa [m:\mssurfacemodulepkg\library\dxedebuglibserialreportstatuscode\debuglib.c @ 320] 
2e3 00000000`8a29cb60 00000000`8a2aa108 DxeCore!CoreAcquireLock+0x54 [m:\udk\mdemodulepkg\core\dxe\library\library.c @ 73] 
2e4 (Inline Function) --------`-------- DxeCore!CoreAcquireMemoryLock+0xc [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 109] 
2e5 00000000`8a29cb90 00000000`8a2a915e DxeCore!CoreInternalAllocatePages+0xb8 [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 1287] 
2e6 00000000`8a29cbe0 00000000`8a2c0b79 DxeCore!CoreAllocatePages+0x22 [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 1339] 
2e7 00000000`8a29cc20 00000000`8a2b6658 DxeCore!SpecialPool_AllocatePool+0x99 [m:\mssurfacemodulepkg\library\efispecialpoollib\specialpoollib.c @ 76] 
2e8 00000000`8a29cc60 00000000`8a2b6c00 DxeCore!ReportStatusCodeEx+0x108 [m:\udk\mdemodulepkg\library\dxereportstatuscodelib\reportstatuscodelib.c @ 517] 
2e9 00000000`8a29cf10 00000000`8a2b6812 DxeCore!ReportStatusDebugAssert+0xdc [m:\mssurfacemodulepkg\library\dxedebuglibserialreportstatuscode\reportstatusdebuglib.c @ 301] 
2ea 00000000`8a29d050 00000000`8a2b3838 DxeCore!DebugAssert+0xa [m:\mssurfacemodulepkg\library\dxedebuglibserialreportstatuscode\debuglib.c @ 320] 
2eb 00000000`8a29d080 00000000`8a2aa108 DxeCore!CoreAcquireLock+0x54 [m:\udk\mdemodulepkg\core\dxe\library\library.c @ 73] 
2ec (Inline Function) --------`-------- DxeCore!CoreAcquireMemoryLock+0xc [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 109] 
2ed 00000000`8a29d0b0 00000000`8a2a915e DxeCore!CoreInternalAllocatePages+0xb8 [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 1287] 
2ee 00000000`8a29d100 00000000`8a2c0b79 DxeCore!CoreAllocatePages+0x22 [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 1339] 
2ef 00000000`8a29d140 00000000`8a2b6658 DxeCore!SpecialPool_AllocatePool+0x99 [m:\mssurfacemodulepkg\library\efispecialpoollib\specialpoollib.c @ 76] 
2f0 00000000`8a29d180 00000000`8a2b6c00 DxeCore!ReportStatusCodeEx+0x108 [m:\udk\mdemodulepkg\library\dxereportstatuscodelib\reportstatuscodelib.c @ 517] 
2f1 00000000`8a29d430 00000000`8a2b6812 DxeCore!ReportStatusDebugAssert+0xdc [m:\mssurfacemodulepkg\library\dxedebuglibserialreportstatuscode\reportstatusdebuglib.c @ 301] 
2f2 00000000`8a29d570 00000000`8a2b3838 DxeCore!DebugAssert+0xa [m:\mssurfacemodulepkg\library\dxedebuglibserialreportstatuscode\debuglib.c @ 320] 
2f3 00000000`8a29d5a0 00000000`8a2aa108 DxeCore!CoreAcquireLock+0x54 [m:\udk\mdemodulepkg\core\dxe\library\library.c @ 73] 
2f4 (Inline Function) --------`-------- DxeCore!CoreAcquireMemoryLock+0xc [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 109] 
2f5 00000000`8a29d5d0 00000000`8a2a915e DxeCore!CoreInternalAllocatePages+0xb8 [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 1287] 
2f6 00000000`8a29d620 00000000`8a2c0b79 DxeCore!CoreAllocatePages+0x22 [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 1339] 
2f7 00000000`8a29d660 00000000`8a2b6658 DxeCore!SpecialPool_AllocatePool+0x99 [m:\mssurfacemodulepkg\library\efispecialpoollib\specialpoollib.c @ 76] 
2f8 00000000`8a29d6a0 00000000`8a2b6df4 DxeCore!ReportStatusCodeEx+0x108 [m:\udk\mdemodulepkg\library\dxereportstatuscodelib\reportstatuscodelib.c @ 517] 
2f9 00000000`8a29d950 00000000`8a2b690f DxeCore!ReportStatusDebugPrint+0x1c4 [m:\mssurfacemodulepkg\library\dxedebuglibserialreportstatuscode\reportstatusdebuglib.c @ 212] 
2fa 00000000`8a29da90 00000000`8a2a9731 DxeCore!DebugPrint+0x5f [m:\mssurfacemodulepkg\library\dxedebuglibserialreportstatuscode\debuglib.c @ 171] 
2fb 00000000`8a29dac0 00000000`8a2aa151 DxeCore!CoreConvertPagesEx+0x4e9 [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 754] 
2fc (Inline Function) --------`-------- DxeCore!CoreConvertPages+0x1c [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 937] 
2fd 00000000`8a29db20 00000000`8a2a915e DxeCore!CoreInternalAllocatePages+0x101 [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 1298] 
2fe 00000000`8a29db70 00000000`8a2ac0da DxeCore!CoreAllocatePages+0x22 [m:\udk\mdemodulepkg\core\dxe\mem\page.c @ 1339] 
2ff 00000000`8a29dbb0 00000000`8a2abd30 DxeCore!CoreLoadPeImage+0x24a [m:\udk\mdemodulepkg\core\dxe\image\image.c @ 564] 
300 00000000`8a29dd20 00000000`8a2ab8f0 DxeCore!CoreLoadImageCommon+0x3d8 [m:\udk\mdemodulepkg\core\dxe\image\image.c @ 1293] 
301 00000000`8a29ddd0 00000000`8a2a41db DxeCore!CoreLoadImage+0x7c [m:\udk\mdemodulepkg\core\dxe\image\image.c @ 1473] 
302 00000000`8a29de40 00000000`8a2a062e DxeCore!CoreDispatcher+0x143 [m:\udk\mdemodulepkg\core\dxe\dispatcher\dispatcher.c @ 464] 
303 00000000`8a29de90 00000000`8a29f7f0 DxeCore!DxeMain+0x856 [m:\udk\mdemodulepkg\core\dxe\dxemain\dxemain.c @ 478] 
304 00000000`8a29df90 00000000`8a5f52d4 DxeCore!_ModuleEntryPoint+0x10 [m:\udk\mdepkg\library\dxecoreentrypoint\dxecoreentrypoint.c @ 59]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2324</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-22 20:05:46 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4903</commentid>
    <comment_count>4</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-09-10 21:50:00 +0000</bug_when>
    <thetext>We could not reproduce the recursive issues described in the BZs as our core AllocatePool has lock code below(https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Core/Dxe/Mem/Pool.c#L248) in CoreInternalAllocatePool() that can avoid AllocatePool reentrancy.
  //
  // Acquire the memory lock and make the allocation
  //
  Status = CoreAcquireLockOrFail (&amp;gMemoryLock);
  if (EFI_ERROR (Status)) {
    return EFI_OUT_OF_RESOURCES;
  }

The root cause of BZ606 is there is no lock to avoid reentrancy in SpecialPool_AllocatePool(https://github.com/Microsoft/MS_UEFI/blob/share/EFI_Special_Pool/MdeModulePkg/Library/EfiSpecialPoolLib/SpecialPoolLib.c#L74), then the ASSERT_EFI_ERROR at https://github.com/Microsoft/MS_UEFI/blob/share/EFI_Special_Pool/MdeModulePkg/Library/EfiSpecialPoolLib/SpecialPoolLib.c#L99 will trigger lock ASSERT in AllocatePages, then recursive will happen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5823</commentid>
    <comment_count>5</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-12-11 02:39:52 +0000</bug_when>
    <thetext>Close it, reopen if needed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>517</bug_id>
          
          <creation_ts>2017-05-02 02:39:28 +0000</creation_ts>
          <short_desc>Build spec: chapter 5.2.2 Guided Tools add description for Pkcs7Sign tool and BrotliCompress tool</short_desc>
          <delta_ts>2017-05-31 01:26:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1970</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-02 02:39:28 +0000</bug_when>
    <thetext>Current our EDK II build system also support BrotliCompress tool and  Pkcs7Sign tool , so we should add the description for this tool in the chapter 5.2.2 Guided Tools .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1991</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-05 03:56:57 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2186</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-27 00:04:42 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2211</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-31 01:26:45 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-BuildSpecification/commit/5bfbf31eff5ed57ace2b5d42aebc5c3c89d3196a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>800</bug_id>
          
          <creation_ts>2017-11-30 00:19:20 +0000</creation_ts>
          <short_desc>Add BmpSupportLib</short_desc>
          <delta_ts>2018-02-11 19:30:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3147</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-11-30 00:19:20 +0000</bug_when>
    <thetext>Add BmpSupportLib 
https://github.com/Microsoft/MS_UEFI/blob/share/MsCapsuleSupport/MdeModulePkg/Include/Library/BmpSupportLib.h

and implementation
https://github.com/Microsoft/MS_UEFI/tree/share/MsCapsuleSupport/MsCapsuleUpdatePkg/Library/BaseBmpSupportLib

and consumer
https://github.com/tianocore/edk2/tree/master/MdeModulePkg/Library/DxeCapsuleLibFmp</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3162</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-30 19:43:35 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3171</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-12-01 01:16:30 +0000</bug_when>
    <thetext>A similar request in http://bugzilla.tianocore.org/show_bug.cgi?id=175. (Need add a library to convert BMP file data to GOP BLT buffer.)

BmpSupportLib contains the API:
RETURN_STATUS
EFIAPI
TranslateBmpToGopBlt(
  IN     VOID      *BmpImage,
  IN     UINTN     BmpImageSize,
  IN OUT VOID      **GopBlt,
  IN OUT UINTN     *GopBltSize,
  OUT UINTN     *PixelHeight,
  OUT UINTN     *PixelWidth
);

How about we add the below API to HiiLib?

EFI_STATUS
EFIAPI
HiiBitmapToBlt (
  IN  VOID                          *Bitmap,
  IN  UINTN                         BitmapSize,
  OUT EFI_GRAPHICS_OUTPUT_BLT_PIXEL *Blt,
  IN OUT UINTN                      *BltBufferSize,
  OUT UINT16                        *Width, OPTIONAL
  OUT UINT16                        *Height OPTIONAL
  );

The difference is not only the API name and location.
But also:
1. Blt is allocated by caller. Callee returns BUFFER_TOO_SMALL and updates the BltBufferSize.
2. Width and Height is the type of UINT16. EFI_IMAGE_INPUT also defines Width and Height as UINT16.

Previously this API was not added to HiiLib because we have questions whether capsule needs to support non-BMP format such as PNG/JPEG. If the question is answered, the direction of how to add an image conversion API should become clear soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3291</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-12-28 21:32:59 +0000</bug_when>
    <thetext>TranslateBmpToGopBlt() supports both caller allocated and callee 
allocated GopBlt buffer.

There are use cases form BMP to GOP BLT that are not related to HII.
The use of BMP images in capsules as part of a capsule update is
one example.

We also perform a GOP BLT to BMP conversion in MdeModulePkg/Universal/Acpi/BootGraphicsResourceTableDxe to publish a
an ACPI BGRT table with a BMP image format.  This is also not related
to HII.

I prefer we add the new BmpSupportLib and add one additional API
to perform the GOP BLT to BMP image format.  I also think that
the GopBlt parameter should be type EFI_GRAPHICS_OUTPUT_BLT_PIXEL**
instead of VOID **.

RETURN_STATUS
EFIAPI
TranslateBmpToGopBlt (
  IN     VOID                           *BmpImage,
  IN     UINTN                          BmpImageSize,
  IN OUT EFI_GRAPHICS_OUTPUT_BLT_PIXEL  **GopBlt,
  IN OUT UINTN                          *GopBltSize,
  OUT    UINTN                          *PixelHeight,
  OUT    UINTN                          *PixelWidth
  );

RETURN_STATUS
EFIAPI
TranslateGopBltToBmp (
  IN     EFI_GRAPHICS_OUTPUT_BLT_PIXEL  *GopBlt,
  IN     UINTN                          GopBltSize,
  IN OUT EFI_GRAPHICS_OUTPUT_BLT_PIXEL  **BmpImage,
  IN OUT UINTN                          *BmpImageSize,
  OUT    UINTN                          *PixelHeight,
  OUT    UINTN                          *PixelWidth
  );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3293</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-12-29 13:54:36 +0000</bug_when>
    <thetext>Unlike a BMP image, a GopBlt buffer needs to have the 
width and height provided, so the new API to convert a
GopBlt buffer to a BMP image should be:

RETURN_STATUS
EFIAPI
TranslateGopBltToBmp (
  IN     EFI_GRAPHICS_OUTPUT_BLT_PIXEL  *GopBlt,
  IN     UINT32                         PixelHeight,
  IN     UINT32                         PixelWidth,
  IN OUT VOID                           **BmpImage,
  IN OUT UINT32                         *BmpImageSize
  );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3301</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-02 00:47:18 +0000</bug_when>
    <thetext>Mike,
When converting the GOP Blt to Bitmap, sometimes palette can be used to save the final bitmap size. (refer https://docs.microsoft.com/en-us/dotnet/framework/winforms/advanced/types-of-bitmaps)
Do you agree that we can always use 24bit format (do not use palette) for simple implementation?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3319</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-01-02 12:04:48 +0000</bug_when>
    <thetext>According to the ACPI specification, the ACPI BGRT table only supports
either a 24-bit or 32-bit BMP image format.  The 24-bit format take up
less space, so I recommend just using 24-bit BMP image format.

If there is a a use case for ACPI BGRT to produce the 32-bit version
then we can add a parameter to specify the requested BMP image
format.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3546</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-07 22:17:01 +0000</bug_when>
    <thetext>Patch review email

https://lists.01.org/pipermail/edk2-devel/2018-February/021163.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3567</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-11 19:30:53 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/4123d6da70950a8d81191f743da8e78214203a8b

to

https://github.com/tianocore/edk2/commit/48ed4769fcfb524315d60ff745973ea3c8525ff5



Github comparison view:

https://github.com/tianocore/edk2/compare/54024039f83cebdb7cfb28075e987e9f4bc9796b...48ed4769fcfb524315d60ff745973ea3c8525ff5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>348</bug_id>
          
          <creation_ts>2017-01-18 21:00:14 +0000</creation_ts>
          <short_desc>Enhance BaseTools supports FixedAtBuild usage in VFR file</short_desc>
          <delta_ts>2018-06-22 01:36:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>linkhip</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1340</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-01-18 21:00:14 +0000</bug_when>
    <thetext>All edk2 source files (.nasm, .asl, .c) can use PCD except for VFR file. 
VfrCompiler tool compiles VFR source file to the binary data. It requires PCD value at the precompile phase. So, Fixed PCD (FixedPcdGetXX() API) can be supported. 

The proposal is to update BaseTools generate Fixed PCD APIs and Value into $(MODULE_NAME)StrDefs.h for VFR only. If the module has VFR files, and it directly consumes FixedAtBuild PCD, BaseTool will generate those FixedAtBuild PCD value into its $(MODULE_NAME)StrDefs.h. FixedPcdGetXX macro are always generated. Every FixedPcd _PCD_VALUE_PcdName will be generated without the postfix U or UL or ULL. 

For example: DriverSampleStrDefs.h

#ifdef VFRCOMPILE
#define gDriverSampleInventoryGuid { 0x09576E91, 0x6D3F, 0x11D2, { 0x8E, 0x39, 0x00, 0xA0, 0xC9, 0x69, 0x72, 0x3B }}
…
#define FixedPcdGetBool(TokenName)          _PCD_VALUE_##TokenName
#define FixedPcdGet8(TokenName)             _PCD_VALUE_##TokenName
#define FixedPcdGet16(TokenName)            _PCD_VALUE_##TokenName
#define FixedPcdGet32(TokenName)            _PCD_VALUE_##TokenName
#define FixedPcdGet64(TokenName)            _PCD_VALUE_##TokenName
#define _PCD_VALUE_PcdPlatformBootTimeOut  0x10
#endif</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1341</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-01-18 21:00:50 +0000</bug_when>
    <thetext>Assign it to tool owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1404</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-02-08 21:02:43 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1432</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-13 20:06:29 +0000</bug_when>
    <thetext>fix it SHA-1: 5b97eb4c35316cbe8235ae526209263da818e1a4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4121</commentid>
    <comment_count>4</comment_count>
    <who name="BrandonLai">linkhip</who>
    <bug_when>2018-06-13 04:21:41 +0000</bug_when>
    <thetext>How about the FeaturePcd type PCD?
Is it possible to support FeaturePcd in VFR as well?

The following my expression in VFR and DEC.

DEC files:
[PcdsFeatureFlag]
gGuidFoo.PcdFoo


VFR files:
....
#if FixedPcdGetBool(PcdFoo)
...

Thanks
Brandon</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4122</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-06-13 05:21:24 +0000</bug_when>
    <thetext>Your case works. Have you verified it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4142</commentid>
    <comment_count>6</comment_count>
    <who name="BrandonLai">linkhip</who>
    <bug_when>2018-06-14 22:07:26 +0000</bug_when>
    <thetext>Hi Liming Gao,

I have verified it but the FeaturePcd of AutoGen-declaration as following sample is not generated.

#ifdef VFRCOMPILE
#define _PCD_VALUE_PcdFoo TRUE
#endif

My Build.exe version is 
   - Version 0.60 build 26355

Thanks
Brandon</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4154</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-06-18 10:15:37 +0000</bug_when>
    <thetext>Thanks for your verification. So, FeaturePcd value is missing. We will fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4199</commentid>
    <comment_count>8</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-22 01:36:07 +0000</bug_when>
    <thetext>Add Feature Flag PCD support.
SHA-1: 58cf30f71f03bcf2fbf369d51e05c8f17176e129</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>624</bug_id>
          
          <creation_ts>2017-07-08 15:20:38 +0000</creation_ts>
          <short_desc>memory protection crash in PiSmmCpuDxeSmm, Ia32 build with RAM above 4GB</short_desc>
          <delta_ts>2017-08-28 05:27:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>star.zeng</cc>
    
    <cc>vanjeff_919</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2409</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-07-08 15:20:38 +0000</bug_when>
    <thetext>Please see the report and Jiewen&apos;s analysis on the mailing list:

- msgid &lt;f9557a73-4d7f-beff-35fd-bb5b7b71c6a0@redhat.com&gt;
  https://lists.01.org/pipermail/edk2-devel/2017-July/012283.html

- msgid &lt;74D8A39837DF1E4DA445A8C0B3885C503A97870B@shsmsx102.ccr.corp.intel.com&gt;
  https://lists.01.org/pipermail/edk2-devel/2017-July/012284.html

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2410</commentid>
    <comment_count>1</comment_count>
      <attachid>84</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-07-08 15:23:45 +0000</bug_when>
    <thetext>Created attachment 84
IA32 OVMF log leading up to the crash

For some unfathomable reason, the OVMF log that I attached to the my report, sent to the mailing list, was never forwarded to the list (and is unavailable from the list archive as well). So, I&apos;m attaching the same log to this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2435</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-13 20:08:43 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2649</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-08-28 05:27:57 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/714c2603018a99a514c42c2b511c821f30ba9cdf and https://github.com/tianocore/edk2/commit/51ce27fd8c583845480858eda503f38e8b42d619.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>84</attachid>
            <date>2017-07-08 15:23:45 +0000</date>
            <delta_ts>2017-07-08 15:23:45 +0000</delta_ts>
            <desc>IA32 OVMF log leading up to the crash</desc>
            <filename>ovmf.log</filename>
            <type>text/x-log</type>
            <size>111499</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>293</bug_id>
          
          <creation_ts>2016-12-14 03:34:00 +0000</creation_ts>
          <short_desc>FmpTokens are optional in spec while basetool think it is necessary.</short_desc>
          <delta_ts>2017-01-06 03:12:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1159</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2016-12-14 03:34:00 +0000</bug_when>
    <thetext>In spec. four parts are optional. FDF_Spec_1_27_Review_Draft, page 89.

&lt;FmpTokens&gt; ::= [&lt;TS&gt; &quot;IMAGE_HEADER_INIT_VERSION&quot; &lt;Eq&gt; &lt;Hex2&gt; &lt;EOL&gt;]
[&lt;TS&gt; &quot;IMAGE_TYPE_ID&quot; &lt;Eq&gt; &lt;RegistryFormatGUID&gt; &lt;EOL&gt;]
[&lt;TS&gt; &quot;IMAGE_INDEX&quot; &lt;Eq&gt; &lt;Hex2&gt; &lt;EOL&gt;]
[&lt;TS&gt; &quot;HARDWARE_INSTANCE&quot; &lt;Eq&gt; &lt;Hex2&gt; &lt;EOL&gt;]

But tools raise issue when missing IMAGE_HEADER_INIT_VERSION 

error 3000: Invalid syntax/format
        Missing keywords IMAGE_HEADER_INIT_VERSION in FMP payload section. near line 898, column 29: 0x0

So current code not match spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1162</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-12-14 20:10:34 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1262</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-06 03:12:24 +0000</bug_when>
    <thetext>Push the fix: SHA-1: 9ce9bf5339f8a5a9acfd77d9fbc70bb92a55dd6a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>209</bug_id>
          
          <creation_ts>2016-11-03 05:33:41 +0000</creation_ts>
          <short_desc>Build should break when same Guid is defined in [Guids] and [Guids.common.Private] section</short_desc>
          <delta_ts>2016-11-22 22:20:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>832</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-03 05:33:41 +0000</bug_when>
    <thetext>we add the private API support in dec file for [Ppis], [Guids], [Protocols], [Includes], etc. 
when user define the same guid both in [Guids] section and [Guids.common.Private], build tool should break with reasonable error message. current tool&apos;s behavior is treat this guid as Private.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>861</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-09 20:08:28 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1000</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-22 22:20:38 +0000</bug_when>
    <thetext>fix it SHA-1: 24e7435ab474f8a2da43a086d63add4954a3034f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>403</bug_id>
          
          <creation_ts>2017-02-23 09:59:11 +0000</creation_ts>
          <short_desc>X64 build of EmulatorPkg crashes</short_desc>
          <delta_ts>2020-04-08 04:28:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2639</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeff Westfahl">jeff.westfahl</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>chasontang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>ray.ni</cc>
    
    <cc>stevoarnold</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1509</commentid>
    <comment_count>0</comment_count>
      <attachid>41</attachid>
    <who name="Jeff Westfahl">jeff.westfahl</who>
    <bug_when>2017-02-23 09:59:11 +0000</bug_when>
    <thetext>Created attachment 41
gdb output of EmulatorPkg X64 crash

My GCC5 X64 DEBUG build of EmulatorPkg crashes. IA32 build works just fine. I have attached the gdb output.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4510</commentid>
    <comment_count>1</comment_count>
    <who name="Steven Arnold">stevoarnold</who>
    <bug_when>2018-08-05 22:37:02 +0000</bug_when>
    <thetext>I see the same issue with UDK2018, UDK2017.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4512</commentid>
    <comment_count>2</comment_count>
      <attachid>200</attachid>
    <who name="Steven Arnold">stevoarnold</who>
    <bug_when>2018-08-06 22:23:26 +0000</bug_when>
    <thetext>Created attachment 200
Workaround patch

This issue is caused by a reference into the temporary stack in PPI services.
On IA32, the temporary stack is not cleared when it is copied to the 
permanent stack, and thus the problem is not seen.
This work-around, removes clearing of the temporary stack on X64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4513</commentid>
    <comment_count>3</comment_count>
      <attachid>201</attachid>
    <who name="Steven Arnold">stevoarnold</who>
    <bug_when>2018-08-06 22:32:57 +0000</bug_when>
    <thetext>Created attachment 201
Patch to fill empty temporary stack as expected by the dispatcher

Although not necessary to resolve the bug, it allows the dispatcher to correctly determine the used stack when switching stack (PeiCheckAndSwitchStack) on X64.

baseline -
Temp Stack : BaseAddress=0x40000000 Length=0x10000
Temp Heap  : BaseAddress=0x40010000 Length=0x10000
Total temporary memory:    131072 bytes.
  temporary memory stack ever used: 65532 bytes.
  temporary memory heap used:       5088 bytes.

with patch -
Temp Stack : BaseAddress=0x40000000 Length=0x10000
Temp Heap  : BaseAddress=0x40010000 Length=0x10000
Total temporary memory:    131072 bytes.
  temporary memory stack ever used: 15816 bytes.
  temporary memory heap used:       5088 bytes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6171</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-22 21:36:40 +0000</bug_when>
    <thetext>Hi Steven, could you help to send the patch to edk2-devel@lists.01.org for review ? thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6377</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-16 02:34:25 +0000</bug_when>
    <thetext>I met the similar issue running Emulator in Linux.
Have solution for it. so take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12139</commentid>
    <comment_count>6</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-08 04:28:40 +0000</bug_when>
    <thetext>Duplicate with https://bugzilla.tianocore.org/show_bug.cgi?id=2639, close it and track in BZ2639.

*** This bug has been marked as a duplicate of bug 2639 ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>41</attachid>
            <date>2017-02-23 09:59:11 +0000</date>
            <delta_ts>2017-02-23 09:59:11 +0000</delta_ts>
            <desc>gdb output of EmulatorPkg X64 crash</desc>
            <filename>EmulatorPkgX64Debug.txt</filename>
            <type>text/plain</type>
            <size>10468</size>
            <attacher name="Jeff Westfahl">jeff.westfahl</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>200</attachid>
            <date>2018-08-06 22:23:26 +0000</date>
            <delta_ts>2018-08-06 22:23:26 +0000</delta_ts>
            <desc>Workaround patch</desc>
            <filename>0001-EmulatorPkg-Sec-Retain-temporary-stack-on-X64.patch</filename>
            <type>text/plain</type>
            <size>1031</size>
            <attacher name="Steven Arnold">stevoarnold</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>201</attachid>
            <date>2018-08-06 22:32:57 +0000</date>
            <delta_ts>2018-08-06 22:32:57 +0000</delta_ts>
            <desc>Patch to fill empty temporary stack as expected by the dispatcher</desc>
            <filename>0001-EmulatorPkg-Unix-Fill-stack-correction-for-X64.patch</filename>
            <type>text/plain</type>
            <size>1451</size>
            <attacher name="Steven Arnold">stevoarnold</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>142</bug_id>
          
          <creation_ts>2016-10-07 12:04:27 +0000</creation_ts>
          <short_desc>Update EDK II FDF Specification to allow sections in any order</short_desc>
          <delta_ts>2017-04-17 14:04:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>141</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II FDF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>569</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-10-07 12:04:27 +0000</bug_when>
    <thetext>The EDK II FDF Specification currently requires section to be provided in a specific order and has a Note that the build might break if a different order is used.  This does not provide a good developer experience.

EDK II FDF Specification Section 3.2 currently states:

&lt;EDK_II_FDF&gt; ::= [&lt;Header&gt;]
 [&lt;Defines&gt;]
 &lt;FD&gt;*
 &lt;FV&gt;*
 &lt;Capsule&gt;*
 &lt;FmpPayload&gt;*
 &lt;VTF&gt;*
 &lt;Rules&gt;*
 &lt;OptionRom&gt;*
 &lt;UserExtensions&gt;*

Note: The sections must be listed in the above order within the FDF file. Changing the order may cause
the build to break.

The Note should be removed, and the EBNF should be updated to allow sections to appear in any order in the FDF file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>592</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-10-12 21:17:59 +0000</bug_when>
    <thetext>assign to Mike.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1839</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-17 14:04:20 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-FdfSpecification/commit/121892e03af65cda0bb6515884ced5b999ca9a89</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>420</bug_id>
          
          <creation_ts>2017-03-07 00:00:12 +0000</creation_ts>
          <short_desc>Update PcdSetSku() to allow Sku value is changed only once</short_desc>
          <delta_ts>2017-03-15 22:22:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1588</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-03-07 00:00:12 +0000</bug_when>
    <thetext>In current Pcd driver implementation, PCD SetSku() allows SkuValue be changed multiple times. In fact, after SkuValue is changed to the different values, PCD settings will not be kept for the different Sku. If users do some changes on SkuA, then change to SkuB and do another changes, last go back to SkuA, the original setting in SkuA may be lost. That means this model doesn&apos;t work. To avoid the confuse, I suggest to update current implementation to allow SkuValue is changed only once. This change has no impact, because there is no platform to set Sku more than once.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1589</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-03-07 00:00:43 +0000</bug_when>
    <thetext>Assign to Star to do it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1609</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-03-14 07:56:11 +0000</bug_when>
    <thetext>Current PI spec has no clear description about whether the
SkuId could be changed multiple times or not during one boot.

If the SkuId could be changed multiple times during one boot,
different modules may get inconsistent PCD values.
And DynamicHii PCD maps to UEFI variable, once one DynamicHii
PCD(UEFI variable) is set for one SkuId, then the PCD value
will be always from UEFI variable but not PCD database, even
the SkuId is set to other value.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1620</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-03-15 22:22:09 +0000</bug_when>
    <thetext>Fixed at 2db48a1ff4e97b084a65690ae8a8d162247e2269</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>518</bug_id>
          
          <creation_ts>2017-05-02 08:49:05 +0000</creation_ts>
          <short_desc>Build Spec: Update Precedence of PCD Values</short_desc>
          <delta_ts>2017-05-31 01:41:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1971</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-02 08:49:05 +0000</bug_when>
    <thetext>currently the DSC file&apos;s component INF &lt;Pcd*&gt; section has high priority than the FDF file, so we&apos;d like to update the build spec to clarify this behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1992</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-05 03:57:15 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2038</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-15 22:49:51 +0000</bug_when>
    <thetext>current in FDF the grammar describing automatic assignment has higher priority than the SET statements in FDF file. 
so we hope the spec can be updated as following:

precedence (high to low) to assign a value to a PCD:
Command-line, --pcd flags (left most has higher priority)
DSC file, Component INF &lt;Pcd*&gt; section statements
FDF file, grammar describing automatic assignment of PCD values
FDF file, SET statements within a section
FDF file, SET statement in the [Defines] section
DSC file, global [Pcd*] sections
INF file, PCD sections, Default Values
DEC file, PCD sections, Default Values</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2184</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-26 23:26:32 +0000</bug_when>
    <thetext>*** Bug 509 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2185</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-26 23:44:57 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2213</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-31 01:41:39 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-BuildSpecification/commit/651d135058074a258f405e7d176fdad070880e30</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>898</bug_id>
          
          <creation_ts>2018-03-15 08:59:03 +0000</creation_ts>
          <short_desc>BaseTools: • VOID* FixedAtBuild PCD used from lib and module with module scoped value different lengths than platform scoped value</short_desc>
          <delta_ts>2018-04-27 05:14:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3710</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-15 08:59:03 +0000</bug_when>
    <thetext>an issue when a FixedAtBuild VOID* PCD is used from a lib, but is set to a different sized value in a module INF scope &lt;PcdsFixedAtBuild&gt; section.
The sizes in the lib scope use #defines that are set to the platform scoped sizes.  But the sizes in the module scope are the module override sizes
Similarly, the extern global variables in the lib scope are UINT8 arrays with an array size set to the platform scoped size and it breaks the build if the module scoped size if different
I think the UINT8 array in lib scope should unsized []
And the lib scope should use a global variable to get the size of a VOID* PCD instead of a #define.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3744</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-03-21 21:13:56 +0000</bug_when>
    <thetext>bug scrub: 
           assign to Yonghong  
           Yanyan: have a check on test coverage</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3943</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-27 05:11:08 +0000</bug_when>
    <thetext>SHA-1: 1bfcf64f39ce33fd6529c91fad6e9fe50f1698b1
SHA-1: eca980c0c899d9c2c57327e8af03fabe1da5feef</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3944</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-27 05:11:33 +0000</bug_when>
    <thetext>fixed it by above two patches</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3946</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-27 05:14:12 +0000</bug_when>
    <thetext>one more patch SHA-1: 8b0e67821bd66af70433ee4bb858325f3033609a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>801</bug_id>
          
          <creation_ts>2017-11-30 00:21:54 +0000</creation_ts>
          <short_desc>Add DisplayUpdateProgressLib for capsule</short_desc>
          <delta_ts>2018-07-18 21:57:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3148</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-11-30 00:21:54 +0000</bug_when>
    <thetext>Add DisplayUpdateGressLib
https://github.com/Microsoft/MS_UEFI/blob/share/MsCapsuleSupport/MsCapsuleUpdatePkg/Include/Library/DisplayUpdateProgressLib.h

and implementation
https://github.com/Microsoft/MS_UEFI/tree/share/MsCapsuleSupport/MsCapsuleUpdatePkg/Library/DisplayUpdateProgressGraphicsLib
https://github.com/Microsoft/MS_UEFI/tree/share/MsCapsuleSupport/MsCapsuleUpdatePkg/Library/DisplayUpdateProgressTextLib

and consumer
https://github.com/tianocore/edk2/tree/master/MdeModulePkg/Library/DxeCapsuleLibFmp</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3161</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-30 19:43:16 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3170</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-12-01 00:41:15 +0000</bug_when>
    <thetext>1. The DisplayUpdateProgressLib proposed by Microsoft only contains one API:
  EFI_STATUS
  EFIAPI
  DisplayUpdateProgress(
    IN UINTN      Completion,
    IN UINT32     ColorVal
  );
   And there are two library instances: GFX and TXT.

2. While EDKII&apos;s BootLogoLib contains an API as below:
  EFI_STATUS
  EFIAPI
  BootLogoUpdateProgress (
    IN EFI_GRAPHICS_OUTPUT_BLT_PIXEL TitleForeground,
    IN EFI_GRAPHICS_OUTPUT_BLT_PIXEL TitleBackground,
    IN CHAR16                        *Title,
    IN EFI_GRAPHICS_OUTPUT_BLT_PIXEL ProgressColor,
    IN UINTN                         Progress,
    IN UINTN                         PreviousValue
  );


It seems the two APIs have the similar functionality.
I think there are two alternatives to remove the duplication:
A. Move BootLogoUpdateProgress() to the new library UiProgressBarLib, using a new name UiProgressBar().
   The API interface can meet MS&apos;s needs in GFX case.
   For MS&apos;s TXT case, we create a TXT instance of UiProgressBarLib. But the problem is how to map the EFI_GRAPHICS_OUTPUT_BLT_PIXEL to Attributes parameter used by TxtOut-&gt;SetAttributes().

B. Keep the BootLogoLib unchanged.
   For MS&apos;s TXT case, we create a TXT instance of BootLogoLib. TXT instance implements a NULL implementation for the two other APIs (BootLogoEnableLogo/BootLogoDisableLogo). But still, the problem is how to map the EFI_GRAPHICS_OUTPUT_BLT_PIXEL to Attributes parameter used by TxtOut-&gt;SetAttributes().

The other concern I have is: Is there a requirement that displaying a progress bar in both GFX screen and TXT console? Library design cannot gracefully meet it. (it can meet it by creating a combo instance that draws in the two screens simultaneously.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3780</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-03-28 01:52:17 +0000</bug_when>
    <thetext>The DisplayUpdateProgress() behavior is a bit different.

There is no text string displayed, and the progress bar 
is shown below the logo bitmap.  The size of the logo
is detected looking for active pixels in the logo bitmap.

I agree that the current BootLogoUpdateProgress() is not
related to the boot logo, so it does not look like it fits
in the BootLogoLib.  

However, I do not see value in changing it right now,
so I recommend we leave BootLogoLib alone for now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3827</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-04-04 17:34:49 +0000</bug_when>
    <thetext>Patch email for review

https://lists.01.org/pipermail/edk2-devel/2018-April/023464.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4016</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-05-28 14:37:44 +0000</bug_when>
    <thetext>Patch email V2 for review

https://lists.01.org/pipermail/edk2-devel/2018-April/023681.html

Updates for V2
==============
* Change DisplayUpdateProgressGraphicsLib to DisplayUpdateProgressLibGraphics
* Change DisplayUpdateProgressTextLib to DisplayUpdateProgressLibText
* Clarify that color in Firmware Management Progress Protocol is the foreground color
* Add missing parameters to PerformFlashWriteWithProgress() function header.
* Update PerformFlashWriteWithProgress() function header describing the use of
  the start and end percentage values.
* Update QuarkPlatformPkg PerformFlashWriteWithProgress() to call Progress() for
  the end precentage.
* Update Vlv2Tbl2DevicePkg PerformFlashWriteWithProgress() to call Progress()
  for the end precentage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4017</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-05-28 14:41:15 +0000</bug_when>
    <thetext>Patch email V2 for review for edk2-platforms

https://lists.01.org/pipermail/edk2-devel/2018-April/023703.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4020</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-05-28 14:45:38 +0000</bug_when>
    <thetext>Patch email V3 for review

https://lists.01.org/pipermail/edk2-devel/2018-May/025142.html

Updates for V3
==============
* Add Version field to EDKII_FIRMWARE_MANAGEMENT_PROGRESS_PROTOCOL
* Break up patch series into 4 smaller patch series to handle dependencies
  between the edk2 repository and the edk2-platforms repository.
  + Patch series for edk2 repo that adds DisplayUpdateProgressLib class and 
    instances.  Defines the EDKII_FIRMWARE_MANAGEMENT_PROGRESS_PROTOCOL.
    Adds PerformFlashWriteWithProgress() API to the PlatformFlashAccessLib.
  + Patch series for platforms in edk2-platforms that use capsules to add the
    DisplayUpdateProgressLib mapping to the DSC files and add the
    PerformFlashWriteWithProgress() API implementation to the
    PlatformFlashAccessLib implementations.
  + Patch series for platforms in edk2 that use capsules to add the
    DisplayUpdateProgressLib mapping to the DSC files and add the
    PerformFlashWriteWithProgress() API implementation to the
    PlatformFlashAccessLib implementations.
  + Patch for edk2 that adds the use of the DisplayUpateProgressLib and the 
    PerformFlashWriteWithProgress() API .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4021</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-05-28 14:47:36 +0000</bug_when>
    <thetext>Patch email V3 for review

https://lists.01.org/pipermail/edk2-devel/2018-May/025138.html

Updates for V3
==============
* Add Version field to EDKII_FIRMWARE_MANAGEMENT_PROGRESS_PROTOCOL
* Break up patch series into 4 smaller patch series to handle dependencies
  between the edk2 repository and the edk2-platforms repository.
  + Patch series for edk2 repo that adds DisplayUpdateProgressLib class and 
    instances.  Defines the EDKII_FIRMWARE_MANAGEMENT_PROGRESS_PROTOCOL.
    Adds PerformFlashWriteWithProgress() API to the PlatformFlashAccessLib.
  + Patch series for platforms in edk2-platforms that use capsules to add the
    DisplayUpdateProgressLib mapping to the DSC files and add the
    PerformFlashWriteWithProgress() API implementation to the
    PlatformFlashAccessLib implementations.
  + Patch series for platforms in edk2 that use capsules to add the
    DisplayUpdateProgressLib mapping to the DSC files and add the
    PerformFlashWriteWithProgress() API implementation to the
    PlatformFlashAccessLib implementations.
  + Patch for edk2 that adds the use of the DisplayUpateProgressLib and the 
    PerformFlashWriteWithProgress() API .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4022</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-05-28 14:48:36 +0000</bug_when>
    <thetext>Patch email V3 for review for edk2-platforms

https://lists.01.org/pipermail/edk2-devel/2018-May/025147.html

Updates for V3
==============
* Add Version field to EDKII_FIRMWARE_MANAGEMENT_PROGRESS_PROTOCOL
* Break up patch series into 4 smaller patch series to handle dependencies
  between the edk2 repository and the edk2-platforms repository.
  + Patch series for edk2 repo that adds DisplayUpdateProgressLib class and 
    instances.  Defines the EDKII_FIRMWARE_MANAGEMENT_PROGRESS_PROTOCOL.
    Adds PerformFlashWriteWithProgress() API to the PlatformFlashAccessLib.
  + Patch series for platforms in edk2-platforms that use capsules to add the
    DisplayUpdateProgressLib mapping to the DSC files and add the
    PerformFlashWriteWithProgress() API implementation to the
    PlatformFlashAccessLib implementations.
  + Patch series for platforms in edk2 that use capsules to add the
    DisplayUpdateProgressLib mapping to the DSC files and add the
    PerformFlashWriteWithProgress() API implementation to the
    PlatformFlashAccessLib implementations.
  + Patch for edk2 that adds the use of the DisplayUpateProgressLib and the 
    PerformFlashWriteWithProgress() API .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4023</commentid>
    <comment_count>10</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-05-28 14:53:07 +0000</bug_when>
    <thetext>Commits for first patch series:

  + Patch series for edk2 repo that adds DisplayUpdateProgressLib class and 
    instances.  Defines the EDKII_FIRMWARE_MANAGEMENT_PROGRESS_PROTOCOL.
    Adds PerformFlashWriteWithProgress() API to the PlatformFlashAccessLib.

https://github.com/tianocore/edk2/commit/825d138f83f97910818228cd514d0aece01a3595
https://github.com/tianocore/edk2/commit/72b0a9bed93b68a2610fb30e86819399bdc9266c
https://github.com/tianocore/edk2/commit/550de36633fec97d4f7467c02a33b3217f440ae9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4024</commentid>
    <comment_count>11</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-05-28 16:01:37 +0000</bug_when>
    <thetext>Commits for 3rd patch series for Quark and VLV2

  + Patch series for platforms in edk2 that use capsules to add the
    DisplayUpdateProgressLib mapping to the DSC files and add the
    PerformFlashWriteWithProgress() API implementation to the
    PlatformFlashAccessLib implementations.

https://github.com/tianocore/edk2/commit/9d0447ac5b5df6448526dfda79c3896806d98b20
https://github.com/tianocore/edk2/commit/20eb921bfd38a2c1e5adc4fad34a4f775e05a189
https://github.com/tianocore/edk2/commit/5274d681fec09b112c35e5dcf6334e4b36053cbf
https://github.com/tianocore/edk2/commit/99758ffd1176aa082e1732045261dd05d08f2711</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4325</commentid>
    <comment_count>12</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-18 21:57:57 +0000</bug_when>
    <thetext>Commits for 4th patch series

  + Patch for edk2 that adds the use of the DisplayUpateProgressLib and the 
    PerformFlashWriteWithProgress() API .

https://github.com/tianocore/edk2/commit/eb5943134630292db2c14346b5d94eab0b72314f
https://github.com/tianocore/edk2/commit/574761065744238440d2baf426d2ccc5912db13a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>365</bug_id>
          
          <creation_ts>2017-02-04 01:31:15 +0000</creation_ts>
          <short_desc>Signed GUIDED section may not be dispatched</short_desc>
          <delta_ts>2017-02-15 03:13:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1387</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-02-04 01:31:15 +0000</bug_when>
    <thetext>When RSA2048 GUIDED section has SIGNED attribute only without PROCESSED_REQUIRED attribute, it will not be processed correctly once RSA2048 GUIDED extraction service is dispatcher later, because PeiCore cache GUIDED section with EFI_AUTH_STATUS_NOT_TESTED. This issue also exists in DxeCore and SmmCore.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1420</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-09 19:11:58 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1448</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-02-15 03:13:11 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/compare/8d127a5a3a23...b8654f4de38e fixes PeiCore dispatcher issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>933</bug_id>
          
          <creation_ts>2018-04-15 20:40:59 +0000</creation_ts>
          <short_desc>Use EfiBootServicesData for ESRT table</short_desc>
          <delta_ts>2018-04-25 03:54:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3880</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-04-15 20:40:59 +0000</bug_when>
    <thetext>We see UEFI spec is saying to use EfiBootServicesData for ESRT table.

UEFI 2.7 chapter 23.3:
The ESRT shall be stored in memory of type EfiBootServicesData.

But we see EsrtFmpDxe is using AllocateRuntimeZeroPool for ESRT table, but EsrtDxe is using AllocatePool for ESRT table.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3902</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-19 20:11:50 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3923</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-04-25 03:54:09 +0000</bug_when>
    <thetext>Fixed at 3545488dd64c4bf9e7549d020112342985931ab1.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>951</bug_id>
          
          <creation_ts>2018-05-10 21:37:55 +0000</creation_ts>
          <short_desc>BaseTools: build should report error when PCD type in component section is not same with Pcd section</short_desc>
          <delta_ts>2018-05-22 07:41:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3990</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-10 21:37:55 +0000</bug_when>
    <thetext>Per DSC spec 3.11 [Components] Sections:
The PCD access methods (and storage methods) are selected on a platform basis - it is not
permitted to have a PCD listed in one of the Pcd sections and use it differently in an
individual module. For example, if a PCD is listed in a [PcdsFixedAtBuild] section, it is not
permitted to list it in a &lt;PcdsPatchableInModule&gt; sub-section of an INF file.


but current code doesn&apos;t report error for this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3998</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-05-16 21:04:46 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4003</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-22 07:41:33 +0000</bug_when>
    <thetext>fixed it by SHA-1: 74f59e927520f50c4ebeeb2ccaa8e611b7d48dd1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>227</bug_id>
          
          <creation_ts>2016-11-14 01:08:30 +0000</creation_ts>
          <short_desc>GCC build failure when ASL code refers to the definition in C header file</short_desc>
          <delta_ts>2016-11-22 20:56:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>907</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-14 01:08:30 +0000</bug_when>
    <thetext>VS tool chain can pass build when ASL code refers to the definitions in C header file. And, VS tool chain can support ASL code to refer to FixedPcd. But, GCC tool chain are both failure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>908</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-14 01:38:18 +0000</bug_when>
    <thetext>Assign to module owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>909</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-14 04:11:46 +0000</bug_when>
    <thetext>Liming, when you fix this, can you please include a patch in your series to update the following file:

OvmfPkg/AcpiTables/Dsdt.asl

See

            IO (Decode16, 0x402, 0x402, 0x00, 0x01)        // QEMU debug console, should use FixedPcdGet16 (PcdDebugIoPort)

Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>999</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-22 20:56:17 +0000</bug_when>
    <thetext>Fix it in edk2
https://github.com/tianocore/edk2/commit/8ccd619c749c6dd6c99eb0c9808d0d1957d33748
https://github.com/tianocore/edk2/commit/86a1eca2101686d476ab191f0511b44e369fd8a7
https://github.com/tianocore/edk2/commit/ad13d7d2d4a1d329a60b414843a888c54bdbad73</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>143</bug_id>
          
          <creation_ts>2016-10-10 03:19:04 +0000</creation_ts>
          <short_desc>[BaseTools] Enhance PatchCheck.py to detect EFI_D_* macro usage</short_desc>
          <delta_ts>2016-11-14 02:31:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>574</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-10 03:19:04 +0000</bug_when>
    <thetext>In EDK2, DEBUG_* is recommended to be used instead of EFI_D_*. For new code, they should use DEBUG_* macro. So, request to enhance PatchCheck.py to detect EFI_D_* macro usage in patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>593</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-10-12 21:19:50 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>658</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 19:38:47 +0000</bug_when>
    <thetext>push the fix SHA-1: c3926cdbbd9c4c884b8f87089e877187ccc63eb2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>973</bug_id>
          
          <creation_ts>2018-06-05 20:06:09 +0000</creation_ts>
          <short_desc>Buffer Overflow in UsbBusDxe during UsbHubInit().</short_desc>
          <delta_ts>2019-03-21 04:42:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4057</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2018-06-05 20:06:09 +0000</bug_when>
    <thetext>UsbHubCtrlGetSuperSpeedHubDesc() in MdeModulePkg\Bus\Usb\UsbBusDxe\UsbHub.c receives a VOID* from UsbHubReadDesc() that points back to a EFI_USB_HUB_DESCRIPTOR local variable in UsbHubInit().

When UsbHubCtrlGetSuperSpeedHubDesc() calls UsbCtrlRequest(), it passes a fixed size of 32 bytes, even though the size of the EFI_USB_HUB_DESCRIPTOR structure is 23 bytes.

Recommend:
1) Change this size from &quot;32&quot; to &quot;sizeof(EFI_USB_HUB_DESCRIPTOR)&quot;.
2) Change the VOID* parameter to a EFI_USB_HUB_DESCRIPTOR* to ensure there are no mistakes about what should be passed in.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4083</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-07 20:07:59 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4213</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-06-27 00:44:57 +0000</bug_when>
    <thetext>Fixed at acebdf14c985c5c9f50b37ece0b15ada87767359 and 72750e3bf9174f15c17e78f0f117b5e7311bb49f.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6827</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-21 04:42:02 +0000</bug_when>
    <thetext>CVE Number applied: CVE-2019-0161</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>786</bug_id>
          
          <creation_ts>2017-11-16 16:32:27 +0000</creation_ts>
          <short_desc>Race condition causes build failure when compiling BaseTools</short_desc>
          <delta_ts>2017-12-07 02:29:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nathaniel L DeSimone">nathaniel.l.desimone</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3085</commentid>
    <comment_count>0</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2017-11-16 16:32:27 +0000</bug_when>
    <thetext>When running the BaseTools build with make -j &lt;n&gt;, where N &gt; 1, a race condition may occur where the lexer for the VfrCompiler does not finish being generated before the VfrCompiler is compiled:

VfrSyntax.cpp:53:1: error: expected class-name before &apos;{&apos; token  {^M  ^
VfrSyntax.cpp: In constructor &apos;CVfrDLGLexer::CVfrDLGLexer(DLGFileInput*)&apos;:
VfrSyntax.cpp:55:36: error: class &apos;CVfrDLGLexer&apos; does not have any field named &apos;VfrLexer&apos;
   CVfrDLGLexer (DLGFileInput *F) : VfrLexer (F) {};^M
                                    ^
It appears that the dependencies in the makefile are not set correctly. In addition, the unit tests for BaseTools will run before the code to be unit tested has finishing building:

======================================================================
FAIL: testHelp (TianoCompress.Tests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;/build/zoombini/tmp/portage/sys-boot/fsp-cnl-9999/work/fsp-cnl-9999/Edk2/BaseTools/Tests/TianoCompress.py&quot;,
line 34, in testHelp
    self.assertTrue(result == 0)
AssertionError: False is not true

======================================================================
FAIL: testRandomDataCycles (TianoCompress.Tests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;/build/zoombini/tmp/portage/sys-boot/fsp-cnl-9999/work/fsp-cnl-9999/Edk2/BaseTools/Tests/TianoCompress.py&quot;,
line 65, in testRandomDataCycles
    self.compressionTestCycle(data)
  File &quot;/build/zoombini/tmp/portage/sys-boot/fsp-cnl-9999/work/fsp-cnl-9999/Edk2/BaseTools/Tests/TianoCompress.py&quot;,
line 44, in compressionTestCycle
    self.assertTrue(result == 0)
AssertionError: False is not true</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3141</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-11-29 20:07:34 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3191</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-07 02:25:25 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/54cbe51db4894424f7939c84ada72dd0550cc617</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3195</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-07 02:29:33 +0000</bug_when>
    <thetext>Fix it in edk2 UDK2017 branch 54cbe51db4894424f7939c84ada72dd0550cc617</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>519</bug_id>
          
          <creation_ts>2017-05-02 08:51:02 +0000</creation_ts>
          <short_desc>DSC Spec: update Precedence of PCD Values</short_desc>
          <delta_ts>2017-05-31 14:35:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II DSC Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1972</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-02 08:51:02 +0000</bug_when>
    <thetext>currently the DSC file&apos;s component INF &lt;Pcd*&gt; section has high priority than the FDF file, so we&apos;d like to update the DSC spec to clarify this behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1993</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-05 03:57:35 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2192</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-27 15:35:30 +0000</bug_when>
    <thetext>Patch review sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2216</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-31 14:35:41 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-DscSpecification/commit/d108a2bb25f126522520fa0a28516630ce897356</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>899</bug_id>
          
          <creation_ts>2018-03-15 09:05:19 +0000</creation_ts>
          <short_desc>BaseTools: VOID* PatchableInModule PCD used from lib and module with module scoped value different lengths than platform scoped value</short_desc>
          <delta_ts>2018-04-27 05:12:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3711</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-15 09:05:19 +0000</bug_when>
    <thetext>A similar issue with 898, an issue when a Patchable VOID* PCD is used from a lib, but is set to a different sized value in a module INF scope &lt;PcdsPatchableInModule&gt; section</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3745</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-03-21 21:14:59 +0000</bug_when>
    <thetext>bug scrub:  assign to Yonghong
            Yanyan:  have a check on test coverage</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3945</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-27 05:12:13 +0000</bug_when>
    <thetext>fixed it by 
SHA-1: f7b31aa540435f43f5c60e7bde456c272b31f7ee

and 
SHA-1: c33081c912968da46fd6f0c7d2d2e52b7b410626</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>802</bug_id>
          
          <creation_ts>2017-11-30 00:23:05 +0000</creation_ts>
          <short_desc>Add a lightweight ESRT table report based upon FMP.</short_desc>
          <delta_ts>2018-02-11 18:44:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3149</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-11-30 00:23:05 +0000</bug_when>
    <thetext>code at
https://github.com/Microsoft/MS_UEFI/tree/share/MsCapsuleSupport/MsCapsuleUpdatePkg/Universal/EsrtDxe</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3160</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-30 19:42:55 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3543</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-07 22:14:01 +0000</bug_when>
    <thetext>Patch review email:

https://lists.01.org/pipermail/edk2-devel/2018-February/021163.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3545</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-07 22:16:12 +0000</bug_when>
    <thetext>Correct patch review email link:

https://lists.01.org/pipermail/edk2-devel/2018-February/021163.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3564</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-11 18:37:35 +0000</bug_when>
    <thetext>Original patch review email:
https://lists.01.org/pipermail/edk2-devel/2018-January/020517.html

V2 patch review email:
https://lists.01.org/pipermail/edk2-devel/2018-February/021155.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3565</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-11 18:44:17 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/4184aabda2e9fd95ef564d4e97ee65af945911d2
https://github.com/tianocore/edk2/commit/568556cf36ed9d5d68843135c984ab8af08b2622
https://github.com/tianocore/edk2/commit/54024039f83cebdb7cfb28075e987e9f4bc9796b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>350</bug_id>
          
          <creation_ts>2017-01-21 21:58:42 +0000</creation_ts>
          <short_desc>[FDF Spec] Extend the macro usage in the !include statement</short_desc>
          <delta_ts>2017-04-12 17:23:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=472</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          <cf_documents>EDK II FDF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1354</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-21 21:58:42 +0000</bug_when>
    <thetext>Current in the FDF spec chapter 2.2.5, it only allow the system environment
variables, $(WORKSPACE), $(EDK_SOURCE), $(EFI_SOURCE), or $(ECP_SOURCE) can be used in the !include statement.
Now we&apos;d like to extend the macros in the !include statement can use the Global macros (eg: the macros defined in the DSC [Defines] section) and the macro in the same section which had been defined before the !include statement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1405</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-02-08 21:05:44 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1798</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-12 12:46:04 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-FdfSpecification/commit/ed29afcaec7afc51e5c7a27fc65c9e983eccd0b3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>835</bug_id>
          
          <creation_ts>2018-01-02 09:08:02 +0000</creation_ts>
          <short_desc>BaseTools: loop initial declarations error when comiple BaseTools on GCC48/GCC49</short_desc>
          <delta_ts>2018-01-03 12:10:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3310</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-02 09:08:02 +0000</bug_when>
    <thetext>gcc  -c -MD -fshort-wchar -fno-strict-aliasing -Wall -Werror -Wno-deprecated-declarations -Wno-unused-result -nostdlib -c -g  -I .. -I ../Include/Common -I ../Include/ -I ../Include/IndustryStandard -I ../Common/ -I .. -I . -I ../Include/X64/  -O2 DevicePath.c -o DevicePath.o
DevicePath.c: In function 鈥榩rint_mem鈥�:
DevicePath.c:109:5: error: 鈥榝or鈥� loop initial declarations are only allowed in C99 mode
     for (size_t i=0; i&lt;n; i++) {
     ^
DevicePath.c:109:5: note: use option -std=c99 or -std=gnu99 to compile your code
make[2]: *** [DevicePath.o] Error 1
make[2]: Leaving directory `/home/ssduser/buildbot/slave/vmub1404x64-gcc48-Edk2/src/t/Edk2/BaseTools/Source/C/DevicePath&apos;
make[1]: *** [DevicePath] Error 2
make[1]: Leaving directory `/home/ssduser/buildbot/slave/vmub1404x64-gcc48-Edk2/src/t/Edk2/BaseTools/Source/C&apos;
make: *** [Source/C] Error 2
make: Leaving directory `/home/ssduser/buildbot/slave/vmub1404x64-gcc48-Edk2/src/t/Edk2/BaseTools&apos;
Result: Failed (2)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3315</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-02 09:13:06 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3320</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-01-02 13:29:47 +0000</bug_when>
    <thetext>I just submitted a patch (before seeing this BZ):

[edk2] [PATCH] BaseTools/DevicePath: fix GCC build error in print_mem(),
               and clean it up
https://lists.01.org/pipermail/edk2-devel/2018-January/019703.html

Yonghong, can you please review it? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3328</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-01-03 12:10:53 +0000</bug_when>
    <thetext>Fixed in commit 9a6b445bc2e6 (&quot;BaseTools/DevicePath: fix GCC build error in print_mem(), and clean it up&quot;, 2018-01-03).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>661</bug_id>
          
          <creation_ts>2017-08-02 23:41:45 +0000</creation_ts>
          <short_desc>[BaseTools] Collect DynamicHii PCD value as the default setting for EFI variable and HII EFI VarStore</short_desc>
          <delta_ts>2024-03-08 09:21:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>611</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2546</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-08-02 23:41:45 +0000</bug_when>
    <thetext>DynamicHii PCD setting are specified in DSC. They map to EFI variable. So, they can be used as EFI Variable/HII default setting. This requests EDKII implementation to support DynamicHii PCD setting be applied in EFI variable and HII EfiVarstore as the default setting.  Then, user can use platform DSC as the centralized setting to configure EFI variable and HII default setting. 

RFC link:
https://lists.01.org/pipermail/edk2-devel/2017-June/011826.html

This is for BaseTools to generate the default settings.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2577</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-09 21:04:27 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3282</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-28 02:53:07 +0000</bug_when>
    <thetext>edk2 c40dbe5e7bf9...7c7362651323</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>952</bug_id>
          
          <creation_ts>2018-05-11 12:36:10 +0000</creation_ts>
          <short_desc>Incorrect ComponentName protocol in SD modules</short_desc>
          <delta_ts>2018-07-01 20:54:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Baranee">anbazhagan</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3993</commentid>
    <comment_count>0</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2018-05-11 12:36:10 +0000</bug_when>
    <thetext>Current code uses ComponentName instead of ComponentName2 while adding model name string.


https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Bus/Sd/SdDxe/SdDxe.c#L376
https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Bus/Sd/EmmcDxe/EmmcDxe.c#L630</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4000</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-17 20:04:16 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4227</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-07-01 20:54:58 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/e25a76785e44061a1b5e29f3228febacf6f50932</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>144</bug_id>
          
          <creation_ts>2016-10-10 08:44:36 +0000</creation_ts>
          <short_desc>FDF produced OptionRom has issue with ordering of build arch listing</short_desc>
          <delta_ts>2017-04-19 06:00:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rusty Coleman">Jody.R.Coleman</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>575</commentid>
    <comment_count>0</comment_count>
    <who name="Rusty Coleman">Jody.R.Coleman</who>
    <bug_when>2016-10-10 08:44:36 +0000</bug_when>
    <thetext>I have noticed an issue when using an .fdf file to produce a combined IA32/X64 option rom of the same driver.  It seems that listing the IA32 driver first in the FDF causes the produced combined rom to be garbage.  However, simply reversing the order, listing X64 first, corrects this issue.

General outline to reproduce:

1) Create a package .dsc with libraries needed to build a single module (in this example, it will be called MyModuleDxe) in both IA32 and X64 build architectures.
2) Create MyModuleDxe as a UEFI_DRIVER type, include PCI_* listings in it&apos;s .inf file.  For simplicity, set PCI_COMPRESS = FALSE.
3) Create the .fdf with this section:
  [OptionRom.MyCombinedRom]
  INF USE = IA32 Path/To/MyModuleDxe.inf
  INF USE = X64  Path/To/MyModuleDxe.inf

The produced MyCombinedRom.rom will not be correct.  The size of this rom will be approximately the size of a single (IA32 or X64) .rom file.  Using &quot;loadpcirom&quot; on this file will not load any driver from the rom.

To correct, simply reverse the order of the listing:
  [OptionRom.MyCombinedRom]
  INF USE = X64  Path/To/MyModuleDxe.inf
  INF USE = IA32 Path/To/MyModuleDxe.inf

Now, the resulting file is the size of each (IA32 and X64) .rom file added together, the contents appears correct, and &quot;loadpcirom&quot; will install the driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>576</commentid>
    <comment_count>1</comment_count>
    <who name="Rusty Coleman">Jody.R.Coleman</who>
    <bug_when>2016-10-11 12:16:01 +0000</bug_when>
    <thetext>Some additional observations:

Even in the case where the ordering of the UEFI_DRIVER module corrected the obvious file size issue, it appears that the RomHeader (and the PE header) in the FDF is showing as 8664 (X64) instead of 014C (IA32) for the second image.  This is also occurring on a UEFI_APPLICATION that I am including in my option rom.

For example, my fdf could have this definition:

[OptionRom.MyComboRom]
INF USE = X64  Path/To/MyModuleDxe.efi #UEFI_DRIVER type
INF USE = IA32 Path/To/MyModuleDxe.efi
INF USE = X64  Path/To/MyApplication.efi { #UEFI_APPLICATION type
PCI_* listings here
}
INF USE = IA32 Path/To/MyApplication.efi

Looking at a hex edit of the resulting .rom file.  The machine type for each of these modules is reported as:
8664
8664
8664
8664

If I comment out both of the X64 instances above, the machine type of the two remaining entries will change to 014C as expected.

There seems to be something going on with the architecture specification for the GenFds tool.

Regards,
Rusty</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>577</commentid>
    <comment_count>2</comment_count>
    <who name="Rusty Coleman">Jody.R.Coleman</who>
    <bug_when>2016-10-11 12:20:54 +0000</bug_when>
    <thetext>I meant, Path/To/MyModuleDxe.inf (not .efi)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>578</commentid>
    <comment_count>3</comment_count>
    <who name="Rusty Coleman">Jody.R.Coleman</who>
    <bug_when>2016-10-11 12:53:10 +0000</bug_when>
    <thetext>Also, it appears that not only are the IA32 modules being marked as X64 in the .rom, it looks like the actual X64 version (contents) themselves are being included.  In other words:

INF USE = X64
INF USE = IA32

Looks like it results in two X64 modules, in both header markings and contents.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>586</commentid>
    <comment_count>4</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-10-12 21:05:33 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>607</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-17 00:45:16 +0000</bug_when>
    <thetext>This is a GenFds tool issue. It uses the same output for the same module with the different ARCH. IA32 and X64 module will have the same output.  The issue code is in edk2\BaseTools\Source\Python\GenFds\OptionRom.py line 74.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>608</commentid>
    <comment_count>6</comment_count>
      <attachid>14</attachid>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-17 00:46:15 +0000</bug_when>
    <thetext>Created attachment 14
Test Case</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>827</commentid>
    <comment_count>7</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-03 03:48:55 +0000</bug_when>
    <thetext>The fix is : SHA-1: 2a6402d490a2da818b7650ffe0330d3020e5b020</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>14</attachid>
            <date>2016-10-17 00:46:15 +0000</date>
            <delta_ts>2016-10-17 00:46:15 +0000</delta_ts>
            <desc>Test Case</desc>
            <filename>0001-Test-Case-to-generate-OptionRom.patch</filename>
            <type>text/plain</type>
            <size>1683</size>
            <attacher name="nobody">nobody</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>974</bug_id>
          
          <creation_ts>2018-06-05 23:29:28 +0000</creation_ts>
          <short_desc>BaseTools: BinToPcd: Enhance BinToPCD&apos;s help message about offset</short_desc>
          <delta_ts>2018-08-09 15:29:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sun Yanyan">yanyan.sun</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4059</commentid>
    <comment_count>0</comment_count>
    <who name="Sun Yanyan">yanyan.sun</who>
    <bug_when>2018-06-05 23:29:28 +0000</bug_when>
    <thetext>Enhance BinToPCD&apos;s help message about offset. Must point to offset must be 8 byte align about VPD VOID* PCD with {} style value.

Currently, help message&apos;s offset information is not fully.
-f OFFSET, --offset OFFSET VPD offset if --type is VPD. UEFI Variable offset if --type is HII.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4072</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-06-06 21:06:00 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4104</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-06-09 02:17:35 +0000</bug_when>
    <thetext>Patch for review

https://lists.01.org/pipermail/edk2-devel/2018-June/025747.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4555</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 15:29:55 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/8e965809998bfb674515e9d13d93a4fcec0f95c5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>422</bug_id>
          
          <creation_ts>2017-03-10 02:06:13 +0000</creation_ts>
          <short_desc>Network HII configuration failure</short_desc>
          <delta_ts>2017-03-16 23:32:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="jiaxinwu">jiaxin.wu</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1599</commentid>
    <comment_count>0</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-10 02:06:13 +0000</bug_when>
    <thetext>Network HII configuration failure under Network Device List. E.g. IP, VLAN, HTTP Boot configuration.

The issue is caused by the below commit:
https://github.com/tianocore/edk2/commit/96d3713578c61129b092c5a9a0f7714ad961fd49

Network interface type should be checked before the conversion between text device path node and MAC device path. Otherwise, the MAC text string can&apos;t be converted to the representation of a device node, which leads to the series failure of network HII configuration(e.g. IP, VLAN, HTTP Boot configuration in Network Device List).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1629</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-16 20:34:07 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1631</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-16 23:32:37 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/2d67f2bae32040c77af8097a8ef1be272cb00e28</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>520</bug_id>
          
          <creation_ts>2017-05-02 08:52:24 +0000</creation_ts>
          <short_desc>FDF spec: Update Precedence of PCD Values</short_desc>
          <delta_ts>2017-05-31 01:17:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II FDF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1973</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-02 08:52:24 +0000</bug_when>
    <thetext>currently the DSC file&apos;s component INF &lt;Pcd*&gt; section has high priority than the FDF file, so we&apos;d like to update the FDF spec to clarify this behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1994</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-05 03:57:52 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2191</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-27 14:15:05 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2210</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-31 01:17:12 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-FdfSpecification/commit/c5fbdb3b2d5e5648c9b945fd49752236b1aefab3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>900</bug_id>
          
          <creation_ts>2018-03-15 09:08:47 +0000</creation_ts>
          <short_desc>BaseTools: Support !include for PCD statements in module scoped &lt;Pcd…&gt; sections</short_desc>
          <delta_ts>2018-05-01 21:53:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3712</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-15 09:08:47 +0000</bug_when>
    <thetext>I would like to use a !include for a PCD in a &lt;Pcds…&gt; section, it break build.

TestPkg/Testdriver.inf {
&lt;PcdsFixedAtBuild&gt;  
   !include Test.inc
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3741</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-03-21 21:05:32 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3888</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-19 03:58:48 +0000</bug_when>
    <thetext>fixed it in SHA-1: 3378782691af1158560579444a23bdd2f0a7d154</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3958</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-01 21:53:34 +0000</bug_when>
    <thetext>need apply one more patch SHA-1: a802b269061cf83c17b74dc166cf21efe25f938f

because it cause bug 941</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>803</bug_id>
          
          <creation_ts>2017-11-30 00:24:46 +0000</creation_ts>
          <short_desc>Add CapsuleUpdatePolicyLib</short_desc>
          <delta_ts>2018-04-04 13:21:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>922</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3150</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-11-30 00:24:46 +0000</bug_when>
    <thetext>Add CapsuleUpdatePolicyLib  https://github.com/Microsoft/MS_UEFI/blob/share/MsCapsuleSupport/MsCapsuleUpdatePkg/Include/Library/CapsuleUpdatePolicyLib.h

and consumer
https://github.com/tianocore/edk2/tree/master/MdeModulePkg/Library/DxeCapsuleLibFmp</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3159</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-30 19:38:35 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3239</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-12-14 22:47:38 +0000</bug_when>
    <thetext>Discussed with Intel internal, we also think to add a postcheck hook for the the capsule update.

We can define a protocol to include both precheck and postcheck.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3820</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-04-04 13:20:06 +0000</bug_when>
    <thetext>The CapsuleUpdatePolicyLib will be part of the FmpDevicePkg and will be used by the FmpDxe module in the FmpDevicePkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3821</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-04-04 13:21:34 +0000</bug_when>
    <thetext>Mark as duplicate since this library will be part of proposed FmpDevicePkg.

*** This bug has been marked as a duplicate of bug 922 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>351</bug_id>
          
          <creation_ts>2017-01-21 22:03:19 +0000</creation_ts>
          <short_desc>[DSC Spec] Extend macro usage in the !include statement</short_desc>
          <delta_ts>2017-04-17 14:10:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=472</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          <cf_documents>EDK II DSC Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1355</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-21 22:03:19 +0000</bug_when>
    <thetext>Current in the DSC spec chapter 2.2.5, it only allow the system environment
variables, $(WORKSPACE), $(EDK_SOURCE), $(EFI_SOURCE), or $(ECP_SOURCE) can be used in the !include statement.
Now we&apos;d like to extend the macros in the !include statement can use the Global macros (eg: the macros defined in the DSC [Defines] section) and the macro in the same section which had been defined before the !include statement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1406</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-02-08 21:06:09 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1840</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-17 14:10:49 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-DscSpecification/commit/763ddf919c058db4f1b0ee31fa3b4e39480fb79f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>195</bug_id>
          
          <creation_ts>2016-10-31 02:25:13 +0000</creation_ts>
          <short_desc>UefiCpuPkg and PeiCpuExceptionHandlerLib doesn’t use nasm source file</short_desc>
          <delta_ts>2016-11-03 01:38:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>798</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2016-10-31 02:25:13 +0000</bug_when>
    <thetext>...
Building ... /home/pcd/Desktop/AllPackagesDev/UefiCpuPkg/Library/MtrrLib/MtrrLib.inf [IA32]
make: Nothing to be done for &apos;tbuild&apos;.
...
build.py...
 : error 7000: Failed to execute command
	make tbuild 

build.py...
 : error F002: Failed to build module
	/home/pcd/Desktop/AllPackagesDev/UefiCpuPkg/Library/CpuExceptionHandlerLib/PeiCpuExceptionHandlerLib.inf [IA32, GCC44, DEBUG]

- Failed -
Build end time: 20:12:20, Oct.28 2016
Build total time: 00:00:19</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>799</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-31 02:42:26 +0000</bug_when>
    <thetext>Change to Confirmed status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>824</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-03 01:38:33 +0000</bug_when>
    <thetext>Fixed at b782753fa24229d3b677c6fd5ad5594028d14a8b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>836</bug_id>
          
          <creation_ts>2018-01-02 09:09:39 +0000</creation_ts>
          <short_desc>BaseTools: compiler error  on VS2010</short_desc>
          <delta_ts>2018-01-03 20:12:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3311</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-02 09:09:39 +0000</bug_when>
    <thetext>CommonLib.c
CommonLib.c(904) : error C2220: warning treated as error - no &apos;object&apos; file generated
CommonLib.c(904) : warning C4307: &apos;+&apos; : integral constant overflow
CommonLib.c(904) : warning C4307: &apos;+&apos; : integral constant overflow
CommonLib.c(1018) : warning C4307: &apos;+&apos; : integral constant overflow
CommonLib.c(1018) : warning C4307: &apos;+&apos; : integral constant overflow
CommonLib.c(1137) : warning C4307: &apos;+&apos; : integral constant overflow
CommonLib.c(1137) : warning C4307: &apos;+&apos; : integral constant overflow
CommonLib.c(1213) : warning C4307: &apos;+&apos; : integral constant overflow
CommonLib.c(1213) : warning C4307: &apos;+&apos; : integral constant overflow
NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\cl.exe&quot;&apos; : return code &apos;0x2&apos;
Stop.
Error while making Common!
NMAKE : fatal error U1077: &apos;Makefiles\NmakeSubdirs.bat&apos; : return code &apos;0x4&apos;
Stop.
Error while making S:\bld\BaseTools\Source\C!
NMAKE : fatal error U1077: &apos;S:\bld\BaseTools\Source\C\Makefiles\NmakeSubdirs.bat&apos; : return code &apos;0x4&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3313</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-02 09:12:14 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3330</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-03 20:12:05 +0000</bug_when>
    <thetext>pushed the fix: SHA-1: e4fb8f1d313858bd5e415725e65e65679f2b05a0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>662</bug_id>
          
          <creation_ts>2017-08-04 21:40:29 +0000</creation_ts>
          <short_desc>Installing compressed FVs/nested FVs before Tcg2Pei runs will cause unnecessary hashing, extending, and logging leading to slower boot</short_desc>
          <delta_ts>2017-11-05 21:41:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="chao">chao.b.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2564</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2017-08-04 21:40:29 +0000</bug_when>
    <thetext>If a platform installs FVs that are nested within other firmware volumes in PEI before the Tcg2Pei driver runs the FVs will be hashed twice.  This is because in measure main bios the code walks the installed FVs using GetNext.  This method doesn&apos;t have access to the FV info and doesn&apos;t have the parent pointer (for nested fvs).  

If the nested FV is published after Tcg2Pei the FvInfo Ppi will be used and the parent point will be present and Tcg2Pei will not hash it a second time.  

A safe fi should be to only hash FvInstance[0] using the GetNext services and then use the FvInfo Ppi callback for all others since that is how all FVs must be exposed to PEI except the initial boot FV</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2585</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-10 20:09:43 +0000</bug_when>
    <thetext>bug scrub: it is PEI core issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2788</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-09-26 04:15:49 +0000</bug_when>
    <thetext>Transfer to Chao who already has the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2974</commentid>
    <comment_count>3</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2017-11-05 21:41:56 +0000</bug_when>
    <thetext>Fixed within TPM performance enhancement logic. 
SHA-1: d7c054f98591389f8e4dd46d2172949dbec2777c


Here are all the information of white box test. The test matrix covered different algorithms combinations for Pre-hash data &amp; Hash required for TPM. 
All the results were expected.
     Image Pre-hash Setting	PcdTPMHashMask	     Test Result
               NONE	            SHA256	                     CPU calculates hash. No Pre-Hash can be found in Tcg2 Event Log
               SHA1	            SHA256                           CPU calculates hash. No Pre-Hash can be found in Tcg2 Event Log
         SHA1+SHA256	            SHA256	                     Specific SHA256 produced by Pre-Hash found in TCG2 Event Log
         SHA1+SHA256	            SHA1+SHA256                      Specific SHA1+SHA256 produced by Pre-Hash found in TCG2 Event Log
               SHA256               SHA1+SHA256	                     CPU calculates Hash. No Pre-Hash can be found in Tcg2 Event Log
    SHA1+SHA256+SHA384	            SHA1+SHA256	                     Specific SHA1+SHA256 produced by Pre-Hash found in TCG2 Event Log</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>36</bug_id>
          
          <creation_ts>2016-07-20 19:30:30 +0000</creation_ts>
          <short_desc>RVDS 4.0 Don&apos;t support --protect_stack option</short_desc>
          <delta_ts>2022-03-01 21:54:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>ray.ni</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>60</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 19:30:30 +0000</bug_when>
    <thetext>Can&apos;t build on Windows + RVDS4.0.

change by this [cb60328] commit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>61</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 19:31:29 +0000</bug_when>
    <thetext>niruiyu added a commit that referenced this issue on Apr 24
 @niruiyu	MdeModulePkg/DxeCore: Avoid assertion in CoreLocateProtocol
The patch uses CoreAcquireLockOrFail() instead of
CoreAcquireProtocolLock() in CoreLocateProtocol() to avoid
assertion when CoreLocateProtocol() is called with the
protocol database locked.

The issue was found when changing PcdDebugPrintErrorLevel to
enable page/pool allocation debug message.
Nt32 platform hangs immediately after DxeCore is loaded.
Investigation shows the following calling stacks:

DxeCore entry point (Install a certain protocol)
0 DxeCore::CoreInstallProtocolInterface  // Protocol DB is locked
1 DxeCore::AllocatePool
2 PeiDxeDebugLibReportStatusCode::DebugPrint
3 DxeReportStatusCodeLib::ReportStatusCodeEx // &lt;-------------------|
4 DxeReportStatusCodeLib::InternalGetReportStatusCode               |
5 DxeCore::LocateProtocol(StatusCodeRuntimeProtocol)                |
                     // Assertion when locking Protocol DB 2nd time |
6 DxeCore::CoreAcquireProtocolLock                                  |
7 PeiDxeDebugLibReportStatusCode::DebugAssert                       |
8 DxeReportStatusCodeLib::ReportSatusCodeEx  // loop begins ---------

In frame #6 the assertion is triggered due to the protocol database
is already locked. #8 calls #4 and the loop begins.
After changing #6 to CoreAcquireLockOrFail(), the assertion is
avoided and the loop is broken.

With the fix, NT32 can boot to Shell even setting
PcdDebugPrintErrorLevel to 0xFFFFFFFF, with all error levels turned
on.

Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>389</commentid>
    <comment_count>2</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-07-28 20:26:00 +0000</bug_when>
    <thetext>Bug Scrub: Need more investigation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>531</commentid>
    <comment_count>3</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-09-28 21:11:39 +0000</bug_when>
    <thetext>Chris: sync with submitter to double check package field</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>629</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-19 03:57:44 +0000</bug_when>
    <thetext>Mike, what&apos;s RVDS4.0?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>632</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-19 04:16:14 +0000</bug_when>
    <thetext>The [cb60328] commit is
* BaseTools: Added support for GCC stack protector for ARM architecture

Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Olivier Martin &lt;olivier.martin@arm.com&gt;
Reviewed-by: Yingke Liu &lt;yingke.d.liu@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>640</commentid>
    <comment_count>6</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-10-19 21:06:12 +0000</bug_when>
    <thetext>investigate firstly</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>652</commentid>
    <comment_count>7</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 00:13:17 +0000</bug_when>
    <thetext>Assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5493</commentid>
    <comment_count>8</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:40:27 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18490</commentid>
    <comment_count>9</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 21:54:55 +0000</bug_when>
    <thetext>There is no support for RVDS.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>317</bug_id>
          
          <creation_ts>2016-12-29 05:13:24 +0000</creation_ts>
          <short_desc>error C0DE/3000: Unknown fatal error when define syntax in DEC file</short_desc>
          <delta_ts>2017-04-01 01:36:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1226</commentid>
    <comment_count>0</comment_count>
      <attachid>31</attachid>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2016-12-29 05:13:24 +0000</bug_when>
    <thetext>Created attachment 31
Logs

As title, 

Below syntax fail to build out.

&quot;~&quot;,&quot;/&quot;,&quot;*&quot;,“%“,”&lt;&lt;”,&quot;&gt;&gt;&quot;,

BadExpression: No more valid token found from rest of string: [~0x1].

BadExpression: Syntax error, the rest of expression cannot be evaluated: [*0x2].

BadExpression: Syntax error, the rest of expression cannot be evaluated: [%0x2].

BadExpression: Unsupported operator: [&lt;&lt;]

BadExpression: Unsupported operator: [&gt;&gt;]

BadExpression: Syntax error, the rest of expression cannot be evaluated: [?0x1:0x0].

Two type of error
a&gt;
(1283): error 3000: Invalid value [&quot;0x4/0x2&quot;] of type [UINT8]; must be a hexadecimal, decimal or octal in C language format.
	gDenlowPlatformTokenSpaceGuid.PcdExpressionTest006|0x4/0x2|UINT8|0x00000006

b&gt;
build...
 : error C0DE: Unknown fatal error when processing [c:\users\tiano\desktop\purefile\allpackagesdev\MdeModulePkg\MdeModulePkg.dec]
	
(Please send email to edk2-devel@lists.01.org for help, attaching following call stack trace!)

(Python 2.7.3 on win32) Traceback (most recent call last):
  File &quot;build\build.py&quot;, line 2276, in Main
  File &quot;build\build.py&quot;, line 2028, in Launch
  File &quot;build\build.py&quot;, line 1823, in _MultiThreadBuildPlatform</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1246</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-01-04 20:04:58 +0000</bug_when>
    <thetext>bug scrub: assign to yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1722</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-01 01:36:03 +0000</bug_when>
    <thetext>push the fix SHA-1: 5e06f1a00b5c325d3ced69ccfe4d307ad63975cf</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>31</attachid>
            <date>2016-12-29 05:13:24 +0000</date>
            <delta_ts>2016-12-29 05:13:24 +0000</delta_ts>
            <desc>Logs</desc>
            <filename>log.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>10453</size>
            <attacher name="Rocky">rocky.ni</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>879</bug_id>
          
          <creation_ts>2018-02-23 01:03:28 +0000</creation_ts>
          <short_desc>Support for HttpMethodDelete</short_desc>
          <delta_ts>2018-03-02 02:01:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3621</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2018-02-23 01:03:28 +0000</bug_when>
    <thetext>Hello All,

As we don&apos;t have support HTTP DELETE method 

we can see only GET, HEAD, PATCH, PUT and POST method only support in current implementation
NetworkPkg/HttpDxe/HttpImpl.c

EFI_STATUS
EFIAPI
EfiHttpRequest (
  IN  EFI_HTTP_PROTOCOL         *This,
  IN  EFI_HTTP_TOKEN            *Token
  )
{
EFI_HTTP_MESSAGE *HttpMsg;
.
.
.
//
  // Only support GET, HEAD, PATCH, PUT and POST method in current implementation.
  //
  if ((Request != NULL) &amp;&amp; (Request-&gt;Method != HttpMethodGet) &amp;&amp;
      (Request-&gt;Method != HttpMethodHead) &amp;&amp; (Request-&gt;Method != HttpMethodPut) &amp;&amp; 
      (Request-&gt;Method != HttpMethodPost) &amp;&amp; (Request-&gt;Method != HttpMethodPatch)) {
    return EFI_UNSUPPORTED;
}
.
.
.
}

Could you please add HTTP DELETE method support to HttpDxe.

Thanks,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3646</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-01 19:04:29 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3648</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-03-02 02:01:49 +0000</bug_when>
    <thetext>Commit version:

https://github.com/tianocore/edk2/commit/79f84eb676982fd35e6089060f247c5e38d691dd</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>423</bug_id>
          
          <creation_ts>2017-03-10 03:41:09 +0000</creation_ts>
          <short_desc>Pkcs7Sign, Rsa2048Sha256Sign and Rsa2048Sha256GenerateKeys doesn&apos;t work in Linux OS</short_desc>
          <delta_ts>2017-03-29 04:47:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>xuemin.yuan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1600</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-03-10 03:41:09 +0000</bug_when>
    <thetext>These three python scripts call openssl with below command. But, it doesn&apos;t work on Linux. It needs to be changed with shell=True. 

Process = subprocess.Popen(&apos;%s version&apos; % (OpenSslCommand), stdout=subprocess.PIPE, stderr=subprocess.PIPE)

==&gt; 
Process = subprocess.Popen(&apos;%s version&apos; % (OpenSslCommand), stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1601</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-03-10 03:42:01 +0000</bug_when>
    <thetext>Assign it to tool owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1642</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-18 04:40:38 +0000</bug_when>
    <thetext>push the fix SHA-1: 8a0933f436b2014de5402a8c8b4d164a612b9a15</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1692</commentid>
    <comment_count>3</comment_count>
    <who name="xueminyu">xuemin.yuan</who>
    <bug_when>2017-03-27 03:45:56 +0000</bug_when>
    <thetext>There still can not find the openssl path while building Denlow image in Linux with latest code base.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1698</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-29 04:47:52 +0000</bug_when>
    <thetext>pushed the new fix: SHA-1: a5f26fefca2edb7f3b2772966b79351b7edbcc3f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>611</bug_id>
          
          <creation_ts>2017-06-23 08:12:03 +0000</creation_ts>
          <short_desc>Collect DynamicHii PCD value as the default setting for EFI variable and HII EFI VarStore</short_desc>
          <delta_ts>2024-03-08 09:22:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>542</dependson>
    
    <dependson>661</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2334</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-06-23 08:12:03 +0000</bug_when>
    <thetext>DynamicHii PCD setting are specified in DSC. They map to EFI variable. So, they can be used as EFI Variable/HII default setting. This requests EDKII implementation to support DynamicHii PCD setting be applied in EFI variable and HII EfiVarstore as the default setting.  Then, user can use platform DSC as the centralized setting to configure EFI variable and HII default setting. 

RFC link:
https://lists.01.org/pipermail/edk2-devel/2017-June/011826.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2367</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-28 21:05:43 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2545</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-08-02 23:40:21 +0000</bug_when>
    <thetext>The code change will be in Pcd and HiiDataBase driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3267</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-26 04:24:35 +0000</bug_when>
    <thetext>edk2 trunk c40dbe5e7bf9...7c7362651323</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3269</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-26 04:25:52 +0000</bug_when>
    <thetext>Add this support in edk2 trunk</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22759</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2024-03-08 09:21:57 +0000</bug_when>
    <thetext>Update Link</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>521</bug_id>
          
          <creation_ts>2017-05-02 08:54:50 +0000</creation_ts>
          <short_desc>DSC spec: add clarification for mixed PCD usage in the DSC spec</short_desc>
          <delta_ts>2017-05-31 01:45:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II DSC Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1974</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-02 08:54:50 +0000</bug_when>
    <thetext>currently in the DSC spec still mention that A PCD can only use one type for all modules, while we support the mixed PCD feature, so we&apos;d like to add the clarification for this feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1995</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-05 03:58:08 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2193</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-27 16:03:20 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2214</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-31 01:45:45 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-DscSpecification/commit/38fec5077f9a35ddea18e8eadaa6ac62c5e00f5f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>901</bug_id>
          
          <creation_ts>2018-03-15 09:11:18 +0000</creation_ts>
          <short_desc>BaseTools: PCD Default Type should use module scoped &lt;Pcd…&gt; if PCD is not listed in any platform scope [Pcd…] section</short_desc>
          <delta_ts>2019-07-25 22:15:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>zhijux.fan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3713</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-15 09:11:18 +0000</bug_when>
    <thetext>if the only reference to a PCD is in a module scope &lt;PcdsPatchableinModule&gt; section, the library autogen assumes FixedAtBuild.  I had to add the PCDs to a [PcdsPatchableInModule] section in the DSC to force the lib to assume PatchableInModule.  I think we need to update the rules for selecting the default PCD type.    If a PCD is not referenced in global PCD section of DSC file at all, but is referenced in module scope, then the default PCD type for libs should be the module scoped PCD type.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3742</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-03-21 21:09:46 +0000</bug_when>
    <thetext>bug scrub : assign to Yonghong
 Yonghong: update spec to add the rule
 Yanyan:  add corresponding case after spec ready</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3771</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-27 03:39:21 +0000</bug_when>
    <thetext>Library PCD type will inherit from the driver if PCD is not specified in Common PCD section. If the different driver uses the same PCD type, it can work. If the different driver uses the different PCD type, such as FixedAtBuild and Patchable, build tool should report error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4004</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-22 07:42:00 +0000</bug_when>
    <thetext>fix it by SHA-1: 5a444dfd7c0039b33f0c26e1294297fb7e358f60</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>352</bug_id>
          
          <creation_ts>2017-01-21 22:16:06 +0000</creation_ts>
          <short_desc>[BaseTools] Extend the macro usage in the FDF !inlcude statement</short_desc>
          <delta_ts>2017-02-10 01:57:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>brandon.huber</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1356</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-21 22:16:06 +0000</bug_when>
    <thetext>Current it only allow the system environment
variables, $(WORKSPACE), $(EDK_SOURCE), $(EFI_SOURCE), or $(ECP_SOURCE) can be used in the !include statement for FDF file.

While DSC parse doesn&apos;t have such limitation. so we&apos;d like to remove the FDF parse&apos;s limitation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1407</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-02-08 21:06:49 +0000</bug_when>
    <thetext>assign to yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1427</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-10 01:57:57 +0000</bug_when>
    <thetext>fix it in SHA-1: 0fdfe2742e4a76f586b16f370193b2d97f0ed04a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>821</bug_id>
          
          <creation_ts>2017-12-21 11:44:19 +0000</creation_ts>
          <short_desc>[OpensslLib] Upgrade OpenSSL version in CryptoPkg to the latest 1.1.0g</short_desc>
          <delta_ts>2017-12-26 14:15:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Qin Long">qin.long</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3256</commentid>
    <comment_count>0</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-12-21 11:44:19 +0000</bug_when>
    <thetext>OpenSSL 1.1.0g was released with some fixes &amp; updates at
02-Nov-2017 (https://www.openssl.org/news/secadv/20171102.txt).

This request is to upgrade the supported OpenSSL version in
CryptoPkg/OpensslLib to catch the latest release 1.1.0g.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3257</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-21 19:03:46 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3270</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-12-26 14:15:29 +0000</bug_when>
    <thetext>Resolved by the commit: dce03c46aaa980babefa06393354bc0adfd87ae3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>937</bug_id>
          
          <creation_ts>2018-04-19 14:17:33 +0000</creation_ts>
          <short_desc>Error path in NvmExpress returns EFI_SUCCESS</short_desc>
          <delta_ts>2018-04-25 03:57:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3899</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2018-04-19 14:17:33 +0000</bug_when>
    <thetext>In NvmeExpressPassthru.c near line 659:
    Prp = NvmeCreatePrpList (PciIo, PhyAddr, EFI_SIZE_TO_PAGES(Offset + Bytes) - 1, &amp;PrpListHost, &amp;PrpListNo, &amp;MapPrpList);
    if (Prp == NULL) {
      goto EXIT;
    }
Status is not set to an error - Status is initialized to EFI_SUCCESS, or set by a PciIo-&gt;Map to EFI_SUCCESS above this code.  This error should set Status to an error code before goto EXIT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3901</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-19 20:09:23 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3924</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-04-25 03:57:22 +0000</bug_when>
    <thetext>Fixed at 67d3e63c2c92dc9729e7f56b4fa8b4b47bfefe73.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>837</bug_id>
          
          <creation_ts>2018-01-02 09:11:48 +0000</creation_ts>
          <short_desc>BaseTools: Complier error on VS2012</short_desc>
          <delta_ts>2018-01-03 20:12:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3312</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-02 09:11:48 +0000</bug_when>
    <thetext>cl.exe -c  /nologo /Zi /c /O2 /MT /W4 /WX /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE -I . -I S:\bld\BaseTools\Source\C\Include -I S:\bld\BaseTools\Source\C\Include\Ia32 -I S:\bld\BaseTools\Source\C\Common  DevicePath.c -FoDevicePath.obj
DevicePath.c
DevicePath.c(109) : error C2143: syntax error : missing &apos;;&apos; before &apos;type&apos;
DevicePath.c(109) : error C2143: syntax error : missing &apos;)&apos; before &apos;type&apos;
DevicePath.c(109) : error C2065: &apos;i&apos; : undeclared identifier
DevicePath.c(109) : warning C4018: &apos;&lt;&apos; : signed/unsigned mismatch
DevicePath.c(109) : warning C4552: &apos;&lt;&apos; : operator has no effect; expected operator with side-effect
DevicePath.c(109) : error C2059: syntax error : &apos;)&apos;
DevicePath.c(109) : error C2143: syntax error : missing &apos;;&apos; before &apos;{&apos;
DevicePath.c(110) : error C2065: &apos;i&apos; : undeclared identifier
NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\cl.exe&quot;&apos; : return code &apos;0x2&apos;
Stop.
Error while making DevicePath!
NMAKE : fatal error U1077: &apos;Makefiles\NmakeSubdirs.bat&apos; : return code &apos;0x4&apos;
Stop.
Error while making S:\bld\BaseTools\Source\C!
NMAKE : fatal error U1077: &apos;S:\bld\BaseTools\Source\C\Makefiles\NmakeSubdirs.bat&apos; : return code &apos;0x4&apos;
Stop.
Result: Failed (2)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3314</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-02 09:12:40 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3331</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-03 20:12:23 +0000</bug_when>
    <thetext>pushed the fix: SHA-1: e4fb8f1d313858bd5e415725e65e65679f2b05a0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>663</bug_id>
          
          <creation_ts>2017-08-07 12:25:04 +0000</creation_ts>
          <short_desc>Xcode: Mtoc makes the PE/COFF DebugDirectory entry too big. Adjust the loops in PeCoffLoaderGetImageInfo()</short_desc>
          <delta_ts>2019-09-11 01:46:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hart3778avery</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2565</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2017-08-07 12:25:04 +0000</bug_when>
    <thetext>It looks like mtoc images will iterate in this loop and reload the .debug section sizeof (EFI_IMAGE_DEBUG_DIRECTORY_ENTRY) ImageContext-&gt;ImageRead() in the loop. 

Bail out after the 1st read (it is already in the .debug section). 

git diff MdePkg/Library/BasePeCoffLib/BasePeCoff.c
diff --git a/MdePkg/Library/BasePeCoffLib/BasePeCoff.c b/MdePkg/Library/BasePeCoffLib/BasePeCoff.c
index 8d1daba..1e4c67e 100644
--- a/MdePkg/Library/BasePeCoffLib/BasePeCoff.c
+++ b/MdePkg/Library/BasePeCoffLib/BasePeCoff.c
@@ -771,6 +771,8 @@ PeCoffLoaderGetImageInfo (
             }
 
             return RETURN_SUCCESS;
+          } else if (DebugEntry.Type == CODEVIEW_SIGNATURE_MTOC) {
+            return RETURN_SUCCESS;
           }
         }
       }
@@ -862,6 +864,8 @@ PeCoffLoaderGetImageInfo (
         if (DebugEntry.Type == EFI_IMAGE_DEBUG_TYPE_CODEVIEW) {
           ImageContext-&gt;DebugDirectoryEntryRva = (UINT32) (DebugDirectoryEntryRva + Index);
           return RETURN_SUCCESS;
+        } else if (DebugEntry.Type == CODEVIEW_SIGNATURE_MTOC) {
+          return RETURN_SUCCESS;
         }
       }
     }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2566</commentid>
    <comment_count>1</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2017-08-07 12:25:53 +0000</bug_when>
    <thetext>Contributed-under: TianoCore Contribution Agreement 1.1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2584</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-10 20:06:50 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9497</commentid>
    <comment_count>3</comment_count>
    <who name="Hart">hart3778avery</who>
    <bug_when>2019-09-06 23:41:01 +0000</bug_when>
    <thetext>Hey, is anybody going to merge this? ,http://buywebtrafficexperts.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9586</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-10 22:45:32 +0000</bug_when>
    <thetext>I think this change is good. I will send it to edk2 community for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9587</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-10 22:59:35 +0000</bug_when>
    <thetext>After further check, CODEVIEW_SIGNATURE_MTOC is the signature, not type. It should not be used as here for DebugEntry.Type comparison. This patch is incorrect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9596</commentid>
    <comment_count>6</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2019-09-11 00:34:12 +0000</bug_when>
    <thetext>I agree that the patch is not valid. 

CODEVIEW_SIGNATURE_MTOC is a signature of the DebugEntry-&gt;Type == EFI_IMAGE_DEBUG_TYPE_CODEVIEW Type. 

Given that this loop should always exit on the 1st iteration of the loop for MTOC? 

I think we should close this a &quot;functioning as intended&quot; without making any changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9598</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-11 01:46:06 +0000</bug_when>
    <thetext>I check the generated EFI image with XCODE5 tool chain. It has only one DEBUG_DIRECTORY_ENTRY. It can exit after the first iteration of the loop. So, this has been supported. This BZ can be closed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>319</bug_id>
          
          <creation_ts>2017-01-02 22:13:15 +0000</creation_ts>
          <short_desc>BaseTools: copy all of the &quot;Source&quot; INF’s [UserExtensions] sections into the Asbuilt inf</short_desc>
          <delta_ts>2017-06-24 11:13:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1231</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-02 22:13:15 +0000</bug_when>
    <thetext>Per Build spec:
The build tools must copy all of the &quot;Source&quot; INF’s [UserExtensions] sections into the generated INF. 

current code behavior is not align with build spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1247</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-01-04 20:05:52 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1794</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-12 01:04:04 +0000</bug_when>
    <thetext>Per bug 471, we will only copy the TianoCore userextension sections into &quot;As Built&quot; INF file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2340</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-24 11:13:40 +0000</bug_when>
    <thetext>fix it SHA-1: dfa41b4a483e562f3c739acfbc2d911550f50e47</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>680</bug_id>
          
          <creation_ts>2017-08-24 10:16:33 +0000</creation_ts>
          <short_desc>SecurityPkg package build excludes ARM/AARCH64 with no good reason</short_desc>
          <delta_ts>2017-08-30 01:53:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2636</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-24 10:16:33 +0000</bug_when>
    <thetext>We have the following in SecurityPkg.dsc:

[Defines]
  SUPPORTED_ARCHITECTURES        = IA32|IPF|X64|EBC

[Components]
  #
  # Application
  #
  SecurityPkg/Application/RngTest/RngTest.inf

While the &quot;RngTest&quot; application is platform-independent (correctly, as it should be), the SUPPORTED_ARCHITECTURES define prevents the following application build (that is, when the application is built without any &quot;leaf&quot; platform):

build \
  -p SecurityPkg/SecurityPkg.dsc \
  -m SecurityPkg/Application/RngTest/RngTest.inf \
  -a AARCH64 \
  -t GCC5

build.py...
 : error 2000: Invalid parameter
        Invalid ARCH specified. [Valid ARCH: IA32 IPF X64 EBC]

The fix is simply adding ARM and AARCH64 to SUPPORTED_ARCHITECTURES.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2641</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-24 20:10:55 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2654</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-08-30 01:53:54 +0000</bug_when>
    <thetext>Commit: 10cd747d33ca8a2e3d4934cee29462d1436a126d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>146</bug_id>
          
          <creation_ts>2016-10-12 02:49:51 +0000</creation_ts>
          <short_desc>Support Pcd Value to use expression in the DEC file</short_desc>
          <delta_ts>2016-11-14 02:30:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>582</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-12 02:49:51 +0000</bug_when>
    <thetext>Current in the DEC file, if PCD value use the expression, build tools report error, however current DEC spec support it. so we need enhance build tools.

one example:

build...
d:\git_bak\edk2_latest\MdeModulePkg\MdeModulePkg.dec(827): error 3000: Invalid v
alue [0x0 + 1] of type [UINT32]; must be a hexadecimal, decimal or octal in C la
nguage format.
        gEfiMdeModulePkgTokenSpaceGuid.PcdVpdBaseAddress|0x0 + 1|UINT32|0x000100
10</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>589</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-10-12 21:08:05 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>626</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-18 22:24:09 +0000</bug_when>
    <thetext>push the fix SHA-1: 67e11e4d5902dc77fc64876da5b71122bf128837</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>976</bug_id>
          
          <creation_ts>2018-06-06 03:23:15 +0000</creation_ts>
          <short_desc>Capsule generation tools need to support generate no signature capsule file</short_desc>
          <delta_ts>2018-08-09 15:23:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4064</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-06 03:23:15 +0000</bug_when>
    <thetext>Capsule generation tools need to support generate no signature capsule file, for example: microcode update capsule file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4073</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-06-06 21:07:33 +0000</bug_when>
    <thetext>assign to Mike.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4551</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 15:23:35 +0000</bug_when>
    <thetext>Patch email for review

https://lists.01.org/pipermail/edk2-devel/2018-July/027793.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4552</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 15:23:54 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/8b63877aca1e5a3576b7275439c494a6d40ed1b5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>522</bug_id>
          
          <creation_ts>2017-05-02 08:57:40 +0000</creation_ts>
          <short_desc>INF spec: add the clarification that PCD value may from build command</short_desc>
          <delta_ts>2017-05-31 01:10:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1975</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-02 08:57:40 +0000</bug_when>
    <thetext>current INF spec still mention that if a PCD&apos;s default value is not set in the INF file , its value from FDF, DSC, DEC. 
while current we support to set a PCD value by build option, so we&apos;d like to update the INF spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1996</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-05 03:58:29 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2181</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-26 21:38:06 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2209</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-31 01:10:29 +0000</bug_when>
    <thetext>Commit 

https://github.com/tianocore-docs/edk2-InfSpecification/commit/01560b3210cefdddd829fb2ebdc2ca76bcf3ab47</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>902</bug_id>
          
          <creation_ts>2018-03-15 09:21:03 +0000</creation_ts>
          <short_desc>BaseTools: For VOID* FixedAtBuild and PatchableInModule, the size should be the size of the highest priority value setting</short_desc>
          <delta_ts>2018-04-27 05:22:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3714</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-15 09:21:03 +0000</bug_when>
    <thetext>For VOID* FixedAtBuild and PatchableInModule, the size should be the size of the highest priority value setting.  

If we use size from a lower priority value, and the higher priority value is larger, we will get a build break because the number of elements will be larger than the array size.

For PatchableInModule, if pad space is required, then the highest priority setting must pad the value of the PCD to the max size they need for that module.


build will break with an error for below case:
&quot;The maximum size of VOID* type PCD &apos;PcdTest&apos; is less than its actual size occupied in driver1&quot;

case:

DEC:  define PcdTest value “A”
DSC: 
[PcdsFixedAtBuild]
PcdTest |{0x1, 0x2}

[Components]
Driver1.inf{
&lt;PcdsFixedAtBuild&gt;
PcdTest |{0x1, 0x2, 0x3}
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3743</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-03-21 21:11:48 +0000</bug_when>
    <thetext>bug scrub:   assign to Yonghong   ( bug)
             Yanyan: have a check on test coverage</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3947</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-27 05:22:24 +0000</bug_when>
    <thetext>it should be fixed by SHA-1: c33081c912968da46fd6f0c7d2d2e52b7b410626

We base on below rule defined in build spec:

If the maximum size of a VOID* PCD is not specified in the DSC file, then the maximum
size is calculated based on the largest size of 1) the string or array in the DSC file, 2) the
string or array in the INF file and 3) the string or array in the DEC file.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>838</bug_id>
          
          <creation_ts>2018-01-02 13:37:06 +0000</creation_ts>
          <short_desc>Add UefiLib API to locate an array of protocol instances - EfiLocateProtocolBuffer()</short_desc>
          <delta_ts>2018-02-11 18:17:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3321</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-01-02 13:37:06 +0000</bug_when>
    <thetext>Add a new API to the UefiLib to locate an array of protocol instances.

It is common to use the UEFI Boot Service LocateHandleBuffer() to locate
an array of handles that support a given protocol, and then loop through
the array of handles and look up the protocol instance on each handle 
and perform some operation using that protocol.

This new API provides that common logic that locates the array of protocol
instances that match a given protocol.

The proposed API is:

/**
  Returns an array of protocol instance that matches the given protocol.

  @param[in]  Protocol      Provides the protocol to search for.
  @param[out] NoProtocols   The number of protocols returned in Buffer.
  @param[out] Buffer        A pointer to the buffer to return the requested
                            array of potocol instances that match Protocol and
                            Registration.

  @retval EFI_SUCCESS            The array of protocols was returned in Buffer,
                                 and the number of proocols in Buffer was
                                 returned in NoProtocols.
  @retval EFI_NOT_FOUND          No protocols found.
  @retval EFI_OUT_OF_RESOURCES   There is not enough pool memory to store the
                                 matching results.
  @retval EFI_INVALID_PARAMETER  Protocol is NULL.
  @retval EFI_INVALID_PARAMETER  NoProtocols is NULL.
  @retval EFI_INVALID_PARAMETER  Buffer is NULL.

**/
EFI_STATUS
EFIAPI
EfiLibLocateProtocolBuffer (
  IN  EFI_GUID  *Protocol,
  OUT UINTN     *NoProtocols,
  OUT VOID      **Buffer
  );

A typical usage of this new API would be:

EFI_STATUS   Status;
EFI_GUID     *MyProtocolGuid;
MY_PROTOCOL  *MyProtocolInstance;
UINTN        NoProtocols;
VOID         *Buffer;
UINTN        Index;

Status = EfiLibLocateProtocolBuffer (MyProtocolGuid, &amp;NoProtocol, &amp;Buffer);
if (!EFI_ERROR (Status)) {
  for (Index = 0; Index &lt; NoProtocols; Index++) {
    MyProtocolInstance = (MY_PROTOCOL *)Buffer[Index];
    //
    // Perform actions using MyProtocolInstance
    //
  }
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3322</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-01-02 13:50:32 +0000</bug_when>
    <thetext>Clarify that the buffer returned is allocated using AllocatePool()
and that it is the caller&apos;s responsibility to free the buffer using
FreePool().

The proposed API is:

/**
  Returns an array of protocol instance that matches the given protocol.

  @param[in]  Protocol      Provides the protocol to search for.
  @param[out] NoProtocols   The number of protocols returned in Buffer.
  @param[out] Buffer        A pointer to the buffer to return the requested
                            array of potocol instances that match Protocol and
                            Registration.  The returned buffer is allocated
                            using AllocatePool().  The caller is responsible
                            for freeing this buffer with FreePool().

  @retval EFI_SUCCESS            The array of protocols was returned in Buffer,
                                 and the number of proocols in Buffer was
                                 returned in NoProtocols.
  @retval EFI_NOT_FOUND          No protocols found.
  @retval EFI_OUT_OF_RESOURCES   There is not enough pool memory to store the
                                 matching results.
  @retval EFI_INVALID_PARAMETER  Protocol is NULL.
  @retval EFI_INVALID_PARAMETER  NoProtocols is NULL.
  @retval EFI_INVALID_PARAMETER  Buffer is NULL.

**/
EFI_STATUS
EFIAPI
EfiLibLocateProtocolBuffer (
  IN  EFI_GUID  *Protocol,
  OUT UINTN     *NoProtocols,
  OUT VOID      **Buffer
  );

A typical usage of this new API would be:

EFI_STATUS   Status;
EFI_GUID     *MyProtocolGuid;
MY_PROTOCOL  *MyProtocolInstance;
UINTN        NoProtocols;
VOID         *Buffer;
UINTN        Index;

Status = EfiLibLocateProtocolBuffer (MyProtocolGuid, &amp;NoProtocol, &amp;Buffer);
if (!EFI_ERROR (Status)) {
  for (Index = 0; Index &lt; NoProtocols; Index++) {
    MyProtocolInstance = (MY_PROTOCOL *)Buffer[Index];
    //
    // Perform actions using MyProtocolInstance
    //
  }
  FreePool (Buffer);
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3323</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-01-02 14:55:35 +0000</bug_when>
    <thetext>Mike,

(1) this looks very useful; I&apos;d suggest one extension:

EFI_STATUS
EFIAPI
EfiLibLocateProtocolBuffer (
  IN  EFI_GUID   *Protocol,
  OUT UINTN      *NoProtocols,
  OUT VOID       **ProtocolBuffer,
  OUT EFI_HANDLE **HandleBuffer     OPTIONAL
  );

The idea is: since the implementation will use LocateHandleBuffer() anyway, allow the caller of EfiLibLocateProtocolBuffer() to request the handles as well (in parallel to the protocol instances).

Because, &quot;Perform actions using MyProtocolInstance&quot; sometimes means &quot;open some other protocol on the handle that carries MyProtocolInstance (i.e., a &apos;sibling&apos; protocol)&quot;.

(2) Also, the comment block should likely not refer to &quot;Registration&quot;, that parameter is not exposed (the implementation will use SearchType=ByProtocol).

(3) I suggest clarifying that gBS-&gt;FreePool() is needed for releasing ProtocolBuffer (and, optionally, HandleBuffer). This is because the MemoryAllocationLib API FreePool() need not necessarily wrap gBS-&gt;FreePool(), but gBS-&gt;LocateHandleBuffer() always allocates memory with gBS-&gt;AllocatePool().

(I do see that FreePool() in &quot;MdePkg/Library/SmmMemoryAllocationLib/MemoryAllocationLib.c&quot; covers DXE pool vs. SMM pool dynamically, but the UefiLib interface should not rely on that.)

Just some ideas of course. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3341</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-04 19:08:53 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3346</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-01-06 13:23:25 +0000</bug_when>
    <thetext>Laszlo,

Thanks for noticing the reference to &quot;Registration&quot;.  I will remove
that.

I also agree that the buffer is allocated using the UEFI Boot Service
AllocatePool() and the caller need to use the UEFI Boot Service
FreePool() to free the buffer.  Implementations of this API could use
the MemoryAllocateLib services as long as the MemoryAllocateLib used
always uses these boot services.

If a consumer needs the handles to perform multiple operations on
each handle using multiple protocols, then I would recommend using
the UEFI Boot Service LocateHandleBuffer() and look up each protocol
in the loop on the handles.

The issue is that the array of handles and array of protocol 
instances may not be the same size.  There is a corner case (very rare)
where a protocol could be uninstalled between looking up the handles
and looking up the protocol on each handle.  So there is no guarantee
that the array index for the protocol is from the handle with the 
same array index.

Due to this issue, I recommend not adding the optional HandleBuffer
parameter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3347</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-01-06 13:25:15 +0000</bug_when>
    <thetext>In order to make this API more consistent with the other APIs in the
UefiLib, the recommended API name is

EfiLocateProtocolBuffer()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3348</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-01-06 16:16:35 +0000</bug_when>
    <thetext>(In reply to Michael Kinney from comment #4)

&gt; If a consumer needs the handles to perform multiple operations on
&gt; each handle using multiple protocols, then I would recommend using
&gt; the UEFI Boot Service LocateHandleBuffer() and look up each protocol
&gt; in the loop on the handles.
&gt; 
&gt; The issue is that the array of handles and array of protocol 
&gt; instances may not be the same size.  There is a corner case (very rare)
&gt; where a protocol could be uninstalled between looking up the handles
&gt; and looking up the protocol on each handle.  So there is no guarantee
&gt; that the array index for the protocol is from the handle with the 
&gt; same array index.

If this is a real risk, then I agree the original interface proposal is better / safer.

Can you educate me though how the above scenario can occur? Do you mean a timer event notification function (running e.g. at TPL_NOTIFY) that uninstalls a protocol interface, interrupting the library function e.g. at TPL_APPLICATION? (&quot;Protocol Handler Services&quot; can be invoked at &lt;=TPL_NOTIFY.)

If this is a risk, then all applications are already at risk that perform this sequence of queries, without raising the TPL to TPL_NOTIFY. So, perhaps the library function itself could raise the TPL to TPL_NOTIFY, covering the corner case. This could make applications more robust, even, not just more convenient to write.

Anyway I don&apos;t feel strongly about this; if you feel the originally proposed interface is safer to implement, I&apos;m OK with that, of course. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3547</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-07 22:18:26 +0000</bug_when>
    <thetext>Patch review email

https://lists.01.org/pipermail/edk2-devel/2018-February/020925.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3563</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-02-11 18:17:43 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/40070a186a3175c4c034a5cf6d20b41f98d0cbd6
https://github.com/tianocore/edk2/commit/3499b150d1c4d26ffb6ffb61ec93e20a7d1741f
https://github.com/tianocore/edk2/commit/7aaa7e67c4077dd2a6101a0087d173691fb40c99</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>962</bug_id>
          
          <creation_ts>2018-05-30 21:36:46 +0000</creation_ts>
          <short_desc>BaseTools: BinToPcd: There is one typo &quot;PcdToBin&quot; in verbose message</short_desc>
          <delta_ts>2018-08-09 15:28:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sun Yanyan">yanyan.sun</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4031</commentid>
    <comment_count>0</comment_count>
    <who name="Sun Yanyan">yanyan.sun</who>
    <bug_when>2018-05-30 21:36:46 +0000</bug_when>
    <thetext>When input BinToPcd.py -m 0x7D0 --input CustomSigningPrivateKey.bin --pcd GUID.Test -v, the test result is:
PcdToBin: Convert binary file to PCD statement compatible with PCD sections:
    [PcdsFixedAtBuild]
    [PcdsPatchableInModule]
    [PcdsDynamicDefault]
    [PcdsDynamicExDefault]
  GUID.Test|{0x2d, 0x2d, 0x2d, 0x2d, 0x2d, 0x42, 0x45, 0x47, 0x49, 0x4e, 0x20, 0x52, 0x53, 0x41, 0x20, 0x50, 0x52, 0x49, 0x56, 0x41, 0x54, 0x45, 0x20, 0x4b, 0x45, 0x59, 0x2d, 0x2d, 0x2d, 0x2d, 0x2d, 0x0a, 0x4d, 0x49, 0x49, 0x45, 0x70, 0x41, 0x49, 0x42, 0x41, 0x41, 0x4b, 0x43, 0x41, 0x51, 0x45, 0x41, 0x79, 0x78, 0x2b, 0x46, 0x71, 0x49, 0x33, 0x30, 0x6b, 0x45, 0x31, 0x36, 0x6e, 0x34, 0x6e, 0x6b, 0x52, 0x7a, 0x57, 0x39, 0x48, 0x76, 0x7a, 0x44, 0x52, 0x4a, 0x61, 0x73, 0x62, 0x6e, 0x6d, 0x37, 0x6f, 0x42, 0x74, 0x63, 0x44, 0x47, 0x76, 0x48, 0x63, 0x77, 0x67, 0x49, 0x42, 0x50, 0x50, 0x7a, 0x0a, 0x78, 0x43, 0x78, 0x63, 0x72, 0x69, 0x6e, 0x2f, 0x6f, 0x39, 0x42, 0x57, 0x36, 0x48, 0x65, 0x71, 0x66, 0x76, 0x4b, 0x4f, 0x54, 0x48, 0x42, 0x4a, 0x67, 0x66, 0x36, 0x37, 0x64, 0x57, 0x6e, 0x5a, 0x59, 0x4c, 0x6d, 0x53, 0x64, 0x4c, 0x73, 0x64, 0x41, 0x53, 0x6a, 0x34, 0x45, 0x79, 0x53, 0x77, 0x48, 0x4e, 0x66, 0x69, 0x75, 0x37, 0x41, 0x48, 0x47, 0x39, 0x45, 0x36, 0x34, 0x2f, 0x49, 0x4b, 0x0a, 0x74, 0x72, 0x76, 0x4e, 0x71, 0x79, 0x77, 0x79, 0x78, 0x6e, 0x58, 0x4a, 0x38, 0x55, 0x2f, 0x69, 0x42, 0x56, 0x71, 0x78, 0x45, 0x61, 0x74, 0x4a, 0x59, 0x34, 0x64, 0x46, 0x73, 0x47, 0x67, 0x6b, 0x31, 0x6e, 0x6f, 0x61, 0x64, 0x69, 0x42, 0x2b, 0x57, 0x56, 0x52, 0x65, 0x7a, 0x6f, 0x35, 0x48, 0x7a, 0x54, 0x75, 0x71, 0x61, 0x56, 0x55, 0x37, 0x74, 0x33, 0x4f, 0x42, 0x2b, 0x78, 0x67, 0x51, 0x0a, 0x39, 0x59, 0x2f, 0x65, 0x6f, 0x78, 0x4c, 0x63, 0x67, 0x37, 0x62, 0x53, 0x62, 0x62, 0x4a, 0x55, 0x66, 0x51, 0x69, 0x5a, 0x74, 0x76, 0x50, 0x36, 0x6a, 0x43, 0x57, 0x61, 0x30, 0x4c, 0x63, 0x52, 0x59, 0x49, 0x68, 0x75, 0x7a, 0x6c, 0x32, 0x30, 0x33, 0x38, 0x2f, 0x53, 0x67, 0x46, 0x72, 0x33, 0x57, 0x4e, 0x73, 0x52, 0x31, 0x4d, 0x45, 0x64, 0x72, 0x37, 0x73, 0x75, 0x68, 0x54, 0x45, 0x77, 0x0a, 0x76, 0x72, 0x70, 0x61, 0x47, 0x55, 0x54, 0x61, 0x33, 0x66, 0x7a, 0x71, 0x6c, 0x75, 0x4d, 0x57, 0x45, 0x64, 0x71, 0x6f, 0x54, 0x64, 0x6c, 0x58, 0x6f, 0x78, 0x41, 0x61, 0x36, 0x58, 0x79, 0x58, 0x64, 0x43, 0x69, 0x39, 0x35, 0x66, 0x6f, 0x6f, 0x50, 0x6d, 0x37, 0x48, 0x73, 0x59, 0x52, 0x6c, 0x44, 0x66, 0x46, 0x7a, 0x48, 0x62, 0x68, 0x56, 0x42, 0x2b, 0x62, 0x6f, 0x6f, 0x44, 0x64, 0x64, 0x0a, 0x76, 0x57, 0x4c, 0x74, 0x65, 0x50, 0x43, 0x32, 0x6f, 0x69, 0x7a, 0x73, 0x35, 0x73, 0x69, 0x49, 0x53, 0x37, 0x56, 0x53, 0x2f, 0x55, 0x63, 0x79, 0x58, 0x48, 0x78, 0x34, 0x6c, 0x4c, 0x50, 0x72, 0x6e, 0x45, 0x6d, 0x45, 0x70, 0x51, 0x49, 0x44, 0x41, 0x51, 0x41, 0x42, 0x41, 0x6f, 0x49, 0x42, 0x41, 0x51, 0x44, 0x43, 0x52, 0x6b, 0x48, 0x32, 0x4e, 0x74, 0x2f, 0x45, 0x37, 0x50, 0x58, 0x74, 0x0a, 0x68, 0x56, 0x74, 0x36, 0x36, 0x47, 0x45, 0x63, 0x4e, 0x44, 0x45, 0x6e, 0x64, 0x74, 0x30, 0x78, 0x52, 0x4f, 0x6b, 0x35, 0x64, 0x7a, 0x47, 0x52, 0x42, 0x37, 0x7a, 0x5a, 0x76, 0x73, 0x4b, 0x38, 0x79, 0x66, 0x39, 0x4b, 0x6b, 0x41, 0x75, 0x4d, 0x34, 0x4d, 0x71, 0x4c, 0x43, 0x59, 0x63, 0x32, 0x44, 0x4d, 0x35, 0x62, 0x59, 0x4f, 0x37, 0x4e, 0x47, 0x56, 0x43, 0x56, 0x4c, 0x75, 0x68, 0x6f, 0x0a, 0x6f, 0x6e, 0x61, 0x77, 0x31, 0x6f, 0x7a, 0x48, 0x62, 0x50, 0x65, 0x4f, 0x31, 0x6e, 0x70, 0x2f, 0x42, 0x4d, 0x59, 0x55, 0x73, 0x44, 0x39, 0x42, 0x75, 0x46, 0x6a, 0x30, 0x4f, 0x43, 0x67, 0x56, 0x51, 0x4c, 0x6b, 0x53, 0x6b, 0x59, 0x6c, 0x69, 0x77, 0x49, 0x46, 0x48, 0x34, 0x2f, 0x7a, 0x6a, 0x2b, 0x72, 0x31, 0x34, 0x31, 0x59, 0x63, 0x71, 0x47, 0x53, 0x4f, 0x32, 0x4e, 0x2f, 0x6c, 0x6c, 0x0a, 0x67, 0x68, 0x5a, 0x4a, 0x74, 0x4c, 0x74, 0x2b, 0x5a, 0x42, 0x47, 0x30, 0x71, 0x73, 0x65, 0x4b, 0x30, 0x2f, 0x62, 0x45, 0x79, 0x74, 0x35, 0x77, 0x70, 0x48, 0x37, 0x62, 0x4d, 0x38, 0x44, 0x41, 0x45, 0x6d, 0x47, 0x37, 0x58, 0x44, 0x2f, 0x71, 0x70, 0x67, 0x6c, 0x69, 0x4b, 0x51, 0x52, 0x71, 0x4b, 0x70, 0x79, 0x7a, 0x73, 0x57, 0x4b, 0x75, 0x6e, 0x4f, 0x62, 0x48, 0x62, 0x35, 0x47, 0x73, 0x0a, 0x33, 0x65, 0x48, 0x4d, 0x6d, 0x32, 0x4a, 0x44, 0x59, 0x79, 0x6a, 0x6f, 0x52, 0x59, 0x36, 0x54, 0x4a, 0x71, 0x56, 0x70, 0x77, 0x78, 0x2b, 0x47, 0x77, 0x54, 0x4a, 0x2f, 0x6f, 0x2f, 0x79, 0x67, 0x65, 0x45, 0x37, 0x4e, 0x30, 0x59, 0x70, 0x6e, 0x69, 0x33, 0x52, 0x36, 0x79, 0x54, 0x4d, 0x57, 0x70, 0x58, 0x55, 0x6e, 0x6c, 0x31, 0x6a, 0x4c, 0x76, 0x53, 0x59, 0x33, 0x33, 0x30, 0x78, 0x57, 0x0a, 0x55, 0x42, 0x4b, 0x63, 0x58, 0x75, 0x6b, 0x6d, 0x31, 0x66, 0x32, 0x54, 0x58, 0x71, 0x73, 0x6d, 0x79, 0x6e, 0x73, 0x37, 0x42, 0x57, 0x56, 0x51, 0x57, 0x47, 0x65, 0x71, 0x75, 0x67, 0x7a, 0x53, 0x36, 0x36, 0x43, 0x61, 0x35, 0x41, 0x32, 0x55, 0x6e, 0x44, 0x71, 0x4d, 0x56, 0x53, 0x7a, 0x4b, 0x30, 0x62, 0x48, 0x51, 0x4a, 0x62, 0x65, 0x30, 0x43, 0x66, 0x52, 0x79, 0x42, 0x47, 0x48, 0x79, 0x0a, 0x65, 0x76, 0x52, 0x2b, 0x6d, 0x46, 0x78, 0x35, 0x41, 0x6f, 0x47, 0x42, 0x41, 0x4f, 0x69, 0x37, 0x41, 0x59, 0x61, 0x58, 0x77, 0x6b, 0x54, 0x34, 0x74, 0x33, 0x37, 0x54, 0x64, 0x4b, 0x55, 0x4d, 0x35, 0x77, 0x75, 0x36, 0x4a, 0x31, 0x48, 0x35, 0x33, 0x66, 0x55, 0x31, 0x45, 0x4d, 0x7a, 0x74, 0x36, 0x55, 0x4d, 0x56, 0x31, 0x70, 0x38, 0x64, 0x62, 0x39, 0x38, 0x44, 0x76, 0x78, 0x55, 0x43, 0x0a, 0x57, 0x38, 0x76, 0x69, 0x32, 0x4f, 0x34, 0x68, 0x76, 0x76, 0x59, 0x39, 0x55, 0x43, 0x6e, 0x42, 0x63, 0x68, 0x6d, 0x4c, 0x4f, 0x79, 0x4a, 0x74, 0x50, 0x71, 0x75, 0x66, 0x39, 0x54, 0x71, 0x47, 0x6d, 0x78, 0x4a, 0x4f, 0x2b, 0x4e, 0x5a, 0x58, 0x78, 0x51, 0x6f, 0x52, 0x55, 0x6c, 0x46, 0x66, 0x6f, 0x48, 0x47, 0x57, 0x48, 0x4c, 0x45, 0x2b, 0x78, 0x55, 0x36, 0x42, 0x6e, 0x59, 0x6d, 0x6a, 0x0a, 0x46, 0x2b, 0x46, 0x67, 0x66, 0x6f, 0x6f, 0x36, 0x6e, 0x62, 0x71, 0x54, 0x6a, 0x4b, 0x5a, 0x50, 0x74, 0x4b, 0x48, 0x63, 0x56, 0x6c, 0x2f, 0x5a, 0x54, 0x44, 0x62, 0x55, 0x52, 0x62, 0x44, 0x4b, 0x50, 0x56, 0x67, 0x37, 0x36, 0x76, 0x59, 0x4c, 0x69, 0x44, 0x33, 0x55, 0x32, 0x79, 0x38, 0x6d, 0x74, 0x37, 0x59, 0x44, 0x38, 0x77, 0x37, 0x7a, 0x41, 0x6f, 0x47, 0x42, 0x41, 0x4e, 0x39, 0x75, 0x0a, 0x72, 0x74, 0x37, 0x4e, 0x59, 0x36, 0x44, 0x34, 0x36, 0x30, 0x48, 0x52, 0x57, 0x4b, 0x64, 0x68, 0x77, 0x77, 0x77, 0x50, 0x33, 0x34, 0x77, 0x4b, 0x6a, 0x68, 0x69, 0x5a, 0x64, 0x47, 0x71, 0x30, 0x71, 0x64, 0x72, 0x54, 0x39, 0x76, 0x6e, 0x6d, 0x76, 0x45, 0x54, 0x37, 0x65, 0x6e, 0x75, 0x42, 0x70, 0x72, 0x42, 0x36, 0x69, 0x68, 0x35, 0x64, 0x72, 0x42, 0x42, 0x73, 0x37, 0x56, 0x45, 0x65, 0x0a, 0x68, 0x69, 0x2b, 0x47, 0x6a, 0x4d, 0x69, 0x78, 0x74, 0x62, 0x59, 0x51, 0x33, 0x48, 0x49, 0x62, 0x75, 0x78, 0x30, 0x69, 0x74, 0x37, 0x78, 0x6d, 0x6f, 0x52, 0x31, 0x79, 0x4f, 0x4f, 0x47, 0x69, 0x35, 0x75, 0x73, 0x44, 0x65, 0x63, 0x79, 0x73, 0x4c, 0x52, 0x30, 0x53, 0x48, 0x66, 0x54, 0x46, 0x2b, 0x53, 0x76, 0x42, 0x78, 0x4e, 0x47, 0x33, 0x42, 0x34, 0x57, 0x34, 0x44, 0x55, 0x69, 0x62, 0x0a, 0x74, 0x4a, 0x59, 0x68, 0x74, 0x4c, 0x66, 0x75, 0x70, 0x34, 0x79, 0x6d, 0x6a, 0x74, 0x2f, 0x6f, 0x6f, 0x66, 0x6c, 0x33, 0x53, 0x72, 0x58, 0x34, 0x66, 0x6f, 0x66, 0x50, 0x6e, 0x50, 0x55, 0x30, 0x49, 0x6c, 0x76, 0x75, 0x4b, 0x6e, 0x51, 0x48, 0x41, 0x6f, 0x47, 0x41, 0x4c, 0x56, 0x67, 0x71, 0x54, 0x76, 0x41, 0x49, 0x6f, 0x4f, 0x6d, 0x59, 0x7a, 0x76, 0x51, 0x69, 0x4f, 0x50, 0x70, 0x50, 0x0a, 0x6c, 0x67, 0x42, 0x61, 0x49, 0x75, 0x57, 0x39, 0x4d, 0x6b, 0x5a, 0x35, 0x6c, 0x49, 0x51, 0x53, 0x4f, 0x38, 0x6a, 0x6f, 0x66, 0x53, 0x33, 0x2b, 0x47, 0x77, 0x53, 0x65, 0x32, 0x56, 0x67, 0x52, 0x54, 0x4b, 0x4e, 0x52, 0x51, 0x75, 0x78, 0x2b, 0x53, 0x58, 0x6e, 0x65, 0x77, 0x5a, 0x50, 0x34, 0x53, 0x44, 0x50, 0x52, 0x66, 0x4c, 0x36, 0x75, 0x52, 0x45, 0x41, 0x78, 0x52, 0x6f, 0x72, 0x74, 0x0a, 0x63, 0x64, 0x37, 0x44, 0x4b, 0x76, 0x67, 0x45, 0x34, 0x78, 0x5a, 0x47, 0x35, 0x4b, 0x58, 0x75, 0x47, 0x39, 0x4e, 0x30, 0x6d, 0x62, 0x41, 0x79, 0x50, 0x7a, 0x36, 0x50, 0x31, 0x44, 0x35, 0x62, 0x71, 0x38, 0x54, 0x69, 0x51, 0x73, 0x70, 0x79, 0x36, 0x75, 0x52, 0x4f, 0x74, 0x69, 0x53, 0x33, 0x66, 0x41, 0x58, 0x7a, 0x4b, 0x6b, 0x2b, 0x72, 0x51, 0x73, 0x2b, 0x50, 0x47, 0x49, 0x66, 0x2b, 0x0a, 0x39, 0x63, 0x38, 0x4f, 0x30, 0x34, 0x75, 0x68, 0x71, 0x76, 0x4a, 0x72, 0x46, 0x6a, 0x2f, 0x44, 0x38, 0x59, 0x6e, 0x4a, 0x64, 0x4c, 0x4d, 0x43, 0x67, 0x59, 0x45, 0x41, 0x76, 0x66, 0x36, 0x50, 0x77, 0x7a, 0x52, 0x69, 0x51, 0x50, 0x4d, 0x4b, 0x6b, 0x6d, 0x68, 0x6a, 0x65, 0x38, 0x6f, 0x64, 0x49, 0x76, 0x65, 0x6f, 0x66, 0x35, 0x78, 0x47, 0x49, 0x74, 0x4c, 0x79, 0x39, 0x50, 0x33, 0x31, 0x0a, 0x35, 0x66, 0x67, 0x53, 0x37, 0x34, 0x52, 0x75, 0x6d, 0x6a, 0x5a, 0x43, 0x66, 0x42, 0x33, 0x4f, 0x30, 0x67, 0x6b, 0x52, 0x78, 0x43, 0x71, 0x68, 0x63, 0x30, 0x49, 0x39, 0x4e, 0x35, 0x71, 0x2b, 0x50, 0x6c, 0x47, 0x72, 0x43, 0x38, 0x70, 0x61, 0x47, 0x35, 0x30, 0x51, 0x36, 0x42, 0x4e, 0x2b, 0x74, 0x4a, 0x4c, 0x65, 0x4c, 0x4e, 0x34, 0x55, 0x71, 0x55, 0x61, 0x45, 0x36, 0x68, 0x49, 0x74, 0x0a, 0x54, 0x4c, 0x45, 0x69, 0x39, 0x4a, 0x47, 0x41, 0x74, 0x31, 0x53, 0x39, 0x6c, 0x6e, 0x52, 0x32, 0x6f, 0x75, 0x66, 0x64, 0x35, 0x76, 0x73, 0x39, 0x38, 0x55, 0x36, 0x47, 0x4e, 0x54, 0x54, 0x36, 0x68, 0x69, 0x50, 0x5a, 0x57, 0x67, 0x4d, 0x65, 0x42, 0x50, 0x4e, 0x70, 0x55, 0x53, 0x75, 0x76, 0x2b, 0x4d, 0x4f, 0x68, 0x43, 0x30, 0x5a, 0x6f, 0x79, 0x6a, 0x49, 0x59, 0x5a, 0x55, 0x5a, 0x55, 0x0a, 0x35, 0x56, 0x6d, 0x4d, 0x54, 0x69, 0x63, 0x43, 0x67, 0x59, 0x42, 0x64, 0x73, 0x71, 0x55, 0x41, 0x54, 0x61, 0x34, 0x53, 0x73, 0x65, 0x47, 0x69, 0x49, 0x33, 0x67, 0x6b, 0x57, 0x4b, 0x7a, 0x6d, 0x78, 0x4e, 0x7a, 0x45, 0x72, 0x54, 0x62, 0x49, 0x7a, 0x4c, 0x5a, 0x49, 0x78, 0x61, 0x68, 0x66, 0x57, 0x4f, 0x34, 0x6c, 0x51, 0x57, 0x50, 0x57, 0x77, 0x33, 0x43, 0x62, 0x42, 0x71, 0x37, 0x30, 0x0a, 0x58, 0x58, 0x49, 0x32, 0x68, 0x75, 0x50, 0x78, 0x66, 0x31, 0x36, 0x4f, 0x69, 0x73, 0x57, 0x78, 0x53, 0x53, 0x58, 0x72, 0x6b, 0x6d, 0x61, 0x34, 0x32, 0x51, 0x6d, 0x50, 0x73, 0x4b, 0x7a, 0x63, 0x38, 0x6e, 0x43, 0x32, 0x38, 0x4d, 0x44, 0x63, 0x34, 0x34, 0x5a, 0x2f, 0x74, 0x31, 0x55, 0x33, 0x50, 0x48, 0x4d, 0x38, 0x77, 0x79, 0x45, 0x4b, 0x46, 0x32, 0x6f, 0x30, 0x61, 0x68, 0x68, 0x4b, 0x0a, 0x46, 0x35, 0x65, 0x41, 0x65, 0x7a, 0x65, 0x6c, 0x62, 0x2b, 0x71, 0x55, 0x53, 0x4a, 0x51, 0x44, 0x57, 0x55, 0x79, 0x64, 0x32, 0x38, 0x77, 0x49, 0x34, 0x4f, 0x58, 0x45, 0x44, 0x7a, 0x45, 0x42, 0x39, 0x31, 0x76, 0x67, 0x31, 0x50, 0x72, 0x49, 0x52, 0x74, 0x6f, 0x74, 0x4c, 0x50, 0x6c, 0x6e, 0x39, 0x65, 0x62, 0x72, 0x71, 0x67, 0x3d, 0x3d, 0x0a, 0x2d, 0x2d, 0x2d, 0x2d, 0x2d, 0x45, 0x4e, 0x44, 0x20, 0x52, 0x53, 0x41, 0x20, 0x50, 0x52, 0x49, 0x56, 0x41, 0x54, 0x45, 0x20, 0x4b, 0x45, 0x59, 0x2d, 0x2d, 0x2d, 0x2d, 0x2d, 0x0a}|VOID*|2000

There is one typo in first line &quot;PcdToBin: Convert binary file to PCD statement compatible with PCD sections&quot;, PcdToBin should be BinToPcd.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4076</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-06-06 21:08:58 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4101</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-06-09 02:16:21 +0000</bug_when>
    <thetext>Patch for review

https://lists.01.org/pipermail/edk2-devel/2018-June/025747.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4553</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 15:28:27 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/1d79b72ee69f59c90fa8c49399c37a305eb3469a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>984</bug_id>
          
          <creation_ts>2018-06-15 00:18:53 +0000</creation_ts>
          <short_desc>UefiShellAcpiViewCommandLib fails to build under VS2017.</short_desc>
          <delta_ts>2018-08-16 04:08:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>Alexei.Fedorov</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4143</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2018-06-15 00:18:53 +0000</bug_when>
    <thetext>On our build we treat warnings as errors, and this module currently uses non-standard initializers.

ShellPkg\Library\UefiShellAcpiViewCommandLib\AcpiParser.c(608): error C2220: warning treated as error - no &apos;object&apos; file generated
ShellPkg\Library\UefiShellAcpiViewCommandLib\AcpiParser.c(608): warning C4221: nonstandard extension used: &apos;ItemPtr&apos;: cannot be initialized using address of automatic variable &apos;AcpiHdrInfo&apos;
ShellPkg\Library\UefiShellAcpiViewCommandLib\AcpiParser.c(606): note: see declaration of &apos;AcpiHdrInfo&apos;
ShellPkg\Library\UefiShellAcpiViewCommandLib\AcpiParser.c(608): warning C4204: nonstandard extension used: non-constant aggregate initializer
ShellPkg\Library\UefiShellAcpiViewCommandLib\AcpiParser.c(645): warning C4221: nonstandard extension used: &apos;ItemPtr&apos;: cannot be initialized using address of automatic variable &apos;AcpiHdrInfo&apos;
ShellPkg\Library\UefiShellAcpiViewCommandLib\AcpiParser.c(643): note: see declaration of &apos;AcpiHdrInfo&apos;
ShellPkg\Library\UefiShellAcpiViewCommandLib\AcpiParser.c(645): warning C4204: nonstandard extension used: non-constant aggregate initializer</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4191</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-21 21:05:00 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner

there have similar bug on VS2017 (bug 984), VS2017 Part2 (bug 985), VS2017 Part3 (bug 986).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4238</commentid>
    <comment_count>2</comment_count>
    <who name="Alexei">Alexei.Fedorov</who>
    <bug_when>2018-07-06 04:00:31 +0000</bug_when>
    <thetext>I&apos;m not able reproduce this compilation error when building AARCH64 target with VS2017. Which target are you building and are build scripts for it available?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4596</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-16 04:08:25 +0000</bug_when>
    <thetext>fixed @ ed8746801e0d9a5fc5fec006efdedac1c09e7bbf..7343bc8062c893ed6d40b25a9329d51340e0d703</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>986</bug_id>
          
          <creation_ts>2018-06-15 00:31:09 +0000</creation_ts>
          <short_desc>UefiShellAcpiViewCommandLib fails to build under VS2017. Part 3.</short_desc>
          <delta_ts>2018-08-16 04:08:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4145</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2018-06-15 00:31:09 +0000</bug_when>
    <thetext>On our build we treat warnings as errors, and this module has the following errors.

ShellPkg\Library\UefiShellAcpiViewCommandLib\Parsers\Xsdt\XsdtParser.c(96): error C2220: warning treated as error - no &apos;object&apos; file generated
ShellPkg\Library\UefiShellAcpiViewCommandLib\Parsers\Xsdt\XsdtParser.c(96): warning C4457: declaration of &apos;Ptr&apos; hides function parameter
ShellPkg\Library\UefiShellAcpiViewCommandLib\Parsers\Xsdt\XsdtParser.c(96): note: to simplify migration, consider the temporary use of /Wv:18 flag with the version of the compiler with which you used to build without warnings
ShellPkg\Library\UefiShellAcpiViewCommandLib\Parsers\Xsdt\XsdtParser.c(55): note: see declaration of &apos;Ptr&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4152</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2018-06-15 13:10:27 +0000</bug_when>
    <thetext>Perhaps this should use SafeIntLib if these truncating casts are actually necessary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4153</commentid>
    <comment_count>2</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2018-06-15 13:11:04 +0000</bug_when>
    <thetext>Disregard last comment. Wrong bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4186</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-21 20:13:15 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4192</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-21 21:05:40 +0000</bug_when>
    <thetext>there have similar bug on VS2017 (bug 984), VS2017 Part2 (bug 985), VS2017 Part3 (bug 986).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4598</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-16 04:08:42 +0000</bug_when>
    <thetext>fixed @ ed8746801e0d9a5fc5fec006efdedac1c09e7bbf..7343bc8062c893ed6d40b25a9329d51340e0d703</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>502</bug_id>
          
          <creation_ts>2017-04-23 07:38:44 +0000</creation_ts>
          <short_desc>build.py: [patch] typo in function name (LanuchPostbuild =&gt; LaunchPostbuild)</short_desc>
          <delta_ts>2017-04-27 09:40:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>trivial</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nikolai Saoukh">nms</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1899</commentid>
    <comment_count>0</comment_count>
      <attachid>55</attachid>
    <who name="Nikolai Saoukh">nms</who>
    <bug_when>2017-04-23 07:38:44 +0000</bug_when>
    <thetext>Created attachment 55
Rename LanuchPostbuild to LaunchPostbuild patch

attached patch file, that fix function name typo -- LanuchPostbuild ==&gt; LaunchPostbuild

Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Nikolai Saoukh &lt;nms@otdel-1.org&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1936</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-26 21:07:43 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1952</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-27 09:40:30 +0000</bug_when>
    <thetext>trunk: SHA-1: 91048b0df658e47cef0ccdedc4b790e8a0f1035d
UDK2017:SHA-1: 78fbc8ec8ed8bab252364001478c4a3382b11316</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>55</attachid>
            <date>2017-04-23 07:38:44 +0000</date>
            <delta_ts>2017-04-23 07:38:44 +0000</delta_ts>
            <desc>Rename LanuchPostbuild to LaunchPostbuild patch</desc>
            <filename>lanuch.diff</filename>
            <type>application/octet-stream</type>
            <size>1364</size>
            <attacher name="Nikolai Saoukh">nms</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>755</bug_id>
          
          <creation_ts>2017-10-30 06:25:23 +0000</creation_ts>
          <short_desc>Stuck when building EmulatorPkg/Sec.inf</short_desc>
          <delta_ts>2019-07-25 22:10:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Mac OS</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Shiyao Wang">wangshiyao</reporter>
          <assigned_to name="Andrew Fish">afish</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
    
    <cc>wangshiyao</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Mac OS</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2961</commentid>
    <comment_count>0</comment_count>
      <attachid>113</attachid>
    <who name="Shiyao Wang">wangshiyao</who>
    <bug_when>2017-10-30 06:25:23 +0000</bug_when>
    <thetext>Created attachment 113
Screenshot o Console Output

I&apos;m using macOS High Sierra + Xcode 9.0.1.
When building EDK, the terminal window stuck at ld command when it reaches EmulatorPkg/Sec.inf.

Here&apos;s the last output.

Building ... /Users/wsy/code/github.com/tianocore/edk2/EmulatorPkg/Sec/Sec.inf [X64]
&quot;ld&quot; -arch x86_64 -u __ModuleEntryPoint -e __ModuleEntryPoint -preload -segalign 0x20 -pie -all_load -dead_strip -seg1addr 0x240 -map /Users/wsy/code/github.com/tianocore/edk2/Build/Emulator/DEBUG_XCODE5/X64/EmulatorPkg/Sec/Sec/DEBUG/EmuSec.map -o /Users/wsy/code/github.com/tianocore/edk2/Build/Emulator/DEBUG_XCODE5/X64/EmulatorPkg/Sec/Sec/DEBUG/EmuSec.dll  -filelist /Users/wsy/code/github.com/tianocore/edk2/Build/Emulator/DEBUG_XCODE5/X64/EmulatorPkg/Sec/Sec/OUTPUT/static_library_files.lst

While it stuck here, CPU usage is still 100%.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6168</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-22 21:33:15 +0000</bug_when>
    <thetext>Ray, please help to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7029</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-04-08 23:13:10 +0000</bug_when>
    <thetext>Andrew, do you meet the same issue and any BKM to Shiyao if the build in your env is good?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8428</commentid>
    <comment_count>3</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:52:21 +0000</bug_when>
    <thetext>Bug Triage: Andrew, can you confirm if this is an issue? If so we will work with you on a fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8601</commentid>
    <comment_count>4</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 22:10:35 +0000</bug_when>
    <thetext>Closing this as &quot;cannot reproduce&quot;. Shiyao, please reopen this bug if it is still an issue, and provide more details in terms of debug info.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>113</attachid>
            <date>2017-10-30 06:25:23 +0000</date>
            <delta_ts>2017-10-30 06:25:23 +0000</delta_ts>
            <desc>Screenshot o Console Output</desc>
            <filename>Snip20171030_2.png</filename>
            <type>image/png</type>
            <size>81276</size>
            <attacher name="Shiyao Wang">wangshiyao</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>432</bug_id>
          
          <creation_ts>2017-03-20 19:35:43 +0000</creation_ts>
          <short_desc>UpdateHID() may debug print the _HID string without NULL terminator.</short_desc>
          <delta_ts>2017-04-06 21:16:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="chao">chao.b.zhang</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1648</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2017-03-20 19:35:43 +0000</bug_when>
    <thetext>Upon going into the &quot;Patch HID in ASL&quot; for loop, if PnpHID == TRUE, the string will be copied and the final character will be set to AML_NOOP_OP. A few lines later, a DEBUG() print will attempt to format this string as ASCII, but there&apos;s no terminator. We have observed machine checks as a result of this bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1675</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-23 20:26:19 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1763</commentid>
    <comment_count>2</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2017-04-06 21:12:39 +0000</bug_when>
    <thetext>The issue has been fixed in EDKII by commit
4de754e15fec9c94ce7677904efd0022c211721b
9d9b8b77bc54718a4debfea3a7a3dd59bba16840</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1764</commentid>
    <comment_count>3</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2017-04-06 21:16:11 +0000</bug_when>
    <thetext>(In reply to chao from comment #2)
&gt; The issue has been fixed in EDKII by commit
&gt; 4de754e15fec9c94ce7677904efd0022c211721b
&gt; 9d9b8b77bc54718a4debfea3a7a3dd59bba16840
Please ignore above comments. The correct one is 

In current implementation, pre-patched string in TPM2 ACPI table is “NNNN0000” with ‘/0’ terminator (9 bytes). It follows ACPI6.0 spec 20.2.3 string definition.
   1. In PNP case, we will patch the string as “PNPNNNN” with ‘/0’ terminator + AML_NOOP_OP (8 bytes + 1 byte)
   2. In ACPI case, we will patch the string as “ACPINNNN” with ‘/0’ terminator (9 bytes)
   3. While the debug info after PNP patch is to make sure HID in ACPI table is patched correctly with a NULL terminated string.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>130</bug_id>
          
          <creation_ts>2016-09-26 13:04:38 +0000</creation_ts>
          <short_desc>‘cd \’ command fails to go back to the root directory of a file system</short_desc>
          <delta_ts>2016-10-27 03:00:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>tapandshah</reporter>
          <assigned_to name="Jaben Carsey">jaben.carsey</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>ray.ni</cc>
    
    <cc>tapandshah</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>525</commentid>
    <comment_count>0</comment_count>
      <attachid>12</attachid>
    <who name="">tapandshah</who>
    <bug_when>2016-09-26 13:04:38 +0000</bug_when>
    <thetext>Created attachment 12
Issue Snapshot

When entered &apos;fs0:\ShellPkg\Application&gt;cd \&apos; at Shell prompt, it should go back to the root directory, but instead it remains at the same directory path.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>544</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-29 20:43:07 +0000</bug_when>
    <thetext>Bug Scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>749</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-27 03:00:15 +0000</bug_when>
    <thetext>Tapan fixed in a7ea752e59bbbf69c6d8a72ee6a8b7a0f77cca7c.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>12</attachid>
            <date>2016-09-26 13:04:38 +0000</date>
            <delta_ts>2016-09-26 13:04:38 +0000</delta_ts>
            <desc>Issue Snapshot</desc>
            <filename>cd_command_issue.jpg</filename>
            <type>image/jpeg</type>
            <size>51764</size>
            <attacher>tapandshah</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>131</bug_id>
          
          <creation_ts>2016-09-28 20:33:36 +0000</creation_ts>
          <short_desc>FreePool() ASSERT() when writing to disk in Shell HexEdit command</short_desc>
          <delta_ts>2016-10-03 19:07:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>527</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-09-28 20:33:36 +0000</bug_when>
    <thetext>This issue can be reproduces as follows:

1) Boot to UEFI Shell
2) run HexEdit command
3) Open a block device and read in 1 or more sectors
4) Modify one or more hex values
5) Save the buffer
6) CR macro ASSERT() generated in call to FreePool()

The root cause if a bad pointer passed into FreePool() 
from HDiskImageSave().

The HDiskImageSave() function copies a device path using
DuplicateDevicePath() and passes that device path to
gBS-&gt;LocateDevicePath() that changes the value of the
device path pointer.  When FreePool() is called with the
modified device path pointer, the FreePool() service 
generates an ASSERT() because the signature for the pool 
head can not be found.

The function HDiskImageRead() immediately above 
HDiskImageSave() has the correct algorithm that uses an 
additional local variable called DupDevicePathForFree to 
preserve the pointer to the allocated buffer so it can 
be used in the call to FreePool().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>545</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-29 20:44:02 +0000</bug_when>
    <thetext>Bug Scrub:Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>551</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-10-03 19:07:06 +0000</bug_when>
    <thetext>Fixed in commit c0b7e2b2bfc2748112607bfe83fc99cf48c97b48

https://github.com/tianocore/edk2/commit/c0b7e2b2bfc2748112607bfe83fc99cf48c97b48</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>94</bug_id>
          
          <creation_ts>2016-08-04 10:35:39 +0000</creation_ts>
          <short_desc>Incorrect MADT revision for ACPI 6.0</short_desc>
          <delta_ts>2016-10-26 03:33:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Alexei">Alexei.Fedorov</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>Alexei.Fedorov</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>407</commentid>
    <comment_count>0</comment_count>
    <who name="Alexei">Alexei.Fedorov</who>
    <bug_when>2016-08-04 10:35:39 +0000</bug_when>
    <thetext>edk2\MdePkg\Include\IndustryStandard\Acpi60.h defines MADT revision as:

///
/// MADT Revision (as defined in ACPI 6.0 spec.)
///
#define EFI_ACPI_6_0_MULTIPLE_APIC_DESCRIPTION_TABLE_REVISION 0x03

but ACPI_6_0_Errate_A Table 5-44 on page #143 states that Revision field is 4.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>534</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-29 20:20:18 +0000</bug_when>
    <thetext>BUG sCURB: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>720</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-26 03:33:15 +0000</bug_when>
    <thetext>Fix at edk2 50506050d1fb82666932363d8510dd8c9e46dcc7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>95</bug_id>
          
          <creation_ts>2016-08-05 05:15:44 +0000</creation_ts>
          <short_desc>Incorrect GIC Version in Acpi51.h</short_desc>
          <delta_ts>2016-10-26 03:33:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Alexei">Alexei.Fedorov</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>417</commentid>
    <comment_count>0</comment_count>
    <who name="Alexei">Alexei.Fedorov</who>
    <bug_when>2016-08-05 05:15:44 +0000</bug_when>
    <thetext>edk2\MdePkg\Include\IndustryStandard\Acpi51.h defines:
///
/// GIC Version
///
#define EFI_ACPI_5_1_GIC_V2                                   0x01
#define EFI_ACPI_5_1_GIC_V2m                                  0x02
#define EFI_ACPI_5_1_GIC_V3                                   0x03
#define EFI_ACPI_5_1_GIC_V4                                   0x04

but ACPI_5_1_Errata_B lists: 

&quot;GIC version
0x00: No GIC version is specified, fall back to hardware discovery for GIC version
0x01: GICv1
0x02: GICv2
0x03: GICv3
0x04: GICv4
0x05-0xFF, Reserved for future use.&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>425</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-11 20:24:13 +0000</bug_when>
    <thetext>bug Scrub: confirmed and asssign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>721</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-26 03:33:36 +0000</bug_when>
    <thetext>Fixed at b84621bcbdb411ef17d322affe4f09baa580e15c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>375</bug_id>
          
          <creation_ts>2017-02-09 01:41:07 +0000</creation_ts>
          <short_desc>SCT Test fails if we add default values to few controls in IScsiConfigVfr.vfr</short_desc>
          <delta_ts>2017-02-23 22:40:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>karunakarp</cc>
    
    <cc>naveens</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1415</commentid>
    <comment_count>0</comment_count>
      <attachid>39</attachid>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-02-09 01:41:07 +0000</bug_when>
    <thetext>Created attachment 39
HIIITest SCT Test report

[Issue]
SCT Test fails, if we add default values to few controls in IScsiConfigVfr.vfr

[Reproduction Steps]
1.Add default values to specific controls in  IScsiDxe\IScsiConfigVfr.vfr
        Ex:
        string  varid   = ISCSI_CONFIG_IFR_NVDATA.InitiatorName,
            prompt  = STRING_TOKEN(STR_ISCSI_CONFIG_INIT_NAME),
            help    = STRING_TOKEN(STR_ISCSI_CONFIG_INIT_NAME_HELP),
            flags   = INTERACTIVE,
            key     = KEY_INITIATOR_NAME,
            minsize = ISCSI_NAME_IFR_MIN_SIZE,
            maxsize = ISCSI_NAME_IFR_MAX_SIZE,
            default = STRING_TOKEN(STR_NULL),
          endstring;
     Add same for remaining controls(AttemptName, TargetName , TargetIp, CHAPName, ReverseCHAPName)
2.Perform SCT Test (HIITest), with the above configuration
    a.Navigate to SCT Folder
    b.Execute the following commands to run SCT Test
         sct –r
         sct –u
    c.Goto Test Case Management and select HIITest , press F9 key to run SCT Test
[Expected Result]
  HIITest should PASS

[Actual Result]
HIITest Failed

[Observations]
1.SCT Test was PASSED, If we remove the defaults and perform SCT Test.

2.SCT Test was PASSED, If we give the defaults as 0   (default = 0 ) .If we give 0 we will get ASSERT as 0 is unreferenced string id.

3.SCT Test Failure is happening only for these specific controls

Attached SCT Test Report. I&apos;d like to confirm if it&apos;s something to do with ISCSI or SCT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1424</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-09 19:53:34 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1439</commentid>
    <comment_count>2</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2017-02-14 22:39:48 +0000</bug_when>
    <thetext>Already test on HttpBootDxe\HttpBootConfigVfr.vfr, SCT Test also fails if we add default values to few controls, it may be a common issue in HII or SCT.

Transfer this to Bi dandan for more investigation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1468</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-02-17 00:57:41 +0000</bug_when>
    <thetext>HII codes cause this failure, I will enhance the HII codes to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1527</commentid>
    <comment_count>4</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-02-23 22:40:40 +0000</bug_when>
    <thetext>Fix this issue in Trunk:
https://github.com/tianocore/edk2/commit/bf342907c8ca9fd00253545af25c5bdd5eeef74e</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>39</attachid>
            <date>2017-02-09 01:41:07 +0000</date>
            <delta_ts>2017-02-09 01:41:07 +0000</delta_ts>
            <desc>HIIITest SCT Test report</desc>
            <filename>LogFile.rar</filename>
            <type>application/octet-stream</type>
            <size>2940</size>
            <attacher name="karunakar">karunakarp</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>171</bug_id>
          
          <creation_ts>2016-10-25 11:26:01 +0000</creation_ts>
          <short_desc>Issue creating volatile variable using redirect method</short_desc>
          <delta_ts>2016-12-08 20:35:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>tapandshah</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jaben.carsey</cc>
    
    <cc>ray.ni</cc>
    
    <cc>tapandshah</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>714</commentid>
    <comment_count>0</comment_count>
    <who name="">tapandshah</who>
    <bug_when>2016-10-25 11:26:01 +0000</bug_when>
    <thetext>File simple.txt contains “testdata”. Then using ‘type simple.txt &gt;v testvar’ followed with ‘set’ does not report testvar = testdata.
But if ‘set testvar’ is used, then testvar = testdata is reported correctly and ‘set’ will also start reporting this variable correctly.

Correct behavior should be ‘set’ reporting testvar variable immediately after &gt;v redirect is executed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>772</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-27 20:16:01 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1146</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-12-08 20:35:57 +0000</bug_when>
    <thetext>commit @ c5c994c573f3d4044fa5dde01a81ae5ed479d8fe</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>814</bug_id>
          
          <creation_ts>2017-12-12 04:59:28 +0000</creation_ts>
          <short_desc>Need to add/change the structures in Ipmi header files in MdePkg as per latest Ipmi spec.</short_desc>
          <delta_ts>2018-06-19 01:06:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Younas khan">pmdyounaskhan786</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3212</commentid>
    <comment_count>0</comment_count>
      <attachid>123</attachid>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2017-12-12 04:59:28 +0000</bug_when>
    <thetext>Created attachment 123
Some of the changes needed in Ipmi header files.

Need to add/enhance structures of the Ipmi header files in MdePkg as per latest Ipmi spec. So many structures are missing and need to be added as per spec.

https://www.intel.com/content/dam/www/public/us/en/documents/specification-updates/ipmi-intelligent-platform-mgt-interface-spec-2nd-gen-v2-0-spec-update.pdf

Attached the changes for reference.

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3235</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-14 19:19:40 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3254</commentid>
    <comment_count>2</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2017-12-21 06:42:12 +0000</bug_when>
    <thetext>Hi Hao/Yonghong,

Any update/concerns in this bug?

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3255</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-12-21 07:36:59 +0000</bug_when>
    <thetext>(In reply to Younas khan from comment #2)
&gt; Hi Hao/Yonghong,
&gt; 
&gt; Any update/concerns in this bug?
&gt; 
&gt; Thank you,
&gt; Younas.

Hi Younas,

I am looking into the spec and your attached files. Will inform you as soon as there is any update. Thanks.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3305</commentid>
    <comment_count>4</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-01-02 02:11:37 +0000</bug_when>
    <thetext>Hi Hao,

Any update in this bug?

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3307</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-01-02 02:20:07 +0000</bug_when>
    <thetext>(In reply to Younas khan from comment #4)
&gt; Hi Hao,
&gt; 
&gt; Any update in this bug?
&gt; 
&gt; Thank you,
&gt; Younas.

Hi Younas,

Really sorry for the delay. Currently, I do not have resource on this. I will inform you as soon as there is any update.

Sorry again for this.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3410</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-01-15 03:42:03 +0000</bug_when>
    <thetext>(In reply to Younas khan from comment #4)
&gt; Hi Hao,
&gt; 
&gt; Any update in this bug?
&gt; 
&gt; Thank you,
&gt; Younas.

Hi Younas,

I take a look into the attachment for your changes to the IPMI-related header files, here&apos;s my feedback:

A. General level:
1. I saw you attached the modified files for the changes. Could you help to follow the steps listed at:
https://github.com/tianocore/tianocore.github.io/wiki/Code-Contributions
to submit patches for your changes? Thanks.

2. Could you help to add description comments for those newly added macros/enum to show the section number where they are described in the IMPI spec?

3. Could you also help to include those header files in a test app/driver to make sure the changes won&apos;t break build?


B. File IpmiNetFnApp.h:
1. For IPMI_SET_WATCHDOG_TIMER_REQUEST &amp; IPMI_GET_WATCHDOG_TIMER_RESPONSE:
Please keep the original definition for member TimerActions and TimerUseExpirationFlagsClear, otherwise, it&apos;s an incompatible change, which should be avoided.
The new definitions IPMI_BMC_IPMI_WATCHDOG_TIMER_ACTIONS and IPMI_BMC_IPMI_WATCHDOG_TIMER_EXPIRATION_FLAGS can be used to type cast this field when using.

2. For IPMI_GET_USER_ACCESS_RESPONSE:
The byte offset comment seems not right for me. Also, For byte 3 bit 7:6, I think they are different from the spec you attached.


C. File IpmiNetFnChassis.h:
1. For IPMI_BOOT_DEVICE description comment:
/**
    Parameter 5 data 3 Force Boot Device Selection.
                     ^
                     |
            Should be 2, right?
*/

2. For IPMI_SET_BOOT_FLAG_REQUEST:
typedef struct {
  /// Request data.
  IPMI_SET_BOOT_OPTIONS_REQUEST    Request; &lt;------ Has field &quot;UINT8 ParameterData[1];&quot;, so is this definition correct?
  IPMI_BOOT_OPTIONS_BOOT_FLAGS     Param5;
} IPMI_SET_BOOT_FLAG_REQUEST;

Please help to double confirm macros IPMI_GET_SET_IN_PROGRESS_RESPONSE, IPMI_SET_BOOT_INFO_ACK_REQUEST, IPMI_BOOT_INFO_ACKNOWLEDGE_RESPONSE and IPMI_GET_BOOT_FLAG_RESPONSE. They may have the same issue.

3. Could you help to add prefix (IPMI_BIOS_MUX_CTRL_ maybe) to the following definitions?
#define REQUEST_TO_SYSTEM       0x00
#define FORCE_TO_BMC            0x01
#define FORCE_TO_SYSTEM         0x02

4. For IPMI_GET_SET_IN_PROGRESS_RESPONSE:
typedef struct {
  /// Response data.
  IPMI_GET_BOOT_OPTIONS_RESPONSE          Response; &lt;------ Has field &quot;UINT8 ParameterData[1];&quot;, so is this definition correct?
  /// Set in progress response.
  IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_0  Param0;
} IPMI_GET_SET_IN_PROGRESS_RESPONSE;

Also, there are two definitions for IPMI_GET_SET_IN_PROGRESS_RESPONSE, please help to double check.
Besides, &quot;IPMI_GET_SET_IN_PROGRESS_RESPONSE&quot; needs the definition for IPMI_GET_BOOT_OPTIONS_RESPONSE. Otherwise, it will cause build failure.

5. Please do not remove definition &quot;IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_5&quot;, this is an incompatible change, which should be avoided.
I suggest to use:
typedef IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_5 DUPLICATE_MACRO;
for a new macro with the same definition.

6. Please do not modify macro IPMI_BOOT_OPTIONS_PARAMETERS, it&apos;s an incompatible change, which should be avoided.


D. File IpmiNetFnStorage.h:
1. For IPMI_FRU_COMMON_HEADER, IPMI_FRU_MULTI_RECORD_HEADER and IPMI_SYSTEM_UUID_SUB_RECORD_WITH_CHECKSUM, I cannot find their definitions in the spec you attached. Could you help to add description comments for them that shows in which section of the spec they are defined?

2. For the removal of member &apos;NextRecordId&apos; in IPMI_SDR_RECORD_STRUCT_C0 and IPMI_SDR_RECORD_STRUCT_HEADER, I am not very sure about this change. Let me confirm with the original code contributor, will inform you as soon as I get feedbacks.

3. Please add prefix for macros GET_SEL_ALLOCATION_INFO_COMMAND_SUPPORTED_MASK..OVERFLOW_FLAG_MASK.
Maybe GET_SEL_ALLOCATION_INFO_COMMAND_SUPPORTED_MASK -&gt; IPMI_GET_SEL_INFO_OPER_SUPPORT_GET_SEL_ALLOCATION_INFO

4. For IPMI_ADD_SEL_ENTRY_REQUEST:
/**
    Add sel entry command response structure.
                             ^
                             |
                          request?
*/
typedef struct {
  UINT16  RecordId; ///&lt; Record ID added. LS byte first.
} IPMI_ADD_SEL_ENTRY_REQUEST;

Besides, is the above macro correct? I found it&apos;s different from the content in Table 31-6.

5. For SEL_RECORD_TYPE_INVALID_TO_DELETE and SEL_ERASE_IN_PROGRESS, could you help to add proper prefix (IPMI_DELETE_SEL_RESP_) for them?

6. Please do not change the name for macro &quot;IPMI_DELETE_SEL_REQUEST&quot;, it is an incompatible change, which should be avoided.

7. For macros C_CHAR_ASCII_VALUE..INVALID_RESERVATION_ID, could you help to add proper prefix (begin with IMPI_XXXX) for them?

8. For macros SOFTWARE_ID_FROM_GENERATOR_ID..CHANNEL_NUMBER_FROM_GENERATOR_ID, could you help to add proper prefix (begin with IMPI_XXXX) for them?

9. For macros BIOS_ID_RANGE_START..TERMINAL_CONSOLE_ID, could you help to add proper prefix (begin with IMPI_XXXX) for them?


E. File IpmiNetFnTransport.h:
1. For macro IPMI_SET_IPV6_ADDRESS, it needs the definition for IPMI_IPV6_ADDRESS_PARAM. Otherwise, build will fail.

2. For macros REQUEST_ACCEPTED and REQUEST_REJECTED, please add prefix (IPMI_SET_SERIAL_MODEM_MUX_COMMAND_RESPONSE_ maybe) for them.


Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3432</commentid>
    <comment_count>7</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-01-17 04:51:47 +0000</bug_when>
    <thetext>Hi Hao,

Please find my comments for your queries.

(In reply to Hao Wu from comment #6)
&gt; (In reply to Younas khan from comment #4)
&gt; &gt; Hi Hao,
&gt; &gt; 
&gt; &gt; Any update in this bug?
&gt; &gt; 
&gt; &gt; Thank you,
&gt; &gt; Younas.
&gt; 
&gt; Hi Younas,
&gt; 
&gt; I take a look into the attachment for your changes to the IPMI-related
&gt; header files, here&apos;s my feedback:
&gt; 
&gt; A. General level:
&gt; 1. I saw you attached the modified files for the changes. Could you help to
&gt; follow the steps listed at:
&gt; https://github.com/tianocore/tianocore.github.io/wiki/Code-Contributions
&gt; to submit patches for your changes? Thanks.
&gt; 
&gt; 2. Could you help to add description comments for those newly added
&gt; macros/enum to show the section number where they are described in the IMPI
&gt; spec?
Yes, we can add the description. But I did not find any old structures in Ipmi files has section information. Are you going to add newly for all structures/enums?

&gt; 
&gt; 3. Could you also help to include those header files in a test app/driver to
&gt; make sure the changes won&apos;t break build?
&gt; 
I am using the structures and did not face any build errors.

&gt; 
&gt; B. File IpmiNetFnApp.h:
&gt; 1. For IPMI_SET_WATCHDOG_TIMER_REQUEST &amp; IPMI_GET_WATCHDOG_TIMER_RESPONSE:
&gt; Please keep the original definition for member TimerActions and
&gt; TimerUseExpirationFlagsClear, otherwise, it&apos;s an incompatible change, which
&gt; should be avoided.
&gt; The new definitions IPMI_BMC_IPMI_WATCHDOG_TIMER_ACTIONS and
&gt; IPMI_BMC_IPMI_WATCHDOG_TIMER_EXPIRATION_FLAGS can be used to type cast this
&gt; field when using.
Ok, we can have new structures and avoid incompatibility changes. But it is not a good way because user need to define members of IPMI_BMC_IPMI_WATCHDOG_TIMER_ACTIONS and IPMI_BMC_IPMI_WATCHDOG_TIMER_EXPIRATION_FLAGS and again typecast. If we add this fields, then we can avoid typecasting where ever using.

&gt; 
&gt; 2. For IPMI_GET_USER_ACCESS_RESPONSE:
&gt; The byte offset comment seems not right for me. Also, For byte 3 bit 7:6, I
&gt; think they are different from the spec you attached.
Yes, we can change it.

&gt; 
&gt; 
&gt; C. File IpmiNetFnChassis.h:
&gt; 1. For IPMI_BOOT_DEVICE description comment:
&gt; /**
&gt;     Parameter 5 data 3 Force Boot Device Selection.
&gt;                      ^
&gt;                      |
&gt;             Should be 2, right?
&gt; */
Yes, You are correct.

&gt; 
&gt; 2. For IPMI_SET_BOOT_FLAG_REQUEST:
&gt; typedef struct {
&gt;   /// Request data.
&gt;   IPMI_SET_BOOT_OPTIONS_REQUEST    Request; &lt;------ Has field &quot;UINT8
&gt; ParameterData[1];&quot;, so is this definition correct?
&gt;   IPMI_BOOT_OPTIONS_BOOT_FLAGS     Param5;
&gt; } IPMI_SET_BOOT_FLAG_REQUEST;
&gt; 
&gt; Please help to double confirm macros IPMI_GET_SET_IN_PROGRESS_RESPONSE,
&gt; IPMI_SET_BOOT_INFO_ACK_REQUEST, IPMI_BOOT_INFO_ACKNOWLEDGE_RESPONSE and
&gt; IPMI_GET_BOOT_FLAG_RESPONSE. They may have the same issue.
&gt; 
Yes, can we remove ParameterData[1] from IPMI_SET_BOOT_OPTIONS_REQUEST?

&gt; 3. Could you help to add prefix (IPMI_BIOS_MUX_CTRL_ maybe) to the following
&gt; definitions?
&gt; #define REQUEST_TO_SYSTEM       0x00
&gt; #define FORCE_TO_BMC            0x01
&gt; #define FORCE_TO_SYSTEM         0x02
&gt; 
Ok, we can add.

&gt; 4. For IPMI_GET_SET_IN_PROGRESS_RESPONSE:
&gt; typedef struct {
&gt;   /// Response data.
&gt;   IPMI_GET_BOOT_OPTIONS_RESPONSE          Response; &lt;------ Has field &quot;UINT8
&gt; ParameterData[1];&quot;, so is this definition correct?
&gt;   /// Set in progress response.
&gt;   IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_0  Param0;
&gt; } IPMI_GET_SET_IN_PROGRESS_RESPONSE;
&gt; 
&gt; Also, there are two definitions for IPMI_GET_SET_IN_PROGRESS_RESPONSE,
&gt; please help to double check.
&gt; Besides, &quot;IPMI_GET_SET_IN_PROGRESS_RESPONSE&quot; needs the definition for
&gt; IPMI_GET_BOOT_OPTIONS_RESPONSE. Otherwise, it will cause build failure.
&gt; 
Yes, can we remove ParameterData[1] from IPMI_GET_BOOT_OPTIONS_RESPONSE?

&gt; 5. Please do not remove definition &quot;IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_5&quot;,
&gt; this is an incompatible change, which should be avoided.
&gt; I suggest to use:
&gt; typedef IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_5 DUPLICATE_MACRO;
&gt; for a new macro with the same definition.
&gt; 
Can we add the missed fields in existing IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_5 structure? because as per Ipmi spec, the structure is not correct.

&gt; 6. Please do not modify macro IPMI_BOOT_OPTIONS_PARAMETERS, it&apos;s an
&gt; incompatible change, which should be avoided.
&gt; 
The members in structure are mis-spelt, so its better to change.

&gt; 
&gt; D. File IpmiNetFnStorage.h:
&gt; 1. For IPMI_FRU_COMMON_HEADER, IPMI_FRU_MULTI_RECORD_HEADER and
&gt; IPMI_SYSTEM_UUID_SUB_RECORD_WITH_CHECKSUM, I cannot find their definitions
&gt; in the spec you attached. Could you help to add description comments for
&gt; them that shows in which section of the spec they are defined?
&gt; 
You can refer FRU spec for these definitions.
https://www.intel.com/content/dam/www/public/us/en/documents/specification-updates/ipmi-platform-mgt-fru-info-storage-def-v1-0-rev-1-3-spec-update.pdf

&gt; 2. For the removal of member &apos;NextRecordId&apos; in IPMI_SDR_RECORD_STRUCT_C0 and
&gt; IPMI_SDR_RECORD_STRUCT_HEADER, I am not very sure about this change. Let me
&gt; confirm with the original code contributor, will inform you as soon as I get
&gt; feedbacks.
You can check Record header in 43. Sensor Data Record Formats in Ipmi spec which shows NextRecordId is not member of record header.

&gt; 
&gt; 3. Please add prefix for macros
&gt; GET_SEL_ALLOCATION_INFO_COMMAND_SUPPORTED_MASK..OVERFLOW_FLAG_MASK.
&gt; Maybe GET_SEL_ALLOCATION_INFO_COMMAND_SUPPORTED_MASK -&gt;
&gt; IPMI_GET_SEL_INFO_OPER_SUPPORT_GET_SEL_ALLOCATION_INFO
&gt; 
Ok, we can add.

&gt; 4. For IPMI_ADD_SEL_ENTRY_REQUEST:
&gt; /**
&gt;     Add sel entry command response structure.
&gt;                              ^
&gt;                              |
&gt;                           request?
&gt; */
&gt; typedef struct {
&gt;   UINT16  RecordId; ///&lt; Record ID added. LS byte first.
&gt; } IPMI_ADD_SEL_ENTRY_REQUEST;
&gt; 
&gt; Besides, is the above macro correct? I found it&apos;s different from the content
&gt; in Table 31-6.
&gt; 
Yes, you are correct, we can change.

&gt; 5. For SEL_RECORD_TYPE_INVALID_TO_DELETE and SEL_ERASE_IN_PROGRESS, could
&gt; you help to add proper prefix (IPMI_DELETE_SEL_RESP_) for them?
&gt; 
Ok.

&gt; 6. Please do not change the name for macro &quot;IPMI_DELETE_SEL_REQUEST&quot;, it is
&gt; an incompatible change, which should be avoided.
&gt; 
Just corrected the name as per command name in Ipmi spec.

&gt; 7. For macros C_CHAR_ASCII_VALUE..INVALID_RESERVATION_ID, could you help to
&gt; add proper prefix (begin with IMPI_XXXX) for them?
&gt; 
&gt; 8. For macros
&gt; SOFTWARE_ID_FROM_GENERATOR_ID..CHANNEL_NUMBER_FROM_GENERATOR_ID, could you
&gt; help to add proper prefix (begin with IMPI_XXXX) for them?
&gt; 
&gt; 9. For macros BIOS_ID_RANGE_START..TERMINAL_CONSOLE_ID, could you help to
&gt; add proper prefix (begin with IMPI_XXXX) for them?
&gt; 
Ok, we can have prefix.

&gt; 
&gt; E. File IpmiNetFnTransport.h:
&gt; 1. For macro IPMI_SET_IPV6_ADDRESS, it needs the definition for
&gt; IPMI_IPV6_ADDRESS_PARAM. Otherwise, build will fail.
IPMI_IPV6_ADDRESS_PARAM is defined in same header file. I will move it before using it in IPMI_SET_IPV6_ADDRESS.

&gt; 
&gt; 2. For macros REQUEST_ACCEPTED and REQUEST_REJECTED, please add prefix
&gt; (IPMI_SET_SERIAL_MODEM_MUX_COMMAND_RESPONSE_ maybe) for them.
&gt; 
Ok.

&gt; 
&gt; Best Regards,
&gt; Hao Wu

I will update you the changes based on your comments.
The changes in all Ipmi header files are just few commands, still so many other command structures are missing and you need to have those structures as well.

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3505</commentid>
    <comment_count>8</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-01-29 06:18:06 +0000</bug_when>
    <thetext>Hi Hao,

Can you reply to my comments in Comment #7?

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3508</commentid>
    <comment_count>9</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-01-29 19:33:39 +0000</bug_when>
    <thetext>(In reply to Younas khan from comment #8)
&gt; Hi Hao,
&gt; 
&gt; Can you reply to my comments in Comment #7?
&gt; 
&gt; Thank you,
&gt; Younas.

Hi Younas,

I am still waiting for the confirmation of some changes you mentioned with the origin contributor of those header files.

I will inform you as soon as receiving the feedback. Sorry for the possible delay.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3661</commentid>
    <comment_count>10</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-03-07 11:11:57 +0000</bug_when>
    <thetext>Hi Hao,

Any update in this bug?

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3890</commentid>
    <comment_count>11</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-04-19 08:03:55 +0000</bug_when>
    <thetext>Hi Hao,

Any update in this bug?

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3938</commentid>
    <comment_count>12</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-04-26 22:10:29 +0000</bug_when>
    <thetext>(In reply to Younas khan from comment #7)
&gt; Hi Hao,
&gt; 
&gt; Please find my comments for your queries.
&gt; 
&gt; (In reply to Hao Wu from comment #6)
&gt; &gt; (In reply to Younas khan from comment #4)
&gt; &gt; &gt; Hi Hao,
&gt; &gt; &gt; 
&gt; &gt; &gt; Any update in this bug?
&gt; &gt; &gt; 
&gt; &gt; &gt; Thank you,
&gt; &gt; &gt; Younas.
&gt; &gt; 
&gt; &gt; Hi Younas,
&gt; &gt; 
&gt; &gt; I take a look into the attachment for your changes to the IPMI-related
&gt; &gt; header files, here&apos;s my feedback:
&gt; &gt; 
&gt; &gt; A. General level:
&gt; &gt; 1. I saw you attached the modified files for the changes. Could you help to
&gt; &gt; follow the steps listed at:
&gt; &gt; https://github.com/tianocore/tianocore.github.io/wiki/Code-Contributions
&gt; &gt; to submit patches for your changes? Thanks.
&gt; &gt; 
&gt; &gt; 2. Could you help to add description comments for those newly added
&gt; &gt; macros/enum to show the section number where they are described in the IMPI
&gt; &gt; spec?
&gt; Yes, we can add the description. But I did not find any old structures in
&gt; Ipmi files has section information. Are you going to add newly for all
&gt; structures/enums?
&gt; 
&gt; &gt; 
&gt; &gt; 3. Could you also help to include those header files in a test app/driver to
&gt; &gt; make sure the changes won&apos;t break build?
&gt; &gt; 
&gt; I am using the structures and did not face any build errors.
&gt; 
&gt; &gt; 
&gt; &gt; B. File IpmiNetFnApp.h:
&gt; &gt; 1. For IPMI_SET_WATCHDOG_TIMER_REQUEST &amp; IPMI_GET_WATCHDOG_TIMER_RESPONSE:
&gt; &gt; Please keep the original definition for member TimerActions and
&gt; &gt; TimerUseExpirationFlagsClear, otherwise, it&apos;s an incompatible change, which
&gt; &gt; should be avoided.
&gt; &gt; The new definitions IPMI_BMC_IPMI_WATCHDOG_TIMER_ACTIONS and
&gt; &gt; IPMI_BMC_IPMI_WATCHDOG_TIMER_EXPIRATION_FLAGS can be used to type cast this
&gt; &gt; field when using.
&gt; Ok, we can have new structures and avoid incompatibility changes. But it is
&gt; not a good way because user need to define members of
&gt; IPMI_BMC_IPMI_WATCHDOG_TIMER_ACTIONS and
&gt; IPMI_BMC_IPMI_WATCHDOG_TIMER_EXPIRATION_FLAGS and again typecast. If we add
&gt; this fields, then we can avoid typecasting where ever using.

We will update the &apos;TimerActions&apos; field to a bit map structure definition.
Also, we will have another patch right after to replace all the bit map definitions to union types in the IPMI header files. This will let the user to access both the whole data and separate bit fields.

&gt; 
&gt; &gt; 
&gt; &gt; 2. For IPMI_GET_USER_ACCESS_RESPONSE:
&gt; &gt; The byte offset comment seems not right for me. Also, For byte 3 bit 7:6, I
&gt; &gt; think they are different from the spec you attached.
&gt; Yes, we can change it.
&gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; C. File IpmiNetFnChassis.h:
&gt; &gt; 1. For IPMI_BOOT_DEVICE description comment:
&gt; &gt; /**
&gt; &gt;     Parameter 5 data 3 Force Boot Device Selection.
&gt; &gt;                      ^
&gt; &gt;                      |
&gt; &gt;             Should be 2, right?
&gt; &gt; */
&gt; Yes, You are correct.
&gt; 
&gt; &gt; 
&gt; &gt; 2. For IPMI_SET_BOOT_FLAG_REQUEST:
&gt; &gt; typedef struct {
&gt; &gt;   /// Request data.
&gt; &gt;   IPMI_SET_BOOT_OPTIONS_REQUEST    Request; &lt;------ Has field &quot;UINT8
&gt; &gt; ParameterData[1];&quot;, so is this definition correct?
&gt; &gt;   IPMI_BOOT_OPTIONS_BOOT_FLAGS     Param5;
&gt; &gt; } IPMI_SET_BOOT_FLAG_REQUEST;
&gt; &gt; 
&gt; &gt; Please help to double confirm macros IPMI_GET_SET_IN_PROGRESS_RESPONSE,
&gt; &gt; IPMI_SET_BOOT_INFO_ACK_REQUEST, IPMI_BOOT_INFO_ACKNOWLEDGE_RESPONSE and
&gt; &gt; IPMI_GET_BOOT_FLAG_RESPONSE. They may have the same issue.
&gt; &gt; 
&gt; Yes, can we remove ParameterData[1] from IPMI_SET_BOOT_OPTIONS_REQUEST?

I think you can type cast &apos;ParameterData[1]&apos; to IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_0~7 for usage.

&gt; 
&gt; &gt; 3. Could you help to add prefix (IPMI_BIOS_MUX_CTRL_ maybe) to the following
&gt; &gt; definitions?
&gt; &gt; #define REQUEST_TO_SYSTEM       0x00
&gt; &gt; #define FORCE_TO_BMC            0x01
&gt; &gt; #define FORCE_TO_SYSTEM         0x02
&gt; &gt; 
&gt; Ok, we can add.
&gt; 
&gt; &gt; 4. For IPMI_GET_SET_IN_PROGRESS_RESPONSE:
&gt; &gt; typedef struct {
&gt; &gt;   /// Response data.
&gt; &gt;   IPMI_GET_BOOT_OPTIONS_RESPONSE          Response; &lt;------ Has field &quot;UINT8
&gt; &gt; ParameterData[1];&quot;, so is this definition correct?
&gt; &gt;   /// Set in progress response.
&gt; &gt;   IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_0  Param0;
&gt; &gt; } IPMI_GET_SET_IN_PROGRESS_RESPONSE;
&gt; &gt; 
&gt; &gt; Also, there are two definitions for IPMI_GET_SET_IN_PROGRESS_RESPONSE,
&gt; &gt; please help to double check.
&gt; &gt; Besides, &quot;IPMI_GET_SET_IN_PROGRESS_RESPONSE&quot; needs the definition for
&gt; &gt; IPMI_GET_BOOT_OPTIONS_RESPONSE. Otherwise, it will cause build failure.
&gt; &gt; 
&gt; Yes, can we remove ParameterData[1] from IPMI_GET_BOOT_OPTIONS_RESPONSE?

I think you can type cast &apos;ParameterData[1]&apos; to IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_0~7 for usage.

&gt; 
&gt; &gt; 5. Please do not remove definition &quot;IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_5&quot;,
&gt; &gt; this is an incompatible change, which should be avoided.
&gt; &gt; I suggest to use:
&gt; &gt; typedef IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_5 DUPLICATE_MACRO;
&gt; &gt; for a new macro with the same definition.
&gt; &gt; 
&gt; Can we add the missed fields in existing
&gt; IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_5 structure? because as per Ipmi spec,
&gt; the structure is not correct.

Yes, you are right.
We add the newly introduced fields to IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_5 structure.

&gt; 
&gt; &gt; 6. Please do not modify macro IPMI_BOOT_OPTIONS_PARAMETERS, it&apos;s an
&gt; &gt; incompatible change, which should be avoided.
&gt; &gt; 
&gt; The members in structure are mis-spelt, so its better to change.

I think both &apos;ParmX&apos;(origin one) and &apos;ParamX&apos; (your change) are valid abbreviation for word &apos;parameter&apos;. Let us keep them unchanged.

&gt; 
&gt; &gt; 
&gt; &gt; D. File IpmiNetFnStorage.h:
&gt; &gt; 1. For IPMI_FRU_COMMON_HEADER, IPMI_FRU_MULTI_RECORD_HEADER and
&gt; &gt; IPMI_SYSTEM_UUID_SUB_RECORD_WITH_CHECKSUM, I cannot find their definitions
&gt; &gt; in the spec you attached. Could you help to add description comments for
&gt; &gt; them that shows in which section of the spec they are defined?
&gt; &gt; 
&gt; You can refer FRU spec for these definitions.
&gt; https://www.intel.com/content/dam/www/public/us/en/documents/specification-
&gt; updates/ipmi-platform-mgt-fru-info-storage-def-v1-0-rev-1-3-spec-update.pdf

I still cannot find the relative definition for IPMI_SYSTEM_UUID_SUB_RECORD_WITH_CHECKSUM
within Platform Management FRU Information Storage Definition v1.0 spec. Please
kindly help to point me which section defines the structure. Thanks.

Also, we will put these 3 structure definitions separately to a new file named IpmiFruInformationStorage.h

&gt; 
&gt; &gt; 2. For the removal of member &apos;NextRecordId&apos; in IPMI_SDR_RECORD_STRUCT_C0 and
&gt; &gt; IPMI_SDR_RECORD_STRUCT_HEADER, I am not very sure about this change. Let me
&gt; &gt; confirm with the original code contributor, will inform you as soon as I get
&gt; &gt; feedbacks.
&gt; You can check Record header in 43. Sensor Data Record Formats in Ipmi spec
&gt; which shows NextRecordId is not member of record header.

You are right that the &apos;NextRecordId&apos; field should be removed in struct IPMI_SDR_RECORD_STRUCT_C0 and IPMI_SDR_RECORD_STRUCT_HEADER.

&gt; 
&gt; &gt; 
&gt; &gt; 3. Please add prefix for macros
&gt; &gt; GET_SEL_ALLOCATION_INFO_COMMAND_SUPPORTED_MASK..OVERFLOW_FLAG_MASK.
&gt; &gt; Maybe GET_SEL_ALLOCATION_INFO_COMMAND_SUPPORTED_MASK -&gt;
&gt; &gt; IPMI_GET_SEL_INFO_OPER_SUPPORT_GET_SEL_ALLOCATION_INFO
&gt; &gt; 
&gt; Ok, we can add.
&gt; 
&gt; &gt; 4. For IPMI_ADD_SEL_ENTRY_REQUEST:
&gt; &gt; /**
&gt; &gt;     Add sel entry command response structure.
&gt; &gt;                              ^
&gt; &gt;                              |
&gt; &gt;                           request?
&gt; &gt; */
&gt; &gt; typedef struct {
&gt; &gt;   UINT16  RecordId; ///&lt; Record ID added. LS byte first.
&gt; &gt; } IPMI_ADD_SEL_ENTRY_REQUEST;
&gt; &gt; 
&gt; &gt; Besides, is the above macro correct? I found it&apos;s different from the content
&gt; &gt; in Table 31-6.
&gt; &gt; 
&gt; Yes, you are correct, we can change.
&gt; 
&gt; &gt; 5. For SEL_RECORD_TYPE_INVALID_TO_DELETE and SEL_ERASE_IN_PROGRESS, could
&gt; &gt; you help to add proper prefix (IPMI_DELETE_SEL_RESP_) for them?
&gt; &gt; 
&gt; Ok.
&gt; 
&gt; &gt; 6. Please do not change the name for macro &quot;IPMI_DELETE_SEL_REQUEST&quot;, it is
&gt; &gt; an incompatible change, which should be avoided.
&gt; &gt; 
&gt; Just corrected the name as per command name in Ipmi spec.

You are right. We will change the structure name.

&gt; 
&gt; &gt; 7. For macros C_CHAR_ASCII_VALUE..INVALID_RESERVATION_ID, could you help to
&gt; &gt; add proper prefix (begin with IMPI_XXXX) for them?
&gt; &gt; 
&gt; &gt; 8. For macros
&gt; &gt; SOFTWARE_ID_FROM_GENERATOR_ID..CHANNEL_NUMBER_FROM_GENERATOR_ID, could you
&gt; &gt; help to add proper prefix (begin with IMPI_XXXX) for them?
&gt; &gt; 
&gt; &gt; 9. For macros BIOS_ID_RANGE_START..TERMINAL_CONSOLE_ID, could you help to
&gt; &gt; add proper prefix (begin with IMPI_XXXX) for them?
&gt; &gt; 
&gt; Ok, we can have prefix.
&gt; 
&gt; &gt; 
&gt; &gt; E. File IpmiNetFnTransport.h:
&gt; &gt; 1. For macro IPMI_SET_IPV6_ADDRESS, it needs the definition for
&gt; &gt; IPMI_IPV6_ADDRESS_PARAM. Otherwise, build will fail.
&gt; IPMI_IPV6_ADDRESS_PARAM is defined in same header file. I will move it
&gt; before using it in IPMI_SET_IPV6_ADDRESS.
&gt; 
&gt; &gt; 
&gt; &gt; 2. For macros REQUEST_ACCEPTED and REQUEST_REJECTED, please add prefix
&gt; &gt; (IPMI_SET_SERIAL_MODEM_MUX_COMMAND_RESPONSE_ maybe) for them.
&gt; &gt; 
&gt; Ok.
&gt; 
&gt; &gt; 
&gt; &gt; Best Regards,
&gt; &gt; Hao Wu
&gt; 
&gt; I will update you the changes based on your comments.
&gt; The changes in all Ipmi header files are just few commands, still so many
&gt; other command structures are missing and you need to have those structures
&gt; as well.
&gt; 
&gt; Thank you,
&gt; Younas.

Besides, below are the extra changes I made upon you provided header files:

A. File IpmiNetFnApp.h:
Refine structure IPMI_BMC_IPMI_WATCHDOG_TIMER_EXPIRATION_FLAGS to bit macro definitions.

B. File IpmiNetFnChassis.h:
Not adding structures IPMI_SET_BOOT_FLAG_REQUEST, IPMI_GET_SET_IN_PROGRESS_RESPONSE,
IPMI_SET_BOOT_INFO_ACK_REQUEST, IPMI_BOOT_INFO_ACKNOWLEDGE_RESPONSE, IPMI_GET_SET_IN_PROGRESS_RESPONSE
and IPMI_GET_BOOT_FLAG_RESPONSE.

I think we can use IPMI_SET_BOOT_OPTIONS_REQUEST &amp; IPMI_SET_BOOT_OPTIONS_REQUEST
and type cast the &apos;ParameterData[1]&apos; field IPMI_BOOT_OPTIONS_RESPONSE_PARAMETER_0~7
for usage.

C. IpmiNetFnTransport.h:
Not adding the specific structures for &quot;Set/Get Lan Configuration Parameters&quot; commands.

Instead I added the definition for:
IPMI_SET_LAN_CONFIGURATION_PARAMETERS_COMMAND_REQUEST
IPMI_GET_LAN_CONFIGURATION_PARAMETERS_REQUEST
IPMI_GET_LAN_CONFIGURATION_PARAMETERS_RESPONSE

We can use them and type cast the field &apos;ParameterData[0]&apos; to other structures for usage.


In summary, I have uploaded a RFC patch for the changes, or you can review the changes at URL: https://github.com/hwu25/edk2/tree/Ipmi_headers_update
Could you help to take a look at it and see if it meets your request. Thanks in advance.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3941</commentid>
    <comment_count>13</comment_count>
      <attachid>167</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-04-26 22:15:42 +0000</bug_when>
    <thetext>Created attachment 167
Patch file for updated changes

Also available at:
https://github.com/hwu25/edk2/tree/Ipmi_headers_update</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4160</commentid>
    <comment_count>14</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-06-19 01:06:04 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/25517f7ce35b4dba78660a67ecb6be0c211e62f1</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>123</attachid>
            <date>2017-12-12 04:59:28 +0000</date>
            <delta_ts>2017-12-12 04:59:28 +0000</delta_ts>
            <desc>Some of the changes needed in Ipmi header files.</desc>
            <filename>EDK2_changes_v2.7z</filename>
            <type>application/octet-stream</type>
            <size>14285</size>
            <attacher name="Younas khan">pmdyounaskhan786</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>167</attachid>
            <date>2018-04-26 22:15:42 +0000</date>
            <delta_ts>2018-04-26 22:15:42 +0000</delta_ts>
            <desc>Patch file for updated changes</desc>
            <filename>0001-MdePkg-IndustryStandard-Ipmi-Update-IPMI-header-file.patch</filename>
            <type>text/plain</type>
            <size>46569</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>644</bug_id>
          
          <creation_ts>2017-07-20 18:25:10 +0000</creation_ts>
          <short_desc>If BABBLE_ERROR occurs during XhcExecTransfer, the EP is halted and must be recovered</short_desc>
          <delta_ts>2017-07-26 12:18:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2483</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2017-07-20 18:25:10 +0000</bug_when>
    <thetext>AARCH64, XHCI transfers.

Currently the code in the Xhci.c checks for EFI_USB_ERR_STALL error returned as a TransferResult (line 804) and then proceed to XhcRecoverhaltedEndPoint.
However, if EFI_USB_ERR_BABBLE_ERROR happened, nothing is done, and UEFI stalls later thinking everything is OK, due to EP is halted.
Instead of 
if (*TransferResult == EFI_USB_ERR_STALL) {
Line 804 should read
if ((*TransferResult == EFI_USB_ERR_STALL) || (*TransferResult == EFI_USB_ERR_BABBLE)) {

Thank you,
Vladimir</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2491</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-20 20:14:47 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2501</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-07-24 23:14:10 +0000</bug_when>
    <thetext>Confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2506</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-07-26 04:24:29 +0000</bug_when>
    <thetext>Fixed at  https://github.com/tianocore/edk2/commit/958a81813bd9790b04199fce077918d08257e1a4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2508</commentid>
    <comment_count>4</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2017-07-26 12:18:43 +0000</bug_when>
    <thetext>Thanks a lot for fixing this promptly!

Vladimir</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>108</bug_id>
          
          <creation_ts>2016-08-31 00:29:07 +0000</creation_ts>
          <short_desc>Capsule Status Variable (UEFI spec -  Section 7.5.6)</short_desc>
          <delta_ts>2016-11-13 20:01:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ankit Singh">ankit_singh3</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>jiewen.yao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>458</commentid>
    <comment_count>0</comment_count>
      <attachid>8</attachid>
    <who name="Ankit Singh">ankit_singh3</who>
    <bug_when>2016-08-31 00:29:07 +0000</bug_when>
    <thetext>Created attachment 8
Detailed Discussion.

I looked into latest EDK2 code and could not find Capsule Status Variable being populated and stored/saved anywhere.
Please refer the attached mail for detailed description.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>479</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-09-10 20:14:48 +0000</bug_when>
    <thetext>USWG clarifies corner cases:
1) Zero payload is a legal case. An FMP can only have drivers without payload.

2) If there is zero payload, there is no need to report Capsule Status Variable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>538</commentid>
    <comment_count>2</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-29 20:27:11 +0000</bug_when>
    <thetext>Bug Scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>892</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-11-13 20:01:29 +0000</bug_when>
    <thetext>resolved in d2a160304e9358eece635b563dc6a74ec250f1f0</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>8</attachid>
            <date>2016-08-31 00:29:07 +0000</date>
            <delta_ts>2016-08-31 00:29:07 +0000</delta_ts>
            <desc>Detailed Discussion.</desc>
            <filename>RE   EDK2  DxeCapsuleLib returns Status Issue.msg</filename>
            <type>application/octet-stream</type>
            <size>59904</size>
            <attacher name="Ankit Singh">ankit_singh3</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>579</bug_id>
          
          <creation_ts>2017-05-31 12:35:24 +0000</creation_ts>
          <short_desc>MAX_PATH is too short for VfrCompile</short_desc>
          <delta_ts>2017-08-04 02:42:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Daniel Díaz">daniel.diaz</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>daniel.diaz</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2215</commentid>
    <comment_count>0</comment_count>
    <who name="Daniel Díaz">daniel.diaz</who>
    <bug_when>2017-05-31 12:35:24 +0000</bug_when>
    <thetext>MAX_PATH is currently set to 255 in EfiVfr.h:22, which limits VfrCompile&apos;s ability to deal with buried files, as is often the case in OpenEmbedded builds:

  VfrCompile: ERROR 1003: Invalid option value
    VFR file name /media/ddiaz/exterdos/oe/oe-rpb-morty-wayland/build-20170525-wayland/tmp-rpb_wayland-glibc/work/hikey-linaro-linux/edk2-hikey/0.0+AUTOINC+06e4def583-4adfdd06f1-r0/git/Build/HiKey/RELEASE_GCC49/AARCH64/MdeModulePkg/Universal/Network/Ip4Dxe/Ip4Dxe/OUTPUT/Ip4Config2.i is too long.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2219</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-31 21:06:27 +0000</bug_when>
    <thetext>take a view offline</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2560</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-08-04 02:42:09 +0000</bug_when>
    <thetext>Fix it on EDK2 Trunk:
https://github.com/tianocore/edk2/commit/ba78032bc8c9f74a4c4cc4917a3284a51840ec70</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>957</bug_id>
          
          <creation_ts>2018-05-24 16:02:44 +0000</creation_ts>
          <short_desc>move PciCapLib, PciCapPciSegmentLib, PciCapPciIoLib from OvmfPkg up to Mde*Pkg, or to another core utility package</short_desc>
          <delta_ts>2018-09-12 15:55:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4010</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-05-24 16:02:44 +0000</bug_when>
    <thetext>Consider the following patch series:

  [edk2] [PATCH v2 0/7] OvmfPkg, ArmVirtPkg: add and use PCI(E) Capabilities
                        Library
  https://lists.01.org/pipermail/edk2-devel/2018-May/025069.html

committed as:

  1  392a31467f41 OvmfPkg: introduce PciCapLib
  2  6a744d40d0c7 OvmfPkg: introduce PciCapPciSegmentLib
  3  02b9a8343ffc OvmfPkg: introduce PciCapPciIoLib
  4  e9b2cf7bf015 OvmfPkg: resolve PciCapLib, PciCapPciSegmentLib,
                  PciCapPciIoLib
  5  65cefddcdece ArmVirtPkg: resolve PciCapLib, PciCapPciSegmentLib,
                  PciCapPciIoLib
  6  3815101ff854 OvmfPkg/PciHotPlugInitDxe: convert to PciCapLib
  7  5685a243b6f8 OvmfPkg/Virtio10Dxe: convert to PciCapLib

The first three patches introduce the library classes PciCapLib,
PciCapPciSegmentLib, PciCapPciIoLib, each with its sole intended library
instance.

These libraries are currently consumed only by OvmfPkg and ArmVirtPkg
platforms (see patches 4-7), but the libraries are not specific to
virtualization. The original intent was to enable physical PCI(E) device
drivers as well -- platform PEIMs, platform DXE drivers, and UEFI drivers --
to simplify their PCI caplist handling. (One example could be PciBusDxe
itself.)

Therefore, in the longer term, we should upstream these libraries to
Mde*Pkg, or perhaps to a new (platform- and ISA-independent) core
&quot;UtilityPkg&quot;. (Drivers in MdeModulePkg should be permitted to consume
&quot;UtilityPkg&quot; content.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4012</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-24 20:08:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4915</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-12 15:55:38 +0000</bug_when>
    <thetext>I&apos;ve accepted that these libs will remain under OvmfPkg for the foreseeable future. So I&apos;m no longer pursuing this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>38</bug_id>
          
          <creation_ts>2016-07-20 19:40:13 +0000</creation_ts>
          <short_desc>Use-after-free in StdLib ParsePath()</short_desc>
          <delta_ts>2021-08-18 23:12:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2014.SP1</cf_release_observed>
    
    <cf_release_observed>UDK 2015</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StdLib</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>63</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 19:40:13 +0000</bug_when>
    <thetext>On Path.c:360 (UDK2014.SP1 branch):

  free(MPath); /* Caller doesn&apos;t want it so let MPath go free */

But since MPath isn&apos;t set to NULL, the else statement on line 379 can be executed which then uses MPath:

  /* This is a mapped path. */
  Status = __DevSearch( MPath, NULL, &amp;Node);


lersek commented on Feb 2
The filename is StdLib/LibC/Uefi/Devices/Utility/Path.c, function ParsePath(). The report applies to edk2 master as of git commit dd9044b. Removing the UDK reference from the subject.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>665</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:20:42 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16974</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 19:46:10 +0000</bug_when>
    <thetext>Reassign owner

Patch for review

https://edk2.groups.io/g/devel/message/79543</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16986</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 23:12:55 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2-libc/commit/6b209c9ced416bc97585f10a1e03df75201fa1fe</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>409</bug_id>
          
          <creation_ts>2017-02-27 06:51:19 +0000</creation_ts>
          <short_desc>NetLibAsciiStrToIp6 can&apos;t handle fields where some leading zeros are dropped</short_desc>
          <delta_ts>2017-03-10 04:34:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Derek Higgins">higginsd</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1542</commentid>
    <comment_count>0</comment_count>
    <who name="Derek Higgins">higginsd</who>
    <bug_when>2017-02-27 06:51:19 +0000</bug_when>
    <thetext>NetLibAsciiStrToIp6 fails to parse IP addresses where some sections have leading zeros and others don&apos;t. The setting of LeadZeroCnt and LeadZero in the function are asserting that leading zeros should always be used or never be used but not mixed.

fc00:0101::1 - returns a error
fc00:101::1 - parses correctly and returns success

In my case this was causing network booting to silently fail</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1566</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-02 19:12:10 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1602</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-03-10 03:46:29 +0000</bug_when>
    <thetext>Derek,
You are probally using old version of NetLibAsciiStrToIp6.
New version of this API is calling BaseLib.AsciiStrToIpv6Address, which can successfully convert &quot;fc00:0101::1&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1603</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-03-10 04:34:45 +0000</bug_when>
    <thetext>the new version was checked in @ 9f5ca5efbd0bb00c9d3577b95e6322e85cb0b118.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>320</bug_id>
          
          <creation_ts>2017-01-02 22:52:01 +0000</creation_ts>
          <short_desc>Need correct the TPL of HTTP token Event in HttpBootDxe driver</short_desc>
          <delta_ts>2017-02-15 02:44:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="jiaxinwu">jiaxin.wu</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>ting.ye</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1232</commentid>
    <comment_count>0</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-01-02 22:52:01 +0000</bug_when>
    <thetext>According the UEFI Spec, The TPL of HTTP token Event must be lower than or equal to TPL_CALLBACK. Current implementation is inconsistent with the description.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1256</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-05 19:12:12 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1413</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-02-09 00:50:42 +0000</bug_when>
    <thetext>Working on the fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1444</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-02-15 02:44:34 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/5e9e151c2061cc10e5aa9f41c6f1d7d1b865954e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>231</bug_id>
          
          <creation_ts>2016-11-14 20:23:59 +0000</creation_ts>
          <short_desc>When FILE DATA  format use relative path under multiple workspace, build report failure</short_desc>
          <delta_ts>2016-11-15 01:14:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>924</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-14 20:23:59 +0000</bug_when>
    <thetext>When FILE DATA  format use relative path under multiple workspace, build report failure.

GenFds...
 : error C0DE: Tools code failure
	Please send email to edk2-devel@lists.01.org for help, attaching following call stack trace!

Traceback (most recent call last):
  File &quot;GenFds\GenFds.py&quot;, line 307, in main
  File &quot;GenFds\GenFds.py&quot;, line 575, in GenFd
  File &quot;GenFds\Capsule.py&quot;, line 205, in GenCapsule
  File &quot;GenFds\Capsule.py&quot;, line 139, in GenFmpCapsule
  File &quot;c:\Users\Public\Documents\BuildPool\BaseTools\build\Source\Python\Common\LongFilePathOsPath.py&quot;, line 27, in getsize
  File &quot;C:\Python\32-bit\2.7\lib\genericpath.py&quot;, line 49, in getsize
WindowsError: [Error 3] The system cannot find the path specified: &apos;FatBinPkg\\EnhancedFatDxe\\Ia32\\Fat.efi&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>925</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-14 20:24:38 +0000</bug_when>
    <thetext>assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>932</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-15 01:14:51 +0000</bug_when>
    <thetext>fix it in 94e4bcbb5efaf86440e89293d80b0a73781fff12</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>147</bug_id>
          
          <creation_ts>2016-10-13 20:13:20 +0000</creation_ts>
          <short_desc>move UEFI shell defined protocol from ShellPkg to MdePkg</short_desc>
          <delta_ts>2016-10-19 22:06:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>157</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>598</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-10-13 20:13:20 +0000</bug_when>
    <thetext>It is from EDKII mailing list discussion.

===============================
I agree.  

We should move the 3 protocols from the UEFI Shell Specification from ShellPkg to MdePkg.  

I think that this is a non-backwards-compatible-change and will require a new GUID in ShellPkg.

-Jaben

From: Yao, Jiewen 
Sent: Tuesday, October 11, 2016 7:45 AM
To: Ni, Ruiyu &lt;ruiyu.ni@intel.com&gt;; Carsey, Jaben &lt;jaben.carsey@intel.com&gt;; Rothman, Michael A &lt;michael.a.rothman@intel.com&gt;; Kinney, Michael D &lt;michael.d.kinney@intel.com&gt;; &apos;edk2-devel@lists.01.org&apos; &lt;edk2-devel@lists.01.org&gt;
Cc: Tian, Feng &lt;feng.tian@intel.com&gt;; Zhang, Chao B &lt;chao.b.zhang@intel.com&gt;; Gao, Liming &lt;liming.gao@intel.com&gt;; Zeng, Star &lt;star.zeng@intel.com&gt;
Subject: RE: [PATCH 17/45] MdeModulePkg/CapsuleApp: Add CapsuleApp application.
Importance: High

Yes, I think that is a very good idea.

Shell spec defines EFI_SHELL_PROTOCOL, EFI_SHELL_DYNAMIC_COMMAND_PROTOCOL, EFI_SHELL_PARAMETERS_PROTOCOL.
These should be treated as industry stand and we can move these 3 to MdePkg.

SHELL_ENVIRONMENT_2_PROTOCOL and SHELL_INTERFACE_PROTOCOL should be still in ShellPkg, since it is not standard.

Thank you
Yao Jiewen


From: Ni, Ruiyu 
Sent: Tuesday, October 11, 2016 4:28 PM
To: Carsey, Jaben &lt;jaben.carsey@intel.com&gt;; Rothman, Michael A &lt;michael.a.rothman@intel.com&gt;; Yao, Jiewen &lt;jiewen.yao@intel.com&gt;; Kinney, Michael D &lt;michael.d.kinney@intel.com&gt;; &apos;edk2-devel@lists.01.org&apos; &lt;edk2-devel@lists.01.org&gt;
Cc: Tian, Feng &lt;feng.tian@intel.com&gt;; Zhang, Chao B &lt;chao.b.zhang@intel.com&gt;; Gao, Liming &lt;liming.gao@intel.com&gt;; Zeng, Star &lt;star.zeng@intel.com&gt;
Subject: RE: [PATCH 17/45] MdeModulePkg/CapsuleApp: Add CapsuleApp application.

Jaben,
The reason I propose to move the Shell protocol definitions to MdePkg is that all applications that wants to use the ARGV can use the ShellParameter protocol, without depending on ShellPkg.

Thanks/Ray

From: Ni, Ruiyu 
Sent: Tuesday, October 11, 2016 4:08 PM
To: Carsey, Jaben &lt;jaben.carsey@intel.com&gt;; Rothman, Michael A &lt;michael.a.rothman@intel.com&gt;; Yao, Jiewen &lt;jiewen.yao@intel.com&gt;; Kinney, Michael D &lt;michael.d.kinney@intel.com&gt;; edk2-devel@lists.01.org
Cc: Tian, Feng &lt;feng.tian@intel.com&gt;; Zhang, Chao B &lt;chao.b.zhang@intel.com&gt;; Gao, Liming &lt;liming.gao@intel.com&gt;; Zeng, Star &lt;star.zeng@intel.com&gt;
Subject: RE: [PATCH 17/45] MdeModulePkg/CapsuleApp: Add CapsuleApp application.

Jaben,
How about moving the contents in ShellPkg\Include\Protocol\ to MdePkg\Include\Protocol\?
All industry standard protocols are defined in MdePkg, except the Shell related protocols.

Thanks/Ray</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>599</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-13 20:19:48 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>644</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-19 22:06:11 +0000</bug_when>
    <thetext>duplicate of 157.

*** This bug has been marked as a duplicate of bug 157 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>425</bug_id>
          
          <creation_ts>2017-03-14 16:38:02 +0000</creation_ts>
          <short_desc>[CCS] clarify line breaking and indentation requirements for multi-line function calls</short_desc>
          <delta_ts>2017-06-13 12:02:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II C Coding Standards</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1611</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-14 16:38:02 +0000</bug_when>
    <thetext>(For lack of a better Package, I&apos;m selecting BaseTools as a placeholder.)

In &quot;CCS_2_1_Draft.pdf&quot;, two sections appear to deal with multi-line function
calls:

&gt; 5.2.2.4 Subsequent lines of multi-line function calls should line up
&gt;         one or two tab-stops from the beginning of the function name
&gt;
&gt;         Use either one or two tab stops to ensure that each parameter
&gt;         is indented at least two spaces after the function name. Either
&gt;         of the below examples is acceptable:
&gt;
&gt;         Status = gBS-&gt;AllocatePool (
&gt;                         EfiBootServicesData,
&gt;                         sizeof (DRIVER_NAME_INSTANCE),
&gt;                         &amp;PrivateData
&gt;                       );
&gt;
&gt;        Status = gBS-&gt;AllocatePool (
&gt;                        EfiBootServicesData,
&gt;                        sizeof (DRIVER_NAME_INSTANCE),
&gt;                        &amp;PrivateData
&gt;                      );
&gt;
&gt; 6.5.2.4 Comments are allowed on the parameters of a function call.
&gt;
&gt;         These comments provide supplemental information about the
&gt;         parameters for that specific function call. The information in
&gt;         parameter comments should not repeat the information in the
&gt;         descriptive text for the @param entries in the special
&gt;         documentation block describing the function. Function call
&gt;         parameter comments are never Doxygen comments.
&gt;
&gt;         Status = TestString (
&gt;                    String, // Comment for first parameter
&gt;                    Index + 3, // Comment for second parameter
&gt;                    &amp;Value // Comment for third parameter
&gt;                    );

Requested updates:

* In 5.2.2.4, drop the &quot;tab stop&quot; language, and just require 2 spaces
  indenting beyond the function name. This also obviates the second example
  in 5.2.2.4.

* In 5.2.2.4, the closing parentheses should line up with the arguments, not
  with the function name.

* Most importantly, please spell out &quot;one argument per line&quot; as a
  requirement.

References:
- https://lists.01.org/pipermail/edk2-devel/2017-March/008485.html
- https://lists.01.org/pipermail/edk2-devel/2017-March/008490.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1619</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-15 21:07:25 +0000</bug_when>
    <thetext>Bug scrub: assign it to Mike to follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2264</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-06-12 15:04:53 +0000</bug_when>
    <thetext>Patch review email sent

https://lists.01.org/pipermail/edk2-devel/2017-June/011523.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2267</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-06-13 12:02:43 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-CCodingStandardsSpecification/commit/3f1100beda60843361a9761b43ba7b18adf0d265</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>790</bug_id>
          
          <creation_ts>2017-11-19 21:27:21 +0000</creation_ts>
          <short_desc>please evaluate &quot;-Wno-unused-const-variable&quot; for RELEASE builds with CLANG38</short_desc>
          <delta_ts>2019-08-27 20:13:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>t.lamprecht</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3098</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-11-19 21:27:21 +0000</bug_when>
    <thetext>Reproduce steps:
1. Pull latest edk2
2. build -p OvmfPkg/OvmfPkgIa32X64.dsc -t CLANG38 -DSECURE_BOOT_ENABLE=TRUE -a IA32 -a X64 -b RELEASE -DDEBUG_ON_SERIAL_PORT -n 1


&quot;clang&quot; -g -fshort-wchar -fno-builtin -fno-strict-aliasing -Wall -Werror -Wno-array-bounds -ffunction-sections -fdata-sections -include AutoGen.h -fno-common -DSTRING_ARRAY_NAME=IoMmuDxeStrings -Wno-empty-body -fno-stack-protector -mms-bitfields -Wno-address -Wno-shift-negative-value -Wno-parentheses-equality -Wno-unknown-pragmas -Wno-tautological-constant-out-of-range-compare -Wno-incompatible-library-redeclaration -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -msoft-float -mno-implicit-float -ftrap-function=undefined_behavior_has_been_optimized_away_by_clang -funsigned-char -fno-ms-extensions -Wno-null-dereference -Wno-tautological-compare -Wno-unknown-warning-option -Wno-varargs -m64 &quot;-DEFIAPI=__attribute__((ms_abi))&quot; -mno-red-zone -mcmodel=small -fpie -Oz -flto -target x86_64-pc-linux-gnu -DMDEPKG_NDEBUG -mno-mmx -mno-sse -D DISABLE_NEW_DEPRECATED_INTERFACES -c -o /home/jshi19/wksp_efi/edk2-4/Build/Ovmf3264/RELEASE_CLANG38/X64/OvmfPkg/IoMmuDxe/IoMmuDxe/OUTPUT/./AmdSevIoMmu.obj -I/home/jshi19/wksp_efi/edk2-4/OvmfPkg/IoMmuDxe -I/home/jshi19/wksp_efi/edk2-4/Build/Ovmf3264/RELEASE_CLANG38/X64/OvmfPkg/IoMmuDxe/IoMmuDxe/DEBUG -I/home/jshi19/wksp_efi/edk2-4/MdePkg -I/home/jshi19/wksp_efi/edk2-4/MdePkg/Include -I/home/jshi19/wksp_efi/edk2-4/MdePkg/Include/X64 -I/home/jshi19/wksp_efi/edk2-4/MdeModulePkg -I/home/jshi19/wksp_efi/edk2-4/MdeModulePkg/Include -I/home/jshi19/wksp_efi/edk2-4/OvmfPkg -I/home/jshi19/wksp_efi/edk2-4/OvmfPkg/Include /home/jshi19/wksp_efi/edk2-4/OvmfPkg/IoMmuDxe/AmdSevIoMmu.c
/home/jshi19/wksp_efi/edk2-4/OvmfPkg/IoMmuDxe/AmdSevIoMmu.c:48:1: error: unused variable &apos;mBusMasterOperationName&apos; [-Werror,-Wunused-const-variable]
mBusMasterOperationName[EdkiiIoMmuOperationMaximum] = {
^
1 error generated.
GNUmakefile:437: recipe for target &apos;/home/jshi19/wksp_efi/edk2-4/Build/Ovmf3264/RELEASE_CLANG38/X64/OvmfPkg/IoMmuDxe/IoMmuDxe/OUTPUT/AmdSevIoMmu.obj&apos; failed
make: *** [/home/jshi19/wksp_efi/edk2-4/Build/Ovmf3264/RELEASE_CLANG38/X64/OvmfPkg/IoMmuDxe/IoMmuDxe/OUTPUT/AmdSevIoMmu.obj] Error 1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3105</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-20 13:18:30 +0000</bug_when>
    <thetext>Hi Steven,

thanks for the report -- we had the same issue with GCC; please refer to TianoCore bug 700. It was fixed by adding &quot;-Wno-unused-const-variable&quot; to a bunch of GCC flags under BaseTools/, in commit 8b6366f87584 (&quot;BaseTools/GCC: set -Wno-unused-const-variable on RELEASE builds&quot;, 2017-09-08).

Can you please try if the same works with clang? (After all, clang seems to refer to the same &quot;-Wunused-const-variable&quot; switch, as the cause for emitting the warning.) Thanks!

(CC&apos;ing Liming and Thomas, from bug 700.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3131</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-27 12:00:15 +0000</bug_when>
    <thetext>Moving this BZ to BaseTools for evaluation. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3142</commentid>
    <comment_count>3</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-11-29 20:29:18 +0000</bug_when>
    <thetext>assign to Steven</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9325</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:13:15 +0000</bug_when>
    <thetext>Fixed in commit 1a21d339cdd9 (&quot;BaseTools/tools_def CLANG38: add -Wno-unused-const-variable&quot;, 2017-12-08).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>698</bug_id>
          
          <creation_ts>2017-09-06 07:39:10 +0000</creation_ts>
          <short_desc>The undefined behavior of left shift a negative signed value in DxeNetLib.c</short_desc>
          <delta_ts>2017-09-29 04:21:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2694</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-09-06 07:39:10 +0000</bug_when>
    <thetext>The edk2 Asan/Ubsan catch a undefined behavior in edk2\MdeModulePkg\Library\DxeNetLib\DxeNetLib.c NetRandomInitSeed() function:

line 875:
Seed = (~Time.Hour &lt;&lt; 24 | Time.Day &lt;&lt; 16 | Time.Minute &lt;&lt; 8 | Time.Second);

The ~Time.Hour convert the Time.Hour from UINT8 type to a negative value, then the ~Time.Hour &lt;&lt; 24 left shift a negative value which is a undefined behavior in C standard. It can be easily fixed as below to force the ~Time.Hour as a unsigned value.

line 875:
Seed = ((UINT32)~Time.Hour &lt;&lt; 24 | Time.Day &lt;&lt; 16 | Time.Minute &lt;&lt; 8 | Time.Second);

The Bug695 is the same type issue, and you refer to it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2706</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-07 20:04:21 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2812</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-29 04:21:02 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/bd42d976d510ab56e862b7bf764b1f9e9b19337e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>164</bug_id>
          
          <creation_ts>2016-10-20 21:20:55 +0000</creation_ts>
          <short_desc>Add the build option &quot;/D DISABLE_NEW_DEPRECATED_INTERFACES&quot; in package DSC files</short_desc>
          <delta_ts>2016-10-28 11:20:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
    
    <cf_package>BeagleBoardPkg</cf_package>
    
    <cf_package>EmbeddedPkg</cf_package>
    
    <cf_package>Omap35xxPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>677</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 21:20:55 +0000</bug_when>
    <thetext>This one is separated from bug 93, and for ArmPkg, ArmVirtPkg, BeagleBoardPkg, Omap35xxPkg, EmbeddedPkg


We are planning to add the following build option in package DSC files:
[BuildOptions]
  *_*_*_CC_FLAGS = /D DISABLE_NEW_DEPRECATED_INTERFACES

The goal is to make sure that the deprecated APIs will not be used in our code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>678</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 21:21:55 +0000</bug_when>
    <thetext>Assign to Package owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>688</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-21 05:07:37 +0000</bug_when>
    <thetext>ArmVirtPkg cloned / separated out as bug 165.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>793</commentid>
    <comment_count>3</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2016-10-28 11:20:27 +0000</bug_when>
    <thetext>All done for ArmPkg, BeagleBoardPkg, Omap35xxPkg and EmbeddedPkg.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>996</bug_id>
          
          <creation_ts>2018-06-28 05:38:16 +0000</creation_ts>
          <short_desc>MdeModulePkg UsbKbDxe: Notification function registered by RegisterKeystrokeNotify() will be called twice when a specified keystroke will occur.</short_desc>
          <delta_ts>2018-09-14 22:17:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nick.wang">nick75227</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4219</commentid>
    <comment_count>0</comment_count>
    <who name="nick.wang">nick75227</who>
    <bug_when>2018-06-28 05:38:16 +0000</bug_when>
    <thetext>In MdeModulePkg\Bus\Usb\UsbKbDxe\EfiKey.c,
USBKeyboardRegisterKeyNotify() allows to register two different notification functions for a particular keystroke.
But in this case, UsbKeyCodeToEfiInputKey() will enqueue the keystroke into EfiKeyQueueForNotify queue twice.
It makes that user only press keystroke once, but notification functions will be called twice.

I think it should modify UsbKeyCodeToEfiInputKey() as below to makes sure one keystroke only trigger notification function once.

EFI_STATUS
UsbKeyCodeToEfiInputKey (
  IN  USB_KB_DEV                *UsbKeyboardDevice,
  IN  UINT8                     KeyCode,
  OUT EFI_KEY_DATA              *KeyData
  )
{
  ...
  //
  // Signal KeyNotify process event if this key pressed matches any key registered.
  //
  NotifyList = &amp;UsbKeyboardDevice-&gt;NotifyList;
  for (Link = GetFirstNode (NotifyList); !IsNull (NotifyList, Link); Link = GetNextNode (NotifyList, Link)) {
    CurrentNotify = CR (Link, KEYBOARD_CONSOLE_IN_EX_NOTIFY, NotifyEntry, USB_KB_CONSOLE_IN_EX_NOTIFY_SIGNATURE);
    if (IsKeyRegistered (&amp;CurrentNotify-&gt;KeyData, KeyData)) {
      //
      // The key notification function needs to run at TPL_CALLBACK
      // while current TPL is TPL_NOTIFY. It will be invoked in
      // KeyNotifyProcessHandler() which runs at TPL_CALLBACK.
      //
      Enqueue (&amp;UsbKeyboardDevice-&gt;EfiKeyQueueForNotify, KeyData, sizeof (*KeyData));
      gBS-&gt;SignalEvent (UsbKeyboardDevice-&gt;KeyNotifyProcessEvent);
      break;  &lt;========== Add a break here.
    }
  }
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4223</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-28 20:29:10 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4809</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-09-03 02:14:10 +0000</bug_when>
    <thetext>Agree it&apos;s a bug that when there are two different notification functions for the same key, each notification function will be called twice instead of once.

All keyboard drivers (Ps2KeyboardDxe.KeyGetchar(), KeyboardDxe.BiosKeyboardTimerHandler(), and etc) have the similar bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4977</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-09-14 22:17:59 +0000</bug_when>
    <thetext>Fix the issues in UsbKbDxe,PS2KeyBoardDxe, TerminalDxe in MdeModulePkg at:
https://github.com/tianocore/edk2/commit/f316a26013f2a8cfb1041d9f74a5c6d5bb9df9c9

Fix the similar issue in keyboard drivers in IntelFrameworkModulePkg at:
https://github.com/tianocore/edk2/commit/f92b8ee3b7a621d0db8708ec05ee13639436b4a9

Fix the similar issue in keyboard driver in EmbeddedPkg at:
https://github.com/tianocore/edk2/commit/9c8e9e76bd06014e430ecfa6c8f8e21374005a29</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>631</bug_id>
          
          <creation_ts>2017-07-14 17:32:37 +0000</creation_ts>
          <short_desc>Nt32Pkg has no readme.md file</short_desc>
          <delta_ts>2022-01-14 20:42:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc>https://github.com/tianocore/edk2/tree/master/Nt32Pkg</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian Richardson (Intel)">brian.richardson</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>Nt32Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2444</commentid>
    <comment_count>0</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-07-14 17:32:37 +0000</bug_when>
    <thetext>This directory should have a README.MD file that explains the basic project and points to detailed documentation in the wiki.

https://github.com/tianocore/edk2/tree/master/Nt32Pkg

https://github.com/tianocore/tianocore.github.io/wiki/Nt32Pkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2488</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-20 20:10:42 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3014</commentid>
    <comment_count>2</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-11-09 13:43:53 +0000</bug_when>
    <thetext>Update?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18161</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:42:26 +0000</bug_when>
    <thetext>The Nt32Pkg feature has been moved to EmulatorPkg.

EmulatorPkg has a Readme.md file with links to Wiki pages 
and also contains instructions to build and run.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>542</bug_id>
          
          <creation_ts>2017-05-16 01:52:43 +0000</creation_ts>
          <short_desc>[BaseTools] Structure PCD value assignment in DEC/DSC</short_desc>
          <delta_ts>2024-03-08 09:22:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>611</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2041</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-05-16 01:52:43 +0000</bug_when>
    <thetext>Requirment: 
1. When PCD is configured as DynamicHii, it will be map to one EFI variable. If PCD is VOID*, it can map to the whole EFI variable. Most EFI variable data are defined as C structure. 
2. Some PCDs are designed as C style structure, such as gEfiMdeModulePkgTokenSpaceGuid.PcdPciSerialParameters.

Current limitation:
1. VOID* PCD Value must be byte array. Its value is hard to be specified. 
2. If single PCD is defined to map one field in structure, its offset and width will be required when this PCD is configured as DynamicHii or DynamicVpd. If the structure is big, it will require lots of PCDs to map its each field. If the structure has the bit field, its bit field can&apos;t match PCD. 

Proposal:
Enhance EDKII Build system to support VOID* PCD be mapped to C structure in DEC or DSC. PCD value can be specified by structure field as C language style in DEC and DSC. Then, its value will be converted to byte array and assigned to VOID* PCD. This is a pure build enhancement, and no change in PCD driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2043</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-05-16 02:04:47 +0000</bug_when>
    <thetext>Here is RFC https://lists.01.org/pipermail/edk2-devel/2017-April/009813.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2053</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-17 21:11:57 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3264</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-26 04:23:00 +0000</bug_when>
    <thetext>edk2 trunk c40dbe5e7bf9...7c7362651323</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>458</bug_id>
          
          <creation_ts>2017-04-03 10:34:29 +0000</creation_ts>
          <short_desc>PciHostBridgeLib.h has design limitation - cannot be used for Quark</short_desc>
          <delta_ts>2017-09-05 22:57:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1726</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-04-03 10:34:29 +0000</bug_when>
    <thetext>Current QuarkPlatformPkg\Pci\Dxe\PciHostBridge\ driver has DMA up limit.

//
// Define the region of memory used for DMA memory
//
#define DMA_MEMORY_TOP          0x0000000001FFFFFFULL


However, there is no such interface in PciHostBridgeLib.h to pass this information to Generic PciHostBridge driver.

It only defines DmaAbove4G, which means the DMA memory top is 4GiB.

I think we need add DmaMemoryTop into PciHostBridgeLib.h.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1727</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-04-03 12:21:36 +0000</bug_when>
    <thetext>CC Ard -- I vaguely recall that Ard mentioned earlier that some ARM platforms don&apos;t have memory under 4GB at all, which is a similar issue. As far as I recall that discussion, the idea was to provide some kind of 64-bit wide bitmask, similarly to the Linux kernel, that describes the permissible allocation areas. (More details would be welcome from Ard, I&apos;m just adding this as a reminder.) Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1729</commentid>
    <comment_count>2</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2017-04-03 13:01:19 +0000</bug_when>
    <thetext>TBH I don&apos;t remember the discussion exactly, but I think having a single 64-bit mask is not quite the sweet spot for making this configurable imo.

We could accommodate platforms that have such a limitation with a simple DMA limit, as Jiewen proposes, which extends the current DmaAbove4GB boolean to a UINT64.

For anything beyond that, I guess we&apos;d need some policy in code rather than a single number (or a set of numbers), which could be invoked to reason about DMA limitations. This ties in with the IOMMU work Jiewen is doing to defer PciRootBridgeIO::Map() calls to a IOMMU protocol if the memory is not DMA addressable by the PCI device.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1730</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-04-03 13:19:50 +0000</bug_when>
    <thetext>Apologies, the discussion may have been in one of the threads about the proposed DxeBmDmaLib instance (or more generally, BmDmaLib class). But, the IOMMU protocol has come up in that thread as well, so that&apos;s likely where the focus should be. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1731</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-04-03 21:43:19 +0000</bug_when>
    <thetext>Thanks for the comments.

The PciHostBridgeLib is different with IOMMU protocol.

I happen to find this limitation when I implement IOMMU protocol.

I took Ard&apos;s feedback on non-below4GiB memory usage for IOMMU. New RFC will be posted.

Summary:
1) IOMMU protocol is to replace BmDmaLib, because the current BmDmaLib cannot meet Intel VTd requirement. Both of them are abstraction for IOMMU DMA access.

2) IOMMU protocol is not related to PciHostBridgeLib, because PciHostBridgeLib is to abstract HostBridge hardware configuration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1760</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-06 20:12:59 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2685</commentid>
    <comment_count>6</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-05 22:57:51 +0000</bug_when>
    <thetext>Discussed with Jiewen, we think Quark can implement an IO_MMU instance to force to allocate MMIO below the DMA_MEMORY_TOP.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>370</bug_id>
          
          <creation_ts>2017-02-08 00:56:13 +0000</creation_ts>
          <short_desc>SmmCore should not include SmramProfile symbols, if SmramProfile is disabled.</short_desc>
          <delta_ts>2017-03-15 04:50:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1398</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-02-08 00:56:13 +0000</bug_when>
    <thetext>With current implementation, I found SmramProfile function is generated in final image, even SmramProfile is disable.

I think we should add GLOBAL_REMOVE_IF_UNREFERENCED for below:

EDKII_SMM_MEMORY_PROFILE_PROTOCOL mSmmProfileProtocol = {
  SmramProfileProtocolGetData,
  SmramProfileProtocolRegisterImage,
  SmramProfileProtocolUnregisterImage,
  SmramProfileProtocolGetRecordingState,
  SmramProfileProtocolSetRecordingState,
  SmramProfileProtocolRecord,
};

So that this protocol can be removed from final image.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1419</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-09 19:11:05 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1616</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-03-15 04:50:28 +0000</bug_when>
    <thetext> Fixed at https://github.com/tianocore/edk2/compare/df077b3e0709...bd40dd27aaf9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>648</bug_id>
          
          <creation_ts>2017-07-21 04:59:58 +0000</creation_ts>
          <short_desc>[Shell] &quot;dmpstore&quot; should replace known variable vendor GUID with string in non-SFO mode</short_desc>
          <delta_ts>2017-09-21 22:33:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2498</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-21 04:59:58 +0000</bug_when>
    <thetext>For UEFI spec defined variables, &quot;dmpstore&quot; still prints the GUID in hex format but actually it could use string like &quot;EFIGlobalVariable&quot; to replace the GUID in non-SFO mode.

The GUID to string mapping could be retrieved through ShellProtocol-&gt;GetGuidName() API.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2519</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-27 20:06:53 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2763</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-21 22:33:23 +0000</bug_when>
    <thetext>pushed @ 09e8678380aaaf0a5ef59179ff59e0a045d1b0bf.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>562</bug_id>
          
          <creation_ts>2017-05-18 20:29:20 +0000</creation_ts>
          <short_desc>Remove XCLANG tool chain from tools_def.template</short_desc>
          <delta_ts>2017-07-05 01:58:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2091</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-18 20:29:20 +0000</bug_when>
    <thetext>The XCLANG tool chain should not be used anymore and the
recommendation is to use XCODE5 instead.

This feature request is to remove the XCLANG tool chain from
the tools_def.template file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2171</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-24 21:07:54 +0000</bug_when>
    <thetext>Liming: communicate with apple</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2394</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-07-05 01:58:46 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/f7bd152c2a05bd75471305184c25f14f01ccf0b7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>302</bug_id>
          
          <creation_ts>2016-12-20 22:03:24 +0000</creation_ts>
          <short_desc>Shell.efi shouldn&apos;t support customized commands which are not defined in Shell spec</short_desc>
          <delta_ts>2021-04-13 01:33:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>figiv65444</cc>
    
    <cc>gononic963</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1191</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-12-20 22:03:24 +0000</bug_when>
    <thetext>Currently ShellPkg supports to build out the shell binary which supports customized commands like &quot;dp&quot; and etc.
I am afraid it&apos;s a voilation of Shell spec and we should clean ShellPkg so that different shell binaries which conforms to different profiles defined by Shell spec can be generated, but customized commands shouldn&apos;t be included.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1206</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-22 19:22:58 +0000</bug_when>
    <thetext>bug scrub: assign to Jaben to give us discussion conclusion first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2967</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-11-01 21:34:46 +0000</bug_when>
    <thetext>the direction is clear after talking with Jaben and Mike. take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3133</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-11-28 00:23:55 +0000</bug_when>
    <thetext>pushed @ 3d29f8c5e361525a0d2accfa7f5bb0a7210b8927..92034c4c48fd3800dd5aa510011ccbe60fa3606a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3436</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-17 05:14:04 +0000</bug_when>
    <thetext>*** Bug 721 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>491</bug_id>
          
          <creation_ts>2017-04-18 01:56:36 +0000</creation_ts>
          <short_desc>move generic function - OpalIsValidMmioSpace from OPAL driver to library</short_desc>
          <delta_ts>2017-05-04 03:29:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1845</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-04-18 01:56:36 +0000</bug_when>
    <thetext>current OPAL smm driver has OpalIsValidMmioSpace() function. We think it is generic and we have make it be a library.
As such, this function can be used for other modules.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1889</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-20 20:11:58 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1985</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2017-05-04 02:40:52 +0000</bug_when>
    <thetext>Checked in the patch with revision 50e6bb98ee64af225e152660db2fa5d8711f359a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1986</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-05-04 03:29:49 +0000</bug_when>
    <thetext>check in 9bb800f7cb3c205a78b1289ba07edb6f7fe64a9e, 24a0fd47cdf45d745a73ceb2f140b88f7017e700, f932073831f5af526d94c4dc11e4ed9737630eef, 37a00f1a9dea715d8b2b4f1c760040ab4b305985</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>39</bug_id>
          
          <creation_ts>2016-07-20 19:43:34 +0000</creation_ts>
          <short_desc>Error when changing boot order after deleting boot option</short_desc>
          <delta_ts>2016-12-21 05:27:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2014.SP1</cf_release_observed>
    
    <cf_release_observed>UDK 2015</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>64</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 19:43:34 +0000</bug_when>
    <thetext>The following error is displayed when the Change Boot Order menu is entered after deleting a boot option:

  Question value mismatch with Option value!
  Press ENTER to continue

Steps to replicate:

Enter Setup menu
  Boot Maintenance Manager =&gt; Boot Options =&gt; Delete Boot Option

Select any boot option to delete, and then choose Commit Changes and Exit
Now, choose Change Boot Order

Reported on the edk2 mailing list in March 2015. Re-reporting since I suspect old bug reports were forgotten.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>533</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-29 20:17:47 +0000</bug_when>
    <thetext>Bug Scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>646</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-19 22:07:00 +0000</bug_when>
    <thetext>assign to UI owner Dandan.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>779</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2016-10-27 22:10:41 +0000</bug_when>
    <thetext>The bug only exists in the old UI codes in edk2\IntelFrameworkModulePkg\Universal\BdsDxe.
The new UI codes in MdeModulePkg don&apos;t have this bug.

The new UI codes exist in EDKII Trunk and UDK 2015 and used by the Nt32 platform, so we could not reproduce this issue on Nt32 for these two branches.

UDK2014.SP1 uses the old UI codes. Since it is an old branch, we propose to fix the bug in old UI codes in EDKII Trunk firstly, if having any request we can sync the soulution to the UDK2014.SP1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>988</commentid>
    <comment_count>4</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2016-11-17 21:58:10 +0000</bug_when>
    <thetext>Fixed the bug in old UI codes in EDKII trunk.
   https://github.com/tianocore/edk2/commit/e135e4a79efdcc1de76a5a38bb17d9f925e6f5a1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>410</bug_id>
          
          <creation_ts>2017-02-27 11:20:26 +0000</creation_ts>
          <short_desc>Build error with CLANG38: default argument promotion of `Iso639Language`</short_desc>
          <delta_ts>2017-10-28 11:17:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>273412544</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nms</cc>
    
    <cc>steven.shi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1544</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2017-02-27 11:20:26 +0000</bug_when>
    <thetext>When building git master (2017-02-27) with the CLANG38 toolset (with clang 3.9.1) the build fails with the error:

edk2/MdePkg/Library/UefiLib/UefiLib.c:1530:19: error: passing an object that undergoes default argument promotion to &apos;va_start&apos; has undefined behavior [-Werror,-Wvarargs]
  VA_START (Args, Iso639Language);
                  ^
edk2/MdePkg/Library/UefiLib/UefiLib.c:1517:19: note: parameter of type &apos;BOOLEAN&apos; (aka &apos;unsigned char&apos;) is declared here
  IN BOOLEAN      Iso639Language,
                  ^
1 error generated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1565</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-02 19:09:52 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1712</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-03-30 23:22:23 +0000</bug_when>
    <thetext>Now, CLANG38 tool chain supports CLANG 3.8 only.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1781</commentid>
    <comment_count>3</comment_count>
      <attachid>49</attachid>
    <who name="Nikolai Saoukh">nms</who>
    <bug_when>2017-04-08 11:11:50 +0000</bug_when>
    <thetext>Created attachment 49
Incomplete (?) patch to fix va_start arg promotion

I did not checked all possible files for that change.

Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Nikolai Saoukh &lt;nms@otdel-1.org&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1824</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-04-14 03:41:55 +0000</bug_when>
    <thetext>Why change the parameter order in functions? BOOLEAN type is also fixed size. Below is BOOLEAN definition. 

  ///
  /// Logical Boolean.  1-byte value containing 0 for FALSE or a 1 for TRUE.  Other
  /// values are undefined.
  ///
  typedef unsigned char       BOOLEAN;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1826</commentid>
    <comment_count>5</comment_count>
    <who name="Nikolai Saoukh">nms</who>
    <bug_when>2017-04-14 03:53:54 +0000</bug_when>
    <thetext>See the message from compiler in first comment.

{quote}
error: passing an object that undergoes default argument promotion to &apos;va_start&apos; has undefined behavior
{/quote}

CLANG40 and later do the same</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2057</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-05-18 02:01:46 +0000</bug_when>
    <thetext>Andrew Fish reports XCODE compiler reports the same issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2058</commentid>
    <comment_count>7</comment_count>
      <attachid>64</attachid>
    <who name="nobody">nobody</who>
    <bug_when>2017-05-18 02:04:35 +0000</bug_when>
    <thetext>Created attachment 64
Another fix for this issue.

This fix changes API parameter BOOLEAN type to UINTN type. It doesn&apos;t impact the consumer code. This fix can be regarded as the source level compatible.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2621</commentid>
    <comment_count>8</comment_count>
      <attachid>97</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-08-22 06:09:41 +0000</bug_when>
    <thetext>Created attachment 97
The code change need to pass the varargs warning

There are big incompatible impact if we need to pass the clang build checking for undefined behavior on variadic parameters. The attachment is the update. So, I prefer to disable the varargs checking in build flag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2622</commentid>
    <comment_count>9</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-08-22 06:12:23 +0000</bug_when>
    <thetext>The root cause is the boolean and short type is not the &quot;default argument promotions type&quot; defined in C Standard. So, the behavior is undefined if using the Boolean type parameter as the identifier of the rightmost parameter in the variable parameter list. Detail explain can be found in this link: https://www.securecoding.cert.org/confluence/display/cplusplus/EXP58-CPP.+Pass+an+object+of+the+correct+type+to+va_start</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2735</commentid>
    <comment_count>10</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-09-15 03:04:28 +0000</bug_when>
    <thetext>edk2 47bfbd7f8069e523798ef973c8eb0abd5c6b0746 has disabled this warning. Now, CLANG build can pass.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2736</commentid>
    <comment_count>11</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-09-15 03:05:08 +0000</bug_when>
    <thetext>Has been fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2957</commentid>
    <comment_count>12</comment_count>
    <who name="fbwang">273412544</who>
    <bug_when>2017-10-28 02:40:35 +0000</bug_when>
    <thetext>I can still see this error with XCODE5,
OS version Mac OS 10.13
Xcode 9.0.1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2958</commentid>
    <comment_count>13</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-10-28 11:17:03 +0000</bug_when>
    <thetext>We only add the -Wno-varargs and depress the warning in CLANG38 tool chain. You can try to add -Wno-varargs in XCODE5 build flag. Please refer the 47bfbd7f8069e523798ef973c8eb0abd5c6b0746</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>49</attachid>
            <date>2017-04-08 11:11:50 +0000</date>
            <delta_ts>2017-04-08 11:11:50 +0000</delta_ts>
            <desc>Incomplete (?) patch to fix va_start arg promotion</desc>
            <filename>edk2-va-lang.diff</filename>
            <type>text/plain</type>
            <size>6892</size>
            <attacher name="Nikolai Saoukh">nms</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>64</attachid>
            <date>2017-05-18 02:04:35 +0000</date>
            <delta_ts>2017-05-18 02:04:35 +0000</delta_ts>
            <desc>Another fix for this issue.</desc>
            <filename>0001-MdePkg-Fix-undefined-behavior-on-variadic-parameters.patch</filename>
            <type>application/octet-stream</type>
            <size>1348</size>
            <attacher name="nobody">nobody</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>97</attachid>
            <date>2017-08-22 06:09:41 +0000</date>
            <delta_ts>2017-08-22 06:09:41 +0000</delta_ts>
            <desc>The code change need to pass the varargs warning</desc>
            <filename>diff.txt</filename>
            <type>text/plain</type>
            <size>4905</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>597</bug_id>
          
          <creation_ts>2017-06-19 03:18:24 +0000</creation_ts>
          <short_desc>DSC spec: Clarify that DynamicHii Pcd  VariableName is NOT allowed to be empty string</short_desc>
          <delta_ts>2017-09-10 00:40:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II DSC Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2294</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-19 03:18:24 +0000</bug_when>
    <thetext>According to the EBNF of DynamicHii Pcd item in DSC spec, the VariableName can be a UnicodeString. It allows to be an empty string like L””. But in reality, there is no a variable whose name is an empty string. 

To avoid setting a empty string to DynamicHii Pcd VariableName , add a note to clarify that DynamicHii Pcd  VariableName is NOT allowed to be empty string.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2310</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-21 21:22:01 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2674</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-04 23:10:36 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2715</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-10 00:40:39 +0000</bug_when>
    <thetext>fixed it by:
https://github.com/tianocore-docs/edk2-DscSpecification/commit/5e86a876ebf1ef28f808a778ecd821f17453ab04</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>59</bug_id>
          
          <creation_ts>2016-07-20 21:17:54 +0000</creation_ts>
          <short_desc>Error building PcAtChipsetPkg/SerialIoLib</short_desc>
          <delta_ts>2017-05-19 16:50:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>553</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>PcAtChipsetPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>84</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 21:17:54 +0000</bug_when>
    <thetext>ciocari commented on Jun 9
(juliano)-(~/dev/src/uefi/edk2)-&gt; uname -a
Darwin Julianos-MacBook-Pro.local 15.5.0 Darwin Kernel Version 15.5.0: Tue Apr 19 18:36:36 PDT 2016; root:xnu-3248.50.21~8/RELEASE_X86_64 x86_64
(juliano)-(~/dev/src/uefi/edk2)-&gt; clang -v
Apple LLVM version 7.3.0 (clang-703.0.31)
Target: x86_64-apple-darwin15.5.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
(juliano)-(~/dev/src/uefi/edk2)-&gt;

(juliano)-(~/dev/src/uefi/edk2)-&gt; OvmfPkg/build.sh

...

/Users/juliano/dev/src/uefi/edk2/PcAtChipsetPkg/Library/SerialIoLib/SerialPortLib.c:105:32: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]
OutputData = (UINT8) ((~DLAB &lt;&lt; 7) | (gBreakSet &lt;&lt; 6) | (gParity &lt;&lt; 3) | (gStop &lt;&lt; 2) | Data);
~~~~~ ^
/Users/juliano/dev/src/uefi/edk2/PcAtChipsetPkg/Library/SerialIoLib/SerialPortLib.c:484:32: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]
OutputData = (UINT8) ((~DLAB &lt;&lt; 7) | (gBreakSet &lt;&lt; 6) | (LcrParity &lt;&lt; 3) | (LcrStop &lt;&lt; 2) | LcrData);
~~~~~ ^
2 errors generated.
make: *** [/Users/juliano/dev/src/uefi/edk2/Build/OvmfX64/DEBUG_XCODE5/X64/PcAtChipsetPkg/Library/SerialIoLib/SerialIoLib/OUTPUT/SerialPortLib.obj] Error 1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>412</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-04 20:21:42 +0000</bug_when>
    <thetext>bug scrub: assign to package owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>649</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-19 22:14:40 +0000</bug_when>
    <thetext>I don&apos;t have the MAC environment to reproduce this build failure. I am asking juliano.ciocari@hp.com to propose a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1987</commentid>
    <comment_count>3</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2017-05-04 11:28:24 +0000</bug_when>
    <thetext>Ray, this is a common issue with clang. Left shifting a negative signed value is undefined behavior in C, and clang has started warning about it. DLAB is a signed constant. 
#define DLAB      0x01

~0x1/~DLAB is thus a negative number. 

You can either make the constants unsigned:
#define DLAB      0x01U

or cast the results of the signed math (~DLAB) to an unsigned type.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2106</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 16:50:09 +0000</bug_when>
    <thetext>This same issue was entered again

https://bugzilla.tianocore.org/show_bug.cgi?id=553

The resolution is to remove the left shift of DLAB.

*** This bug has been marked as a duplicate of bug 553 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>426</bug_id>
          
          <creation_ts>2017-03-15 05:18:38 +0000</creation_ts>
          <short_desc>IMAGE_TYPE_ID must be provided with value, FDF should mark it as required section</short_desc>
          <delta_ts>2017-04-06 14:44:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II FDF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1617</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2017-03-15 05:18:38 +0000</bug_when>
    <thetext>Below section field is GUID type. It must be provided with value, because zero GUID default value is invalid. so it should remove &quot;[]&quot;.

[&lt;TS&gt; &quot;IMAGE_TYPE_ID&quot; &lt;Eq&gt; &lt;RegistryFormatGUID&gt; &lt;EOL&gt;]


In FDF_Spec_1_27_Review_Draft.pdf, Page 89


&lt;FmpTokens&gt; ::= [&lt;TS&gt; &quot;IMAGE_HEADER_INIT_VERSION&quot; &lt;Eq&gt; &lt;Hex2&gt; &lt;EOL&gt;]
[&lt;TS&gt; &quot;IMAGE_TYPE_ID&quot; &lt;Eq&gt; &lt;RegistryFormatGUID&gt; &lt;EOL&gt;]
[&lt;TS&gt; &quot;IMAGE_INDEX&quot; &lt;Eq&gt; &lt;Hex2&gt; &lt;EOL&gt;]
[&lt;TS&gt; &quot;HARDWARE_INSTANCE&quot; &lt;Eq&gt; &lt;Hex2&gt; &lt;EOL&gt;]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1618</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-15 21:06:25 +0000</bug_when>
    <thetext>Bug scrub: it is for document change. current code behavior is correct.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1753</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-06 14:44:20 +0000</bug_when>
    <thetext>Commit: 

https://github.com/tianocore-docs/edk2-FdfSpecification/commit/e1b70fae8e817379b31f46df92367899b182acd4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>791</bug_id>
          
          <creation_ts>2017-11-20 06:49:56 +0000</creation_ts>
          <short_desc>MdeModulePkg/Universal/DisplayEngineDxe/Popup.c:689:22: error: equality comparison with extraneous parentheses</short_desc>
          <delta_ts>2017-12-05 20:17:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nikolai Saoukh">nms</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3100</commentid>
    <comment_count>0</comment_count>
    <who name="Nikolai Saoukh">nms</who>
    <bug_when>2017-11-20 06:49:56 +0000</bug_when>
    <thetext>MdeModulePkg/Universal/DisplayEngineDxe/Popup.c:689:22: error: equality comparison with extraneous parentheses [-Werror,-Wparentheses-equality]
  if((gMessageString == NULL)) {
      ~~~~~~~~~~~~~~~^~~~~~~</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3156</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-30 19:19:07 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3186</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-12-05 20:17:29 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/2f808acc87ccc7bbaade923886e968b719104d11</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>699</bug_id>
          
          <creation_ts>2017-09-06 07:50:16 +0000</creation_ts>
          <short_desc>undefined behavior of left shift of int 1 by 31 in AhciMode.c</short_desc>
          <delta_ts>2017-09-29 04:22:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2695</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-09-06 07:50:16 +0000</bug_when>
    <thetext>edk2 asan/ubsan catch a undefined behavior in edk2\MdeModulePkg\Bus\Ata\AtaAtapiPassThru\AhciMode.c function AhciModeInitialization()
line 2317:
    if ((PortImplementBitMap &amp; (BIT0 &lt;&lt; Port)) != 0) {

The (BIT0 &lt;&lt; Port) will become (1 &lt;&lt; 31) when Port=31. The 1 &lt;&lt; 31 is a undefined behavior because the &quot;1&quot; here default is a 4 byte signed (int type) positive value. So, 1 &lt;&lt; 31 might make the result become a negative value. 

Above code can be simply fixed by force the &quot;1&quot; BIT0  as unsigned int like below:

line 2317:
    if ((PortImplementBitMap &amp; ((UINT32)BIT0 &lt;&lt; Port)) != 0) {

The Bug697 is the same type issue, and please refer to it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2705</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-07 20:02:42 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2813</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-29 04:22:23 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/27daa8658e518902bf281b07993c2d60af1913c3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>249</bug_id>
          
          <creation_ts>2016-11-23 04:37:40 +0000</creation_ts>
          <short_desc>FDF spec miss &apos;&lt;UiFmpName&gt;&apos; definiation</short_desc>
          <delta_ts>2017-04-12 12:45:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II FDF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1007</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2016-11-23 04:37:40 +0000</bug_when>
    <thetext>In FDF 1.27, there is &lt;UiFmpName&gt; in Page 89. but I didn&apos;t find definition EBNF.

&lt;FmpPayload&gt; ::= &quot;[FmpPayload&quot; &lt;UiFmpName&gt; &quot;]&quot; &lt;EOL&gt;
&lt;FmpTokens&gt;
&lt;FmpFileData&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1084</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-11-30 20:06:57 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1797</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-12 12:45:04 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore-docs/edk2-FdfSpecification/commit/a30151c4a8d2e012572824635054e10fa607eb69</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>614</bug_id>
          
          <creation_ts>2017-06-26 02:42:13 +0000</creation_ts>
          <short_desc>error debug link in BuildGatherList of CapsuleApp.c</short_desc>
          <delta_ts>2017-07-03 05:58:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang Cloud">winggundum82</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2342</commentid>
    <comment_count>0</comment_count>
    <who name="Wang Cloud">winggundum82</who>
    <bug_when>2017-06-26 02:42:13 +0000</bug_when>
    <thetext>the following code in BuildGatherList of CapsuleApp.c is wrong

Print (L&quot;CapsuleApp: capsule data starts          at 0x%X with size 0x%X\n&quot;, (UINTN) CapsuleBuffer, FileSize);

it should be (UINTN) CapsuleBuffer[Index], FileSize[Index]),otherwise only pointer is displayed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2380</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-29 20:03:41 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2386</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-07-03 05:58:18 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/94f5c6001c41a2d4e3d5953e43003373333d6ebe.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>165</bug_id>
          
          <creation_ts>2016-10-21 05:05:04 +0000</creation_ts>
          <short_desc>ArmVirtPkg: Add the build option &quot;/D DISABLE_NEW_DEPRECATED_INTERFACES&quot; in package DSC files</short_desc>
          <delta_ts>2016-10-25 05:08:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>686</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-21 05:05:04 +0000</bug_when>
    <thetext>+++ This bug was initially created as a clone of Bug #164 +++

This one is separated from bug 93, and for ArmPkg, ArmVirtPkg, BeagleBoardPkg, Omap35xxPkg, EmbeddedPkg


We are planning to add the following build option in package DSC files:
[BuildOptions]
  *_*_*_CC_FLAGS = /D DISABLE_NEW_DEPRECATED_INTERFACES

The goal is to make sure that the deprecated APIs will not be used in our code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>690</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-21 05:09:22 +0000</bug_when>
    <thetext>Taking this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>697</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-21 17:29:38 +0000</bug_when>
    <thetext>Posted series
[edk2] [PATCH 00/19] OvmfPkg, ArmVirtPkg: leave deprecated interfaces behind
https://lists.01.org/pipermail/edk2-devel/2016-October/003132.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>710</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-25 05:08:53 +0000</bug_when>
    <thetext>Fixed in 2a3263303b51..17dc8ebc0d76.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>443</bug_id>
          
          <creation_ts>2017-03-24 12:58:08 +0000</creation_ts>
          <short_desc>enable FixedAtBuild (VOID*) PCD use in the [DEPEX] section of INF files</short_desc>
          <delta_ts>2018-07-22 20:58:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>444</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1687</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-24 12:58:08 +0000</bug_when>
    <thetext>This feature request is about build-time parametrization of the DEPEX section of INF files. Namely, a platform should be able to set a Fixed-At-Build pointer PCD to a GUID, and reuse a common library (or other) INF file that uses this GUID, through PCD reference, in the DEPEX section.

For the more detailed proposal, please refer to:

https://lists.01.org/pipermail/edk2-devel/2017-March/008976.html

message-id &lt;0C09AFA07DD0434D9E2A0C6AEB0483103B84CA03@shsmsx102.ccr.corp.intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1700</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-03-29 21:04:51 +0000</bug_when>
    <thetext>assigned to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4367</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-22 20:58:42 +0000</bug_when>
    <thetext>fix it by SHA-1: a10def91653163dbc6a38a609a87b370e9035654</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>717</bug_id>
          
          <creation_ts>2017-09-23 22:12:36 +0000</creation_ts>
          <short_desc>[Build Spec] Build report to display every module&apos;s build time</short_desc>
          <delta_ts>2017-09-26 01:36:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2772</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-23 22:12:36 +0000</bug_when>
    <thetext>We&apos;d like to update build report to display every module&apos;s build time. Besides, current build report display the build duration, we also plan to enhance it to display AutoGen Phase build duration, Make phase duration and GenFds duration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2787</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-26 01:36:47 +0000</bug_when>
    <thetext>fixed it by SHA-1: bde85909b31dfb779b80455ceabadfbbb80faf29</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>543</bug_id>
          
          <creation_ts>2017-05-16 02:00:34 +0000</creation_ts>
          <short_desc>[BaseTools] Extended SKU Support - Inheritance</short_desc>
          <delta_ts>2017-12-26 04:23:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2042</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-05-16 02:00:34 +0000</bug_when>
    <thetext>When PCD values are specified for multiple SKUs, the Non-DEFAULT SKU could only derive from DEFAULT SKU, but could not derive from another non-DEFAULT SKU. This requests BaseTools to support PCD values inheritance between the different SKUs.

The RFC has been sent to edk2 community for review. 
https://lists.01.org/pipermail/edk2-devel/2017-May/010669.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2054</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-17 21:12:22 +0000</bug_when>
    <thetext>assign o Star</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3265</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-26 04:23:14 +0000</bug_when>
    <thetext>edk2 trunk c40dbe5e7bf9...7c7362651323</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>459</bug_id>
          
          <creation_ts>2017-04-05 02:32:37 +0000</creation_ts>
          <short_desc>Can not enter shell when booting to shell without pressing any key</short_desc>
          <delta_ts>2017-04-07 03:20:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1732</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-04-05 02:32:37 +0000</bug_when>
    <thetext>Reproduce steps on Nt32:
1. Build/run Nt32, press enter to boot to shell
2. Do not press any key, 5s later, it can not enter to shell</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1759</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-06 20:12:12 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1770</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-04-07 02:41:12 +0000</bug_when>
    <thetext>fixed @ 35b523c29ff480c5e50b6f28d80d930d0b83fe72</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1773</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-04-07 03:20:42 +0000</bug_when>
    <thetext>verified on Nt32.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>284</bug_id>
          
          <creation_ts>2016-12-06 18:36:10 +0000</creation_ts>
          <short_desc>Outdated build instructions for linux</short_desc>
          <delta_ts>2016-12-07 20:12:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nathaniel Roach">nroach44</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1119</commentid>
    <comment_count>0</comment_count>
    <who name="Nathaniel Roach">nroach44</who>
    <bug_when>2016-12-06 18:36:10 +0000</bug_when>
    <thetext>As per https://github.com/tianocore/tianocore.github.io/wiki/Common-instructions :

nroach44@normandy:~/media/code/coreboot/tianocore-edk2-git$ git status
On branch master
Your branch is up-to-date with &apos;origin/master&apos;.
nothing to commit, working tree clean

nroach44@normandy:~/media/code/coreboot/tianocore-edk2-git$ make -C BuildTools
make: *** BuildTools: No such file or directory.  Stop.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1130</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-12-07 20:07:29 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1132</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-12-07 20:12:05 +0000</bug_when>
    <thetext>Wiki updated to resolve typo

&quot;BuildTools&quot; replaced with &quot;BaseTools&quot;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>650</bug_id>
          
          <creation_ts>2017-07-25 23:38:55 +0000</creation_ts>
          <short_desc>MdeModulePkg MemoryTest drivers should consider EfiGcdMemoryTypeMoreReliable type</short_desc>
          <delta_ts>2018-03-01 21:45:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2503</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-07-25 23:38:55 +0000</bug_when>
    <thetext>MdeModulePkg/Universal/MemoryTest/GenericMemoryTestDxe
MdeModulePkg/Universal/MemoryTest/NullMemoryTestDxe

Only EfiGcdMemoryTypeSystemMemory is counted, so regions of type EfiGcdMemoryTypeMoreReliable are not part of the TotalMemorySize returned by PerformMemoryTest.

Also, when testing and promoting regions of type EfiGcdMemoryTypeReserved, they are always promoted to EfiGcdMemoryTypeSystemMemory regardless of whether EFI_MEMORY_MORE_RELIABLE is set for the range.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2517</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-27 20:05:43 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3647</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-03-01 21:45:33 +0000</bug_when>
    <thetext>pushed @ UDK2018 7a718a2537054bb23082ff2da0412b1d80f63bed, 9aea281020534363a7bb49ed4de62930c8c9def0
pushed @ master 1c06bd485e45ccbcec1b532d26fba3208b32b0c5, 2e5fb984ed6876b173b1bd558fdaa41f08b7ed6f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>199</bug_id>
          
          <creation_ts>2016-11-01 03:13:07 +0000</creation_ts>
          <short_desc>[MdeModulePkg] CpuExceptionHandlerLibNULL should not return EFI_SUCESS</short_desc>
          <delta_ts>2016-11-17 20:51:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeff Fan">vanjeff_919</reporter>
          <assigned_to name="Jeff Fan">vanjeff_919</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>804</commentid>
    <comment_count>0</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-11-01 03:13:07 +0000</bug_when>
    <thetext>Current CpuExceptionHandlerLibNULL will return EFI_SUCCESS directly. It may hide the issue that developer does not select the correct CpuExceptionHandler instances.

We need to consider to return EFI_UNSPPORTED in CpuExceptionHandlerLibNULL instance and update the caller to check return status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>834</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-03 20:05:46 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>984</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-11-17 20:51:19 +0000</bug_when>
    <thetext>Commit at:
https://github.com/tianocore/edk2/commit/0e99d51637dee0940a23556f3aee2e7c89bd016f
https://github.com/tianocore/edk2/commit/5c88af795dadb81c9fe43af813b7b6d69bc5e0e4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>563</bug_id>
          
          <creation_ts>2017-05-18 20:31:40 +0000</creation_ts>
          <short_desc>Remove XCODE32 tool chain from BaseTools/Conf/tools_def.template</short_desc>
          <delta_ts>2017-07-05 01:58:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2092</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-18 20:31:40 +0000</bug_when>
    <thetext>The XCODE5 tool chain is the preferred tool chain to use
for macOS.  The XCODE32 tool chain should be retires and
removed from tools_def.template.

NOTE: The XCODE32 tool chain supports ARM CPU, but the
XCODE5 does not.  ARM support may need to be added to XCODE5
before XCODE32 can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2172</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-24 21:08:32 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2395</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-07-05 01:58:53 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/f7bd152c2a05bd75471305184c25f14f01ccf0b7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>475</bug_id>
          
          <creation_ts>2017-04-13 18:02:14 +0000</creation_ts>
          <short_desc>Potential recursive loop in BmExpandUsbDevicePath</short_desc>
          <delta_ts>2017-04-20 04:35:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1807</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-04-13 18:02:14 +0000</bug_when>
    <thetext>BmExpandUsbDevicePath is called from EfiBootManagerGetLoadOptionBuffer.  Unfortunately, BmExpandUsbDevicePath also calls EfiBootManagerGetLoadOptionBuffer.

If the attempted expanded path matches exactly the path that is going to be passed to EfiBootManagerGetLoadOptionBuffer again, this code will recurse until a stack fault occurs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1808</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-13 20:04:05 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1819</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-04-13 23:39:13 +0000</bug_when>
    <thetext>Turner,
Did you meet the stack fault?
BmExpandUsbDevicePath() is called with UsbClass or UsbWwid device path node.
While when it calls back to EfiBootManagerGetLoadOptionBuffer, the device path is not UsbClass or UsbWwid. So the infinit recursy won&apos;t happen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1831</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-04-14 13:21:14 +0000</bug_when>
    <thetext>The recurse happens when the Boot Option is a USB Class option with all types 0xFF.  In finds a USB Keyboard, and calls GetLoadOptionBuffer with the device path of the USB Keyboard.  Since it fails the BlockIo/FileSystem check, the path calls ExpandUsb again.  The recurse happens when processing the UsbIo handles again, and returns an identical device path, and calls GetLoadOptionBuffer.  This repeats until the stack grows down to a guard page we implemented causing a stack/page fault.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1843</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-04-17 22:53:33 +0000</bug_when>
    <thetext>BmExpandUsbDevicePath is only called when the &quot;Node&quot; points to UsbClass or UsbWwid device path node.
For a UsbIo handle, its device path should not contains the UsbClass or UsbWwid device path node.
UsbClass or UsbWwid is only used in a load option, or as a remaining device path to UsbBus driver&apos;s Start() function.
So I still don&apos;t understand why the recurs happens.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1848</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-04-18 13:20:16 +0000</bug_when>
    <thetext>We have our own composite device that includes mouse functionality.  In order to use the built in UsbKeyboard device, we create a standalone device (as opposed to a child device) with the device path \VenHd\UsbWwid (with specific information, not generic) with a private USBIO protocol. Internally we treat that as a child of the USB Composite device.

We could not produce a child device of the composite device with our own USBIO as the USB Bus driver incorrectly (IMHO) assumes *all* USBIO protocols on *all* child devices must be of they type within the USB_BUS_DEVICE structure.

There is nothing that I could find in the UEFI spec that precludes using UsbWwid in a device path of a physical device.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1879</commentid>
    <comment_count>6</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-04-20 04:35:45 +0000</bug_when>
    <thetext>pushed @ master 21e359dccab7f3cd7b527721be042d034349417d
pushed @ UDK2017 250c5b2aaa2ee28d4c37b58cdd22045b9a8fe9a8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>388</bug_id>
          
          <creation_ts>2017-02-19 20:26:27 +0000</creation_ts>
          <short_desc>CapsuleApp  add –NR (no-reset) flag to skip reset according to user reset</short_desc>
          <delta_ts>2017-03-21 03:15:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang Cloud">winggundum82</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1473</commentid>
    <comment_count>0</comment_count>
    <who name="Wang Cloud">winggundum82</who>
    <bug_when>2017-02-19 20:26:27 +0000</bug_when>
    <thetext>user cannot distinguish whether the reset is triggered by bios code or application code , there is no difference for CAPSULE_FLAGS_PERSIST_ACROSS_RESET only capsule and CAPSULE_FLAGS_PERSIST_ACROSS_RESET + CAPSULE_FLAGS_INITIATE_RESET capsule in current design.To make the solution complete,please add –NR (no-reset) flag for CAPSULE_FLAGS_PERSIST_ACROSS_RESET only capsule.
For CAPSULE_FLAGS_PERSIST_ACROSS_RESET + CAPSULE_FLAGS_INITIATE_RESET capsule ,it should still reset after bios update complete</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1516</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-23 19:13:29 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1652</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-03-21 02:51:53 +0000</bug_when>
    <thetext>Fixed at 7043a90eee1150db1d55cdde2a98700fa10838e5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1653</commentid>
    <comment_count>3</comment_count>
    <who name="Wang Cloud">winggundum82</who>
    <bug_when>2017-03-21 03:15:14 +0000</bug_when>
    <thetext>Verified in latest edk2 trunk</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>666</bug_id>
          
          <creation_ts>2017-08-10 10:03:41 +0000</creation_ts>
          <short_desc>[BaseTools] EfiRom: Add multiple device id support</short_desc>
          <delta_ts>2017-08-25 19:33:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tomas Pilar">tpilar</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2580</commentid>
    <comment_count>0</comment_count>
    <who name="Tomas Pilar">tpilar</who>
    <bug_when>2017-08-10 10:03:41 +0000</bug_when>
    <thetext>This feature is available from PCIe 3.0 and we&apos;d like it to be able to associate our option ROM with multiple generations of devices.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2581</commentid>
    <comment_count>1</comment_count>
      <attachid>95</attachid>
    <who name="Tomas Pilar">tpilar</who>
    <bug_when>2017-08-10 10:08:21 +0000</bug_when>
    <thetext>Created attachment 95
proposed patch by David Verkamp from 2011

This patch can be found in original form at:
https://sourceforge.net/p/edk2-buildtools/mailman/message/27185637/

Original message:

--------

Hello,

Attached is a patch to implement writing and dumping of PCI 3.0 Device ID lists in EFI option ROMs in the EfiRom tool.

Using this modification, multiple space-delimited device IDs can be specified after -i.  The first device in the list is used for the main PCI ROM header Device ID field and is also written in the list.  The list is only written when more than one device ID has been specified; when only one device ID is given on the command line, the EfiRom output should be identical to the current code.

Let me know if there&apos;s anything I missed.

Thanks,
-- Daniel Verkamp

--------</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2626</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-08-23 21:03:47 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2647</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-25 19:33:38 +0000</bug_when>
    <thetext>pushed the fix: SHA-1: 9f3a38cdfb354a5a074312783a43b7bd21cc90e2</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>95</attachid>
            <date>2017-08-10 10:08:21 +0000</date>
            <delta_ts>2017-08-10 10:08:21 +0000</delta_ts>
            <desc>proposed patch by David Verkamp from 2011</desc>
            <filename>EfiRom_device_list.patch</filename>
            <type>text/plain</type>
            <size>9119</size>
            <attacher name="Tomas Pilar">tpilar</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>217</bug_id>
          
          <creation_ts>2016-11-09 23:30:28 +0000</creation_ts>
          <short_desc>When use &quot;Auto&quot; as FfsAlignment for RAW File, build tool report error</short_desc>
          <delta_ts>2016-11-15 01:15:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>867</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-09 23:30:28 +0000</bug_when>
    <thetext>FDF spec extend to support multiple binary files with its alignment of RAW FILE.
And it support following alignment, but when we use &quot;Auto&quot;,  build tool report error.

&lt;FfsAlignmentValues&gt; ::= {&quot;Auto&quot;} {&quot;8&quot;} {&quot;16&quot;} {&quot;32&quot;} {&quot;64&quot;} {&quot;128&quot;} {&quot;512&quot;} {&quot;1K&quot;} {&quot;4K&quot;} {&quot;32K&quot;} {&quot;64K&quot;}

example:
FILE RAW = 197DB236-F856-4924-90F8-CDF12FB875F3 {
 Align=Auto $(PLATFORM_PACKAGE)/Binaries/File1.pdb
 Align=16   $(PLATFORM_PACKAGE)/Binaries/File2.pdb
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>868</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-09 23:31:16 +0000</bug_when>
    <thetext>Change to Yonghong to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>933</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-15 01:15:42 +0000</bug_when>
    <thetext>fix it in SHA-1: f475f1e2361877e9947ecda98a697bc55fb9d85a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>959</bug_id>
          
          <creation_ts>2018-05-29 02:12:54 +0000</creation_ts>
          <short_desc>CpuS3DataDxe / DxeRegisterCpuFeaturesLib dependency</short_desc>
          <delta_ts>2018-08-16 21:59:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4025</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2018-05-29 02:12:54 +0000</bug_when>
    <thetext>Community raised this issue.  https://lists.01.org/pipermail/edk2-devel/2018-May/025216.html


When DxeRegisterCpuFeaturesLib checks the value of PCD PcdCpuS3DataAddress, it assumes the value of this PCD has been updated by CpuS3DataDxe driver. But base on the code implementation, this assumption is not always true. 

Submit this bugz to fix this issue, need to implement the AllocateAcpiCpuData function, similar with the same function in PeiRegisterCpuFeaturesLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4037</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-31 20:04:27 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4619</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2018-08-16 21:59:21 +0000</bug_when>
    <thetext>SHA-1: a6daab1f6cb836e4147324bb85fc17930be14e87

* UefiCpuPkg/RegisterCpuFeaturesLib: Combine implementation.

V1 changes:
&gt; Current code logic can&apos;t confirm CpuS3DataDxe driver start before
&gt; CpuFeaturesDxe driver. So the assumption in CpuFeaturesDxe not valid.
&gt; Add implementation for AllocateAcpiCpuData function to remove this
&gt; assumption.

V2 changes:
&gt; Because CpuS3Data memory will be copy to smram at SmmReadToLock point,
&gt; so the memory type no need to be ACPI NVS type, also the address not
&gt; limit to below 4G.
&gt; This change remove the limit of ACPI NVS memory type and below 4G.

V3 changes:
&gt; Remove function definition in header file.
&gt; Add STATIC in function implementation.

Pass OS boot and resume from S3 test.

Bugz: https://bugzilla.tianocore.org/show_bug.cgi?id=959

Reported-by: Marvin Häuser &lt;Marvin.Haeuser@outlook.com&gt;
Suggested-by: Fan Jeff &lt;vanjeff_919@hotmail.com&gt;
Cc: Marvin Häuser &lt;Marvin.Haeuser@outlook.com&gt;
Cc: Fan Jeff &lt;vanjeff_919@hotmail.com&gt;
Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
Cc: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;
Reviewed-by: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>411</bug_id>
          
          <creation_ts>2017-02-28 02:05:25 +0000</creation_ts>
          <short_desc>[TlsAuthConfigDxe] Use StrToGuid in BaseLib</short_desc>
          <delta_ts>2017-03-05 19:37:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="jiaxinwu">jiaxin.wu</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1548</commentid>
    <comment_count>0</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-02-28 02:05:25 +0000</bug_when>
    <thetext>Since the commit [https://github.com/tianocore/edk2/commit/36396ea2e320b5c5a3d1b5842267dd91215846a5] added the API to convert Unicode string to GUID, we can use it directly in TlsAuthConfigDxe driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1549</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-02-28 02:06:22 +0000</bug_when>
    <thetext>Working on the fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1564</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-02 19:08:14 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1580</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-05 19:37:59 +0000</bug_when>
    <thetext>
Commit:

https://github.com/tianocore/edk2/commit/f1bbd4e3cc57c59a5d0efc9bf4f27cbc80810b36</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>772</bug_id>
          
          <creation_ts>2017-11-09 13:55:36 +0000</creation_ts>
          <short_desc>Change MinnowBoard Max DSC to use PREBUILD/POSTBUILD</short_desc>
          <delta_ts>2018-04-09 21:24:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard Max</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian Richardson (Intel)">brian.richardson</reporter>
          <assigned_to>david.wei</assigned_to>
          <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>Vlv2DeviceRefCodePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3017</commentid>
    <comment_count>0</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-11-09 13:55:36 +0000</bug_when>
    <thetext>Current MinnowBoard Max build process requires build process starts with a custom batch/script file instead of standard &apos;build&apos; command. This non-standard build process should be modified to use PREBUILD/POSTBUILD definitions in DSC.

Using DSC PREBUILD/POSTBUILD allows generic &apos;build&apos; command to be executed, which follows EDK II standard.

Request this change be made in the 1.00 release to provide a best practices example for other platforms. Prefer .BAT/.SH files be replaced with Python for cross-OS compatibility, but this is not a requirement.

Reference Info:
https://bugzilla.tianocore.org/show_bug.cgi?id=484
https://github.com/tianocore-docs/edk2-DscSpecification/blob/7f47b4cf290d4bc14d0739112d21fa952e77b831/2_dsc_overview/23_%5Bdefines%5D_section_processing.md</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3023</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-09 19:09:34 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3842</commentid>
    <comment_count>2</comment_count>
    <who name="">david.wei</who>
    <bug_when>2018-04-09 21:24:52 +0000</bug_when>
    <thetext>We recommend to do this in next generation platform such as Minnowboard 3 codebase. Minnowboard Max production requires stable quality,  it risky to make such a big change when the project is reaching its end of life.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>322</bug_id>
          
          <creation_ts>2017-01-03 21:32:32 +0000</creation_ts>
          <short_desc>The mixed Pcd display incorrectly in the build report</short_desc>
          <delta_ts>2017-01-04 03:51:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1237</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-03 21:32:32 +0000</bug_when>
    <thetext>The mixed Pcd display incorrectly in the build report. 
1) it is display twice in the  Global PCD Section. but Global PCD Section This section contains the information for all PCDs whose values are the same for all
modules in a platform. so the mixed pcd should not appear since for mixed pcd, the type is different.

2) the mixed pcd name is display incorrect in the report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1238</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-03 21:33:10 +0000</bug_when>
    <thetext>assign to yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1244</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-04 03:51:43 +0000</bug_when>
    <thetext>fix it SHA-1: 7cb63c870bac7a986936aeb6e70b22ebf80d4ba9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>598</bug_id>
          
          <creation_ts>2017-06-19 03:33:42 +0000</creation_ts>
          <short_desc>Build Spec: update supported operators in 8.2.4.6 Expressions</short_desc>
          <delta_ts>2018-09-12 21:58:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2295</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-19 03:33:42 +0000</bug_when>
    <thetext>current Expression spec support blew operands , but it is not mentioned in the build spec 8.2.4.6 Expressions.

? :
&lt;&lt;  &gt;&gt;
~ * / %</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2311</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-21 21:23:35 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3562</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-10 06:59:40 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4920</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-12 21:58:27 +0000</bug_when>
    <thetext>patch email: 
https://lists.01.org/pipermail/edk2-devel/2018-September/029576.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4921</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-12 21:58:53 +0000</bug_when>
    <thetext>commit:
build spec: SHA-1: 8f6cd9cba4169577097131dbedb36a4b68885654</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>149</bug_id>
          
          <creation_ts>2016-10-14 09:03:09 +0000</creation_ts>
          <short_desc>[BaseTools] Update sign tool to make MonotonicCount *after* Payload</short_desc>
          <delta_ts>2016-11-14 02:30:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>603</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-14 09:03:09 +0000</bug_when>
    <thetext>The WIN_CERTIFICATE_UEFI_GUID AuthInfo defined in the UEFI spec mentioned that It is a signature across the image data and the Monotonic Count value. After clarification, we do the signature calculation, we put MonotonicCount after Payload.


=======================================================

From: uswg@uefi.org [mailto:uswg@uefi.org] On Behalf Of Yao, Jiewen
Sent: Wednesday, October 12, 2016 1:52 PM
To: Sean Brogan &lt;sean.brogan@microsoft.com&gt;; uswg@uefi.org
Cc: Zimmer, Vincent &lt;vincent.zimmer@intel.com&gt;
Subject: [uswg] RE: Clarification on UEFI2.6 EFI_FIRMWARE_IMAGE_AUTHENTICATION

Thanks for the info.

If we all agree that *after* should be chosen, I will do my implementation in same way.

Thank you
Yao Jiewen

From: Sean Brogan [mailto:sean.brogan@microsoft.com] 
Sent: Wednesday, October 12, 2016 10:15 AM
To: Yao, Jiewen &lt;jiewen.yao@intel.com&gt;; uswg@uefi.org
Cc: Zimmer, Vincent &lt;vincent.zimmer@intel.com&gt;
Subject: RE: Clarification on UEFI2.6 EFI_FIRMWARE_IMAGE_AUTHENTICATION

For the implementation shipped on Surface devices we use *after*.  
Image payload immediately (no padding) followed by monotonic count.  

Thanks
Sean



This email message may contain confidential and privileged information.  Any unauthorized use is prohibited.  If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message.

From: Yao, Jiewen [mailto:jiewen.yao@intel.com] 
Sent: Tuesday, October 11, 2016 6:57 PM
To: uswg@uefi.org
Cc: Zimmer, Vincent &lt;vincent.zimmer@intel.com&gt;; Sean Brogan &lt;sean.brogan@microsoft.com&gt;
Subject: Clarification on UEFI2.6 EFI_FIRMWARE_IMAGE_AUTHENTICATION

Hi
I am viewing UEFI2.6 spec, page 1079.

typedef struct {
UINT64 MonotonicCount;
WIN_CERTIFICATE_UEFI_GUID AuthInfo;
} EFI_FIRMWARE_IMAGE_AUTHENTICATION;

The spec mentions : *It is a signature across the image data and the Monotonic Count value.*

I would like to clarify when we do the signature calculation, should we put MonotonicCount *before* Payload, or MonotonicCount *after* Payload?

That is important because we will get different result between them.

Thank you
Yao Jiewen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>623</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-18 22:18:02 +0000</bug_when>
    <thetext>Assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>624</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-18 22:20:19 +0000</bug_when>
    <thetext>push the fix SHA-1: 245cda6641ade1f1013c2d5c9c838f2706636828</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>427</bug_id>
          
          <creation_ts>2017-03-16 05:00:12 +0000</creation_ts>
          <short_desc>Ip4-&gt;Configure () accepts subnet 0.0.0.0 in certain conditions</short_desc>
          <delta_ts>2017-03-16 23:35:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nagaraj Hegde">nagaraj-p.hegde</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>sriram-s</cc>
    
    <cc>ting.ye</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1622</commentid>
    <comment_count>0</comment_count>
    <who name="Nagaraj Hegde">nagaraj-p.hegde</who>
    <bug_when>2017-03-16 05:00:12 +0000</bug_when>
    <thetext>Subnet of 0.0.0.0 can be debated as a valid or an invali input. Ifconfig is successfully configuring the interface and ping is able to negotiate and talk to the target server too. However if my TCP config data is as shown below, Ip4.Configure () is returning EFI_INVALID_PARAMETER:

UseDefaultAddress is set to FALSE
StationAddress is say 192.168.1.11
SubnetMask is set to 0.0.0.0

HttpConfigureTcp4 calls EfiIp4Configure. In EfiIp4Configure, we call Ip4StationAddressValid when UseDefaultAddress is FALSE. This function is returning EFI_INVALID_PARAMETER.

We need to be consistent in configuration. It is learnt that windows also doesnt allow a 0.0.0.0 subnet. So, we need to block accepting 0.0.0.0 either from USER (manually or programmatically) or from DHCP server.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1627</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-16 20:04:59 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1632</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-16 23:35:00 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/f1222593f2a8944ab8f61f3864b6ae80633faecf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>250</bug_id>
          
          <creation_ts>2016-11-23 10:12:31 +0000</creation_ts>
          <short_desc>[openbsd] Can&apos;t build BaseTools on OpenBSD 6.0-current (2016-11-07) amd64</short_desc>
          <delta_ts>2022-03-01 21:57:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="jirib">jirib</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1008</commentid>
    <comment_count>0</comment_count>
    <who name="jirib">jirib</who>
    <bug_when>2016-11-23 10:12:31 +0000</bug_when>
    <thetext>Hi,

I&apos;m trying to do build but it fails with:

$ gcc -v             
Using built-in specs.
COLLECT_GCC=/usr/local/bin/egcc
COLLECT_LTO_WRAPPER=/usr/local/libexec/gcc/x86_64-unknown-openbsd6.0/4.9.4/lto-wrapper
Target: x86_64-unknown-openbsd6.0
Configured with: /usr/obj/ports/gcc-4.9.4/gcc-4.9.4/configure --enable-libgcj --without-jar --verbose --program-transform-name=&apos;s,^,e,&apos; --disable-nls --with-system-zlib --disable-libmudflap --disable-libgomp --disable-tls --with-gnu-ld --with-gnu-as --enable-threads=posix --enable-wchar_t --with-gmp=/usr/local --enable-languages=c,c++,fortran,objc,java,ada --disable-libstdcxx-pch --enable-cpp --prefix=/usr/local --sysconfdir=/etc --mandir=/usr/local/man --infodir=/usr/local/info --localstatedir=/var --disable-silent-rules --disable-gtk-doc
Thread model: posix
gcc version 4.9.4 (GCC)

$ sysctl kern.version
kern.version=OpenBSD 6.0-current (GENERIC.MP) #0: Mon Nov  7 21:42:23 MST 2016
    deraadt@amd64.openbsd.org:/usr/src/sys/arch/amd64/compile/GENERIC.MP

gmake -C VolInfo
gmake[2]: Entering directory &apos;/home/jirib/tmp/edk2/BaseTools/Source/C/VolInfo&apos;
gcc  -c -MD -fshort-wchar -fno-strict-aliasing -Wall -Werror -Wno-deprecated-declarations -Wno-unused-result -nostdlib -c -g  -I .. -I ../Include/Common -I ../Include/ -I ../Include/IndustryStandard -I ../Common/ -I .. -I . -I ../Include/X64/  -O2 VolInfo.c -o VolInfo.o
VolInfo.c: In function &apos;ParseSection&apos;:
VolInfo.c:1717:7: error: format &apos;%ls&apos; expects argument of type &apos;wchar_t *&apos;, but argument 2 has type &apos;wchar_t *&apos; [-Werror=format=]
       printf (&quot;  String: %ls\n&quot;, (wchar_t *) &amp;((EFI_USER_INTERFACE_SECTION *) Ptr)-&gt;FileNameString);
       ^
cc1: all warnings being treated as errors
gmake[2]: *** [../Makefiles/footer.makefile:27: VolInfo.o] Error 1
gmake[2]: Leaving directory &apos;/home/jirib/tmp/edk2/BaseTools/Source/C/VolInfo&apos;
gmake[1]: *** [GNUmakefile:79: VolInfo] Error 2
gmake[1]: Leaving directory &apos;/home/jirib/tmp/edk2/BaseTools/Source/C&apos;
gmake: *** [GNUmakefile:25: Source/C] Error 2
gmake: Leaving directory &apos;/home/jirib/tmp/edk2/BaseTools&apos;

Any idea how to proceed? Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1009</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-23 15:30:11 +0000</bug_when>
    <thetext>I suggest to proceed with a non-broken compiler. The error message itself is bogus:

&gt; VolInfo.c:1717:7: error: format &apos;%ls&apos; expects argument of type &apos;wchar_t *&apos;,
&gt; but argument 2 has type &apos;wchar_t *&apos; [-Werror=format=]

The expected type and the actual type are identical, even according to the error message.

As a work-around, you could edit out the appropriate warning flags from &quot;Conf/tools_def.txt&quot;,

I recall a guide for FreeBSD from earlier:

https://people.freebsd.org/~wpaul/edk2/README.txt

but I understand that OpenBSD is different.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1010</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-23 15:33:37 +0000</bug_when>
    <thetext>Ooops, sorry, &quot;Conf/tools_def.txt&quot; covers only the edk2 build, not the tools build. The build flags for the tools are located in &quot;BaseTools/Source/C/Makefiles/header.makefile&quot;. If you remove &quot;-Werror&quot; from there, the build might succeed. (But, again, this is just a workaround.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1026</commentid>
    <comment_count>3</comment_count>
    <who name="jirib">jirib</who>
    <bug_when>2016-11-26 12:51:12 +0000</bug_when>
    <thetext>It passes this step fine without -Werror, thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1030</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-11-27 22:40:38 +0000</bug_when>
    <thetext>Hi jirib,

Could you help to test by changing the line from:
 printf (&quot;  String: %ls\n&quot;, (wchar_t *) &amp;((EFI_USER_INTERFACE_SECTION *) Ptr)-&gt;FileNameString);

to:
 printf (&quot;  String: %ls\n&quot;, (wchar_t *) ((EFI_USER_INTERFACE_SECTION *) Ptr)-&gt;FileNameString);

and adding &apos;-Werror&apos; back to see if the build error still exists?

Thanks in advance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1085</commentid>
    <comment_count>5</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-11-30 20:08:03 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1228</commentid>
    <comment_count>6</comment_count>
    <who name="jirib">jirib</who>
    <bug_when>2016-12-31 10:09:17 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #4)
&gt; Hi jirib,
&gt; 
&gt; Could you help to test by changing the line from:
&gt;  printf (&quot;  String: %ls\n&quot;, (wchar_t *) &amp;((EFI_USER_INTERFACE_SECTION *)
&gt; Ptr)-&gt;FileNameString);
&gt; 
&gt; to:
&gt;  printf (&quot;  String: %ls\n&quot;, (wchar_t *) ((EFI_USER_INTERFACE_SECTION *)
&gt; Ptr)-&gt;FileNameString);
&gt; 
&gt; and adding &apos;-Werror&apos; back to see if the build error still exists?
&gt; 
&gt; Thanks in advance.

gmake[2]: Entering directory &apos;/home/jirib/tmp/edk2/BaseTools/Source/C/VolInfo&apos;
gcc  -c -MD -fshort-wchar -fno-strict-aliasing -Wall -Werror -Wno-deprecated-declarations -Wno-unused-result -nostdlib -c -g  -I .. -I ../Include/Common -I ../Include/ -I ../Include/IndustryStandard -I ../Common/ -I .. -I . -I ../Include/X64/  -O2 VolInfo.c -o VolInfo.o
VolInfo.c: In function &apos;ParseSection&apos;:
VolInfo.c:1718:7: error: format &apos;%ls&apos; expects argument of type &apos;wchar_t *&apos;, but argument 2 has type &apos;wchar_t *&apos; [-Werror=format=]
       printf (&quot;  String: %ls\n&quot;, (wchar_t *) ((EFI_USER_INTERFACE_SECTION *) Ptr)-&gt;FileNameString);
       ^
cc1: all warnings being treated as errors
gmake[2]: *** [../Makefiles/footer.makefile:27: VolInfo.o] Error 1
gmake[2]: Leaving directory &apos;/home/jirib/tmp/edk2/BaseTools/Source/C/VolInfo&apos;
gmake[1]: *** [GNUmakefile:79: VolInfo] Error 2
gmake[1]: Leaving directory &apos;/home/jirib/tmp/edk2/BaseTools/Source/C&apos;
gmake: *** [GNUmakefile:25: Source/C] Error 2
gmake: Leaving directory &apos;/home/jirib/tmp/edk2/BaseTools&apos;

jirib:/home/jirib/tmp/edk2
$ grep -nH &apos;wchar_t.*EFI_USER_INTERFACE_SECTION&apos; ./BaseTools/Source/C/VolInfo/VolInfo.c
./BaseTools/Source/C/VolInfo/VolInfo.c:1717:      // printf (&quot;  String: %ls\n&quot;, (wchar_t *) &amp;((EFI_USER_INTERFACE_SECTION *) Ptr)-&gt;FileNameString);
./BaseTools/Source/C/VolInfo/VolInfo.c:1718:      printf (&quot;  String: %ls\n&quot;, (wchar_t *) ((EFI_USER_INTERFACE_SECTION *) Ptr)-&gt;FileNameString);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5490</commentid>
    <comment_count>7</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:39:29 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18491</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 21:57:59 +0000</bug_when>
    <thetext>Can&apos;t produce the issue in this environment.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>166</bug_id>
          
          <creation_ts>2016-10-21 05:05:23 +0000</creation_ts>
          <short_desc>OvmfPkg: Add the build option &quot;/D DISABLE_NEW_DEPRECATED_INTERFACES&quot; in package DSC files</short_desc>
          <delta_ts>2016-10-25 05:08:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>687</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-21 05:05:23 +0000</bug_when>
    <thetext>+++ This bug was initially created as a clone of Bug #162 +++

This one is separated from bug 93, and for EmulatorPkg OvmfPkg


We are planning to add the following build option in package DSC files:
[BuildOptions]
  *_*_*_CC_FLAGS = /D DISABLE_NEW_DEPRECATED_INTERFACES

The goal is to make sure that the deprecated APIs will not be used in our code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>691</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-21 05:09:37 +0000</bug_when>
    <thetext>Taking this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>696</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-21 17:29:35 +0000</bug_when>
    <thetext>Posted series
[edk2] [PATCH 00/19] OvmfPkg, ArmVirtPkg: leave deprecated interfaces behind
https://lists.01.org/pipermail/edk2-devel/2016-October/003132.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>711</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-25 05:08:54 +0000</bug_when>
    <thetext>Fixed in 2a3263303b51..17dc8ebc0d76.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>545</bug_id>
          
          <creation_ts>2017-05-16 02:28:37 +0000</creation_ts>
          <short_desc>Support the structure with Bit fields used as EFI VarStore/Buffer VarStore in VFR</short_desc>
          <delta_ts>2017-10-11 01:39:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2045</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-05-16 02:28:37 +0000</bug_when>
    <thetext>In VFR file, the storage of some Question may use Bit field in an EFI VarStore/Buffer VarStore. So we propose to update VfrCompiler/SetupBrowser/HiiDatabase to support this usage model as edk2 implementation enhancement. It will allow EFI varstore/Buffer Varstore has Bit fields, and CheckBox/OneOf/Numeric VarId can refer to Bit field. VFR syntax has no changes. VfrCompiler will auto create Question which refers to Bit field with a specific GUID opcode. If SetupBrowser doesn&apos;t recognize the GUID opcode, it will skip those Questions and show other Questions normally.

RFC link https://lists.01.org/pipermail/edk2-devel/2017-April/010005.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2056</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-17 21:13:08 +0000</bug_when>
    <thetext>assign to Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2773</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-09-24 21:03:01 +0000</bug_when>
    <thetext>Update the core code:
https://github.com/tianocore/edk2/commit/42c808d4cbc66605777dad18d800708f2c06f0c4
https://github.com/tianocore/edk2/commit/01723271a8baef1dc4c92bce0c09d41055cc5eb9
https://github.com/tianocore/edk2/commit/95a71351919aee15874b748f1aae2f8f492d2f76
https://github.com/tianocore/edk2/commit/37cd16ac57fcbe5f6ecd15f85ea51621d08cde59
https://github.com/tianocore/edk2/commit/560a435df02b233ea33ae543aeab76b2201de849</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2853</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-10-11 01:39:31 +0000</bug_when>
    <thetext>Add sample questions in DriverSample to refer bit field storage
https://github.com/tianocore/edk2/commit/911405a3f1122892f4d40a0f44e4e0c79b379f07</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>96</bug_id>
          
          <creation_ts>2016-08-07 21:22:03 +0000</creation_ts>
          <short_desc>Add the build option &quot;/D DISABLE_NEW_DEPRECATED_INTERFACES&quot; in package DSC files</short_desc>
          <delta_ts>2021-08-18 20:02:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3361</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Barton">jie.b.gao</reporter>
          <assigned_to name="Jaben Carsey">jaben.carsey</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>hot.tian</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>AppPkg</cf_package>
    
    <cf_package>StdLib</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>418</commentid>
    <comment_count>0</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-07 21:22:03 +0000</bug_when>
    <thetext>We are planning to add the following build option in package DSC files:
[BuildOptions]
  *_*_*_CC_FLAGS = /D DISABLE_NEW_DEPRECATED_INTERFACES

The goal is to make sure that the deprecated APIs will not be used in our code.

Bus 93 didn&apos;t cover all the packages, this one is for packages maintained by community.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>667</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:24:14 +0000</bug_when>
    <thetext>bug scrub: separate this bug by package owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>672</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:49:00 +0000</bug_when>
    <thetext>This bug focus on the  StdLib, StdLibPrivateInternalFiles, PerformancePkg  and AppPkg Packages.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>676</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-10-20 21:13:09 +0000</bug_when>
    <thetext>(In reply to yonghong.zhu from comment #2)
&gt; This bug focus on the  StdLib, StdLibPrivateInternalFiles, PerformancePkg 
&gt; and AppPkg Packages.

I checked those packages in edk2, the build option &quot;-D DISABLE_NEW_DEPRECATED_INTERFACES&quot; has already been added to the DSC file of PerformancePkg.

Also, there is no DSC file for package StdLibPrivateInternalFiles. So this package can be skipped.

Thus, only StdLib &amp; AppPkg should be covered in this bug. I also changed the &apos;Package&apos; field of this bug to reflect this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16977</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 20:02:01 +0000</bug_when>
    <thetext>Duplicate of 3361 that has already been fixed.

*** This bug has been marked as a duplicate of bug 3361 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>460</bug_id>
          
          <creation_ts>2017-04-05 04:32:48 +0000</creation_ts>
          <short_desc>Unnecessary parameter validation in ISCSI or Full parameter check would be better !!</short_desc>
          <delta_ts>2017-04-19 03:56:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>lubo.zhang</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1733</commentid>
    <comment_count>0</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-04-05 04:32:48 +0000</bug_when>
    <thetext>In iSCSI, there’s a comment which says “Only do full parameter validation if iSCSI is enabled on this device.” In such case, why iSCSI validates only a few of the parameters like Target Name, CHAP Secret and Reverse CHAP Secret. 

          I believe the validation is unnecessary as the Attempt will not be considered for connection. Or Since we anyway save it to NVRAM, is it better to validate all the attempt details even though the mode is disabled?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1758</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-06 20:11:37 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1779</commentid>
    <comment_count>2</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2017-04-07 05:00:30 +0000</bug_when>
    <thetext>some of the attempt parameters are checked in the place as you mentioned, such as ConnectTimeout, configuration of the Initiator and target, authentication informantion. other parameters will be checked in IScsiFormCallback during configuration in UI. 

If the user want to use the attempt for next boot, so it is necessary to validate the parameter when saving. But some one may just establish an attempt without configuration or establish two attempts with different target server for both iscsi mode enabled. So i think it is reasonable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1860</commentid>
    <comment_count>3</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2017-04-19 03:56:15 +0000</bug_when>
    <thetext>since no more comments, closed this tracker.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>285</bug_id>
          
          <creation_ts>2016-12-06 19:39:11 +0000</creation_ts>
          <short_desc>SignedCapsulePkg has no Readme.md file</short_desc>
          <delta_ts>2017-03-12 20:56:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian Richardson (Intel)">brian.richardson</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SignedCapsulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1121</commentid>
    <comment_count>0</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2016-12-06 19:39:11 +0000</bug_when>
    <thetext>SignedCapsulePkg does not have a Readme.md file. This is necessary for packages in EDK II.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1173</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-15 19:10:56 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner, put a link to edk2 wiki</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1606</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-03-12 20:56:38 +0000</bug_when>
    <thetext>git: 55ce319c48e97d8051ae7e43abdd608afab6584d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>651</bug_id>
          
          <creation_ts>2017-07-26 22:57:20 +0000</creation_ts>
          <short_desc>[PciBus] may hang when GetResourcePadding() doesn&apos;t put BUS descriptor in very beginning.</short_desc>
          <delta_ts>2017-07-28 05:53:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2511</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-26 22:57:20 +0000</bug_when>
    <thetext>In PciLib.c: PciScanBus(), it assumes the GetResourcePadding() puts BUS descriptor in the very beginning, if it&apos;s not, the Descriptors will be updated to point to middle of the pool buffer, which can cause FreePool(Descriptors) hang in DEBUG image. No functionality impact to RELEASE image.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2516</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-27 20:04:26 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2523</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-28 05:53:38 +0000</bug_when>
    <thetext>pushed @ fff2623cc2a5e3d85db201a4cf1ca8c595e20075.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>200</bug_id>
          
          <creation_ts>2016-11-01 06:40:54 +0000</creation_ts>
          <short_desc>mixed case in the ENV variable cause the variable value can&apos;t be found</short_desc>
          <delta_ts>2016-11-14 02:31:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>806</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-01 06:40:54 +0000</bug_when>
    <thetext>When we set the WINSDK81x86_PREFIX&apos;s value in the toolsetup.bat file, but in the ToolDefClassObject self.MacroDictionary can&apos;t get the value of ENV(WINSDK81x86_PREFIX).

After investigation, the root cause is:
os.environ contains all environment variables uppercase on Windows which
cause the key in the self.MacroDictionary is uppercase, but the real
variable name maybe mixed case, eg:WINSDK81x86, then we can&apos;t find the
variable in the self.MacroDictionary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>807</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-01 06:41:36 +0000</bug_when>
    <thetext>Assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>825</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-03 03:46:08 +0000</bug_when>
    <thetext>The fix is SHA-1: 18ca2fec97010e8a79407ec092539218c04ee1c5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>114</bug_id>
          
          <creation_ts>2016-09-08 22:06:36 +0000</creation_ts>
          <short_desc>need fix typo in SecurityPkg</short_desc>
          <delta_ts>2016-10-17 21:47:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>477</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-09-08 22:06:36 +0000</bug_when>
    <thetext>EMAIL from community:



From: Moso Lee [mailto:Moso.Lee@citrix.com] 
Sent: Thursday, September 1, 2016 2:22 AM
To: Yao, Jiewen &lt;jiewen.yao@intel.com&gt;
Subject: edk2\SecurityPkg typo

Hi Jyao1,

From edk2\SecurityPkg, I find you as the last submitter, so let me report about the typo I found.

Many files under edk2\SecurityPkg has this title with typo:

Ihis library is ...

Please fix this typo in your next submission.


Moso</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>517</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-22 20:27:06 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>614</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-10-17 21:47:35 +0000</bug_when>
    <thetext>There is also a &apos;Ihis&apos; typo in file MdePkg\Include\Protocol\TrEEProtocol.h.

Commits e3917fc76880458a81104bef359c6dbdef359c72, 07309c3ddc2305b050989e26f6717e2392eedb3d were pushed to resolve those typos.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>865</bug_id>
          
          <creation_ts>2018-01-29 10:33:15 +0000</creation_ts>
          <short_desc>Resume from S3 on Windows OS</short_desc>
          <delta_ts>2018-02-07 03:36:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard 3</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Leonardo Polito">politoleo</reporter>
          <assigned_to>david.wei</assigned_to>
          <cc>david.wei</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>Windows</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3506</commentid>
    <comment_count>0</comment_count>
    <who name="Leonardo Polito">politoleo</who>
    <bug_when>2018-01-29 10:33:15 +0000</bug_when>
    <thetext>The system fails to resume after it has been suspended to S3 on Windows 10 OS.
The firmware get stuck always right after the transfer to OS waking vector.
Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3528</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-01 19:08:46 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3535</commentid>
    <comment_count>2</comment_count>
      <attachid>144</attachid>
    <who name="">david.wei</who>
    <bug_when>2018-02-07 03:34:55 +0000</bug_when>
    <thetext>Created attachment 144
Fix Windows 10 S3 failure

The FSP-S preferred memory region, which is defined in FSP Integration Guide, must be reserved for BIOS S3 resume. When system resume back from S3, BIOS will copy FSP-S into this region. If this region is not reserved for BIOS, OS will use it, and OS data at this region will be erased by BIOS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3536</commentid>
    <comment_count>3</comment_count>
    <who name="">david.wei</who>
    <bug_when>2018-02-07 03:36:24 +0000</bug_when>
    <thetext>Patch has been committed to github.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>144</attachid>
            <date>2018-02-07 03:34:55 +0000</date>
            <delta_ts>2018-02-07 03:34:55 +0000</delta_ts>
            <desc>Fix Windows 10 S3 failure</desc>
            <filename>0001-Fix-Windows-10-S3-failure.patch</filename>
            <type>text/plain</type>
            <size>4008</size>
            <attacher>david.wei</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>41</bug_id>
          
          <creation_ts>2016-07-20 20:02:04 +0000</creation_ts>
          <short_desc>Bug in Math64.c - undefined behavior</short_desc>
          <delta_ts>2016-12-21 05:30:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2014.SP1</cf_release_observed>
    
    <cf_release_observed>UDK 2015</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>66</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 20:02:04 +0000</bug_when>
    <thetext>bcran commented on Nov 25, 2015
With a checkout of svn/branches/UDK2014.SP1, building a driver with Clang 3.8 the following error is generated:

edk2/MdePkg/Library/BaseLib/Math64.c:89:22: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]
  TestValue = (((-1) &lt;&lt; (sizeof (-1) * 8 - 1)) &gt;&gt; (sizeof (-1) * 8 - 1));
                ~~~~ ^


lersek commented on Nov 25, 2015
This is indeed undefined behavior in C99 and later. Not (necessarily) undefined behavior in C89, C90, and C95 (which edk2 uses, as far as I know). A somewhat related discussion can be seen here, in QEMU-land: http://thread.gmane.org/gmane.comp.emulators.qemu/376789

The problem is that this occurs in edk2 code that is supposed to test, at runtime, whether the compiler supports arithmetic right shift (i.e., when the new MSB matches the old MSB). I think that InternalMathARShiftU64() should be patched to perform its action purely in UINT64.

The fallback code near the end of the function seems to do something like that, except the cast to INTN for checking the sign. The sign check should instead be performed with an explicit test for the MSB.

My two cents anyway.


lersek commented on Jan 22
@bcran: it looks like @ardbiesheuvel fixed this in commit b331b99, on the master branch. Since you reported it for UDK2014.SP1, I guess Ard&apos;s patch will have to be cherry-picked for that stable release.


lersek commented on Feb 2
Labelling this as UDK due to the previous comment.


ajfish commented on Feb 2
It is compiler defined behavior in the older world, and that is why clang has added the warning. I also see the error in the base Tools as it has a case of shifting -1.

https://github.com/tianocore/edk2/blob/master/BaseTools/Source/C/Common/FvLib.c
//
// Get next file, compensate for 8 byte alignment if necessary.
//
*NextFile = (EFI_FFS_FILE_HEADER *) ((((UINTN) CurrentFile - (UINTN) mFvHeader + GetFfsFileLength(CurrentFile) + 0x07) &amp; (-1 &lt;&lt; 3)) + (UINT8 *) mFvHeader);



lersek commented on Feb 2
Okay, since the first instance of this bug is UDK-only, but the second instance (in BaseTools) is master as well, I think we&apos;ll have to split this report into two.
 @lerseklersek referenced this issue on Feb 2
 Closed
shifting a negative signed value is undefined



lersek commented on Feb 2
Okay, so this bug report will stand for: MdePkg only, and for the UDK branches only. Setting tags accordingly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>391</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-07-28 20:33:04 +0000</bug_when>
    <thetext>Bug Scrub: Assign to liming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>547</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-09-30 03:09:53 +0000</bug_when>
    <thetext>It has been fixed in edk2 trunk. Assign it to edk2 branch owner to be sync.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>699</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-24 00:05:59 +0000</bug_when>
    <thetext>CLANG38 support is in edk2 trunk only. It is not ready in UDK2014.SP1 and UDK2015. So, we don&apos;t need to sync this patch to UDK branch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>700</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-24 00:08:54 +0000</bug_when>
    <thetext>CLANG38 support is in edk2 trunk only. It is not ready in UDK2014.SP1 and UDK2015. So, we don&apos;t need to sync this patch to UDK branch.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>775</bug_id>
          
          <creation_ts>2017-11-09 14:14:13 +0000</creation_ts>
          <short_desc>Allow build tools to auto-detect MAX_CONCURRENT_THREAD_NUMBER</short_desc>
          <delta_ts>2018-02-26 03:40:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian Richardson (Intel)">brian.richardson</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3020</commentid>
    <comment_count>0</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-11-09 14:14:13 +0000</bug_when>
    <thetext>Change built tools to automatically detect number of processor threads and set optimal MAX_CONCURRENT_THREAD_NUMBER value in TARGET.TXT. Default value of &apos;1&apos; is not optimal for modern systems with multi-core processors.

Recommend adding &apos;MAX_CONCURRENT_THREAD_NUMBER=0&apos; option for user to enable &apos;auto-detect thread number&apos; feature, and changing default value to &apos;0&apos; when initial build environment is configured.

Adding the &apos;0&apos; option allows user control of thread count, and keeps compatibility with existing tools that override values in TARGET.TXT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3030</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-10 04:51:29 +0000</bug_when>
    <thetext>Good idea.

On GNU/Linux systems, one way to detect the number of online logical processors is:

getconf _NPROCESSORS_ONLN</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3077</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-11-15 20:07:00 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3140</commentid>
    <comment_count>3</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-11-29 20:06:48 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3448</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-18 20:41:55 +0000</bug_when>
    <thetext>Some feedback is value 0 will bring confuse. The new suggestion is to enable auto detect thread number when MAX_CONCURRENT_THREAD_NUMBER is not specified. The change is to remove MAX_CONCURRENT_THREAD_NUMBER from target.txt.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3484</commentid>
    <comment_count>5</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2018-01-24 13:11:25 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #4)
&gt; Some feedback is value 0 will bring confuse. The new suggestion is to enable
&gt; auto detect thread number when MAX_CONCURRENT_THREAD_NUMBER is not
&gt; specified. The change is to remove MAX_CONCURRENT_THREAD_NUMBER from
&gt; target.txt.

I think this is OK, as long as we properly document the change and notify users.

Personally, I don&apos;t agree that the 0 value is confusing. The existing formula for setting thread values (1 + 2*N) is already unusual. No matter which solution we select, it will require a change to documentation in TARGET.TXT and notification to edk2-devel about the change.

We also need to open bugs against the MinnowBoard Max and MinnowBoard 3 platforms to remove the pre-set MAX_CONCURRENT_THREAD_NUMBER=1 value in the non-standard build scripts. This value is patched into target.txt using shell/pipe commands, and it&apos;s a very sloppy way to force this value.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3633</commentid>
    <comment_count>6</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-26 03:40:28 +0000</bug_when>
    <thetext>fix this bug on SHA-1: 2052cb675f1fdbc77f916422fdf5c2da29741169</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>323</bug_id>
          
          <creation_ts>2017-01-04 00:56:46 +0000</creation_ts>
          <short_desc>Remove the improper include LoadFileProtocol instances in FileExplorerLib</short_desc>
          <delta_ts>2017-01-19 03:10:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1239</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2017-01-04 00:56:46 +0000</bug_when>
    <thetext>In current implementation, the file explorer library will search all gEfiSimpleFileSystemProtocolGuid and gEfiLoadFileProtocolGuid instances when user input NULL for the RootDirectory parameter. We think the gEfiLoadFileProtocolGuid should not been include.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1255</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-05 19:11:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1343</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-01-19 03:10:07 +0000</bug_when>
    <thetext>Fix this issue in EDKII Trunk:
https://github.com/tianocore/edk2/commit/d9b64abbdf70e42f8e20bd372aaf9605cb20b725</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>599</bug_id>
          
          <creation_ts>2017-06-19 05:39:28 +0000</creation_ts>
          <short_desc>BaseTools: enhance error message for not supported arch build</short_desc>
          <delta_ts>2018-02-08 03:24:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2296</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-19 05:39:28 +0000</bug_when>
    <thetext>current GCC5 tool chain doesn&apos;t support IPF and EBC arch, when we build it with this arch on GCC5 tool chain, it report Unknown fatal error  and traceback info. so we need enhance the error handling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2297</commentid>
    <comment_count>1</comment_count>
      <attachid>79</attachid>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-19 05:40:18 +0000</bug_when>
    <thetext>Created attachment 79
mail</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2312</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-21 21:24:08 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3551</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-08 03:24:44 +0000</bug_when>
    <thetext>push the fix SHA-1: 70d0a7549ef4a5dbdd15c0f78bd2f8ede093f8f4</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>79</attachid>
            <date>2017-06-19 05:40:18 +0000</date>
            <delta_ts>2017-06-19 05:40:18 +0000</delta_ts>
            <desc>mail</desc>
            <filename>RE   edk2  build error on fresh download.msg</filename>
            <type>application/octet-stream</type>
            <size>55296</size>
            <attacher name="Yonghong Zhu">yonghong.zhu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>510</bug_id>
          
          <creation_ts>2017-04-26 08:43:54 +0000</creation_ts>
          <short_desc>Interval for iscoh endpoint context in XHCI</short_desc>
          <delta_ts>2017-05-31 20:59:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Baranee">anbazhagan</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>anbazhagan</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1932</commentid>
    <comment_count>0</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2017-04-26 08:43:54 +0000</bug_when>
    <thetext>Code in place to update interval field for interrupt endpoint in XhciSched.c and missing similar code for iscoh endpoint.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1958</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-27 20:06:48 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1963</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-04-27 21:51:01 +0000</bug_when>
    <thetext>(In reply to Baranee from comment #0)
&gt; Code in place to update interval field for interrupt endpoint in XhciSched.c
&gt; and missing similar code for iscoh endpoint.

Hi Baranee,

Currently, the Xhci driver does not support isochronous transfer. So the driver does not fill the information context for isochronous endpoints.

Could you help to tell the purpose of requiring such information context for isochronous endpoints? Or is this tracker submitted as a feature request to add isochronous transfer support for Xhci?

Thanks in advance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1964</commentid>
    <comment_count>3</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2017-04-28 23:55:19 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #2)
Though we didn&apos;t use isochronous transfer, ConfigureEndpoint returns parameter error in a specific device without populating interval field in input context for USB_ENDPOINT_ISO.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2009</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-05-08 04:31:38 +0000</bug_when>
    <thetext>(In reply to Baranee from comment #3)
&gt; (In reply to Hao Wu from comment #2)
&gt; Though we didn&apos;t use isochronous transfer, ConfigureEndpoint returns
&gt; parameter error in a specific device without populating interval field in
&gt; input context for USB_ENDPOINT_ISO.

Baranee,

Could you help to provide more details (or the steps to reproduce) on the error you met?

I&apos;m trying to reproduce this issue on my side, but I am not very clear about the &apos;ConfigureEndpoint&apos; you mentioned.

Thanks in advance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2018</commentid>
    <comment_count>5</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2017-05-10 23:06:21 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #4)
&gt; (In reply to Baranee from comment #3)
&gt; &gt; (In reply to Hao Wu from comment #2)
&gt; &gt; Though we didn&apos;t use isochronous transfer, ConfigureEndpoint returns
&gt; &gt; parameter error in a specific device without populating interval field in
&gt; &gt; input context for USB_ENDPOINT_ISO.
&gt; 
&gt; Baranee,
&gt; 
&gt; Could you help to provide more details (or the steps to reproduce) on the
&gt; error you met?
&gt; 
&gt; I&apos;m trying to reproduce this issue on my side, but I am not very clear about
&gt; the &apos;ConfigureEndpoint&apos; you mentioned.
&gt; 
&gt; Thanks in advance.

We saw the failure with a wireless card on sending TRB_TYPE_CON_ENDPOINT command.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2178</commentid>
    <comment_count>6</comment_count>
      <attachid>68</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-05-25 21:49:03 +0000</bug_when>
    <thetext>Created attachment 68
patch file

Hi Baranee,

Could you help to verify if the attached patch can resolve the issue you met with?

Unfortunately, I&apos;m not able to reproduce the Configure Endpoint cmd error with the devices (A usb camera and a usb microphone) at hand.

Sorry for the inconvenience.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2179</commentid>
    <comment_count>7</comment_count>
      <attachid>69</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-05-25 21:55:51 +0000</bug_when>
    <thetext>Created attachment 69
Updated path file

Updated the patch file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2194</commentid>
    <comment_count>8</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2017-05-27 20:04:47 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #7)
&gt; Created attachment 69 [details]
&gt; Updated path file
&gt; 
&gt; Updated the patch file

Patch works for me. PEI XHCI module can be updated with similar change, so it&apos;s consistent with DXE. Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2202</commentid>
    <comment_count>9</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-05-30 20:54:03 +0000</bug_when>
    <thetext>(In reply to Baranee from comment #8)
&gt; (In reply to Hao Wu from comment #7)
&gt; &gt; Created attachment 69 [details]
&gt; &gt; Updated path file
&gt; &gt; 
&gt; &gt; Updated the patch file
&gt; 
&gt; Patch works for me. PEI XHCI module can be updated with similar change, so
&gt; it&apos;s consistent with DXE. Thanks

Thanks a lot. I will send a patch serial for both PEI and DXE XHCI module.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2218</commentid>
    <comment_count>10</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-05-31 20:59:22 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/3719c2aa879bcbcf3f0ab1f710e81fe2dbc19d9a</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>68</attachid>
            <date>2017-05-25 21:49:03 +0000</date>
            <delta_ts>2017-05-25 21:55:51 +0000</delta_ts>
            <desc>patch file</desc>
            <filename>0001-MdeModulePkg-XhciDxe-Fill-the-interval-field-of-ISO-.patch</filename>
            <type>text/plain</type>
            <size>1561</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>69</attachid>
            <date>2017-05-25 21:55:51 +0000</date>
            <delta_ts>2017-05-25 21:55:51 +0000</delta_ts>
            <desc>Updated path file</desc>
            <filename>0001-MdeModulePkg-XhciDxe-Fill-the-interval-field-of-ISO-.patch</filename>
            <type>text/plain</type>
            <size>2550</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>886</bug_id>
          
          <creation_ts>2018-03-06 05:32:31 +0000</creation_ts>
          <short_desc>RFC 7440 - TFTP windowsize option support</short_desc>
          <delta_ts>2018-09-29 04:26:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Patrick Masotta">masottaus</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3658</commentid>
    <comment_count>0</comment_count>
    <who name="Patrick Masotta">masottaus</who>
    <bug_when>2018-03-06 05:32:31 +0000</bug_when>
    <thetext>TFTP is massively used in the early stages of network boot/installation scenarios.

Original RFC 1350 defines TFTP transfers with blocksize=512 and windowsize=1.
RFC 2348 allows a client to negotiate a bigger blocksize with compatible servers leading to faster transfers
RFC 7440 allows a client to negotiate a bigger windowsize with compatible servers leading to faster transfers.

Today an UEFI PXE client (i.e. VMWare) negotiates blocksize=1468.
Today an UEFI PXE client does no negotiate windowsize (windowsize=1).

I think the UEFI TFTP client modules should by default propose the conservative value windowsize=4. Old non-compliant TFTP servers will just ignore the RFC 7440 option and transfer w/o any extra delay following plain RFC 1350, but the compliant TFTP servers will offer an average 70% transfer speed improvement.
Windowsize based TFTP speed improvement is more robust than the blocksize based improvement specially when a big blocksize can lead to Ethernet packet sizes larger than the smallest data path MTU leading to (many times poorly handled) (UDP) IP fragmentation.

Currently:
Microsoft TFTP Server and their Boot Managers talk RFC 7440

Red Hat Enterprise Linux v7.5 just added RFC 7440 support.
https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7-beta/html-single/7.5_release_notes/index

Serva TFTP server module parses RFC 7440
https://www.vercot.com/~serva/default.html


Here at Tianocore there are 2 RFC 7440 patches (currently not committed to edk2 repository).

https://lists.01.org/pipermail/edk2-devel/2017-March/008624.html
https://lists.01.org/pipermail/edk2-devel/2017-March/008655.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3669</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-08 19:05:25 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4079</commentid>
    <comment_count>2</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2018-06-06 22:28:46 +0000</bug_when>
    <thetext>Transfer to Wu, Jiaxin who has the original patch for TFTP windowsize option.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4988</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-09-17 00:05:14 +0000</bug_when>
    <thetext>After discussion, we decided to support the TFTP windowsize option for the read request operation (Currently, the windowsize for write request operation is not in the supported scope since now there is no real use cases).

For the upper application, e.g. TFTP shell command and UEFI PXE driver, we will also provide the patches to support the windowsize so as to benefit the TFTP download performance.

thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5007</commentid>
    <comment_count>4</comment_count>
    <who name="Patrick Masotta">masottaus</who>
    <bug_when>2018-09-18 12:35:00 +0000</bug_when>
    <thetext>Great news. 
Please let us know when the mentioned patches are officially committed.

Thanks, 
Patrick</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5114</commentid>
    <comment_count>5</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-09-26 21:11:21 +0000</bug_when>
    <thetext>Commit version:
https://github.com/tianocore/edk2/commit/6c047cfab116c2a0187d959aee9e61ac902d7d50
https://github.com/tianocore/edk2/commit/f3427f12a4a53b8cc32a6816934dbcf59072c1db
https://github.com/tianocore/edk2/commit/5c6fdb5e8345840224b7fa77f1e1b4650b5b0769
https://github.com/tianocore/edk2/commit/2fff697f1eaaeba1e24fe0af381f39dc64b85061
https://github.com/tianocore/edk2/commit/160b082e64a8336ac23eb4c28216a6097e6ba648</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5132</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-27 06:39:11 +0000</bug_when>
    <thetext>Jiaxin, thanks for this nice feature -- can you please reference this TianoCore BZ at &lt;https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning&gt;? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5152</commentid>
    <comment_count>7</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-09-28 20:34:33 +0000</bug_when>
    <thetext>Ok, I will do that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5158</commentid>
    <comment_count>8</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-09-29 04:26:29 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #6)
&gt; Jiaxin, thanks for this nice feature -- can you please reference this
&gt; TianoCore BZ at
&gt; &lt;https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-
&gt; Planning&gt;? Thanks!

Done.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>61</bug_id>
          
          <creation_ts>2016-07-20 21:19:28 +0000</creation_ts>
          <short_desc>UefiCpuPkg: MtrrLib: unused-but-set-variable (UDK2015 branch)</short_desc>
          <delta_ts>2016-10-26 02:47:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Jeff Fan">vanjeff_919</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2015</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>UDK 2015</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>86</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 21:19:28 +0000</bug_when>
    <thetext>bcran commented 23 days ago • edited
With gcc 6.1.1, a DEBUG build of OVMF from the UDK2015 branch fails:

./OvmfPkg/build.sh -a X64 -t GCC49 -b DEBUG

/home/bcran/workspace/edk2/UefiCpuPkg/Library/MtrrLib/MtrrLib.c: In function ‘ProgramFixedMtrr’:
/home/bcran/workspace/edk2/UefiCpuPkg/Library/MtrrLib/MtrrLib.c:462:11: error: variable ‘TempQword’ set but not used [-Werror=unused-but-set-variable]
UINT64 TempQword;
^~~~~~~~~
cc1: all warnings being treated as errors
make: *** [GNUmakefile:299: /home/bcran/workspace/edk2/Build/OvmfX64/DEBUG_GCC49/X64/UefiCpuPkg/Library/MtrrLib/MtrrLib/OUTPUT/MtrrLib.obj] Error 1
 @lersek
     tianocore member
lersek commented 23 days ago
Hi Bruce,

on the master branch, this issue has been fixed by commit 16e9312 (part of a larger series).

I&apos;m unsure what the UDK2015 cherry-picking policy is (considering especially that we don&apos;t (yet?) support OvmfPkg outside of the master branch) , but for now I&apos;ll move this report to UefiCpuPkg where it belongs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>411</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-04 20:19:07 +0000</bug_when>
    <thetext>Bug Scrub: Assign to jeff</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>719</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-10-26 02:47:22 +0000</bug_when>
    <thetext>Already done at SHA:8a865605c23d68e07db70420216985d7ff3f739d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>701</bug_id>
          
          <creation_ts>2017-09-06 11:35:14 +0000</creation_ts>
          <short_desc>RFE: please introduce !error directive</short_desc>
          <delta_ts>2018-06-22 01:39:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2698</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-06 11:35:14 +0000</bug_when>
    <thetext>Similarly to the C-language #error preprocessing directive, an &quot;!error&quot; directive would be very useful in DSC (and possibly FDF) files:

!if ($(FEATURE_1_ENABLE) == TRUE) &amp;&amp; ($(FEATURE_2_ENABLE) == TRUE)
!error &quot;unsupported combination of features&quot;
!endif

The &quot;build&quot; utility would emit the diagnostic message, and abort the build with an error status.

Original discussion:

https://lists.01.org/pipermail/edk2-devel/2017-September/014243.html

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2729</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-09-13 21:04:08 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4200</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-22 01:39:45 +0000</bug_when>
    <thetext>DSC and FDF file support !error statement.
SHA-1: 09ef8e92580caddc24f8f1db6ea0e8223890085f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>251</bug_id>
          
          <creation_ts>2016-11-24 04:28:52 +0000</creation_ts>
          <short_desc>introduce a dynamic PCD for representing the actual CPU count at S3 resume</short_desc>
          <delta_ts>2020-05-05 18:33:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>1515</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vanjeff_919</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1015</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-24 04:28:52 +0000</bug_when>
    <thetext>After boot, the runtime OS may hotplug or hot-unplug processors. During a subsequent ACPI S3 suspend and resume, the platform might be able to report the changed number of CPUs (which may hence differ from the number witnessed during the first boot) to the firmware. Knowing this CPU count can speed up S3 resume, because the firmware will know how long exactly it should wait for all APs to report in.

Discussion: https://lists.01.org/pipermail/edk2-devel/2016-November/005149.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1099</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-01 19:05:51 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2918</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2017-10-24 04:27:34 +0000</bug_when>
    <thetext>SHA-1: 0594ec417c89ed00cbea6a0b0458334727c4dc28 has been committed. This patch is to add new variable NumApsExecuting to detect whether all APs have finished initialization whatever the processor number is.

It could solve this issue without adding new PCD.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2921</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-24 08:24:46 +0000</bug_when>
    <thetext>I have some doubts about 0594ec417c89 (&quot;UefiCpuPkg/MpInitLib: Enhance waiting for AP initialization logic.&quot;, 2017-10-23) in a virtualized environment; please see the thread at &lt;https://lists.01.org/pipermail/edk2-devel/2017-October/016309.html&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2931</commentid>
    <comment_count>4</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2017-10-25 01:36:43 +0000</bug_when>
    <thetext>Commit 0594ec417c89ed00cbea6a0b0458334727c4dc28 cannot work for OVMF. reopen it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2932</commentid>
    <comment_count>5</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2017-10-25 01:37:54 +0000</bug_when>
    <thetext>Assign to UefiCpuPkg owner for next step.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12375</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 18:33:54 +0000</bug_when>
    <thetext>Resolved under bug 1515, which has scope identical to this bug&apos;s.

*** This bug has been marked as a duplicate of bug 1515 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>445</bug_id>
          
          <creation_ts>2017-03-24 13:50:40 +0000</creation_ts>
          <short_desc>SmiHandlerProfile has a memory leak when Unregistering handlers.</short_desc>
          <delta_ts>2017-03-30 22:31:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1689</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2017-03-24 13:50:40 +0000</bug_when>
    <thetext>I don&apos;t see where the [possibly allocated] SmiHandler-&gt;Context pointer is freed when unregistering handlers. The SearchContext is freed, but not the one internal to the structure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1709</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-30 20:03:40 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1711</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-03-30 22:31:23 +0000</bug_when>
    <thetext>fixed in 251779fca719bf9ea00505ee7629c08b452c150d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>719</bug_id>
          
          <creation_ts>2017-09-25 01:42:28 +0000</creation_ts>
          <short_desc>SNP transmit error print is coming in success cases also</short_desc>
          <delta_ts>2017-11-16 01:12:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Meenakshi">meenakshi.aggarwal</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2777</commentid>
    <comment_count>0</comment_count>
      <attachid>102</attachid>
    <who name="Meenakshi">meenakshi.aggarwal</who>
    <bug_when>2017-09-25 01:42:28 +0000</bug_when>
    <thetext>Created attachment 102
RFC Patch to resolve issue

Hi,


While performing tftp using PCI interface, below message is coming
continuously:

Snp-&gt;undi.transmit()  8000h:4h

Snp-&gt;undi.transmit()  8000h:4h
[======================================&gt; ]   34812 Kb
Snp-&gt;undi.transmit()  8000h:4h

Snp-&gt;undi.transmit()  8000h:4h

Snp-&gt;undi.transmit()  8000h:4h

Snp-&gt;undi.transmit()  8000h:4h


It is coming from file
&quot;MdeModulePkg/Universal/Network/SnpDxe/Transmit.c&quot;

  DEBUG (
    (EFI_D_ERROR,
    &quot;\nSnp-&gt;undi.transmit()  %xh:%xh\n&quot;,
    Snp-&gt;Cdb.StatFlags,
    Snp-&gt;Cdb.StatCode)
    );


I think we should print this message if Status is
EFI_DEVICE_ERROR because in case of EFI_NOT_READY, we are retrying:

  //
  // Transmit the packet through SNP.
  //
  Status = Snp-&gt;Transmit (
                  Snp,
                  HeaderSize,
                  Length,
                  Packet,
                  TxData-&gt;SourceAddress,
                  TxData-&gt;DestinationAddress,
                  &amp;ProtocolType
                  );
  if (Status == EFI_NOT_READY) {
    Status = MnpRecycleTxBuf (MnpDeviceData);
    if (EFI_ERROR (Status)) {
      Token-&gt;Status = EFI_DEVICE_ERROR;
      goto SIGNAL_TOKEN;
    }

    DEBUG ((EFI_D_ERROR, &quot;Snp-&gt;Transmit  retry\n&quot;));
    Status = Snp-&gt;Transmit (
                    Snp,
                    HeaderSize,
                    Length,
                    Packet,
                    TxData-&gt;SourceAddress,
                    TxData-&gt;DestinationAddress,
                    &amp;ProtocolType
                    );
  }

(MdeModulePkg/Universal/Network/MnpDxe/MnpIo.c)

Another example of using Snp transmit is in file:
MdeModulePkg/Library/DxeNetLib/DxeNetLib.c.

I have attached a patch for this. Please verify and inform.

Thanks,
Meenakshi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2800</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-28 20:15:22 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3080</commentid>
    <comment_count>2</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2017-11-16 01:12:56 +0000</bug_when>
    <thetext>Fixed revision:
edk2: 0d07a8addb78076a1417149786cb430396a59add</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>102</attachid>
            <date>2017-09-25 01:42:28 +0000</date>
            <delta_ts>2017-09-25 01:42:28 +0000</delta_ts>
            <desc>RFC Patch to resolve issue</desc>
            <filename>0001-SNP-Print-Status-Code-in-case-of-EFI_DEVICE_ERROR.patch</filename>
            <type>application/octet-stream</type>
            <size>1611</size>
            <attacher name="Meenakshi">meenakshi.aggarwal</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>546</bug_id>
          
          <creation_ts>2017-05-16 21:06:50 +0000</creation_ts>
          <short_desc>PCD: Database size optimization for multi-SKU</short_desc>
          <delta_ts>2017-12-26 04:25:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2046</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-05-16 21:06:50 +0000</bug_when>
    <thetext>Reduce PCD database size for multi-SKU case to save image size at build time and memory resource at boot time.

RFC link https://lists.01.org/pipermail/edk2-devel/2017-May/010701.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2049</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-17 21:05:17 +0000</bug_when>
    <thetext>assign to Star</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3266</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-26 04:23:30 +0000</bug_when>
    <thetext>edk2 trunk c40dbe5e7bf9...7c7362651323</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3268</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-26 04:25:25 +0000</bug_when>
    <thetext>Add this support in edk2 trunk</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>926</bug_id>
          
          <creation_ts>2018-04-09 09:40:39 +0000</creation_ts>
          <short_desc>BlockMmioToBlockIoDxe Stop() use the wrong protocol address to get the private data</short_desc>
          <delta_ts>2018-04-10 15:43:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3835</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-04-09 09:40:39 +0000</bug_when>
    <thetext>The BlockIoDriverBindingStop() function in edk2\OvmfPkg\BlockMmioToBlockIoDxe\BlockIo.c want to use the PRIVATE_FROM_BLOCK_IO to retrieve the BlockIo protocol&apos;s private data. But there is a mistake in the code that it uses the DriverBinding protocol&apos;s interface address(This), instead of the BlockIo protocol, as input to the PRIVATE_FROM_BLOCK_IO. 

This cause cause the below ASSERT:
ASSERT [BlockMmioToBlockIoDxe] /home/jshi19/wksp_efi/edk2-3/OvmfPkg/BlockMmioToBlockIoDxe/BlockIo.c(465): CR has Bad Signature

This issue is caught by Uefi module fuzzing tool(UMfuzzer).


A reference fix is in below:
--- a/OvmfPkg/BlockMmioToBlockIoDxe/BlockIo.c
+++ b/OvmfPkg/BlockMmioToBlockIoDxe/BlockIo.c
@@ -461,8 +461,21 @@ BlockIoDriverBindingStop (
 {
   EFI_STATUS                    Status;
   BLOCK_MMIO_TO_BLOCK_IO_DEVICE *Private;
+  EFI_BLOCK_IO_PROTOCOL         *BlockIo;

-  Private = PRIVATE_FROM_BLOCK_IO (This);
+  Status = gBS-&gt;OpenProtocol (
+                  Controller,
+                  &amp;gEfiBlockIoProtocolGuid,
+                  (VOID **) &amp;BlockIo,
+                  This-&gt;DriverBindingHandle,
+                  Controller,
+                  EFI_OPEN_PROTOCOL_GET_PROTOCOL
+                  );
+  if (EFI_ERROR (Status)) {
+    return EFI_UNSUPPORTED;
+  }
+
+  Private = PRIVATE_FROM_BLOCK_IO (BlockIo);

   //
   // Uninstall Block I/O protocol from the device handle,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3837</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-09 11:46:26 +0000</bug_when>
    <thetext>Hi Steven,

I&apos;ve looked at BlockMmioToBlockIoDxe on and off over time, and honestly I can&apos;t tell what it is good for.

The driver consumes gBlockMmioProtocolGuid to produce gEfiBlockIoProtocolGuid. gBlockMmioProtocolGuid is declared in &quot;OvmfPkg.dec&quot;, and no module in edk2 apart from BlockMmioToBlockIoDxe uses it. In other words, the protocol that BlockMmioToBlockIoDxe consumes is never produced by anything at all. The commit that added it (efd82c5794ec, &quot;OVMF: Add BlockMmioToBlockIoDxe driver&quot;, 2010-03-21) doesn&apos;t help with any details. I guess it may have stood for a kind of memory-mapped block device, at a time, but even for that purpose, today we have ramdisk and such.

My preference would be to simply remove BlockMmioToBlockIoDxe from the edk2 tree, and from the OVMF build.

Jordan, Ard, what do you guys think? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3840</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-04-09 20:56:27 +0000</bug_when>
    <thetext>I&apos;m ok to remove the BlockMmioToBlockIoDxe module if there is no user for it.
Please confirm this bug firstly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3846</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-10 04:27:25 +0000</bug_when>
    <thetext>Yes, the analysis and the suggested patch look correct. (I still prefer to drop the driver fully.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3847</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-10 04:28:19 +0000</bug_when>
    <thetext>Steven, do you want to submit a patch for the driver&apos;s removal, or would you prefer I do it? I&apos;m fine either way. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3848</commentid>
    <comment_count>5</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-04-10 04:31:08 +0000</bug_when>
    <thetext>I prefer you, the OVMF platform owner, help to do it. :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3849</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-10 07:14:57 +0000</bug_when>
    <thetext>OK, I will do that soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3850</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-10 09:03:35 +0000</bug_when>
    <thetext>More background info is available from commit b0f5144676fa (&quot;OVMF: Add Block
MMIO protocol definition&quot;, 2010-03-21), which is the direct ancestor of
commit efd82c5794ec that I noted in comment 1:

commit b0f5144676fa47f89ccff6db63173d5d456a4f0e
Author: jljusten &lt;jljusten@6f19259b-4bc3-4df7-8a09-765794883524&gt;
Date:   Sun Mar 21 00:33:59 2010 +0000

    OVMF: Add Block MMIO protocol definition
    
    This protocol is similar to the standard UEFI BlockIo protocol,
    except it has no function calls and simply defines a base address
    in memory where reads &amp; writes for the block device should occur.
    
    One planned usage is to fill a memory region with a small disk
    image, and allow it to be used as a normal disk by the
    standard drivers.
    
    git-svn-id: https://edk2.svn.sourceforge.net/svnroot/edk2/trunk/edk2@10295 6f19259b-4bc3-4df7-8a09-765794883524

This planned usage has not materialized in the eight years since the commit
however. No commit other than b0f5144676fa and efd82c5794ec ever added or
removed an instance of &quot;gBlockMmioProtocolGuid&quot;.

$ git log --reverse --oneline -S&apos;gBlockMmioProtocolGuid&apos; master
b0f5144676fa OVMF: Add Block MMIO protocol definition
efd82c5794ec OVMF: Add BlockMmioToBlockIoDxe driver</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3851</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-10 14:10:53 +0000</bug_when>
    <thetext>Posted
[edk2] [PATCH] OvmfPkg: remove BLOCK_MMIO_PROTOCOL and BlockMmioToBlockIoDxe
http://mid.mail-archive.com/20180410180950.16343-1-lersek@redhat.com
https://lists.01.org/pipermail/edk2-devel/2018-April/023619.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3852</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-10 15:43:02 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #8)
&gt; Posted
&gt; [edk2] [PATCH] OvmfPkg: remove BLOCK_MMIO_PROTOCOL and BlockMmioToBlockIoDxe
&gt; http://mid.mail-archive.com/20180410180950.16343-1-lersek@redhat.com
&gt; https://lists.01.org/pipermail/edk2-devel/2018-April/023619.html

Applied in commit 6301d2e24ab6.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>826</bug_id>
          
          <creation_ts>2017-12-26 20:15:46 +0000</creation_ts>
          <short_desc>Release version BIOS may show the corrupted debug message</short_desc>
          <delta_ts>2018-01-26 06:09:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3274</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-12-26 20:15:46 +0000</bug_when>
    <thetext>The CPU exception lib uses SerialPortLib.SerialPortWrite() to show the debug message. However, CPU exception lib  does not call SerialPortInitialize().

In a release build, if the exception happens, the serial port shows corrupted message, because the serial port is not initialized.

If we want to show the exception info in release build, we need make sure  SerialPortInitialize() is called. Or we should not use SerialPortWrite() for release build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3275</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-12-26 20:17:57 +0000</bug_when>
    <thetext>Even if a platform may call SerialPortInitialize() in the release build, it cannot guarantee when it is called.

The CPU exception lib should call SerialPortInitialize() to make sure the instance work at any time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3287</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-28 19:05:52 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3433</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-17 05:10:39 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3500</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-26 06:09:31 +0000</bug_when>
    <thetext>pushed @ UDK2018 83d6fe4156d83a663fb7506cfbc75ef972c4e1d2
@ master 7230212a43856a8964f88a88678e954bcbd03087</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>374</bug_id>
          
          <creation_ts>2017-02-09 01:24:33 +0000</creation_ts>
          <short_desc>ifconfig -l command not listing all the ethernet ports available</short_desc>
          <delta_ts>2017-02-23 21:48:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="Zhang, Lubo">lubo.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>karunakarp</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1414</commentid>
    <comment_count>0</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-02-09 01:24:33 +0000</bug_when>
    <thetext>[Issue Description]
Whenever there are more than 9 ethernet ports available, &apos;ifconfig -l&apos; is not listing all the ports.

[Actual Output]
If more than 9 ports are available, ifconfig -l is showing only the ports 0 to 9.


[Exepected Output]
If there are &apos;n&apos; (where n &lt; 31) ports available, the &apos;ifconfig -l&apos; command should list all the available active ports. Suppose if n = 15, the command should return
eth0:
---
---
eth1:
---
---
...
...
ethE:
---
---
ethF:
---
---


[Cause]

In Ip4Config2InitIfInfo(
  IN  IP4_SERVICE                    *IpSb,
  OUT EFI_IP4_CONFIG2_INTERFACE_INFO *IfInfo
) {
  IfInfo-&gt;Name[0] = L&apos;e&apos;;
  IfInfo-&gt;Name[1] = L&apos;t&apos;;
  IfInfo-&gt;Name[2] = L&apos;h&apos;;
  IfInfo-&gt;Name[3] = (CHAR16) (L&apos;0&apos; + IpSb-&gt;Ip4Config2Instance.IfIndex);
  IfInfo-&gt;Name[4] = 0;
}

Instead of the above code, it can be

In Ip4Config2InitIfInfo() {
  Swprintf(IfInfo-&gt;Name,L&quot;eth%x&quot;,IpSb-&gt;Ip4Config2Instance.IfIndex);
}


P.S.: The same applies to Ip6ConfigInitIfInfo() also.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1423</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-09 19:53:04 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1524</commentid>
    <comment_count>2</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2017-02-23 21:48:18 +0000</bug_when>
    <thetext>EDKii Commit log:

NetworkPkg:
SHA-1: 80e63e846af4ac135da5faccead7450e956d6462
SHA-1: 625b39ced26e8dd7d2410796a1d84a69d8ec3f9d

MdeModulePkg:
SHA-1: 702f2e15562cbc7bf62f38b24fc167843a97ca62
SHA-1: 770e463d063ed50309274b88a2660289eb23a2f4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>286</bug_id>
          
          <creation_ts>2016-12-06 19:42:18 +0000</creation_ts>
          <short_desc>Intel FSP 2.0 Packages do not have Readme.md files</short_desc>
          <delta_ts>2017-03-12 20:58:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian Richardson (Intel)">brian.richardson</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFspPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1122</commentid>
    <comment_count>0</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2016-12-06 19:42:18 +0000</bug_when>
    <thetext>Intel FSP 2.0 Packages do not have Readme.md files.

https://github.com/tianocore/edk2/tree/master/IntelFsp2WrapperPkg
https://github.com/tianocore/edk2/tree/master/IntelFsp2Pkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1144</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-08 19:29:00 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1607</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-03-12 20:58:09 +0000</bug_when>
    <thetext>git: e8911d052a5698bc289b88050fa3f9502c8129df
git: 4d9abbf71d74feeda0673ca780da7d47e75b2660</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>652</bug_id>
          
          <creation_ts>2017-07-26 23:37:01 +0000</creation_ts>
          <short_desc>BaseTools: build report failure when Pcd set in FDF file and used as PatchableInModule type in module</short_desc>
          <delta_ts>2017-07-31 22:47:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2512</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-26 23:37:01 +0000</bug_when>
    <thetext>We set Pcd value in FDF and used this Pcd as PatchableInModule type in
module, it cause build report generate failure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2513</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-26 23:37:39 +0000</bug_when>
    <thetext>take it to fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2532</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-31 22:47:27 +0000</bug_when>
    <thetext>push the fix SHA-1: c65df5d9a14331d2b6d583359f1cf88c3b710d34</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>942</bug_id>
          
          <creation_ts>2018-04-24 13:42:47 +0000</creation_ts>
          <short_desc>function always return the same value</short_desc>
          <delta_ts>2018-07-30 20:39:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaben Carsey">jaben.carsey</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3922</commentid>
    <comment_count>0</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2018-04-24 13:42:47 +0000</bug_when>
    <thetext>the class DbItemList (and it&apos;s child classes except DbSizeTableItemList) always return 0 for GetListSize.

the constructor sets the self.ListSize to 0 and they all return self.ListSize if it exists...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3931</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-04-25 21:06:29 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4468</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-30 20:39:48 +0000</bug_when>
    <thetext>First time, self.ListSize == 0,  and then  GetListSize return 0 if the len(self.RawDataList) == 0 else will return self.GetInterOffset(len(self.RawDataList) - 1) + len(self.RawDataList[len(self.RawDataList)-1]) * self.ItemSize,
Second, when self.ListSize not 0, will return self.ListSize</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>219</bug_id>
          
          <creation_ts>2016-11-10 11:22:50 +0000</creation_ts>
          <short_desc>Need IScsiDxe to accept manual IPv6 or DHCP address for the initiator configuration</short_desc>
          <delta_ts>2016-11-30 00:23:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sriram">sriram-s</reporter>
          <assigned_to name="Ye Ting">ting.ye</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>sriram-s</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>875</commentid>
    <comment_count>0</comment_count>
    <who name="Sriram">sriram-s</who>
    <bug_when>2016-11-10 11:22:50 +0000</bug_when>
    <thetext>The NetworkPkg iSCSI driver HII allows the initiator IP details to be configured via DHCP or manual address. However, this is supported only for iSCSI over IPv4. The iSCSI over IPv6 stack will not accept manual address, nor trigger SARR process to get new DHCP address. There are use cases that require such feature, so the scope of the driver needs to be extended to support these use cases. Hence filing this request to track.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>876</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-10 19:14:17 +0000</bug_when>
    <thetext>bug scrub: it is a new feature. Assign to Ye ting to do some investigation first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>883</commentid>
    <comment_count>2</comment_count>
    <who name="Ye Ting">ting.ye</who>
    <bug_when>2016-11-11 02:56:54 +0000</bug_when>
    <thetext>Hi Sriram,

Would you mind sharing your use cases in more detail, thus we could understand how this feature work in your case? 

Per design, the API IP6-&gt;Configure() can not configure new IPv6 address. Instead, user could use Ip6Config-&gt;SetData to set the manual address. The idea of not allow iSCSI driver to configure the initiator IP is to use the default address selection implemented in IPv6 stack (defined in RFC3484), to reduce the possibility that user configures a wrong IPv6 source address, which does not perfectly match the destination address of configured iSCSI target. 

If we all agree that allowing administrator to override the default behavior (source address selection) is necessary, we might need consider:
1) the source address configured by iSCSI is not used by IPv6 stack in some cases;
2) if we can&apos;t accept 1), we might need update existing protocols to allow Configure() API to configure a new address as the station address, which is not backwards compatible. 

I personally don&apos;t like 2). Please let me know your ideas. Thanks.

Best Regards,
Ye Ting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>884</commentid>
    <comment_count>3</comment_count>
    <who name="Sriram">sriram-s</who>
    <bug_when>2016-11-11 03:30:23 +0000</bug_when>
    <thetext>Hi Ting,

Yes, I understood the intent behind not using Configure() from the email discussions. But we do have cases where the user would like the initiator to use an IP provided by DHCP (based on various data center requirements/policies) and use that for communication, not the stateless IP.

Also, the IP configuration policy is chosen by the platform, so it may be set to static (IPv4)/manual (IPv6), which can cause the platform to not generate a stateless global IPv6 address based on router prefix in the RA. Thus, the system may need to use DHCP (configured in the iSCSI HII) or a static global IPv6 address (also configurable in the iSCSI HII) for the initiator.

So, we need to be able to allow both static (user entered value in HII) or DHCPv6 assigned address for the initiator.

And related to the two possibilities, I also don&apos;t like (2) all that much, and the incompatibility. It may break several implementations/assumptions already done.

Thanks,
Sriram.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>897</commentid>
    <comment_count>4</comment_count>
    <who name="Ye Ting">ting.ye</who>
    <bug_when>2016-11-13 22:07:04 +0000</bug_when>
    <thetext>Hi Sriram,

So you mean your use cases need iSCSI driver to override the policy chosen by platform, and use Ip6Config protocol to set the DHCP address or manual address to the IPv6 stack, however, you don&apos;t care whether the IPv6 stack choose the IPv6 address assigned by iSCSI driver.

Let me know if I misunderstood any points.

Best Regards,
Ting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>900</commentid>
    <comment_count>5</comment_count>
    <who name="Sriram">sriram-s</who>
    <bug_when>2016-11-13 22:25:06 +0000</bug_when>
    <thetext>Hi Ting,

&gt; So you mean your use cases need iSCSI driver to override the policy 
&gt; chosen by platform, and use Ip6Config protocol to set the DHCP address 
&gt; or manual address to the IPv6 stack,

Yes that fairly summarizes my expectations.

However, I&apos;m not sure I understood this part:

&gt; however, you don&apos;t care whether the IPv6 stack choose the IPv6 address
&gt; assigned by iSCSI driver

Can you clarify this point?

Thanks,
Sriram.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>905</commentid>
    <comment_count>6</comment_count>
    <who name="Ye Ting">ting.ye</who>
    <bug_when>2016-11-14 00:38:22 +0000</bug_when>
    <thetext>Hi Sriram,

In comment 2, I mentioned current IPv6 stack implemented default source address selection defined by RFC3484. Since we both don&apos;t like the idea of updating existing Configure() API, I think it means that we still use the default source address selection even we allow iSCSI driver to configure new IPv6 address via Ip6Config protocol. Thus, in some cases, the IPv6 stack might select an IPv6 address which is not configured by iSCSI driver.

For instance, IPv6 stack has address A, B. iSCSI driver configures a new IPv6 address C and iSCSI target address D. If IPv6 stack matches D with source address A, it will use A to communicate with iSCSI target instead of using C which is configured in the iSCSI HII pages. 

Do you think it is acceptable and makes sense?

Best Regards,
Ting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>906</commentid>
    <comment_count>7</comment_count>
    <who name="Sriram">sriram-s</who>
    <bug_when>2016-11-14 00:49:43 +0000</bug_when>
    <thetext>Hi Ting,

Should be okay as long as C is chosen if that is the best fit for D.

I would leave it to the user to configure the proper source address to ensure it gets chosen for the provided target address.

Thanks,
Sriram.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>955</commentid>
    <comment_count>8</comment_count>
    <who name="Ye Ting">ting.ye</who>
    <bug_when>2016-11-16 03:10:15 +0000</bug_when>
    <thetext>Hi Sriram,

I guess you mean if A is best fit for D, it is okay for IPv6 stack selects A, not C? And if user wants the IPv6 stack to use the address he/she configures, the user should guarantee he/she configure the correct IPv6 address. Is this correct? Please check your comment 7, I am a little bit confused now.

If so, I am thinking whether it makes sense to introduce additional capability in iSCSI driver, since we already have the configuration capability produced by IPv6 driver, and also from ifconfig6 shell application. If the user does not care about the station address he/she configures and he/she only wants to add new static/DHCP address, he/she could use the UI pages provided by IPv6 driver, or ifconfig6 instead. With this, the IPv6 stack can have new IPv6 address, and if the address is the best fit for iSCSI target configured in iSCSI UI page, IPv6 stack will choose it as station address.

Do you think this might work for your use cases?

Best Regards,
Ye Ting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>958</commentid>
    <comment_count>9</comment_count>
    <who name="Sriram">sriram-s</who>
    <bug_when>2016-11-16 04:16:17 +0000</bug_when>
    <thetext>Hi Ting,

Yes I understand it is possible to configure the interface &quot;out of band&quot; from iSCSI driver perspective, but since the iSCSI HII provides for initiator IPv4 address configuration (DHCP or static), I think it would be logical to provide the same for IPv6 address in the same form, so there is a consistent user experience. 

Also, it is possible the shell, and/or IPv6 HII are disabled or not exposed, so the iSCSI driver can just consume the user setting in its own HII and do the necessary configuration:
- if DHCP, issue SARR and Ip6Config-&gt;SetData() manual policy and IP address, 
- and if static, Ip6Config-&gt;SetData() of policy and IP address from the IP value in HII.

Thanks,
Sriram.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1001</commentid>
    <comment_count>10</comment_count>
    <who name="Ye Ting">ting.ye</who>
    <bug_when>2016-11-23 00:11:10 +0000</bug_when>
    <thetext>Hi Sriram,

Yes I agree in some cases the shell is disabled. However, I don&apos;t see the use case when the platform/user disable IPv6 HII but keep iSCSI HII available. This seems strange. Since UEFI network stack provides IPv6 and iSCSI stack, and these drivers are depending on UEFI HII drivers for providing configuration capability, it looks we could assume when iSCSI HII is available, the IPv6 HII is also there.

Thus I still prefer to use existing IPv6 HII to configure the new IPv6 address, instead of adding redundant feature to iSCSI. Also, adding this feature will increase the complexity to iSCSI driver and introduce additional maintainance effort. 

I would like to hear more opinions about this.

Best Regards,
Ting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1003</commentid>
    <comment_count>11</comment_count>
    <who name="Sriram">sriram-s</who>
    <bug_when>2016-11-23 01:49:45 +0000</bug_when>
    <thetext>Hi Ting,

We do not expose the IP6 config HII, but only feature-specific HII is exposed (like iSCSI), so there is a need for a feature-specific way to enable the setting. It is done for IPv4, so why not for IPv6, this is more for a better user experience rather than going between two different HII forms. Yes, the difference between the IPv4 and v6 behavior and the Configure API is understood, but I think that shouldn&apos;t be causing a different user experience especially at the application layer.

Thanks,
Sriram.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1013</commentid>
    <comment_count>12</comment_count>
    <who name="Ye Ting">ting.ye</who>
    <bug_when>2016-11-24 00:37:39 +0000</bug_when>
    <thetext>Hi Sriram,

I understand your use case and concern. In current stage, the network team wants to keep the UI configuration simple and avoid complexity if not necessary. We are now doing DNS support in iSCSI scenario. To follow this rule, we don&apos;t have plans to update iSCSI UI to configure DNS server address, instead, we require the users configure DNS server addresses in different approaches, for example, from ifconfig/ifconfig6 or HII pages provided by IP4/IP6 driver. For the same reasons, we prefer not to provide the new IPv6 address configuration in iSCSI UI.

Best Regards,
Ting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1036</commentid>
    <comment_count>13</comment_count>
    <who name="Sriram">sriram-s</who>
    <bug_when>2016-11-29 04:10:07 +0000</bug_when>
    <thetext>Thanks Ting. In that case, we will explore the options we have for this, and come back to you if needed. For now, you can consider this request closed.

Thanks,
Sriram.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1076</commentid>
    <comment_count>14</comment_count>
    <who name="Ye Ting">ting.ye</who>
    <bug_when>2016-11-30 00:23:44 +0000</bug_when>
    <thetext>Thanks Sriram for your understanding. I will close this tracker now.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>135</bug_id>
          
          <creation_ts>2016-10-04 21:40:49 +0000</creation_ts>
          <short_desc>BOpt_DestroyMenuEntry function attempts to free NULL in two places</short_desc>
          <delta_ts>2016-10-19 22:14:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Eric Nelson">eric.nelson</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2015</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>UDK 2015</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>554</commentid>
    <comment_count>0</comment_count>
    <who name="Eric Nelson">eric.nelson</who>
    <bug_when>2016-10-04 21:40:49 +0000</bug_when>
    <thetext>After I build run the r18552 (9/29/15) UDK2015 NT32 IA32 environment, and attempt to add an item to the boot menu (Boot Maintenance Manager =&gt; Boot Options =&gt; Add Boot Option), SecMain.exe crashes:

ASSERT_EFI_ERROR (Status = Invalid Parameter)

ASSERT!: c:\myworkspace\MdePkg\Library\UefiMemoryAllocationLib\MemoryAllocationLib.c (819): !EFI_ERROR (Status)

I have found that the BOpt_DestroyMenuEntry function attempts to free NULL in two places (refer to the file comparison below).

I am using VS2013x86 tool-chain, on Win10 RS1 64-bit OS, and hit this issue in both RELEASE and DEBUG IA32 builds.

~~~~~~ diff of fixes ~~~~~~

Comparing files BootOption.c and BOOTOPTION.NEW.TXT
***** BootOption.c
    if (!FileContext-&gt;IsRoot) {
      FreePool(FileContext-&gt;DevicePath);
    } else {
***** BOOTOPTION.NEW.TXT
    if (!FileContext-&gt;IsRoot) {
                if (FileContext-&gt;DevicePath != NULL) { // Fix #1
                        FreePool(FileContext-&gt;DevicePath);
                }
    } else {
*****

***** BootOption.c

  FreePool(MenuEntry-&gt;DisplayString);
  if (MenuEntry-&gt;HelpString != NULL) {
***** BOOTOPTION.NEW.TXT

  if (MenuEntry-&gt;DisplayString != NULL) { //  // Fix #2
          FreePool(MenuEntry-&gt;DisplayString);
  }
  if (MenuEntry-&gt;HelpString != NULL) {
*****</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>596</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-13 20:09:14 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>606</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-10-16 23:15:47 +0000</bug_when>
    <thetext>(In reply to Eric Nelson from comment #0)
&gt; After I build run the r18552 (9/29/15) UDK2015 NT32 IA32 environment, and
&gt; attempt to add an item to the boot menu (Boot Maintenance Manager =&gt; Boot
&gt; Options =&gt; Add Boot Option), SecMain.exe crashes:
&gt; 
&gt; ASSERT_EFI_ERROR (Status = Invalid Parameter)
&gt; 
&gt; ASSERT!:
&gt; c:\myworkspace\MdePkg\Library\UefiMemoryAllocationLib\MemoryAllocationLib.c
&gt; (819): !EFI_ERROR (Status)
&gt; 
&gt; I have found that the BOpt_DestroyMenuEntry function attempts to free NULL
&gt; in two places (refer to the file comparison below).
&gt; 
&gt; I am using VS2013x86 tool-chain, on Win10 RS1 64-bit OS, and hit this issue
&gt; in both RELEASE and DEBUG IA32 builds.
&gt; 
&gt; ~~~~~~ diff of fixes ~~~~~~
&gt; 
&gt; Comparing files BootOption.c and BOOTOPTION.NEW.TXT
&gt; ***** BootOption.c
&gt;     if (!FileContext-&gt;IsRoot) {
&gt;       FreePool(FileContext-&gt;DevicePath);
&gt;     } else {
&gt; ***** BOOTOPTION.NEW.TXT
&gt;     if (!FileContext-&gt;IsRoot) {
&gt;                 if (FileContext-&gt;DevicePath != NULL) { // Fix #1
&gt;                         FreePool(FileContext-&gt;DevicePath);
&gt;                 }
&gt;     } else {
&gt; *****
&gt; 
&gt; ***** BootOption.c
&gt; 
&gt;   FreePool(MenuEntry-&gt;DisplayString);
&gt;   if (MenuEntry-&gt;HelpString != NULL) {
&gt; ***** BOOTOPTION.NEW.TXT
&gt; 
&gt;   if (MenuEntry-&gt;DisplayString != NULL) { //  // Fix #2
&gt;           FreePool(MenuEntry-&gt;DisplayString);
&gt;   }
&gt;   if (MenuEntry-&gt;HelpString != NULL) {
&gt; *****

Hi Eric,

I am trying to reproduce the above issue using the UDK2015 code rev. 18552 on a Win7 64-bit environment and using VS2013x86 tool-chain DEBUG build. However, I cannot reproduce the issue on my side.

Did you meet the ASSERT when you select the &quot;Add Boot Option&quot; for the first time? Was there any additional changes made beforehand?

Thanks in advance for your help.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>612</commentid>
    <comment_count>3</comment_count>
    <who name="Eric Nelson">eric.nelson</who>
    <bug_when>2016-10-17 15:38:02 +0000</bug_when>
    <thetext>
No, there were no additional changes.

Furthermore, I first hit this issue on my IT-managed Win10 laptop (HP), and then right before I filed the sighting, I also downloaded it onto a Fresh install of RS1+VS2013 (I was updating from 9600 my Dell XPS 15&quot;, and clean installed it), and again I hit this immediately.

After I launch the --NT32 environment for the first time, after it copies the target.txt to conf, I edited the toolchain (to VS2013x86), and also set the number of threads to one plus the number of cores, so I use 5 on my quad-core i7, whereas I used 3 on my i5 system.

No other changes.

When I try t &quot;add a boot entry&quot; from the boot maintenance manager, it attempts to free those two NULL pointers every time.

It&apos;s a mystery why you don&apos;t hit it, as I am two for two.

Wy not just add the NULL checks, like every other NULL check in that function.  Apparenty there is some case tat can be hit.  Maybe on your system, it is just dumb luck that the uninitialized pointers are set to NULL, whereas on my system(s), they contain garbage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>613</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-10-17 21:14:39 +0000</bug_when>
    <thetext>Got it. I will add checks before freeing those two pointers to eliminate the chance of freeing NULL pointers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>631</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-10-19 04:13:39 +0000</bug_when>
    <thetext>I am able to reproduce the ASSERT issue on UDK2015 branch (both HEAD version using VS2015x86 tool-chain and version Git-59fd15c5a2174a6a6fc4133964e6d5b520b58663 (i.e. svn-r18552) using VS2013x86 tool-chain) by changing the PCD &apos;gEfiNt32PkgTokenSpaceGuid.PcdWinNtFileSystem&apos; in file Nt32Pkg\Nt32Pkg.dsc to point to a non-existing directory:

Like from L&quot;.!..\..\..\..\EdkShellBinPkg\Bin\Ia32\Apps&quot; -&gt; L&quot;.!..\..\..\..\EdkShellBinPkg\Bin\Ia32\AppsTest&quot;.

Meanwhile, I notice that on edk2 master, this issue has already been fixed by commit bbd6b0106e9e725853d12550527aa03f11c09fcf. So the reported issue does not exist on master branch.

The fix on master branch is the same with the one provided by Eric Nelson, so I will apply the fix on the UDK2015 branch.

I changed both the fields &apos;Release(s) the issue is observed&apos; and &apos;Release(s) the issues must be fixed&apos; to contain only UDK2015 branch, since the reported issue only exists on this branch at the moment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>648</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-10-19 22:14:13 +0000</bug_when>
    <thetext>Fixed this issue on UDK2015 branch via commit:
55f0ddb2b6f533177ec6b72fd42bd355f13c61a8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>494</bug_id>
          
          <creation_ts>2017-04-19 01:44:19 +0000</creation_ts>
          <short_desc>Error Status value may be overridden by error handling in UfsHcDriverBindingStart</short_desc>
          <delta_ts>2017-04-24 21:13:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>feng.tian</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1858</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-04-19 01:44:19 +0000</bug_when>
    <thetext>In UfsHcDriverBindingStart, the PCI attributes restore logic may override the error Status value.

  if (EFI_ERROR (Status)) {
    if ((Private != NULL) &amp;&amp; (Private-&gt;PciAttributes != 0)) {
      //
      // Restore original PCI attributes
      //
      Status = PciIo-&gt;Attributes (
                        PciIo,
                        EfiPciIoAttributeOperationSet,
                        Private-&gt;PciAttributes,
                        NULL
                        );
      ASSERT_EFI_ERROR (Status);
    }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1887</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-20 20:09:13 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1896</commentid>
    <comment_count>2</comment_count>
      <attachid>54</attachid>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-04-21 02:01:08 +0000</bug_when>
    <thetext>Created attachment 54
ufs.patch

Attach the patch I made before with minor cleanup.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1905</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-04-24 21:13:20 +0000</bug_when>
    <thetext>Resolved at master branch via:
https://github.com/tianocore/edk2/commit/c36ea72ebd4c0fd2c73f881d4708fa623c20c320
https://github.com/tianocore/edk2/commit/1a5ae661754625b8f4bba39214006e87216747e9

Resolved at UDK2017 branch via:
https://github.com/tianocore/edk2/commit/9fe5799446d132d5b9cb5e1bb64265947e02221d
https://github.com/tianocore/edk2/commit/4d3f4a20f180bcc81c467622e56388f96faa84a4</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>54</attachid>
            <date>2017-04-21 02:01:08 +0000</date>
            <delta_ts>2017-04-21 02:01:08 +0000</delta_ts>
            <desc>ufs.patch</desc>
            <filename>ufs.patch</filename>
            <type>text/plain</type>
            <size>2681</size>
            <attacher name="StarZeng">star.zeng</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>866</bug_id>
          
          <creation_ts>2018-01-29 11:04:49 +0000</creation_ts>
          <short_desc>PiSmmCpuDxeSmm: replace DB-encoded instructions in NASM sources</short_desc>
          <delta_ts>2018-04-04 11:01:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=881</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3507</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-01-29 11:04:49 +0000</bug_when>
    <thetext>NASM supports address- and operand-size prefixes via mnemonics:

&quot;Explicit address-size and operand-size prefixes A16, A32, A64, O16 and O32, O64 are provided -- one example of their use is given in chapter 10.&quot; -- quoted from &lt;http://www.nasm.us/doc/nasmdoc3.html&gt;.

However, some NASM source files still use DB 0x66 and DB 0x67 for inserting the binary codes for such prefixes:

$ git grep -l -i -E &apos;\&lt;db +(6[67]h|0x6[67])&apos; -- &apos;*nasm*&apos;

IntelFsp2WrapperPkg/Library/SecFspWrapperPlatformSecLibSample/Ia32/SecEntry.nasm
MdePkg/Library/BaseLib/Ia32/EnablePaging64.nasm
UefiCpuPkg/PiSmmCpuDxeSmm/Ia32/SmiEntry.nasm
UefiCpuPkg/PiSmmCpuDxeSmm/Ia32/SmmInit.nasm
UefiCpuPkg/PiSmmCpuDxeSmm/X64/SmiEntry.nasm
UefiCpuPkg/PiSmmCpuDxeSmm/X64/SmmInit.nasm

Please replace the DBs in these NASM source files with the appropriate size prefix mnemonics.

Furthermore, 16-bit assembly code should be written under &quot;BITS 16&quot; (and shouldn&apos;t use 32-bit register names etc); we shouldn&apos;t rely on the 32-bit assembly producing the right byte stream for 16-bit real mode too. NASM supports multi-mode assembly files with BITS.

Verification of the conversion should be possible (hopefully) by binary comparison between the object files, before and after. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3524</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-01-31 07:23:13 +0000</bug_when>
    <thetext>* One related commit (not the final solution for this BZ):
e75ee97224e5 (&quot;UefiCpuPkg/PiSmmCpuDxeSmm: remove unneeded DBs from IA32 SmmStartup()&quot;, 2018-01-31).

* Related sub-thread on edk2-devel:
https://lists.01.org/pipermail/edk2-devel/2018-January/020694.html
http://mid.mail-archive.com/E92EE9817A31E24EB0585FDF735412F5B895B393@ORSMSX113.amr.corp.intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3529</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-02-02 09:41:14 +0000</bug_when>
    <thetext>Related series on the list:
[edk2] [PATCH 00/14] rid PiSmmCpuDxeSmm of DB-encoded instructions
https://lists.01.org/pipermail/edk2-devel/2018-February/020907.html
http://mid.mail-archive.com/20180202143954.7357-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3557</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-08 19:07:15 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to follow up</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3765</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-23 17:20:54 +0000</bug_when>
    <thetext>I&apos;m re-scoping this BZ to PiSmmCpuDxeSmm only; otherwise this task is too large to tackle in a single BZ.

[edk2] [PATCH v2 00/15] rid PiSmmCpuDxeSmm of DB-encoded instructions
https://lists.01.org/pipermail/edk2-devel/2018-March/023165.html
http://mid.mail-archive.com/20180323211504.22434-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3818</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-04 11:01:06 +0000</bug_when>
    <thetext>Fixed in commit range aae02dccf5b0..d22c995a4814.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>42</bug_id>
          
          <creation_ts>2016-07-20 20:50:45 +0000</creation_ts>
          <short_desc>Performance optimize BaseTools Python code</short_desc>
          <delta_ts>2019-09-16 17:16:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>67</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 20:50:45 +0000</bug_when>
    <thetext>It would be good to take a look at the hot functions of a build to see if the build performance can be optimized.

Update: BaseTools/BinWrappers/PosixLike/RunToolFromSource
python -m cProfile -o cProfile &quot;dirname $0/../../Source/Python&quot;/basename $0/basename $0.py $*` build python -m pstats cProfile
Welcome to the profile statistics browser.
cProfile% strip
cProfile% sort time
cProfile% stats 10
Tue Feb 16 12:39:07 2016 cProfile

62486274 function calls (61401923 primitive calls) in 80.853 seconds

Ordered by: internal time
List reduced from 1551 to 10 due to restriction &lt;10&gt;

ncalls tottime percall cumtime percall filename:lineno(function)
3 15.251 5.084 15.251 5.084 {posix.waitpid}
91761 7.312 0.000 7.312 0.000 {method &apos;findall&apos; of &apos;sre.SRE_Pattern&apos; objects}
661 7.246 0.011 7.246 0.011 {method &apos;acquire&apos; of &apos;thread.lock&apos; objects}
4536908 3.790 0.000 6.533 0.000 Misc.py:1653(__eq_)
764828 3.324 0.000 5.537 0.000 posixpath.py:329(normpath)
73209 2.732 0.000 2.732 0.000 {method &apos;execute&apos; of &apos;sqlite3.Cursor&apos; objects}
13191 2.713 0.000 2.713 0.000 {method &apos;read&apos; of &apos;file&apos; objects}
1167711 2.233 0.000 6.085 0.000 build.py:359(eq)
321034 1.794 0.000 1.794 0.000 {posix.stat}
2822 1.562 0.001 13.276 0.005 GenMake.py:856(GetDependencyList)

cProfile% callers findall
Ordered by: internal time
List reduced from 1551 to 1 due to restriction &lt;&apos;findall&apos;&gt;

Function was called by...
{method &apos;findall&apos; of &apos;sre.SRE_Pattern&apos; objects} &lt;-
ncalls tottime cumtime
4095 2.539 2.539 AutoGen.py:2616(GetBuildOptionIncPathList)
399 0.001 0.001 BuildEngine.py:113(__init)
30468 4.728 4.728 GenMake.py:856(GetDependencyList)
811 0.001 0.001 MetaFileParser.py:1798(_PcdParser)
4071 0.003 0.003 Misc.py:1403(AnalyzePcdData)
51692 0.040 0.040 String.py:260(ReplaceMacro)
75 0.000 0.000 ToolDefClassObject.py:60(LoadToolDefFile)
150 0.000 0.000 ToolDefClassObject.py:180(ExpandMacros)

Thus:
GenMake.py:856(GetDependencyList) makes 30,468 calls to findall and takes 4.728 seconds
AutoGen.py:2616(_GetBuildOptionIncPathList) makes 4.095 calls to findall and takes 2.539 seconds</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>395</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-07-29 02:36:31 +0000</bug_when>
    <thetext>Assign to yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5485</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:38:23 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9318</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 19:39:03 +0000</bug_when>
    <thetext>The following commit references this BZ:

- 938cf4c33a06 (&quot;BaseTools: fix imports&quot;, 2019-01-10)

I&apos;m setting the status to IN_PROGRESS due to that patch.

But, I&apos;m not convinced the patch addresses the full scope, from comment 0.

Mike, would you like to keep this BZ open? It&apos;s been filed 3+ years ago, with a single (partial) patch to show for it.

I&apos;m sure other optimization work has gone into BaseTools since this BZ was filed -- but all that work has likely been tracked in separate, more specific, BZs. Is this BZ too generic perhaps? What do you suggest? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9675</commentid>
    <comment_count>4</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-09-16 17:16:20 +0000</bug_when>
    <thetext>We will be opening more specific bugs to deal with performance issues within BaseTools. This bug is too generic.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>324</bug_id>
          
          <creation_ts>2017-01-04 01:07:20 +0000</creation_ts>
          <short_desc>Enable add new file or folder for FileExplorerLib</short_desc>
          <delta_ts>2017-01-19 03:13:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1240</commentid>
    <comment_count>0</comment_count>
      <attachid>32</attachid>
    <who name="ydong10">eric.dong</who>
    <bug_when>2017-01-04 01:07:20 +0000</bug_when>
    <thetext>Created attachment 32
Poc code for this feature

In current implementation, FileExplorerLib only support select existed file. Add this bugz to enable create new file or folder for the FileExplorerLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1254</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-05 19:10:08 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1345</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-01-19 03:13:59 +0000</bug_when>
    <thetext>Fix this issue in EDKII trunk:
https://github.com/tianocore/edk2/commit/a409875592d984fdc412675e93884556eb6635d0</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>32</attachid>
            <date>2017-01-04 01:07:20 +0000</date>
            <delta_ts>2017-01-04 01:07:20 +0000</delta_ts>
            <desc>Poc code for this feature</desc>
            <filename>0001-Enable-create-new-file-functionality.patch</filename>
            <type>application/octet-stream</type>
            <size>11532</size>
            <attacher name="ydong10">eric.dong</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>600</bug_id>
          
          <creation_ts>2017-06-19 21:43:48 +0000</creation_ts>
          <short_desc>GenFw Clear unused DEBUG entry in PE image generated by VS tool chain</short_desc>
          <delta_ts>2017-07-05 01:44:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2298</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-06-19 21:43:48 +0000</bug_when>
    <thetext>VS2015 tool chain generates more than one DEBUG entries in PE image. EDKII project only uses the first one cv to get the PDB file path. Other two can be clear to improve the compression ratio. OVMFIa32X64 built with VS2015 FVMAIN_COMPACT size will be reduced from 1512744 to 1504992 (~8KB saved).

And, for cv type, RSDS format GUID and Version can also be clear, then the DEBUG image can be reproduced if it is built from the same directory. 

  Debug Directories
        Time Type        Size      RVA  Pointer
    -------- ------- -------- -------- --------
    5947EF57 cv            84 0001E164    1E164    Format: RSDS, {2F082119-4543-4FE4-8271-01EB2B3A79F7}, 1, c:\allpkg\edk2push\Build\Ovmf3264\DEBUG_VS2015x86\X64\MdeModulePkg\Core\Dxe\DxeMain\DEBUG\DxeCore.pdb
    5947EF57 feat          14 0001E1E8    1E1E8    Counts: Pre-VC++ 11.00=0, C/C++=122, /GS=0, /sdl=0, guardN=0
    5947EF57 coffgrp       90 0001E1FC    1E1FC    4C544347 (LTCG)

==&gt;
        Time Type        Size      RVA  Pointer
    -------- ------- -------- -------- --------
    00000000 cv            84 0001E164    1E164    Format: RSDS, {00000000-0000-0000-0000-000000000000}, 0, c:\allpkg\edk2push\Build\Ovmf3264\DEBUG_VS2015x86\X64\MdeModulePkg\Core\Dxe\DxeMain\DEBUG\DxeCore.pdb
    00000000 (   0)         0 00000000        0
    00000000 (   0)         0 00000000        0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2299</commentid>
    <comment_count>1</comment_count>
      <attachid>80</attachid>
    <who name="nobody">nobody</who>
    <bug_when>2017-06-19 21:44:58 +0000</bug_when>
    <thetext>Created attachment 80
Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2313</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-06-21 21:24:57 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2393</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-07-05 01:44:12 +0000</bug_when>
    <thetext> https://github.com/tianocore/edk2/commit/e4129b0e5897d76885170bec9da996b266f185f9</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>80</attachid>
            <date>2017-06-19 21:44:58 +0000</date>
            <delta_ts>2017-06-19 21:44:58 +0000</delta_ts>
            <desc>Patch</desc>
            <filename>0001-BaseTools-Update-GenFw-to-clear-unused-debug-entry-g.patch</filename>
            <type>text/plain</type>
            <size>4171</size>
            <attacher name="nobody">nobody</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>151</bug_id>
          
          <creation_ts>2016-10-15 10:12:38 +0000</creation_ts>
          <short_desc>[BaseTool][Build.exe]Fail to parse the symbol in map file</short_desc>
          <delta_ts>2016-11-14 02:17:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nero">uefi_ustone</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>605</commentid>
    <comment_count>0</comment_count>
    <who name="nero">uefi_ustone</who>
    <bug_when>2016-10-15 10:12:38 +0000</bug_when>
    <thetext>build...
 : error C0DE: Unknown fatal error when processing [d:\workspace\bios\edk2-master\UStonePkg\Test\skia\TestSkia.inf]

(Please send email to edk2-devel@lists.01.org for help, attaching following call stack trace!)

(Python 2.7.3 on win32) Traceback (most recent call last):
  File &quot;build\build.py&quot;, line 2273, in Main
  File &quot;build\build.py&quot;, line 2029, in Launch
  File &quot;build\build.py&quot;, line 1742, in _BuildModule
  File &quot;build\build.py&quot;, line 1284, in _Build
  File &quot;build\build.py&quot;, line 2037, in CreateAsBuiltInf
  File &quot;c:\Users\Public\Documents\BuildPool\BaseTools\build\Source\Python\AutoGen\AutoGen.py&quot;, line 3773, in CreateAsBuiltInf
  File &quot;c:\Users\Public\Documents\BuildPool\BaseTools\build\Source\Python\GenPatchPcdTable\GenPatchPcdTable.py&quot;, line 61, in parsePcdInfoFromMapFile
  File &quot;c:\Users\Public\Documents\BuildPool\BaseTools\build\Source\Python\GenPatchPcdTable\GenPatchPcdTable.py&quot;, line 139, in _parseGeneral
AssertionError: Fail to parse the symbol in map file, line is 0001:00056430       ??$foreach@V&lt;lambda_58b8ddf4207fffb1a1cb82e85fc90f6a&gt;@@@?$SkTHashTable@VSkGlyph@@IVHashTraits@1@@@QEAAX$$QEAV&lt;lambda_58b8ddf4207fffb1a1cb82e85fc90f6a&gt;@@@Z 0000000000067430 f i SkiaLib:SkGlyphCache.obj</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>642</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-10-19 21:08:57 +0000</bug_when>
    <thetext>*** Bug 150 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>739</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-26 21:06:39 +0000</bug_when>
    <thetext>Assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>744</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-26 21:26:46 +0000</bug_when>
    <thetext>change it to confirmed. yonghong to follow up to reproduce it first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>846</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-04 21:05:32 +0000</bug_when>
    <thetext>fix it in SHA-1: 7e7a8116640605be83528ab12837e71c6a2accae</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>702</bug_id>
          
          <creation_ts>2017-09-08 11:05:10 +0000</creation_ts>
          <short_desc>The undefined behavior about left shift a negative signed value in PrintLibInternal.c</short_desc>
          <delta_ts>2017-09-29 04:18:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2711</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-09-08 11:05:10 +0000</bug_when>
    <thetext>The edk2 Asan/Ubsan catch a undefined behavior in edk2\MdePkg\Library\BasePrintLib\PrintLibInternal.c BasePrintLibSPrintMarker() function:

line 1168:
      ArgumentCharacter = ((*ArgumentString &amp; 0xff) | (*(ArgumentString + 1) &lt;&lt; 8)) &amp; ArgumentMask;

*(ArgumentString + 1) here is a value of type CONST CHAR8, which is const char in fact. The char is a signed value type, and the *(ArgumentString + 1) can be a negative value (0xFE) during boot. Left shift a negative value is a undefined behavior in C standard, and its real behavior is compiler implementation specific.
It can be easily fixed as below to force the *(ArgumentString + 1) as a unsigned value.

line 1168:
ArgumentCharacter = ((*ArgumentString &amp; 0xff) | ((UINT8)*(ArgumentString + 1) &lt;&lt; 8)) &amp; ArgumentMask;

The Bug695 and Bug698 are the same type issues, please refer to them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2733</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-14 20:05:03 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2808</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-29 04:16:20 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/ea0b15067c54e8c34321e9f094515302039be12e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2809</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-29 04:16:56 +0000</bug_when>
    <thetext>Mark the tracker as resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2810</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-29 04:18:59 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #2)
&gt; Resolved via commit:
&gt; https://github.com/tianocore/edk2/commit/
&gt; ea0b15067c54e8c34321e9f094515302039be12e

Resolved via commits:
https://github.com/tianocore/edk2/commit/ea0b15067c54e8c34321e9f094515302039be12e
https://github.com/tianocore/edk2/commit/1dfb0bf20e0b41d720940b2cdf4f81ebd8a099a8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>252</bug_id>
          
          <creation_ts>2016-11-24 09:09:53 +0000</creation_ts>
          <short_desc>Missing detail error message of link.exe under Win7X64 env</short_desc>
          <delta_ts>2022-02-15 22:32:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nero">uefi_ustone</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1017</commentid>
    <comment_count>0</comment_count>
    <who name="nero">uefi_ustone</who>
    <bug_when>2016-11-24 09:09:53 +0000</bug_when>
    <thetext>WinDDK: 7600.16385.1

But it&apos;s ok with Win10 X64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1086</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-11-30 20:09:15 +0000</bug_when>
    <thetext>assign to Yonghong
description is too simple</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1441</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-15 00:56:53 +0000</bug_when>
    <thetext>Get following info from submitter:

Pls try to wirte a test program which use a declared but has no instance function. for example:

void fun1(); // only declared here
int main()
{
    fun1();
    return 0;
}

Build it in edkii env and the linker will fail with message like: unresolvable function void fun1() .....
But under win7x64, the hight light message is missing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1734</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-05 04:34:20 +0000</bug_when>
    <thetext>I think it is link tool&apos;s issue, not EDK II BaseTools issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1736</commentid>
    <comment_count>4</comment_count>
    <who name="nero">uefi_ustone</who>
    <bug_when>2017-04-05 07:36:18 +0000</bug_when>
    <thetext>(In reply to Yonghong Zhu from comment #3)
&gt; I think it is link tool&apos;s issue, not EDK II BaseTools issue.

Hi Yonghong,

No..
I had tried to invoke the Makefile which auto generated by edk tool in build menu for my application direct and it works normally.

Nero</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1737</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-05 08:54:35 +0000</bug_when>
    <thetext>Hi Nero,

so strange... I will double check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5488</commentid>
    <comment_count>6</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:39:00 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18390</commentid>
    <comment_count>7</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-15 22:32:55 +0000</bug_when>
    <thetext>it&apos;s specific for win7.

it&apos;s ok with Win10.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>446</bug_id>
          
          <creation_ts>2017-03-28 08:49:33 +0000</creation_ts>
          <short_desc>BaseTools: support  VfrCompiler  to use IMAGE_TOKEN  format</short_desc>
          <delta_ts>2017-04-01 01:40:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1694</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-28 08:49:33 +0000</bug_when>
    <thetext>VfrCompiler tool needs to update to support IMAGE_TOKEN. so the  tools_def.txt should be updated to append the new option (/FI$(MODULE_NAME)ImgDefs.h) in VFRPP flag</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1695</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-28 08:51:04 +0000</bug_when>
    <thetext>Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1723</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-01 01:38:43 +0000</bug_when>
    <thetext>We enhance StrDefs.h to include ImageDefs.h for VfrCompiler to support IMAGE_TOKEN usage, since $(MODULE_NAME)ImgDefs.h may not generated, directly append it into VFRPP flag would not work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1724</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-01 01:40:44 +0000</bug_when>
    <thetext>push the fix SHA-1: bc7d95c00d9682ca96d8cee9a0be929c2e61a299</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>358</bug_id>
          
          <creation_ts>2017-01-24 21:47:23 +0000</creation_ts>
          <short_desc>SetUnicodeMem in DisplayEngineDxe seems unsafe</short_desc>
          <delta_ts>2017-02-23 23:51:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang Cloud">winggundum82</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1369</commentid>
    <comment_count>0</comment_count>
      <attachid>37</attachid>
    <who name="Wang Cloud">winggundum82</who>
    <bug_when>2017-01-24 21:47:23 +0000</bug_when>
    <thetext>Created attachment 37
example code change to use strcpys can solve this issue

SetUnicodeMem seems unsafe  since the buffer may overflow if the input Size is bigger than buffer size.

  The problem I meet is Year in main page shows incorrect char randomly.
    
   If I turn off GetNumericInput optimize with #pragma optimize( &quot;&quot;, off ) in InputHandler.c , or swtich to use StrCpyS like this. The problem disappear. This issue cannot be seen in OVMF ,but it can be reproduced in our own platform with a rate of 30%.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1422</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-09 19:15:25 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1526</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-02-23 22:38:46 +0000</bug_when>
    <thetext>Fix this issue in Trunk:
https://github.com/tianocore/edk2/commit/5c793e7703146e4c20d8e0074e7908f723d499b0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1530</commentid>
    <comment_count>3</comment_count>
    <who name="Wang Cloud">winggundum82</who>
    <bug_when>2017-02-23 23:51:15 +0000</bug_when>
    <thetext>Verify the fix in latest trunk</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>37</attachid>
            <date>2017-01-24 21:47:23 +0000</date>
            <delta_ts>2017-01-24 21:47:23 +0000</delta_ts>
            <desc>example code change to use strcpys can solve this issue</desc>
            <filename>QQ图片20170124155011.png</filename>
            <type>image/png</type>
            <size>8141</size>
            <attacher name="Wang Cloud">winggundum82</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>720</bug_id>
          
          <creation_ts>2017-09-25 09:27:06 +0000</creation_ts>
          <short_desc>PciBusDxe: assertion failure with multiple paddings in the same PCI resource tree</short_desc>
          <delta_ts>2017-10-23 03:53:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2780</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-25 09:27:06 +0000</bug_when>
    <thetext>From &lt;https://lists.01.org/pipermail/edk2-devel/2017-September/015222.html&gt;:

----------
Hi Ray,

I ran into an interesting problem, while working on
&quot;OvmfPkg/PciHotPlugInitDxe&quot;:

It is an assertion failure in CalculateResourceAperture(), in
&quot;MdeModulePkg/Bus/Pci/PciBusDxe/PciResourceSupport.c&quot;:

&gt; VOID
&gt; CalculateResourceAperture (
&gt;   IN PCI_RESOURCE_NODE    *Bridge
&gt;   )
&gt; {
&gt;   UINT64            Aperture;
&gt;   LIST_ENTRY        *CurrentLink;
&gt;   PCI_RESOURCE_NODE *Node;
&gt;   UINT64            PaddingAperture;
&gt;   UINT64            Offset;
&gt;
&gt;   Aperture        = 0;
&gt;   PaddingAperture = 0;
&gt;
&gt;   if (Bridge == NULL) {
&gt;     return ;
&gt;   }
&gt;
&gt;   if (Bridge-&gt;ResType == PciBarTypeIo16) {
&gt;
&gt;     CalculateApertureIo16 (Bridge);
&gt;     return ;
&gt;   }
&gt;
&gt;   //
&gt;   // Assume the bridge is aligned
&gt;   //
&gt;   for ( CurrentLink = GetFirstNode (&amp;Bridge-&gt;ChildList)
&gt;       ; !IsNull (&amp;Bridge-&gt;ChildList, CurrentLink)
&gt;       ; CurrentLink = GetNextNode (&amp;Bridge-&gt;ChildList, CurrentLink)
&gt;       ) {
&gt;
&gt;     Node = RESOURCE_NODE_FROM_LINK (CurrentLink);
&gt;     if (Node-&gt;ResourceUsage == PciResUsagePadding) {
&gt;       ASSERT (PaddingAperture == 0);
&gt;       PaddingAperture = Node-&gt;Length;
&gt;       continue;
&gt;     }

The ASSERT() was added in commit c7e7613e09ff (&quot;MdeModulePkg: Fix a
PciBusDxe hot plug bug&quot;, 2015-11-03), which makes the argument that:

    Correct behavior is to reserve the bigger one between the padding
    resource and the actual occupied resource.

While I totally agree with that statement, I don&apos;t think the ASSERT() is
correct. The ASSERT() assumes that every resource tree  -- Mem32Node,
PMem32Node, Mem64Node, PMem64Node, IoNode -- will contain at most one
padding.

I think this assumption can be broken easily; the DegradeResource()
function merges resource trees for a number of reasons. For example,

- if the Hot Plug Init Protocol requests, for a bridge,

  - both 2MB non-prefetchable 32-bit MMIO reservation

  - and 2MB prefetchable 32-bit MMIO reservation,

- and the root bridge reported EFI_PCI_HOST_BRIDGE_COMBINE_MEM_PMEM,

then DegradeResource() will merge the PMem32 padding as well into the
Mem32 tree (not just BARs of devices behind the bridge), while the Mem32
tree already has a Mem32 padding. Thus the Mem32 tree will end up with
two paddings.

Other degradations are possible too, which can lead to the same
situation:

- For example 64-bit -&gt; 32-bit degradation.

- Or we can imagine a recursive situation where we have two bridges
  down-stream from an upstream bridge, the first downstream bridge wants
  a PMem32 padding, while the second downstream bridge wants a Mem32
  padding. On the level of the upstream bridge, I believe these two
  paddings will be merged into the same resource tree (in case of
  EFI_PCI_HOST_BRIDGE_COMBINE_MEM_PMEM).

My question is if the problem is easy enough for me to fix:

(a) Should I replace the ASSERT() and the assignment with summation?

  PaddingAperture += Node-&gt;Length;

(b) Should I replace them with a MAX() search?

  PaddingAperture = MAX (PaddingAperture, Node-&gt;Length);

(c) Is the fix more complicated than (a) and (b)?

I think the correct solution is (b), in the spirit of your commit
c7e7613e09ff, but I&apos;m not sure if any other parts of PciBusDxe need to
be updated for (b).

Thanks!
Laszlo
----------</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2781</commentid>
    <comment_count>1</comment_count>
      <attachid>103</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-25 09:29:12 +0000</bug_when>
    <thetext>Created attachment 103
OVMF log file showing the assertion failure</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2783</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-25 17:01:58 +0000</bug_when>
    <thetext>How to reproduce the issue:

(1) Apply the following series and build OVMF:

[edk2] [PATCH 0/7] OvmfPkg/PciHotPlugInitDxe: obey PCI resource reservation
                   hints from QEMU
https://lists.01.org/pipermail/edk2-devel/2017-September/015296.html
Message-Id: &lt;20170925195824.10866-1-lersek@redhat.com&gt;

(The 0/7 cover letter contains a git fetch URL as well.)

The series applies to edk2 master @ baaa3cee1eaf (&quot;MdeModulePkg/UDF: Fix creation of UDF logical partition&quot;, 2017-09-23).

(2) Build upstream QEMU at v2.10.0-861-g460b6c8e58 or later.

(3) Boot OVMF:

  qemu-system-x86_64 \
    -nographic \
    -nodefaults \
    -M q35 \
    -debugcon file:debug.log \
    -global isa-debugcon.iobase=0x402 \
    -pflash OVMF.fd \
    -netdev user,id=net0 \
    -device pcie-root-port,id=root-port,bus=pcie.0,pref32-reserve=2M \
    -device virtio-net-pci,netdev=net0,id=net0,bus=root-port</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2784</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-25 17:04:16 +0000</bug_when>
    <thetext>... if &quot;pref32-reserve=2M&quot; is removed, then there is no assertion failure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2799</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-28 20:13:46 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2821</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-29 22:16:37 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; How to reproduce the issue:
&gt; 
&gt; (1) Apply the following series and build OVMF:
&gt; 
&gt; [edk2] [PATCH 0/7] OvmfPkg/PciHotPlugInitDxe: obey PCI resource reservation
&gt;                    hints from QEMU
&gt; https://lists.01.org/pipermail/edk2-devel/2017-September/015296.html
&gt; Message-Id: &lt;20170925195824.10866-1-lersek@redhat.com&gt;
&gt; 
&gt; (The 0/7 cover letter contains a git fetch URL as well.)
&gt; 
&gt; The series applies to edk2 master @ baaa3cee1eaf (&quot;MdeModulePkg/UDF: Fix
&gt; creation of UDF logical partition&quot;, 2017-09-23).
&gt; 
&gt; (2) Build upstream QEMU at v2.10.0-861-g460b6c8e58 or later.
&gt; 
&gt; (3) Boot OVMF:
&gt; 
&gt;   qemu-system-x86_64 \
&gt;     -nographic \
&gt;     -nodefaults \
&gt;     -M q35 \
&gt;     -debugcon file:debug.log \
&gt;     -global isa-debugcon.iobase=0x402 \
&gt;     -pflash OVMF.fd \
&gt;     -netdev user,id=net0 \
&gt;     -device pcie-root-port,id=root-port,bus=pcie.0,pref32-reserve=2M \
&gt;     -device virtio-net-pci,netdev=net0,id=net0,bus=root-port

Laszlo,
I firstly tried to run OVMF.fd but failed with below errors.

e:\bin\qemu&gt;qemu-system-x86_64 -nographic -nodefaults -M q35 -debugcon file:debug.log -global isa-debugcon.iobase=0x402 -pflash OVMF.fd -netdev user,id=net0 -device pcie-root-port,id=root-port,bus=pcie.0,pref32-reserve=2M -device virtio-net-pci,netdev=net0,id=net0,bus=root-port
WARNING: Image format was not specified for &apos;OVMF.fd&apos; and probing guessed raw.
         Automatically detecting the format is dangerous for raw images, write operations on block 0 will be restricted.
         Specify the &apos;raw&apos; format explicitly to remove the restrictions.
qemu-system-x86_64: -device pcie-root-port,id=root-port,bus=pcie.0,pref32-reserve=2M: Property &apos;.pref32-reserve&apos; not found

Then I tried to use OVMF_CODE.fd and OVMF_VARS.fd. QEMU complains about .pref32-reserve not found.

e:\bin\qemu&gt;qemu-system-x86_64 -nographic -nodefaults -M q35 -debugcon file:debug.log -global isa-debugcon.iobase=0x402 -drive if=pflash,format=raw,unit=0,file=OVMF_CODE.fd,readonly=on -drive if=pflash,format=raw,unit=1,file=OVMF_VARS.fd -netdev user,id=net0 -device pcie-root-port,id=root-port,bus=pcie.0,pref32-reserve=2M -device virtio-net-pci,netdev=net0,id=net0,bus=root-port
qemu-system-x86_64: -device pcie-root-port,id=root-port,bus=pcie.0,pref32-reserve=2M: Property &apos;.pref32-reserve&apos; not found

QEMU version is 2.10 rc4 Windows from https://qemu.weilnetz.de/w64/.
I will try to work out the fix without reproducing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2822</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-30 17:31:56 +0000</bug_when>
    <thetext>Ray,

QEMU 2.10 rc4 is not suitable for reproducing the issue; the QEMU feature for setting the resource reservations is not even part of the latest official QEMU release (2.10.0).

Instead, QEMU has to be compiled from git master; the relevant patch is commit 226263fb5cda (&quot;hw/pci: add QEMU-specific PCI capability to the Generic PCI Express Root Port&quot;).

Nonetheless, I got your patch, and I will test it:

[edk2] [PATCH] MdeModulePkg/PciBus: Count multiple hotplug resource paddings
https://lists.01.org/pipermail/edk2-devel/2017-September/015519.html

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2839</commentid>
    <comment_count>7</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-09 02:37:39 +0000</bug_when>
    <thetext>pushed @ 728d74973c9262b6c7b7ef4be213223d55affec3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2913</commentid>
    <comment_count>8</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-23 03:53:49 +0000</bug_when>
    <thetext>A regression of the previous commit was fixed by 6e3287442774c1a4bc83f127694700eeb07c18dc</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>103</attachid>
            <date>2017-09-25 09:29:12 +0000</date>
            <delta_ts>2017-09-25 09:29:12 +0000</delta_ts>
            <desc>OVMF log file showing the assertion failure</desc>
            <filename>ovmf.fedora.q35.log</filename>
            <type>text/plain</type>
            <size>95494</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>268</bug_id>
          
          <creation_ts>2016-11-29 14:39:19 +0000</creation_ts>
          <short_desc>Vlv2TbltDevicePkg binary support modules need to be updated to use 4KB alignment</short_desc>
          <delta_ts>2020-10-28 20:43:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Lu_Shifei">shifeix.a.lu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>Vlv2TbltDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1063</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-11-29 14:39:19 +0000</bug_when>
    <thetext>The Vlv2TbltDevicePkg binary support modules of types DXE_RUNTIME_DRIVER
and DXE_SMM_DRIVER need to be updated to use 4KB PE/COFF section alignment
to support page level protection.

The IA32 images that need to be updated are:
============================================
!!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
!!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\IA32\Vlv2DeviceRefCodePkg\ValleyView2Soc\CPU\SmmControl\RuntimeDxe\SmmControl\DEBUG\SmmControl.pdb  !!!!!!!!
!!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
!!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\IA32\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\Reset\RuntimeDxe\PchReset\DEBUG\PchReset.pdb  !!!!!!!!
!!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
!!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\IA32\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\Spi\RuntimeDxe\PchSpiRuntime\DEBUG\PchSpiRuntime.pdb  !!!!!!!!
!!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
!!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\IA32\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\SampleCode\BiosWriteProtect\Smm\PchBiosWriteProtect\DEBUG\PchBiosWriteProtect.pdb  !!!!!!!!
SMM !!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
SMM !!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\IA32\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\Spi\Smm\PchSpiSmm\DEBUG\PchSpiSmm.pdb  !!!!!!!!
SMM !!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
SMM !!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\IA32\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\PchSmiDispatcher\Smm\PchSmiDispatcher\DEBUG\PchSmiDispatcher.pdb  !!!!!!!!
SMM !!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
SMM !!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\IA32\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\Pcie\Smm\PchPcieSmm\DEBUG\PchPcieSmm.pdb  !!!!!!!!

The X64 images that need to be updated are:
============================================
!!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
!!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\X64\Vlv2DeviceRefCodePkg\ValleyView2Soc\CPU\SmmControl\RuntimeDxe\SmmControl\DEBUG\SmmControl.pdb  !!!!!!!!
!!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
!!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\X64\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\Reset\RuntimeDxe\PchReset\DEBUG\PchReset.pdb  !!!!!!!!
!!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
!!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\X64\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\Spi\RuntimeDxe\PchSpiRuntime\DEBUG\PchSpiRuntime.pdb  !!!!!!!!
!!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
!!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\X64\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\SampleCode\BiosWriteProtect\Smm\PchBiosWriteProtect\DEBUG\PchBiosWriteProtect.pdb  !!!!!!!!
SMM !!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
SMM !!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\X64\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\Spi\Smm\PchSpiSmm\DEBUG\PchSpiSmm.pdb  !!!!!!!!
SMM !!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
SMM !!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\X64\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\PchSmiDispatcher\Smm\PchSmiDispatcher\DEBUG\PchSmiDispatcher.pdb  !!!!!!!!
SMM !!!!!!!!  InsertImageRecord - Section Alignment(0x20) is not 4K  !!!!!!!!
SMM !!!!!!!!  Image - m:\Build\Vlv2TbltDevicePkg\DEBUG_VS2008x86\X64\Vlv2DeviceRefCodePkg\ValleyView2Soc\SouthCluster\Pcie\Smm\PchPcieSmm\DEBUG\PchPcieSmm.pdb  !!!!!!!!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1137</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-08 00:41:10 +0000</bug_when>
    <thetext>Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14144</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-10-28 20:43:05 +0000</bug_when>
    <thetext>Fixed in the following commit for VS+GCC:

https://github.com/tianocore/edk2/commit/eee350c067e008a8ea0a3c6548448d410b14a1b9

Fixed in the following commit for XCODE:

https://github.com/tianocore/edk2-platforms/commit/5e10437bda9f1189d409e18032fa93a12a940d44</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>636</bug_id>
          
          <creation_ts>2017-07-19 02:39:42 +0000</creation_ts>
          <short_desc>PXE IPv6 Boot Option missing from Boot Manager after few operations</short_desc>
          <delta_ts>2017-08-02 03:45:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nagaraj Hegde">nagaraj-p.hegde</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>nagaraj-p.hegde</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>sriram-s</cc>
    
    <cc>ting.ye</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2455</commentid>
    <comment_count>0</comment_count>
    <who name="Nagaraj Hegde">nagaraj-p.hegde</who>
    <bug_when>2017-07-19 02:39:42 +0000</bug_when>
    <thetext>1. Launch PXE IPv6 from the boot manager. 
2. Exit from PXE boot so that you can return back to the boot manager. Typically an “Esc” after downloading NBP file and before downloading boot.wim, will land you back in Boot Manager
3. Launch UEFI Shell 
4. Execute “dh –p LoadFile” and make the note of the handles (typically 4 handles per NIC).
5. Now, execute &quot;ifconfig6 -r eth0&quot;, then after &quot;ifconfig6 -l eth0&quot; to verify that interface eth0 hasn&apos;t got a DHCPv6 configuration.
6. Again, execute “dh –p LoadFile” and cross check if all the handles are intact as seen in step #4.
7. Exit UEFI Shell.

   OR

1. Launch PXE IPv6 from the boot manager. 
2. Exit from PXE boot so that you can return back to the boot manager. Typically an “Esc” after downloading NBP file and before downloading boot.wim, will land you back in Boot Manager
3. Launch UEFI Shell 
4. Execute “dh –p LoadFile” and make the note of the handles (typically 4 handles per NIC).
5. Now, Launch go back and launch HTTP IPv6 from the boot manager. Say a SuSE .iso download and launch.
6. In the grub, type exit and come back to the Boot Manager.
7. Launch UEFI Shell again.
8. Execute “dh –p LoadFile” and cross check if all the handles are intact as seen in step #4.


PXE IPv6 Boot Option has disappeared from the Boot manager.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2457</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-07-19 04:40:23 +0000</bug_when>
    <thetext>We can reproduce the issue. Working on the fix.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2486</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-20 20:09:05 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2542</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-08-02 03:45:34 +0000</bug_when>
    <thetext>The issue is caused by the IPv6 policy switching after PXEv6 boot. When IP policy is changing, the IPv6 children used by PXE.UdpRead() will be destroyed. Then, PXE Stop() function is called to uninstall the devicePath protocol, which leads to the IPv6 PXE boot option goes missing.

Through the above analysis, the IP driver should take the responsibility for the upper layer network stacks recovery by using ConnectController().

Commit version:
https://github.com/tianocore/edk2/commit/9ef28ed3126f3890174ee966c6d48246b80b8ab8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>184</bug_id>
          
          <creation_ts>2016-10-26 21:42:05 +0000</creation_ts>
          <short_desc>UefiPxeBcDxe: Add error handling logic for the case when AllocateZeroPool() returns NULL</short_desc>
          <delta_ts>2016-11-10 00:01:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Zhang, Lubo">lubo.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>lubo.zhang</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>745</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-10-26 21:42:05 +0000</bug_when>
    <thetext>In file NetworkPkg\UefiPxeBcDxe\PxeBcDhcp6.c - line 1327, error handling logic needs to be added to handle the case when memory allocation fails.

1326  if (Cache6-&gt;OptList[PXEBC_DHCP6_IDX_DNS_SERVER] != NULL) {
1327    Private-&gt;DnsServer = AllocateZeroPool (NTOHS (Cache6-&gt;OptList[PXEBC_DHCP6_IDX_DNS_SERVER]-&gt;OpLen));
1328    CopyMem (Private-&gt;DnsServer, Cache6-&gt;OptList[PXEBC_DHCP6_IDX_DNS_SERVER]-&gt;Data, sizeof (EFI_IPv6_ADDRESS));
1329  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>750</commentid>
    <comment_count>1</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2016-10-27 03:43:22 +0000</bug_when>
    <thetext>Add check logic for memory allocation 

    if (Private-&gt;DnsServer == NULL) {
      return EFI_OUT_OF_RESOURCES;
    }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>758</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-27 10:15:16 +0000</bug_when>
    <thetext>Assign to module owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>869</commentid>
    <comment_count>3</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2016-11-10 00:01:38 +0000</bug_when>
    <thetext>Committed: SHA-1: 92ec8772df33f3c758763adcaf42fd42c8da812c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>547</bug_id>
          
          <creation_ts>2017-05-17 07:55:04 +0000</creation_ts>
          <short_desc>Variable return size issue in BmCollectKeyOptions()</short_desc>
          <delta_ts>2017-05-23 00:41:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>steven.shi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2047</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-05-17 07:55:04 +0000</bug_when>
    <thetext>In MdeModulePkg/Library/UefiBootManagerLib/BmHotkey.c, BmCollectKeyOptions() function, line 168, the returned variable size in KeyOptionSize from GetEfiGlobalVariable2 might not be same as EFI_BOOT_MANAGER_KEY_OPTION (in my qemu test, it only return 15). 

KeyOption points to a buffer holding the content of Key####.
So its size is smaller than EFI_BOOT_MANAGER_KEY_OPTION.
Old code to assign value to KeyOption-&gt;OptionNumber modifies
the memory outside of the KeyOption buffer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2086</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-18 20:16:41 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2133</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-05-23 00:41:27 +0000</bug_when>
    <thetext>pushed @ UDK2017 7ecf635971dbc6119e32ca428db59d06ababeba1
pushed @ master 7320b8ed1879b31657a8d6a62e6cd0ff1f645754</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>927</bug_id>
          
          <creation_ts>2018-04-09 12:46:30 +0000</creation_ts>
          <short_desc>[OpenSSL] Update version to 1.1.0h or 1.0.2o to include fix for CVE-2018-0739 issue</short_desc>
          <delta_ts>2018-04-15 09:35:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="P J P">prasad</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3838</commentid>
    <comment_count>0</comment_count>
    <who name="P J P">prasad</who>
    <bug_when>2018-04-09 12:46:30 +0000</bug_when>
    <thetext>CVE-2018-0739 openssl: Handling of crafted recursive ASN.1 structures can cause a stack overflow and resulting denial of service

OpenSSL versions 1.0.2 and 1.1.0 have a vulnerability in the handling of recursive ASN.1 structures. Constructed ASN.1 types with a recursive definition (such as can be found in PKCS7) could eventually exceed the stack given malicious input with excessive recursion. This could result in a Denial Of Service attack. There are no such structures used within SSL/TLS that come from untrusted sources so this is considered safe.

External References:
  -&gt; https://www.openssl.org/news/secadv/20180327.txt

Upstream Patches:
  -&gt; https://git.openssl.org/gitweb/?p=openssl.git;a=commitdiff;h=2ac4c6f7b2b2af20c0e2b0ba05367e454cd11b33
  -&gt; https://git.openssl.org/gitweb/?p=openssl.git;a=commitdiff;h=9310d45087ae546e27e61ddf8f6367f29848220d

Reference:
  -&gt; https://bugzilla.redhat.com/show_bug.cgi?id=1561266

Upstream OpenSSL versions 1.1.0h and 1.0.2o seem to have these fixes included.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3866</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-12 20:11:16 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3878</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-13 16:08:44 +0000</bug_when>
    <thetext>[edk2] [PATCH v2 0/2] Update OpenSSL version to 1.1.0h
https://lists.01.org/pipermail/edk2-devel/2018-April/023722.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3879</commentid>
    <comment_count>3</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2018-04-15 09:35:03 +0000</bug_when>
    <thetext>Fixed with commit: b85b20fba42e25ff658ed1a470250d530c189027</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>462</bug_id>
          
          <creation_ts>2017-04-06 02:15:15 +0000</creation_ts>
          <short_desc>Python-2.7.2 build error with VS2013x86: The code page of marshal.c is wrong.</short_desc>
          <delta_ts>2017-04-09 20:36:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="gray.wang">wt180250</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>AppPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1748</commentid>
    <comment_count>0</comment_count>
      <attachid>48</attachid>
    <who name="gray.wang">wt180250</who>
    <bug_when>2017-04-06 02:15:15 +0000</bug_when>
    <thetext>Created attachment 48
The corrected file.

Python-2.7.2 build error with VS2013x86:

AppPkg\Applications\Python\PyMod-2.7.2\Python\marshal.c(1001) : error C2220: 警告被视为错误 - 没有生成“object”文件
AppPkg\Applications\Python\PyMod-2.7.2\Python\marshal.c(1001) : warning C4819: 该文件包含不能在当前代码页(936)中表示的字符。请将该文件保存为 Unicode 格式以防止数据丢失</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1757</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-06 20:10:38 +0000</bug_when>
    <thetext>Bug scrub: Assign to package owner to clean up the non ascii characters in the file.
Assign to someone in China to reproduce it first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1761</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-04-06 20:16:52 +0000</bug_when>
    <thetext>Line 1292 of Marchal .c has a non ASCII &apos;-&apos; character in it.

1292: ValueError exception is raised — but garbage data will also be written\n\

This may be causing this build failure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1765</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-04-06 22:10:42 +0000</bug_when>
    <thetext>(In reply to gray.wang from comment #0)
&gt; Created attachment 48 [details]
&gt; The corrected file.
&gt; 
&gt; Python-2.7.2 build error with VS2013x86:
&gt; 
&gt; AppPkg\Applications\Python\PyMod-2.7.2\Python\marshal.c(1001) : error C2220:
&gt; 警告被视为错误 - 没有生成“object”文件
&gt; AppPkg\Applications\Python\PyMod-2.7.2\Python\marshal.c(1001) : warning
&gt; C4819: 该文件包含不能在当前代码页(936)中表示的字符。请将该文件保存为 Unicode 格式以防止数据丢失

Thanks Gary for the corrected file. I will help to create a patch and send it for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1782</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-04-09 20:36:19 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/1ea946d0f9ea7de963545fbe93cc7f781c03d0b2</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>48</attachid>
            <date>2017-04-06 02:15:15 +0000</date>
            <delta_ts>2017-04-06 02:15:15 +0000</delta_ts>
            <desc>The corrected file.</desc>
            <filename>marshal.c</filename>
            <type>application/octet-stream</type>
            <size>41255</size>
            <attacher name="gray.wang">wt180250</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>827</bug_id>
          
          <creation_ts>2017-12-26 20:59:16 +0000</creation_ts>
          <short_desc>VarCheckPcdLib: A logic flaw in alignment of mVarCheckPcdBin</short_desc>
          <delta_ts>2018-01-01 21:00:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3276</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2017-12-26 20:59:16 +0000</bug_when>
    <thetext>In the file MdeModulePkg/Library/VarCheckPcdLib/VarCheckPcdLibNullClass.c:

  Line 201, the code will shift mVarCheckPcdBin to 8-byte aligned address

    PcdVariable = (VAR_CHECK_PCD_VARIABLE_HEADER *) HEADER_ALIGN (mVarCheckPcdBin);

  But at line 436, the memory allocation doesn&apos;t take the alignment into account.

    mVarCheckPcdBin = AllocateRuntimeCopyPool (VarCheckPcdBinSize, VarCheckPcdBin);


The problem here is that

  a. if the AllocateRuntimeCopyPool always returned 8-byte aligned memory, there&apos;s no need to do alignment again at line 201. And an ASSERT is enough to do a sanity check.
  b. if we don&apos;t trust the alignment of memory returned by AllocateRuntimeCopyPool, the code at line 436 should take the alignment into account. Then there&apos;s no need to shift the mVarCheckPcdBin to aligned address at line 201. And if mVarCheckPcdBin is not aligned, doing a HEADER_ALIGN at line 201 just get a wrong start of PcdVariable, because the data copied before doesn&apos;t take alignment into account.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3277</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2017-12-26 21:08:21 +0000</bug_when>
    <thetext>A correction: HEADER_ALIGN is 4-byte aligned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3286</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-28 19:04:53 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3296</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-01-01 20:57:49 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/compare/bb207f6cda96...cd16355bbf32.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3297</commentid>
    <comment_count>4</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-01-01 21:00:12 +0000</bug_when>
    <thetext>Synced master https://github.com/tianocore/edk2/compare/bb207f6cda96...cd16355bbf32 to UDK2018 branch https://github.com/tianocore/edk2/compare/f04d0a9ad776...6f992a1cd4b0.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>738</bug_id>
          
          <creation_ts>2017-10-19 02:30:21 +0000</creation_ts>
          <short_desc>FspWrapperSecCore linking fails with GCC</short_desc>
          <delta_ts>2018-04-09 21:17:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard Max</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mikko Ylinen">mikko.ylinen</reporter>
          <assigned_to>david.wei</assigned_to>
          <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFspWrapperPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2899</commentid>
    <comment_count>0</comment_count>
    <who name="Mikko Ylinen">mikko.ylinen</who>
    <bug_when>2017-10-19 02:30:21 +0000</bug_when>
    <thetext>I&apos;ve tried an FSP build using https://firmware.intel.com/sites/default/files/MinnowBoard_MAX-Rel_0_97-ReleaseNotes.txt but with GCC (7.x), MINNOW2_FSP_BUILD = TRUE.

There are few -Werror failures triggered by new GCC warnings (bool-compare, pointer-compare) but I can get rid of those easily. This bug is not about those.

The problem I was not able to resolve is the linking failure in FspWrapperSecCore:

&quot;x86_64-refkit-linux-gcc&quot; -o $WORKSPACE/Build/Vlv2TbltDevicePkg/DEBUG_GCC5/IA32/IntelFspWrapperPkg/FspWrapperSecCore/FspWrapperSecCore/DEBUG/FspWrapperSecCore.dll -fuse-ld=bfd -fuse-ld=bfd -nostdlib -Wl,-n,-q,--gc-sections -z common-page-size=0x40 -no-pie -Wl,--entry,_ModuleEntryPoint -u _ModuleEntryPoint -Wl,-Map,$WORKSPACE/Build/Vlv2TbltDevicePkg/DEBUG_GCC5/IA32/IntelFspWrapperPkg/FspWrapperSecCore/FspWrapperSecCore/DEBUG/FspWrapperSecCore.map -flto -Os -Wl,-m,elf_i386,--oformat=elf32-i386 -Wl,--start-group,@$WORKSPACE/Build/Vlv2TbltDevicePkg/DEBUG_GCC5/IA32/IntelFspWrapperPkg/FspWrapperSecCore/FspWrapperSecCore/OUTPUT/static_library_files.lst,--end-group -g -fshort-wchar -fno-builtin -fno-strict-aliasing -Wall -Werror -Wno-error=bool-compare -Wno-error=pointer-compare -Wno-array-bounds -ffunction-sections -fdata-sections -fno-stack-protector -include AutoGen.h -fno-common -DSTRING_ARRAY_NAME=FspWrapperSecCoreStrings -m32 -march=i586 -malign-double -fno-stack-protector -D EFI32 -fno-asynchronous-unwind-tables -fno-PIE -no-pie -Wno-address -flto -Os -Wno-missing-braces -DMINNOW2_FSP_BUILD  -DENBDT_PF_ENABLE=1           -DCLKGEN_CONFIG_EXTRA=1  -DNOCS_S3_SUPPORT -DSATA_SUPPORT=1 -DPCIESC_SUPPORT=1   -fuse-ld=bfd -fuse-ld=bfd -fuse-ld=bfd -fuse-ld=bfd -fuse-ld=bfd -fuse-ld=bfd -fuse-ld=bfd -Wl,--defsym=PECOFF_HEADER_SIZE=0x220 -Wl,--script=$WORKSPACE/recipe-sysroot-native/usr/bin/edk2_basetools/BaseTools/Scripts/GccBase.lds -Wno-error

$WORKSPACE/recipe-sysroot-native/usr/bin/x86_64-refkit-linux/../../libexec/x86_64-refkit-linux/gcc/x86_64-refkit-linux/7.2.0/ld.bfd: warning: cannot find entry symbol _ModuleEntryPoint; not setting start address

&quot;x86_64-refkit-linux-objcopy&quot;  $WORKSPACE/Build/Vlv2TbltDevicePkg/DEBUG_GCC5/IA32/IntelFspWrapperPkg/FspWrapperSecCore/FspWrapperSecCore/DEBUG/FspWrapperSecCore.dll

x86_64-refkit-linux-objcopy: error: the input file &apos;$WORKSPACE/Build/Vlv2TbltDevicePkg/DEBUG_GCC5/IA32/IntelFspWrapperPkg/FspWrapperSecCore/FspWrapperSecCore/DEBUG/FspWrapperSecCore.dll&apos; has no sections


I&apos;m building using Yocto Project buildsystem by adapting its &apos;ovmf&apos; build recipe. $WORKSPACE above is the path to my workspace in, I&apos;ve cleaned it out for readability.

The build environment should be fine as this builds OK with MINNOW2_FSP_BUILD = FALSE.

Sources:
edk2: github.com/tianocore/edk2.git, branch=UDK2017
edk2-platforms: github.com/tianocore/edk2-platforms.git, branch=devel-MinnowBoardMax-UDK2017
FSP:  github.com/IntelFsp/FSP.git, branch=BayTrail
Binary Objects: https://firmware.intel.com/sites/default/files/MinnowBoard_MAX-0.97-Binary.Objects.zip
BCT: v3.3.1
iasl: 20170929 release</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2904</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-19 22:28:51 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner to investigate first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3841</commentid>
    <comment_count>2</comment_count>
    <who name="">david.wei</who>
    <bug_when>2018-04-09 21:17:18 +0000</bug_when>
    <thetext>Please use GCC 5. GCC 7 has not been verified yet.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>287</bug_id>
          
          <creation_ts>2016-12-06 19:51:10 +0000</creation_ts>
          <short_desc>MinnowBoard Max platform (Vlv2TbltDevicePkg) has no Readme.md file</short_desc>
          <delta_ts>2017-07-19 15:39:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian Richardson (Intel)">brian.richardson</reporter>
          <assigned_to name="mang.guo@intel.com">mang.guo</assigned_to>
          <cc>david.wei</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>Vlv2TbltDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1123</commentid>
    <comment_count>0</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2016-12-06 19:51:10 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/tree/master/Vlv2TbltDevicePkg

Add a Readme.md file for basic platform documentation &amp; pointers to required binaries on firmware.intel.com.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1145</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-08 20:26:05 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2443</commentid>
    <comment_count>2</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-07-14 17:29:46 +0000</bug_when>
    <thetext>Update please</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2446</commentid>
    <comment_count>3</comment_count>
    <who name="mang.guo@intel.com">mang.guo</who>
    <bug_when>2017-07-17 07:49:17 +0000</bug_when>
    <thetext>Added ReadMe.MD in 
https://github.com/tianocore/edk2-platforms/tree/minnowboard-max-udk2015

Binaries from firmware.intel.com can not work with code from
https://github.com/tianocore/edk2/tree/master/Vlv2TbltDevicePkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2447</commentid>
    <comment_count>4</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-07-17 14:50:07 +0000</bug_when>
    <thetext>Thanks for adding the file, but I don&apos;t think this is the correct format. I think you can give a description to the project and links to documentation on firmware.intel.com rather than putting partial build notes in the readme.md. 

The requirement is to provide basic documentation, so there is no need to duplicate build instructions or other data the user can get from TianoCore wiki or firmware.intel.com.

Suggested text below ...

MINNOWBOARD MAX/TURBOT PLATFORM FIRMWARE

This UEFI firmware project is designed for the open hardware MinnowBoard Max/Turbot platforms using the Intel(R) Atom(tm) Processor E3800 Series, based on UDK2015 core packages.

http://minnowboard.org/ -- Platform Information, including schematics and information on where to purchase boards. 

https://firmware.intel.com/projects/minnowboard-max -- Release notes, pre-built release/debug binaries, build instructions, and binary objects required to compile firmware.

MAINTAINERS
* david.wei@intel.com
* mang.guo@intel.com
* vincent.zimmer@intel.com
* mike.wu@intel.com
* shifeix.a.lu@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2458</commentid>
    <comment_count>5</comment_count>
    <who name="mang.guo@intel.com">mang.guo</who>
    <bug_when>2017-07-19 06:00:58 +0000</bug_when>
    <thetext>Thanks for the comments. Already modified the ReadMe.md file in edk2-platforms minnowboard-max-udk2015 branch.

https://github.com/tianocore/edk2-platforms/tree/minnowboard-max-udk2015</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2464</commentid>
    <comment_count>6</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-07-19 15:39:09 +0000</bug_when>
    <thetext>Thanks. Marked as RESOLVED.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>116</bug_id>
          
          <creation_ts>2016-09-11 21:50:40 +0000</creation_ts>
          <short_desc>UefiCpuPkg/MpInitLib: Needn&apos;t to wait PcdCpuApInitTimeOutInMicroSeconds if PcdCpuMaxLogicalProcessorNumber found</short_desc>
          <delta_ts>2016-11-29 04:12:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeff Fan">vanjeff_919</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vanjeff_919</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>481</commentid>
    <comment_count>0</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-09-11 21:50:40 +0000</bug_when>
    <thetext>When we do the first time wake up APs, we will wait one specified period by PcdCpuApInitTimeOutInMicroSeconds because we do not know the actually number of processor. 

But on most desktops, the number of processor is fixed to set to PcdCpuMaxLogicalProcessorNumber. We needn&apos;t to wait for timeout once we found the processor number is already up to PcdCpuMaxLogicalProcessorNumber. Thus, platform needn&apos;t to reduce PcdCpuApInitTimeOutInMicroSeconds and also could get the boot performance improvement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>516</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-22 20:25:45 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1016</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-24 06:21:18 +0000</bug_when>
    <thetext>working on this</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1023</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-24 16:00:39 +0000</bug_when>
    <thetext>posted
[edk2] [PATCH v2 0/3] UefiCpuPkg, OvmfPkg: set maximum (V)CPU count dynamically
https://lists.01.org/pipermail/edk2-devel/2016-November/005207.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1032</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-28 06:24:29 +0000</bug_when>
    <thetext>Related commit:

bb767506b265 UefiCpuPkg/PiSmmCpuDxeSmm: handle dynamic
             PcdCpuMaxLogicalProcessorNumber

(more patches are necessary, TBD)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1034</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-28 08:09:53 +0000</bug_when>
    <thetext>posted
[edk2] [PATCH v3 0/2] UefiCpuPkg, OvmfPkg: set maximum (V)CPU count dynamically
https://lists.01.org/pipermail/edk2-devel/2016-November/005276.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1037</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-29 04:12:49 +0000</bug_when>
    <thetext>Fixed in commit 6e1987f19af7 (&quot;UefiCpuPkg/MpInitLib: wait no longer than necessary for initial AP startup&quot;).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>391</bug_id>
          
          <creation_ts>2017-02-20 01:21:09 +0000</creation_ts>
          <short_desc>UiApp could use APIs in EfiBootManagerLib to manipulate load options.</short_desc>
          <delta_ts>2017-03-01 02:24:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1478</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-02-20 01:21:09 +0000</bug_when>
    <thetext>It&apos;s to avoid code duplication and potential bugs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1515</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-23 19:12:22 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1555</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-03-01 02:24:51 +0000</bug_when>
    <thetext>Fix this issue in Trunk:
https://github.com/tianocore/edk2/commit/bdc8cb0d3b8dc53fdf1b14af4245432d2bfb8115</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>308</bug_id>
          
          <creation_ts>2016-12-25 21:21:54 +0000</creation_ts>
          <short_desc>[SourceLevelDebugPkg] Support AP function debugging in PEI phase</short_desc>
          <delta_ts>2019-08-27 20:17:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeff Fan">vanjeff_919</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SourceLevelDebugPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1211</commentid>
    <comment_count>0</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-12-25 21:21:54 +0000</bug_when>
    <thetext>Current SecPeiDebugAgentLib does not support AP function debugging while DxeDebugAgentLib supports AP function debugging.

Because we already added CpuMpPei to produce CPU MP PPI, we need to add AP function debugging on PEI phase also.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1260</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-05 19:17:31 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2400</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2017-07-06 03:16:50 +0000</bug_when>
    <thetext>change owner to Hao.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9326</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:17:18 +0000</bug_when>
    <thetext>This BZ is a spin-off from commit 43c9fdcccd32 (&quot;UefiCpuPkg/DxeMpInitLib: Support source debugging on AP function&quot;, 2016-12-28).

Honestly I doubt this will ever be resolved -- nothing has been done in 2+ years. I think we should close it as WONTFIX. It&apos;s better to reject low priority feature requests than allowing them to languish forever.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>495</bug_id>
          
          <creation_ts>2017-04-20 01:13:16 +0000</creation_ts>
          <short_desc>BaseTools: VolInfo --hash option report failure when the OPENSSL_PATH has space characters</short_desc>
          <delta_ts>2017-04-27 09:41:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1875</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-20 01:13:16 +0000</bug_when>
    <thetext>current the VOlInfo --hash option report error when the OPENSSL_PATH has space characters.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1876</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-20 01:14:01 +0000</bug_when>
    <thetext>Assign to module owner to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1953</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-27 09:41:40 +0000</bug_when>
    <thetext>UDK2017: SHA-1: 3b43e9c06abacefa3e3fc0e2801c588323cfb1bf
Trunk: SHA-1: 3337eefb49d9053cfd75028ab74dad0cd7acd045</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>43</bug_id>
          
          <creation_ts>2016-07-20 20:53:39 +0000</creation_ts>
          <short_desc>Incorrect MBR primary partition numbering in PartitionInstallMbrChildHandles()</short_desc>
          <delta_ts>2016-10-19 22:10:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>68</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 20:53:39 +0000</bug_when>
    <thetext>UEFI spec says that MBR primary partitions should be numbered by their MBR partition table entry index [1..4]. Current implementation gives primary partitions consecutive numbers, skipping type 0x00, type 0xEE, and zero sized partitions. Implementation should give partitions numbers based on entry index. I.e. Index + 1 instead of PartitionNumber++.


lersek commented on Feb 8
MdeModulePkg/Universal/Disk/PartitionDxe


niruiyu commented on Feb 14
I didn’t find clear statement in UEFI spec to require the partition number equal to table entry index. Can you kindly point it for me?

Regards,
Ray

From: Iliya Peregoudov [mailto:notifications@github.com]
Sent: Monday, February 8, 2016 6:43 PM
To: tianocore/edk2 &lt;edk2@noreply.github.com&gt;
Subject: [edk2] Incorrect MBR primary partition numbering in PartitionInstallMbrChildHandles() (#50)


UEFI spec says that MBR primary partitions should be numbered by their MBR partition table entry index [14] Current implementation gives primary partitions consecutive numbers, skipping type 0x00, type 0xEE, and zero sized partitions Implementation should give partitions numbers based on entry index Ie Index + 1 instead of PartitionNumber++

—
Reply to this email directly or view it on GitHub&lt;#50&gt;.


 iliyap commented on Feb 14
UEFI Specification 2.3.1 Errata D, Section 9.3.6.1, first paragraph:


Partitions are numbered according to their entry in their respective partition table, starting with 1.


Current edk2 code for GPT partitions do number partitions according to their index in partition table. Code for MBR primary partitions doesn’t but I think should.






От: Ruiyu Ni
Отправлено: ‎воскресенье‎, ‎14‎ ‎февраля‎ ‎2016‎ г. ‎12‎:‎49
Кому: tianocore/edk2
Копия: Iliya Peregoudov




I didn’t find clear statement in UEFI spec to require the partition number equal to table entry index. Can you kindly point it for me?

Regards,
Ray

From: Iliya Peregoudov [mailto:notifications@github.com]
Sent: Monday, February 8, 2016 6:43 PM
To: tianocore/edk2 &lt;edk2@noreply.github.com&gt;
Subject: [edk2] Incorrect MBR primary partition numbering in PartitionInstallMbrChildHandles() (#50)


UEFI spec says that MBR primary partitions should be numbered by their MBR partition table entry index [14] Current implementation gives primary partitions consecutive numbers, skipping type 0x00, type 0xEE, and zero sized partitions Implementation should give partitions numbers based on entry index Ie Index + 1 instead of PartitionNumber++



niruiyu commented on Feb 17
How about the patch below?

UEFI Spec 2.3.1.D Section 9.3.5.1 says Partitions are numbered
according to their entry in their respective partition table,
starting with 1.
Update the code for MBR partition to follow this rule.

Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Cc: Feng Tian &lt;feng.tian@intel.com&gt;
---
 MdeModulePkg/Universal/Disk/PartitionDxe/Mbr.c | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

diff --git a/MdeModulePkg/Universal/Disk/PartitionDxe/Mbr.c b/MdeModulePkg/Universal/Disk/PartitionDxe/Mbr.c
index 4b0159c..1946334 100644
--- a/MdeModulePkg/Universal/Disk/PartitionDxe/Mbr.c
+++ b/MdeModulePkg/Universal/Disk/PartitionDxe/Mbr.c
@@ -12,7 +12,7 @@
         the legacy boot strap code.

 Copyright (c) 2014, Hewlett-Packard Development Company, L.P.&lt;BR&gt;
-Copyright (c) 2006 - 2013, Intel Corporation. All rights reserved.&lt;BR&gt;
+Copyright (c) 2006 - 2016, Intel Corporation. All rights reserved.&lt;BR&gt;
 This program and the accompanying materials
 are licensed and made available under the terms and conditions of the BSD License
 which accompanies this distribution.  The full text of the license may be found at
@@ -136,7 +136,6 @@ PartitionInstallMbrChildHandles (
   HARDDRIVE_DEVICE_PATH     HdDev;
   HARDDRIVE_DEVICE_PATH     ParentHdDev;
   EFI_STATUS                Found;
-  UINT32                    PartitionNumber;
   EFI_DEVICE_PATH_PROTOCOL  *DevicePathNode;
   EFI_DEVICE_PATH_PROTOCOL  *LastDevicePathNode;
   UINT32                    BlockSize;
@@ -192,8 +191,6 @@ PartitionInstallMbrChildHandles (
     }
   }

-  PartitionNumber = 1;
-
   ZeroMem (&amp;HdDev, sizeof (HdDev));
   HdDev.Header.Type     = MEDIA_DEVICE_PATH;
   HdDev.Header.SubType  = MEDIA_HARDDRIVE_DP;
@@ -223,7 +220,7 @@ PartitionInstallMbrChildHandles (
         continue;
       }

-      HdDev.PartitionNumber = PartitionNumber ++;
+      HdDev.PartitionNumber = Index + 1;
       HdDev.PartitionStart  = UNPACK_UINT32 (Mbr-&gt;Partition[Index].StartingLBA);
       HdDev.PartitionSize   = UNPACK_UINT32 (Mbr-&gt;Partition[Index].SizeInLBA);
       CopyMem (HdDev.Signature, &amp;(Mbr-&gt;UniqueMbrSignature[0]), sizeof (Mbr-&gt;UniqueMbrSignature));
@@ -252,6 +249,7 @@ PartitionInstallMbrChildHandles (
     // It&apos;s an extended partition. Follow the extended partition
     // chain to get all the logical drives
     //
+    Index             = 0;
     ExtMbrStartingLba = 0;

     do {
@@ -277,7 +275,7 @@ PartitionInstallMbrChildHandles (
         ExtMbrStartingLba = UNPACK_UINT32 (Mbr-&gt;Partition[0].StartingLBA);
         continue;
       }
-      HdDev.PartitionNumber = PartitionNumber ++;
+      HdDev.PartitionNumber = ++Index;
       HdDev.PartitionStart  = UNPACK_UINT32 (Mbr-&gt;Partition[0].StartingLBA) + ExtMbrStartingLba + ParentHdDev.PartitionStart;
       HdDev.PartitionSize   = UNPACK_UINT32 (Mbr-&gt;Partition[0].SizeInLBA);
       if ((HdDev.PartitionStart + HdDev.PartitionSize - 1 &gt;= ParentHdDev.PartitionStart + ParentHdDev.PartitionSize) ||
-- 
2.7.0.windows.1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>440</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-18 20:13:14 +0000</bug_when>
    <thetext>Bug Scrub: Need owner to check whether it&apos;s a real issue first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>449</commentid>
    <comment_count>2</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-24 02:07:33 +0000</bug_when>
    <thetext>Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>647</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-19 22:10:14 +0000</bug_when>
    <thetext>The fix was already in commit e665a69d9d222cceb925f6e2423e75ed7adabd42.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>414</bug_id>
          
          <creation_ts>2017-03-02 01:32:38 +0000</creation_ts>
          <short_desc>Overflowed array index Used</short_desc>
          <delta_ts>2017-04-07 03:39:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1558</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-03-02 01:32:38 +0000</bug_when>
    <thetext>[Issue Details]
File Path: NetworkPkg/Ip6Dxe/Ip6Icmp.c
Ip6GetPrefix()
Line No 497
   Prefix-&gt;Addr[Byte] = (UINT8) (Value &amp; Mask);
[Issue]
As Addr is an Array of Addr[16];
Then the Range will be Prefix-&gt;Addr[0-15]

Byte is used as array index (0 to 15 is valid range), that may be assigned by &gt;=16
If Byte is &gt;=16 , Leading towards Accessing Invalid Location

[Changes Proposed]
VOID
Ip6GetPrefix (
  IN     UINT8              PrefixLength,
  IN OUT EFI_IPv6_ADDRESS   *Prefix
  )
{
...
...
487    Byte = (UINT8) (PrefixLength / 8);
       +   if (Byte &gt;= 16) {
       +      return;
       +   }
...
...
}
Please Update if this can be addressed.

Regards,
karunakar.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1562</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-02 19:04:25 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1570</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-02 20:50:46 +0000</bug_when>
    <thetext>
Identify it&apos;s not the bug since the case won&apos;t happen according the code logic.

Analysis:

Byte is impossible &gt;=16 since the we have the below condition check:


  if (PrefixLength &gt;= IP6_PREFIX_MAX) {   /// PrefixLength must &lt; 128
    return ;
  }

  Byte  = (UINT8) (PrefixLength / 8);  /// So, here Byte must &lt; 16


Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1645</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-20 03:45:03 +0000</bug_when>
    <thetext>No commit.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>777</bug_id>
          
          <creation_ts>2017-11-13 15:40:59 +0000</creation_ts>
          <short_desc>Environment variables like CWD and LastError cannot be created using the set command</short_desc>
          <delta_ts>2018-08-16 04:06:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jim Dailey">jim_dailey</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3046</commentid>
    <comment_count>0</comment_count>
    <who name="Jim Dailey">jim_dailey</who>
    <bug_when>2017-11-13 15:40:59 +0000</bug_when>
    <thetext>The EfiShellSetEnv function in file ShellProtocol.c does a case-insensitive comparison of the variable to be created against a list of shell read-only variables.

This comparison should be case-sensitive, since the shell specification states: &quot;Each environment variable has a case-sensitive name...&quot;.

The current code prohibits the user from creating an environment variable named CWD, for example, even though that is a different variable than the read-only shell variable named &quot;cwd&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3090</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-16 19:10:40 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4595</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-16 04:06:30 +0000</bug_when>
    <thetext>fixed @ 0e967dff0642cedaef7bc63e5743f4b081a1db9a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>152</bug_id>
          
          <creation_ts>2016-10-17 11:12:27 +0000</creation_ts>
          <short_desc>Including .obj in .inf for module fails if Build/ folder does not already have previous successful build</short_desc>
          <delta_ts>2016-11-28 21:50:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rusty Coleman">Jody.R.Coleman</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>611</commentid>
    <comment_count>0</comment_count>
    <who name="Rusty Coleman">Jody.R.Coleman</who>
    <bug_when>2016-10-17 11:12:27 +0000</bug_when>
    <thetext>I have been listing a .obj in the [Sources] heading for a UEFI_DRIVER module.  This .obj is created from a binary using &quot;objcopy&quot;, and the build tool is linking this in properly.

However, I just created a new workspace and noticed this module was failing to build.  It appears that if you list a .obj in a .inf, on a &quot;fresh&quot; build, this will fail giving the error
&quot;unable to open &lt;firstCfile.obj&gt; in OUTPUT&quot;

To resolve, simply comment out the .obj in the .inf, build (expect linker error), then remove comment, and build again.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>742</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-26 21:10:17 +0000</bug_when>
    <thetext>bug scrub: current this case is not in our support scope.  We may report an reasonable error message .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>813</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-11-02 21:05:09 +0000</bug_when>
    <thetext>bug scrub: Yonghong send mail to submitter for confirm it is out of support scope.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>833</commentid>
    <comment_count>3</comment_count>
    <who name="Rusty Coleman">Jody.R.Coleman</who>
    <bug_when>2016-11-03 09:46:54 +0000</bug_when>
    <thetext>
Thanks for the reply.  This may be something that could be easy to add support for, and would be useful to anyone needing to include binary blobs in code.  The other method that I know of (&apos;xxd in linux&apos;) produces a .c file with the binary content, but makes a file that is 6x larger than the original.  Using the &apos;objcopy&apos; method only partially enlarges the original binary file.

Since this does work after a full build (without including the .obj, then including it after full build completes), then I would think this would be straightforward to add.  Either way, I have a WA so it&apos;s a nice-to-have and not POR.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>961</commentid>
    <comment_count>4</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-11-16 20:05:01 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1035</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-28 21:50:00 +0000</bug_when>
    <thetext>Yes, it is easy for coding. But different toolchain generate difference, so if we simply link it, it may cause some unexpected error, for example, user first use VS2013 to build, then he change to VS2015 to build again, so it is not trustable.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>430</bug_id>
          
          <creation_ts>2017-03-20 18:56:36 +0000</creation_ts>
          <short_desc>CoreInitializeMemoryAttributesTable uses TPL_CALLBACK - 1</short_desc>
          <delta_ts>2018-11-07 09:32:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1646</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-03-20 18:56:36 +0000</bug_when>
    <thetext>I don&apos;t think using a non standard TPL makes any sense here.  If TPL_CALLBACK was used, this event would be scheduled during the ReadyToBoot list.   Since there is a call from the memory manager to republish the MAT on all Runtime memory requests, it just means possibly a couple of more republishes of the MAT.  Small price to pay to prevent this code being used as an example to &quot;RUN LAST.&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1676</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-23 20:26:50 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1682</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-03-24 04:15:55 +0000</bug_when>
    <thetext>It is not intended to be used as an example. Only DxeCore has this capability to use non standard TPL by CoreCreateEventInternal(), another case is in CoreInitializeTimer() with TPL_HIGH_LEVEL - 1 for timer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5526</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-11-07 09:32:58 +0000</bug_when>
    <thetext>b2305dd277ba678027ed67f9a34c41c6a2eb519c has updated TPL_CALLBACK - 1 to TPL_CALLBACK for this case.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>703</bug_id>
          
          <creation_ts>2017-09-08 12:23:33 +0000</creation_ts>
          <short_desc>PatchCheck.py: please verify length of added C lines</short_desc>
          <delta_ts>2020-05-05 18:50:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2712</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-08 12:23:33 +0000</bug_when>
    <thetext>Please extend PatchCheck.py so that it verifies the patch against the line length limit given in the coding style spec.

Only new (= added) lines should be checked, and I think at first the check should only cover C source code (.h and .c files).

Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2730</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-09-13 21:04:38 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5478</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:36:46 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12379</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 18:50:24 +0000</bug_when>
    <thetext>As of commit c635a56384bf (&quot;OvmfPkg/MptScsiDxe: Reset device on ExitBootServices()&quot;, 2020-05-05), the check_added_line() method still doesn&apos;t check the line length against the CCS-specified maximum. I guess this is never going to be addressed (it hasn&apos;t been implemented in 2.5 years). Closing as WONTFIX. :/</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>169</bug_id>
          
          <creation_ts>2016-10-24 22:50:06 +0000</creation_ts>
          <short_desc>Missing EFIAPI for DumpHex and CatSDumpHex</short_desc>
          <delta_ts>2016-11-10 22:00:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>706</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-24 22:50:06 +0000</bug_when>
    <thetext>UefiShellCommandLib provides two HEX dump functions DumpHex and CatSDumpHex but both don&apos;t have EFIAPI prefix. This will cause GCC build of Shell binary malfunction.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>773</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-27 20:16:44 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>880</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-11-10 22:00:59 +0000</bug_when>
    <thetext>pushed 667d7146501af0de63e0b28cd00dd1a5125540ad</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>909</bug_id>
          
          <creation_ts>2018-03-22 05:16:57 +0000</creation_ts>
          <short_desc>HttpDxe: missing EFI_SIGNATURE_LIST.SignatureType check in TlsConfigCertificate()</short_desc>
          <delta_ts>2018-03-28 07:19:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>siyuan.fu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3752</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-22 05:16:57 +0000</bug_when>
    <thetext>The TlsConfigCertificate() function in &quot;NetworkPkg/HttpDxe/HttpsSupport.c&quot; parses the EFI_SIGNATURE_LIST structures in EFI_TLS_CA_CERTIFICATE_VARIABLE, and passes the found EFI_SIGNATURE_DATA.SignatureData blobs to TlsConfigurationSetData() (via HttpInstance-&gt;TlsConfiguration-&gt;SetData).

The latter expects the blob to be a PEM or DER encoded X509 certificate:

  TlsConfigCertificate()      [NetworkPkg/HttpDxe/HttpsSupport.c]
    TlsConfigurationSetData() [NetworkPkg/TlsDxe/TlsConfigProtocol.c]
      TlsSetCaCertificate()   [CryptoPkg/Library/TlsLib/TlsConfig.c]
        X509_STORE_add_cert()

TlsConfigCertificate() should check whether *every* EFI_SIGNATURE_LIST.SignatureType equals &quot;gEfiCertX509Guid&quot;. Because otherwise, at least some EFI_SIGNATURE_DATA.SignatureData blobs cannot be interpreted as X509 certificates.

In the latter case, we should not reach X509_STORE_add_cert() even once -- and we should definitely not just skip SignatureType values different from &quot;gEfiCertX509Guid&quot; --, instead, we should fail the function. Which, in turn, should propagate up to EFI_HTTP_PROTOCOL.Request().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3753</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-22 05:18:07 +0000</bug_when>
    <thetext>Initially I&apos;m assinging this bug to myself, because I&apos;d like to take a stab at implementing it. If Jiaxin or Siyuan disagree with my v1 approach, I&apos;m OK if the bug is taken by one of them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3754</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-22 12:28:18 +0000</bug_when>
    <thetext>Original mailing list discussion:

[edk2] internal structure of EFI_TLS_CA_CERTIFICATE_VARIABLE
https://lists.01.org/pipermail/edk2-devel/2018-March/022995.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3755</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-22 12:40:43 +0000</bug_when>
    <thetext>Posted
[edk2] [PATCH 0/5] NetworkPkg: HTTP and TLS updates
https://lists.01.org/pipermail/edk2-devel/2018-March/023120.html
Message-Id: &lt;20180322163933.29122-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3782</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-28 07:19:29 +0000</bug_when>
    <thetext>Fixed in 699a2c30cb6e..b90c335fbbb6.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>721</bug_id>
          
          <creation_ts>2017-09-26 22:08:14 +0000</creation_ts>
          <short_desc>The DP command implementation is duplicated</short_desc>
          <delta_ts>2018-01-17 05:14:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>302</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>PerformancePkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2791</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-09-26 22:08:14 +0000</bug_when>
    <thetext>We have DP implementation on both ShellPkg\Library\UefiDpLib and PerformancePkg\Dp_App.

It is bad to duplicate the code.

We should only maintain one copy of the code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2798</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-28 20:11:20 +0000</bug_when>
    <thetext>bug scrub: assign to Jaben to investigate and discuss in community first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3434</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-17 05:11:23 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3435</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-17 05:14:04 +0000</bug_when>
    <thetext>After #302 was resolved, duplicated DP implementation was removed as well.

*** This bug has been marked as a duplicate of bug 302 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>186</bug_id>
          
          <creation_ts>2016-10-26 23:04:56 +0000</creation_ts>
          <short_desc>Dump message to show new stack base/size to help debugging when stack switched</short_desc>
          <delta_ts>2016-11-17 20:54:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeff Fan">vanjeff_919</reporter>
          <assigned_to name="Jeff Fan">vanjeff_919</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>vanjeff_919</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>747</commentid>
    <comment_count>0</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-10-26 23:04:56 +0000</bug_when>
    <thetext>There are have several places to switch stack during POST phase. If we could dump the new stack information (such base and size), it could help developer to narrow down the issue if stack crashed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>765</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-27 20:09:03 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>855</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-11-09 03:23:45 +0000</bug_when>
    <thetext>Fixed at SHA:6fb389d0a180ae4e623c39d051a3ddb38515b614..b028c1021cdfbfaa0202711f2a008c801752917f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>985</commentid>
    <comment_count>3</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-11-17 20:54:32 +0000</bug_when>
    <thetext>Additional commit at:
https://github.com/tianocore/edk2/commit/ec16deeac90e4b8014394be58a229f6aa8c493af</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>99</bug_id>
          
          <creation_ts>2016-08-11 02:12:26 +0000</creation_ts>
          <short_desc>[BaseTools] Provide the PKCS7 tool</short_desc>
          <delta_ts>2016-11-14 02:26:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>422</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-08-11 02:12:26 +0000</bug_when>
    <thetext>Provide the PKCS7 Tool to support the CertType - EFI_CERT_TYPE_PKCS7_GUID, then user can use this tool to add EFI_FIRMWARE_IMAGE_AUTHENTICATION for a binary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>423</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-11 20:18:59 +0000</bug_when>
    <thetext>Bug Scrub: Set to confirmed and assign to basetool owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>443</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-08-19 03:47:21 +0000</bug_when>
    <thetext>fix it on git cd1c96046968581cc87d306ca8b06cc97784554b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>117</bug_id>
          
          <creation_ts>2016-09-12 03:08:08 +0000</creation_ts>
          <short_desc>TcpDxe to not use EFI_D_INFO for DEBUG messages</short_desc>
          <delta_ts>2016-10-09 02:41:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sriram">sriram-s</reporter>
          <assigned_to name="Zhang, Lubo">lubo.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>lubo.zhang</cc>
    
    <cc>nagaraj-p.hegde</cc>
    
    <cc>sriram-s</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>482</commentid>
    <comment_count>0</comment_count>
    <who name="Sriram">sriram-s</who>
    <bug_when>2016-09-12 03:08:08 +0000</bug_when>
    <thetext>TcpDxe (NetworkPkg) and Tcp4Dxe (MdeModulePkg/Universal/Network) use EFI_D_INFO to log DEBUG messages, which is not desirable. There is a category EFI_D_NET that can be used to log the same messages because they relate to network IO/data flow. Please review and change the logs to use EFI_D_NET, so it becomes easy to separate/filter out debug messages from network stack versus generic EFI_D_INFO debugs.

Also, MdePkg/Include/Library/DebugLib.h documents the following:
#define DEBUG_NET       0x00004000  // SNP Driver

This comment can be generalized to cover all Network IO (includes the upper layers as well).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>515</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-22 20:24:59 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>518</commentid>
    <comment_count>2</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-22 20:27:58 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>573</commentid>
    <comment_count>3</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2016-10-09 02:41:52 +0000</bug_when>
    <thetext>SHA-1: 6859cc8b72d3c205853dd1030b143439f5b2215a

* MdePkg:Correct the comment for the DEBUG_NET

SHA-1: f3612a8d58eeb6448ab8e5f5c28c8ce6a3356c5f

* NetworkPkg: TcpDriver use EFI_D_NET for DEBUG maessage.

SHA-1: dea6914dac8ca883be4cee21b139b263b73769ec

* MdeModulePkg:TcpDriver need to use EFI_D_NET for DEBUG maessage.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>754</bug_id>
          
          <creation_ts>2017-10-27 01:33:09 +0000</creation_ts>
          <short_desc>ShellPkg/dh: PciRootBridgeIo dump output is corrupted.</short_desc>
          <delta_ts>2017-11-08 00:07:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2956</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-27 01:33:09 +0000</bug_when>
    <thetext>Shell&gt; dh -v 9b
9B: ABC45C98
PCIRootBridgeIO(ABC46440)
  ParentHandle..: ABC45998
  Segment #.....: 0
  Attributes....: 0
  Supports......: 7003F
   Type  Flag  Base              Limit             Gran
   ====  ====  ================  ================  ====   IO  :
00    0000000000003000  0000000000006FFF  00   MEM :
00    00000000C0000000  00000000D53FFFFF  20   BUS :
00    0000000000000000  0000000000000004  00


It seems some &quot;\n&quot; are missed. Expected output should be as below:

   Type  Flag  Base              Limit             Gran
   ====  ====  ================  ================  ====
   IO  : 00    0000000000003000  0000000000006FFF  00
   MEM : 00    00000000C0000000  00000000D53FFFFF  20
   BUS : 00    0000000000000000  0000000000000004  00</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2970</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-02 20:05:53 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2992</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-11-08 00:07:59 +0000</bug_when>
    <thetext>pushed @ cc05c72ef84e03d43a0244b8639e8c08336af066</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>671</bug_id>
          
          <creation_ts>2017-08-15 08:49:18 +0000</creation_ts>
          <short_desc>GCC5 linker with LTO enabled miscompiles function address reference in MpInitLib</short_desc>
          <delta_ts>2017-08-25 00:50:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=657</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
    
    <cc>steven.shi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2602</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-15 08:49:18 +0000</bug_when>
    <thetext>Please see the original report / analysis / discussion in:

[edk2] [PATCH 1/1] BaseTools/tools_def.template: revert to large code model
                   for X64/GCC5/LTO
http://mid.mail-archive.com/20170811003426.2332-2-lersek@redhat.com
https://lists.01.org/pipermail/edk2-devel/2017-August/013126.html

Quoting it here for completeness:

Several users have recently reported boot failures with OVMF. The symptoms
are: blank screen and all VCPUs pegged at 100%. Alex Williamson has found
the commit (via bisection) that exposes the issue. In this patch I&apos;ll
attempt to analyze the symptoms and fix the root problem.

(1) &quot;UefiCpuPkg/Library/MpInitLib&quot; is an IA32/X64 library instance that
    provides multiprocessing services. It is built into the CpuMpPei
    module (for the PEI phase) and the CpuDxe module (for the DXE and BDS
    phases). When either of these modules starts up during boot, it
    briefly boots up all of the CPUs, perfoms some counting /
    synchronization, and then all the APs (application processors) are
    quiesced until further work arrives.

    The APs boot in real mode, and need assembly language init code (a
    &quot;reset vector&quot;) that gradually takes them into 64-bit mode, before
    they can call back into normal C code. The reset vector code is
    assembled at build time, but it is copied as data under 1MB (for real
    mode execution by the APs) during boot, whenever CpuMpPei or CpuDxe
    launches.

    Part of the reset vector code is FPU initialization. The reset vector
    in &quot;UefiCpuPkg/Library/MpInitLib/X64/MpFuncs.nasm&quot; calls the assembly
    language function InitializeFloatingPointUnits(), which is however
    provided by an external library. Normally, when the object files were
    linked together, this function call would result in an absolute
    reference (and matching relocation, performed at module loading), and
    the instance of the reset vector that was copied under 1MB during boot
    would refer to the same, unchanged, absolute address of
    InitializeFloatingPointUnits(), residing in CpuMpPei or CpuDxe.

    This didn&apos;t work with X64 XCODE5 builds however. XCODE5 prefers
    RIP-relative addressing for X64 (i.e., the assembly language function
    call depended on the distance between the call site and the callee).
    When the call site was copied under 1MB but
    InitializeFloatingPointUnits() would not move, the call broke.

    This was tracked in TianoCore BZ#565 and fixed in commit 3b2928b46987
    (&quot;UefiCpuPkg/MpInitLib: Fix X64 XCODE5/NASM compatibility issues&quot;,
    2017-05-17). The solution was to add another function pointer to the
    MP_CPU_EXCHANGE_INFO communication area. (The function pointer would
    have size 4 in Ia32 builds, and size 8 in X64 builds.) MpInitLib would
    assign the absolute address of InitializeFloatingPointUnits() to the
    new field, and the APs would retrieve it -- matching the pointer size
    correctly --, and call it. The C assignment can be seen in the
    following hunk (from commit 3b2928b46987):

&gt; diff --git a/UefiCpuPkg/Library/MpInitLib/MpLib.c b/UefiCpuPkg/Library/MpInitLib/MpLib.c
&gt; index 407c44c95e62..735e099b32f2 100644
&gt; --- a/UefiCpuPkg/Library/MpInitLib/MpLib.c
&gt; +++ b/UefiCpuPkg/Library/MpInitLib/MpLib.c
&gt; @@ -751,6 +751,8 @@ FillExchangeInfoData (
&gt;
&gt;    ExchangeInfo-&gt;EnableExecuteDisable = IsBspExecuteDisableEnabled ();
&gt;
&gt; +  ExchangeInfo-&gt;InitializeFloatingPointUnitsAddress = (UINTN)InitializeFloatingPointUnits;
&gt; +
&gt;    //
&gt;    // Get the BSP&apos;s data of GDT and IDT
&gt;    //

    This moved the relocation of the InitializeFloatingPointUnits()
    reference (or, with XCODE5, the RIP-relative
    InitializeFloatingPointUnits() reference) from the assembly code
    (which is copied around) to the C code (which is not copied around).

(2) Unfortunately, the C-language assignment to
    &quot;MP_CPU_EXCHANGE_INFO.InitializeFloatingPointUnitsAddress&quot; is
    miscompiled under the following circumstances:

    - the edk2 build target is DEBUG (or RELEASE),
    - the edk2 toolchain selection is GCC5,
    - (from the above two it follows that -Os and LTO are enabled,)
    - MpInitLib is built for X64,
    - and the compiler is gcc-7.1 (shipped in Fedora-26 e.g.).

    (If the PEI phase is 64-bit, then MpInitLib breaks in CpuMpPei. If the
    PEI phase is 32-bit and the DXE phase is 64-bit, then MpInitLib breaks
    in CpuDxe. If the DXE phase is 32-bit, then nothing breaks.)

    Below I&apos;ll use the NOOPT/GCC5/X64/gcc-7.1 build of CpuMpPei to show
    the correct assembly code generated by gcc for the assignment, and
    flip the build target to DEBUG for showing the broken assembly code.

(3) Correct code for the assignment:

&gt;     5406:       48 8d 15 73 24 00 00    lea    0x2473(%rip),%rdx        # 7880 &lt;InitializeFloatingPointUnits&gt;
&gt;     540d:       48 8b 45 f8             mov    -0x8(%rbp),%rax
&gt;     5411:       48 89 90 84 00 00 00    mov    %rdx,0x84(%rax)

    Here the absolute address of InitializeFloatingPointUnits() is loaded
    into RDX with RIP-relative addressing. Then RAX is pointed to the
    ExchangeInfo structure, and finally RDX is stored into
    ExchangeInfo-&gt;InitializeFloatingPointUnitsAddress (the field offset is
    0x84 in the structure).

    Here the only relocation happens when CpuMpPei is linked. The distance
    between the call site and the callee is calculated and encoded in the
    LEA instruction. The same distance is valid when CpuMpPei runs, so the
    PEI core doesn&apos;t have to relocate the LEA instruction when it loads
    CpuMpPei.

(4) Incorrect code for the assignment:

&gt;     2d69:       48 c7 c2 60 58 00 00    mov    $0x5860,%rdx
&gt;     ...
&gt;     2d7b:       48 89 95 84 00 00 00    mov    %rdx,0x84(%rbp)
&gt;     ...
&gt; 0000000000005860 &lt;InitializeFloatingPointUnits&gt;:
&gt;     5860:       9b db e3                finit

    This is not RIP-relative addressing. Therefore gcc generates a
    relocation record for the address encoded in the MOV instruction, at
    offset 0x2d69+0x3 -- initial value being 0x5860:

&gt; Sections:
&gt; Idx Name          Size      VMA               LMA               File off  Algn
&gt;   0 .text         00006e66  0000000000000240  0000000000000240  000000c0  2**6
&gt;                   CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE
&gt; ...
&gt; RELOCATION RECORDS FOR [.text]:
&gt; OFFSET           TYPE              VALUE
&gt; ...
&gt; 0000000000002b2c R_X86_64_32S      InitializeFloatingPointUnits

    (The offset of the address to relocate is 0x2d69+3 == 0x2d6c, which
    equals the .text section base plus the relocation offset, i.e.,
    0x240+0x2b2c.)

    This is the only R_X86_64_32S relocation record in the linked-together
    CpuMpPei.debug file (still an ELF file). In the rest of the build
    process, the GenFw utility translates CpuMpPei.dll to a PE/COFF image
    (CpuMpPei.efi), and converts the ELF relocation record to a PE/COFF
    relocation record (of type EFI_IMAGE_REL_BASED_HIGHLOW).

    The EFI_IMAGE_REL_BASED_HIGHLOW PE/COFF relocation is acted upon first
    when CpuMpPei.efi is built into the PEIFV volume, since CpuMpPei.efi
    could theoretically execute from flash, and PEIFV has a nonzero base
    address. (However, CpuMpPei has a DEPEX on permanent PEI RAM
    discovery, so the PEI core will only launch it from permanent PEI RAM,
    in practice.)

    The EFI_IMAGE_REL_BASED_HIGHLOW PE/COFF relocation is acted upon for
    the second time when the PEI core loads CpuMpPei into permanent PEI
    RAM, and performs the relocations. I confirmed (with debug messages)
    that the relocated address (within the instruction) is correct:

&gt; PeiCore:PeCoffLoaderRelocateImage: Fixup32=BFF25D6C FixupData=0
&gt; PeiCore:PeCoffLoaderRelocateImage: *Fixup32=0x8487A0 Adjust=0xBF6E00C0
&gt; Loading PEIM at 0x000BFF23000 EntryPoint=0x000BFF271BB CpuMpPei.efi

    The &quot;Fixup32&quot; pointer points to the address constant that should be
    relocated (0xBFF25D6C - 0xBFF23000 == 0x2D6C). The initial value of
    (*Fixup32) is 0x8487A0, which comes from the composition of PEIFV that
    I described above (as &quot;first relocation&quot;).

    After incrementing (*Fixup32) by &quot;Adjust&quot;, the final value is
    0xBFF28860. This is the absolute address that is patched into the MOV
    instruction that sets RDX for the assignment. This value is correct;
    the InitializeFloatingPointUnits() function really exists in CpuMpPei
    at this address, in permanent PEI RAM. It is at an offset of 0x5860
    from the load address 0x000BFF23000 (see third line).

    So where do things go wrong? Again, the MOV instruction itself is
    wrong. I modified the MpInitLib C code to print the value of the field
    right after the assignment, and I got:

&gt; AP Loop Mode is 1
&gt; WakeupBufferStart = 9F000, WakeupBufferSize = 1000
&gt; CpuMpPei:FillExchangeInfoData: InitializeFloatingPointUnits @ 0xFFFFFFFFBFF28860

    The APs are ejected into outer space when they try to init their FPUs
    -- there is nothing at 0xFFFFFFFF_BFF28860; the assignment should
    store 0x00000000_BFF28860!

(5) So open the Intel SDM, and decode the instruction by hand:

&gt;     2d69:       48 c7 c2 60 58 00 00    mov    $0x5860,%rdx

    0x48 stands for the REX.W prefix (0x40 for REX, plus bit 3 for .W).
    Looking up REX.W + 0xc7 (the next byte) under the MOV specification,
    we get:
    - opcode: REX.W + C7 /0
    - instruction: MOV r/m64, imm32
    - Description: Move imm32 sign extended to 64-bits to r/m64.

    &quot;Sign extended&quot;. Our imm32 value, patched into the MOV, is 0xBFF28860
    -- the i440fx machine types may have up to 3GB of 32-bit RAM -- so the
    sign bit is set. And MOV sign-extends 0xBFF28860 to
    0xFFFFFFFF_BFF28860 in the assignment to RDX.

    So... why on earth generates gcc this MOV instruction, with sign
    extension?

(6) It does because we told it to. From the gcc manual:

&gt; -mcmodel=small
&gt;     Generate code for the small code model: the program and its symbols
&gt;     must be linked in the lower 2 GB of the address space.  Pointers are
&gt;     64 bits.  Programs can be statically or dynamically linked.  This is
&gt;     the default code model.

    and please refer to the following commit (message slightly rewrapped
    here):

&gt; commit f49513f666ed25d24bdf3a02a1fdb5d18ae081c0
&gt; Author: Ard Biesheuvel &lt;ard.biesheuvel@linaro.org&gt;
&gt; Date:   Sat Jul 16 00:16:11 2016 +0200
&gt;
&gt;     BaseTools/tools_def: switch GCC/X64 to the PIE small model
&gt;
&gt;     The ordinary small code model for x86_64 cannot be used in UEFI,
&gt;     since it assumes the executable is loaded in the first 2 GB of
&gt;     memory. Therefore, we use the large model instead, which can execute
&gt;     anywhere, but uses absolute 64-bit wide quantities for all symbol
&gt;     references, which is costly in terms of code size.
&gt;
&gt;     So switch to the PIE small code model, this uses 32-bit relative
&gt;     references where possible, but does not make any assumptions about
&gt;     the load address (i.e., all absolute symbol references are 64-bits
&gt;     wide). Note that, due to the &apos;protected&apos; visibility pragma
&gt;     introduced in an earlier patch, there is no need for the EDK2 build
&gt;     system to deal with GOT related ELF relocation types.
&gt;
&gt;     Contributed-under: TianoCore Contribution Agreement 1.0
&gt;     Signed-off-by: Ard Biesheuvel &lt;ard.biesheuvel@linaro.org&gt;
&gt;     Reviewed-by: Jordan Justen &lt;jordan.l.justen@intel.com&gt;
&gt;     Tested-by: Laszlo Ersek &lt;lersek@redhat.com&gt;
&gt;     Tested-By: Liming Gao &lt;liming.gao@intel.com&gt;
&gt;     Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;

    Apparently, gcc-7.1, with Link Time Optimization enabled, *does* make
    assumptions about the load address, despite the fact that we didn&apos;t
    just replace &quot;-mcmodel=large&quot; with &quot;-mcmodel=small&quot;, but we also added
    &quot;-fpie&quot;.

(7) Commit f49513f666ed has been safe until the advent of gcc-7.1, so do
    not revert it whole-sale. Instead, undo it only for the LTO build env
    where it might cause problems, by appending &quot;-fno-pie -mcmodel=large&quot;.

    The assignment is then compiled like this:

&gt;     33d7:       48 ba 60 64 00 00 00    movabs $0x6460,%rdx
&gt;     33de:       00 00 00
&gt;     ...
&gt;     33e5:       48 89 95 84 00 00 00    mov    %rdx,0x84(%rbp)
&gt;     ...
&gt; 0000000000006460 &lt;InitializeFloatingPointUnits&gt;:

    And the matching relocation is (note the target offset
    0x240+0x3199=0x33d9):

&gt; Sections:
&gt; Idx Name          Size      VMA               LMA               File off  Algn
&gt;   0 .text         00007c5e  0000000000000240  0000000000000240  000000c0  2**6
&gt;                   CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE
&gt; ...
&gt; RELOCATION RECORDS FOR [.text]:
&gt; OFFSET           TYPE              VALUE
&gt; ...
&gt; 0000000000003199 R_X86_64_64       InitializeFloatingPointUnits

(8) Size changes by this patch:

    $ build -a X64 -p OvmfPkg/OvmfPkgX64.dsc \
        -t GCC5 -b DEBUG \
        -D NETWORK_IP6_ENABLE -D HTTP_BOOT_ENABLE -D TLS_ENABLE

      Before:

&gt; SECFV [10%Full] 212992 total, 21616 used, 191376 free
&gt; FVMAIN_COMPACT [43%Full] 3440640 total, 1498200 used, 1942440 free
&gt; DXEFV [47%Full] 10485760 total, 4959448 used, 5526312 free
&gt; PEIFV [21%Full] 917504 total, 194480 used, 723024 free

      After:

&gt; SECFV [11%Full] 212992 total, 23728 used, 189264 free
&gt; FVMAIN_COMPACT [44%Full] 3440640 total, 1539200 used, 1901440 free
&gt; DXEFV [54%Full] 10485760 total, 5741528 used, 4744232 free
&gt; PEIFV [24%Full] 917504 total, 224304 used, 693200 free

    $ build -a IA32 -a X64 -p OvmfPkg/OvmfPkgIa32X64.dsc \
        -t GCC5 -b DEBUG \
        -D NETWORK_IP6_ENABLE -D HTTP_BOOT_ENABLE -D TLS_ENABLE \
        -D SECURE_BOOT_ENABLE -D SMM_REQUIRE

      Before:

&gt; SECFV [10%Full] 212992 total, 21536 used, 191456 free
&gt; FVMAIN_COMPACT [48%Full] 3440640 total, 1682008 used, 1758632 free
&gt; DXEFV [57%Full] 10485760 total, 6056504 used, 4429256 free
&gt; PEIFV [22%Full] 917504 total, 202032 used, 715472 free

      After:

&gt; SECFV [10%Full] 212992 total, 21536 used, 191456 free
&gt; FVMAIN_COMPACT [50%Full] 3440640 total, 1728096 used, 1712544 free
&gt; DXEFV [66%Full] 10485760 total, 6979448 used, 3506312 free
&gt; PEIFV [22%Full] 917504 total, 202032 used, 715472 free</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2603</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-15 09:25:22 +0000</bug_when>
    <thetext>On the mailing list, Steven Shi suggested that, for working around the
compiler/linker bug, we shouldn&apos;t heavy-handedly update the build flags.
Instead, we should extend the fix for bug 565, and modify the source code so
that the compiler/linker bug is suppressed:

&gt; diff --git a/UefiCpuPkg/Library/MpInitLib/MpLib.c b/UefiCpuPkg/Library/MpInitLib/MpLib.c
&gt; old mode 100644
&gt; new mode 100755
&gt; index a3eea29..7afe434
&gt; --- a/UefiCpuPkg/Library/MpInitLib/MpLib.c
&gt; +++ b/UefiCpuPkg/Library/MpInitLib/MpLib.c
&gt; @@ -738,6 +738,15 @@ WaitApWakeup (
&gt;    }
&gt;  }
&gt;
&gt; +VOID
&gt; +EFIAPI
&gt; +InitializeFloatingPointUnitsWrapper (
&gt; +  VOID
&gt; +  )
&gt; +{
&gt; +  InitializeFloatingPointUnits();
&gt; +}
&gt; +
&gt;  /**
&gt;    This function will fill the exchange info structure.
&gt;
&gt; @@ -771,7 +780,7 @@ FillExchangeInfoData (
&gt;
&gt;    ExchangeInfo-&gt;EnableExecuteDisable = IsBspExecuteDisableEnabled ();
&gt;
&gt; -  ExchangeInfo-&gt;InitializeFloatingPointUnitsAddress = (UINTN)InitializeFloatingPointUnits;
&gt; +  ExchangeInfo-&gt;InitializeFloatingPointUnitsAddress = (UINTN)InitializeFloatingPointUnitsWrapper;
&gt;
&gt;    //
&gt;    // Get the BSP&apos;s data of GDT and IDT

With this, the function whose address is assigned to the structure field now
resides in the same translation unit as the assignment itself. So now the
compiler -- and not the linker/LTO -- can likely generate a LEA instruction
with RIP-relative addressing for the assignment, and the
&quot;InitializeFloatingPointUnits&quot; reference is no longer part of an assignment
but of a function call.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2620</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-08-22 04:03:03 +0000</bug_when>
    <thetext>It is a link flag misuse in our GCC build toolchains, not compiler/linker’s problem. Below patch can fix the wrong assembly function relocation type in PIE binary. With below patch, all the GCC5, GCC49 and GCC48 can build correctly images of OvmfPkgIa32X64 and OvmfPkgX64 platforms without my previous simple work around in my side. Please try it in your side.
Since we are using GCC as linker command, we MUST pass -pie to ld with “-Wl,-pie”, not just “--pie”  or “-fpie”.



diff --git a/BaseTools/Conf/tools_def.template b/BaseTools/Conf/tools_def.template
index 1fa3ca3..9e46d65 100755
--- a/BaseTools/Conf/tools_def.template
+++ b/BaseTools/Conf/tools_def.template
@@ -4375,7 +4375,7 @@ DEFINE GCC44_IA32_X64_DLINK_COMMON   = -nostdlib -Wl,-n,-q,--gc-sections -z comm
DEFINE GCC44_IA32_X64_ASLDLINK_FLAGS = DEF(GCC44_IA32_X64_DLINK_COMMON) -Wl,--entry,ReferenceAcpiTable -u ReferenceAcpiTable
DEFINE GCC44_IA32_X64_DLINK_FLAGS    = DEF(GCC44_IA32_X64_DLINK_COMMON) -Wl,--entry,$(IMAGE_ENTRY_POINT) -u $(IMAGE_ENTRY_POINT) -Wl,-Map,$(DEST_DIR_DEBUG)/$(BASE_NAME).map
DEFINE GCC44_IA32_DLINK2_FLAGS       = -Wl,--defsym=PECOFF_HEADER_SIZE=0x220 DEF(GCC_DLINK2_FLAGS_COMMON)
-DEFINE GCC44_X64_DLINK_FLAGS         = DEF(GCC44_IA32_X64_DLINK_FLAGS) -Wl,-melf_x86_64,--oformat=elf64-x86-64
+DEFINE GCC44_X64_DLINK_FLAGS         = DEF(GCC44_IA32_X64_DLINK_FLAGS) -Wl,-melf_x86_64,--oformat=elf64-x86-64 -Wl,-pie
DEFINE GCC44_X64_DLINK2_FLAGS        = -Wl,--defsym=PECOFF_HEADER_SIZE=0x228 DEF(GCC_DLINK2_FLAGS_COMMON)
DEFINE GCC44_ASM_FLAGS               = DEF(GCC_ASM_FLAGS)

@@ -4455,7 +4455,7 @@ DEFINE GCC49_IA32_X64_DLINK_COMMON   = -nostdlib -Wl,-n,-q,--gc-sections -z comm
DEFINE GCC49_IA32_X64_ASLDLINK_FLAGS = DEF(GCC49_IA32_X64_DLINK_COMMON) -Wl,--entry,ReferenceAcpiTable -u ReferenceAcpiTable
DEFINE GCC49_IA32_X64_DLINK_FLAGS    = DEF(GCC49_IA32_X64_DLINK_COMMON) -Wl,--entry,$(IMAGE_ENTRY_POINT) -u $(IMAGE_ENTRY_POINT) -Wl,-Map,$(DEST_DIR_DEBUG)/$(BASE_NAME).map
DEFINE GCC49_IA32_DLINK2_FLAGS       = DEF(GCC48_IA32_DLINK2_FLAGS)
-DEFINE GCC49_X64_DLINK_FLAGS         = DEF(GCC49_IA32_X64_DLINK_FLAGS) -Wl,-melf_x86_64,--oformat=elf64-x86-64
+DEFINE GCC49_X64_DLINK_FLAGS         = DEF(GCC49_IA32_X64_DLINK_FLAGS) -Wl,-melf_x86_64,--oformat=elf64-x86-64 -Wl,-pie
DEFINE GCC49_X64_DLINK2_FLAGS        = DEF(GCC48_X64_DLINK2_FLAGS)
DEFINE GCC49_ASM_FLAGS               = DEF(GCC48_ASM_FLAGS)
DEFINE GCC49_ARM_ASM_FLAGS           = DEF(GCC48_ARM_ASM_FLAGS)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2625</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-23 05:53:17 +0000</bug_when>
    <thetext>Liming posted a patch:
[edk2] [Patch] BaseTools: Add the missing -pie link option in GCC tool chain
https://lists.01.org/pipermail/edk2-devel/2017-August/013561.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2644</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-08-25 00:50:42 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/2f7f1e73c10f9057be27ec6ffe92aaf8084d176f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>496</bug_id>
          
          <creation_ts>2017-04-20 04:35:04 +0000</creation_ts>
          <short_desc>[MpInitLib] programming virtual wired mode on BSP</short_desc>
          <delta_ts>2017-04-25 23:35:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeff Fan">vanjeff_919</reporter>
          <assigned_to name="Jeff Fan">vanjeff_919</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2017</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1878</commentid>
    <comment_count>0</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2017-04-20 04:35:04 +0000</bug_when>
    <thetext>In CpuDxe driver, we will program virtual wired mode on BSP. And in MpInitLib, we will program virtual wired mode on all APs. However, we did not program virtual wired mode for BSP in CpuMpPei driver.

Issus is that BSP hasn&apos;t the same behavior with APs in PEI phase on virtual wired mode.

I suggest to move program virtual wired mode in MpInitLib, thus it could benefit on both CpuDxe and CpuMpPei. And then we could remove program virtual wired mode from CpuDxe.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1886</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-20 20:07:38 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1926</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2017-04-25 23:35:06 +0000</bug_when>
    <thetext>Commit at 9d64a9fd9ee05f0b0228fc1f8b66398dac85e2c9 on trunk.
Commit at 5fc4b658e6e8142518556ce51711924c07f7532d on UDK2017.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>44</bug_id>
          
          <creation_ts>2016-07-20 20:55:18 +0000</creation_ts>
          <short_desc>Some packages still reference edk2-devel@lists.sourceforge.net</short_desc>
          <delta_ts>2016-11-14 02:28:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>AppPkg</cf_package>
    
    <cf_package>BaseTools</cf_package>
    
    <cf_package>EmbeddedPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>69</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 20:55:18 +0000</bug_when>
    <thetext>Looks like we need to grep the codebase:
git grep &quot;edk2-devel@lists.sourceforge.net&quot;
git grep &quot;http://edk2.tianocore.org&quot;

I could not figure out how to add a Label for the AppPkg?


bcran commented on Feb 17
Also for the old sourceforge svn, wiki etc.



lersek commented on Feb 17
@ajfish that label needs to be created first -- go to https://github.com/tianocore/edk2/issues , then click the Labels link (next to Filters), then click New label.

Anyway, I&apos;m creating that label now, and tagging this issue appropriately.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>436</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-08-17 21:07:31 +0000</bug_when>
    <thetext>bug scrub:  separate into two trackers.
assign this one to basetool owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>490</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-14 03:07:39 +0000</bug_when>
    <thetext>git grep &quot;edk2-devel@lists.sourceforge.net&quot;:
it in the AppPkg and EmbeddedPkg

git grep &quot;http://edk2.tianocore.org&quot;
it in the AppPkg and BaseTools, but the items in the BaseTools already covered in the bug 48</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>501</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-20 22:07:35 +0000</bug_when>
    <thetext>For basetools&apos; bug is fixed on bug 48. and I also filed new bug 125 for AppPkg and bug 126 for EmbeddedPkg.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>326</bug_id>
          
          <creation_ts>2017-01-04 21:40:47 +0000</creation_ts>
          <short_desc>Some possible issues in BootManagerMenuApp when there is no boot option</short_desc>
          <delta_ts>2017-04-19 21:39:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1251</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-01-04 21:40:47 +0000</bug_when>
    <thetext>In application MdeModulePkg\Application\BootManagerMenuApp, there might be some possible code issues when there is no boot option.

In file BootManagerMenu.c, for function BootManagerMenuEntry(), the number of boot options exist in the system is in variable &apos;BootOptionCount&apos; by calling EfiBootManagerGetLoadOptions() at line 948.

If 0 is returned to BootOptionCount, variable BootMenuData.ItemCount will be assigned to 0 in InitializeBootMenuData() at line 1010.

At line 1030 &amp; 1035, MAX_UINTN might be passed to function BootMenuSelectItem(). Also, there is possible divide by zero within function BootMenuSelectItem() at line 404 &amp; 416.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1253</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-05 19:08:23 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1861</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-04-19 05:19:17 +0000</bug_when>
    <thetext>pushed @ 51a1db9b24d850c785d240da599c4bf9ba1c0fd3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1872</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-04-19 21:38:40 +0000</bug_when>
    <thetext>pushed @ UDK2017 6efcd38566e6e5cddee4ec98543950f111c4566f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>688</bug_id>
          
          <creation_ts>2017-09-01 05:00:19 +0000</creation_ts>
          <short_desc>Build: -h help info need update</short_desc>
          <delta_ts>2017-09-04 21:32:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2665</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-01 05:00:19 +0000</bug_when>
    <thetext>current for the help info about -Y is incorrect. 
per spec: The default set of flags (if -Y is not specified) is: PCD, LIBRARY, FLASH, DEPEX, HASH, BUILD_FLAGS and FIXED_ADDRESS.
but current help info is : the default flag set is [PCD, LIBRARY, FLASH, DEPEX, BUILD_FLAGS, FIXED_ADDRESS]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2671</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-04 21:32:16 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2672</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-04 21:32:56 +0000</bug_when>
    <thetext>fixed it.SHA-1: 302860bfc467c72bdba91af021a44e20789601dc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>238</bug_id>
          
          <creation_ts>2016-11-16 21:42:03 +0000</creation_ts>
          <short_desc>SetPeiServicesTablePointer() needs to be called before ProcessLibraryConstructorList() in PeiMain</short_desc>
          <delta_ts>2016-11-30 20:38:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>968</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2016-11-16 21:42:03 +0000</bug_when>
    <thetext>SetPeiServicesTablePointer() needs to be called before ProcessLibraryConstructorList() in PeiMain, otherwise the Constructor and related codes of Library Instances that PeiCore links against will hard to get PeiServices table pointer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>969</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-16 21:45:55 +0000</bug_when>
    <thetext>In PeiCore, there are two places to call ProcessLibraryConstructorList().
1) The first one should be moved after ConvertPpiPointers().
2) The second one should be moved after InitializePpiServices(). Otherwise, Hob, Pool and Ppi services are not ready.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>981</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-17 19:12:22 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1089</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-11-30 20:38:52 +0000</bug_when>
    <thetext>Fix in edk2 trunk
https://github.com/tianocore/edk2/commit/75fe0a78aea7f450a46d958f7ad8219899574acc

Fix in edk2 UDK2017
https://github.com/tianocore/edk2/commit/613f7a0c05c57fbc6e72e7e6a41d477f2ecec9e4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>513</bug_id>
          
          <creation_ts>2017-04-27 05:08:27 +0000</creation_ts>
          <short_desc>BdsDxe: print text message and enter UiApp after boot fails completely</short_desc>
          <delta_ts>2018-06-13 09:36:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.redhat.com/show_bug.cgi?id=1515418</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=982</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1951</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-04-27 05:08:27 +0000</bug_when>
    <thetext>The UiApp application is added to the UEFI boot order automatically, but it is not invoked automatically, even if BDS gives up and hangs with

  [Bds] Unable to boot!

For example, consider the following:
- no UEFI bootable application available anywhere in the system,
- ... not even for the default platform recovery option,
- no shell is built into the firmware image,
- but UiApp is available in the firmware image.

For this scenario, the proposal is to print a user-visible string &quot;Unable to boot, press any key to enter Boot Manager Menu.&quot; to STD console, and redirect to Boot Manager Menu when any key is received; rather than just emit

  [Bds] Unable to boot!

via DebugLib, and hang.

On-list discussion: [edk2] falling back to UiApp?
https://lists.01.org/pipermail/edk2-devel/2017-April/010257.html

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1957</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-27 20:05:32 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3083</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-16 07:59:48 +0000</bug_when>
    <thetext>Ray,

do you think you could look into this bug soon?

If not, I guess I could assign the BZ to myself, and do something about it in the (hopefully near) future.

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3109</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-11-21 22:02:53 +0000</bug_when>
    <thetext>Laszlo,
Sorry, I may not have a chance to fix it in near future. If you could work on it and provide a patch, I will be very happy to review it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3112</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-22 08:42:11 +0000</bug_when>
    <thetext>Thanks, Ray; I&apos;m starting work on this then.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3114</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-22 19:01:13 +0000</bug_when>
    <thetext>Posted

[edk2] [PATCH 0/5] MdeModulePkg, OvmfPkg: more easily visible boot progress
                   reporting
http://mid.mail-archive.com/20171122235849.4177-1-lersek@redhat.com
https://lists.01.org/pipermail/edk2-devel/2017-November/017850.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3130</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-27 11:27:44 +0000</bug_when>
    <thetext>Fixed in commit d1de487dd2e7 (&quot;MdeModulePkg/BdsDxe: fall back to a Boot Manager Menu loop before hanging&quot;, 2017-11-22).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>343</bug_id>
          
          <creation_ts>2017-01-12 20:34:43 +0000</creation_ts>
          <short_desc>Update DP to support GCC PDB path</short_desc>
          <delta_ts>2017-03-15 23:12:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>PerformancePkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1323</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-01-12 20:34:43 +0000</bug_when>
    <thetext>Current DP only supports &quot;//&quot; as separator in the MSFT PDB path, it could be updated to support &quot;\&quot; as separator in the GCC PDB path. Then it can provide better user experience when GCC image is used to tune boot performance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1346</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-19 19:09:19 +0000</bug_when>
    <thetext>bug scrub: assign it to Star.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1621</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-03-15 23:12:33 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/compare/2db48a1ff4e9...491c91ee9db5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>722</bug_id>
          
          <creation_ts>2017-09-27 05:26:16 +0000</creation_ts>
          <short_desc>RFC3021 Support</short_desc>
          <delta_ts>2020-08-10 21:37:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>karunakarp</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>naveens</cc>
    
    <cc>robert</cc>
    
    <cc>sivaramann</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2793</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-09-27 05:26:16 +0000</bug_when>
    <thetext>Hello All,

It is known that current EDKII doesn’t support RFC3021.

We would like to use /31s to save IPv4 addresses. 

When it&apos;s a point-to-point link (server to router), the extra network address and broadcast address is wasted.
RFC 3021 solves the problem by using a broadcast address of 255.255.255.255 on such subnets. 

We have a requirement to support this, Could you please update the requirement time consuming how hard to implement this ?
Could you please update the plan accordingly?

Thanks for your support.

Thank You,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2804</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-28 22:09:21 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate and provide effort estimation first. UEFI spec not specify this RFC number.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2885</commentid>
    <comment_count>2</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-10-16 03:08:51 +0000</bug_when>
    <thetext>Could you please update the progress.

Thanks,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3035</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2017-11-13 01:00:51 +0000</bug_when>
    <thetext>edk2: 29788f178e48fa5ffe7d3262d73c9548e9285d2d</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3897</commentid>
    <comment_count>4</comment_count>
    <who name="sivaraman">sivaramann</who>
    <bug_when>2018-04-19 12:09:40 +0000</bug_when>
    <thetext>Hello All,

It is known that current EDKII doesn’t support RFC3021 with /32 to save IP Address.

Could you please update if there is plan to support this.

Thanks for your support.

Siva</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3904</commentid>
    <comment_count>5</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2018-04-19 20:27:24 +0000</bug_when>
    <thetext>(In reply to sivaraman from comment #4)
&gt; Hello All,
&gt; 
&gt; It is known that current EDKII doesn’t support RFC3021 with /32 to save IP
&gt; Address.
&gt; 
&gt; Could you please update if there is plan to support this.
&gt; 
&gt; Thanks for your support.
&gt; 
&gt; Siva

RFC3021 is /31 prefix and already supported by current edk2 code.
Please explain the requirement of /32 prefix, I haven&apos;t seen this definition before.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3951</commentid>
    <comment_count>6</comment_count>
    <who name="sivaraman">sivaramann</who>
    <bug_when>2018-04-30 07:26:28 +0000</bug_when>
    <thetext>Please find the use case:

1. All /32 bit support to save IP address
2. Under different Gateway subnet
3. UEFI mode

Here is the network stack setting example:

IP: 10.10.10.4
NETMASK: 255.255.255.255
GW: 10.255.255.1
 
Sampleconfig in DHCP:
 
subnet 10.10.10.4 netmask 255.255.255.255 {
    host server67 {
        hardware ethernet ac:1f:6b:65:26:54;
        fixed-address 10.10.10.4;
    }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3959</commentid>
    <comment_count>7</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2018-05-01 23:04:50 +0000</bug_when>
    <thetext>(In reply to sivaraman from comment #6)
&gt; Please find the use case:
&gt; 
&gt; 1. All /32 bit support to save IP address
&gt; 2. Under different Gateway subnet
&gt; 3. UEFI mode
&gt; 
&gt; Here is the network stack setting example:
&gt; 
&gt; IP: 10.10.10.4
&gt; NETMASK: 255.255.255.255
&gt; GW: 10.255.255.1
&gt;  
&gt; Sampleconfig in DHCP:
&gt;  
&gt; subnet 10.10.10.4 netmask 255.255.255.255 {
&gt;     host server67 {
&gt;         hardware ethernet ac:1f:6b:65:26:54;
&gt;         fixed-address 10.10.10.4;
&gt;     }

This use case doesn&apos;t make sense, that the gateway address (10.255.255.1) is not in the save subnet as the host (10.10.10.4), in other words, it couldn&apos;t work as a gateway to route the packets.

A /32 subnet could only have 1 host, which is called &quot;host router&quot;. It&apos;s a special cases which can be supported in some router devices, like https://www.cisco.com/c/en/us/support/docs/ip/ip-routing/116264-technote-ios-00.html

The EFI network stack couldn&apos;t work as a router and it doesn&apos;t support any routing protocol, which means we always need another router device to form a subnet, as a result /31 subnet is required to provide at least 2 host address.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13342</commentid>
    <comment_count>8</comment_count>
    <who name="Robert Socha">robert</who>
    <bug_when>2020-08-07 16:22:45 +0000</bug_when>
    <thetext>Hi,

Supporting /32 IPv4 addresses make sense.

It&apos;s alredy supported by iPXE for example (and Windows or Linux).

I&apos;ts not support by for example BIOS PXE Agent. But well...

This is called on-link connection. And it&apos;s not require &quot;router&quot; support in EDK. It&apos;s require simple ARP probe to ask directrly connected router (for example via dedicated vlan) for this address.

It&apos;s would be greate if this will be supported some day :)

I personaly currently use hack to make UEFI firmware work.

I bootstrap iPXE via separate network/subnet (for example /30). And next via iPXE i load current/public host address.

Best regards</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13353</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-10 05:05:05 +0000</bug_when>
    <thetext>*** Bug 2871 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13354</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-10 05:07:16 +0000</bug_when>
    <thetext>(In reply to Robert Socha from comment #8)

&gt; It&apos;s would be greate if this will be supported some day :)

To clarify, I think Robert isn&apos;t implying that *edk2* is still missing support; instead I think Robert is referring to his BIOS vendor. See &lt;https://bugzilla.tianocore.org/show_bug.cgi?id=2871#c2&gt;. Edk2 does already support the feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13361</commentid>
    <comment_count>11</comment_count>
    <who name="Robert Socha">robert</who>
    <bug_when>2020-08-10 21:37:52 +0000</bug_when>
    <thetext>
I&apos;m very sorry for my noise here.

EDK2 support both /31 and /32 addressing.

I was referring to this commit:

https://github.com/tianocore/edk2/commit/29788f178e48fa5ffe7d3262d73c9548e9285d2d

But found that /32 is already supported by EDK2 after this commit:

https://github.com/tianocore/edk2/commit/12ae56cf28d6a435f39a7c9c3a97185baf76f005

Guys - thank you for your great work and once again sorry for my noise :)

I only hope motherboard manufacturers will backport this someday (especially Supermicro;)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>187</bug_id>
          
          <creation_ts>2016-10-27 02:31:47 +0000</creation_ts>
          <short_desc>Fix logic in IsDevicePathValid API</short_desc>
          <delta_ts>2016-11-13 22:33:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>748</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2016-10-27 02:31:47 +0000</bug_when>
    <thetext>Current this API not Validate the input buffer length before touch the buffer. It checks Whether input DevicePath node is End node before check the input buffer length is enough. It will caused potential touch buffer out of the valid scope. 

BOOLEAN
EFIAPI
IsDevicePathValid (
  IN CONST EFI_DEVICE_PATH_PROTOCOL *DevicePath,
  IN       UINTN                    MaxSize
  )
{
  UINTN Count;
  UINTN Size;
  UINTN NodeLength;

  ASSERT (DevicePath != NULL);

  for (Count = 0, Size = 0; !IsDevicePathEnd (DevicePath); DevicePath = NextDevicePathNode (DevicePath)) {</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>775</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-27 20:23:39 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>903</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2016-11-13 22:33:38 +0000</bug_when>
    <thetext>Fixed this issue with patch series 1420143f014a4c14bd7cb430aaacd6b2c4bc8043 ~ c3c9892c3b4dafd1d0ccdc8e5e017d80e8c4361e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>929</bug_id>
          
          <creation_ts>2018-04-10 16:01:44 +0000</creation_ts>
          <short_desc>please update TlsCipherMappingTable in &quot;TlsLib/TlsConfig.c&quot; to the ciphers included in &quot;OpensslLib/OpensslLib.inf&quot;</short_desc>
          <delta_ts>2023-01-03 03:48:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2541</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>915</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3853</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-10 16:01:44 +0000</bug_when>
    <thetext>According to the mailing list discussion linked in &lt;https://bugzilla.tianocore.org/show_bug.cgi?id=915#c8&gt;, &quot;TlsCipherMappingTable&quot; should never offer *more* cipher suites than actually supported by OpensslLib (because then the TLS client might negotiate a cipher suite with the server that the client ultimately won&apos;t be able to support). However, for best coverage of the ciphers that *are* available, &quot;TlsCipherMappingTable&quot; should reasonably approach the set of ciphers that we enable in &quot;OpensslLib.inf&quot;. Please review the latter set and merge the according cipher suite identifiers into &quot;TlsCipherMappingTable&quot;.

(Based on the mailing list discussion, it looks like Qin plans to implement this after I fix bug 915 with a v2 set. To reflect that in the Bugzilla, I&apos;m setting a dependency here on bug 915. Please adjust as necessary.)

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3865</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-12 20:08:40 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12381</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 18:57:51 +0000</bug_when>
    <thetext>Reassigning to Jian for evaluation. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20375</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 03:48:11 +0000</bug_when>
    <thetext>Yeah, nobody cared. Closing.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>100</bug_id>
          
          <creation_ts>2016-08-11 20:35:53 +0000</creation_ts>
          <short_desc>Most edk2.tianocore.org links in EDK II are wrong</short_desc>
          <delta_ts>2023-05-03 11:25:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>48</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Barton">jie.b.gao</reporter>
          <assigned_to name="Rebecca Cran">rebecca</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>rebecca</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>AppPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>431</commentid>
    <comment_count>0</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-11 20:35:53 +0000</bug_when>
    <thetext>+++ This bug was initially created as a clone of Bug #48 +++

We still support the http://edk2.tianocore.org url. It redirects to http://www.tianocore.org/edk2.

But, many other references to http://edk2.tianocore.org have not be valid since the move to sourceforge several years back.

After someone pointed out the BuildNotes.txt issue, I found these with git grep edk2.tianocore.org:

AppPkg/Applications/Python/Ia32/pyconfig.h:#define PACKAGE_URL   &quot;http://edk2.tianocore.org/toolkit/python&quot;
AppPkg/Applications/Python/Ipf/pyconfig.h:#define PACKAGE_URL   &quot;http://edk2.tianocore.org/toolkit/python&quot;
BaseTools/BuildNotes.txt:  b) Look over https://edk2.tianocore.org/step-by-step-instructions.html
IntelFrameworkPkg/FrameworkSpecConformance.txt:# package in EdkII Open Source Project (https://edk2.tianocore.org/source/browse/edk2/trunk/edk2/IntelFrameworkPkg)
edksetup.sh:# firstly, please reference https://edk2.tianocore.org/unix-getting-started.html to 
edksetup.sh:# Please reference edk2 user manual for more detail descriptions at https://edk2.tianoc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>663</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:17:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18287</commentid>
    <comment_count>2</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2022-02-09 13:50:56 +0000</bug_when>
    <thetext>change role</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21471</commentid>
    <comment_count>3</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2023-05-03 11:25:30 +0000</bug_when>
    <thetext>It looks like this was fixed several years ago. For example:

commit 445bfd921462d50a226a833f5b1c3e375efdd434
Author: Yonghong Zhu &lt;yonghong.zhu@intel.com&gt;
Date:   Wed Sep 14 13:27:06 2016 +0800

    edksetup.sh: update the URL in edksetup.sh
    
    Update the URL since http://edk2.tianocore.org is not valid
    
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Contributed-under: TianoCore Contribution Agreement 1.0
    Signed-off-by: Yonghong Zhu &lt;yonghong.zhu@intel.com&gt;
    Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>655</bug_id>
          
          <creation_ts>2017-07-28 05:38:12 +0000</creation_ts>
          <short_desc>[Shell] Support dumping detailed information of PartitionInfo protocol in &quot;dh&quot; command</short_desc>
          <delta_ts>2017-09-28 21:42:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2522</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-28 05:38:12 +0000</bug_when>
    <thetext>Since now the PartitionInfo protocol implementation was added to Partition driver, we could enhance UEFI Shell to dump the detailed PartitionInfo information in &quot;dh&quot; command, just like what we&apos;ve already done for GraphicsOutput protocol.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2555</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-03 20:12:53 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2779</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-25 08:41:37 +0000</bug_when>
    <thetext>Hao, can you add the dump logic for PartitionInfo protocol?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2785</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-25 20:51:51 +0000</bug_when>
    <thetext>Yes. I will prepare patch to add the support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2803</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-28 21:42:16 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/770f3f6144b47b7b52f2fb6b3f7f532630f2fc32</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>205</bug_id>
          
          <creation_ts>2016-11-03 00:45:08 +0000</creation_ts>
          <short_desc>DxeCore should show error message on FV unalign issue</short_desc>
          <delta_ts>2016-11-16 20:35:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>IntelFrameworkPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>820</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-11-03 00:45:08 +0000</bug_when>
    <thetext>Current DxeCore has below logic:
  if ((FwVolHeader-&gt;Attributes &amp; EFI_FVB2_WEAK_ALIGNMENT) != EFI_FVB2_WEAK_ALIGNMENT) {
    //
    // Get FvHeader alignment
    //
    FvAlignment = 1 &lt;&lt; ((FwVolHeader-&gt;Attributes &amp; EFI_FVB2_ALIGNMENT) &gt;&gt; 16);
    //
    // FvAlignment must be greater than or equal to 8 bytes of the minimum FFS alignment value.
    //
    if (FvAlignment &lt; 8) {
      FvAlignment = 8;
    }
    if ((UINTN)BaseAddress % FvAlignment != 0) {
      //
      // FvImage buffer is not at its required alignment.
      //
      return EFI_VOLUME_CORRUPTED;
    }
  }


We did encounter such issue in recovery and waist lot of time to debug.
I suggest we add debug message to show the error to help developer root-cause it quickly.

    if ((UINTN)BaseAddress % FvAlignment != 0) {
      //
      // FvImage buffer is not at its required alignment.
      //
      DEBUG ((EFI_D_ERROR, &quot;Unaligned FV found - 0x%x\n&quot;, BaseAddress));
      return EFI_VOLUME_CORRUPTED;
    }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>837</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-03 20:17:12 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>964</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2016-11-16 20:35:32 +0000</bug_when>
    <thetext>Pushed at
https://github.com/tianocore/edk2/commit/619c48896334ef342dad20cf2601dc7628f7c807 ..
https://github.com/tianocore/edk2/commit/a0426207c133bdf40c42561f26c20c4b3114d8f9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>45</bug_id>
          
          <creation_ts>2016-07-20 20:56:33 +0000</creation_ts>
          <short_desc>can&apos;t build UDK2015 branch</short_desc>
          <delta_ts>2016-10-24 23:14:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2015</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>UDK 2015</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>70</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 20:56:33 +0000</bug_when>
    <thetext>Hello. I can&apos;t build UDK2015 branch (r19548).
After cherry-pick 18698, 18699, 18700, 18701, 18702, 18703, 18706, 19146 from trunk build successfully.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>430</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-11 20:34:31 +0000</bug_when>
    <thetext>Bug Scrub: Seems already been fixed, assign to Qin to confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>708</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-10-24 23:14:50 +0000</bug_when>
    <thetext>I verified that the build issue has gone for CryptoPkg on UDK2015 branch HEAD (3a4d706b3799f6dba93f18021d00256f2ef4bd81).

Note: I&apos;m using version f0c97b7716ce92f1fc657f87f29bcc9170e5eb1f for edk2-BaseTools-win32 repository for Windows build.

I will close this bug as &apos;Fixed&apos;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>416</bug_id>
          
          <creation_ts>2017-03-04 06:45:15 +0000</creation_ts>
          <short_desc>error: comparison between pointer and zero character constant</short_desc>
          <delta_ts>2017-04-05 09:26:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nikolai Saoukh">nms</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1574</commentid>
    <comment_count>0</comment_count>
    <who name="Nikolai Saoukh">nms</who>
    <bug_when>2017-03-04 06:45:15 +0000</bug_when>
    <thetext>Discovered by gcc version 7.0.1 20170226 (experimental)

/prj/GIT/edk2/MdeModulePkg/Library/UefiHiiLib/HiiLib.c: In function &apos;InternalHiiIfrValueAction&apos;:
/prj/GIT/edk2/MdeModulePkg/Library/UefiHiiLib/HiiLib.c:2205:20: error: comparison between pointer and zero character constant [-Werror=pointer-compare]
   while (StringPtr != L&apos;\0&apos;) {
                    ^~
/prj/GIT/edk2/MdeModulePkg/Library/UefiHiiLib/HiiLib.c:2205:10: note: did you mean to dereference the pointer?
   while (StringPtr != L&apos;\0&apos;) {
          ^</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1597</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-09 19:05:29 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1738</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-04-05 09:26:04 +0000</bug_when>
    <thetext>Fix this issue on Trunk:
https://github.com/tianocore/edk2/commit/fe4a28ccbfd33cae9e1f56b174d46b4eb2329efd</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>327</bug_id>
          
          <creation_ts>2017-01-05 08:20:46 +0000</creation_ts>
          <short_desc>ifconfig -l says &quot;Failed to set address&quot; but assigns IP</short_desc>
          <delta_ts>2017-01-19 22:29:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="Zhang, Lubo">lubo.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>karunakarp</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1252</commentid>
    <comment_count>0</comment_count>
      <attachid>33</attachid>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-01-05 08:20:46 +0000</bug_when>
    <thetext>Created attachment 33
Image for the error obtaining

Overview:
When a static IP like below is assigned, it says &apos;Failed to set address.&apos; but the static IP gets assigned.

Reproduction Steps:
1. Boot to UEFI Shell.
2. Give &apos;ifconfig -l&apos; to see the list of ethernet devices.
3. For any ethernet device, try assigning a static IP &apos;ifconfig -s eth0 static 192.168.0.121 255.255.255.0 0.0.0.0&apos;

Actual Output:
The system says &apos;Failed to set address.&apos; but if we give &apos;ifconfig -l&apos;, the static IP we had tried to set gets assigned successfully.

Expected Output:
If IP assigning is failed, then it should not show any IP.

Possible Cause:
Subnet and Ipv4 address are assigned when SetData is called with Ip4Config2DataTypeManualAddress and SetData call for Ip4Config2DataTypeGateway might be failing to cause this.

Observations:
If IP Address and Netmask pair is valid, then the Gateway is not being validated.

In the bug#213, the fix was given if any invalid subnet mask was tried to set.

Please correct me if I&apos;m wrong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1261</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-05 22:06:30 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1263</commentid>
    <comment_count>2</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2017-01-06 03:23:45 +0000</bug_when>
    <thetext>This issue is caused by the correct IP and  subset but invalid gateway. So ifconfig tool can configure the manual address but fail to set gateway.

I  will add check logic for gateway validity before set the manual address.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1347</commentid>
    <comment_count>3</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2017-01-19 22:29:32 +0000</bug_when>
    <thetext>Fix this issue in EDKII trunk:

SHA-1: 266746561d454d3d35938886e61a02b1ee1abaff</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>33</attachid>
            <date>2017-01-05 08:20:46 +0000</date>
            <delta_ts>2017-01-05 08:20:46 +0000</delta_ts>
            <desc>Image for the error obtaining</desc>
            <filename>FailedToSetAddress.png</filename>
            <type>image/png</type>
            <size>109241</size>
            <attacher name="Naveen Santhapur">naveens</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>154</bug_id>
          
          <creation_ts>2016-10-18 02:16:37 +0000</creation_ts>
          <short_desc>windows uefi firmware update fail error code 10 at device firmware</short_desc>
          <delta_ts>2021-04-02 02:47:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="xiaojiang_gu">guguxiaojiang</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>617</commentid>
    <comment_count>0</comment_count>
      <attachid>15</attachid>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-10-18 02:16:37 +0000</bug_when>
    <thetext>Created attachment 15
In Device Manager,it shows error code 10.

Hi everybody:

                     I encounter an confusing question. My task is that I want to author a uefi firmware update package on device firmware. when I have written EFI binary and inf file, then sign the file with test certificate, I am ready to update the device firmware by device inf file.  (My reference is &quot;Windows UEFI Firmware Update Platform&quot; this document).Then fail error code appeared.

                    Can anybody give anysolution for this? I will appreciate it if anybody can help.

Thed Device Status is that:

This device cannot start(Code 10)

Indicates a revision number encountered or specified is not one known by the service. It may be a more recent revision than the service is aware of.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>618</commentid>
    <comment_count>1</comment_count>
      <attachid>16</attachid>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-10-18 02:20:55 +0000</bug_when>
    <thetext>Created attachment 16
In registry,we show lastattemptstatus is 0xc0000058.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>619</commentid>
    <comment_count>2</comment_count>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-10-18 02:22:20 +0000</bug_when>
    <thetext>Has anybody can help me?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>656</commentid>
    <comment_count>3</comment_count>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-10-20 07:21:48 +0000</bug_when>
    <thetext>Has anybody can help me?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>659</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:07:42 +0000</bug_when>
    <thetext>Bug scrub: Assign to Jiewen to follow up first. May re-assign to other proper owner after get some investigation result.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>671</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:33:08 +0000</bug_when>
    <thetext>change it to CONFIRMED status first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>680</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-10-20 23:07:54 +0000</bug_when>
    <thetext>Hi
The code to process capsule is in BIOS.

Before we jump to technical discussion, may I know a little more detail?


1) Are you BIOS vendor to produce the full system BIOS?
If so, may I know which capsule solution you are using?

2) Or are you just device vendor and try your solution on some BIOS?
If so, may I know which BIOS you are using?

I will be glad to help, but we need to know which code is handling FMP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>681</commentid>
    <comment_count>7</comment_count>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-10-21 01:43:27 +0000</bug_when>
    <thetext>Dear jiewen:
           Sorry,I don&apos;t understand what you say.Bacasue I am a beginner for UEFI Development.
           My Task is reference to https://msdn.microsoft.com/en-us/windows/hardware/drivers/bringup/windows-uefi-firmware-update-platform.
           I want to implerment a device firmeare update package. In this document,it always emphasises &quot;firmware.bin&quot;. I want to know how to generate &quot;firmare.bin&quot; file. Is it equal to the efi application? All the need is to change the suffix from &quot;*.ef&quot; to &quot;*.bin&quot;.
           In this document, the capusle is generated by windows not by developers. The developer&apos;s work is to generate &quot;firmware.bin&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>682</commentid>
    <comment_count>8</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-10-21 02:46:21 +0000</bug_when>
    <thetext>I guess you are not BIOS developer.

Which machine are you using? such as Microsoft Surface, IBM T540, Dell Vostro, HP Probook ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>683</commentid>
    <comment_count>9</comment_count>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-10-21 03:02:59 +0000</bug_when>
    <thetext>Dear jiewen:
            Yes, I am not a BIOS Developer. My work machine is Lenoveo T460s. In this machine, OEM provide a device firmare (which is usb camera) in devcie manager.My Task is to wirte a device firmeare update package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>684</commentid>
    <comment_count>10</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-10-21 03:13:48 +0000</bug_when>
    <thetext>Ok. Good.
Things to be clear.

The content of inside of the Capsule (XXX.bin) is defined by OEM (it is Lenovo).

&quot;Windows UEFI Firmware Update Platform&quot; only defines a very high level windows  package format. It does not define any internal format of the XXX.bin.

If you look at the UEFI specification (www.uefi.org, I assume you have one) chapter 22 Firmware Update and Reporting, this is some definition for the format inside of the XXX.bin.

Please aware the UEFI is just an example, OEM may choose to support the content, or OEM may define its own format.

If OEM supports UEFI spec, chapter 22, you can follow that to generate an Fmp.efi and your own Firmware.bin. You can contact me on how to support UEFI FMP later.

In this case, I believe all is controlled by OEM (Lenovo), I do not do more help but recommend you contact OEM directly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>685</commentid>
    <comment_count>11</comment_count>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-10-21 04:46:47 +0000</bug_when>
    <thetext>Dear jiewen：
            My question is that in UEFI Chpater 22. it introduces Firmware management protocol which has SetImage/GetImage.. function. I want to know that OEM don&apos;t know the detaied download process for specific device(In this case,it is the usb camera). (In desktop app, we always release win32 tool to OEM).Is it necessary that we must share the download code to OEM Manufacuture. Is my understanding correct?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>692</commentid>
    <comment_count>12</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-10-21 10:06:34 +0000</bug_when>
    <thetext>Sorry, I do not quite understand your question.

What do you mean &quot;download process&quot; ? Is that related to some code? or related to the business discussion/negotiation?

What do you mean &quot;download code&quot; ? Is that C code ? or some binary? Is &quot;download&quot; a verb? or a adjective?


The purpose of UEFI spec chapter 22 is to define a formal way to let device vendor provide a standard update mechanism.

You create a FMP capsule, which follows UEFI spec. It should work directly in any OEM&apos;s BIOS, as long as this OEM&apos;s BIOS support UEFI FMP.

No additional negotiation between device vendor and platform provider, as long as both sides follow UEFI spec. - that is the final goal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>698</commentid>
    <comment_count>13</comment_count>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-10-23 21:37:16 +0000</bug_when>
    <thetext>Dear jiewen：
            Thank you for your reply. The &quot;download process&quot; means some code which describes how to send vendor command to device.For USB Camera,it describes how to send URB Commands to the camera device.
            The &quot;download code&quot; is a C code. The &quot;download&quot; is a verb.
            In UEFI Spec Page 1095. The capsule is composed of &quot;Driver&quot; and &quot;Payload&quot;.
Then The Paylod is composed of &quot;Binary Update Image&quot; and &quot;Vendor Code&quot;.

Then I want to know what the three elements seperately stands for.
Does the &quot;driver&quot; section stands for the download process.
Does the &quot;Binary Update Image&quot; sections stands for the device firmware image binary?
I don&apos;t the meaning of &quot;Vendor Code&quot;.

Because previously I did an experiment to make a capusle and call &quot;Update capsule&quot; Fucntion directly, but it return &quot;EFI_DEVICE_ERROR&quot; error value.
What the error code stands for?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>722</commentid>
    <comment_count>14</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-10-26 06:23:03 +0000</bug_when>
    <thetext>Yes. the &quot;driver&quot; section stands for the download process.

Yes. the &quot;Binary Update Image&quot; sections stands for the device firmware image binary.

You need ask the BIOS provider (OEM) on why &quot;EFI_DEVICE_ERROR&quot; is returned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>778</commentid>
    <comment_count>15</comment_count>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-10-27 21:40:38 +0000</bug_when>
    <thetext>Dear jiewen:
            Thank you for your reply. I know that the &quot;driver&quot; section stands for &quot;the download process&quot;.But I want to know that how the &quot;driver&quot; section loads the firmware image binary.
            The &quot;driver&quot; section should be standard UEFI application. the entry point shoule be that:

EFI_STATUS
EFIAPI
RtUSBCamDriverEntry(
IN EFI_HANDLE           ImageHandle,
IN EFI_SYSTEM_TABLE     *SystemTable
);

How I can load the firmware image binary according to the two parameter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>843</commentid>
    <comment_count>16</comment_count>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-11-04 01:34:23 +0000</bug_when>
    <thetext>Dear jiewen:
            can you give me some guidement？</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1156</commentid>
    <comment_count>17</comment_count>
      <attachid>27</attachid>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-12-12 04:30:41 +0000</bug_when>
    <thetext>Created attachment 27
the service driver sample code</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1157</commentid>
    <comment_count>18</comment_count>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2016-12-12 04:32:04 +0000</bug_when>
    <thetext>(In reply to jiewen.yao from comment #14)
&gt; Yes. the &quot;driver&quot; section stands for the download process.
&gt; 
&gt; Yes. the &quot;Binary Update Image&quot; sections stands for the device firmware image
&gt; binary.
&gt; 
&gt; You need ask the BIOS provider (OEM) on why &quot;EFI_DEVICE_ERROR&quot; is returned.

Dear jiewen:
           thank you for your reply.
           I have done an experiment which according to UEFI SPEC Chapter 22.I develop a servic driver which implements Firmware management protcol. In this diriver, I don&apos;t realize specific function and return ok directly.The sample code can be seen in the attachment. When I build this driver to generate *.efi file. I combine *.efi file and *.bin(firmware image) file to form a capsule file. After that, I make a update package(including capusle file,inf file,catalog file) to update device firmwre. Unfortunately it still fails and error code is 0xC0000058 from the registry.
          Can you give me guidement that which direction should i follow?Thank you.
          the servie driver sample code cna be seen in the attachment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1163</commentid>
    <comment_count>19</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-12-14 22:13:04 +0000</bug_when>
    <thetext>I think UEFI spec requires RtsCapsule_GetImageInfo() API. It MUST be implemented.

We recently check in EDKII trunk, so that you may find a sample in SignedCapsulePkg\Universal\SystemFirmwareUpdate or UefiCpuPkg\Feature\Capsule\MicrocodeUpdateDxe.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1327</commentid>
    <comment_count>20</comment_count>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2017-01-16 04:34:39 +0000</bug_when>
    <thetext>hi all：
       I download a newest edk and find a sample in UefiCpuPkg\Feature\Capsule\MicrocodeUpdateDxe.When I want to build MicrocodeCapsule.Cap according to readme.md files. I encouter a build error which can be seen in the attachment.I also post my Microcode.txt. The error says that the GenFw tool can&apos;t parse microcode.txt. So I want to know what format the Microcode.txt is.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1330</commentid>
    <comment_count>21</comment_count>
      <attachid>35</attachid>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2017-01-16 04:35:23 +0000</bug_when>
    <thetext>Created attachment 35
the GenFW build error</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1331</commentid>
    <comment_count>22</comment_count>
      <attachid>36</attachid>
    <who name="xiaojiang_gu">guguxiaojiang</who>
    <bug_when>2017-01-16 04:35:55 +0000</bug_when>
    <thetext>Created attachment 36
the microtxt sample</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15506</commentid>
    <comment_count>23</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-04-02 02:47:42 +0000</bug_when>
    <thetext>no more activity since 2017.
Close it.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>15</attachid>
            <date>2016-10-18 02:16:37 +0000</date>
            <delta_ts>2016-10-18 02:16:37 +0000</delta_ts>
            <desc>In Device Manager,it shows error code 10.</desc>
            <filename>fail1.jpg</filename>
            <type>image/jpeg</type>
            <size>256770</size>
            <attacher name="xiaojiang_gu">guguxiaojiang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>16</attachid>
            <date>2016-10-18 02:20:55 +0000</date>
            <delta_ts>2016-10-18 02:20:55 +0000</delta_ts>
            <desc>In registry,we show lastattemptstatus is 0xc0000058.</desc>
            <filename>fail2.jpg</filename>
            <type>image/jpeg</type>
            <size>211975</size>
            <attacher name="xiaojiang_gu">guguxiaojiang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>27</attachid>
            <date>2016-12-12 04:30:41 +0000</date>
            <delta_ts>2016-12-12 04:30:41 +0000</delta_ts>
            <desc>the service driver sample code</desc>
            <filename>RtsCapsule.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>2933</size>
            <attacher name="xiaojiang_gu">guguxiaojiang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>35</attachid>
            <date>2017-01-16 04:35:23 +0000</date>
            <delta_ts>2017-01-16 04:35:23 +0000</delta_ts>
            <desc>the GenFW build error</desc>
            <filename>buildfail.png</filename>
            <type>image/png</type>
            <size>46456</size>
            <attacher name="xiaojiang_gu">guguxiaojiang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>36</attachid>
            <date>2017-01-16 04:35:55 +0000</date>
            <delta_ts>2017-01-16 04:35:55 +0000</delta_ts>
            <desc>the microtxt sample</desc>
            <filename>Microcode.txt</filename>
            <type>text/plain</type>
            <size>4</size>
            <attacher name="xiaojiang_gu">guguxiaojiang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>514</bug_id>
          
          <creation_ts>2017-04-27 15:15:20 +0000</creation_ts>
          <short_desc>ASSERT in DxeServicesLib:InternalGetSectionFromFv</short_desc>
          <delta_ts>2017-05-07 21:05:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1955</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-04-27 15:15:20 +0000</bug_when>
    <thetext>Root cause is the hand built LoadedImage protocol for DxeMain does not fill in LoadedImage-&gt;DeviceHandle, and DxeServicesLib:GetSectionFromAnyFv doesn&apos;t check FvHandle for NULL after calling InternalImageHandleToFvHandle (gImageHandle). This can occur in libraries linked with DxeCore.  This does occur in some silicon reference code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1956</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-27 20:04:30 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2006</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-05-07 21:05:11 +0000</bug_when>
    <thetext>Fixed at
master: https://github.com/tianocore/edk2/commit/d7b96017ccf5922b798f496fbcdcac4067d04c6d
UDK2017 branch: https://github.com/tianocore/edk2/commit/69a8a9ee204c83bc13aea72681c85ac4285dd4aa</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>892</bug_id>
          
          <creation_ts>2018-03-13 10:22:00 +0000</creation_ts>
          <short_desc>WEAK_ALIGNMENT attribute is not documented</short_desc>
          <delta_ts>2018-06-28 02:17:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Felix">felixp</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          <cf_documents>EDK II FDF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3682</commentid>
    <comment_count>0</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2018-03-13 10:22:00 +0000</bug_when>
    <thetext>WEAK_ALIGNMENT FV attribute is supported by GenFds, but is not documented in the FDF specification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3701</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-03-14 21:06:40 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong to work out spec patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4218</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-28 02:17:52 +0000</bug_when>
    <thetext>fix it SHA-1: a307fbd6819e9878a0904e5c8dac436f8e63f373</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>433</bug_id>
          
          <creation_ts>2017-03-20 20:35:11 +0000</creation_ts>
          <short_desc>NVM Express handle TIMEOUT incorrectly</short_desc>
          <delta_ts>2017-07-06 00:57:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1649</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-03-20 20:35:11 +0000</bug_when>
    <thetext>In NvmExpressPassthru.c near line 669, if a TIMEOUT is detected, the only thing the NVME driver does is advance the doorbell.  This, in turn, causes an Acync Event/Invalid Doorbell response.

Chapter 9 in quite vague in what to do about a non-admin command timeout, leading one to believe that the current code is correct.  However, this is not the case.  Detecting the TIMEOUT should have a ControllerReset response to terminate the current command, and then reinitialize the controller.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1674</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-23 20:25:42 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1679</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-03-24 01:44:37 +0000</bug_when>
    <thetext>(In reply to Michael Turner from comment #0)
&gt; In NvmExpressPassthru.c near line 669, if a TIMEOUT is detected, the only
&gt; thing the NVME driver does is advance the doorbell.  This, in turn, causes
&gt; an Acync Event/Invalid Doorbell response.
&gt; 
&gt; Chapter 9 in quite vague in what to do about a non-admin command timeout,
&gt; leading one to believe that the current code is correct.  However, this is
&gt; not the case.  Detecting the TIMEOUT should have a ControllerReset response
&gt; to terminate the current command, and then reinitialize the controller.

Yes, the handle for command timeout in NVMe driver can be refined.

We check the codes and find that when a timeout occurs for a synchronous NVMe command, the host does not abort the command nor reset the controller. At the same time, there is no full-queue check for the sync submission queue.

Therefore, it is possible to submit a new command when the sync submission queue is full, which leads to an &apos;Invalid Doorbell Write Value&apos; asynchronous event from the controller.

We will submit a patch to trigger a controller level reset when a timeout occurs for an NVMe command.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2383</commentid>
    <comment_count>3</comment_count>
      <attachid>83</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-07-03 01:37:41 +0000</bug_when>
    <thetext>Created attachment 83
Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2384</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-07-03 01:39:57 +0000</bug_when>
    <thetext>(In reply to Michael Turner from comment #0)
&gt; In NvmExpressPassthru.c near line 669, if a TIMEOUT is detected, the only
&gt; thing the NVME driver does is advance the doorbell.  This, in turn, causes
&gt; an Acync Event/Invalid Doorbell response.
&gt; 
&gt; Chapter 9 in quite vague in what to do about a non-admin command timeout,
&gt; leading one to believe that the current code is correct.  However, this is
&gt; not the case.  Detecting the TIMEOUT should have a ControllerReset response
&gt; to terminate the current command, and then reinitialize the controller.

Hi Michael,

Could you help to test whether the attached patch resolve the issue you met? Thanks in advance.

Thanks,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2398</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-07-06 00:57:37 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/5f5bba14b64bef23ac4fbe401db9313e91713026</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>83</attachid>
            <date>2017-07-03 01:37:41 +0000</date>
            <delta_ts>2017-07-03 01:37:41 +0000</delta_ts>
            <desc>Patch</desc>
            <filename>0001-MdeModulePkg-NvmExpressDxe-Handle-timeout-for-blocki.patch</filename>
            <type>text/plain</type>
            <size>6475</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>797</bug_id>
          
          <creation_ts>2017-11-26 22:11:27 +0000</creation_ts>
          <short_desc>&quot;Command.efi -?&quot; may not show manual sometimes</short_desc>
          <delta_ts>2018-02-12 22:08:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3125</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-11-26 22:11:27 +0000</bug_when>
    <thetext>Shell core was enhanced to find the manual string in PE resource section.
But the finding algorithm is too strict: If the manual is written beginning with:
.TH command 0 &quot;descripton of command&quot;

but user types &quot;COMMAND.efi -?&quot;. The finding algorithm uses case-sensitive compare between &quot;command&quot; and &quot;COMMAND&quot; resulting in the manual cannot be found.

The case-insensitive comparing should be used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3153</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-30 19:09:39 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3591</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-02-12 22:08:26 +0000</bug_when>
    <thetext>pushed @ UDK2018 e7e98746b1e8335e53ceca01f80c667e5019e396
@ master 0a54cd4431c31ab2e72d880a55c31dd08f971cc4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>705</bug_id>
          
          <creation_ts>2017-09-12 03:28:57 +0000</creation_ts>
          <short_desc>Path string buffer left overflow in PathCleanUpDirectories()</short_desc>
          <delta_ts>2017-09-21 02:08:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2723</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-09-12 03:28:57 +0000</bug_when>
    <thetext>There is a string buffer overflow issue in PathCleanUpDirectories() of MdePkg\Library\BaseLib\FilePaths.c.

line 95:
  if (StrCmp (Path + StrLen (Path) - 2, L&quot;\\.&quot;) == 0) {
    ... 

Above code assume the Path string length must &gt;= 2, but it is not true when in a shell root directory, e.g. in fs0:, the StrLen (Path) = 0.

Below is the Asan call stack info:

StrLen
/home/jshi19/wksp_efi/edk2/MdePkg/Library/BaseLib/String.c:175:20
StrSize
/home/jshi19/wksp_efi/edk2/MdePkg/Library/BaseLib/String.c:211:27
StrCmp
/home/jshi19/wksp_efi/edk2/MdePkg/Library/BaseLib/String.c:252:3
PathCleanUpDirectories
/home/jshi19/wksp_efi/edk2/MdePkg/Library/BaseLib/FilePaths.c:95:49
EfiShellSetCurDir
/home/jshi19/wksp_efi/edk2/ShellPkg/Application/Shell/ShellProtocol.c:3061:3
ShellCommandRunCd
/home/jshi19/wksp_efi/edk2/ShellPkg/Library/UefiShellLevel2CommandsLib/Cd.c:320:22
ShellCommandRunCommandHandler
/home/jshi19/wksp_efi/edk2/ShellPkg/Library/UefiShellCommandLib/UefiShellCommandLib.c:684:10
RunInternalCommand
/home/jshi19/wksp_efi/edk2/ShellPkg/Application/Shell/Shell.c:2338:14
RunCommandOrFile
/home/jshi19/wksp_efi/edk2/ShellPkg/Application/Shell/Shell.c:2437:14
SetupAndRunCommandOrFile
/home/jshi19/wksp_efi/edk2/ShellPkg/Application/Shell/Shell.c:2571:12


You can reproduce this issue by print the StrLen(Path) in debug log and run &quot;cd .&quot; or &quot;cd ..&quot; command in shell fs0: root directory.

Because the DEBUG() cannot be directly used in BaseLib, but can be easily used in Shell App. So I just copy the PathCleanUpDirectories() function code to the edk2\ShellPkg\Application\Shell\ShellProtocol.c and rename it as PathCleanUpDirectories_Test(). In the PathCleanUpDirectories_Test(), I use the DEBUG() to output the the Path, StrLen(Path) and StrSize(Path) like below:

+++ b/ShellPkg/Application/Shell/ShellProtocol.c
@@ -2998,6 +2998,60 @@ EfiShellGetCurDir(
     return (NULL);
   }
 }
+CHAR16*
+EFIAPI
+PathCleanUpDirectories_Test(
+  IN CHAR16 *Path
+)
+{
+  CHAR16  *TempString;
+
+  if (Path == NULL) {
+    return NULL;
+  }
+
+  //
+  // Replace the &apos;/&apos; with &apos;\&apos;
+  //
+  for (TempString = Path; *TempString != CHAR_NULL; TempString++) {
+    if (*TempString == L&apos;/&apos;) {
+      *TempString = L&apos;\\&apos;;
+    }
+  }
+
+  //
+  // Remove all the &quot;\.&quot;. E.g.: fs0:\abc\.\def\.
+  //
+  while ((TempString = StrStr (Path, L&quot;\\.\\&quot;)) != NULL) {
+    CopyMem (TempString, TempString + 2, StrSize (TempString + 2));
+  }
+  DEBUG ((EFI_D_ERROR, &quot;Path=%S\n&quot;, Path));
+  DEBUG ((EFI_D_ERROR, &quot;StrLen (Path)=%d\n&quot;, StrLen (Path)));
+  DEBUG ((EFI_D_ERROR, &quot;StrSize (Path)=%d\n&quot;, StrSize (Path)));
+  if (StrCmp (Path + StrLen (Path) - 2, L&quot;\\.&quot;) == 0) {
+    Path[StrLen (Path) - 1] = CHAR_NULL;
+  }
+
+  //
+  // Remove all the &quot;\..&quot;. E.g.: fs0:\abc\..\def\..
+  //
+  while (((TempString = StrStr(Path, L&quot;\\..&quot;)) != NULL) &amp;&amp;
+         ((*(TempString + 3) == L&apos;\\&apos;) || (*(TempString + 3) == CHAR_NULL))
+        ) {
+    *(TempString + 1) = CHAR_NULL;
+    PathRemoveLastItem(Path);
+    CopyMem (Path + StrLen (Path), TempString + 3, StrSize (TempString + 3));
+  }
+
+  //
+  // Replace the &quot;\\&quot; with &quot;\&quot;
+  //
+  while ((TempString = StrStr (Path, L&quot;\\\\&quot;)) != NULL) {
+    CopyMem (TempString, TempString + 1, StrSize (TempString + 1));
+  }
+
+  return Path;
+}
 
 /**
   Changes the current directory on the specified device.
@@ -3058,7 +3112,7 @@ EfiShellSetCurDir(
   DirectoryName = StrnCatGrow(&amp;DirectoryName, NULL, Dir, 0);
   ASSERT(DirectoryName != NULL);
 
-  PathCleanUpDirectories(DirectoryName);
+  PathCleanUpDirectories_Test(DirectoryName);
 
   if (FileSystem == NULL) {
     //

In shell fs0: root directory, run &quot;cd .&quot; command: 
FS0\&gt; cd .

I get the below output in logs:
Path=
StrLen (Path)=0
StrSize (Path)=2

So the Path string Strlen == 0 in this case, which causes the next line code (Path + StrLen (Path) - 2) memory access left buffer overflow.

This issue can be easily fixed as below to check the Path string length must &gt;= 2:

line 95:
  if ((StrLen (Path) &gt;= 2) &amp;&amp; (StrCmp (Path + StrLen (Path) - 2, L&quot;\\.&quot;) == 0)) {
    ...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2732</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-14 20:04:35 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2753</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-21 02:08:48 +0000</bug_when>
    <thetext>Resolved via:
https://github.com/tianocore/edk2/commit/9fdf31789a7088736bc574f6802f4a97b5ef2e97</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>912</bug_id>
          
          <creation_ts>2018-03-28 01:41:23 +0000</creation_ts>
          <short_desc>BaseTools: An empty FDF file cause build crash</short_desc>
          <delta_ts>2018-07-29 21:30:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3779</commentid>
    <comment_count>0</comment_count>
      <attachid>157</attachid>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-28 01:41:23 +0000</bug_when>
    <thetext>Created attachment 157
report mail

WORKSPACE        = /home/hrimih/work/edk2.git
ECP_SOURCE       = /home/hrimih/work/edk2.git/EdkCompatibilityPkg
EDK_SOURCE       = /home/hrimih/work/edk2.git/EdkCompatibilityPkg
EFI_SOURCE       = /home/hrimih/work/edk2.git/EdkCompatibilityPkg
EDK_TOOLS_PATH   = /home/hrimih/work/edk2.git/BaseTools
CONF_PATH        = /home/hrimih/work/edk2.git/Conf


Architecture(s)  = X64
Build target     = DEBUG
Toolchain        = GCC5

Active Platform          = /home/hrimih/work/edk2.git/HvmfPkg/HvmfPkg.dsc
Flash Image Definition   = /home/hrimih/work/edk2.git/HvmfPkg/HvmfPkg.fdf

Processing meta-data


build.py...
  : error C0DE: Unknown fatal error when processing [/home/hrimih/work/edk2.git/HvmfPkg/HvmfPkg.dsc]

(Please send email to edk2-devel@lists.01.org for help, attaching following call stack trace!)

(Python 2.7.13 on linux2) Traceback (most recent call last):
   File &quot;/home/hrimih/work/edk2.git/BaseTools/BinWrappers/PosixLike/../../Source/Python/build/build.py&quot;, line 2488, in Main
     MyBuild.Launch()
   File &quot;/home/hrimih/work/edk2.git/BaseTools/BinWrappers/PosixLike/../../Source/Python/build/build.py&quot;, line 2219, in Launch
     self._BuildPlatform()
   File &quot;/home/hrimih/work/edk2.git/BaseTools/BinWrappers/PosixLike/../../Source/Python/build/build.py&quot;, line 1743, in _BuildPlatform
     self.Progress
   File &quot;/home/hrimih/work/edk2.git/BaseTools/Source/Python/AutoGen/AutoGen.py&quot;, line 184, in __new__
     if not AutoGenObject._Init(Workspace, MetaFile, Target, Toolchain, Arch, *args, **kwargs):
   File &quot;/home/hrimih/work/edk2.git/BaseTools/Source/Python/AutoGen/AutoGen.py&quot;, line 330, in _Init
     Fdf.ParseFile()
   File &quot;/home/hrimih/work/edk2.git/BaseTools/Source/Python/GenFds/FdfParser.py&quot;, line 1410, in ParseFile
     self.Preprocess()
   File &quot;/home/hrimih/work/edk2.git/BaseTools/Source/Python/GenFds/FdfParser.py&quot;, line 1386, in Preprocess
     self.__StringToList()
   File &quot;/home/hrimih/work/edk2.git/BaseTools/Source/Python/GenFds/FdfParser.py&quot;, line 448, in __StringToList
     self.Profile.FileLinesList[-1].append(&apos; &apos;)
IndexError: list index out of range</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3791</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-28 21:04:25 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4466</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-29 21:30:59 +0000</bug_when>
    <thetext>fixed it. SHA-1: 3b46dd93ddf65a2cf1377bc72cdeb8ae3f7d81c8</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>157</attachid>
            <date>2018-03-28 01:41:23 +0000</date>
            <delta_ts>2018-03-28 01:41:23 +0000</delta_ts>
            <desc>report mail</desc>
            <filename>edk2 error C0DE Unknown fatal error when processing.msg</filename>
            <type>application/octet-stream</type>
            <size>48640</size>
            <attacher name="Yonghong Zhu">yonghong.zhu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>724</bug_id>
          
          <creation_ts>2017-09-28 21:21:51 +0000</creation_ts>
          <short_desc>CpuDxe driver assert on IA32 platforms</short_desc>
          <delta_ts>2017-10-18 03:00:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2802</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2017-09-28 21:21:51 +0000</bug_when>
    <thetext>The BIOS boot will hang on an ASSERT error on IA32 platforms like OVMF and Quark. The ASSERT code is at line 297 in file UefiCpuPkg/CpuDxe/CpuPageTable.c:

    ASSERT((PagingContext-&gt;ContextData.Ia32.Attributes &amp; PAGE_TABLE_LIB_PAGING_CONTEXT_IA32_X64_ATTRIBUTES_PAE) != 0);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2868</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-12 20:11:52 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2894</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2017-10-18 03:00:51 +0000</bug_when>
    <thetext>Fixed at c46bced224b42d5a03bc8b207167829aa4e7bc5b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>551</bug_id>
          
          <creation_ts>2017-05-18 02:59:20 +0000</creation_ts>
          <short_desc>[DOC] Add PI1.5 standalone SMM support in FDF file</short_desc>
          <delta_ts>2018-10-25 20:58:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II FDF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2062</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-05-18 02:59:20 +0000</bug_when>
    <thetext>See below change request based upon EDK II FDF File Spec V1.27.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2065</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-05-18 03:24:08 +0000</bug_when>
    <thetext>1.2 Terms (page 18)
Module Type
All libraries and components belong to one of the following module types: BASE, SEC, PEI_CORE, PEIM, SMM_CORE, SMM_CORE_STANDALONE, DXE_CORE, DXE_DRIVER, DXE_RUNTIME_DRIVER, DXE_SMM_DRIVER, SMM_STANDALONE, DXE_SAL_DRIVER, UEFI_DRIVER, or UEFI_APPLICATION.



2.5.6 FILE Statements (page 50)
Type
EFI FV File Types - one and only one of the following:
SMM_CORE - Sectioned data containing one or more other sections.
SMM_CORE_STANDALONE - Sectioned data containing one or more other sections.
DXE_SMM_DRIVER - Dispatched by the SMM Core
SMM_STANDALONE - Dispatched by the standalone SMM Core



3.2.1 Common Definitions (page 64)
&lt;ModuleType&gt; ::= {&quot;BASE&quot;} {&quot;SEC&quot;} {&quot;PEI_CORE&quot;} {&quot;PEIM&quot;}
{&quot;DXE_CORE&quot;} {&quot;DXE_DRIVER&quot;} {&quot;SMM_CORE&quot;} {&quot;SMM_CORE_STANDALONE&quot;}
{&quot;DXE_RUNTIME_DRIVER&quot;} {&quot;DXE_SAL_DRIVER&quot;}
{&quot;DXE_SMM_DRIVER&quot;}  {&quot;SMM_STANDALONE&quot;} {&quot;UEFI_DRIVER&quot;}
{&quot;UEFI_APPLICATION&quot;} {&quot;USER_DEFINED&quot;}



3.6 [FV] Sections (page 84)
&lt;FvType2&gt; ::= {&quot;FREEFORM&quot;} {&quot;PEI_DXE_COMBO&quot;} {&quot;DRIVER&quot;}
{&quot;DXE_CORE&quot;} {&quot;APPLICATION&quot;} {&quot;SMM_CORE&quot;} {&quot;SMM_CORE_STANDALONE&quot;}
{&quot;SMM&quot;} {&quot;SMM_STANDALONE&quot;}



3.6 [FV] Sections (page 87)
&lt;DepexExpSection&gt; ::= if ( COMPONENT_TYPE == &quot;LIBRARY&quot;
|| LIBRARY_CLASS is declared in defines
section of the INF
|| MODULE_TYPE == &quot;USER_DEFINED&quot; ):
[&lt;Depex&gt;]
else if ( MODULE_TYPE == &quot;PEIM&quot;
|| MODULE_TYPE == &quot;DXE_DRIVER&quot;
|| MODULE_TYPE == &quot;DXE_RUNTIME_DRIVER&quot;
|| MODULE_TYPE == &quot;DXE_SAL_DRIVER&quot;
|| MODULE_TYPE == &quot;SMM_STANDALONE&quot;
|| MODULE_TYPE == &quot;DXE_SMM_DRIVER&quot; ):
&lt;Depex&gt;
else if ( MODULE_TYPE == &quot;UEFI_APPLICATION&quot;
&amp;&amp; MODULE_TYPE == &quot;UEFI_DRIVER&quot;
&amp;&amp; MODULE_TYPE == &quot;PEI_CORE&quot;
&amp;&amp; MODULE_TYPE == &quot;DXE_CORE&quot;
&amp;&amp; MODULE_TYPE == &quot;SMM_CORE&quot;
&amp;&amp; MODULE_TYPE == &quot;SMM_CORE_STANDALONE&quot;
&amp;&amp; MODULE_TYPE == &quot;SEC&quot; ):
No DEPEX section is permitted

&lt;Depex&gt; ::= if (MODULE_TYPE == &quot;PEIM&quot;):
&lt;PeiDepexExp&gt;
else if (MODULE_TYPE == &quot;DXE_SMM_DRIVER&quot;):
&lt;SmmDepexExp&gt; [&lt;DxeDepexExp&gt;]
else if (MODULE_TYPE == &quot;SMM_STANDALONE&quot;):
&lt;SmmDepexExp&gt;
else:
&lt;DxeDepexExp&gt;


3.7 [Capsule] Sections (page 94)
&lt;FvType2&gt; ::= {&quot;FREEFORM&quot;} {&quot;PEI_DXE_COMBO&quot;} {&quot;DRIVER&quot;}
{&quot;DXE_CORE&quot;} {&quot;APPLICATION&quot;} {&quot;SMM_CORE&quot;} {&quot;SMM&quot;} {&quot;SMM_CORE_STANDALONE&quot;} {&quot;SMM_STANDALONE&quot;}


&lt;DepexExpSection&gt; ::= if ( COMPONENT_TYPE == &quot;LIBRARY&quot;
|| LIBRARY_CLASS is declared in defines
section of the INF
|| MODULE_TYPE == &quot;USER_DEFINED&quot; ):
[&lt;Depex&gt;]
else if ( MODULE_TYPE == &quot;PEIM&quot;
|| MODULE_TYPE == &quot;DXE_DRIVER&quot;
|| MODULE_TYPE == &quot;DXE_RUNTIME_DRIVER&quot;
|| MODULE_TYPE == &quot;DXE_SAL_DRIVER&quot;
|| MODULE_TYPE == &quot;SMM_STANDALONE&quot;
|| MODULE_TYPE == &quot;DXE_SMM_DRIVER&quot; ):
&lt;Depex&gt;
elif ( MODULE_TYPE == &quot;UEFI_APPLICATION&quot;
|| MODULE_TYPE == &quot;UEFI_DRIVER&quot;
|| MODULE_TYPE == &quot;PEI_CORE&quot;
|| MODULE_TYPE == &quot;DXE_CORE&quot;
|| MODULE_TYPE == &quot;SMM_CORE&quot;
|| MODULE_TYPE == &quot;SMM_CORE_STANDALONE&quot;
|| MODULE_TYPE == &quot;SEC&quot;):
No DEPEX section is permitted

&lt;Depex&gt; ::= if (MODULE_TYPE == PEIM):
&lt;PeiDepexExp&gt;
elif (MODULE_TYPE == &quot;DXE_SMM_DRIVER&quot;):
&lt;SmmDepexExp&gt; [&lt;DxeDepexExp&gt;]
elif (MODULE_TYPE == &quot;SMM_STANDALONE&quot;):
&lt;SmmDepexExp&gt;
else:
&lt;DxeDepexExp&gt;


3.9 [Rule] Sections (page 105)
&lt;Edk2ModuleType&gt; ::= {&quot;SEC&quot;} {&quot;PEI_CORE&quot;} {&quot;PEIM&quot;} {&quot;SMM_CORE&quot;}
{&quot;DXE_CORE&quot;} {&quot;DXE_DRIVER&quot;} {&quot;SMM_CORE_STANDALONE&quot;}
{&quot;DXE_SAL_DRIVER&quot;} {&quot;DXE_SMM_DRIVER&quot;} {&quot;SMM_STANDALONE&quot;}
{&quot;DXE_RUNTIME_DRIVER&quot;} {&quot;UEFI_DRIVER&quot;}
{&quot;UEFI_APPLICATION&quot;} {&quot;USER_DEFINED&quot;}


&lt;FileStatements&gt; ::= if (MODULE_TYPE == &quot;SEC&quot;
|| MODULE_TYPE == &quot;PEI_CORE&quot;
|| MODULE_TYPE == &quot;PEIM&quot;
|| COMPONENT_TYPE == &quot;PEI_CORE&quot;
|| COMPONENT_TYPE == &quot;PIC_PEIM&quot;
|| COMPONENT_TYPE == &quot;RELOCATABLE_PEIM&quot;
|| COMPONENT_TYPE == &quot;SECURITY_CORE&quot;
|| COMPONENT_TYPE == &quot;PE32_PEIM&quot; ):
&lt;TS&gt; &quot;FILE&quot; &lt;MTS&gt; &lt;FvType1&gt; &lt;Eq&gt;
&lt;FileStatement1&gt;
elif (MODULE_TYPE == &quot;DXE_CORE&quot;
|| MODULE_TYPE == &quot;DXE_DRIVER&quot;
|| MODULE_TYPE == &quot;DXE_SAL_DRIVER&quot;
|| MODULE_TYPE == &quot;SMM_CORE&quot;
|| MODULE_TYPE == &quot;SMM_CORE_STANDALONE&quot;
|| MODULE_TYPE == &quot;DXE_SMM_DRIVER&quot;
|| MODULE_TYPE == &quot;SMM_STANDALONE&quot;
|| MODULE_TYPE == &quot;UEFI_DRIVER&quot;
|| MODULE_TYPE == &quot;UEFI_APPLICATION&quot;
|| MODULE_TYPE == &quot;USER_DEFINED&quot;
|| COMPONENT_TYPE == &quot;BS_DRIVER&quot;
|| COMPONENT_TYPE ==
&quot;COMBINED_PEIM_DRIVER&quot;
|| COMPONENT_TYPE == &quot;APPLICATION&quot;):
{&lt;FileStatement2&gt;} {&lt;FileStatement3&gt;}


3.9 [Rule] Sections (page 106)
&lt;FvType2&gt; ::= {&quot;FREEFORM&quot;} {&quot;DRIVER&quot;} {&quot;DXE_CORE&quot;}
{&quot;APPLICATION&quot;} {&quot;SMM_CORE&quot;} {&quot;SMM&quot;} {&quot;SMM_CORE_STANDALONE&quot;} {&quot;SMM_STANDALONE&quot;}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2084</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-18 20:14:55 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5319</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-18 19:49:59 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5346</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-22 05:04:22 +0000</bug_when>
    <thetext>patch email: https://lists.01.org/pipermail/edk2-devel/2018-October/031213.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5390</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-25 20:58:16 +0000</bug_when>
    <thetext>commit to: https://github.com/tianocore-docs/edk2-FdfSpecification/commit/e23fc4f5936ac4a3f18218fef285a662d2f3461b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>101</bug_id>
          
          <creation_ts>2016-08-17 05:47:12 +0000</creation_ts>
          <short_desc>Incorrect expectation from NetLibAsciiStrToIp4</short_desc>
          <delta_ts>2016-08-25 03:16:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nagaraj Hegde">nagaraj-p.hegde</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>nagaraj-p.hegde</cc>
    
    <cc>siyuan.fu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>435</commentid>
    <comment_count>0</comment_count>
    <who name="Nagaraj Hegde">nagaraj-p.hegde</who>
    <bug_when>2016-08-17 05:47:12 +0000</bug_when>
    <thetext>In HttpImpl.c, we have this piece of code:

    //
    // Parse Url for IPv4 or IPv6 address, if failed, perform DNS resolution.
    //
    if (!HttpInstance-&gt;LocalAddressIsIPv6) {
      Status = NetLibAsciiStrToIp4 (HostName, &amp;HttpInstance-&gt;RemoteAddr);
    } else {
      Status = HttpUrlGetIp6 (Url, UrlParser, &amp;HttpInstance-&gt;RemoteIpv6Addr);
    }

The assumption here is that “If NetLibAsciiStrToIp4 returns EFI_SUCCESS, then HostName had a valid IP address, else, we had a HostName, which would need DNS resolution”. This assumption doesn’t seem to be right for FQDN which contain 3 “.” (dots) 

Take for example, “a.b.hpe.com”. In this case, NetLibAsciiStrToIp4 returns EFI_SUCCESS and RemoteAddr will be “0.0.0.0”, which is incorrect. This is because, in NetLibAsciiStrToIp4, we call AsciiStrDecimalToUintn, which has the following piece of code, for each “.” Separated string:

  Result = 0;

  while (InternalAsciiIsDecimalDigitCharacter (*String)) {
    //
    // If the number represented by String overflows according
    // to the range defined by UINTN, then ASSERT().
    //
    ASSERT (Result &lt;= ((((UINTN) ~0) - (*String - L&apos;0&apos;)) / 10));

    Result = Result * 10 + (*String - &apos;0&apos;);
    String++;
  }

  return Result;

For every “a”, “b”, “hpe”, “com”, the above code will return 0, since we would not enter the while loop, effectively translating “a.b.hpe.com” to “0.0.0.0”</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>439</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-18 20:09:35 +0000</bug_when>
    <thetext>Bug Scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>451</commentid>
    <comment_count>2</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2016-08-25 03:16:35 +0000</bug_when>
    <thetext>Commit: d82d59edb0ec23e6ef708e04a5553ac32f1eb12e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>656</bug_id>
          
          <creation_ts>2017-07-28 11:35:46 +0000</creation_ts>
          <short_desc>PciBusDxe: please honor Bus Number padding requests for non-root hotplug controllers as well</short_desc>
          <delta_ts>2018-01-08 03:01:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2524</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-07-28 11:35:46 +0000</bug_when>
    <thetext>At the moment, PciBusDxe only honors bus number padding requests for &quot;root&quot;
hotplug controllers. The PI spec says that such padding should be considered
for both &quot;root&quot; and &quot;nonroot&quot; hotplug controllers. Please see the detailed
report and discussion at:

https://lists.01.org/pipermail/edk2-devel/2017-July/012633.html

Quote:

&gt; In &quot;OvmfPkg/PciHotPlugInitDxe/&quot;, we plan to return some BUS resource
&gt; paddings, from the EFI_PCI_HOT_PLUG_INIT_PROTOCOL.GetResourcePadding()
&gt; function.
&gt;
&gt; QEMU has no &quot;root&quot; hotplug controllers, only &quot;non-root&quot; hotplug
&gt; controllers (using the terminology from &quot;12.6 PCI Hot Plug PCI
&gt; Initialization Protocol&quot; in the PI-1.6 spec). Therefore OVMF&apos;s
&gt; EFI_PCI_HOT_PLUG_INIT_PROTOCOL.GetRootHpcList() returns an empty array.
&gt; The BUS resource padding that we&apos;d like to return from
&gt; GetResourcePadding() would be for &quot;non-root&quot; hotplug controllers.
&gt;
&gt; According to the PI spec, this is a valid thing to do:
&gt;
&gt; * From &quot;12.5 Sample Implementation for a Platform Containing PCI
&gt;   Hot Plug* Slots&quot;:
&gt;
&gt; &gt; [...] For all the root HPCs and the nonroot HPCs, call
&gt; &gt; EFI_PCI_HOT_PLUG_INIT_PROTOCOL.GetResourcePadding() to obtain the
&gt; &gt; amount of overallocation and add that amount to the requests from the
&gt; &gt; physical devices. Reprogram the bus numbers by taking into account the
&gt; &gt; bus resource padding information. [...]
&gt;
&gt; * From &quot;12.6 PCI Hot Plug PCI Initialization Protocol,
&gt;   EFI_PCI_HOT_PLUG_INIT_PROTOCOL.GetResourcePadding()&quot;:
&gt;
&gt; &gt; [...] This member function is called for all the root HPCs and nonroot
&gt; &gt; HPCs that are detected by the PCI bus enumerator. [...] The PCI bus
&gt; &gt; driver is responsible for adding this resource request to the resource
&gt; &gt; requests by the physical PCI devices. [...]
&gt;
&gt; I searched PciBusDxe for GetResourcePadding() call sites, and there are
&gt; two:
&gt;
&gt; (1) In &quot;MdeModulePkg/Bus/Pci/PciBusDxe/PciHotPlugSupport.c&quot;, function
&gt;     GetResourcePaddingForHpb(). This call site seems to work as follows,
&gt;     for our purposes:
&gt;
&gt;     GetResourcePaddingPpb()                   [MdeModulePkg/Bus/Pci/PciBusDxe/PciResourceSupport.c]
&gt;       GetResourcePaddingForHpb()              [MdeModulePkg/Bus/Pci/PciBusDxe/PciHotPlugSupport.c]
&gt;         gPciHotPlugInit-&gt;GetResourcePadding()
&gt;         //
&gt;         // and then save the resource descriptors, including the bus
&gt;         // padding, in PciIoDevice-&gt;ResourcePaddingDescriptors
&gt;         //
&gt;
&gt;     ResourcePaddingPolicy()  [MdeModulePkg/Bus/Pci/PciBusDxe/PciResourceSupport.c]
&gt;       ApplyResourcePadding() [MdeModulePkg/Bus/Pci/PciBusDxe/PciResourceSupport.c]
&gt;         //
&gt;         // translate IO and MMIO resources from
&gt;         // PciDev-&gt;ResourcePaddingDescriptors to internal padding
&gt;         // representation
&gt;         //
&gt;
&gt;     This call site and processing seem to be active for &quot;non-root&quot;
&gt;     hotplug controllers, but they do not consider bus numbers, only IO
&gt;     and MMIO.
&gt;
&gt; (2) In the PciScanBus() function, file
&gt;     &quot;MdeModulePkg/Bus/Pci/PciBusDxe/PciLib.c&quot;, we have another
&gt;     GetResourcePadding() call -- your present patch is updating this
&gt;     code part.
&gt;
&gt;     From the resource padding list returned by this GetResourcePadding()
&gt;     invocation, PciBusDxe cares only about the bus numbers. I think
&gt;     that&apos;s probably fine. However, in this location,
&gt;     GetResourcePadding() is called *only* for &quot;root&quot; hotplug
&gt;     controllers, of which QEMU has none.
&gt;
&gt; The end result is that bus number paddings are not considered at all
&gt; for &quot;non-root&quot; hotplug controllers:
&gt; - site (1) is active for &quot;non-root&quot; HPCs, but it ignores bus number
&gt;   paddings,
&gt; - site (2) processes bus number paddings, but it is inactive for
&gt;   &quot;non-root&quot; HPCs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2554</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-03 20:11:53 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3353</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-01-08 03:01:08 +0000</bug_when>
    <thetext>pushed @ 2e94e412977900157296cdbd01b2d5135a66ba35 and cbbccf3cf39247456746949dfaa00ff4bbc6826f.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>206</bug_id>
          
          <creation_ts>2016-11-03 01:07:15 +0000</creation_ts>
          <short_desc>[basetool] need PKCS7 tool has key generation script.</short_desc>
          <delta_ts>2022-02-15 22:32:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>821</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-11-03 01:07:15 +0000</bug_when>
    <thetext>Current only RSA2048 tool has key generation script.

We also need PKCS7 tool has key generation script.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>864</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-09 20:14:21 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5484</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:38:13 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18388</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-15 22:32:36 +0000</bug_when>
    <thetext>Nobody else requests this script for years, so close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>119</bug_id>
          
          <creation_ts>2016-09-12 22:00:50 +0000</creation_ts>
          <short_desc>XHCI host controller reset operation requires an additional 1ms delay on some HCs</short_desc>
          <delta_ts>2016-10-18 00:52:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Feng Tian">feng.tian</reporter>
          <assigned_to name="Feng Tian">feng.tian</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>484</commentid>
    <comment_count>0</comment_count>
    <who name="Feng Tian">feng.tian</who>
    <bug_when>2016-09-12 22:00:50 +0000</bug_when>
    <thetext>We got feedback that the reset operation on XHCI host controller requires 1ms additional delay for some HCs.

I checked linux source code, it also has such delay. as the delay doesn&apos;t impact the whole boot performance too much. I will suggest to add such delay directly rather than introducing a PCD.

The proposed solution is adding a 1 ms delay inside \MdeModulePkg\Bus\Pci\XhciDxe\XhciReg.c as follow:

XhcSetOpRegBit (Xhc, XHC_USBCMD_OFFSET, XHC_USBCMD_RESET);
gBS-&gt;Stall (XHC_POLL_DELAY);//&lt;-1 ms delay
Status = XhcWaitOpRegBit (Xhc, XHC_USBCMD_OFFSET, XHC_USBCMD_RESET, FALSE, Timeout);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>541</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-29 20:31:43 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>616</commentid>
    <comment_count>2</comment_count>
    <who name="Feng Tian">feng.tian</who>
    <bug_when>2016-10-18 00:52:26 +0000</bug_when>
    <thetext>The patch has been checked in at dbe10619bc443215477c5c0c4c949410bf68b1ec..1f87985ab7958664a84da78095b5892f88acf3f1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>759</bug_id>
          
          <creation_ts>2017-11-07 02:13:45 +0000</creation_ts>
          <short_desc>[Build] doesn&apos;t re-build UNI file</short_desc>
          <delta_ts>2017-11-14 03:24:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2981</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-11-07 02:13:45 +0000</bug_when>
    <thetext>Reproduce step:
1. Change ShellPkg\Library\UefiHandleParsingLib\UefiHandleParsingLib.uni
   Find STR_PCIRB_DUMP_TITLE and append &quot;x&quot; in the end of &quot;====&quot;
2. Build OVMF IA32 FD
3. Launch OVMF and check that there is no &quot;x&quot; in the &quot;dh -v 33&quot; output.
   Note: 33 is the handle number of PciRootBridgeIo.

In Step 2, I also noticed that Shell is not re-built.

Re-build is performed when changing ShellPkg\Library\UefiHandleParsingLib\UefiHandleParsingLib.inf.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3002</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-11-08 20:05:01 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3051</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-14 03:24:44 +0000</bug_when>
    <thetext>Fixed it by SHA-1: 36513f3a6bcc67a460f63190b27deb3565bd2de3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>311</bug_id>
          
          <creation_ts>2016-12-28 00:02:36 +0000</creation_ts>
          <short_desc>Correct the comments of macros FixedPcdGetX and PatchPcdXXX</short_desc>
          <delta_ts>2017-01-18 02:31:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1215</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2016-12-28 00:02:36 +0000</bug_when>
    <thetext>Both macros FixedPcdGetX and PatchPcdXXX have comments below in PcdLib.h.

&quot;If TokenName is not a feature flag, then the module will not build.&quot;

I guess it was just copied from the comments of macro FeaturePcdGet.

It should be updated to
&quot;If TokenName is not a fixed at build flag, then the module will not build.&quot; for macros FixedPcdGetX
or
&quot;If TokenName is not a patchable in module flag, then the module will not build.&quot; for macros PatchPcdXXX.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1259</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-05 19:16:41 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1338</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-01-18 02:31:11 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/88fd27e5b2cae68ff5a11cd5560ef5f98d001c42</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>499</bug_id>
          
          <creation_ts>2017-04-20 23:50:50 +0000</creation_ts>
          <short_desc>Incorrect RemoveEntryList causes exception in the Transmit error path for Ip4Dxe</short_desc>
          <delta_ts>2017-04-27 20:28:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sriram">sriram-s</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>sriram-s</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1892</commentid>
    <comment_count>0</comment_count>
    <who name="Sriram">sriram-s</who>
    <bug_when>2017-04-20 23:50:50 +0000</bug_when>
    <thetext>Ip4OnArpResolvedDpc():
    //
    // Insert the tx token before transmitting it via MNP as the FrameSentDpc
    // may be called before Mnp-&gt;Transmit returns which will remove this tx
    // token from the SentFrames list. Remove it from the list if the returned
    // Status of Mnp-&gt;Transmit is not EFI_SUCCESS as in this case the
    // FrameSentDpc won&apos;t be queued.
    //
    InsertTailList (&amp;Interface-&gt;SentFrames, &amp;Token-&gt;Link);

    Status = Interface-&gt;Mnp-&gt;Transmit (Interface-&gt;Mnp, &amp;Token-&gt;MnpToken);
    if (EFI_ERROR (Status)) {
      RemoveEntryList (Entry);   &lt;------ [Sriram]: this must &amp;Token-&gt;Link
      Token-&gt;CallBack (Token-&gt;IpInstance, Token-&gt;Packet, Status, 0, Token-&gt;Context);

      Ip4FreeLinkTxToken (Token);
      continue;
    }



Ip4SendFrame():
SEND_NOW:
  //
  // Insert the tx token into the SentFrames list before calling Mnp-&gt;Transmit.
  // Remove it if the returned status is not EFI_SUCCESS.
  //
  InsertTailList (&amp;Interface-&gt;SentFrames, &amp;Token-&gt;Link);
  Status = Interface-&gt;Mnp-&gt;Transmit (Interface-&gt;Mnp, &amp;Token-&gt;MnpToken);
  if (EFI_ERROR (Status)) {
    RemoveEntryList (&amp;Interface-&gt;SentFrames);  &lt;------ [Sriram]: this must be &amp;Token-&gt;Link
    goto ON_ERROR;
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1893</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-20 23:54:28 +0000</bug_when>
    <thetext>
working on the fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1959</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-27 20:16:02 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1960</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-27 20:28:05 +0000</bug_when>
    <thetext>Master commit version:
https://github.com/tianocore/edk2/commit/ad18ec95437e6947ba4190f2b281659999db880b

UDK2017 commit version:
https://github.com/tianocore/edk2/commit/7a4b6b168821053674e28d8fea82b5363eacfd03</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>690</bug_id>
          
          <creation_ts>2017-09-04 00:21:23 +0000</creation_ts>
          <short_desc>Read BufferOverflow in EfiShellGetDevicePathFromFilePath</short_desc>
          <delta_ts>2017-09-21 02:09:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2667</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-09-04 00:21:23 +0000</bug_when>
    <thetext>edk2 Asan catch a read buffer over flow in EfiShellGetDevicePathFromFilePath() of  edk2\ShellPkg\Application\Shell\ShellProtocol.c 

line 598
  //
  // build the full device path
  //
  if (*(Path+StrLen(MapName)+1) == CHAR_NULL) {
    ...

The above Path is type CHAR16 *, which is a two bytes pointer, when add a instant offset to the CHAR16 *, the real addend is 2*offset in fact. 

The read buffer overflow can be fixed to force the Path as char * type like below:

  if (*((char *)Path+StrLen(MapName)+1) == CHAR_NULL) {
   ...
 
You can add below debug message to see the addend difference:
  //
  // build the full device path
  //
  Length = StrLen(MapName)+1;
  DEBUG((EFI_D_ERROR, &quot;Length= 0x%x\n&quot;, Length));
  DEBUG((EFI_D_ERROR, &quot;Path= 0x%x\n&quot;, Path));
  Address = (UINTN)(Path+StrLen(MapName)+1);
  DEBUG((EFI_D_ERROR, &quot;Address= 0x%x\n&quot;, Address));
  Address = (UINTN)((char *)Path+StrLen(MapName)+1);
  DEBUG((EFI_D_ERROR, &quot;(char *)Address= 0x%x\n&quot;, Address));
  if (*((char *)Path+StrLen(MapName)+1) == CHAR_NULL) {
    ...

In debug log, I get below output in my side:
Length= 0x5
Path= 0x7820FDA8
Address= 0x7820FDB2
(char *)Address= 0x7820FDAD</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2710</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-07 20:07:53 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2718</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-09-11 02:18:31 +0000</bug_when>
    <thetext>Sorry, this buffer overflow problem is because Path+StrLen(MapName) should not +1 to get the string end. So, the fix should be:

  if (*(Path+StrLen(MapName)) == CHAR_NULL) {
    ...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2754</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-21 02:09:13 +0000</bug_when>
    <thetext>Resolved via:
https://github.com/tianocore/edk2/commit/8c3e4688e0d8e6c218a98855d98976ce46dbb29e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>240</bug_id>
          
          <creation_ts>2016-11-17 01:47:40 +0000</creation_ts>
          <short_desc>[ShellPkg] The &apos;cd&apos; command does not work properly for certain path format</short_desc>
          <delta_ts>2017-01-04 03:08:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>972</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-11-17 01:47:40 +0000</bug_when>
    <thetext>Take the following case as an example:

When there&apos;s a directory named &apos;test&apos; under fs0:, the &apos;cd&apos; command under shell does not work properly for the command &apos;cd fs0:test&apos;.

The command will change the current directory to fs0:\est (which does not exist) with no error indicated. If followed by an &apos;ls&apos; command, message &apos;ls: File Not Found - &apos;FS0:\est\&apos;&apos; will be shown.

As a comparision, the command &apos;cd fs0:\test&apos; will change the current directory to fs0:\test and &apos;ls&apos; command will show the contents in that directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>980</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-17 19:10:56 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1112</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-12-04 20:29:55 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/0db4acb61ac4e79a8a95b0e82874e8b6bed8e4bb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1133</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-12-07 20:38:17 +0000</bug_when>
    <thetext>Still working on the fix. The commit URL is incorrect.(In reply to Ruiyu Ni from comment #2)
&gt; https://github.com/tianocore/edk2/commit/
&gt; 0db4acb61ac4e79a8a95b0e82874e8b6bed8e4bb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1241</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-01-04 03:08:40 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/bb99e3282c9e69fbd6365d117c58d15589e34c5d
      https://github.com/tianocore/edk2/commit/d9bb3ca3c2a1bd3f7b78adf27e82e5605f665e16</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>155</bug_id>
          
          <creation_ts>2016-10-18 02:40:07 +0000</creation_ts>
          <short_desc>PXE boot fails to assign an IP whose last octet is zero (in subnet 255.255.0.0)</short_desc>
          <delta_ts>2016-10-28 02:22:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>620</commentid>
    <comment_count>0</comment_count>
      <attachid>17</attachid>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2016-10-18 02:40:07 +0000</bug_when>
    <thetext>Created attachment 17
Wireshark log for the failure case.

First of all, the below is the server configuration.

[Server Configuration]
Ipv4 address : 192.168.0.1/16
Netmask: 255.255.0.0

DHCPv4 Scope:
Range: 192.168.0.2 to 192.168.10.10
Netmask: 255.255.0.0

    It has been observed that in the given address range, if the server tries to allocate any IP address with the last octet as 0 i.e., for instance, 192.168.A.0 where A vary from 1 to 10, then the PXE boot fails saying &quot;PXE-E09: Could not allocate I/O buffers.&quot; 

    It is known that based on the subnet, the addresses x.y.z.0 and x.y.z.255 are network address and can&apos;t be assigned to any system present in the network.  (In this case, 192.168.0.0 and 192.168.255.255). But here, the Netmask is different which expects the IP address x.y.a.0 which is within the range is valid and can be assigned to any client in the network.

    The current edk2 doesn&apos;t support this whereas a previous bug was reported for the classless IP support. But that patch helps when there are no IP addresses in its DHCP address pool whose last octet is zero.

[Reproduction Steps]
1. Configure a DHCP server with the configuration given above.
2. From the client. try for an IPv4 PXE boot.

[Actual Result]
The PXE boot fails saying &quot;PXE-E09: Could not allocate I/O buffers.&quot;

[Expected Result]
The PXE boot should happen without any failures.

    The attached Wireshark log may provide more details for the same.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>621</commentid>
    <comment_count>1</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2016-10-18 03:16:46 +0000</bug_when>
    <thetext>Investigation result:
Current IP4 stack do not support classless IP address.

Details:
The classless IP address is not considered by the NetLib API NetGetIpClass() and NetIp4IsUnicast(), while these 2 interface are widely used by almost all network drivers. May need to add new API to NetLib to support this feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>662</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:15:50 +0000</bug_when>
    <thetext>Bug scrub: 
Siyuan: is it a feature request or implementation gap ?  is it required by UEFI spec ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>783</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2016-10-28 02:22:39 +0000</bug_when>
    <thetext>Committed to edk2:

SHA-1: 3289dcba45e48af5c4fd329f57c49cc8e5830ed8
SHA-1: 01b5ac880f00cf89833e6fc80666bccc9779dea7
SHA-1: 6c12fe63f989b1a3aff9f44c22b2833fa78cfcab</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>17</attachid>
            <date>2016-10-18 02:40:07 +0000</date>
            <delta_ts>2016-10-18 02:40:07 +0000</delta_ts>
            <desc>Wireshark log for the failure case.</desc>
            <filename>PXE_IP4_Diff_Subnet.pcapng</filename>
            <type>application/octet-stream</type>
            <size>3964</size>
            <attacher name="Naveen Santhapur">naveens</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>256</bug_id>
          
          <creation_ts>2016-11-27 22:27:44 +0000</creation_ts>
          <short_desc>add NVMe PEI blockIo support</short_desc>
          <delta_ts>2018-06-24 22:09:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Feng Tian">feng.tian</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>anbazhagan</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1029</commentid>
    <comment_count>0</comment_count>
    <who name="Feng Tian">feng.tian</who>
    <bug_when>2016-11-27 22:27:44 +0000</bug_when>
    <thetext>We have had NVMe dxe driver, but no PEI support.

This is used to track such request to support BlkIo support in PEI phase.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1098</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-01 19:04:26 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2567</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-08-07 23:14:18 +0000</bug_when>
    <thetext>Take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4204</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-06-24 22:09:12 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/b8b6943393cfa3ab7ffcaf5bd0a12f20c018481e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>622</bug_id>
          
          <creation_ts>2017-07-07 12:50:42 +0000</creation_ts>
          <short_desc>map -r or -u don&apos;t work with CDROM</short_desc>
          <delta_ts>2017-09-05 22:48:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Oleksiy">oleksiyy</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>oleksiyy</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2406</commentid>
    <comment_count>0</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2017-07-07 12:50:42 +0000</bug_when>
    <thetext>Steps to reproduce:

1. Boot to Shell with empty CDROM (SATA or USB).
2. Enter CD with file system. 
3. Type &quot;map -r&quot; (or -u).

No change in mapping - file system on CD not displayed. Reboot system and see CD file system in map.
In Debug mode no Start/Stop functions calls displayed after map -r (or -u).

Repeating steps 1-3 with EDK I Shell will result in CD file system displayed after &quot;map -r&quot; command, and couple of Start/Stop functions displayed in debug mode.

&quot;map -r&quot; (-u) does not work also if boot with CD in CDROM and remove it before remapping.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2490</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-20 20:13:10 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigation firstly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2500</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-24 22:38:37 +0000</bug_when>
    <thetext>CD content is not refreshed in UEFI Shell when typing &quot;map -r&quot;. It looks like a behavior change between EDK Shell and UEFI Shell.
I prefer to fix the behavior gap in UEFI Shell to close this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2507</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-26 05:20:28 +0000</bug_when>
    <thetext>pushed @ 1ccfe74ef4bf261e07f99f615a880e34fd4185ef</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2595</commentid>
    <comment_count>4</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2017-08-11 12:11:36 +0000</bug_when>
    <thetext>I take changes and tested on two different platform.
It is working on platform based on pure EDKII and don&apos;t work on our platform.
Looking deeper I found out that this fix based on assumption, that BlockIo will be re-installed if media change will be detected as a result of added RedBlocks. 
Looking through specification, I was not able to found, that such behavior is mandatory.

So, in my understanding, this fix must be rewritten, in a way, that in will call connect on block IO where EFI_MEDIA_CHANGED will be returned. Or some other way which is not firmware implementation specific.

Regards, Oleksiy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2618</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-08-21 00:09:12 +0000</bug_when>
    <thetext>Oleksiy,

Refer to EDKII Driver Writer Guide:

24.2.2 ReadBlocks() and ReadBlocksEx() Implementation
Reading blocks from media typically uses the following order of operations:
1. Verify media presence. This is critical for removable or swappable media.
2. If a media change event is detected, then reinstall the Block I/O Protocols
using the UEFI Boot Service ReinstallProtocolInterface(). A media change
event can be a change from the media present state to the media not
present state. A change from the media not present state to the media
present state. The BlockSize field of the Media structure must have a nonzero value, even when no media is present.
• If there is no media, return EFI_NO_MEDIA.
• If the media is different, return EFI_MEDIA_CHANGED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2619</commentid>
    <comment_count>6</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2017-08-21 11:41:12 +0000</bug_when>
    <thetext>Hi Ruiyu.

EDKII Driver Writer Guide is not a normative material, in my understanding. And Shell should work on any UEFI complaint system. And UEFI spec does not require Reinstall on media change.

Here is my vision of ProbeForMediaChange which should work on any UEFI complaint system: 

VOID
ProbeForMediaChange (
  VOID
  )
{
  EFI_STATUS                            Status;
  UINTN                                 HandleCount;
  EFI_HANDLE                            *Handles;
  EFI_BLOCK_IO_PROTOCOL                 *BlockIo;
  UINTN                                 Index;

  gBS-&gt;LocateHandleBuffer (
         ByProtocol,
         &amp;gEfiBlockIoProtocolGuid,
         NULL,
         &amp;HandleCount,
         &amp;Handles
         );
  //
  // Probe for media change for every physical block io
  //
  for (Index = 0; Index &lt; HandleCount; Index++) {
    Status = gBS-&gt;HandleProtocol (
                    Handles[Index],
                    &amp;gEfiBlockIoProtocolGuid,
                    (VOID **) &amp;BlockIo
                    );
    if (!EFI_ERROR (Status)) {
//*** PORTING BEGIN ***//
      if (BlockIo-&gt;Media-&gt;RemovableMedia &amp;&amp; !BlockIo-&gt;Media-&gt;LogicalPartition){
    	  
      BOOLEAN MediaPresent = FALSE;
      if (BlockIo-&gt;Media-&gt;MediaPresent) 
    	  MediaPresent = TRUE;

        //
        // Per spec:
        //   The function (ReadBlocks) must return EFI_NO_MEDIA or
        //   EFI_MEDIA_CHANGED even if LBA, BufferSize, or Buffer are invalid so the caller can probe
        //   for changes in media state.
        //

    	  // If Media Changed call ConnectController on this Handle
    	  Status = BlockIo-&gt;ReadBlocks (
                   BlockIo,
                   BlockIo-&gt;Media-&gt;MediaId,
                   0,
                   0,
                   NULL
                   );
          if (Status == EFI_MEDIA_CHANGED)
          {
        	  if (MediaPresent)
        		  gBS-&gt;DisconnectController (Handles[Index], NULL, NULL);
  
        	  gBS-&gt;ConnectController (Handles[Index], NULL, NULL, TRUE);
          }
          if (Status == EFI_NO_MEDIA &amp;&amp; MediaPresent)
        	  gBS-&gt;DisconnectController (Handles[Index], NULL, NULL);
//*** PORTING END ***//
      
      }
    }
  }
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2628</commentid>
    <comment_count>7</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-08-23 22:50:33 +0000</bug_when>
    <thetext>Oleksiy,
The description of &quot;EFI_BOOT_SERVICES.RegisterProtocolNotify()&quot; contains below statement:

&quot;This is typical for removable media devices because when such a device reappears, it will reinstall the Block I/O protocol to indicate that the device needs to be checked again. In response, layered Disk I/O and Simple File System protocols may then reinstall their protocols to indicate that they can be re-checked, and so forth.&quot;

I think it can support the current UEFI Shell&apos;s handling logic for media change or no media.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2682</commentid>
    <comment_count>8</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-05 22:48:45 +0000</bug_when>
    <thetext>Comments added &quot;Ruiyu Ni 2017-08-23 22:50:33 EDT&quot; solved the remaining opens.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>172</bug_id>
          
          <creation_ts>2016-10-25 21:31:15 +0000</creation_ts>
          <short_desc>Clean up BaseLib to remove the dependency of UEFI definition</short_desc>
          <delta_ts>2016-11-03 22:56:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bell Song">binx.song</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>715</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-25 21:31:15 +0000</bug_when>
    <thetext>BaseLib MdePkg\Library\BaseLib\FilePaths.c includes UefiBaseType.h and SimpleTextIn.h. But, BaseLib is BASE type. It should not touch any UEFI/PI concept. It should be cleanup.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>770</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-27 20:13:51 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>840</commentid>
    <comment_count>2</comment_count>
    <who name="Bell Song">binx.song</who>
    <bug_when>2016-11-03 22:56:04 +0000</bug_when>
    <thetext>Remove UefiBaseType.h and SimpleTextIn.h in FilePaths.c, move CHAR_NULL definition from SimpleTextIn.h to Base.h, fixed version is: 0c45a5b288437f62b93c046b4cc8827919a79fd1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>913</bug_id>
          
          <creation_ts>2018-03-28 13:47:08 +0000</creation_ts>
          <short_desc>Network HTTP Feature there is no switch and uri does not get saved into NVram</short_desc>
          <delta_ts>2018-08-10 02:24:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard Max</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laurie Jarlstrom">laurie</reporter>
          <assigned_to>david.wei</assigned_to>
          <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2017</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3786</commentid>
    <comment_count>0</comment_count>
      <attachid>158</attachid>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2018-03-28 13:47:08 +0000</bug_when>
    <thetext>Created attachment 158
PlatformPkgX64_HTTP dsc file

For the Minnowboard MAX/Turbot .97 there is no switch for HTTP enable in the PlatformPkgConfig.dsc file and when it is enabled in DSC and FDF the URI is not saved to NVRAM.

Also attached DSC and FDF files</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3787</commentid>
    <comment_count>1</comment_count>
      <attachid>159</attachid>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2018-03-28 13:49:13 +0000</bug_when>
    <thetext>Created attachment 159
PlatformPkgX64_HTTP dsc file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3788</commentid>
    <comment_count>2</comment_count>
      <attachid>160</attachid>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2018-03-28 13:50:47 +0000</bug_when>
    <thetext>Created attachment 160
PlatformPkgConfig_HTTP dsc file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3789</commentid>
    <comment_count>3</comment_count>
      <attachid>161</attachid>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2018-03-28 13:51:57 +0000</bug_when>
    <thetext>Created attachment 161
PlatformPkg_Http fdf file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3798</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-03-29 20:03:36 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4571</commentid>
    <comment_count>5</comment_count>
    <who name="">david.wei</who>
    <bug_when>2018-08-10 02:24:45 +0000</bug_when>
    <thetext>Fixed by V0.98 release.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>158</attachid>
            <date>2018-03-28 13:47:08 +0000</date>
            <delta_ts>2018-03-28 13:47:08 +0000</delta_ts>
            <desc>PlatformPkgX64_HTTP dsc file</desc>
            <filename>PlatformPkgX64_HTTP.dsc</filename>
            <type>application/octet-stream</type>
            <size>76088</size>
            <attacher name="Laurie Jarlstrom">laurie</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>159</attachid>
            <date>2018-03-28 13:49:13 +0000</date>
            <delta_ts>2018-03-28 13:49:13 +0000</delta_ts>
            <desc>PlatformPkgX64_HTTP dsc file</desc>
            <filename>file_913.txt</filename>
            <type>text/plain</type>
            <size>77901</size>
            <attacher name="Laurie Jarlstrom">laurie</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>160</attachid>
            <date>2018-03-28 13:50:47 +0000</date>
            <delta_ts>2018-03-28 13:50:47 +0000</delta_ts>
            <desc>PlatformPkgConfig_HTTP dsc file</desc>
            <filename>file_913.txt</filename>
            <type>text/plain</type>
            <size>2972</size>
            <attacher name="Laurie Jarlstrom">laurie</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>161</attachid>
            <date>2018-03-28 13:51:57 +0000</date>
            <delta_ts>2018-03-28 13:51:57 +0000</delta_ts>
            <desc>PlatformPkg_Http fdf file</desc>
            <filename>file_913.txt</filename>
            <type>text/plain</type>
            <size>45797</size>
            <attacher name="Laurie Jarlstrom">laurie</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>450</bug_id>
          
          <creation_ts>2017-03-30 21:55:05 +0000</creation_ts>
          <short_desc>BaseTools error message not friendly when SKUID_IDENTIFIER format is wrong in DSC</short_desc>
          <delta_ts>2017-04-06 03:28:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1710</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2017-03-30 21:55:05 +0000</bug_when>
    <thetext>As title,

example:

Define two SKUID In DSC
SKUID_IDENTIFIER               = DEFAULT a

Build message:
Architecture(s)  = IA32 X64
Build target     = DEBUG
Toolchain        = VS2015x86

Active Platform          = c:\workspace_trunk\ovmf\OvmfPkg\OvmfPkgIa32X64.dsc
Flash Image Definition   = c:\workspace_trunk\ovmf\OvmfPkg\OvmfPkgIa32X64.fdf

Processing meta-data ..

build...
 : error 2000: Invalid parameter
        SKU-ID [DEFAULT a] is not supported by the platform. [Valid SKU-ID: DEFAULT COMMON]

Valid SKU-ID: should be DEFAULT|COMMON, which should reminder &quot;|&quot; between SKUID.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1739</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-05 21:07:31 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1749</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-06 03:28:46 +0000</bug_when>
    <thetext>push the fix SHA-1: 6035094da8b68c0d66cce327309efee551caa5dc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>362</bug_id>
          
          <creation_ts>2017-02-02 23:39:18 +0000</creation_ts>
          <short_desc>Can&apos;t POST data greater than 1.5MB to the server</short_desc>
          <delta_ts>2017-11-14 22:13:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1384</commentid>
    <comment_count>0</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-02-02 23:39:18 +0000</bug_when>
    <thetext>[Issue]
Failing to POST data greater than 1.5MB to the server.

[Scenario]
Setup and HTTP(S) server and try to POST data with size greater than 1.5MB

[Expected Result]
The data should be posted successfully.

[Actual Result]
Failing to POST complete data to the server.

[Possible Cause]
The changes after the SHA1- 0507449955c5c629cec196b62986afbb91203ed9 of MnpDxe seems to be causing this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1425</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-09 20:14:20 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1426</commentid>
    <comment_count>2</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2017-02-09 20:45:45 +0000</bug_when>
    <thetext>The commit 0507449955c5c629cec196b62986afbb91203ed9 is to update the MNP Transmit buffer recycle logic according to the UNDI GET_STATUS command in UEFI spec.
Some UNDI drivers may not follow the UEFI spec to return the transmitted buffers in the PXE_DB_GET_STATUS.TxBuffer, which whill cause this error.

If only rollback 0507449955c5c629cec196b62986afbb91203ed9 could solve the problem, please use a DEBUG version MNP driver and check if there is any debug message like 
	MnpFreeTxBuf: Signature check failed in MnpFreeTxBuf.
	MnpFreeTxBuf: Duplicated recycle report from SNP.
If yes, please confirm with the UNDI owner to see if they have support the GET_STATUS command correctly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3066</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2017-11-14 22:13:32 +0000</bug_when>
    <thetext>No update from submitter for a long time, close this ticket.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>553</bug_id>
          
          <creation_ts>2017-05-18 12:42:39 +0000</creation_ts>
          <short_desc>Remove left shift of negative value from PcAtChipsetPkg SerialIoLib for XCODE5 compatibility</short_desc>
          <delta_ts>2017-05-24 20:00:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2017</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>PcAtChipsetPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2070</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-18 12:42:39 +0000</bug_when>
    <thetext>The SerialIoLib in the OvmfPkg contains the following statement that performs a left shift of ~DLAB.

OutputData = (UINT8) ((~DLAB &lt;&lt; 7) | (gBreakSet &lt;&lt; 6) | (gParity &lt;&lt; 3) | (gStop &lt;&lt; 2) | Data);

This statement generate a build error when using the XCODE5 tool chain that uses the llmv/clang compiler.

DLAB is defined to a value of 0x01

#define DLAB                    0x01

OutputData is type UINT8, so the (~DLAB &lt;&lt; 7) part of the statement always evaluates to 0, so the fix is to simply remove (~DLAB &lt;&lt; 7) from these statements.

OutputData = (UINT8) ((gBreakSet &lt;&lt; 6) | (gParity &lt;&lt; 3) | (gStop &lt;&lt; 2) | Data);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2071</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-18 12:55:28 +0000</bug_when>
    <thetext>The SerialIoLib instances that needs to be fixed is in the PcAtChipsetPkg.  The OVMF builds use this SerialIoLib instance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2082</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-18 20:12:58 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2093</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 02:23:28 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2105</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 16:48:17 +0000</bug_when>
    <thetext>From Laszlo Ersek &lt;lersek@redhat.com&gt;:

Add the following to the commit message:

Clang rightfully complains about left-shifting ~DLAB. DLAB is #defined
as 0x01 (an &quot;int&quot;), hence ~DLAB has value (-2) on all edk2 platforms.
Left-shifting a negative int is undefined behavior.

Rather than replacing ~DLAB with ~(UINT32)DLAB, realize that the nonzero
bits of (~(UINT32)DLAB &lt;&lt; 7) would all be truncated away in the final
conversion to UINT8 anyway. So just remove (~DLAB &lt;&lt; 7).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2107</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 16:50:09 +0000</bug_when>
    <thetext>*** Bug 59 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2108</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 16:53:43 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/bbd61de5dbc6ad146dc7250e9646cb662604b5f3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2159</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-24 20:00:32 +0000</bug_when>
    <thetext>Commit to UDK2017 branch

https://github.com/tianocore/edk2/commit/cb053bb8a3121e290be3e78fe3f7ddb766803f25</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>102</bug_id>
          
          <creation_ts>2016-08-18 02:14:06 +0000</creation_ts>
          <short_desc>IPv4 PXE boot fails with classless IP address</short_desc>
          <delta_ts>2017-10-30 00:42:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>karunakarp</cc>
    
    <cc>ramab</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>438</commentid>
    <comment_count>0</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2016-08-18 02:14:06 +0000</bug_when>
    <thetext>Overview:
    The IPv4 PXE boot used to be successful until the edk2 revision 21542 but after the changes made in the revision 21543, the PXE boot fails for a classless IPv4 address.

Steps to Reproduce:
1) Configure a DHCP server whose subnet is different from its respective class
2) Select IPv4 PXE boot option

Actual Results:
    The PXE boot fails saying &quot;PXE-E09: Could not allocate I/O buffers.&quot;

Expected Results:
    The PXE boot should be successful and the SUT should boot to OS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>535</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-29 20:22:41 +0000</bug_when>
    <thetext>Bug Scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>542</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2016-09-29 20:38:13 +0000</bug_when>
    <thetext>Fixed version:

SHA-1: 8c5f78a2cc15199e3f77ae4b156023af366fd6c7

* MdeModulePkg: Support classless IP for DHCPv4 TransmitReceive()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>550</commentid>
    <comment_count>3</comment_count>
    <who name="Rama">ramab</who>
    <bug_when>2016-09-30 12:43:23 +0000</bug_when>
    <thetext>Thank you for the support. One of our team member planning to test it. Will update with the results.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2960</commentid>
    <comment_count>4</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-10-30 00:42:41 +0000</bug_when>
    <thetext>Hello All,

Could you please share test procedure to reproduce this issue.

Without having commit changes, I&apos;ve tried PXE boot with below configuration,  

PXE Server DHCP Configuration:- 
DHCP server, the ip address range from 10.30.3.25 to 10.30.3.35.
Subnet Mask 255.255.255.0


1. Connect PXE Server and Client and do PXE-IPv4boot.
PXE DHCP server assigns a class A IP address range (i.e. 10.30.3.25)
And assign class C subnet mask (i.e. 255.255.255.0)

2. But PXE boot is success without having commit changes
(SHA-1: 8c5f78a2cc15199e3f77ae4b156023af366fd6c7)

Could you please correct if i miss anything or share test procedure how you reproduced the issue?

Thanks,
Karunakar</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>380</bug_id>
          
          <creation_ts>2017-02-15 01:18:31 +0000</creation_ts>
          <short_desc>TCG2_PROTOCOL dependency is missing in Tcg2Smm</short_desc>
          <delta_ts>2017-02-20 20:01:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1442</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-02-15 01:18:31 +0000</bug_when>
    <thetext>TCG_PROTOCOL dependency is added in TcgSmm.

But TCG2_PROTOCOL dependency is missing in Tcg2Smm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1462</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-16 19:09:32 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1481</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-02-20 20:01:29 +0000</bug_when>
    <thetext>Fixed at  https://github.com/tianocore/edk2/commit/5af4388433e13ffeda980116d92f4230c79e483d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>120</bug_id>
          
          <creation_ts>2016-09-12 22:20:44 +0000</creation_ts>
          <short_desc>Boot option cannot be created immediately after deleting a boot option with the same name</short_desc>
          <delta_ts>2016-10-24 02:25:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>Nt32Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>485</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-09-12 22:20:44 +0000</bug_when>
    <thetext>In Nt32 environment, a boot option cannot be created in HII by doing the following steps:

1. Add a boot option via the &quot;Add Boot Option&quot; in the Boot Options page, give a name to the boot option by entering a name (e.g. &quot;bootoption1&quot;) in the &quot;Input the description&quot; field.

2. Delete the previously create &quot;bootoption1&quot; in the &quot;Delete Boot Option&quot;.

3. Repeat step 1 to create another boot option also named &quot;bootoption1&quot;. However, the new &quot;bootoption1&quot; cannot be found in the boot option list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>514</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-22 20:23:38 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>600</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2016-10-14 01:47:38 +0000</bug_when>
    <thetext>Dandan is fixing this issue, transfer the owner to her.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>704</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2016-10-24 02:25:41 +0000</bug_when>
    <thetext>we have fixed this issue in EDKII Trunk.
SHA-1: 7880f73a8e89f482c61e181861997331baf37857</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>854</bug_id>
          
          <creation_ts>2018-01-16 12:23:55 +0000</creation_ts>
          <short_desc>SetVisualStudio.bat does not work if Visual Studio is installed anywhere else</short_desc>
          <delta_ts>2019-09-11 10:24:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Charles Hyde">chip.programmer</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3429</commentid>
    <comment_count>0</comment_count>
      <attachid>136</attachid>
    <who name="Charles Hyde">chip.programmer</who>
    <bug_when>2018-01-16 12:23:55 +0000</bug_when>
    <thetext>Created attachment 136
Updated SetVisualStudio.bat to use Visual Studio tools environment variable

SetVisualStudio.bat is hardcoded to expect Visual Studio to be installed under C:\Program Files (x86), and fails if Visual Studio is installed anywhere else.  My Visual Studio 2010 is installed under C:\Compilers.

It is suggested that SetVisualStudio.bat be modified to use the Visual Studio tools environment variable, i.e. %VS100COMNTOOLS%, to set COMMONTOOLSx64.

For example, this line from SetVisualStudio.bat:
   @set &quot;COMMONTOOLSx64=C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64&quot;

should be modified to read:

   @set &quot;COMMONTOOLSx64=%VS100COMNTOOLS%..\..\VC\bin\x86_amd64&quot;

Similar changes should be made for each version of Visual Studio.  Please see the attached SetVisualStudio.bat.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3442</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-01-17 20:06:13 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9590</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-10 23:06:54 +0000</bug_when>
    <thetext>This issue has been fixed in edk2. please verify.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9614</commentid>
    <comment_count>3</comment_count>
    <who name="Charles Hyde">chip.programmer</who>
    <bug_when>2019-09-11 10:06:35 +0000</bug_when>
    <thetext>Do you know when the fix might be made available?  I ran &quot;git pull&quot; and it did not appear.  I also ran &quot;git clone https://github.com/tianocore/edk2.git&quot; to a separate area, and SetVisualStudio.bat still has hardcoded paths to &quot;C:\Program Files (x86)&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9615</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-11 10:24:11 +0000</bug_when>
    <thetext>edk2\BaseTools\Scripts\SetVisualStudio.bat is out of maintain. Can you try edksetup.bat? Now, it supports to set up the different VS envs.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>136</attachid>
            <date>2018-01-16 12:23:55 +0000</date>
            <delta_ts>2018-01-16 12:23:55 +0000</delta_ts>
            <desc>Updated SetVisualStudio.bat to use Visual Studio tools environment variable</desc>
            <filename>SetVisualStudio.bat</filename>
            <type>application/octet-stream</type>
            <size>3299</size>
            <attacher name="Charles Hyde">chip.programmer</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>401</bug_id>
          
          <creation_ts>2017-02-22 21:22:48 +0000</creation_ts>
          <short_desc>VMs fail to boot</short_desc>
          <delta_ts>2017-02-24 12:17:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ryan Thomas">ryant0000</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1504</commentid>
    <comment_count>0</comment_count>
    <who name="Ryan Thomas">ryant0000</who>
    <bug_when>2017-02-22 21:22:48 +0000</bug_when>
    <thetext>Steps to reproduce:
Compile ovmf after Febuary 22nd.
Attempt to boot virtual machine with ovmf.

vm fails to boot, prints output to console

!!!! X64 Exception Type - 00(#DE - Divide Error)  CPU Apic ID - 00000000 !!!!
RIP  - 000000007FF77D02, CS  - 0000000000000038, RFLAGS - 0000000000010246
RAX  - 0000000000000000, RCX - 000000007FF77CD8, RDX - 000000007FF77D00
RBX  - 000000007FF77D20, RSP - 000000007FF5F6F9, RBP - 000000007FF77CD8
RSI  - 000000007FF77D25, RDI - 0000000000000010
R8   - 0000000000000000, R9  - 0000000000000004, R10 - 0000000000000004
R11  - 0000000000000000, R12 - 000000007FF77D20, R13 - 000000007D6AF890
R14  - 000000007FF5F938, R15 - 000000007EA29E98
DS   - 0000000000000030, ES  - 0000000000000030, FS  - 0000000000000030
GS   - 0000000000000030, SS  - 0000000000000030
CR0  - 0000000080010033, CR2 - 0000000000000000, CR3 - 000000007FEFE000
CR4  - 0000000000000668, CR8 - 0000000000000000
DR0  - 0000000000000000, DR1 - 0000000000000000, DR2 - 0000000000000000
DR3  - 0000000000000000, DR6 - 00000000FFFF0FF0, DR7 - 0000000000000400
GDTR - 000000007FEDCF18 0000000000000047, LDTR - 0000000000000000
IDTR - 000000007F65A018 0000000000000FFF,   TR - 0000000000000000
FXSAVE_STATE - 000000007FF5F350
!!!! Find PE image /tmp/makepkg/ovmf-git/src/edk2/Build/OvmfX64/RELEASE_GCC49/X64/MdeModulePkg/Core/Dxe/DxeMain/DEBUG/DxeCore.dll (ImageBase=000000007FF60000, EntryPoint=000000007FF60240) !!!!

I have tried this on 2 hosts, with many vms on each. Downgrading to the previous version I had on hand solved the problem, which was compiled on Feb 20. I am running Arch linux on both systems, and using the ovmf-git aur package. Qemu is version 2.8.0-1. I will gladly provide any additional info, I&apos;m sure I&apos;m leaving something important out as this is all a black box to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1507</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-02-23 07:17:00 +0000</bug_when>
    <thetext>Hi,

this Bugzilla instance tracks issues &amp; feature requests for upstream edk2. You mention that your fw binary is from the &quot;ovmf-git aur package&quot;. Please report the issue in the Arch Linux tracker for that.

Of course, if the problem reproduces with upstream edk2, we can look into it here. Can you clone edk2, rebuild OVMF from source, and retest?

Also, &quot;Feb 20&quot; and &quot;Feb 22&quot; don&apos;t help me identify the regression. What upstream git commits do your working vs. broken builds correspond to?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1508</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-02-23 07:18:34 +0000</bug_when>
    <thetext>Also, for such reports, please always capture the OVMF debug log (not just the serial console), and attach it to the report. Please refer to OvmfPkg/README for instructions on capturing the OVMF debug log. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1523</commentid>
    <comment_count>3</comment_count>
    <who name="Ryan Thomas">ryant0000</who>
    <bug_when>2017-02-23 20:39:12 +0000</bug_when>
    <thetext>The aur package is not a pre-built binary. It clones the git repository and runs the compilation at installation time. I am unsure of how to go about finding what commits have occurred between the 2 packages I have built. I have rebuilt the package today and can confirm the problem no longer exists. I&apos;m not going to worry about this anymore, but in case someone wants to try to figure out what commits are relevant the non-working package was compiled on February 22nd, 6:00pm central time, the earlier working package was compiled on Februrary 20th, 9:30 pm, and the current package built on February 23rd, 6:00pm works. There is no noticeable difference in the .bins used by qemu, aside from the fact that one doesn&apos;t work. Feel free to mark this as resolved, not sure whether it qualifies as resolved or unconfirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1535</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-02-24 04:24:11 +0000</bug_when>
    <thetext>(In reply to Ryan Thomas from comment #3)
&gt; The aur package is not a pre-built binary. It clones the git repository and
&gt; runs the compilation at installation time.

OK, that makes sense, thanks.

&gt; I am unsure of how to go about
&gt; finding what commits have occurred between the 2 packages I have built.

Just a general note: if a distro (or a packaging system in general) builds binaries from upstream source repository checkouts, I&apos;d think that capturing unique checkout identifiers is a requirement. For example, in Gerd&apos;s builds at &lt;https://www.kraxel.org/repos/jenkins/edk2/&gt;, the package name/version/release triplet contains both a counter (for easy sorting/updating) and the edk2 commit hash of the checkout.

&gt; I
&gt; have rebuilt the package today and can confirm the problem no longer exists.
&gt; I&apos;m not going to worry about this anymore, but in case someone wants to try
&gt; to figure out what commits are relevant the non-working package was compiled
&gt; on February 22nd, 6:00pm central time, the earlier working package was
&gt; compiled on Februrary 20th, 9:30 pm, and the current package built on
&gt; February 23rd, 6:00pm works. There is no noticeable difference in the .bins
&gt; used by qemu, aside from the fact that one doesn&apos;t work. Feel free to mark
&gt; this as resolved, not sure whether it qualifies as resolved or unconfirmed.

Perhaps the commit you needed was
https://github.com/tianocore/edk2/commit/1d8cebf91040

I&apos;m setting this to RESOLVED. As for the resolution... FIXED doesn&apos;t look good because we&apos;re uncertain about both the bug and the fix. INVALID isn&apos;t appropriate because you did see a crash. WONTFIX would again require identifying the culprit clearly. Duplicate: nah. Let&apos;s just say it &quot;works for us&quot; now. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1536</commentid>
    <comment_count>5</comment_count>
    <who name="Ryan Thomas">ryant0000</who>
    <bug_when>2017-02-24 05:13:39 +0000</bug_when>
    <thetext>I can provide the hashes, I&apos;m just an idiot who didn&apos;t know what the random characters were. Non-working is 526f160f31, working is 5422804653 and af9bce4033.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1538</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-02-24 12:17:20 +0000</bug_when>
    <thetext>I&apos;m pretty sure you hit the regression in dc4c770763d0:

 1 542280465337 MdeModulePkg/SdMmc: Avoid assigning 0 to the BlockSize of
                Trb
   ^^^^^^^^^^^^
   known good (from reporter)

 2 063bcff758e9 MdeModulePkg/PciBusDxe: Refine code to make it more readable
 3 9b002aa44721 MdePkg/BasePrintLib: Refine the SPrint functions
 4 50418baa6936 MdeModulePkg/PrintLib: Refine the SPrint functions
 5 0b6642e60eee MdeModulePkg: Refine the services comments in
                EFI_PRINT2_PROTOCOL
 6 51f0ceb4eb47 MdePkg/BasePrintLib: Add safe print functions
                [A|U]ValueToStringS
 7 e43adbafe811 MdeModulePkg: Add the EFI_PRINT2S_PROTOCOL
 8 f0c74f5a6ebd MdeModulePkg/PrintLib: Use EFI_PRINT2S_PROTOCOL for this
                instance
 9 9e32e9719c81 MdeModulePkg/PrintLib: Add safe print functions
                [A|U]ValueToStringS
10 087132a84a43 SecurityPkg/TpmCommandLib: Add Tpm2ReadPublic.
11 5c793e770314 MdeMoudlePkg/DisplayEngine: Fix incorrect index used in
                array &quot;InputText&quot;
12 bf342907c8ca MdeModulePkg/HiiDatabase: clean the value before setting
                default string
13 85520606ad45 MdeModulePkg/BMMUiLib: Remove old useless data before new
                save action
14 75ccd1d89e78 OvmfPkg/AcpiPlatformDxe: prepare for
                QEMU_LOADER_WRITE_POINTER definitions
15 774f52f6debd OvmfPkg/AcpiPlatformDxe: add QEMU_LOADER_WRITE_POINTER
                definitions
16 ab63766baf3d OvmfPkg/AcpiPlatformDxe: rewrap license block in
                &quot;QemuFwCfgAcpi.c&quot;
17 9965cbd424f2 OvmfPkg/AcpiPlatformDxe: implement the
                QEMU_LOADER_WRITE_POINTER command
18 df73df138d9d OvmfPkg/AcpiPlatformDxe: replay QEMU_LOADER_WRITE_POINTER
                commands at S3
19 b7a09b71b67c ArmPkg/CpuDxe: Correct EFI_MEMORY_RO usage
20 ce82984fe77c ArmPkg/CpuDxe: translate invalid memory types in
                EfiAttributeToArmAttribute
21 0a9d732c91d9 ArmPkg/CpuDxe: ARM: ignore page table updates that only
                change permissions
22 e0307a7dad02 ArmPkg/ArmMmuLib: AARCH64: add support for modifying only
                permissions
23 b9d56d0b93ae UefiCpuPkg/ExceptionHandlerAsm.S: Fix code length issue with
                GCC 5.4
24 a3be3b65977e OvmfPkg/AcpiPlatformDxe: drop double right shift in
                ADD/WRITE POINTER cmds
25 6025488da393 OvmfPkg/AcpiPlatformDxe: update PointerValue comments in
                &quot;BootScript.c&quot;
26 5583a8a4ffd0 OvmfPkg/QemuFwCfgLib: move types/macros from lib class to
                IndustryStandard
27 21ca2f28e6c5 OvmfPkg/QemuFwCfg: introduce FW_CFG_IO_SELECTOR, adapt the
                package
28 509e6b5a034f OvmfPkg/QemuFwCfg: introduce FW_CFG_IO_DATA, adapt the
                package
29 ed1a2d42d5d5 OvmfPkg/QemuFwCfg: introduce FW_CFG_IO_DMA_ADDRESS, adapt
                the package
30 dc4c770763d0 BaseTools: add error check for Macro usage in the INF file
   ^^^^^^^^^^^^
   known regression

31 d37fa01fbbe2 VfrCompile: fix invalid comparison between pointer and
                integer
32 22292ed344b8 UefiCpuPkg/CpuDxe: Add memory attribute setting.
33 861cc65656df MdeModulePkg/dec: add PcdImageProtectionPolicy.
34 d0e92aad4670 MdeModulePkg/DxeCore: Add UEFI image protection.
35 410590f14914 UefiCpuPkg/CpuDxe: Copy two functions from PciHostBridge
36 14f92ded906d UefiCpuPkg/CpuDxe: Add Local APIC memory mapped space in GCD
37 7537f8c09a63 UefiCpuPkg/CpuDxe: Fix hard code actual TimerPeriod value
38 074583572668 MdePkg/Include: Add SmiHandlerProfileLib.h
39 e8af3c1ca230 MdePkg/SmiHandlerProfileLibNull: Add NULL instance.
40 0466aac877e5 MdePkg/dsc: add SmiHandlerProfileLib to dsc.
41 65fb940adb68 MdeModulePkg/include: Add SmiHandlerProfile header file.
42 c5e7ba577617 MdeModulePkg/dec: Add PcdSmiHandlerProfilePropertyMask.
43 e08bfc7d6f82 MdeModulePkg/SmmSmiHandlerProfileLib: Add SMM instance.
44 ca41f3f43f74 MdeModulePkg/PiSmmCore: Add SmiHandlerProfile support.
45 216b942d4d47 MdeModulePkg/App: Add SmiHandlerProfile dump app.
46 c1f6c62dcf02 MdeModulePkg/dsc: add SmiHandlerProfile to dsc.
47 88dab294d249 BaseTool/Script: Add SmiHandleProfile OS tool to get symbol.
48 91231b55d530 ArmPlatformPkg/ArmPlatformStackLib: use callee preserved
                registers
49 de2a78247a29 ArmPkg/ArmLib: AARCH64: set frame pointer in cache
                maintenance routine
50 97f0d01d5df0 ArmPkg/ArmLib: AARCH64: allow the stack aligment (SA) bit to
                be managed

51 526f160f311c ArmPkg/ArmMmuLib: AARCH64: enable stack alignment checking
   ^^^^^^^^^^^^
   known bad (from reporter)

52 1d8cebf91040 BaseTools: Fix the regression issue caused by commit dc4c77
   ^^^^^^^^^^^^
   fix to known regression

53 8d1f5e04168c NetworkPkg:Add scriptable configuration to iSCSI driver by
                leveraging x-UEFI.
54 702f2e15562c MdeModulePkg: Update the Ethernet interface name.
55 625b39ced26e NetworkPkg: Update the Ethernet interface name.
56 c5c9e7e298ed OvmfPkg/XenBusDxe: Use EFIAPI for XenStoreVSPrint
57 cfb0aba7934b MdeModulePkg: Add performance property configuration table
58 139351093ddf PerformancePkg Dp_App: Remove TimerLib dependency
59 ef2240327863 ShellPkg UefiDpLib: Remove TimerLib dependency
60 a76d0e88c39a ArmPkg: remove DebugUncachedMemoryAllocationLib
61 fc7bd8939d56 ArmPkg/CpuDxe: remove VirtualUncachedPages protocol and
                implementation
62 8c1183a8793f MdeModulePkg SmmSmiHandlerProfileLib: Fix GCC build failure
63 af9bce403319 UefiCpuPkg/CpuDxe: Replace EFI_D_xxx with DEBUG_xxx in
   ^^^^^^^^^^^^ DEBUG()
   known good (from reporter)

Several people reported the regression in dc4c770763d0:

https://www.redhat.com/archives/vfio-users/2017-February/msg00092.html
https://www.mail-archive.com/edk2-devel@lists.01.org/msg22691.html
https://www.mail-archive.com/edk2-devel@lists.01.org/msg22715.html

At the time I didn&apos;t check the serial output, but now I have, reproducing
the issue (by reverting the fix, 1d8cebf91040). The symptoms I see again are
those that I reported back then, and not yours, but that doesn&apos;t mean much,
because the BaseTools error resulted in invalid auto-generated C source
code, with undefined behavior as a result, so the symptoms could justifiedly
vary wildly.

So based on the above, I&apos;m going to say that you hit dc4c770763d0, which has
since been fixed in 1d8cebf91040. Thanks for providing the hashes!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>674</bug_id>
          
          <creation_ts>2017-08-16 19:41:24 +0000</creation_ts>
          <short_desc>Add CPUID check for MCA support before accessing MCA MSRs</short_desc>
          <delta_ts>2017-09-20 01:54:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc>https://github.com/tianocore/edk2/commit/12c663822dc5fb23387fa621b5f7c39ea23b1664</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2608</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-08-16 19:41:24 +0000</bug_when>
    <thetext>The following commit adds checks to see if machine check has
been enabled and signalled.

https://github.com/tianocore/edk2/commit/12c663822dc5fb23387fa621b5f7c39ea23b1664

However, not all CPUs support machine check, so a CPUID check needs to
be added make sure the COU supports MCA before access the MCA related
MSRs

The Galileo platforms in the QuarkPlatformPkgQuark do not support MCA
and generate an exception after the commit above.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2617</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-17 20:04:33 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2749</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2017-09-20 01:50:46 +0000</bug_when>
    <thetext>Issue has been fixed by below patch:

SHA-1: ba40cb31b69df76a3392219a78cbd7b49ae24c49

* UefiCpuPkg/PiSmmCpuDxeSmm: Add CPUID MCA support check

https://bugzilla.tianocore.org/show_bug.cgi?id=674

Add CPUID check to see if the CPU supports the Machine
Check Architecture before accessing the Machine Check
Architecture related MSRs.

Cc: Eric Dong &lt;eric.dong@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Michael Kinney &lt;michael.d.kinney@intel.com&gt;
Reviewed-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2750</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2017-09-20 01:54:40 +0000</bug_when>
    <thetext>Also add same check when enable Lmca feature in CpuCommonFeaturesLib, patch info shows below:

SHA-1: ac401975581daf1e4e353898f7441eeb668ba304

* UefiCpuPkg/CpuCommonFeaturesLib: Add CPUID MCA support check

Add CPUID check to see if the CPU supports the Machine Check
Architecture before accessing the Machine Check Architecture
related MSRs.

Cc: Michael Kinney &lt;michael.d.kinney@intel.com&gt;
Cc: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>140</bug_id>
          
          <creation_ts>2016-10-07 04:46:53 +0000</creation_ts>
          <short_desc>BdsDxe: BdsAllocateMemoryForPerformanceData() is limited to 4 GB</short_desc>
          <delta_ts>2019-01-22 20:46:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>566</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2016-10-07 04:46:53 +0000</bug_when>
    <thetext>For some reason, presumably because PEI may execute in 32-bit mode on X64, BdsAllocateMemoryForPerformanceData() limits the allocation it performs to 4 GB, which is not possible on platforms that have no memory below 4 GB.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>568</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-07 12:03:46 +0000</bug_when>
    <thetext>See also the discussion in:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg09746.html

On 03/29/16 18:14, Ard Biesheuvel wrote:
&gt; [...] there are numerous instances in the EDK2 code
&gt; base where an allocation is hardcoded to be limited to 4 GB so that
&gt; PEI is guaranteed to be able to access it. As it turns out, there are
&gt; even platforms that do run PEI in 64-bit mode, but only map the lowest
&gt; 4 GB of memory simply because all DXE code that performs allocations
&gt; that need to be accessible from PEI is already capped to 4 GB.
&gt; 
&gt; This is something I brought up with the UEFI forum, and is going to be
&gt; addressed in the PI spec (hopefully). This should allow us to describe
&gt; in PEI the range it can access, so that DXE can take this information
&gt; into account, rather than guess that below 4 GB is okay.

Has PI 1.5 addressed this in some way? (I haven&apos;t gone through the changes yet.) Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>572</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-10-07 22:22:02 +0000</bug_when>
    <thetext>vincent already clarified:

PEI should follow UEFI calling convention to map all memory map defined space.
If PEI64 only maps 4G memory with above 4G memory available, it is an EDKII implementation bug.


=====================================
Yes.  I would agree with you.
VIncent

From: Yao, Jiewen 
Sent: Friday, October 7, 2016 6:30 AM
To: Zimmer, Vincent &lt;vincent.zimmer@intel.com&gt;; Andrew Fish &lt;afish@apple.com&gt;
Cc: Ard Biesheuvel &lt;ard.biesheuvel@linaro.org&gt;; piwg@uefi.org
Subject: RE: [piwg] no meeting today

Great. So X64 PEI should follow X64 UEFI calling convention, right?
To be specific: 2.3.4 x64 Platforms
...any memory space defined by the UEFI memory map is identity mapped (virtual address equals physical address). The mappings to other regions are undefined and may vary from implementation to implementation.

So it seems a platform bug that only 4G is mapped in X64PEI, if above 4G memory is available and reported.

Thank you
Yao Jiewen

From: Zimmer, Vincent 
Sent: Friday, October 7, 2016 9:23 PM
To: Yao, Jiewen &lt;jiewen.yao@intel.com&gt;; Andrew Fish &lt;afish@apple.com&gt;
Cc: Ard Biesheuvel &lt;ard.biesheuvel@linaro.org&gt;; piwg@uefi.org
Subject: RE: [piwg] no meeting today

The PI spec inherits the calling conventions of chapter 2 of the UEFI spec.  There is no PI-specific ABI.

Vincent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>595</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-13 20:06:57 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>643</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-19 22:04:44 +0000</bug_when>
    <thetext>It seems to me that the fix to this bug needs some interface in PI spec to tell BDS (or any other module) which range is accessible from PEI phase.
Is my understanding correct?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>653</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-20 04:11:42 +0000</bug_when>
    <thetext>(In reply to Ruiyu Ni from comment #4)
&gt; It seems to me that the fix to this bug needs some interface in PI spec to
&gt; tell BDS (or any other module) which range is accessible from PEI phase.
&gt; Is my understanding correct?

That&apos;s what I thought as well, but according to Jiewen&apos;s / Vincent&apos;s quote from the piwg discussion, their standpoint seems to be that if a purely X64 platform exposes more than 4GB in DXE and later, but maps no more than 4GB in PEI, then that&apos;s a platform bug.

I don&apos;t think I agree with this:

(1) IMO X64 PEI can have valid reasons for running in long mode that are separate from accessing memory above 4GB. PEI usually doesn&apos;t need a whole lot of memory; forcing it to build page tables for all available RAM looks arbitrary. That&apos;s why PEI creates memory descriptor HOBs instead, so that the DXE core could map it all.

(2) Assuming the PEI phase allocated a bunch of additional memory (whole pages, not pool) for building page tables with complete coverage, what and how would release that chunk of memory in DXE? In my understanding, whatever pages the PEI phase allocates from the permanent PEI RAM range, those pages survive as allocated (with the corresponding UEFI memory type) into DXE and BDS. For memory that hosts specifically PEI&apos;s page tables, this means that that memory is practically lost to DXE and BDS.

(3) There&apos;s also the question of tested / untested memory. In my understanding, PEI is not required to test all memory in the system. Instead, that seems to belong to the DXE_DRIVER that provides gEfiGenericMemTestProtocolGuid. If PEI is expected to be able to use all RAM in the system whatsoever, that doesn&apos;t only require PEI to *map* all the RAM, but (possibly) to *test* it all as well.

It doesn&apos;t seem right to me, plus I don&apos;t think it&apos;s a good idea to retroactively qualify the X64/X64 build of OVMF buggy due to this reason. A new HOB type that expresses the highest possible address of the PEI phase, to be queried in DXE and later, would solve this easily, in a compatible way.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2687</commentid>
    <comment_count>6</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-05 23:30:27 +0000</bug_when>
    <thetext>Laszlo, Jiewen,
Which way to go?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2692</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-06 05:48:55 +0000</bug_when>
    <thetext>Ray,

I understand that according to the official interpretation, OVMF X64 PEI is supposed to be buggy where it does not map all of the available physcal memory.

That may be the case, but it has been like this forever, and we don&apos;t have resources and don&apos;t plan to change it any time soon.

Given that the PI spec hasn&apos;t introduced a HOB for expressing this limitation, my request is that we introduce a 64-bit PCD instead. I&apos;m totally fine if the PCD is documented and/or named as a &quot;concession to very-very buggy platforms&quot;.

In the DEC file, I suggest defaulting the PCD to MAX_UINT32 for IA32 and ARM, and to MAX_UINT64 for all other architectures. We&apos;ll override the PCD with MAX_UINT32 in the &quot;OvmfPkg/OvmfPkgX64.dsc&quot; file.

I hope that such a compromise is acceptable to everyone. After all, more serious limitations for X64 PEI have existed for a long time (such as no support for S3 resume with SMM enabled, for example). In my opinion, this non-conformance of OVMF X64 PEI to the PI spec can be mitigated with the PCD.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3197</commentid>
    <comment_count>8</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-12-07 04:35:33 +0000</bug_when>
    <thetext>Transfer to Liming to take care of performance related code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3473</commentid>
    <comment_count>9</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-01-23 22:29:18 +0000</bug_when>
    <thetext>Change it to Dandan to remove unused PERF_CODE after new performance is ready.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6166</commentid>
    <comment_count>10</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-01-22 20:46:37 +0000</bug_when>
    <thetext>Close this bug since function BdsAllocateMemoryForPerformanceData is removed via https://github.com/tianocore/edk2/commit/9f0d7651b3a786b4177a3a07a731592746136dd2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>47</bug_id>
          
          <creation_ts>2016-07-20 20:59:11 +0000</creation_ts>
          <short_desc>NULL pointer comparison to a char literal should be to NULL</short_desc>
          <delta_ts>2016-11-03 22:47:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Bell Song">binx.song</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EdkCompatibilityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>72</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 20:59:11 +0000</bug_when>
    <thetext>EdkCompatibilityPkg/Foundation/Library/Dxe/PrintLite/StdErr.c, ErrorPrint() performs a NULL pointer check using a char literal:

if (ErrorString != &apos;\0&apos;) ...

That should be a NULL shouldn&apos;t it?!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>429</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-11 20:31:39 +0000</bug_when>
    <thetext>Bug Scrub: Confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>838</commentid>
    <comment_count>2</comment_count>
    <who name="Bell Song">binx.song</who>
    <bug_when>2016-11-03 22:47:52 +0000</bug_when>
    <thetext>Replace &apos;\0&apos; as NULL, fixed version is 9cc42a92428bb3a2eaea7789b1e34a68c29223b8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>418</bug_id>
          
          <creation_ts>2017-03-06 13:21:28 +0000</creation_ts>
          <short_desc>Shell is not able to run a startup script from first  location if current directory is not set</short_desc>
          <delta_ts>2017-03-23 00:57:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1585</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2017-03-06 13:21:28 +0000</bug_when>
    <thetext>If startup.nsh is placed into first location (embedded into the firmware image), 
and the current directory has not been set (Internal Shell has just started), 
Shell cannot execute startup because of the bug in the DoStartupScript: 
after finding the correct path of the startup.nsh from the &quot;First location&quot; 
and opening the file, and getting of the file handle, the correct path is 
forgotten, and then RunScriptFile() receives just the name of the file 
(from mStartupScript ariable). 
It then attempts to check if this is a file with ShellIsFile() which fails 
with &quot;EFI_INVALID_PARAMETER&quot; (current directory is NULL, so it cannot get 
fully qualified file name), which causes Shell to unload. 
I have submitted a patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1596</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-09 19:04:32 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner, already have the patch sent out, please review it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1662</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-03-23 00:57:45 +0000</bug_when>
    <thetext>pushed @ aaf51f08ee104447207bba571649556095befc93.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>330</bug_id>
          
          <creation_ts>2017-01-07 09:35:33 +0000</creation_ts>
          <short_desc>[BaseTools patch] Convert incomplete expressions with dangling while()&apos;s into proper single statements</short_desc>
          <delta_ts>2017-01-23 21:21:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nikolai Saoukh">nms</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1271</commentid>
    <comment_count>0</comment_count>
      <attachid>34</attachid>
    <who name="Nikolai Saoukh">nms</who>
    <bug_when>2017-01-07 09:35:33 +0000</bug_when>
    <thetext>Created attachment 34
Patch to fix dangling while()&apos;s in BaseTools

This patch convert incomplete expressions with dangling while()&apos;s into proper single statements, thus reduce compilers confusion (-:

Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Nikolai SAOUKH  &lt;nms@otdel-1.org&gt;
---

diff --git a/BaseTools/Source/C/VfrCompile/VfrSyntax.g b/BaseTools/Source/C/VfrCompile/VfrSyntax.g
index 4b42d3ca..0f9a3452 100644
--- a/BaseTools/Source/C/VfrCompile/VfrSyntax.g
+++ b/BaseTools/Source/C/VfrCompile/VfrSyntax.g
@@ -33,8 +33,8 @@ WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED.
 #include &quot;AToken.h&quot;
 
 #define GET_LINENO(Obj)       ((Obj)-&gt;getLine())
-#define SET_LINE_INFO(Obj, L) {(Obj).SetLineNo((L)-&gt;getLine());} while (0)
-#define CRT_END_OP(Obj)       {CIfrEnd EObj; if (Obj != NULL) EObj.SetLineNo ((Obj)-&gt;getLine());} while (0)
+#define SET_LINE_INFO(Obj, L) do {(Obj).SetLineNo((L)-&gt;getLine());} while (0)
+#define CRT_END_OP(Obj)       do {CIfrEnd EObj; if (Obj != NULL) EObj.SetLineNo ((Obj)-&gt;getLine());} while (0)
 
 typedef ANTLRCommonToken ANTLRToken;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1307</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-01-11 20:04:02 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1358</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-23 21:21:00 +0000</bug_when>
    <thetext>pushed it SHA-1: 223a99e524679a7f811755442897bfad7cf49830</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>34</attachid>
            <date>2017-01-07 09:35:33 +0000</date>
            <delta_ts>2017-01-07 09:35:33 +0000</delta_ts>
            <desc>Patch to fix dangling while()&apos;s in BaseTools</desc>
            <filename>do-while.diff</filename>
            <type>application/octet-stream</type>
            <size>1008</size>
            <attacher name="Nikolai Saoukh">nms</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>241</bug_id>
          
          <creation_ts>2016-11-17 12:36:36 +0000</creation_ts>
          <short_desc>Shell tftp app should save a file by chunks, and not try to read the whole file into memory regardless of the size</short_desc>
          <delta_ts>2017-02-23 17:39:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="Zhang, Lubo">lubo.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>vladimir.olovyannikov</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Other</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>973</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2016-11-17 12:36:36 +0000</bug_when>
    <thetext>Environment:
AARCH64 platform with 1GB of RAM, 1GB NIC.

Getting a 700+ MiB file via Shell tftp app causes AllocatePages to fail in MnpAddFreeTxBuf (probably due to fragmentation?) and subsequently leads to synchronous exception in Ip4Dxe driver in Ip4If.c, around line 453 (Ip4CancelFrames() ).
This happens if UEFI was built with EDK2_BUILD=DEBUG. 
If UEFI was built with EDK2_BUILD=RELEASE this operation succeeds, but bigger file cannot be transferred via Shell tftp application and crashes (even though AllocatePages succeeds).
The main reason for these crashes is that tftp Shell application uses Readfile to read the WHOLE file into memory regardless of the size. It would be more appropriate to save the file to a file system by chunks. Also even if the transfer of a 700M file was successful attempt to retransfer the file via tftp fails due to fragmentation and thus failure to allocate the same amount of pages.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>975</commentid>
    <comment_count>1</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2016-11-17 13:05:10 +0000</bug_when>
    <thetext>Excerpt from the output:
AllocatePoolPages: failed to allocate 2 pages
AllocatePool: failed to allocate 4208 bytes
MnpAddFreeTxBuf: TxBuf Alloc failed.                                     
AllocatePoolPages: failed to allocate 2 pages
AllocatePool: failed to allocate 4208 bytes                          
MnpAddFreeTxBuf: TxBuf Alloc failed.                                     
MnpAllocNbuf: Failed to add TxBuf into the FreeTxBufList, Out of Resources.    
                                                           
Synchronous Exception at 0x00000000B9A3E40C
PC 0x0000B9A3E40C (0x0000B9A3B000+0x0000340C) [ 0] Ip4Dxe.dll                  
PC 0x0000B9A3E3CC (0x0000B9A3B000+0x000033CC) [ 0] Ip4Dxe.dll                  
PC 0x0000B9A3FFBC (0x0000B9A3B000+0x00004FBC) [ 0] Ip4Dxe.dll                  
PC 0x0000B9A3FF38 (0x0000B9A3B000+0x00004F38) [ 0] Ip4Dxe.dll
PC 0x0000B9A42944 (0x0000B9A3B000+0x00007944) [ 0] Ip4Dxe.dll                  
PC 0x0000B99CC6EC (0x0000B99C5000+0x000076EC) [ 1] Udp4Dxe.dll
PC 0x0000B99C9DEC (0x0000B99C5000+0x00004DEC) [ 1] Udp4Dxe.dll
PC 0x0000B9A06110 (0x0000B99FC000+0x0000A110) [ 2] Mtftp4Dxe.dll
PC 0x0000B99FF254 (0x0000B99FC000+0x00003254) [ 2] Mtftp4Dxe.dll
PC 0x0000B9A0202C (0x0000B99FC000+0x0000602C) [ 2] Mtftp4Dxe.dll
PC 0x0000B9A023CC (0x0000B99FC000+0x000063CC) [ 2] Mtftp4Dxe.dll
PC 0x0000B9A02D6C (0x0000B99FC000+0x00006D6C) [ 2] Mtftp4Dxe.dll
PC 0x0000B9A0504C (0x0000B99FC000+0x0000904C) [ 2] Mtftp4Dxe.dll
PC 0x0000BEEC3650 (0x0000BEEC2000+0x00001650) [ 3] DpcDxe.dll
PC 0x0000B99CFEE4 (0x0000B99C5000+0x0000AEE4) [ 4] Udp4Dxe.dll
PC 0x0000B99C824C (0x0000B99C5000+0x0000324C) [ 4] Udp4Dxe.dll
PC 0x0000B99CBD54 (0x0000B99C5000+0x00006D54) [ 4] Udp4Dxe.dll
PC 0x0000BEEC3650 (0x0000BEEC2000+0x00001650) [ 5] DpcDxe.dll
PC 0x0000B9A57968 (0x0000B9A3B000+0x0001C968) [ 6] Ip4Dxe.dll
PC 0x0000B9A46040 (0x0000B9A3B000+0x0000B040) [ 6] Ip4Dxe.dll
PC 0x0000B9A3F590 (0x0000B9A3B000+0x00004590) [ 6] Ip4Dxe.dll
PC 0x0000BEEC3650 (0x0000BEEC2000+0x00001650) [ 7] DpcDxe.dll
PC 0x0000B9A33A24 (0x0000B9A23000+0x00010A24) [ 8] MnpDxe.dll
PC 0x0000B9A2BC88 (0x0000B9A23000+0x00008C88) [ 8] MnpDxe.dll
PC 0x0000BF2426E4 (0x0000BF225000+0x0001D6E4) [ 9] DxeCore.dll
PC 0x0000BF241E64 (0x0000BF225000+0x0001CE64) [ 9] DxeCore.dll
PC 0x0000B9A29F6C (0x0000B9A23000+0x00006F6C) [ 10] MnpDxe.dll
PC 0x0000B9A42FEC (0x0000B9A3B000+0x00007FEC) [ 11] Ip4Dxe.dll
PC 0x0000B99CA1BC (0x0000B99C5000+0x000051BC) [ 12] Udp4Dxe.dll
PC 0x0000B9A00988 (0x0000B99FC000+0x00004988) [ 13] Mtftp4Dxe.dll
PC 0x0000B9A00240 (0x0000B99FC000+0x00004240) [ 13] Mtftp4Dxe.dll
PC 0x0000B9A0072C (0x0000B99FC000+0x0000472C) [ 13] Mtftp4Dxe.dll
PC 0x0000B98E1590 (0x0000B983F000+0x000A2590) [ 14] Shell.dll
PC 0x0000B98E0D1C (0x0000B983F000+0x000A1D1C) [ 14] Shell.dll
PC 0x0000B9877704 (0x0000B983F000+0x00038704) [ 14] Shell.dll
PC 0x0000B9845E64 (0x0000B983F000+0x00006E64) [ 14] Shell.dll
PC 0x0000B9845FF8 (0x0000B983F000+0x00006FF8) [ 14] Shell.dll
PC 0x0000B98462B0 (0x0000B983F000+0x000072B0) [ 14] Shell.dll
PC 0x0000B9846614 (0x0000B983F000+0x00007614) [ 14] Shell.dll
PC 0x0000B98466E0 (0x0000B983F000+0x000076E0) [ 14] Shell.dll
PC 0x0000B9844320 (0x0000B983F000+0x00005320) [ 14] Shell.dll
PC 0x0000B9842AC0 (0x0000B983F000+0x00003AC0) [ 14] Shell.dll
PC 0x0000B984145C (0x0000B983F000+0x0000245C) [ 14] Shell.dll
PC 0x0000B9840064 (0x0000B983F000+0x00001064) [ 14] Shell.dll
PC 0x0000BF22BAA8 (0x0000BF225000+0x00006AA8) [ 15] DxeCore.dll
PC 0x0000BEE10BCC (0x0000BEDE1000+0x0002FBCC) [ 16] BdsDxe.dll
PC 0x0000BEDE2B44 (0x0000BEDE1000+0x00001B44) [ 16] BdsDxe.dll
PC 0x0000BEDE34EC (0x0000BEDE1000+0x000024EC) [ 16] BdsDxe.dll
PC 0x0000BF2273DC (0x0000BF225000+0x000023DC) [ 17] DxeCore.dll
PC 0x0000BF2264A0 (0x0000BF225000+0x000014A0) [ 17] DxeCore.dll
PC 0x0000BF226024 (0x0000BF225000+0x00001024) [ 17] DxeCore.dll

Recursive exception occurred while dumping the CPU state

Code around 0xb9a3e40c:
Ip4If.c (lines 447 - 458)
  //
  // Cancel all the pending frames on ARP requests
  //
  NET_LIST_FOR_EACH_SAFE (Entry, Next, &amp;Interface-&gt;ArpQues) {
    ArpQue = NET_LIST_USER_STRUCT (Entry, IP4_ARP_QUE, Link);

    Ip4CancelFrameArp (ArpQue, IoStatus, FrameToCancel, Context);

    if (IsListEmpty (&amp;ArpQue-&gt;Frames)) {
      Interface-&gt;Arp-&gt;Cancel (Interface-&gt;Arp, &amp;ArpQue-&gt;Ip, ArpQue-&gt;OnResolved);
    }
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>979</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-17 19:09:24 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1438</commentid>
    <comment_count>3</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2017-02-14 22:07:34 +0000</bug_when>
    <thetext>In UEFI spec, the EFI_MTFTP4_PROTOCOL.ReadFile() interface requires we save the whole file in MTFTP4_TOKEN.buffer, it doesn’t provide any argument to control the file downloaded by chunks. Currently, the TFTP could only download the whole file from server and put it into contiguous memory blocks, then pass the single buffer pointer to the caller.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1511</commentid>
    <comment_count>4</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2017-02-23 17:39:43 +0000</bug_when>
    <thetext>Thank you for explanation Zhang,
I am loading by chunks now splitting on the server side.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>987</bug_id>
          
          <creation_ts>2018-06-15 08:29:01 +0000</creation_ts>
          <short_desc>Incorrect code generation in Thunk16.S with clang</short_desc>
          <delta_ts>2019-09-11 02:45:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Mac OS</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zenith432</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4148</commentid>
    <comment_count>0</comment_count>
      <attachid>181</attachid>
    <who name="">zenith432</who>
    <bug_when>2018-06-15 08:29:01 +0000</bug_when>
    <thetext>Created attachment 181
Patch to fix issue

The file MdePkg/Library/BaseLib/X64/Thunk16.S is used in XCODE BUILDRULEFAMILY assembled with clang.

The source file today generates incorrect code that causes a CPU exception because of a 32-bit displacement for lgdt, lidt instructions used in 16 bit mode without an address-size override prefix.

I&apos;m not sure what the future plan for this file is.  Today&apos;s BUILDRULEORDER forces the use of Thunk16.nasm in XCODE5 toolchain instead of Thunk16.S.  There may be an intention to remove Thunk16.S.

However, as long as it&apos;s in the code base I think should be fixed.

Attached is a patch to fix the code generation for this file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4174</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-06-20 22:52:00 +0000</bug_when>
    <thetext>.nasm will be kept only. .asm has been removed. .S will be removed once nasm compiler fixes the issue https://bugzilla.nasm.us/show_bug.cgi?id=3392469. I see this issue has been fixed in nasm trunk. It will be integrated into next version nasm compiler (2.14). Once nasm 2.14 is released, I will prepare the patch to remove all .S.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9591</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-10 23:09:13 +0000</bug_when>
    <thetext>Thunk16.S has been removed. So, there is no fix require.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9599</commentid>
    <comment_count>3</comment_count>
    <who name="">zenith432</who>
    <bug_when>2019-09-11 02:45:53 +0000</bug_when>
    <thetext>ok</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>181</attachid>
            <date>2018-06-15 08:29:01 +0000</date>
            <delta_ts>2018-06-15 08:29:01 +0000</delta_ts>
            <desc>Patch to fix issue</desc>
            <filename>0001-Fix-incorrect-code-generation-in-Thunk16.S-with-clan.patch</filename>
            <type>application/octet-stream</type>
            <size>2526</size>
            <attacher>zenith432</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>896</bug_id>
          
          <creation_ts>2018-03-14 05:40:58 +0000</creation_ts>
          <short_desc>PosixLike wrappers for Python utilities overwrite the PYTHONPATH variable</short_desc>
          <delta_ts>2018-03-21 10:58:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3696</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-14 05:40:58 +0000</bug_when>
    <thetext>The &quot;BaseTools/BinWrappers/PosixLike&quot; directory provides small wrapper scripts for various edk2 build utilities, so that the latter can be conveniently invoked from a POSIX-like shell. Some of the wrapped utilities are written in Python.

In the wrappers for the Python utilities, the PYTHONPATH variable is set as follows:

&gt; export PYTHONPATH=&quot;$dir/../../Source/Python&quot;

This is incorrect, because the user may already have a PYTHONPATH setting that the wrapped utility actually depends on.

For example, the Ecc tool depends on &quot;antlr_python_runtime-3.0.1&quot;. My GNU/Linux distribution does not provide this python package, therefore I installed it manually, at a custom path in my home directory. I also configured PYTHONPATH correctly:

&gt; $ python
&gt; Python 2.7.5 (default, May  3 2017, 07:55:04) 
&gt; [GCC 4.8.5 20150623 (Red Hat 4.8.5-14)] on linux2
&gt; Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt; &gt;&gt;&gt; import antlr3
&gt; &gt;&gt;&gt; 

That is, importing antlr3 succeeds.

However, the Ecc wrapper overwrites my PYTHONPATH setting (see above), and I get:

&gt; $ source edksetup.sh
&gt; [...]
&gt; $ Ecc
&gt; Traceback (most recent call last):
&gt;   File &quot;BaseTools/BinWrappers/PosixLike/../../Source/Python/Ecc/Ecc.py&quot;, line 24, in &lt;module&gt;
&gt;     from Check import Check
&gt;   File &quot;BaseTools/Source/Python/Ecc/Check.py&quot;, line 20, in &lt;module&gt;
&gt;     import c
&gt;   File &quot;BaseTools/Source/Python/Ecc/c.py&quot;, line 18, in &lt;module&gt;
&gt;     import CodeFragmentCollector
&gt;   File &quot;BaseTools/Source/Python/Ecc/CodeFragmentCollector.py&quot;, line 23, in &lt;module&gt;
&gt;     import antlr3
&gt; ImportError: No module named antlr3

As a workaround, I tried:

&gt; $ python BaseTools/Source/Python/Ecc/Ecc.py

But this also fails, because now the &quot;BaseTools/Source/Python&quot; directory is not on PYTHONPATH, which would be added by the Ecc wrapper script:

&gt; Traceback (most recent call last):
&gt;   File &quot;BaseTools/Source/Python/Ecc/Ecc.py&quot;, line 17, in &lt;module&gt;
&gt;     import Common.LongFilePathOs as os, time, glob, sys
&gt; ImportError: No module named Common.LongFilePathOs

(The module is at &quot;BaseTools/Source/Python/Common/LongFilePathOs.py&quot;.)

Thus, the wrapper scripts should only extend PYTHONPATH, not overwrite it.

The following wrappers are affected:

BPDG, Ecc, GenDepex, GenFds, GenPatchPcdTable, PatchPcdValue, Pkcs7Sign, Rsa2048Sha256GenerateKeys, Rsa2048Sha256Sign, TargetTool, Trim, UPT, build</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3697</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-14 05:42:35 +0000</bug_when>
    <thetext>I&apos;ll send a patch soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3698</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-14 06:55:30 +0000</bug_when>
    <thetext>[edk2] [PATCH] BaseTools/PosixLike: honor pre-set PYTHONPATH
http://mid.mail-archive.com/20180314105423.27682-1-lersek@redhat.com
https://lists.01.org/pipermail/edk2-devel/2018-March/022723.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3731</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-21 10:58:05 +0000</bug_when>
    <thetext>Fixed in commit b12b2c74a3fb (&quot;BaseTools/PosixLike: honor pre-set PYTHONPATH&quot;, 2018-03-21).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>67</bug_id>
          
          <creation_ts>2016-07-20 21:24:35 +0000</creation_ts>
          <short_desc>UefiCpuPkg/CpuMpPei: please consider existing memalloc HOBs in GetWakeupBuffer(</short_desc>
          <delta_ts>2016-11-07 18:06:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Jeff Fan">vanjeff_919</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vanjeff_919</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>92</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 21:24:35 +0000</bug_when>
    <thetext>Please see this message / thread:
http://thread.gmane.org/gmane.comp.bios.edk2.devel/14049/focus=14175

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>410</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-04 20:16:11 +0000</bug_when>
    <thetext>Bug Scrub: Assign to jeff</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>480</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-09-11 21:23:02 +0000</bug_when>
    <thetext>We introduced MP Initialize Library in UefiCpuPkg. CpuMpPei was updated to consume this new library to do AP initialization. 

UefiCpuPkg/Library/MpInitLib/PeiMpInitLib.inf fix this bug by checking existing HOBs to avoid conflicts in GetWakeupBuffer().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>848</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-07 18:06:13 +0000</bug_when>
    <thetext>Non-broken archive link:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg13857.html
msgid &lt;4e671973-b5bd-414d-a0eb-0f950c5aee5c@redhat.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>435</bug_id>
          
          <creation_ts>2017-03-21 02:21:02 +0000</creation_ts>
          <short_desc>A small check needed before calling NetIp4IsUnicast</short_desc>
          <delta_ts>2017-04-07 03:31:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nagaraj Hegde">nagaraj-p.hegde</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>nagaraj-p.hegde</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>sriram-s</cc>
    
    <cc>ting.ye</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1651</commentid>
    <comment_count>0</comment_count>
    <who name="Nagaraj Hegde">nagaraj-p.hegde</who>
    <bug_when>2017-03-21 02:21:02 +0000</bug_when>
    <thetext>I see that we assert when such an invalid config is supplied by DHCP server:

File: TcpMain.c
Function: Tcp4Configure
Code:

if (!IP4_IS_VALID_NETMASK (NTOHL (SubnetMask)) || !NetIp4IsUnicast (NTOHL (Ip), NTOHL (SubnetMask))) {

Issue is that we have a call to ASSERT in NetIp4IsUnicast if NetMask is 0. We would need a check something like this:

if (!IP4_IS_VALID_NETMASK (NTOHL (SubnetMask)) || (SubnetMask != 0 &amp;&amp; !NetIp4IsUnicast (NTOHL (Ip), NTOHL (SubnetMask)))) {</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1664</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-23 04:08:36 +0000</bug_when>
    <thetext>The below APIs may have the same issue. I will fix them together.

1.	Dns4Configure() 
2.	Ip4Config2ConvertIfrNvDataToConfigNvData()
3.	Mtftp4OverrideValid()
4.	EfiMtftp4Configure()
5.	EfiPxeBcSetStationIP()
6.	EfiPxeBcUdpWrite()
7.	Udp4Configure()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1667</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-23 20:20:32 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1776</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-07 03:31:12 +0000</bug_when>
    <thetext>Commit: 

https://github.com/tianocore/edk2/commit/d0e76ac5ce07eb116f8cbea90b7f373d0c127a78

https://github.com/tianocore/edk2/commit/ba0252808b2d0a0362d6bcd9ddef6cd3d2e3bca3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>173</bug_id>
          
          <creation_ts>2016-10-25 21:34:01 +0000</creation_ts>
          <short_desc>Change FrameBufferBltLib module type to UEFI_DRIVER</short_desc>
          <delta_ts>2018-01-14 17:50:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bell Song">binx.song</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ehrhardt</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>716</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-25 21:34:01 +0000</bug_when>
    <thetext>MdeModulePkg\Library\FrameBufferBltLib library is designed for UEFI GOP BLT operation. This library instance type should be UEFI_DRIVER, not BASE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>771</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-27 20:14:34 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>839</commentid>
    <comment_count>2</comment_count>
    <who name="Bell Song">binx.song</who>
    <bug_when>2016-11-03 22:51:28 +0000</bug_when>
    <thetext>Change module type to UEFI_DRIVER, fixed version is: 414b198be9c2065efda01cf43f7c86e41a449b4b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3401</commentid>
    <comment_count>3</comment_count>
      <attachid>130</attachid>
    <who name="Christian Ehrhardt">ehrhardt</who>
    <bug_when>2018-01-14 17:47:56 +0000</bug_when>
    <thetext>Created attachment 130
proposed fix</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3403</commentid>
    <comment_count>4</comment_count>
    <who name="Christian Ehrhardt">ehrhardt</who>
    <bug_when>2018-01-14 17:50:26 +0000</bug_when>
    <thetext>Sorry. Attachment is for a different bug. Please ignore/delete.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>130</attachid>
            <date>2018-01-14 17:47:56 +0000</date>
            <delta_ts>2018-01-14 17:47:56 +0000</delta_ts>
            <desc>proposed fix</desc>
            <filename>patch.framebuffer</filename>
            <type>text/plain</type>
            <size>7281</size>
            <attacher name="Christian Ehrhardt">ehrhardt</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>916</bug_id>
          
          <creation_ts>2018-03-31 22:54:43 +0000</creation_ts>
          <short_desc>AtaAtapiPassThru module start() use the buffer which is not allocated in its error handling code</short_desc>
          <delta_ts>2018-07-01 20:54:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3805</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-03-31 22:54:43 +0000</bug_when>
    <thetext>The AtaAtapiPassThruStart() function in MdeModulePkg\Bus\Ata\AtaAtapiPassThru\AtaAtapiPassThru.c will call the DestroyDeviceInfoList(ATA_ATAPI_PASS_THRU_INSTANCE *Instance) in its ErrorExit error handling code. This DestroyDeviceInfoList() function assume the input Instance pointer must be valid, and point to a initialized ATA_ATAPI_PASS_THRU_INSTANCE buffer. But in fact, the Instance input can be NULL. See below test case:

If a driver caller input a invalid IdeController handle as the Controller parameter in below AtaAtapiPassThruStart() start function, the code will goto ErrorExit in line 695 of AtaAtapiPassThru.c. Then, the DestroyDeviceInfoList(Instance) in line 816 will directly use the Instance NULL valid to reference and access ATA_ATAPI_PASS_THRU_INSTANCE buffer members, which will cause the page fault.

AtaAtapiPassThruStart (
  IN EFI_DRIVER_BINDING_PROTOCOL        *This,
  IN EFI_HANDLE                         Controller,
  IN EFI_DEVICE_PATH_PROTOCOL           *RemainingDevicePath
  )
{
  ... ...
  Instance              = NULL;
  Status  = gBS-&gt;OpenProtocol (
                   Controller,
                   &amp;gEfiIdeControllerInitProtocolGuid,
                   (VOID **) &amp;IdeControllerInit,
                   This-&gt;DriverBindingHandle,
                   Controller,
                   EFI_OPEN_PROTOCOL_BY_DRIVER
                   );

  if (EFI_ERROR (Status)) {
    DEBUG ((EFI_D_ERROR, &quot;Open Ide_Controller_Init Error, Status=%r&quot;, Status));
    goto ErrorExit; //&lt;--line 695
  }
  ... ...
ErrorExit:
  ... ...
  //
  // Remove all inserted ATA devices.
  //
  DestroyDeviceInfoList(Instance); // &lt;--line 816
  ... ...
  
ASSERT [AtaAtapiPassThruDxe] /home/jshi19/wksp_efi/edk2/MdePkg/Library/BaseLib/LinkedList.c(457): InternalBaseLibIsListValid (List)
!!!! X64 Exception Type - 0E(#PF - Page-Fault)  CPU Apic ID - 00000000 !!!!
ExceptionData - 0000000000000000  I:0 R:0 U:0 W:0 P:0 PK:0 S:0
RIP  - 00000000BE66230A, CS  - 0000000000000038, RFLAGS - 0000000000010293
RAX  - 0000000000000000, RCX - 0000000000000008, RDX - FFFFFFFFFFFFFFF8
RBX  - 00000000BFE2A7C0, RSP - 00000000BFE21860, RBP - 00000000BFE218B0
RSI  - 0000000000000000, RDI - 0000000000000000
R8   - 00000000BFE203F8, R9  - 0000000000000001, R10 - 0000000000000000
R11  - 0000000000000000, R12 - 0000000000000000, R13 - 0000000000000000
R14  - 0000000000000000, R15 - 0000000000000000
DS   - 0000000000000030, ES  - 0000000000000030, FS  - 0000000000000030
GS   - 0000000000000030, SS  - 0000000000000030
CR0  - 0000000080010033, CR2 - FFFFFFFFFFFFFFF8, CR3 - 00000000BFC01000
CR4  - 0000000000000668, CR8 - 0000000000000000
DR0  - 0000000000000000, DR1 - 0000000000000000, DR2 - 0000000000000000
DR3  - 0000000000000000, DR6 - 00000000FFFF0FF0, DR7 - 0000000000000400
GDTR - 00000000BFBEDA98 0000000000000047, LDTR - 0000000000000000
IDTR - 00000000BF2BE018 0000000000000FFF,   TR - 0000000000000000
FXSAVE_STATE - 00000000BFE214C0
!!!! Find image based on IP(0xBE66230A) /home/jshi19/wksp_efi/edk2/Build/Ovmf3264/NOOPT_CLANG38/X64/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AtaAtapiPassThru/DEBUG/AtaAtapiPassThruDxe.dll (ImageBase=00000000BE658000, EntryPoint=00000000BE65DA30) !!!!

The fix is simple, add the Instance valid check before DestroyDeviceInfoList(Instance);
--- a/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AtaAtapiPassThru.c
+++ b/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AtaAtapiPassThru.c
@@ -813,7 +813,9 @@ ErrorExit:
   //
   // Remove all inserted ATA devices.
   //
-  DestroyDeviceInfoList(Instance);
+  if (Instance != NULL){
+    DestroyDeviceInfoList(Instance);
+  }


This issue is caught by Uefi module fuzzer (UMfuzzer).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3870</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-12 20:27:25 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4226</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-07-01 20:54:26 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/d374f2cdf9ac9af719ebf1fc522620beff487cbb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>816</bug_id>
          
          <creation_ts>2017-12-12 14:42:09 +0000</creation_ts>
          <short_desc>PE/COFF loader code contains ancient workaround for ELILO/Itanium</short_desc>
          <delta_ts>2018-09-20 10:05:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>chao.b.zhang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EdkCompatibilityPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3217</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2017-12-12 14:42:09 +0000</bug_when>
    <thetext>In EDK2, we have 13 occurrences of the following workaround:

  //
  // NOTE: Some versions of Linux ELILO for Itanium have an incorrect magic value
  //       in the PE/COFF Header.  If the MachineType is Itanium(IA64) and the
  //       Magic value in the OptionalHeader is  EFI_IMAGE_NT_OPTIONAL_HDR32_MAGIC
  //       then override the returned value to EFI_IMAGE_NT_OPTIONAL_HDR64_MAGIC
  //
  if (Hdr.Pe32-&gt;FileHeader.Machine == IMAGE_FILE_MACHINE_IA64 &amp;&amp; Hdr.Pe32-&gt;OptionalHeader.Magic == EFI_IMAGE_NT_OPTIONAL_HDR32_MAGIC) {
    return EFI_IMAGE_NT_OPTIONAL_HDR64_MAGIC;
  }

and all reside in generic code.

Given that it is not documented which versions of ELILO are affected or how likely it is that any are still in use today, and the fact that Itanium is no longer supported in the first place, let&apos;s remove this workaround from the following files:

EdkCompatibilityPkg/Foundation/Library/EdkIIGlueLib/Library/BasePeCoffLib/BasePeCoff.c
MdeModulePkg/Core/Dxe/Mem/MemoryProfileRecord.c
MdeModulePkg/Core/Dxe/Misc/MemoryProtection.c
MdeModulePkg/Core/Dxe/Misc/PropertiesTable.c
MdeModulePkg/Core/PiSmmCore/MemoryAttributesTable.c
MdeModulePkg/Core/PiSmmCore/SmramProfileRecord.c
MdePkg/Library/BasePeCoffLib/BasePeCoff.c
SecurityPkg/Library/DxeImageVerificationLib/DxeImageVerificationLib.c
SecurityPkg/Library/DxeTpmMeasureBootLib/DxeTpmMeasureBootLib.c
SecurityPkg/Tcg/Tcg2Dxe/MeasureBootPeCoff.c
SecurityPkg/Tcg/TrEEDxe/MeasureBootPeCoff.c
SecurityPkg/VariableAuthenticated/SecureBootConfigDxe/SecureBootConfigImpl.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3233</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-14 19:16:50 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner. we want to change to not use PE/COFF Header to detect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3241</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-12-18 23:01:00 +0000</bug_when>
    <thetext>We have PeCoffLoaderGetPeHeaderMagicValue() in PE/COFF lib.

Any other code can call PeCoffLoaderGetPeHeaderMagicValue() instead of parse IA64 header directly.

I suggest:
1) Expose PeCoffLoaderGetPeHeaderMagicValue() in PE/COFF lib.
2) Update MdeModulePkg/SecurityPkg to call PeCoffLoaderGetPeHeaderMagicValue().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3242</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-19 00:15:39 +0000</bug_when>
    <thetext>For this logic, we can base on EFI_IMAGE_FILE_HEADER.SizeOfOptionalHeader to know optional header or optional header plus is used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3245</commentid>
    <comment_count>4</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2017-12-19 04:11:04 +0000</bug_when>
    <thetext>Is it really necessary to keep the workaround? Who is still using Itanium with UEFI 2.7 firmware but with an ancient version of ELILO?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3246</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-12-19 06:42:05 +0000</bug_when>
    <thetext>My proposal is to use another way to detect optional header. New way depends on optional header size instead of magic value. If so, we don&apos;t need this workaround logic.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3247</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-12-19 06:46:12 +0000</bug_when>
    <thetext>If we want to do IPF cleanup, I suggest we do the clean up for *all* IPF content in the tree.

1) IPF specific driver, such as SecurityPkg\VariableAuthenticated\EsalVariableDxeSal

2) IPF specific folder, such as MdeModulePkg\Core\DxeIplPeim\Ipf

3) IPF specific content, such as this work-around, or MdePkg\Include\Library\BaseLib.h, the content in MDE_CPU_IPF.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3248</commentid>
    <comment_count>7</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2017-12-19 06:55:41 +0000</bug_when>
    <thetext>(In reply to jiewen.yao from comment #6)
&gt; If we want to do IPF cleanup, I suggest we do the clean up for *all* IPF
&gt; content in the tree.
&gt; 
&gt; 1) IPF specific driver, such as
&gt; SecurityPkg\VariableAuthenticated\EsalVariableDxeSal
&gt; 
&gt; 2) IPF specific folder, such as MdeModulePkg\Core\DxeIplPeim\Ipf
&gt; 
&gt; 3) IPF specific content, such as this work-around, or
&gt; MdePkg\Include\Library\BaseLib.h, the content in MDE_CPU_IPF.

I agree that would be useful. However, there is a big difference between IPF drivers that are never referenced by modern platforms, and workarounds in generic code that are present in every modern build for every platform, and are only intended for a specific build of ELILO.

The former is essentially dead code. The latter gets executed many times on every boot of every modern UEFI platform in existence.

I strongly believe we should simply remove the ELILO workaround, unless anyone knows for a fact that it is still required. I understand that using the optional header size can be used as well, but in my opinion, modifying generic code to work around this ancient issue is even worse than keeping the workaround (unless the change results in an improvement in other ways as well)

Which versions of ELILO were affected by this issue? Has this ever been recorded? Does anyone know when the issue was fixed?

If we really require this workaround, could move it into a PeCoffLib GetHeaderMagic() API function that only contains the workaround code when built for IPF? Other architectures cannot load IPF PE/COFF binaries anyway.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3249</commentid>
    <comment_count>8</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-12-19 07:22:53 +0000</bug_when>
    <thetext>[Background]
I encountered the issue in EDK-I project (maybe 10 years ago) when we designed one loader for both PE32 and PE32+. Then I provided the fix.

I cannot remember in detail on which version ELILO. It is on an official CDROM.
The problem is that the CDROM is shipped. Even it is fixed in later version, the person who was using the old CDROM still got the issue.

That is why we did not remove the work-around.

[solution]
I agree we should have one place to return the Magic number. To scatter it everywhere is a bad idea. We can define PeCoffLoaderGetPeHeaderMagicValue() and add an IPF version. Other arch can just return the value.
We already has IPF sub-folder, I do not see any problem on that.

If we want to remove the work-around, I still think we should remove it with other IPF support.

I am not sure if it is a good idea to use SizeOfOptionalHeader. Even it is workable, it looks a little strange. IMHO.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3252</commentid>
    <comment_count>9</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2017-12-20 05:47:03 +0000</bug_when>
    <thetext>(In reply to jiewen.yao from comment #8)
&gt; [Background]
&gt; I encountered the issue in EDK-I project (maybe 10 years ago) when we
&gt; designed one loader for both PE32 and PE32+. Then I provided the fix.
&gt; 
&gt; I cannot remember in detail on which version ELILO. It is on an official
&gt; CDROM.
&gt; The problem is that the CDROM is shipped. Even it is fixed in later version,
&gt; the person who was using the old CDROM still got the issue.
&gt; 
&gt; That is why we did not remove the work-around.
&gt; 

Fair enough. But how likely is it that someone that uses Itanium and uses the very latest UEFI built from source *still* uses that CD-ROM to boot from?

&gt; [solution]
&gt; I agree we should have one place to return the Magic number. To scatter it
&gt; everywhere is a bad idea. We can define PeCoffLoaderGetPeHeaderMagicValue()
&gt; and add an IPF version. Other arch can just return the value.
&gt; We already has IPF sub-folder, I do not see any problem on that.
&gt; 
&gt; If we want to remove the work-around, I still think we should remove it with
&gt; other IPF support.
&gt; 

This workaround is /not/ IPF support. This workaround is for a highly specific combination of hardware and software that is unlikely to exist anymore. With this workaround removed, anyone still building UEFI for IPF can keep doing so, unless he wants to boot his system from the CD-ROM that has the broken ELILO build. 

&gt; I am not sure if it is a good idea to use SizeOfOptionalHeader. Even it is
&gt; workable, it looks a little strange. IMHO.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5037</commentid>
    <comment_count>10</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2018-09-20 10:05:04 +0000</bug_when>
    <thetext>fixed this issue in SHA1: f199664ce70b6b1303329113bf9fbc9b002fa1b6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>363</bug_id>
          
          <creation_ts>2017-02-03 11:27:44 +0000</creation_ts>
          <short_desc>Incorrect Name for ACPI IORT Table</short_desc>
          <delta_ts>2017-02-13 19:46:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Alexei">Alexei.Fedorov</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1385</commentid>
    <comment_count>0</comment_count>
    <who name="Alexei">Alexei.Fedorov</who>
    <bug_when>2017-02-03 11:27:44 +0000</bug_when>
    <thetext>ACPI IO Remapping Table is incorrectly named as &quot;IORT&quot; Interrupt Source Override&quot; with its signatures as below:
///
/// &quot;IORT&quot; Interrupt Source Override
///
#define EFI_ACPI_6_0_INTERRUPT_SOURCE_OVERRIDE_SIGNATURE  SIGNATURE_32 &apos;I&apos;, &apos;O&apos;, &apos;R&apos;, &apos;T&apos;)

in Acpi60.h and

#define EFI_ACPI_6_1_INTERRUPT_SOURCE_OVERRIDE_SIGNATURE SIGNATURE_32 &apos;I&apos;, &apos;O&apos;, &apos;R&apos;, &apos;T&apos;)
 
in Acpi61.h.

The name should be changed to &quot;IO Remapping Table&quot; with signatures
EFI_ACPI_6_0_IO_REMAPPING_TABLE_SIGNATURE
EFI_ACPI_6_1_IO_REMAPPING_TABLE_SIGNATURE</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1421</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-09 19:13:08 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1431</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-02-13 19:46:40 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/8b2a15fd5c7235f2998e26906e034204147d07a9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>726</bug_id>
          
          <creation_ts>2017-09-29 06:05:38 +0000</creation_ts>
          <short_desc>PcdGet64 function is used in multi threads code, system may in non-deterministic behavior when get dynamic PCD.</short_desc>
          <delta_ts>2017-10-19 22:31:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>CrystalLee</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2814</commentid>
    <comment_count>0</comment_count>
    <who name="">CrystalLee</who>
    <bug_when>2017-09-29 06:05:38 +0000</bug_when>
    <thetext>MicrocodeDetect function will run by every threads, and it will use PcdGet to get PcdCpuMicrocodePatchAddress and PcdCpuMicrocodePatchRegionSize, if change both PCD default to dynamic, system will in non-deterministic behavior.

By design, UEFI/PI services are single threaded and not re-entrant so Multi processor code should not use UEFI/PI services. Here, Pcd protocol/PPI is used to access dynamic PCDs so it would result in non-deterministic behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2867</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-12 20:10:13 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2905</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2017-10-19 22:31:41 +0000</bug_when>
    <thetext>SHA-1: 1e3f7a3782f1928a19bba81d9d0dba28d15fdae5

* UefiCpuPkg/MpInitLib: Avoid call PcdGet* in Ap &amp; Bsp.

MicrocodeDetect function will run by every threads, and it will
use PcdGet to get PcdCpuMicrocodePatchAddress and
PcdCpuMicrocodePatchRegionSize, if change both PCD default to dynamic,
system will in non-deterministic behavior.

By design, UEFI/PI services are single threaded and not re-entrant
so Multi processor code should not use UEFI/PI services. Here, Pcd
protocol/PPI is used to access dynamic PCDs so it would result in
non-deterministic behavior.

This code get PCD value in BSP and save them in CPU_MP_DATA for Ap.

https://bugzilla.tianocore.org/show_bug.cgi?id=726

Cc: Crystal Lee &lt;CrystalLee@ami.com.tw&gt;
Cc: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>191</bug_id>
          
          <creation_ts>2016-10-27 21:18:39 +0000</creation_ts>
          <short_desc>[MdePkg] GetSpinLockProperties() should use InternalGetSpinLockProperties for intel compiler</short_desc>
          <delta_ts>2017-07-12 11:03:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeff Fan">vanjeff_919</reporter>
          <assigned_to name="Jeff Fan">vanjeff_919</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>777</commentid>
    <comment_count>0</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-10-27 21:18:39 +0000</bug_when>
    <thetext>GetSpinLockProperties() in MdePkg\Library\BaseSynchronizationLib\Synchronization.c does not use InternalGetSpinLockProperties().  As a result, Intel compiler configuration cannot optimize properly for the Intel architecture.

We need to update GetSpinLockProperties in Synchronization.c to consume InternalGetSpinLockProperties().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>836</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-03 20:07:29 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2427</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2017-07-12 11:03:42 +0000</bug_when>
    <thetext>Will not fix it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>554</bug_id>
          
          <creation_ts>2017-05-18 13:30:35 +0000</creation_ts>
          <short_desc>Return an error instead if ASSERT() from LogoDxe if HII Image Package is not found</short_desc>
          <delta_ts>2017-05-24 20:22:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2017</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2072</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-18 13:30:35 +0000</bug_when>
    <thetext>Not all tool chains support generation of HII Packages in
PE/COFF resource sections.  The LogoDxe driver depends on an
HII Image Package being present in a PE/COFF resource section
and will ASSERT() if the HII Package can not be found.

In order to improve compatibility with more tool chains, it
is better to return an error instead of ASSERT().

This ASSERT() issue was specifically seen using the XCODE5
tool chain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2081</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-18 20:11:42 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner， add the debug messages</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2094</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 02:24:04 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2121</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-22 19:48:42 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/1c020add31d9ba5f556d97bad174e80d7325d973</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2167</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-24 20:22:53 +0000</bug_when>
    <thetext>Commit to UDK2017 branch

https://github.com/tianocore/edk2/commit/8bb0a062082aca6d5139eb3cb8490c1aef58e9ff</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>103</bug_id>
          
          <creation_ts>2016-08-23 22:59:32 +0000</creation_ts>
          <short_desc>BDS generates &quot;Boot manager Menu&quot; boot option not consistent</short_desc>
          <delta_ts>2016-10-24 23:10:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>446</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2016-08-23 22:59:32 +0000</bug_when>
    <thetext>Found in Nt32 platform.
In first boot phase, BDS will create an boot option for Boot Manager Menu when it create &quot;OsIndicationsSupported&quot; variable. In this case, it will not append mBmAutoCreateBootOptionGuid as optional data for a boot option.

Later in this boot phase, BDS will enumerate all potential boot options, it will create boot option for Boot Manager Menu again. In this case, it will append mBmAutoCreateBootOptionGuid as optional data for this boot option.

This difference caused later check duplicate boot options not found these two boot options are duplicated.

We should enhance the logic, always append mBmAutoCreateBootOptionGuid as optional data when create boot option by BDS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>536</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-29 20:23:58 +0000</bug_when>
    <thetext>Bug Scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>549</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-09-30 07:11:06 +0000</bug_when>
    <thetext>I&apos;m unsure if different &quot;optional data&quot; (practically, different command line arguments) should be considered a different boot option -- that&apos;s for others to decide, I have no input on that.

However, I have encountered (and reported) something similar before: IIRC, the boot option matching logic even considers the *description* of the boot option (which has no technical consequence, it&apos;s there just for the user to read) as a distinguishing factor. I think the description should not be part of the comparison. So, when working this BZ, please consider dropping the description from the comparison.

Function:
EfiBootManagerFindLoadOption()

My earlier report: 
https://www.mail-archive.com/edk2-devel@lists.01.org/msg11439.html

(Sorry if this comment doesn&apos;t belong here.)

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>601</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-14 02:19:15 +0000</bug_when>
    <thetext>Eric, is this issue fixed by you weeks ago?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>630</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-19 04:02:52 +0000</bug_when>
    <thetext>Liming fixed this bug. Transfer to him.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>707</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-24 23:10:54 +0000</bug_when>
    <thetext>Fix it on edk2 8953d69a5ca7f18f80f46e67da95c2527ca6ee89 to avoid the duplication boot option be created.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>381</bug_id>
          
          <creation_ts>2017-02-15 01:24:10 +0000</creation_ts>
          <short_desc>Current SecureConfigure driver cannot enroll the DBX.bin downloaded from uefi.org</short_desc>
          <delta_ts>2017-04-06 21:11:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="chao">chao.b.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1443</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-02-15 01:24:10 +0000</bug_when>
    <thetext>The DBX.BIN downloaded from UEFI http://www.uefi.org/revocationlistfile

It cannot be used by SecureConfigure driver directly.

The root-cause is that this DBX.bin includes TimeStamp and AuthInfo. But SecureConfigure driver only accesses raw variable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1461</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-16 19:08:42 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner, it is an ehancement, not a block issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1762</commentid>
    <comment_count>2</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2017-04-06 21:11:31 +0000</bug_when>
    <thetext>The patch has been fixed in EDKII trunk by commit 
4de754e15fec9c94ce7677904efd0022c211721b
9d9b8b77bc54718a4debfea3a7a3dd59bba16840</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>742</bug_id>
          
          <creation_ts>2017-10-23 04:11:29 +0000</creation_ts>
          <short_desc>Memory Use-after-free happens when close ExitBootServiceEvent twice in IScsiMisc.c</short_desc>
          <delta_ts>2018-01-22 20:28:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2914</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-10-23 04:11:29 +0000</bug_when>
    <thetext>In edk2\MdeModulePkg\Universal\Network\IScsiDxe\IScsiMisc.c, there two place to close the IScsi ExitBootServiceEvent in normal boot path as below. When OS loader trigger exit boot service event, firstly, the IScsiOnExitBootService callback function will close and free the Private-&gt;ExitBootServiceEvent in line 875 , then secondly the system will call every driver&apos;s stop functions, including IScsiDriverBindingStop, which will call IScsiCleanDriverData to stop and free Private-&gt;ExitBootServiceEvent again in line 628. Because the Private-&gt;ExitBootServiceEvent has been freed in line 875, so when the line 628 CloseEvent try to access the event data, the use-after-free memory access happens.

EFI_STATUS
IScsiCleanDriverData (
  IN ISCSI_DRIVER_DATA  *Private
  )
{
...
line 628:   
  gBS-&gt;CloseEvent (Private-&gt;ExitBootServiceEvent);
...
}

and 

VOID
EFIAPI
IScsiOnExitBootService (
  IN EFI_EVENT  Event,
  IN VOID       *Context
  )
{
...
line 875:
  gBS-&gt;CloseEvent (Private-&gt;ExitBootServiceEvent);
...
}

You can add debug output before the line 628 and line 875 as below to see the twice ExitBootServiceEvent closing in the debug log after booting a Uefi OS.

diff --git a/MdeModulePkg/Universal/Network/IScsiDxe/IScsiMisc.c b/MdeModulePkg/Universal/Network/IScsiDxe/IScsiMisc.c
old mode 100644
new mode 100755
index ae202c3..f754a87
--- a/MdeModulePkg/Universal/Network/IScsiDxe/IScsiMisc.c
+++ b/MdeModulePkg/Universal/Network/IScsiDxe/IScsiMisc.c
@@ -624,7 +624,7 @@ IScsiCleanDriverData (
   }

 EXIT:
-
+  DEBUG ((EFI_D_ERROR, &quot;IScsiCleanDriverData: close Private-&gt;ExitBootServiceEvent\n&quot;));
   gBS-&gt;CloseEvent (Private-&gt;ExitBootServiceEvent);

   FreePool (Private);
@@ -872,6 +872,7 @@ IScsiOnExitBootService (
   ISCSI_DRIVER_DATA *Private;

   Private = (ISCSI_DRIVER_DATA *) Context;
+  DEBUG ((EFI_D_ERROR, &quot;IScsiOnExitBootService: close Private-&gt;ExitBootServiceEvent\n&quot;));
   gBS-&gt;CloseEvent (Private-&gt;ExitBootServiceEvent);

   IScsiSessionAbort (&amp;Private-&gt;Session);

1. Download the 64bits Linux Uefi Validation(LUV) image in https://download.01.org/linux-uefi-validation/v2.1/luv-v2.1_diskboot_gpt_x86_64_.tar.bz2 and decompress this image as default luv-v2.1_diskboot_gpt_x86_64_.img
2. Build latest edk2 OVMF platform debug image like below:
$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -t GCC5 -DSECURE_BOOT_ENABLE=TRUE -a IA32 -a X64 -b NOOPT -DDEBUG_ON_SERIAL_PORT -n 5
3. Run the LUV image and OVMF bios image on qemu like below:
$ qemu-system-x86_64 -serial file:serial.log -m 5120 -hda fat:. -monitor stdio --enable-kvm -bios ../Ovmf3264/NOOPT_GCC5/FV/OVMF.fd -hdb ~/workspace/simics5-project/images/luv-v2.1_diskboot_gpt_x86_64_.img
4. After the LUV boot into OS. Check the serial.log to find the debug messages as below:
...
IScsiOnExitBootService: close Private-&gt;ExitBootServiceEvent
IScsiCleanDriverData: close Private-&gt;ExitBootServiceEvent
...


Below are the Edk2 AddressSanitizer call stack tracing when the use after free memory access happen:

--------------------------- __asan_load0x08 is called---------------------------
CoreCloseEvent
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Event/Event.c:734:14

IScsiCleanDriverData
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/IScsiDxe/IScsiMisc.c:628:20

IScsiDriverBindingStop
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/IScsiDxe/IScsiDriver.c:458:10

CoreDisconnectController
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/DriverSupport.c:938:18

CoreDisconnectControllersUsingProtocolInterface
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:655:16

CoreUninstallProtocolInterface
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:754:10

CoreUninstallMultipleProtocolInterfaces
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:854:12

SockDestroyChild
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/Tcp4Dxe/SockInterface.c:208:36

Tcp4ServiceBindingDestroyChild
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/Tcp4Dxe/Tcp4Driver.c:777:5

Tcp4DestroyChildEntryInHandleBuffer
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/Tcp4Dxe/Tcp4Driver.c:174:3

NetDestroyLinkList
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Library/DxeNetLib/DxeNetLib.c:1115:14

Tcp4DriverBindingStop
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/Tcp4Dxe/Tcp4Driver.c:512:12

CoreDisconnectController
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/DriverSupport.c:934:20

CoreDisconnectControllersUsingProtocolInterface
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:655:16

CoreUninstallProtocolInterface
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:754:10

Ip4ServiceBindingDestroyChild
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/Ip4Dxe/Ip4Driver.c:1011:12

Ip4DestroyChildEntryInHandleBuffer
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/Ip4Dxe/Ip4Driver.c:504:3

NetDestroyLinkList
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Library/DxeNetLib/DxeNetLib.c:1115:14

Ip4DriverBindingStop
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/Ip4Dxe/Ip4Driver.c:731:12

CoreDisconnectController
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/DriverSupport.c:934:20

CoreDisconnectControllersUsingProtocolInterface
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:655:16

CoreUninstallProtocolInterface
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:754:10

CoreUninstallMultipleProtocolInterfaces
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:854:12

MnpServiceBindingDestroyChild
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/MnpDxe/MnpDriver.c:616:10

MnpDestoryChildEntry
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/MnpDxe/MnpConfig.c:900:3

NetDestroyLinkList
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Library/DxeNetLib/DxeNetLib.c:1115:14

MnpDestroyServiceChild
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/MnpDxe/MnpConfig.c:923:10

MnpDestroyServiceChildEntry
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/MnpDxe/MnpDriver.c:72:3

NetDestroyLinkList
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Library/DxeNetLib/DxeNetLib.c:1115:14

MnpDriverBindingStop
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/Network/MnpDxe/MnpDriver.c:406:10

CoreDisconnectController
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/DriverSupport.c:934:20

CoreDisconnectControllersUsingProtocolInterface
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:655:16

CoreUninstallProtocolInterface
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:754:10

CoreUninstallMultipleProtocolInterfaces
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Hand/Handle.c:854:12

??
??:0:0

To fix this issue is easy. The CloseEvent (Private-&gt;ExitBootServiceEvent) in IScsiMisc.c line 875 is not necessary and can be removed in fact. In a driver model driver, it is usually the driver&apos;s start() and stop() functions to handle all the resource allocation and free. We don&apos;t need to close/free the Private-&gt;ExitBootServiceEvent in both IScsi driver stop() function and IScsiOnExitBootService callback function.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2951</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-26 20:11:55 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2955</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-10-26 23:12:33 +0000</bug_when>
    <thetext>Hi Steven,

Thanks the detailed analysis. I agree the proposal fix.

The issue also existed in NetworkPkg\IScsiDxe.

Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3464</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-01-22 20:28:29 +0000</bug_when>
    <thetext>Commit version:
Trunk:
https://github.com/tianocore/edk2/commit/d32159853d4bd37a1f98312b172f3c426019cde2

UDK2018:
https://github.com/tianocore/edk2/commit/4c33ac7a72e96e76993de467ddca2ea692b769d6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>208</bug_id>
          
          <creation_ts>2016-11-03 01:17:32 +0000</creation_ts>
          <short_desc>[basetool] add syntax to use GUID as PCD value.</short_desc>
          <delta_ts>2017-12-27 21:16:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>823</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-11-03 01:17:32 +0000</bug_when>
    <thetext>Current PCD value can only be input as byte string. It is not easy for a GUID.

I suggest we use &quot;GUID(XXXX-XX-XX-XX-XXXXXXXXXXXX)&quot; as PCD value, so that it can reduce the burden to convert a GUID to a byte string.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>862</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-09 20:12:38 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3279</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-27 21:16:19 +0000</bug_when>
    <thetext>The flexible Pcd value format support also cover this request.

SHA-1: 726c501c2c9a1ef103fab7846e2d1a34506715d8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>402</bug_id>
          
          <creation_ts>2017-02-22 22:45:16 +0000</creation_ts>
          <short_desc>Ip4Config2/Ip6Config: SetData() returns error when DNS IPs are same</short_desc>
          <delta_ts>2017-03-05 19:43:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nagaraj Hegde">nagaraj-p.hegde</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>nagaraj-p.hegde</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>sriram-s</cc>
    
    <cc>ting.ye</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1505</commentid>
    <comment_count>0</comment_count>
    <who name="Nagaraj Hegde">nagaraj-p.hegde</who>
    <bug_when>2017-02-22 22:45:16 +0000</bug_when>
    <thetext>If the DHCP reply packet contains 2 DNS server IPs and both happen to be the same, we see that DNS is not configured.

In case of a HttpBoot where the URL contained FQDN, download would fail. In case of “ifconfig –r eth0” at UEFI Shell, we will end up configuring IP, Subnet, gateway but not DNS, without any warning/note.

Having duplicate DNS server IPs specified is not an ideal configuration, but not an error condition. we have 2 choices here:

1. Update the code in Ip4Config2/Ip6Config protocol to configure with the one DNS server IP and proceed

2. Ignore duplicates and complete the SetData() operation with all the input provided.

For #1, it’s not reasonable to edit the input data size that the user has given and return a EFI_SUCCESS. which would probably be a violation of UEFI Spec. (truncating the user provided input and still returning a EFI_SUCCESS).

So, #2 should be an agreeable solution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1506</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-02-22 22:52:08 +0000</bug_when>
    <thetext>Working on the fix to ignore duplicates address check.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1512</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-23 19:09:03 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1581</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-05 19:43:46 +0000</bug_when>
    <thetext>
Commit:

https://github.com/tianocore/edk2/commit/a2f4b153ac5d0039f81bb689ad32cd48ac2aa51d

https://github.com/tianocore/edk2/commit/9508a4ac3d756fa6713366afaa3e12063aef5dc9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>313</bug_id>
          
          <creation_ts>2016-12-28 20:47:53 +0000</creation_ts>
          <short_desc>NT32Pkg uses ShellPkg source code instead of ShellBinPkg binary</short_desc>
          <delta_ts>2017-03-17 00:34:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>Nt32Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1218</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-12-28 20:47:53 +0000</bug_when>
    <thetext>ShellBinPkg is not updated very often. It is updated only before a new release.
NT32Pkg uses the ShellBinPkg binary currently. To avoid the shell bug being hidden for quite a long time, I suggest NT32Pkg uses Shell built from ShellPkg source code. So that the ShellPkg update can be verified every time NT32 is used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1258</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-01-05 19:15:39 +0000</bug_when>
    <thetext>bug scrub: default use source is good. we should also support a Flag to use binary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1636</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-03-17 00:34:15 +0000</bug_when>
    <thetext>pushed @ 46d5189bdeacd7f640aa13589635b262d7230e35</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>589</bug_id>
          
          <creation_ts>2017-06-05 11:23:13 +0000</creation_ts>
          <short_desc>alias command does not return lasterror status when it fails to delete an alias</short_desc>
          <delta_ts>2017-06-07 01:56:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>tapandshah</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>tapandshah</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2247</commentid>
    <comment_count>0</comment_count>
    <who name="">tapandshah</who>
    <bug_when>2017-06-05 11:23:13 +0000</bug_when>
    <thetext>When alias command tries to delete an alias that does not exist in system, it should return an error as alias not found with an error status reported in lasterror environment variable, but instead it exits with no error message reported to console and lasterror environment variable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2251</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-06-07 01:54:11 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2252</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-06-07 01:56:06 +0000</bug_when>
    <thetext>fixed in master: 7bd5a2c81ed5bc52ed63b348fcb1686f1fb5b398
         UDK2017: 0164fa8f43d0821fd61e1e810168ce0da29291d8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>501</bug_id>
          
          <creation_ts>2017-04-23 06:48:21 +0000</creation_ts>
          <short_desc>Can not build AppPkg when set toolchain to XCODE5</short_desc>
          <delta_ts>2018-09-16 20:01:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Mac OS</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="fbwang">273412544</reporter>
          <assigned_to name="Jaben Carsey">jaben.carsey</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1898</commentid>
    <comment_count>0</comment_count>
    <who name="fbwang">273412544</who>
    <bug_when>2017-04-23 06:48:21 +0000</bug_when>
    <thetext>error: cannot compile this va_arg expression yet when build AppPkg
/Users/crystal/Documents/Code/C/edk2/MdePkg/Library/BasePrintLib/PrintLibInternal.c:713:23: error: cannot compile this va_arg expression yet
              Width = VA_ARG (VaListMarker, UINTN);
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~

OS : Mac OS Sierra 10.12.4 Xcode: 8.3.2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1961</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-27 20:33:15 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first. 

Andrew Fish: could you shall us the toolchain list that expected to be supported ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1962</commentid>
    <comment_count>2</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2017-04-27 20:42:56 +0000</bug_when>
    <thetext>The XCODE5 target should support this build. Xcode 8.3.2 is the current download from the Mac App Store. 

I think recent versions of clang have added more error checking on var args. This may be a missing VA_START()? I&apos;ve also seen an issue when passing to small a value to VA_START().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4981</commentid>
    <comment_count>3</comment_count>
    <who name="fbwang">273412544</who>
    <bug_when>2018-09-16 20:01:49 +0000</bug_when>
    <thetext>UDK2018 is OK</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>48</bug_id>
          
          <creation_ts>2016-07-20 21:00:30 +0000</creation_ts>
          <short_desc>Most edk2.tianocore.org links in EDK II are wrong</short_desc>
          <delta_ts>2016-11-14 02:28:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>100</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>73</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 21:00:30 +0000</bug_when>
    <thetext>We still support the http://edk2.tianocore.org url. It redirects to http://www.tianocore.org/edk2.

But, many other references to http://edk2.tianocore.org have not be valid since the move to sourceforge several years back.

After someone pointed out the BuildNotes.txt issue, I found these with git grep edk2.tianocore.org:

AppPkg/Applications/Python/Ia32/pyconfig.h:#define PACKAGE_URL   &quot;http://edk2.tianocore.org/toolkit/python&quot;
AppPkg/Applications/Python/Ipf/pyconfig.h:#define PACKAGE_URL   &quot;http://edk2.tianocore.org/toolkit/python&quot;
BaseTools/BuildNotes.txt:  b) Look over https://edk2.tianocore.org/step-by-step-instructions.html
IntelFrameworkPkg/FrameworkSpecConformance.txt:# package in EdkII Open Source Project (https://edk2.tianocore.org/source/browse/edk2/trunk/edk2/IntelFrameworkPkg)
edksetup.sh:# firstly, please reference https://edk2.tianocore.org/unix-getting-started.html to 
edksetup.sh:# Please reference edk2 user manual for more detail descriptions at https://edk2.tianoc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>428</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-11 20:30:21 +0000</bug_when>
    <thetext>Bug Scrub: Submit a new one for Apppkg, this one assigned to basetool owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>445</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-08-22 20:40:40 +0000</bug_when>
    <thetext>BaseTools/BuildNotes.txt: update is done. Git version: 4480414642d047a6667da86c5026a79af9c9cfe8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>492</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-15 04:11:48 +0000</bug_when>
    <thetext>edksetup.sh: update is done. git version 445bfd921462d50a226a833f5b1c3e375efdd434

IntelFrameworkPkg/FrameworkSpecConformance.txt: update is done. version 04b1d73a0dac00f5a394db89f928a18a6ce5ec15</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>493</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-15 04:14:54 +0000</bug_when>
    <thetext>The left AppPkg&apos;s bug is in bug 100. others is fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>494</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-15 04:19:10 +0000</bug_when>
    <thetext>change to Liming to verify it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>419</bug_id>
          
          <creation_ts>2017-03-06 15:01:21 +0000</creation_ts>
          <short_desc>UefiDevicePathLibConvertTextToDevicePath handles multiple devices in path wrong.</short_desc>
          <delta_ts>2017-03-23 01:12:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Warner Losh">imp</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>imp</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1586</commentid>
    <comment_count>0</comment_count>
    <who name="Warner Losh">imp</who>
    <bug_when>2017-03-06 15:01:21 +0000</bug_when>
    <thetext>UefiDevicePathLibConvertTextToDevicePath correctly detects when it has hit a &apos;,&apos; splicing together multiple paths. However, the code that tries to cope with it:
{code}
    if (IsInstanceEnd) {
      DeviceNode = (EFI_DEVICE_PATH_PROTOCOL *) AllocatePool (END_DEVICE_PATH_LENGTH);
      ASSERT (DeviceNode != NULL);
      SetDevicePathEndNode (DeviceNode);

      NewDevicePath = AppendDevicePathNode (DevicePath, DeviceNode);
      FreePool (DevicePath);
      FreePool (DeviceNode);
      DevicePath = NewDevicePath;
    }
{code}
causes a problem. The END node that&apos;s appended it the node for the entire list. So when the node is appended in AppendDevicePathNode, it winds up disappearing. This leads to the path &apos;PciRoot(0x0),PciRoot(0x0)&apos; parsing as if &apos;PciRoot(0x0)/PciRoot(0x0)&apos; were specified. These are two very different things.

The fix is trivial enough. If you add
{code}
      DeviceNode-&gt;SubType = END_INSTANCE_DEVICE_PATH_SUBTYPE;
{code}
after the SetDevicePathEndNode call, it will have the proper subtype and the two paths I mentions above will parse to different things. Not sure that&apos;s the proper style, but I didn&apos;t see any accessor functions to set the subtype of a node. Another fix would be to create a SetDevicePathEndInstanceNode() function. What&apos;s important is to get this node it&apos;s proper type.

I noticed this when porting the code to FreeBSD, fyi.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1591</commentid>
    <comment_count>1</comment_count>
    <who name="Warner Losh">imp</who>
    <bug_when>2017-03-08 13:36:50 +0000</bug_when>
    <thetext>I can submit a pull request if that would be useful. Otherwise you can take the described patch here and add the following lines to it:

Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Warner Losh &lt;imp@bsdimp.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1595</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-09 19:03:09 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1663</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-03-23 01:12:32 +0000</bug_when>
    <thetext>pushed @ 647636e1750b07110ed807f455cb9c8b7d089f75 with Losh&apos;s Signed-off.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>784</bug_id>
          
          <creation_ts>2017-11-15 07:27:27 +0000</creation_ts>
          <short_desc>Shell command &quot;comp&quot; returns wrong return code if compared files are different</short_desc>
          <delta_ts>2018-06-21 03:25:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>michael.lorer</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3070</commentid>
    <comment_count>0</comment_count>
      <attachid>118</attachid>
    <who name="">michael.lorer</who>
    <bug_when>2017-11-15 07:27:27 +0000</bug_when>
    <thetext>Created attachment 118
Solution proposal

The UEFI Shell specification V2.0 states that the &quot;comp&quot; command should return SHELL_NOT_EQUAL if the files that are compared are not equal (see specification page 89).

With the current implementation that&apos;s not the case. The &quot;comp&quot; command always returns SHELL_SUCCESS (if equal and if not equal).

I&apos;ve attached my proposed solution for that issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3087</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-16 19:04:17 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4181</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-06-21 03:25:53 +0000</bug_when>
    <thetext>fixed @ c2d6e2bc12b2a4e99304a1ebbc3474638721f5a8</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>118</attachid>
            <date>2017-11-15 07:27:27 +0000</date>
            <delta_ts>2017-11-15 07:27:27 +0000</delta_ts>
            <desc>Solution proposal</desc>
            <filename>comp.patch</filename>
            <type>application/octet-stream</type>
            <size>629</size>
            <attacher>michael.lorer</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>692</bug_id>
          
          <creation_ts>2017-09-05 02:38:51 +0000</creation_ts>
          <short_desc>BaseTools: same region print twice in the build log</short_desc>
          <delta_ts>2017-09-08 22:15:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2675</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-05 02:38:51 +0000</bug_when>
    <thetext>In the build log:

Fd File Name:OVMF_VARS (c:\r9tip\allpkg\edk2\Build\Ovmf3264\DEBUG_VS2015x86\FV\OVMF_VARS.fd)

Generate Region at Offset 0x0
   Region Size = 0x40000
   Region Name = DATA

Generate Region at Offset 0x40000
   Region Size = 0x1000
   Region Name = None

Generate Region at Offset 0x41000
   Region Size = 0x1000
   Region Name = DATA

Generate Region at Offset 0x42000
   Region Size = 0x42000
   Region Name = None

Generate Region at Offset 0x0
   Region Size = 0x40000
   Region Name = DATA

Generate Region at Offset 0x40000
   Region Size = 0x1000
   Region Name = None

Generate Region at Offset 0x41000
   Region Size = 0x1000
   Region Name = DATA

Generate Region at Offset 0x42000
   Region Size = 0x42000
   Region Name = None</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2700</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-09-06 21:04:15 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2714</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-08 22:15:47 +0000</bug_when>
    <thetext>Fix it by SHA-1: 66d00b4d65bcdf5730d95eed67caf88b1bf69b85</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>242</bug_id>
          
          <creation_ts>2016-11-18 02:44:14 +0000</creation_ts>
          <short_desc>Add more and accurate information for SMM exception debug info</short_desc>
          <delta_ts>2017-04-06 22:25:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Jeff Fan">vanjeff_919</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vanjeff_919</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>989</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-11-18 02:44:14 +0000</bug_when>
    <thetext>We added SMM page protection now.
Once the exception is triggered, the system reports &quot;SMM stack overflow!&quot;

That is misreport found by Laszlo Ersek &lt;lersek@redhat.com&gt;.

So we need fix this issue to report &quot;SMM stack overflow!&quot; after the PFAddress is in the guard page (mSmmStackArrayBase + EFI_PAGE_SIZE + CpuIndex * mSmmStackSize).


Another issue in SMM is that: the debug info is not sufficient.

we only considitionaly dump below:
      DEBUG ((DEBUG_ERROR, &quot;SMM stack overflow!\n&quot;));
      CpuDeadLoop ();


      DEBUG ((DEBUG_ERROR, &quot;Code executed on IP(0x%lx) out of SMM range after SMM is locked!\n&quot;, PFAddress));
      DEBUG_CODE (
        DumpModuleInfoByIp (*(UINTN *)(UINTN)SystemContext.SystemContextX64-&gt;Rsp);
      );
      CpuDeadLoop ();

some is just a deadloop()

VOID
SmiDefaultPFHandler (
  VOID
  )
{
  CpuDeadLoop ();
}

I discussed with CPU module owner, we think the better way is to display all exception information, like what we did in CpuExceptionLib.

We can copy all the code from CpuExceptionLib:DumpCpuContent (), or just expose this API in CpuExceptionLib, so that PiSmmCpu driver can call this API to dump more useful info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>992</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-11-18 04:53:54 +0000</bug_when>
    <thetext>Printing the exception details would be very nice. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1102</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-01 19:09:35 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1766</commentid>
    <comment_count>3</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2017-04-06 22:25:50 +0000</bug_when>
    <thetext>Fixed at SHA-1: 412e9dea4b7e6a84bc7125088ac4b08365d9646c..c54a6e6feb79ceb5bd057eaa57fb4f85f42dbca4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>158</bug_id>
          
          <creation_ts>2016-10-19 04:35:39 +0000</creation_ts>
          <short_desc>Remove ShellPkg wrapper header files</short_desc>
          <delta_ts>2018-11-22 01:46:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>635</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-19 04:35:39 +0000</bug_when>
    <thetext>When we are sure that all open source/close source code are updated to reference the following header files in MdePkg, other than the wrapper header files in ShellPkg, we can remove the ShellPkg wrapper header files.

header files in MdePkg (recommend to include):
  MdePkg/Include/Protocol/Shell.h
  MdePkg/Include/Protocol/ShellDynamicCommand.h
  MdePkg/Include/Protocol/ShellParameters.h

wrapper files in ShellPkg (will remove):
  ShellPkg/Include/Protocol/EfiShell.h
  ShellPkg/Include/ShellBase.h
  ShellPkg/Include/Protocol/EfiShellDynamicCommand.h
  ShellPkg/Include/Protocol/EfiShellParameters.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>650</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-10-19 22:17:18 +0000</bug_when>
    <thetext>change to confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5580</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-14 00:46:00 +0000</bug_when>
    <thetext>Assign to Shenglei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5678</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-11-22 01:46:51 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/a2c0496991bf1b7382ec6d39a22034f435feb20d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>68</bug_id>
          
          <creation_ts>2016-07-20 21:25:13 +0000</creation_ts>
          <short_desc>Man pages in BaseTools UserManuals should be updated with new ML address</short_desc>
          <delta_ts>2016-08-30 03:53:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>93</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 21:25:13 +0000</bug_when>
    <thetext>bcran commented 12 days ago
The .rtf files in BaseTools/UserManuals in the edk2 tree still tell users to &quot;Report bugs to edk2-buildtools-devel@lists.sourceforge.net&quot;. Since we no longer use the sourceforge mailing lists we should update those files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>409</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-04 20:14:37 +0000</bug_when>
    <thetext>Bug Scrub: Assign to base tool owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>457</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-08-30 03:53:20 +0000</bug_when>
    <thetext>Fix it in version 4977810b0f49a88d0d9719cc3b4d16f96e71ab8f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>436</bug_id>
          
          <creation_ts>2017-03-21 03:36:56 +0000</creation_ts>
          <short_desc>Upgrade CryptoPkg to use the latest OpenSSL 1.1.0xx/latest stable release</short_desc>
          <delta_ts>2017-04-07 04:04:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Qin Long">qin.long</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1654</commentid>
    <comment_count>0</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-03-21 03:36:56 +0000</bug_when>
    <thetext>Update CryptoPkg to support building with OpenSSL latest stable release (1.1.0xx).

Current EDKII-CryptoPkg is leveraging OpenSSL-1.0.2xx as the underlying cryptographic provider, which requires some extra patches (EDKII-openssl-xxxx.patch) and installation scripts for EDKII build &amp; usage.
The latest stable version of OpenSSL was upgraded to the 1.1.0 series of release, with lots of EDKII-specific patches integration, which make CryptoPkg possbile to remove all extra patch and scripts for more native build support.

This request is to update CryptoPkg to support native building with the latest OpenSSL 1.1.0xx.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1673</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-23 20:24:47 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1778</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-04-07 04:04:47 +0000</bug_when>
    <thetext>Enabled OpenSSL-1.1.0xx native build (with some issue fixes) by the following commits:
    2c86774429f2e544fbed36f3cdd253eac56e34ab
    452dc7cb812e957df87e0ee5c43e939d54da4939
    58ce70f7ed3853f2fbadb30e39f92ee3a5780789
    da9676f89cc4b0e5ab5b89b5f92b0dc86bcf347e
    d2cd3b683055a69670b975e3de4513d4344b7508
    420e508397c7775667f6935405bbd4accecd232e
    fc9fa685d689cad52046bc301fd1bdf7e9fd8843
    ec7ad9e10371a7fb500d8244402bb25d93c1a6db
    4c270243995a4cba33955f6dfaa8ee93748ff843
    f56b11d2cd4d878d66edfe1a0c606a6b60b2df5c
    113581e6f32da3b08274ddb626b2c936a091f749
    f663ed8a328a6d5007d3f03685f08cfceb506105
    264702a04b88e612f44615a8b968ca06c9d5435e
    abc4c8173dab56633e883847721da577e8c80388
    81bec7aa5216dac2013c95d58559ebd414b84bce
    5d7a1d63c0fa53d411a06c6f03de939c1cc26da2
    7c410b3d4180087020c7734bf67cdc4ad9fdb136</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>174</bug_id>
          
          <creation_ts>2016-10-25 23:02:16 +0000</creation_ts>
          <short_desc>Nt32 build failure</short_desc>
          <delta_ts>2016-10-27 21:14:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>717</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2016-10-25 23:02:16 +0000</bug_when>
    <thetext>Nt32 build failure

/////////////Env setup//////////////////
C:\New_Daily\BpTrunkGit&gt;set PACKAGES_PATH=%WORKSPACE_DIR%\R9;%WORKSPACE_DIR%\edk
2

C:\New_Daily\BpTrunkGit&gt;set PACKAGES_PATH=%WORKSPACE_DIR%\R9;%WORKSPACE_DIR%\edk
2

C:\New_Daily\BpTrunkGit&gt;set EDK_TOOLS_BIN=%WORKSPACE_DIR%\edk2-BaseTools-win32

C:\New_Daily\BpTrunkGit&gt;call %WORKSPACE_DIR%\edk2\edksetup.bat --NT32



////////////////Build error/////////////
C:\New_Daily\BpTrunkGit&gt;set PACKAGES_PATH=%WORKSPACE_DIR%\R9;%WORKSPACE_DIR%\edk
2

C:\New_Daily\BpTrunkGit&gt;set PACKAGES_PATH=%WORKSPACE_DIR%\R9;%WORKSPACE_DIR%\edk
2

C:\New_Daily\BpTrunkGit&gt;set EDK_TOOLS_BIN=%WORKSPACE_DIR%\edk2-BaseTools-win32

C:\New_Daily\BpTrunkGit&gt;call %WORKSPACE_DIR%\edk2\edksetup.bat --NT32</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>718</commentid>
    <comment_count>1</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2016-10-25 23:40:13 +0000</bug_when>
    <thetext>///////////Build error/////

c:\new_daily\bptrunkgit\edk2\Nt32Pkg\Include\Common/WinNtInclude.h(54): fatal er
ror C1083: Cannot open include file: &apos;windows.h&apos;: No such file or directory
NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio 14.0
\Vc\bin\cl.exe&quot;&apos; : return code &apos;0x2&apos;
Stop.


build...
 : error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\nmake.exe /no
logo tbuild [c:\new_daily\bptrunkgit\Build\NT32IA32\DEBUG_VS2015x86\IA32\Nt32Pkg
\Library\PeiNt32OemHookStatusCodeLib\PeiNt32OemHookStatusCodeLib]


build...
 : error F002: Failed to build module
        c:\new_daily\bptrunkgit\edk2\Nt32Pkg\Library\PeiNt32OemHookStatusCodeLib
\PeiNt32OemHookStatusCodeLib.inf [IA32, VS2015x86, DEBUG]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>738</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-26 21:06:10 +0000</bug_when>
    <thetext>Assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>743</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-26 21:22:33 +0000</bug_when>
    <thetext>change it to CONFIRMED</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>776</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-10-27 21:14:54 +0000</bug_when>
    <thetext>Fix at 4e908975c645bedd40ac77497d42629ef3cf9fc5.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>917</bug_id>
          
          <creation_ts>2018-04-01 19:24:26 +0000</creation_ts>
          <short_desc>TerminalDxe TerminalDriverBindingStart() function not return against at the invalid controller handle and hang in release image</short_desc>
          <delta_ts>2018-05-02 23:30:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3808</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-04-01 19:24:26 +0000</bug_when>
    <thetext>The TerminalDxe TerminalDriverBindingStart() function, in edk2\MdeModulePkg\Universal\Console\TerminalDxe\Terminal.c, only use ASSERT() but not return the wrong Status if the input Controller handle is invalid (see below code, in line 409). The ASSERT() is empty in release build image, and this cause the release build driver continue to use the wrong ParentDevicePath value in consequence code and deadloop in IsHotPlugDevice (ParentDevicePath) (see below code, in line 505).

Uefi module fuzzer (UMFuzzer) catch this issue on OVMF release build platform. There are total 66 EFI_DRIVER_BINDING_PROTOCOL protocols published on OVMF, and all other driver modules&apos; start() code can gracefully return if the input Controller handle is wrong, but only the TerminalDxe TerminalDriverBindingStart() function cannot. So we suggest to enhance the input parameter error handling code of TerminalDriverBindingStart().


EFI_STATUS
EFIAPI
TerminalDriverBindingStart (
  IN EFI_DRIVER_BINDING_PROTOCOL    *This,
  IN EFI_HANDLE                     Controller,
  IN EFI_DEVICE_PATH_PROTOCOL       *RemainingDevicePath
  )
{
... ...
  //
  // Get the Device Path Protocol to build the device path of the child device
  //
  Status = gBS-&gt;OpenProtocol (
                  Controller,
                  &amp;gEfiDevicePathProtocolGuid,
                  (VOID **) &amp;ParentDevicePath,
                  This-&gt;DriverBindingHandle,
                  Controller,
                  EFI_OPEN_PROTOCOL_BY_DRIVER
                  );
  ASSERT ((Status == EFI_SUCCESS) || (Status == EFI_ALREADY_STARTED)); //&lt;-- line 409
... ...
  if (!IsHotPlugDevice (ParentDevicePath)) { //&lt;-- line 505
... ...



My build and Qemu launch are below:
$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -t CLANG38 -a IA32 -a X64 -b RELEASE -n 5 -DDEBUG_ON_SERIAL_PORT -DSMM_REQUIRE=TRUE -DSECURE_BOOT_ENABLE=TRUE -DNETWORK_IP6_ENABLE=TRUE -DHTTP_BOOT_ENABLE=TRUE -DTLS_ENABLE=TRUE

$ qemu-system-x86_64 -m 5120  -smp 4 -pflash ../Ovmf3264/RELEASE_CLANG38/FV/OVMF.fd -serial file:serial.log -machine q35,smm=on,accel=kvm -global driver=cfi.pflash01,property=secure,value=on -global mch.extended-tseg-mbytes=64 -hda fat:.  -global e1000.romfile=&quot;&quot;

The fix is simple, just add the return Status if the input handle is invalid
index 60de2d4d6d..0880da1afe
--- a/MdeModulePkg/Universal/Console/TerminalDxe/Terminal.c
+++ b/MdeModulePkg/Universal/Console/TerminalDxe/Terminal.c
@@ -488,7 +488,9 @@ TerminalDriverBindingStart (
                   EFI_OPEN_PROTOCOL_BY_DRIVER
                   );
   ASSERT ((Status == EFI_SUCCESS) || (Status == EFI_ALREADY_STARTED));
-
+  if (EFI_ERROR (Status)) {
+    return Status;
+  }
   //
   // Open the Serial I/O Protocol BY_DRIVER.  It might already be started.
   //
@@ -501,6 +503,9 @@ TerminalDriverBindingStart (
                   EFI_OPEN_PROTOCOL_BY_DRIVER
                   );
   ASSERT ((Status == EFI_SUCCESS) || (Status == EFI_ALREADY_STARTED));
+  if (EFI_ERROR (Status)) {
+    return Status;
+  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3869</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-12 20:26:18 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3972</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-05-02 23:30:42 +0000</bug_when>
    <thetext>fixed @ ebafede928b6402b90a1ac2bc5175e50f1a60884</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>452</bug_id>
          
          <creation_ts>2017-03-31 06:46:15 +0000</creation_ts>
          <short_desc>please include variable namespace GUIDs of dynamic HII PCDs in Guid.xref</short_desc>
          <delta_ts>2018-08-30 09:01:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1714</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-31 06:46:15 +0000</bug_when>
    <thetext>(This is just a wishlist item, and the request is to evaluate the feature first for usefulness.)

BaseTools approaches the Guid.xref file generation from the direction of modules -- it goes over each module and checks what plain GUIDs, protocol GUIDs, and PPI GUIDs the module uses.

However, consider the following example from a platform DSC file:

[PcdsDynamicHii]
  gFooTokenSpaceGuid.PcdBar|L&quot;Variable&quot;|gVarNameSpaceGuid|0x0|FALSE|NV,BS

In this case, &quot;gVarNameSpaceGuid&quot; will never be used by any module directly. The modules will only call PcdGetBool() and PcdSetBool() on &quot;PcdBar&quot;, and the variable access -- which requires the use of gVarNameSpaceGuid -- will be hidden from the module.

While functionally this works as designed, the end result is that the Guid.xref file, which approaches GUIDs from the side of modules, will not contain gVarNameSpaceGuid.

Please consider listing the variable namespace GUIDs in &quot;Guid.xref&quot; that are used with dynamic HII PCDs. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1740</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-04-05 21:08:35 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4762</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-30 09:01:14 +0000</bug_when>
    <thetext>fix it in SHA-1: 0fece18d6df83cede91a4c8644c2278e63794a62</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>555</bug_id>
          
          <creation_ts>2017-05-18 14:07:25 +0000</creation_ts>
          <short_desc>Add missing JMP instruction in IA32 version of SmiEntry.S in PiSmmCpuDxeSmm</short_desc>
          <delta_ts>2017-05-24 20:04:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vanjeff_919</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2017</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2073</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-18 14:07:25 +0000</bug_when>
    <thetext>The Ia32/SmiEntry.S file in PiSmmCpuDxeSmm does not match
the .asm and .nasm versions of that file.  There is a JMP
instruction missing.

This missing JMP instruction prevents XCODE5 builds of 
OvmfIa32 from booting when SMM is enabled with the 
SMM_REQUIRE flag.


L13:
    movl    $MSR_EFER, %ecx
    rdmsr
    orw     $MSR_EFER_XD,%ax               # enable NXE
    wrmsr
    jmp     NxeDone             &lt;=== MISSING
SkipNxe:
    subl    $4, %esp
NxeDone:


This issue is not seen for MSFT or GCC build rule families
because the default BUILDRULEORDER uses .nasm files before
.S file.

The XCODE5 tool chain overrides this default BUILDRULEORDER
with .S higher priority than .nasm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2080</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-18 20:08:59 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2095</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 02:24:37 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2109</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 17:02:18 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/0d0a19cb14ba6867813f56a52cfc89545ad07f3a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2160</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-24 20:04:21 +0000</bug_when>
    <thetext>Commit to UDK2017 branch

https://github.com/tianocore/edk2/commit/66a539b5d4c1b5f3dbed3b7c0d7c98d26bd88830</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>104</bug_id>
          
          <creation_ts>2016-08-24 01:18:55 +0000</creation_ts>
          <short_desc>DnsDxe can not handle alias</short_desc>
          <delta_ts>2016-09-13 03:44:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nagaraj Hegde">nagaraj-p.hegde</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>nagaraj-p.hegde</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>sriram-s</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>448</commentid>
    <comment_count>0</comment_count>
      <attachid>7</attachid>
    <who name="Nagaraj Hegde">nagaraj-p.hegde</who>
    <bug_when>2016-08-24 01:18:55 +0000</bug_when>
    <thetext>Created attachment 7
Packet Capture

This is my named.conf file:

websrv-alias  IN      CNAME      websrv
websrv        IN      A          192.168.1.1
websrv        IN      AAAA       1235::1000

When i provide a URL with alias name say, http://websrv-alias/index.html, there is an assert:


DXE_ASSERT!: c:\code\MdeModulePkg\Library\DxeNetLib\NetBuffer.c (383): ((Nbuf) != ((void *) 0)) &amp;&amp; ((Nbuf)-&gt;Signature == ((((&apos;n&apos;) | (&apos;b&apos; &lt;&lt; 8)) | (((&apos;u&apos;) | (&apos;f&apos;

This happens only when alias name is provided in the URL. Have attached wireshark capture for reference.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>452</commentid>
    <comment_count>1</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2016-08-25 04:38:46 +0000</bug_when>
    <thetext>DNS A record maps a name to IP address, DNS CNAME record maps a name to another name.

Current DNS driver send out DNS query for A record, and only expects an A record response from server. While for alias case, when we query websrv-alias.hpe.com, the server will response a CNAME to map it to another name, together with an A record to map the 2nd name to the IP address.

QUERY
A	 websrv-alias.hpe.com
RESPONSE
CNAME	 websrv-alias.hpe.com -&gt; websrv.hpe.com
	A	 websrv.hpe.com -&gt; IP address (like 192.*.*.*)

We should either update DNS driver to support this case, or at least remove the ASSERT here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>453</commentid>
    <comment_count>2</comment_count>
    <who name="Nagaraj Hegde">nagaraj-p.hegde</who>
    <bug_when>2016-08-25 06:23:44 +0000</bug_when>
    <thetext>CNAME being a common occurrence, updating DnsDxe to support this case makes sense.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>465</commentid>
    <comment_count>3</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-04 21:22:54 +0000</bug_when>
    <thetext>Bug Scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>486</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2016-09-13 03:44:29 +0000</bug_when>
    <thetext>Fixed version SHA-1: 3093f45c44eaea11e2f2552af7ff5c5b370a93d7

* NetworkPkg/DnsDxe: Handle CNAME type responded from the name server

According RFC 1034 - 3.6.2, if the query name is an alias, the name server will include the CNAME record in the response and restart the query at the domain name specified in the data field of the CNAME record. RFC also provides one example server action when A query received:

Suppose a name server was processing a query with for USCISIC.ARPA, asking for type A information, and had the following resource records:
USC-ISIC.ARPA IN CNAME C.ISI.EDU
C.ISI.EDU     IN A     10.0.0.52
Both of these RRs would be returned in the response to the type A query.

Currently, DnsDxe driver doesn&apos;t handle the CNAME type response, which will cause any exception result. The driver need continue the packet parsing while CNAME type record parsed. So, this patch is used to handle it correctly.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>7</attachid>
            <date>2016-08-24 01:18:55 +0000</date>
            <delta_ts>2016-08-24 01:18:55 +0000</delta_ts>
            <desc>Packet Capture</desc>
            <filename>cname_assert_1.pcap.pcapng</filename>
            <type>application/octet-stream</type>
            <size>776</size>
            <attacher name="Nagaraj Hegde">nagaraj-p.hegde</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>932</bug_id>
          
          <creation_ts>2018-04-12 13:29:52 +0000</creation_ts>
          <short_desc>please support varstore template generation with a dedicated [FV] section</short_desc>
          <delta_ts>2020-05-05 18:59:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3864</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-04-12 13:29:52 +0000</bug_when>
    <thetext>Currently if a platform intends to generate a variable store template at build time, the FDF file has to include a DATA hexdump that encodes EFI_FIRMWARE_VOLUME_HEADER and VARIABLE_STORE_HEADER. This is hard to read and to modify.

Example: &quot;OvmfPkg/OvmfPkgX64.fdf&quot; and &quot;OvmfPkg/VarStore.fdf.inc&quot;. The latter formats both headers mentioned above, and has parts for NV_VARIABLE_STORE, NV_EVENT_LOG, NV_FTW_WORKING, NV_FTW_SPARE.

Liming suggested the following syntax for the FDF file instead:

[FV.NVStorage]
FileSystemGuid = gEfiSystemNvDataFvGuid
VariableSignatureGuid = gEfiAuthenticatedVariableGuid
VariabeRegionSize = 0x40000
FtwWorkingSpaceSize = 0x40000
FtwSpareSpaceSize = 0x40000

(Perhaps another element should be added for the &quot;event log&quot;, just so existing DATA blocks can be migrated identically.)

Mailing list:
https://lists.01.org/pipermail/edk2-devel/2018-April/023759.html
http://mid.mail-archive.com/4A89E2EF3DFEDB4C8BFDE51014F606A14E20D3DA@SHSMSX104.ccr.corp.intel.com&gt;

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3885</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-18 21:06:51 +0000</bug_when>
    <thetext>bug scrub: assign it to module owner. we also need update spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5472</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:35:35 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12382</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 18:59:01 +0000</bug_when>
    <thetext>Not touched in 2 years, there&apos;s clearly no capacity for this. Closing as WONTFIX.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>743</bug_id>
          
          <creation_ts>2017-10-24 03:08:50 +0000</creation_ts>
          <short_desc>Target IP given in Attempt1 is taken as default for all other Attempts.</short_desc>
          <delta_ts>2018-01-08 00:09:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2915</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-10-24 03:08:50 +0000</bug_when>
    <thetext>[Issue]
The target IP is invalid as it&apos;s the same taken from previous attempt

[Steps]
A. Add Attempt1 with Target Info via Static and provide Target Name &amp; Target IP,        Save changes.
B. If we are trying to add another attempt , It is taking Target IP as 
   default IP which is same Target IP given in Attempt1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2917</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-10-24 03:33:39 +0000</bug_when>
    <thetext>
Working on the fix.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2949</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-26 20:05:54 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3352</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-01-08 00:09:21 +0000</bug_when>
    <thetext>Commit version:

https://github.com/tianocore/edk2/commit/5e146cd9796ab5b79e5d426fed91f7864e3280c7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>659</bug_id>
          
          <creation_ts>2017-08-01 01:26:10 +0000</creation_ts>
          <short_desc>Shell command &quot;edit&quot; cause system reset if text mode column is bigger than 200.</short_desc>
          <delta_ts>2018-04-18 02:18:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bin.Lain">bin_601</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nyochou</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2539</commentid>
    <comment_count>0</comment_count>
    <who name="Bin.Lain">bin_601</who>
    <bug_when>2017-08-01 01:26:10 +0000</bug_when>
    <thetext>In ShellPkg\Library\UefiShellDebug1CommandsLib\UefiShellDebug1CommandsLib.c, EditorClearLine() function use length 200 local variable to clear screen. 

If text mode column is bigger than 200, it will break stack memory. (monitor resolution is 1920x1080)
Maybe change to 1024 for 8K screen. 

VOID
EditorClearLine (
  IN UINTN Row,
  IN UINTN LastCol,
  IN UINTN LastRow
  )
{
  CHAR16 Line[200]; &lt;===== maybe change it to 1024

  if (Row == 0) {
    Row = 1;
  }

  //
  // prepare a blank line
  //
  SetMem16(Line, LastCol*sizeof(CHAR16), L&apos; &apos;);

  if (Row == LastRow) {
    //
    // if CHAR_NULL is still at position 80, it will cause first line error
    //
    Line[LastCol - 1] = CHAR_NULL;    &lt;==== LastCol maybe over 200
  } else {
    Line[LastCol] = CHAR_NULL;        &lt;==== LastCol maybe over 200
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2540</commentid>
    <comment_count>1</comment_count>
    <who name="Bin.Lain">bin_601</who>
    <bug_when>2017-08-01 01:29:11 +0000</bug_when>
    <thetext>SetMem16(Line, LastCol*sizeof(CHAR16), L&apos; &apos;); 

This line will clear stack memory</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2553</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-03 20:06:52 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2911</commentid>
    <comment_count>3</comment_count>
    <who name="Bin.Lain">bin_601</who>
    <bug_when>2017-10-22 23:30:16 +0000</bug_when>
    <thetext>Below solution will reallocate clear line buffer,
please help me check it.
Thanks.


 .../UefiShellDebug1CommandsLib/UefiShellDebug1CommandsLib.c | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

diff --git a/ShellPkg/Library/UefiShellDebug1CommandsLib/UefiShellDebug1CommandsLib.c b/ShellPkg/Library/UefiShellDebug1CommandsLib/UefiShellDebug1CommandsLib.c
index 8e2141b..f9aec9a 100644
--- a/ShellPkg/Library/UefiShellDebug1CommandsLib/UefiShellDebug1CommandsLib.c
+++ b/ShellPkg/Library/UefiShellDebug1CommandsLib/UefiShellDebug1CommandsLib.c
@@ -17,6 +17,8 @@
 
 STATIC CONST CHAR16 mFileName[] = L&quot;Debug1Commands&quot;;
 EFI_HANDLE gShellDebug1HiiHandle = NULL;
+CHAR16              *mLineBuffer = NULL;
+UINTN               mLineBufferLen = 0;
 
 /**
   Gets the debug file name.  This will be used if HII is not working.
@@ -109,6 +111,8 @@ UefiShellDebug1CommandsLibDestructor (
     HiiRemovePackages(gShellDebug1HiiHandle);
   }
 
+  SHELL_FREE_NON_NULL (mLineBuffer);
+
   BcfgLibraryUnregisterBcfgCommand(ImageHandle, SystemTable);
   return (EFI_SUCCESS);
 }
@@ -185,12 +189,19 @@ EditorClearLine (
   IN UINTN LastRow
   )
 {
-  CHAR16 Line[200];
+  CHAR16 *Line;
 
   if (Row == 0) {
     Row = 1;
   }
 
+  if (LastCol &gt; mLineBufferLen) {
+    mLineBufferLen = LastCol;
+    SHELL_FREE_NON_NULL (mLineBuffer);
+    mLineBuffer = AllocateZeroPool ((mLineBufferLen + 1) * sizeof (CHAR16));
+  }
+  Line = mLineBuffer;
+
   //
   // prepare a blank line
   //</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2912</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-23 03:06:17 +0000</bug_when>
    <thetext>Bin Lain,
Can you please check the commit 1a421c2c173adece66f3c24f6d1cfb2ae5cee9cb I just checked in?
It still uses stack memory to clear the screen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2962</commentid>
    <comment_count>5</comment_count>
    <who name="Bin.Lain">bin_601</who>
    <bug_when>2017-10-31 22:36:39 +0000</bug_when>
    <thetext>Hi Ruiyu, 

  This solution (452676ffd895651683dcf19535e65294ff1d00d0) is workable.

Thanks,
Bin Lain</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>676</bug_id>
          
          <creation_ts>2017-08-23 02:13:35 +0000</creation_ts>
          <short_desc>Support LLVM39 and LLVM40 build with CLANG38 toolchain</short_desc>
          <delta_ts>2017-08-28 21:36:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2624</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-08-23 02:13:35 +0000</bug_when>
    <thetext>Need support edk2 build with LLVM high versions, e.g. LLVM39 and LLVM40, in CLANG38 tool chain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2627</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-08-23 21:04:55 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2650</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-08-28 21:36:29 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/47bfbd7f8069e523798ef973c8eb0abd5c6b0746</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>226</bug_id>
          
          <creation_ts>2016-11-12 21:28:43 +0000</creation_ts>
          <short_desc>RAW format doesn&apos;t support &quot;Align=Auto&quot; while it should support base on FDF Spec</short_desc>
          <delta_ts>2020-02-26 09:13:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>umareddyt</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>891</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2016-11-12 21:28:43 +0000</bug_when>
    <thetext>We input below into FDF.

FILE RAW = 98B8D59B-E8BA-48EE-98DD-C295392F1EDB {
      $(PLATFROM_PACKAGE)BiosUpdateConfig/BiosUpdateConfig.ini
	  Align=Auto $(PLATFROM_PACKAGE)/BiosUpdateConfig/auto.pdb
     }

Build failure with below messages:

---------------
GenFds.py...
 : error C0DE: Tools code failure
	Please send email to edk2-devel@lists.01.org for help, attaching following call stack trace!

Traceback (most recent call last):
  File &quot;/home/pcd/Desktop/AllPackagesDev/BaseTools/BinWrappers/PosixLike/../../Source/Python/GenFds/GenFds.py&quot;, line 307, in main
    GenFds.GenFd(&apos;&apos;, FdfParserObj, BuildWorkSpace, ArchList)
  File &quot;/home/pcd/Desktop/AllPackagesDev/BaseTools/BinWrappers/PosixLike/../../Source/Python/GenFds/GenFds.py&quot;, line 567, in GenFd
    FvObj.AddToBuffer(Buffer)
  File &quot;/home/pcd/Desktop/AllPackagesDev/BaseTools/Source/Python/GenFds/Fv.py&quot;, line 115, in AddToBuffer
    FileName = FfsFile.GenFfs(MacroDict, FvParentAddr=BaseAddress)
  File &quot;/home/pcd/Desktop/AllPackagesDev/BaseTools/Source/Python/GenFds/FfsFileStatement.py&quot;, line 156, in GenFfs
    sectList, align = section.GenSection(OutputDir, self.NameGuid, SecIndex, self.KeyStringList, None, Dict)
  File &quot;/home/pcd/Desktop/AllPackagesDev/BaseTools/Source/Python/GenFds/GuidSection.py&quot;, line 97, in GenSection
    ReturnSectList, align = Sect.GenSection(OutputPath, ModuleName, SecIndex, KeyStringList, FfsInf, Dict)
  File &quot;/home/pcd/Desktop/AllPackagesDev/BaseTools/Source/Python/GenFds/FvImageSection.py&quot;, line 101, in GenSection
    FvFileName = Fv.AddToBuffer(Buffer, self.FvAddr, MacroDict = Dict)
  File &quot;/home/pcd/Desktop/AllPackagesDev/BaseTools/Source/Python/GenFds/Fv.py&quot;, line 115, in AddToBuffer
    FileName = FfsFile.GenFfs(MacroDict, FvParentAddr=BaseAddress)
  File &quot;/home/pcd/Desktop/AllPackagesDev/BaseTools/Source/Python/GenFds/FfsFileStatement.py&quot;, line 111, in GenFfs
    AlignValue = GenFdsGlobalVariable.GetAlignment(self.SubAlignment[Index])
  File &quot;/home/pcd/Desktop/AllPackagesDev/BaseTools/Source/Python/GenFds/GenFdsGlobalVariable.py&quot;, line 426, in GetAlignment
    return int (AlignString)
ValueError: invalid literal for int() with base 10: &apos;Auto&apos;
-------------

In FDF Spec 1.27 page 50.  It should support Auto format.

&lt;FfsAlignmentValues&gt; ::= {&quot;Auto&quot;} {&quot;8&quot;} {&quot;16&quot;} {&quot;32&quot;} {&quot;64&quot;} {&quot;128&quot;}
{&quot;512&quot;} {&quot;1K&quot;} {&quot;4K&quot;} {&quot;32K&quot;} {&quot;64K&quot;}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>934</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-15 01:20:32 +0000</bug_when>
    <thetext>Assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>935</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-15 01:21:03 +0000</bug_when>
    <thetext>fix it SHA-1: f475f1e2361877e9947ecda98a697bc55fb9d85a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>590</bug_id>
          
          <creation_ts>2017-06-07 14:18:32 +0000</creation_ts>
          <short_desc>_ReturnAddress() declaration</short_desc>
          <delta_ts>2017-07-11 09:38:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Felix">felixp</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2254</commentid>
    <comment_count>0</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2017-06-07 14:18:32 +0000</bug_when>
    <thetext>Base.h defines RETURN_ADDRESS macro for MSFT tool chains using _ReturnAddress() function. The function is not explicitly declared in EDKII code base.
When Base.h is included into a .cpp file, compiler generates the following warning:
&apos;warning C4164: &apos;_ReturnAddress&apos;: intrinsic function not declared&apos;

The recommendation is to add the following _ReturnAddress declaration to Base.h:

void * _ReturnAddress(void);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2258</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-08 20:03:38 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2417</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-07-11 09:38:41 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/ed6da357a30666cfccfd2539d88e6171710084b7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>876</bug_id>
          
          <creation_ts>2018-02-14 17:50:55 +0000</creation_ts>
          <short_desc>GCC7 support feature request [Vlv2TbltDevicePkg]</short_desc>
          <delta_ts>2019-03-20 23:01:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard Max</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc>https://github.com/MinnowBoard-org/bugs-and-help/issues/92</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Piotr Król">piotr.krol</reporter>
          <assigned_to name="Zailiang Sun">zailiang.sun</assigned_to>
          <cc>brian.richardson</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>haiyanx.a.li</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>xuemin.yuan</cc>
    
    <cc>yi.qian</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zailiang.sun</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2017</cf_release_observed>
          <cf_target_os>Other</cf_target_os>
          <cf_package>Vlv2TbltDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3595</commentid>
    <comment_count>0</comment_count>
    <who name="Piotr Król">piotr.krol</who>
    <bug_when>2018-02-14 17:50:55 +0000</bug_when>
    <thetext>Hi all,
recently I tried to compile firmware for MinnowBoard Turbot and faced couple compilation issues described in [1] after some debugging and support on Github it happened to be incorrect toolchain. I used Debian sid, which by default use GCC7 and this caused very criptic build failure signatures.

3/4 top Linux distros use GCC7 so it would be great if this toolchain would be supported in EDK2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3599</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-02-15 03:19:09 +0000</bug_when>
    <thetext>Hi Piotr,

what is reference [1] in comment 0? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3600</commentid>
    <comment_count>2</comment_count>
    <who name="Piotr Król">piotr.krol</who>
    <bug_when>2018-02-15 05:52:51 +0000</bug_when>
    <thetext>Hi Laszlo,
sorry I missed that. I meant this issue on Github:
https://github.com/MinnowBoard-org/bugs-and-help/issues/92</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3601</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-02-15 07:21:11 +0000</bug_when>
    <thetext>I see two issues reported there:

(1) https://github.com/MinnowBoard-org/bugs-and-help/issues/92#issue-297138611

gcc is actually correct to flag those locations, since the subject code is bogus. The code issue was fixed in edk2 commit ba53301f509f (&quot;Vlv2TbltDevicePkg: fix ASSERT_EFI_ERROR() typos&quot;, 2016-07-01). It surprises me, but apparently I was the author of that patch. I must have played with gcc-7 for some reason.

edk2 commit ba53301f509f should likely be cherry picked into the next UDK2017 stable release (if there is such a thing).

(2) https://github.com/MinnowBoard-org/bugs-and-help/issues/92#issuecomment-365655795

This issue reminds me of edk2 commit 14ca435fb6c0 (&quot;BaseTools/tools_def AARCH64 ARM: suppres PIE sections via linker script&quot;, 2017-11-23). I can imagine a similar fix has been done for X64 too.


Can you please test edk2 master, and/or UDK 2018 (i.e. not UDK2017) with gcc-7?

If either of those work, we should update the metadata on this BZ to UDK2017.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3602</commentid>
    <comment_count>4</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2018-02-15 11:55:48 +0000</bug_when>
    <thetext>Agree these are two separate issues:
1. Generic GCC7 support in EDK II master.
2. GCC7 support for the MinnowBoard Max platform.

I recommend we keep this issue (#876) focused on Vlv2TbltDevicePkg, and open a separate issue if Laszlo&apos;s recommended test (build from UDK2018 branch) fails. I recommend using QEMU or MdeModulePkg for the test build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3605</commentid>
    <comment_count>5</comment_count>
    <who name="Piotr Król">piotr.krol</who>
    <bug_when>2018-02-15 20:31:03 +0000</bug_when>
    <thetext>It looks like master and UDK2018 have different issue:

build.py...
/home/edk2/edk2-platforms/Vlv2TbltDevicePkg/PlatformPkgGccX64.dsc(1311): error 000E: File/directory not found in workspace
        PerformancePkg/Dp_App/Dp.inf is not found in packages path:
        /home/edk2/.
        /home/edk2/edk2-platforms
        /home/edk2/silicon
        /home/edk2/edk2


It looks like Vlv2TbltDevicePkg/PlatformPkgGccX64.dsc have to adjusted to removal that was applied in December by Liming: 922c1e94e4bb75e805d76acebbb54d0275fdbab7.

Getting rid of PerformancePkg section give:
/home/edk2/edk2-platforms/Vlv2TbltDevicePkg/PlatformPkgGccX64.dsc(723): error 2000: Sku PEIM is not defined in [SkuIds] section</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3606</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-02-16 04:41:42 +0000</bug_when>
    <thetext>Apparently, UDK2018 lacks upstream commit 7a0e4f8e4304 (&quot;Vlv2TbltDevicePkg: Use DpDynamicCommand to replace PerformancePkg/dp&quot;, 2017-12-02).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3607</commentid>
    <comment_count>7</comment_count>
    <who name="Piotr Król">piotr.krol</who>
    <bug_when>2018-02-16 05:32:38 +0000</bug_when>
    <thetext>I applied relevant part of patch:

diff --git a/Vlv2TbltDevicePkg/PlatformPkgGccX64.dsc b/Vlv2TbltDevicePkg/PlatformPkgGccX64.dsc
index 8779e046fc65..4dd19606f863 100644
--- a/Vlv2TbltDevicePkg/PlatformPkgGccX64.dsc
+++ b/Vlv2TbltDevicePkg/PlatformPkgGccX64.dsc
@@ -1308,13 +1308,17 @@ $(PLATFORM_BINARY_PACKAGE)/$(DXE_ARCHITECTURE)$(TARGET)/IA32/fTPMInitPeim.inf
 
   IntelFrameworkModulePkg/Universal/LegacyRegionDxe/LegacyRegionDxe.inf
   
-  PerformancePkg/Dp_App/Dp.inf {
-  &lt;LibraryClasses&gt;
-  !if $(PERFORMANCE_ENABLE) == TRUE
-    PerformanceLib|MdeModulePkg/Library/DxePerformanceLib/DxePerformanceLib.inf
-    TimerLib|$(PLATFORM_PACKAGE)/Library/IntelPchAcpiTimerLib/IntelPchAcpiTimerLib.inf
-  !endif
+  #
+  # Performance Application; Set PERFORMANCE_ENABLE=TRUE for normal boot performance and smm performance data
+  #
+!if $(PERFORMANCE_ENABLE) == TRUE
+  ShellPkg/DynamicCommand/DpDynamicCommand/DpDynamicCommand.inf {
+    &lt;PcdsFixedAtBuild&gt;
+      gEfiShellPkgTokenSpaceGuid.PcdShellLibAutoInitialize|FALSE
+    &lt;LibraryClasses&gt;
+      PerformanceLib|MdeModulePkg/Library/DxeSmmPerformanceLib/DxeSmmPerformanceLib.inf
   }
+!endif
 
   Vlv2TbltDevicePkg/VlvPlatformInitDxe/VlvPlatformInitDxe.inf{
     &lt;LibraryClasses&gt;

But still getting error related to SkuIds.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3619</commentid>
    <comment_count>8</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-22 19:05:19 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3622</commentid>
    <comment_count>9</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-02-23 01:13:49 +0000</bug_when>
    <thetext>Could you attach the build failure on SkuId?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5686</commentid>
    <comment_count>10</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-22 03:54:05 +0000</bug_when>
    <thetext>change owner to zailiang</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6766</commentid>
    <comment_count>11</comment_count>
    <who name="Zailiang Sun">zailiang.sun</who>
    <bug_when>2019-03-20 04:00:23 +0000</bug_when>
    <thetext>GCC7 was not verified and please use GCC5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6769</commentid>
    <comment_count>12</comment_count>
    <who name="Piotr Król">piotr.krol</who>
    <bug_when>2019-03-20 05:12:43 +0000</bug_when>
    <thetext>Zailiang,
please provide a clear statement. Do you mean Vlv2TbltDevicePkg will never compile using compiler newer then GCC5?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6798</commentid>
    <comment_count>13</comment_count>
    <who name="Zailiang Sun">zailiang.sun</who>
    <bug_when>2019-03-20 23:01:48 +0000</bug_when>
    <thetext>(In reply to Piotr Król from comment #12)
&gt; Zailiang,
&gt; please provide a clear statement. Do you mean Vlv2TbltDevicePkg will never
&gt; compile using compiler newer then GCC5?

Vlv2TbltDevicePkg from edk2-platforms/devel-MinnowBoardMax-UDK2017 is based on UDK2017 with no GCC7 Support. Since Vlv2TbltDevicePkg compilation depends on Basetool, currently we don&apos;t see the clear plan on the GCC7 support on Basetool. We suggest firstly route the GCC7 support issue to Basetool to see how they will respond and when they can add it into the official tool chain list.

Once it is available, then we can discuss how we can support in Vlv2TbltDevicePkg, but mostly likely it is in edk2/master, not this branch edk2-platforms/devel-MinnowBoardMax-UDK2017.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>243</bug_id>
          
          <creation_ts>2016-11-18 04:23:25 +0000</creation_ts>
          <short_desc>setvar command help info does not match with code behavior and spec</short_desc>
          <delta_ts>2016-12-15 20:34:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jaben.carsey</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>990</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2016-11-18 04:23:25 +0000</bug_when>
    <thetext>Current setvar command has below help info.

  5. -bs, -rt and -nv are only useful if the variable already exists.
  6. If the variable already exists and the attributes cannot be changed,
     then -1 is returned.

But Shell 2.2 spec has below information.
-bs, -rt and –nv are only useful if the variable does not exist. If the variable already exists, the attributes cannot be changed, and the flags will be ignored. To change a variable’s attributes, first delete, then recreate with the desired attributes.

Current code behavior matches with spec, but setvar command help info does not match with code behavior and spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1104</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-01 19:11:27 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1174</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-12-15 20:34:19 +0000</bug_when>
    <thetext>commit @ 7dede0a219859dccf21b622d205a9b8801e4a078</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>607</bug_id>
          
          <creation_ts>2017-06-21 18:02:50 +0000</creation_ts>
          <short_desc>document code comment requirements for spurious variable assignments</short_desc>
          <delta_ts>2019-09-18 06:18:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>rebecca</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II C Coding Standards</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2308</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-06-21 18:02:50 +0000</bug_when>
    <thetext>Problem statement from Ard:

&gt; Sometimes, the GCC compiler warns about variables potentially being used
&gt; without having been initialized, while visual inspection reveals that this
&gt; is impossible. In such cases, we need to initialize such a variable to an
&gt; arbitrary value only to avoid breaking the build, given our policy to
&gt; treat warnings as errors.

In such cases we generally use

  LocalIntegerVariable = 0;

and

  LocalPointerVariable = NULL;

which takes care of the incorrect warning. However, it also makes the human
analysis of any subsequent logic harder, because it suggests that assigning
that specific zero or NULL value to the local variable is *required* by the
subsequent logic.

In order to highlight such assignments, whose sole purpose is to suppress
invalid &quot;use before init&quot; warnings from compilers or static analysis tools,
we should mandate comments such as:

  //
  // set LocalVariable to suppress incorrect compiler/analyzer warnigns
  //
  LocalVariable = 0;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2309</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-06-21 18:11:44 +0000</bug_when>
    <thetext>A list of commits from OvmfPkg where such code was added (in a dedicated
patch, or else where an independent patch was fixed up to suppress the
warning):

  32a22f09d795 (&quot;OvmfPkg: QemuBootOrder: collect active UEFI boot options in
               advance&quot;, 2013-09-13)
  bc4c536628c6 (&quot;OvmfPkg/PlatformDxe: Silence warning seen with GCC48 IA32&quot;,
               2014-03-22)
  8c01a99b8472 (&quot;OvmfPkg/QemuFlashFvbServicesRuntimeDxe: Fix GCC44 build
               failure.&quot;, 2014-06-27)
  ea5396f31a8d (&quot;Fix VS2013 build failure.&quot;, 2014-08-13)
  02d6f4ce0c84 (&quot;OvmfPkg/PlatformPei: suppress wrong VS2008 warning (use of
               uninited local)&quot;, 2016-03-19)
  8e8fd3037788 (&quot;OvmfPkg/PlatformBootManagerLib: Fix gcc-4.8 Ia32 build
               failure&quot;, 2016-05-03)
  8f98c76f992b (&quot;OvmfPkg/AcpiPlatformDxe: fix spurious uninitialized var
               warning&quot;, 2017-06-08)

In these patches code comments of the suggested form were not added.

More such assignments exist (for example, see
&quot;ArmVirtPkg/Library/FdtPciHostBridgeLib/FdtPciHostBridgeLib.c&quot;:

  //
  // The following output arguments are initialized only in
  // order to suppress &apos;-Werror=maybe-uninitialized&apos; warnings
  // *incorrectly* emitted by some gcc versions.
  //

) but those that I could find are actually commented.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2326</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-22 20:11:38 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2423</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-07-11 18:02:30 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #0)

&gt;   //
&gt;   // set LocalVariable to suppress incorrect compiler/analyzer warnigns
&gt;   //
&gt;   LocalVariable = 0;

Please, if you copy the above example into live code, be advised that in comment 0, I made a typo -- I mistyped &quot;warning&quot; as &quot;warnign&quot;. (Obviously the best place to make a typo is one that people will copy on purpose.)

So the example is, with the typo fixed:

  //
  // set LocalVariable to suppress incorrect compiler/analyzer warnings
  //
  LocalVariable = 0;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2724</commentid>
    <comment_count>4</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2017-09-12 20:24:13 +0000</bug_when>
    <thetext>§6.2.3 of the EDKII C Coding Standards (draft 6/13/2017) say not to have comment characters alone on a line.

From https://edk2-docs.gitbooks.io/edk-ii-c-coding-standards-specification/content/6_documenting_software/62_comments.html :

6.2.3 Avoid comments where the opening comment characters are alone on a line.

/*
 * VIOLATION: Horror Vacui
*/
or

//
// VIOLATION: Horror Vacui
//</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2727</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-09-13 16:39:11 +0000</bug_when>
    <thetext>Rebecca, I totally don&apos;t understand that comment. What does the expression &quot;opening comment characters&quot; denote?

If it means

// &lt;------------- THIS
// blah
//

then that rule should simply be removed from the coding style spec, because it is wrong. The edk2 tree is full of this kind of comment; it is actually *required* from contributors.

... Looking more at the same part of the CCS, I find:

6.2.1 Only use C style, &quot;/*&quot;, comments for multi-line comments and on the same line as pre-processor directives.

I&apos;m dumbfounded by this too. C style &quot;/*&quot; comments are exclusively used, in practice, in top-of-file comment blocks, and function-level comment blocks. Type definitions, global variables, and function-scope comments are always written with //.

I&apos;m stunned by these sections of the CCS because everyday development practice is 100% opposed to it. I mean if you posted a patch that went like

  Variable1 = 2;
  // let&apos;s do this
  Variable2 = 3;

or

  Variable1 = 2;
  /* let&apos;s do this */
  Variable2 = 3;

as opposed to

  Variable1 = 2;
  //
  // let&apos;s do this
  //
  Variable2 = 3;

the maintainer reviewing the code (regardless of Package) would absolutely not accept the comment style.

... See for example

https://edk2-docs.gitbooks.io/edk-ii-c-coding-standards-specification/content/6_documenting_software/65_types_of_comments.html#65-types-of-comments

&quot;6.5.2.1 For internal code comments, use C++ style (//) comment lines.&quot;

It conflicts with 6.2.1.

Another example, from &quot;6.5.2.5 Indent the comments with the code.&quot;:

  // Only process data if mTest is TRUE.
  // This comment block applies to the entire if/else statement.
  if (mTest) {
    // This is an example comment to explain why this behavior
    // is appropriate if mTest is true.
    // This comment block only applies when mTest is true.

This conflicts with 6.2.3.

I think 6.2.1 and 6.2.3 should be removed; they are dead rules.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9303</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:53:21 +0000</bug_when>
    <thetext>I&apos;ll try to find some time for sending CCS patches for this. Taking the BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9411</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-30 08:36:47 +0000</bug_when>
    <thetext>Ready to send some patches, but ran into a snag with gitbook.com:

[edk2-devel] gitbook.com integration doesn&apos;t seem to work
http://mid.mail-archive.com/275f3a9f-85d9-7585-fbe6-4cff8e62fdda@redhat.com
https://edk2.groups.io/g/devel/message/46618</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9478</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-05 14:40:23 +0000</bug_when>
    <thetext>Posted:

[edk2-devel] [PATCH edk2-CCSS 0/3]
Coding Standards: add rule for documenting spurious variable assignments

http://mid.mail-archive.com/20190905183820.10312-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/46932</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9706</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-18 06:18:43 +0000</bug_when>
    <thetext>Fixed in edk2-CCodingStandardsSpecification.git, commit range d096859f15b9..f5ad35ec2c6d.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>159</bug_id>
          
          <creation_ts>2016-10-19 09:44:13 +0000</creation_ts>
          <short_desc>Enhance the error message for Pcd value that missing leading &apos;0x&apos; prefix for a hex value</short_desc>
          <delta_ts>2018-02-26 03:43:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>637</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-19 09:44:13 +0000</bug_when>
    <thetext>I got the case from Sudeep Holla, the Pcd&apos;s value in the DEC file missing leading &apos;0x&apos; prefix for a hex value in the NList or Array, the error message is not clear, it report out the Traceback info as below.




Processing meta-data ..

build.py...
  : error C0DE: Unknown fatal error when processing [uefi/ArmPlatformPkg/ArmVExpressPkg/ArmVExpressPkg.dec]

(Please send email to edk2-devel@lists.01.org for help, attaching following call stack trace!)

(Python 2.7.12 on linux2) Traceback (most recent call last):
   File
&quot;uefi/BaseTools/BinWrappers/PosixLike/../../Source/Python/build/build.py&quot;,
line 2274, in Main
     MyBuild.Launch()
   File
&quot;uefi/BaseTools/BinWrappers/PosixLike/../../Source/Python/build/build.py&quot;,
line 2026, in Launch
     self._MultiThreadBuildPlatform()
   File
&quot;uefi/BaseTools/BinWrappers/PosixLike/../../Source/Python/build/build.py&quot;,
line 1821, in _MultiThreadBuildPlatform
     self.Progress
   File &quot;uefi/BaseTools/Source/Python/AutoGen/AutoGen.py&quot;, line 176, in __new__
     if not AutoGenObject._Init(Workspace, MetaFile, Target, Toolchain, Arch, *args, **kwargs):
   File &quot;uefi/BaseTools/Source/Python/AutoGen/AutoGen.py&quot;, line 466, in _Init
     if key in Platform.Pcds:
   File &quot;uefi/BaseTools/Source/Python/Workspace/WorkspaceDatabase.py&quot;,
line 767, in _GetPcds
     self._Pcds.update(self._GetPcd(MODEL_PCD_FIXED_AT_BUILD))
   File &quot;uefi/BaseTools/Source/Python/Workspace/WorkspaceDatabase.py&quot;,
line 846, in _GetPcd
     PcdValue, DatumType, MaxDatumSize = self._ValidatePcd(PcdCName, TokenSpaceGuid, Setting, Type, Dummy4)
   File &quot;uefi/BaseTools/Source/Python/Workspace/WorkspaceDatabase.py&quot;,
line 708, in _ValidatePcd
     self._DecPcds = GetDeclaredPcd(self, self._Bdb, self._Arch, self._Target, self._Toolchain)
   File &quot;uefi/BaseTools/Source/Python/Workspace/WorkspaceCommon.py&quot;,
line 50, in GetDeclaredPcd
     for Pcd in Pkg.Pcds:
   File &quot;uefi/BaseTools/Source/Python/Workspace/WorkspaceDatabase.py&quot;,
line 1556, in _GetPcds
     self._Pcds.update(self._GetPcd(MODEL_PCD_FIXED_AT_BUILD))
   File &quot;uefi/BaseTools/Source/Python/Workspace/WorkspaceDatabase.py&quot;,
line 1574, in _GetPcd
     RecordList = self._RawData[Type, self._Arch]
   File &quot;uefi/BaseTools/Source/Python/Workspace/MetaFileParser.py&quot;, line 239, in __getitem__
     self.Start()
   File &quot;uefi/BaseTools/Source/Python/Workspace/MetaFileParser.py&quot;, line 1671, in Start
     self._SectionParser[self._SectionType[0]](self)
   File &quot;uefi/BaseTools/Source/Python/Workspace/MetaFileParser.py&quot;, line 43, in MacroParser
     Parser(self)
   File &quot;uefi/BaseTools/Source/Python/Workspace/MetaFileParser.py&quot;, line 1886, in _PcdParser
     ValueList[0] = ValueExpression(PcdValue, self._AllPcdDict)(True)
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 275, in __call__
     Val = self._OrExpr()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 320, in _OrExpr
     return self._ExprFuncTemplate(self._AndExpr, [&quot;OR&quot;, &quot;or&quot;, &quot;||&quot;])
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 308, in _ExprFuncTemplate
     Val = EvalFunc()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 324, in _AndExpr
     return self._ExprFuncTemplate(self._BitOr, [&quot;AND&quot;, &quot;and&quot;, &quot;&amp;&amp;&quot;])
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 308, in _ExprFuncTemplate
     Val = EvalFunc()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 328, in _BitOr
     return self._ExprFuncTemplate(self._BitXor, [&quot;|&quot;])
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 308, in _ExprFuncTemplate
     Val = EvalFunc()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 332, in _BitXor
     return self._ExprFuncTemplate(self._BitAnd, [&quot;XOR&quot;, &quot;xor&quot;, &quot;^&quot;])
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 308, in _ExprFuncTemplate
     Val = EvalFunc()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 336, in _BitAnd
     return self._ExprFuncTemplate(self._EqExpr, [&quot;&amp;&quot;])
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 308, in _ExprFuncTemplate
     Val = EvalFunc()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 340, in _EqExpr
     Val = self._RelExpr()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 356, in _RelExpr
     return self._ExprFuncTemplate(self._AddExpr, [&quot;&lt;=&quot;, &quot;&gt;=&quot;, &quot;&lt;&quot;, &quot;&gt;&quot;, &quot;LE&quot;, &quot;GE&quot;, &quot;LT&quot;, &quot;GT&quot;])
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 308, in _ExprFuncTemplate
     Val = EvalFunc()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 360, in _AddExpr
     return self._ExprFuncTemplate(self._UnaryExpr, [&quot;+&quot;, &quot;-&quot;])
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 308, in _ExprFuncTemplate
     Val = EvalFunc()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 371, in _UnaryExpr
     return self._IdenExpr()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 375, in _IdenExpr
     Tk = self._GetToken()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 536, in _GetToken
     return self.__GetNList()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 495, in __GetNList
     self._GetSingleToken()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 567, in _GetSingleToken
     return self.__GetArray()
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 411, in __GetArray
     self.__GetNList(True)
   File &quot;uefi/BaseTools/Source/Python/Common/Expression.py&quot;, line 513, in __GetNList
     raise BadExpression(ERR_ARRAY_ELE % self._Token)
BadExpression: This must be HEX value for NList or Array: [e6].</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>651</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 00:10:52 +0000</bug_when>
    <thetext>Assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3634</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-26 03:43:09 +0000</bug_when>
    <thetext>resolved this issue per Flexible Pcd value support.  please refer to bug 541.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>991</bug_id>
          
          <creation_ts>2018-06-19 13:59:34 +0000</creation_ts>
          <short_desc>generate ProcessLibraryConstructorList() declaration in AutoGen.h for SEC modules</short_desc>
          <delta_ts>2024-03-08 04:26:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=4643</see_also>
    
    <see_also>https://github.com/tianocore/edk2-basetools/pull/120</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>990</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4166</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-06-19 13:59:34 +0000</bug_when>
    <thetext>The ProcessLibraryConstructorList() function&apos;s definition (i.e., implementation) is generated by the build tools. The function&apos;s declaration (i.e., signature) depends on the module type. The declarations are publicly exported in the following header files, for most (but not all) module types:

- MdePkg/Include/Library/PeiCoreEntryPoint.h
- MdePkg/Include/Library/PeimEntryPoint.h
- MdePkg/Include/Library/DxeCoreEntryPoint.h
- MdePkg/Include/Library/UefiDriverEntryPoint.h
- MdePkg/Include/Library/UefiApplicationEntryPoint.h

The declaration for SEC modules is missing, from MdePkg/Include/. Instead, the following header files in the edk2 tree add the same one declaration multiple times, for individual packages:

- ArmPlatformPkg/PrePi/PrePi.h
- ArmVirtPkg/PrePi/PrePi.c
- BeagleBoardPkg/PrePi/PrePi.h
- CorebootModulePkg/SecCore/SecMain.h
- EmulatorPkg/Sec/Sec.h
- IntelFsp2Pkg/FspSecCore/SecMain.h
- IntelFspPkg/FspSecCore/SecMain.h
- IntelFspWrapperPkg/FspInitPei/SecMain.h
- IntelFspWrapperPkg/FspWrapperSecCore/SecMain.h
- QuarkPlatformPkg/Library/PlatformSecLib/PlatformSecLib.c
- UefiCpuPkg/SecCore/SecMain.h

Thus, the declaration for SEC modules, namely

  VOID
  EFIAPI
  ProcessLibraryConstructorList (
    VOID
    );

should be introduced somewhere under MdePkg/Include.

The above-listed files should then replace their declarations with the appropriate #include directive. (For this, separate TianoCore BZs can be filed and assigned; see for example the existent bug 990, for OvmfPkg and ArmVirtPkg.) The present BZ is just about declaring the function for SEC modules in an appropriate MdePkg header file.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4185</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-21 20:11:37 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4193</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-06-21 21:24:39 +0000</bug_when>
    <thetext>SEC has no standard entry point. I suggest to update BaseTools generate ProcessLibraryConstructorList() in AutoGen.h of SEC module. Then, SEC module can directly use it in source code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4194</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-06-21 21:33:35 +0000</bug_when>
    <thetext>That works for me as well; it can also prevent the duplicated manual declarations across the tree.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4195</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-06-21 21:57:18 +0000</bug_when>
    <thetext>Assign it to Yonghong for BaseTools update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5465</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:33:17 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12384</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:01:37 +0000</bug_when>
    <thetext>Closing as WONTFIX due to apparent lack of capacity (not touched in almost 2 years).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22535</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2024-02-06 19:51:58 +0000</bug_when>
    <thetext>Still a bug alright, but now I&apos;m working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22537</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2024-02-06 19:54:09 +0000</bug_when>
    <thetext>BaseTools/AutoGen: declare ProcessLibraryConstructorList() for SEC modules
https://edk2.groups.io/g/devel/message/115193
msgid &lt;36593e23-d3e8-b71a-808d-ef94260b5fd0@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22647</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2024-02-24 16:06:42 +0000</bug_when>
    <thetext>[v2] BaseTools/AutoGen: declare ProcessLibraryConstructorList() for SEC modules
https://edk2.groups.io/g/devel/message/115909
msgid &lt;5e147cee-9fed-a1c8-7358-1162fdaf8f12@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22670</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2024-02-29 05:17:48 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #9)
&gt; [v2] BaseTools/AutoGen: declare ProcessLibraryConstructorList() for SEC modules
&gt; https://edk2.groups.io/g/devel/message/115909
&gt; msgid &lt;5e147cee-9fed-a1c8-7358-1162fdaf8f12@redhat.com&gt;

One commit thus far: bac9c74080cf (&quot;BaseTools/AutoGen: declare ProcessLibraryConstructorList() for SEC modules&quot;, 2024-02-29).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22680</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2024-03-01 08:41:24 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #9)
&gt; [v2] BaseTools/AutoGen: declare ProcessLibraryConstructorList() for SEC modules
&gt; https://edk2.groups.io/g/devel/message/115909
&gt; msgid &lt;5e147cee-9fed-a1c8-7358-1162fdaf8f12@redhat.com&gt;

[edk2-devel] [edk2-BuildSpecification PATCH 0/3] AutoGen.h: declare ProcessLibraryConstructorList() for SEC modules

Merged as commit range db69f5661cae..7a7165a7d199.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22681</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2024-03-01 08:46:59 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #9)
&gt; [v2] BaseTools/AutoGen: declare ProcessLibraryConstructorList() for SEC modules
&gt; https://edk2.groups.io/g/devel/message/115909
&gt; msgid &lt;5e147cee-9fed-a1c8-7358-1162fdaf8f12@redhat.com&gt;

[edk2-devel] [edk2-InfSpecification PATCH 0/2] README: INF_VERSION &gt;= 1.30: declare ProcessLibraryCon...() for SEC modules

Merged as commit range a31e3c842bee..1ea6546578fe.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22683</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2024-03-01 13:17:09 +0000</bug_when>
    <thetext>See also: https://github.com/tianocore/edk2-basetools/pull/120</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22686</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2024-03-04 13:48:25 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #13)
&gt; See also: https://github.com/tianocore/edk2-basetools/pull/120

Merged by Rebecca as commit 5b7161de22ee (&quot;BaseTools/AutoGen: declare ProcessLibraryConstructorList() for SEC modules&quot;, 2024-03-04).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22687</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2024-03-05 06:42:06 +0000</bug_when>
    <thetext>Related: the first patch in

[edk2-devel] [PATCH v2 00/10]
clean up ProcessLibraryConstructorList() declarations in SEC modules

https://edk2.groups.io/g/devel/message/116367
msgid &lt;20240305113843.68812-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22755</commentid>
    <comment_count>16</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2024-03-08 04:26:01 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #15)
&gt; Related: the first patch in
&gt; 
&gt; [edk2-devel] [PATCH v2 00/10]
&gt; clean up ProcessLibraryConstructorList() declarations in SEC modules
&gt; 
&gt; https://edk2.groups.io/g/devel/message/116367
&gt; msgid &lt;20240305113843.68812-1-lersek@redhat.com&gt;

Commit da4aa451bab4: &quot;pip-requirements.txt: require edk2-basetools version 0.1.51&quot;, via &lt;https://github.com/tianocore/edk2/pull/5450&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>70</bug_id>
          
          <creation_ts>2016-07-20 21:27:08 +0000</creation_ts>
          <short_desc>Build failure with latest Xcode clang</short_desc>
          <delta_ts>2021-08-18 19:53:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Jaben Carsey">jaben.carsey</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StdLib</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>95</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 21:27:08 +0000</bug_when>
    <thetext>ajfish commented 4 hours ago
A new warning was added to clang to detect infinite recursion and the StdLib is using fake infinite recursion in place of __builtin_unreachable() and that code triggers the build break.

https://github.com/tianocore/edk2/blob/master/StdLib/LibC/StdLib/Environs.c#L123 _Exit() is calling _Exit() with this comment: /* Keep GCC happy - never reached */. I replaced the fake infinite recursion with UNREACHABLE() and it fixed the issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>670</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:29:11 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16975</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 19:53:10 +0000</bug_when>
    <thetext>Path review email:

https://edk2.groups.io/g/devel/message/34110


Commit:

https://github.com/tianocore/edk2-libc/commit/fe0cb39b5fc5a2f5f6b07c0d1c0d289ae3e53245</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>437</bug_id>
          
          <creation_ts>2017-03-21 21:51:17 +0000</creation_ts>
          <short_desc>[NetworkPkg/IScsiDxe] Need to fix the incorrect error handling in iSCSI DriverEntryPoint</short_desc>
          <delta_ts>2017-04-17 01:10:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="jiaxinwu">jiaxin.wu</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1655</commentid>
    <comment_count>0</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-21 21:51:17 +0000</bug_when>
    <thetext>Currently, error handling in IScsiDriverEntryPoint is incorrect. For
example, if IScsiCreateAttempts() return error due to the limited max
variable size in NT32 platform, iSCSI will not unload the configuration entries, which may cause the NT32 system crash.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1672</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-23 20:24:19 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1834</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-17 01:10:34 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/89648826ee0a68a24a71826e32787dc5c935b622

Already sync to UDK2017.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>710</bug_id>
          
          <creation_ts>2017-09-17 23:04:14 +0000</creation_ts>
          <short_desc>IPv6 support condition check for HTTP and ISCSI</short_desc>
          <delta_ts>2018-01-07 23:58:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2745</commentid>
    <comment_count>0</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-09-17 23:04:14 +0000</bug_when>
    <thetext>[Issue]
When a NIC doesn&apos;t support IPv6, PXE boot options are not shown where are HTTPv6 and ISCSI through IPv6 are available.

[Reproduction Steps]
1. Connect a card which doesn&apos;t support IPv6.
2. Go to boot options and you can see HTTPv6 boot options for the same NIC and under ISCSI, we are able to add an attempt for IPv6 also.

[Actual Behaviour]
1. PXE boot options are not shown - expected
2. HTTP boot options are shown - NOT expected
3. Able to add attempt for IPv6 under ISCSI - NOT expected</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2761</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-21 20:11:35 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2828</commentid>
    <comment_count>2</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-10-06 00:05:25 +0000</bug_when>
    <thetext>Any update on this?

Thank you,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2837</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-10-08 20:56:03 +0000</bug_when>
    <thetext>
Working on the fix, expect to finish it by the end of this month.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2860</commentid>
    <comment_count>4</comment_count>
      <attachid>109</attachid>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-10-12 04:40:21 +0000</bug_when>
    <thetext>Created attachment 109
Changes for &quot;IPv6 support condition check for HTTP and ISCSI&quot;

Attached Changes for &quot;IPv6 support condition check for HTTP and ISCSI&quot; as Original and Modified files</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2861</commentid>
    <comment_count>5</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-10-12 04:42:15 +0000</bug_when>
    <thetext>Could you please review the changes attached, whether we can take it as generic or not.
Please correct if anything is wrong.

Thank you,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2871</commentid>
    <comment_count>6</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-10-13 02:17:30 +0000</bug_when>
    <thetext>Thanks Karunakar, I will review the changes, then feedback to you.


Best Regards,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3350</commentid>
    <comment_count>7</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-01-07 23:58:07 +0000</bug_when>
    <thetext>Commit version:

https://github.com/tianocore/edk2/commit/ed247d86c281154dff6d04b3e9c96a79a7fb0826

https://github.com/tianocore/edk2/commit/6b08dd6eb81d729e3df8329bee7b2a04a5bd4d7a</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>109</attachid>
            <date>2017-10-12 04:40:21 +0000</date>
            <delta_ts>2017-10-12 04:40:21 +0000</delta_ts>
            <desc>Changes for &quot;IPv6 support condition check for HTTP and ISCSI&quot;</desc>
            <filename>IPv6SupportConditionCheck fo HTTP&amp;ISCSI.rar</filename>
            <type>application/octet-stream</type>
            <size>133564</size>
            <attacher name="karunakar">karunakarp</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>818</bug_id>
          
          <creation_ts>2017-12-15 11:38:30 +0000</creation_ts>
          <short_desc>CVfrDLGLexer::errstd wrong signature</short_desc>
          <delta_ts>2018-01-02 10:57:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zenith432</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3240</commentid>
    <comment_count>0</comment_count>
    <who name="">zenith432</who>
    <bug_when>2017-12-15 11:38:30 +0000</bug_when>
    <thetext>The member function CVfrDLGLexer::errstd defined in VfrCompile/VfrSyntax.g was intended as a virtual override of function DLexerBase::errstd defined in VfrCompile/Pccts/h/DLexerBase.h.  The function in the base class has signature
virtual void errstd(const char *);

while the function in the derived class has non-identical signature
INT32 errstd (char *Text);

So, the function in the derived class, instead of being an override, is an overload.  It never gets called.  It also fails to return a value is at should.  However, this should be resolved by changing its signature

diff a/BaseTools/Source/C/VfrCompile/VfrSyntax.g b/BaseTools/Source/C/VfrCompile/VfrSyntax.g
--- a/BaseTools/Source/C/VfrCompile/VfrSyntax.g
+++ b/BaseTools/Source/C/VfrCompile/VfrSyntax.g
@@ -42,7 +42,7 @@ class CVfrDLGLexer : public VfrLexer
 {
 public:
   CVfrDLGLexer (DLGFileInput *F) : VfrLexer (F) {};
-  INT32 errstd (char *Text)
+  void errstd (const char *Text)
   {
     printf (&quot;unrecognized input &apos;%s&apos;\n&quot;, Text);
   }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3253</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-12-20 20:04:22 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3318</commentid>
    <comment_count>2</comment_count>
    <who name="">zenith432</who>
    <bug_when>2018-01-02 10:57:34 +0000</bug_when>
    <thetext>Fixed in commit 8b13e18.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>278</bug_id>
          
          <creation_ts>2016-12-01 01:17:53 +0000</creation_ts>
          <short_desc>SMM FreePages should handle Zero Address and Zero PageNumber</short_desc>
          <delta_ts>2016-12-11 21:57:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1090</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-12-01 01:17:53 +0000</bug_when>
    <thetext>Zero Address or Zero PageNumber are invalid for SMM FreePages. For them, SMM FreePages should return EFI_INVALID_PARAMETER.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1091</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-12-01 01:18:59 +0000</bug_when>
    <thetext>assign to me</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1097</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-01 19:03:23 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1155</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2016-12-11 21:57:22 +0000</bug_when>
    <thetext>Fix at https://github.com/tianocore/edk2/commit/ddfae2640c59e6226f2a9242483b7b294edaccab</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>556</bug_id>
          
          <creation_ts>2017-05-18 14:41:44 +0000</creation_ts>
          <short_desc>Use .rodata instead of .rdata in BaseUefiCpuLib NASM files to address XCODE5 build failures</short_desc>
          <delta_ts>2017-05-24 20:05:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>vanjeff_919</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2017</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2074</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-18 14:41:44 +0000</bug_when>
    <thetext>NASM requires read-only data sections to use the section
name .rodata.  The following NASM source files in the UefiCpuPkg
use a read-only section name of .rdata.

UefiCpuPkg/Library/BaseUefiCpuLib/Ia32/InitializeFpu.nasm
UefiCpuPkg/Library/BaseUefiCpuLib/X64/InitializeFpu.nasm

The build failure from use of .rdata is seen when using
the XCODE5 tool chain.

Section &quot;7.8.1 macho extensions to the SECTION Directive&quot;
of the NASM documentation at http://www.nasm.us/doc/
describes the section name requirements.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-18 20:08:05 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2096</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 02:24:54 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2110</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 17:09:38 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/5b78f30d81d7e536df37bafb48c4cb5b6d44edb8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2161</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-24 20:05:27 +0000</bug_when>
    <thetext>Commit to UDK2017 branch

https://github.com/tianocore/edk2/commit/19b5379a3c9fc63f930f48cd5cf2a25f62cb9327</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>106</bug_id>
          
          <creation_ts>2016-08-26 17:28:40 +0000</creation_ts>
          <short_desc>EDKII - Network stack : UEFI PXE boot issue with Classless IP address</short_desc>
          <delta_ts>2016-09-29 20:39:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Rama">ramab</reporter>
          <assigned_to name="Rama">ramab</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>455</commentid>
    <comment_count>0</comment_count>
    <who name="Rama">ramab</who>
    <bug_when>2016-08-26 17:28:40 +0000</bug_when>
    <thetext>EDKII - Network stack : UEFI PXE boot issue with Classless IP address issue

Current EDK II Network stack does not support Classless IP address.

If IP adress is 192.168.1.0 NetIp4IsUnicast ( ) returns false value.
IN IP4_ADDR Ip,

IN IP4_ADDR NetMask

)

when doing UEFI PXE boot with specific IP: 192.168.1.0/16. The failure signature: &quot;Can&apos;t not allocate IO buffer&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>523</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2016-09-25 21:53:37 +0000</bug_when>
    <thetext>Below version fix should solve the issue, please help to confirm that.

SHA-1: 8c5f78a2cc15199e3f77ae4b156023af366fd6c7

* MdeModulePkg: Support classless IP for DHCPv4 TransmitReceive()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>543</commentid>
    <comment_count>2</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-29 20:39:16 +0000</bug_when>
    <thetext>Bug Scrub: Already fixed, return to submitter to verify</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>469</bug_id>
          
          <creation_ts>2017-04-11 17:28:44 +0000</creation_ts>
          <short_desc>UEFI PXE boot does not support a DHCP proxy</short_desc>
          <delta_ts>2017-04-21 02:10:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="RickF">rfarrington</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2014.SP1</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1789</commentid>
    <comment_count>0</comment_count>
    <who name="RickF">rfarrington</who>
    <bug_when>2017-04-11 17:28:44 +0000</bug_when>
    <thetext>When using a DHCP Proxy Server, attempts to PXE Boot will fail.
The root cause is that the UefiPxeBcDxe module does not cache Proxy DHCP packets.

I am attaching a patch that corrects this.

This issue was seen on a Dell T430 Server and a Dell T130 Desktop.

Steps to reproduce:
- configure DHCP server (CentOS 7.2.1511, DHCPD daemon) without PXE support
- install &amp; configure dnsmasq package to provide PXE support (no DNS, DHCP proxy)
- connect client to server in back-to-back configuration
- boot client using PXE

I have attached the dnsmasq configuration (as a patch from the default config) that can be used for DHCP proxy operation.

NOTE: even though the attached patch fixes the problem, another, smaller problem exists.  That is, due to the DHCP request packet used for Proxy operation, the dnsmasq server will respond with a filename that has &quot;.0&quot; appended to it.  This makes things a little cumbersome; however PXE booting WILL work if the TFTP server has the correct EFI boot file named &quot;&lt;filename&gt;.0&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1790</commentid>
    <comment_count>1</comment_count>
      <attachid>50</attachid>
    <who name="RickF">rfarrington</who>
    <bug_when>2017-04-11 17:31:46 +0000</bug_when>
    <thetext>Created attachment 50
Patch for UefiPxeBcDxe driver to accept DHCP Proxy packets</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1791</commentid>
    <comment_count>2</comment_count>
      <attachid>51</attachid>
    <who name="RickF">rfarrington</who>
    <bug_when>2017-04-11 17:33:09 +0000</bug_when>
    <thetext>Created attachment 51
dnsmasq daemon configuration changes for DHCP Proxy test

This is a diff from the default dnsmasq configuration that was used for the DHCP Proxy server.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1810</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-13 20:07:19 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1833</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-16 23:13:37 +0000</bug_when>
    <thetext>Yes, it&apos;s the PXE driver bug when PxeOfferTypeProxyPxe10 and PxeOfferTypeProxyWfm11a offer type received.

The issue also exists in DHCPv6 offers.

I will create the formal patch to fix it. Thanks for report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1897</commentid>
    <comment_count>5</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-21 02:10:44 +0000</bug_when>
    <thetext>Master Commit:
https://github.com/tianocore/edk2/commit/8cdd559be622f7a35731b7f973d8b82d1c9e303e

UDK2017 Commit:
https://github.com/tianocore/edk2/commit/d1ffb4e436d189901f57c4f5d9916fbbbafce8b3</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>50</attachid>
            <date>2017-04-11 17:31:46 +0000</date>
            <delta_ts>2017-04-11 17:31:46 +0000</delta_ts>
            <desc>Patch for UefiPxeBcDxe driver to accept DHCP Proxy packets</desc>
            <filename>fix_for_dhcp_proxy.patch</filename>
            <type>application/octet-stream</type>
            <size>618</size>
            <attacher name="RickF">rfarrington</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>51</attachid>
            <date>2017-04-11 17:33:09 +0000</date>
            <delta_ts>2017-04-11 17:33:09 +0000</delta_ts>
            <desc>dnsmasq daemon configuration changes for DHCP Proxy test</desc>
            <filename>dnsmasq.conf.diff</filename>
            <type>application/octet-stream</type>
            <size>2283</size>
            <attacher name="RickF">rfarrington</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>383</bug_id>
          
          <creation_ts>2017-02-15 21:40:45 +0000</creation_ts>
          <short_desc>Function comments in HiiImageEx.h contain many typos</short_desc>
          <delta_ts>2017-03-15 01:41:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1455</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-02-15 21:40:45 +0000</bug_when>
    <thetext>E.g. for EFI_HII_DRAW_IMAGE_EX, the function comments say &quot;Same with EFI_HII_IMAGE_PROTOCOL.SetImage(),this protocol invokes EFI_HII_IMAGE_PROTOCOL.SetImage() implicitly.&quot;

We need to review all function comments in this header file and the function comments in implementation (HiiDatabaseDxe driver) to fix all the typos.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1460</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-16 19:05:10 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1615</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-03-15 01:41:34 +0000</bug_when>
    <thetext>Fix this issue in Trunk:
https://github.com/tianocore/edk2/commit/b16dd6c86e44a10518232294f54068be6b53955b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>744</bug_id>
          
          <creation_ts>2017-10-24 03:17:04 +0000</creation_ts>
          <short_desc>ASSERT in HttpInitMsgParser</short_desc>
          <delta_ts>2017-11-23 19:28:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2916</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-10-24 03:17:04 +0000</bug_when>
    <thetext>[Issue]
Getting ASSERT issue in HttpInitMsgParser function in HttpDxe Lib when DEBUG_CODE is enabled.
Issue is faced when trying to download a file from Server. 

[More Details]
The Problem here is the, SizeofHeaders value returned by HttpTcpReceiveHeader() in HttpResponseWorker() is not a valid value. It includes the length of the Body also.
So, when this SizeofHeaders value is passed as input for mHttpUtilities-&gt;Parse(), the HeaderCount returned by Parse is also invalid.

From the log, actual header count for Response is 8. But mHttpUtilities-&gt;Parse() returns HeaderCount as 9. So when trying to access the 9th Header(which is invalid) in HttpIoIsChunked() function (called by HttpInitMsgParser) assert is happening.


HttpTcpReceiveHeader()will search &quot;\r\n\r\n&quot; as end of a message header, But after finding it also it continuing to search for ”\”
SizeofHeaders value returned by HttpTcpReceiveHeader() is also includes the length of the Body which causing Invalid value.

In one case actual header count for Response is 8. But mHttpUtilities-&gt;Parse() returns HeaderCount as 9, and the 9th one is invalid(NULL) which is causing ASSERT.
If 9th one is not Null then I didn’t face any ASSERT.

But in all the cases SizeofHeaders includes the length of the Body.


Thanks,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2953</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-26 20:14:15 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2954</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-10-26 21:03:11 +0000</bug_when>
    <thetext>
Siyuan is working on the investigation. So, change the owner to Siyuan.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2975</commentid>
    <comment_count>3</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-11-06 05:46:55 +0000</bug_when>
    <thetext>Any update...

Thank You,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3079</commentid>
    <comment_count>4</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2017-11-16 01:12:36 +0000</bug_when>
    <thetext>Fixed revision: 
edk2:19bd133562df951ae7ff7e1fff99b11a25b4cb6d</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3120</commentid>
    <comment_count>5</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-11-23 19:28:39 +0000</bug_when>
    <thetext>Commit 19bd133562df951ae7ff7e1fff99b11a25b4cb6d is to fix the incorrect SizeofHeaders returned from HttpTcpReceiveHeader(). But it missed the &quot;\r\n\r\n&quot; calculation, which will cause the later HttpHeaders parsing failure.

So, below commit is fix the above issue: b16abfcc3497a51e32214bb50f4be8c3a36fa5f0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>660</bug_id>
          
          <creation_ts>2017-08-02 06:55:12 +0000</creation_ts>
          <short_desc>EFI_SYSTEM_CONTEXT_AARCH64 declaration interferes with Windows declarations</short_desc>
          <delta_ts>2018-04-19 20:30:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>schabus</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2543</commentid>
    <comment_count>0</comment_count>
    <who name="">schabus</who>
    <bug_when>2017-08-02 06:55:12 +0000</bug_when>
    <thetext>edk2/MdePkg/Include/Protocol/DebugSupport.h includes the definition of EFI_SYSTEM_CONTEXT_AARCH64 and there it defines in line 609
UINT64 FAR;  // Fault Address Register.

On Windows systems this may yield to a compile error (C2208) because FAR is used (heavily) in the Windows SDK include files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2552</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-03 20:06:13 +0000</bug_when>
    <thetext>bug scrub:  please help to attach a build failure log as attachment, thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2701</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-07 01:18:17 +0000</bug_when>
    <thetext>Hello schabus@acm.org,

Could you help to attach a build failure log for us to investigate? thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2731</commentid>
    <comment_count>3</comment_count>
    <who name="">schabus</who>
    <bug_when>2017-09-14 14:40:38 +0000</bug_when>
    <thetext>Hi - unfortunately I had this issue at a customer where I don&apos;t have access to the building machines any longer. The problem was, that as soon as you include &lt;windows.h&gt; you get a syntax error, because FAR is defined within &lt;windows.h&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2734</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-09-14 22:30:22 +0000</bug_when>
    <thetext>I includes &lt;windows.h&gt; and &lt;Include/Protocol/DebugSupport.h&gt; in Nt32Pkg SecMain driver, and build SecMain. It can pass VS2015x86 build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3906</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-04-19 20:30:37 +0000</bug_when>
    <thetext>change the status to WORKSFORME since we can&apos;t reproduce it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>125</bug_id>
          
          <creation_ts>2016-09-20 22:02:02 +0000</creation_ts>
          <short_desc>[AppPkg] still reference edk2-devel@lists.sourceforge.net</short_desc>
          <delta_ts>2016-11-09 14:41:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Jaben Carsey">jaben.carsey</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>AppPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>499</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-20 22:02:02 +0000</bug_when>
    <thetext>This bug is separate from bug 44. This bug is for AppPkg.

Looks like we need to grep the codebase:
git grep &quot;edk2-devel@lists.sourceforge.net&quot;
git grep &quot;http://edk2.tianocore.org&quot;


These invalid info still exist in AppPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>668</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:25:11 +0000</bug_when>
    <thetext>bug scrub: assign to package owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>860</commentid>
    <comment_count>2</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2016-11-09 14:41:57 +0000</bug_when>
    <thetext>commit was pushed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>677</bug_id>
          
          <creation_ts>2017-08-24 07:25:00 +0000</creation_ts>
          <short_desc>StdLib build failures (AARCH64, NOOPT, GCC5, gcc-6.1.1)</short_desc>
          <delta_ts>2017-11-13 11:30:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Thiebaud Weksteen">tweek</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>tweek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StdLib</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2629</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-24 07:25:00 +0000</bug_when>
    <thetext>with edk2 master @ e4d409c6e3b9 (&quot;Maintainers.txt: Update the Maintainers
for IntelFrameworkXXXPkg&quot;, 2017-08-16).

&quot;aarch64-linux-gnu-gcc&quot; \
  -g \
  -fshort-wchar \
  -fno-builtin \
  -fno-strict-aliasing \
  -Wall \
  -Werror \
  -Wno-array-bounds \
  -ffunction-sections \
  -fdata-sections \
  -include AutoGen.h \
  -fno-common \
  -DSTRING_ARRAY_NAME=LibCStrings \
  -g \
  -Os \
  -fshort-wchar \
  -fno-builtin \
  -fno-strict-aliasing \
  -Wall \
  -Werror \
  -Wno-array-bounds \
  -include AutoGen.h \
  -fno-common \
  -mlittle-endian \
  -fno-short-enums \
  -fverbose-asm \
  -funsigned-char \
  -ffunction-sections \
  -fdata-sections \
  -Wno-address \
  -fno-asynchronous-unwind-tables \
  -fno-pic \
  -fno-pie \
  -ffixed-x18 \
  -O0 \
  -mcmodel=small \
  -nostdinc \
  -nostdlib \
  -DUEFI_C_SOURCE \
  -c \
  -o Build/AppPkg/NOOPT_GCC5/AARCH64/StdLib/LibC/LibC/OUTPUT/Main/Arm/flt_rounds.obj \
  -IStdLib/LibC/Main/Arm \
  -IStdLib/LibC/Main \
  -IStdLib/LibC \
  -IBuild/AppPkg/NOOPT_GCC5/AARCH64/StdLib/LibC/LibC/DEBUG \
  -IStdLib \
  -IStdLib/Include \
  -IStdLib/Include/Aarch64 \
  -IStdLibPrivateInternalFiles \
  -IStdLibPrivateInternalFiles/Include \
  -IStdLibPrivateInternalFiles/Include/Arm \
  -IMdePkg \
  -IMdePkg/Include \
  -IMdePkg/Include/AArch64 \
  -IShellPkg \
  -IShellPkg/Include StdLib/LibC/Main/Arm/flt_rounds.c

StdLib/LibC/Main/Arm/flt_rounds.c:42:18: error: &apos;map&apos; defined but not used [-Werror=unused-const-variable=]
 static const int map[] = {
                  ^~~
cc1: all warnings being treated as errors</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2630</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-24 07:49:02 +0000</bug_when>
    <thetext>Another:

StdLib/BsdSocketLib/getaddrinfo.c:1065:19: error: &apos;AskedForGot&apos; defined but not used [-Werror=unused-const-variable=]
 static const char AskedForGot[] =
                   ^~~~~~~~~~~
StdLib/BsdSocketLib/getaddrinfo.c:559:22: error: &apos;dtab&apos; defined but not used [-Werror=unused-const-variable=]
 static const ns_dtab dtab[] = {
                      ^~~~
StdLib/BsdSocketLib/getaddrinfo.c:185:21: error: &apos;default_dns_files&apos; defined but not used [-Werror=unused-const-variable=]
 static const ns_src default_dns_files[] = {
                     ^~~~~~~~~~~~~~~~~
cc1: all warnings being treated as errors</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2631</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-24 07:53:09 +0000</bug_when>
    <thetext>More:

StdLib/BsdSocketLib/getaddrinfo.c:1503:1: error: &apos;_files_getaddrinfo&apos; defined but not used [-Werror=unused-function]
 _files_getaddrinfo(void *rv, void *cb_data, va_list ap)
 ^~~~~~~~~~~~~~~~~~
StdLib/BsdSocketLib/getaddrinfo.c:1305:1: error: &apos;_dns_getaddrinfo&apos; defined but not used [-Werror=unused-function]
 _dns_getaddrinfo(void *rv, void *cb_data, va_list ap)
 ^~~~~~~~~~~~~~~~
cc1: all warnings being treated as errors</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2632</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-24 07:57:05 +0000</bug_when>
    <thetext>StdLib/BsdSocketLib/getaddrinfo.c:234:12: error: &apos;_dns_getaddrinfo&apos; declared &apos;static&apos; but never defined [-Werror=unused-function]
 static int _dns_getaddrinfo(void *, void *, va_list);
            ^~~~~~~~~~~~~~~~
StdLib/BsdSocketLib/getaddrinfo.c:239:12: error: &apos;_files_getaddrinfo&apos; declared &apos;static&apos; but never defined [-Werror=unused-function]
 static int _files_getaddrinfo(void *, void *, va_list);
            ^~~~~~~~~~~~~~~~~~
StdLib/BsdSocketLib/getaddrinfo.c:1796:1: error: &apos;res_searchN&apos; defined but not used [-Werror=unused-function]
 res_searchN(const char *name, struct res_target *target, res_state res)
 ^~~~~~~~~~~
StdLib/BsdSocketLib/getaddrinfo.c:1440:1: error: &apos;_gethtent&apos; defined but not used [-Werror=unused-function]
 _gethtent(FILE **hostf, const char *name, const struct addrinfo *pai)
 ^~~~~~~~~
StdLib/BsdSocketLib/getaddrinfo.c:1430:1: error: &apos;_endhtent&apos; defined but not used [-Werror=unused-function]
 _endhtent(FILE **hostf)
 ^~~~~~~~~
StdLib/BsdSocketLib/getaddrinfo.c:1420:1: error: &apos;_sethtent&apos; defined but not used [-Werror=unused-function]
 _sethtent(FILE **hostf)
 ^~~~~~~~~
StdLib/BsdSocketLib/getaddrinfo.c:1276:1: error: &apos;aisort&apos; defined but not used [-Werror=unused-function]
 aisort(struct addrinfo *s, res_state res)
 ^~~~~~
StdLib/BsdSocketLib/getaddrinfo.c:1075:1: error: &apos;getanswer&apos; defined but not used [-Werror=unused-function]
 getanswer(const querybuf *answer, int anslen, const char *qname, int qtype,
 ^~~~~~~~~
cc1: all warnings being treated as errors</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2633</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-24 08:25:54 +0000</bug_when>
    <thetext>Summary: in order to get BsdSocketLib to build, the following removals (or
conditional exclusions) are necessary:

- in &quot;StdLib/BsdSocketLib/getaddrinfo.c&quot;:

  - functions -- both declarations and definitions:

    - getanswer()
    - aisort()
    - _dns_getaddrinfo()
    - _sethtent()
    - _endhtent()
    - _gethtent()
    - _files_getaddrinfo()
    - res_queryN()
    - res_searchN()
    - res_querydomainN()

  - variables:

    - default_dns_files
    - dtab
    - AskedForGot

  - macros:

    - SORTEDADDR()
    - SORTMATCH()

- in &quot;StdLib/BsdSocketLib/gethostbydns.c&quot;:

  - variables:

    - AskedForGot</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2643</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-24 20:14:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2946</commentid>
    <comment_count>6</comment_count>
    <who name="Thiebaud Weksteen">tweek</who>
    <bug_when>2017-10-26 07:32:50 +0000</bug_when>
    <thetext>Patch sent on edk2-devel</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2947</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-26 11:24:56 +0000</bug_when>
    <thetext>Thank you, Thiebaud, for picking up this BZ!

Subject and URL of patch (from comment 6):

[edk2] [PATCH] StdLib/BsdSocketLib: Remove unused variables
https://lists.01.org/pipermail/edk2-devel/2017-October/016473.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3041</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-13 11:30:19 +0000</bug_when>
    <thetext>Fixed by Thiebaud Weksteen in commit cb1205659136 (&quot;StdLib/BsdSocketLib: Remove unused variables&quot;, 2017-10-26). Thank you!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>592</bug_id>
          
          <creation_ts>2017-06-09 17:22:13 +0000</creation_ts>
          <short_desc>BootMaintenanceManager &quot;Console Standard Error Device Select&quot; menu Nt32Pkg and OvmfPkg Not Saved in UiApp.inf</short_desc>
          <delta_ts>2017-06-13 17:16:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laurie Jarlstrom">laurie</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2263</commentid>
    <comment_count>0</comment_count>
      <attachid>76</attachid>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2017-06-09 17:22:13 +0000</bug_when>
    <thetext>Created attachment 76
Screen capture of set and then after reset item is cleared

In both the Nt32Pkg environment and the OvmfPkg with QEMU environment the Boot Maintenance Manager -&gt; Console Options -&gt; Console Standard Error Device Select
When the device is selected “Spacebar” to toggle the setting to the SET condition, the setting does not stick when “F10” to save or “Commit Changes and Exit” are selected.  
Upon reset these settings are not saved.  This did work in UDK2015.

The symptom is that Python scripts use the standard error output to the console  and will no longer be seen.  Python scripts will still work however.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2265</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-12 22:22:46 +0000</bug_when>
    <thetext>Assign to Dandan to fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2266</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-06-12 23:04:17 +0000</bug_when>
    <thetext>Fix it on EDK II Trunk: https://github.com/tianocore/edk2/commit/983f59932db28ae37b9f9e545c1258bc59aa71ca


Fix it on UDK2017:
https://github.com/tianocore/edk2/commit/37a0c27fe1c63ac9cb8d998bafb6f8f44eb73f02

Hi Laurie,
Could you help to verify the solution? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2268</commentid>
    <comment_count>3</comment_count>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2017-06-13 17:16:52 +0000</bug_when>
    <thetext>I have check this and Verified that this is fixed in both Nt32 and Qemu with Ovmf</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>76</attachid>
            <date>2017-06-09 17:22:13 +0000</date>
            <delta_ts>2017-06-09 17:22:13 +0000</delta_ts>
            <desc>Screen capture of set and then after reset item is cleared</desc>
            <filename>NoStd_error.JPG</filename>
            <type>image/jpeg</type>
            <size>115300</size>
            <attacher name="Laurie Jarlstrom">laurie</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>51</bug_id>
          
          <creation_ts>2016-07-20 21:04:43 +0000</creation_ts>
          <short_desc>QuarkSockg Use after free in QNCSmmCoreDispatcher</short_desc>
          <delta_ts>2016-10-28 02:27:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>QuarkSocPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>76</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 21:04:43 +0000</bug_when>
    <thetext>NikolajSchlej commented on Mar 23
If one calls SmmSwDispatch2-&gt;UnRegister(SmmSwDispatch2, DispatchHandle) in the handler itself, the list node, from where RecordToExhaust is derived, will be deleted by that call and all uses of this pointer will be UAFs.
Please inspect the code around QNCSmmCore.c#L711 and store next node and other required information locally before calling the handler.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>427</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-11 20:28:08 +0000</bug_when>
    <thetext>Bug Scrub: Confirmed and assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>552</commentid>
    <comment_count>2</comment_count>
      <attachid>13</attachid>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-10-04 14:11:46 +0000</bug_when>
    <thetext>Created attachment 13
Proposed patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>553</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-10-04 14:32:53 +0000</bug_when>
    <thetext>Initial patch generated.  

Galileo Gen 2 boots with this patch applied.

Working on unit test to verify this patch addresses reported issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>558</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-10-05 13:43:56 +0000</bug_when>
    <thetext>Unit test implemented that creates a periodic SMI handler that is triggered
every 8 seconds, and unregisters itself after the SMI handler is triggered 4 times.

  https://github.com/mdkinney/edk2/tree/Bug51/Reproduce

The end of the log of this unit test is:

UEFI Interactive Shell v2.187477C2-69C7-11D2-8E39-00A0C969723B F2E1894
EDK IIlProtocolInterface: 752F3136-4E16-4FDC-A22A-E5F46812F4CA F2E0E90
UEFI v2.60 (EDK II, 0x01000400)008-7F9B-4F30-87AC-60C9FEF5DA4E F1B4278
map: No mapping found.
Press ESC in 5 seconds to skip startup.nsh or any other key to continue.
Shell&gt;
Shell&gt;
Shell&gt;

PeriodicSmiHandler()  ElapsedTimer = 80000000



PeriodicSmiHandler()  ElapsedTimer = 80000000



PeriodicSmiHandler()  ElapsedTimer = 80000000



PeriodicSmiHandler()  ElapsedTimer = 80000000

ASSERT [QNCSmmDispatcher] d:\work\github\tianocore\edk2\QuarkSocPkg\QuarkNorthCluster\Smm\DxeSmm\QncSmmDispatcher\QNCSmmCore.c(665): CR has Bad Signature

The CR() macro ASSERT() is generated due to the use of the freed linked list
node that no longer has a valid signature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>785</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-10-28 02:27:26 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/5f82e02a4b40f25462f0d592e85071bdeb80a2bd</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>13</attachid>
            <date>2016-10-04 14:11:46 +0000</date>
            <delta_ts>2016-10-04 14:11:46 +0000</delta_ts>
            <desc>Proposed patch</desc>
            <filename>0001-QuarkSocPkg-QncSmmDispatcher-Fix-use-after-free-issu.patch</filename>
            <type>application/octet-stream</type>
            <size>5808</size>
            <attacher name="Michael Kinney">michael.d.kinney</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>244</bug_id>
          
          <creation_ts>2016-11-18 04:40:07 +0000</creation_ts>
          <short_desc>Handle mis-configuration of PcdTcg2HashAlgorithmBitmap in software HashLib</short_desc>
          <delta_ts>2017-02-08 05:55:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>chao.b.zhang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>991</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2016-11-18 04:40:07 +0000</bug_when>
    <thetext>When software HashLib (HashLibBaseCryptoRouter) and related HashInstanceLib are used, PcdTcg2HashAlgorithmBitmap are expected to be configured to 0 in platform dsc.

But PcdTcg2HashAlgorithmBitmap has default value 0xFFFFFFFF in SecurityPkg.dec, and some platforms forget to configure it to 0 or still configure it to 0xFFFFFFFF in platform dsc, that will make final PcdTcg2HashAlgorithmBitmap value incorrect.

After discussion with Jiewen, we think software HashLib (HashLibBaseCryptoRouter) can ignore the PcdTcg2HashAlgorithmBitmap default value and set it to 0 in CONSTRUCTOR.
Then it can handle the mis-configuration of PcdTcg2HashAlgorithmBitmap and reduce the effort of platform developer to configure this PCD further.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1103</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-01 19:10:34 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1401</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-02-08 05:55:29 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/9fe9cf9acb475af9317dcdaf32a93f1cb77d95ac</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>160</bug_id>
          
          <creation_ts>2016-10-19 20:36:00 +0000</creation_ts>
          <short_desc>build tools generate section encapsulation that PEI Core marks as invalid due to FFS3 section inside FFS2 FV</short_desc>
          <delta_ts>2016-10-27 09:51:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>638</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2016-10-19 20:36:00 +0000</bug_when>
    <thetext>We have a condition that occurs when we boot where we see the following message and our boot fails because of it.
DEBUG ((EFI_D_ERROR, &quot;Found a FFS3 formatted section in a non-FFS3 formatted FV.\n&quot;));
 
Which is on line 773 of FwVol.c ( https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Core/Pei/FwVol/FwVol.c )
 
 The condition is caused by a large firmware volume (greater than 16mb) that is compressed and put into a smaller FV (less than 16mb).  My question is why isn&apos;t this allowed (seems like a valid scenario).  Volinfo supports this and decodes binary fine.  The PI Vol 3 spec has a section 3.2.2  EFI_FIRMWARE_FILE_SYSTEM3_GUID which says FileSystem2 doesn&apos;t support large files but it seems that the code is not taking into account that the section is compressed and therefore you can have a large file inside a compressed section inside a FV with File System2.


Here are some details of my scenario.
&gt; Compressed FV has filesystem == 8c8ce578-8a3d-4f1c-9935-896185c32dd3  (ffs3)
&gt; Non compressed FV has filesystem == 5473c07a-3dcb-4dca-bd6f-1e9689e7349a (ffs2)
&gt; 
&gt; VolInfo dump of the Non Compressed FV showing the nested/compressed FV inside.
&gt; 
&gt; Decoding
&gt; VolInfo Version 1.0 Build Build 20909
&gt; Signature:        _FVH (4856465F)
&gt; Attributes:       4FEFF
&gt;       EFI_FVB2_READ_DISABLED_CAP
&gt;       EFI_FVB2_READ_ENABLED_CAP
&gt;       EFI_FVB2_READ_STATUS
&gt;       EFI_FVB2_WRITE_DISABLED_CAP
&gt;       EFI_FVB2_WRITE_ENABLED_CAP
&gt;       EFI_FVB2_WRITE_STATUS
&gt;       EFI_FVB2_LOCK_CAP
&gt;       EFI_FVB2_LOCK_STATUS
&gt;       EFI_FVB2_STICKY_WRITE
&gt;       EFI_FVB2_MEMORY_MAPPED
&gt;       EFI_FVB2_ERASE_POLARITY
&gt;       EFI_FVB2_READ_LOCK_CAP
&gt;       EFI_FVB2_READ_LOCK_STATUS
&gt;       EFI_FVB2_WRITE_LOCK_CAP
&gt;       EFI_FVB2_WRITE_LOCK_STATUS
&gt;        EFI_FVB2_ALIGNMENT_16
&gt;        EFI_FVB2_ALIGNMENT_32
&gt;        EFI_FVB2_ALIGNMENT_64
&gt;        EFI_FVB2_ALIGNMENT_128
&gt;        EFI_FVB2_ALIGNMENT_4K
&gt;        EFI_FVB2_ALIGNMENT_8K
&gt;        EFI_FVB2_ALIGNMENT_16K
&gt;        EFI_FVB2_ALIGNMENT_32K
&gt;        EFI_FVB2_ALIGNMENT_1M
&gt;        EFI_FVB2_ALIGNMENT_2M
&gt;       EFI_FVB2_ALIGNMENT_4M
&gt;        EFI_FVB2_ALIGNMENT_8M
&gt;        EFI_FVB2_ALIGNMENT_256M
&gt;        EFI_FVB2_ALIGNMENT_512M
&gt;        EFI_FVB2_ALIGNMENT_1G
&gt;        EFI_FVB2_ALIGNMENT_2G
&gt; Header Length:         0x00000048
&gt; File System ID:        5473c07a-3dcb-4dca-bd6f-1e9689e7349a
&gt; Revision:              0x0002
&gt; Number of Blocks:      0x00000028
&gt; Block Length:          0x00010000
&gt; Total Volume Size:     0x00280000
&gt; ============================================================
&gt; File Name:        9E21FD93-9C72-4C15-8C4B-E77F1DB2D792
&gt; File Offset:      0x00000048
&gt; File Length:      0x001F3FFD
&gt; File Attributes:  0x00
&gt; File State:       0xF8
&gt;        EFI_FILE_DATA_VALID
&gt; File Type:        0x0B  EFI_FV_FILETYPE_FIRMWARE_VOLUME_IMAGE
&gt; ------------------------------------------------------------
&gt;  Type:  EFI_SECTION_GUID_DEFINED
&gt;  Size:  0x001F3FE5
&gt;  SectionDefinitionGuid:  ee4e5898-3914-4259-9d6e-dc7bd79403cf
&gt; 
&gt;  DataOffset:             0x0018
&gt;  Attributes:             0x0001
&gt; ------------------------------------------------------------
&gt;  Type:  EFI_SECTION_RAW
&gt;  Size:  0x00000FF8
&gt; ------------------------------------------------------------
&gt;  Type:  EFI_SECTION_FIRMWARE_VOLUME_IMAGE
&gt;  Size:  0x01010008
&gt; ============================================================

Additional comments:
1. Need to check DXE code too
2. ne solution might be that once a section was processed that had attributes of EFI_GUIDED_SECTION_PROCESSING_REQUIRED then the check for file systems should no longer be performed.
3. PI Spec says that EFI_FIRMWARE_VOLUME_IMAGE_SECTION2 should be used.  I don&apos;t see any tool support for this.  
4. If #3 is the right thing then tools should handle transparently because sizes can change a lot depending on build options.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>660</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:10:32 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>695</commentid>
    <comment_count>2</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2016-10-21 15:22:24 +0000</bug_when>
    <thetext>As Star pointed out on the mailing list this was caused by improper call to 

PeiServicesInstallFvInfoPpi(
         NULL,
         (VOID *)PcdGet32(PcdFlashFvXXXBase),
         PcdGet32(PcdFlashFvXXXSize),
         NULL,
         NULL
         );


It should be something like
PeiServicesInstallFvInfoPpi(
         &amp;(((EFI_FIRMWARE_VOLUME_HEADER *) (UINTN)PcdGet32(PcdFlashFvXXXBase))-&gt;FileSystemGuid),
         (VOID *)PcdGet32(PcdFlashFvXXXBase),
         PcdGet32(PcdFlashFvXXXSize),
         NULL,
         NULL
         );


and I can confirm that this fixed the problem.  I would suggest an assert message in the implementation of PeiServicesInstallFvInfoPpi so that if NULL is used and the Ffs2 filesystem is to be assumed the FV header can then be checked to make sure the guid matches FFS2.  

MdePkg\Library\PeiServicesLib\PeiServicesLib.c ~ line 642

add the assert for the else case.

if (FvFormat != NULL) {
    CopyGuid (&amp;FvInfoPpi-&gt;FvFormat, FvFormat);
  } else {
    CopyGuid (&amp;FvInfoPpi-&gt;FvFormat, &amp;gEfiFirmwareFileSystem2Guid);
    //Since FileSystem 2 is being assumed check the FV
    //Check that the File system matches.
    ASSERT(CompareGuid(&amp;(((EFI_FIRMWARE_VOLUME_HEADER *)FvInfo)-&gt;FileSystemGuid), &amp;gEfiFirmwareFileSystem2Guid));
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>757</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2016-10-27 09:51:16 +0000</bug_when>
    <thetext>Fixed at f66ad5d2d7f7cc866d0cae69b30cd758bb2ceb04..7bd394623aa89d0f2fc871fd69d8a8762738de14</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>438</bug_id>
          
          <creation_ts>2017-03-21 22:18:17 +0000</creation_ts>
          <short_desc>[NT32] Request remove the condition of PcdMaxVariableSize for NT32 platform</short_desc>
          <delta_ts>2017-07-26 22:18:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="jiaxinwu">jiaxin.wu</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>Nt32Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1656</commentid>
    <comment_count>0</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-21 22:18:17 +0000</bug_when>
    <thetext>Currently the PcdMaxVariableSize is overwrote by the below condition check:  

!if $(SECURE_BOOT_ENABLE) == TRUE || $(TLS_ENABLE) == TRUE
  gEfiMdeModulePkgTokenSpaceGuid.PcdMaxVariableSize|0x2000
!endif


But for other case, PcdMaxVariableSize is also required with the value of 0x2000 (e,g. NetworkPkg/IScsiDxe), so I request to remove the condition of PcdMaxVariableSize for NT32 platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1671</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-23 20:23:35 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2510</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-26 22:18:56 +0000</bug_when>
    <thetext>pushed @ 1d8701a20e02f8c2c3ca66bb643d45d7d6779fd1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>90</bug_id>
          
          <creation_ts>2016-07-26 01:03:28 +0000</creation_ts>
          <short_desc>The SMRAM allocated in FindSmramInfo() can be freed.</short_desc>
          <delta_ts>2016-11-16 03:04:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="Jeff Fan">vanjeff_919</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>star.zeng</cc>
    
    <cc>vanjeff_919</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>384</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2016-07-26 01:03:28 +0000</bug_when>
    <thetext>SMRAM is critical system resource, it should be used sparely.
The SMRAM allocated in FindSmramInfo() can be freed to save SMRAM consumption.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>392</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-07-28 20:36:15 +0000</bug_when>
    <thetext>Bug Scrub: Assign to Jeff</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>954</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2016-11-16 03:04:32 +0000</bug_when>
    <thetext>Commit in:
https://github.com/tianocore/edk2/commit/e242cdfb307a6dfe2c0f75c4719f5c1f6b418625</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>454</bug_id>
          
          <creation_ts>2017-03-31 21:58:01 +0000</creation_ts>
          <short_desc>VfrCompiler doesn&apos;t support IMAGE_TOKEN in image syntax</short_desc>
          <delta_ts>2017-04-05 23:39:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>448</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1718</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-03-31 21:58:01 +0000</bug_when>
    <thetext>In VFR syntax, image can be assigned to ImageId with IMAGE_TOKEN. It is not supported. edk2 community reports this issue. Meanwhile, VFR doc is also required to be updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1719</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-03-31 21:58:57 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1744</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-04-05 23:39:21 +0000</bug_when>
    <thetext>This issue is the same with 
https://bugzilla.tianocore.org/show_bug.cgi?id=448

*** This bug has been marked as a duplicate of bug 448 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>819</bug_id>
          
          <creation_ts>2017-12-20 00:51:45 +0000</creation_ts>
          <short_desc>Need remove Test App from CryptoPkg</short_desc>
          <delta_ts>2017-12-26 14:16:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3250</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-12-20 00:51:45 +0000</bug_when>
    <thetext>CryptoPkg\Application\Cryptest is only for unit test.

It should not be in a core package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3259</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-21 19:05:28 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3271</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-12-26 14:16:23 +0000</bug_when>
    <thetext>Resolved by the commit: 4a75acbed352c43dbb01d32d4d0afcb28eb128e3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>730</bug_id>
          
          <creation_ts>2017-10-06 19:05:48 +0000</creation_ts>
          <short_desc>ShellLib: InternalShellIsHexOrdecimalNumber should return FALSE if a string contains &quot;-&quot; only</short_desc>
          <delta_ts>2018-02-15 01:15:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>vladimir.olovyannikov</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2835</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2017-10-06 19:05:48 +0000</bug_when>
    <thetext>Found this while implementing a simple Rpn calculator in edk2.
Rpncalc accepts input in RPN notation and returns result.
for 5 - 1 it would be 5 1 -
rpncalc 5 1 -
should return 4. However, because of the bug in the InternalShellIsHexOrDecimalNumber() in UefiShellLib.c, the string L&quot;-&quot; is treated as a number, and the logic does not work. 
This is because line 3627
if (String == NULL) {
should actually be 
if (String == NULL || (*String == CHAR_NULL)) {
Then if it was &quot;-&quot; only, it would return FALSE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2865</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-12 20:06:00 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3597</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-02-15 01:15:31 +0000</bug_when>
    <thetext>pushed @ master ee33344c595709ef7642c52d27a16f21e692b856
@ UDK2018 99239d7098d747fa49b77c08ce3bca071b93cceb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>194</bug_id>
          
          <creation_ts>2016-10-30 21:08:10 +0000</creation_ts>
          <short_desc>[UefiPxeBcDxe] Possible NULL pointer dereference in EfiPxeBcSetStationIP()</short_desc>
          <delta_ts>2016-11-10 00:15:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>796</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-10-30 21:08:10 +0000</bug_when>
    <thetext>There are possible NULL pointer dereference (NewSubnetMask) in EfiPxeBcSetStationIP() within the following two files:
MdeModulePkg\Universal\Network\UefiPxeBcDxe\PxeBcImpl.c (line 2321)
2317  if (NewSubnetMask != NULL &amp;&amp; !IP4_IS_VALID_NETMASK (NTOHL (NewSubnetMask-&gt;Addr[0]))) {
2318    return EFI_INVALID_PARAMETER;
2319  }
2320  
2321  if (NewStationIp != NULL &amp;&amp; !NetIp4IsUnicast (NTOHL (NewStationIp-&gt;Addr[0]), NTOHL (NewSubnetMask-&gt;Addr[0]))) {
2322    return EFI_INVALID_PARAMETER;
2323  }


NetworkPkg\UefiPxeBcDxe\PxeBcImpl.c (line 2016):
2010  if (!Mode-&gt;UsingIpv6 &amp;&amp;
2011    NewSubnetMask != NULL &amp;&amp;
2012    !IP4_IS_VALID_NETMASK (NTOHL (NewSubnetMask-&gt;Addr[0]))) {
2013    return EFI_INVALID_PARAMETER;
2014  }
2015  
2016  if (!Mode-&gt;UsingIpv6 &amp;&amp; NewStationIp != NULL &amp;&amp; !NetIp4IsUnicast (NTOHL (NewStationIp-&gt;Addr[0]), NTOHL (NewSubnetMask-&gt;Addr[0]))) {
2017    return EFI_INVALID_PARAMETER;
2018  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>835</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-03 20:06:34 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>870</commentid>
    <comment_count>2</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2016-11-10 00:15:58 +0000</bug_when>
    <thetext>SHA-1: b3400560603bcfaadc08e82a846933446b5afed3
SHA-1: e86f363564e79dc719bbeed8ce87271b2972f55d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>107</bug_id>
          
          <creation_ts>2016-08-29 00:41:54 +0000</creation_ts>
          <short_desc>Ping/Ping6: Update to use UEFI Timers instead of gEfiCpuArchProtocolGuid</short_desc>
          <delta_ts>2017-02-28 20:34:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nagaraj Hegde">nagaraj-p.hegde</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jaben.carsey</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>nagaraj-p.hegde</cc>
    
    <cc>ray.ni</cc>
    
    <cc>ting.ye</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>456</commentid>
    <comment_count>0</comment_count>
    <who name="Nagaraj Hegde">nagaraj-p.hegde</who>
    <bug_when>2016-08-29 00:41:54 +0000</bug_when>
    <thetext>I agree with Ray, a timer may not as accurate as the CPU time tick, but it should be enough for the ping command.

Siyuan

From: Hegde, Nagaraj P [mailto:nagaraj-p.hegde@hpe.com] 
Sent: Monday, August 29, 2016 12:09 PM
To: Ni, Ruiyu &lt;ruiyu.ni@intel.com&gt;; Fu, Siyuan &lt;siyuan.fu@intel.com&gt;
Cc: Subramanian, Sriram (EG Servers Platform SW) &lt;sriram-s@hpe.com&gt;; Augustine, Linson P &lt;linson.augustine@hpe.com&gt;; Ye, Ting &lt;ting.ye@intel.com&gt;; Wu, Jiaxin &lt;jiaxin.wu@intel.com&gt;; Carsey, Jaben &lt;jaben.carsey@intel.com&gt;
Subject: RE: Update Ping/ping6 to use TimerLib instead of gEfiCpuArchProtocolGuid

Hi All,

Do we have a consensus so that we can file a Bugzilla report and close this thread?

Regards,
Nagaraj.

From: Ni, Ruiyu [mailto:ruiyu.ni@intel.com] 
Sent: Wednesday, August 24, 2016 10:34 AM
To: Fu, Siyuan &lt;siyuan.fu@intel.com&gt;
Cc: Subramanian, Sriram (EG Servers Platform SW) &lt;sriram-s@hpe.com&gt;; Augustine, Linson P &lt;linson.augustine@hpe.com&gt;; Hegde, Nagaraj P &lt;nagaraj-p.hegde@hpe.com&gt;; Ye, Ting &lt;ting.ye@intel.com&gt;; Wu, Jiaxin &lt;jiaxin.wu@intel.com&gt;; Carsey, Jaben &lt;jaben.carsey@intel.com&gt;
Subject: RE: Update Ping/ping6 to use TimerLib instead of gEfiCpuArchProtocolGuid

Can you create a timer event which triggers every 100ns when ping sends out a packet? After the ping receives the echo packet, it can report the time by counting how many times the timer is triggered.

Thanks/Ray

From: Fu, Siyuan 
Sent: Wednesday, August 24, 2016 12:59 PM
To: Ni, Ruiyu &lt;ruiyu.ni@intel.com&gt;
Cc: Subramanian, Sriram (EG Servers Platform SW) &lt;sriram-s@hpe.com&gt;; Augustine, Linson P &lt;linson.augustine@hpe.com&gt;; Hegde, Nagaraj P &lt;nagaraj-p.hegde@hpe.com&gt;; Ye, Ting &lt;ting.ye@intel.com&gt;; Wu, Jiaxin &lt;jiaxin.wu@intel.com&gt;; Carsey, Jaben &lt;jaben.carsey@intel.com&gt;
Subject: RE: Update Ping/ping6 to use TimerLib instead of gEfiCpuArchProtocolGuid

Hi, Ray

Ping command need to calculate the round trip time (RTT) in milliseconds, and it need to poll the device to receive the reply message. I guess that’s why it does not use Stall and GetTime service.

Siyuan

From: Ni, Ruiyu 
Sent: Wednesday, August 24, 2016 12:44 PM
To: Fu, Siyuan &lt;siyuan.fu@intel.com&gt;
Cc: Subramanian, Sriram (EG Servers Platform SW) &lt;sriram-s@hpe.com&gt;; Augustine, Linson P &lt;linson.augustine@hpe.com&gt;; Hegde, Nagaraj P &lt;nagaraj-p.hegde@hpe.com&gt;; Ye, Ting &lt;ting.ye@intel.com&gt;; Wu, Jiaxin &lt;jiaxin.wu@intel.com&gt;; Carsey, Jaben &lt;jaben.carsey@intel.com&gt;
Subject: RE: Update Ping/ping6 to use TimerLib instead of gEfiCpuArchProtocolGuid

Siyuan,
Can ping/ping6 use gBS-&gt;Stall() or Timer event which is pure UEFI service to check the timeout?

Thanks/Ray

From: Fu, Siyuan 
Sent: Wednesday, August 24, 2016 8:56 AM
To: Ni, Ruiyu &lt;ruiyu.ni@intel.com&gt;
Cc: Subramanian, Sriram (EG Servers Platform SW) &lt;sriram-s@hpe.com&gt;; Augustine, Linson P &lt;linson.augustine@hpe.com&gt;; Hegde, Nagaraj P &lt;nagaraj-p.hegde@hpe.com&gt;; Ye, Ting &lt;ting.ye@intel.com&gt;; Wu, Jiaxin &lt;jiaxin.wu@intel.com&gt;; Carsey, Jaben &lt;jaben.carsey@intel.com&gt;
Subject: RE: Update Ping/ping6 to use TimerLib instead of gEfiCpuArchProtocolGuid

Loop in Ray who is the ShellPkg owner.

Ray,

The TimerLib I think, should be a platform specific library? While the CPU arch protocol is a PI protocol, I don’t know which one is better for a shell command, what’s your opinion?

Best Regards
Siyuan

From: Hegde, Nagaraj P [mailto:nagaraj-p.hegde@hpe.com] 
Sent: Tuesday, August 23, 2016 6:17 PM
To: Ye, Ting &lt;ting.ye@intel.com&gt;; Fu, Siyuan &lt;siyuan.fu@intel.com&gt;; Wu, Jiaxin &lt;jiaxin.wu@intel.com&gt;; Carsey, Jaben &lt;jaben.carsey@intel.com&gt;
Cc: Subramanian, Sriram (EG Servers Platform SW) &lt;sriram-s@hpe.com&gt;; Augustine, Linson P &lt;linson.augustine@hpe.com&gt;
Subject: Update Ping/ping6 to use TimerLib instead of gEfiCpuArchProtocolGuid

Hi Siyuan, Ting, Jiaxin, Jaben,

Ping/ping6 has been using gEfiCpuArchProtocolGuid to get the current timer tick and CPU frequency. We could have buggy platform implementation, which would lead GetTimerValue to return a 0, leaving ping with a crash (divide by zero). We have TimerLib APIs (GetPerformanceCounter and GetPerformanceCounterProperties respectively) to reliably get the current timer tick and frequency. We feel using TimerLib would be a better implementation (less buggy ) for Ping command.

Please let me know your opinion. If you agree, will send out a git patch  for review.

Regards,
Nagaraj.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>461</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-01 20:22:36 +0000</bug_when>
    <thetext>Bug Scrub: Use a UEFI timer event, assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>583</commentid>
    <comment_count>2</comment_count>
    <who name="Nagaraj Hegde">nagaraj-p.hegde</who>
    <bug_when>2016-10-12 03:00:33 +0000</bug_when>
    <thetext>Siyuan/Ting, any update when the changes are planned for EDK2 trunk?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1551</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2017-02-28 20:34:59 +0000</bug_when>
    <thetext>Patch committed to edk2:
SHA-1: 825f09b7621624b7ce68a629371ea64a26560cfb
SHA-1: 2a3263303b5131e9e2cdb7106e17fc4c28b5c4b3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>470</bug_id>
          
          <creation_ts>2017-04-11 21:47:09 +0000</creation_ts>
          <short_desc>ConsistMapping confuses StrLen and StrSize</short_desc>
          <delta_ts>2017-04-17 22:27:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1792</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-04-11 21:47:09 +0000</bug_when>
    <thetext>In ShellPkg\Library\UefiShellCommandLib\ConsistMapping.c, near line 128, it sets structure POOL_PRINT.Len to a size based on StrSize (size in bytes of a CHAR16 string).

Later, near line 1670, it uses POOL_PRINT.Len as if it were based on StrLen and multiplies it by sizeof(CHAR16).  With a memory pool checker, consistent mappings longer than a few bytes will cause an overrun to be detected.

A possible fix:

@@ -1665,16 +1665,16 @@ ShellCommandConsistMappingGenMappingName (
   if (EFI_ERROR (Status)) {
     SHELL_FREE_NON_NULL (Str.Str);
     return NULL;
   }
   
-  NewStr = ReallocatePool (Str.Len * sizeof (CHAR16), (Str.Len + 1) * sizeof (CHAR16), Str.Str);
+  NewStr = ReallocatePool (Str.Len, Str.Len + sizeof (CHAR16), Str.Str);
   if (NewStr == NULL) {
     SHELL_FREE_NON_NULL (Str.Str);
     return (NULL);
   }

-  NewStr[Str.Len] = CHAR_NULL;
+  NewStr[Str.Len / sizeof(CHAR16) ] = CHAR_NULL;
   return NewStr;
 }

 /**
   Function to search the list of mappings for the node on the list based on the key.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1806</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2017-04-13 17:56:01 +0000</bug_when>
    <thetext>After reviewing the code, I suggest not trying to add a NULL to the end of the CatPrint produced string.  It isn&apos;t necessary, and was being added in the wrong place anyway.

Just return Str.Str and delete the ReallocateMemory and all things NewStr.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1809</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-13 20:05:24 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1841</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-04-17 22:27:44 +0000</bug_when>
    <thetext>pushed @ 17c3dc19395121486c6f1614dbc564f39763720a in master
pushed @ cbdde352d1a5855455a93482ee14c0b9d356220f in UDK2017</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>384</bug_id>
          
          <creation_ts>2017-02-15 23:02:04 +0000</creation_ts>
          <short_desc>[PciBus] IA32 build failure with latest PciBusDxe</short_desc>
          <delta_ts>2017-02-17 04:02:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="jiaxinwu">jiaxin.wu</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1457</commentid>
    <comment_count>0</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-02-15 23:02:04 +0000</bug_when>
    <thetext>IA32 build failure with the below commit for the PciBusDxe:
https://github.com/tianocore/edk2/commit/8a93fa1efb24022ac7fea1b725944f962ba9d4c9

PciBusDxe.lib(PciEnumeratorSupport.obj) : error LNK2001: unresolved external symbol __allmul</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1459</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-16 19:04:34 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1469</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-02-17 04:02:11 +0000</bug_when>
    <thetext>pushed @ eb470e05a3c7c251cfa50863ea119ba70e9777a3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>745</bug_id>
          
          <creation_ts>2017-10-24 04:54:41 +0000</creation_ts>
          <short_desc>ifconfig fails to get an IP address</short_desc>
          <delta_ts>2018-08-14 23:42:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2919</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-10-24 04:54:41 +0000</bug_when>
    <thetext>[Issue]
ifconfig fails to get an IP address on giving &apos;ifconfig -s ethX dhcp&apos;

[Issue Details]
We have observed an issue which is ifconfig fails to get an IP address on giving &apos;ifconfig -s ethX dhcp&apos;
The issue is observed with both 1Gbe and 10Gbe ethernet cards.

1. Used latest Purley source
2. DISCOVER packet is also NOT sent on giving the command.
3. Tried with default MAC and with configuring the MAC address. In both the cases, the result is same (no IP assigned).


Thanks,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2952</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-26 20:13:16 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner to investigate first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2965</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-11-01 04:32:27 +0000</bug_when>
    <thetext>Hi Karunakar,

The issue is not existed with latest network driver. So, I&apos;d like to know which IP driver version of your Purley source code? 

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3040</commentid>
    <comment_count>3</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-11-13 04:30:34 +0000</bug_when>
    <thetext>
Please find the below details for Purley source code

Tag: BKC/2017.WW39
object 5daccc91cecf3874dc73379570d29c823003e222
type commit
tag BKC/2017.WW39
tagger DCPAE BEE &lt;dcpae.bee@intel.com&gt; 1506033595 -0700


Tag: ID/147.R15
object 5daccc91cecf3874dc73379570d29c823003e222
type commit
tag ID/147.R15
tagger DCPAE BEE &lt;dcpae.bee@intel.com&gt; 1506033308 -0700


Thanks,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3075</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-11-15 19:43:52 +0000</bug_when>
    <thetext>Hi Karunakar,

I think the version you provided doesn&apos;t belong to EDK2 Trunk or UDK XXXX released code base. But I guess your Purley source code should be using old one and released from other branch.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4580</commentid>
    <comment_count>5</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-08-14 23:42:14 +0000</bug_when>
    <thetext>Closed since it&apos;s not bug in trunk.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>298</bug_id>
          
          <creation_ts>2016-12-16 03:07:22 +0000</creation_ts>
          <short_desc>Create a EfiEventEmptyFunction() function in UefiLib to remove the duplication</short_desc>
          <delta_ts>2017-01-21 21:13:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
    
    <cf_package>CorebootPayloadPkg</cf_package>
    
    <cf_package>IntelFrameworkModulePkg</cf_package>
    
    <cf_package>IntelFrameworkPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>QuarkPlatformPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1179</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2016-12-16 03:07:22 +0000</bug_when>
    <thetext>Did a rough search to EDK2 codebase and found there are many event empty functions in the code. Here to propose creating a EfiEventEmptyFunction() function in UefiLib to remove the duplication.

InternalEmptyFunction(): MdePkg\Library\UefiLib\UefiLib.c
InternalEmptyFunction(): IntelFrameworkPkg\Library\FrameworkUefiLib\UefiLib.c
ConSplitterEmptyCallbackFunction():MdeModulePkg\Universal\Console\ConSplitterDxe\ConSplitter.c
CoreEmptyCallbackFunction():MdeModulePkg\Core\Dxe\Dispatcher\Dispatcher.c
BdsEmptyCallBackFunction(): IntelFrameworkModulePkg\Universal\BdsDxe\BdsEntry.c
BmEmptyFunction(): MdeModulePkg\Library\UefiBootManagerLib\BmHotKey.c
SetupBrowserEmptyFunction(): MdeModulePkg\Universal\SetupBrowserDxe\Presentation.c
DriverSampleInternalEmptyFunction: MdeModulePkg\Universal\DriverSampleDxe\DriverSample.c
EmptyCallBackFunction(): ArmPlatformPkg\Library\PlatformIntelBdsLib\IntelBdsPlatform.c
InternalBdsEmptyCallbackFuntion():
  CorebootPayloadPkg\Library\PlatformBootManagerLib\PlatformBootManager.c
  QuarkPlatformPkg\Library\PlatformBootManagerLib\PlatformBootManager.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1207</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-22 19:24:17 +0000</bug_when>
    <thetext>Bug scrub: Assign to Star</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1349</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-01-20 03:04:35 +0000</bug_when>
    <thetext>I have pushed the patches at https://github.com/tianocore/edk2/compare/058cd03b5857...9c8fe63c15d6 for MdePkg, IntelFrameworkPkg, MdeModulePkg, IntelFrameworkModulePkg, CorebootPayloadPkg and ArmPlatformPkg with RB received.
And I will keep QuarkPlatformPkg as is before I get any RB.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1350</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-01-21 21:13:34 +0000</bug_when>
    <thetext>Leave QuarkPlatformPkg as is since no any RB is received.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>127</bug_id>
          
          <creation_ts>2016-09-20 23:23:41 +0000</creation_ts>
          <short_desc>Possibly stale DNS server data retained after switch from Dhcp to Static</short_desc>
          <delta_ts>2016-09-26 09:39:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nagaraj Hegde">nagaraj-p.hegde</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>nagaraj-p.hegde</cc>
    
    <cc>sriram-s</cc>
    
    <cc>ting.ye</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>502</commentid>
    <comment_count>0</comment_count>
    <who name="Nagaraj Hegde">nagaraj-p.hegde</who>
    <bug_when>2016-09-20 23:23:41 +0000</bug_when>
    <thetext>In section 27.5, EFI IPv4 Configuration II Protocol, for EFI_IP4_CONFIG2_PROTOCOL, I see this paragraph for SetData:

The configuration data of type Ip4Config2DataTypeManualAddress,
Ip4Config2DataTypeGateway and Ip4Config2DataTypeDnsServer will be flushed if
the policy is changed from Ip4Config2PolicyStatic to Ip4Config2PolicyDhcp.

Let’s day we configure the interface for dhcp via ifconfig first. DNS server data will be updated via SetData () calls. Now, via ifconfig, we set the interface to Static policy and provide just IP, subnet and Gateway. So, in this case, DNS server data will continue to hold the values provided from the previous dhcp configuration, which could be stale.

We should consider clearing data for Dhcp to Static also. This might also exist in Ip6Config Protocol.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>505</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2016-09-21 03:25:20 +0000</bug_when>
    <thetext>The Ip6Config Protocol has the same issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>513</commentid>
    <comment_count>2</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-22 20:20:35 +0000</bug_when>
    <thetext>Bug Scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>524</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2016-09-26 09:39:33 +0000</bug_when>
    <thetext>Fixed version:

SHA-1: 24b41b75f883a948f6844e455b9de020e23c72d4

* MdeModulePkg: Clean the previous address since the policy changed


SHA-1: 00df35fe4146b6ceb39bf55df1fabec955cd08a6

* NetworkPkg: Clean the previous address since the policy changed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>128</bug_id>
          
          <creation_ts>2016-09-21 05:24:04 +0000</creation_ts>
          <short_desc>[BaseTools] Add Library inf with uni file in [Source] section in FDF,  build report Traceback  error</short_desc>
          <delta_ts>2016-11-14 02:28:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>506</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-21 05:24:04 +0000</bug_when>
    <thetext>Add the Library inf with uni file in [Source] section into FDF file, then build it, it would report Traceback  error.
eg: MdeModulePkg\Library\BootManagerUiLib\BootManagerUiLib.inf

We should enhance the error message.


GenFds.py...
 : error C0DE: Tools code failure
	Please send email to edk2-devel@lists.01.org for help, attaching following call stack trace!

Traceback (most recent call last):
  File &quot;C:\Ap_bak\BaseTools\Source\Python\GenFds\GenFds.py&quot;, line 307, in main
    GenFds.GenFd(&apos;&apos;, FdfParserObj, BuildWorkSpace, ArchList)
  File &quot;C:\Ap_bak\BaseTools\Source\Python\GenFds\GenFds.py&quot;, line 553, in GenFd
    FdObj.GenFd()
  File &quot;C:\Ap_bak\BaseTools\Source\Python\GenFds\Fd.py&quot;, line 93, in GenFd
    RegionObj.AddToBuffer (TempFdBuffer, self.BaseAddress, self.BlockSizeList, self.ErasePolarity, GenFds.ImageBinDict, self.vtfRawDict, self.DefineVarDict)
  File &quot;C:\Ap_bak\BaseTools\Source\Python\GenFds\Region.py&quot;, line 127, in AddToBuffer
    FvObj.AddToBuffer(FvBuffer, FvBaseAddress, BlockSize, BlockNum, ErasePolarity, vtfDict)
  File &quot;C:\Ap_bak\BaseTools\Source\Python\GenFds\Fv.py&quot;, line 115, in AddToBuffer
    FileName = FfsFile.GenFfs(MacroDict, FvParentAddr=BaseAddress)
  File &quot;C:\Ap_bak\BaseTools\Source\Python\GenFds\FfsInfStatement.py&quot;, line 480, in GenFfs
    InputSectList, InputSectAlignments = self.__GenComplexFileSection__(Rule, FvChildAddr, FvParentAddr)
  File &quot;C:\Ap_bak\BaseTools\Source\Python\GenFds\FfsInfStatement.py&quot;, line 948, in __GenComplexFileSection__
    self.__GenUniVfrOffsetFile (VfrUniOffsetList, UniVfrOffsetFileName)
  File &quot;C:\Ap_bak\BaseTools\Source\Python\GenFds\FfsInfStatement.py&quot;, line 1052, in __GenUniVfrOffsetFile
    for Item in VfrUniOffsetList:
TypeError: &apos;NoneType&apos; object is not iterable</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>510</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-09-21 21:09:30 +0000</bug_when>
    <thetext>conf case.enhance the error message.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>522</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-09-24 20:23:41 +0000</bug_when>
    <thetext>fix it on 587e9dfbbafe7d4e772c1870b8c880c6d7a8a70c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>487</bug_id>
          
          <creation_ts>2017-04-14 11:49:24 +0000</creation_ts>
          <short_desc>UndiRuntimeDxe module fails in Linux due to incorrect ABI/calling convention</short_desc>
          <delta_ts>2017-04-23 22:15:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="RickF">rfarrington</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          <cf_package>OptionRomPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1829</commentid>
    <comment_count>0</comment_count>
    <who name="RickF">rfarrington</who>
    <bug_when>2017-04-14 11:49:24 +0000</bug_when>
    <thetext>When compiled under Linux, the OptionRomPkg/UndiRuntimeDxe module will not work due to the UNDI Entry Point being compiled with the incorrect Application Binary Interface (ABI).

Both the function declaration and definition for &apos;UNDI_APIEntry_new&apos; are missing the macro &apos;EFIAPI&apos;.

This does not cause a problem when compiled under Windows because the default ABI is the Microsoft ABI.
However, under Linux GCC, without this attribute, the code is compiled using the SystemV ABI.

Since all UEFI modules use the Microsoft ABI, when this function is invoked by the network stack, the code does not work properly (when compiled in Linux) due to differences in the calling convention (ABI).  

Specifically, the first (and only) parameter is not accessed correctly because:

  - The caller (using MS ABI) passed a value in [reg] RXC
  - The UndiRuntimeDxe module (using SystemV ABI) expected a value in [reg] RDI

NOTE: aforementioned registers are on x86-64 platform.

I have attached a patch which corrects this problem.

Examination of the dis-assembled code from before and after this patch will illustrate the problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1830</commentid>
    <comment_count>1</comment_count>
      <attachid>53</attachid>
    <who name="RickF">rfarrington</who>
    <bug_when>2017-04-14 11:51:00 +0000</bug_when>
    <thetext>Created attachment 53
fixes UNDI entry point calling convention (ABI)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1891</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-20 20:14:46 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1900</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2017-04-23 22:15:33 +0000</bug_when>
    <thetext>SHA-1: 176eb3a17e79644a4abf1d2612e03166c4692e17

* OptionRomPkg: Fix calling convention issue for UndiRuntiumeDxe driver.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>53</attachid>
            <date>2017-04-14 11:51:00 +0000</date>
            <delta_ts>2017-04-14 11:51:00 +0000</delta_ts>
            <desc>fixes UNDI entry point calling convention (ABI)</desc>
            <filename>fix_for_UndiRuntimeDxe_bad_ABI.patch</filename>
            <type>application/octet-stream</type>
            <size>825</size>
            <attacher name="RickF">rfarrington</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>406</bug_id>
          
          <creation_ts>2017-02-24 00:54:27 +0000</creation_ts>
          <short_desc>[OpensslLib] Upgrade OpenSSL version in CryptoPkg to the latest 1.0.2k.</short_desc>
          <delta_ts>2017-03-05 20:04:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Qin Long">qin.long</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1531</commentid>
    <comment_count>0</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-02-24 00:54:27 +0000</bug_when>
    <thetext>OpenSSL 1.0.2k was released with several severity fixes at
26-Jan-2017 (https://www.openssl.org/news/secadv/20170126.txt).

This request is to upgrade the supported OpenSSL version in
CryptoPkg/OpensslLib to catch the latest release 1.0.2k.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1567</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-02 19:12:58 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1582</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-03-05 20:04:33 +0000</bug_when>
    <thetext>Commit:
https://github.com/tianocore/edk2/commit/14e3b94964ae953b6e1dbc672218edf5e5b26bbe</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>593</bug_id>
          
          <creation_ts>2017-06-14 10:55:58 +0000</creation_ts>
          <short_desc>SmmLockBoxDxeLib uses stack for COMM buffer</short_desc>
          <delta_ts>2017-07-26 04:23:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Baranee">anbazhagan</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2272</commentid>
    <comment_count>0</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2017-06-14 10:55:58 +0000</bug_when>
    <thetext>SmmCommunciate fails in RestoreLockBox since COMM buffer is in stack instead of using gEdkiiPiSmmCommunicationRegionTableGuid</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2274</commentid>
    <comment_count>1</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-06-14 22:28:06 +0000</bug_when>
    <thetext>We agree it is a bug.
The SmmCommunication failure will only happen at after SmmReadyToLock as the check for invalid SmmCommunication buffer will start effect at after SmmReadyToLock.
SaveLockBox/SetLockBoxAttributes/UpdateLockBox in SmmLockBoxDxeLib will fail with EFI_ACCESS_DENIED at after SmmReadyToLock on purpose for security consideration. But 
RestoreLockBox/RestoreAllLockBoxInPlace in SmmLockBoxDxeLib will fail by the SmmCommunication buffer check in SmmMemLib or SMM Comm Buffer Paging Protection in PiSmmCpuDxeSmm, that is unexpected.


We did not see the case that uses RestoreLockBox/RestoreAllLockBoxInPlace in SmmLockBoxDxeLib to restore lockbox before, especially at after SmmReadyToLock. To clarify the severity of the problem, what is the case you met? Could it be done at before SmmReadyToLock?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2285</commentid>
    <comment_count>2</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2017-06-15 15:12:42 +0000</bug_when>
    <thetext>I understand we cannot update or modify LockBox from DXE module once ReadyToLock is triggered. My use case to do some processing within SMM and pass that result to BDS phase, especially once console is available.

I could achieve the same thing using BootService variable, then i have to add VarCheck handler to protect that variable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2286</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-06-15 18:44:39 +0000</bug_when>
    <thetext>If that is the case, you do not add VarCheck handler, you just need use VarLock protocol to lock it.

Below piece of code can achieve that.

      //
      // Mark XXX to read-only if the Variable Lock protocol exists
      //
      Status = gBS-&gt;LocateProtocol(&amp;gEdkiiVariableLockProtocolGuid, NULL, (VOID **)&amp;VariableLock);
      if (!EFI_ERROR(Status)) {
        Status = VariableLock-&gt;RequestToLock(VariableLock, L&quot;XXX&quot;, &amp;gXXXGuid);
        ASSERT_EFI_ERROR(Status);
      }


That is the standard way to lock a variable. See below usage in MdeModulePkg.

  C:\home\EdkIIGit\edk2\MdeModulePkg\Library\DxeCapsuleLibFmp\DxeCapsuleReportLib.c(278):    Status = gBS-&gt;LocateProtocol(&amp;gEdkiiVariableLockProtocolGuid, NULL, (VOID **)&amp;VariableLock);
  C:\home\EdkIIGit\edk2\MdeModulePkg\Library\DxeCapsuleLibFmp\DxeCapsuleReportLib.c(353):    Status = gBS-&gt;LocateProtocol(&amp;gEdkiiVariableLockProtocolGuid, NULL, (VOID **)&amp;VariableLock);
  C:\home\EdkIIGit\edk2\MdeModulePkg\Library\UefiBootManagerLib\BmLoadOption.c(245):    Status = gBS-&gt;LocateProtocol (&amp;gEdkiiVariableLockProtocolGuid, NULL, (VOID **) &amp;VariableLock);
  C:\home\EdkIIGit\edk2\MdeModulePkg\Universal\BdsDxe\BdsEntry.c(675):    Status = gBS-&gt;LocateProtocol (&amp;gEdkiiVariableLockProtocolGuid, NULL, (VOID **) &amp;VariableLock);
  C:\home\EdkIIGit\edk2\MdeModulePkg\Universal\BdsDxe\BdsEntry.c(755):  Status = gBS-&gt;LocateProtocol (&amp;gEdkiiVariableLockProtocolGuid, NULL, (VOID **) &amp;VariableLock);
  C:\home\EdkIIGit\edk2\MdeModulePkg\Universal\CapsuleRuntimeDxe\X64\SaveLongModeContext.c(95):  Status = gBS-&gt;LocateProtocol (&amp;gEdkiiVariableLockProtocolGuid, NULL, (VOID **) &amp;VariableLock);
  C:\home\EdkIIGit\edk2\MdeModulePkg\Universal\CapsuleRuntimeDxe\X64\SaveLongModeContext.c(188):        &amp;gEdkiiVariableLockProtocolGuid,
  C:\home\EdkIIGit\edk2\MdeModulePkg\Universal\EsrtDxe\EsrtDxe.c(491):  Status = gBS-&gt;LocateProtocol (&amp;gEdkiiVariableLockProtocolGuid, NULL, (VOID **) &amp;VariableLock);
  C:\home\EdkIIGit\edk2\MdeModulePkg\Universal\PCD\Dxe\Pcd.c(171):    &amp;gEdkiiVariableLockProtocolGuid,
  C:\home\EdkIIGit\edk2\MdeModulePkg\Universal\PCD\Dxe\Service.c(2002):  Status = gBS-&gt;LocateProtocol (&amp;gEdkiiVariableLockProtocolGuid, NULL, (VOID **) &amp;VariableLock);
  


Lock box is a design for S3 in most case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2287</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-15 20:04:55 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2289</commentid>
    <comment_count>5</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2017-06-15 20:06:15 +0000</bug_when>
    <thetext>Thanks for providing alternate approach. If there is no plan to support RestoreLockBox in BDS phase, I would suggest to update return status as unsupported in SmmLockBoxDxeLib once ReadyToLock is reached.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2291</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-06-15 21:12:07 +0000</bug_when>
    <thetext>I just want to clarify the usage here, and an alternative solution for your consideration to see if that can resolve the problem in another way.

I think this is valid bug in lockbox library, and we need do fix the issue anyway.

We know some known limitation on both SmmLockBox and ReadOnlyVariable, such as:
1) SmmLockBox cannot be used before SMRAM is ready.
2) ReadOnlyVariable size cannot be too big.

That is why we purposely choose SmmLockBox for some cases, and ReadOnlyVariable for another cases. It is a balance.


Again, thanks to catch this bug and report back.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2292</commentid>
    <comment_count>7</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2017-06-15 21:25:21 +0000</bug_when>
    <thetext>Thanks for explaining limitations of LockBox and Variables. Will validate the fix, once it&apos;s available.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2505</commentid>
    <comment_count>8</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-07-26 04:23:16 +0000</bug_when>
    <thetext>Fixed at b926a05bb93705fc2b59b50c55099353bd1ac49f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>878</bug_id>
          
          <creation_ts>2018-02-22 14:39:53 +0000</creation_ts>
          <short_desc>enhance VfrCompiler tool to recognize more C syntax</short_desc>
          <delta_ts>2019-09-10 18:42:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Leif Lindholm">quic_llindhol</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3617</commentid>
    <comment_count>0</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2018-02-22 14:39:53 +0000</bug_when>
    <thetext>Most of the existing .vfr examples currently duplicate a set of EFI_VARIABLE_ #defines because MdePkg/Include/Uefi/UefiMultiPhase.h (which defines these) also includes syntax not supported by vfrcompile.

While we can work around this for now by filtering most of that file out if VFRCOMPILE is set, it would potentially be useful to support the currently problematic elements: enums and GUIDs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3644</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-28 20:06:35 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9323</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:06:23 +0000</bug_when>
    <thetext>This BZ was filed as a reminder spin-off from commit 8bbb56b485ba (&quot;MdePkg: restrict UefiMultiPhase.h contents if VFRCOMPILE defined&quot;, 2018-02-23).

In one and half years, nothing has been done. Personally I&apos;m not saying that that is necessarily wrong. But can we please make up our minds and decide if we&apos;ll reject the feature request or address it? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9347</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:44:15 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; This BZ was filed as a reminder spin-off from commit 8bbb56b485ba (&quot;MdePkg:
&gt; restrict UefiMultiPhase.h contents if VFRCOMPILE defined&quot;, 2018-02-23).
&gt; 
&gt; In one and half years, nothing has been done. Personally I&apos;m not saying that
&gt; that is necessarily wrong. But can we please make up our minds and decide if
&gt; we&apos;ll reject the feature request or address it? Thanks.

Dandan -- can you please offer an opinion? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9350</commentid>
    <comment_count>4</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-08-27 21:12:59 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; (In reply to Laszlo Ersek from comment #2)
&gt; &gt; This BZ was filed as a reminder spin-off from commit 8bbb56b485ba (&quot;MdePkg:
&gt; &gt; restrict UefiMultiPhase.h contents if VFRCOMPILE defined&quot;, 2018-02-23).
&gt; &gt; 
&gt; &gt; In one and half years, nothing has been done. Personally I&apos;m not saying that
&gt; &gt; that is necessarily wrong. But can we please make up our minds and decide if
&gt; &gt; we&apos;ll reject the feature request or address it? Thanks.
&gt; 
&gt; Dandan -- can you please offer an opinion? Thanks.

Hi Laszlo,

Currently I don&apos;t see the real use case that we need to use the type like enum in VFR. In my opinion, we can add the support when there is real use case.
So I prefer to reject this feature request for now.

I&apos;m sorry that I didn&apos;t express my opinions for this feature request before.



Thanks,
Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9393</commentid>
    <comment_count>5</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-08-29 06:47:29 +0000</bug_when>
    <thetext>Adding Liming to cc, since ticket was raised based on https://edk2.groups.io/g/devel/message/19233.

I have not so far come across more cases needing workarounds, so perhaps this is not important.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9573</commentid>
    <comment_count>6</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-09-10 18:42:19 +0000</bug_when>
    <thetext>Limning, please see above comments.

I will close this as WONTFIX and we can reopen it as use cases become evident.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>787</bug_id>
          
          <creation_ts>2017-11-16 23:46:56 +0000</creation_ts>
          <short_desc>BaseTools: build report failure when single module build with GenC or GenMake option</short_desc>
          <delta_ts>2017-11-20 07:54:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3092</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-16 23:46:56 +0000</bug_when>
    <thetext>when build a single module (-m) with GenC or GenMake option, build would report failure.

error message:
Module for [IA32] is not a component of active platform. Please make sure that the ARCH and inf file path are given in the same as xxx.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3093</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-16 23:47:39 +0000</bug_when>
    <thetext>take it. the patch already be sent out for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3102</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-20 07:54:38 +0000</bug_when>
    <thetext>fixed by SHA-1: b8c6c545385da1fec9f0851e2d4f1b769ff121af</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>334</bug_id>
          
          <creation_ts>2017-01-10 09:41:14 +0000</creation_ts>
          <short_desc>Make INF macro expansion behave like the other package build files</short_desc>
          <delta_ts>2017-03-09 07:12:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="apianti">apianti</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>apianti</cc>
    
    <cc>brandon.huber</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1283</commentid>
    <comment_count>0</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-01-10 09:41:14 +0000</bug_when>
    <thetext>Why are INF files not expanding environment variables like DSC, DEC, and FDF files? I find it infuriating that I have to hardcode paths, names, and versions that I want to autogenerate for autogenerated files. I have no problem putting an environment macro in those other three files and get it to expand to the proper location or name. However an INF complains it cannot find the files or uses the macro as a name because the macro is not expanded. I don&apos;t see the difference, if the variable is not defined NONE of these things are going to work, so please don&apos;t respond with &quot;because we don&apos;t want to expand arbitrary paths or names.&quot; Since my package is not part of EDK2 and I have no intention of forcing the user to build it by statically setting a bunch of paths. My package cannot be built without a script autogenerating files and this script then runs the build, these macros will be defined or the build won&apos;t complete anyway because of missing files. Please allow for the expansion of macros in INF files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1284</commentid>
    <comment_count>1</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-01-10 09:42:40 +0000</bug_when>
    <thetext>error 000E: File/directory not found in workspace
  	c:\edk2\$(PLATFORM_NAME)\Package.dec</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1285</commentid>
    <comment_count>2</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-01-10 09:50:32 +0000</bug_when>
    <thetext>LINK : fatal error LNK1181: cannot open input file &apos;Build/Stage/RELEASE_VS2013x86/X64/CloverPkg/Application/GUI/GUI/OUTPUT/$(PROJECT_SAFE_NAME)X64.lib&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1286</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-01-10 09:59:24 +0000</bug_when>
    <thetext>Have you tried this?

https://github.com/tianocore/tianocore.github.io/wiki/Multiple_Workspace</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1295</commentid>
    <comment_count>4</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-01-10 20:28:37 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Have you tried this?
&gt; 
&gt; https://github.com/tianocore/tianocore.github.io/wiki/Multiple_Workspace

Thanks, this does resolve this issue of sources from an INF. However, it does not resolve the second issue of expanding macros in the defines section of an INF such as version and name. I&apos;m still left with a macro name for both, although it expands some macros, it seems only to be about five predefined macros such as $(ARCH).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1296</commentid>
    <comment_count>5</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-01-10 21:08:08 +0000</bug_when>
    <thetext>There is actually partial expansion happening, so I&apos;m actually pretty sure this is a bug. The build completes but cannot link because of the link error noted above. When I inspect the output directory the expanded macro named file, CLOVERX64.lib, is correctly placed there but the linker is looking for the unexpanded macro named file, $(PROJECT_SAFE_NAME)X64.lib. The generated INF file is also unexpanded macro named, $(PROJECT_SAFE_NAME)$(ARCH).inf. So it seems it does semi-properly expand macros but not during every stage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1300</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-01-11 14:22:28 +0000</bug_when>
    <thetext>Okay, thanks for checking / confirming. I&apos;m assinging the BZ to one of the BaseTools maintainers. (Yonghong, I hope that&apos;s alright with you.)

@apianti, can you please attach (or link) an INF file and (if necessary) a DSC file that demonstrate the problem? (From &quot;CloverPkg&quot; above, I&apos;ll assume the project you&apos;re building is the Clover boot loader, and that&apos;s open source.) More context around the error message(s) might be useful too. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1308</commentid>
    <comment_count>7</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-01-11 20:44:39 +0000</bug_when>
    <thetext>The INF being built is Application/GUI/GUI.inf. Eventually there will be many INFs being built as part of the package for other components. I would like to be able to name them accordingly and have proper versioning without having to change every INF file. The repository is available here:

https://sourceforge.net/p/cloverefiboot/3.0/ci/master/tree/

There is currently only a visualstudio/windows build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1324</commentid>
    <comment_count>8</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-01-12 22:57:45 +0000</bug_when>
    <thetext>So I have added another INF that is a for a library that links with the application. Here is the output showing that both .lib files are built and named properly but the link stage fails to find the .libs because it doesn&apos;t expand the macros:

  Build environment: Windows-post2008Server-6.2.9200
  Build start time: 22:52:08, Jan.12 2017
  
  WORKSPACE        = c:\edk2
  PACKAGES_PATH    = c:\edk2\cloverpkg
  ECP_SOURCE       = c:\edk2\edkcompatibilitypkg
  EDK_SOURCE       = c:\edk2\edkcompatibilitypkg
  EFI_SOURCE       = c:\edk2\edkcompatibilitypkg
  EDK_TOOLS_PATH   = c:\edk2\basetools
  EDK_TOOLS_BIN    = c:\edk2\basetools\bin\win32
  CONF_PATH        = c:\edk2\conf
  
  
  Architecture(s)  = X64
  Build target     = DEBUG
  Toolchain        = VS2013x86
  
  Active Platform          = c:\edk2\CloverPkg\Package.dsc
  
  Processing meta-data . done!
  Building ... c:\edk2\CloverPkg\Library\GUILib\GUILib.inf [X64]
  	&quot;C:\Program Files (x86)\Microsoft Visual Studio 12.0\Vc\bin\x86_amd64\cl.exe&quot; /Foc:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Library\GUILib\GUILib\OUTPUT\.\GUILib.obj /nologo /c /WX /GS- /W4 /Gs32768 /D UNICODE /O1b2s /GL /Gy /FIAutoGen.h /EHs-c- /GR- /GF /Zi /Gm /Os /W4 /WX -D DISABLE_NEW_DEPRECATED_INTERFACES  /I&quot;C:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\Include&quot; /Ic:\edk2\CloverPkg\Library\GUILib  /Ic:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Library\GUILib\GUILib\DEBUG  /Ic:\edk2\CloverPkg  /Ic:\edk2\CloverPkg\Include  /Ic:\edk2\MdePkg  /Ic:\edk2\MdePkg\Include  /Ic:\edk2\MdePkg\Include\X64 c:\edk2\CloverPkg\Library\GUILib\GUILib.c
  GUILib.c
  	&quot;C:\Program Files (x86)\Microsoft Visual Studio 12.0\Vc\bin\x86_amd64\lib.exe&quot; /NOLOGO /LTCG /OUT:c:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Library\GUILib\GUILib\OUTPUT\CloverGUILib.lib @c:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Library\GUILib\GUILib\OUTPUT\object_files.lst
  Building ... c:\edk2\CloverPkg\Application\GUI\GUI.inf [X64]
  	&quot;C:\Program Files (x86)\Microsoft Visual Studio 12.0\Vc\bin\x86_amd64\cl.exe&quot; /Foc:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Application\GUI\GUI\OUTPUT\.\GUI.obj /nologo /c /WX /GS- /W4 /Gs32768 /D UNICODE /O1b2s /GL /Gy /FIAutoGen.h /EHs-c- /GR- /GF /Zi /Gm /Os /W4 /WX -D DISABLE_NEW_DEPRECATED_INTERFACES  /I&quot;C:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\Include&quot; /Ic:\edk2\CloverPkg\Application\GUI  /Ic:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Application\GUI\GUI\DEBUG  /Ic:\edk2\CloverPkg  /Ic:\edk2\CloverPkg\Include  /Ic:\edk2\MdePkg  /Ic:\edk2\MdePkg\Include  /Ic:\edk2\MdePkg\Include\X64 c:\edk2\CloverPkg\Application\GUI\GUI.c
  GUI.c
  	&quot;C:\Program Files (x86)\Microsoft Visual Studio 12.0\Vc\bin\x86_amd64\cl.exe&quot; /Foc:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Application\GUI\GUI\OUTPUT\.\AutoGen.obj /nologo /c /WX /GS- /W4 /Gs32768 /D UNICODE /O1b2s /GL /Gy /FIAutoGen.h /EHs-c- /GR- /GF /Zi /Gm /Os /W4 /WX -D DISABLE_NEW_DEPRECATED_INTERFACES  /I&quot;C:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\Include&quot; /Ic:\edk2\CloverPkg\Application\GUI  /Ic:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Application\GUI\GUI\DEBUG  /Ic:\edk2\CloverPkg  /Ic:\edk2\CloverPkg\Include  /Ic:\edk2\MdePkg  /Ic:\edk2\MdePkg\Include  /Ic:\edk2\MdePkg\Include\X64 c:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Application\GUI\GUI\DEBUG\AutoGen.c
  AutoGen.c
  	&quot;C:\Program Files (x86)\Microsoft Visual Studio 12.0\Vc\bin\x86_amd64\lib.exe&quot; /NOLOGO /LTCG /OUT:c:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Application\GUI\GUI\OUTPUT\CLOVERX64.lib @c:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Application\GUI\GUI\OUTPUT\object_files.lst
  	&quot;C:\Program Files (x86)\Microsoft Visual Studio 12.0\Vc\bin\x86_amd64\link.exe&quot; /OUT:c:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Application\GUI\GUI\DEBUG\CLOVERX64.dll /NOLOGO /NODEFAULTLIB /IGNORE:4001 /OPT:REF /OPT:ICF=10 /MAP /ALIGN:32 /SECTION:.xdata,D /SECTION:.pdata,D /Machine:X64 /LTCG /DLL /ENTRY:_ModuleEntryPoint /SUBSYSTEM:EFI_BOOT_SERVICE_DRIVER /SAFESEH:NO /BASE:0 /DRIVER /DEBUG  @c:\edk2\CloverPkg\Build\Stage\DEBUG_VS2013x86\X64\CloverPkg\Application\GUI\GUI\OUTPUT\static_library_files.lst
LINK : fatal error LNK1181: cannot open input file &apos;c:/edk2/CloverPkg/Build/Stage/DEBUG_VS2013x86/X64/CloverPkg/Library/GUILib/GUILib/OUTPUT/$(PROJECT_NAME)GUILib.lib&apos;
NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio 12.0\Vc\bin\x86_amd64\link.exe&quot;&apos; : return code &apos;0x49d&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1326</commentid>
    <comment_count>9</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-01-14 20:28:14 +0000</bug_when>
    <thetext>I made a change to BaseTools/Source/Python/AutoGen/GenMake.py and fixed the issue.

--- GenMake.py  (revision 23754)
+++ GenMake.py  (working copy)
@@ -587,7 +587,7 @@
             FileMacroList.append(&quot;%s = %s&quot; % (ListFileMacro, ListFileName))
             SaveFileOnChange(
                 ListFileName,
-                &quot;\n&quot;.join(self.ListFileMacros[ListFileMacro]),
+                &quot;\n&quot;.join(ReplaceMacros(self.ListFileMacros[ListFileMacro], os.environ)),
                 False
                 )

Then I realized that the base name string gEfiCallerBaseName does not get expanded either so I made these changes to BaseTools/Source/Python/AutoGen/GenC.py as well.

--- GenC.py     (revision 23754)
+++ GenC.py     (working copy)
@@ -21,7 +21,7 @@
 from Common.BuildToolError import *
 from Common.DataType import *
 from Common.Misc import *
-from Common.String import StringToArray
+from Common.String import StringToArray, ReplaceMacro
 from StrGather import *
 from GenPcdDb import CreatePcdDatabaseCode
 from IdfClassObject import *
@@ -1911,7 +1911,7 @@
         # Publish the CallerId Guid
         #
         AutoGenC.Append(&apos;\nGLOBAL_REMOVE_IF_UNREFERENCED GUID gEfiCallerIdGuid = %s;\n&apos; % GuidStringToGuidStructureString(Info.Guid))
-        AutoGenC.Append(&apos;\nGLOBAL_REMOVE_IF_UNREFERENCED CHAR8 *gEfiCallerBaseName = &quot;%s&quot;;\n&apos; % Info.Name)
+        AutoGenC.Append(&apos;\nGLOBAL_REMOVE_IF_UNREFERENCED CHAR8 *gEfiCallerBaseName = &quot;%s&quot;;\n&apos; % ReplaceMacro(Info.Name, os.environ))

 ## Create common code for header file
 #

I&apos;ve also discovered that PACKAGES_PATH does not always work, I have bash install in windows and when I run the shell scripts for building under *nix the build fails that it couldn&apos;t find Package.dec in the workspace. PACKAGES_PATH is definitely set.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1334</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-01-16 13:57:40 +0000</bug_when>
    <thetext>Would you consider posting the patches? (Please note that you have to complete the list registration first, unfortunately.)

Official hints:
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process

Unofficial hints:
https://github.com/tianocore/tianocore.github.io/wiki/Laszlo&apos;s-unkempt-git-guide-for-edk2-contributors-and-maintainers

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1366</commentid>
    <comment_count>11</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-01-24 14:18:44 +0000</bug_when>
    <thetext>I submitted the patches, I think I did it correctly, but I&apos;m not sure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1370</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-01-24 22:37:27 +0000</bug_when>
    <thetext>(In reply to apianti from comment #11)
&gt; I submitted the patches, I think I did it correctly, but I&apos;m not sure.

While the patch was delivered to the people that were addressed directly, it didn&apos;t show up on the list. As I mentioned in comment 10 above,

(In reply to Laszlo Ersek from comment #10)
&gt; [...] (Please note that you have to
&gt; complete the list registration first, unfortunately.)

Apparently, whoever submitted your patch, using the sender email address &lt;kyletpugh@gmail.com&gt;, did not subscribe to edk2-devel at &lt;https://lists.01.org/mailman/listinfo/edk2-devel&gt;, using that exact email address. The result is that the patch was not delivered to the list.

It is quite unfortunate, but posting to edk2-devel is not possible without subscribing to the list first. And, as I mentioned above, before the first posting, the contributor should await the confirmation email that the subscription succeeded. (It&apos;s not enough to just click the link for confirming the subscription request and then send the patch immediately; the list software might need more time to process the confirmed subscription request first.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1371</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-01-24 22:39:36 +0000</bug_when>
    <thetext>The feedback from Liming did reach the list:
https://lists.01.org/pipermail/edk2-devel/2017-January/006889.html

Feel free to continue the discussion on-list, in that thread. But, again, please note that for that, you will have to subscribe to the list first. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1375</commentid>
    <comment_count>14</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-01-25 06:00:02 +0000</bug_when>
    <thetext>Hmmmm thats my personal email, not sure why it got sent under that, thought I had set up email under my other address but I guess not. That email should be registered though too... I can&apos;t seem to register and I can&apos;t login though.... Idk. I don&apos;t see anywhere in the document that was linked in his response where it says that the base name can&apos;t have macros to expand. It&apos;s expanded everywhere else.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1482</commentid>
    <comment_count>15</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-20 20:21:25 +0000</bug_when>
    <thetext>Per INF spec chapter 2.2.6: Use of MACRO statements in the EDK II INF files is limited to local usage only; global or external macros are not permitted.
so we will update BaseTools to report error when it detect global macros used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1498</commentid>
    <comment_count>16</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-21 21:47:54 +0000</bug_when>
    <thetext>push the fix SHA-1: dc4c770763d05297c7de6893a1e34b76499d0b09</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1543</commentid>
    <comment_count>17</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-02-27 10:53:55 +0000</bug_when>
    <thetext>Except the very next paragraph:

&quot;Any defined MACRO definitions will be expanded by tools when they encounter the
entry in the section except when the macro is within double quotation marks in build options secions [sic - mistake in the spec]. The expectation is that these macros will be expanded by scripting tools such as make or nmake.&quot;

They are not. Also there are some global variables that are expanded, like $(ARCH), etc.

So why on earth is there a restriction on global variables?
Truthfully I don&apos;t think that these specifications are really thought out well for real world use. I keep seeing because of the PI spec but I&apos;ve read it and I don&apos;t see how allowing global macros in INFs in any way affects the PI spec. Especially since why would it matter, if you&apos;re building the package you are going to have these defines one way or another. They are defined somewhere, in some part of the package. Would be nice if you could use macros defined from .DEC or .DSC files at least. Or you know just allow all macros to be expanded.

With the commit you made, no macros work at all now. However previous to that, they all worked except only in the few places I had pointed out. So it&apos;s very obvious to me that the assertion of the need to be fixed because of the PI spec seems not very valid.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1550</commentid>
    <comment_count>18</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-02-28 09:59:41 +0000</bug_when>
    <thetext>INF is EDK2 build meta file. Its format is defined in EDK2 INF spec. It is not related to PI spec. Yonghong has mentioned INF spec chapter 2.2.6: Use of MACRO statements in the EDK II INF files is limited to local usage only; global or external macros are not permitted. The reason is that INF and DEC are in Package. EDK2 package is the release unit, and can be converted to PI Distribution Package. This spec requires every content is fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1594</commentid>
    <comment_count>19</comment_count>
    <who name="apianti">apianti</who>
    <bug_when>2017-03-09 07:12:40 +0000</bug_when>
    <thetext>I understand what the INF spec says, it can change, right? My point is that there are special exceptions made for some global/environment variables. Also, expansion actually worked but for the bug I mentioned, so I see no reason why expanding all macros should not be allowed. And I keep hearing the reason is because of the PI spec, which is static, however as you said the meta EDK2 package converts to static PI package. So why can these variables not just be expanded during this process? I mean am I just missing something? Or is there just steadfastness to stay on what was already specified?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>695</bug_id>
          
          <creation_ts>2017-09-06 04:57:02 +0000</creation_ts>
          <short_desc>The undefined behavior about left shift a negative signed value in Tpl.c</short_desc>
          <delta_ts>2017-09-29 04:20:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2689</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-09-06 04:57:02 +0000</bug_when>
    <thetext>The edk2 asan/ubsan reports there is a undefined behavior issue in the edk2\MdeModulePkg\Core\Dxe\Event\Tpl.c  line 126:
  //
  // Dispatch any pending events
  //
  while (((-2 &lt;&lt; NewTpl) &amp; gEventPending) != 0) {
   ...

The above code(-2 &lt;&lt; NewTpl) left shift a negative value -2, which is a undefined behavior in C standard. It can be easily fixed as below to force the -2 as a unsigned value.

  //
  // Dispatch any pending events
  //
  while ((((UINTN)-2 &lt;&lt; NewTpl) &amp; gEventPending) != 0) {
   ...

The solved Bug553 is the same type issue, and you refer to it. The difference is this issue is not found in compile time by compiler directly, but is detected by edk2 llvm UndefinedBehaviorSanitizer during the boot.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2690</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-09-06 05:05:31 +0000</bug_when>
    <thetext>https://stackoverflow.com/questions/3784996/why-does-left-shift-operation-invoke-undefined-behaviour-when-the-left-side-oper</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2708</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-07 20:05:13 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2811</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-09-29 04:20:21 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/d9be0f66ffa9580d27fe08de09d4883ea5535f07</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>245</bug_id>
          
          <creation_ts>2016-11-21 16:32:15 +0000</creation_ts>
          <short_desc>gConnectConInEvent initialize too late</short_desc>
          <delta_ts>2016-12-07 21:12:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>998</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2016-11-21 16:32:15 +0000</bug_when>
    <thetext>When PcdConInConnectOnDemand is used, the initialization of the gConnectConInEvent needs to occur before the call to PlatformBootManagerBeforeConsole().  The reason this is needed early is due to a UI element that may display something and poll the console for input while executing in one of the streams of event notification callbacks triggered by the installation of the Graphics Output Protocol.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1101</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-01 19:08:27 +0000</bug_when>
    <thetext>Bug scrub: assign to module owner to investigate first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1134</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2016-12-07 21:12:12 +0000</bug_when>
    <thetext>Commit @ 8537bd7ef64f2ccf3b0db515f30813d5c3311a5c.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>610</bug_id>
          
          <creation_ts>2017-06-22 14:19:17 +0000</creation_ts>
          <short_desc>dblk ignores BlockIo buffer alignment requirement</short_desc>
          <delta_ts>2017-08-03 00:44:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Felix">felixp</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2322</commentid>
    <comment_count>0</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2017-06-22 14:19:17 +0000</bug_when>
    <thetext>According to UEFI specification, BlockIo-&gt;Media-&gt;IoAlign
&quot;supplies the alignment requirement for any buffer used in a data transfer&quot;.

dblk implementation ignores BlockIo buffer alignment requirement.

According to UEFI specification this can lead to:
EFI_INVALID_PARAMETER
The read request contains LBAs that are not valid, or the buffer is not on proper alignment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2325</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-22 20:07:00 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2547</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-08-03 00:43:30 +0000</bug_when>
    <thetext>pushed @ f11a7a555269f469b609ceb77221b59ec9b93ba9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2548</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-08-03 00:44:02 +0000</bug_when>
    <thetext>change its state.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>993</bug_id>
          
          <creation_ts>2018-06-21 01:56:34 +0000</creation_ts>
          <short_desc>AP shouldn&apos;t call PEI services</short_desc>
          <delta_ts>2018-07-16 02:29:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4180</commentid>
    <comment_count>0</comment_count>
      <attachid>182</attachid>
    <who name="ydong10">eric.dong</who>
    <bug_when>2018-06-21 01:56:34 +0000</bug_when>
    <thetext>Created attachment 182
mailing discussion about this issue

Community reported this issue. 

APs may call MpInitLibWhoAmI API to get the AP info. In this API, it will call PeiServicesGetHobList() to get the HOB data. This behavior break the APs should not call PEI services rule. 

Andrew suggests to use IDT to avoid use HOB. submit this bugz to fix this issue.

Detail mailing discussion about this issue see the attachment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4182</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-21 20:03:05 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4280</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2018-07-16 02:29:02 +0000</bug_when>
    <thetext>Fixed by Ruiyu:

SHA-1: c563077a380437c114aba4c95be65eb963ebc1f3

* UefiCpuPkg/MpInitLib: Avoid calling PEI services from AP

Today&apos;s MpInitLib PEI implementation directly calls
PeiServices-&gt;GetHobList() from AP which may cause racing issue.

This patch fixes this issue by duplicating IDT for APs.
Because CpuMpData structure is stored just after IDT, the CpuMPData
address equals to IDTR.BASE + IDTR.LIMIT + 1.

v2:
  1. Add ALIGN_VALUE() on BufferSize.
  2. Add ASSERT() to make sure no memory usage outside of the allocated buffer.
  3. Add more comments in InitConfig path when restoring CpuData[0].VolatileRegisters.

Cc: Jeff Fan &lt;vanjeff_919@hotmail.com&gt;
Cc: Eric Dong &lt;eric.dong@intel.com&gt;
Cc: Jiewen Yao &lt;jiewen.yao@intel.com&gt;
Cc: Fish Andrew &lt;afish@apple.com&gt;
Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Reviewed-by: Eric Dong &lt;eric.dong@intel.com&gt;
Acked-by: Laszlo Ersek &lt;lersek@redhat.com&gt;
Tested-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>182</attachid>
            <date>2018-06-21 01:56:34 +0000</date>
            <delta_ts>2018-06-21 01:56:34 +0000</delta_ts>
            <desc>mailing discussion about this issue</desc>
            <filename>RE edk2 Is the PEI Core MP Safe UefiCpuPkg seems to think so calling GetFirstGuidHob on the APs.msg</filename>
            <type>application/octet-stream</type>
            <size>57856</size>
            <attacher name="ydong10">eric.dong</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>439</bug_id>
          
          <creation_ts>2017-03-22 01:57:16 +0000</creation_ts>
          <short_desc>PXE IPv6 Boot Options are NOT created with external PCIe Broadcom LAN Controller</short_desc>
          <delta_ts>2017-04-07 03:28:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>naveens</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1658</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-03-22 01:57:16 +0000</bug_when>
    <thetext>[Issue Description]
PXE IPv6 Boot Options are not created with external PCIe Broadcom LAN Controller. But with the other NIC cards, it is fine.

[NIC used]
Broadcon NetXtreme Gigabit Ethernet (BCM5719) and with BCM5761 too.


[Observations]
1.A new function PxeBcCheckIpv6Support () was introduced to check if the UNDI support IPv6 or not.in the commit, 2bbe9553c495bb9024b4b51743142a0a50e0d370 and it says

* Add IPV6 support from UNDI
Add new information block ‘IPV6 support from UNDI’ in AIP protocol and provide sample implementation in UNDI driver.
Update PXE driver to get ‘Ipv6Available’ of PXE BC Mode data from UNDI driver, if unsupported then not to start PXE over IPv6 path.

2.
PxeBcCheckIpv6Support (
  IN  EFI_HANDLE                   ControllerHandle,
  IN  PXEBC_PRIVATE_DATA           *Private,
  OUT BOOLEAN                      *Ipv6Support
  )
{
...

if (Private-&gt;Nii != NULL) {
    *Ipv6Support = Private-&gt;Nii-&gt;Ipv6Supported;          
 // In the case of Broadcom NIC controller the value is 0 (Private-&gt;Nii-&gt;Ipv6Supported = 0)
 // In the case of Intel NIC card the value is 1 (Private-&gt;Nii-&gt;Ipv6Supported = 1) And Destroying the opened instances,and boot options are not created
    return EFI_SUCCESS;
  }

...

}


Is this some bug or expected behavior?

If this is expected behavior, then the PXE boot over IPv6 with the Broadcom card without the changes should fail. But in this case, the PXE IPv6 boot is successful. So, I guess it would be a bug.

Correct me if I&apos;m wrong.

Thanks,
Karnuakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1670</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-23 20:22:56 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1678</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-24 01:33:16 +0000</bug_when>
    <thetext>
Hello Karnuakar,

I&apos;m little confused with your observations:


1. What does mean of &quot;In the case of Intel NIC card the value is 1 (Private-&gt;Nii-&gt;Ipv6Supported = 1) And Destroying the opened instances,and boot options are not created&quot;? Since the value is 1, PXE driver won&apos;t destroy the opened instances.


2. &quot;If this is expected behavior, then the PXE boot over IPv6 with the Broadcom card without the changes should fail. &quot; --&gt; Yeah, i think it&apos;s the purpose of the commit 2bbe9553: It should be fail since the Nii-&gt;Ipv6Supported is setting to 0. 

3. &quot;But in this case, the PXE IPv6 boot is successful. So, I guess it would be a bug.&quot; --&gt; Do you mean the Broadcom NIC can do the PXE IPv6 boot even Nii-&gt;Ipv6Supported is 0? So, you think it&apos;s the bug?


I have one Broadcom Ethernet (BCM 5708), and its undi driver also set the Nii-&gt;Ipv6Supported to 0. From my observation, PXE IPv6 Boot Options for the card are not created as expected.


Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1680</commentid>
    <comment_count>3</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-03-24 02:03:54 +0000</bug_when>
    <thetext>Hi jiaxin,


In the case of intel Nic card 
Private-&gt;Nii-&gt;IPv6Supported =1 and Pxe boot options were created ,No issues

in the case of Broadcom Nic card 
Private-&gt;Nii-&gt;IPv6Supported =0 and Pxe boot options were not created 

Thanks,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1681</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-24 02:18:10 +0000</bug_when>
    <thetext>
Hi Karunakar,

Since the Broadcom UNDI driver installs the NII protocol and sets the Ipv6Supported flag to false, that means the network interface doesn&apos;t supports IPv6. Then, PXE boot driver doesn&apos;t create its boot option. It&apos;s the expected behavior. So, where is the bug you mentioned below?

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1685</commentid>
    <comment_count>5</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-03-24 05:16:58 +0000</bug_when>
    <thetext>Hi Jiaxin,

Thanks for instant reply.

What you said is correct,Since the Broadcom UNDI driver installs the NII protocol and sets the Ipv6Supported flag to false, that means the network interface doesn&apos;t supports IPv6. Then, PXE boot driver doesn&apos;t create its boot option.

As we mentioned in comment#1, 
The PXE boot over IPv6 with the Broadcom card without the changes should fail. But in this case, the PXE IPv6 boot is successful Even though Private-&gt;Nii-&gt;Ipv6Supported is false, So I guess it would be a bug.

Please correct me if I&apos;m wrong.

Thanks,
karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1686</commentid>
    <comment_count>6</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-03-24 05:36:19 +0000</bug_when>
    <thetext>Hi Jiaxin,

Please correct Typo mistake in my Observations Described in Issue description.

1. In the case of Intel NIC card the value is 1 (Private-&gt;Nii-&gt;Ipv6Supported = 1) and  boot options were created, PXE Boot was success
  -&gt;No issues Expected behavior.

2. In the case of Broadcom NIC controller the value is 0 (Private-&gt;Nii-&gt;Ipv6Supported = 0),And Destroying the opened instances,and boot options are not created.
 -&gt; If this is expected behavior, then the PXE boot over IPv6 with the Broadcom card without the changes should fail. But in this case, the PXE IPv6 boot is successful. So, I guess it would be a bug.


Thanks,
karunakar.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1690</commentid>
    <comment_count>7</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-26 21:45:59 +0000</bug_when>
    <thetext>Hi Karnuakar,

Got you opinion: you mean the PXE IPv6 boot should fail even without the commit 2bbe9553c495bb9024b4b51743142a0a50e0d370, right?

I have tried the PXE IPv6 boot by reverting the above patch. As you observed, PXE IPv6 can boot successfully. 

According above information, I guess it&apos;s the Broadcom UNDI driver bug that it supports IPv6 actually, and installs the NII protocol but forget to set the Nii-&gt;Ipv6Supported flag.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1775</commentid>
    <comment_count>8</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-07 03:28:18 +0000</bug_when>
    <thetext>
No commit since it&apos;s not PXE driver bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>713</bug_id>
          
          <creation_ts>2017-09-20 19:00:04 +0000</creation_ts>
          <short_desc>Update EDK II C Coding standard to state a stronger preference for 80 column line widths</short_desc>
          <delta_ts>2022-11-15 21:57:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hart3778avery</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>knight4553kai</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II C Coding Standards</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2751</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-09-20 19:00:04 +0000</bug_when>
    <thetext>The following description, email thread, and associated patches
are updates to make 80 columns required.  There is some discussion
about postfix comments going past 80 columns that needs to be addressed
in the next revision of the patch for this document change.

https://lists.01.org/pipermail/edk2-devel/2017-August/013165.html

  We currently say &quot;stick with 80 if it&apos;s convenient, extend to 120
  otherwise&quot;. This is too lax; much new edk2 code ignores the 80 columns
  recommendation, resulting in source files that are hard to read for some
  contributors. Remove the 120 columns excuse and make 80 columns a
  requirement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2758</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-21 20:05:47 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10604</commentid>
    <comment_count>2</comment_count>
    <who name="Hart">hart3778avery</who>
    <bug_when>2019-12-03 22:19:42 +0000</bug_when>
    <thetext>I think longer lines are better than multiline monsters just because the line cannot be longer. Buy wider monitor ;) .https://www.maxvisits.com/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10605</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-12-04 04:06:08 +0000</bug_when>
    <thetext>Hart,

there is a reason why articles in the newspaper (you know, the physical, printed medium) are columnated. It is a burden for most readers to implement &quot;Carriage Return&quot; with their eyes, if the lines are too long.

In addition, there has been research into how programmers read source code -- they seem to scan the left hand side of the lines. The longer the lines, the more information they miss.

Obviously there must be a compromise, because we should also not waste vertical screen real estate. I think the optimal style is 80 chars per line, without forcing multiline function calls to break every argument to a new line. We&apos;ve used this style with great success in OvmfPkg and ArmVirtPkg for a long time now.

  if (RETURN_ERROR (Status) || PointeeEntry == NULL) {
    DEBUG ((DEBUG_ERROR,
      &quot;%a: invalid fw_cfg file or blob reference \&quot;%a\&quot; / \&quot;%a\&quot;\n&quot;,
      __FUNCTION__, WritePointer-&gt;PointerFile, WritePointer-&gt;PointeeFile));
    return EFI_PROTOCOL_ERROR;
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10728</commentid>
    <comment_count>4</comment_count>
    <who name="knight4553kai@gmx.com">knight4553kai</who>
    <bug_when>2019-12-18 07:38:51 +0000</bug_when>
    <thetext>I think longer lines are better than multiline monsters just because the line cannot be longer. Buy wider monitor ;) https://sparpedia.ch/fr</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20036</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-11-15 21:57:15 +0000</bug_when>
    <thetext>Close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>455</bug_id>
          
          <creation_ts>2017-03-31 22:59:27 +0000</creation_ts>
          <short_desc>[CryptoPkg] Remove extra warning suppression flag after some openssl sources were fixed.</short_desc>
          <delta_ts>2018-12-12 02:34:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Qin Long">qin.long</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1720</commentid>
    <comment_count>0</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-03-31 22:59:27 +0000</bug_when>
    <thetext>(This is one reminder to track the next follow-up on OpenSSL fix upstreaming and CryptoPkg/OpensslLib cleanup)

We will add some extra build options in OpensslLib[Crypto].inf to suppress possible warning messages when building openssl-1.1.0e sources.

The possible warnings include:

Adding &quot;-Wno-error=maybe-uninitialized&quot; to suppress the following GCC48
build warning:
  OpensslLib/openssl/ssl/statem/statem_clnt.c:2543:9: error: &quot;len&quot; may
     be used uninitialized in this function [-Werror=maybe-uninitialized]
       len += pskhdrlen;
           ^
(It&apos;s not a bug, but the existent &quot;len = 0&quot; assignment in tls_construct_client_key_exchange() function can be moved to the unconditional part of the code)

And adding &quot;/wd4306&quot; to suppress the following VS2010 build warning:
  openssl\crypto\asn1\tasn_dec.c(795) : warning C4306: &apos;type cast&apos; :
               conversion from &apos;int&apos; to &apos;ASN1_VALUE *&apos; of greater size
(Should use &quot;*pval = (ASN1_VALUE *)(uintptr_t)1;&quot; in tasn_dec.c for convertion) 


We will report the bug / submit PR to openssl as clean fix. 
These extra flags can be removed once the OpenSSL bug is fixed and a new stable release is published.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1751</commentid>
    <comment_count>1</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-04-06 04:10:18 +0000</bug_when>
    <thetext>One openssl issue was filed for tracking:
    https://github.com/openssl/openssl/issues/3135</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1756</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-06 20:05:31 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5837</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-12-12 02:34:38 +0000</bug_when>
    <thetext>According to https://github.com/openssl/openssl/issues/3135, the openssl community refuses to fix it. Let&apos;s mark this tracker as WONTFIX.

==========================
I&apos;m closing this without resolution with following rationale. Even though this project had history of working around compiler bugs, it&apos;s obvious that it wouldn&apos;t really be a sustainable practice if we aimed to work around every one we run into. Probably the only case when doing so would [still] be justified is when user has no alternative, but to use some specific compiler. And failure would have to be fatal. Neither is case here. BTW, I can&apos;t even reproduce problem with 4.8.5, so that both are clearly compiler bugs in warning systems, since both were apparently fixed. Well, one can argue &quot;come on, it&apos;s so bloody trivial to fix&quot;. But then, where would one draw the line at all?
===========================</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>820</bug_id>
          
          <creation_ts>2017-12-20 00:52:48 +0000</creation_ts>
          <short_desc>Need remove Test App from SecurityPkg</short_desc>
          <delta_ts>2017-12-26 14:17:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3251</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-12-20 00:52:48 +0000</bug_when>
    <thetext>SecurityPkg\Application\RngTest is only for unit test.

It should not be in a core package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3258</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-21 19:04:51 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3272</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-12-26 14:17:06 +0000</bug_when>
    <thetext>Resolved by the commit: b6ee737979e8a2656deed6112f0882fd60e1d69c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>385</bug_id>
          
          <creation_ts>2017-02-16 22:47:19 +0000</creation_ts>
          <short_desc>Delete boot option cause incorrect UI behavior</short_desc>
          <delta_ts>2017-02-23 22:41:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1465</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-02-16 22:47:19 +0000</bug_when>
    <thetext>Step to reproduce:
1. Enter UI, select Boot Maintenance Manager-&gt; Boot options-&gt;Delete Boot Option,
   enter Delete Boot Option form(5 boot options for example).
2. Selete one option to delete (not the last one), then commit the changes and 
   exit the form.
3. Enter Change Boot Order form(there are 4 boot options, that&apos;s correct ), 
   change the boot order, then commit the changes and exit the form.
4. Then enter the Delete Boot Option form or Change Boot Order form, there are 
   only 3 boot options. It&apos;s incorrect.

The root cause is that old useless data (delete one option) is maintained by browser, in step3 when commit changes for boot order, it will also trigger the action of deleting boot option. So we can also replace step3 with add a new boot option(or other actions...), then commit, deleting boot option will also be triggered.

The logics of driver option are the same with boot option, it also has this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1517</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-23 19:14:03 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1528</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2017-02-23 22:41:52 +0000</bug_when>
    <thetext>Fix this issue in Trunk:
https://github.com/tianocore/edk2/commit/85520606ad459ba7d825c7ea5f225cffa1dbe95b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>212</bug_id>
          
          <creation_ts>2016-11-07 00:25:18 +0000</creation_ts>
          <short_desc>The Text of eMMC DevicePath Node should be eMMC(SlotNumber)</short_desc>
          <delta_ts>2016-11-13 22:10:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="eric.jin">eric.jin</reporter>
          <assigned_to name="Feng Tian">feng.tian</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>847</commentid>
    <comment_count>0</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2016-11-07 00:25:18 +0000</bug_when>
    <thetext>According to the UEFI 2.6 Spec(Page 358), the text of eMMC DevicePath Node should be eMMC(SlotNumber), but Emmc(SlotNumber) is defined in current UefiDevicePathLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>878</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-10 19:26:14 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>898</commentid>
    <comment_count>2</comment_count>
    <who name="Feng Tian">feng.tian</who>
    <bug_when>2016-11-13 22:10:40 +0000</bug_when>
    <thetext>d18f9699e7c98bf63f9d92f8e111bb3a6b3d0882</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>129</bug_id>
          
          <creation_ts>2016-09-22 22:40:45 +0000</creation_ts>
          <short_desc>RFE: please support the NOOPT target with the GCC toolchains</short_desc>
          <delta_ts>2016-11-14 02:29:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>rebecca</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>521</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-09-22 22:40:45 +0000</bug_when>
    <thetext>In the edk2-devel thread
[edk2] NOOPT OVMF build (or otherwise with optimizations disabled)
https://lists.01.org/pipermail/edk2-devel/2016-September/001939.html

Bruce suggested / requested that a NOOPT target be added to OVMF. We should generalize this to BaseTools actually, given that no GCC toolchain options support the NOOPT target specifically.

NOOPT means that (a) DEBUG() and similar macros are enabled in the build, (b) compiler optimizations are disabled.

Please add NOOPT support to GCC in BaseTools (&quot;BaseTools/Conf/tools_def.template&quot;).

Later we can adapt the DSC files (and perhaps the README) under OvmfPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>529</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-09-28 21:07:10 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>579</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-11 21:14:09 +0000</bug_when>
    <thetext>pushed the fix, SHA-1: 4b8234d05400a852a42688fea14acc7ddeeebad4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>955</bug_id>
          
          <creation_ts>2018-05-23 11:17:57 +0000</creation_ts>
          <short_desc>please consider globally discarding or globally stripping the .eh_frame section of ELF binaries</short_desc>
          <delta_ts>2020-05-05 19:00:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4006</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-05-23 11:17:57 +0000</bug_when>
    <thetext>(
Background discussion on the list:

[edk2] [PATCH] BaseTools/tools_def: add &quot;-fno-unwind-tables&quot; to
               GCC_AARCH64_CC_FLAGS
https://lists.01.org/pipermail/edk2-devel/2018-May/024885.html
)

GCC generates ELF binaries with the .eh_frame section. When converting the ELF binaries to PE/COFF, GenFw/ElfConvert breaks on related relocations -- it appears GenFw/ElfConvert does not intend to deal with these relocations directly (i.e., recognize them and filter them out / skip them). Instead, we have three possible methods (alternatives) in BaseTools to remove .eh_frame from the input of GenFw:

(a) add architecture and toolchain version specific build options, such as &quot;-fno-asynchronous-tables&quot; and &quot;-fno-unwind-tables&quot;, that prevent gcc from generating .eh_frame in the first place,

(b) in GccBase.lds, we could discard .eh_frame (we currently keep &amp; realign it), 

(c) we could keep .eh_frame in GccBase.lds (like we currently do), but then strip it subsequently with objcopy in &quot;build_rule.template&quot; (we currently stub out that step).

Preserving .eh_frame in GccBase.lds seems to target &quot;external debugging tools&quot;; however, if .eh_frame is actually generated in practice, right now it breaks the end result, because the &quot;objcopy -R .eh_frame&quot; counterpart is stubbed out. Instead, we keep convincing gcc time and again, per architecture and possibly per gcc version, to *not* generate .eh_frame (alternative (a)) -- which defeats the supposed &quot;external debugging&quot; just the same as alternative (b) would.

So, because alternative (a) doesn&apos;t scale really well, please evaluate whether we can abandon support for &quot;external debugging&quot; tools globally, and switch to alternative (b); or else at least switch to (c), which should keep both the external debugging tools and GenFw happy, and scale better than (a). Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4011</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-05-24 19:53:25 +0000</bug_when>
    <thetext>bug scrub: assign to Liming to evaluate first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12383</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:00:33 +0000</bug_when>
    <thetext>Not touched in two years, closing as WONTFIX.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>488</bug_id>
          
          <creation_ts>2017-04-15 08:13:53 +0000</creation_ts>
          <short_desc>Shell MEMMAP cannot print OemType or OsType memory information</short_desc>
          <delta_ts>2017-05-11 22:53:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1832</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-04-15 08:13:53 +0000</bug_when>
    <thetext>According to UEFI spec, memory type 0x70000000..0x7FFFFFFF are reserved for OEM use, 0x80000000..0xFFFFFFFF are reserved for OS loader use.

But MEMMAP command cannot dump such information, it uses ASSERT(FALSE) for those type.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1890</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-20 20:12:52 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2022</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-05-11 22:53:13 +0000</bug_when>
    <thetext>pushed @ master ac25ebdccc667ecf8397c7310f66e8e2fcfacb26,8bb61740d47b0788bc313f113cbad4a78b55101e

pushed @ UDK2017 14ddca5afe86376363bc18f54cee9c82b7ae4aed,219fee13c803962a27e312c7e56e2b3e5c01d3e3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>407</bug_id>
          
          <creation_ts>2017-02-24 03:10:35 +0000</creation_ts>
          <short_desc>enhance Smm FreePool to catch buffer overflow.</short_desc>
          <delta_ts>2017-04-20 02:19:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1532</commentid>
    <comment_count>0</comment_count>
      <attachid>42</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2017-02-24 03:10:35 +0000</bug_when>
    <thetext>Created attachment 42
sample patch

Currently, the DXE version FreePool will check POOL_TAIL, so that it can catch buffer overflow.

The SMM version FreePool does not have such capability. It is hard to catch buffer overflow.

I implement POOL_TAIL and FreePool() can check.
See attachment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1568</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-02 19:14:00 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-04-20 02:19:28 +0000</bug_when>
    <thetext>Fixed at
master 861c8dff2f506d602f8612ace12d244c29e63f31 and
UDK2017 branch b4221a2e9e6ea15fbd99adc80cebaf77d4257125.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>42</attachid>
            <date>2017-02-24 03:10:35 +0000</date>
            <delta_ts>2017-02-24 03:10:35 +0000</delta_ts>
            <desc>sample patch</desc>
            <filename>0001-MdeModulePkg-SmmCore-Enhance-FreePool-check-buffer-o.patch</filename>
            <type>application/octet-stream</type>
            <size>6153</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>768</bug_id>
          
          <creation_ts>2017-11-08 17:27:40 +0000</creation_ts>
          <short_desc>Clean up Quark boot mode handling including boot modes that should perform minimum connects</short_desc>
          <delta_ts>2017-11-14 20:44:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>QuarkPlatformPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2999</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-11-08 17:27:40 +0000</bug_when>
    <thetext>The PlatformBootManagerLib in the QuarkPlatformPkg performs 
connect all policy on too many boot modes.  Update this lib to
perform the minimum connects for the following boot modes: 

  BOOT_ASSUMING_NO_CONFIGURATION_CHANGES
  BOOT_WITH_MINIMAL_CONFIGURATION
  BOOT_ON_S4_RESUME</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3025</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-11-09 19:14:00 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3060</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-11-14 20:31:03 +0000</bug_when>
    <thetext>Patch email sent for review:

https://lists.01.org/pipermail/edk2-devel/2017-November/017117.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3061</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-11-14 20:44:44 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/a7f3ed1f5276d1dd512449288f66581d44b42745</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>594</bug_id>
          
          <creation_ts>2017-06-15 08:17:33 +0000</creation_ts>
          <short_desc>TPM enablement in OVMF</short_desc>
          <delta_ts>2018-09-12 16:00:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Marc-André Lureau">marcandre.lureau</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>marcandre.lureau</cc>
    
    <cc>stefanb</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2283</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-06-15 08:17:33 +0000</bug_when>
    <thetext>I&apos;ve asked Stefan Berger @IBM to document the current TPM status in QEMU (guest-visible frontend / behavior, QEMU specifics, currently supported TPM backends, design in general):

[Qemu-devel] TPM status
http://lists.nongnu.org/archive/html/qemu-devel/2017-06/msg03439.html
msgid &lt;7f0b8d00-236d-37e8-5c1f-e7ea8e4b9146@redhat.com&gt;

Based on that document, and based on the TianoCore Wiki&apos;s TPM instructions at &lt;https://github.com/tianocore/tianocore.github.io/wiki/How-to-Enable-Security#Enabling_Trusted_Compute_Module_TPM&gt;, we should enable TPM support in OVMF.

The goal is that a guest OS (incl. its boot loader) running on OVMF can read the TPM event log.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2392</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-07-04 16:49:07 +0000</bug_when>
    <thetext>Stefan&apos;s v1 docs patch:
http://mid.mail-archive.com/1498759215-25382-1-git-send-email-stefanb@linux.vnet.ibm.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2418</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-07-11 14:20:05 +0000</bug_when>
    <thetext>Stefan&apos;s v2 docs patch:

http://mid.mail-archive.com/1499783493-15911-1-git-send-email-stefanb@linux.vnet.ibm.com

http://lists.nongnu.org/archive/html/qemu-devel/2017-07/msg02776.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2432</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-07-12 20:36:38 +0000</bug_when>
    <thetext>Amarnath Valluri&apos;s v4 swtpm set:

[Qemu-devel] [PATCH v4 0/8] Provide support for the software TPM emulator
http://mid.mail-archive.com/1496666711-14630-1-git-send-email-amarnath.valluri@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2439</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-07-14 04:24:04 +0000</bug_when>
    <thetext>From &lt;https://github.com/tianocore/tianocore.github.io/wiki/How-to-Enable-Security#Enabling_Trusted_Compute_Module_TPM&gt;:

&quot;Memory should be cleared if ClearMemory bit of variable MemoryOverwriteRequestControl is set when doing memory initialization&quot;.

This means TPM enablement depends on PEI-phase variable access.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2441</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-07-14 14:06:03 +0000</bug_when>
    <thetext>&quot;investigating TPM for OVMF-on-QEMU&quot;

http://mid.mail-archive.com/eef9a031-36e9-0443-1d73-30a49df02e9a@redhat.com
https://lists.01.org/pipermail/edk2-devel/2017-July/012365.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2609</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-08-16 20:19:33 +0000</bug_when>
    <thetext>Amarnath Valluri&apos;s v6 set:

[Qemu-devel] [PATCH v6 0/8] Provide support for the software TPM emulator
http://lists.nongnu.org/archive/html/qemu-devel/2017-07/msg05507.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3592</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-02-13 11:20:20 +0000</bug_when>
    <thetext>http://mid.mail-archive.com/e8cf7f36-249f-a3cc-f414-fac4e8b56b51@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3593</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-02-13 13:40:00 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #7)
&gt; http://mid.mail-archive.com/e8cf7f36-249f-a3cc-f414-fac4e8b56b51@redhat.com

alternate link:
https://lists.gnu.org/archive/html/qemu-devel/2018-02/msg03497.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3667</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-08 15:16:27 +0000</bug_when>
    <thetext>Patch sets from Marc-André:

[edk2] [PATCH 0/7] RFC: ovmf: preliminary TPM2 support
http://mid.mail-archive.com/20180223132311.26555-1-marcandre.lureau@redhat.com

[edk2] [PATCH v2 0/8] RFC: ovmf: preliminary TPM2 support
https://lists.01.org/pipermail/edk2-devel/2018-March/022390.html
http://mid.mail-archive.com/20180307155746.18526-1-marcandre.lureau@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3668</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-08 15:17:03 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #9)
&gt; Patch sets from Marc-André:
&gt; 
&gt; [...]

moving BZ to IN_PROGRESS status</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3672</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-09 12:02:03 +0000</bug_when>
    <thetext>[edk2] [PATCH v3 0/7] ovmf: preliminary TPM2 support
http://mid.mail-archive.com/20180309130918.734-1-marcandre.lureau@redhat.com
https://lists.01.org/pipermail/edk2-devel/2018-March/022509.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3673</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-03-09 13:39:56 +0000</bug_when>
    <thetext>Fixed in commit range 7878f706e7eb..d5a002aba0aa, by Marc-André&apos;s v3 series (comment 11).

Future work (SEV compat, and TPM2 Physical Presence Interface) should be tracked by independent BZs.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>55</bug_id>
          
          <creation_ts>2016-07-20 21:11:56 +0000</creation_ts>
          <short_desc>Python 3 migration</short_desc>
          <delta_ts>2019-02-01 03:49:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>anton.kochkov</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>joseph.shifflett</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>80</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 21:11:56 +0000</bug_when>
    <thetext>XVilka commented on May 17 • edited
Standard configparser from the Python 3 distribution can parse *.inf and dsc files flawlessly, no need to reimplement it from scratch.

For example:

import configparser

# Read and parse *.dsc file
dsc = configparser.ConfigParser(allow_no_value=True)
dsc.optionxform = str # overriding optionxform() to preserve the Case
dsc.read( &quot;MdePkg.dsc&quot;)
inf_files = dsc.options(&quot;Components&quot;)
# and arch-specific stuff
inf_files += dsc.options(&quot;Components.&quot; + edk2_arch)
print(&quot;Loaded INF files from DSC:&quot;)
for inf in inf_files:
    print(&quot;{0} : {1}&quot;.format(ntpath.basename(inf), inf))
And it&apos;s just work.

See more about how to migrate from Python 2 to Python 3: https://docs.python.org/3/howto/pyporting.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>415</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-04 20:26:58 +0000</bug_when>
    <thetext>Bug Scrub: Assign to basetool owner to estimate efforts required, Bring a topic to base tool meeting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>654</commentid>
    <comment_count>2</comment_count>
    <who name="Anton Kochkov">anton.kochkov</who>
    <bug_when>2016-10-20 05:34:25 +0000</bug_when>
    <thetext>Since cx_Freeze is a dead project and doesn&apos;t have support for Python
3 - what about switching to PyInstaller [1] instead for Python tools in
edk2 tree? PyInstaller is also cross-platform: Windows, *nix and OS X.

This will help for further migration to Python 3 too.

[1] http://www.pyinstaller.org/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4862</commentid>
    <comment_count>3</comment_count>
    <who name="">joseph.shifflett</who>
    <bug_when>2018-09-05 17:17:50 +0000</bug_when>
    <thetext>@XVilka 

i experimented with configparser and it seems like it did not gracefully support conditional directive statements (eg !if).  have you seen similar issues?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5159</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-29 04:38:53 +0000</bug_when>
    <thetext>we are working on this migration.
Here is the link: https://github.com/yzhu52/edk2.git   Branch: Python3_V2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5249</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-12 23:26:23 +0000</bug_when>
    <thetext>the patches already be synced into edk2 master.
the version is SHA-1: ea787b6b55499e8f931201f8f49daaaeb2e4409f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5254</commentid>
    <comment_count>6</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-14 20:56:13 +0000</bug_when>
    <thetext>PYTHON3 migration has been reverted.
SHA-1: 1ccc4d895dd8d659d016efcd6ef8a48749aba1d0

Python3 migration is the fundamental change. It requires every developer
to install Python3. Before this migration, the well communication and wide
verification must be done. But now, most people is not aware of this change,
and not try it. So, Python3 migration is reverted and be moved to edk2-staging
Python3 branch for the edk2 user evaluation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5292</commentid>
    <comment_count>7</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2018-10-16 21:51:27 +0000</bug_when>
    <thetext>The migration from python2 to python3 is very important. But it is also something that cannot be done as an immediate switch.
Some corporate environments that do not currently provide python3 support cannot directly switch over. IT departments need to approve of the idea, schedule rollouts and so on.

If at all possible, we need to take the route through coexisting python2 and python3 support, and retire python2 support at some point in the future.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5296</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-10-17 07:28:35 +0000</bug_when>
    <thetext>(In reply to Leif Lindholm from comment #7)

&gt; If at all possible, we need to take the route through coexisting python2 and
&gt; python3 support, and retire python2 support at some point in the future.

If this approach is chosen, I&apos;d be glad to help with Python2 regression testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5297</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-10-17 07:28:52 +0000</bug_when>
    <thetext>... just please CC me on all related patches directly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5363</commentid>
    <comment_count>10</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-10-23 10:48:53 +0000</bug_when>
    <thetext>It is more complex to make BaseTools support Python2 &amp; Python3 both. Almost all BaseTools python source files require to handle the different usage in Python2 &amp; Python3. It brings the big burden to enable, maintain and clean up BaseTools. To smoothly migration python3, another solution is to keep two copy BaseTools Python source. edksetup.sh/edksetup.bat can be used to configure Python3 or Python2 enable. Current default configuration is Python2. And in next release (2019XX), the default configuration is changed to Python3. After 201811 release tag, BaseTools Python2 source code is kept as the stable release. It will only add the critical fix. BaseTools Python3 source code is as the trunk to add new features and bug fix. Once every one migrates to python3, BaseTools Python2 source code can be removed totally.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5364</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-10-23 11:01:06 +0000</bug_when>
    <thetext>Not a bad idea at all, in my opinion!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5405</commentid>
    <comment_count>12</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2018-10-26 07:04:03 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #10)
&gt; It is more complex to make BaseTools support Python2 &amp; Python3 both. Almost
&gt; all BaseTools python source files require to handle the different usage in
&gt; Python2 &amp; Python3. It brings the big burden to enable, maintain and clean up
&gt; BaseTools. To smoothly migration python3, another solution is to keep two
&gt; copy BaseTools Python source. edksetup.sh/edksetup.bat can be used to
&gt; configure Python3 or Python2 enable. Current default configuration is
&gt; Python2. And in next release (2019XX), the default configuration is changed
&gt; to Python3. After 201811 release tag, BaseTools Python2 source code is kept
&gt; as the stable release. It will only add the critical fix. BaseTools Python3
&gt; source code is as the trunk to add new features and bug fix. Once every one
&gt; migrates to python3, BaseTools Python2 source code can be removed totally.

I have to be honest here: this was one idea I considered but did not mention because I felt it was a bit too hacky. However, if that is the only reasonable way of achieving a soft migration, then I say go for it.

My main concern is with regards to bugfixes and new features. Sure, long-term that can be something we drop for the Python2 scripts, to encourage people to migrate. But I expect we may need to keep both versions for a long time.

The benefit we gain is that for as long as Python2 is the default, we can make much more substantial changes to the Python3 scripts than would otherwise be possible.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5557</commentid>
    <comment_count>13</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-09 10:04:20 +0000</bug_when>
    <thetext>1. Python2 and Python3 are kept both. By default, any change will be for Python3. If the submitter request the change for Python2, he needs to list it in BZ description. If he has the strong reason, Python2 can add new feature. We can regard Python2 as branch, and Python3 as trunk. 
2. There are some ways to switch Python2 and Python3. I prefer option 2 to let user obviously set environment variable. 
a. edksetup.bat/edksetup.sh add new option to enable Python3. 
b. edksetup.bat/edksetup.sh base on environment variable to know Python2 or Python3. 
c. edksetup.bat/edksetup.sh auto find Python version. If python2 is installed, Python2 script will be used. If Python3 is installed, Python3 script will be used. 
3. Python3.7 has the big perfomrnace improvement. When run Python3.7 with Python3 script, it will bring ~20 improvement in AutoGen phase.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5618</commentid>
    <comment_count>14</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-11-16 11:05:55 +0000</bug_when>
    <thetext>I am concerned that as long as both Python2 and Python3 sources are in BaseTools, that we will be required to update both for all features and all bug fixes because we can not predict what version of Python different consumers may use.

Code that takes advantage of a new feature only available in Python3 will break for consumers that use Python2 for development or automated systems for CI or testing.

I think there are really only 2 reasonable options:
1) Update BaseTools to support both Py2 and Py3 in single set of maintainable sources.
2) Update BaseTools to only support Py3 and generate an error if run from Py2.

Option #2 was previously rejected by the community.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5960</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-12-26 16:08:57 +0000</bug_when>
    <thetext>Recent message from Liming on the list:

[RFC] Edk2 BaseTools Python3 Migration Update
https://lists.01.org/pipermail/edk2-devel/2018-December/034459.html

On 12/25/18 08:50, Gao, Liming wrote:
&gt; On Python3 migration https://bugzilla.tianocore.org/show_bug.cgi?id=55, we
&gt; update Edk2 BaseTools python source code with the compatible syntax to
&gt; support Python2 and Python3 both. Here is code
&gt; https://github.com/lgao4/edk2/tree/Python3 for dry run. To enable Python3,
&gt; you just need to set PYTHON3_ENABLE environment as TRUE, then type
&gt; edksetup.bat/edksetup.sh. Without this setting, BaseTools still run with
&gt; Python2. So, there is no change for current usage model with Python27.
&gt;
&gt; But, we have no enough resource to fully verify Python2 and Python3 both.
&gt; We will focus on Python3 validation. If anyone can help verify Python2, it
&gt; will be great. And, if you meet with the issue on Python2, please file BZ.
&gt; We still fix them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5994</commentid>
    <comment_count>16</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-06 19:53:11 +0000</bug_when>
    <thetext>change owner to Bob.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6015</commentid>
    <comment_count>17</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-01-08 11:33:17 +0000</bug_when>
    <thetext>The discussion linked in comment 15 continues in January 2019, here:

https://lists.01.org/pipermail/edk2-devel/2019-January/034531.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6229</commentid>
    <comment_count>18</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-01-29 08:10:24 +0000</bug_when>
    <thetext>The following posting from Bob:

  [edk2] [Patch v2 00/33] BaseTools python3 migration patch set
  https://lists.01.org/pipermail/edk2-devel/2019-January/035815.html
  http://mid.mail-archive.com/20190129020610.14300-1-bob.c.feng@intel.com

works fine for me, with python2 and python3, in various environments:

  https://lists.01.org/pipermail/edk2-devel/2019-January/035895.html
  http://mid.mail-archive.com/abaa7b61-8623-8c16-0584-9c8f99d2b1f2@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6262</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-01 03:49:00 +0000</bug_when>
    <thetext>The v2 series referenced in comment 18 has been pushed as commit range cc01b26e053c..8189be6fd7d7, fixing this BZ.

Further fixes should be tracked in separate BZs. Closing this one.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>246</bug_id>
          
          <creation_ts>2016-11-23 03:36:27 +0000</creation_ts>
          <short_desc>UefiCpuDriver IA32 stack guard will report #double fault, instead of #page fault on violation. It brings confusing to the developer.</short_desc>
          <delta_ts>2016-12-07 22:25:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>vanjeff_919</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1004</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-11-23 03:36:27 +0000</bug_when>
    <thetext>Current EDKII SMM page protection will lock GDT.
If IA32 stack guard is enabled, the page fault handler will do task switch.
This task switch need write busy flag in GDT, and write TSS.

However, the GDT and TSS is locked at that time. so the double fault happens.

One possible solution is:
We make a special GDT which CS/DS at read-only page, and TSS segment at read-write page.
Then the normal code can being protected, because it does not touch TSS.
When page fault happens, the TSS region can be writeable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1100</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-01 19:06:40 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1136</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-12-07 22:25:35 +0000</bug_when>
    <thetext>fixed in e4435f710cea2d2f10cd7343d545920867780086</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>162</bug_id>
          
          <creation_ts>2016-10-20 20:53:35 +0000</creation_ts>
          <short_desc>Add the build option &quot;/D DISABLE_NEW_DEPRECATED_INTERFACES&quot; in package DSC files</short_desc>
          <delta_ts>2019-08-19 17:12:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hot.tian</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>673</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:53:35 +0000</bug_when>
    <thetext>This one is separated from bug 93, and for EmulatorPkg OvmfPkg


We are planning to add the following build option in package DSC files:
[BuildOptions]
  *_*_*_CC_FLAGS = /D DISABLE_NEW_DEPRECATED_INTERFACES

The goal is to make sure that the deprecated APIs will not be used in our code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>674</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 20:55:48 +0000</bug_when>
    <thetext>Assign to package owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>689</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-10-21 05:08:16 +0000</bug_when>
    <thetext>OvmfPkg cloned / separated out as bug 166.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8812</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-07 00:26:19 +0000</bug_when>
    <thetext>Reassign to new owner

Module updates are required to use the safe string and safe PcdLib
functions.

Patch email for review

https://edk2.groups.io/g/devel/message/44969</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8850</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-07 22:35:46 +0000</bug_when>
    <thetext>Patch email for review V2

https://edk2.groups.io/g/devel/message/45102</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9056</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:09:38 +0000</bug_when>
    <thetext>Patch email V3 for review

https://edk2.groups.io/g/devel/message/45297
https://edk2.groups.io/g/devel/message/45299</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9057</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:10:36 +0000</bug_when>
    <thetext>Patch email V4 for review

https://edk2.groups.io/g/devel/message/45758
https://edk2.groups.io/g/devel/message/45761</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9058</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:11:32 +0000</bug_when>
    <thetext>Patch email V5 for review

https://edk2.groups.io/g/devel/message/45953
https://edk2.groups.io/g/devel/message/45956</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9059</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:12:14 +0000</bug_when>
    <thetext>Pushed 76e12fa334..74c22c59e3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>994</bug_id>
          
          <creation_ts>2018-06-25 22:51:16 +0000</creation_ts>
          <short_desc>BaseTools : ElfConvert Tool update the VerboseMsg to same with the comment</short_desc>
          <delta_ts>2018-07-22 22:54:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4211</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-25 22:51:16 +0000</bug_when>
    <thetext>ElfConvert iterates over the section headers and handles the following section types:
SHT_PROGBITS: Copy
SHT_NOBITS: memset to 0

the default case looks like this:
//
//  Ignore for unkown section type.
//
VerboseMsg (&quot;%s unknown section type %x. We directly copy this section into Coff file&quot;, mInImageName, (unsigned)Shdr-&gt;sh_type);

The comment kinda conflicts with the debug message. Is not copying unknown sections a bug?
I guess this could lead to problems if a module would ever rely on non-standard sections being available.

Thanks
Michael</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4217</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-27 21:05:57 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4373</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-22 22:54:10 +0000</bug_when>
    <thetext>fix it in SHA-1: 1794b98f72fb087f012602c4d1450762dd62906d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>440</bug_id>
          
          <creation_ts>2017-03-22 22:03:58 +0000</creation_ts>
          <short_desc>DevPathFromTextiSCSI makes bad assumptions in parsing protocol</short_desc>
          <delta_ts>2017-04-07 03:26:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Warner Losh">imp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1660</commentid>
    <comment_count>0</comment_count>
    <who name="Warner Losh">imp</who>
    <bug_when>2017-03-22 22:03:58 +0000</bug_when>
    <thetext>DevPathFromTextiSCSI in MdePkg/Library/UefiDevicePathLib/DevicePathFromText.c      makes a bad assumption in parsing an iSCSI command string. It kinda assumes that it will never be fed anything other than TCP as a protocol (since that&apos;s the only one), but it does it in a sneaky way:
  ISCSIDevPath-&gt;NetworkProtocol  = (UINT16) StrCmp (ProtocolStr, &quot;TCP&quot;);
which takes the undefined return code from StrCmp and casts it to a uint16. This may result in a false positive if the passed in characters differ by a multiple of 65536 since that will truncate to 0.

  ISCSIDevPath-&gt;NetworkProtocol  = StrCmp (ProtocolStr, &quot;TCP&quot;) != 0;

retains this behavior in a more standards compliant way (it will now be either 0 or 1 and can&apos;t be anything else). However, the UEFI standard only defined TCP as protocol 0 in section 9.3.5.21, but defines nothing else. Not sure how to signal errors in this code path, but if that&apos;s possible, when the StrCmp returns != 0, an error needs to be thrown because the parsing is bogus. There doesn&apos;t seem to be much error checking in this code, so it&apos;s hard to find an exemplar of proper behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1669</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-23 20:22:09 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1677</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-23 21:42:47 +0000</bug_when>
    <thetext>yeah, I agree it&apos;s a tricky implementation. Since the Spec already have declaimed that 0 is TCP Protocol and 1+ is reserved, we can refine it as below:

  if (StrCmp (ProtocolStr, L&quot;TCP&quot;) == 0) {
    ISCSIDevPath-&gt;NetworkProtocol = 0;
  } else {
    //
    // Undefined and reserved.
    //
    ISCSIDevPath-&gt;NetworkProtocol = 1;
  }


Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1774</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-07 03:26:31 +0000</bug_when>
    <thetext>
Commit:

https://github.com/tianocore/edk2/commit/7571a1c191e19b48d33a33c8b7763b49999700ee</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>804</bug_id>
          
          <creation_ts>2017-12-01 00:17:12 +0000</creation_ts>
          <short_desc>DHCP Process Starts Even there is NO Media Connected</short_desc>
          <delta_ts>2018-01-01 21:29:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3167</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-12-01 00:17:12 +0000</bug_when>
    <thetext>[Description]
UEFI spec defines EFI_NO_MEDIA status code for DHCP4/6.Start(), but our current implementation doesn&apos;t check it.

&gt; DHCP Process Starts Even there is NO Media Connected
&gt; When we try to Assign IP to SUT  using ifconfig command from Shell or 
 IPv4 Network Configuration BIOS setup page DHCP process start even 
 there is no LAN cable connected to specific port.
 
It will be better to implement it in order to sync with UEFI spec.


Thanks,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3168</commentid>
    <comment_count>1</comment_count>
      <attachid>122</attachid>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-12-01 00:34:31 +0000</bug_when>
    <thetext>Created attachment 122
Patch to Check Media Status Before DHCP start

The patch provides the implantation of handling EFI_NO_MEDIA status code for 
DHCP4/6.Start()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3169</commentid>
    <comment_count>2</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-12-01 00:35:13 +0000</bug_when>
    <thetext>Please review the patch and provide your comments.

Thanks,
Karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3176</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-12-01 06:54:48 +0000</bug_when>
    <thetext>On-list discussion and patches:

http://mid.mail-archive.com/A885E3F3F1F22B44AF7CC779C062228EE069C9D4@VENUS1.in.megatrends.com

http://mid.mail-archive.com/1512117526-11308-1-git-send-email-jiaxin.wu@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3201</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-07 19:16:13 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3298</commentid>
    <comment_count>5</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-01-01 21:29:16 +0000</bug_when>
    <thetext>Commit version:

https://github.com/tianocore/edk2/commit/5d34573df938ea7061fdd30a98acc71c4d4dc638

https://github.com/tianocore/edk2/commit/8a5ef41ebb3dded5e9578ff4b716b87416b9c95f</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>122</attachid>
            <date>2017-12-01 00:34:31 +0000</date>
            <delta_ts>2017-12-01 00:34:31 +0000</delta_ts>
            <desc>Patch to Check Media Status Before DHCP start</desc>
            <filename>Patch_CheckMediaStatusBeforeDHCP.rar</filename>
            <type>application/octet-stream</type>
            <size>35486</size>
            <attacher name="karunakar">karunakarp</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>714</bug_id>
          
          <creation_ts>2017-09-20 19:38:01 +0000</creation_ts>
          <short_desc>Update EDK II C Coding Standards to allow multiple arguments per line in a function call</short_desc>
          <delta_ts>2022-11-15 22:00:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II C Coding Standards</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2752</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-09-20 19:38:01 +0000</bug_when>
    <thetext>The following link to the email thread is a proposal to allow
multiple arguments per line for function calls.

https://lists.01.org/pipermail/edk2-devel/2017-August/013165.html

  The &quot;one argument per line&quot; style as the sole possibility takes up too
  much vertical space, wastes perfectly good horizontal space, and causes a
  constant jump-to-the-left eye movement for the reader.

  Now that we have limited the line length to 80 columns, the &quot;condensed
  arguments&quot; style cannot be abused; permit it.

Further discussions summarized that there are 3 styles possible
for a function calls:

(1) function name and all args in same line
(2) function name and each arg and ); each on their own line
(3) Multiple args in the same line

(1) is preferred over the others if it fits in 80 columns.

(2) is the style commonly used in EDK II source files if
    the call does not fit in 80 columns.

There are examples of a vararg function calls in the EDK II
source files (e.g. InstallMultipleProtocolInterfaces()) where
the arguments are provided in pairs.  Putting the arguments
pairs on their own line makes sense, which can be covered by (3).

Once we allow style (3), it becomes a choice for developers, 
reviewers, and package owners to select style (2) or (3) and
potentially  allow use of (3) for use cases that do not involve
tuples of arguments.

Update the EDK II C Coding Standard to clearly document all 3
styles and allow multiple arguments per line.  The vararg tuples
is a use case where the multiple arguments per line can be considered 
preferred or required.  Package maintainers can choose to allow
or reject patches that use multiple arguments per line for use
cases that do not involve vararg tuples.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2757</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-21 20:04:27 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16471</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-28 10:29:39 +0000</bug_when>
    <thetext>Alternative link to original thread:

http://mid.mail-archive.com/20170811164851.9466-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16472</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-28 10:40:17 +0000</bug_when>
    <thetext>[edk2] [edk2-CCodingStandardsSpecification PATCH 0/2] improvements related to line wrapping
[edk2] [edk2-CCodingStandardsSpecification PATCH 1/2] Source Files / General Rules: limit line lengths to 80 columns
[edk2] [edk2-CCodingStandardsSpecification PATCH 2/2] Source Files / Spacing / Multi-line func. calls: allow condensed arguments

http://mid.mail-archive.com/20170811164851.9466-1-lersek@redhat.com
http://mid.mail-archive.com/20170811164851.9466-2-lersek@redhat.com
http://mid.mail-archive.com/20170811164851.9466-3-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20037</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-11-15 22:00:16 +0000</bug_when>
    <thetext>Close it, because Edk2 has enabled UncrustifyCheck.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>178</bug_id>
          
          <creation_ts>2016-10-26 13:32:47 +0000</creation_ts>
          <short_desc>Add xxxxHashAll APIs to facilitate the digest computation of blob data</short_desc>
          <delta_ts>2016-11-03 04:20:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Qin Long">qin.long</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>727</commentid>
    <comment_count>0</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2016-10-26 13:32:47 +0000</bug_when>
    <thetext>There were lots of wrapper implementation (with the sequent call of xxxGetContextSize, xxxInit, xxxxUpdate, xxxxFinal APIs) to provide HashAll supports in EDKII codes.
The xxxxHashAll APIs will help to eliminate the duplicated implementations, and facilitate the digest computation of blob data.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>767</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-27 20:10:28 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>829</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2016-11-03 04:20:25 +0000</bug_when>
    <thetext>The fix is done with Commit (b7d1ba0a8ae9719689ad9725e02e4cb5d469a3ae)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>540</bug_id>
          
          <creation_ts>2017-05-15 23:46:24 +0000</creation_ts>
          <short_desc>consume FIT table for Microcode udpate</short_desc>
          <delta_ts>2018-05-09 04:32:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2039</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-05-15 23:46:24 +0000</bug_when>
    <thetext>Current Microcode update feature does not consider FIT table.

If Microcode layout is updated, the entry in FIT table is wrong.

The recommendation is that, the Microcode update solution can check the existence of FIT table, which is defined in IntelSiliconPkg\Include\IndustryStandard\FirmwareInterfaceTable.h.

If FIT exists, Microcode entry should be stick to the FIT entry.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2087</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-18 20:17:34 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3136</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-11-28 21:21:14 +0000</bug_when>
    <thetext>To consume FIT table for Microcode udpate, UefiCpuPkg\Feature\Capsule\MicrocodeUpdateDxe will need be updated to consume IntelSiliconPkg\Include\IndustryStandard\FirmwareInterfaceTable.h, but UefiCpuPkg could not depend on IntelSiliconPkg.

Since the microcode update feature is specific to Intel, we can first move the microcode udpate feature code from UefiCpuPkg to IntelSiliconPkg [first step], then update the code to consume FIT table [second step].</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3143</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-11-29 20:30:04 +0000</bug_when>
    <thetext>The first step has been done at https://github.com/tianocore/edk2/compare/7ce5af40c98b...43e12eeac8b1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3166</commentid>
    <comment_count>4</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-11-30 20:37:32 +0000</bug_when>
    <thetext>A missing change in 43e12eeac8b125165b8a93c3501925a8893544ef has been done at 0a9e1f68418c62e11484733c546572b0f8313b5e.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3987</commentid>
    <comment_count>5</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-05-09 04:32:30 +0000</bug_when>
    <thetext>The second step has been done at e91797885aee58ae65d7935332e580dc8517e8f6.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>921</bug_id>
          
          <creation_ts>2018-04-03 18:08:05 +0000</creation_ts>
          <short_desc>octal print convert to hex string</short_desc>
          <delta_ts>2018-07-27 01:45:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaben Carsey">jaben.carsey</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3816</commentid>
    <comment_count>0</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2018-04-03 18:08:05 +0000</bug_when>
    <thetext>in Workspace\MetaFileParser around line 370 we have this code.  it splits a decimal number, then prints it octal, string concatenates it, then interprets it as hex.  this seems incorrect.

if Name == &apos;INF_VERSION&apos;:
    if re.match(r&apos;0[xX][\da-f-A-F]{5,8}&apos;, Value):
        self._Version = int(Value, 0)   
    elif re.match(r&apos;\d+\.\d+&apos;, Value):
        ValueList = Value.split(&apos;.&apos;)
        Major = &apos;%04o&apos; % int(ValueList[0], 0)
        Minor = &apos;%04o&apos; % int(ValueList[1], 0)
        self._Version = int(&apos;0x&apos; + Major + Minor, 0)
    else:
        EdkLogger.error(&apos;Parser&apos;, FORMAT_INVALID, &quot;Invalid version number&quot;,
                        ExtraData=self._CurrentLine, File=self.MetaFile, Line=self._LineIndex + 1)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3861</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-04-11 21:05:59 +0000</bug_when>
    <thetext>bug scrub: assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4432</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-27 01:45:17 +0000</bug_when>
    <thetext>fix it SHA-1: f413763b6b8f2798595d468cf868ae5985d3eabc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>92</bug_id>
          
          <creation_ts>2016-07-28 11:59:05 +0000</creation_ts>
          <short_desc>Please refresh the UEFI shell binaries for ARM and AARCH64</short_desc>
          <delta_ts>2016-08-02 06:28:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellBinPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>388</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2016-07-28 11:59:05 +0000</bug_when>
    <thetext>Please refer to commit 227a1ac2d04504eee4c624f534ea3fcbb8140029. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>393</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-07-28 20:37:53 +0000</bug_when>
    <thetext>Bug Scrub: Change status to confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>399</commentid>
    <comment_count>2</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2016-08-02 06:28:38 +0000</bug_when>
    <thetext>Pushed as 8134f7d9d265</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>456</bug_id>
          
          <creation_ts>2017-03-31 23:09:18 +0000</creation_ts>
          <short_desc>[CryptoPkg] Remove the duplicated e_os2.h in CryptoPkg/Include/openssl</short_desc>
          <delta_ts>2018-12-12 02:28:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Qin Long">qin.long</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1721</commentid>
    <comment_count>0</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-03-31 23:09:18 +0000</bug_when>
    <thetext>(This is one reminder to track the next follow-up on OpenSSL fix upstreaming and CryptoPkg cleanup)

The BaseCryptLib consumer should ONLY include &quot;BaseCryptLib.h&quot; to
use the exposed APIs. But some external modules call OpenSSL API
directly via include &quot;openssl/xxx.h&quot;, which causes some macro
re-definitions errors in e_os2.h (under default _WIN32/_WIN64).
e_os2.h in openssl source can be enhanced to eliminate this potential risk.

We duplicate one e_os2.h with the following changes to fix this
kind of macro re-definition error.
  -# if defined(OPENSSL_SYS_UEFI) &amp;&amp; !defined(ssize_t)
  +# if defined(OPENSSL_SYS_UEFI) &amp;&amp; !defined(ossl_ssize_t)
  +#  if !defined(ssize_t)
   #   define ossl_ssize_t int
  +#  else
  +#   define ossl_ssize_t ssize_t
  +#  endif
   #  define OSSL_SSIZE_MAX INT_MAX
   # endif

This is just one workaround before other external modules were
cleaned. And this update of e_os2.h could also be upstreaming
into openssl to eliminate the potential risk.

The duplicated e_os2.h can be removed once a new stable release to include this fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1752</commentid>
    <comment_count>1</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2017-04-06 04:17:49 +0000</bug_when>
    <thetext>One OpenSSL PR was submitted for tracking this issue:
    https://github.com/openssl/openssl/pull/3121</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1755</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-06 20:05:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5836</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-12-12 02:28:59 +0000</bug_when>
    <thetext>According to https://github.com/openssl/openssl/pull/3121, the patch has been r-b and pushed. So mark this tracker as resolved.


==========================
pracj3am added a commit to cdn77/openssl that referenced this pull request on Aug 23 2017 
 
 
e_os2.h: Refine OSSL_SSIZE definition under UEFI environment … 
Under UEFI build environment, we may encounter the OSSL_SSIZE macro
re-definition error in e_os2.h if any module call OpenSSL API directly
by including &quot;openssl/xxxx.h&quot; (caused by the predefined _WIN32/_WIN64
macro, which should have been un-defined under OPENSSL_SYS_UEFI).

Though it&apos;s not one recommended usage, this patch could still eliminate
the possible build issue by refining the OSSL_SSIZE definition under
OPENSSL_SYS_UEFI.

Reviewed-by: Rich Salz &lt;rsalz@openssl.org&gt;
Reviewed-by: Andy Polyakov &lt;appro@openssl.org&gt;
(Merged from openssl#3121)

(cherry picked from commit 005f676)
============================</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>368</bug_id>
          
          <creation_ts>2017-02-07 13:35:23 +0000</creation_ts>
          <short_desc>OvmfPkg/AcpiPlatformDxe: support multiply pointed-to ACPI tables in downloaded fw_cfg blobs</short_desc>
          <delta_ts>2017-03-30 16:21:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Phil Dennis-Jordan">phil</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>phil</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1394</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-02-07 13:35:23 +0000</bug_when>
    <thetext>If multiple QEMU_LOADER_ADD_POINTER linker/loader commands point to the same offset in the same fw_cfg blob, *and* the data at that offset looks like an ACPI table header, OVMF will pass the table to EFI_ACPI_TABLE_PROTOCOL.InstallAcpiTable() multiple times (once for each QEMU_LOADER_ADD_POINTER command), in the second phase of processing.

This is undesirable for two reasons:

- For some table types, only one installed instance is permitted by the ACPI spec, therefore MdeModulePkg/Universal/Acpi/AcpiTableDxe justifiedly rejects the request with EFI_ACCESS_DENIED. Which in turn aborts and rolls back the processing of the linker/loader script.

- Other types are allowed to have several instances installed (SSDT is one example), therefore MdeModulePkg/Universal/Acpi/AcpiTableDxe will not reject the multi-install. But that&apos;s even worse, because we would end up with multiple instances of the exact same table, just because several QEMU_LOADER_ADD_POINTER commands reference it.

The improvement is to short-circuit Process2ndPassCmdAddPointer() [OvmfPkg/AcpiPlatformDxe/QemuFwCfgAcpi.c] with memoization. After computing &quot;PointerValue&quot;, if it has ever been seen / handled by Process2ndPassCmdAddPointer(), exit immediately with EFI_SUCCESS. This is justified because all actions after that point would be:

- either idempotent:
  - recognize RSDT / XSDT and return with EFI_SUCCESS without doing anything,
  - recognize a non-SDT-header pattern under &quot;PointerValue&quot;, and mark the
    containing blob (again) as &quot;hosts some other things than ACPI tables&quot;,
    and return with EFI_SUCCESS
- or incorrect:
  - see the duplicate EFI_ACPI_TABLE_PROTOCOL.InstallAcpiTable() call
    described above.

Calling OrderedCollectionInsert() is entirely right for this, because
- it simultaneously inserts the new item, and finds any existing, colliding
  item;
- if OrderedCollectionInsert() fails due to out of memory, that&apos;s good enough
  reason to abort the processing;
- if OrderedCollectionInsert() succeeds, but
  EFI_ACPI_TABLE_PROTOCOL.InstallAcpiTable() fails (for some other reason), we
  don&apos;t even need to roll back the insertion, since the failure of the latter
  is fatal anyway... but, for general cleanliness, we should still invoke
  OrderedCollectionDelete(). (The Node parameter is readily available from
  the successful OrderedCollectionInsert() call.)

QEMU doesn&apos;t yet produce a linker/loader script that leads to duplicate table installation, but there&apos;s an upcoming use case:

msgid &lt;CAAibmn1eEFMdn_-hcaFudOO8D7crkfYYw+k88=CGJfJ0fmU6JA@mail.gmail.com&gt;
https://www.mail-archive.com/qemu-devel@nongnu.org/msg427875.html

On 02/06/17 17:30, Phil Dennis-Jordan wrote:
&gt;  - OS X/macOS guests currently can&apos;t reboot with upstream Qemu, as it
&gt; expects the reset register to be advertised by the FADT, but x86 Qemu
&gt; currently only publishes a rev1 FADT, which lacks said register spec.
&gt; (OVMF still requires a large array of patches to boot OS X/macOS,
&gt; which is a separate issue.)
&gt;  - I therefore would like to update Qemu such that it publishes a rev3
&gt; (ACPI 2.0) or newer FADT, including the reset register.
&gt;  - Windows 10 appears to require both DSDT AND X_DSDT to be filled for
&gt; rev3-rev4 FADTs, else it won&apos;t boot at all. (Not sure about 5+)
&gt;  - Guest OS backwards compatibility without a flag is desirable, and
&gt; ACPI 1.0 era guest OSes will not try to find the DSDT via X_DSDT, so
&gt; we need to fill both.
&gt;  - This should work with both SeaBIOS and OVMF, so Qemu needs to set
&gt; up linker commands for both DSDT and X_DSDT, and OVMF itself needs to
&gt; produce a FADT with both fields filled.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1605</commentid>
    <comment_count>1</comment_count>
    <who name="Phil Dennis-Jordan">phil</who>
    <bug_when>2017-03-11 20:57:16 +0000</bug_when>
    <thetext>Assigned to myself, patch for fixing this to follow shortly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1702</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-29 21:13:31 +0000</bug_when>
    <thetext>v1 at https://lists.01.org/pipermail/edk2-devel/2017-March/009199.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1703</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-29 21:13:48 +0000</bug_when>
    <thetext>...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1706</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-30 14:46:55 +0000</bug_when>
    <thetext>v2 at https://lists.01.org/pipermail/edk2-devel/2017-March/009274.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1707</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-30 16:21:40 +0000</bug_when>
    <thetext>Fixed in commit 072060a6f81b (&quot;OvmfPkg: Allow multiple add-pointer linker commands to same ACPI table&quot;, 2017-03-30).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>732</bug_id>
          
          <creation_ts>2017-10-09 23:34:55 +0000</creation_ts>
          <short_desc>Display Initiator IP when DHCP enabled</short_desc>
          <delta_ts>2018-01-08 00:01:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karunakar">karunakarp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2843</commentid>
    <comment_count>0</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-10-09 23:34:55 +0000</bug_when>
    <thetext>[Feature]
In ISCSI Attempt Page Display, Initiator IP when DHCP enabled

[Details]
Display Initiator IP in ISCSI Configuration Page when Initiator info is enabled for DHCP, find detailed description below

1.Add an Attempt with Initiator info Enabled for DHCP
2.Save changes
3.On next reboot, Previously added ISCSI attempt will be tried and ISCSI DHCP server will assign an IP to the client (Initiator IP).
4.It is better to display Initiator IP in same attempt Page like below

Ex:- 
     Initiator IP : 192.168.0.5         // DHCP Process was success
     Initiator IP : 0.0.0.0             // DHCP process failed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2851</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-10-10 20:52:53 +0000</bug_when>
    <thetext>Working on the fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2864</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-12 20:04:19 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3351</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-01-08 00:01:56 +0000</bug_when>
    <thetext>Commit version:

https://github.com/tianocore/edk2/commit/e350dc8057321fcfdfd2061709dc0cadefbd06bd

https://github.com/tianocore/edk2/commit/5e146cd9796ab5b79e5d426fed91f7864e3280c7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>646</bug_id>
          
          <creation_ts>2017-07-21 03:39:21 +0000</creation_ts>
          <short_desc>[Shell] &quot;drivers&quot; should show &quot;IMAGE NAME&quot; instead of &quot;IMAGE PATH&quot; in non-SFO mode</short_desc>
          <delta_ts>2017-08-10 00:34:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2492</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-21 03:39:21 +0000</bug_when>
    <thetext>It&apos;s to align to UEFI Shell spec and also align to the behavior of EDK Shell.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2493</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-21 03:42:34 +0000</bug_when>
    <thetext>Additionally, non-SFO mode should use &quot;X&quot;/&quot;-&quot; to indicate whether the DriverConfiguration/DriverDiag protocol is present or not.
&quot;Y&quot;/&quot;N&quot; is used in SFO mode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2494</commentid>
    <comment_count>2</comment_count>
      <attachid>89</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-21 03:43:11 +0000</bug_when>
    <thetext>Created attachment 89
screen shot</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2499</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-23 21:45:43 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2518</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-27 20:06:20 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2578</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-08-10 00:34:18 +0000</bug_when>
    <thetext>pushed @ 416d48f755518fd1d202b97be2e9944df6e8f0d4 and d506d8db7168c2c12a9e7afe0bf9047d14ec4c54</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>89</attachid>
            <date>2017-07-21 03:43:11 +0000</date>
            <delta_ts>2017-07-21 03:43:11 +0000</delta_ts>
            <desc>screen shot</desc>
            <filename>drivers.png</filename>
            <type>image/png</type>
            <size>31779</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>196</bug_id>
          
          <creation_ts>2016-10-31 23:42:24 +0000</creation_ts>
          <short_desc>tooldef class not include the newly Env when the prebuild script update the Env</short_desc>
          <delta_ts>2016-11-14 02:31:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>800</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-31 23:42:24 +0000</bug_when>
    <thetext>Prebuild script may update os.environ, but current tooldef class not include the newly ENV variables if user use the -D PREBUILD=prebuild script method to call the prebuild script. so it would cause som env variables are incorrect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>801</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-31 23:43:01 +0000</bug_when>
    <thetext>
Assign to Yonghong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>826</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-03 03:47:39 +0000</bug_when>
    <thetext>the fix is  SHA-1: a0c9ce31b686f1aad449e3572fddbe981fe9e1c7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>560</bug_id>
          
          <creation_ts>2017-05-18 20:17:48 +0000</creation_ts>
          <short_desc>Use FINIT instead of define bytes in X64 specific BaseUefiCpuLib InitializeFpu.nasm file</short_desc>
          <delta_ts>2017-05-24 21:18:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>vanjeff_919</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2017</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2088</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-18 20:17:48 +0000</bug_when>
    <thetext>The IA32 version of InitializeFpu.nasm uses FINIT instruction,
but the X64 version still uses define bytes of hex values for 
the FINIT instruction.

This X64 NASM file should be updated to use FINIT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2089</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-05-18 20:19:55 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2101</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 02:37:22 +0000</bug_when>
    <thetext>Patch email sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2111</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-19 17:17:11 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/b9dbc03e5a4c90b9e3efe0e0e8c014c428528261</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2162</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2017-05-24 20:12:57 +0000</bug_when>
    <thetext>Commit to UDK2017  branch

https://github.com/tianocore/edk2/commit/e10f7f1baeaa9ca250f353e6f1b62d00f53306ed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>110</bug_id>
          
          <creation_ts>2016-09-04 22:31:09 +0000</creation_ts>
          <short_desc>make EDKII PEI recovery file name configurable</short_desc>
          <delta_ts>2016-10-25 02:45:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Feng Tian">feng.tian</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>466</commentid>
    <comment_count>0</comment_count>
    <who name="Feng Tian">feng.tian</who>
    <bug_when>2016-09-04 22:31:09 +0000</bug_when>
    <thetext>[background]
In EDKII implementation, we hardcode below PEI recovery file name. It&apos;s better to make it to be configurable.

In PeiCdExpress.h
#define PEI_RECOVERY_FILE_NAME  &quot;FVMAIN.FV&quot;

In FatLitePeim.h
#define PEI_FAT_RECOVERY_CAPSULE_WITHOUT_NT_EMULATOR  L&quot;fvmain.fv&quot;

[more info]
Have discussed with Mike, He agree this direction.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>540</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-09-29 20:29:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>709</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-10-25 02:45:03 +0000</bug_when>
    <thetext>fixed in 46cd2cb6a7ba5b1fdaff1eb18a13dc399d6a7fe2, 9753360756bc9d28f3b1cc59624e0b4fe3618870, 08bec91eba7cc8c8a831592137503f23e7fb8f7a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>386</bug_id>
          
          <creation_ts>2017-02-17 00:19:08 +0000</creation_ts>
          <short_desc>no PEI phase variable driver in OVMF platform</short_desc>
          <delta_ts>2020-05-08 07:47:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1689</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2706</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rocky">rocky.ni</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1466</commentid>
    <comment_count>0</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2017-02-17 00:19:08 +0000</bug_when>
    <thetext>I find there is no variable driver in ovmf, can we add this driver in ovmf?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1467</commentid>
    <comment_count>1</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2017-02-17 00:38:17 +0000</bug_when>
    <thetext>Just clarification, no Variable driver found in PEI phase.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1472</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-02-17 07:58:19 +0000</bug_when>
    <thetext>It is correct, OVMF does not pull in the read-only variable driver PEIM.

What do you need it for?

Currently, OVMF has no need to read any variables in the PEI phase. If you have an OVMF feature or enhancement in mind, for upstream OvmfPkg/, that requires r/o variable access in the PEI phase, we can consider pulling in the PEIM.

Otherwise, without an actual use case / client in the PEI phase, I don&apos;t think it should be pulled in.

For example, if you have a PEIM that needs read access to variables, but you don&apos;t want to upstream that PEIM to upstream OvmfPkg/OvmfPkg*.dsc, then I think the variable PEIM should also be pulled in only in your local test environment.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1483</commentid>
    <comment_count>3</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2017-02-21 00:21:19 +0000</bug_when>
    <thetext>I plan to use OvmfPkg do some PEI test. the test cases will read Variable Pei. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1485</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-02-21 03:53:05 +0000</bug_when>
    <thetext>Thanks for confirming. In this case, as I proposed above, given that the dependent PEIMs will not be upstreamed, for the long term, to OvmfPkg in edk2, please pull in VariablePei too in your local test environment (where you add the PEIMs meant to be tested to the DSC / FDF files anyway).

Thus, I&apos;m closing this as INVALID -- without a direct / long term client for VariablePei, we should avoid fattening OVMF. The FV / FD space is quite scarce. I hope this is alright with you. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1613</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-14 17:32:45 +0000</bug_when>
    <thetext>I&apos;m reopening this bug, because we have found an upstreamable use case for the variable PEIM -- UEFI memmap defragmentation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1614</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-03-14 19:33:37 +0000</bug_when>
    <thetext>This is being addressed as part of the following series:

Subject: [PATCH 00/14] OvmfPkg: add the Variable PEIM, defragment the UEFI memmap
Message-Id: &lt;20170314233246.17864-1-lersek@redhat.com&gt;
URL: https://lists.01.org/pipermail/edk2-devel/2017-March/008525.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2001</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-05-05 13:08:59 +0000</bug_when>
    <thetext>Postponing this for now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2440</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-07-14 12:40:16 +0000</bug_when>
    <thetext>See also
https://lists.01.org/pipermail/edk2-devel/2017-March/009049.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3151</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-11-30 11:33:26 +0000</bug_when>
    <thetext>v2:
[edk2] [PATCH v2 0/8] OvmfPkg: add the Variable PEIM,
                      defragment the UEFI memmap
https://lists.01.org/pipermail/edk2-devel/2017-November/018305.html
http://mid.mail-archive.com/20171130163029.19743-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3177</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-12-01 06:56:31 +0000</bug_when>
    <thetext>I&apos;d like to close this as WONTFIX, but given that it blocks bug 594, I&apos;m only moving it back to CONFIRMED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4916</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-12 16:00:59 +0000</bug_when>
    <thetext>Bug 594, which used to depend on this one, got ultimately solved without a dependency on PEI phase variable access. Many thanks to Marc-André Lureau and Stefan Berger again for that work.

With bug 594 solved, and S4 support being practically irrelevant, there&apos;s no need to keep this BZ open. I&apos;ll be privately carrying the patches that I posted earlier.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9208</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 08:37:47 +0000</bug_when>
    <thetext>Reopening, with a dependency on bug 2122. With OvmfPkg/OvmfPkg*.dsc officially lacking Xen support (in favor of OvmfPkg/OvmfXen.dsc), the patches posted earlier for this BZ should not affect Xen in any observable way, and should no longer be rejeced.

http://mid.mail-archive.com/46ef6b76-568e-75e8-fe72-c09dfe584158@redhat.com
https://edk2.groups.io/g/devel/message/46210</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11468</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 13:24:11 +0000</bug_when>
    <thetext>Keeping this open because pre-requisite bug 2122 is not blocked due to
lack of capacity, but due to its planned schedule (bug 2122 should be
fixed around Aug 2020, per bug 2122 comment 0).

Also, dropping the dependency on bug 1086, because that bug has been
moved to edk2-platforms.

A reminder shall be here that OVMF will have to sanity-check the
MemoryTypeInformation UEFI variable in the PEI phase, as 3rd party UEFI
executables can write that variable, and bogus values maay prevent the
platform from booting:

CoreInitializeMemoryServices() [MdeModulePkg/Core/Dxe/Gcd/Gcd.c] @
edfe16a6d9f8:

&gt;|   2264    //
&gt;|   2265    // Assert if a resource descriptor HOB for the memory region described by the PHIT was not found
&gt;|   2266    //
&gt;|   2267    ASSERT (Found);
&gt;| ...
&gt;|   2339    //
&gt;|   2340    // If no memory regions are found that are big enough to initialize the DXE core, then ASSERT().
&gt;|   2341    //
&gt;|   2342    ASSERT (Length &gt;= MinimalMemorySizeNeeded);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11474</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 15:30:57 +0000</bug_when>
    <thetext>(I&apos;ve moved bug 1086 back to the DXE Core, and reinstated the dependency.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11645</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-10 10:13:26 +0000</bug_when>
    <thetext>I&apos;m dropping bug 1086 from the dependency list. Bug 1086 is a DoS for the firmware, if the OS tampers with the Memory Type Information variable. But such a DoS is not hard to recover from, in a virtual machine. (Delete / re-initialize the varstore on the host side.)

Furthermore, the symptom described in bug 1086 is possible to trigger even without OS involvement. If the guest RAM size is sharply reduced between two cold boots, and the last cold boot used huge amounts of some memory type, the firmware might not boot anyway (regardless of OS involvement).

I&apos;m planning to submit a new version of this patch set, but this time, limited to SMM. This feature has security impact for SMM, per:

  A Tour Beyond BIOS
  Secure SMM Communication in the EFI Developer Kit II

Memory Type Information is discussed (recommended) at length in the paper, plus the &quot;Call for action&quot; section in the end includes it in the summary:

&gt; Call for action
&gt; 1) A platform should check its own SMM communication buffer.
&gt; 2) The DXE agent should allocate a fixed communication buffer or use the
EDKII_PI_SMM_COMMUNICATION_REGION_TABLE.
&gt; 3) The SMI handler should call SmmIsBufferOutsideSmmValid() to validate the
communication buffer.
&gt; 4) A platform should enable Memory Type Information table.
&gt; 5) A platform should report the WSMT table to indicate the capability.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11646</commentid>
    <comment_count>16</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-10 10:16:38 +0000</bug_when>
    <thetext>Also dropping bug 2122 from the dependency list. -D SMM_REQUIRE already requires QEMU/Q35 (it doesn&apos;t boot on Xen), and this BZ is now relevant specifically for SMM.

In the past, Jordan has tried to detect pflash dynamically in the PEI phase, but in the PEI phase, OVMF is not in SMM, and so QEMU denies access to the pflash.

Thus this feature needs to depend on static (build time) configuration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11659</commentid>
    <comment_count>17</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-10 18:29:03 +0000</bug_when>
    <thetext>Posted:

* [edk2-devel] [PATCH 0/5]
  OvmfPkg: improve SMM comms security with adaptive MemoryTypeInformation

http://mid.mail-archive.com/20200310222739.26717-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/55726</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11685</commentid>
    <comment_count>18</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-12 17:16:38 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #17)
&gt; Posted:
&gt; 
&gt; * [edk2-devel] [PATCH 0/5]
&gt;   OvmfPkg: improve SMM comms security with adaptive MemoryTypeInformation
&gt; 
&gt; http://mid.mail-archive.com/20200310222739.26717-1-lersek@redhat.com
&gt; https://edk2.groups.io/g/devel/message/55726

Merged as commit range 7d325f93e190..d42fdd6f8384, via &lt;https://github.com/tianocore/edk2/pull/442&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>300</bug_id>
          
          <creation_ts>2016-12-20 05:10:15 +0000</creation_ts>
          <short_desc>Packaging Python tools with cx_Freeze 5.0 - cannot import build__init__ module</short_desc>
          <delta_ts>2018-11-22 01:18:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Anton Kochkov">anton.kochkov</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1188</commentid>
    <comment_count>0</comment_count>
    <who name="Anton Kochkov">anton.kochkov</who>
    <bug_when>2016-12-20 05:10:15 +0000</bug_when>
    <thetext>After trying to update cx_Freeze from PyPI https://pypi.python.org/pypi?:action=display&amp;name=cx_Freeze&amp;version=5.0
I&apos;ve found that 5.0 version fails with error: Cannot find build__init__ module.
4.3.3 version works OK.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1197</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-12-21 20:05:53 +0000</bug_when>
    <thetext>bug scrub:  assign to yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1198</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-12-21 20:06:55 +0000</bug_when>
    <thetext>bug scrub: current version is 4.2.3
  evaluate 5.0  firstly</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5483</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:37:49 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5677</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-22 01:18:23 +0000</bug_when>
    <thetext>Close it, because freeze python tool is not supported any more. Please see 
https://bugzilla.tianocore.org/show_bug.cgi?id=1257</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>576</bug_id>
          
          <creation_ts>2017-05-30 11:28:46 +0000</creation_ts>
          <short_desc>shell readme is out of date</short_desc>
          <delta_ts>2019-01-02 08:17:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaben Carsey">jaben.carsey</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EdkShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2196</commentid>
    <comment_count>0</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2017-05-30 11:28:46 +0000</bug_when>
    <thetext>the zip file is not available at the specified URL.

should we point the code URL to github?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2222</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-01 20:04:13 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5441</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-10-30 23:20:10 +0000</bug_when>
    <thetext>transfer to Liming since he will remove EdkShellPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5969</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-02 08:17:55 +0000</bug_when>
    <thetext>EdkShellPkg has been removed from edk2 trunk. No fix is required.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>577</bug_id>
          
          <creation_ts>2017-05-30 14:33:03 +0000</creation_ts>
          <short_desc>SmmIsBufferOutsideSmmValid() should not ASSERT.</short_desc>
          <delta_ts>2017-06-05 21:10:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2197</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2017-05-30 14:33:03 +0000</bug_when>
    <thetext>Currently the SmmIsBufferOutsideSmmValid() function in SmmMemLib.c will ASSERT in certain conditions. Since this function is a &quot;test&quot; function, it should not be making decisions on how to handle a failure. Handling a failure should be left to the caller.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2203</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-05-30 23:03:29 +0000</bug_when>
    <thetext>Agree to remove ASSERT(FALSE) at line 178.

This specific ASSERT is added when we add Communication Region check. We hope to catch platform issue when a developer enable this, as quick as possible.
Now, we can remove it and let caller make decision.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2220</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-01 20:02:19 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2248</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2017-06-05 21:10:21 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/1a0ad70ee190210084f1453b309f7c2035a8b0b3.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>956</bug_id>
          
          <creation_ts>2018-05-24 05:04:26 +0000</creation_ts>
          <short_desc>HTTP Boot Image Validation compliance with RFC2616</short_desc>
          <delta_ts>2018-06-20 20:40:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="sivaraman">sivaramann</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>madhans</cc>
    
    <cc>omkark</cc>
    
    <cc>sivaramann</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4009</commentid>
    <comment_count>0</comment_count>
    <who name="sivaraman">sivaramann</who>
    <bug_when>2018-05-24 05:04:26 +0000</bug_when>
    <thetext>When HTTP Boot performed the code checking if the Image type as EFI
ISO and IMG. If not the boot not when the content type is as
&quot;Content-type: text/plain&quot;.
https://github.com/tianocore/edk2/blob/master/NetworkPkg/HttpBootDxe
/HttpBootSupport.c (HttpBootCheckImageType())

But as per RFC it described below.
https://tools.ietf.org/html/rfc2616#section-7.2.1:
&quot;If and only if the media type is not given by a Content-Type field,
the recipient MAY attempt to guess the media type via inspection of
its content and/or the name extension(s) of the URI used to identify
the resource.&quot;

Can you please comment if this need to be addressed such a way we
can skip the validation of image types.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4088</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-07 20:32:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to discuss first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4112</commentid>
    <comment_count>2</comment_count>
    <who name="sivaraman">sivaramann</who>
    <bug_when>2018-06-12 00:30:04 +0000</bug_when>
    <thetext>Can we have update on this request</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4114</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2018-06-12 01:39:39 +0000</bug_when>
    <thetext>We need to keep the current logic to provide compatibility for already deployed systems.  

Detail as below:

The HTTP boot driver need to identify the boot image type from 3 supported format: EFI, iSO or Disk image.

Current code will check the HTTP Content-Type header first, if the Content-Type is any of the 3 supported type, we won&apos;t check the file extension anymore. If the Content-Type is not present, or a unrecognized type, we will continue to check the file extension.

There is historically reason for the current logic. When we first introduced the HTTP boot feature in UDK release, the registration for new media type (application/vnd.efi.iso and application/vnd.efi.img) was still under review by IANA organization, so we decided to ignore the Content-type header and only use the file extension to determine the image type. 
Then after about half a year, the new media type was approved by IANA, so we added the Content-type check in the next release, and we kept the original file extension check to make sure the deployed system could still work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4115</commentid>
    <comment_count>4</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2018-06-12 01:39:39 +0000</bug_when>
    <thetext>We need to keep the current logic to provide compatibility for already deployed systems.  

Detail as below:

The HTTP boot driver need to identify the boot image type from 3 supported format: EFI, iSO or Disk image.

Current code will check the HTTP Content-Type header first, if the Content-Type is any of the 3 supported type, we won&apos;t check the file extension anymore. If the Content-Type is not present, or a unrecognized type, we will continue to check the file extension.

There is historically reason for the current logic. When we first introduced the HTTP boot feature in UDK release, the registration for new media type (application/vnd.efi.iso and application/vnd.efi.img) was still under review by IANA organization, so we decided to ignore the Content-type header and only use the file extension to determine the image type. 
Then after about half a year, the new media type was approved by IANA, so we added the Content-type check in the next release, and we kept the original file extension check to make sure the deployed system could still work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4140</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-14 20:08:41 +0000</bug_when>
    <thetext>bug scrub: we think it is not a bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4147</commentid>
    <comment_count>6</comment_count>
    <who name="sivaraman">sivaramann</who>
    <bug_when>2018-06-15 06:24:27 +0000</bug_when>
    <thetext>Thanks for the review.It can be resolved</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4169</commentid>
    <comment_count>7</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2018-06-20 20:40:39 +0000</bug_when>
    <thetext>Not fix this issue for compatibility.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>489</bug_id>
          
          <creation_ts>2017-04-17 03:19:19 +0000</creation_ts>
          <short_desc>SUT hangs after performing a warm boot.</short_desc>
          <delta_ts>2018-01-07 23:43:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1835</commentid>
    <comment_count>0</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-04-17 03:19:19 +0000</bug_when>
    <thetext>BIOS UEFI Class3 hangs while booting to windows. Below are the reproduction steps.

(1)   Connect LAN cable (Realtek)
(2)   Do cold boot or warm boot stress (Windows 10)

After some debugging, it is found that it hangs in Ip6SendNeighborSolicit()-&gt;Ip6Output()call.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1836</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-17 03:24:00 +0000</bug_when>
    <thetext>Try to reproduce the issue, will update later.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1847</commentid>
    <comment_count>2</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-04-18 05:00:12 +0000</bug_when>
    <thetext>Hi Jiaxin,

I&apos;ve got some update.

1. We can see the control comes to the following condition in Ip6Dxe\Ip6Nd.c multiple times which mean it is sending the Neighbour Solicitation message multiple times.

VOID
EFIAPI
Ip6NdFasterTimerTicking (
  IN EFI_EVENT              Event,
  IN VOID                   *Context
  )
{
  ...
  ...
  if (DupAddrDetect-&gt;Transmit &lt; DupAddrDetect-&gt;MaxTransmit) {
    //
    // Send the Neighbor Solicitation message with
    // Source - unspecified address, destination - solicited-node multicast address
    // Target - the address to be validated
    //
    ...
  }
  ...
}

2. The system hangs in Ip6Dxe\Ip6If.c, at
Status = IpSb-&gt;Mnp-&gt;Transmit (IpSb-&gt;Mnp, &amp;Token-&gt;MnpToken);

EFI_STATUS
Ip6SendFrame (
  IN  IP6_INTERFACE         *Interface,
  IN  IP6_PROTOCOL          *IpInstance      OPTIONAL,
  IN  NET_BUF               *Packet,
  IN  EFI_IPv6_ADDRESS      *NextHop,
  IN  IP6_FRAME_CALLBACK    CallBack,
  IN  VOID                  *Context
  )
{
  ...
  ...
SendNow:
 //
  // Insert the tx token into the SentFrames list before calling Mnp-&gt;Transmit.
  // Remove it if the returned status is not EFI_SUCCESS.
  //
  InsertTailList (&amp;Interface-&gt;SentFrames, &amp;Token-&gt;Link);
  Status = IpSb-&gt;Mnp-&gt;Transmit (IpSb-&gt;Mnp, &amp;Token-&gt;MnpToken);    // Hangs here
  ...
}

Let us know if it helps you in any way and please provide a suggestion.

Thanks,
Naveen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1888</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-20 20:10:56 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1915</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-25 09:08:17 +0000</bug_when>
    <thetext>Hi Naveen,

Several questiones need confirm with you:

1. Do you change the DHCPv6 policy to the auto before boot to windows or keep it as original(manual)?

2. Can you reproduce the issue on the onboard NIC or just reproduced the issue on the realtek NIC? 

I tried my onboard NIC but can&apos;t reproduce it. If you only can reproduce the issue on the realtek NIC, can you tell me the model of realtek NIC? 

By the way, you mentioned the hangs at below piece of code:   
Status = IpSb-&gt;Mnp-&gt;Transmit (IpSb-&gt;Mnp, &amp;Token-&gt;MnpToken);    // Hangs here

Hang in the Mnp-&gt;Transmit or after Mnp-&gt;Transmit returned with an error?

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1939</commentid>
    <comment_count>5</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-26 22:03:50 +0000</bug_when>
    <thetext>More question:

Which version you can reproduce the issue? debug or release or both?

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1990</commentid>
    <comment_count>6</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-05-05 02:13:21 +0000</bug_when>
    <thetext>Dear Jiaxin,

Please find the answers to your questions.

1. Do you change the DHCPv6 policy to the auto before boot to windows or keep it as original(manual)?

&gt;&gt; DHCPv6 policy is automatic.

2. Can you reproduce the issue on the onboard NIC or just reproduced the issue on the realtek NIC? 

&gt;&gt; Issue reproduces only with Realtek NIC. With on-board NIC, the issue is not seen. Realtek card model used is RTL8111G-CGT.

3. Hang in the Mnp-&gt;Transmit or after Mnp-&gt;Transmit returned with an error?

&gt;&gt; Just Hangs in the above area. No status is returned.

4. Which version you can reproduce the issue? debug or release or both?

&gt;&gt; we&apos;ve seen the issue with DEBUG MODE


Thanks,
Naveen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2025</commentid>
    <comment_count>7</comment_count>
      <attachid>62</attachid>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-05-12 03:13:58 +0000</bug_when>
    <thetext>Created attachment 62
MMP-SNP-debug-for-the-third-part-NIC-crash-issue

Please help catch the debug message log with the attached patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2026</commentid>
    <comment_count>8</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-05-12 03:14:43 +0000</bug_when>
    <thetext>Hi Naveen,

Recently, we also met the third part NIC crash issue (Not Realtek), which is related to the UNDI GetStatus command that cause the Mnp transmit run into exception. I don&apos;t know whether it&apos;s the same issue with you. So, can you help to catch some debug message log with my attached patch? 

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2027</commentid>
    <comment_count>9</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-05-12 04:18:05 +0000</bug_when>
    <thetext>Hi Jiaxin,

I shall get the debug log and update you.

Thanks,
Naveen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2204</commentid>
    <comment_count>10</comment_count>
      <attachid>71</attachid>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-05-31 00:51:44 +0000</bug_when>
    <thetext>Created attachment 71
DriverOldVersion</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2205</commentid>
    <comment_count>11</comment_count>
      <attachid>72</attachid>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-05-31 00:55:04 +0000</bug_when>
    <thetext>Created attachment 72
DebugLog</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2206</commentid>
    <comment_count>12</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-05-31 00:56:58 +0000</bug_when>
    <thetext>Hi Jiaxin,

Unfortunately, we have been using some older versions of SnpDxe and MnpDxe drivers. So, I couldn&apos;t add your debug traces intact. Thus I had to add them in the places to match closely with yours. I&apos;ve attached the version of traces I&apos;ve added and its relative DebugLog File. Please let me if it helps or the traces I&apos;ve added should be different.

Thanks,
Naveen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2207</commentid>
    <comment_count>13</comment_count>
      <attachid>73</attachid>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-05-31 01:00:49 +0000</bug_when>
    <thetext>Created attachment 73
DriverOldVersion_2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2208</commentid>
    <comment_count>14</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-05-31 01:01:55 +0000</bug_when>
    <thetext>Hi JIaxin,

Please use DriverOldVersion_2. 
Sorry for the inconvenience caused.

Thanks,
Naveen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2243</commentid>
    <comment_count>15</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-06-05 03:34:53 +0000</bug_when>
    <thetext>Hi Naveen,

From Debug message log, it&apos;s not related to the recycle TxBuf issue I met before.

Your network stack is old version. I suggest you update it to latest one, then try again. 

The same network stack version can make us on the same page.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3349</commentid>
    <comment_count>16</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-01-07 23:43:50 +0000</bug_when>
    <thetext>It&apos;s not edk2 trunk code bug, so, close it.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>62</attachid>
            <date>2017-05-12 03:13:58 +0000</date>
            <delta_ts>2017-05-12 03:13:58 +0000</delta_ts>
            <desc>MMP-SNP-debug-for-the-third-part-NIC-crash-issue</desc>
            <filename>0001-MMP-SNP-debug-for-the-third-part-NIC-crash-issue.patch</filename>
            <type>text/plain</type>
            <size>3213</size>
            <attacher name="jiaxinwu">jiaxin.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>71</attachid>
            <date>2017-05-31 00:51:44 +0000</date>
            <delta_ts>2017-05-31 01:00:49 +0000</delta_ts>
            <desc>DriverOldVersion</desc>
            <filename>OldVersion.zip</filename>
            <type>application/octet-stream</type>
            <size>23463</size>
            <attacher name="Naveen Santhapur">naveens</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>72</attachid>
            <date>2017-05-31 00:55:04 +0000</date>
            <delta_ts>2017-05-31 00:55:04 +0000</delta_ts>
            <desc>DebugLog</desc>
            <filename>DeugLog.txt</filename>
            <type>text/plain</type>
            <size>469513</size>
            <attacher name="Naveen Santhapur">naveens</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>73</attachid>
            <date>2017-05-31 01:00:49 +0000</date>
            <delta_ts>2017-05-31 01:00:49 +0000</delta_ts>
            <desc>DriverOldVersion_2</desc>
            <filename>OldVersion.zip</filename>
            <type>application/octet-stream</type>
            <size>22157</size>
            <attacher name="Naveen Santhapur">naveens</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>861</bug_id>
          
          <creation_ts>2018-01-22 09:10:16 +0000</creation_ts>
          <short_desc>INF_VERSION description specifies incorrect mandatory value</short_desc>
          <delta_ts>2018-06-27 02:22:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Leif Lindholm">quic_llindhol</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3462</commentid>
    <comment_count>0</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2018-01-22 09:10:16 +0000</bug_when>
    <thetext>Table 1 EDK II [Defines] Section Elements

Description for INF_VERSION claims that the value should be &quot;1.25 or 0x00010019&quot; (for the 1.26 version).

It may make sense to reword this in a version-agnostic manner as &quot;decimal value with fraction or two-nibble hexadecimal representation of the same, for example ...&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3486</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-01-24 20:05:36 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4214</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-27 02:22:08 +0000</bug_when>
    <thetext>it already be fixed in SHA-1: ad6f5b7d390b9aa8b75e43e9fc445a87d16b7640</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>37</bug_id>
          
          <creation_ts>2016-07-20 19:36:32 +0000</creation_ts>
          <short_desc>AhciDumpPortStatus doesn&apos;t fully populate all the fields of the parameter EFI_ATA_STATUS_BLOCK *AtaStatusBlock</short_desc>
          <delta_ts>2016-11-02 03:52:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Feng Tian">feng.tian</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>62</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 19:36:32 +0000</bug_when>
    <thetext>AhciDumpPortStatus in MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AhciMode.c doesn&apos;t fully populate ALL the fields of the parameter EFI_ATA_STATUS_BLOCK *AtaStatusBlock. As a result, utilities depend on the return status may give wrong information. Is this work as designed and consumers will implement this themselves or is this a bug?

Thanks,
Anh Luong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>390</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-07-28 20:28:02 +0000</bug_when>
    <thetext>Bug Scrub: Assign to tian feng for investigation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>394</commentid>
    <comment_count>2</comment_count>
    <who name="Feng Tian">feng.tian</who>
    <bug_when>2016-07-28 21:37:30 +0000</bug_when>
    <thetext>It&apos;s a bug.

we didn&apos;t dump all info to StatusBlock is because we don&apos;t need other fields at that time.

if customer ask to update them, we could do it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>811</commentid>
    <comment_count>3</comment_count>
    <who name="Feng Tian">feng.tian</who>
    <bug_when>2016-11-02 03:52:42 +0000</bug_when>
    <thetext>fixed at a7b3f90f8a081d90bc4287990e53f367228d53b2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>880</bug_id>
          
          <creation_ts>2018-02-23 21:06:33 +0000</creation_ts>
          <short_desc>BaseTools: OFFSET_OF() should work for LABEL()s that appear after the OFFSET_OF() in the PCD value.</short_desc>
          <delta_ts>2018-02-27 20:08:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3628</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-23 21:06:33 +0000</bug_when>
    <thetext>OFFSET_OF() should work for LABEL()s that appear after the OFFSET_OF() in the PCD value.  This requires 2 passes through the PCD value.  First pass collects information on all the labels and their offsets.  2nd pass replaces items with their values including OFFSET_OF() operators.  The current logic uses the item index as the byte offset, which is only correct if all items in the PCD are bytes.  If UINT16/32/64 or strings are used, then the offset value is incorrect.


Case example:

PcdToken.PcdName|{UINT32(OFFSET_OF(Cert0)),UINT32(OFFSET_OF(Cert1)), UINT32(OFFSET_OF(Cert2)), UINT32(OFFSET_OF(Cert3)), UINT32(OFFSET_OF(Cert4)), UINT32(OFFSET_OF(Cert5)), UINT32(OFFSET_OF(Cert6)), UINT32(OFFSET_OF(Cert7)), UINT32(OFFSET_OF(Cert8)), LABEL(Cert0) UINT8(1),LABEL(Cert1) UINT16(2), LABEL(Cert2) UINT32(4), LABEL(Cert3) UINT64(8), LABEL(Cert4) &apos;ABC&apos;, LABEL(Cert5) &quot;ABC&quot;, LABEL(Cert6) L&apos;ABC&apos;, LABEL(Cert7) L&quot;ABC&quot;, LABEL(Cert8) 0}|VOID*|0x0001001E</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3641</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-02-27 20:08:15 +0000</bug_when>
    <thetext>the patch already pushed in trunk and udk2018 branch. 
trunk: SHA-1: 8bd72d7c05ff820ee7826809a033fda9b007d18f
Udk2018 branch: SHA-1: 6cc21aa625dfd1d15b74066fd8e22f1161c9a1a8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>56</bug_id>
          
          <creation_ts>2016-07-20 21:14:04 +0000</creation_ts>
          <short_desc>Basetools compile with VS2012</short_desc>
          <delta_ts>2016-10-17 03:04:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>81</commentid>
    <comment_count>0</comment_count>
      <attachid>2</attachid>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2016-07-20 21:14:04 +0000</bug_when>
    <thetext>Created attachment 2
edk.zip

cecekpawon commented on May 8 • edited
Some backward compatibility &lt;stdbool.h&gt; inclusion &amp; Compiler Error C2275
edk.zip</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>414</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-04 20:24:11 +0000</bug_when>
    <thetext>Bug Scrub: Verify with VS2012, if build pass just close.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>610</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-17 03:04:34 +0000</bug_when>
    <thetext>From our daily buildpool, we can build pass.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>2</attachid>
            <date>2016-07-20 21:14:04 +0000</date>
            <delta_ts>2016-07-20 21:14:04 +0000</delta_ts>
            <desc>edk.zip</desc>
            <filename>edk.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>1674</size>
            <attacher name="Michael Kinney">michael.d.kinney</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>424</bug_id>
          
          <creation_ts>2017-03-14 09:42:03 +0000</creation_ts>
          <short_desc>Interface gets disabled on performing HTTP boot.</short_desc>
          <delta_ts>2017-04-18 03:05:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>karunakarp</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1610</commentid>
    <comment_count>0</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-03-14 09:42:03 +0000</bug_when>
    <thetext>[Issue Description]
We&apos;ve found something with IPv4 Network Configuration which didn&apos;t seem to be behaving as expected. The network interface configuration gets disabled after HTTP boot whose configuration is DHCP before the HTTP boot.

[Reproduction Steps]
1. Go to IPv4 Network Configuration page of any MAC.
2. Enable Configured and Enable DHCP and Save Changes and Exit
3. Now, boot to shell and give &apos;ifconfig -l&apos;. The IP gets assigned and is expected.
4. With or without rebooting the SUT, perform an IPv4 HTTP Boot using the same NIC to which DHCP was enabled in Step#2.

[Actual Result]
The NIC configured in step#2 is disabled

[Expected Result]
The NIC should retain the values set in step#2.

Is this an expected output or is it some bug to be fixed??</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1628</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-16 20:33:54 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1630</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-16 22:01:57 +0000</bug_when>
    <thetext>Hello Naveen,

The behavior you observed is an expected output.

why we have to change the IPv4 configuration policy to static at the beginning of http boot? Because DHCPv4 only allows one of its children to be configured in the active state. Assume that if DHCPv4 D.O.R.A started by IPv4 DHCP configuration and has not been completed, the DHCPv4 state machine will not be in the right state for the HTTP boot to start a new round D.O.R.A. So we have to switch the IPv4 policy to static. 

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1637</commentid>
    <comment_count>3</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-03-17 01:54:20 +0000</bug_when>
    <thetext>Hi Jiaxin,

I have a question about IPv4 Network Configuration Setup Page.

 If we Enable Configure and Enable DHCP options under IPv4 Network Configuration Page.
And give Save Changes and Exit. Then Setup values will be stored using SetVariable. 
On Next reboot we are converting NvData to IFR data in ExtractConfig(), using Ip4Config2ConvertConfigNvDataToIfrNvData()


Ip4FormExtractConfig()
{
  ...

   Ip4Config2ConvertConfigNvDataToIfrNvData (Ip4Config2Instance, IfrFormNvData);

  ...
} 

Ip4Config2ConvertConfigNvDataToIfrNvData ()
{
    ...
   
  if (IpSb-&gt;DefaultInterface-&gt;Configured) {
    IfrNvData-&gt;Configure = 1;
   } else {
    IfrNvData-&gt;Configure = 0;
    goto Exit;
   }
  
  ...
} 

  When We do IPv4 HTTP boot , Irrespective of HTTP boot success or failure ,
IpSb-&gt;DefaultInterface-&gt;Configured becomes 0,and IPv4 Network Configured was Disabled.

Could you please explain the following things
1.When we Do HTTP boot Why this value(IpSb-&gt;DefaultInterface-&gt;Configured) becoming zero , and where it is becomes 0.
2. When We do save Changes and Exit under IPv4 Network Configuration Page, when this value (IpSb-&gt;DefaultInterface-&gt;Configured) becomes 1 and where it is changing to 1.


Thanks,
karunakar.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1638</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-17 03:12:21 +0000</bug_when>
    <thetext>
Hello karunakar,

I&apos;d like to answer your question as below:

1. Assume you enable DHCPv4 under IPv4 Network Configuration Page first, and already get one IP address. Currently the IpSb-&gt;DefaultInterface-&gt;Configured has been changed to TRUE:

	Ip4Config2OnDhcp4Complete --&gt; Ip4Config2SetDefaultIf --&gt;  Ip4Config2SetDefaultAddr --&gt; Ip4SetAddress {Interface-&gt;Configured = TRUE}

Then, continue HTTPv4 boot. As I explain above that we have to change the IPv4 policy to static so as to avoid DHCP D.O.R.A failure, during this process, IpSb-&gt;DefaultInterface-&gt;Configured is changing to FALSE: 	
	
	Ip4Config2SetPolicy --&gt; Ip4Config2OnPolicyChanged --&gt; Ip4FreeInterface/Ip4CreateInterface {Interface-&gt;Configured = FALSE} for IpSb-&gt;DefaultInterface.
	
Finally, irrespective of HTTP boot success or failure, the default address won&apos;t be set again, so the IpSb-&gt;DefaultInterface-&gt;Configured is always FALSE. But if you don&apos;t enable DHCPv4 under IPv4 Network Configuration Page and configure one static address (OR by ifconfig commmad under shell), then, no matter HTTP boot success or failure, IpSb-&gt;DefaultInterface-&gt;Configured is always TRUE. You can have a try.

2. When you do save Changes and Exit under IPv4 Network Configuration Page, Ip4Config2ConvertIfrNvDataToConfigNvData will be called in Ip4FormCallback. If IfrFormNvData-&gt;DhcpEnable is TRUE, DHCP D.O.R.A process will be trigged, then IpSb-&gt;DefaultInterface-&gt;Configured is changed to TRUE. If IfrFormNvData-&gt;DhcpEnable is FALSE, ManualAddress will be set:
	
	Ip4Config2SetManualAddress --&gt; Ip4Config2SetDefaultAddr --&gt; Ip4SetAddress {Interface-&gt;Configured = TRUE}
	
I hope above can help you:).  

BTW, do you meet the case that require the IPv4 in the configured status after HTTP boot? 

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1639</commentid>
    <comment_count>5</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-03-17 09:44:57 +0000</bug_when>
    <thetext>Hi Jiaxin,

Thank you so much for your Explanation.
We have Not met any case like that requires IPv4 in the configured status after HTTP boot.

Thanks,
karunakar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1643</commentid>
    <comment_count>6</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-20 03:37:19 +0000</bug_when>
    <thetext>No commit since it&apos;s the expected behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1846</commentid>
    <comment_count>7</comment_count>
    <who name="karunakar">karunakarp</who>
    <bug_when>2017-04-18 03:05:01 +0000</bug_when>
    <thetext>Hi Jiaxin,

  I’ve been facing an issue with IP4 SERVICE Default interface value.

[Reproduction Steps]
1.Add trace messages to print the values of ip and SubnetMask in Ip4FormExtractConfig() -&gt; Ip4Config2ConvertConfigNvDataToIfrNvData() 

EFI_STATUS
Ip4Config2ConvertConfigNvDataToIfrNvData (
IN     IP4_CONFIG2_INSTANCE       *Instance,
IN OUT IP4_CONFIG2_IFR_NVDATA     *IfrNvData
)
{
…
IpSb = IP4_SERVICE_FROM_IP4_CONFIG2_INSTANCE (Instance);

+ Print value of IpSb-&gt;DefaultInterface-&gt;Ip
+ Print value of IpSb-&gt;DefaultInterface-&gt;SubnetMask

…
}
2. Assign ip to SUT using IPv4 Network Configuration page.
   ( Enable Configured and Enable DHCP and Save Changes and Exit )
3. reset the SUT once IP assigns

[Observation]
1.	On restart, Ip4FormExtractConfig() gets call and prints Ip and SubnetMask values are 0.
2.	If add some delay before printing those values , then getting the proper values
             		+  add Delay some delay 
+ Print value of IpSb-&gt;DefaultInterface-&gt;Ip
+ Print value of IpSb-&gt;DefaultInterface-&gt;SubnetMask
3.	In the case of Static Ip , printing proper values without giving any delay.

Could you please help in where it is taking time to update the values in DHCP case.

Thanks,
Karunakar.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>697</bug_id>
          
          <creation_ts>2017-09-06 06:21:03 +0000</creation_ts>
          <short_desc>undefined behavior of left shift of int 1 by 31</short_desc>
          <delta_ts>2017-10-10 07:27:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2693</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-09-06 06:21:03 +0000</bug_when>
    <thetext>edk2 asan/ubsan catch a undefined behavior in edk2\MdeModulePkg\Core\RuntimeDxe\Crc32.c function ReverseBits()
line 81:
  for (Index = 0; Index &lt; 32; Index++) {
    if ((Value &amp; (1 &lt;&lt; Index)) != 0) {
      NewValue = NewValue | (1 &lt;&lt; (31 - Index));
    }
  }

The (1 &lt;&lt; Index) and (1 &lt;&lt; (31 - Index) will become (1 &lt;&lt; 31) when Index=0 or Index=31. The 1 &lt;&lt; 31 is a undefined behavior because the &quot;1&quot; here default is a 4 byte signed (int type) positive value. So, 1 &lt;&lt; 31 might make the result become a negative value. 

For example, below is a simplified code snip to show this undefined behavior issue with LLVM UndefinedBehaviorSanitizer.

$ cat foo.c
int
main() {
 long i;
 i =  1 &lt;&lt; 31;
 return (int)i;
}

$ clang foo.c -fsanitize=undefined
$ ./a.out
foo.c:4:9: runtime error: left shift of 1 by 31 places cannot be represented in type &apos;int&apos;

Above code can be simply fixed by force the &quot;1&quot; as unsigned int like below:

line 81:
  for (Index = 0; Index &lt; 32; Index++) {
    if ((Value &amp; ((UINT32)1 &lt;&lt; Index)) != 0) {
      NewValue = NewValue | ((UINT32)1 &lt;&lt; (31 - Index));
    }
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2707</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-09-07 20:04:51 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2850</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2017-10-10 07:27:48 +0000</bug_when>
    <thetext>The below commit:
https://github.com/tianocore/edk2/commit/05542f49877f9047c536b61fd8f15dd4c4496b4b

introduces the CacluateCrc32() API in BaseLib. It updates the logic in file MdeModulePkg/Core/RuntimeDxe/Crc32.c, and now the problematic left shift operation does not exist.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>995</bug_id>
          
          <creation_ts>2018-06-26 20:36:24 +0000</creation_ts>
          <short_desc>Error doesn&apos;t make sense</short_desc>
          <delta_ts>2018-08-07 21:08:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaben Carsey">jaben.carsey</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4212</commentid>
    <comment_count>0</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2018-06-26 20:36:24 +0000</bug_when>
    <thetext>In AutoGen this error exists and I cannot figure out what it really means.

EdkLogger.debug(EdkLogger.DEBUG_9, &quot;The toolchain [%s] for processing file [%s] is found, &quot;
    &quot;but [%s] is needed&quot; % (F.TagName, str(F), self.ToolChain))

I am happy to work with someone if I can just get the meaning explained.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4216</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-06-27 21:05:16 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4268</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-11 21:04:32 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4519</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-07 21:08:51 +0000</bug_when>
    <thetext>resolved in SHA-1: e5cbb982562c354a6c040552d0ff20a38202c284</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>441</bug_id>
          
          <creation_ts>2017-03-22 22:27:57 +0000</creation_ts>
          <short_desc>DevPathFromTextFilePath has off by one error in memory allocation</short_desc>
          <delta_ts>2017-04-07 02:47:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Warner Losh">imp</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1661</commentid>
    <comment_count>0</comment_count>
    <who name="Warner Losh">imp</who>
    <bug_when>2017-03-22 22:27:57 +0000</bug_when>
    <thetext>DevPathFromTextFilePath has an off by one error in the memory allocation:
  File = (FILEPATH_DEVICE_PATH *) CreateDeviceNode (
                                    MEDIA_DEVICE_PATH,
                                    MEDIA_FILEPATH_DP,
                                    (UINT16) (sizeof (FILEPATH_DEVICE_PATH) + StrLen (TextDeviceNode) * 2)
                                    );

  StrCpyS (File-&gt;PathName, StrLen (TextDeviceNode) + 1, TextDeviceNode);

StrLen doesn&apos;t include the trailing NUL word, so no space is allocated for it. This leads to writing off the end of the memory allocated.

The fix is to add 1 before multiplying by 2 (which likely should also be sizeof(CHAR16) instead of a hard-coded 2).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1668</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-23 20:21:43 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1771</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-04-07 02:46:31 +0000</bug_when>
    <thetext>Warner,
It&apos;s not a bug.
FILEPATH_DEVICE_PATH structure contains 2-byte holding the NULL terminator.
So there is no need to &quot;add 1 before multiplying by 2&quot;.

typedef struct {
  EFI_DEVICE_PATH_PROTOCOL        Header;
  ///
  /// A NULL-terminated Path string including directory and file names.
  ///
  CHAR16                          PathName[1];
} FILEPATH_DEVICE_PATH;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1772</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-04-07 02:47:39 +0000</bug_when>
    <thetext>Set it as not a bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>805</bug_id>
          
          <creation_ts>2017-12-01 04:28:57 +0000</creation_ts>
          <short_desc>Need to add command in Shell to get ACPI tables.</short_desc>
          <delta_ts>2018-05-02 05:07:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Younas khan">pmdyounaskhan786</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>evan.lloyd</cc>
    
    <cc>jaben.carsey</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>pmdyounaskhan786</cc>
    
    <cc>ray.ni</cc>
    
    <cc>sami.mujawar</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3172</commentid>
    <comment_count>0</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2017-12-01 04:28:57 +0000</bug_when>
    <thetext>Hi,

In EDK2 shell, by default there is no way to get ACPI tables.
Need to add command in Shell to get ACPI tables. Same as &quot;smbiosview&quot; for getting smbios tables.

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3178</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-12-01 07:12:51 +0000</bug_when>
    <thetext>You could use the BITS project (they have UEFI builds too). The BITS project offers a Python REPL interface (and Python scripting in general) to the full ACPICA suite, with no OS between the firmware and BITS.

https://biosbits.org/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3180</commentid>
    <comment_count>2</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2017-12-01 09:48:39 +0000</bug_when>
    <thetext>Hi Younas,

There is an &apos;acpiview&apos; command that has been added to the shell specification.

And by the way we had pushed a patch for an &apos;acpiview&apos; tool. The link for the same can be found at https://lists.01.org/pipermail/edk2-devel/2016-December/005881.html

I am in process of updating it for ACPI 6.2 and the new patches should hopefully be available soon.

regards,

Sami Mujawar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3181</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-12-04 05:08:19 +0000</bug_when>
    <thetext>Sami, I don&apos;t think UefiShellAcpiViewCommandLib was pushed to the edk2 repo; I cannot find it in the tree (@ f0d9d2b61726). (Perhaps s/pushed/posted/?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3200</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-07 19:14:43 +0000</bug_when>
    <thetext>bug scrub: change it to feature request. Assign Ray to follow up first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3203</commentid>
    <comment_count>5</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2017-12-08 05:58:00 +0000</bug_when>
    <thetext>Hi Laszlo,

The patch was submitted on edk2-devel. However after discussion on the mailing list it was decided that the patch needs to be re-submitted to the edk2-staging tree.

I am currently updating it for ACPI 6.2 and hope to re-submit it soon.

Regards,

Sami Mujawar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3223</commentid>
    <comment_count>6</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-12-13 22:17:44 +0000</bug_when>
    <thetext>I went back to re-read the discussion about adding &quot;acpiview&quot; to staging repo.
The decision was based on the fact that &quot;acpiview&quot; is not a spec-defined shell command.
But since now as Sami mentioned, &quot;acpiview&quot; has been added to shell spec.
I think we could directly add the code to edkii repo, but after the shell spec is published.

&gt;&gt;Sami, Jiewen, what do you think?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3230</commentid>
    <comment_count>7</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-14 19:08:32 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3237</commentid>
    <comment_count>8</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2017-12-14 19:49:18 +0000</bug_when>
    <thetext>I have no problem on porting ACPICA.

I hope we have tool to dump detail data structure for known ACPI table, not only the one defined in ACPI spec, but also the one reserved by ACPI spec but defined in other standard, such as TCG2 TPM2 table, MSFT WSMT table, PCI MCFG table.

I am not sure if ACPICA can dump the reserved ACPI table.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3306</commentid>
    <comment_count>9</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-01-02 02:16:49 +0000</bug_when>
    <thetext>Hi Sami,

Thanks for your comments.

I cannot see acpiview in UEFI Shell specification.
Is acpiview command officially added to Shell specification?

Are the changes updated in edkii?

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3392</commentid>
    <comment_count>10</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-01-12 07:01:11 +0000</bug_when>
    <thetext>Hi Sami/Ruiyu,

Can you reply to my previous comments?

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3394</commentid>
    <comment_count>11</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2018-01-12 07:20:34 +0000</bug_when>
    <thetext>Hi Younas,

The ECR 1784 (https://mantis.uefi.org/mantis/view.php?id=1784) to add ACPIview to the shell specification has been &apos;Approved as new content for the Shell Spec.&apos; 

I believe there is some delay between approval and update of the published specification.

We have re-submitted the ACPIview patch to EDK2 at https://lists.01.org/pipermail/edk2-devel/2017-December/019223.html
and await acceptance by the maintainers.

If you need the patch urgently in EDK2, please email the maintainers for ShellPkg as listed in https://github.com/tianocore/edk2/blob/master/Maintainers.txt

Regards,

Sami Mujawar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3395</commentid>
    <comment_count>12</comment_count>
    <who name="Evan Lloyd">evan.lloyd</who>
    <bug_when>2018-01-12 08:31:56 +0000</bug_when>
    <thetext>Hi Younas.
My original submission to edk2-devel didn&apos;t reach the relevant maintainers, because their e-mail addresses got corrupted.  I&apos;ve tried again, and this time it look like it should have reached them.
https://lists.01.org/pipermail/edk2-devel/2018-January/020053.html

As Sami suggests, if you want it in a hurry then you might contact the maintainers to ask them to move it on.

Evan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3513</commentid>
    <comment_count>13</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-01-30 01:21:33 +0000</bug_when>
    <thetext>Hi Sami/Evan,

Jaben already replied for your changes in https://lists.01.org/pipermail/edk2-devel/2018-January/020063.html

Please help to reply for his concerns.

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3612</commentid>
    <comment_count>14</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-02-21 01:49:27 +0000</bug_when>
    <thetext>Hi Ruiyu,

Is there any update on this?

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3662</commentid>
    <comment_count>15</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-03-07 11:14:25 +0000</bug_when>
    <thetext>Is there any update on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3891</commentid>
    <comment_count>16</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-04-19 08:04:40 +0000</bug_when>
    <thetext>Is there any update on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3952</commentid>
    <comment_count>17</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2018-05-01 05:28:07 +0000</bug_when>
    <thetext>This feature has now been integrated in the ShellPkg. See https://github.com/tianocore/edk2/commit/ee4dc24f57c32a445e7c747396c9bfbd8b221568</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3962</commentid>
    <comment_count>18</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-05-02 03:40:14 +0000</bug_when>
    <thetext>Thanks Sami and Ruiyu for your help and support.

BTW, how to get/register access for https://mantis.uefi.org/ site?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3963</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-05-02 05:07:14 +0000</bug_when>
    <thetext>(In reply to Sami Mujawar from comment #17)
&gt; This feature has now been integrated in the ShellPkg. See
&gt; https://github.com/tianocore/edk2/commit/
&gt; ee4dc24f57c32a445e7c747396c9bfbd8b221568

Closing this BZ as RESOLVED|FIXED then.

(In reply to Younas khan from comment #18)
&gt; Thanks Sami and Ruiyu for your help and support.
&gt; 
&gt; BTW, how to get/register access for https://mantis.uefi.org/ site?

Access to the Mantis tracker is restricted to UEFI Forum members. (I&apos;m not commenting on whether that&apos;s a good thing or a bad thing, just stating the fact.) The UEFI Forum can be joined here, if your organization is already a member:

  http://members.uefi.org/kmembership_info/person_signup/

Current members (companies and individuals) are listed here:

  http://uefi.org/members

If neither you (individually) nor your organization are members, the membership agreements can be found here (requires snail mail):

  http://uefi.org/join

For an individual adopter, there doesn&apos;t seem to be a membership fee; however, signing the Adopter Membership Agreement, and sending it as traditional postal mail to the UEFI Administration, appear necessary.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>630</bug_id>
          
          <creation_ts>2017-07-14 14:20:54 +0000</creation_ts>
          <short_desc>Top-level of EDK II has no README.MD file</short_desc>
          <delta_ts>2017-11-09 13:43:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc>https://github.com/tianocore/edk2</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian Richardson (Intel)">brian.richardson</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2442</commentid>
    <comment_count>0</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-07-14 14:20:54 +0000</bug_when>
    <thetext>Top-level of EDK II has no README.MD file. 
https://github.com/tianocore/edk2

This directory should have a README.MD file that explains the basic project and points to detailed documentation in the wiki.

https://github.com/tianocore/tianocore.github.io/wiki/EDK-II

https://github.com/tianocore/tianocore.github.io/wiki/Getting-Started-with-EDK-II</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2489</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-20 20:11:18 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3013</commentid>
    <comment_count>2</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2017-11-09 13:43:20 +0000</bug_when>
    <thetext>Resolved</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>179</bug_id>
          
          <creation_ts>2016-10-26 13:38:53 +0000</creation_ts>
          <short_desc>Add new API for PKCS5 PBKDF2 support</short_desc>
          <delta_ts>2016-11-03 04:23:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Qin Long">qin.long</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>728</commentid>
    <comment_count>0</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2016-10-26 13:38:53 +0000</bug_when>
    <thetext>Add one new API (Pkcs5HashPassword) to provide password derivation capability, which will be the wrapper implementation of PKCS#5 v2.0 password based encryption key derivation function PBKDF2 (The underlying OpenSSL API is PKCS5_PBKDF2_HMAC).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>766</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-27 20:09:51 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>831</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2016-11-03 04:23:28 +0000</bug_when>
    <thetext>The fix was done with commit (a8f37449c7e355e6402e3876c9db9e11d875164f)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>541</bug_id>
          
          <creation_ts>2017-05-16 01:23:11 +0000</creation_ts>
          <short_desc>[BaseTools] Extended PCD Value Syntax to support the flexible value formats</short_desc>
          <delta_ts>2017-12-31 00:23:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2040</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-05-16 01:23:11 +0000</bug_when>
    <thetext>Current PCD value only supports the base data type value. It can’t be specified with the complex data type, especially for VOID* type. To describe VOID* PCD value, more flexible value formats can be supported in DEC/DSC/INF/FDF and build tool command line.

The proposal has been sent to edk2 community.
* Add support for GUID() macro in VOID* PCD byte arrays
* Add support for DEVICE_PATH() macro in VOID* PCD byte arrays
* Add support for LABEL() and OFFSET_OF() macros in VOID* PCD byte arrays.
* Add support for expressions to compute values.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2052</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2017-05-17 21:11:35 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2351</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2017-06-27 22:40:04 +0000</bug_when>
    <thetext>Another usage is to support GuidCName as VOID* PCD Value.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2413</commentid>
    <comment_count>3</comment_count>
      <attachid>85</attachid>
    <who name="nobody">nobody</who>
    <bug_when>2017-07-11 03:14:17 +0000</bug_when>
    <thetext>Created attachment 85
RFC</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2575</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-09 05:13:43 +0000</bug_when>
    <thetext>*** Bug 306 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3278</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-27 01:44:39 +0000</bug_when>
    <thetext>pushed the fix SHA-1: 726c501c2c9a1ef103fab7846e2d1a34506715d8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3295</commentid>
    <comment_count>6</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-12-31 00:23:21 +0000</bug_when>
    <thetext>Device Path support also pushed. SHA-1: 7dbc50bd244d95fdc1741b9cfc561f0bfd724de1</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>85</attachid>
            <date>2017-07-11 03:14:17 +0000</date>
            <delta_ts>2017-07-11 03:14:17 +0000</delta_ts>
            <desc>RFC</desc>
            <filename>RFC V2 Add more flexible PCD value formats in DECINFDSCFDF files.msg</filename>
            <type>application/octet-stream</type>
            <size>45056</size>
            <attacher name="nobody">nobody</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>93</bug_id>
          
          <creation_ts>2016-07-31 20:53:23 +0000</creation_ts>
          <short_desc>Add the build option &quot;/D DISABLE_NEW_DEPRECATED_INTERFACES&quot; in package DSC files</short_desc>
          <delta_ts>2016-08-08 01:11:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
    
    <cf_package>FatPkg</cf_package>
    
    <cf_package>IntelFrameworkModulePkg</cf_package>
    
    <cf_package>IntelFrameworkPkg</cf_package>
    
    <cf_package>IntelFspPkg</cf_package>
    
    <cf_package>IntelFspWrapperPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
    
    <cf_package>PcAtChipsetPkg</cf_package>
    
    <cf_package>PerformancePkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
    
    <cf_package>SourceLevelDebugPkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>397</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-07-31 20:53:23 +0000</bug_when>
    <thetext>We are planning to add the following build option in package DSC files:
[BuildOptions]
  *_*_*_CC_FLAGS = /D DISABLE_NEW_DEPRECATED_INTERFACES

The goal is to make sure that the deprecated APIs will not be used in our code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>408</commentid>
    <comment_count>1</comment_count>
    <who name="Barton">jie.b.gao</who>
    <bug_when>2016-08-04 20:11:44 +0000</bug_when>
    <thetext>Bug Scrub: Submit a new bug for other packages maintained by community, this one assign to wo hao.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>419</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-08-08 01:11:12 +0000</bug_when>
    <thetext>Fixed at:
8c261d7061d92972be280101efc16c993d6d7711..5c8075fce336f25a068cc56b63260aae30d4cf2e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>369</bug_id>
          
          <creation_ts>2017-02-08 00:30:36 +0000</creation_ts>
          <short_desc>BaseTools: Fail to parse the  VfrBin   in Linux map file</short_desc>
          <delta_ts>2017-02-08 00:36:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1395</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-08 00:30:36 +0000</bug_when>
    <thetext>current in the map file, there have 2 ways to save the data, one is like the &quot; .data.InventoryBin&quot;, it save the offset data in the second line, another is like &quot;.data.VfrBin&quot;, it save the offset data in the same line.

Current BaseTools fail to parse the second format.


DriverSample.map:

 .data.InventoryBin
                0x0000000000008b60       0xc9 /tmp/ccR6xwNf.ltrans1.ltrans.o

 .data.VfrBin   0x0000000000008c40      0xcc2 /tmp/ccR6xwNf.ltrans1.ltrans.o</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1396</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-08 00:31:06 +0000</bug_when>
    <thetext>Assign to Yonghong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1397</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-02-08 00:36:53 +0000</bug_when>
    <thetext>fix it SHA-1: d03c056b2946cc2f83b6d206297915dadc08f230</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>733</bug_id>
          
          <creation_ts>2017-10-10 04:01:10 +0000</creation_ts>
          <short_desc>ConvertDevicePathToText() buffer overflow and return wrong string in Defer3rdPartyImageLoad.c</short_desc>
          <delta_ts>2017-10-19 03:30:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          <see_also>https://github.com/01org/luv-yocto/issues/126</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2846</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-10-10 04:01:10 +0000</bug_when>
    <thetext>In edk2\MdeModulePkg\Universal\SecurityStubDxe\Defer3rdPartyImageLoad.c Defer3rdPartyImageLoad() function, 
line 341:
    DevicePathStr = ConvertDevicePathToText (File, FALSE, FALSE);
    DEBUG ((
      DEBUG_INFO,
      &quot;[Security] 3rd party image[%p] %s EndOfDxe: %s.\n&quot;, ImageInfo,
      mEndOfDxe ? L&quot;can be loaded after&quot;: L&quot;is deferred to load before&quot;,
      DevicePathStr
      ));

The ConvertDevicePathToText (File, FALSE, FALSE) will have couples of memory buffer overflow internally and there are many wrong/unreadable characters in its returned string to DevicePathStr. You can easily find the wrong characters in the line 342 debug output info. The line 342 DEBUG() will print the DevicePathStr string, and below is my result:

[Security] 3rd party image[0] can be loaded after EndOfDxe: PciRoot(0x0)/Pci(0x1F,0x2)/Sata(0x0,0xFFFF,0x0)/HD(2,GPT,A22186F7-06FE-4B95-AC5E-66C186C24B2A,0x8800,0x34800)/\EFI\BOOT\bitspaH/bootx64.efi痯aH.

You should can reproduce this issue like this:

1. Download the 64bits Linux Uefi Validation(LUV) image in https://download.01.org/linux-uefi-validation/v2.1/luv-v2.1_netboot_x86_64_.tar.bz2 and decompress this image as default luv-v2.1_diskboot_gpt_x86_64_.img
2. Build latest edk2 OVMF platform debug image like below:
$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -t GCC5 -DSECURE_BOOT_ENABLE=TRUE -a IA32 -a X64 -b NOOPT -DDEBUG_ON_SERIAL_PORT -n 5
3. Run the LUV image and OVMF bios image on qemu like below:
$ qemu-system-x86_64 -m 5120 -enable-kvm -hda /home/jshi19/workspace/simics5-project/images/luv-v2.1_diskboot_gpt_x86_64_.img -machine pc-q35-2.9 -bios ../Ovmf3264/NOOPT_GCC5/FV/OVMF.fd -serial file:serial.log
4. Check the serial.log to find the wrong string characters in Defer3rdPartyImageLoad.c line 342 DEBUG() output.


I catch this issue with Edk2 AddressSanitizer, and below are the part of call stack infos when the buffer overflow happen in the ConvertDevicePathToText internally. FYI.

--------------------------- __asan_load0x01 is called---------------------------
BasePrintLibSPrintMarker
/home/jshi19/wksp_efi/edk2/MdePkg/Library/BasePrintLib/PrintLibInternal.c:1111:31

SPrintLength
/home/jshi19/wksp_efi/edk2/MdePkg/Library/BasePrintLib/PrintLib.c:935:3

UefiDevicePathLibCatPrint
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c:44:9

DevPathToTextFilePath
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c:1898:1

UefiDevicePathLibConvertDevicePathToText
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c:2416:15

ConvertDevicePathToText
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/UefiDevicePathLib.c:318:3

ConvertDevicePathToText
/home/jshi19/wksp_efi/edk2/CryptoPkg/Library/OpensslLib/openssl/crypto/des/fcrypt_b.c:55:9

Defer3rdPartyImageLoad
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/SecurityStubDxe/Defer3rdPartyImageLoad.c:341:17

Security2StubAuthenticate
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/SecurityStubDxe/SecurityStub.c:147:12

CoreLoadImageCommon
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Image/Image.c:1175:20

CoreLoadImage
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Image/Image.c:1447:10

---------------------------__asan_load0x01 is called---------------------------
BasePrintLibSPrintMarker
/home/jshi19/wksp_efi/edk2/MdePkg/Library/BasePrintLib/PrintLibInternal.c:1111:92

SPrintLength
/home/jshi19/wksp_efi/edk2/MdePkg/Library/BasePrintLib/PrintLib.c:935:3

UefiDevicePathLibCatPrint
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c:44:9

DevPathToTextFilePath
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c:1898:1

UefiDevicePathLibConvertDevicePathToText
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c:2416:15

ConvertDevicePathToText
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/UefiDevicePathLib.c:318:3

ConvertDevicePathToText
/home/jshi19/wksp_efi/edk2/CryptoPkg/Library/OpensslLib/openssl/crypto/des/fcrypt_b.c:55:9

Defer3rdPartyImageLoad
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/SecurityStubDxe/Defer3rdPartyImageLoad.c:341:17

Security2StubAuthenticate
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/SecurityStubDxe/SecurityStub.c:147:12

CoreLoadImageCommon
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Image/Image.c:1175:20

CoreLoadImage
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Image/Image.c:1447:10

---------------------------__asan_load0x01 is called---------------------------
BasePrintLibSPrintMarker
/home/jshi19/wksp_efi/edk2/MdePkg/Library/BasePrintLib/PrintLibInternal.c:1111:144

SPrintLength
/home/jshi19/wksp_efi/edk2/MdePkg/Library/BasePrintLib/PrintLib.c:935:3

UefiDevicePathLibCatPrint
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c:44:9

DevPathToTextFilePath
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c:1898:1

UefiDevicePathLibConvertDevicePathToText
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c:2416:15

ConvertDevicePathToText
/home/jshi19/wksp_efi/edk2/MdePkg/Library/UefiDevicePathLib/UefiDevicePathLib.c:318:3

ConvertDevicePathToText
/home/jshi19/wksp_efi/edk2/CryptoPkg/Library/OpensslLib/openssl/crypto/des/fcrypt_b.c:55:9

Defer3rdPartyImageLoad
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/SecurityStubDxe/Defer3rdPartyImageLoad.c:341:17

Security2StubAuthenticate
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Universal/SecurityStubDxe/SecurityStub.c:147:12

CoreLoadImageCommon
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Image/Image.c:1175:20

CoreLoadImage
/home/jshi19/wksp_efi/edk2/MdeModulePkg/Core/Dxe/Image/Image.c:1447:10</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2847</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-10 04:58:53 +0000</bug_when>
    <thetext>Hi Steven,

(1) I think you pasted the wrong link for the compressed image -- your link is for the netboot image, but the rest of the report is about the disk boot GPT image. The link for the latter seems to be:

https://download.01.org/linux-uefi-validation/v2.1/luv-v2.1_diskboot_gpt_x86_64_.tar.bz2

(2) I looked at the functions listed in the backtraces. I didn&apos;t look very carefully, but the logic in all the outer frames looks sane. In particular, the object used for formatting the textual representation is a POOL_PRINT, which is resized in UefiDevicePathLibCatPrint() as necessary, with ReallocatePool().

The UefiDevicePathLibCatPrint() function calls SPrintLength() specifically in order to learn the number of CHAR16&apos;s required.

In turn SPrintLength() calls BasePrintLibSPrintMarker(), passing in the COUNT_ONLY_NO_PRINT flag. So I don&apos;t think any *output* buffer is overflowed.

Maybe the *input* buffer receives an out-of-bounds read access, while counting the characters. However, that means that the *input* device path is wrong to begin with.

According to the FILEPATH_DEVICE_PATH definition, the PathName member must be NUL-terminated. The debug message contains

  EFI\BOOT\bitspaH/bootx64.efi痯aH.

where in fact it should be

  EFI\BOOT\bits/bootx64.efi

Please also note the inconsistent use of backslashes vs. forward slashes, and the inconsistent use of lower case and upper case -- &quot;EFI\BOOT\&quot; uses back-slashes, but the rest, &quot;bits/bootx64.efi&quot;, uses a forward slash. In addition, the former uses upper case, while the rest uses lower case.

This suggests to me that whatever constructs this FILEPATH_DEVICE_PATH in the first place has the bug. Thus, it would be interesting to log the &quot;FilePath&quot; parameter in CoreLoadImage() and CoreLoadImageCommon(), in order to see whether the caller of gBS-&gt;LoadImage() already has a malformed pathname. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2848</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-10 05:03:54 +0000</bug_when>
    <thetext>(By &apos;log the &quot;FilePath&quot; parameter in CoreLoadImage() and CoreLoadImageCommon()&apos;, I meant a hexdump. Because the question to verify is whether the *binary* representation of the device path is correct.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2852</commentid>
    <comment_count>3</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-10-10 22:40:44 +0000</bug_when>
    <thetext>Hi Laszlo,
Yes. I pasted the wrong link for the LUV image. Thank you to correct it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2863</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-10-12 20:03:37 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2869</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-12 22:48:06 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; Hi Steven,
&gt; 
&gt; (1) I think you pasted the wrong link for the compressed image -- your link
&gt; is for the netboot image, but the rest of the report is about the disk boot
&gt; GPT image. The link for the latter seems to be:
&gt; 
&gt; https://download.01.org/linux-uefi-validation/v2.1/luv-v2.
&gt; 1_diskboot_gpt_x86_64_.tar.bz2
&gt; 
&gt; (2) I looked at the functions listed in the backtraces. I didn&apos;t look very
&gt; carefully, but the logic in all the outer frames looks sane. In particular,
&gt; the object used for formatting the textual representation is a POOL_PRINT,
&gt; which is resized in UefiDevicePathLibCatPrint() as necessary, with
&gt; ReallocatePool().
&gt; 
&gt; The UefiDevicePathLibCatPrint() function calls SPrintLength() specifically
&gt; in order to learn the number of CHAR16&apos;s required.
&gt; 
&gt; In turn SPrintLength() calls BasePrintLibSPrintMarker(), passing in the
&gt; COUNT_ONLY_NO_PRINT flag. So I don&apos;t think any *output* buffer is overflowed.
&gt; 
&gt; Maybe the *input* buffer receives an out-of-bounds read access, while
&gt; counting the characters. However, that means that the *input* device path is
&gt; wrong to begin with.
&gt; 
&gt; According to the FILEPATH_DEVICE_PATH definition, the PathName member must
&gt; be NUL-terminated. The debug message contains
&gt; 
&gt;   EFI\BOOT\bitspaH/bootx64.efi痯aH.
&gt; 
&gt; where in fact it should be
&gt; 
&gt;   EFI\BOOT\bits/bootx64.efi
&gt; 
&gt; Please also note the inconsistent use of backslashes vs. forward slashes,
&gt; and the inconsistent use of lower case and upper case -- &quot;EFI\BOOT\&quot; uses
&gt; back-slashes, but the rest, &quot;bits/bootx64.efi&quot;, uses a forward slash. In
&gt; addition, the former uses upper case, while the rest uses lower case.
&gt; 
&gt; This suggests to me that whatever constructs this FILEPATH_DEVICE_PATH in
&gt; the first place has the bug. Thus, it would be interesting to log the
&gt; &quot;FilePath&quot; parameter in CoreLoadImage() and CoreLoadImageCommon(), in order
&gt; to see whether the caller of gBS-&gt;LoadImage() already has a malformed
&gt; pathname. Thanks.

I agree with your guess. The *input* device path might be wrong.

Steven,
Can you please try running Edk2 AddressSanitizer just to boot Shell? Can this issue be detected?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2873</commentid>
    <comment_count>6</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-10-13 09:02:28 +0000</bug_when>
    <thetext>I add below extra code to dump the device path and its convert string, the GCC5 NOOPT build output are pasted as well.

diff --git a/MdeModulePkg/Universal/SecurityStubDxe/Defer3rdPartyImageLoad.c b/MdeModulePkg/Universal/SecurityStubDxe/Defer3rdPartyImageLoad.c
old mode 100644
new mode 100755
index 7135a9d..7379c54
--- a/MdeModulePkg/Universal/SecurityStubDxe/Defer3rdPartyImageLoad.c
+++ b/MdeModulePkg/Universal/SecurityStubDxe/Defer3rdPartyImageLoad.c
@@ -304,6 +304,17 @@ DxeSmmReadyToLock (
   }
 }

+VOID
+DumpBuf (
+  IN UINT8    *Data,
+  IN UINTN    Length
+  )
+{
+  UINTN    Index;
+  for (Index = 0; Index &lt; Length; Index++) {
+    Print (L&quot;%02x &quot;, Data[Index]);
+  }
+}
 /**
   Defer the 3rd party image load and installs Deferred Image Load Protocol.

@@ -336,6 +347,24 @@ Defer3rdPartyImageLoad (

   ImageInfo = LookupImage (File, BootPolicy);

+  EFI_DEVICE_PATH_PROTOCOL *Node;
+  UINTN Length;
+  CHAR16 *DevicePathString;
+  Length = 0;
+  Node = (EFI_DEVICE_PATH_PROTOCOL *) File;
+  while (!IsDevicePathEnd (Node)) {
+    Length += DevicePathNodeLength (Node);
+    Node = NextDevicePathNode (Node);
+  }
+  Length += DevicePathNodeLength (Node);
+  DEBUG((DEBUG_ERROR, &quot;DevicePath dump:\n&quot;));
+  DumpBuf ((UINT8 *)File, Length);
+  DEBUG((DEBUG_ERROR, &quot;\n&quot;));
+  DevicePathString = ConvertDevicePathToText (File, FALSE, FALSE);
+  DEBUG((DEBUG_ERROR, &quot;DevicePathString dump:\n&quot;));
+  DumpBuf ((UINT8 *)DevicePathString, StrSize(DevicePathString));
+  DEBUG((DEBUG_ERROR, &quot;\n&quot;));
+
   DEBUG_CODE (
     CHAR16 *DevicePathStr;
     DevicePathStr = ConvertDevicePathToText (File, FALSE, FALSE);

GCC5 NOOPT:
DevicePath dump:
02 01 0C 00 D0 41 03 0A 00 00 00 00 01 01 06 00 02 1F 03 12 0A 00 00 00 FF FF 00 00 04 01 2A 00 02 00 00 00 00 88 00 00 00 00 00 00 00 48 03 00 00 00 00 00 F7 86 21 A2 FE 06 95 4B AC 5E 66 C1 86 C2 4B 2A 02 02 04 04 20 00 5C 00 45 00 46 00 49 00 5C 00 42 00 4F 00 4F 00 54 00 5C 00 62 00 69 00 74 00 73 00 04 04 1A 00 62 00 6F 00 6F 00 74 00 78 00 36 00 34 00 2E 00 65 00 66 00 69 00 7F FF 04 00 
DevicePathString dump:
50 00 63 00 69 00 52 00 6F 00 6F 00 74 00 28 00 30 00 78 00 30 00 29 00 2F 00 50 00 63 00 69 00 28 00 30 00 78 00 31 00 46 00 2C 00 30 00 78 00 32 00 29 00 2F 00 53 00 61 00 74 00 61 00 28 00 30 00 78 00 30 00 2C 00 30 00 78 00 46 00 46 00 46 00 46 00 2C 00 30 00 78 00 30 00 29 00 2F 00 48 00 44 00 28 00 32 00 2C 00 47 00 50 00 54 00 2C 00 41 00 32 00 32 00 31 00 38 00 36 00 46 00 37 00 2D 00 30 00 36 00 46 00 45 00 2D 00 34 00 42 00 39 00 35 00 2D 00 41 00 43 00 35 00 45 00 2D 00 36 00 36 00 43 00 31 00 38 00 36 00 43 00 32 00 34 00 42 00 32 00 41 00 2C 00 30 00 78 00 38 00 38 00 30 00 30 00 2C 00 30 00 78 00 33 00 34 00 38 00 30 00 30 00 29 00 2F 00 5C 00 45 00 46 00 49 00 5C 00 42 00 4F 00 4F 00 54 00 5C 00 62 00 69 00 74 00 73 00 70 74 61 6C AF AF AF AF 48 00 2F 00 62 00 6F 00 6F 00 74 00 78 00 36 00 34 00 2E 00 65 00 66 00 69 00 AF AF AF AF AF AF 70 74 61 6C AF AF AF AF 48 00 00 00 
[Security] 3rd party image[0] can be loaded after EndOfDxe: PciRoot(0x0)/Pci(0x1F,0x2)/Sata(0x0,0xFFFF,0x0)/HD(2,GPT,A22186F7-06FE-4B95-AC5E-66C186C24B2A,0x8800,0x34800)/\EFI\BOOT\bitspaH/bootx64.efi痯aH.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2874</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-13 09:25:06 +0000</bug_when>
    <thetext>This seems to confirm the suspicion. Consider the final bytes in the binary devpath dump:

    2E 00 65 00 66 00 69 00 7F FF 04 00
    ^^^^^ ^^^^^ ^^^^^ ^^^^^ ^^ ^^ ^^^^^
    |     |     |     |     |  |  |
    |     |     |     |     |  |  Length
    |     |     |     |     |  END_ENTIRE_DEVICE_PATH_SUBTYPE
    L&apos;.&apos;  L&apos;e&apos;  L&apos;f&apos;  L&apos;i&apos;  END_DEVICE_PATH_TYPE

This proves that the

  FILEPATH_DEVICE_PATH.PathName

field ends in

  L&quot;.efi&quot;

but *without* an L&apos;\0&apos; terminator, before the &quot;end&quot; device path node follows.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2877</commentid>
    <comment_count>8</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-13 10:33:04 +0000</bug_when>
    <thetext>Steven,
Per UEFI Spec, the Path Name should be &quot;A NULL-terminated Path string&quot; including directory and file names.
But I agree that enhancing DevicePathToText logic to handle the case when there is no NULL-terminator is better.
Check whether the below patch works for you.


From d4b5ae4da698ec3cfdd676e6d37bb6fcae331407 Mon Sep 17 00:00:00 2001
From: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Date: Fri, 13 Oct 2017 22:32:02 +0800
Subject: [PATCH] MdePkg/DevicePathLib: Do not assume FilePath is
 NULL-terminated

Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Cc: Steven Shi &lt;steven.shi@intel.com&gt;
---
 MdePkg/Library/UefiDevicePathLib/DevicePathToText.c | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

diff --git a/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c b/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c
index 63542dba96..07788b0713 100644
--- a/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c
+++ b/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c
@@ -1892,9 +1892,21 @@ DevPathToTextFilePath (
   )
 {
   FILEPATH_DEVICE_PATH  *Fp;
+  UINTN                 PathLength;
+  CHAR16                *PathName;
 
-  Fp = DevPath;
-  UefiDevicePathLibCatPrint (Str, L&quot;%s&quot;, Fp-&gt;PathName);
+  //
+  // PathName in the device path may not be null terminated.
+  //
+  Fp         = DevPath;
+  PathLength = DevicePathNodeLength (Fp) - sizeof (EFI_DEVICE_PATH_PROTOCOL);
+  PathName   = AllocatePool (PathLength + sizeof (CHAR16));
+  ASSERT (PathName != NULL);
+  
+  CopyMem (PathName, Fp-&gt;PathName, PathLength);
+  PathName[PathLength / sizeof (CHAR16)] = L&apos;\0&apos;;
+  UefiDevicePathLibCatPrint (Str, L&quot;%s&quot;, PathName);
+  FreePool (PathName);
 }
 
 /**
-- 
2.12.2.windows.2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2878</commentid>
    <comment_count>9</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-10-13 11:04:29 +0000</bug_when>
    <thetext>Hi Ruiyu,
Your enhancement works for me. Thanks!
It looks the LUV OS loader \EFI\BOOT\bootx64.efi will load the \EFI\BOOT\bits/bootx64.efi (which is GRUB in fact) internally but create the wrong device path string for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2880</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-13 16:29:03 +0000</bug_when>
    <thetext>Ray, I think we shouldn&apos;t use an AllocatePool() in DevPathToTextFilePath() and assume it succeeds in every case.

Instead, we should check if PathLength is NUL-terminated. If it is not, then we should call UefiDevicePathLibCatPrint() nonetheless, but instead of the plain L&quot;%s&quot; format specifier, we should use L&quot;%.*s&quot;. (In other words, specify a &quot;precision&quot;, and pass &quot;*&quot; as the precision.) This way we can pass in the number of characters to print, as a UINTN, without relying on NUL-termination:

  UefiDevicePathLibCatPrint (
    Str,
    L&quot;%.*s&quot;,
    PathLength / sizeof (CHAR16),
    PathName
    );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2881</commentid>
    <comment_count>11</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-15 22:24:32 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #10)
&gt; Ray, I think we shouldn&apos;t use an AllocatePool() in DevPathToTextFilePath()
&gt; and assume it succeeds in every case.
&gt; 
&gt; Instead, we should check if PathLength is NUL-terminated. If it is not, then
&gt; we should call UefiDevicePathLibCatPrint() nonetheless, but instead of the
&gt; plain L&quot;%s&quot; format specifier, we should use L&quot;%.*s&quot;. (In other words,
&gt; specify a &quot;precision&quot;, and pass &quot;*&quot; as the precision.) This way we can pass
&gt; in the number of characters to print, as a UINTN, without relying on
&gt; NUL-termination:
&gt; 
&gt;   UefiDevicePathLibCatPrint (
&gt;     Str,
&gt;     L&quot;%.*s&quot;,
&gt;     PathLength / sizeof (CHAR16),
&gt;     PathName
&gt;     );

Laszlo,
Thanks for the suggestion. It&apos;s a very good idea.
But I re-checked the gBS-&gt;LoadImage() implementation. It uses DxeServicesLib: GetFileBufferByFilePath() to load the boot option.
The GetFileBufferByFilePath() assumes the PathName in Media File Path node is null-terminated.
So I don&apos;t understand why Steven can launch the LUV successfully.

Even I can enhance the to-text logic to handle non-null case. It&apos;s not a complete fix.
And I don&apos;t know if it&apos;s necessary to change all code to handle the spec-incompliance data.
Maybe changing LUV is much easier.

Steven,
What do you think?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2882</commentid>
    <comment_count>12</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-10-15 22:40:21 +0000</bug_when>
    <thetext>I can add submit tracker to LUV to fix its loader issue in https://github.com/01org/luv-yocto/issues

But I still hope we can do necessary enhancement in our code to defend such unintentional fault. Because this might be a intentional example of how to attack Uefi in fact.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2883</commentid>
    <comment_count>13</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-15 22:45:39 +0000</bug_when>
    <thetext>(In reply to Shi Steven from comment #12)
&gt; I can add submit tracker to LUV to fix its loader issue in
&gt; https://github.com/01org/luv-yocto/issues
&gt; 
&gt; But I still hope we can do necessary enhancement in our code to defend such
&gt; unintentional fault. Because this might be an intentional example of how to
&gt; attack Uefi in fact.

Hmm I agree:) Do you know why the LUV can be launched successfully in current implementation?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2884</commentid>
    <comment_count>14</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-10-15 22:59:42 +0000</bug_when>
    <thetext>Have submitted this issue to LUV: https://github.com/01org/luv-yocto/issues/126

Hi Ray,
You could talk this issue to LUV maintainer: ricardo.neri@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2886</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-16 05:03:48 +0000</bug_when>
    <thetext>I think we should not spend too many resources to work around this error in
LUV.

The UEFI spec is clear on FILEPATH_DEVICE_PATH; in UEFI-2.7, section

  10.3.6.4 File Path Media Device Path

says

  Mnemonic: Path Name

  Byte Offset: 4

  Byte Length: N

  Description: A NULL-terminated Path string including directory and file
  names. The length of this string n can be determined by subtracting 4 from
  the Length entry. A device path may contain one or more of these nodes.
  Each node can optionally add a &quot;\&quot; separator to the beginning and/or the
  end of the Path Name string. The complete path to a file can be found by
  logically concatenating all the Path Name strings in the File Path Media
  Device Path nodes. This is typically used to describe the directory path
  in one node, and the filename in another node.

NUL-termination is clearly required. If the agent that composes the devpath
node does not ensure that, then the behavior is undefined.

It&apos;s nice if in edk2 we can catch some programming errors in UEFI
applications, but it&apos;s not a requirement, and we should not spend
disproportionate time on it.

I disagree that this can be used to attack UEFI more than any other
undefined behavior via interface contract violation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2887</commentid>
    <comment_count>16</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-16 05:09:22 +0000</bug_when>
    <thetext>Steven,
I tried the steps but cannot see the corrupted device path text.
Below is the command I used:
qemu-system-x86_64.exe -smp 1 -drive if=pflash,format=raw,unit=0,file=OVMF_CODE.fd,readonly=on -drive if=pflash,format=raw,unit=1,file=OVMF_VARS.fd -boot menu=on,splash-time=0 -usb -device nec-usb-xhci,id=xhci -usbdevice keyboard -usbdevice mouse -net none --serial COM6 -hda luv-v2.1_diskboot_gpt_x86_64_.img</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2888</commentid>
    <comment_count>17</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-10-16 08:08:44 +0000</bug_when>
    <thetext>Hi Ray,
I use the Linux Qemu, not the Windows version. Please see the reproduce steps in this tracker first description.
I&apos;m OK if you don&apos;t hope to fix it. I just need this track is confirmed. We can set it as lowest priority and wait for LUV owner fix its loader issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2898</commentid>
    <comment_count>18</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-10-19 01:23:27 +0000</bug_when>
    <thetext>It&apos;s LUV&apos;s bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2900</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2017-10-19 03:30:50 +0000</bug_when>
    <thetext>I&apos;m changing the resolution from WONTFIX to INVALID:

&quot;WONTFIX&quot; generally means that
- the bug is in the component that it was reported for,
- but there are reasons for not fixing it.

&quot;INVALID&quot; means
- the bug report is not valid *for the component* that it was reported for
  (it could be valid for another component),
- and we can&apos;t easily reassign the bug to the right component
  (for example because it is tracked in an entirely separate bug tracker).

(See also the explanation of INVALID in &lt;https://bugzilla.tianocore.org/page.cgi?id=fields.html#bug_status&gt; -- &quot;The problem described is not a bug&quot;. Some Bugzilla installations have a separate resolution called NOTABUG for this.)

Steven linked &lt;https://github.com/01org/luv-yocto/issues/126&gt; in comment 14 (and I&apos;m now adding that link to the See Also field); so I agree this BZ should be considered resolved (as INVALID).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>282</bug_id>
          
          <creation_ts>2016-12-02 16:00:44 +0000</creation_ts>
          <short_desc>Compiler warnings building basetools on Linux</short_desc>
          <delta_ts>2019-08-27 20:23:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vishal">vishalo</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>heyi.guo</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1111</commentid>
    <comment_count>0</comment_count>
    <who name="Vishal">vishalo</who>
    <bug_when>2016-12-02 16:00:44 +0000</bug_when>
    <thetext>bits.c: In function DefErrSetForC1:
bits.c:579:5: warning: format %d expects argument of type int, but argument 5 has type long unsigned int [-Wformat]
bits.c:584:5: warning: format %d expects argument of type int, but argument 4 has type long unsigned int [-Wformat]
bits.c: In function gDefErrSetForCC1:
bits.c:645:5: warning: format %d expects argument of type int, but argument 5 has type long unsigned int [-Wformat]
bits.c:650:5: warning: format %d expects argument of type int, but argument 6 has type long unsigned int [-Wformat]
bits.c:656:5: warning: format %d expects argument of type int, but argument 5 has type long unsigned int [-Wformat]
bits.c:658:5: warning: format %d expects argument of type int, but argument 4 has type long unsigned int [-Wformat]
bits.c: In function GenParser_c_Hdr:
bits.c:796:7: warning: format %d expects argument of type int, but argument 8 has type long unsigned int [-Wformat]
bits.c: In function GenErrHdr:
bits.c:915:2: warning: format %d expects argument of type int, but argument 3 has type long unsigned int [-Wformat]
fset2.c: In function MR_backTraceReport:
fset2.c:2213:7: warning: format not a string literal and no format arguments [-Wformat-security]
gen.c: In function genHdr:
gen.c:3869:17: warning: format not a string literal and no format arguments [-Wformat-security]
gen.c:3914:2: warning: format %d expects argument of type int, but argument 3 has type long unsigned int [-Wformat]
gen.c: In function genStdPCCTSIncludeFile:
gen.c:4128:2: warning: format %d expects argument of type int, but argument 3 has type long unsigned int [-Wformat]
lex.c: In function DumpNextNameInDef:
lex.c:709:12: warning: format not a string literal and no format arguments [-Wformat-security]
lex.c: In function DumpType:
lex.c:774:2: warning: format not a string literal and no format arguments [-Wformat-security]
lex.c: In function DumpRetValStruct:
lex.c:855:3: warning: format not a string literal and no format arguments [-Wformat-security]
lex.c:857:3: warning: format not a string literal and no format arguments [-Wformat-security]
../support/set/set.c: In function set_val:
../support/set/set.c:557:2: warning: format %d expects argument of type int, but argument 3 has type gsize_t [-Wformat]
Antlr parser generator   Version 1.33MR33   1989-2001
VfrSyntax.g, line 1828: warning: predicate: LT(i) missing, bad, or with i=0; assuming i=1
VfrSyntax.g, line 1833: warning: predicate: LT(i) missing, bad, or with i=0; assuming i=1
VfrSyntax.g, line 3264: warning: alts 1 and 2 of {..} ambiguous upon ( &quot;;&quot; RefreshGuid GuidOp Locked Image EndIf InconsistentIf DisableIf SuppressIf Default GrayOutIf )
VfrSyntax.g, line 3273: warning: alts 1 and 2 of {..} ambiguous upon ( &quot;;&quot; RefreshGuid GuidOp Locked Image EndIf InconsistentIf DisableIf SuppressIf Default GrayOutIf )
VfrSyntax.g, line 3282: warning: alts 1 and 2 of {..} ambiguous upon ( &quot;;&quot; RefreshGuid GuidOp Locked Image EndIf InconsistentIf DisableIf SuppressIf Default GrayOutIf )
VfrSyntax.g, line 3292: warning: alts 1 and 2 of {..} ambiguous upon ( &quot;;&quot; RefreshGuid GuidOp Locked Image EndIf InconsistentIf DisableIf SuppressIf Default GrayOutIf )
VfrSyntax.g, line 3322: warning: alts 1 and 2 of {..} ambiguous upon ( &quot;;&quot; RefreshGuid GuidOp Locked Image EndIf InconsistentIf DisableIf SuppressIf Default GrayOutIf )
VfrSyntax.g, line 3331: warning: alts 1 and 2 of {..} ambiguous upon ( &quot;;&quot; RefreshGuid GuidOp Locked Image EndIf InconsistentIf DisableIf SuppressIf Default GrayOutIf )
../support/set/set.c: In function set_val:
../support/set/set.c:557:2: warning: format %d expects argument of type int, but argument 3 has type gsize_t [-Wformat]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1131</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-12-07 20:08:15 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1183</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-19 01:23:28 +0000</bug_when>
    <thetext>Change owner to Dong Eric because the warnings all for VfrCompile</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1200</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-21 20:16:32 +0000</bug_when>
    <thetext>*** Bug 299 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1201</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-21 20:21:23 +0000</bug_when>
    <thetext>We already pushed following 4 fixes, now there will still be 10 warnings remaining.

SHA-1: 4fa9134e47bfb3b7cd9348c8d44fdb029830018b
* BaseTools GCC makefile: disable unused-result warning for CPP file

SHA-1: 00de920a0339e78824cdb9015f66c5a98644e0b6
* BaseTools: fix write-strings build warnings

SHA-1: 8230d45bba517d78c20634425587efeb6fa14d7c
* BaseTools: fix format type build warnings

SHA-1: 5b26adf03a0b66b741ff05daee985888fe1d636f
* BaseTools: fix format-security build warnings</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1208</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2016-12-23 01:41:52 +0000</bug_when>
    <thetext>Resolved the 2 warnings in file BaseTools/Source/C/VfrCompile/Pccts/support/set/set.c via commit 0a64f49

https://github.com/tianocore/edk2/commit/0a64f49fde09928b6061543b08e6da195e2abfbd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2573</commentid>
    <comment_count>6</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2017-08-09 03:43:25 +0000</bug_when>
    <thetext>transfer to new owner dandan.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9327</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:23:23 +0000</bug_when>
    <thetext>Obviously fixed by now; otherwise we&apos;d be seeing the warnings all the
time.

At the time of writing, master is at commit 30b4abc6e914. Since commit
0a64f49 (mentioned in comment 5), &quot;BaseTools/Source/C/VfrCompile&quot; has
been modified by the following commits:

&gt;|  1  223a99e52467 BaseTools: Convert incomplete expression with dangling while()
&gt;|  2  d37fa01fbbe2 VfrCompile: fix invalid comparison between pointer and integer
&gt;|  3  8c1e13d327e6 BaseTools/VfrCompile: Fix segmentation fault issues
&gt;|  4  ba78032bc8c9 BaseTools/VfrCompile: Remove the MAX_PATH limitation
&gt;|  5  2b7f3d4a6bb7 BaseTool/VfrCompile: Support Union type in VFR
&gt;|  6  42c808d4cbc6 BaseTool/VfrCompiler: Support Bit fields in EFI/Buffer VarStore
&gt;|  7  631ffb70ebbe BaseTools/VfrCompile: Add check to avoid using NULL pointer
&gt;|  8  a9f6e0a4dc6d BaseTools: Replace ARCH with HOST_ARCH in C Makefile to avoid conflict
&gt;|  9  9edcd2788d7b BaseTools/VfrCompile: Assign &apos;NULL&apos; for closed file handle
&gt;| 10  d837f33ab00c BaseTools/VfrCompile: Add/refine boundary checks for strcpy/strcat
&gt;| 11  b748e35c2bb0 BaseTools/VfrCompile: Resolve uninit class variables in constructor
&gt;| 12  8b13e18143cc BaseTools: correct mal-typed CVfrDLGLexer::errstd
&gt;| 13  a5b84d3480b4 BaseTools: eliminate unused expression result
&gt;| 14  4e97974c1e52 BaseTools: silence parentheses-equality warning
&gt;| 15  5397bd425eba BaseTools: resolve initialization order errors in VfrFormPkg.h
&gt;| 16  d16e777ac564 BaseTools GNUmakefile: Remove HOST_ARCH in every tool Makefile
&gt;| 17  f7e98581021b BaseTool/VfrCompile: make delete[] match with new[]
&gt;| 18  65e0e10d2332 BaseTool/VfrCompile: Fix potential memory leak issue
&gt;| 19  2aa9a9f03efe BaseTools/VfrCompile:Fix memory leak issues
&gt;| 20  7ac4250e8724 BaseTool/VfrCompile: make delete[] match with new[]
&gt;| 21  13e3f8c03339 BaseTools/VfrCompile: Avoid using uninitialized pointer
&gt;| 22  f7496d717357 BaseTools: Clean up source files
&gt;| 23  b8a661702643 BaseTools/Source/C: split &quot;-O2&quot; to BUILD_OPTFLAGS
&gt;| 24  aa4e0df1f0c7 BaseTools/VfrCompile: honor EXTRA_LDFLAGS
&gt;| 25  9248a4717a9e BaseTools/VfrCompile: report error for Integer overflow
&gt;| 26  fb0b35e05f77 BaseTools: Various typo
&gt;| 27  2e351cbe8e19 BaseTools: Replace BSD License with BSD+Patent License
&gt;| 28  1b72fd5121b5 BaseTools/VfrCompile: Remove framework VFR support
&gt;| 29  4ff689d98277 BaseTools/VfrCompile: clean Framework Vfr support
&gt;| 30  2d53d54a5bf5 BaseTools: Fix various typos

Some of these might fix warnings.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>647</bug_id>
          
          <creation_ts>2017-07-21 04:52:31 +0000</creation_ts>
          <short_desc>[SHell] Align &quot;dh&quot; output to EDK Shell &quot;dh&quot;</short_desc>
          <delta_ts>2017-09-26 00:20:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2495</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-21 04:52:31 +0000</bug_when>
    <thetext>1. Output of &quot;dh -d &lt;handle&gt;&quot;
   UEFI Shell: display the handle pointer, and display the protocol name one per line. Some texts are displayed in blue color, which are hard to read.
   EDK Shell: do not display the handle pointer, and display all the protocol names in a single line. All key information is displayed in high-light style, which is easy to read.

2. Output of &quot;dh -v &lt;handle&gt;&quot;
   UEFI Shell: Display the full text presentation of device path. Do not display the protocol instance pointer value.
   EDK Shell: Not only display the full text of device path, but also display the detailed information of each node. Display the protocol instance pointer value.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2496</commentid>
    <comment_count>1</comment_count>
      <attachid>90</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-21 04:53:07 +0000</bug_when>
    <thetext>Created attachment 90
DH -D</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2497</commentid>
    <comment_count>2</comment_count>
      <attachid>91</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-07-21 04:53:20 +0000</bug_when>
    <thetext>Created attachment 91
DH -V</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2520</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-07-27 20:07:12 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2786</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-09-26 00:20:45 +0000</bug_when>
    <thetext>pushed to master in revision 09e8678380aaaf0a5ef59179ff59e0a045d1b0bf..46f3fecd9bb7b5abaaa46c9cd479f6e6f0b12fc4</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>90</attachid>
            <date>2017-07-21 04:53:07 +0000</date>
            <delta_ts>2017-07-21 04:53:07 +0000</delta_ts>
            <desc>DH -D</desc>
            <filename>dh-d.png</filename>
            <type>image/png</type>
            <size>26974</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>91</attachid>
            <date>2017-07-21 04:53:20 +0000</date>
            <delta_ts>2017-07-21 04:53:20 +0000</delta_ts>
            <desc>DH -V</desc>
            <filename>dh-v.png</filename>
            <type>image/png</type>
            <size>21029</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>473</bug_id>
          
          <creation_ts>2017-04-13 02:44:46 +0000</creation_ts>
          <short_desc>BaseTools: the file of &quot;MODULE_UNI_FILE&quot; is not copy into OUTPUT dir</short_desc>
          <delta_ts>2017-06-24 11:13:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1802</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-13 02:44:46 +0000</bug_when>
    <thetext>current in the As Built INF file, there will have the item &quot;MODULE_UNI_FILE&quot;, but the real file is not exist in the same directory of the As Built INF.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1803</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-04-13 02:45:31 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2339</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-06-24 11:13:22 +0000</bug_when>
    <thetext>Fix it SHA-1: 78bcd52abb1444c4dec7536d35f1a89dfe7e3625</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>301</bug_id>
          
          <creation_ts>2016-12-20 20:04:16 +0000</creation_ts>
          <short_desc>PxeBcSelectBootMenu does not accept input</short_desc>
          <delta_ts>2017-06-05 04:40:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Schnupp">michael.schnupp</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1189</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Schnupp">michael.schnupp</who>
    <bug_when>2016-12-20 20:04:16 +0000</bug_when>
    <thetext>I used qemu with OVMF and used the contained PXE client for booting.
The menu entries are listed fine, but it is not possible to choose between them.

After a look at the source it looks like this line should contain &quot;==&quot; instead of &quot;!=&quot;:
https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Universal/Network/UefiPxeBcDxe/PxeBcDhcp.c#L1917

For reproducing I use a bridge to connect dnsmasq and qemu:

sudo dnsmasq -zdi br0 -C /dev/null -p0 --dhcp-range=192.168.77.50,192.168.77.150,12h --enable-tftp --tftp-root=$PWD  --pxe-service=x86-64_EFI,grub1,grub.efi --pxe-service=x86-64_EFI,grub2,grub.efi

qemu-system-x86_64 -bios OVMF.fd -nographic -net bridge -net nic

After fixing above line everything works fine. (Only the &quot;..&quot; printed before the selection does not look nice.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1190</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Schnupp">michael.schnupp</who>
    <bug_when>2016-12-20 20:24:22 +0000</bug_when>
    <thetext>After the change selecting works, but tftp access seems not to work. - But that is probably a different issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1194</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Schnupp">michael.schnupp</who>
    <bug_when>2016-12-21 06:02:38 +0000</bug_when>
    <thetext>I had another look at the tftp issue and found this:
https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Universal/Network/UefiPxeBcDxe/PxeBcImpl.c#L2659

What is the reason for aborting here?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1204</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-12-22 19:20:05 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1214</commentid>
    <comment_count>4</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2016-12-26 21:28:38 +0000</bug_when>
    <thetext>Yes, the first issue as you pointed should be corrected from &quot;!=&quot; to &quot;==&quot; for user to select the boot item in the boot menu.

As the second issue you mentioned, i do not know how can you go to there.On my test case, we have not meet the same issue until now . Can you give more information about the Boot Server type 0 (PXE bootstrap server).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1229</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Schnupp">michael.schnupp</who>
    <bug_when>2017-01-01 16:24:41 +0000</bug_when>
    <thetext>I set up a quick test project: https://github.com/michas2/edk2-test
You can run it using: docker run -it --rm --privileged michas2/edk2-test

The patch fixes the input bug and also adds an output at the mentioned place when aborting. After selecting an entry it should run grub, but it will show the message and abort.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1230</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Schnupp">michael.schnupp</who>
    <bug_when>2017-01-02 15:10:19 +0000</bug_when>
    <thetext>PS: I also set up a branch for a debian based version of that same test szenario: https://github.com/michas2/edk2-test/tree/debian
You can again run it with: docker run -it --rm --privileged michas2/edk2-test:debian

This time I don&apos;t even get the selection menu. I tracked it down to https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Universal/Network/UefiPxeBcDxe/PxeBcDriver.c#L367 , but I really don&apos;t understand what exactly is going on there.

But that is probably again a different issue...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1440</commentid>
    <comment_count>7</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2017-02-14 23:02:55 +0000</bug_when>
    <thetext>I have build the docker image michas2/edk2-test:debian and found the issue you mentioned that can not get the selection menu, i checked the UEFI spec, it is a posibility that the status returned by InstallMultipleProtocolInterfaces indicates Protocol is already installed on the handle specified by Handle.

As test project test on archlinux, until now i can not build the docker image correctly since i come across many build problems. Can you give me the debug flow information in the line2649 PxeBcSelectBootPrompt and PxeBcSelectBootMenu PxeBcSelectBootMenu in PxeBcImpl.c.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1449</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Schnupp">michael.schnupp</who>
    <bug_when>2017-02-15 03:31:24 +0000</bug_when>
    <thetext>I tried to rebuild the docker image and it build fine:
  git clone https://github.com/michas2/edk2-test.git
  cd edk2-test/
  docker build --pull --no-cache .

Here is the log of the automated build:
  https://hub.docker.com/r/michas2/edk2-test/builds/bkhwqrvrj5mm6uymu6an4vm/

But there is actually no need to rebuild the docker image.
You should be able to verify the issue using:
  docker run -it --rm --privileged michas2/edk2-test
For debugging you can get a shell in that very environment using:
  docker run -it --rm --privileged michas2/edk2-test bash

How do I get the &quot;debug flow information&quot; you mentioned?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1533</commentid>
    <comment_count>9</comment_count>
    <who name="Zhang, Lubo">lubo.zhang</who>
    <bug_when>2017-02-24 03:15:43 +0000</bug_when>
    <thetext>Sorry to reply you late and Thanks for your clarification, i have pull michas2/edk2-test image correctly from repository.

I opened the shell with command docker run -it --rm --privileged michas2/edk2-test bash, then add some debug information in the file PxeBcImpl.c and PxeBcDhcp.c

then i rebuild and run the OVMF.fd using the following command:

. edksetup.sh
build
. test.sh

However it seems not work to show any debug information i want(how the type value is 0).Do i miss some steps?

But as far as I&apos;m concerned, we not support the boot server type 0(local boot) in our implementation currently.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1534</commentid>
    <comment_count>10</comment_count>
    <who name="Michael Schnupp">michael.schnupp</who>
    <bug_when>2017-02-24 04:12:55 +0000</bug_when>
    <thetext>Thanks for your help.

All steps to setup and build the image are specified in the Dockerfile:
  https://github.com/michas2/edk2-test/blob/master/Dockerfile

For building, the tricky part is setting the needed environment variables:
  export WORKSPACE=$PWD;export PACKAGES_PATH=$WORKSPACE/edk2;. edk2/edksetup.sh; build

Afterwards ./test.sh should be fine to run it. (No need to source it.)


If you later want to automate this you can also write your own Dockerfile based on my image. Something like:

  FROM michas2/edk2-test
  ADD another.diff another.diff
  RUN cd edk2; git apply ../another.diff
  RUN export WORKSPACE=$PWD;export PACKAGES_PATH=$WORKSPACE/edk2;. edk2/edksetup.sh; build

This way you only need to put the diff next to the new Dockerfile and run `docker build .`


PS: I&apos;m currently looking for a new job. - If you could need a new colleague at Munich, feel free to mail me. :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2122</commentid>
    <comment_count>11</comment_count>
      <attachid>65</attachid>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-05-22 21:00:28 +0000</bug_when>
    <thetext>Created attachment 65
Fix the PXE BootMenu selection issue

Resolve the PXE BootMenu selection issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2123</commentid>
    <comment_count>12</comment_count>
      <attachid>66</attachid>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-05-22 21:01:10 +0000</bug_when>
    <thetext>Created attachment 66
Refine the PXE boot displayed information

Refine the PXE boot displayed information</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2124</commentid>
    <comment_count>13</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-05-22 21:01:43 +0000</bug_when>
    <thetext>According PXE Spec2.1 page 20, Type 0 means the local boot. It&apos;s not an image stored on the network. So, we abort the continue steps as below:

    if (Type == EFI_PXE_BASE_CODE_BOOT_TYPE_BOOTSTRAP) {
      //
      // Local boot(PXE bootstrap server) need abort
      //
      return EFI_ABORTED;
    }

BTW, type is two bytes for the server type, which is configurable value in DHCP server part with option 43 -&gt; sub-option 9.

For the PXE BootMenu selection issue, I attach the corresponding patches to fix the issue, the series patch also refined the PXE boot displayed information in line with NetworkPkg/UefiPxeBcDxe driver.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2245</commentid>
    <comment_count>14</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-06-05 04:40:38 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/ef931b311fd772c8ab9f453cb0f9d0cd0b1deacf

https://github.com/tianocore/edk2/commit/5225084439bd47f2cdd210a98d6a445a2eccc9e2</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>65</attachid>
            <date>2017-05-22 21:00:28 +0000</date>
            <delta_ts>2017-05-22 21:00:28 +0000</delta_ts>
            <desc>Fix the PXE BootMenu selection issue</desc>
            <filename>0001-MdeModulePkg-UefiPxeBcDxe-Fix-the-PXE-BootMenu-selec.patch</filename>
            <type>text/plain</type>
            <size>2224</size>
            <attacher name="jiaxinwu">jiaxin.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>66</attachid>
            <date>2017-05-22 21:01:10 +0000</date>
            <delta_ts>2017-05-22 21:01:10 +0000</delta_ts>
            <desc>Refine the PXE boot displayed information</desc>
            <filename>0002-MdeModulePkg-UefiPxeBcDxe-Refine-the-PXE-boot-displa.patch</filename>
            <type>application/octet-stream</type>
            <size>6627</size>
            <attacher name="jiaxinwu">jiaxin.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>214</bug_id>
          
          <creation_ts>2016-11-09 02:19:44 +0000</creation_ts>
          <short_desc>Nested SendForm() usage in authentication of certificate</short_desc>
          <delta_ts>2017-07-19 03:21:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>madhans</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>851</commentid>
    <comment_count>0</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2016-11-09 02:19:44 +0000</bug_when>
    <thetext>In edk2 staging, it was found that nested SendForm() has been used during certificate load for HTTPS boot. As per UEFI Spec, under section 2.4, it is mentioned as “Unless otherwise specified a protocol’s member function is not reentrant or MP safe.” But in the case of certificate loading, already the dynamic form is shown using SendForm() and it invokes another SendForm() which is recursive. This doesn&apos;t follow the UEFI Spec.

Please confirm and clarify this if I&apos;m wrong. And please provide a fix if I&apos;m right.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>877</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-11-10 19:17:46 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>899</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2016-11-13 22:18:35 +0000</bug_when>
    <thetext>Thanks for report.

TlsAuthConfigDxe driver call the SendForm() recursively indeed since the setup UI is calling SendForm() and stay in its’ thread, then TlsAuthConfigDxe driver’s HII AccessCallback invokes the SendForm() again which is the recursive behaviour: 

	setup UI -&gt; SendForm() -&gt; TlsAuthConfigAccessCallback -&gt; ChooseFile (certificatie file) -&gt; SendForm()!!!

Since the Spec details in 2.4 “Unless otherwise specified a protocol’s member function is not reentrant or MP safe”, I suggest to draft one ECR to make this extra specification in UEFI Spec 33.6 Form Browser Protocol section.

Loop in the experts in this field.

Eric,

what do you think?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>902</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2016-11-13 22:31:47 +0000</bug_when>
    <thetext>EFI_FORM_BROWSER2_PROTOCOL.SendForm() function already has code to handle the reentrant case. so I think this function can support it. If necessary, we can submit a ECR for this clarification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>915</commentid>
    <comment_count>4</comment_count>
    <who name="Madhan Santharam">madhans</who>
    <bug_when>2016-11-14 11:59:20 +0000</bug_when>
    <thetext>(In reply to ydong10 from comment #3)
&gt; EFI_FORM_BROWSER2_PROTOCOL.SendForm() function already has code to handle
&gt; the reentrant case. so I think this function can support it. If necessary,
&gt; we can submit a ECR for this clarification.

We can&apos;t assume this based on one implementation. There are multiple implementation and that may not support this reentrant case. If we make the statement that sendform will be reentrant, it will affect eco system in greater effect.
Instead, from network stack why can&apos;t we simply use Ref3 or Ref4 to go to special formset that handles this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>921</commentid>
    <comment_count>5</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2016-11-14 20:02:22 +0000</bug_when>
    <thetext>The Second SendForm is provided in the library code (FileExplorerLib) which used to select one file from the specified folder. When we create this library, we don&apos;t aware this limitation. We need to confirm with UEFI spec owner whether this reentrant is allowed for SendForm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>923</commentid>
    <comment_count>6</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2016-11-14 20:11:51 +0000</bug_when>
    <thetext>More info:

TlsAuthConfigDxe driver is not the only one case to call this function (ChooseFile), e.g. Boot Maintenance Manager (Boot From File), Secure Boot Configuration driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>948</commentid>
    <comment_count>7</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2016-11-15 19:20:24 +0000</bug_when>
    <thetext>Transfer to the HII expert.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>952</commentid>
    <comment_count>8</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2016-11-15 23:54:48 +0000</bug_when>
    <thetext>Get clarification from our UEFI spec owner like below:

Actually clarification:

Let’s define terms…..

Recursive:  BDS -&gt; Sendform -&gt; Callback -&gt;SendForm-&gt; Callback -&gt; SendForm

Reentrant: BDS -&gt;SendForm -&gt; &lt;TimerInterrupt&gt; -&gt;SendForm

We should support Recursion, but not reentrancy.

What I think you described is recursion.

So based on the bugzilla report about nested use of SendForm, that to me is recursion, not reentrancy and therefore perfectly legal. Reentrancy has to do with interrupts and multiple CPUs vying for context in the API and having multiple runs asynchronously through the code.

Thanks,
Mike Rothman</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2456</commentid>
    <comment_count>9</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2017-07-19 03:21:33 +0000</bug_when>
    <thetext>Base on the clarify from spec owner, this is not a bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>113</bug_id>
          
          <creation_ts>2016-09-08 00:59:04 +0000</creation_ts>
          <short_desc>PatchCheck.py and wiki commit message line lengths are inconsistent</short_desc>
          <delta_ts>2016-11-14 02:30:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jordan Justen">jordan.l.justen</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>ye.y.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>469</commentid>
    <comment_count>0</comment_count>
    <who name="Jordan Justen">jordan.l.justen</who>
    <bug_when>2016-09-08 00:59:04 +0000</bug_when>
    <thetext>PatchCheck.py and https://github.com/tianocore/tianocore.github.io/wiki/Commit-Message-Format
have different requirements. They should use the same values.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>473</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2016-09-08 11:41:39 +0000</bug_when>
    <thetext>One more thing:
I found this tool only remove first [] when it does the char count calculation.
But sometimes, the full line has [edk2] [patch] as prefix, I think the tool should remove both [].</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>591</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2016-10-12 21:12:51 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>657</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2016-10-20 19:32:05 +0000</bug_when>
    <thetext>push the fix SHA-1: e61406708c83f96d3dc2e8899716cce43c058491 and SHA-1: e709bbb1ce386c7ac4240fae929cacfcc2bfa5a9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>429</bug_id>
          
          <creation_ts>2017-03-18 01:30:05 +0000</creation_ts>
          <short_desc>Support for Link-layer address (DUID-LL)</short_desc>
          <delta_ts>2017-04-07 03:35:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen Santhapur">naveens</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1640</commentid>
    <comment_count>0</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-03-18 01:30:05 +0000</bug_when>
    <thetext>So far, in EDK2, support is present only for two types among four of DUID mentioned  types. Details https://en.wikipedia.org/wiki/DHCPv6#Identifiers

Does EDK2 bring the support of Link-layer address (DUID-LL) in the near future?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1665</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-03-23 04:25:17 +0000</bug_when>
    <thetext>Hi Naveen,

Currently, we only support the format of DUID-UUID and DUID-LLT, we have no plan support more, that&apos;s the implementation choice and not a mandatory feature.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1666</commentid>
    <comment_count>2</comment_count>
    <who name="Naveen Santhapur">naveens</who>
    <bug_when>2017-03-23 05:54:15 +0000</bug_when>
    <thetext>Hi Jiaxin,

Thanks for the confirmation.

Thanks,
Naveen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1705</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-03-29 23:07:48 +0000</bug_when>
    <thetext>
Bug scrub: since this is a feature request, assign to module owner to investigate and discuss firstly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1777</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2017-04-07 03:35:57 +0000</bug_when>
    <thetext>No commit since we will not support other DUID types.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>963</bug_id>
          
          <creation_ts>2018-05-30 21:49:41 +0000</creation_ts>
          <short_desc>BaseTools: BinToPcd: When -t HII and no variableguid, no variablename, error message is not fully.</short_desc>
          <delta_ts>2018-08-09 15:29:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sun Yanyan">yanyan.sun</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4032</commentid>
    <comment_count>0</comment_count>
    <who name="Sun Yanyan">yanyan.sun</who>
    <bug_when>2018-05-30 21:49:41 +0000</bug_when>
    <thetext>When input: BinToPcd.py --pcd GUID.Test --input CustomSigningPublicKey.bin -t HII, it will raise an error: 
BinToPcd: error: argument --variable-guid is required for --type HII. 
I think this message is not fully as HII need variable guid and variable name at the same time such as BinToPcd: error: argument --variable-guid and --variable-name is required for --type HII is better.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4077</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-06-06 21:10:09 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4102</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-06-09 02:16:54 +0000</bug_when>
    <thetext>Patch for review

https://lists.01.org/pipermail/edk2-devel/2018-June/025747.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4554</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 15:29:18 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/b2e043b6895d70c57ef390d160e05c9d6f44298d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>654</bug_id>
          
          <creation_ts>2017-07-28 05:07:20 +0000</creation_ts>
          <short_desc>Read BufferOverflow in EfiShellGetFilePathFromDevicePath()</short_desc>
          <delta_ts>2017-08-03 23:25:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2521</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2017-07-28 05:07:20 +0000</bug_when>
    <thetext>In ShellPkg/Application/Shell/ShellProtocol.c EfiShellGetFilePathFromDevicePath() line480, the PathSize is the PathForReturn[] array size in *byte* and every item of PathForReturn[] is CHAR16, which is two bytes, so it is wrong to directly use PathSize as index to refer the PathForReturn[] item. Should use PathSize/sizeof(CHAR16) instead.

line478        if ((PathSize != 0)                        &amp;&amp;
line479            (PathForReturn != NULL)                &amp;&amp;
line480            (PathForReturn[PathSize - 1] != L&apos;\\&apos;) &amp;&amp;  // Buffer Overflow here, because the PathSize is the size in *byte*
line491            (AlignedNode-&gt;PathName[0]    != L&apos;\\&apos;)) {
line482          PathForReturn = StrnCatGrow (&amp;PathForReturn, &amp;PathSize, L&quot;\\&quot;, 1);
line483        }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2556</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2017-08-03 20:13:33 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2558</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2017-08-03 23:25:48 +0000</bug_when>
    <thetext>pushed @ 4f0465058b6ff9c53591ec81951f494a70bde7c1.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>