<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.tianocore.org/page.cgi?id=bugzilla.dtd">

<bugzilla version="5.0.4"
          urlbase="https://bugzilla.tianocore.org/"
          
          maintainer="john.mathews@intel.com"
>

    <bug>
          <bug_id>3641</bug_id>
          
          <creation_ts>2021-09-21 01:22:45 +0000</creation_ts>
          <short_desc>ACS test failure for UEFI SCT</short_desc>
          <delta_ts>2021-10-07 23:50:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Highest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Antony">antonyabee.prakashxv</reporter>
          <assigned_to name="Sunny Wang">Sunny.Wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>Sunny.Wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17315</commentid>
    <comment_count>0</comment_count>
    <who name="Antony">antonyabee.prakashxv</who>
    <bug_when>2021-09-21 01:22:45 +0000</bug_when>
    <thetext>Hi,

We are facing below UEFI SCT issues while running Arm Compliance Suite (ACS) system ready test with edk2. We are using Arm ACS Version: v3.0

1. GetNextMonotonicCount_Func:

BS.GetNextMonotonicCount - high 32 bit increase by 1 -- FAILURE
F48D1C2D-1EBA-4E4C-A16D-748A01ABE6C1
/home/edhcha01/ACSv3.0REL/arm-enterprise-acs/luv/build/tmp/work/aarch64-oe-linux/sbbr/v1.2+gitAUTOINC+ed8a7477d4-r0/SctPkg/TestCase/UEFI/EFI/BootServices/MiscBootServices/BlackBoxTest/MiscBootServicesBBTestFunction.c:1726:Count - C50000000D, Count2 - C50000000B, TPL - 4

2. SetVariable_Func:

RT.SetVariable - Non-volatile variable after system reset -- FAILURE
6AFDEA5E-1030-48AB-91DD-7CD3537CAD3B
/home/edhcha01/ACSv3.0REL/arm-enterprise-acs/luv/build/tmp/work/aarch64-oe-linux/sbbr/v1.2+gitAUTOINC+ed8a7477d4-r0/SctPkg/TestCase/UEFI/EFI/RuntimeServices/VariableServices/BlackBoxTest/VariableServicesBBTestFunction.c:2306:Status - Not Found, Expected - 82F00000000

Attributes=0x82F, Expected=0x3
DataSize=256, Expected=10
Data[0]=0x50, Expected=0x8000000000000000

3. SetTime_Func:

RT.SetTime - Change daylight -- FAILURE
7AF90CE7-1FED-4101-82DC-CC634CDF204E
/home/edhcha01/ACSv3.0REL/arm-enterprise-acs/luv/build/tmp/work/aarch64-oe-linux/sbbr/v1.2+gitAUTOINC+ed8a7477d4-r0/SctPkg/TestCase/UEFI/EFI/RuntimeServices/TimeServices/BlackBoxTest/TimeServicesBBTestFunction.c:536:Status - Device Error, TPL - 4

RT.SetTime - Verify daylight after change -- FAILURE
B39BC904-55E7-4B9B-B4D8-274ADD71D625
/home/edhcha01/ACSv3.0REL/arm-enterprise-acs/luv/build/tmp/work/aarch64-oe-linux/sbbr/v1.2+gitAUTOINC+ed8a7477d4-r0/SctPkg/TestCase/UEFI/EFI/RuntimeServices/TimeServices/BlackBoxTest/TimeServicesBBTestFunction.c:606:Status - Success, TPL - 4

RT.SetTime - Change time zone -- FAILURE
CDBBDA04-4F7C-4BA5-8BCF-C050E5A976C7
/home/edhcha01/ACSv3.0REL/arm-enterprise-acs/luv/build/tmp/work/aarch64-oe-linux/sbbr/v1.2+gitAUTOINC+ed8a7477d4-r0/SctPkg/TestCase/UEFI/EFI/RuntimeServices/TimeServices/BlackBoxTest/TimeServicesBBTestFunction.c:642:Status - Device Error, TPL - 4

RT.SetTime - Verify time zone after change -- FAILURE
EA99DEC5-B879-4C8D-BFD1-F63FE75899BF
/home/edhcha01/ACSv3.0REL/arm-enterprise-acs/luv/build/tmp/work/aarch64-oe-linux/sbbr/v1.2+gitAUTOINC+ed8a7477d4-r0/SctPkg/TestCase/UEFI/EFI/RuntimeServices/TimeServices/BlackBoxTest/TimeServicesBBTestFunction.c:714:Status - Success, TPL - 4

Could you please provide inputs on this ?

Thanks,
Antony</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17334</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-21 21:44:07 +0000</bug_when>
    <thetext>you need to check bios source code and find the source code to implement these APIs, then check what&apos;s wrong here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17461</commentid>
    <comment_count>2</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-10-07 12:36:52 +0000</bug_when>
    <thetext>Yeah, I had an offline discussion with Antony and confirmed this is a firmware issue rather than an SCT issue. 

@Antony Can we close this ticket?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17468</commentid>
    <comment_count>3</comment_count>
    <who name="Antony">antonyabee.prakashxv</who>
    <bug_when>2021-10-07 23:50:58 +0000</bug_when>
    <thetext>Sorry, this is a firmware issue. We can close this ticket.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3644</bug_id>
          
          <creation_ts>2021-09-21 09:41:55 +0000</creation_ts>
          <short_desc>ACS test failure for LUVOS – FWTS</short_desc>
          <delta_ts>2021-10-07 09:08:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Highest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Antony">antonyabee.prakashxv</reporter>
          <assigned_to name="Edhay">edhaya.chandran</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17319</commentid>
    <comment_count>0</comment_count>
      <attachid>832</attachid>
    <who name="Antony">antonyabee.prakashxv</who>
    <bug_when>2021-09-21 09:41:55 +0000</bug_when>
    <thetext>Created attachment 832
Detailed error logs of LUVOS-FWTS test.

Hi,

We are facing below LUVOS - FWTS issues while running Arm Compliance Suite (ACS) system ready test with edk2. We are using Arm ACS Version: v3.0

Platform: Ampere

fwts, Version V20.07.00, 2020-07-29 07:32:51
Version: Linux version 4.18.0-luv (oe-user@oe-host) (gcc version 7.3.0 (GCC)) #1 SMP PREEMPT Fri Oct 9 07:01:56 UTC 2020

1. GetNextHighMonotonicCount: uefirtmisc: Failed to get high monotonic count with UEFI runtime service.

Test 1 of 4: Test for UEFI miscellaneous runtime service interfaces.
Test 2 of 4: Stress test for UEFI miscellaneous runtime service interfaces.

2. SetVariable: uefirtvariable: Failed to set variable with UEFI runtime service.

Test 1 of 9: Test UEFI RT service get variable interface.
Test 2 of 9: Test UEFI RT service get next variable name interface.
Test 3 of 9: Test UEFI RT service set variable interface.
Test 5 of 9: Test UEFI RT service variable interface stress test.
Test 6 of 9: Test UEFI RT service set variable interface stress test.

3. SetTime: uefirttime: Failed to set time with UEFI runtime service.

Test 4 of 36: Test UEFI RT service set time interface.

Attached the detailed error logs for reference.

Please provide your inputs.

Thanks,
Antony</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17386</commentid>
    <comment_count>1</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-27 10:18:00 +0000</bug_when>
    <thetext>Hi Anthony,

   This is a forum for edk2-test (UEFI-SCT) and not FWTS.

These are not issues but are the verdict of FWTS verification on the firmware of your system under tests.
The below supports :  GetNextHighMonotonicCount, SetVariable, SetTime are either not present or enabled in your firware.
Please check if these support are present in your firmware code.

Regards,
Edhay</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17450</commentid>
    <comment_count>2</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-10-07 09:08:47 +0000</bug_when>
    <thetext>Not a valid issue for this forum.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>832</attachid>
            <date>2021-09-21 09:41:55 +0000</date>
            <delta_ts>2021-09-21 09:41:55 +0000</delta_ts>
            <desc>Detailed error logs of LUVOS-FWTS test.</desc>
            <filename>LUVOS-FWTS_errors.txt</filename>
            <type>text/plain</type>
            <size>4313</size>
            <attacher name="Antony">antonyabee.prakashxv</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3154</bug_id>
          
          <creation_ts>2021-01-05 22:41:49 +0000</creation_ts>
          <short_desc>Fix Variable Lock compatibility issue for SetVariable from SMM</short_desc>
          <delta_ts>2021-01-08 12:46:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Highest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14733</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-01-05 22:41:49 +0000</bug_when>
    <thetext>The Variable Lock Protocol requires that write requests from SMM 
environment using the EFI_SMM_VARAIBLE_PROTOCOL are allowed:

/**
  Mark a variable that will become read-only after leaving the DXE phase of execution.
  Write request coming from SMM environment through EFI_SMM_VARIABLE_PROTOCOL is allowed.

  @param[in] This          The EDKII_VARIABLE_LOCK_PROTOCOL instance.
. . .
/**

With the introduction of the Variable Policy Protocol, compatibility
with the Variable Lock Protocol is provided by a shim that layers on
top of the Variable Policy Protocol.  With the addition of the Variable
Policy Protocol features, the VarCheckLib did not preserve the 
required SMM behavior.  The VarCheckLib should detect if the request is
a trusted request and ignore variable policy handlers that return a 
write protected status.

This bug represents an incompatible change in the behavior of the 
Variable Lock Protocol that prevents variables that are locked
from being updated in SMM.  This is considered a critical bug 
that must be fixed on both edk2/master and edk2/stable/202011
branches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14734</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-01-05 22:42:10 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14735</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-01-05 22:51:40 +0000</bug_when>
    <thetext>Patch for review

https://edk2.groups.io/g/devel/message/69780</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14759</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-01-08 12:17:59 +0000</bug_when>
    <thetext>edk2/master commit:

https://github.com/tianocore/edk2/commit/248d08c5983b561549891fec54c213e1f354179c

edk2/master PR: https://github.com/tianocore/edk2/pull/1309</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14760</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-01-08 12:18:47 +0000</bug_when>
    <thetext>stable/202011 patch for review

https://edk2.groups.io/g/devel/message/69945</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14761</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-01-08 12:46:03 +0000</bug_when>
    <thetext>stable/202011 commit:

https://github.com/tianocore/edk2/commit/75ab038d725235861938b7a4bb2e6f4beaca7629

stable/202011 PR: https://github.com/tianocore/edk2/pull/1325</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3691</bug_id>
          
          <creation_ts>2021-10-14 14:24:35 +0000</creation_ts>
          <short_desc>Enable wildcard host name matching in EDK2 HTTPS/TLS implementation</short_desc>
          <delta_ts>2021-11-04 05:02:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vineel Kovvuri">vineelko</reporter>
          <assigned_to name="Vineel Kovvuri">vineelko</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>jpere</cc>
    
    <cc>Michael.Turner</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17552</commentid>
    <comment_count>0</comment_count>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2021-10-14 14:24:35 +0000</bug_when>
    <thetext>The current UEFI implementation of HTTPS during its TLS configuration uses EFI_TLS_VERIFY_FLAG_NO_WILDCARDS for host name verification. As per the spec this flag does is &quot;to disable the match of any wildcards in the host name&quot;. So, certificates which are issued with wildcards(*.dm.corp.net etc) in it will fail the TLS host name matching. On the other hand, EFI_TLS_VERIFY_FLAG_NONE(misnomer) means &quot;no additional flags set for hostname
validation. Wildcards are supported and they match only in the left-most label.&quot;
this behavior/definition is coming from openssl&apos;s X509_check_host() api
https://www.openssl.org/docs/man1.1.0/man3/X509_check_host.html

Without EFI_TLS_VERIFY_FLAG_NONE any UEFI application using certificates issued
with wildcards in them would fail to match while trying to communicate with
HTTPS endpoint.

This change has been in Project Mu as part of below commit for a while.
Allow wildcards in hostname:
https://github.com/microsoft/mu_basecore/commit/d0c7733400c35722499eedcd4279042a9bcb0eb4

The request here is to cherry pick this change to edk2. Will send the patch to the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17555</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-14 21:44:09 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17560</commentid>
    <comment_count>2</comment_count>
      <attachid>844</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2021-10-15 03:03:28 +0000</bug_when>
    <thetext>Created attachment 844
Patch to enable wildcard host name matching in EDK2 HTTPS TLS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17636</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-01 21:17:34 +0000</bug_when>
    <thetext>The patch has been sent for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17686</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-04 05:02:46 +0000</bug_when>
    <thetext>Fix @6f9e83f757ed7c5c78d071f475b2e72d899c2aef</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>844</attachid>
            <date>2021-10-15 03:03:28 +0000</date>
            <delta_ts>2021-10-15 03:03:28 +0000</delta_ts>
            <desc>Patch to enable wildcard host name matching in EDK2 HTTPS TLS</desc>
            <filename>0001-Enable-wildcard-host-name-matching-in-EDK2-HTTPS-TLS.patch</filename>
            <type>text/plain</type>
            <size>2109</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3621</bug_id>
          
          <creation_ts>2021-09-12 11:36:34 +0000</creation_ts>
          <short_desc>Refactor initialization of CPU features during S3 resume</short_desc>
          <delta_ts>2021-09-17 03:46:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3631</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason">yun.lou</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17245</commentid>
    <comment_count>0</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-12 11:36:34 +0000</bug_when>
    <thetext>Current design: During normal boot, CpuFeaturesPei module (inside FSP) initializes the CPU features. During S3 boot, CpuFeaturesPei module does nothing, and CpuSmm driver (in SMRAM) initializes the CPU features instead.

CpuSmm driver saves the CPU register tables (tell which register should be set to which value for each thread) in SMRAM so that it can initialize the CPU features during S3 boot.

EDK2 contains DxeIpl PEIM that calls S3RestoreConfig2 PPI during S3 boot, and S3RestoreConfig2 PPI eventually calls the CpuSmm driver (in SMRAM) to initialize the CPU features, so &quot;EDK2 + FSP(in API mode)&quot; does not have the CPU feature initialization issue during S3 boot, but &quot;coreboot&quot; does not contain DxeIpl PEIM and the issue appears.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17246</commentid>
    <comment_count>1</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-12 11:38:14 +0000</bug_when>
    <thetext>Assign to Jason Lou.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17294</commentid>
    <comment_count>2</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-17 03:30:30 +0000</bug_when>
    <thetext>Have sent out the code patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17295</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-17 03:35:50 +0000</bug_when>
    <thetext>Have merged the code patch into master, close this bug.

[Patch1]
SHA-1: 010753b7e7cfb5ba2d1acd2200343cc4f55d7962

* UefiCpuPkg: Refactor initialization of CPU features during S3 resume

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3621
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3631

Refactor initialization of CPU features during S3 resume.
...

[Patch2]
SHA-1: 89f7ed8b29f6a88a8fb78d6fb2c92b4f7edf42d2

* UefiCpuPkg: Prevent from re-initializing CPU features during S3 resume

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3621
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3631

Current CPU feature initialization design:
During normal boot, CpuFeaturesPei module (inside FSP) initializes the
CPU features. During S3 boot, CpuFeaturesPei module does nothing, and
CpuSmm driver (in SMRAM) initializes CPU features instead.

This code change prevents CpuSmm driver from re-initializing CPU
features during S3 resume if CpuFeaturesPei module has done the same
initialization.
...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17296</commentid>
    <comment_count>4</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-17 03:43:47 +0000</bug_when>
    <thetext>It&apos;s a duplication of Bugzilla 3631</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17298</commentid>
    <comment_count>5</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-17 03:46:55 +0000</bug_when>
    <thetext>

*** This bug has been marked as a duplicate of bug 3631 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3679</bug_id>
          
          <creation_ts>2021-10-08 15:27:51 +0000</creation_ts>
          <short_desc>Configure/Enable elliptic curve ciphers in OpenSSL in EDK2</short_desc>
          <delta_ts>2023-10-18 01:48:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vineel Kovvuri">vineelko</reporter>
          <assigned_to name="Vineel Kovvuri">vineelko</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>jpere</cc>
    
    <cc>Michael.Turner</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>yi1.li</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17472</commentid>
    <comment_count>0</comment_count>
      <attachid>841</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2021-10-08 15:27:51 +0000</bug_when>
    <thetext>Created attachment 841
TLS Handshake Wireshark Trace Without ECC

With the existing OpenSSL configuration(&quot;no-ec&quot;) in EDK2, any UEFI application trying to do TLS handshake with HTTPS end points enforcing TLS Ecliptic Curve ciphers as a requirement will not go through and results in a connect reset as captured in attached Wireshark trace. This does also happen in Project Mu based platforms(Hyper-V) as well. Below changes were made to Project Mu’s CryptoPkg which enables EC ciphers and addresses TLS handshake reset issue. 

Reconfigure OpensslLib to add elliptic curve ciphers: https://github.com/microsoft/mu_tiano_plus/commit/1f3b135ddc821718a78c352316197889c5d3e0c2

Allow wildcards in hostname:
https://github.com/microsoft/mu_basecore/commit/d0c7733400c35722499eedcd4279042a9bcb0eb4

Can these be cherry-picked on to EDK2? or we can prepare a patch set for the same.

Thanks,
Vineel</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17473</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-10-08 22:33:22 +0000</bug_when>
    <thetext>We do not do cherry pick. Please submit patch according to the process -https://github.com/tianocore/edk2/blob/master/ReadMe.rst</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17527</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-10-12 22:53:02 +0000</bug_when>
    <thetext>It seems the Bugzilla only describes the ECC, but no much info on why we need allow wildcards in hostname.

The git log in mu is also unclear to me - &quot;This enables certain local network recovery stories. May re-evaluate as those stories change. &quot;

I am OK with ECC change, and give R-B.

But I would like to understand more on why we need allow wildcards in general. What are the stories?

If this is only for &quot;recovery stories&quot;, should we also allow wildcards in recovery boot path?

For example, should we have a PCD to platform owner make decision? E.g. normal boot - NO. recovery boot - YES ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17528</commentid>
    <comment_count>3</comment_count>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2021-10-13 04:52:22 +0000</bug_when>
    <thetext>Hi Jiewen,

Sorry for not being explicit about the need for wildcard support for host name
validation. The current UEFI implementation of EFI_TLS_VERIFY_FLAG_NO_WILDCARDS as per the spec is &quot;to disable the match of any wildcards in the host name&quot;. What this does is, certificates which are issued with wildcards(*.dm.corp.net etc) in it will fail the TLS host name matching. On the other hand, EFI_TLS_VERIFY_FLAG_NONE(misnomer) means &quot;no additional flags set for hostname
validation. Wildcards are supported and they match only in the left-most label.&quot;
this behavior/definition is coming from openssl&apos;s X509_check_host() api
https://www.openssl.org/docs/man1.1.0/man3/X509_check_host.html


Without EFI_TLS_VERIFY_FLAG_NONE any UEFI application using certificates issued
with wildcards in them would fail to match while trying to communicate with
HTTPS endpoint

Thanks,
Vineel</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17548</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-10-14 04:26:23 +0000</bug_when>
    <thetext>OK. Would you please file another bugzilla issue - to Allow wildcards in hostname?

I really cannot see any relationship between adding ECC and allowing wildcards.

Since these are two new features, I recommend to add both new features to release planning (https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning) as proposed feature to notify other people.


Once you file new bugzilla, please post a v2 patch for wildcards only with new bugzilla ID.

I will review that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17553</commentid>
    <comment_count>5</comment_count>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2021-10-14 14:47:18 +0000</bug_when>
    <thetext>Thanks Jiewen, For the feedback I have filed a new bugzilla request(below) and sent a new patch to the mailing list.
https://bugzilla.tianocore.org/show_bug.cgi?id=3691

Please bare with me, I am still learning the EDK2 processes. I will let the https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning know about these features at the earliest.

Thanks,
Vineel</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17561</commentid>
    <comment_count>6</comment_count>
      <attachid>845</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2021-10-15 03:05:01 +0000</bug_when>
    <thetext>Created attachment 845
Patch to reconfigure OpensslLib to add elliptic curve ciphers</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18458</commentid>
    <comment_count>7</comment_count>
      <attachid>931</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-02-24 01:42:59 +0000</bug_when>
    <thetext>Created attachment 931
Patch to reconfigure OpensslLib to add elliptic curve ciphers</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18459</commentid>
    <comment_count>8</comment_count>
      <attachid>932</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-02-24 01:43:38 +0000</bug_when>
    <thetext>Created attachment 932
0001-Crypto-Enable-ECC-ciphers.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18460</commentid>
    <comment_count>9</comment_count>
      <attachid>933</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-02-24 01:44:16 +0000</bug_when>
    <thetext>Created attachment 933
0002-Port-VsIntrinsicLib-from-Project-Mu.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18461</commentid>
    <comment_count>10</comment_count>
      <attachid>934</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-02-24 01:44:34 +0000</bug_when>
    <thetext>Created attachment 934
0003-Reference-VsIntrinsicLib.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18462</commentid>
    <comment_count>11</comment_count>
      <attachid>935</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-02-24 01:45:05 +0000</bug_when>
    <thetext>Created attachment 935
0004-Increase-FV-size.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18513</commentid>
    <comment_count>12</comment_count>
      <attachid>942</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-03-03 01:21:39 +0000</bug_when>
    <thetext>Created attachment 942
0001-CryptoPkg-Reconfigure-OpensslLib-to-add-elliptic-cur</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18514</commentid>
    <comment_count>13</comment_count>
      <attachid>943</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-03-03 01:22:58 +0000</bug_when>
    <thetext>Created attachment 943
0001-CryptoPkg-Reconfigure-OpensslLib-to-add-elliptic-cur</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18515</commentid>
    <comment_count>14</comment_count>
      <attachid>944</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-03-03 01:23:17 +0000</bug_when>
    <thetext>Created attachment 944
0002-CryptoPkg-Reference-to-VsIntrincsicLib-to-build-Open</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18516</commentid>
    <comment_count>15</comment_count>
      <attachid>945</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-03-03 01:23:33 +0000</bug_when>
    <thetext>Created attachment 945
0003-MdePkg-Add-VsIntrincsicLib-to-support-building-OpenS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18518</commentid>
    <comment_count>16</comment_count>
      <attachid>946</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-03-03 01:23:55 +0000</bug_when>
    <thetext>Created attachment 946
0004-EmulatorPkg-Reference-to-VsIntrincsicLib-to-build-Op</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18519</commentid>
    <comment_count>17</comment_count>
      <attachid>947</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-03-03 01:24:09 +0000</bug_when>
    <thetext>Created attachment 947
0005-OvmfPkg-Reference-to-VsIntrincsicLib-to-build-OpenSS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18520</commentid>
    <comment_count>18</comment_count>
      <attachid>948</attachid>
    <who name="Vineel Kovvuri">vineelko</who>
    <bug_when>2022-03-03 01:24:25 +0000</bug_when>
    <thetext>Created attachment 948
0006-OvmfPkg-Increase-DXEFV-size-to-accommodate-ECC-ciphe</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18813</commentid>
    <comment_count>19</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-04-13 02:31:50 +0000</bug_when>
    <thetext>Hi Jiewen,

I have Enabled a feature which allow SOURCE section in INF files to use Pcd to customize source files list. If Pcd equal to FALSE, this file will not be compiled.

https://github.com/tianocore/edk2/commit/bf9230a9f3dde065c3c8b4175ccd32e44e8f0362

Now, we can enable ECC feature in CryptoPkg without affecting other pkgs.

Code:https://github.com/tianocore/edk2/pull/2773
Patch:
https://edk2.groups.io/g/devel/message/88845?p=%2C%2C%2C20%2C0%2C0%2C0%3A%3Arecentpostdate%2Fsticky%2C%2Cyi1.li%2C20%2C2%2C0%2C90435463
https://edk2.groups.io/g/devel/message/88846?p=%2C%2C%2C20%2C0%2C0%2C0%3A%3Arecentpostdate%2Fsticky%2C%2Cyi1.li%2C20%2C2%2C0%2C90435466
https://edk2.groups.io/g/devel/message/88847?p=%2C%2C%2C20%2C0%2C0%2C0%3A%3Arecentpostdate%2Fsticky%2C%2Cyi1.li%2C20%2C2%2C0%2C90435467

This patch is also pre-work of https://bugzilla.tianocore.org/show_bug.cgi?id=3828.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21987</commentid>
    <comment_count>20</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2023-10-18 01:48:05 +0000</bug_when>
    <thetext>EC already enabled in OpensslLibFull.inf.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>841</attachid>
            <date>2021-10-08 15:27:51 +0000</date>
            <delta_ts>2022-02-24 01:42:59 +0000</delta_ts>
            <desc>TLS Handshake Wireshark Trace Without ECC</desc>
            <filename>TLSHandshakeWiresharkTraceWithoutECC.png</filename>
            <type>image/png</type>
            <size>78585</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>845</attachid>
            <date>2021-10-15 03:05:01 +0000</date>
            <delta_ts>2022-02-24 01:42:59 +0000</delta_ts>
            <desc>Patch to reconfigure OpensslLib to add elliptic curve ciphers</desc>
            <filename>0001-Reconfigure-OpensslLib-to-add-elliptic-curve-chipher.patch</filename>
            <type>text/plain</type>
            <size>9903</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>931</attachid>
            <date>2022-02-24 01:42:59 +0000</date>
            <delta_ts>2022-02-24 01:43:38 +0000</delta_ts>
            <desc>Patch to reconfigure OpensslLib to add elliptic curve ciphers</desc>
            <filename>0001-Crypto-Enable-ECC-ciphers.patch</filename>
            <type>text/plain</type>
            <size>19845</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>932</attachid>
            <date>2022-02-24 01:43:38 +0000</date>
            <delta_ts>2022-03-03 01:21:39 +0000</delta_ts>
            <desc>0001-Crypto-Enable-ECC-ciphers.patch</desc>
            <filename>0001-Crypto-Enable-ECC-ciphers.patch</filename>
            <type>text/plain</type>
            <size>19845</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>933</attachid>
            <date>2022-02-24 01:44:16 +0000</date>
            <delta_ts>2022-03-03 01:21:39 +0000</delta_ts>
            <desc>0002-Port-VsIntrinsicLib-from-Project-Mu.patch</desc>
            <filename>0002-Port-VsIntrinsicLib-from-Project-Mu.patch</filename>
            <type>text/plain</type>
            <size>7898</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>934</attachid>
            <date>2022-02-24 01:44:34 +0000</date>
            <delta_ts>2022-03-03 01:21:39 +0000</delta_ts>
            <desc>0003-Reference-VsIntrinsicLib.patch</desc>
            <filename>0003-Reference-VsIntrinsicLib.patch</filename>
            <type>text/plain</type>
            <size>3661</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>935</attachid>
            <date>2022-02-24 01:45:05 +0000</date>
            <delta_ts>2022-03-03 01:21:39 +0000</delta_ts>
            <desc>0004-Increase-FV-size.patch</desc>
            <filename>0004-Increase-FV-size.patch</filename>
            <type>text/plain</type>
            <size>2236</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>942</attachid>
            <date>2022-03-03 01:21:39 +0000</date>
            <delta_ts>2022-03-03 01:22:58 +0000</delta_ts>
            <desc>0001-CryptoPkg-Reconfigure-OpensslLib-to-add-elliptic-cur</desc>
            <filename>0001-CryptoPkg-Reconfigure-OpensslLib-to-add-elliptic-cur.patch</filename>
            <type>text/plain</type>
            <size>20089</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>943</attachid>
            <date>2022-03-03 01:22:58 +0000</date>
            <delta_ts>2022-03-03 01:22:58 +0000</delta_ts>
            <desc>0001-CryptoPkg-Reconfigure-OpensslLib-to-add-elliptic-cur</desc>
            <filename>0001-CryptoPkg-Reconfigure-OpensslLib-to-add-elliptic-cur.patch</filename>
            <type>text/plain</type>
            <size>9215</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>944</attachid>
            <date>2022-03-03 01:23:17 +0000</date>
            <delta_ts>2022-03-03 01:23:17 +0000</delta_ts>
            <desc>0002-CryptoPkg-Reference-to-VsIntrincsicLib-to-build-Open</desc>
            <filename>0002-CryptoPkg-Reference-to-VsIntrincsicLib-to-build-Open.patch</filename>
            <type>text/plain</type>
            <size>1332</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>945</attachid>
            <date>2022-03-03 01:23:33 +0000</date>
            <delta_ts>2022-03-03 01:23:33 +0000</delta_ts>
            <desc>0003-MdePkg-Add-VsIntrincsicLib-to-support-building-OpenS</desc>
            <filename>0003-MdePkg-Add-VsIntrincsicLib-to-support-building-OpenS.patch</filename>
            <type>text/plain</type>
            <size>9498</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>946</attachid>
            <date>2022-03-03 01:23:55 +0000</date>
            <delta_ts>2022-03-03 01:23:55 +0000</delta_ts>
            <desc>0004-EmulatorPkg-Reference-to-VsIntrincsicLib-to-build-Op</desc>
            <filename>0004-EmulatorPkg-Reference-to-VsIntrincsicLib-to-build-Op.patch</filename>
            <type>text/plain</type>
            <size>1339</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>947</attachid>
            <date>2022-03-03 01:24:09 +0000</date>
            <delta_ts>2022-03-03 01:24:09 +0000</delta_ts>
            <desc>0005-OvmfPkg-Reference-to-VsIntrincsicLib-to-build-OpenSS</desc>
            <filename>0005-OvmfPkg-Reference-to-VsIntrincsicLib-to-build-OpenSS.patch</filename>
            <type>text/plain</type>
            <size>2106</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>948</attachid>
            <date>2022-03-03 01:24:25 +0000</date>
            <delta_ts>2022-03-03 01:24:25 +0000</delta_ts>
            <desc>0006-OvmfPkg-Increase-DXEFV-size-to-accommodate-ECC-ciphe</desc>
            <filename>0006-OvmfPkg-Increase-DXEFV-size-to-accommodate-ECC-ciphe.patch</filename>
            <type>text/plain</type>
            <size>1595</size>
            <attacher name="Vineel Kovvuri">vineelko</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3631</bug_id>
          
          <creation_ts>2021-09-15 21:17:03 +0000</creation_ts>
          <short_desc>CpuFeaturesPei and PiSmmCpuSmmDxe initialize the CPU features twice in S3 boot</short_desc>
          <delta_ts>2021-09-22 04:43:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yun.lou</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17280</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-09-15 21:17:03 +0000</bug_when>
    <thetext>In S3 boot path, when PcdCpuFeaturesInitOnS3Resume is set to TRUE, CpuFeaturesPei initializes the CPU features but PiSmmCpuSmmDxe will re-initialize the CPU features.

It&apos;s a bug. PiSmmCpuSmmDxe should avoid re-initialize the CPU fetures.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17281</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-09-15 21:17:27 +0000</bug_when>
    <thetext>confirm it&apos;s a bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17299</commentid>
    <comment_count>2</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-17 03:46:55 +0000</bug_when>
    <thetext>*** Bug 3621 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17300</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-17 03:49:26 +0000</bug_when>
    <thetext>Have sent out the code patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17301</commentid>
    <comment_count>4</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-17 04:42:45 +0000</bug_when>
    <thetext>Have merged the code patch into master.

[Patch1]
SHA-1: 010753b7e7cfb5ba2d1acd2200343cc4f55d7962

* UefiCpuPkg: Refactor initialization of CPU features during S3 resume
...

[Patch2]
SHA-1: 89f7ed8b29f6a88a8fb78d6fb2c92b4f7edf42d2

* UefiCpuPkg: Prevent from re-initializing CPU features during S3 resume
...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17352</commentid>
    <comment_count>5</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-22 04:43:40 +0000</bug_when>
    <thetext>Close this bugzilla.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3181</bug_id>
          
          <creation_ts>2021-01-21 14:47:24 +0000</creation_ts>
          <short_desc>UEFI BIOS Accepts Weak Platform Key (PK)</short_desc>
          <delta_ts>2021-04-26 12:36:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tejaswini">tejaswini.ms</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>john.mathews</cc>
    
    <cc>min.m.xu</cc>
    
    <cc>tejaswini.ms</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14882</commentid>
    <comment_count>0</comment_count>
    <who name="Tejaswini">tejaswini.ms</who>
    <bug_when>2021-01-21 14:47:24 +0000</bug_when>
    <thetext>During security assessment, it was observed that validation checks for outdated algorithms are not in place. 

In order to enable secure boot, user or OEM needs to enroll the Platform Key i.e. PK from the BIOS. The platform currently accepts a RSA-512-bit key which can be successfully enrolled into the BIOS. RSA-512  length keys are considered a deprecated standard and broken. The current UEFI specification also states that no key length shorter than 2048 bits should be accepted in enrollment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14883</commentid>
    <comment_count>1</comment_count>
    <who name="Tejaswini">tejaswini.ms</who>
    <bug_when>2021-01-21 14:49:15 +0000</bug_when>
    <thetext>Links for the Boot key creation.

https://www.uefi.org/sites/default/files/resources/UEFI%20Spec%202_6_C%20Aug%2031%20with%20password.pdf

https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-secure-boot-key-creation-and-management-guidance</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15005</commentid>
    <comment_count>2</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-02-03 13:50:49 +0000</bug_when>
    <thetext>Per discussion in 2/3 Infosec mtg, there is general agreement to open this up &amp; treat as a functional issue.

If no community concerns are raised by March 3rd Infosec mtg, we will open this to public BZ and treat as normal bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15180</commentid>
    <comment_count>3</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-03-02 16:51:41 +0000</bug_when>
    <thetext>Making this BZ public per comment 2. Treat this as a normal functional bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15505</commentid>
    <comment_count>4</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-04-02 01:25:32 +0000</bug_when>
    <thetext>*** Bug 3293 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15774</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2021-04-26 12:36:08 +0000</bug_when>
    <thetext>Reviewed at
    https://edk2.groups.io/g/devel/message/74381
    https://edk2.groups.io/g/devel/message/74383

Pushed at 5396354b868bd6652600a654bba7df16701ac1cb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3770</bug_id>
          
          <creation_ts>2021-12-14 07:25:15 +0000</creation_ts>
          <short_desc>AcpiView: incorrect dereference when parsing PPTT</short_desc>
          <delta_ts>2022-02-06 21:55:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chris Jones">christopher.jones</reporter>
          <assigned_to name="Chris Jones">christopher.jones</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>rebecca</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17983</commentid>
    <comment_count>0</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-12-14 07:25:15 +0000</bug_when>
    <thetext>When parsing the PPTT table on Arm systems a crash can be observed. After investigation this crash is caused by an incorrect dereference of the FlagName variable in LogCacheFlagError().

This bug should be fixed as soon as possible.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17984</commentid>
    <comment_count>1</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-12-14 07:48:39 +0000</bug_when>
    <thetext>Created a patch for this bug: https://edk2.groups.io/g/devel/message/84801</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18093</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-04 21:57:44 +0000</bug_when>
    <thetext>Chris has worked on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18225</commentid>
    <comment_count>3</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2022-01-31 18:50:42 +0000</bug_when>
    <thetext>The patch still needs to be committed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18244</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-06 21:55:56 +0000</bug_when>
    <thetext>Merge 6fb09da89f88000a7592171a0ce08cf1feaa0646</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3289</bug_id>
          
          <creation_ts>2021-03-30 23:45:07 +0000</creation_ts>
          <short_desc>VfrCompile fails when attempting to compile DriverSampleDxe</short_desc>
          <delta_ts>2022-03-08 22:15:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ethin Probst">harlydavidsen</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15475</commentid>
    <comment_count>0</comment_count>
    <who name="Ethin Probst">harlydavidsen</who>
    <bug_when>2021-03-30 23:45:07 +0000</bug_when>
    <thetext>VfrCompile fails to compile MdeModulePkg\Universal\DriverSampleDxe\DriverSampleDxe. The command that it runs is:
&quot;VfrCompile&quot; -l -n --string-db d:\edk2\edk2\Build\MdeModule\DEBUG_VS2019\X64\MdeModulePkg\Universal\DriverSampleDxe\DriverSampleDxe\OUTPUT\DriverSampleStrDefs.hpk --output-directory d:\edk2\edk2\Build\MdeModule\DEBUG_VS2019\X64\MdeModulePkg\Universal\DriverSampleDxe\DriverSampleDxe\DEBUG\. d:\edk2\edk2\Build\MdeModule\DEBUG_VS2019\X64\MdeModulePkg\Universal\DriverSampleDxe\DriverSampleDxe\OUTPUT\Vfr.i
And the output is:
VfrCompile...
Vfr.vfr(189): WARNING: default
        : default value re-defined with different value

VfrCompile...
Vfr.vfr(302): ERROR 12288: REST_STYLE
        : unexpected token

VfrCompile...
Vfr.vfr(319): ERROR 12288: REST_STYLE
        : unexpected token

VfrCompile: ERROR 0003: Error parsing
  compile error in file d:\edk2\edk2\Build\MdeModule\DEBUG_VS2019\X64\MdeModulePkg\Universal\DriverSampleDxe\DriverSampleDxe\OUTPUT\Vfr.i</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15490</commentid>
    <comment_count>1</comment_count>
    <who name="Ethin Probst">harlydavidsen</who>
    <bug_when>2021-03-31 15:36:44 +0000</bug_when>
    <thetext>I&apos;m testing this on Arch Linux to see if the build fails there, but its definitely failing on my Windows system.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15491</commentid>
    <comment_count>2</comment_count>
    <who name="Ethin Probst">harlydavidsen</who>
    <bug_when>2021-03-31 15:53:36 +0000</bug_when>
    <thetext>(In reply to Ethin Probst from comment #1)
&gt; I&apos;m testing this on Arch Linux to see if the build fails there, but its
&gt; definitely failing on my Windows system.
Okay, so this doesn&apos;t happen on Linux, following the common instructions at https://github.com/tianocore/tianocore.github.io/wiki/Common-instructions

However, I followed the instructions over at https://github.com/tianocore/tianocore.github.io/wiki/Windows-systems, changing the toolchain to VS2019 (VS2015x86 didn&apos;t work because I don&apos;t have VS 2015 installed) and this is happening to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15665</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-13 22:17:41 +0000</bug_when>
    <thetext>Open CI uses VS2019 tool chain. It can pass build on MdeModulePkg. Where is VfrCompiler from? Is it the pre-built binary tool?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15666</commentid>
    <comment_count>4</comment_count>
    <who name="Ethin Probst">harlydavidsen</who>
    <bug_when>2021-04-13 22:25:38 +0000</bug_when>
    <thetext>Yes, this is the official set of build tools provided by the EDK2 base tools repository for win32.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15673</commentid>
    <comment_count>5</comment_count>
    <who name="Ethin Probst">harlydavidsen</who>
    <bug_when>2021-04-13 23:07:11 +0000</bug_when>
    <thetext>Okay, I&apos;ve managed to get past this and am running into issues with ANTLR. What version of ANTLR do I need to get? ANTLR 3.5.2 is throwing syntax errors my way, so I&apos;m assuming a really, really old version is required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15687</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-14 21:08:36 +0000</bug_when>
    <thetext>Pre-built binary win32 BaseTools are obselete. They don&apos;t work. 

You need to compile BaseTools source, then use it. BaseTools source has its own ANTLR. It will compile and use it. When you compile BaseTools, please make sure there is no antlr tool in the system PATH. Then, BaseTools can use its own one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15689</commentid>
    <comment_count>7</comment_count>
    <who name="Ethin Probst">harlydavidsen</who>
    <bug_when>2021-04-15 00:06:47 +0000</bug_when>
    <thetext>It does not appear that an ANTLR is provided in the base tools, either in source or binary form. Running `edksetup` and then typeing `antlr` gives me the standard command not found response.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15691</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-15 01:10:43 +0000</bug_when>
    <thetext>In Windows OS, run edksetup.bat Rebuild, it will compile BaseTools. After done, antlr can run.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15692</commentid>
    <comment_count>9</comment_count>
    <who name="Ethin Probst">harlydavidsen</who>
    <bug_when>2021-04-15 01:31:04 +0000</bug_when>
    <thetext>I&apos;ve done that, and antlr isn&apos;t built by the time it needs it. So even if it does provide antlr, its not building it before it builds the VFR compiler, and so its always going to crash and burn.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15709</commentid>
    <comment_count>10</comment_count>
    <who name="Ethin Probst">harlydavidsen</who>
    <bug_when>2021-04-15 23:08:33 +0000</bug_when>
    <thetext>Okay, so ANTLR does come with the base tools. However, the edksetup tool does not set PATH to the win32 tools, so I have to do it manually. So I have to set PATH to include those BaseTools locations myself.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15710</commentid>
    <comment_count>11</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-16 01:03:12 +0000</bug_when>
    <thetext>edksetup.bat 会把BaseTools\Bin\Win32 设置到系列路径PATH下的。</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15724</commentid>
    <comment_count>12</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-19 20:59:27 +0000</bug_when>
    <thetext>edksetup.bat will set BaseTools\Bin\Win32 directory to system PATH env</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18577</commentid>
    <comment_count>13</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-08 22:15:03 +0000</bug_when>
    <thetext>This is not BaseTools issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3892</bug_id>
          
          <creation_ts>2022-04-03 01:55:49 +0000</creation_ts>
          <short_desc>CryptoPkg: Need to add additional cipher algos and TLS API to meet WPA3</short_desc>
          <delta_ts>2022-10-18 21:42:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="yi1.li@intel.com">yi1.li</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>yi1.li</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18746</commentid>
    <comment_count>0</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-04-03 01:55:49 +0000</bug_when>
    <thetext>To meet the needs of WPA3 Enterprise, additional cipher algorithms and TLS APIs need to be added, such as APIs for configuring TLS EC curves and signature algorithms. 

details as follows:
- TlsShutdown: Shutdown the TLS connection without releasing the resources,
      meaning a new connection can be started without calling TlsNew() and
      without setting certificates etc.

- TlsExportKey: Derive keying material from a TLS connection using the
      mechanism described in RFC 5705 and export the key material (needed
      by EAP methods such as EAP-TTLS and EAP-PEAP).

- TlsSetEcCurve: Set the EC curve to be used for TLS flows.

- TlsSetSignatureAlgoList: Set the signature algorithm list to used by the TLS 
      object.

- Additional cipher algorithms: Which are needed for SUITE-B and SUITE-B-192.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18749</commentid>
    <comment_count>1</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-04-03 22:24:49 +0000</bug_when>
    <thetext>More detail:
•	TlsShutdown: Quietly shutdown the TLS connection without releasing the resources and without notifying the peer, meaning a new connection can be started without calling TlsNew() and without setting certificates etc. This allows the re-use of the current TLS object, which is needed for WLAN Supplicant for re-authentication flows.
•	TlsExportKey: Derive keying material from a TLS connection using the mechanism described in RFC 5705 and export the key material. This is required by the WLAN Supplicant EAP methods, e.g., EAP-TLS, EAP-TTLS and EAP-PEAP. This key material is used to derive the Pairwise Master Key (PMK) and later the Pairwise Transient Key (PTK) from the PMK as defined in chapter 12 in IEEE802.11 specification.
•	TlsSetMsgTrace: Allows to enable/disable debug tracing all the received and transmitted TLS protocol messages, e.g., TLS handshake, and other events. This is useful to debug TLS connection establishment issues.
•	TlsSetSignatureAlgoList: Configure the list of TLS signature algorithms that should be used as part of the TLS session establishment. This is needed for some WLAN Supplicant connection establishment flows that allow only specific TLS signature algorithms to be used, e.g., Authenticate and Key Managmenet (AKM) suites that are SUITE-B compliant.
•	TlsSetEcCurve: Configure the Elliptic Curve that should be used for TLS flows the use cipher suite with EC, e.g., TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384. This is needed for some WLAN Supplicant connection establishment flows that allow only specific TLS signature algorithms to be used, e.g., Authenticate and Key Managmenet (AKM) suites that are SUITE-B compliant.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18767</commentid>
    <comment_count>2</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-04-06 01:53:33 +0000</bug_when>
    <thetext>Code pre-review:
https://github.com/tianocore/edk2/pull/2746</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18852</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-19 21:48:23 +0000</bug_when>
    <thetext>Yi is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19785</commentid>
    <comment_count>4</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-10-18 21:42:39 +0000</bug_when>
    <thetext>Merged https://github.com/tianocore/edk2/pull/3458</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3800</bug_id>
          
          <creation_ts>2022-01-10 20:15:12 +0000</creation_ts>
          <short_desc>RISC-V edk2 port migration</short_desc>
          <delta_ts>2022-03-03 22:42:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18111</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-01-10 20:15:12 +0000</bug_when>
    <thetext>RISC-V edk2 port migration, from edk2-platforms to edk2 repo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18114</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-10 21:56:46 +0000</bug_when>
    <thetext>Abner is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18554</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-03 22:28:50 +0000</bug_when>
    <thetext>UefiCpuPkg would be revised to support all processor archs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18557</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-03 22:42:16 +0000</bug_when>
    <thetext>Replaced by https://bugzilla.tianocore.org/show_bug.cgi?id=3860</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3010</bug_id>
          
          <creation_ts>2020-10-15 16:28:39 +0000</creation_ts>
          <short_desc>FmpDevicePkg build fails due to missing RngLib instance</short_desc>
          <delta_ts>2020-10-19 12:05:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13999</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-15 16:28:39 +0000</bug_when>
    <thetext>Commit b5701a4 in CryptoPkg introduced a dependency on RngLib.

The FmpDevicePkg build currently fails since it does not specify
a RngLib instance and OpensslLib links against RngLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14000</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-15 16:29:18 +0000</bug_when>
    <thetext>It&apos;s a simple fix. I will send a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14002</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-15 20:02:05 +0000</bug_when>
    <thetext>v1 patch on the list: https://edk2.groups.io/g/devel/message/66286</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14029</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-19 12:05:11 +0000</bug_when>
    <thetext>Patch submitted in the following commit: https://github.com/tianocore/edk2/commit/92e9c44f205a876556abe1a1addea5c40e4f3ccf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3634</bug_id>
          
          <creation_ts>2021-09-16 10:02:28 +0000</creation_ts>
          <short_desc>Cpu feature data stored in memory by PEI AllocatePool() may be migrated to different location when CpuS3 reads</short_desc>
          <delta_ts>2021-10-20 04:32:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17287</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-09-16 10:02:28 +0000</bug_when>
    <thetext>ACPI_CPU_DATA is created by CpuFeaturesPei and then PiSmmCpuSmmDxe/CpuS3.c copies it to SMRAM in EndOfDxe callback.

In ACPI_CPU_DATA.CpuFeatureInitData,

1. (PreSmmInit)RegisterTable point to CPU_REGISTER_TABLE[NumOfCpus] by AllocatePages()

2. (PreSmmInit)RegisterTable[cpu_index]-&gt;RegisterTableEntry points to CPU_REGISTER_TABLE_ENTRY[] by AllocatePages()

3. CpuStatus.ThreadCountPer(Package|Core) points to UINT32[NumOfPackages|NumOfCores] by AllocatePool()

4. ApLocation points to EFI_CPU_PHYSICAL_LOCATION[NumOfCpus] by AllocatePool()

#1 and #2 are good.
But #3 and #4 are not because the memory allocated through AllocatePool() is within HOB and the HOB will be migrated to a different location by DxeCore.
The migration only guarantees the HOB data is kept but it doesn&apos;t fix up the pointer in ACPI_CPU_DATA.

When PiSmmCpuSmmDxe/CpuS3.c copies it to SMRAM later, the pointer in ACPI_CPU_DATA may point to invalid memory content (the original HOB data is marked as free memory after migration).

To fix this issue, there are two approaches:
A. Change AllocatePool to AllocatePage
B. Let CpuFeaturesPei always inits the feature and never pass ACPI_CPU_DATA to PiSmmCpuSmmDxe/CpuS3.c
   The &quot;pass&quot; is needed because PcdCpuFeaturesInitOnS3Resume (FALSE) tells CpuFeaturesPei not init the CPU feature in S3 path.
   A simple fix using #B is to delete PcdCpuFeaturesInitOnS3Resume and don&apos;t set PcdCpuS3DataAddress.
   A clean fix using #B is to clean up further like freeing the memory occupied by ACPI_CPU_DATA (but how to share the one RegisterCpuFeaturesLib implementation is an open)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17340</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-21 21:53:13 +0000</bug_when>
    <thetext>Jason is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17415</commentid>
    <comment_count>2</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-09-29 07:58:47 +0000</bug_when>
    <thetext>Have sent out the code patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17586</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-10-20 04:32:45 +0000</bug_when>
    <thetext>Have merged the code change into master, close this bug.

SHA-1: 37a33f02aa1ab89f392da7d06ec3578fda1b6182

* UefiCpuPkg: Cpu feature data stored in memory may be migrated

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3634

The memory allocated through &quot;PeiAllocatePool&quot; is located in HOB, and
in DXE phase, the HOB will be migrated to a different location.
After the migration, the data stored in the HOB stays the same, but the
address of pointer to the memory(such as the pointers in ACPI_CPU_DATA
structure) changes, which may cause &quot;PiSmmCpuDxeSmm&quot; driver can&apos;t find
the memory(the pointers in ACPI_CPU_DATA structure) that allocated in
&quot;PeiRegisterCpuFeaturesLib&quot;, so use &quot;PeiAllocatePages&quot; to allocate
memory instead.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3127</bug_id>
          
          <creation_ts>2020-12-16 21:53:10 +0000</creation_ts>
          <short_desc>BaseTools reports -1 as the line number if the ppi/protocol/guid/pcd is not found in INF file</short_desc>
          <delta_ts>2020-12-30 02:19:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to name="yunhua feng">fengyunhua</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14607</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-16 21:53:10 +0000</bug_when>
    <thetext>If one protocol is not found in package dec file, Build will report the error message that module.inf(-1): error 4000: Value of Protocol [gXxxProtocolGuid] is not found under [Protocols] section in MdePkg.dec. 

Here, -1 should be the line number of this protocol in module INF file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14608</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-16 21:53:29 +0000</bug_when>
    <thetext>Yunhua will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14683</commentid>
    <comment_count>2</comment_count>
    <who name="yunhua feng">fengyunhua</who>
    <bug_when>2020-12-30 02:19:05 +0000</bug_when>
    <thetext>Fixed at b6e360874f4da1eb2ad82dac00938d1286741884</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3346</bug_id>
          
          <creation_ts>2021-04-20 21:57:57 +0000</creation_ts>
          <short_desc>Brotli compress failure due to file corruption</short_desc>
          <delta_ts>2021-05-28 02:12:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Miki Shindo">miki.shindo</reporter>
          <assigned_to>gaoliming</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>miki.shindo</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15746</commentid>
    <comment_count>0</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2021-04-20 21:57:57 +0000</bug_when>
    <thetext>BrotliCompress execution fails on build process. 

The build error is like below. It is saying &quot;Corrupt input&quot; which is print at DecompressFile line #321 in BrotliCompress.c. 


Generating FVADVANCEDUNCOMPACT FV
########################################
######### [&apos;BrotliCompress&apos;, &apos;-e&apos;, &apos;-o&apos;, &apos;z:\\Build\\AlderLakeBoardPkg\\DEBUG_VS2015x86\\FV\\Ffs\\AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.tmp&apos;, &apos;z:\\Build\\AlderLakeBoardPkg\\DEBUG_VS2015x86\\FV\\Ffs\\AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.guided.dummy&apos;]
Return Value = 1
Corrupt input [z:\Build\AlderLakeBoardPkg\DEBUG_VS2015x86\FV\Ffs\AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.tmp]
Failed to decompress file [z:\Build\AlderLakeBoardPkg\DEBUG_VS2015x86\FV\Ffs\AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.tmp]




build.py...
 : error 7000: Failed to call BrotliCompress



build.py...
 : error 7000: Failed to execute command</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15806</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-27 21:53:26 +0000</bug_when>
    <thetext>Need to review BaseTools BrotliCompression to see the file operation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16199</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-28 02:12:12 +0000</bug_when>
    <thetext>This has been fixed in edk2 9cd854e19de230cdbf5b3781d3b686861cf0bc2f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3068</bug_id>
          
          <creation_ts>2020-11-10 07:24:04 +0000</creation_ts>
          <short_desc>Build failure with mainline edk2</short_desc>
          <delta_ts>2020-12-08 21:06:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Grant Likely">grant.likely</reporter>
          <assigned_to name="Grant Likely">grant.likely</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14298</commentid>
    <comment_count>0</comment_count>
    <who name="Grant Likely">grant.likely</who>
    <bug_when>2020-11-10 07:24:04 +0000</bug_when>
    <thetext>EDK2 mainline removed some deprecated wrappers in commit 9c1f455f &quot;MdePkg: Remove code wrapped by DISABLE_NEW_DEPRECATED_INTERFACES&quot;

https://github.com/tianocore/edk2/commit/9c1f455f5f0ee63ce080940bf974aac4fefe526b


uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/ConfigKeywordHandler/BlackBoxTest/Dependency/SampleDriver/DriverSample.c still uses the following functions instead of the more secure &apos;S&apos; variants:

StrnCpy()
UnicodeValueToString()

Fixing those call sites fixes the build</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14299</commentid>
    <comment_count>1</comment_count>
      <attachid>596</attachid>
    <who name="Grant Likely">grant.likely</who>
    <bug_when>2020-11-10 07:27:04 +0000</bug_when>
    <thetext>Created attachment 596
Example fix for build issue

This patch fixes the build, but it is unlikely to be correct. Need someone to look through the codepath and determine a better fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14310</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-10 20:37:12 +0000</bug_when>
    <thetext>@Grant, can you help fix SCT code?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14330</commentid>
    <comment_count>3</comment_count>
    <who name="Grant Likely">grant.likely</who>
    <bug_when>2020-11-11 06:47:07 +0000</bug_when>
    <thetext>@gaoling: I&apos;ve attached a draft patch, but I&apos;ve not tested it. I&apos;ll try to get to it, but I would appreciate another set of eyes looking at the change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14407</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-23 20:37:01 +0000</bug_when>
    <thetext>do you send the patch to edk2 mail list (devel@edk2.groups.io) for code review?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14416</commentid>
    <comment_count>5</comment_count>
    <who name="Grant Likely">grant.likely</who>
    <bug_when>2020-11-25 04:56:23 +0000</bug_when>
    <thetext>Yes, I updated the patch and sent it to the mailing list and Edhaya has committed it.

https://edk2.groups.io/g/devel/topic/edk2_test_patch_fix/78186938?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,20,78186938</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14516</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 21:06:44 +0000</bug_when>
    <thetext>The patch has been merged.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>596</attachid>
            <date>2020-11-10 07:27:04 +0000</date>
            <delta_ts>2020-11-10 07:27:04 +0000</delta_ts>
            <desc>Example fix for build issue</desc>
            <filename>0001-Fix-missing-symbols-on-edk2-test-build.patch</filename>
            <type>text/plain</type>
            <size>2924</size>
            <attacher name="Grant Likely">grant.likely</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3022</bug_id>
          
          <creation_ts>2020-10-26 08:06:50 +0000</creation_ts>
          <short_desc>[SCT] Correct BBTestEraseBlocksFunctionTest behavior (About EFI_BLOCK_IO_PROTOCOL).</short_desc>
          <delta_ts>2021-10-07 09:23:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Arvin Chen">arvin.chen</reporter>
          <assigned_to name="Arvin Chen">arvin.chen</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14089</commentid>
    <comment_count>0</comment_count>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-10-26 08:06:50 +0000</bug_when>
    <thetext>The storage device erase behavior may have two two possibilities, all write data into &quot;0&quot; or all write into &quot;1&quot;, but now SCT tool behavior can only check the case all write data into &quot;0&quot;, so we need add the other case into SCT tool to correct the test behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14116</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:46:20 +0000</bug_when>
    <thetext>Arvin: please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14132</commentid>
    <comment_count>2</comment_count>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-10-27 22:19:59 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; Arvin: please work on it.

Thanks for your comment, I have already send the change, waiting for reviewer check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14237</commentid>
    <comment_count>3</comment_count>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-11-05 04:43:35 +0000</bug_when>
    <thetext>(In reply to Arvin Chen from comment #0)
&gt; The storage device erase behavior may have two two possibilities, all write
&gt; data into &quot;0&quot; or all write into &quot;1&quot;, but now SCT tool behavior can only
&gt; check the case all write data into &quot;0&quot;, so we need add the other case into
&gt; SCT tool to correct the test behavior.

About this, please reference document JESD84-B51/6.6.9 - Erase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14238</commentid>
    <comment_count>4</comment_count>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-11-05 04:45:33 +0000</bug_when>
    <thetext>(In reply to Arvin Chen from comment #0)
&gt; The storage device erase behavior may have two two possibilities, all write
&gt; data into &quot;0&quot; or all write into &quot;1&quot;, but now SCT tool behavior can only
&gt; check the case all write data into &quot;0&quot;, so we need add the other case into
&gt; SCT tool to correct the test behavior.

About this, please reference document JESD84-B51/6.6.9 - Erase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14420</commentid>
    <comment_count>5</comment_count>
      <attachid>605</attachid>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-11-25 10:27:35 +0000</bug_when>
    <thetext>Created attachment 605
Attach Patch 01</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17451</commentid>
    <comment_count>6</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-10-07 09:23:04 +0000</bug_when>
    <thetext>The patch is unstreamed through the commit:https://github.com/tianocore/edk2-test/commit/cf7b43c130816f50aca1f10871cb9cf29e386223</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>605</attachid>
            <date>2020-11-25 10:27:35 +0000</date>
            <delta_ts>2020-11-25 10:27:35 +0000</delta_ts>
            <desc>Attach Patch 01</desc>
            <filename>0001-EMMC.patch</filename>
            <type>application/octet-stream</type>
            <size>5978</size>
            <attacher name="Arvin Chen">arvin.chen</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3023</bug_id>
          
          <creation_ts>2020-10-26 08:21:05 +0000</creation_ts>
          <short_desc>[SCT] Correct FirmwareManagementProtocol check image test behavior (About EFI_FIRMWARE_MANAGEMENT_PROTOCOL).</short_desc>
          <delta_ts>2021-05-01 03:49:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Arvin Chen">arvin.chen</reporter>
          <assigned_to name="Arvin Chen">arvin.chen</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14090</commentid>
    <comment_count>0</comment_count>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-10-26 08:21:05 +0000</bug_when>
    <thetext>Now, in our SCT test case &quot;CheckImage&quot; behavior have some problems. Once our tool need to check the &quot;EFI_SECURITY_VIOLATION&quot; have correct return from &quot;EFI_FIRMWARE_MANAGEMENT_PROTOCOL-&gt;CheckImage&quot; function, the function will because tool behavior and return EFI_BUFFER_TOO_SMALL first, we should gave it a correct header info to make the test item can process correctly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14115</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:45:19 +0000</bug_when>
    <thetext>Arvin: please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14131</commentid>
    <comment_count>2</comment_count>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-10-27 22:18:04 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; Arvin: please work on it.

Sure, I already send the change. waiting for reviewer check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14419</commentid>
    <comment_count>3</comment_count>
      <attachid>604</attachid>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-11-25 10:27:05 +0000</bug_when>
    <thetext>Created attachment 604
Attach Patch 01</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15865</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 03:49:47 +0000</bug_when>
    <thetext>Patch merged as 7be3e2d198adcbb6.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>604</attachid>
            <date>2020-11-25 10:27:05 +0000</date>
            <delta_ts>2020-11-25 10:27:05 +0000</delta_ts>
            <desc>Attach Patch 01</desc>
            <filename>0002-CI01.patch</filename>
            <type>application/octet-stream</type>
            <size>6862</size>
            <attacher name="Arvin Chen">arvin.chen</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3417</bug_id>
          
          <creation_ts>2021-05-25 19:05:46 +0000</creation_ts>
          <short_desc>GCC 11.1.0: fails to build due to -Werror</short_desc>
          <delta_ts>2022-03-01 21:29:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ethin Probst">harlydavidsen</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>gaoliming</cc>
    
    <cc>guillaume.gardet</cc>
    
    <cc>marklmi26-fbsd</cc>
    
    <cc>patrick.rudolph</cc>
    
    <cc>pedro.falcato</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>rebecca</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16137</commentid>
    <comment_count>0</comment_count>
    <who name="Ethin Probst">harlydavidsen</who>
    <bug_when>2021-05-25 19:05:46 +0000</bug_when>
    <thetext>GCC fails to build BaseTools and treats all warnings as errors. GCC uses C++17 and C17 by default and the &quot;register&quot; keyboard is deprecated in that specification version. This additionally occurs in the edk2-stable202102 release. In this release, warnings, which are treated as errors, are in brotli/c/dec/decode.c and brotli/c/enc/encode.c; build log output is as follows:
brotli/c/dec/decode.c:2033:41: error: argument 2 of type ‘const uint8_t *’ {aka ‘const unsigned char *’} declared as a pointer [-Werror=vla-parameter]
 2033 |     size_t encoded_size, const uint8_t* encoded_buffer, size_t* decoded_size,
      |                          ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~
In file included from brotli/c/dec/decode.c:7:
./brotli/c/include/brotli/decode.h:204:19: note: previously declared as a variable length array ‘const uint8_t[*decoded_size]’ {aka ‘const unsigned char[*decoded_size]’}
  204 |     const uint8_t encoded_buffer[BROTLI_ARRAY_PARAM(encoded_size)],
      |     ~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
brotli/c/dec/decode.c:2034:14: error: argument 4 of type ‘uint8_t *’ {aka ‘unsigned char *’} declared as a pointer [-Werror=vla-parameter]
 2034 |     uint8_t* decoded_buffer) {
      |     ~~~~~~~~~^~~~~~~~~~~~~~
In file included from brotli/c/dec/decode.c:7:
./brotli/c/include/brotli/decode.h:206:13: note: previously declared as a variable length array ‘uint8_t[encoded_size]’ {aka ‘unsigned char[encoded_size]’}
  206 |     uint8_t decoded_buffer[BROTLI_ARRAY_PARAM(*decoded_size)]);
      |     ~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
brotli/c/enc/encode.c:1473:20: error: argument 5 of type ‘const uint8_t *’ {aka ‘const unsigned char *’} declared as a pointer [-Werror=vla-parameter]
 1473 |     const uint8_t* input_buffer, size_t* encoded_size,
      |     ~~~~~~~~~~~~~~~^~~~~~~~~~~~
In file included from brotli/c/enc/encode.c:9:
./brotli/c/include/brotli/encode.h:314:19: note: previously declared as a variable length array ‘const uint8_t[*encoded_size]’ {aka ‘const unsigned char[*encoded_size]’}
  314 |     const uint8_t input_buffer[BROTLI_ARRAY_PARAM(input_size)],
      |     ~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
brotli/c/enc/encode.c:1474:14: error: argument 7 of type ‘uint8_t *’ {aka ‘unsigned char *’} declared as a pointer [-Werror=vla-parameter]
 1474 |     uint8_t* encoded_buffer) {
      |     ~~~~~~~~~^~~~~~~~~~~~~~
In file included from brotli/c/enc/encode.c:9:
./brotli/c/include/brotli/encode.h:316:13: note: previously declared as a variable length array ‘uint8_t[input_size]’ {aka ‘unsigned char[input_size]’}
  316 |     uint8_t encoded_buffer[BROTLI_ARRAY_PARAM(*encoded_size)]);
      |     ~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In the master branch, build output is identical.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16138</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-25 21:36:55 +0000</bug_when>
    <thetext>Suggest to disable the warning for brotli</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16197</commentid>
    <comment_count>2</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2021-05-27 14:20:11 +0000</bug_when>
    <thetext>I can reproduce this by pulling down gcc 11 from debian experimental.

We trigger it because -Wall -Weverything. Upstream brotli doesn&apos;t use these.

The &quot;register&quot; keyword is in VfrCompile and does not actually trigger an error, only a warning - since VfrCompile builds without -Werror.

The least invasive way I can think of disabling this at our end is:

diff --git a/BaseTools/Source/C/BrotliCompress/GNUmakefile b/BaseTools/Source/C/BrotliCompress/GNUmakefile
index b150e5dd2bb9..d6973875cdad 100644
--- a/BaseTools/Source/C/BrotliCompress/GNUmakefile
+++ b/BaseTools/Source/C/BrotliCompress/GNUmakefile
@@ -39,3 +39,4 @@ include $(MAKEROOT)/Makefiles/app.makefile
 
 TOOL_INCLUDE = -I ./brotli/c/include
 LIBS += -lm
+BUILD_CFLAGS += -Wno-error=vla-parameter</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16244</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-02 12:56:38 +0000</bug_when>
    <thetext>*** Bug 3427 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16263</commentid>
    <comment_count>4</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2021-06-04 06:48:24 +0000</bug_when>
    <thetext>Ugh, of course this doesn&apos;t work, since -Wvla-parameter doesn&apos;t exist in versions prior to GCC 11.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16264</commentid>
    <comment_count>5</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2021-06-04 07:13:25 +0000</bug_when>
    <thetext>Since C11 standard, compilers must define the __STDC_NO_VLA__ macro when variable-length array is not supported. If the compiler (here supporting C17) doesn&apos;t want to support vla-parameter, why doesn&apos;t it define __STDC_NO_VLA__ then?
Brotli is ready for this, see:
https://github.com/google/brotli/commit/f5ed35d0658eed11787aeea1262d4370f2e9a5de#diff-538569c3952cb961dbc621f2ddd91dcc82fc98f8213c9dfa02cdfe4f1036280dR14</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16289</commentid>
    <comment_count>6</comment_count>
    <who name="Mark Millard">marklmi26-fbsd</who>
    <bug_when>2021-06-07 16:23:21 +0000</bug_when>
    <thetext>(In reply to Philippe Mathieu-Daudé from comment #5)
&gt; Since C11 standard, compilers must define the __STDC_NO_VLA__ macro when
&gt; variable-length array is not supported. If the compiler (here supporting
&gt; C17) doesn&apos;t want to support vla-parameter, why doesn&apos;t it define
&gt; __STDC_NO_VLA__ then?
&gt; Brotli is ready for this, see:
&gt; https://github.com/google/brotli/commit/
&gt; f5ed35d0658eed11787aeea1262d4370f2e9a5de#diff-
&gt; 538569c3952cb961dbc621f2ddd91dcc82fc98f8213c9dfa02cdfe4f1036280dR14

The compiler does support it but the source code has a mix of
non-variariably modifed types (in the function definitions) and
variably modifed types (in the header&apos;s declrations of the functions).

I got past this specific issue by replacing the text in the
definitions with the text in the header declarations:

# git diff
diff --git a/c/dec/decode.c b/c/dec/decode.c
index 114c505..bb6f1ab 100644
--- a/c/dec/decode.c
+++ b/c/dec/decode.c
@@ -2030,8 +2030,10 @@ static BROTLI_NOINLINE BrotliDecoderErrorCode SafeProcessCommands(
 }
 
 BrotliDecoderResult BrotliDecoderDecompress(
-    size_t encoded_size, const uint8_t* encoded_buffer, size_t* decoded_size,
-    uint8_t* decoded_buffer) {
+    size_t encoded_size,
+    const uint8_t encoded_buffer[BROTLI_ARRAY_PARAM(encoded_size)],
+    size_t* decoded_size,
+    uint8_t decoded_buffer[BROTLI_ARRAY_PARAM(*decoded_size)]) {
   BrotliDecoderState s;
   BrotliDecoderResult result;
   size_t total_out = 0;
diff --git a/c/enc/encode.c b/c/enc/encode.c
index 68548ef..ab0a490 100644
--- a/c/enc/encode.c
+++ b/c/enc/encode.c
@@ -1470,8 +1470,9 @@ static size_t MakeUncompressedStream(
 
 BROTLI_BOOL BrotliEncoderCompress(
     int quality, int lgwin, BrotliEncoderMode mode, size_t input_size,
-    const uint8_t* input_buffer, size_t* encoded_size,
-    uint8_t* encoded_buffer) {
+    const uint8_t input_buffer[BROTLI_ARRAY_PARAM(input_size)],
+    size_t* encoded_size,
+    uint8_t encoded_buffer[BROTLI_ARRAY_PARAM(*encoded_size)]) {
   BrotliEncoderState* s;
   size_t out_size = *encoded_size;
   const uint8_t* input_start = input_buffer;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16351</commentid>
    <comment_count>7</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-06-11 20:18:52 +0000</bug_when>
    <thetext>There&apos;s an upstream pull request to fix this: https://github.com/google/brotli/pull/893</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16431</commentid>
    <comment_count>8</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2021-06-23 07:24:01 +0000</bug_when>
    <thetext>Upstream pull request now merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16451</commentid>
    <comment_count>9</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-23 21:37:09 +0000</bug_when>
    <thetext>Brotli is consumed as submodule. So, the fix is to update brotli submodule version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16983</commentid>
    <comment_count>10</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-08-18 21:25:06 +0000</bug_when>
    <thetext>This is still a problem with code from the latest edk2 master (ef56f55d19e1b0b4ba6f9b28d73165c7f0a4627c).

If I manually checkout master in BaseTools/Source/C/BrotliCompress/brotli, I get the following error:

gcc  -c -I ./brotli/c/include -I .. -I ../Include/Common -I ../Include/ -I ../Include/IndustryStandard -I ../Common/ -I .. -I . -I ../Include/X64/ -MD -fshort-wchar -fno-strict-aliasing -fwrapv -fno-delete-null-pointer-checks -Wall -Werror -Wno-deprecated-declarations -Wno-stringop-truncation -Wno-restrict -Wno-unused-result -nostdlib -g -O2  brotli/c/dec/decode.c -o brotli/c/dec/decode.o
brotli/c/dec/decode.c:1498:71: error: argument 4 of type &apos;const uint8_t *&apos; {aka &apos;const unsigned char *&apos;} declared as a pointer [-Werror=vla-parameter]
 1498 |     BrotliSharedDictionaryType type, size_t data_size, const uint8_t* data) {
      |                                                        ~~~~~~~~~~~~~~~^~~~
In file included from brotli/c/dec/decode.c:7:
./brotli/c/include/brotli/decode.h:179:37: note: previously declared as a variable length array &apos;const uint8_t[data_size]&apos; {aka &apos;const unsigned char[data_size]&apos;}
  179 |     size_t data_size, const uint8_t data[BROTLI_ARRAY_PARAM(data_size)]);
      |                       ~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cc1: all warnings being treated as errors</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17620</commentid>
    <comment_count>11</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2021-10-27 17:19:03 +0000</bug_when>
    <thetext>Any updates on this? It&apos;s annoying to have to patch the Makefile/brotli when cloning a fresh copy of edk2.
I could send a patch updating the submodule but I prefer that people more involved with BaseTools do it, since it may break something.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17622</commentid>
    <comment_count>12</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2021-10-28 05:32:49 +0000</bug_when>
    <thetext>(In reply to Pedro Falcato from comment #11)
&gt; I could send a patch updating the submodule but I prefer that people more
&gt; involved with BaseTools do it, since it may break something.

If it breaks something and the maintainers still merge it, that&apos;s on them, not you. A patch would be most excellent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17877</commentid>
    <comment_count>13</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-30 20:29:40 +0000</bug_when>
    <thetext>Update Brotli is a new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17878</commentid>
    <comment_count>14</comment_count>
    <who name="Mark Millard">marklmi26-fbsd</who>
    <bug_when>2021-11-30 21:02:24 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #13)
&gt; Update Brotli is a new feature.

When BrotliDecoderAttachDictionary and BrotliEncoderPrepareDictionary were added,
another set of .h vs. .c VLA vs. pointer usage mismatches was added (and had not
been fixed last I checked). See: https://github.com/google/brotli/commit/19d86fb9a60a

Looked like #929 ( 27dd726 ) for Brotli is a pull request for the specifics here.

See: #893 for an example that was applied: 0a3944c . It was for fixing the
earlier pointer vs. VLA mismatches.

May be EDK2 requesting that Brotli get around to fixing the mismatches would
produce a Brotli commit that EDK2 could then reference. Other individual
requests do not seem to be processed in a timely manor.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17879</commentid>
    <comment_count>15</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2021-11-30 22:12:15 +0000</bug_when>
    <thetext>(In reply to Mark Millard from comment #14)
&gt; (In reply to gaoliming from comment #13)
&gt; &gt; Update Brotli is a new feature.
&gt; 
&gt; When BrotliDecoderAttachDictionary and BrotliEncoderPrepareDictionary were
&gt; added,
&gt; another set of .h vs. .c VLA vs. pointer usage mismatches was added (and had
&gt; not
&gt; been fixed last I checked). See:
&gt; https://github.com/google/brotli/commit/19d86fb9a60a
&gt; 
&gt; Looked like #929 ( 27dd726 ) for Brotli is a pull request for the specifics
&gt; here.
&gt; 
&gt; See: #893 for an example that was applied: 0a3944c . It was for fixing the
&gt; earlier pointer vs. VLA mismatches.
&gt; 
&gt; May be EDK2 requesting that Brotli get around to fixing the mismatches would
&gt; produce a Brotli commit that EDK2 could then reference. Other individual
&gt; requests do not seem to be processed in a timely manor.

You are 100% correct, I must&apos;ve only tested my patch (https://edk2.groups.io/g/devel/topic/86668358) on windows and not my Linux installation.

I think we should just set -Wno-error (and the MSVC equivalent) on brotli code, both in BaseTools and BrotliCustomDecompressLib. While it&apos;s not ideal, it might be the best way to deal with the unresponsive upstream. Thoughts?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17880</commentid>
    <comment_count>16</comment_count>
    <who name="Mark Millard">marklmi26-fbsd</who>
    <bug_when>2021-11-30 22:31:37 +0000</bug_when>
    <thetext>(In reply to Pedro Falcato from comment #15)

&gt; I think we should just set -Wno-error (and the MSVC equivalent) on brotli
&gt; code, both in BaseTools and BrotliCustomDecompressLib. While it&apos;s not ideal,
&gt; it might be the best way to deal with the unresponsive upstream. Thoughts?

Nothing in the language says that the VLA implementation and the
pointer implementation would be compatible in the code generated
for the callers (header usage) vs. in the called code (.c files).
I&apos;ve no clue if there are any EDK2 usage contexts where the result
would be garbage-in/garbage-out if it was forced to compile and
it managed to link.

I&apos;m not even sure there is any compiler option that would make
VLA vs. pointer not by rejected in some (modern/VLA-correct) compilers.
My usage has always been locally fixing the code vintage that EDK2
is using to be valid C code (changing pointer usage to VLA usage in
the .c files).

FreeBSD&apos;s EDK2 ports building fail for the issue as well. It is not
just Linux that gets rejections of the non-C combination.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17946</commentid>
    <comment_count>17</comment_count>
    <who name="Mark Millard">marklmi26-fbsd</who>
    <bug_when>2021-12-07 02:24:12 +0000</bug_when>
    <thetext>I got a notice that the brotli pull request:

Re: [google/brotli] Fix -Werror=vla-parameter errors with GCC 11.2.0 (#929)

has been merged:

Merged #929 into master.

I also got a notice that problem report #930 has been closed (fixed
by the change).

There is some chance that a new EDK2 binding to a new brotli commit might allow unpatched EDK2 builds with the likes of gcc11 .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17947</commentid>
    <comment_count>18</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2021-12-07 09:25:50 +0000</bug_when>
    <thetext>(In reply to Mark Millard from comment #17)
&gt; I got a notice that the brotli pull request:
&gt; 
&gt; Re: [google/brotli] Fix -Werror=vla-parameter errors with GCC 11.2.0 (#929)
&gt; 
&gt; has been merged:
&gt; 
&gt; Merged #929 into master.
&gt; 
&gt; I also got a notice that problem report #930 has been closed (fixed
&gt; by the change).
&gt; 
&gt; There is some chance that a new EDK2 binding to a new brotli commit might
&gt; allow unpatched EDK2 builds with the likes of gcc11 .

ACK

I&apos;ll try it out and resubmit my patch if everything works out fine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18231</commentid>
    <comment_count>19</comment_count>
    <who name="Patrick Rudolph">patrick.rudolph</who>
    <bug_when>2022-02-02 05:58:52 +0000</bug_when>
    <thetext>Any update on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18482</commentid>
    <comment_count>20</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-03-01 21:29:11 +0000</bug_when>
    <thetext>fixed at 42af706dfba72bf2639ae2101caca10d89701b24</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3220</bug_id>
          
          <creation_ts>2021-02-17 08:18:42 +0000</creation_ts>
          <short_desc>TigerLake OpenBoardPkg doesn&apos;t build with GCC5</short_desc>
          <delta_ts>2021-02-25 04:32:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3224</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michał Żygowski">michal.zygowski</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>piotr.krol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15069</commentid>
    <comment_count>0</comment_count>
    <who name="Michał Żygowski">michal.zygowski</who>
    <bug_when>2021-02-17 08:18:42 +0000</bug_when>
    <thetext>TianoCore project is supposed to support GCC5 thus I gave it a try with TigerLakeOpenBaordPkg. I have encountered a mass of compilation errors:

1. Many declared and initialized variables, but not used.
2. Some functions  are not called anywhere, e.g.
Platform/Intel/TigerlakeOpenBoardPkg/Library/BasePlatformHookLib/BasePlatformHookLib.c: CheckNationalSio
3. Array initializers are not GCC friendly, e.g.
Silicon/Intel/TigerlakeSiliconPkg/IpBlock/PcieRp/LibraryPrivate/DxePchPcieRpPolicyLib/DxePchPcieRpPolicyLib.c: mPcieDeviceTable
The number of fields initialized does not match the structure definition which results in &quot;missing brackets&quot; error.
4. Multiple external object definitions in ACPI ASL files, e.g. External(\_SB.PC00.PEG0, DeviceObj) in the intermediate file being included multiple times in a parent ASL file results in IASL errors.

I came to the conclusion that the TigerlakeOpenBoardPkg was probably tested only on Windows with VS compiler.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15120</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-23 21:45:07 +0000</bug_when>
    <thetext>Heng, please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15134</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-02-24 20:07:25 +0000</bug_when>
    <thetext>Takuto Naito had summited 2 patches to fix GCC build error:
https://github.com/tianocore/edk2-platforms/compare/41b54dbb68036743768c53de9586f68a6d2c986f...9fb5174e0a164f83fc708c5941de6085e9cbb1c4

another 2 patches are under review:
https://edk2.groups.io/g/devel/message/72131
https://edk2.groups.io/g/devel/message/72132

*** This bug has been marked as a duplicate of bug 3224 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15139</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-02-24 22:03:48 +0000</bug_when>
    <thetext>For IASL errors, could you check your IASL version if it is older than 20190816? if yes, please upgrade to 20190816 or newer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15144</commentid>
    <comment_count>4</comment_count>
    <who name="Michał Żygowski">michal.zygowski</who>
    <bug_when>2021-02-25 04:32:08 +0000</bug_when>
    <thetext>I got slightly older IASL, so that&apos;s probably the culprit. Thank you for the information.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3489</bug_id>
          
          <creation_ts>2021-07-13 11:07:01 +0000</creation_ts>
          <short_desc>Platform/SiFive: Build error of U540 and U500 caused by BdsDxe</short_desc>
          <delta_ts>2021-08-23 22:59:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Takuto Naito">naitaku</reporter>
          <assigned_to name="Takuto Naito">naitaku</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16613</commentid>
    <comment_count>0</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2021-07-13 11:07:01 +0000</bug_when>
    <thetext>U540 and U500 are not able to be build with the latest edk2 master branch with the following build error.

---
build.py...
542
/home/runner/work/edk2-platforms-build/edk2-platforms-build/edk2-platforms/Platform/SiFive/U5SeriesPkg/FreedomU500VC707Board/U500.dsc(...): error 4000: Instance of library class [VariablePolicyHelperLib] is not found
543
	in [/home/runner/work/edk2-platforms-build/edk2-platforms-build/edk2/MdeModulePkg/Universal/BdsDxe/BdsDxe.inf] [RISCV64]
544
	consumed by module [/home/runner/work/edk2-platforms-build/edk2-platforms-build/edk2/MdeModulePkg/Universal/BdsDxe/BdsDxe.inf]
---

Root cause:
The edk2 patch
 MdeModulePkg/BdsDxe: Update BdsEntry to use Variable Policy
 https://github.com/tianocore/edk2/commit/d9a7612f8d1da197883bd1cb9f91f229522d39b1
requires VariablePolicyHelperLib, but U500.dsc and U540.dsc
don&apos;t have it in the LibraryClasses section.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16614</commentid>
    <comment_count>1</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2021-07-13 11:26:54 +0000</bug_when>
    <thetext>Send patch
https://edk2.groups.io/g/devel/message/77747</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16619</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-13 21:36:23 +0000</bug_when>
    <thetext>The patch has been sent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17019</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-08-23 22:59:09 +0000</bug_when>
    <thetext>Fix at @ff31f8f6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3756</bug_id>
          
          <creation_ts>2021-12-01 17:04:44 +0000</creation_ts>
          <short_desc>VerifyPassword() allows one extra password attempt</short_desc>
          <delta_ts>2021-12-07 20:10:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>UserAuthFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nathaniel L DeSimone">nathaniel.l.desimone</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17887</commentid>
    <comment_count>0</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-12-01 17:04:44 +0000</bug_when>
    <thetext>This bug is found in UserAuthFeaturePkg/UserAuthenticationDxeSmm/UserAuthenticationSmm.c

If the password provided by the user is incorrect, then the VerifyPassword() function is supposed to return EFI_SECURITY_VIOLATION if the user has not exceeded the maximum number of password guesses (currently set to 3). If the number of password guesses has been exceeded, then VerifyPassword() shall return EFI_ACCESS_DENIED. UserAuthenticationDxe uses EFI_ACCESS_DENIED as the signal that the number of guesses has been exceeded for the purposes of triggering a forced reboot.

VerifyPassword() checks if the number of password guess attempts has exceeded the maximum allowed before checking if the current password guess is correct. If it has, then VerifyPassword() immediately returns EFI_ACCESS_DENIED. This behavior is correct since it is possible for VerifyPassword() to be called again after the maximum number of attempts has been exceeded. However, if the user guesses incorrectly, then VerifyPassword() will always return EFI_SECURITY_VIOLATION. This is where the bug is. It is possible that after the current attempt, the maximum allowed number of attempts is exceeded. Therefore, VerifyPassword() should check the number of attempts again, after checking if the password is correct.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17888</commentid>
    <comment_count>1</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-12-01 17:05:13 +0000</bug_when>
    <thetext>Confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17951</commentid>
    <comment_count>2</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-12-07 20:10:04 +0000</bug_when>
    <thetext>Committed: https://github.com/tianocore/edk2-platforms/commit/15d8aa1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3033</bug_id>
          
          <creation_ts>2020-10-31 17:05:55 +0000</creation_ts>
          <short_desc>MinPlatformPkg.dsc is missing several components</short_desc>
          <delta_ts>2021-07-08 18:56:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>zhangtianyang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14155</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-10-31 17:05:55 +0000</bug_when>
    <thetext>Following components need to be added to the DSC:

MinPlatformPkg/Acpi/MinDsdt/MinDsdt.inf
MinPlatformPkg/Bds/Library/BoardBootManagerLibNull/BoardBootManagerLibNull.inf
MinPlatformPkg/Library/CompressLib/CompressLib.inf
MinPlatformPkg/Library/SetCacheMtrrLib/SetCacheMtrrLib.inf
MinPlatformPkg/Library/SetCacheMtrrLib/SetCacheMtrrLibNull.inf
MinPlatformPkg/Pci/Library/PciSegmentInfoLibSimple/PciSegmentInfoLibSimple.inf
MinPlatformPkg/PlatformInit/Library/PeiReportFvLib/PeiReportFvLib.inf
MinPlatformPkg/PlatformInit/Library/ReportCpuHobLib/ReportCpuHobLib.inf
MinPlatformPkg/Tcg/Library/TpmPlatformHierarchyLib/TpmPlatformHierarchyLib.inf
MinPlatformPkg/Tcg/Tcg2PlatformDxe/Tcg2PlatformDxe.inf
MinPlatformPkg/Tcg/Tcg2PlatformPei/Tcg2PlatformPei.inf
MinPlatformPkg/Test/Library/TestPointCheckLib/SmmTestPointCheckLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14207</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-03 20:56:07 +0000</bug_when>
    <thetext>Liming takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14609</commentid>
    <comment_count>2</comment_count>
      <attachid>620</attachid>
    <who name="">zhangtianyang</who>
    <bug_when>2020-12-17 02:57:01 +0000</bug_when>
    <thetext>Created attachment 620
Patch of the MinPlatformPkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15410</commentid>
    <comment_count>3</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-03-23 13:31:30 +0000</bug_when>
    <thetext>Also needs:
MinPlatformPkg/Library/SerialPortTerminalLib/SerialPortTerminalLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16282</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-06-07 10:34:29 +0000</bug_when>
    <thetext>This is affecting a few changes I&apos;m making in MinPlatformPkg so I went ahead and sent a patch.

v1 patch: https://edk2.groups.io/g/devel/message/76133</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16393</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-06-17 19:37:16 +0000</bug_when>
    <thetext>Patch is still waiting for maintainers to acknowledge it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16593</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-07-08 18:56:37 +0000</bug_when>
    <thetext>Patch email for review

v1 patch: https://edk2.groups.io/g/devel/message/76133</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16594</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-07-08 18:56:59 +0000</bug_when>
    <thetext>Pushed

https://github.com/tianocore/edk2-platforms/commit/35c8ba10fe00db810f83730b23b1538daa75efa7</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>620</attachid>
            <date>2020-12-17 02:57:01 +0000</date>
            <delta_ts>2020-12-17 02:57:01 +0000</delta_ts>
            <desc>Patch of the MinPlatformPkg</desc>
            <filename>0001-MinPlatformPkg-MinPlatformPkg.dsc-Add-Missing-Compon.patch</filename>
            <type>text/plain</type>
            <size>3778</size>
            <attacher>zhangtianyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3428</bug_id>
          
          <creation_ts>2021-06-02 14:26:44 +0000</creation_ts>
          <short_desc>Code First -  RAS2 Error Record Local Address to System Physical Address Conversion</short_desc>
          <delta_ts>2021-10-13 21:47:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>anadrian</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>thanu.rangarajan</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16245</commentid>
    <comment_count>0</comment_count>
      <attachid>731</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-06-02 14:26:44 +0000</bug_when>
    <thetext>Created attachment 731
ACPI-6_4-ECR-RAS-F_Updates_0.95-3

Summary of Change

This ECR adds an ACPI method using the newly introduced RAS2  


Benefits of the Change

Need a way to expose a new standard mechanism to convert DRAM address to System Physical Address to enable OS first handling of DDR errors.


This may apply to other error nodes as well beyond DRAM.

Impact of Change
Platforms firmware will have to support the new RAS2 table. Operating systems require a driver to support RAS2. Both require new code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16308</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-08 21:45:15 +0000</bug_when>
    <thetext>Samer takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16385</commentid>
    <comment_count>2</comment_count>
    <who name="Andrew Adriance">anadrian</who>
    <bug_when>2021-06-16 09:52:23 +0000</bug_when>
    <thetext>As I understand the interface to this table, it would not work great in critical error scenarios.  SEA for Arm or MCE for x64.  I believe there are some existing x64 cases where something like this would be useful. Today I don&apos;t think there is a use case for SEA, but if there is in the future it would be good to consider it.

As a new ACPI table it&apos;d be great if it was useful for both x64 and Arm, and making sure this will cover all translation cases on Arm in the future so an additional translation scheme isn&apos;t needed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16485</commentid>
    <comment_count>3</comment_count>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2021-06-29 09:49:31 +0000</bug_when>
    <thetext>For synchronous external aborts (SEAs), it is a requirement to have the PA returned along with the error signal. However, the RAS2 table cannot be called from within an interrupt context. Hence, this API is not applicable to SEAs, and an architectural register would be the right solution. A similar argument can be made for the x86 Machine-check interrupts.


Instead, the RAS2 LA2PA API would be useful for asynchronous error events. On Arm systems, this might be in response to the error signal (ERI) generated by the memory controller when a memory location is poisoned on a write. Such a write might occur as a part of a) a cache line eviction that generates an error, or b) a DMA write when a PCIe EP detects error and writes poison to the memory location. Note that this use-case applies universally to all architectures (Arm, x86).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16563</commentid>
    <comment_count>4</comment_count>
    <who name="Andrew Adriance">anadrian</who>
    <bug_when>2021-07-06 17:05:17 +0000</bug_when>
    <thetext>Thank you Thanu, understood. I am okay with the table as described.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16947</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-17 12:01:02 +0000</bug_when>
    <thetext>This ECR was approved by UEFI Forum on 7/22 as new content to be included in future ACPI 6.next specification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17542</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-13 21:47:30 +0000</bug_when>
    <thetext>Linking the approved ASWG mantis for completeness : https://mantis.uefi.org/mantis/view.php?id=2239</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>731</attachid>
            <date>2021-06-02 14:26:44 +0000</date>
            <delta_ts>2021-06-02 14:26:44 +0000</delta_ts>
            <desc>ACPI-6_4-ECR-RAS-F_Updates_0.95-3</desc>
            <filename>ACPI-6_4-ECR-RAS-F_Updates_0.95-3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>69082</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3300</bug_id>
          
          <creation_ts>2021-04-06 13:53:46 +0000</creation_ts>
          <short_desc>Physical Address Bits in PiSmmCpuDxeSmm updated during SetStaticPageTable routine</short_desc>
          <delta_ts>2021-04-20 16:16:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1946</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15528</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-06 13:53:46 +0000</bug_when>
    <thetext>Current implementation of SetStaticPageTable routine in PiSmmCpuDxeSmm driver will check a global variable mPhysicalAddressBits, and eventually cap any value larger than 39 at 39: https://github.com/tianocore/edk2/blob/4ac02962017c77bf38b462f970c884c2dc7931cf/UefiCpuPkg/PiSmmCpuDxeSmm/X64/PageTbl.c#L254

However, this global variable is used in ConvertMemoryPageAttributes, which backs SmmSetMemoryAttributes and SmmClearMemoryAttributes. Thus for a processor that supports more than 39 bits width, trying to mark page table regions higher than 39-bit will always return EFI_UNSUPPROTED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15566</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-08 13:31:00 +0000</bug_when>
    <thetext>Adding Ray Ni to the CC list for comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15569</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-04-08 21:03:17 +0000</bug_when>
    <thetext>Kun, it seems a critical bug. Thanks for finding it.

Maybe we can let SetStaticPageTable() accept another parameter &quot;PhysicalAddressBits&quot; so it doesn&apos;t update the global one.

Will you propose a patch to fix it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15572</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-09 00:31:32 +0000</bug_when>
    <thetext>Hi Ray,

I was thinking about using local variable to replace the global variable after value assignment.

A sample change is pushed here: https://github.com/kuqin12/edk2/commit/724d55ca6423b0a46cdd4f0c59bcb68e82001e79.

Please let me know if you prefer to change the interface.

I can send the patch for review once we agreed on the fix. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15575</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-09 10:51:40 +0000</bug_when>
    <thetext>(In reply to kun.qin from comment #0)

&gt; Thus for a processor that supports more than 39 bits width, trying to
&gt; mark page table regions higher than 39-bit will always return
&gt; EFI_UNSUPPROTED.

What are the practical consequences of this? Access rights to pages
residing higher than 39 bits in the physical address space will not be
correctly configured (restricted etc) in the SMM page table entries?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15576</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-09 13:16:57 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #4)
&gt; (In reply to kun.qin from comment #0)
&gt; 
&gt; &gt; Thus for a processor that supports more than 39 bits width, trying to
&gt; &gt; mark page table regions higher than 39-bit will always return
&gt; &gt; EFI_UNSUPPROTED.
&gt; 
&gt; What are the practical consequences of this? Access rights to pages
&gt; residing higher than 39 bits in the physical address space will not be
&gt; correctly configured (restricted etc) in the SMM page table entries?

Your understanding is correct. Those pages residing higher than 39 bits will be marked as accessible all the time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15617</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-12 19:13:30 +0000</bug_when>
    <thetext>(In reply to Ray Ni from comment #2)
&gt; Kun, it seems a critical bug. Thanks for finding it.
&gt; 
&gt; Maybe we can let SetStaticPageTable() accept another parameter
&gt; &quot;PhysicalAddressBits&quot; so it doesn&apos;t update the global one.
&gt; 
&gt; Will you propose a patch to fix it?

Hi Ray,

Do you have any preference on the change I proposed below? I can change it before sending for review if you prefer making the SetStaticPageTable interface change.

(In reply to kun.qin from comment #3)
&gt; Hi Ray,
&gt; 
&gt; I was thinking about using local variable to replace the global variable
&gt; after value assignment.
&gt; 
&gt; A sample change is pushed here:
&gt; https://github.com/kuqin12/edk2/commit/
&gt; 724d55ca6423b0a46cdd4f0c59bcb68e82001e79.
&gt; 
&gt; Please let me know if you prefer to change the interface.
&gt; 
&gt; I can send the patch for review once we agreed on the fix. Thanks.

Thanks,
Kun</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15645</commentid>
    <comment_count>7</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-13 21:49:56 +0000</bug_when>
    <thetext>Kun is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15670</commentid>
    <comment_count>8</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-13 23:00:27 +0000</bug_when>
    <thetext>Patch sent for review: https://edk2.groups.io/g/devel/message/74078</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15677</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-14 05:07:34 +0000</bug_when>
    <thetext>This is a regression from the 5-level paging enablement (commit 4eee0cc7cc0db / bug 1946).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15678</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-14 05:21:23 +0000</bug_when>
    <thetext>(In reply to kun.qin from comment #8)
&gt; Patch sent for review: https://edk2.groups.io/g/devel/message/74078

Setting IN_PROGRESS status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15682</commentid>
    <comment_count>11</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-14 16:27:12 +0000</bug_when>
    <thetext>v2 patch sent with integrated feedback changes: https://edk2.groups.io/g/devel/message/74101</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15741</commentid>
    <comment_count>12</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-20 16:16:26 +0000</bug_when>
    <thetext>Merged as commit c3dcbce26f9520597fc3027a0702f368217d6ca6, via
&lt;https://github.com/tianocore/edk2/pull/1576&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3789</bug_id>
          
          <creation_ts>2021-12-27 04:29:51 +0000</creation_ts>
          <short_desc>Adopt FSP spec version 2.3 - Usage of ExtendedImageRevision</short_desc>
          <delta_ts>2022-01-14 16:24:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gua Guo">gua.guo</reporter>
          <assigned_to name="Gua Guo">gua.guo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>ted.kuo</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18052</commentid>
    <comment_count>0</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2021-12-27 04:29:51 +0000</bug_when>
    <thetext>Based on FSP 2.3, we need to change Revision on below.
  IntelSiliconPkg\Include\IndustryStandard\FirmwareVersionInfo.h

Changed the Revision size of Firmware Version Structure from
UINT8 to UINT16.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18078</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-04 21:43:13 +0000</bug_when>
    <thetext>Gua will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18147</commentid>
    <comment_count>2</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2022-01-14 16:24:30 +0000</bug_when>
    <thetext>Reject it we can use Fvi-&gt;ComponentName to meet our requirement. So the bugzilla can be rejected directly.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3179</bug_id>
          
          <creation_ts>2021-01-21 04:40:42 +0000</creation_ts>
          <short_desc>MP: InterlockedIncrement ((UINT32 *) &amp;CpuMpData-&gt;CpuCount) can be removed from ApWakeupFunction</short_desc>
          <delta_ts>2021-03-09 02:54:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14874</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-01-21 04:40:42 +0000</bug_when>
    <thetext>When BSP first time wakes all APs, each AP atomically increases CpuMpData-&gt;CpuCount and CpuMpData-&gt;FinishedCount.

Each AP atomically increases CpuMpData-&gt;NumApsExecuting in early assembly code and decreases it before it enters to HLT or MWAIT state.

Putting them together, the 3 variables are changed in the following order:
1. NumApsExecuting++ // in assembly
2. CpuCount++
3. NumApsExecuting-- // in C
4. FinishedCount++

BSP waits for a certain timeout and then polls NumApsExecuting until it drops to zero. It assumes all APs are waken up concurrently and NumApsExecuting only drops to zero when all APs have checked in.

Then it additionally waits for FinishedCount == CpuCount - 1. (FinishedCount doesn&apos;t include BSP while CpuCount includes BSP.)


Now since we have found another bug that may requires the variable modification in below order:
1. NumApsExecuting++ // in assembly
2. CpuCpunt++
4. FinishedCount++
3. NumApsExecuting-- // in C

Then waiting for NumApsExecuting == 0 is enough. There is no need to additionally wait for FinishedCount == CpuCount - 1.

This bugzilla is to record the request to remove the additional wait after first time waking up all APs in CollectProcessorCount().
  //
  // Wait for all APs finished the initialization
  //
  while (CpuMpData-&gt;FinishedCount &lt; (CpuMpData-&gt;CpuCount - 1)) {
    CpuPause ();
  }

And we could further simplify the code to remove &quot;CpuCount++&quot; in ApWakeupFunction(). We could simply assign FinishedCount + 1 to CpuCount after the first time waking up all APs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14875</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-01-21 04:43:03 +0000</bug_when>
    <thetext>There are lots of semaphore objects in MpInitLib. This belongs to an effort to carefully review those semaphores and simplify the usage of them.
More semaphores tend to make MP code safer. But the fact is it makes the code more complex that easily hides MP bugs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14876</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-01-21 04:43:33 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14976</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-02 22:05:24 +0000</bug_when>
    <thetext>Ray takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15245</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-03-09 02:54:33 +0000</bug_when>
    <thetext>Fixed in 197eb776ad70a51eb7c4cfd790ad46c079b28ade.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3333</bug_id>
          
          <creation_ts>2021-04-12 22:41:24 +0000</creation_ts>
          <short_desc>using sizeof twice</short_desc>
          <delta_ts>2021-04-16 04:42:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wenyi, Xie">xiewenyi0201</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15622</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-04-12 22:41:24 +0000</bug_when>
    <thetext>In function InstallPreHashFvPpi, when calculate the size of struct HASH_INFO，sizeof is used twice，is it an error or there&apos;s any special reason.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15626</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-13 06:51:48 +0000</bug_when>
    <thetext>I think so, yes -- IMO it is a bug:

  PpiSize = sizeof (EDKII_PEI_FIRMWARE_VOLUME_INFO_PREHASHED_FV_PPI)
            + sizeof (sizeof (HASH_INFO))
            + HashSize;

  PreHashedFvPpi = AllocatePool (PpiSize);

In practice, it is harmless. &quot;PpiSize&quot; is only used for the allocation, and

  sizeof (sizeof (HASH_INFO))

is actually never smaller than the correct

  sizeof (HASH_INFO)

That&apos;s because HASH_INFO is:

  typedef struct _HASH_INFO {
    UINT16                                     HashAlgoId;
    UINT16                                     HashSize;
    //UINT8                                    Hash[];
  } HASH_INFO;

so it has size 4. Furthermore, the sizeof operator returns type UINTN, therefore

  sizeof (sizeof (HASH_INFO)) == sizeof (UINTN)

which is 4 in 32-bit builds, and 8 in 64-bit builds.

Meaning that the bogus expression happens to allocate the right amount of memory in 32-bit builds, and slightly over-allocates in 64-bit builds. There is no buffer overflow.

Regarding the intent, see EDKII_PEI_FIRMWARE_VOLUME_INFO_PREHASHED_FV_PPI:

  typedef struct {
    UINT32                                     FvBase;
    UINT32                                     FvLength;
    UINT32                                     Count;
    //HASH_INFO                                HashInfo[];
  } EDKII_PEI_FIRMWARE_VOLUME_INFO_PREHASHED_FV_PPI;

So clearly we want to allocate sizeof (HASH_INFO) bytes after EDKII_PEI_FIRMWARE_VOLUME_INFO_PREHASHED_FV_PPI.

Can you submit a patch? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15628</commentid>
    <comment_count>2</comment_count>
      <attachid>694</attachid>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-04-13 08:47:20 +0000</bug_when>
    <thetext>Created attachment 694
v1

Patch attached.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15629</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-13 09:22:26 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH EDK2 v1 0/1] SecurityPkg/FvReportPei: remove redundant sizeof</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15712</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2021-04-16 04:42:34 +0000</bug_when>
    <thetext>Reviewed @ https://edk2.groups.io/g/devel/message/74044
           https://edk2.groups.io/g/devel/message/74074
           https://edk2.groups.io/g/devel/message/74077
Pushed @ 99e7e48cc7117c37fc1c08a741872d0875595796</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>694</attachid>
            <date>2021-04-13 08:47:20 +0000</date>
            <delta_ts>2021-04-13 08:47:20 +0000</delta_ts>
            <desc>v1</desc>
            <filename>0001-SecurityPkg-FvReportPei-remove-redundant-sizeof.patch</filename>
            <type>text/plain</type>
            <size>1313</size>
            <attacher name="Wenyi, Xie">xiewenyi0201</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3813</bug_id>
          
          <creation_ts>2022-01-25 22:06:29 +0000</creation_ts>
          <short_desc>Unicode string of the AKM/Cipher in Wi-Fi Network List is not correct</short_desc>
          <delta_ts>2022-05-10 23:14:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18201</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-01-25 22:06:29 +0000</bug_when>
    <thetext>Configurate Wi-Fi router&apos;s Authentication Method to &quot;WPA2/WPA3-Persional&quot;, select the router in Wi-Fi Network List of WifiConnectionManagerDxe, check the info of AKMsuite/CipherSuite:
Expected Behavior: the info should be &quot;AKMSuite: 2 8 CipherSuite: 4&quot;
Actual Behavior: the info is &quot;AKMSuite: 2 CipherSuite: 4&quot;, AKMSuite 8 is missing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18202</commentid>
    <comment_count>1</comment_count>
      <attachid>919</attachid>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-01-25 22:12:06 +0000</bug_when>
    <thetext>Created attachment 919
Incorrect AKM Suite info</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18203</commentid>
    <comment_count>2</comment_count>
      <attachid>920</attachid>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-01-25 22:13:36 +0000</bug_when>
    <thetext>Created attachment 920
Correct AKM suite Info</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18204</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-01-25 22:26:47 +0000</bug_when>
    <thetext>Analysis:
The Unicode string is built at WifiMgrGetStrAKMList()/WifiMgrGetStrCipherList()In Edk2\NetworkPkg\WifiConnectionManagerDxe\WifiConnectionMgrHiiConfigAccess.c.
they use UnicodeSPrint() to generate string for each AKM/Cipher suite and concatenate then together. we expect the Unicode String is [&apos;2&apos;,&apos; &apos;,&apos;8&apos;,&apos;\0&apos;], but in original code, the buf size is 2, the space char will be replaced by &apos;\0&apos; because buf is not enough, so actually the Unicode String  is [&apos;2&apos;,&apos;\0&apos;,&apos;8&apos;,&apos;\0&apos;],  only &quot;AKMSuite: 2&quot; is shown in screen.
Change the buf size to 3 can fix this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18205</commentid>
    <comment_count>4</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-01-26 00:16:31 +0000</bug_when>
    <thetext>sent code review
https://edk2.groups.io/g/devel/message/86076</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18947</commentid>
    <comment_count>5</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-05-10 23:14:08 +0000</bug_when>
    <thetext>fixed by
https://github.com/tianocore/edk2/commit/b24306f15daa2ff8510b06702114724b33895d3c</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>919</attachid>
            <date>2022-01-25 22:12:06 +0000</date>
            <delta_ts>2022-01-25 22:12:06 +0000</delta_ts>
            <desc>Incorrect AKM Suite info</desc>
            <filename>Incorrect_AKMSuite.png</filename>
            <type>image/png</type>
            <size>4263</size>
            <attacher name="Heng Luo">heng.luo</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>920</attachid>
            <date>2022-01-25 22:13:36 +0000</date>
            <delta_ts>2022-01-25 22:13:36 +0000</delta_ts>
            <desc>Correct AKM suite Info</desc>
            <filename>Correct_AKMSuite.png</filename>
            <type>image/png</type>
            <size>4536</size>
            <attacher name="Heng Luo">heng.luo</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3110</bug_id>
          
          <creation_ts>2020-12-08 01:05:07 +0000</creation_ts>
          <short_desc>ShadowMicrocodePei: Return status is incorrect when no valid microcode is found</short_desc>
          <delta_ts>2020-12-13 22:51:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Aaron Li">aaron.li</reporter>
          <assigned_to name="Aaron Li">aaron.li</assigned_to>
          <cc>aaron.li</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14494</commentid>
    <comment_count>0</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-12-08 01:05:07 +0000</bug_when>
    <thetext>Edk2Platforms\Silicon\Intel\IntelSiliconPkg\Feature\ShadowMicrocode\ShadowMicrocodePei.c (463)
If the PatchCount equals to 0, the return status should be EFI_NOT_FOUND, however the current return status is EFI_SUCCESS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14495</commentid>
    <comment_count>1</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-12-08 01:05:36 +0000</bug_when>
    <thetext>take owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14508</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 20:28:46 +0000</bug_when>
    <thetext>Aaron takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14572</commentid>
    <comment_count>3</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-12-13 22:51:38 +0000</bug_when>
    <thetext>fixed at
https://github.com/tianocore/edk2-platforms/commit/4454010909e9cd03cbcd430704468dd54dcdf179</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3250</bug_id>
          
          <creation_ts>2021-03-08 23:46:20 +0000</creation_ts>
          <short_desc>Resolve dependencies of VariableSmmRuntimeDxe</short_desc>
          <delta_ts>2021-04-06 05:28:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>naitaku</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15243</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-08 23:46:20 +0000</bug_when>
    <thetext>EDK2 master commit f463dbadede138dc96a66dae6f361c54f0b3093c introduced new library dependency of MmUnblockMemoryLib. This ticket is to track the progress of resolving it in edk2-platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15256</commentid>
    <comment_count>1</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2021-03-09 18:57:15 +0000</bug_when>
    <thetext>Build errors are caused by this issue with the Intel platforms in edk2-platforms.
You can see the build logs at here.
https://github.com/naitaku/edk2-platforms-build/actions/runs/634110908</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15257</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-09 19:17:35 +0000</bug_when>
    <thetext>Hi Takuto,

I created this branch and about to send out patches for review https://github.com/kuqin12/edk2-platforms/commits/unblock_dependency_v1.

By any chance your server build can test the personal branch? I tested locally, but would want to know if I missed any platforms in this repo.

Thanks,
Kun</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15258</commentid>
    <comment_count>3</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2021-03-09 20:54:43 +0000</bug_when>
    <thetext>Hi Kun,

I tested your local branch and succeeded to build.
https://github.com/naitaku/edk2-platforms-build/actions/runs/637611905

My repository checks only Intel platforms using MinPlatform so far.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15275</commentid>
    <comment_count>4</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-10 15:16:08 +0000</bug_when>
    <thetext>Thanks for testing, Takuto. I sent my patches for review today. But it might take a bit for the mailing list to pick it up since I had to change my account in edk2-devel group.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15338</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-16 21:53:47 +0000</bug_when>
    <thetext>Kun is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15385</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-19 13:07:14 +0000</bug_when>
    <thetext>Resolved dependency issue in MinPlatformPkg, QuarkPlatformPkg and DeveloperBox with commits: af6205597c0c5d5f386efb4c3d11ad5d97604c31, 2e9eb888aa4fd7aaf05829e561de1ea98bf6dc09 - aa3f6fd542e99dde4206537b095f1a2201275e75.

Resolution in Vlv2TbltDevicePkg (patch sent here: https://edk2.groups.io/g/devel/message/72931) is pending review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15519</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-05 22:12:30 +0000</bug_when>
    <thetext>Vlv2TbltDevicePkg review completed and patch committed:

https://github.com/tianocore/edk2-platforms/commit/bc8a8b16bd4bb12c0515bff4eeeed8f6afcaa972</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15523</commentid>
    <comment_count>8</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-06 05:28:22 +0000</bug_when>
    <thetext>All changes related to this issue are merged into edk2 platform mainline. Close this ticket.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3066</bug_id>
          
          <creation_ts>2020-11-09 18:08:27 +0000</creation_ts>
          <short_desc>BaseTools: SetupGit.py: edk2-test missing in UPSTREAMS</short_desc>
          <delta_ts>2021-10-15 03:15:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>xypron.glpk</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14282</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-09 18:08:27 +0000</bug_when>
    <thetext>BaseTools/Scripts/SetupGit.py is used to initialize the git repositories to ease the submission of patches.

Variable UPSTREAMS defines the known upstream repositories. edk2-test is missing.

diff --git a/BaseTools/Scripts/SetupGit.py b/BaseTools/Scripts/SetupGit.py
index 4416111ac0a5..91814199bfb9 100644
--- a/BaseTools/Scripts/SetupGit.py
+++ b/BaseTools/Scripts/SetupGit.py
@@ -46,7 +46,10 @@ UPSTREAMS = [
      &apos;list&apos;: &apos;devel@edk2.groups.io&apos;, &apos;prefix&apos;: &apos;edk2-platforms&apos;},
     {&apos;name&apos;: &apos;edk2-non-osi&apos;,
      &apos;repo&apos;: &apos;https://github.com/tianocore/edk2-non-osi.git&apos;,
-     &apos;list&apos;: &apos;devel@edk2.groups.io&apos;, &apos;prefix&apos;: &apos;edk2-non-osi&apos;}
+     &apos;list&apos;: &apos;devel@edk2.groups.io&apos;, &apos;prefix&apos;: &apos;edk2-non-osi&apos;},
+    {&apos;name&apos;: &apos;edk2-test&apos;,
+     &apos;repo&apos;: &apos;https://github.com/tianocore/edk2-test.git&apos;,
+     &apos;list&apos;: &apos;devel@edk2.groups.io&apos;, &apos;prefix&apos;: &apos;edk2-test&apos;}
     ]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14283</commentid>
    <comment_count>1</comment_count>
      <attachid>595</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-09 18:21:09 +0000</bug_when>
    <thetext>Created attachment 595
[PATCH] BaseTools: add edk2-test repo to SetupGit.py

Patch posted as 
https://edk2.groups.io/g/devel/topic/patch_1_1_basetools_add/78148735
and appended to this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14312</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-10 20:39:17 +0000</bug_when>
    <thetext>Heinrich has sent the patch in edk2 mail list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14550</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-10 03:45:15 +0000</bug_when>
    <thetext>The appended patch was

Reviewed-by: Yuwei Chen&lt;yuwei.chen@intel.com&gt;
https://edk2.groups.io/g/devel/message/67596

Please, consider for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14551</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-10 03:46:34 +0000</bug_when>
    <thetext>Mark as in progress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14669</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-26 10:09:33 +0000</bug_when>
    <thetext>Is anything missing to see this reviewed patch being merged?

Best regards

Heirnich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17562</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-10-15 03:15:40 +0000</bug_when>
    <thetext>Patch merged as

commit f2400e06db36619e15f3485fe25021cf06d96995
BaseTools: add edk2-test repo to SetupGit.py</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>595</attachid>
            <date>2020-11-09 18:21:09 +0000</date>
            <delta_ts>2020-11-09 18:21:09 +0000</delta_ts>
            <desc>[PATCH] BaseTools: add edk2-test repo to SetupGit.py</desc>
            <filename>0001-BaseTools-add-edk2-test-repo-to-SetupGit.py.patch</filename>
            <type>text/plain</type>
            <size>1312</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3251</bug_id>
          
          <creation_ts>2021-03-08 23:48:48 +0000</creation_ts>
          <short_desc>Added Tcg2Acpi driver to EDK2-Platform</short_desc>
          <delta_ts>2021-03-19 13:02:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15244</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-08 23:48:48 +0000</bug_when>
    <thetext>Commit 3c2dc30d1bc45eeef68d7d0e056a4b3928015ec0 of EDK2 master separate Tcg2Smm into 2 drivers, Tcg2Acpi and Tcg2Smm. This ticket is to track progress of resolving this for edk2-platform repo in applicable packages.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15341</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-16 21:56:46 +0000</bug_when>
    <thetext>Kun is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15384</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-19 13:02:16 +0000</bug_when>
    <thetext>Resolved with patch a9d1d06f4d874432f8414226ea99cb9b2241e7f2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3642</bug_id>
          
          <creation_ts>2021-09-21 02:18:16 +0000</creation_ts>
          <short_desc>IntelFsp2WrapperPkg : FSPM/S UPD data address based on Build Type</short_desc>
          <delta_ts>2021-12-22 03:56:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashraf Ali S">ashraf.ali.s</reporter>
          <assigned_to name="Ashraf Ali S">ashraf.ali.s</assigned_to>
          <cc>ashraf.ali.s</cc>
    
    <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2WrapperPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17316</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-09-21 02:18:16 +0000</bug_when>
    <thetext>PcdFspmUpdDataAddress &amp; PcdFspsUpdDataAddress always 32bit value,
when the module is not building in IA32 mode which will lead to
building error. when a module built-in X64 function pointer will be the
size of 64bit width which cannot be fit in 32bit address which will lead to error. to overcome this issue introducing the 2 new PCD&apos;s
for the 64bit modules can consume it.
Creating the API&apos;s to support different architecture</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17317</commentid>
    <comment_count>1</comment_count>
      <attachid>831</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-09-21 02:29:00 +0000</bug_when>
    <thetext>Created attachment 831
[PATCH] IntelFsp2WrapperPkg : FSPM/S UPD data address based on Build Type</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17333</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-21 21:42:49 +0000</bug_when>
    <thetext>Please send the patch to edk2 mail list for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18026</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-12-19 22:47:14 +0000</bug_when>
    <thetext>Patch pushed:
https://github.com/tianocore/edk2/commit/de9e5b7dc721d4ca319c0455cf83577347e0abef</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18043</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-12-22 03:56:40 +0000</bug_when>
    <thetext>pushed a small fix to remove EFIAPI from local functions:
https://github.com/tianocore/edk2/commit/9ec2cc1f3138ef9314314df29fc6ce0aa5e120b9</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>831</attachid>
            <date>2021-09-21 02:29:00 +0000</date>
            <delta_ts>2021-09-21 02:29:00 +0000</delta_ts>
            <desc>[PATCH] IntelFsp2WrapperPkg : FSPM/S UPD data address based on Build Type</desc>
            <filename>0001-IntelFsp2WrapperPkg-FSPM-S-UPD-data-address-based-on.patch</filename>
            <type>text/plain</type>
            <size>11674</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3067</bug_id>
          
          <creation_ts>2020-11-10 03:20:43 +0000</creation_ts>
          <short_desc>Add iommu 5 level paging support for IntelVTdDxe driver</short_desc>
          <delta_ts>2021-12-05 22:30:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14292</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-11-10 03:20:43 +0000</bug_when>
    <thetext>As the latest iommu spec, need to add iommu 5 level paging support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14311</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-10 20:37:55 +0000</bug_when>
    <thetext>Sheng will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17928</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-12-05 22:30:35 +0000</bug_when>
    <thetext>patch is merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17929</commentid>
    <comment_count>3</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-12-05 22:30:59 +0000</bug_when>
    <thetext>patch is merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3335</bug_id>
          
          <creation_ts>2021-04-13 12:43:00 +0000</creation_ts>
          <short_desc>Correct example in _DMA method definition</short_desc>
          <delta_ts>2021-10-13 21:40:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>andrey.warkentin</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jeremy.linton</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15630</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-13 12:43:00 +0000</bug_when>
    <thetext>REF: https://edk2.groups.io/g/devel/topic/81935645#73858

This ECR is to correct the example in _DMA (ACPI 6.4, section 6.2.4), which is using the wrong resource type definition. See attached document for the ECR, and the EDK2 mailing list thread for the code patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15631</commentid>
    <comment_count>1</comment_count>
      <attachid>695</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-13 12:44:00 +0000</bug_when>
    <thetext>Created attachment 695
ECR - Correct _DMA Resource type example</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15644</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-13 21:49:03 +0000</bug_when>
    <thetext>Samer is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15713</commentid>
    <comment_count>3</comment_count>
    <who name="">jeremy.linton</who>
    <bug_when>2021-04-16 10:39:39 +0000</bug_when>
    <thetext>This ECR looks to make the example conform to the text, which matches my understanding of buses producing the resource for their children. Further, the example now matches Linux&apos;s understanding of the Producer/Consumer usage.

https://elixir.bootlin.com/linux/v5.12-rc7/source/drivers/acpi/resource.c#L225

Thanks,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15740</commentid>
    <comment_count>4</comment_count>
    <who name="Andrei Warkentin">andrey.warkentin</who>
    <bug_when>2021-04-20 14:34:22 +0000</bug_when>
    <thetext>Looks good to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15853</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-30 13:47:32 +0000</bug_when>
    <thetext>This ECR has been approved by UEFI Forum ASWG as an errata for ACPI 6.4 specification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16001</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-11 17:30:49 +0000</bug_when>
    <thetext>Approved as errata for ACPI 6.next.

Code complete in https://github.com/tianocore/edk2-platforms/commit/67988fb53dbc510a507b202cb6b141426b9dc945</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17540</commentid>
    <comment_count>7</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-13 21:40:45 +0000</bug_when>
    <thetext>Linking the ASWG ECR in mantis for completeness: https://mantis.uefi.org/mantis/view.php?id=2223</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>695</attachid>
            <date>2021-04-13 12:44:00 +0000</date>
            <delta_ts>2021-04-13 12:44:00 +0000</delta_ts>
            <desc>ECR - Correct _DMA Resource type example</desc>
            <filename>CodeFirst_DMA_Example_Correct_ver1.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>21649</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3476</bug_id>
          
          <creation_ts>2021-07-04 07:01:00 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: PatchFv parseInfFile function modification</short_desc>
          <delta_ts>2021-07-08 02:51:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashraf Ali S">ashraf.ali.s</reporter>
          <assigned_to name="Ashraf Ali S">ashraf.ali.s</assigned_to>
          <cc>ashraf.ali.s</cc>
    
    <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16528</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-04 07:01:00 +0000</bug_when>
    <thetext>parseInfFile currently reading the EFI_BASE_ADDRESS from INF, once the
address found still it&apos;s continues to read the complete inf file which
is not required. once the EFI_BASE_ADDRESS read from the INF no need to
read the INF further.
MSFT compiler can generate the map file address 8 or 16 based on which
architecture the INF is compiler. currently it&apos;s support for IA32,
it can be update the X64 in future. 
modification of few typo errors in parseModMapFile, getCurr function
required</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16529</commentid>
    <comment_count>1</comment_count>
      <attachid>752</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-04 07:18:41 +0000</bug_when>
    <thetext>Created attachment 752
PatchFv parseInfFile function modification</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16530</commentid>
    <comment_count>2</comment_count>
      <attachid>753</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-04 07:24:24 +0000</bug_when>
    <thetext>Created attachment 753
PatchFv parseInfFile function modification updated</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16534</commentid>
    <comment_count>3</comment_count>
      <attachid>754</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-05 04:16:20 +0000</bug_when>
    <thetext>Created attachment 754
IntelFsp2Pkg: PatchFv parseInfFile function modification

ModuleEntryPoint fix has been added, MAP file will be different for IA32,X64 in Microsoft compiler</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16538</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-05 05:06:13 +0000</bug_when>
    <thetext>Ashraf is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16562</commentid>
    <comment_count>5</comment_count>
      <attachid>756</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-06 14:44:26 +0000</bug_when>
    <thetext>Created attachment 756
[Patch V3] IntelFsp2Pkg: PatchFv parseInfFile function modification

Verified with this Patch and it found to be working as expected for MSFT X64 bit Compiler also.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16588</commentid>
    <comment_count>6</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-07-08 02:51:45 +0000</bug_when>
    <thetext>Patch pushed:
commit b560e9d9b67450d3baea56d0e211066722643c57
Author: S, Ashraf Ali &lt;ashraf.ali.s@intel.com&gt;
Date:   Wed Jul 7 02:42:04 2021 +0800

    IntelFsp2Pkg: PatchFv parseInfFile function modification

    REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3476

    parseInfFile currently reading the EFI_BASE_ADDRESS from INF, once the
    address found still it&apos;s continues to read the complete inf file which
    is not required. once the EFI_BASE_ADDRESS read from the INF no need to
    read the INF further.
    MSFT compiler can generate the map file address 8 or 16 based on which
    architecture the INF is compiler. currently it&apos;s support for IA32,
    modified the patchfv to support for all.
    modification of few typo errors in parseModMapFile, getCurr function
    required

    verification : Working Fine

    Signed-off-by: Ashraf Ali S &lt;ashraf.ali.s@intel.com&gt;
    Cc: Ray Ni &lt;ray.ni@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>752</attachid>
            <date>2021-07-04 07:18:41 +0000</date>
            <delta_ts>2021-07-04 07:24:24 +0000</delta_ts>
            <desc>PatchFv parseInfFile function modification</desc>
            <filename>0001-IntelFsp2Pkg-PatchFv-parseInfFile-function-modificat.patch</filename>
            <type>text/plain</type>
            <size>3705</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>753</attachid>
            <date>2021-07-04 07:24:24 +0000</date>
            <delta_ts>2021-07-05 04:16:20 +0000</delta_ts>
            <desc>PatchFv parseInfFile function modification updated</desc>
            <filename>0001-IntelFsp2Pkg-PatchFv-parseInfFile-function-modificat.patch</filename>
            <type>text/plain</type>
            <size>3704</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>754</attachid>
            <date>2021-07-05 04:16:20 +0000</date>
            <delta_ts>2021-07-06 14:44:26 +0000</delta_ts>
            <desc>IntelFsp2Pkg: PatchFv parseInfFile function modification</desc>
            <filename>v2-0001-IntelFsp2Pkg-PatchFv-parseInfFile-function-modifi.patch</filename>
            <type>text/plain</type>
            <size>3720</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>756</attachid>
            <date>2021-07-06 14:44:26 +0000</date>
            <delta_ts>2021-07-06 14:44:26 +0000</delta_ts>
            <desc>[Patch V3] IntelFsp2Pkg: PatchFv parseInfFile function modification</desc>
            <filename>0001-IntelFsp2Pkg-PatchFv-parseInfFile-function-modificat.patch</filename>
            <type>text/plain</type>
            <size>3842</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3229</bug_id>
          
          <creation_ts>2021-02-22 05:10:50 +0000</creation_ts>
          <short_desc>The SMRAM save state map is for Intel only.</short_desc>
          <delta_ts>2022-06-02 03:31:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>edisonlee</reporter>
          <assigned_to>edisonlee</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jameswang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15087</commentid>
    <comment_count>0</comment_count>
      <attachid>652</attachid>
    <who name="">edisonlee</who>
    <bug_when>2021-02-22 05:10:50 +0000</bug_when>
    <thetext>Created attachment 652
Change the SMRAM save state map for AMD system.

It needs to overwrite/modify the MdePkg\Include\Register\Intel\SmramSaveStateMap.h in AMD system.

Could you make a change that it can support the different SMRAM save state map when using AMD system?

I attached the file which is modified for AMD system.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15119</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-23 21:44:41 +0000</bug_when>
    <thetext>Edisonlee: there is another directory MdePkg\Include\Register\Amd for AMD. can you check it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15125</commentid>
    <comment_count>2</comment_count>
    <who name="">edisonlee</who>
    <bug_when>2021-02-23 22:05:33 +0000</bug_when>
    <thetext>There is no &quot;SmramSaveStateMap.h&quot; in the directory &quot;MdePkg\Include\Register\Amd\&quot;.

And even the SmramSaveStateMap.h is added in the directory &quot;MdePkg\Include\Register\Amd\&quot;, it will raise another issue.


The &quot;UefiCpuPkg\PiSmmCpuDxeSmm\SmramSaveState.c&quot; includes the &quot;#include &lt;Library/SmmCpuFeaturesLib.h&gt;&quot;.

And the &quot;UefiCpuPkg\Include\Library\SmmCpuFeaturesLib.h&quot; includes the &quot;#include &lt;Register/Intel/SmramSaveStateMap.h&gt;&quot;.

It directly uses the &quot;SmramSaveStateMap.h&quot; in the directory &lt;Register/Intel/SmramSaveStateMap.h&gt;&quot;.


Thanks,
Edison</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19016</commentid>
    <comment_count>3</comment_count>
    <who name="">edisonlee</who>
    <bug_when>2022-06-02 03:31:22 +0000</bug_when>
    <thetext>Using library override for AMD system.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>652</attachid>
            <date>2021-02-22 05:10:50 +0000</date>
            <delta_ts>2021-02-22 05:10:50 +0000</delta_ts>
            <desc>Change the SMRAM save state map for AMD system.</desc>
            <filename>SmramSaveStateMap.h</filename>
            <type>text/plain</type>
            <size>15238</size>
            <attacher>edisonlee</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3381</bug_id>
          
          <creation_ts>2021-05-07 07:03:10 +0000</creation_ts>
          <short_desc>StandaloneMm support for 32bit Arm machines</short_desc>
          <delta_ts>2021-08-12 21:42:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Etienne Carrière">etienne.carriere</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15949</commentid>
    <comment_count>0</comment_count>
    <who name="Etienne Carrière">etienne.carriere</who>
    <bug_when>2021-05-07 07:03:10 +0000</bug_when>
    <thetext>This issue aims at bringing Arm 32bit support for the Standalone package and more precisely building platform PlatformStandaloneMmRpmb for 32bit Arm architecture.

This requires changes in the platform and few related platform drivers (issue to create in EDK2 platforms) and changes in few packages of EDK2 to add 32bit Arm. The main parts of the changes move AArch64/* files to paths suitable for both 32bit and 64bit Arm machines.

One can find the changes proposed in EDK2 in the ML:
https://edk2.groups.io/g/devel/message/74734 cover letter
https://edk2.groups.io/g/devel/message/74735 ArmPkg
https://edk2.groups.io/g/devel/message/74736 ArmPkg
https://edk2.groups.io/g/devel/message/74737 GenGv
https://edk2.groups.io/g/devel/message/74738 StandaloneMmPkg
https://edk2.groups.io/g/devel/message/74739 StandaloneMmPkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15964</commentid>
    <comment_count>1</comment_count>
    <who name="Etienne Carrière">etienne.carriere</who>
    <bug_when>2021-05-10 03:56:25 +0000</bug_when>
    <thetext>The EDK2 Platforms changes are tracked from ticket 3383 [1].

https://bugzilla.tianocore.org/show_bug.cgi?id=3383</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16015</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-11 21:44:35 +0000</bug_when>
    <thetext>The patch have been sent for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16492</commentid>
    <comment_count>3</comment_count>
    <who name="Etienne Carrière">etienne.carriere</who>
    <bug_when>2021-06-30 05:21:28 +0000</bug_when>
    <thetext>Hello,

This ticket is addressed by patches v4, at:
https://edk2.groups.io/g/devel/message/75353
https://edk2.groups.io/g/devel/message/75354
https://edk2.groups.io/g/devel/message/75355
https://edk2.groups.io/g/devel/message/75356
https://edk2.groups.io/g/devel/message/75357

As far as I can tell, the patches have been successfully reviewed. Are there missing pieces or do you know when the changes will be merged?

Regards
Etienne</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16882</commentid>
    <comment_count>4</comment_count>
    <who name="Etienne Carrière">etienne.carriere</who>
    <bug_when>2021-08-11 08:25:30 +0000</bug_when>
    <thetext>6 patches serie (v5) sent to the ML (list below) and merged.

https://edk2.groups.io/g/devel/message/78967?p=,,,20,0,0,0::Created,,posterid%3A5949688,20,2,0,84770793
https://edk2.groups.io/g/devel/message/78968?p=,,,20,0,0,0::Created,,posterid%3A5949688,20,2,0,84770794
https://edk2.groups.io/g/devel/message/78969?p=,,,20,0,0,0::Created,,posterid%3A5949688,20,2,0,84770796
https://edk2.groups.io/g/devel/message/78970?p=,,,20,0,0,0::Created,,posterid%3A5949688,20,2,0,84770797
https://edk2.groups.io/g/devel/message/78971?p=,,,20,0,0,0::Created,,posterid%3A5949688,20,2,0,84770799

Can close the bugz entry.
The next step for me is https://bugzilla.tianocore.org/show_bug.cgi?id=3383.

Many thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16896</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-12 21:42:30 +0000</bug_when>
    <thetext>Close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3019</bug_id>
          
          <creation_ts>2020-10-25 22:45:36 +0000</creation_ts>
          <short_desc>Spelling issue of CHUNKED_TRNASFER_* macros in Http11.h</short_desc>
          <delta_ts>2020-11-08 20:38:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>maciej.rabeda</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14078</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-10-25 22:45:36 +0000</bug_when>
    <thetext>Wrong spelling of CHUNKED_TRNASFER_* macros in http11.h. Correct it to CHUNKED_TRANSFER_*.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14122</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:56:26 +0000</bug_when>
    <thetext>Abner has sent the patch for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14134</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 23:11:14 +0000</bug_when>
    <thetext>Pull request https://github.com/tianocore/edk2/pull/1053</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14274</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-11-08 20:38:19 +0000</bug_when>
    <thetext>Fix at 3b87d728</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3163</bug_id>
          
          <creation_ts>2021-01-11 00:56:58 +0000</creation_ts>
          <short_desc>Edk2 port of open source JSON library (jansson)</short_desc>
          <delta_ts>2021-01-11 01:09:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14777</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-11 00:56:58 +0000</bug_when>
    <thetext>This is the edk2 library of open source project jansson to manipulate JSON object.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14778</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-11 00:59:24 +0000</bug_when>
    <thetext>Fixed at commit ID 805b8b88- acabf1b0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14779</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-11 01:09:49 +0000</bug_when>
    <thetext>This is a feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3044</bug_id>
          
          <creation_ts>2020-11-02 22:36:08 +0000</creation_ts>
          <short_desc>FMMT replace file failure when files in FV level over 2</short_desc>
          <delta_ts>2021-03-22 23:30:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Greg">gregx.yeh</reporter>
          <assigned_to name="Greg">gregx.yeh</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14180</commentid>
    <comment_count>0</comment_count>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2020-11-02 22:36:08 +0000</bug_when>
    <thetext>Replace file failure when FFS in multi level FV and FFS in the deeper FV</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14199</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-03 20:44:41 +0000</bug_when>
    <thetext>Greg will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15259</commentid>
    <comment_count>2</comment_count>
      <attachid>669</attachid>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2021-03-09 21:30:07 +0000</bug_when>
    <thetext>Created attachment 669
patch file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15400</commentid>
    <comment_count>3</comment_count>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2021-03-22 23:30:09 +0000</bug_when>
    <thetext>Code changed has been committed 4bfc77a87b820cd585ba10ca28aa957ae315c3dc.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>669</attachid>
            <date>2021-03-09 21:30:07 +0000</date>
            <delta_ts>2021-03-09 21:30:07 +0000</delta_ts>
            <desc>patch file</desc>
            <filename>0001-edk2-staging-BaseTools-FMMT-Replace-file-failure-whe.patch</filename>
            <type>text/plain</type>
            <size>7684</size>
            <attacher name="Greg">gregx.yeh</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3432</bug_id>
          
          <creation_ts>2021-06-03 17:56:41 +0000</creation_ts>
          <short_desc>BaseTools toolsetup.bat incorrectly checks for Split.exe to be build in C</short_desc>
          <delta_ts>2021-07-11 22:58:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kenneth Lautner">klautner</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16259</commentid>
    <comment_count>0</comment_count>
    <who name="Kenneth Lautner">klautner</who>
    <bug_when>2021-06-03 17:56:41 +0000</bug_when>
    <thetext>Split.exe has been converted to being built in Python from C but toolsetup.bat still checks if it was build in C and throws an error if it&apos;s missing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16305</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-08 21:42:46 +0000</bug_when>
    <thetext>Bob takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16604</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-07-11 22:58:57 +0000</bug_when>
    <thetext>Fixed at SHA-1: 333a8661066bd9d3a01518bdc5443db233977bcc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3917</bug_id>
          
          <creation_ts>2022-04-28 21:51:27 +0000</creation_ts>
          <short_desc>MdeModulePkg: Pcd initialize DXE will have assert in corner case.</short_desc>
          <delta_ts>2022-05-31 21:59:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Gua Guo">gua.guo</reporter>
          <assigned_to name="Gua Guo">gua.guo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18907</commentid>
    <comment_count>0</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2022-04-28 21:51:27 +0000</bug_when>
    <thetext>Corner Case:
  1. Support Multiple SKU ID
  &lt;Real Board&gt;BoardPkg.dsc
  [SkuIds]
    0|DEFAULT
    1|SkuId1
    2|SkuId2
    3|SkuId3

  [PcdsDynamicExVpd.common.DEFAULT]
    gXXXTokenSpaceGuid.PcdAAA|*|FALSE

  [PcdsDynamicExVpd.common.SkuId1]
    gXXXTokenSpaceGuid.PcdAAA|*|TRUE


  2. Move all dynamic/dynamicex PCD from DXE delta to PEI delta



(a) Edk2\MdeModulePkg\Universal\PCD\Dxe\Service.c : UpdatePcdDatabase ()
Happen on &quot;Index == mDxePcdDbSize&quot; before executing &quot;while (Index &lt; mDxePcdDbSize)&quot;,
UpdatePcdDatabase () will always return EFI_NOT_FOUND.
&gt;  while (Index &lt; mDxePcdDbSize) {
&gt;    SkuDelta = (PCD_DATABASE_SKU_DELTA *)((UINT8 *)mDxePcdDbBinary + Index);
&gt;    if ((SkuDelta-&gt;SkuId == SkuId) &amp;&amp; (SkuDelta-&gt;SkuIdCompared == 0)) {
&gt;      break;
&gt;    }
&gt;
&gt;    Index = (Index + SkuDelta-&gt;Length + 7) &amp; (~7);
&gt;  }

(b) Edk2\MdeModulePkg\Universal\PCD\Dxe\Service.c : BuildPcdDxeDataBase ()
&gt;    if (mPcdDatabase.PeiDb-&gt;SystemSkuId != 0) {
&gt;      Status = UpdatePcdDatabase (mPcdDatabase.PeiDb-&gt;SystemSkuId, FALSE);
&gt;      ASSERT_EFI_ERROR (Status); &lt;------ Alway Assert &quot;EFI_NOT_FOUND&quot;
&gt;    }


Recommend solution: 
Check if don&apos;t exist any DXE PCD delta, will return EFI_SUCCESS instead of EFI_NOT_FOUND. to unlock (b) ASSERT.
&gt; if (Index == mDxePcdDbSize) {
&gt;   return EFI_SUCCESS;
&gt; }
&gt;  while (Index &lt; mDxePcdDbSize) {
&gt;    SkuDelta = (PCD_DATABASE_SKU_DELTA *)((UINT8 *)mDxePcdDbBinary + Index);
&gt;    if ((SkuDelta-&gt;SkuId == SkuId) &amp;&amp; (SkuDelta-&gt;SkuIdCompared == 0)) {
&gt;      break;
&gt;    }
&gt;
&gt;    Index = (Index + SkuDelta-&gt;Length + 7) &amp; (~7);
&gt;  }



I will draft pull request to deal with it if it&apos;s acceptable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18913</commentid>
    <comment_count>1</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2022-05-02 01:37:56 +0000</bug_when>
    <thetext>It&apos;s PR for the issue. https://github.com/tianocore/edk2/pull/2844</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18996</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 21:59:40 +0000</bug_when>
    <thetext>It has been fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3304</bug_id>
          
          <creation_ts>2021-04-07 02:35:58 +0000</creation_ts>
          <short_desc>libredfish EDK2 port (RedfishLib)</short_desc>
          <delta_ts>2021-04-07 02:46:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>RedfishPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15536</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-07 02:35:58 +0000</bug_when>
    <thetext>opensource libredfish (https://github.com/DMTF/libredfish) project EDKII port.
The library is used by EDKII Redfish feature driver to communicate with Redfish service with CRUD HTTP method.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15539</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-07 02:46:03 +0000</bug_when>
    <thetext>Abner has merged this feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3336</bug_id>
          
          <creation_ts>2021-04-13 15:43:09 +0000</creation_ts>
          <short_desc>Clarify Boot#### processing requirements</short_desc>
          <delta_ts>2021-08-25 17:38:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>andrey.warkentin</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>felixp</cc>
    
    <cc>gaoliming</cc>
    
    <cc>Sunny.Wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15634</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-13 15:43:09 +0000</bug_when>
    <thetext>Clarify the specification requirements around processing Boot####  variables, and how that relates to the different required events.

• Code issue: https://bugzilla.tianocore.org/show_bug.cgi?id=2831
• EDK2-Dev code patch and discussion thread: https://edk2.groups.io/g/devel/topic/74912987#61328</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15635</commentid>
    <comment_count>1</comment_count>
      <attachid>696</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-13 15:43:28 +0000</bug_when>
    <thetext>Created attachment 696
CodeFirst_Clarify_Boot####_Processing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15643</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-13 21:48:03 +0000</bug_when>
    <thetext>Samer is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15827</commentid>
    <comment_count>3</comment_count>
    <who name="Andrei Warkentin">andrey.warkentin</who>
    <bug_when>2021-04-29 13:27:43 +0000</bug_when>
    <thetext>Thank you for writing this up, Samer. It looks good to me. It would be great to have this inconsistency resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15885</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-03 09:24:08 +0000</bug_when>
    <thetext>Samer, in comment 1 you write:

&gt;| which is already a breach of the specs in terms of expected chronology, as
&gt;| it will force Y to start before Z

My understanding is that the problem you describe is that Y and Z are *interleaved*, when they should be separate (Y should complete before Z starts). However, the expression &quot;force Y to start before Z&quot; is not a correct description for this problem. So either my understanding of &quot;already a breach of the specs&quot; is incorrect, or the problem description in the ECR is inexact.

The normative updates look OK to me. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15893</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-03 18:07:41 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #4)
&gt; Samer, in comment 1 you write:
&gt; 
&gt; &gt;| which is already a breach of the specs in terms of expected chronology, as
&gt; &gt;| it will force Y to start before Z
&gt; 
&gt; My understanding is that the problem you describe is that Y and Z are
&gt; *interleaved*, when they should be separate (Y should complete before Z
&gt; starts). 
Your understanding of the problem is correct.

&gt; However, the expression &quot;force Y to start before Z&quot; is not a
&gt; correct description for this problem. So either my understanding of &quot;already
&gt; a breach of the specs&quot; is incorrect, or the problem description in the ECR
&gt; is inexact.
&gt; 
This looks like a typo. It should read &quot;force Z to start before the completion of Y&quot;. Will this address your concern? If so, I will update the ECR with this language.


&gt; The normative updates look OK to me. Thanks.
Thanks for reviewing!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15897</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-04 14:11:40 +0000</bug_when>
    <thetext>(In reply to Samer El-Haj-Mahmoud from comment #5)
&gt; (In reply to Laszlo Ersek from comment #4)

&gt; &gt; However, the expression &quot;force Y to start before Z&quot; is not a
&gt; &gt; correct description for this problem. So either my understanding of &quot;already
&gt; &gt; a breach of the specs&quot; is incorrect, or the problem description in the ECR
&gt; &gt; is inexact.
&gt; &gt; 
&gt; This looks like a typo. It should read &quot;force Z to start before the
&gt; completion of Y&quot;. Will this address your concern? If so, I will update the
&gt; ECR with this language.

Yes, that solves my remark. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15903</commentid>
    <comment_count>7</comment_count>
      <attachid>717</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-04 15:32:45 +0000</bug_when>
    <thetext>Created attachment 717
CodeFirst_Clarify_Boot####_Processing_ver2

Updated per feedback from Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15926</commentid>
    <comment_count>8</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-05 15:17:16 +0000</bug_when>
    <thetext>Documenting responses so far that are agreeing with the interpretation of the spec that is outlined in this ECR:

Andrei Warkentin [comment 3]
Laszlo Ersek [comment 6]
Pete Batard [BZ https://bugzilla.tianocore.org/show_bug.cgi?id=2831]
Andrew Fish [BZ https://bugzilla.tianocore.org/show_bug.cgi?id=2831]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16006</commentid>
    <comment_count>9</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-11 17:35:56 +0000</bug_when>
    <thetext>In Progress USWG ECR: https://mantis.uefi.org/mantis/view.php?id=2225</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16045</commentid>
    <comment_count>10</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-05-12 16:58:48 +0000</bug_when>
    <thetext>I have concerns regarding the proposed directions. I believe the proposed changes will break a lot of existing code. There is indeed inconsistency between two parts of the UEFI spec. SysPrep#### description is section 3.1.7 suggests that ready-to-boot should be signaled earlier in the processing sequence; ready-to-boot description in chapter 7.1 suggests it should be signaled right before launching the boot loader, which matches the existing implementation(refer to https://bugzilla.tianocore.org/attachment.cgi?id=696). SysPrep#### language was added in UEFI 2.5 (~2015), whereas ready-to-boot description goes all the way back to UEFI 2.0 and before that to Intel Framework DXE specification (~2003). So signaling read-to-boot late has been an established practice for almost 20 years. By changing boot manager processing sequence, we may potentially break existing ready-to-boot handlers, which, in my experience, are quite popular as a platform firmware customization mechanism. So, if we need to fix the spec, I suggest updating section 3.1.7 to match section 7.1. If there is a need to signal ready-to-boot prior to launching recovery option, that can be added to the spec as a new requirement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16051</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-13 07:33:40 +0000</bug_when>
    <thetext>Hi Felix,

do you mean: signal the same event group in both old and new locations, or else, introduce a new event group for the new location?

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16238</commentid>
    <comment_count>12</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-06-02 07:20:56 +0000</bug_when>
    <thetext>I think Felix is suggesting we clarify the UEFI spec to a) update section 3.1.7 to match section 7, and the existing ready-to-boot signaling implementation in edk2, and b) update the spec to require signaling ready-to-boot prior to launching recovery boot options. 

I will work with Felix to propose a language (and look at the code patches), and will see if this resolves the issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16241</commentid>
    <comment_count>13</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-06-02 10:09:20 +0000</bug_when>
    <thetext>Samer&apos;s description in comment 12 is accurate. That&apos;s essentially what I&apos;m proposing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16242</commentid>
    <comment_count>14</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-06-02 10:16:39 +0000</bug_when>
    <thetext>While reviewing the code I noticed another thing that perhaps worth clarifying.
The specification defines BootCurrent UEFI variable that contains index of the Boot#### variable. The specification does not clarify if the variable is set before or after ready-to-boot. I suggest clarifying that the variable is set before signaling ready-to-boot (matches current edk2 behavior).

Also if we&apos;re going to signal ready-to-boot prior to launching recovery options we should clarify that BootCurrent will not be set in this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16293</commentid>
    <comment_count>15</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-06-08 04:25:12 +0000</bug_when>
    <thetext>Hi Felix, 

I agree with you that it is better to base on the current implementation to update the specification.
 

However, I’m still not clear about how you would like to deal with the comment below in spec and code: 
    - “If there is a need to signal ready-to-boot prior to launching recovery option, that can be added to the spec as a new requirement.” 


Now some ARM platforms already had this need, so we need to know how to add “signal ready-to-boot prior to launching recovery option” to the spec as a new requirement in detail and then get agreement from others. The following two approaches are my thought/understandings of your comment. I think both can solve the problem on the ARM platforms and keep existing stuff still work. Does either of them match your thought? If not, could you give me more information?     
    1.We will just mention that “signaling ready-to-boot for PlatformRecovery is optional”.   
    2.We will only signal ready-to-boot for the Default PlatformRecovery option (the PlatformRecovery option with short-form File Path Media Device Path as File Path). 


I also added details about my understandings (what will we do for the two approaches mentioned above) of your proposal below for your reference. 
    1.[Spec change] Remove ready-to-boot-related description in section 3.1.7.

    2.[Spec change] Add either of the following description into section 3.4.3 “Boot Option Variables Default Boot Behavior”
        2.1. Add “Platform can signal ready-to-boot during processing PlatformRecovery for its specific need” 
        2.2. Add “Ready-to-boot will be signed when PlatformRecovery#### variable that specifies a short-form File Path Media Device Path (see Section  3.1.2) containing the platform default file path for removable media  (see Table  15) is being processed.” 

    3.[Code change] Two approaches
        3.1. If we go with 2.1, we will need to add a PCD to determine if ready-to-boot will be signaled during processing PlatformRecovery, and then update Pete’s patch to check the PCD and only take effect on PlatformRecovery.  
        3.2. If we go with 2.2, we will update Pete’s patch to check and only signal Ready-to-boot for Default PlatformRecovery.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16517</commentid>
    <comment_count>16</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-07-02 05:50:38 +0000</bug_when>
    <thetext>Sunny,

I think option 2.1 (make ready to boot signaling an implementation choice) does not provide service guarantee. Callback of a driver may or may not get called by a given implementation.
Option 2.2 looks too specific (why treat File Path Media Device Path differently from other device paths). I thin it’s better to always signal ready to boot event while processing OSRecovery and PlatformRecovery options.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16518</commentid>
    <comment_count>17</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-07-02 06:44:51 +0000</bug_when>
    <thetext>Thanks, Felix. I got your point now.

However, I still have one concern that hasn’t been addressed by your clarification. Do we need to consider the existing PlatformRecovery options (non-default one) that were developed by ODMs/IBVs? Especially, the PlatformRecovery option (UEFI application) that is not stored/built into/in the UEFI firmware image. I thought there may be an existing PlatformRecovery option that doesn’t expect that the Ready-To-Boot event was signaled before it performs the recovery process. However, if we don’t need to consider the existing PlatformRecovery option or this is a just rare case, I will agree that it is fine to always signal the ready-to-boot event before launching platform recovery options.

Moreover, for the implementation of “always signal the ready-to-boot event before launching platform recovery options.”, do you mean to add code to signal ready-to-boot right before the code block for loading the PlatfromRecovery option in BdsEntry.c? In other words, do you mean to add code right before this line https://github.com/tianocore/edk2/blob/fea7901dba72eeac526f3ef12a4ad4c539622373/MdeModulePkg/Universal/BdsDxe/BdsEntry.c#L1081?  

By the way, the reason why I brought option 2.2 to you guys is that we only run into the current issue with the short-form media device path entry (default PlatformRecovery option created by https://github.com/tianocore/edk2/blob/fea7901dba72eeac526f3ef12a4ad4c539622373/MdeModulePkg/Universal/BdsDxe/BdsEntry.c#L801). The option 2.2 is to minimize the scope so that we won’t affect any existing code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16519</commentid>
    <comment_count>18</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-07-02 07:32:38 +0000</bug_when>
    <thetext>&gt; Do we need to consider the existing PlatformRecovery options (non-default one) &gt; that were developed by ODMs/IBVs? [...]
&gt; I thought there may be an existing
&gt; PlatformRecovery option that doesn’t expect that the Ready-To-Boot event was
&gt; signaled before it performs the recovery process.
Compatibility with existing platform recovery options is a good point. From my perspective signaling ready-to-boot shouldn&apos;t have bit impact on existing code, but to be on the safe side we can survey folks wit the existing implementations here and in USWG.

&gt; Moreover, for the implementation of “always signal the ready-to-boot event
&gt; before launching platform recovery options.”, do you mean to add code to signal
&gt; ready-to-boot right before the code block for loading the PlatfromRecovery option in BdsEntry.c? In other words, do you mean to add code right before this
&gt; line https://github.com/tianocore/edk2/blob/fea7901dba72eeac526f3ef12a4ad4c539622373/MdeModulePkg/Universal/BdsDxe/BdsEntry.c#L1081?  
Not exactly. For symmetry with boot option handling ready to boot should be signaled before every recovery option (not just once before starting the recovery list processing). Current implementation reuses ProcessLoadOptions for Driver and Recovery option processing. So we can&apos;t add ready to boot signaling to ProcessLoadOptions. We may need a new library function for that.

&gt; By the way, the reason why I brought option 2.2 to you guys is that we only
&gt; run into the current issue with the short-form media device path entry 
To tell you the truth, I haven&apos;t spent enough time understanding why do you need ready to boot before processing recovery options. I just treated it as a requirement from your side. If the only issue is connecting short-form media device path, there could be an alternative proposal. Rather then signaling event we can extend ConnectDevicePath function of the BootManagerPolicy protocol to indicate that the function should support short-form device paths and platform recovery application can just call BootManagerPolicy-&gt;ConnectDevicePath to coonect the device.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16522</commentid>
    <comment_count>19</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-07-02 11:54:58 +0000</bug_when>
    <thetext>Thanks, Felix.

Actually, your solution looks good to me. 

I was just trying to make sure that I didn’t miss any scenarios. According to your feedback and previous feedback from others, there should be a rare case or no case that the existing PlatformRecovery options (non-default one) that were developed by ODMs/IBVs will be affected by your solution. 

Therefore, I think we’re good to go with “always signal the ready-to-boot event before launching platform recovery options”</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16565</commentid>
    <comment_count>20</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-07-06 20:16:25 +0000</bug_when>
    <thetext>To summarize, we will proceed with the following proposal:


• Update section 3.1.7 follow what is suggested in 7.1.
• Add new requirement to signal ReadyToBoot before launching platform recovery options, to resolve the current issue, and make the recovery boot path consistent with the normal boot path.
• Clarify that “BootCurrent” variable is set before signaling ReadyToBoot to match the current EDK2 behavior, and remove that ambiguity from the spec. Also clarify that this does not happen when launching recovery boot options.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16749</commentid>
    <comment_count>21</comment_count>
      <attachid>786</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-03 18:11:15 +0000</bug_when>
    <thetext>Created attachment 786
CodeFirst_Clarify_Boot####_Processing_ver3

Updated proposal per the latest comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16949</commentid>
    <comment_count>22</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-17 12:24:04 +0000</bug_when>
    <thetext>I have not seen further comments/discussion. If you have issues with this proposal, please let us know. Otherwise, moving to approval in USWG</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16963</commentid>
    <comment_count>23</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-08-18 15:25:04 +0000</bug_when>
    <thetext>Samer,

[attachment 786](https://bugzilla.tianocore.org/attachment.cgi?id=786) looks fine. Just one minor thing. Proposal clarifies that ready-to-boot is notified prior to loading &apos;platform recovery option&apos;.
The spec defines OS-Defined Boot Option Recovery (section 3.4.1) and Platform-Defined Boot Option Recovery (section 3.4.2).

I assume &apos;platform recovery option&apos; only applies to Platform-Defined Boot Option Recovery and does not apply to OS-Defined Boot Option Recovery. Is this the intended behavior? To process all the entries in the uniform manner I would recommend to include OS recovery as well, which means &apos;platform recovery option&apos; should be changed to &apos;platform or OS recovery option&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16964</commentid>
    <comment_count>24</comment_count>
      <attachid>802</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-18 15:31:21 +0000</bug_when>
    <thetext>Created attachment 802
CodeFirst_Clarify_Boot####_Processing_ver4

Updated ver 4 to address Felix comment on the OS vs Platform recovery options. Also clarified that BootCurrent is not set when either PlatformRecovery#### or OsRecovery#### are attempted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16965</commentid>
    <comment_count>25</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-08-18 15:35:18 +0000</bug_when>
    <thetext>attachment 802 looks good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17084</commentid>
    <comment_count>26</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-25 17:38:33 +0000</bug_when>
    <thetext>UEFI Forum 8/25 meeting, this ECR has been approved as-submitted as an errata.

Implementations may proceed with the approved spec clarification change.

Closing this issue.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>696</attachid>
            <date>2021-04-13 15:43:28 +0000</date>
            <delta_ts>2021-04-13 15:43:28 +0000</delta_ts>
            <desc>CodeFirst_Clarify_Boot####_Processing</desc>
            <filename>CodeFirst_Clarify_Boot####_Processing.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>22066</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>717</attachid>
            <date>2021-05-04 15:32:45 +0000</date>
            <delta_ts>2021-05-04 15:32:45 +0000</delta_ts>
            <desc>CodeFirst_Clarify_Boot####_Processing_ver2</desc>
            <filename>CodeFirst_Clarify_Boot####_Processing_ver2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>23131</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>786</attachid>
            <date>2021-08-03 18:11:15 +0000</date>
            <delta_ts>2021-08-03 18:11:15 +0000</delta_ts>
            <desc>CodeFirst_Clarify_Boot####_Processing_ver3</desc>
            <filename>CodeFirst_Clarify_Boot####_Processing_ver3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>22049</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>802</attachid>
            <date>2021-08-18 15:31:21 +0000</date>
            <delta_ts>2021-08-18 15:31:21 +0000</delta_ts>
            <desc>CodeFirst_Clarify_Boot####_Processing_ver4</desc>
            <filename>CodeFirst_Clarify_Boot####_Processing_ver4.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>22122</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3003</bug_id>
          
          <creation_ts>2020-10-11 21:57:16 +0000</creation_ts>
          <short_desc>Make the iSCSI driver disable as default setting for security</short_desc>
          <delta_ts>2020-11-17 14:29:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3021</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3027</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13939</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-10-11 21:57:16 +0000</bug_when>
    <thetext>The iSCSI is using the deprecated function MD5. It is an unsafe algorithm and suggested not to use it. Make iSCSI disable to ensure the edk2 default setting is secure.
This change may affect many platforms that are still using iSCSI. Platforms that need iSCSI should change the setting in the platform dsc manually and be aware they are using an unsafe function.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13952</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-13 21:34:13 +0000</bug_when>
    <thetext>Zhichao, can you work on it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14351</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-13 18:34:37 +0000</bug_when>
    <thetext>* v1:
[edk2-devel] [PATCH 0/5] Make the MD5 disable as default setting
msgid: &lt;20201026090343.13048-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/66595
https://www.redhat.com/archives/edk2-devel-archive/2020-October/msg00817.html

* v2:
[edk2-devel] [PATCH V2 0/7] Disable the deprecated MD5 and SHA1 support
msgid: &lt;20201027024300.21100-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/66619
https://www.redhat.com/archives/edk2-devel-archive/2020-October/msg00838.html

* v3:
[edk2-devel] [PATCH V3 00/12] Disable the deprecated MD5 and SHA1 support
msgid: &lt;20201110173651.54036-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/67234
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00393.html

* v4:
[edk2-devel] [PATCH V4 00/13] Disable the deprecated MD5 and SHA1 support
msgid: &lt;20201112055558.2348-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/67359
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00519.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14363</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-17 14:29:14 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)

&gt; * v4:
&gt; [edk2-devel] [PATCH V4 00/13] Disable the deprecated MD5 and SHA1 support
&gt; msgid: &lt;20201112055558.2348-1-zhichao.gao@intel.com&gt;
&gt; https://edk2.groups.io/g/devel/message/67359
&gt; https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00519.
&gt; html

Merged as commit range 29d59baa3907..e6a12a0fc817, via &lt;https://github.com/tianocore/edk2/pull/1130&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3383</bug_id>
          
          <creation_ts>2021-05-10 03:54:52 +0000</creation_ts>
          <short_desc>StandaloneMmRpmb support for 32bit Arm machines</short_desc>
          <delta_ts>2022-01-17 02:30:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>BoardModulePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Etienne Carrière">etienne.carriere</reporter>
          <assigned_to name="Etienne Carrière">etienne.carriere</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15963</commentid>
    <comment_count>0</comment_count>
    <who name="Etienne Carrière">etienne.carriere</who>
    <bug_when>2021-05-10 03:54:52 +0000</bug_when>
    <thetext>This ticket aims at building the StandaloneMmRpmb platform for 32bit Arm targets, based on the existing 64bit Arm (AArch64) implementation.

Such support requires changes in EDK2 to extend some ArmPkg components from 64bit to to 32bit, as proposed in ticket https://bugzilla.tianocore.org/show_bug.cgi?id=3381 and the related change series.

This ticket covers the changes needed in EDK2 Platforms. This starts with synchronizing EDK2 Platforms with EDK2 files path changes from ticket 3381. EDK2 Platforms OpTee package needs equivalent changes (factorize AArch64 implementation to cover 32bit Arm).

One can find change proposal in the EDK2 mailinglist:
https://edk2.groups.io/g/devel/message/74855
https://edk2.groups.io/g/devel/message/74856
https://edk2.groups.io/g/devel/message/74857
https://edk2.groups.io/g/devel/message/74858</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16016</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-11 21:45:09 +0000</bug_when>
    <thetext>Etienne is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18172</commentid>
    <comment_count>2</comment_count>
    <who name="Etienne Carrière">etienne.carriere</who>
    <bug_when>2022-01-17 02:30:03 +0000</bug_when>
    <thetext>Moving status to RESOLVED/FIXED.

The changes have been merged in Aug&apos;21, as commit series
from: 0835f7334316 (&quot;Platform/ARM/SgiPkg: sync with edk2 StandaloneMmCpu path change&quot;)
to: 891b355d9c4d (&quot;Platform/StandaloneMm: build StandaloneMmRpmb for 32bit architectures&quot;)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3254</bug_id>
          
          <creation_ts>2021-03-10 03:00:29 +0000</creation_ts>
          <short_desc>ArmPkg Dec file doesn&apos;t correctly declare LibraryClasses header files</short_desc>
          <delta_ts>2021-04-30 06:51:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Thomas Abraham">thomas.abraham</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>pierre.gondois</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15260</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-03-10 03:00:29 +0000</bug_when>
    <thetext>SemihostLib|Include/Library/SemihostLib.h
ArmMtlLib|Include/Library/ArmMtlLib.h
ArmGenericTimerCounterLib|Include/Library/ArmGenericTimerCounterLib.h
ArmGicArchLib|Include/Library/ArmGicLib.h
ArmHvcLib|Include/Library/ArmHvcLib.h
ArmSmcLib|Include/Library/ArmSmcLib.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15340</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-16 21:56:10 +0000</bug_when>
    <thetext>Thomas, can you take it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15754</commentid>
    <comment_count>2</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-04-21 08:23:58 +0000</bug_when>
    <thetext>Hi Sean, Liming,
This should be corrected by:
https://edk2.groups.io/g/devel/message/74323</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15840</commentid>
    <comment_count>3</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-04-30 06:51:06 +0000</bug_when>
    <thetext>Should be resolved by:
https://github.com/tianocore/edk2/commit/d03f71dd8be62ffbd3d1665576ffd721210b7e00</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3283</bug_id>
          
          <creation_ts>2021-03-26 19:00:53 +0000</creation_ts>
          <short_desc>SMM save state code does not check the buffer width before accessing</short_desc>
          <delta_ts>2021-04-12 13:36:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15438</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-26 19:00:53 +0000</bug_when>
    <thetext>Current SMM Save State routine does not check the number of bytes to be read, when it comse to read IO_INFO, before casting the incoming buffer to EFI_SMM_SAVE_STATE_IO_INFO.

This could potentially cause memory corruption due to extra bytes are written out of buffer boundary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15439</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-26 20:01:16 +0000</bug_when>
    <thetext>Patch sent for review here: https://edk2.groups.io/g/devel/message/73409</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15467</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-30 21:38:27 +0000</bug_when>
    <thetext>Kun has sent the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15522</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-06 05:26:41 +0000</bug_when>
    <thetext>Patch was reviewed-by Ray Ni as in https://edk2.groups.io/g/devel/message/73646. Need help from maintainers to merge the change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15527</commentid>
    <comment_count>4</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-06 13:48:46 +0000</bug_when>
    <thetext>Laszlo provided feedback for updates, will send out v2 shortly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15573</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-04-09 00:37:53 +0000</bug_when>
    <thetext>Modified patch sent here: https://edk2.groups.io/g/devel/message/73742. (The patch version is incorrectly sent, it should have been v2. Sorry for the confusion)

Need maintainers to help merging the change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15613</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-12 13:36:48 +0000</bug_when>
    <thetext>Merged as commit a7d8e28b29f2, via &lt;https://github.com/tianocore/edk2/pull/1554&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3764</bug_id>
          
          <creation_ts>2021-12-05 21:51:48 +0000</creation_ts>
          <short_desc>BIOS password is not required when overriding boot device via F7 hotkey</short_desc>
          <delta_ts>2022-04-06 23:33:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>UserAuthFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bo-ChangX Ke">bo-changx.ke</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>bo-changx.ke</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17919</commentid>
    <comment_count>0</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2021-12-05 21:51:48 +0000</bug_when>
    <thetext>1. Environment

BIOS Boot with BIOS Password installed

2. Expected Behavior

When pressing F7 to override the configured boot order, the BIOS password should be verified prior to allowing a different boot device to be selected


3. Actual Behavior

When pressing F7 to override the configured boot order, the BIOS password is not requested and the user can select a different boot device</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17920</commentid>
    <comment_count>1</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2021-12-05 22:09:49 +0000</bug_when>
    <thetext>confirmed the phenomenon happens.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18771</commentid>
    <comment_count>2</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-06 23:32:11 +0000</bug_when>
    <thetext>fix in Server platform code</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3045</bug_id>
          
          <creation_ts>2020-11-03 05:02:05 +0000</creation_ts>
          <short_desc>Add support for parsing HMAT table in Acpiview</short_desc>
          <delta_ts>2021-04-30 13:35:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14183</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-03 05:02:05 +0000</bug_when>
    <thetext>The HMAT ACPI table describes the memory attributes, such as memory side cache attributes and bandwidth and latency details. 
The HMAT table is described in the ACPI 6.3 specification in section 5.2.27 Heterogeneous Memory Attribute Table (HMAT).

It will be useful to add a HMAT parser to Acpiview to examine the table contents from the UEFI shell.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14197</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-03 20:41:20 +0000</bug_when>
    <thetext>Sami will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14219</commentid>
    <comment_count>2</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-04 06:19:04 +0000</bug_when>
    <thetext>Link for patch: https://edk2.groups.io/g/devel/message/66979</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15846</commentid>
    <comment_count>3</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-04-30 13:34:00 +0000</bug_when>
    <thetext>This has been fixed inedk2 master at https://github.com/tianocore/edk2/commit/618e6a1f21a11eaee0a92e19c753969eb4a1b198</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15848</commentid>
    <comment_count>4</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-04-30 13:35:38 +0000</bug_when>
    <thetext>This has been fixed inedk2 master at https://github.com/tianocore/edk2/commit/618e6a1f21a11eaee0a92e19c753969eb4a1b198</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3231</bug_id>
          
          <creation_ts>2021-02-22 18:13:08 +0000</creation_ts>
          <short_desc>Move to Pip based Basetools python</short_desc>
          <delta_ts>2021-02-22 20:21:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Matthew Carlson">macarl</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15096</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2021-02-22 18:13:08 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2-basetools
or PR: https://github.com/tianocore/edk2/pull/1414</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15097</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-22 20:13:13 +0000</bug_when>
    <thetext>Fix in https://github.com/tianocore/edk2/pull/1414</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3115</bug_id>
          
          <creation_ts>2020-12-10 20:28:53 +0000</creation_ts>
          <short_desc>Dump VTd DMAR SATC struct in IntelVTdDxe driver</short_desc>
          <delta_ts>2020-12-24 01:46:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14555</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-12-10 20:28:53 +0000</bug_when>
    <thetext>Intel(R) Virtualization Technology for Directed I/O (VT-D) Architecture Specification is updated to v3.2. It supports SoC Integrated Address Translation Cache (SATC) reporting structure.
Need to dump VTd DMAR SATC struct in IntelVTdDxe driver.

Reference link:
https://software.intel.com/content/dam/develop/external/us/en/documents/vt-directed-io-spec.pdf

The request depends on https://bugzilla.tianocore.org/show_bug.cgi?id=3109 .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14577</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-15 03:10:51 +0000</bug_when>
    <thetext>Wei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14655</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-12-24 01:46:45 +0000</bug_when>
    <thetext>Patch is merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3255</bug_id>
          
          <creation_ts>2021-03-10 03:03:14 +0000</creation_ts>
          <short_desc>ArmMmuStandaloneMmLib.inf and ArmMmuBaseLib.inf have same File Guid</short_desc>
          <delta_ts>2021-08-20 00:28:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Matthew Carlson">macarl</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>pierre.gondois</cc>
    
    <cc>ryan.harkin</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15261</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-03-10 03:03:14 +0000</bug_when>
    <thetext>ArmPkg/Library/StandaloneMmMmuLib/ArmMmuStandaloneMmLib.inf
  FILE_GUID                      = da8f0232-fb14-42f0-922c-63104d2c70bd
  MODULE_TYPE                    = MM_CORE_STANDALONE
Showing the top match
Last indexed 15 days ago
ArmPkg/Library/ArmMmuLib/ArmMmuBaseLib.inf
  FILE_GUID                      = da8f0232-fb14-42f0-922c-63104d2c70bd
  MODULE_TYPE                    = BASE
  VERSION_STRING                 = 1.0
Showing the top match
Last indexed on Oct 6, 2020</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15334</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-16 21:45:59 +0000</bug_when>
    <thetext>Matthew: can you take this one?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15749</commentid>
    <comment_count>2</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-04-21 06:47:32 +0000</bug_when>
    <thetext>Hi Sean,
This bugzilla should be solved by:
https://github.com/tianocore/edk2/commit/aec0ce7ca8074

Unfortunately I only see this ticket now and did not include a reference to it in the commit,

Regards,
Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16999</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-08-20 00:28:04 +0000</bug_when>
    <thetext>thanks</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3021</bug_id>
          
          <creation_ts>2020-10-26 04:37:57 +0000</creation_ts>
          <short_desc>Make MD5 disable as default edk2 setting</short_desc>
          <delta_ts>2020-11-17 14:29:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3003</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3027</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14084</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-10-26 04:37:57 +0000</bug_when>
    <thetext>MD5 is deprecated, so make it disable as the default setting for security. Change the DISABLE_MD5_DEPRECATED_INTERFACES to ENABLE_MD5_DEPRECATED_INTERFACES and set the MARCO for the packages that still require MD5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14085</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-10-26 04:38:09 +0000</bug_when>
    <thetext>take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14120</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:55:05 +0000</bug_when>
    <thetext>Zhichao is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14352</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-13 18:34:41 +0000</bug_when>
    <thetext>* v1:
[edk2-devel] [PATCH 0/5] Make the MD5 disable as default setting
msgid: &lt;20201026090343.13048-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/66595
https://www.redhat.com/archives/edk2-devel-archive/2020-October/msg00817.html

* v2:
[edk2-devel] [PATCH V2 0/7] Disable the deprecated MD5 and SHA1 support
msgid: &lt;20201027024300.21100-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/66619
https://www.redhat.com/archives/edk2-devel-archive/2020-October/msg00838.html

* v3:
[edk2-devel] [PATCH V3 00/12] Disable the deprecated MD5 and SHA1 support
msgid: &lt;20201110173651.54036-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/67234
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00393.html

* v4:
[edk2-devel] [PATCH V4 00/13] Disable the deprecated MD5 and SHA1 support
msgid: &lt;20201112055558.2348-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/67359
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00519.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14364</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-17 14:29:30 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)

&gt; * v4:
&gt; [edk2-devel] [PATCH V4 00/13] Disable the deprecated MD5 and SHA1 support
&gt; msgid: &lt;20201112055558.2348-1-zhichao.gao@intel.com&gt;
&gt; https://edk2.groups.io/g/devel/message/67359
&gt; https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00519.
&gt; html

Merged as commit range 29d59baa3907..e6a12a0fc817, via &lt;https://github.com/tianocore/edk2/pull/1130&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3412</bug_id>
          
          <creation_ts>2021-05-24 00:50:05 +0000</creation_ts>
          <short_desc>MinPlatformPkg: Rebase fail when python tools path exist whitespace</short_desc>
          <delta_ts>2021-05-30 23:26:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gua Guo">gua.guo</reporter>
          <assigned_to name="Gua Guo">gua.guo</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16123</commentid>
    <comment_count>0</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2021-05-24 00:50:05 +0000</bug_when>
    <thetext>Build fail case

Python Path: C:\Program Files\Python38\python.exe
call py -3 MinPlatformPkg\Tools\Fsp\RebaseFspBinBaseAddress.py \
 FlashMap.fdf \
 XXXFspBinPkg \ 
 Fsp.fd \
 0x0

(a) C:\Users\&lt;UserName&gt;\AppData\Local\Program\Python\Python38 (Default single user)
(b) C:\Python38 (edkrepo default)
(c) C:\Program Files\Python38 (Default all users)


Issue only happens on (a) and (c).
(a) happen on &lt;UserName&gt; have whitespace. Ex: Tony Chen
(c) happen on &quot;Program Files&quot; have whitespace.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16124</commentid>
    <comment_count>1</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2021-05-24 00:51:11 +0000</bug_when>
    <thetext>&apos;C:\Program&apos; is not recognized as an internal or external command,
operable program or batch file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16141</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-25 21:40:09 +0000</bug_when>
    <thetext>Ian is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16216</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-05-30 22:24:22 +0000</bug_when>
    <thetext>commit 86984c17d562fc60a6dabbc3a479d79163656a0c (HEAD -&gt; master, origin/master, origin/HEAD, fsprebase)
Author: IanX Kuo &lt;ianx.kuo@intel.com&gt;
Date:   Mon May 24 16:51:15 2021 +0800

    MinPlatformPkg/Fsp: Rebase fail when python tools path exist whitespace

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3412

    Python38 installation path have three options.
    (a) C:\Users\&lt;UserName&gt;\AppData\Local\Program\Python\Python38
    (b) C:\Python38
    (c) C:\Program Files\Python38

    Issue only happens on (a) and (c).
    (a) happen on &lt;UserName&gt; have whitespace. Ex: Tony Chen
    (c) happen on &quot;Program Files&quot; have whitespace.

    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Signed-off-by: IanX Kuo &lt;ianx.kuo@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16218</commentid>
    <comment_count>4</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2021-05-30 23:26:41 +0000</bug_when>
    <thetext>The result looks okey from my side. Change status to verified.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3046</bug_id>
          
          <creation_ts>2020-11-03 05:11:36 +0000</creation_ts>
          <short_desc>Acpiview: Field validator not invoked in certain cases</short_desc>
          <delta_ts>2021-04-30 13:35:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14184</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-03 05:11:36 +0000</bug_when>
    <thetext>The field validator function in the AcpiView parser code provides means to alidate fields in the ACPI table structures. To print complex field types a print formatter function is also provided.

The field validator is invoked for simple data fields for which the default print format is used. However, the field validator function was not invoked if a print formatter function was provided.

This problem is noticed when a Generic Address Structure (GAS) is printed using DumpGas() and a field validator is present to validate the GAS structure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14196</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-03 20:40:52 +0000</bug_when>
    <thetext>Sami will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14221</commentid>
    <comment_count>2</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-04 07:35:40 +0000</bug_when>
    <thetext>Link for patch: https://edk2.groups.io/g/devel/topic/patch_v2_resend_1_2/78027603</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15845</commentid>
    <comment_count>3</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-04-30 13:33:12 +0000</bug_when>
    <thetext>This has been fixed in edk2 master at https://github.com/tianocore/edk2/commit/856cf5abf701c148a07e21660feff5f8ccf7fb79</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15849</commentid>
    <comment_count>4</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-04-30 13:35:51 +0000</bug_when>
    <thetext>This has been fixed in edk2 master at https://github.com/tianocore/edk2/commit/856cf5abf701c148a07e21660feff5f8ccf7fb79</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3794</bug_id>
          
          <creation_ts>2022-01-03 18:50:00 +0000</creation_ts>
          <short_desc>Expand Software Class Error Code definitions of Status Codes in PI spec</short_desc>
          <delta_ts>2023-06-23 16:02:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Specification Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18064</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-03 18:50:00 +0000</bug_when>
    <thetext>Current Status Codes covered various software class error code definitions (https://github.com/tianocore/edk2/blob/master/MdePkg/Include/Pi/PiStatusCode.h).

However, there are a few critical instances where the software could trigger system reboots while the corresponding case was not covered by the already defined status codes (listed a few examples):

1. Memory type information change triggered system reboot;
2. Assert triggered reboot on systems that did not enable system halts;

The unexpected system reboots above could indicate decay of system health and reporting of such generic events would provide helpful information to OEMs to investigate/prevent system failures in general.

The request of this ticket intends to expand definitions of `EFI_SW_EC_**` under Status Codes to cover more unexpected system reboot events, which could improve Status Code futility and readability.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18065</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-03 18:51:26 +0000</bug_when>
    <thetext>Here is an example of a newly added macro definition:
https://github.com/microsoft/mu_basecore/blob/e23d4ec50adf39e119480d3a56405d3ad025b41b/MdePkg/Include/Pi/PiStatusCode.h#L989</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18074</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-04 21:40:26 +0000</bug_when>
    <thetext>Kun is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18100</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-06 20:08:09 +0000</bug_when>
    <thetext>Code first patch series sent to mailing list: https://edk2.groups.io/g/devel/message/85302</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18143</commentid>
    <comment_count>4</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-14 15:22:29 +0000</bug_when>
    <thetext>v2 Patch sent here to request PI spec update: https://edk2.groups.io/g/devel/message/85335</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21640</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2023-06-07 11:42:20 +0000</bug_when>
    <thetext>New patch series sent here: https://edk2.groups.io/g/devel/message/105599. Waiting for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21689</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2023-06-23 16:02:50 +0000</bug_when>
    <thetext>Merged as e7667b7b in https://github.com/tianocore/edk2/pull/4537.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3819</bug_id>
          
          <creation_ts>2022-01-31 11:28:20 +0000</creation_ts>
          <short_desc>GetTimerPeriod returns sometime zero value when StallCounter has  smaller value than RttTimerTick (divide by zero) which results some failure at ping UEFI shell command</short_desc>
          <delta_ts>2022-02-22 22:16:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Kathappan">kathappan.esakkithevar</reporter>
          <assigned_to name="Kathappan">kathappan.esakkithevar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18224</commentid>
    <comment_count>0</comment_count>
    <who name="Kathappan">kathappan.esakkithevar</who>
    <bug_when>2022-01-31 11:28:20 +0000</bug_when>
    <thetext>In Edk2\ShellPkg\Library\UefiShellNetwork1CommandsLib\Ping.c, 

GetTimerPeriod returns sometime zero value when StallCounter has  smaller value than RttTimerTick (divide by zero) which results some failure at ping UEFI shell command. 

This scenario has been observed in Simulation environment where timer event may be triggered for each millisecond whereas 10 millisecond for real HW. 

However return logic needs to be corrected that GetTimerPeriod shall return non-zero value (1) when divide by zero occurs with StallCounter / RttTimerTick if has value more than 0.7.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18269</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-08 21:47:44 +0000</bug_when>
    <thetext>Include ZhiChao to review the function GetTimerPeriod() in Edk2\ShellPkg\Library\UefiShellNetwork1CommandsLib\Ping.c to check this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18448</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-22 22:16:53 +0000</bug_when>
    <thetext>This issue has been fixed @ Edk2 9c87ebd9759bd6ef08f24b127ca324f3147765f07</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3698</bug_id>
          
          <creation_ts>2021-10-19 01:48:12 +0000</creation_ts>
          <short_desc>Add new APIs to UefiCpuPkg/UefiCpuLib</short_desc>
          <delta_ts>2021-11-26 10:06:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17582</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-10-19 01:48:12 +0000</bug_when>
    <thetext>This Bugzilla proposes to add the following APIs to UefiCpuLib in UefiCpuPkg.
1. UINT32 GetCpuFamilyModel () {
     CPUID_VERSION_INFO_EAX  Eax;
     //
     // Read the CPUID information
     //
     AsmCpuid (CPUID_VERSION_INFO, &amp;Eax.Uint32, NULL, NULL, NULL);

     //
     // Mask other fields than Family and Model.
     //
     Eax.Bits.SteppingId    = 0;
     Eax.Bits.ProcessorType = 0;
     Eax.Bits.Reserved1     = 0;
     Eax.Bits.Reserved2     = 0;
     return Eax.Uint32;
   }

2. UINT8 GetCpuStepping () {
     CPUID_VERSION_INFO_EAX  Eax;
     //
     // Read the CPUID information
     //
     AsmCpuid (CPUID_VERSION_INFO, &amp;Eax.Uint32, NULL, NULL, NULL);

     return (UINT8) Eax.Bits.SteppingId;
   }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17606</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-26 01:03:56 +0000</bug_when>
    <thetext>This is new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17850</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:06:03 +0000</bug_when>
    <thetext>Fix at f826b20811ba6b0a9dbe44ff703b85c2def267df</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3098</bug_id>
          
          <creation_ts>2020-12-01 13:19:46 +0000</creation_ts>
          <short_desc>OVMF fails to build with XCODE5 in NOOPT</short_desc>
          <delta_ts>2020-12-03 20:32:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Vitaly Cheptsov">vit9696</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable202008</cf_release_observed>
    
    <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14455</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-12-01 13:19:46 +0000</bug_when>
    <thetext>The command in question is as follows:

build -a X64 -t XCODE5 -b NOOPT -p OvmfPkg/OvmfPkgX64.dsc

The error:

Undefined symbols for architecture x86_64:
  &quot;_memcpy&quot;, referenced from:
      _EvacuateTempRam in PeiCore.lib(Dispatcher.obj)
ld: symbol(s) not found for architecture x86_64
make: *** [/Users/user/Desktop/UDK/Build/OvmfX64/NOOPT_XCODE5/X64/MdeModulePkg/Core/Pei/PeiMain/DEBUG/PeiCore.dll] Error 1

In addition to fixing the issue I suggest also enabling XCODE5 CI builds for OVMF.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14456</commentid>
    <comment_count>1</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-12-01 13:28:16 +0000</bug_when>
    <thetext>Patch submitted https://edk2.groups.io/g/devel/topic/78640848</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14477</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-03 20:32:40 +0000</bug_when>
    <thetext>Create PR https://github.com/tianocore/edk2/pull/1177</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3358</bug_id>
          
          <creation_ts>2021-04-27 02:54:13 +0000</creation_ts>
          <short_desc>CLANGPDB build fails in StandaloneMmCoreEntryPoint module</short_desc>
          <delta_ts>2022-02-10 21:53:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15785</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-04-27 02:54:13 +0000</bug_when>
    <thetext>CLANGPDB build fails in StandaloneMmCoreEntryPoint module with below error. The build option &apos;-fpie&apos; should not be included in the CLANGPDB toolchain build.


Building ... /home/jshi19/wksp_efi/Edk2/StandaloneMmPkg/Library/StandaloneMmMemLib/StandaloneMmMemLib.inf [X64]
clang-11: error: unsupported option &apos;-fpie&apos; for target &apos;x86_64-unknown-windows-gnu&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15786</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-04-27 02:54:30 +0000</bug_when>
    <thetext>confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15787</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-04-27 04:44:15 +0000</bug_when>
    <thetext>Patch email link:https://edk2.groups.io/g/devel/topic/patch_1_1_basetools_fix/82398991?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,82398991</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15788</commentid>
    <comment_count>3</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-04-27 04:44:27 +0000</bug_when>
    <thetext>Patch email link: https://edk2.groups.io/g/devel/topic/patch_1_1_basetools_fix/82398991?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,82398991</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18324</commentid>
    <comment_count>4</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2022-02-10 21:53:55 +0000</bug_when>
    <thetext>Already fixed in trunk.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3116</bug_id>
          
          <creation_ts>2020-12-10 23:30:08 +0000</creation_ts>
          <short_desc>macOS Xcode wiki page is very outdated</short_desc>
          <delta_ts>2021-08-12 23:37:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="Rebecca Cran">rebecca</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14557</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2020-12-10 23:30:08 +0000</bug_when>
    <thetext>The macOS Xcode page at https://github.com/tianocore/tianocore.github.io/wiki/Xcode is very outdated: it mentions UnixPkg, which has been replaced with EmulatorPkg (or EmulatorPkg/Unix). Also, &quot;OS X&quot; is now &quot;macOS&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14730</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-05 22:01:42 +0000</bug_when>
    <thetext>Include Andrew Fish</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15982</commentid>
    <comment_count>2</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-05-10 15:50:18 +0000</bug_when>
    <thetext>I&apos;ve submitted a patch to the EDK2 mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16898</commentid>
    <comment_count>3</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-08-12 23:37:36 +0000</bug_when>
    <thetext>Fixed with commit https://github.com/tianocore/tianocore.github.io/wiki/Xcode/1d7ec0d3baf203459d3a480f02bad89d1085a532 .</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3168</bug_id>
          
          <creation_ts>2021-01-14 18:46:31 +0000</creation_ts>
          <short_desc>Add non-MMRAM memory protection for Standalone MM environment</short_desc>
          <delta_ts>2021-03-05 13:22:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14811</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-01-14 18:46:31 +0000</bug_when>
    <thetext>Current implementation of StanaloneMmMemLib does not have protection on OS memory. This is a feature request to add this portion.

The proposal to move forward is, in contrast to current SMM implementation, block all available memory other than registered/reported MMRAM ranges. Then in DXE environment, add a gBS protocol that can accept requests to unblock certain ranges. These requests will be communicated to Standalone MM memory manager through MMI (until ready to lock or memory manager deems appropriate). Then StandaloneMmMemLib will check on the requested memory blocks when MmIsBufferOutsideMmValid is called.

This should allow Standalone MM drivers to access necessary memory blocks, while protecting the rest that should not be available to MM drivers. In addition, this method will not need information on memory map of gDS from DXE that might entangle MM environment with DXE resources.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14812</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-01-14 21:08:58 +0000</bug_when>
    <thetext>Library interface and standalone mm implementation is pushed here: https://github.com/kuqin12/mu_basecore/tree/personal/kuqin/unblock_mem.

The standalone mm core implementation will be committed if the interface is agreed upon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14849</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-19 21:46:15 +0000</bug_when>
    <thetext>Include Jiewen for discussion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14867</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-01-20 21:00:48 +0000</bug_when>
    <thetext>Now we have two ways:
1) All memory is open, until EnfOfDxe. Then only ACPI/RESERVED/RUNTIMEDATA can be accessed.
2) All memory is close. Accessing memory requires special UNLOCK request before EndOfDxe.

When we implement SMRAM protection years ago. We also thought #2.

The concern at that moment was compatibility to existing SMM driver. #2 requires ALL SMM drivers update to explicit report the memory region it need to access.

That is why we chose #1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14868</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-01-20 21:01:11 +0000</bug_when>
    <thetext>From technical perspective, we can still use #1. A DXE driver can collect memory map, and send to SMM before EndOfDxe. There is no need to let SMM run gBS-&gt;GetMemMap.

I would say: from tech perspective, both options are OK.
#1 only requires core change.
#2 requires all SMM driver change. - Not sure the impact to OEM/ODM/IBV.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14871</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-01-21 01:03:31 +0000</bug_when>
    <thetext>Thanks, Jiewen, for the input.

I think with existed StandaloneMm model, SMM drivers that have &quot;cross&quot; memory accesses (DXE to SMM, or the other way around) already need to make changes to support it (such as adding new SMI handler to exchange common memory region through MmCommounicate protocol). In this case, adding a library/protocol call to unblock the common region would be a relatively minor concomitant.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14872</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-01-21 01:50:59 +0000</bug_when>
    <thetext>would you please try to add some examples on how to change the traditional SMM driver in EDKII, such as SMM variable, TCG SMM?


As such, other people can evaluate the impact and the new program model.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14873</commentid>
    <comment_count>7</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-01-21 01:54:11 +0000</bug_when>
    <thetext>One more question: How can we *enforce* the OS memory is excluded?

For example, what if an OEM SMM driver made mistake and report a BootServer memory as the communication buffer?

Is there a way to detect such error during boot ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14884</commentid>
    <comment_count>8</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-01-21 18:50:21 +0000</bug_when>
    <thetext>Sure, I will add example changes for variable and tcg drivers here.

To your question on OS memory exclusion, there is only best effort prevention at this moment. The core will stop accepting unblock memory requests at ready to lock event. Thus we still have proper protection set up before running 3rd party drivers/modules.

Agreed that there could still be ways to abuse this interface if DXE driver intentionally unblocks on potential OS memory regions. But from security perspective, I think this is still in parity with existed SMM solution (i.e. DXE driver can unblock SMM protection by allocating runtime memory at OS memory regions before ready to lock, then free it after SMM unblocks the access).

So a full sanity check on MM memory protection over OS region is necessary, but might be less ideal for MM core to decide without having access to OS memory map.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14885</commentid>
    <comment_count>9</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-01-21 19:02:51 +0000</bug_when>
    <thetext>If the BIN is enabled, (and I believe most systems have enabled BIN by default), even if you free a runtime memory, it will still be in BIN and reported as runtime memory, after EndOfDxe. The OS cannot use it.

I think it is very important to catch a developer&apos;s potential mistake. 
One example is: We have seen the side of SMRAM is NOT power of 2, which caused SMM protection useless. Later we add enforcement.
Another example: We *think* we have fixed all BootGuard memory migration. But later once we enable page level protection to enforce, we notice there are some not migrated.

I believe lacking of enforcement may become a big risk in the future.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14899</commentid>
    <comment_count>10</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-01-22 18:22:57 +0000</bug_when>
    <thetext>I think there are lots of ways malicious dxe code could cause problems with the current design.  Changing the memory map or gcd, converting memory regions, overwriting the code in the SMM core (etc).  So with that the point is the current feature and the proposed feature rely on platform code to not be malicious.  

We also strongly agree with your desire to catch accidents and make the platform developer well aware.  I think there are a few ways to do this.  

1 - instrument the Dxe API so that it checks the memory being requested to be made available.

2 - Provide some way to dump/evaluate this from the UEFI shell 

As you mentioned we have found numerous issues over time with the current solution.  For us there were found from our memory and paging audit tool found here: https://github.com/microsoft/mu_plus/blob/release/202008/UefiTestingPkg/AuditTests/PagingAudit/README.md  

This was never added to Edk2 and thus I have no idea how any edk2 developer has confidence that their SMM memory map/page tables are correct.  

Finally for the security aspect of this.  There are features within some versions of Windows 10 that validate the page table and make sure there are no overlapping holes.  This would still be the expected security solution.  Meaning that any bootloader / os entity that wants to confirm MM does not have access to conventional memory would need to implement something similar.  

Besides the two ideas above for &quot;enforcement&quot; what other ideas do you have?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14900</commentid>
    <comment_count>11</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-01-22 21:47:02 +0000</bug_when>
    <thetext>Yes, MSFT auditing tool is a great idea.
We have similar checking module - https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/MinPlatformPkg/Test/Library/TestPointCheckLib

IMHO, from high level, we can classify firmware code to different level.

==========

A) Firmware Platform Modules
They might be different in every platforms.
They might need porting in different platforms.
They might not be open-sourced.
...
Example: AcpiPlatform, RAS, PlatformInit, FSP, etc.

B) Firmware Infrastructure Module
They are not required to port across platform.
Most of them are in today&apos;s EDKII.
Most of them are open-sourced.
...
Example: Pei/Dxe/Smm Core, TCG, PCI, etc.

C) Non Firmware Module
They are not in a shipped firmware. It could be a UEFI shell too, such as UEFI SCT, or OS tool, such as chipsec.

==========

From security perspective, we have below corresponding audit/enforcement modules:

&quot;Audit&quot; means check. If error, then report and continue.
&quot;Enforcement&quot; means check. If error, then fail.

===============

A-1) Firmware Platform Audit Module
Example: HSTI - https://github.com/tianocore/edk2-platforms/tree/master/Silicon/Intel/KabylakeSiliconPkg/Hsti/Dxe

A-2) Firmware Enforcement Module

B-1) Firmware Infrastructure Audit Module
Example: MSFT Audit Tool, TestPointCheckLib.

B-2) Firmware Infrastructure Enforcement Module
Example: SMRR check at 
https://github.com/tianocore/edk2/blob/master/UefiCpuPkg/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLib.c, SmmCpuFeaturesInitializeProcessor().

The original SMM page level protection and SmmMemLib is also designed for this purpose.

C-1) Non-Firmware Audit Module
Example: Chipsec - https://github.com/chipsec/chipsec
Intel System Security Report (Part of Intel Hardware Shield Technology)

==============

Whenever it is possible, I recommend to add B-2.

Back to the proposal, it is a question on what do we trust, where B-2 module collect the info from.

Comparing #1 (collect from each driver) and #2 (collect from core):

#1. Platform SMM -&gt; SMM Core -&gt; SMM Paging Policy
    Platform SMM -&gt; DXE Core -&gt; UEFI memmap -&gt; OS

#2. Platform SMM -&gt; DXE Core -&gt; UEFI memmap -&gt; SMM Paging Policy
    Platform SMM -&gt; DXE Core -&gt; UEFI memmap -&gt; OS

#1 means we trust platform SMM drives do the right thing.
#2 means we trust DXE core do the right thing.

If the argument is: platform developers may make mistake, and core/infrastructure might miss a corner case only in some platforms, then I think the best way is to do *both*.

That means, B-2 module requires each platform SMM driver report, B-2 module only allow them to be comm buffer.
At same time, B-2 module still collects information from DXE core on the final memmap for a double check (from a small DXE agent to GetMemMap then pass to B2).

Ideally, all reported comm buffer MUST be in ACPI/Reserved/RuntimeData, then B-2 is happy. If they are not, the B-2 module will deadloop().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14901</commentid>
    <comment_count>12</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-01-22 21:57:37 +0000</bug_when>
    <thetext>Basically, it is quite similar to: &quot;1 - instrument the Dxe API so that it checks the memory being requested to be made available.&quot;

The only difference is that instrument DXE API means to call the check whenever there is request, while collecting info in EndOfDxe means to call the check once.

I think either of them can work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14902</commentid>
    <comment_count>13</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-01-22 22:09:15 +0000</bug_when>
    <thetext>Another difference:
1) Instrument DXE API means we assume platform SMM must call this API, which contains the check. We still reply on platform SMM driver do the right thing. But a platform SMM may just trigger SMI directly (I am not sure how easy or difficult.)

2) A small agent in DXE to report memory map, mean we only reply this agent to report final memmap for double check.

We have SmmMemLib API there and we assume every SMM driver should call this API to do the check before use. However, we notice some modules DO NOT call this API and start to access comm buffer directly. Then later it is caught by PF due to the paging enforcement by SMM. We cannot trust platform developer always do the right thing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14907</commentid>
    <comment_count>14</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-01-24 03:17:03 +0000</bug_when>
    <thetext>Tcg2Smm change example, which breaks one module into 2 and then unblock NVS region, is posted here:
https://github.com/kuqin12/mu_basecore/commit/c0784f95ffe31d4d65f6230657adfc63294a693d

Variable DXE SMM change that unblocks runtime cache regions is posted here:
https://github.com/kuqin12/mu_basecore/commit/189f90318d1256c2e72a1a67d31e3176588d8e5b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14908</commentid>
    <comment_count>15</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-01-24 03:45:40 +0000</bug_when>
    <thetext>I wonder if we can provide a method to fetch paging policy (or at least unblocked regions) from MM.

On one hand, at certain boot event (EndofDxe, ReadyToLock, etc), a DXE agent can query the MM memory information and validate it against DXE memmap. This DXE module should be satisfied only when all the accessible regions outside of MMRAM are ACPI/Reserved/RuntimeData.

On the other, if any entity (i.e. UEFI shell app) would like to audit the MM memory map, the same method can be leveraged for this purpose as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15225</commentid>
    <comment_count>16</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-05 13:22:17 +0000</bug_when>
    <thetext>Series merged as commit range c5740f360636..05a757c9c61f and commit 59a3ccb09e7a, via &lt;https://github.com/tianocore/edk2/pull/1475&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3047</bug_id>
          
          <creation_ts>2020-11-03 05:16:07 +0000</creation_ts>
          <short_desc>Acpiview: Add support for parsing ACPI PCCT table</short_desc>
          <delta_ts>2021-04-30 13:36:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14185</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-03 05:16:07 +0000</bug_when>
    <thetext>The ACPI PCCT Table is used to describe how the OSPM can communicate with entities outside the platform. It describes which memory spaces correspond to which entity as well as a few of the needed information to handle the communications.

Add PCCT parser support to Acpiview so that the table can be examined from the UEFI shell.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14195</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-03 20:40:26 +0000</bug_when>
    <thetext>Sami is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14220</commentid>
    <comment_count>2</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-04 07:19:56 +0000</bug_when>
    <thetext>Link for patch: https://edk2.groups.io/g/devel/topic/patch_v2_resend_1_2/78027439</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14222</commentid>
    <comment_count>3</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-04 07:37:26 +0000</bug_when>
    <thetext>Please ignore previous link for the patch. 

The correct link for patch is: https://edk2.groups.io/g/devel/topic/patch_v2_resend_2_2/78027598</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15847</commentid>
    <comment_count>4</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-04-30 13:35:04 +0000</bug_when>
    <thetext>This has been fixed in edk2 master at https://github.com/tianocore/edk2/commit/d4633b36b94f7b4a1f41901657cbbff452173d35</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15850</commentid>
    <comment_count>5</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-04-30 13:36:03 +0000</bug_when>
    <thetext>This has been fixed in edk2 master at https://github.com/tianocore/edk2/commit/d4633b36b94f7b4a1f41901657cbbff452173d35</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3457</bug_id>
          
          <creation_ts>2021-06-14 03:31:46 +0000</creation_ts>
          <short_desc>Support measured AMD SEV boot with kernel/initrd/cmdline</short_desc>
          <delta_ts>2021-08-04 03:21:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dov Murik">dovmurik</reporter>
          <assigned_to name="Dov Murik">dovmurik</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16359</commentid>
    <comment_count>0</comment_count>
    <who name="Dov Murik">dovmurik</who>
    <bug_when>2021-06-14 03:31:46 +0000</bug_when>
    <thetext>Booting with SEV prevented the loading of kernel, initrd, and kernel
command-line via QEMU fw_cfg interface because they arrive from the VMM
which is untrusted in SEV.

However, in some cases the kernel, initrd, and cmdline are not secret
but should not be modified by the host.  In such a case, we want to
verify inside the trusted VM that the kernel, initrd, and cmdline are
indeed the ones expected by the Guest Owner, and only if that is the
case go on and boot them up (removing the need for grub inside OVMF in
that mode).

This was originally posted as:
https://edk2.groups.io/g/devel/message/75567
https://www.mail-archive.com/devel@edk2.groups.io/msg31545.html

Initial refactoring (first step) was posted at:
https://edk2.groups.io/g/devel/message/76265
https://www.mail-archive.com/devel@edk2.groups.io/msg32227.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16375</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-15 21:37:12 +0000</bug_when>
    <thetext>The patch has been sent for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16418</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-22 06:46:45 +0000</bug_when>
    <thetext>The v1 patch set is on the list and its URL(s) have been marked in comment 0; setting IN_PROGRESS status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16433</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-23 07:51:32 +0000</bug_when>
    <thetext>* [edk2-devel] [RESEND] [PATCH v2 0/3]
  OvmfPkg: Use QemuKernelLoaderFs to read cmdline/initrd

http://mid.mail-archive.com/20210617121700.2883073-1-dovmurik@linux.ibm.com
https://listman.redhat.com/archives/edk2-devel-archive/2021-June/msg00767.html
https://edk2.groups.io/g/devel/message/76664</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16473</commentid>
    <comment_count>4</comment_count>
    <who name="Dov Murik">dovmurik</who>
    <bug_when>2021-06-28 11:06:21 +0000</bug_when>
    <thetext>v3 of the first series posted to mailing list:

[edk2-devel] [PATCH v3 0/5] OvmfPkg: Use QemuKernelLoaderFs to read cmdline/initrd

https://listman.redhat.com/archives/edk2-devel-archive/2021-June/msg01286.html
https://edk2.groups.io/g/devel/message/77174</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16484</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-29 08:54:11 +0000</bug_when>
    <thetext>(In reply to Dov Murik from comment #4)
&gt; v3 of the first series posted to mailing list:
&gt; 
&gt; [edk2-devel] [PATCH v3 0/5] OvmfPkg: Use QemuKernelLoaderFs to read cmdline/initrd
&gt; 
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-June/msg01286.html
&gt; https://edk2.groups.io/g/devel/message/77174

Merged as commit range d1fc3d7ef3cb..9421f5ab8d1e, via &lt;https://github.com/tianocore/edk2/pull/1770&gt;.

(The BZ remains open for the upcoming (related) patch sets.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16553</commentid>
    <comment_count>6</comment_count>
    <who name="Dov Murik">dovmurik</who>
    <bug_when>2021-07-06 04:59:47 +0000</bug_when>
    <thetext>v2 of the first series posted to mailing list:

* [edk2-devel] [PATCH v2 00/11] Measured SEV boot with kernel/initrd/cmdline

https://edk2.groups.io/g/devel/message/77505
https://listman.redhat.com/archives/edk2-devel-archive/2021-July/msg00119.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16661</commentid>
    <comment_count>7</comment_count>
    <who name="Dov Murik">dovmurik</who>
    <bug_when>2021-07-20 04:08:03 +0000</bug_when>
    <thetext>v3 of the second series posted to mailing list:

* [edk2-devel] [PATCH v3 00/11] Measured SEV boot with kernel/initrd/cmdline

https://edk2.groups.io/g/devel/message/77955
https://listman.redhat.com/archives/edk2-devel-archive/2021-July/msg00565.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16681</commentid>
    <comment_count>8</comment_count>
    <who name="Dov Murik">dovmurik</who>
    <bug_when>2021-07-22 05:29:52 +0000</bug_when>
    <thetext>v4 of the second series posted to mailing list:

* [edk2-devel] [PATCH v4 00/11] Measured SEV boot with kernel/initrd/cmdline

https://edk2.groups.io/g/devel/message/78075
https://listman.redhat.com/archives/edk2-devel-archive/2021-July/msg00671.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16708</commentid>
    <comment_count>9</comment_count>
    <who name="Dov Murik">dovmurik</who>
    <bug_when>2021-07-27 15:10:14 +0000</bug_when>
    <thetext>v5 of the second series posted to mailing list:

* [edk2-devel] [PATCH v5 00/11] Measured SEV boot with kernel/initrd/cmdline

https://edk2.groups.io/g/devel/message/78250
https://listman.redhat.com/archives/edk2-devel-archive/2021-July/msg00866.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16769</commentid>
    <comment_count>10</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 22:39:29 +0000</bug_when>
    <thetext>this patch has been merged. can you close it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16772</commentid>
    <comment_count>11</comment_count>
    <who name="Dov Murik">dovmurik</who>
    <bug_when>2021-08-04 03:21:55 +0000</bug_when>
    <thetext>Merged to master in PR #1843 [1] on 2021-07-29.

[1] https://github.com/tianocore/edk2/pull/1843

Closing.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3339</bug_id>
          
          <creation_ts>2021-04-15 18:53:33 +0000</creation_ts>
          <short_desc>ACPI Code First -  RASF Gen2</short_desc>
          <delta_ts>2021-10-13 21:49:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.a.rothman</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15705</commentid>
    <comment_count>0</comment_count>
      <attachid>699</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-15 18:53:33 +0000</bug_when>
    <thetext>Created attachment 699
CodeFirst_RASF-Gen2_ACPI_ver1.docx

This ECR is related to a proposal to upgrade the current RASF table.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15743</commentid>
    <comment_count>1</comment_count>
    <who name="Michael A. Rothman">michael.a.rothman</who>
    <bug_when>2021-04-20 17:29:53 +0000</bug_when>
    <thetext>Can we move the definition to its own “RAS2” section to keep RASF clean?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15755</commentid>
    <comment_count>2</comment_count>
      <attachid>703</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-21 09:09:43 +0000</bug_when>
    <thetext>Created attachment 703
ACPI-6_4-ECR-RAS-F_Updates_0.91

Updated per feedback to a new RAS2 table / section</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15765</commentid>
    <comment_count>3</comment_count>
      <attachid>704</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-22 13:55:30 +0000</bug_when>
    <thetext>Created attachment 704
CodeFirst_RASF-Gen2_ACPI_ver92

Updated to use the code-first ECR Template</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15801</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-27 21:42:33 +0000</bug_when>
    <thetext>Samer is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15943</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-06 18:59:49 +0000</bug_when>
    <thetext>This ECR was approved by UEFI Forum as new content to be included in future ACPI 6.next specification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17543</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-13 21:49:46 +0000</bug_when>
    <thetext>Link to ASWG approved mantis for completeness: https://mantis.uefi.org/mantis/view.php?id=2228</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>699</attachid>
            <date>2021-04-15 18:53:33 +0000</date>
            <delta_ts>2021-04-15 18:53:33 +0000</delta_ts>
            <desc>CodeFirst_RASF-Gen2_ACPI_ver1.docx</desc>
            <filename>CodeFirst_RASF-Gen2_ACPI_ver1.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>29398</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>703</attachid>
            <date>2021-04-21 09:09:43 +0000</date>
            <delta_ts>2021-04-21 09:09:43 +0000</delta_ts>
            <desc>ACPI-6_4-ECR-RAS-F_Updates_0.91</desc>
            <filename>ACPI-6_4-ECR-RAS-F_Updates_0.91.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>62082</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>704</attachid>
            <date>2021-04-22 13:55:30 +0000</date>
            <delta_ts>2021-04-22 13:55:30 +0000</delta_ts>
            <desc>CodeFirst_RASF-Gen2_ACPI_ver92</desc>
            <filename>CodeFirst_RASF-Gen2_ACPI_ver92.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>34876</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3210</bug_id>
          
          <creation_ts>2021-02-04 02:59:01 +0000</creation_ts>
          <short_desc>BrotliCompress can&apos;t run in Linux machine</short_desc>
          <delta_ts>2021-02-22 20:22:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to name="yunhua feng">fengyunhua</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15013</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-04 02:59:01 +0000</bug_when>
    <thetext>1. BaseTools\BinWrappers\PosixLike\BrotliCompress needs to be updated. 
2. BaseTools\BinWrappers\PosixLike\Brotli needs to be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15014</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-04 02:59:23 +0000</bug_when>
    <thetext>Yunhua takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15098</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-22 20:22:33 +0000</bug_when>
    <thetext>Fix it @078400ee15e7b250e4dfafd840c2e0c19835e16b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3699</bug_id>
          
          <creation_ts>2021-10-20 03:04:54 +0000</creation_ts>
          <short_desc>MdeModulePkg\Library\DxeCapsuleLibFmp use deprecated interface to lock variable</short_desc>
          <delta_ts>2021-11-26 09:59:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jie Yang">jie.yang</reporter>
          <assigned_to name="Jie Yang">jie.yang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17583</commentid>
    <comment_count>0</comment_count>
    <who name="Jie Yang">jie.yang</who>
    <bug_when>2021-10-20 03:04:54 +0000</bug_when>
    <thetext>The code in DxeCapsuleLibFmp call the deprecated interface VariableLockRequestToLoc because the comment of interface VariableLockRequestToLock says &quot;  DEBUG ((DEBUG_WARN, &quot;!!! DEPRECATED INTERFACE !!! %a() will go away soon!\n&quot;, __FUNCTION__));
  DEBUG ((DEBUG_WARN, &quot;!!! DEPRECATED INTERFACE !!! Please move to use Variable Policy!\n&quot;));
  DEBUG ((DEBUG_WARN, &quot;!!! DEPRECATED INTERFACE !!! Variable: %g %s\n&quot;, VendorGuid, VariableName));&quot;. Thus, we should use Variable Policy to lock variable instead of the deprecated interface.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17607</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-26 01:04:45 +0000</bug_when>
    <thetext>Jie is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17845</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 09:59:52 +0000</bug_when>
    <thetext>This has been fixed at 8c8867c5da8e059ab98a6108f8182700f298c6f5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3359</bug_id>
          
          <creation_ts>2021-04-27 14:49:40 +0000</creation_ts>
          <short_desc>Support Target, ToolChain, or Architecture declared in DSC [BuildOptions] sections</short_desc>
          <delta_ts>2021-05-10 19:33:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc>https://github.com/mdkinney/edk2/tree/Example_MdeModulePkg_NewTargetToolChainArch</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>steven.shi</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15791</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-27 14:49:40 +0000</bug_when>
    <thetext>or the CPU architecture names.  However, the implementation in BaseTools requires these
to be defined in tools_def.txt.  If they are not defined in tools_def.txt and are only
defined in the DSC file, the build fails.

The following branch adds 4 DSC files to the MdeModulePkg that demonstrate the 
build failures when adding a build target called MYTARGET a tool chain called
MYTOOLCHAIN or an architecture called MYCPUARCH. 

* https://github.com/mdkinney/edk2/tree/Example_MdeModulePkg_NewTargetToolChainArch

The following are the logs of the build failures:
==================================================
build -a IA32 -t VS2019 -p MdeModulePkg\ExampleBuildTargetMdeModulePkg.dsc -b MYTARGET
    Build environment: Windows-10-10.0.18362-SP0
    Build start time: 10:21:08, Apr.27 2021

    WORKSPACE        = c:\work\github\tianocore\edk2
    EDK_TOOLS_PATH   = c:\work\github\tianocore\edk2\basetools
    EDK_TOOLS_BIN    = c:\work\github\tianocore\edk2\basetools\bin\win32
    CONF_PATH        = c:\work\github\tianocore\edk2\conf
    PYTHON_COMMAND   = py -3


    Processing meta-data .
    Architecture(s)  = IA32
    Build target     = MYTARGET
    Toolchain        = VS2019

    Active Platform          = c:\work\github\tianocore\edk2\MdeModulePkg\ExampleBuildTargetMdeModulePkg.dsc
    ........

    build.py...
     : error F000: CC_PATH doesn&apos;t exist in VS2019 ToolChain and IA32 Arch.
            [c:\work\github\tianocore\edk2\MdeModulePkg\Universal\PCD\Dxe\Pcd.inf]
    .

    - Failed -
    Build end time: 10:21:18, Apr.27 2021
    Build total time: 00:00:10
==================================================
build -a MYCPUARCH -t VS2019 -p MdeModulePkg\ExampleArchitectureMdeModulePkg.dsc
    Build environment: Windows-10-10.0.18362-SP0
    Build start time: 10:22:26, Apr.27 2021

    WORKSPACE        = c:\work\github\tianocore\edk2
    EDK_TOOLS_PATH   = c:\work\github\tianocore\edk2\basetools
    EDK_TOOLS_BIN    = c:\work\github\tianocore\edk2\basetools\bin\win32
    CONF_PATH        = c:\work\github\tianocore\edk2\conf
    PYTHON_COMMAND   = py -3



    Processing meta-data .Architecture(s)  = MYCPUARCH
    Build target     = DEBUG
    Toolchain        = VS2019

    Active Platform          = c:\work\github\tianocore\edk2\MdeModulePkg\ExampleArchitectureMdeModulePkg.dsc
    ....

    - Failed -
    Build end time: 10:22:31, Apr.27 2021
    Build total time: 00:00:04
================================================== 
build -a X64 -t MYTOOLCHAIN -p MdeModulePkg\ExampleToolChainMdeModulePkg.dsc
    Build environment: Windows-10-10.0.18362-SP0
    Build start time: 10:25:00, Apr.27 2021

    WORKSPACE        = c:\work\github\tianocore\edk2
    EDK_TOOLS_PATH   = c:\work\github\tianocore\edk2\basetools
    EDK_TOOLS_BIN    = c:\work\github\tianocore\edk2\basetools\bin\win32
    CONF_PATH        = c:\work\github\tianocore\edk2\conf
    PYTHON_COMMAND   = py -3
    build: : warning: Tool chain [MYTOOLCHAIN] is not defined


    build.py...
     : error 4000: Not available
            [MYTOOLCHAIN] not defined. No toolchain available for build!


    - Failed -
    Build end time: 10:25:00, Apr.27 2021
    Build total time: 00:00:00
==================================================
build  --conf=MdeModulePkg/Conf -a MYCPUARCH -t MYTOOLCHAIN -b MYTARGET -p MdeModulePkg\ExampleAllMdeModulePkg.dsc
    Build environment: Windows-10-10.0.18362-SP0
    Build start time: 10:26:24, Apr.27 2021

    WORKSPACE        = c:\work\github\tianocore\edk2
    EDK_TOOLS_PATH   = c:\work\github\tianocore\edk2\basetools
    EDK_TOOLS_BIN    = c:\work\github\tianocore\edk2\basetools\bin\win32
    CONF_PATH        = C:\work\GitHub\tianocore\edk2\MdeModulePkg\Conf
    PYTHON_COMMAND   = py -3
    build: : warning: Tool chain [MYTOOLCHAIN] is not defined


    build.py...
     : error 4000: Not available
            [MYTOOLCHAIN] not defined. No toolchain available for build!


    - Failed -
    Build end time: 10:26:24, Apr.27 2021
    Build total time: 00:00:00
==================================================
build --conf=MdeModulePkg\Conf
    Build environment: Windows-10-10.0.18362-SP0
    Build start time: 10:23:40, Apr.27 2021

    WORKSPACE        = c:\work\github\tianocore\edk2
    EDK_TOOLS_PATH   = c:\work\github\tianocore\edk2\basetools
    EDK_TOOLS_BIN    = c:\work\github\tianocore\edk2\basetools\bin\win32
    CONF_PATH        = C:\work\GitHub\tianocore\edk2\MdeModulePkg\Conf
    PYTHON_COMMAND   = py -3
    build: : warning: Tool chain [MYTOOLCHAIN] is not defined


    build.py...
     : error 4000: Not available
            [MYTOOLCHAIN] not defined. No toolchain available for build!


    - Failed -
    Build end time: 10:23:41, Apr.27 2021
    Build total time: 00:00:00
==================================================

There are 2 issues that need to be addressed to fix these build failures:

1) BaseTools expands the &apos;*&apos; in tools_def and replaces it with the names
   of the build targets, tool chains, and architectures that are present
   in tools_def.txt.  The statements with the &apos;*&apos; are deleted.  This means
   a new name added in a DSC file can not be expanded because the &apos;*&apos;
   version of the statements have been removed.

   The recommended fix is not not expand the statements from tools_def.txt
   and instead only expand when the full context of information is known
   after parsing tools_def.txt and the platform DSC file.

2) The check for a supported FAMILY and TOOLCHAIN is performed by looking
   only at tools_def.txt.  Knowing the TOOLCHAIN and FAMILY is required to
   generate makefiles of the correct type.

   The recommended fix is to pre-scan the platform DSC file for FAMILY and 
   TOOLCHAIN declarations in [BuildOptions] sections earlier in the build
   before the FAMILY and TOOLCHAIN need to be known.

One attribute of this change is that is allows a Platform DSC file to 
provides the complete set of target, toolchain, arch, tool, and attribute
information and and build with an empty tools_def.txt file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15795</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-27 21:36:32 +0000</bug_when>
    <thetext>Mike is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15819</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-29 03:41:23 +0000</bug_when>
    <thetext>Patch review email
  https://edk2.groups.io/g/devel/message/74510

Patch review email V2
* Use DSC parser to handle !if and $(MACROS)

  https://edk2.groups.io/g/devel/message/74583

Patch review email V3
* Fix parsing of TOOLCHAIN and FAMILY from DSC file.

  https://edk2.groups.io/g/devel/message/74599</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15820</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-29 03:42:53 +0000</bug_when>
    <thetext>Commit:
https://github.com/tianocore/edk2/commit/ab957f036f6711869283217227480b109aedc8ef

GitHub PR:
https://github.com/tianocore/edk2/pull/1617</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15842</commentid>
    <comment_count>4</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-04-30 08:23:23 +0000</bug_when>
    <thetext>This patch causes the CLANGPDB build fails in both windows and Linux. If revert this patch, the CLANGPDB build pass.

•	Windows build reproduce steps:
1. Download and install LLVM 11 from here: https://github.com/llvm/llvm-project/releases/download/llvmorg-11.0.0/LLVM-11.0.0-win64.exe. After install, please verify the clang version is 11.0.0. as below.
C:\Project\edkrepo\ServerGen2&gt;&quot;C:\Program Files\LLVM\bin\clang.exe&quot; -v
clang version 11.0.0
Target: x86_64-pc-windows-msvc
Thread model: posix
InstalledDir: C:\Program Files\LLVM\bin

 2. Set clang tool path and build through clang:
C:\Project\edk2git\edk2&gt;set CLANG_BIN=C:\Program Files\LLVM\bin\
C:\Project\edk2git\edk2&gt;build -p OvmfPkg\OvmfPkgIa32.dsc -a IA32 -t CLANGPDB -b DEBUG
Building ... c:\project\edk2git\edk2\MdePkg\Library\UefiMemoryAllocationLib\UefiMemoryAllocationLib.inf [IA32]
Building ... c:\project\edk2git\edk2\MdePkg\Library\UefiBootServicesTableLib\UefiBootServicesTableLib.inf [IA32]

Microsoft (R) Program Maintenance Utility Version 14.00.24210.0
Copyright (C) Microsoft Corporation.  All rights reserved.

makefile(86) : fatal error U1001: syntax error : illegal character &apos;*&apos; in macro
Stop.

Microsoft (R) Program Maintenance Utility Version 14.00.24210.0
Copyright (C) Microsoft Corporation.  All rights reserved.

makefile(86) : fatal error U1001: syntax error : illegal character &apos;*&apos; in macro
Stop.

Microsoft (R) Program Maintenance Utility Version 14.00.24210.0
Copyright (C) Microsoft Corporation.  All rights reserved.

•	Linux build reproduce steps:
Download the pre-Built Binaries, and verify the clang version as 11.0.0.
jshi19@ub2-uefi-b01:~/llvm$ wget https://github.com/llvm/llvm-project/releases/download/llvmorg-11.0.0/clang+llvm-11.0.0-x86_64-linux-gnu-ubuntu-20.04.tar.xz
jshi19@ub2-uefi-b01:~/llvm$ tar -xvf clang+llvm-11.0.0-x86_64-linux-gnu-ubuntu-20.04.tar.xz
jshi19@ub2-uefi-b01:~/llvm$ ./clang+llvm-11.0.0-x86_64-linux-gnu-ubuntu-20.04/bin/clang -v
clang version 11.0.0 (https://github.com/llvm/llvm-project.git 0160ad802e899c2922bc9b29564080c22eb0908c)
Target: x86_64-unknown-linux-gnu
Thread model: posix

Set clang tool path and build EGS through clang:
jshi19@ub2-uefi-b01:~/wksp_efi/edk2-2$ export CLANG_BIN=~/llvm/clang+llvm-11.0.0-x86_64-linux-gnu-ubuntu-20.04/bin/
jshi19@ub2-uefi-b01:~/wksp_efi/edk2-2$ source edksetup.sh
jshi19@ub2-uefi-b01:~/wksp_efi/edk2-2$ make -C BaseTools/
jshi19@ub2-uefi-b01:~/wksp_efi/edk2-2$ build -p OvmfPkg/OvmfPkgIa32.dsc -a IA32 -t CLANGPDB -b DEBUG
…
lld-link: error: could not open &apos;common-page-size=0x1000&apos;: No such file or directory</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15843</commentid>
    <comment_count>5</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-04-30 08:28:53 +0000</bug_when>
    <thetext>Please help to fix the Clang build regression failure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15876</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-05-01 13:06:12 +0000</bug_when>
    <thetext>Resolved 3 issues that impact CLANGPDB builds

* Expand wildcard &apos;*&apos; TOOL in makefile autogen
* BuildRuleFamily high priority then Family when both present
* Save/Restore global context when using DSC parser earlier
  in the build

Patch email review:

https://edk2.groups.io/g/devel/message/74684</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15879</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-05-02 20:22:02 +0000</bug_when>
    <thetext>Same issue reported on OVMF with XCODE5 toolchain

The patch for review also resolves this issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15890</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-05-03 14:38:01 +0000</bug_when>
    <thetext>Commit:
https://github.com/tianocore/edk2/commit/8c8f49f0dc86e3c58d94766e6b194b83c1bef5c9

GitHub PR:
https://github.com/tianocore/edk2/pull/1622</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15959</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-05-08 11:38:39 +0000</bug_when>
    <thetext>Reopen due to issue with selecting the correct GUIDed tool when the same
GUIDed tool GUID value is specified in both tools_def.txt and the platform
DSC file.

If all patches associated with 3359 are reverted, then this issue can 
not be reproduced.

It is using the one from tools_def.txt in some cases, and this can cause
build and/or boot failures.

The change to preserve the &apos;*&apos; in keys from tools_def.txt in 
ToolsDefTxtDictionary is causing the incorrect tool to be listed in the GuidedSectionTools.txt file in the FV directory by CreateGuidedSectionToolsFile() in build.py.

It is also causing the incorrect tool being selected by FindExtendTool()
in GenFds stage.

There is workaround that has been present in PlatformAutoGen.py for 
a long time that is updating the contents of ToolsDefTxtDictionary based
on platform DSC content related to GUIDed tools.  ToolsDefTxtDictionary
should only contain contents from tools_def.txt so all consumers can
use ToolsDefTxtDictionary consistently.

CreateGuidedSectionToolsFile() and FindExtendTool() should be updated
to evaluate both tools_def.txt and the platform DSC file for the proper
GUIDed tool selection.

PlatformAutoGen.py is also append &apos;GUID&apos; attributes when both
are present in tools_def.txt and the platform DSC.  &apos;GUID&apos; attributes
should be treated like &apos;PATH&apos; attributes so the higher priority one
is used without appending.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15986</commentid>
    <comment_count>10</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-05-10 19:04:13 +0000</bug_when>
    <thetext>Patch review email:

https://edk2.groups.io/g/devel/message/74845</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15987</commentid>
    <comment_count>11</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-05-10 19:33:20 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/ef3840c1ff320698523dd6b94ba7c86354392784

GitHub PR:

https://github.com/tianocore/edk2/pull/1631</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3851</bug_id>
          
          <creation_ts>2022-02-28 01:14:33 +0000</creation_ts>
          <short_desc>Add support for programming bRefClkFreq (Reference Clock Frequency value) on UFS cards</short_desc>
          <delta_ts>2022-03-25 08:23:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</reporter>
          <assigned_to name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>mateusz.albecki</cc>
    
    <cc>Purna.Chandra.Rao.Bandaru</cc>
          <deadline>2022-03-31</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18468</commentid>
    <comment_count>0</comment_count>
      <attachid>936</attachid>
    <who name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</who>
    <bug_when>2022-02-28 01:14:33 +0000</bug_when>
    <thetext>Created attachment 936
Extract from JESD220 JEDEC STANDARD Universal Flash Storage (UFS)

When the UFS card comes out of Manufacturer, bRefClkFreq attribute is set to 1h on the UFS card as per the &quot;MDV” (Manufacturer Default Value) specified by the spec JESD220. Depends on the UFS host system environment it need to be set.
   
Reference Clock Frequency value
0h:19.2 MHz
1h: 26 MHz
2h: 38.4 MHz
3h: Obsolete
Others: Reserved

Design:
bRefClkFreq attribute indicates to the device the frequency of the REF_CLK signal, and its default value corresponds to 26 MHz as per the MDV value of the UFS card, and hence different UFS host systems may set to different value based on their system environment.
This require EDKII UFS pass through driver (MdeModulePkg/Bus/Ufs/UfsPassThruDxe) to receive the input from EDKII_UFS_HC_PLATFORM_PROTOCOL/ gEdkiiUfsHcPlatformProtocolGuid before it checks and programs. Also, this need to be done before EDKII_UFS_HC_PLATFORM_PROTOCOL switches to higher gears.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18484</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 21:40:46 +0000</bug_when>
    <thetext>Purna: will you provide the patch for this request?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18529</commentid>
    <comment_count>2</comment_count>
    <who name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</who>
    <bug_when>2022-03-03 05:33:25 +0000</bug_when>
    <thetext>I have send the first version of the patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18530</commentid>
    <comment_count>3</comment_count>
    <who name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</who>
    <bug_when>2022-03-03 05:35:23 +0000</bug_when>
    <thetext>I have sent the first version of the patch and is being reviewed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18569</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-03-08 20:14:38 +0000</bug_when>
    <thetext>V1 patch sent at: https://edk2.groups.io/g/devel/message/87257
V2 patch sent at: https://edk2.groups.io/g/devel/message/87310
V3 patch sent at: https://edk2.groups.io/g/devel/message/87349</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18593</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-03-09 21:15:37 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/2608
Commit - https://github.com/tianocore/edk2/commit/f06941cc46d002f66875b6f2f711fa3df2775da4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18718</commentid>
    <comment_count>6</comment_count>
    <who name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</who>
    <bug_when>2022-03-25 08:23:22 +0000</bug_when>
    <thetext>sent first version of the patch</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>936</attachid>
            <date>2022-02-28 01:14:33 +0000</date>
            <delta_ts>2022-02-28 01:14:33 +0000</delta_ts>
            <desc>Extract from JESD220 JEDEC STANDARD Universal Flash Storage (UFS)</desc>
            <filename>Reference Clock Frequency value Attribute on UFS card.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>15925</size>
            <attacher name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3169</bug_id>
          
          <creation_ts>2021-01-14 21:32:37 +0000</creation_ts>
          <short_desc>Support Tcg2Smm under Standalone MM environment</short_desc>
          <delta_ts>2021-03-05 13:23:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>lisa.huang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14813</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-01-14 21:32:37 +0000</bug_when>
    <thetext>Current Tcg2Smm implementation mixed the usage of boot services and SMM resources, which causes difficulties in using this driver under standalone MM environment. This ticket is to propose a potential solution to resolve this issue.

The general propose is:
1. Break the Tcg2Smm driver into 2 drivers: Tcg2Acpi and Tcg2Mm (might need 2 instances for standalone and traditional)
2. New Tcg2Mm will cover the original MM handler registration from Tcg2Smm; New Tcg2Acpi will cover the original ACPI patch and report from Tcg2Smm;
3. In the new Tcg2Mm driver, register an additional designated MM handler that will accept information of NVS region address from DXE. Upon returning, this handler will communicate back the SwSmiInputValue returned by SwDispatch-&gt;Register call;
4. In the new Tcg2Dxe driver, it will communicate to MM environment about NVS region address once it is available and then patch the ACPI table with returned SwSmiInputValue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14815</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-15 04:04:07 +0000</bug_when>
    <thetext>I&apos;m confused about your mention of &quot;new Tcg2Dxe driver&quot;.

Is that a typo? Do you actually mean &quot;new Tcg2Acpi driver&quot;?

Tcg2Dxe is an existent driver, and it is consumed by such platforms as well that do not include Tcg2Smm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14817</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-01-15 13:20:17 +0000</bug_when>
    <thetext>(In reply to kun.qin from comment #0)
&gt; Current Tcg2Smm implementation mixed the usage of boot services and SMM
&gt; resources, which causes difficulties in using this driver under standalone
&gt; MM environment. This ticket is to propose a potential solution to resolve
&gt; this issue.
&gt; 
&gt; The general propose is:
&gt; 1. Break the Tcg2Smm driver into 2 drivers: Tcg2Acpi and Tcg2Mm (might need
&gt; 2 instances for standalone and traditional)
&gt; 2. New Tcg2Mm will cover the original MM handler registration from Tcg2Smm;
&gt; New Tcg2Acpi will cover the original ACPI patch and report from Tcg2Smm;
&gt; 3. In the new Tcg2Mm driver, register an additional designated MM handler
&gt; that will accept information of NVS region address from DXE. Upon returning,
&gt; this handler will communicate back the SwSmiInputValue returned by
&gt; SwDispatch-&gt;Register call;
&gt; 4. In the new Tcg2Dxe driver, it will communicate to MM environment about
&gt; NVS region address once it is available and then patch the ACPI table with
&gt; returned SwSmiInputValue.

Correction #4 should be:
4. In the new &quot;Tcg2Acpi&quot; driver, it will communicate to MM environment about
NVS region address once it is available and then patch the ACPI table with
returned SwSmiInputValue.

Tcg2Dxe should not need any change for this feature request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14842</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-01-19 17:10:17 +0000</bug_when>
    <thetext>Here is an example commit that works under Standalone MM environment:
https://github.com/kuqin12/mu_basecore/commit/d7ca120b40a5a6d070e2c46073eda31e2d980fe7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14846</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-19 21:40:34 +0000</bug_when>
    <thetext>Break Tcg2Smm into two modules.

Include Jiewen for more discussion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15166</commentid>
    <comment_count>5</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2021-03-01 02:57:20 +0000</bug_when>
    <thetext>Hi qin, 

do you have the expected completion time of this task?

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15167</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-01 03:00:54 +0000</bug_when>
    <thetext>Hi Jiaxin,

The patch for this change is sent in this patch series: https://edk2.groups.io/g/devel/message/72239. This ticket should be completed once the patches are merged.

Thanks,
Kun</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15168</commentid>
    <comment_count>7</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2021-03-01 03:09:52 +0000</bug_when>
    <thetext>that will be great, thanks Kun,we will review the patch.

Thanks,
jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15226</commentid>
    <comment_count>8</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-05 13:23:23 +0000</bug_when>
    <thetext>Series merged as commit range e2d6833c1147..8802583c48e8, via &lt;https://github.com/tianocore/edk2/pull/1475&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3655</bug_id>
          
          <creation_ts>2021-09-26 02:34:56 +0000</creation_ts>
          <short_desc>Calling deprecated interface in FmpDevicePkg</short_desc>
          <delta_ts>2021-11-26 10:00:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jie Yang">jie.yang</reporter>
          <assigned_to name="Jie Yang">jie.yang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17382</commentid>
    <comment_count>0</comment_count>
    <who name="Jie Yang">jie.yang</who>
    <bug_when>2021-09-26 02:34:56 +0000</bug_when>
    <thetext>The code in FmpDevicePkg call the deprecated interface VariableLockRequestToLock, which is in VariableRequestToLock.c. The comment of interface VariableLockRequestToLock says &quot;  DEBUG ((DEBUG_WARN, &quot;!!! DEPRECATED INTERFACE !!! %a() will go away soon!\n&quot;, __FUNCTION__));
  DEBUG ((DEBUG_WARN, &quot;!!! DEPRECATED INTERFACE !!! Please move to use Variable Policy!\n&quot;));
  DEBUG ((DEBUG_WARN, &quot;!!! DEPRECATED INTERFACE !!! Variable: %g %s\n&quot;, VendorGuid, VariableName));&quot;. So I changed the code in FmpDevicePkg not using deprecated interface</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17392</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-28 01:24:37 +0000</bug_when>
    <thetext>Jie takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17846</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:00:22 +0000</bug_when>
    <thetext>This has been fixed 2f6f3329add328103cb0654b71d7b814dc0c9759</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3048</bug_id>
          
          <creation_ts>2020-11-03 05:19:42 +0000</creation_ts>
          <short_desc>Acpiview: Add support for parsing Arm Error Source Table (AEST)</short_desc>
          <delta_ts>2021-01-11 00:39:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14186</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-03 05:19:42 +0000</bug_when>
    <thetext>The Arm Error Source Table (AEST) described in the ACPI for the Armv8 RAS Extensions 1.1 Platform Design Document, dated 28 September 2020.
(https://developer.arm.com/documentation/den0085/0101/)

AEST enables kernel-first handling of errors in a system that supports the Armv8 RAS extensions. It covers Armv8.2+ RAS extensions for PEs and the RAS system architecture for non-PE system components.

Add an AEST parser to Acpiview so that the contents of the AEST table can be examined from the UEFI shell.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14194</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-03 20:39:57 +0000</bug_when>
    <thetext>Sami is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14218</commentid>
    <comment_count>2</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-04 06:06:47 +0000</bug_when>
    <thetext>Link for patch: https://edk2.groups.io/g/devel/message/66930</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14774</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-11 00:39:19 +0000</bug_when>
    <thetext>The patch has been merged @1d3d5e3256018476e37ed6621fecbdbcfb2da58e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3077</bug_id>
          
          <creation_ts>2020-11-16 13:47:57 +0000</creation_ts>
          <short_desc>SEV Encrypted Boot for Ovmf (remote attestation)</short_desc>
          <delta_ts>2021-03-18 14:14:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="James.Bottomley@HansenPartnership.com">James.Bottomley</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>James.Bottomley</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14358</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-16 13:47:57 +0000</bug_when>
    <thetext>On 11/12/20 01:13, James Bottomley wrote:
&gt;| From: James Bottomley &lt;James.Bottomley@HansenPartnership.com&gt;
&gt;|
&gt;| This patch series is modelled on the structure of the Bhyve patches
&gt;| for Ovmf, since it does somewhat similar things.  This patch series
&gt;| creates a separate build for an AmdSev OVMF.fd that does nothing
&gt;| except combine with grub and boot straight through the internal grub
&gt;| to try to mount an encrypted volume.
&gt;|
&gt;| Concept: SEV Secure Encrypted Images
&gt;| ====================================
&gt;|
&gt;| The SEV patches in Linux and OVMF allow for the booting of SEV VMs in
&gt;| an encrypted state, but don&apos;t really show how this could be done with
&gt;| an encrypted image.  Since the key used to decrypt the image must be
&gt;| maintained within the SEV encryption envelope, encrypted QCOW is not
&gt;| an option because the key would then have to be known to QEMU which is
&gt;| outside the encryption envelope.  The proposal here is that an
&gt;| encrypted image should be a QCOW image consisting of two partitions,
&gt;| the normal unencrypted EFI partition (Identifying it as an OVMF
&gt;| bootable image) and a luks encrypted root partition.  The kernel would
&gt;| be inside the encrypted root in the /boot directory.  The secret
&gt;| injected securely through QEMU is extracted by OVMF and passed to grub
&gt;| which uses it to mount the encrypted root and boot the kernel
&gt;| normally.  The creator of the secret bundle must be satisfied with the
&gt;| SEV attestation before the secret is constructed.  Unfortunately, the
&gt;| SEV attestation can only be on the first QEMU firmware volume and
&gt;| nothing else, so this patch series builds grub itself into a firmware
&gt;| volume and places it inside OVMF so that the entire boot system can be
&gt;| attested.  In a normal OVMF KVM system, the variable store is on the
&gt;| second flash volume (which is read/write).  Unfortunately, this
&gt;| mutable configuration provided by the variables is outside the
&gt;| attestation envelope and can significantly alter the boot path,
&gt;| possibly leading to secret leak, so encrypted image boot should only
&gt;| be done with the OVMF.fd that combines both the code and variables.
&gt;| the OVMF.fd is constructed so that it becomes impossible to interrupt
&gt;| the boot sequence after attestation and the system will either boot
&gt;| the image or fail. The boot sequence runs the grub.efi embedded in the
&gt;| OVMF firmware volume so the encrypted image owner knows their own
&gt;| version of grub is the only one that will boot before injecting the
&gt;| secret.  Note this boot path actually ignores the unencrypted EFI
&gt;| partition.  However, as part of this design, the encrypted image may be
&gt;| booted by a standard OVMF KVM boot and in that case, the user will
&gt;| have to type the encryption password.  This standard boot will be
&gt;| insecure but it might be used by the constructor of the encrypted
&gt;| images on their own private laptop, for instance.  The standard boot
&gt;| path will use the unencrypted EFI partition.
&gt;|
&gt;| Patches Required Outside of OVMF
&gt;| ================================
&gt;|
&gt;| There is a patch set to grub which allows it to extract the SEV secret
&gt;| area from the configuration table and use the secret as a password to
&gt;| do a luks crypto mount of root (this is the sevsecret grub module).
&gt;|
&gt;| There is also a patch to qemu which allows it to search through the
&gt;| OVMF.fd and find the SEV secret area which is now described inside the
&gt;| Reset Vector using the existing SEV_ES reset block.  This area is the
&gt;| place QEMU will inject the encrypted SEV secret bundle.
&gt;|
&gt;| Security of the System
&gt;| ======================
&gt;|
&gt;| Since Grub is now part of the attested OVMF.fd bundle, the VM owner
&gt;| knows absolutely that it will proceed straight to partition decryption
&gt;| inside the attested code and boot the kernel off the encrypted
&gt;| partition.  Even if a different QCOW image is substituted, the boot
&gt;| will fail without revealing the secret because the system is designed
&gt;| to fail hard in that case and because the secret is always contained
&gt;| within the encrypted envelope it should be impossible for the cloud
&gt;| operator to obtain it even if they can pause the boot and examine the
&gt;| machine memory.
&gt;|
&gt;| Putting it All Together
&gt;| =======================
&gt;|
&gt;| This is somewhat hard.  You must first understand how to boot a QEMU
&gt;| system so as to have the VM pause after firmware loading (-S option)
&gt;| and use the qmp port to request an attestation.  Only if the
&gt;| attestation corresponds to the expected sha256sum of OVMF.fd should
&gt;| the secret bundle be constructed and injected using qmp.  The tools
&gt;| for constructing the secret bundle are in
&gt;|
&gt;| https://github.com/AMDESE/sev-tool/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14359</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-16 13:48:49 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH 0/4] SEV Encrypted Boot for Ovmf
msgid: &lt;20201112001316.11341-1-jejb@linux.ibm.com&gt;
https://edk2.groups.io/g/devel/message/67339
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00501.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14360</commentid>
    <comment_count>2</comment_count>
    <who name="James.Bottomley@HansenPartnership.com">James.Bottomley</who>
    <bug_when>2020-11-16 14:54:20 +0000</bug_when>
    <thetext>Assigning to myself</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14405</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-23 11:55:33 +0000</bug_when>
    <thetext>v2:

[edk2-devel] [PATCH v2 0/6] SEV Encrypted Boot for Ovmf
msgid: &lt;20201120184521.19437-1-jejb@linux.ibm.com&gt;
https://edk2.groups.io/g/devel/message/67813
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00969.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14460</commentid>
    <comment_count>4</comment_count>
    <who name="James.Bottomley@HansenPartnership.com">James.Bottomley</who>
    <bug_when>2020-12-02 16:02:49 +0000</bug_when>
    <thetext>v3:

[PATCH v3 0/6] SEV Encrypted Boot for Ovmf
Msgid: &lt;20201130202819.3910-1-jejb@linux.ibm.com&gt;
https://edk2.groups.io/g/devel/message/68087
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg01247.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14574</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-14 11:34:29 +0000</bug_when>
    <thetext>A github.com pull request has been submitted for the v3 series:

  https://github.com/tianocore/edk2/pull/1175

however, it was rejected by (unreasonable) ECC warnings (treated as errors).

In turn, a PR has been submitted to disable ECC for OvmfPkg:

  https://github.com/tianocore/edk2/pull/1224

However, this latter PR is not being merged due to an unspecified issue with the edk2 CI system, or the Mergify bot (the CI run completes fine for PR#1224, but Mergify is not acting upon the CI completion, and so the patch remains unmerged, and the PR open).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14575</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-14 14:57:21 +0000</bug_when>
    <thetext>Merged as commit range ef3e73c6a0c0..01726b6d23d4, via &lt;https://github.com/tianocore/edk2/pull/1175&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15271</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-10 14:00:36 +0000</bug_when>
    <thetext>Related:

* [edk2-devel] [PATCH 0/2]
  Maintainers: create the &quot;OvmfPkg: Confidential Computing&quot; subsystem

message-id: 20210310185649.19801-1-lersek@redhat.com
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00384.html
https://edk2.groups.io/g/devel/message/72637</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15365</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-18 14:14:28 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #7)
&gt; Related:
&gt; 
&gt; * [edk2-devel] [PATCH 0/2]
&gt;   Maintainers: create the &quot;OvmfPkg: Confidential Computing&quot; subsystem
&gt; 
&gt; message-id: 20210310185649.19801-1-lersek@redhat.com
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00384.
&gt; html
&gt; https://edk2.groups.io/g/devel/message/72637

Merged as commit range 9fd7e88c23f6..eb07bfb09ef5, via &lt;https://github.com/tianocore/edk2/pull/1506&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3459</bug_id>
          
          <creation_ts>2021-06-17 12:26:40 +0000</creation_ts>
          <short_desc>[BaseTools] GenFw: Unsupported ELF R_RISCV_PCREL_LO12_S relocations 0x19</short_desc>
          <delta_ts>2021-07-21 12:03:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pete Batard">pete</reporter>
          <assigned_to name="Sunil V L">sunilvl</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16390</commentid>
    <comment_count>0</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-06-17 12:26:40 +0000</bug_when>
    <thetext>While compiling the ntfs-3g UEFI driver from https://github.com/pbatard/ntfs-3g for RISCV64, and after having applied the fix for https://bugzilla.tianocore.org/show_bug.cgi?id=3096, additional 0x19 (R_RISCV_PCREL_LO12_S) relocation errors are generated:

---------------------------------------------------------------------------
&quot;GenFw&quot; -e UEFI_DRIVER -o /usr/src/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/OUTPUT/ntfs.efi /usr/src/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/DEBUG/ntfs.dll
GenFw: ERROR 3000: Invalid
  WriteSections64(): /usr/src/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/DEBUG/ntfs.dll
unsupported ELF EM_RISCV64 relocation 0x19.
GenFw: ERROR 3000: Invalid
  WriteSections64(): /usr/src/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/DEBUG/ntfs.dll
unsupported ELF EM_RISCV64 relocation 0x19.
GenFw: ERROR 3000: Invalid
  WriteSections64(): /usr/src/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/DEBUG/ntfs.dll
unsupported ELF EM_RISCV64 relocation 0x19.
GenFw: ERROR 3000: Invalid
  WriteRelocations64(): /usr/src/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/DEBUG/ntfs.dll
unsupported ELF EM_RISCV64 relocation 0x19.
GenFw: ERROR 3000: Invalid
  WriteRelocations64(): /usr/src/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/DEBUG/ntfs.dll
unsupported ELF EM_RISCV64 relocation 0x19.
GenFw: ERROR 3000: Invalid
  WriteRelocations64(): /usr/src/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/DEBUG/ntfs.dll
unsupported ELF EM_RISCV64 relocation 0x19.
make: *** [GNUmakefile:553: /usr/src/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/OUTPUT/ntfs.efi]
Error 2
---------------------------------------------------------------------------

Tested with up to date Ubuntu 20.04.2 and latest RISC-V toolchain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16414</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-21 21:12:00 +0000</bug_when>
    <thetext>Sunil will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16415</commentid>
    <comment_count>2</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2021-06-22 00:50:22 +0000</bug_when>
    <thetext>This type of relocation is seen only for the code in ntfs-3g driver. I have a patch and Pete was able to build his driver with the patch. But there Pete has no way currently to test it. It is critical to test the changes and hence will send this patch for review only after I get confidence with testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16417</commentid>
    <comment_count>3</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-06-22 06:13:55 +0000</bug_when>
    <thetext>Indeed, I can confirm that the patch I received from Sunil fixes compilation, but testing is very difficult at this stage.

The main problem is that the current QEMU RISC-V platform (SiFive Freedom U540) had no support for storage devices, and this is a file system driver.

So, whereas I have been able to compile a U540 firmware and run it through QEMU, I haven&apos;t been able to set up any accessible storage. And whereas the notes from https://github.com/riscv/riscv-uefi-edk2-docs mention an &apos;embeddedramdisk&apos; executable that could be used to at least mount a RAMDisk, this executable seems nowhere to be found.

So, at this stage I think we have 2 options:

1. Wait for the storage situation to improve for the QEMU RISC-V platform, so that we can actually test storage/file system drivers

2. Have someone with a non virtual RISC-V platform and working storage drivers (e.g. USB) test the driver, by creating a simple NTFS drive (any Windows and most Linux machine can format one) and testing file access from the Shell. For what is worth, you can find a RO and RW version of the NTFS driver (compiled after applying Sunil&apos;s patch) in the artifacts archive of the GitHub Actions build of the ntfs-3g driver at: https://github.com/pbatard/ntfs-3g/actions/runs/953345420</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16419</commentid>
    <comment_count>4</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-06-22 08:30:51 +0000</bug_when>
    <thetext>Sunil pointed out that we should be able to use the WIP builds of the Virt platform to test storage drivers, and especially we can use the firmware from the GitHub build artifacts, such as the one at https://github.com/riscv/riscv-edk2-platforms/actions/runs/885101747.

And indeed, it is possible to run something like the following, using a disk.img that contains a FAT partition with the ntfs-3g driver, as well as an NTFS partition, to test the driver:

qemu-system-riscv64 -machine virt -nodefaults -vga std -serial vc -L . -bios RISCVVIRT.fd -m 2048 -smp cpus=1,maxcpus=1 -device virtio-blk-device,drive=hd0 -drive file=disk.img,format=raw,id=hd0

However, while loading and remapping work, both Sunil and I observe the driver to hang when trying to list content from the NTFS partition.

I will instrument the driver some more, to try to pinpoint where exactly the problem lies and see if could have to do with the relocation, or if it is a more general code bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16560</commentid>
    <comment_count>5</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-07-06 12:05:54 +0000</bug_when>
    <thetext>After some instrumentation, it appears that the issue is with a call to gcc&apos;s intrinsic __builtin_ffs().

More specifically, the freezout occurs at https://github.com/pbatard/ntfs-3g/blob/5669707be95793210592308c16508ab3c3144f74/libntfs-3g/bootsect.c#L205, with ffs() being a simple wrapper around __builtin_ffs() (https://github.com/pbatard/ntfs-3g/blob/5669707be95793210592308c16508ab3c3144f74/libntfs-3g/uefi_compat.c#L66-L78).

I confirmed that replacing &apos;ffs()&apos; with &apos;__builtin_ffs()&apos; still froze, so we can rule out that this is due to using a wrapper.
And I also altered the code to confirm that the freezout didn&apos;t occur with the le16_to_cpu(...) call beforehand.

Basically, here is the verbose output up to the time it freezes, with the code modified so that the ntfs_log_debug() call for SectorSize happens before the call to ffs():

-----------------------------------------------------------------------
FS0:\&gt; fs1:
OpenVolume: VenHw(837DCA9E-E874-4D82-B29A-23FE0E23D1E2,0080001000000000)/HD(2,MBR,0xF7C2833B,0x1000,0x1F000)
TRACE: ntfs_pread(): pos 0, count 512
DEBUG: Beginning bootsector check.
DEBUG: Checking OEMid, NTFS signature.
DEBUG: Checking bytes per sector.
DEBUG: Checking sectors per cluster.
DEBUG: Checking cluster size.
DEBUG: Checking reserved fields are zero.
DEBUG: Checking clusters per mft record.
DEBUG: Checking clusters per index block.
DEBUG: Bootsector check completed successfully.
DEBUG: SerialNumber = 0x1C4F4C0C36082B39
DEBUG: SectorSize = 0x200

-----------------------------------------------------------------------

Obviously, there&apos;s a possibility that this could be a pure GCC bug with __builtin_ffs() on RISCV, as this is likely to be fairly new code. However, I&apos;d expect GCC&apos;s test suite to validate all the compiler&apos;s intrinsics calls.
Or it could have to do with this intrinsic call generating a relocation, and our patch not handling it properly.

At any rate, I will see what happens when using a non builtin implementation of ffs.
But if anyone has a simple application that they are compiling for RISCV using gcc, they may also want to add a call to __builtin_ffs() to see if:
1. It generates an extra relocation.
2. It freezes when called.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16561</commentid>
    <comment_count>6</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-07-06 13:18:31 +0000</bug_when>
    <thetext>Confirmed that replacing __builtin_ffs() with my own code for it made the issue go away. With this, the driver appears to work as expected, and I was able to switch to the volume, list NTFS content, edit files, etc.

However the interesting thing is that, once I remove the call to __builtin_ffs() from uefi_compat.c (https://github.com/pbatard/ntfs-3g/blob/5669707be95793210592308c16508ab3c3144f74/libntfs-3g/uefi_compat.c#L66-L78), I can actually replace the call for ffs() in bootsect.c with __builtin_ffs()  (https://github.com/pbatard/ntfs-3g/blob/5669707be95793210592308c16508ab3c3144f74/libntfs-3g/bootsect.c#L205) and the driver still works!

Therefore, it doesn&apos;t look like a GCC issue with the __builtin_ffs() intrinsic, since, depending on where you use it in the code, that function appears to perform as expected.

So this could indeed be an issue with our relocation code, as I see no reason for a direct call to __builtin_ffs() to work when no other call to that function appears in the code, but the same thing to fail as soon as __builtin_ffs() is referenced elsewhere...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16566</commentid>
    <comment_count>7</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2021-07-07 03:11:23 +0000</bug_when>
    <thetext>Thank you very much Pete for narrowing it down.

It doesn&apos;t look like it is due to our relocation code. I wrote a simple application code. First directly calling the __builtin_ffs() and second via a wrapper.

1)
#include &lt;stdio.h&gt;

void main()
{
    int i = 10;
    printf(&quot;1-bit lSB index = %d\n&quot;, __builtin_ffs(i));
}

2) 
#include &lt;stdio.h&gt;
int ffs(int i)
{
    return __builtin_ffs(i);
}

void main()
{
    int i = 10;
    printf(&quot;1-bit lSB index = %d\n&quot;, ffs(i));
}

I compiled both apps using riscv cross compilers and ran them in qemu. While the direct call to __builtin_ffs() application worked, the wrapper way hit a segmentation fault.

If I disassemble the wrapper application, it looks like ffs() gets into infinite loop and doesn&apos;t really refer to __builtin_ffs().
0000000000000644 &lt;ffs&gt;:
 644:   1101                    addi    sp,sp,-32
 646:   ec06                    sd  ra,24(sp)
 648:   e822                    sd  s0,16(sp)
 64a:   1000                    addi    s0,sp,32
 64c:   87aa                    mv  a5,a0
 64e:   fef42623            sw  a5,-20(s0)
 652:   fec42783            lw  a5,-20(s0)
 656:   853e                    mv  a0,a5
 658:   fedff0ef            jal ra,644 &lt;ffs&gt;
 65c:   87aa                    mv  a5,a0
 65e:   2781                    sext.w  a5,a5
 660:   853e                    mv  a0,a5
 662:   60e2                    ld  ra,24(sp)
 664:   6442                    ld  s0,16(sp)
 666:   6105                    addi    sp,sp,32
 668:   8082                    ret

I see similar code generated in your ntfs.dll also. 

The code generated without a wrapper is properly referring to gcc function.
0000000000000590 &lt;ffs@plt&gt;:
 590:   00002e17            auipc   t3,0x2
 594:   a90e3e03            ld  t3,-1392(t3) # 2020 &lt;ffs@GLIBC_2.27&gt;
 598:   000e0367            jalr    t1,t3
 59c:   00000013            nop

Since the initial code getting generated itself(ELF) has some issues and it is not related to R_RISCV_PCREL_LO12_S relocation at all, I believe we need to check with GCC experts. If you agree, we can raise this issue with GCC folks. Let me know. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16569</commentid>
    <comment_count>8</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-07-07 03:54:07 +0000</bug_when>
    <thetext>Yes, I agree that the issue with __builtin_ffs() is not due to the relocation code, as I also confirmed that the number of 0x19 relocations is the same whether we use __builtin_ffs() or our own code for ffs().

So, clearly, the 0x19 relocation code is not being invoked there, and your insightful analysis confirms that the problem does indeed lie with how GCC generates the code.

If you want to bring your sample and bug report to the GCC expert, I would greatly appreciate it!

In the meantime, I will alter the code of the NTFS driver to not use __builtin_ffs() and run some additional tests in QEMU to validate it. Once I have done that, I&apos;ll update this BZ with a formal green light for the R_RISCV_PCREL_LO12_S relocation patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16571</commentid>
    <comment_count>9</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2021-07-07 06:24:19 +0000</bug_when>
    <thetext>Hi Pete,

Could you just rename your ffs() wrapper function to something other than ffs() and use this wrapper in all places? It appears to me that it is replacing __builtin_ffs() with your ffs() and getting into a recursive loop.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16572</commentid>
    <comment_count>10</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-07-07 07:50:44 +0000</bug_when>
    <thetext>Hi Sunil,

That&apos;s a good suggestion, but there are actually about 10 references to ffs() within the code, and since this is inherited code that I am trying to alter as little as possible, so that its current maintainers can integrate the UEFI driver part if they wish to, I don&apos;t really want to change the existing ffs() name to something else.

Moreover, for non UEFI builds, there is a check for the provision of ffs() during configure (https://github.com/pbatard/ntfs-3g/blob/uefi-driver/configure.ac#L555) which is usually provided by glibc (https://man7.org/linux/man-pages/man3/ffs.3.html), so this makes altering the name to something else something we want to avoid as well.

Maybe that&apos;s also why we are having this issue in the first place, as I could envision the GCC RISC-V developers trying to resolve concurrent usage of glibc&apos;s ffs() and __builtin_ffs() by having __builtin_ffs() point to ffs() when it exists... hence creating an infinite loop when someone happens to define an ffs() function that calls on __builtin_ffs().

But again, that&apos;s a pure GCC issue, that is unrelated to the ELF R_RISCV_PCREL_LO12_S relocations.

And on that subject, I have conducted a comprehensive enough series of tests with a driver that does not reference __builtin_ffs(), and I am happy to report that everything works as expected.

Therefore, I can validate that your ELF R_RISCV_PCREL_LO12_S relocation patch looks good for integration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16573</commentid>
    <comment_count>11</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2021-07-07 09:05:50 +0000</bug_when>
    <thetext>Hi Pete,

Thanks!. Agree we should not change the current code. I was just trying to see whether it solves the issue for riscv.

As you mentioned, ffs issue is outside of edk2. Thanks for testing the patch. I will send the patch soon to the mailing list after some more sanity testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16673</commentid>
    <comment_count>12</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2021-07-21 12:03:24 +0000</bug_when>
    <thetext>patch for this issue is merged.
https://github.com/tianocore/edk2/commit/c32c5911c41fa691a5333e7567003cc124e7ab5f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3341</bug_id>
          
          <creation_ts>2021-04-17 08:03:38 +0000</creation_ts>
          <short_desc>LLVM default installation path is not correctly set in windows</short_desc>
          <delta_ts>2021-04-20 07:06:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15715</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-04-17 08:03:38 +0000</bug_when>
    <thetext>Current edk2\edksetup.bat set CLANG_BIN env variable of LLVM default installation path with below code without double quote around it:
@set CLANG_BIN=C:\Program Files\LLVM\bin\

Because there is a space in this LLVM windows path, this setting might cause the CI build service cannot find the LLVM path with below error:
&apos;C:\Program&apos; is not recognized as an internal or external command

The CLANG_BIN env variable setting should be enhanced as:
@set &quot;CLANG_BIN=C:\Program Files\LLVM\bin\&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15716</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-04-17 08:04:54 +0000</bug_when>
    <thetext>Confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15729</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-04-20 06:34:46 +0000</bug_when>
    <thetext>Created a PR to fix: https://github.com/tianocore/edk2/pull/1580</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15730</commentid>
    <comment_count>3</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-04-20 07:06:08 +0000</bug_when>
    <thetext>Merged</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3211</bug_id>
          
          <creation_ts>2021-02-05 00:46:06 +0000</creation_ts>
          <short_desc>Uefi functions AddUnicodeString2() and LookupUnicodeString2() are returning EFI_UNSUPPORTED incorrectly.</short_desc>
          <delta_ts>2021-05-25 08:32:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chandramohan">acmohn</reporter>
          <assigned_to name="Chandramohan">acmohn</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>shrishail105</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15020</commentid>
    <comment_count>0</comment_count>
      <attachid>648</attachid>
    <who name="Chandramohan">acmohn</who>
    <bug_when>2021-02-05 00:46:06 +0000</bug_when>
    <thetext>Created attachment 648
Fix for the issue

The library functions AddUnicodeString2() and LookupUnicodeString2() defined in UefiLib.c are returning EFI_UNSUPPORTED incorrectly. These functions are returning EFI_UNSUPPORTED because of not finding the given &quot;Language&quot; in &quot;SupportedLanguages&quot;, even though it is part of it.

The above two functions are passing arguments incorrectly to the function IsLanguageSupported(). The function IsLanguageSupported() is expecting first argument &quot;SupportedLanguages&quot; and second argument &quot;TargetLanguage&quot;. 

But these functions are passing &quot;TargetLanguage&quot; as first and &quot;SupportedLanguages&quot; as second one.  Due to this,  IsLanguageSupported() function returns that a given language is not supported

Attached the patch to fix this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15022</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-05 08:49:41 +0000</bug_when>
    <thetext>Please subscribe to the edk2-devel mailing list, and post the patch there for review.

https://edk2.groups.io/g/devel/
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process

In case you are new to git / mailing list-based development, the following unofficial wiki article might help as well:

https://github.com/tianocore/tianocore.github.io/wiki/Laszlo&apos;s-unkempt-git-guide-for-edk2-contributors-and-maintainers</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15039</commentid>
    <comment_count>2</comment_count>
    <who name="Chandramohan">acmohn</who>
    <bug_when>2021-02-08 00:45:37 +0000</bug_when>
    <thetext>Sent out the patch for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15124</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-23 21:49:04 +0000</bug_when>
    <thetext>Chandramohan is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15445</commentid>
    <comment_count>4</comment_count>
    <who name="Chandramohan">acmohn</who>
    <bug_when>2021-03-29 04:43:33 +0000</bug_when>
    <thetext>Patch posted for review
https://edk2.groups.io/g/devel/message/72528</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15446</commentid>
    <comment_count>5</comment_count>
    <who name="Chandramohan">acmohn</who>
    <bug_when>2021-03-29 04:57:32 +0000</bug_when>
    <thetext>Code change has been committed 2e51b27fed31eb7b2a2cb4245806c8c7859207f7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16136</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-25 08:32:46 +0000</bug_when>
    <thetext>*** Bug 3414 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>648</attachid>
            <date>2021-02-05 00:46:06 +0000</date>
            <delta_ts>2021-02-05 00:46:06 +0000</delta_ts>
            <desc>Fix for the issue</desc>
            <filename>file_3211.txt</filename>
            <type>text/plain</type>
            <size>767</size>
            <attacher name="Chandramohan">acmohn</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3481</bug_id>
          
          <creation_ts>2021-07-07 03:34:27 +0000</creation_ts>
          <short_desc>Implement key enrolment from default key variables.</short_desc>
          <delta_ts>2021-08-10 21:26:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Grzegorz Bernacki">gjb</reporter>
          <assigned_to name="Grzegorz Bernacki">gjb</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16568</commentid>
    <comment_count>0</comment_count>
    <who name="Grzegorz Bernacki">gjb</who>
    <bug_when>2021-07-07 03:34:27 +0000</bug_when>
    <thetext>Add support for initialization of default Secure Boot variables based on keys content embedded in flash binary. Implement application to enroll keys from default variables and secure boot menu change to allow user to reset key content to default values.
Discussion on design can be found at:                                                                                                                                      
https://edk2.groups.io/g/rfc/topic/82139806#600</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16606</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-12 09:42:59 +0000</bug_when>
    <thetext>Please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16865</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-10 21:26:52 +0000</bug_when>
    <thetext>The patch set has been merged at 2b47aaecef38b9440a65809cbdaf9d97029f4eeb..55266a9b8ac71dace1109d61be549889cdd2f93f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3236</bug_id>
          
          <creation_ts>2021-02-25 06:55:32 +0000</creation_ts>
          <short_desc>Wrong GICR_IPRIORITYR address used in ArmGicSetInterruptPriority</short_desc>
          <delta_ts>2021-03-01 08:21:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Leif Lindholm">quic_llindhol</reporter>
          <assigned_to name="Ming Huang">ming.huang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15145</commentid>
    <comment_count>0</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2021-02-25 06:55:32 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/72045

Like in the ARM Gic Architecture Reference Manual, the offset of ARM_GIC_ICDIPR is specified relative to the start of the SGI_base frame, which comes after the RD_base frame.
However, the current implementation of ArmGicSetInterruptPriority() - added in commit 0d49b82e4fa5d - applies the offset directly to GicCpuRedistributorBase (corresponding to the start of the RD_base frame).

This means the accesses are made to a Reserved region, and the actual interrupt priority control is never affected. As far as I can tell, this has gone unnoticed because:
- Both ARM ltd GIC implementations and the QEMU model silently ignore writes to the reserved region.
- The reset values of both ARM ltd GIC implementations and the QEMU model still permit affected interrupts to be delivered.

The fix is simple - apply the same pattern used by the ArmGicEnableInterrupt/ArmGicDisableInterrupt functions, which use address-generating macros to keep the code readable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15146</commentid>
    <comment_count>1</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2021-02-25 06:58:45 +0000</bug_when>
    <thetext>Would like fix submitted as https://edk2.groups.io/g/devel/message/72175 to make it into edk2-stable202102.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15161</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-28 20:21:11 +0000</bug_when>
    <thetext>Ming Huang has sent the patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15169</commentid>
    <comment_count>3</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2021-03-01 08:21:20 +0000</bug_when>
    <thetext>Fix by Ming Huang pushed as 31eaefd4df78..0996a7883c6d.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3120</bug_id>
          
          <creation_ts>2020-12-15 04:13:05 +0000</creation_ts>
          <short_desc>Should always define PCD TOKEN value as Zero for static PCD</short_desc>
          <delta_ts>2020-12-30 02:21:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to name="yunhua feng">fengyunhua</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14580</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-15 04:13:05 +0000</bug_when>
    <thetext>FixedAtBuild, PatchableInModule and FeatureFlag PCD don&apos;t use PCD TOKEN. Their PCD TOKEN value can always be zero. If so, AutoGen.h will not be changed when PCD is added or removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14581</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-15 04:13:30 +0000</bug_when>
    <thetext>Yunhua will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14603</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-16 19:50:30 +0000</bug_when>
    <thetext>AutoGen.h will not be changed when static PCD is added or removed. Dynamic PCD add or remove will still cause dynamic PCD token value be changed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14684</commentid>
    <comment_count>3</comment_count>
    <who name="yunhua feng">fengyunhua</who>
    <bug_when>2020-12-30 02:21:05 +0000</bug_when>
    <thetext>Fixed at d15d0d3d8aee1c7d5dab7b636601370061b32612</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3498</bug_id>
          
          <creation_ts>2021-07-19 08:26:43 +0000</creation_ts>
          <short_desc>EINJ updates for CXL</short_desc>
          <delta_ts>2023-05-15 13:36:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Thanunathan Rangarajan">thanu.rangarajan</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>leo.duran</cc>
    
    <cc>mahesh.natu</cc>
    
    <cc>manjunaatha.b.harapanahalli</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16652</commentid>
    <comment_count>0</comment_count>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2021-07-19 08:26:43 +0000</bug_when>
    <thetext>Update EINJ table to extend support for error injection on CXL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16670</commentid>
    <comment_count>1</comment_count>
      <attachid>769</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2021-07-21 09:51:10 +0000</bug_when>
    <thetext>Created attachment 769
CXL EINJ Updates ECR</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16671</commentid>
    <comment_count>2</comment_count>
      <attachid>770</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2021-07-21 09:54:53 +0000</bug_when>
    <thetext>Created attachment 770
CXL EINJ Updates ECR v.0.3

ECR document updated with minor cosmetic changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16766</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 22:02:51 +0000</bug_when>
    <thetext>Thanunathan Rangarajan is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16903</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-13 09:51:15 +0000</bug_when>
    <thetext>Corresponding ASWG mantis https://mantis.uefi.org/mantis/view.php?id=2267</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16948</commentid>
    <comment_count>5</comment_count>
      <attachid>798</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-17 12:19:28 +0000</bug_when>
    <thetext>Created attachment 798
CodeFirst_CXL-EINJ_ACPI_ver0.4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16950</commentid>
    <comment_count>6</comment_count>
    <who name="">mahesh.natu</who>
    <bug_when>2021-08-17 14:42:01 +0000</bug_when>
    <thetext>I am good with the 08-17 version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17014</commentid>
    <comment_count>7</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-23 18:19:03 +0000</bug_when>
    <thetext>ASWG meeting feedback:
Context/information (addresses?) missing from current proposal. PCIe SBDF encoding shown in related tables- do they apply to CXL errors also?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17153</commentid>
    <comment_count>8</comment_count>
    <who name="LeoDuran@AMD">leo.duran</who>
    <bug_when>2021-09-02 13:40:46 +0000</bug_when>
    <thetext>It&apos;s not clear to me:
1) What is the intended usage for the SET_ERROR_TYPE_WITH_ADDRESS structure as it relates to the proposed CXL.cache and CXL.mem error types.

2) What is the intended flow for the proposed CXL.cache and CXL.mem error types via EINJ. That is, what is intended to happen as a result of an EXECUTE_OPERATION?.

As an example, for PCIe AER error types the OS is able to actually inject the specified error type upon successful completion of an EXECUTE_OPERATION. Basically, the actual error injection operation is abstracted via the execution of the EINJ state machine)... Then, once the error is injected, the OS is able to collect the error logs via standard PCIe AER reporting mechanisms (e.f., an MSI may fire, and logs are collected from AER status registers)... Is that flow similar to the intended flow for these CXL error types?

Thanks for the clarifications.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17159</commentid>
    <comment_count>9</comment_count>
    <who name="">mahesh.natu</who>
    <bug_when>2021-09-02 21:47:46 +0000</bug_when>
    <thetext>Q1) What is the intended usage for the SET_ERROR_TYPE_WITH_ADDRESS structure as it relates to the proposed CXL.cache and CXL.mem error types.

A1) SET_ERROR_TYPE_WITH_ADDRESS structure is used to identify the address of the port that where the error is injected, similar to PCI Express Correctable, PCI Express Uncorrectable non-fatal and PCI Express Uncorrectable fatal bits.
If the target is a CXL 1.1 Downstream port, the Memory Address shall point to its RCRB. Otherwise, the SBDF field will identify the port. 

2) What is the intended flow for the proposed CXL.cache and CXL.mem error types via EINJ. That is, what is intended to happen as a result of an EXECUTE_OPERATION?.

As an example, for PCIe AER error types the OS is able to actually inject the specified error type upon successful completion of an EXECUTE_OPERATION. Basically, the actual error injection operation is abstracted via the execution of the EINJ state machine)... Then, once the error is injected, the OS is able to collect the error logs via standard PCIe AER reporting mechanisms (e.f., an MSI may fire, and logs are collected from AER status registers)... Is that flow similar to the intended flow for these CXL error types?

If a CXL.cache or CXL.mem error type is chosen, upon completion of an EXECUTE_OPERATION, the platform shall inject a CXL.cache or CXL.mem protocol error. Appropriate error status bits in CXL RAS Capability Structure will be set and the corresponding CXL Root Port or RCEC shall register an internal Corrected Error or an Internal Uncorrected Error based on the OS choice. That will lead to AER MSI being fired etc. The flow will be very similar to the PCIe AER example above.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17163</commentid>
    <comment_count>10</comment_count>
    <who name="LeoDuran@AMD">leo.duran</who>
    <bug_when>2021-09-03 15:14:39 +0000</bug_when>
    <thetext>Great... Just a few follow-up comments:

May I suggest that we edit the proposed ECR to include changes to:
Table 18.30: SET_ERROR_TYPE_WITH_ADDRESS Data Structure.

For example:
1) [Mahesh] &quot;If the target is a CXL 1.1 Downstream port, the Memory Address shall point to its RCRB&quot;.
[Leo] In this case I&apos;d expect that the Flags field would have this bit set:
&gt;&gt;Bit [1]- Memory Address and Memory address Mask Field Valid&lt;&lt;
So, I suggest that we add a note to specify that for CXL errors the Memory Address &quot;points to a CXL 1.1 Downstream port.&quot;.

2) [Mahesh] &quot;Otherwise, the SBDF field will identify the port.&quot;
[Leo] In this case I&apos;d expect that the Flags field would have this bit set:
&gt;&gt;Bit [2] - PCIe SBDF field valid&lt;&lt;
So, I suggest that we add a note to specify that for CXL errors the SBDF &quot;is used to identify the address of the port that where the error is injected&quot;

3) Question: By specifying a root port, are we really targeting an endpoint that is connected to that root port?... If so, what happens is there a switch under the root port, with multiple endpoints connected to the switch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17288</commentid>
    <comment_count>11</comment_count>
    <who name="">mahesh.natu</who>
    <bug_when>2021-09-16 15:50:54 +0000</bug_when>
    <thetext>1. I agree. 
2. I agree.
3. The scope of this ECN is to allow the OS to inject errors into the CXL 1.1 DP or CXL 2.0 RP. Impact to downstream switches and/or devices is out of scope (similar to PCIe error injection).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17329</commentid>
    <comment_count>12</comment_count>
      <attachid>835</attachid>
    <who name="LeoDuran@AMD">leo.duran</who>
    <bug_when>2021-09-21 15:59:21 +0000</bug_when>
    <thetext>Created attachment 835
Updates to SET_ERROR_TYPE_WITH_ADDRESS Data Structure

Attached are proposed changes to the SET_ERROR_TYPE_WITH_ADDRESS Data Structure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17353</commentid>
    <comment_count>13</comment_count>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2021-09-22 07:12:32 +0000</bug_when>
    <thetext>LTGM.

Minor nit: &quot;compliant&quot;. ECR updated accordingly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17354</commentid>
    <comment_count>14</comment_count>
      <attachid>837</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2021-09-22 07:15:08 +0000</bug_when>
    <thetext>Created attachment 837
Minor update to v.0.5

Minor update to v.0.5 - &quot;compliant&quot; instead of &quot;complaint&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17463</commentid>
    <comment_count>15</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-07 19:10:41 +0000</bug_when>
    <thetext>ASWG meeting 10/7: This is approved as new content for for ACPI.next spec. Closing this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18097</commentid>
    <comment_count>16</comment_count>
    <who name="LeoDuran@AMD">leo.duran</who>
    <bug_when>2022-01-06 09:27:01 +0000</bug_when>
    <thetext>As agreed offline, here&apos;s the note for the foot of &quot;Table 18-29 Error Type Definition&quot;:

NOTE: CXL errors (Bits 17:12) are intended to target the CXL port (e.g., via Link or Protocol errors, and not actual Component errors).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18098</commentid>
    <comment_count>17</comment_count>
      <attachid>910</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-01-06 10:23:50 +0000</bug_when>
    <thetext>Created attachment 910
Minor update to approved ECR, adding a Note under table 18.29</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21566</commentid>
    <comment_count>18</comment_count>
    <who name="Manjunaatha B Harapanahalli">manjunaatha.b.harapanahalli</who>
    <bug_when>2023-05-15 13:36:44 +0000</bug_when>
    <thetext>Any inputs on adding the CXL EINJ error types in the .h file?

//
// CXL EINJ Error Type Definition
//
#define EFI_ACPI_EINJ_ERROR_CXL_CACHE_PROTOCOL_CORRECTABLE               (1 &lt;&lt; 12)
#define EFI_ACPI_EINJ_ERROR_CXL_CACHE_PROTOCOL_UNCORRECTABLE_NONFATAL    (1 &lt;&lt; 13)
#define EFI_ACPI_EINJ_ERROR_CXL_CACHE_PROTOCOL_UNCORRECTABLE_FATAL       (1 &lt;&lt; 14)
#define EFI_ACPI_EINJ_ERROR_CXL_MEM_PROTOCOL_CORRECTABLE                 (1 &lt;&lt; 15)
#define EFI_ACPI_EINJ_ERROR_CXL_MEM_PROTOCOL_UNCORRECTABLE_NONFATAL      (1 &lt;&lt; 16)
#define EFI_ACPI_EINJ_ERROR_CXL_MEM_PROTOCOL_UNCORRECTABLE_FATAL         (1 &lt;&lt; 17)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>769</attachid>
            <date>2021-07-21 09:51:10 +0000</date>
            <delta_ts>2021-07-21 09:51:10 +0000</delta_ts>
            <desc>CXL EINJ Updates ECR</desc>
            <filename>CodeFirst_CXL-EINJ_ACPI_ver0-1.pdf</filename>
            <type>application/pdf</type>
            <size>159578</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>770</attachid>
            <date>2021-07-21 09:54:53 +0000</date>
            <delta_ts>2021-07-21 09:54:53 +0000</delta_ts>
            <desc>CXL EINJ Updates ECR v.0.3</desc>
            <filename>CodeFirst_CXL-EINJ_ACPI_ver0-3.pdf</filename>
            <type>application/pdf</type>
            <size>159574</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>798</attachid>
            <date>2021-08-17 12:19:28 +0000</date>
            <delta_ts>2021-08-17 12:19:28 +0000</delta_ts>
            <desc>CodeFirst_CXL-EINJ_ACPI_ver0.4</desc>
            <filename>CodeFirst_CXL-EINJ_ACPI_ver0.4.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>18438</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>835</attachid>
            <date>2021-09-21 15:59:21 +0000</date>
            <delta_ts>2021-09-21 15:59:21 +0000</delta_ts>
            <desc>Updates to SET_ERROR_TYPE_WITH_ADDRESS Data Structure</desc>
            <filename>CodeFirst_CXL-EINJ_ACPI_ver0.5.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>31444</size>
            <attacher name="LeoDuran@AMD">leo.duran</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>837</attachid>
            <date>2021-09-22 07:15:08 +0000</date>
            <delta_ts>2021-09-22 07:15:08 +0000</delta_ts>
            <desc>Minor update to v.0.5</desc>
            <filename>CodeFirst_CXL-EINJ_ACPI_ver0.6.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>31496</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>910</attachid>
            <date>2022-01-06 10:23:50 +0000</date>
            <delta_ts>2022-01-06 10:23:50 +0000</delta_ts>
            <desc>Minor update to approved ECR, adding a Note under table 18.29</desc>
            <filename>CodeFirst_CXL-EINJ_ACPI_ver0.7.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>31402</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3258</bug_id>
          
          <creation_ts>2021-03-10 13:24:52 +0000</creation_ts>
          <short_desc>ArmPkg should declare library classes it defines in the DEC file and build all instances</short_desc>
          <delta_ts>2021-04-30 06:52:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Thomas Abraham">thomas.abraham</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>pierre.gondois</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15269</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-03-10 13:24:52 +0000</bug_when>
    <thetext>Missing newly defined library class in DEC file

OemMiscLib|Include/Library/OemMiscLib.h


Missing library instance in dsc used for CI

ArmPkg/Universal/Smbios/OemMiscLibNull/OemMiscLibNull.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15274</commentid>
    <comment_count>1</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-03-10 14:42:57 +0000</bug_when>
    <thetext>also missing:
  ArmGenericTimerCounterLib|Include/Library/ArmGenericTimerCounterLib.h
  ArmGicArchLib|Include/Library/ArmGicLib.h
  ArmHvcLib|Include/Library/ArmHvcLib.h
  ArmSmcLib|Include/Library/ArmSmcLib.h


These are incorrect paths:
  ArmMtlLib|ArmPlatformPkg/Include/Library/ArmMtlLib.h
  SemihostLib|Include/Library/Semihosting.h

Should be:
  ArmMtlLib|Include/Library/ArmMtlLib.h
  SemihostLib|Include/Library/SemihostLib.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15339</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-16 21:55:00 +0000</bug_when>
    <thetext>Thomas: will you take it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15753</commentid>
    <comment_count>3</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-04-21 08:23:30 +0000</bug_when>
    <thetext>Hi Sean, Liming,
This should be corrected with:
https://edk2.groups.io/g/devel/message/74323
https://edk2.groups.io/g/devel/message/74324</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15841</commentid>
    <comment_count>4</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-04-30 06:52:12 +0000</bug_when>
    <thetext>Should be resolved by:
https://github.com/tianocore/edk2/commit/d03f71dd8be62ffbd3d1665576ffd721210b7e00
and
https://github.com/tianocore/edk2/commit/c2bd8a1a823f184e54f45e1eb7d8a14be77e502b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3628</bug_id>
          
          <creation_ts>2021-09-14 21:40:35 +0000</creation_ts>
          <short_desc>CoreSetMemorySpaceCapabilities is receiving memory map entries unknown to it</short_desc>
          <delta_ts>2022-06-10 14:45:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="genaro saucedo tejada">genaro.saucedo.tejada</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>genaro.saucedo.tejada</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable201905</cf_release_observed>
    
    <cf_release_observed>edk2-stable201908</cf_release_observed>
    
    <cf_release_observed>edk2-stable201911</cf_release_observed>
    
    <cf_release_observed>edk2-stable202002</cf_release_observed>
    
    <cf_release_observed>edk2-stable202005</cf_release_observed>
    
    <cf_release_observed>edk2-stable202008</cf_release_observed>
    
    <cf_release_observed>edk2-stable202011</cf_release_observed>
    
    <cf_release_observed>edk2-stable202102</cf_release_observed>
    
    <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17273</commentid>
    <comment_count>0</comment_count>
    <who name="genaro saucedo tejada">genaro.saucedo.tejada</who>
    <bug_when>2021-09-14 21:40:35 +0000</bug_when>
    <thetext>CoreSetMemorySpaceCapabilities has its own structure for memory map that it uses to iterate and find ranges, but it doesn&apos;t contain all of the kinds of GcdMemoryType. It at least contains EfiGcdMemoryTypeSystemMemory and EfiGcdMemoryTypeMoreReliable.

However, the above mentioned function is being called by RefreshGcdMemoryAttributesFromPaging which uses a more detailed memory map (a superset?). It notably contains for instance the kinds of ranges EfiGcdMemoryTypeReserved and EfiGcdMemoryTypeMemoryMappedIo.

When CoreSetMemorySpaceCapabilities receives a range unknow to it, it then returns EFI_NOT_FOUND but first prints an error message at CoreConvertPagesEx.
The caller in turn prints another error message.
This is consistently happening for EfiGcdMemoryTypeMemoryMappedIo.

Since the failure is predictable before calling CoreSetMemorySpaceCapabilities, and since RefreshGcdMemoryAttributesFromPaging is already filtering (line 955) GcdMemoryType kinds such as EfiGcdMemoryTypeNonExisten, it&apos;s desirable to avoid the failure. For instance adding kinds such as EfiGcdMemoryTypeMemoryMappedIo to the filter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17341</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-21 21:54:22 +0000</bug_when>
    <thetext>Genaro: can you give your proposed code change?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19065</commentid>
    <comment_count>2</comment_count>
    <who name="genaro saucedo tejada">genaro.saucedo.tejada</who>
    <bug_when>2022-06-10 14:45:38 +0000</bug_when>
    <thetext>Messages is expected according to owner of caller function.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3415</bug_id>
          
          <creation_ts>2021-05-24 07:34:57 +0000</creation_ts>
          <short_desc>ArmPkg: Fix maximum number of interrupts in GICv3</short_desc>
          <delta_ts>2021-05-27 06:10:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16129</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-05-24 07:34:57 +0000</bug_when>
    <thetext>The GICv3 architecture supports up to 1020 ordinary interrupt
lines. The actual number of interrupts supported is described by the
ITLinesNumber field in the GICD_TYPER register. The total number of
implemented registers is normally calculated as
32*(ITLinesNumber+1). However, maximum value (0x1f) is a special case
since that would indicate that 1024 interrupts are implemented.

Add handling for this special case in ArmGicGetMaxNumInterrupts.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16130</commentid>
    <comment_count>1</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-05-24 09:59:20 +0000</bug_when>
    <thetext>Patch submitted to the edk2 mailing list at https://edk2.groups.io/g/devel/topic/edk2_devel202105_patch_v2/83051437</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16140</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-25 21:39:41 +0000</bug_when>
    <thetext>Sami has sent the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16195</commentid>
    <comment_count>3</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-05-27 06:10:41 +0000</bug_when>
    <thetext>Merged in edk2 master at https://github.com/tianocore/edk2/commit/e1999b264f1f9d7230edf2448f757c73da567832</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3170</bug_id>
          
          <creation_ts>2021-01-15 01:08:49 +0000</creation_ts>
          <short_desc>NetworkPkg/Library/DxeHttpIoLib: Http boot failure with no initializes timeout value.</short_desc>
          <delta_ts>2021-01-20 09:16:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Greg">gregx.yeh</reporter>
          <assigned_to name="Greg">gregx.yeh</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14814</commentid>
    <comment_count>0</comment_count>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2021-01-15 01:08:49 +0000</bug_when>
    <thetext>Http boot failure when Timeout value was not be initialized.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14848</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-19 21:42:44 +0000</bug_when>
    <thetext>Greg: please provide the detail. And, if you have the patch, please contribute it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14854</commentid>
    <comment_count>2</comment_count>
      <attachid>637</attachid>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2021-01-19 21:59:43 +0000</bug_when>
    <thetext>Created attachment 637
patch file.

Httpio have new timeout element. But no set default value before using.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14858</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-19 22:13:54 +0000</bug_when>
    <thetext>please send the patch to devel@edk2.groups.io for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14862</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-20 09:16:52 +0000</bug_when>
    <thetext>Patch:

* [edk2-devel] [PATCH] NetworkPkg/Library/DxeHttpIoLib: Http boot
  failure with no initializes timeout value.

  https://edk2.groups.io/g/devel/message/70371
  https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00858.html
  msgid &lt;20210115062256.17672-1-gregx.yeh@intel.com&gt;

Fixed in commit ca272b9513a6 (&quot;DxeHttpIoLib: Http boot failure with no
initializes timeout value.&quot;, 2021-01-20), via
&lt;https://github.com/tianocore/edk2/pull/1371&gt;.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>637</attachid>
            <date>2021-01-19 21:59:43 +0000</date>
            <delta_ts>2021-01-19 21:59:43 +0000</delta_ts>
            <desc>patch file.</desc>
            <filename>0001-NetworkPkg-Library-DxeHttpIoLib-Http-boot-failure-wi.patch</filename>
            <type>text/plain</type>
            <size>2862</size>
            <attacher name="Greg">gregx.yeh</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3049</bug_id>
          
          <creation_ts>2020-11-03 05:23:18 +0000</creation_ts>
          <short_desc>Add defintion for Arm Error Source Table (AEST)</short_desc>
          <delta_ts>2021-01-11 00:38:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14187</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-03 05:23:18 +0000</bug_when>
    <thetext>The Arm Error Source Table (AEST) is described in the ACPI for the Armv8 RAS Extensions 1.1 Platform Design Document, dated 28 September 2020.
(https://developer.arm.com/documentation/den0085/0101/)

AEST enables kernel-first handling of errors in a system that supports the Armv8 RAS extensions. It covers Armv8.2+ RAS extensions for PEs and the RAS system architecture for non-PE system components.

Therefore, definition for AEST in MdePkg/IndustryStandard.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14193</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-03 20:39:29 +0000</bug_when>
    <thetext>The patch has been sent in the group io. Sami, can you place the link to the patch in group io?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14217</commentid>
    <comment_count>2</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-04 06:05:41 +0000</bug_when>
    <thetext>Link for patch: https://edk2.groups.io/g/devel/message/66929</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14773</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-11 00:38:24 +0000</bug_when>
    <thetext>The patch has been merged @a955c6f97fff2c6045e04a4141432e974e0252c4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3462</bug_id>
          
          <creation_ts>2021-06-20 21:41:07 +0000</creation_ts>
          <short_desc>Conditionally clear SMM exception shadow stack token busy bit.</short_desc>
          <delta_ts>2021-12-05 22:29:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16402</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-06-20 21:41:07 +0000</bug_when>
    <thetext>When entry SMM exception, it does not always have the stack switch behavior.
If stack switch happens, there will be a shadow stack switch, only in this case, clear SMM exception shadow stack token busy bit is needed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16403</commentid>
    <comment_count>1</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-06-20 21:41:41 +0000</bug_when>
    <thetext>I will prepare the patch for this issue,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17926</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-12-05 22:29:47 +0000</bug_when>
    <thetext>patch is merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3824</bug_id>
          
          <creation_ts>2022-02-07 01:15:53 +0000</creation_ts>
          <short_desc>MinPlatformPkg: Install memory relating PPIs for EDKII native build and FSP dispatch mode</short_desc>
          <delta_ts>2022-02-20 19:47:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Xiaoqiang Zhang">xiaoqiang.zhang</reporter>
          <assigned_to name="Xiaoqiang Zhang">xiaoqiang.zhang</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>xiaoqiang.zhang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18248</commentid>
    <comment_count>0</comment_count>
    <who name="Xiaoqiang Zhang">xiaoqiang.zhang</who>
    <bug_when>2022-02-07 01:15:53 +0000</bug_when>
    <thetext>Install memory relating PPIs for EDKII native build and FSP dispatch mode</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18249</commentid>
    <comment_count>1</comment_count>
    <who name="Xiaoqiang Zhang">xiaoqiang.zhang</who>
    <bug_when>2022-02-07 01:20:06 +0000</bug_when>
    <thetext>if ((!PcdGetBool (PcdFspWrapperBootMode)) || (PcdGet8 (PcdFspModeSelection) == 0)) {
    //
    // Install memory relating PPIs for EDKII native build and FSP dispatch mode
    //
    Status = PeiServicesInstallPpi (mMemPpiList);
    ASSERT_EFI_ERROR (Status);
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18417</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-02-20 19:47:50 +0000</bug_when>
    <thetext>Patch Pushed: https://github.com/tianocore/edk2-platforms/commit/b6f9674</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3391</bug_id>
          
          <creation_ts>2021-05-12 13:13:48 +0000</creation_ts>
          <short_desc>build.py does not return failed status code when DSC POSTBUILD returns failed status code</short_desc>
          <delta_ts>2021-05-26 08:27:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Garrett Kirkendall">garrett.kirkendall</reporter>
          <assigned_to name="Garrett Kirkendall">garrett.kirkendall</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>rebecca</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16040</commentid>
    <comment_count>0</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2021-05-12 13:13:48 +0000</bug_when>
    <thetext>When DSC has POSBUILD and there is a POSTBUILD error,  build.py properly says the build failed, but build.py is still returning 0 (success).  MyBuild.LaunchPostBuild() execution does not look like it affects ReturnCode which is returned at the end of Main.  &quot;Conclusion&quot; is updated though to indicate a failure.  I assume build.py should return non-zero if POSTBUILD fails.  I don&apos;t know what the return value should be so need the main edk2 developers help to fix.




From end of edk-stable202011build.py:Main()

    if ReturnCode == 0:
        try:
            MyBuild.LaunchPostbuild()
            Conclusion = &quot;Done&quot;
        except:
            Conclusion = &quot;Failed&quot;
    elif ReturnCode == ABORT_ERROR:
        Conclusion = &quot;Aborted&quot;
    else:
        Conclusion = &quot;Failed&quot;
    FinishTime = time.time()
    BuildDuration = time.gmtime(int(round(FinishTime - StartTime)))
    BuildDurationStr = &quot;&quot;
    if BuildDuration.tm_yday &gt; 1:
        BuildDurationStr = time.strftime(&quot;%H:%M:%S&quot;, BuildDuration) + &quot;, %d day(s)&quot; % (BuildDuration.tm_yday - 1)
    else:
        BuildDurationStr = time.strftime(&quot;%H:%M:%S&quot;, BuildDuration)
    if MyBuild is not None:
        if not BuildError:
            MyBuild.BuildReport.GenerateReport(BuildDurationStr, LogBuildTime(MyBuild.AutoGenTime), LogBuildTime(MyBuild.MakeTime), LogBuildTime(MyBuild.GenFdsTime))

    EdkLogger.SetLevel(EdkLogger.QUIET)
    EdkLogger.quiet(&quot;\n- %s -&quot; % Conclusion)
    EdkLogger.quiet(time.strftime(&quot;Build end time: %H:%M:%S, %b.%d %Y&quot;, time.localtime()))
    EdkLogger.quiet(&quot;Build total time: %s\n&quot; % BuildDurationStr)
    Log_Agent.kill()
    Log_Agent.join()
    return ReturnCode



master is the same code:
https://github.com/tianocore/edk2/blob/master/BaseTools/Source/Python/build/build.py#L2738</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16041</commentid>
    <comment_count>1</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-05-12 13:16:41 +0000</bug_when>
    <thetext>This looks like a duplicate of https://bugzilla.tianocore.org/show_bug.cgi?id=1977 .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16042</commentid>
    <comment_count>2</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2021-05-12 13:23:47 +0000</bug_when>
    <thetext>Any chance of getting a fix, https://bugzilla.tianocore.org/show_bug.cgi?id=1977 is almost 2 years old now.  Looks like the try needs to set ReturnCode to something.  What value?  I&apos;ll propose a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16084</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-17 21:18:27 +0000</bug_when>
    <thetext>Garrett has sent the patch for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16092</commentid>
    <comment_count>4</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2021-05-18 10:16:37 +0000</bug_when>
    <thetext>proposed fix here:  Need help reviewing and submitting

https://github.com/gkirkendall-amd/edk2/tree/build_postbuild_return_status</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16171</commentid>
    <comment_count>5</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2021-05-26 08:26:12 +0000</bug_when>
    <thetext>Resolved with commit 04ae17218deec25c6f488609c5e2ca9c419d2c4b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16172</commentid>
    <comment_count>6</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2021-05-26 08:27:26 +0000</bug_when>
    <thetext>Resolved with commit 04ae17218deec25c6f488609c5e2ca9c419d2c4b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3261</bug_id>
          
          <creation_ts>2021-03-11 20:40:29 +0000</creation_ts>
          <short_desc>Lost dependency section when create FFS with guid section or FV section.</short_desc>
          <delta_ts>2021-04-21 23:53:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Greg">gregx.yeh</reporter>
          <assigned_to name="Greg">gregx.yeh</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15283</commentid>
    <comment_count>0</comment_count>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2021-03-11 20:40:29 +0000</bug_when>
    <thetext>Using Fmmt to replace FFS in FV. Fmmt will create new FV with new FFS.
New FFS will lost dependency section, when new FFS has guid or FV section.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15285</commentid>
    <comment_count>1</comment_count>
      <attachid>670</attachid>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2021-03-12 00:40:40 +0000</bug_when>
    <thetext>Created attachment 670
Patch file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15333</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-16 21:44:40 +0000</bug_when>
    <thetext>Greg, please send the patch to edk2 community list for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15761</commentid>
    <comment_count>3</comment_count>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2021-04-21 23:53:05 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2-staging/commit/a54d62ab498b42974a35d5a87c96816ac7fdd6de</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>670</attachid>
            <date>2021-03-12 00:40:40 +0000</date>
            <delta_ts>2021-03-12 00:40:40 +0000</delta_ts>
            <desc>Patch file</desc>
            <filename>0001-edk2-staging-BaseTools-Fmmt-Fix-rebuild-FFS-will-los.patch</filename>
            <type>text/plain</type>
            <size>28141</size>
            <attacher name="Greg">gregx.yeh</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3025</bug_id>
          
          <creation_ts>2020-10-26 08:54:01 +0000</creation_ts>
          <short_desc>Add SATA port error recovery when operating in AHCI mode</short_desc>
          <delta_ts>2020-11-10 22:12:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mateusz Albecki">mateusz.albecki</reporter>
          <assigned_to name="Mateusz Albecki">mateusz.albecki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14092</commentid>
    <comment_count>0</comment_count>
    <who name="Mateusz Albecki">mateusz.albecki</who>
    <bug_when>2020-10-26 08:54:01 +0000</bug_when>
    <thetext>When in AHCI mode AtaAtapiPassThru driver should recover any errors the port might signal. Error recovery procedure is covered by AHCI spec in section 6.2.2 of the AHCI spec 1.3.1.

It is possible to encounter a fata SATA port error during the boot and in such case it is possible that drive will become unresponsive and needs a SW assistance to make it work again. If we do not recover the port all subsequent commands to the port will fail.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14113</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:43:31 +0000</bug_when>
    <thetext>Albecki: please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14212</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-11-03 20:59:37 +0000</bug_when>
    <thetext>V1 patch sent at:
https://edk2.groups.io/g/devel/message/66924</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14249</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-11-05 21:58:10 +0000</bug_when>
    <thetext>V2 patch sent at: https://edk2.groups.io/g/devel/message/67035
V3 patch sent at: https://edk2.groups.io/g/devel/message/67039</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14325</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-11-10 22:12:26 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/1113
Commit - https://github.com/tianocore/edk2/commit/b465a811006eb1663068380dded041d287ace907</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3192</bug_id>
          
          <creation_ts>2021-01-27 23:40:17 +0000</creation_ts>
          <short_desc>Clear shadow stack token busy bit before return from SMM exception handler</short_desc>
          <delta_ts>2021-03-12 00:39:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3227</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14929</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-01-27 23:40:17 +0000</bug_when>
    <thetext>When CET SMM shadows stack feature enabled, and if there is a shadow stack switch between SMM exception and SMM handler,
SMM exception shadow stack token busy bit should be cleared before return from SMM exception, because CPU will check the busy bit should be cleared when enter SMM exception next time.
Reference to Intel® 64 and IA-32 Architectures Software Developer’s Manual, Volume 1 Chapter 18.2.5,
we use instruction SAVEPREVSSP, CLRSSBSY and RSTORSSP to clear the busy bit.

References Link:
https://software.intel.com/content/dam/develop/external/us/en/documents-tps/325462-sdm-vol-1-2abcd-3abcd.pdf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14931</commentid>
    <comment_count>1</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-01-28 21:39:53 +0000</bug_when>
    <thetext>There will be 2 patches for this issue.
One is for MdePkg/Include, it is used to add unsupported CET instructions to nasm.inc
Another one is for UefiCpuPkg/CpuExceptionHandlerLib, it is used to clear the shadow stack token busy bit before RETF instruction.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15172</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-01 20:40:56 +0000</bug_when>
    <thetext>Create PR https://github.com/tianocore/edk2/pull/1469</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15284</commentid>
    <comment_count>3</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-03-12 00:39:47 +0000</bug_when>
    <thetext>Patch is merged.
https://github.com/tianocore/edk2/commit/ef91b07388e1c0a50c604e5350eeda98428ccea6#diff-e1feaf09c814899a039a9ac370040a6f9c83f13ba05678d55cb2e26fca1bcf52</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3828</bug_id>
          
          <creation_ts>2022-02-08 02:49:00 +0000</creation_ts>
          <short_desc>CryptoPkg: Need to support EC and BN API due to WPA3 feature</short_desc>
          <delta_ts>2022-09-26 07:57:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="yi1.li@intel.com">yi1.li</reporter>
          <assigned_to name="yi1.li@intel.com">yi1.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>yi1.li</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18256</commentid>
    <comment_count>0</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-02-08 02:49:00 +0000</bug_when>
    <thetext>WI-FI module of BIOS need to support WPA3, which is the newest WI-FI security protocols. WPA3 adds new features to simplify WI-FI security, enable more robust authentication, deliver increased cryptographic strength for highly sensitive data markets, and maintain resiliency of mission critical networks. 

Both SAE and OWE (which are part of WPA3) require big numbers and Elliptic Curve calculations in order to implement the authentication mechanisms. Since CryptoPkg is already including a major part of the required openssl crypto, if we can support related API in CryptoPkg, we will be able to avoid duplicate compilation of openssl and save overall SPI size.

Reference link:
WPA3: https://www.wi-fi.org/discover-wi-fi/security
WPA3 SPEC: https://www.wi-fi.org/file/wpa3-specification</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18257</commentid>
    <comment_count>1</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-02-08 03:26:12 +0000</bug_when>
    <thetext>Part Bn:
Code ref: https://github.com/tianocore/edk2/pull/2446/commits

Size diff(Bytes):
       | CryptDxe.efi | CryptPei.efi | CryptSmm.efi |
Before |   813,504    |   539,104    |   561,952    |
After  |   815,360    |   540,672    |   563,456    |</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18263</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-08 21:37:21 +0000</bug_when>
    <thetext>Li is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18268</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-02-08 21:47:39 +0000</bug_when>
    <thetext>Some questions:

1) The PR https://github.com/tianocore/edk2/pull/2446/commits only adds BN API.
But the bugzilla mentions both EC and BN, what EC API you want to expose?

2) Usually, CryptoLib only exposes API for crypto function, but not primitive on BN. How the BN API is used by the high level function? Why not use the high level crypto API directly?

I have concern on exposing BN API, because the consumer need to be very careful to prevent side channel attack for the crypto primitive, such as ECC.

Or if we expose EC API, should it be enough? Why we still need BN API?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18366</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-15 02:19:59 +0000</bug_when>
    <thetext>Li is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18395</commentid>
    <comment_count>5</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-02-16 01:21:25 +0000</bug_when>
    <thetext>Q1:The PR https://github.com/tianocore/edk2/pull/2446/commits only adds BN API.
But the bugzilla mentions both EC and BN, what EC API you want to expose?

https://github.com/tianocore/edk2/pull/2504/files
This patch shows EC API we want to expose, you can see it at CryptoPkg/Include/Library/BaseCryptLib.h and CryptoPkg/Library/BaseCryptLib/Ec/CryptEc.c.
It still has many CI error, we will submit an official patch when the issue is resolved.

Q2:Usually, CryptoLib only exposes API for crypto function, but not primitive on BN. How the BN API is used by the high level function? Why not use the high level crypto API directly?

BN/EC are needed mainly for SAE. OWE implementation requires only EcDH functions which should be less of such concern.
BN/EC functions are used in sae.c and dragonfly.c in Supplicant’s code.
Another possible approach is to provide SAE algorithm’s APIs instead of BN/EC primitives. However this is more complicated as it is more internal to Supplicant’s core code and has more 802.11 specifics.
On the other hand, we use wpa_supplicant code which already implements an interface with OpenSSL library needed for WPA3 implementation. Both wpa_supplicant and OpenSSL are developed by open source community and changing of the existing interfaces between them is very challenging. 

Anyway, We are still discussing this issue with WIFI team, if there is any other progress I will update it here in time.

REF: wpa_supplicant source code:
https://w1.fi/cgit/hostap/tree/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18506</commentid>
    <comment_count>6</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-03-02 08:06:33 +0000</bug_when>
    <thetext>(In reply to jiewen.yao from comment #3)

&gt; 2) Usually, CryptoLib only exposes API for crypto function, but not
&gt; primitive on BN. How the BN API is used by the high level function? Why not
&gt; use the high level crypto API directly?
&gt; 
&gt; I have concern on exposing BN API, because the consumer need to be very
&gt; careful to prevent side channel attack for the crypto primitive, such as ECC.
&gt; 
&gt; Or if we expose EC API, should it be enough? Why we still need BN API?

Does the requirement of exposing BN API confirmed? WCS will provide support, if more detail or explanation is required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18666</commentid>
    <comment_count>7</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-03-22 07:05:17 +0000</bug_when>
    <thetext>Pre work: Give base tools a way to customize source files in INF file.
Patch is in review process:
https://edk2.groups.io/g/devel/message/87820?p=%2C%2C%2C20%2C0%2C0%2C0%3A%3Arecentpostdate%2Fsticky%2C%2Cyi1.li%40%2C20%2C2%2C0%2C89947426</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18780</commentid>
    <comment_count>8</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-04-07 10:47:22 +0000</bug_when>
    <thetext>Thank you very much Yi.

Would you please:
1) Provide binary size delta for EC patch. (Similar to what you have done for BN patch.

2) Add all API test to https://github.com/tianocore/edk2/tree/master/CryptoPkg/Test/UnitTest/Library/BaseCryptLib


Question: The EC APIs seems very low level API.
But we do have high level usage, such as ECDSA, ECDH, EdCurve (25519/448) DSA, XCurve (25519/448) DH, SM2 DSA, SM2 Key Exchange, get ECC key_context from a PEM private key, get ECC key_context from a X.509 public cert.

Would you please clarify how to achieve that with those EC APIs?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19632</commentid>
    <comment_count>9</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-09-26 07:57:06 +0000</bug_when>
    <thetext>Merged https://github.com/tianocore/edk2/pull/3403
https://github.com/tianocore/edk2/pull/3390</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3482</bug_id>
          
          <creation_ts>2021-07-07 05:20:30 +0000</creation_ts>
          <short_desc>Add search feature in config editor</short_desc>
          <delta_ts>2021-07-15 11:18:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Loo Tung Lun">tung.lun.loo</reporter>
          <assigned_to name="Loo Tung Lun">tung.lun.loo</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16570</commentid>
    <comment_count>0</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-07-07 05:20:30 +0000</bug_when>
    <thetext>Add a search function in config editor to allow quickly scrub through long list of configuration items.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16622</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-13 21:42:22 +0000</bug_when>
    <thetext>Loo will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16647</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-07-15 11:18:48 +0000</bug_when>
    <thetext>commit cac83b6f3bfa361bb2c561675c3247ff88341067 
Author: Loo, Tung Lun &lt;tung.lun.loo@intel.com&gt;
Date:   Tue Jul 13 08:12:08 2021 +0800

    IntelFsp2Pkg: Add search function for Config Editor

    BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=3482

    This patch adds a search function in the Config Editor GUI at
    the top right corner. Once users key in the words to search,
    it will look for the option containing the string in the
    same page and display it. It also includes a README for this
    function.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Signed-off-by: Loo Tung Lun &lt;tung.lun.loo@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3122</bug_id>
          
          <creation_ts>2020-12-16 02:00:54 +0000</creation_ts>
          <short_desc>FitGen should support slot mode for multiple microcode FV.</short_desc>
          <delta_ts>2020-12-23 19:52:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Aaron Li">aaron.li</reporter>
          <assigned_to name="Aaron Li">aaron.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14589</commentid>
    <comment_count>0</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-12-16 02:00:54 +0000</bug_when>
    <thetext>Currently the slot mode &quot;-L&quot;/&quot;-l&quot; for microcode capsule update can only support the Microcode FV with a specific FFS GUID.

In order to support multiple Microcode FV with different FFS GUID. A new flag should be added to ignore the FFS GUID check.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14590</commentid>
    <comment_count>1</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-12-16 02:02:42 +0000</bug_when>
    <thetext>take owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14611</commentid>
    <comment_count>2</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-12-17 04:55:27 +0000</bug_when>
    <thetext>patch sent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14641</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-21 20:57:56 +0000</bug_when>
    <thetext>Aaron has sent the patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14653</commentid>
    <comment_count>4</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-12-23 19:52:50 +0000</bug_when>
    <thetext>Checked-in @ https://github.com/tianocore/edk2-platforms/commit/c5ac48fed72692c4c9ce61ff393f284ce1bc1e81</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3262</bug_id>
          
          <creation_ts>2021-03-12 02:58:50 +0000</creation_ts>
          <short_desc>Unknown PCIe extended capability ID (70FFh/FFFFh).  No interpretation available.&quot; error message in output of pci -i command in EFI Shell</short_desc>
          <delta_ts>2021-03-22 15:11:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>vincentx.ke</reporter>
          <assigned_to>vincentx.ke</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vincentx.ke</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15286</commentid>
    <comment_count>0</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-03-12 02:58:50 +0000</bug_when>
    <thetext>Unknown PCIe extended capability ID (70FFh/FFFFh).  No interpretation available.&quot; error message in output of pci -i command in EFI Shell</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15287</commentid>
    <comment_count>1</comment_count>
      <attachid>672</attachid>
    <who name="">vincentx.ke</who>
    <bug_when>2021-03-12 03:17:54 +0000</bug_when>
    <thetext>Created attachment 672
Adding error handle while CapabilityId is 0xFFFF</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15332</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-16 21:43:14 +0000</bug_when>
    <thetext>Vincent: please send the patch to edk2 mail list (devel@edk2.groups.io) for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15335</commentid>
    <comment_count>3</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-03-16 21:51:14 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #2)
&gt; Vincent: please send the patch to edk2 mail list (devel@edk2.groups.io) for
&gt; code review.

Already did. Waiting ShellPkg owner code review now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15350</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-17 17:02:12 +0000</bug_when>
    <thetext>Three versions of the patch have been posted, but they never used the proper v1, v2, v3 markings in the subject prefix.

Furthermore, the patches were posted &quot;from the future&quot;, apparently: I see April 2021 dates on them, even though it&apos;s only March 2021 now.

Anyway. the links are:

v1: https://edk2.groups.io/g/devel/message/72748
v2: https://edk2.groups.io/g/devel/message/72862
v3: https://edk2.groups.io/g/devel/message/72953

Setting status to IN_PROGRESS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15360</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-18 11:01:31 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v4]
  ShellPkg/Pci: Add valid check for PCI extended config space parser

msgid: &lt;4f96766095369b1062be5ddae93208ac16ca958b.1616036135.git.vincentx.ke@intel.com&gt;
https://edk2.groups.io/g/devel/message/72997
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00743.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15391</commentid>
    <comment_count>6</comment_count>
      <attachid>676</attachid>
    <who name="">vincentx.ke</who>
    <bug_when>2021-03-22 04:12:41 +0000</bug_when>
    <thetext>Created attachment 676
ShellPkg/Pci: Add valid check for PCI extended config space parser</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15394</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-22 13:37:35 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v5]
  ShellPkg/Pci: Add valid check for PCI extended config space parser

msgid: &lt;d7ee56f58a710d4b0aa11a567358f98723862888.1616399160.git.vincentx.ke@intel.com&gt;
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00816.html
https://edk2.groups.io/g/devel/message/73069</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15396</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-22 15:11:44 +0000</bug_when>
    <thetext>Merged as commit 3d0df0f, via &lt;https://github.com/tianocore/edk2/pull/1508&gt;.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>672</attachid>
            <date>2021-03-12 03:17:54 +0000</date>
            <delta_ts>2021-03-22 04:12:41 +0000</delta_ts>
            <desc>Adding error handle while CapabilityId is 0xFFFF</desc>
            <filename>0001-ShellPkg-Library-Adding-error-handle.patch</filename>
            <type>text/plain</type>
            <size>1078</size>
            <attacher>vincentx.ke</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>676</attachid>
            <date>2021-03-22 04:12:41 +0000</date>
            <delta_ts>2021-03-22 04:12:41 +0000</delta_ts>
            <desc>ShellPkg/Pci: Add valid check for PCI extended config space parser</desc>
            <filename>0001-ShellPkg-Pci-Add-valid-check-for-PCI-extended-config.patch</filename>
            <type>text/plain</type>
            <size>3621</size>
            <attacher>vincentx.ke</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3150</bug_id>
          
          <creation_ts>2021-01-04 07:29:02 +0000</creation_ts>
          <short_desc>Add Core CI support for StandaloneMmPkg</short_desc>
          <delta_ts>2021-01-11 00:45:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14698</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-01-04 07:29:02 +0000</bug_when>
    <thetext>The TianoCore EDKII project has introduced a Core CI infrastructure
using TianoCore EDKII Tools PIP modules:
      * https://pypi.org/project/edk2-pytool-library/
      * https://pypi.org/project/edk2-pytool-extensions/

Therefore, add support for running CI for StandaloneMmPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14718</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-05 21:42:54 +0000</bug_when>
    <thetext>Sami is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14746</commentid>
    <comment_count>2</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-01-06 08:05:44 +0000</bug_when>
    <thetext>Patch series posted to edk2 mailing list at https://edk2.groups.io/g/devel/topic/patch_v3_00_26_enable_core/79423256</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14775</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-11 00:44:43 +0000</bug_when>
    <thetext>The patch has been merged @248d08c5983b561549891fec54c213e1f354179c..d8d1f6661d672c0a01bc46e67a29d8714db9dcb2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14776</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-11 00:45:16 +0000</bug_when>
    <thetext>The changes have been merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3054</bug_id>
          
          <creation_ts>2020-11-05 20:43:30 +0000</creation_ts>
          <short_desc>CryptoPkg: BaseCryptLib: Add unit tests (Host and Shell based)</short_desc>
          <delta_ts>2020-11-05 20:44:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to name="Matthew Carlson">macarl</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14246</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-05 20:43:30 +0000</bug_when>
    <thetext>Add unit test for BaseCryptLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14247</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-05 20:44:14 +0000</bug_when>
    <thetext>Matthew has fixed this issue on edk2 694bfd6ff5b9a8352b4ca8634ed4ce449f505991.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3802</bug_id>
          
          <creation_ts>2022-01-11 21:47:50 +0000</creation_ts>
          <short_desc>[BaseTools] Enhance GenFw to support PRM GCC build</short_desc>
          <delta_ts>2022-03-20 23:09:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>lisa.huang</reporter>
          <assigned_to>lisa.huang</assigned_to>
          <cc>benjamin.you</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18119</commentid>
    <comment_count>0</comment_count>
    <who name="">lisa.huang</who>
    <bug_when>2022-01-11 21:47:50 +0000</bug_when>
    <thetext>Since PRM module needs to support export table in PE-COFF, we&apos;ll enhance GenFw tool to support this.

Add one export flag in GenFw tool. If export flag is set:
Step1: Scan ELF symbol table based on PRM module descriptor to get descriptor offset address;
Step2: Find PRM handlers number and name in COFF file based on the address from step1;
Step3: Write PRM info such as handler name and export RVA into COFF export table.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18177</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-18 00:02:55 +0000</bug_when>
    <thetext>Lisa is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18178</commentid>
    <comment_count>2</comment_count>
    <who name="">lisa.huang</who>
    <bug_when>2022-01-18 00:29:04 +0000</bug_when>
    <thetext>To support export table in PE-COFF for PRM module, we add option &apos;--PRM&apos; in GenFw tool. This option can be used together with -e, it doesn&apos;t work for other options.

The usage will be as below:

./GenFw -e DXE_RUNTIME_DRIVER -o PrmSamplePrint.efi PrmSamplePrint.dll -v --PRM

If &apos;--PRM&apos; is set, GenFw will scan ELF symbol table and find specified function name and address, then write related info to export table in PE-COFF.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18179</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-18 00:45:26 +0000</bug_when>
    <thetext>Which rule is used to find specified function name and address?

What usage model is for the export table in PE-COFF?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18180</commentid>
    <comment_count>4</comment_count>
    <who name="">lisa.huang</who>
    <bug_when>2022-01-18 01:11:09 +0000</bug_when>
    <thetext>
1. Which rule is used to find specified function name and address?

PRM module descriptor will be pre-defined as below:
#define PRM_MODULE_EXPORT_DESCRIPTOR_NAME         &quot;PrmModuleExportDescriptor&quot;

GenFw will scan above symbol name in ELF file, if matched, descriptor offset address could be found. Based on this address and PRM Spec, we could locate PRM handler number and name from COFF.

typedef struct {
  UINT64                                Signature;
  UINT16                                Revision;
  UINT16                                NumberPrmHandlers;
  EFI_GUID                              PlatformGuid;
  EFI_GUID                              ModuleGuid;
} PRM_MODULE_EXPORT_DESCRIPTOR_STRUCT_HEADER;


2. What usage model is for the export table in PE-COFF?
@benjamin.you@intel.com, could you help to answer this question?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18181</commentid>
    <comment_count>5</comment_count>
    <who name="Benjamin You">benjamin.you</who>
    <bug_when>2022-01-18 01:30:17 +0000</bug_when>
    <thetext>Hi,

PRM is a technology that enables BIOS to provide modules to run in OS space for features traditionally implemented in SMM.

Please see:
1) References of PRM in ACPI Spec 6.4 (https://uefi.org/sites/default/files/resources/ACPI_Spec_6_4_Jan22.pdf)

2) PRM spec where PE image&apos;s export table is used to expose PRM information.(https://uefi.org/sites/default/files/resources/Platform%20Runtime%20Mechanism%20-%20with%20legal%20notice.pdf) 

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18183</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-19 01:26:11 +0000</bug_when>
    <thetext>Does only runtime driver have PrmModuleExportDescriptor table? Does SMM driver have it? 

This change in GenFw is to support GCC tool chain. In VS tool chain, is the export table specified in C source code?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18185</commentid>
    <comment_count>7</comment_count>
    <who name="Benjamin You">benjamin.you</who>
    <bug_when>2022-01-19 02:53:35 +0000</bug_when>
    <thetext>Hi,

PRM Modules implement certain SMM functions, but they are built as Runtime drivers, not built as SMM drivers. 

PRM Modules conform to PRM spec and have export table but regular Runtime drivers don&apos;t.

Sample PRM Modules can be found at https://github.com/tianocore/edk2-staging/tree/PlatformRuntimeMechanism/PrmPkg/Samples

For VS tool chain, exported symbols are specified in source using &quot;__declspec(dllexport)&quot;. Please see definition of &quot;PRM_EXPORT_API&quot; at https://github.com/tianocore/edk2-staging/blob/PlatformRuntimeMechanism/PrmPkg/Include/Prm.h

For GCC, this GenFw patch converts PRM defined symbols from ELF symbol table to PE Export Table.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18206</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-26 21:05:59 +0000</bug_when>
    <thetext>For ELF, can the dynamic symbol table (in .dynsym) be used to find the export symbol?

If PRM Module is required to be RUNTIME module, GenFw tool should add this check. I think GenFw can always do this conversion to the export table for the runtime driver, don&apos;t need to add new option PRM.

Does RPM module support other arch, such as IA32, ARM, AARCH64, RISCV? If yes, Elf32Convert.c is also required to be updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18211</commentid>
    <comment_count>9</comment_count>
    <who name="Benjamin You">benjamin.you</who>
    <bug_when>2022-01-27 05:01:34 +0000</bug_when>
    <thetext>Hi,

We found it difficult to leverage the .dynsym section which is discarded in the GccBase.lds. We found it just OK to use the .symtab section to find (and start with) the PRM defined symbol &quot;PrmModuleExportDescriptor&quot;. This way we limit the scope of code changes.

PRM has other format and content restrictions beyond the data structure exported. We would like to disallow regular runtime drivers to export &quot;PrmModuleExportDescriptor&quot;. We have been considering pursuing a dedicated module type for PRM. Before that pursuit which will likely take time, we are using a GenFw parameter &quot;--PRM&quot; for PRM modules, which is small touch and transparent to other modules.

PRM is not restricted to X64. Per our current needs, we are adding Elf conversion for X64. We are currently limited in bandwidth and platforms to support and validate conversion for 32-bit. This could be added at a later time, and community is also welcome to add support to this.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18216</commentid>
    <comment_count>10</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-28 00:35:16 +0000</bug_when>
    <thetext>Now, PRM option is only allowed for RUNTIME driver and X64 arch. The patch needs to add the check for the supported scope. If RPM option is specified for other module type or other ARCH, GenFw should return unsupported error. And, the patch commit message is also required to mention this limitation. Last, to align current  option style in GenFw tool, I suggest new option name as --prm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18217</commentid>
    <comment_count>11</comment_count>
    <who name="Benjamin You">benjamin.you</who>
    <bug_when>2022-01-28 00:53:40 +0000</bug_when>
    <thetext>Thanks Liming. We will submit another patch with your considerations incorporated (together with some other code adjustments).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18654</commentid>
    <comment_count>12</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-20 23:09:23 +0000</bug_when>
    <thetext>Fix 414cd2a4d536b444acee3fcdbe33bd0c8ef9819b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3345</bug_id>
          
          <creation_ts>2021-04-20 16:56:57 +0000</creation_ts>
          <short_desc>SEV-ES guest does not work with a TPM enabled OVMF package</short_desc>
          <delta_ts>2021-04-30 14:44:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3354</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>thomas.lendacky</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable202008</cf_release_observed>
    
    <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15742</commentid>
    <comment_count>0</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-04-20 16:56:57 +0000</bug_when>
    <thetext>Running an SEV-ES guest on a OVMF package that is built with TPM support enabled (-DTPM_ENABLE -DTPM_CONFIG_ENABLE) results in guest termination. The reason for this is MMIO is being attempted to an address that is mapped encrypted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15745</commentid>
    <comment_count>1</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-04-20 19:04:30 +0000</bug_when>
    <thetext>v1:
  https://edk2.groups.io/g/devel/message/74308
  https://listman.redhat.com/archives/edk2-devel-archive/2021-April/msg00720.html
  msgid: &lt;cover.1618959281.git.thomas.lendacky@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15790</commentid>
    <comment_count>2</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-04-27 12:24:44 +0000</bug_when>
    <thetext>v2:
  https://edk2.groups.io/g/devel/message/74490
  https://listman.redhat.com/archives/edk2-devel-archive/2021-April/msg00886.html
  msgid: &lt;cover.1619540470.git.thomas.lendacky@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15796</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-27 21:37:46 +0000</bug_when>
    <thetext>Thomas is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15852</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-30 13:46:00 +0000</bug_when>
    <thetext>v3:

[edk2-devel] [PATCH v3 0/5] SEV-ES TPM enablement fixes
https://edk2.groups.io/g/devel/message/74608
http://mid.mail-archive.com/cover.1619716333.git.thomas.lendacky@amd.com
https://listman.redhat.com/archives/edk2-devel-archive/2021-April/msg01022.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15856</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-30 14:44:09 +0000</bug_when>
    <thetext>Merged in commit range ab957f036f67..1e6b0394d6c0, via &lt;https://github.com/tianocore/edk2/pull/1620&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3011</bug_id>
          
          <creation_ts>2020-10-15 21:22:34 +0000</creation_ts>
          <short_desc>CI test fail on copyright information in INF file</short_desc>
          <delta_ts>2020-10-22 11:24:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="yunhua feng">fengyunhua</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14004</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-10-15 21:22:34 +0000</bug_when>
    <thetext>CI complains the copyright information in below file header

## @file
# Implementation of EFI REST JSON Structure Protocol.
#
#  (C) Copyright 2020 Hewlett Packard Enterprise Development LP&lt;BR&gt;
#  SPDX-License-Identifier: BSD-2-Clause-Patent
##

I had confirmed that CI test passed with the below one, move “(C)” to behind &quot;Copyright&quot;.

## @file
# Implementation of EFI REST JSON Structure Protocol.
#
#  Copyright (C) 2020 Hewlett Packard Enterprise Development LP&lt;BR&gt;
#  SPDX-License-Identifier: BSD-2-Clause-Patent
##</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14042</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-19 21:55:48 +0000</bug_when>
    <thetext>Yunhua will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14071</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-22 11:24:31 +0000</bug_when>
    <thetext>PR: https://github.com/tianocore/edk2/pull/1043</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3632</bug_id>
          
          <creation_ts>2021-09-15 21:29:47 +0000</creation_ts>
          <short_desc>Make PcdFspModeSelection dynamic and set it accordingly</short_desc>
          <delta_ts>2021-09-22 04:38:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Xiaoqiang Zhang">xiaoqiang.zhang</reporter>
          <assigned_to name="Xiaoqiang Zhang">xiaoqiang.zhang</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2WrapperPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17283</commentid>
    <comment_count>0</comment_count>
    <who name="Xiaoqiang Zhang">xiaoqiang.zhang</who>
    <bug_when>2021-09-15 21:29:47 +0000</bug_when>
    <thetext>Make PcdFspModeSelection dynamic and set it accordingly</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17284</commentid>
    <comment_count>1</comment_count>
    <who name="Xiaoqiang Zhang">xiaoqiang.zhang</who>
    <bug_when>2021-09-15 21:33:38 +0000</bug_when>
    <thetext>Make PcdFspModeSelection dynamic and set it accordingly</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17285</commentid>
    <comment_count>2</comment_count>
    <who name="Xiaoqiang Zhang">xiaoqiang.zhang</who>
    <bug_when>2021-09-16 00:03:51 +0000</bug_when>
    <thetext>Patch set</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17351</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-09-22 04:38:37 +0000</bug_when>
    <thetext>commit f334c5a41dc4702b1c767c6614025aa2f802f9a4
Author: Zhang Xiaoqiang &lt;xiaoqiang.zhang@intel.com&gt;
Date:   Thu Sep 16 11:44:47 2021 +0800

    IntelFsp2WrapperPkg: Make PcdFspModeSelection dynamic

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3632

    PcdFspModeSelection will be used to set FSP mode.
    Make PcdFspModeSelection dynamic and set it accordingly.

    Signed-off-by: Zhang Xiaoqiang &lt;xiaoqiang.zhang@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3027</bug_id>
          
          <creation_ts>2020-10-26 21:29:10 +0000</creation_ts>
          <short_desc>Remove the deprecated MD5 and SHA1 support of Hash2DxeCrypto</short_desc>
          <delta_ts>2020-11-17 14:29:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3003</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3021</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14096</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-10-26 21:29:10 +0000</bug_when>
    <thetext>Remove the deprecated MD5 and SHA1 support of Hash2DxeCrypto.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14111</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:41:58 +0000</bug_when>
    <thetext>Zhichao is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14353</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-13 18:34:44 +0000</bug_when>
    <thetext>* v1:
[edk2-devel] [PATCH 0/5] Make the MD5 disable as default setting
msgid: &lt;20201026090343.13048-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/66595
https://www.redhat.com/archives/edk2-devel-archive/2020-October/msg00817.html

* v2:
[edk2-devel] [PATCH V2 0/7] Disable the deprecated MD5 and SHA1 support
msgid: &lt;20201027024300.21100-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/66619
https://www.redhat.com/archives/edk2-devel-archive/2020-October/msg00838.html

* v3:
[edk2-devel] [PATCH V3 00/12] Disable the deprecated MD5 and SHA1 support
msgid: &lt;20201110173651.54036-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/67234
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00393.html

* v4:
[edk2-devel] [PATCH V4 00/13] Disable the deprecated MD5 and SHA1 support
msgid: &lt;20201112055558.2348-1-zhichao.gao@intel.com&gt;
https://edk2.groups.io/g/devel/message/67359
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00519.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14365</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-17 14:29:43 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)

&gt; * v4:
&gt; [edk2-devel] [PATCH V4 00/13] Disable the deprecated MD5 and SHA1 support
&gt; msgid: &lt;20201112055558.2348-1-zhichao.gao@intel.com&gt;
&gt; https://edk2.groups.io/g/devel/message/67359
&gt; https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00519.
&gt; html

Merged as commit range 29d59baa3907..e6a12a0fc817, via &lt;https://github.com/tianocore/edk2/pull/1130&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3055</bug_id>
          
          <creation_ts>2020-11-06 03:31:44 +0000</creation_ts>
          <short_desc>Add firmware support for Kvmtool</short_desc>
          <delta_ts>2020-11-08 19:47:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14252</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-06 03:31:44 +0000</bug_when>
    <thetext>Kvmtool is a virtual machine manager that can be used to launch guest partitions. Kvmtool additionally supports emulation of hardware like the RTC, CFI etc. essentially providing an emulated platform for a Guest OS to run.

To boot a standards-based OS one would need UEFI. In this case it is UEFI at EL1 or guest/virtual firmware.
 
Kvmtool has been enhanced to enable launching of KVM guests with UEFI support e.g. CFI emulation has been added to store UEFI variables, etc. These changes have been merged in the kvmtool repository at: https://git.kernel.org/pub/scm/linux/kernel/git/will/kvmtool.git

Therefore, add firmware support for Kvmtool.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14253</commentid>
    <comment_count>1</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-11-06 03:41:09 +0000</bug_when>
    <thetext>The patch series for adding Kvmtool firmware support was posted at https://edk2.groups.io/g/devel/message/66340 and has been merged in edk2 master branch at:

PcAtChipsetPkg: Add MMIO Support to RTC driver (https://github.com/tianocore/edk2/commit/015be4075f6cfef03bc08c0e3eb7286dd80c8e8b)

ArmVirtPkg: Add Kvmtool RTC Fdt Client Library (https://github.com/tianocore/edk2/commit/cd09c38465f662674619c10abd9d35a25e47146e)

ArmPlatformPkg: Dynamic flash variable base (https://github.com/tianocore/edk2/commit/d3095addf31a0bfa48a4be64299928b4550d8e66)

ArmVirtPkg: Add kvmtool platform driver (https://github.com/tianocore/edk2/commit/39d76b25965d2cc55e32845e586ee5611b75895a)

ArmVirtPkg: kvmtool platform memory map (https://github.com/tianocore/edk2/commit/4c5e875ec140b2a01099a8b37ca1a3ca43f57201)

ArmVirtPkg: Add Kvmtool NOR flash lib (https://github.com/tianocore/edk2/commit/69f8ef04a8c30dee5775ea1e23a9f4edc7c0e41d)

MdeModulePkg: Fix constructor invocation ordering (https://github.com/tianocore/edk2/commit/1c03498a25dede9cb24481c5e2b9dc0c463f8414)

ArmVirtPkg: GUID Hob for 16550 UART base address (https://github.com/tianocore/edk2/commit/d30886d24c1c7e916015cbf0ec5a88498f686e28)

ArmVirtPkg: 16550 UART Platform hook library (https://github.com/tianocore/edk2/commit/a482f08d99b3a97a8b11a4a31ed2d769b5b35771)

ArmVirtPkg: Add Kvmtool Platform Pei Lib (https://github.com/tianocore/edk2/commit/e556cebb2f16edbd4d1d4fdf2ae9d7cc164d1090)

ArmVirtPkg: Support for kvmtool virtual platform (https://github.com/tianocore/edk2/commit/6038e7a2c2156530a2a8dbe69bd3db97ca530a52)

ArmVirtPkg: Package dependency for MC146818 RTC (https://github.com/tianocore/edk2/commit/4a57aeaa7e269ee9fe423c808444615fd95c93ba)

ArmVirtPkg: Add kvmtool to package dictionary (https://github.com/tianocore/edk2/commit/6a9d0c1753848a4334c6b103b4d2e27437613a0c)

.python/SpellCheck: Add &apos;XIPFLAGS&apos; to &quot;words&quot; section (https://github.com/tianocore/edk2/commit/870ee2f6c8887494e20a314d1502cd3b80b57ad0)

Maintainer.txt: Add Kvmtool platform reviewer (https://github.com/tianocore/edk2/commit/30f0ec8d80072ae3ab58e08014e6b2ffe3ef97e1)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14268</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-08 19:46:43 +0000</bug_when>
    <thetext>Sami has fixed it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14269</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-08 19:47:09 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3314</bug_id>
          
          <creation_ts>2021-04-09 18:53:45 +0000</creation_ts>
          <short_desc>Add support for RSASSA-PSS signature scheme in Crypto package</short_desc>
          <delta_ts>2021-05-13 23:45:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sachin Agrawal">sachin.agrawal</reporter>
          <assigned_to name="Sachin Agrawal">sachin.agrawal</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>sachin.agrawal</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15586</commentid>
    <comment_count>0</comment_count>
    <who name="Sachin Agrawal">sachin.agrawal</who>
    <bug_when>2021-04-09 18:53:45 +0000</bug_when>
    <thetext>EDK2 Crypto package currently have support for RSASSA-PKCS1-v1_5 verification.
An alternative to this is RSASSA-PSS signature scheme. It is provably secure and is recommended padding scheme in newer applications. See RFC 8017 (Section 8). 

For Intel&apos;s IOT platforms which have a long life and support model, it is a requirement to support higher strength crypto algorithms.

Therefore, we want to add support for RSASSA-PSS signature scheme in EDK2 Crypto package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15657</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-13 21:58:44 +0000</bug_when>
    <thetext>Sachin: please go ahead.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16058</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2021-05-13 23:45:32 +0000</bug_when>
    <thetext>Pushed @ https://github.com/tianocore/edk2/commit/22ac5cc9d9db34056f7c97e994fd9def683ebb2e
Reviewed @ https://edk2.groups.io/g/devel/message/74755</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3368</bug_id>
          
          <creation_ts>2021-04-30 14:20:38 +0000</creation_ts>
          <short_desc>Add support for AARCH64 to RngDxe and BaseRngLib</short_desc>
          <delta_ts>2021-05-12 23:21:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="Rebecca Cran">rebecca</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15855</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-04-30 14:20:38 +0000</bug_when>
    <thetext>I&apos;m working on a patch series to add support to MdePkg/Library/BaseRngLib and SecurityPkg/RandomNumberGenerator/RngDxe for AARCH64 using the RNDR and RNDRRS instructions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16026</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-11 22:04:54 +0000</bug_when>
    <thetext>Rebecca has fixed it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16046</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-12 23:21:19 +0000</bug_when>
    <thetext>Merged as #1633</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3242</bug_id>
          
          <creation_ts>2021-03-01 20:59:14 +0000</creation_ts>
          <short_desc>Add IPMI transport drivers to the IpmiFeaturePkg</short_desc>
          <delta_ts>2022-09-16 13:04:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IpmiFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nathaniel L DeSimone">nathaniel.l.desimone</reporter>
          <assigned_to name="Nathaniel L DeSimone">nathaniel.l.desimone</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>isaac.w.oram</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15173</commentid>
    <comment_count>0</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-03-01 20:59:14 +0000</bug_when>
    <thetext>Implement an open source generic IPMI transport driver. Provides the ability to communicate with a BMC over IPMI in MinPlatform board packages.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15174</commentid>
    <comment_count>1</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-03-01 21:01:53 +0000</bug_when>
    <thetext>I am working on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15175</commentid>
    <comment_count>2</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-03-01 21:38:35 +0000</bug_when>
    <thetext>Patch series has been sent to the mailing list: https://edk2.groups.io/g/devel/message/72308</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19587</commentid>
    <comment_count>3</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2022-09-16 13:04:28 +0000</bug_when>
    <thetext>Merged: 0f14235b~..3a827923</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3012</bug_id>
          
          <creation_ts>2020-10-18 23:21:30 +0000</creation_ts>
          <short_desc>Revert the change for partition child handler block size change</short_desc>
          <delta_ts>2020-11-10 15:43:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14020</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-10-18 23:21:30 +0000</bug_when>
    <thetext>The fix for https://bugzilla.tianocore.org/show_bug.cgi?id=2843 would cause a regression for CD image with ELTORITO_12_DISKETTE/ELTORITO_14_DISKETTE/ELTORITO_28_DISKETTE/ELTORITO_HARD_DISK media type. 2843 fixed the Linux iso image&apos;s MBR be handled incorrectly with MBR handler. But with the fix of https://bugzilla.tianocore.org/show_bug.cgi?id=2823, the issue is gone. Because the ISO 9660 image&apos;s MBR table would always be ignored and it would be handled by UDF(Eltorito compatible) handler instead of MBR handler.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14125</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:58:23 +0000</bug_when>
    <thetext>Zhichao is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14304</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-10 15:43:20 +0000</bug_when>
    <thetext>Mailing list thread:

* [edk2-devel] [PATCH]
  MdeModulePkg/PartitionDxe: Revert the child handler blocksize change

  https://edk2.groups.io/g/devel/message/66124
  https://www.redhat.com/archives/edk2-devel-archive/2020-October/msg00343.html

* Pull request (merged):
  https://github.com/tianocore/edk2/pull/1033

* Commit: f82b827c92f7.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3504</bug_id>
          
          <creation_ts>2021-07-21 20:24:35 +0000</creation_ts>
          <short_desc>Use of kernel/initrd/append option doesn&apos;t load VM</short_desc>
          <delta_ts>2021-08-11 06:09:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christoph Willing">chris.willing</reporter>
          <assigned_to name="Christoph Willing">chris.willing</assigned_to>
          <cc>chris.willing</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable201808</cf_release_observed>
    
    <cf_release_observed>edk2-stable201811</cf_release_observed>
    
    <cf_release_observed>edk2-stable201903</cf_release_observed>
    
    <cf_release_observed>edk2-stable201905</cf_release_observed>
    
    <cf_release_observed>edk2-stable201908</cf_release_observed>
    
    <cf_release_observed>edk2-stable201911</cf_release_observed>
    
    <cf_release_observed>edk2-stable202002</cf_release_observed>
    
    <cf_release_observed>edk2-stable202005</cf_release_observed>
    
    <cf_release_observed>edk2-stable202008</cf_release_observed>
    
    <cf_release_observed>edk2-stable202011</cf_release_observed>
    
    <cf_release_observed>edk2-stable202102</cf_release_observed>
    
    <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16675</commentid>
    <comment_count>0</comment_count>
    <who name="Christoph Willing">chris.willing</who>
    <bug_when>2021-07-21 20:24:35 +0000</bug_when>
    <thetext>With Qemu versions 4.0.0 and 6.0.0, and OVMF files from edk2-stable201808 onward, VMs using -kernel option will not load correctly. The kernel and initrd are loaded but have no access to the VM itself. The last release to work correctly was vUDK2018.

Using git-bisect, it was found that commit a34a886962561f6d8550b2a1bb193798ca456431 is the cause of the problem.

Changing OvmfPkg/Library/PlatformBootManagerLib/BdsPlatform.c so that TryRunningQemuKernel() runs after PlatformBdsConnectSequence(), essentially reversing the bad commit, fixes the problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16676</commentid>
    <comment_count>1</comment_count>
      <attachid>771</attachid>
    <who name="Christoph Willing">chris.willing</who>
    <bug_when>2021-07-21 20:34:56 +0000</bug_when>
    <thetext>Created attachment 771
Patch to move placement of TryRunningQemuKernel()

This patch moves TryRunningQemuKernel() to after PlatformBdsConnectSequence(), essentially reversing commit a34a886962561f6d8550b2a1bb193798ca456431 which has been found to be the cause of the issue.

It has been tested with a number of previous edk2-stable releases as well as master branch, and was found to correct the faulty behaviour in all cases.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16682</commentid>
    <comment_count>2</comment_count>
    <who name="Christoph Willing">chris.willing</who>
    <bug_when>2021-07-22 05:34:27 +0000</bug_when>
    <thetext>Additional info:

I just tested on Clear Linux which has Qemu-5.2.0 with exactly same result. The test VM with OVMF .fd files from a build of unpatched edk2 fails to load when run with -kernel, -initrd &amp; -append options. When run with OVMC .fd files from a patched version of edk2, the same test VM runs fine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16694</commentid>
    <comment_count>3</comment_count>
    <who name="Christoph Willing">chris.willing</who>
    <bug_when>2021-07-25 22:34:28 +0000</bug_when>
    <thetext>Same behaviour now also found with Ubuntu 20.04 host running QEMU emulator version 4.2.1 (Debian 1:4.2-3ubuntu6.17). Standard (unpatched) OVMF files result in boot failure when -kernel option is used to run qemu. Using OVMF files after edk2 is patched results in successful running of qemu.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16695</commentid>
    <comment_count>4</comment_count>
      <attachid>780</attachid>
    <who name="Christoph Willing">chris.willing</who>
    <bug_when>2021-07-25 22:40:43 +0000</bug_when>
    <thetext>Created attachment 780
Move placement of TryRunningQemuKernel()

Minor reformatting of previous patch (771).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16709</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-27 21:45:16 +0000</bug_when>
    <thetext>

please use git send-email to send this patch to devel@edk2.groups.io</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16858</commentid>
    <comment_count>6</comment_count>
      <attachid>790</attachid>
    <who name="Christoph Willing">chris.willing</who>
    <bug_when>2021-08-10 07:37:18 +0000</bug_when>
    <thetext>Created attachment 790
Boot log (bad case)

To aid in debugging, I&apos;m attaching the boot log of a &quot;bad&quot; boot i.e. can&apos;t load filesystem

I will also attach boot log of a &quot;good&quot; boot i.e. patched code leads to complete boot.

In order for diff between then to be less cluttered, I&apos;ve replaced boot timestamps with &quot;xxxx&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16859</commentid>
    <comment_count>7</comment_count>
      <attachid>791</attachid>
    <who name="Christoph Willing">chris.willing</who>
    <bug_when>2021-08-10 07:38:50 +0000</bug_when>
    <thetext>Created attachment 791
Boot log (good case)

Here is the boot log of the &quot;good&quot; case</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16860</commentid>
    <comment_count>8</comment_count>
      <attachid>792</attachid>
    <who name="Christoph Willing">chris.willing</who>
    <bug_when>2021-08-10 07:40:41 +0000</bug_when>
    <thetext>Created attachment 792
diff between logs of bad &amp; good boots

For good measure, here is a diff between op2.bad &amp; op2.good</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16874</commentid>
    <comment_count>9</comment_count>
    <who name="Christoph Willing">chris.willing</who>
    <bug_when>2021-08-11 06:09:04 +0000</bug_when>
    <thetext>Problem fixed; was due to insufficient modules in the booted initrd.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>771</attachid>
            <date>2021-07-21 20:34:56 +0000</date>
            <delta_ts>2021-07-25 22:40:43 +0000</delta_ts>
            <desc>Patch to move placement of TryRunningQemuKernel()</desc>
            <filename>move_TryRunningQemuKernel.patch</filename>
            <type>text/plain</type>
            <size>1952</size>
            <attacher name="Christoph Willing">chris.willing</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>780</attachid>
            <date>2021-07-25 22:40:43 +0000</date>
            <delta_ts>2021-07-25 22:40:43 +0000</delta_ts>
            <desc>Move placement of TryRunningQemuKernel()</desc>
            <filename>move_TryRunningQemuKernel.patch</filename>
            <type>text/plain</type>
            <size>2106</size>
            <attacher name="Christoph Willing">chris.willing</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>790</attachid>
            <date>2021-08-10 07:37:18 +0000</date>
            <delta_ts>2021-08-10 07:37:18 +0000</delta_ts>
            <desc>Boot log (bad case)</desc>
            <filename>op2.bad</filename>
            <type>text/plain</type>
            <size>25605</size>
            <attacher name="Christoph Willing">chris.willing</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>791</attachid>
            <date>2021-08-10 07:38:50 +0000</date>
            <delta_ts>2021-08-10 07:38:50 +0000</delta_ts>
            <desc>Boot log (good case)</desc>
            <filename>op2.good</filename>
            <type>text/plain</type>
            <size>32380</size>
            <attacher name="Christoph Willing">chris.willing</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>792</attachid>
            <date>2021-08-10 07:40:41 +0000</date>
            <delta_ts>2021-08-10 07:40:41 +0000</delta_ts>
            <desc>diff between logs of bad &amp; good boots</desc>
            <filename>diff-op2.bad-op2.good</filename>
            <type>application/octet-stream</type>
            <size>11678</size>
            <attacher name="Christoph Willing">chris.willing</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3886</bug_id>
          
          <creation_ts>2022-03-25 06:40:29 +0000</creation_ts>
          <short_desc>bRefClkFreq UFS card attribute need to be read and written after fDeviceInit.</short_desc>
          <delta_ts>2022-03-28 21:44:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</reporter>
          <assigned_to name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>Purna.Chandra.Rao.Bandaru</cc>
          <deadline>2022-03-31</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18717</commentid>
    <comment_count>0</comment_count>
    <who name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</who>
    <bug_when>2022-03-25 06:40:29 +0000</bug_when>
    <thetext>bRefClkFreq UFS card attribute need to be read and written after successful fDeviceInit and NOP response so that link will be stable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18719</commentid>
    <comment_count>1</comment_count>
    <who name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</who>
    <bug_when>2022-03-25 08:24:27 +0000</bug_when>
    <thetext>sent first version of the patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18729</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-03-28 21:43:27 +0000</bug_when>
    <thetext>Patch sent at: https://edk2.groups.io/g/devel/message/88028</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18730</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-03-28 21:44:04 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/2701
Commit - https://github.com/tianocore/edk2/commit/7456990e8eebe3b935447253bb6d1d3129839122</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3633</bug_id>
          
          <creation_ts>2021-09-16 04:28:30 +0000</creation_ts>
          <short_desc>MdeModulePackage/PeiDxeDebugLibReportStatusCode：Add Standalone MM support</short_desc>
          <delta_ts>2022-01-17 00:29:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="xiaolu.jiang">xiaolu.jiang</reporter>
          <assigned_to name="xiaolu.jiang">xiaolu.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>xiaolu.jiang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17286</commentid>
    <comment_count>0</comment_count>
    <who name="xiaolu.jiang">xiaolu.jiang</who>
    <bug_when>2021-09-16 04:28:30 +0000</bug_when>
    <thetext>Need add support for Standalone MM driver。</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17336</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-21 21:49:27 +0000</bug_when>
    <thetext>Xiaolu: will you provide the patch for this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17345</commentid>
    <comment_count>2</comment_count>
    <who name="xiaolu.jiang">xiaolu.jiang</who>
    <bug_when>2021-09-21 22:22:51 +0000</bug_when>
    <thetext>I have send the pull request for this.
https://github.com/tianocore/edk2/pull/1989</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17388</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-28 01:18:58 +0000</bug_when>
    <thetext>Please send the patch to edk2 mail list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18167</commentid>
    <comment_count>4</comment_count>
    <who name="xiaolu.jiang">xiaolu.jiang</who>
    <bug_when>2022-01-17 00:29:02 +0000</bug_when>
    <thetext>Close the bug since we don&apos;t need.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3028</bug_id>
          
          <creation_ts>2020-10-27 04:12:27 +0000</creation_ts>
          <short_desc>DXE Core produced FirmwareVolume2Protocol-&gt;GetNextFile() doesn&apos;t not support type of standalone MM driver</short_desc>
          <delta_ts>2022-02-13 20:46:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="sfu5">siyuan.fu</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14100</commentid>
    <comment_count>0</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2020-10-27 04:12:27 +0000</bug_when>
    <thetext>The FirmwareVolume2Protocol-&gt;GetNextFile() produced by DXE Core can be used to search for a file based on the value of *FileType input. However, this service will always return EFI_NOT_FOUND if the input FileType is set to EFI_FV_FILETYPE_MM_STANDALONE or EFI_FV_FILETYPE_MM_CORE_STANDALONE. Which means user can&apos;t use this service to search any standalone MM image in that FV.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14110</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:41:25 +0000</bug_when>
    <thetext>Agree this issue. Siyuan: will you contribute the patch to fix it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14117</commentid>
    <comment_count>2</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2020-10-27 21:46:24 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; Agree this issue. Siyuan: will you contribute the patch to fix it?

Yes I will prepare patch for this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18343</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2022-02-13 20:46:09 +0000</bug_when>
    <thetext>Patch committed I2d919a711604ef64ec547096de2044ac1788a579</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3528</bug_id>
          
          <creation_ts>2021-08-05 00:14:07 +0000</creation_ts>
          <short_desc>Add SMM NV variable support in universal UEFI payload</short_desc>
          <delta_ts>2021-10-25 13:44:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dong_guo@126.com">guo.dong</reporter>
          <assigned_to name="dong_guo@126.com">guo.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>kingsumos</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16784</commentid>
    <comment_count>0</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2021-08-05 00:14:07 +0000</bug_when>
    <thetext>Currently UEFI payload built from UefiPayloadPkg uses emulated variable driver. So it could not support secureboot and measured boot since both need NV variable support.

Currently EDKII already has SMM modules and variable modules. And modern Intel platform supports SPI flash hardware sequence to operate flash. So it is possible to have a common SPI module for Intel platforms.

The proposal is to enhance UEFI payload to support SMM variable with a common SPI library for Intel platforms. To avoid impact existing usage, all the new modules will be included under SMM_ENABLE and VARIABLE_SUPPORT and by default SMM variable will not be enabled.

With this update, user could build a UEFI payload with SMM variable support to boot with Slim Bootloader on different Intel platforms (e.g., APL,CFL, CML, EHL, TGL).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17056</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 22:14:58 +0000</bug_when>
    <thetext>guo, will you take it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17378</commentid>
    <comment_count>2</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2021-09-25 01:21:31 +0000</bug_when>
    <thetext>yes. I will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17391</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-28 01:23:13 +0000</bug_when>
    <thetext>Guo takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17605</commentid>
    <comment_count>4</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2021-10-25 13:44:27 +0000</bug_when>
    <thetext>The patch was merged (commit: b80c17b62d989ec00e5).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3421</bug_id>
          
          <creation_ts>2021-05-28 18:19:49 +0000</creation_ts>
          <short_desc>BdsDxe produces DEPRECATED INTERFACE messages.</short_desc>
          <delta_ts>2022-01-19 01:30:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>kun.qin</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16211</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-05-28 18:19:49 +0000</bug_when>
    <thetext>Need to convert from VariableLock to VariablePolicy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16313</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-08 21:51:56 +0000</bug_when>
    <thetext>Zhichao, can you fix this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16324</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-09 19:31:53 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; Zhichao, can you fix this issue?

Liming, this change is already submitted here: https://edk2.groups.io/g/devel/message/76139</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18184</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-19 01:30:02 +0000</bug_when>
    <thetext>Merge at d9a7612f8d1da197883bd1cb9f91f229522d39b1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3174</bug_id>
          
          <creation_ts>2021-01-17 22:49:32 +0000</creation_ts>
          <short_desc>EDKII Platform level Redfish packet encode/decode library</short_desc>
          <delta_ts>2021-02-24 06:52:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>RedfishPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14829</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-17 22:49:32 +0000</bug_when>
    <thetext>The platform library which provides the algorithm to encode or decode Redfish packet.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14847</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-19 21:41:53 +0000</bug_when>
    <thetext>Abner: can you provide the detail information for it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14860</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-20 01:02:31 +0000</bug_when>
    <thetext>Provide the platform level library instance to encode or decode Redfish HTTP payload which is encoded with the below algorithms defined in HTTP spec.
  - HTTP_CONTENT_ENCODING_IDENTITY &quot;identity&quot;
  - HTTP_CONTENT_ENCODING_GZIP     &quot;gzip&quot;
  - HTTP_CONTENT_ENCODING_COMPRESS &quot;compress&quot;
  - HTTP_CONTENT_ENCODING_DEFLATE  &quot;deflate&quot;
  - HTTP_CONTENT_ENCODING_BROTLI   &quot;br&quot;
or platform specifc content coding algorothm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15129</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-02-24 06:52:15 +0000</bug_when>
    <thetext>Commited @ 35f87da8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3315</bug_id>
          
          <creation_ts>2021-04-12 09:11:25 +0000</creation_ts>
          <short_desc>DxeCore: Unloading image pre-CpuDxe may dereference NULL</short_desc>
          <delta_ts>2021-06-23 08:11:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Marvin Häuser">mhaeuser</reporter>
          <assigned_to name="Marvin Häuser">mhaeuser</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15593</commentid>
    <comment_count>0</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2021-04-12 09:11:25 +0000</bug_when>
    <thetext>CoreUnloadAndCloseImage() unconditionally calls UnprotectUefiImage()[1], which unconditionally calls SetUefiImageMemoryAttributes()[2], which has a precondition that CpuDxe has loaded[3]. When an image is loaded and unloaded before CpuDxe is ready (e.g. returns an error code from the entry point), this may cause a NULL dereference.

[1] https://github.com/tianocore/edk2/blob/2072c22a0d63c780b0cc6377f6d4ffb116ad6144/MdeModulePkg/Core/Dxe/Image/Image.c#L936

[2] https://github.com/tianocore/edk2/blob/2072c22a0d63c780b0cc6377f6d4ffb116ad6144/MdeModulePkg/Core/Dxe/Misc/MemoryProtection.c#L613

[3] https://github.com/tianocore/edk2/blob/2072c22a0d63c780b0cc6377f6d4ffb116ad6144/MdeModulePkg/Core/Dxe/Misc/MemoryProtection.c#L225</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15655</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-13 21:57:53 +0000</bug_when>
    <thetext>Marvin, you can continue to provide the proposal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16356</commentid>
    <comment_count>2</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2021-06-12 09:30:10 +0000</bug_when>
    <thetext>Sorry, I must have accidentally run into the issue on an old version of EDK II or something, it is not reproducible on the latest master, and my explanation was actually flawed because image protection aborts early pre-CpuDxe [1].

I&apos;m very sorry for the confusion.

[1] https://github.com/tianocore/edk2/blob/2072c22a0d63c780b0cc6377f6d4ffb116ad6144/MdeModulePkg/Core/Dxe/Misc/MemoryProtection.c#L405-L407</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16436</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-23 08:11:07 +0000</bug_when>
    <thetext>Closing as INVALID per comment 2; please revert if I&apos;m mistaken. Thank you.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3706</bug_id>
          
          <creation_ts>2021-10-26 09:53:13 +0000</creation_ts>
          <short_desc>Code First - MADT GICC new flags</short_desc>
          <delta_ts>2021-11-22 09:09:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>Lorenzo.Pieralisi</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17609</commentid>
    <comment_count>0</comment_count>
      <attachid>850</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-26 09:53:13 +0000</bug_when>
    <thetext>Created attachment 850
CodeFirst_MADT_GICC_flags_v1

This is a proposal to add new “Online capable” and “Not present” flags in the GICC MADT flags and clarify the usage relevant to the existing “Enabled” flag.

See attachment for details</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17610</commentid>
    <comment_count>1</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-26 09:55:01 +0000</bug_when>
    <thetext>Corresponding ASWG Mantis ticket: https://mantis.uefi.org/mantis/view.php?id=2285v</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17647</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-02 21:45:57 +0000</bug_when>
    <thetext>Samer is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17662</commentid>
    <comment_count>3</comment_count>
      <attachid>858</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-11-03 09:54:33 +0000</bug_when>
    <thetext>Created attachment 858
CodeFirst_MADT_GICC_flags_v2

Updated proposal to v2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17673</commentid>
    <comment_count>4</comment_count>
    <who name="Lorenzo Pieralisi">Lorenzo.Pieralisi</who>
    <bug_when>2021-11-03 11:11:16 +0000</bug_when>
    <thetext>(In reply to Samer El-Haj-Mahmoud from comment #1)
&gt; Corresponding ASWG Mantis ticket:
&gt; https://mantis.uefi.org/mantis/view.php?id=2285v

There is a stray v at the end of the link:

Link:
https://mantis.uefi.org/mantis/view.php?id=2285</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17683</commentid>
    <comment_count>5</comment_count>
      <attachid>866</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-11-03 12:55:51 +0000</bug_when>
    <thetext>Created attachment 866
CodeFirst_MADT_GICC_flags_v3

Minor language edits from v2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17780</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-11-17 13:31:27 +0000</bug_when>
    <thetext>Discussed offline with multiple stakeholders, and have general agreement on v2 of the proposal. No further pending discussions. Ready for ASWG review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17793</commentid>
    <comment_count>7</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-11-22 09:09:28 +0000</bug_when>
    <thetext>ver3 of this proposal (https://bugzilla.tianocore.org/attachment.cgi?id=866) Approved in ASWG on 11/18 as new content f or ACPI.next. Closing this BZ issue.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>850</attachid>
            <date>2021-10-26 09:53:13 +0000</date>
            <delta_ts>2021-10-26 09:53:13 +0000</delta_ts>
            <desc>CodeFirst_MADT_GICC_flags_v1</desc>
            <filename>CodeFirst_MADT_GICC_flags.pdf</filename>
            <type>application/pdf</type>
            <size>132451</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>858</attachid>
            <date>2021-11-03 09:54:33 +0000</date>
            <delta_ts>2021-11-03 09:54:33 +0000</delta_ts>
            <desc>CodeFirst_MADT_GICC_flags_v2</desc>
            <filename>CodeFirst_MADT_GICC_flags_v2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>25526</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>866</attachid>
            <date>2021-11-03 12:55:51 +0000</date>
            <delta_ts>2021-11-03 12:55:51 +0000</delta_ts>
            <desc>CodeFirst_MADT_GICC_flags_v3</desc>
            <filename>CodeFirst_MADT_GICC_flags_v3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>25497</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3106</bug_id>
          
          <creation_ts>2020-12-06 21:55:42 +0000</creation_ts>
          <short_desc>Issue: EFI partition contents/files (FS0:\) not visible to EFI shell (OVMF + QEMU)</short_desc>
          <delta_ts>2021-05-23 09:05:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Matthew">matthew.giassa</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>matthew.giassa</cc>
    
    <cc>rjones</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14483</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew">matthew.giassa</who>
    <bug_when>2020-12-06 21:55:42 +0000</bug_when>
    <thetext>Good day,

I&apos;m trying to get to the heart of an issue involving OVMF and QEMU, and this seems to be the best place to start.

In short, I have a disk image I&apos;ve created (i.e. created a qcow2 image, mounted it with qemu-nbd, partitioned it, formatted said partitions, and then deployed a rootfs via debootstrap). I&apos;ve followed a guide on building OVMF and using it plus QEMU to launch a UEFI-enabled-VM via QEMU.

&gt; # Create the output image we&apos;ll use.
&gt; qemu-img create -f qcow2 $(@) 10G
&gt; 
&gt; # Mount our image to a network block device.
&gt; sudo qemu-nbd -c $(QCOW2_NET_DEV) $(@)
&gt; 
&gt; # Partition the virtual disk:
&gt; # 1. Align for best performance (-a optimal).
&gt; # 2. Create a GPT partition table.
&gt; # 3. Create a partition for legacy BIOS boot, UEFI boot, swap, and the
&gt; # root file system.
&gt; # 4. Label the partitions in a helpful manner.
&gt; # 5. Configure the BIOS grub partition appropriately.
&gt; # 6. Configure the UEFI partition to have the EFI system partition flag
&gt; #    set (needed).
&gt; # 7. Set the EFI partition to be bootable.
&gt; apt install -yq udev
&gt; parted -s -a optimal -- $(QCOW2_NET_DEV) \
&gt;   mklabel gpt \
&gt;   mkpart primary 1MiB 3MiB \
&gt;   mkpart primary fat32 3MiB 280MiB \
&gt;   mkpart primary linux-swap 300MiB 1GiB \
&gt;   mkpart primary ext4 1GiB -0 \
&gt;   name 1 grub \
&gt;   name 2 uefi \
&gt;   name 3 swap \
&gt;   name 4 root \
&gt;   set 1 bios_grub on \
&gt;   set 2 esp on \
&gt;   set 2 boot on
Good day,

I&apos;m trying to get to the heart of an issue involving OVMF and QEMU, and this seems to be the best place to start.

In short, I have a disk image I&apos;ve created (i.e. created a qcow2 image, mounted it with qemu-nbd, partitioned it, formatted said partitions, and then deployed a rootfs via debootstrap). I&apos;ve followed a guide on building OVMF and using it plus QEMU to launch a UEFI-enabled-VM via QEMU.

&gt; NET_DEV=&quot;/dev/nbd0&quot;
&gt; NET_FILE=&quot;os.qcow2&quot;
&gt; # Create the output image we&apos;ll use.
&gt; qemu-img create -f qcow2 &quot;${NET_FILE}&quot; 10G
&gt; 
&gt; # Mount our image to a network block device.
&gt; sudo qemu-nbd -c &quot;${NET_DEV}&quot; &quot;${NET_FILE}&quot;
&gt; 
&gt; # Partition the virtual disk:
&gt; # 1. Align for best performance (-a optimal).
&gt; # 2. Create a GPT partition table.
&gt; # 3. Create a partition for legacy BIOS boot, UEFI boot, swap, and the
&gt; # root file system.
&gt; # 4. Label the partitions in a helpful manner.
&gt; # 5. Configure the BIOS grub partition appropriately.
&gt; # 6. Configure the UEFI partition to have the EFI system partition flag
&gt; #    set (needed).
&gt; # 7. Set the EFI partition to be bootable.
&gt; apt install -yq udev
&gt; parted -s -a optimal -- &quot;${NET_DEV}&quot; \
&gt;   mklabel gpt \
&gt;   mkpart primary 1MiB 3MiB \
&gt;   mkpart primary fat32 3MiB 280MiB \
&gt;   mkpart primary linux-swap 300MiB 1GiB \
&gt;   mkpart primary ext4 1GiB -0 \
&gt;   name 1 grub \
&gt;   name 2 uefi \
&gt;   name 3 swap \
&gt;   name 4 root \
&gt;   set 1 bios_grub on \
&gt;   set 2 esp on \
&gt;   set 2 boot on
&gt; 
&gt; # Install base OS via debootstrap, configure grub-efi, etc.
&gt; 
&gt; # Cleanup.
&gt; sudo qemu-nbd -d &quot;${NET_DEV}&quot;

The important point (without going into excessive detail) is that the second partition on the &quot;disk&quot; (i.e. EFI partition) has various grub-related files present on it. I can confirm by mounting the partition (i.e. via qemu-nbd and mount) that these files are indeed present in the partition.

Now, when I attempt to boot the system (CLI command below), the system eventually winds up at the EFI shell.

&gt; OVMF_CODE=&quot;ovmf_code.fd&quot;
&gt; OVMF_VARS=&quot;ovmf_vars.fd&quot;
&gt; NET_DEV=&quot;os.qcow2&quot;
&gt; qemu-system-x86_64 \
&gt;   -m 4G \
&gt;   -smp 4 \
&gt;   -cpu host  \
&gt;   -nographic \
&gt;   -serial mon:stdio \
&gt;   -net user,hostfwd=tcp::8023-:8023 \
&gt;   -net nic \
&gt;   -drive if=pflash,format=raw,readonly,file=${OVMF_CODE} \
&gt;   -drive if=pflash,format=raw,file=${OVMF_VARS} \
&gt;   -drive if=virtio,file=${NET_FILE} \
&gt;   -enable-kvm

e.g. I attempt to list the contents of the EFI partition:

&gt; Shell&gt; ls fs0:\
&gt; Directory of: fs0:\
&gt;           0 File(s)           0 bytes
&gt;           0 Dir(s)

After searching around for similar guides/examples on getting OVMF + QEMU going for &quot;UEFI enabled QEMU&quot;, I ended up changing the QEMU args as follows:

&gt; OVMF_CODE=&quot;ovmf_code.fd&quot;
&gt; OVMF_VARS=&quot;ovmf_vars.fd&quot;
&gt; NET_DEV=&quot;os.qcow2&quot;
&gt; qemu-system-x86_64 \
&gt;   -m 4G \
&gt;   -smp 4 \
&gt;   -cpu host  \
&gt;   -nographic \
&gt;   -serial mon:stdio \
&gt;   -net user,hostfwd=tcp::8023-:8023 \
&gt;   -net nic \
&gt;   -machine type=q35,accel=kvm \
&gt;   -global driver=cfi.pflash01,property=secure,value=on \
&gt;   -drive if=pflash,format=raw,unit=0,readonly,file=$(OVMF_CODE) \
&gt;   -drive if=pflash,format=raw,unit=1,file=$(OVMF_VARS) \
&gt;   -drive if=virtio,file=$(KVM_IMG) \
&gt;   -enable-kvm

This time, I at least see something (EFI vars) in FS0, but it seems that I cannot get the EFI partition&apos;s contents to be visible to the EFI shell.

&gt; Shell&gt; ls fs0:\
&gt; Directory of: fs0:\
&gt; 12/07/2020  01:48              10,659  NvVars
&gt;           1 File(s)      10,659 bytes
&gt;           0 Dir(s)

To my question: how do I get the EFI partition to be visible so I can boot via GRUB?

Additionally, this is the only semi-related item I could find via Google that relates to this issue (though it doesn&apos;t appear to have a solution): https://jira.automotivelinux.org/browse/SPEC-3144. This work is for a end-to-end docker+qemu development environment for TPM2.0 research, so I need UEFI working. Additionally, I can get a SeaBIOS-based version of this code to boot, so I suspect the issue is centered around how OVMF is being used and/or built in my project. 

Lastly, here&apos;s how I compiled OVMF:

&gt; # Pull the source.
&gt; mkdir -p ovmf
&gt; cd ovmf &amp;&amp; git clone git://github.com/tianocore/edk2.git || true

&gt; # Build the base tools.
&gt; cd ovmf/edk2 &amp;&amp; git submodule update --init || true
&gt; cd ovmf/edk2 &amp;&amp; make -C BaseTools -j4

&gt; # Build the firmware image.
&gt; cp config/ovmf/Conf_target_debugserial_secureboot.txt ovmf/edk2/Conf/target.txt; \
&gt;   cd ovmf/edk2; \
&gt;   source edksetup.sh; \
&gt;   build -DDEBUG_ON_SERIAL_PORT=TRUE -DSECURE_BOOT_ENABLE=FALSE

Config file contents:

&gt; ACTIVE_PLATFORM       = OvmfPkg/OvmfPkgX64.dsc
&gt; TARGET                = DEBUG
&gt; TARGET_ARCH           = X64
&gt; TOOL_CHAIN_CONF       = Conf/tools_def.txt
&gt; TOOL_CHAIN_TAG        = GCC5
&gt; BUILD_RULE_CONF = Conf/build_rule.txt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14484</commentid>
    <comment_count>1</comment_count>
    <who name="Matthew">matthew.giassa</who>
    <bug_when>2020-12-06 21:57:18 +0000</bug_when>
    <thetext>Pardon, first 2 paragraphs are duplicated (was pasting from VIM in case session ended).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14487</commentid>
    <comment_count>2</comment_count>
    <who name="Matthew">matthew.giassa</who>
    <bug_when>2020-12-07 08:09:06 +0000</bug_when>
    <thetext>Mapping table output (seems sane; FS0 is apparently associated with the EFI partition in my image):

&gt; Mapping table
&gt;       FS0: Alias(s):HD1c:;BLK3:
&gt;           PciRoot(0x0)/Pci(0x3,0x0)/HD(2,GPT,26437AC3-CB31-4062-B83B-8AF1B74506E9,0x1800,0x8A800)
&gt;      BLK1: Alias(s):
&gt;           PciRoot(0x0)/Pci(0x3,0x0)
&gt;      BLK2: Alias(s):
&gt;           PciRoot(0x0)/Pci(0x3,0x0)/HD(1,GPT,8B98B333-94CA-45BA-B50A-9669C41E0AD2,0x800,0x1000)
&gt;      BLK4: Alias(s):
&gt;           PciRoot(0x0)/Pci(0x3,0x0)/HD(3,GPT,52EFC5CE-804F-469C-AF23-04829D6E8F9B,0x96000,0x16A000)
&gt;      BLK5: Alias(s):
&gt;           PciRoot(0x0)/Pci(0x3,0x0)/HD(4,GPT,7D99B65A-5C6D-47A8-B459-63B53663AB11,0x200000,0x11FFFDF)
&gt;      BLK0: Alias(s):
&gt;           PciRoot(0x0)/Pci(0x1F,0x2)/Sata(0x2,0xFFFF,0x0)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14491</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-07 22:39:23 +0000</bug_when>
    <thetext>Hi Matthew,

(1) according to &lt;https://www.gnu.org/software/parted/manual/html_node/set.html&gt;, the &quot;esp&quot; flag and the &quot;boot&quot; flag are identical on GPT.

So one of your &quot;set 2 esp on&quot; / &quot;set 2 boot on&quot; commands seems redundant (not necessarily wrong though).

(2) I&apos;ve replayed your parted commands (with the exception of &quot;set 2 esp on&quot;, see above), using a local (not NBD) image, also using raw rather than qcow2.

(3) I&apos;ve formatted partition#2 of the image with the &quot;guestfish&quot; utility (&quot;mkfs fat /dev/sda2&quot;)

(4) I&apos;ve copied a simple text file from the host into that partition, in guestfish:

&gt;&lt;fs&gt; mount /dev/sda2 /
&gt;&lt;fs&gt; copy-in /.../hello.txt /
&gt;&lt;fs&gt; q

After this, in the UEFI shell, the MAP command produces output identical to yours, modulo GUIDs and PCI addresses. However, on FS0:, I can also see and read the text file I copied in.

Re-running parted on the image, it tells me the filesystem created by guestfish is &quot;fat16&quot;.

OK, so that didn&apos;t actually test your use case (you imply FAT32).

(5) Next step: rather than using guestfish, boot a Fedora Live ISO on top of the image file, and run &quot;mkfs.fat -F32&quot; manually on /dev/vda2. Power down the VM.

In this case, parted indeed confirms the partition is &quot;fat32&quot;.

So copy the text file in again, with guestfish...

and the UEFI shell *still* sees the file.

So I can&apos;t reproduce the issue. I think whatever tool formats and/or populates your FAT32 partition -- debootstrap? -- triggers something in the edk2 partition and/or FAT driver. I&apos;m not sure. It could be a genuine bug in edk2, but I can&apos;t tell. Doesn&apos;t seem OVMF-specific though.

Can you retry the same procedure (continue using NBD, for example), but replace debootstrap with something else? Try another guest OS perhaps. I&apos;ve got no better idea for narrowign it down, sorry.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14492</commentid>
    <comment_count>4</comment_count>
    <who name="Matthew">matthew.giassa</who>
    <bug_when>2020-12-07 22:55:28 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Hi Matthew,
&gt; 
&gt; (1) according to
&gt; &lt;https://www.gnu.org/software/parted/manual/html_node/set.html&gt;, the &quot;esp&quot;
&gt; flag and the &quot;boot&quot; flag are identical on GPT.
&gt; 
&gt; So one of your &quot;set 2 esp on&quot; / &quot;set 2 boot on&quot; commands seems redundant
&gt; (not necessarily wrong though).
&gt; 
&gt; (2) I&apos;ve replayed your parted commands (with the exception of &quot;set 2 esp
&gt; on&quot;, see above), using a local (not NBD) image, also using raw rather than
&gt; qcow2.
&gt; 
&gt; (3) I&apos;ve formatted partition#2 of the image with the &quot;guestfish&quot; utility
&gt; (&quot;mkfs fat /dev/sda2&quot;)
&gt; 
&gt; (4) I&apos;ve copied a simple text file from the host into that partition, in
&gt; guestfish:
&gt; 
&gt; &gt;&lt;fs&gt; mount /dev/sda2 /
&gt; &gt;&lt;fs&gt; copy-in /.../hello.txt /
&gt; &gt;&lt;fs&gt; q
&gt; 
&gt; After this, in the UEFI shell, the MAP command produces output identical to
&gt; yours, modulo GUIDs and PCI addresses. However, on FS0:, I can also see and
&gt; read the text file I copied in.
&gt; 
&gt; Re-running parted on the image, it tells me the filesystem created by
&gt; guestfish is &quot;fat16&quot;.
&gt; 
&gt; OK, so that didn&apos;t actually test your use case (you imply FAT32).
&gt; 
&gt; (5) Next step: rather than using guestfish, boot a Fedora Live ISO on top of
&gt; the image file, and run &quot;mkfs.fat -F32&quot; manually on /dev/vda2. Power down
&gt; the VM.
&gt; 
&gt; In this case, parted indeed confirms the partition is &quot;fat32&quot;.
&gt; 
&gt; So copy the text file in again, with guestfish...
&gt; 
&gt; and the UEFI shell *still* sees the file.
&gt; 
&gt; So I can&apos;t reproduce the issue. I think whatever tool formats and/or
&gt; populates your FAT32 partition -- debootstrap? -- triggers something in the
&gt; edk2 partition and/or FAT driver. I&apos;m not sure. It could be a genuine bug in
&gt; edk2, but I can&apos;t tell. Doesn&apos;t seem OVMF-specific though.
&gt; 
&gt; Can you retry the same procedure (continue using NBD, for example), but
&gt; replace debootstrap with something else? Try another guest OS perhaps. I&apos;ve
&gt; got no better idea for narrowign it down, sorry.

Good day Laszlo,

Thank you for the prompt and detailed reply. I&apos;ll retry with your steps and report back on my findings. 

With respect to the tool that &quot;populates&quot; the EFI partition, it&apos;s grub-efi. 

May I please request the (approximate) commands you used to create the RAW disk image and mount it? I&apos;d like to compare it (if possible) to my NBD-based setup.

Thanks again!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14497</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-08 02:06:32 +0000</bug_when>
    <thetext>qemu-img create -f raw test.img 10G

parted -a optimal -- ./test.img
  [... exact same parted commands as yours, except setting the esp flag ...]

guestfish -a test.img
  run
  list-partitions 
  mkfs fat /dev/sda2
  mount /dev/sda2 /
  copy-in /home/.../hello.txt /
  q

[launch QEMU+OVMF, verify &quot;MAP&quot; and &quot;TYPE hello.txt&quot;]

parted -a optimal -- ./test.img
  print
  [... see &quot;fat16&quot; reported&quot; ...]

[... boot Fedora Live ISO ...]
  mkdir ~/mnt

  # in-place reformatting of the fat16 fs:
  mkfs.fat -F32 /dev/vda2

  mount /dev/vda2 ~/mnt
  echo hello &gt; ~/mnt/hello.txt
  poweroff

parted -a optimal -- ./test.img
  print
  [... see &quot;fat32&quot; reported&quot; ...]

[launch QEMU+OVMF, verify &quot;MAP&quot; and &quot;TYPE hello.txt&quot; again]

I never mounted the raw disk image on the host; &quot;guestfish&quot; is a tool that runs an &quot;appliance&quot; (a specialized guest) on top of the disk image, and the host-side command shell and the guest-side libguestfs agent communicate over virtio-serial.

guestfish didn&apos;t allow me to select FAT32 (its &quot;mkfs&quot; command allows for &quot;fat&quot;, but FAT32 cannot be requested specifically, and the partition size caused mkfs.fat in the appliance to pick FAT16). That&apos;s why I booted Fedora myself, and over-formatted the partition with FAT32 manually. I verified the result of that with parted from the host side (once the Fedora guest was shut down), and OVMF still recognized the content.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14498</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-08 02:08:15 +0000</bug_when>
    <thetext>BTW I&apos;m not necessarily suspicious of grub2-efi; I wonder what debootstrap uses for formatting the partition however. You create the partition manually with parted, but (IIUC) the formatting step is done in debootstrap. I don&apos;t see what tool it would use other than mkfs.fat (aka mkdosfs) for formatting /dev/vda2, but who knows...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14504</commentid>
    <comment_count>7</comment_count>
    <who name="Richard Jones">rjones</who>
    <bug_when>2020-12-08 04:49:42 +0000</bug_when>
    <thetext>One possible issue is that you need to synchronize the disk between creating it and trying to open it with qemu.  We had a similar problem with virt-builder:

https://github.com/libguestfs/libguestfs/blob/b2e457767d3b6f9399e58d86a534092e8e0012a8/builder/builder.ml#L774

Simple solution is to make sure you run &quot;sync&quot; before running qemu.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14505</commentid>
    <comment_count>8</comment_count>
    <who name="Matthew">matthew.giassa</who>
    <bug_when>2020-12-08 10:27:18 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #6)
&gt; BTW I&apos;m not necessarily suspicious of grub2-efi; I wonder what debootstrap
&gt; uses for formatting the partition however. You create the partition manually
&gt; with parted, but (IIUC) the formatting step is done in debootstrap. I don&apos;t
&gt; see what tool it would use other than mkfs.fat (aka mkdosfs) for formatting
&gt; /dev/vda2, but who knows...

`debootstrap` isn&apos;t used (to my knowledge) for any formatting operations. It&apos;s just used to download/cache packages, and then extract/deploy them to my &quot;rootfs&quot; partition (i.e. `/dev/nbd0p4` in my example).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14506</commentid>
    <comment_count>9</comment_count>
    <who name="Matthew">matthew.giassa</who>
    <bug_when>2020-12-08 11:26:23 +0000</bug_when>
    <thetext>(In reply to Richard Jones from comment #7)
&gt; One possible issue is that you need to synchronize the disk between creating
&gt; it and trying to open it with qemu.  We had a similar problem with
&gt; virt-builder:
&gt; 
&gt; https://github.com/libguestfs/libguestfs/blob/
&gt; b2e457767d3b6f9399e58d86a534092e8e0012a8/builder/builder.ml#L774
&gt; 
&gt; Simple solution is to make sure you run &quot;sync&quot; before running qemu.

Tried adding `sync` (i.e. CLI command) to various parts of the build process, but it did not resolve the issue. Thanks for the suggestion though.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14629</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-21 08:08:00 +0000</bug_when>
    <thetext>Hi Matthew,

I&apos;m closing this now as &quot;INVALID&quot; (I&apos;d strongly prefer INSUFFICIENT_DATA, but this Bugzilla instance does not offer that type of resolution). Please reopen the ticket if you can collect more information. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14710</commentid>
    <comment_count>11</comment_count>
    <who name="Matthew">matthew.giassa</who>
    <bug_when>2021-01-05 10:09:32 +0000</bug_when>
    <thetext>Good day,

Pardon the delay in getting back to this thread (very busy end-of-year). I&apos;ve been able to successfully replicate the examples provided to me via `guestfish` (thanks again for those, by the way).

So, the net result so far is: when I make a `.qcow2` image via mount + qemu-nbd, the EFI partition is somehow &quot;broken&quot;, but when I make a `.raw` image via the examples provided to me in this ticket, the EFI partition (plus contents like `hello.txt` that I add to it), are 100% working/healthy.

My next experiment will be to see if `qemu-nbd` &quot;works&quot; with a raw image, and if that fails, create some minimal examples for RAW images with both `guestfish` and `qemu-nbd`, diff the binary images, and raise a separate ticket on the QEMU/KVM bug tracker or mailing list.

I&apos;ll then see if I can get this working via `losetup` as well. 

Only downside is that I&apos;ll need to do some Google&apos;ing for `guestfish`, as my builds all run in docker containers (so it&apos;s easier/quicker/more-deterministic for colleagues to replicate my build environment), and `guestfish` doesn&apos;t seem to run &quot;out of the box&quot; in a container. Should have my final updates within a day or two tops. At this point, it seems most likely I&apos;ll end up closing this again as an issue w/ my setup (i.e. `qemu-nbd`) rather than this project.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14711</commentid>
    <comment_count>12</comment_count>
    <who name="Richard Jones">rjones</who>
    <bug_when>2021-01-05 10:27:08 +0000</bug_when>
    <thetext>Also make sure you&apos;re not accidentally interpreting a qcow2 file
as raw.  If using qcow2 you may need to be rigorous about always
setting the format to qcow2 (eg. using -f qcow2 and similar options).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16121</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-23 09:05:41 +0000</bug_when>
    <thetext>Please reopen this ticket if the issue persists.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3863</bug_id>
          
          <creation_ts>2022-03-07 20:51:52 +0000</creation_ts>
          <short_desc>Create PlatformInitLib to wrap common codes in OvmfPkg/PlatformPei</short_desc>
          <delta_ts>2023-02-02 01:28:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="mxu9">min.m.xu</reporter>
          <assigned_to name="mxu9">min.m.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18567</commentid>
    <comment_count>0</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2022-03-07 20:51:52 +0000</bug_when>
    <thetext>There are 3 variants of PlatformPei in OvmfPkg:
 - OvmfPkg/PlatformPei
 - OvmfPkg/Bhyve/PlatformPei
 - OvmfPkg/XenPlatformPei

There are a lot of common code in above PlatformPeis. Further more, with the upstreaming of TDVF (Pei-less boot mode), a library which wraps the common functions is needed. PlatformInitLib is designed to meet this requirement.

PlatformInitLib is designed to run in both PEI and SEC. So global variables and dynamic PCDs are avoided.

As the first stage, OvmfPkg/PlatformPei will be refactored with PlatformInitLib. In the future we will refactor other PlatformPeis with this lib as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18568</commentid>
    <comment_count>1</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2022-03-07 22:37:43 +0000</bug_when>
    <thetext>v1 is sent for review. 
https://edk2.groups.io/g/devel/message/87327</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18570</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-08 21:35:16 +0000</bug_when>
    <thetext>This should be a new feature. Min is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20987</commentid>
    <comment_count>3</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2023-02-02 01:28:55 +0000</bug_when>
    <thetext>This is resovled.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3126</bug_id>
          
          <creation_ts>2020-12-16 21:41:55 +0000</creation_ts>
          <short_desc>Some log in ExitBootService() will be lost if use RSC DebugLib</short_desc>
          <delta_ts>2021-10-27 01:36:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ming.tan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14605</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-12-16 21:41:55 +0000</bug_when>
    <thetext>1. If use PeiDxeDebugLibReportStatusCode as DebugLib, then some logs
after ExitBootService() will be lost.
2. The root cause:
2.1 The original code will register a unregister function
of gEfiEventExitBootServicesGuid, this unregister function will call
EFI_RSC_HANDLER_PROTOCOL-&gt;Unregister and does not support log through
serial port.
2.2 And some other drivers also register call back funtions of
gEfiEventExitBootServicesGuid.
2.3 Then after the unregister function is called, other call back
function can&apos;t out log.
3. The DxeMain will report status code EFI_SW_BS_PC_EXIT_BOOT_SERVICES
after notify all the call back functions of
gEfiEventExitBootServicesGuid.
4. Solution: the StatusCodeHandlerRuntimeDxe.c will not register a
unregister function of gEfiEventExitBootServicesGuid, but unregister it
after receive the status code of EFI_SW_BS_PC_EXIT_BOOT_SERVICES.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14606</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-12-16 21:43:08 +0000</bug_when>
    <thetext>I will submit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17615</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2021-10-27 01:36:44 +0000</bug_when>
    <thetext>The patch was merged with commit ID  d4945b102730a54f58be6bda3369c6844565b7ee:

MdeModulePkg/Universal/StatusCodeHandler: Fix a bug about log lost</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3013</bug_id>
          
          <creation_ts>2020-10-19 02:58:40 +0000</creation_ts>
          <short_desc>Pull out HTTP IO related functions from HttpBootDxe to a helper library</short_desc>
          <delta_ts>2020-12-08 02:46:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Other</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14022</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-10-19 02:58:40 +0000</bug_when>
    <thetext>In order to leverage HTTP IO related functions whcih were implemented in HttpBootDxe for edk2 Redfish REST EX HTTP driver instance, we would like to pull out HTTP IO related functions from HttpBootDxe to a helper library under network package.

HPE will send the patches of HttpIoLib to community for review, however we will need the owner of HttpBootDxe to verify the functionality becuase I don&apos;t have the environment for that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14121</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:55:44 +0000</bug_when>
    <thetext>Abner has sent the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14502</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-08 02:46:46 +0000</bug_when>
    <thetext>Fixed at  71a40415-97e2b622</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3397</bug_id>
          
          <creation_ts>2021-05-17 23:03:30 +0000</creation_ts>
          <short_desc>MmControl.h in MdePkg has inconsistent names between prototype and usages</short_desc>
          <delta_ts>2021-05-31 21:39:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16086</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-05-17 23:03:30 +0000</bug_when>
    <thetext>Refer to this file: https://github.com/tianocore/edk2/blob/master/MdePkg/Include/Ppi/MmControl.h.

PPI structure definition ```struct _EFI_PEI_MM_CONTROL_PPI``` does not exist. Only ```struct _PEI_MM_CONTROL_PPI``` has been defined.

Function pointer ```PEI_MM_ACTIVATE``` used as Trigger in struct _PEI_MM_CONTROL_PPI does not exist. Only ```EFI_PEI_MM_ACTIVATE``` was defined.

A proposed change is pushed here for reference: https://github.com/kuqin12/mu_basecore/commit/5078b83cebc1f22efd8b5e51ea5a482f66f7812d</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16093</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-05-18 17:13:08 +0000</bug_when>
    <thetext>This is introduced from this ticket: https://bugzilla.tianocore.org/show_bug.cgi?id=2023</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16150</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-25 21:51:58 +0000</bug_when>
    <thetext>Kun, is this spec issue or code issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16160</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-05-25 22:31:37 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #2)
&gt; Kun, is this spec issue or code issue?

Liming, this is code issue. The one defined in MdeModulePkg does not have this problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16185</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-26 21:17:57 +0000</bug_when>
    <thetext>Kun, can you provide the patch for this code issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16188</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-05-26 23:31:09 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #4)
&gt; Kun, can you provide the patch for this code issue?

Sure, I can send the patch for this shortly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16193</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-05-27 04:19:16 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #4)
&gt; Kun, can you provide the patch for this code issue?

Liming, patch was sent here: https://edk2.groups.io/g/devel/message/75756. Please let me know if any feedback. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16222</commentid>
    <comment_count>7</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-31 21:39:12 +0000</bug_when>
    <thetext>PR: https://github.com/tianocore/edk2/pull/1678</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3266</bug_id>
          
          <creation_ts>2021-03-15 05:03:08 +0000</creation_ts>
          <short_desc>[OpenSSL] Update OpenSSL version to version 1.1.1j to include CVE fix</short_desc>
          <delta_ts>2021-03-23 01:45:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Roger Feng">roger.feng</reporter>
          <assigned_to name="Wei Liu">weix.c.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15310</commentid>
    <comment_count>0</comment_count>
    <who name="Roger Feng">roger.feng</who>
    <bug_when>2021-03-15 05:03:08 +0000</bug_when>
    <thetext>Issue:
Current OpenSSL version 1.1.1g contains the vulnerabilities of CVE-2021-23841 and CVE-2021-23840. The related vulnerable API EVP_DecryptUpdate are used in drivers. 

Request:
Update OpenSSL to latest version 1.1.1j</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15329</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-16 21:38:53 +0000</bug_when>
    <thetext>Roger will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15345</commentid>
    <comment_count>2</comment_count>
    <who name="Roger Feng">roger.feng</who>
    <bug_when>2021-03-17 05:13:12 +0000</bug_when>
    <thetext>Target to submit the update patches for reivew by ww12</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15357</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-18 10:18:39 +0000</bug_when>
    <thetext>Patch on the list, from Liu Wei

* [edk2-devel] [PATCH] CryptoPkg/OpensslLib: Upgrade OpenSSL to 1.1.1j

msgid: &lt;20210318055117.2059-1-weix.c.liu@intel.com&gt;
https://edk2.groups.io/g/devel/message/73005
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00751.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15403</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2021-03-23 01:45:36 +0000</bug_when>
    <thetext>Reviewed @ https://edk2.groups.io/g/devel/message/73068
Pushed @ 0ecdcb6142037dd1cdd08660a2349960bcf0270a

Note the final patch was updated a little in order to pass ECC check. No logic change but just format adjustment.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3423</bug_id>
          
          <creation_ts>2021-05-31 22:48:42 +0000</creation_ts>
          <short_desc>Enable BaseCryptLib in Smm</short_desc>
          <delta_ts>2021-06-23 22:50:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="xueshengfeng">shengfengx.xue</reporter>
          <assigned_to name="xueshengfeng">shengfengx.xue</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>shengfengx.xue</cc>
    
    <cc>xiaoyux.lu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16225</commentid>
    <comment_count>0</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2021-05-31 22:48:42 +0000</bug_when>
    <thetext>Intel Platform utility Syscfg/sysfwupdt will trigger SMI to enter BIOS interface. then BIOS invoke EncodePassword in SMM mode to check password. it&apos;s need sha384(in CryptSha512.c) in SMM mode.
the origin SmmCryptLib.lib size is 1389KB, after changed, the size is 1391KB.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16310</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-08 21:48:33 +0000</bug_when>
    <thetext>Please work on the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16453</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2021-06-23 22:50:27 +0000</bug_when>
    <thetext>Reviewed @ https://edk2.groups.io/g/devel/message/77028
Pushed @ https://github.com/tianocore/edk2/commit/eba32695ee6979137c86c3d20d0711d49d5c3ba8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3810</bug_id>
          
          <creation_ts>2022-01-20 07:27:02 +0000</creation_ts>
          <short_desc>BaseTools/Conf: Add new macro for customizing dll file reduction.</short_desc>
          <delta_ts>2022-02-06 21:50:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>wei6.xu</reporter>
          <assigned_to>wei6.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18190</commentid>
    <comment_count>0</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2022-01-20 07:27:02 +0000</bug_when>
    <thetext>In build_rule.template, the objcopy flag &apos;--strip-unneeded -R .eh_frame&apos; is hard-coded for dll file reduction.
We need to use a macro to replace this, so that module can make some customization on the flags.
Also, in tools_def.template, set &apos;--strip-unneeded -R .eh_frame&apos; as the default value of the macro, to avoid impacting current build rules.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18200</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-25 09:29:52 +0000</bug_when>
    <thetext>Wei has sent the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18243</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-06 21:50:58 +0000</bug_when>
    <thetext>Merge c09dbc92e9142ad46b3f73ac0eb5cc283cb81baf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3198</bug_id>
          
          <creation_ts>2021-02-02 03:49:15 +0000</creation_ts>
          <short_desc>MemAttrTable and ESRT should using AllocRuntimePoll</short_desc>
          <delta_ts>2021-02-11 06:57:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Wenyi, Xie">xiewenyi0201</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14951</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-02-02 03:49:15 +0000</bug_when>
    <thetext>As MemAttrTable and ESRT belong to ConfigurationTable, and ConfigurationTable should be valid after calling ExitBootServices(). So AllocateRuntimePool should be used instead of AllocatePool when allocating memory for MemAttrTable and ESRT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14953</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-02 06:20:54 +0000</bug_when>
    <thetext>(In reply to Wenyi, Xie from comment #0)
&gt; As MemAttrTable and ESRT belong to ConfigurationTable, and
&gt; ConfigurationTable should be valid after calling ExitBootServices().
&gt; So AllocateRuntimePool should be used instead of AllocatePool when
&gt; allocating memory for MemAttrTable and ESRT.

This is a common misunderstanding. The Configuration table *itself*
needs to be in runtime memory, so that the configuration table entries
can be consulted by the OS kernel at runtime. However, whether a
particular object pointed-to by a particular GUID-ed entry in the
configuration table lives in runtime or boot-time memory, is not
universally specified; it depends on the particular GUID in question.
Therefore the question is what the UEFI spec says for the memory
attributes table.

In UEFI-2.8 Errata B, section 4.6 says

  VendorTable  A pointer to the table associated with VendorGuid. Type
               of the memory that is used to store the table as well as
               whether this pointer is a physical address or a virtual
               address during runtime (whether or not a particular
               address reported in the table gets fixed up when a call
               to SetVirtualAddressMap() is made) is determined by the
               VendorGuid. Unless otherwise specified, memory type of
               the table buffer is defined by the guidelines set forth
               in the Calling Conventions section in Chapter 2. It is
               the responsibility of the specification defining the
               VendorTable to specify additional memory type
               requirements (if any) and whether to convert the
               addresses reported in the table. Any required address
               conversion is a responsibility of the driver that
               publishes corresponding configuration table.

I don&apos;t think there&apos;s reason to assume that the memory attributes table
lives in runtime memory. Corrections welcome of course; this is just my
understanding.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14955</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-02-02 07:28:31 +0000</bug_when>
    <thetext>Agree with Laszlo.

One example, ACPI table is in Configuration Table. But we should use ACPI Reclaim or ACPI Nvs for the ACPI table, instead of runtime.

Please also refer to 2.3.4 Calling Convention:

===================
In general, UEFI Configuration Tables loaded at boot time (e.g., SMBIOS table) can be contained in memory of type EfiRuntimeServicesData (recommended and the system firmware must not request a virtual mapping), EfiBootServicesData, EfiACPIReclaimMemory or EfiACPIMemoryNVS. Tables loaded at runtime must be contained in memory of type EfiRuntimeServicesData (recommended) or EfiACPIMemoryNVS.
===================

EfiBootServiceData is legal here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14957</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-02 09:31:07 +0000</bug_when>
    <thetext>Jiewen,

(In reply to jiewen.yao from comment #2)

&gt; In general, UEFI Configuration Tables loaded at boot time (e.g.,
&gt; SMBIOS table) can be contained in memory of type
&gt; EfiRuntimeServicesData (recommended and the system firmware must not
&gt; request a virtual mapping), EfiBootServicesData, EfiACPIReclaimMemory
&gt; or EfiACPIMemoryNVS. Tables loaded at runtime must be contained in
&gt; memory of type EfiRuntimeServicesData (recommended) or
&gt; EfiACPIMemoryNVS.

by the way, do you know why this passage appears in section &quot;2.3 Calling
Conventions&quot; of the UEFI spec?

The same language seems to be repeated under IA-32, x64, Aarch32,
Aarch64, and RISC-V.

With a small difference, the same text appears in the Itanium subsection
too:

&gt; In general, Configuration Tables loaded at boot time (e.g., SMBIOS
&gt; table) can be contained in memory of type EfiRuntimeServicesData
&gt; (recommended), EfiBootServicesData, EfiACPIReclaimMemory or
&gt; EfiACPIMemoryNVS. Tables loaded at runtime must be contained in memory
&gt; of type EfiRuntimeServicesData (recommended) or EfiACPIMemoryNVS.

I don&apos;t think the differences are intentional; I think the Itanium
section has simply not been updated in a while.

So what&apos;s architecture specific about this?

I think this passage should be moved to a common (arch-independent)
section somewhere (e.g., Section 4.6.)

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14966</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-02 21:48:00 +0000</bug_when>
    <thetext>From the discussion, this is not an issue. @Wenyi, do you agree?

UEFI spec defines the memory type for each guid value of the configuration table.
For example, ESRT requires the boot service data.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15050</commentid>
    <comment_count>5</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-02-10 04:20:08 +0000</bug_when>
    <thetext>Sorry for the late response and thank you all for the detailed explanation.
I agree it&apos;s not an issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15055</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-11 06:57:48 +0000</bug_when>
    <thetext>Closing as INVALID per above discussion. Thanks!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3085</bug_id>
          
          <creation_ts>2020-11-21 10:18:39 +0000</creation_ts>
          <short_desc>MdeModulePkg: Invalid parameter to SetMem in OnigurumaUefiPort</short_desc>
          <delta_ts>2021-11-26 08:55:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Baranee">anbazhagan</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14390</commentid>
    <comment_count>0</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2020-11-21 10:18:39 +0000</bug_when>
    <thetext>Coding error in converting memset call to SetMem - Length and Value is swapped on calling SetMem


https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Universal/RegularExpressionDxe/OnigurumaUefiPort.c#L94


void* memset (void *dest, char ch, unsigned int count)
{
-  return SetMem (dest, ch, count);
+  return SetMem (dest, count, ch);
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14522</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 21:11:49 +0000</bug_when>
    <thetext>Baranee: can you send the patch to edk2 mail list devel@edk2.groups.io?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17840</commentid>
    <comment_count>2</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2021-11-26 08:55:36 +0000</bug_when>
    <thetext>Resolved with https://github.com/tianocore/edk2/commit/1f304300ffe64d47efc2f4d845da3081fd2b86a4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3565</bug_id>
          
          <creation_ts>2021-08-16 10:47:48 +0000</creation_ts>
          <short_desc>Support ACPI 6.4 in GTDT parser and generator</short_desc>
          <delta_ts>2021-10-11 21:03:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chris Jones">christopher.jones</reporter>
          <assigned_to name="Chris Jones">christopher.jones</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16914</commentid>
    <comment_count>0</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-08-16 10:47:48 +0000</bug_when>
    <thetext>The ACPI 6.4 specification renamed the &quot;SBSA Generic Watchdog&quot; structure to the &quot;Arm Generic Watchdog&quot; structure. The Acpiview GTDT parser and DynamicTables GTDT generator should update to using Acpi64.h and as such should rename any definitions according to the latest specification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16916</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:10:10 +0000</bug_when>
    <thetext>Chris is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17210</commentid>
    <comment_count>2</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-09-08 10:16:00 +0000</bug_when>
    <thetext>Patch series posted at: https://edk2.groups.io/g/devel/message/79362</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17484</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-11 21:02:20 +0000</bug_when>
    <thetext>It has been merged @b4da6c29f1d36031e04212f53277ce0dcba309f1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17486</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-11 21:03:36 +0000</bug_when>
    <thetext>The patch has been merged f09dbf20b946cf0327a6d5ebcb7bd46124f3073e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3348</bug_id>
          
          <creation_ts>2021-04-21 06:50:40 +0000</creation_ts>
          <short_desc>Add the ArmPkg to the azurepipeline</short_desc>
          <delta_ts>2021-04-30 06:47:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="Pierre Gondois">pierre.gondois</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15750</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-04-21 06:50:40 +0000</bug_when>
    <thetext>The azurepipeline does not currently have support for the ArmPkg. When submitting a pull-request, no tests are run. Having the ArmPkg part of the CI would be an enhancement.

Cf: https://github.com/tianocore/edk2/blob/master/.azurepipelines/templates/pr-gate-build-job.yml</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15805</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-27 21:46:46 +0000</bug_when>
    <thetext>Pierre is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15836</commentid>
    <comment_count>2</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-04-30 06:46:34 +0000</bug_when>
    <thetext>Fixed by:
https://github.com/tianocore/edk2/commit/2942cb5815f43f36d6719eb82aef6b2a40873257
and
https://github.com/tianocore/edk2/commit/f11252e9fd203d03e2443585762d288338edc928</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15837</commentid>
    <comment_count>3</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-04-30 06:47:48 +0000</bug_when>
    <thetext>Resolved by the commits linked in the thread.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3107</bug_id>
          
          <creation_ts>2020-12-07 02:17:35 +0000</creation_ts>
          <short_desc>GenCfgOpt.py caused Incremental build regression issue.</short_desc>
          <delta_ts>2020-12-09 07:52:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chen Yuwei">yuwei.chen</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14485</commentid>
    <comment_count>0</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-12-07 02:17:35 +0000</bug_when>
    <thetext>For the IntelFsp2Pkg\Tools\GenCfgOpt.py, As the commit ab6244de792ae92b757ec4534511cea5f1f6b3d2 merged in, a regression issue is found in Incremental build. 

The added function NoDscFileChange() checks if the output file should be updated by comparing if the self._DscFile is updated. However, as self._DscFile = DscFile, currenty only the DscFile is checked, the dsc files included in the DscFile is not checked, which caused the regression issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14486</commentid>
    <comment_count>1</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-12-07 02:22:09 +0000</bug_when>
    <thetext>Updating the commit-id: cc942105ede58a300ba46f3df0edfa86b3abd4dd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14515</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 21:05:43 +0000</bug_when>
    <thetext>Yuwei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14535</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-12-09 07:52:33 +0000</bug_when>
    <thetext>commit f95e80d832e923046c92cd6f0b8208cec147138e
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Mon Dec 7 18:13:52 2020 +0800

    IntelFsp2Pkg/GenCfgOpt.py: Incremental build with UPD in sub DSC.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3107

    Current script only compares main DSC and output file datetime
    to determine if re-generation required or not.
    When UPD defined in sub DSC and was modified current script cannot
    detect and will not re-generate output files which caused incremental
    build issue.

    Since UPD can be defined in any sub DSC the script has been updated
    to compare all DSC datetime with output files to determine re-generation
    is needed or not.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Yuwei Chen &lt;yuwei.chen@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;
    Tested-by: Yuwei Chen &lt;yuwei.chen@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3246</bug_id>
          
          <creation_ts>2021-03-07 22:33:50 +0000</creation_ts>
          <short_desc>Add a new library class RegisterFilterLib in edk2 to filter/trace port IO/MMIO/MSR access</short_desc>
          <delta_ts>2021-04-07 22:16:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15230</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-03-07 22:33:50 +0000</bug_when>
    <thetext>1.Purpose:
Skip real port IO/MMIO/MSR access in some emulator env.
Trace port IO/MMIO/MSR access.

2. Plan to do @ Edk2:
Filter and trace in low level APIs in BaseIoLibIntrinsic and BaseLib.
Add a new library class (RegisterFilterLib) for the filter and trace functionality .

3. Plan to filter and trace scope @ Edk2 :
Port IO R/W: IA32 X64 (Only filter/trace for IA32 X64)
MMIO R/W: IA32 X64 EBC ARM AARCH64 RISCV64 (For the Arches supported in BaseIoLibIntrinsic.inf)
MSR R/W: IA32 X64 (Only filter/trace for IA32 X64, if other ARCH has specific use case can add new APIs per needs )

4. RegisterFilterLib Library Class:
  a. Add RegisterFilterLib library class for the filter and trace operation.
  b. Add RegisterFilterLib .h in MdePkg\Include\Library.
  c. 12 APIs will be added to filter and trace port IO, MMIO and MSR access. 
  d. Add a NULL instance RegisterFilterLibNull in MdePkg\Library. (Null instance 
     will not impact binary size.) 
  e. Platform can implement it own RegisterFilterLib instance.

  12 APIs can be divided into 2 categories:
  6 [Before] APIs use to check whether need to execute port IO/MMIO/MSR access 
  or do some traces before access.
  6 [After] APIs use to trace port IO/MMIO/MSR access

  For port IO access:
  FilterBeforeIoRead 
  FilterAfterIoRead
  FilterBeforeIoWrite 
  FilterAfterIoWrite

  For MMIO access:
  FilterBeforeMmIoRead
  FilterAfterMmIoRead
  FilterBeforeMmIoWrite
  FilterAfterMmIoWrite

  For MSR access:
  FilterBeforeMsrRead 
  FilterAfterMsrRead
  FilterBeforeMsrWrite
  FilterAfterMsrWrite

RegisterFilterLib header file and desgin file can be found in:
https://edk2.groups.io/g/devel/files/Designs/2021/0305
And this topic has been reviewed inTiano Design meeting of 2021/0305</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15232</commentid>
    <comment_count>1</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-03-08 00:21:06 +0000</bug_when>
    <thetext>RFC: https://edk2.groups.io/g/devel/message/72530</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15342</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-16 21:58:07 +0000</bug_when>
    <thetext>Dandan is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15552</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-04-07 22:15:18 +0000</bug_when>
    <thetext>edk2 changes are submitted through:
https://github.com/tianocore/edk2/commit/1c11e7a2142b1406ccff5e0af0893c94472871c8
to
https://github.com/tianocore/edk2/commit/62bad17dcae18f55cb3bdc19909543dfdf928a2b

https://github.com/tianocore/edk2/commit/38c8be123aced4cc8ad5c7e0da9121a181b94251
and
https://github.com/tianocore/edk2/commit/dc4d42302c22f012d78f6495ea23ceaa3e23842e


Edk2 platform changes are submitted through:
https://github.com/tianocore/edk2-platforms/commit/ef18f0c711640ff11f2da2073134d8965773acd5
to
https://github.com/tianocore/edk2-platforms/commit/e84d6a891b2e2bdb5596944e824227ea6efa6c95</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15553</commentid>
    <comment_count>4</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-04-07 22:16:22 +0000</bug_when>
    <thetext>All changes in edk2 and edk2-platforms are submitted</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3270</bug_id>
          
          <creation_ts>2021-03-18 21:27:11 +0000</creation_ts>
          <short_desc>uefi-sct: DevicePathFromText test for Uart() is too strict</short_desc>
          <delta_ts>2022-04-19 08:13:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Edhay">edhaya.chandran</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>gaoliming</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15379</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-18 21:27:11 +0000</bug_when>
    <thetext>In function DevicePathFromTextConvertTextToDeviceNodeCoverageTest() a device path node is created for L&quot;Uart(115200,8,D,1.5)&quot;

It is expected that the DevicePathToText protocol returns L&quot;Uart(115200,8,D,1.5)&quot; but as the UEFI spec describes this is not the only way the device path node could be rendered.

Default parity may be rendered either as &quot;D&quot; or as &quot;0&quot;.

For stop bits the UEFI specification is self contradictory:

&quot;The StopBits is a either an integer from 0-255 or else a keyword and should be D (0), 1 (1), 1.5 (2), 2 (3). It is optional. The default value is 0.&quot;

1.5 stop bits may be rendered as &quot;2&quot; or as keyword &quot;1.5&quot;.
2 stop bits may be rendered as &quot;3&quot; or as keyword &quot;2&quot;.

So if you see &quot;2&quot; for StopBits you have no clue if it is 1.5 or 2 stop bits!!!

The node L&quot;Uart(115200,8,D,1.5)&quot; may be rendered as either of:

* L&quot;Uart(115200,8,0,1.5)&quot; - using keyword &quot;1.5&quot; for 1.5 stop bits
* L&quot;Uart(115200,8,0,2)&quot; - using value 2 for 1.5 stop bits (ouch!)
* L&quot;Uart(115200,8,D,1.5)&quot;
* L&quot;Uart(115200,8,D,2)&quot;

Each of these strings would be a valid result of ConvertTextToDeviceNode() according to the UEFI specification.

The test has to accept all of these strings.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15474</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-30 21:47:26 +0000</bug_when>
    <thetext>Heinrich: will you contribute the patch for it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15476</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-31 02:50:39 +0000</bug_when>
    <thetext>Hello Liming,

Before I add a patch. What is you view on the problem that 1.5 stop bits may be rendered as &quot;2&quot; or as keyword &quot;1.5&quot; while 2 stop bits may also be rendered as &quot;2&quot;?

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17141</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-02 10:32:33 +0000</bug_when>
    <thetext>Edhay to discuss with Samer for the clarification in the UEFI spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17726</commentid>
    <comment_count>4</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-11-11 08:55:25 +0000</bug_when>
    <thetext>BZ ticket for the ECR to clarify is raised here by Samer: https://bugzilla.tianocore.org/show_bug.cgi?id=3686</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18836</commentid>
    <comment_count>5</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-04-19 08:13:31 +0000</bug_when>
    <thetext>The ECR is approved and clarified here: https://bugzilla.tianocore.org/show_bug.cgi?id=3686

Closing the ticket.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3635</bug_id>
          
          <creation_ts>2021-09-17 02:12:40 +0000</creation_ts>
          <short_desc>PciTestSupportedAttribute logic should be changed.</short_desc>
          <delta_ts>2021-09-28 02:38:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="xueshengfeng">shengfengx.xue</reporter>
          <assigned_to name="xueshengfeng">shengfengx.xue</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17293</commentid>
    <comment_count>0</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2021-09-17 02:12:40 +0000</bug_when>
    <thetext>In file Edk2\MdeModulePkg\Bus\Pci\PciBusDxe\PciEnumeratorSupport.c 
Function PciTestSupportedAttribute, This function is called when doing the PCI enumerate, it tries to test whether the device can support given attributes by follow steps.
1), read the original register value
2), set to the input register value
3), read back the register value, return this value as output
4), restore the original value This will cause the enabled bits in this register be disabled during this sequence.

Below are the new suggested flow: 
1) , read the original register value.
2), set to input register value OR(|) the original register value.
3), read back the register value, return the value AND(&amp;) the input command value as output.
4), restore the original value

Above sequence will not change the enabled bits in the register, and can the new supported attributes by the device.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17339</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-21 21:52:46 +0000</bug_when>
    <thetext>Shengfeng: will you provide the patch to fix it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17343</commentid>
    <comment_count>2</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2021-09-21 21:58:14 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; Shengfeng: will you provide the patch to fix it?

Yes, I will send the patch to you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17389</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-28 01:19:33 +0000</bug_when>
    <thetext>Shengfeng is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17393</commentid>
    <comment_count>4</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2021-09-28 02:35:55 +0000</bug_when>
    <thetext>checked into EDKII master with SHA-1: 46b4606ba23498d3d0e66b53e498eb3d5d592586

so, wo  can close it now. thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17394</commentid>
    <comment_count>5</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2021-09-28 02:38:01 +0000</bug_when>
    <thetext>this issue has been solved.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3030</bug_id>
          
          <creation_ts>2020-10-29 21:29:27 +0000</creation_ts>
          <short_desc>Inconsistent function in,out parameter defined in function header and function prototype in EFI_REST_JSON_STRUCTURE_REGISTER in RestJsonStructure.h</short_desc>
          <delta_ts>2021-04-15 03:36:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>RedfishPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14152</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-10-29 21:29:27 +0000</bug_when>
    <thetext>In function header,
 @param[out]   DestroyStructure         Destroy REST JSON structure returned

In function prototype,
 IN EFI_REST_JSON_STRUCTURE_DESTORY_STRUCTURE DestroyStructure );

In the function header, it says [out] for DestroyStructure. However, it is defined as IN in the function prototype.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14211</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-03 20:59:23 +0000</bug_when>
    <thetext>Abner will fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15694</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-15 03:36:48 +0000</bug_when>
    <thetext>@7cc8cd7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3912</bug_id>
          
          <creation_ts>2022-04-22 03:43:24 +0000</creation_ts>
          <short_desc>Move SmmCpuRendezvousLib.h to MdePkg and add SmmCpuRendezvousLibNull implement in MdePkg</short_desc>
          <delta_ts>2022-05-31 22:05:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="zhihao">zhihao.li</reporter>
          <assigned_to name="zhihao">zhihao.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18892</commentid>
    <comment_count>0</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-04-22 03:43:24 +0000</bug_when>
    <thetext>UefiCpuPkg define a new Protocol with the new services
SmmWaitForAllProcessor(), which can be used by SMI handler
to optionally wait for other APs to complete SMM rendezvous in
relaxed AP mode.

VariableSmm and VariableStandaloneMM driver in MdeModulePkg need
to use this services but MdeModulePkg can&apos;t depend on UefiCpuPkg.

Thus, the solution is moving SmmCpuRendezvouslib.h from UefiCpuPkg
to MdePkg and creating SmmCpuRendezvousLib NullLib version
implementation in MdePkg as dependency for the pkg that can&apos;t 
depend on UefiCpuPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18999</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 22:05:14 +0000</bug_when>
    <thetext>It has been fixed at 8079d4dc4f8ac23e02b02996e326cac4099b3e49</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3787</bug_id>
          
          <creation_ts>2021-12-20 03:25:49 +0000</creation_ts>
          <short_desc>CPU exception error after sorting CPU APIC map</short_desc>
          <delta_ts>2021-12-27 02:07:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>jackx.lin</reporter>
          <assigned_to>jackx.lin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jackx.lin</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18035</commentid>
    <comment_count>0</comment_count>
    <who name="">jackx.lin</who>
    <bug_when>2021-12-20 03:25:49 +0000</bug_when>
    <thetext>system will issue a CPU exception error sorting CPU APIC map</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18051</commentid>
    <comment_count>1</comment_count>
    <who name="">jackx.lin</who>
    <bug_when>2021-12-27 02:07:17 +0000</bug_when>
    <thetext>System will occur a CPU exception error when sorting CPU APIC map, because of a pointer point to an wrong space</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3177</bug_id>
          
          <creation_ts>2021-01-20 04:45:28 +0000</creation_ts>
          <short_desc>There is no data for Contained Element Count, Contained Element Record Length and Contained Elements with smbiosview -t 3 in shell</short_desc>
          <delta_ts>2021-09-06 03:30:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>mars_cc_lin</reporter>
          <assigned_to>mars_cc_lin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14861</commentid>
    <comment_count>0</comment_count>
    <who name="">mars_cc_lin</who>
    <bug_when>2021-01-20 04:45:28 +0000</bug_when>
    <thetext>Observe the detailed data of SMBIOS Type 3 by smbiosview in Shell as below

Command: smbiosview -t 3

observed the result that Contained Element Count and Contained Element Record Length don&apos;t show.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14869</commentid>
    <comment_count>1</comment_count>
    <who name="">mars_cc_lin</who>
    <bug_when>2021-01-20 22:04:39 +0000</bug_when>
    <thetext>TR Status to confirmed and had send the code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15112</commentid>
    <comment_count>2</comment_count>
      <attachid>653</attachid>
    <who name="">mars_cc_lin</who>
    <bug_when>2021-02-23 21:07:21 +0000</bug_when>
    <thetext>Created attachment 653
patch for the improvement.

enclose the patch file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15148</commentid>
    <comment_count>3</comment_count>
    <who name="">mars_cc_lin</who>
    <bug_when>2021-02-25 20:56:44 +0000</bug_when>
    <thetext>Hi Zhichao,

I&apos;ve attached the patch. please kindly let me know what I can do.

Thanks,
Mars</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15185</commentid>
    <comment_count>4</comment_count>
      <attachid>655</attachid>
    <who name="">mars_cc_lin</who>
    <bug_when>2021-03-03 02:33:40 +0000</bug_when>
    <thetext>Created attachment 655
patch_v5-add the length check

Hi Zhichao,

as advice, attach new patch which adds the length check.

Thanks,
Mars</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17171</commentid>
    <comment_count>5</comment_count>
    <who name="">mars_cc_lin</who>
    <bug_when>2021-09-06 03:30:06 +0000</bug_when>
    <thetext>The fix had been applied. 

f9c53a69edeb94ae8c65276b885c1a7efe4f613a

* ShellPkg/SmbiosView: add more items for smbiosview -t 3

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3177
Add ContainedElementCount, ContainedElementRecordLength and
ContainedElements for smbiosview type 3.

Signed-off-by: Mars CC Lin &lt;mars_cc_lin@phoenix.com&gt;
Cc: Zhichao Gao &lt;zhichao.gao@intel.com&gt;
Cc: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;
Cc: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;
Reviewed-by: Zhichao Gao &lt;zhichao.gao@intel.com&gt;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>653</attachid>
            <date>2021-02-23 21:07:21 +0000</date>
            <delta_ts>2021-02-23 21:07:21 +0000</delta_ts>
            <desc>patch for the improvement.</desc>
            <filename>0001-ShellPkg-add-more-items-for-smbiosview-t-3.patch</filename>
            <type>text/plain</type>
            <size>3384</size>
            <attacher>mars_cc_lin</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>655</attachid>
            <date>2021-03-03 02:33:40 +0000</date>
            <delta_ts>2021-03-03 02:33:40 +0000</delta_ts>
            <desc>patch_v5-add the length check</desc>
            <filename>0001-ShellPkg-add-more-items-for-smbiosview-t-3.patch</filename>
            <type>text/plain</type>
            <size>3280</size>
            <attacher>mars_cc_lin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3668</bug_id>
          
          <creation_ts>2021-09-29 13:46:02 +0000</creation_ts>
          <short_desc>Add Raw algorithm support using Arm FW-TRNG interface</short_desc>
          <delta_ts>2022-11-07 20:04:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Pierre Gondois">pierre.gondois</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>pierre.gondois</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17416</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-09-29 13:46:02 +0000</bug_when>
    <thetext>The Arm True Random Number Generator Firmware, Interface 1.0, specification
defines an interface between an Operating System (OS) executing at EL1 and
Firmware (FW) exposing a conditioned entropy source that is provided by a
TRNG back end.

Therefore, implement RawAlgorithm support in RngDxe for Arm architecture using the Arm FW-TRNG interface.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17466</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-07 21:20:27 +0000</bug_when>
    <thetext>Sami is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19158</commentid>
    <comment_count>2</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2022-06-29 15:21:17 +0000</bug_when>
    <thetext>V3 at:

[PATCH v3 00/22] Add Raw algorithm support using Arm FW-TRNG interface
https://edk2.groups.io/g/devel/message/90845</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19842</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-10-26 09:43:29 +0000</bug_when>
    <thetext>Since this ARM specific interface, I recommend to put to ArmPkg, with name ArmTrngLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19960</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-11-07 20:04:54 +0000</bug_when>
    <thetext>Series merged as #3603</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3063</bug_id>
          
          <creation_ts>2020-11-09 01:41:41 +0000</creation_ts>
          <short_desc>Update VFR spec in edk2-VfrSpecificatio to add REST_STYLE</short_desc>
          <delta_ts>2021-04-15 01:42:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14279</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-11-09 01:41:41 +0000</bug_when>
    <thetext>Add REST_STYLE to question flags to support EDK2 Redfish.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14314</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-10 20:41:17 +0000</bug_when>
    <thetext>Abner has sent the patch for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14468</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-03 01:09:25 +0000</bug_when>
    <thetext>At https://github.com/tianocore-docs/edk2-VfrSpecification/commit/e59aa6e9483e110d5dffda0ecdb4325d66aa179b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15693</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-15 01:42:17 +0000</bug_when>
    <thetext>@b74d3b3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3325</bug_id>
          
          <creation_ts>2021-04-12 10:39:38 +0000</creation_ts>
          <short_desc>AsmReadMsr64() for the GCC toolchain can return uninitialized value</short_desc>
          <delta_ts>2022-03-30 11:22:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Takuto Naito">naitaku</reporter>
          <assigned_to name="Takuto Naito">naitaku</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15604</commentid>
    <comment_count>0</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2021-04-12 10:39:38 +0000</bug_when>
    <thetext>It seems that the following problems have been introduced to AsmReadMsr64/AsmWriteMsr64 for the GCC toolchain when RegisterFilterLib support was added.

1. AsmReadMsr64() in X64/GccInlinePriv.c
AsmReadMsr64 can return uninitialized value if FilterBeforeMsrRead returns False. This causes build error with the CLANG toolchain.

2. AsmWriteMsr64() in X64/GccInlinePriv.c
In the case that FilterBeforeMsrWrite changes Value and returns True, The original Value, not the changed Value, is written to the MSR.
This behavior is different from the one of AsmWriteMsr64() in X64/WriteMsr64.c for the MSFT toolchain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15650</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-13 21:56:08 +0000</bug_when>
    <thetext>The patch has been sent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18733</commentid>
    <comment_count>2</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2022-03-30 11:22:55 +0000</bug_when>
    <thetext>Fix at 037090cb7c0063bcb7788982cab73bf7c5b66924</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3199</bug_id>
          
          <creation_ts>2021-02-02 04:12:36 +0000</creation_ts>
          <short_desc>Call MmStartupThisAp many times in a SMI service, system will hang because of run out of SMM memory.</short_desc>
          <delta_ts>2021-03-17 21:59:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>CrystalLee</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14952</commentid>
    <comment_count>0</comment_count>
    <who name="">CrystalLee</who>
    <bug_when>2021-02-02 04:12:36 +0000</bug_when>
    <thetext>Current the design of token in MM MP protocol won&apos;t re-use in an SMI service, when the used token meets the end of the token list, it will allocate new memory and add new tokens to the list. Token list only reset to the first token in the list upon exiting SMI.
If we call MmStartupThisAp many times in an SMI service, the token may use all SMM memory, the next MmStartupThisAp will hang when it tries to allocate new memory for the new token.
It should be possible to re-use the tokens to avoid this run out of SMM memory issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14968</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-02 21:53:25 +0000</bug_when>
    <thetext>The issue is in UefiCpuPkg\PiSmmCpuDxeSmm. @Ray, please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15229</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-03-07 21:06:54 +0000</bug_when>
    <thetext>Crystal,
There is no way to reuse the tokens within the same SMI because there is no MM MP API that can declare an &quot;End-Of-Life&quot; of a token.

So, today&apos;s implementation is to allocate a token for every DispatchProcedure and BroadcastProcedure. The tokens are recycled after exiting SMI.

The issue you met is because the MmStartupThisAp() (A legacy API) always allocates a new useless token (useless because the token cannot be returned to the caller).

Can you try the following patch to see whether it can fix your specific issue?

 UefiCpuPkg/PiSmmCpuDxeSmm/MpService.c | 28 ++++++++++++++++++++++------
 1 file changed, 22 insertions(+), 6 deletions(-)

diff --git a/UefiCpuPkg/PiSmmCpuDxeSmm/MpService.c b/UefiCpuPkg/PiSmmCpuDxeSmm/MpService.c
index 4bcd217917..c5ab3bb8f6 100644
--- a/UefiCpuPkg/PiSmmCpuDxeSmm/MpService.c
+++ b/UefiCpuPkg/PiSmmCpuDxeSmm/MpService.c
@@ -22,6 +22,7 @@ UINTN                                       mSemaphoreSize;
 SPIN_LOCK                                   *mPFLock = NULL;
 SMM_CPU_SYNC_MODE                           mCpuSmmSyncMode;
 BOOLEAN                                     mMachineCheckSupported = FALSE;
+MM_COMPLETION                               mSmmStartupThisApToken;
 
 /**
   Performs an atomic compare exchange operation to get semaphore.
@@ -1238,9 +1239,26 @@ InternalSmmStartupThisAp (
   mSmmMpSyncData-&gt;CpuData[CpuIndex].Procedure = Procedure;
   mSmmMpSyncData-&gt;CpuData[CpuIndex].Parameter = ProcArguments;
   if (Token != NULL) {
-    ProcToken= GetFreeToken (1);
-    mSmmMpSyncData-&gt;CpuData[CpuIndex].Token = ProcToken;
-    *Token = (MM_COMPLETION)ProcToken-&gt;SpinLock;
+    if (Token != &amp;mSmmStartupThisApToken) {
+      //
+      // When Token points to mSmmStartupThisApToken, this routine is called
+      // from SmmStartupThisAp() in non-blocking mode due to
+      // PcdCpuSmmBlockStartupThisAp == FALSE.
+      // 
+      // In this case, caller wants to startup AP procedure in non-blocking
+      // mode and cannot get the completion status from the Token because there
+      // is no way to return the Token to caller from SmmStartupThisAp().
+      // Caller needs to use its specific way to query the completion status.
+      // 
+      // There is no need to allocate a token for such case so the 2 overheads
+      // can be avoided:
+      // 1. Call AllocateTokenBuffer() when there is no free token.
+      // 2. Get a free token from the token buffer.
+      //
+      ProcToken= GetFreeToken (1);
+      mSmmMpSyncData-&gt;CpuData[CpuIndex].Token = ProcToken;
+      *Token = (MM_COMPLETION)ProcToken-&gt;SpinLock;
+    }
   }
   mSmmMpSyncData-&gt;CpuData[CpuIndex].Status    = CpuStatus;
   if (mSmmMpSyncData-&gt;CpuData[CpuIndex].Status != NULL) {
@@ -1472,8 +1490,6 @@ SmmStartupThisAp (
   IN OUT  VOID                      *ProcArguments OPTIONAL
   )
 {
-  MM_COMPLETION               Token;
-
   gSmmCpuPrivate-&gt;ApWrapperFunc[CpuIndex].Procedure = Procedure;
   gSmmCpuPrivate-&gt;ApWrapperFunc[CpuIndex].ProcedureArgument = ProcArguments;
 
@@ -1484,7 +1500,7 @@ SmmStartupThisAp (
     ProcedureWrapper,
     CpuIndex,
     &amp;gSmmCpuPrivate-&gt;ApWrapperFunc[CpuIndex],
-    FeaturePcdGet (PcdCpuSmmBlockStartupThisAp) ? NULL : &amp;Token,
+    FeaturePcdGet (PcdCpuSmmBlockStartupThisAp) ? NULL : &amp;mSmmStartupThisApToken,
     0,
     NULL
     );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15234</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-08 10:16:03 +0000</bug_when>
    <thetext>patch from Ray on the list:

* [edk2-devel] [PATCH]
  UefiCpuPkg/PiSmmCpu: Don&apos;t allocate Token for SmmStartupThisAp

https://edk2.groups.io/g/devel/message/72521
msgid: &lt;20210308021647.528-1-ray.ni@intel.com&gt;
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00268.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15247</commentid>
    <comment_count>4</comment_count>
    <who name="">CrystalLee</who>
    <bug_when>2021-03-09 04:18:35 +0000</bug_when>
    <thetext>Ray,

Yes, the patch can work for MmStartupThisAp() (A legacy API).

&gt; There is no way to reuse the tokens within the same SMI because there is no
&gt; MM MP API that can declare an &quot;End-Of-Life&quot; of a token.
So there is no fix for SmmMpDispatchProcedure/SmmMpBroadcastProcedure in EFI_MM_MP_PROTOCOL? Those two functions have the same issue when run in non-blocking mode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15278</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-03-11 00:27:17 +0000</bug_when>
    <thetext>Crystal,
There is no bug in SmmMpDispatchProcedure/SmmMpBroadcastProcedure. It&apos;s by design that the tokens should be kept until exiting the current SMI.

The fix to MmStartupThisAp (Legacy API) was merged in 54ba08c6b6.
If you agree with the comments, can you please change the status to &quot;RESOLVED&quot;?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15352</commentid>
    <comment_count>6</comment_count>
    <who name="">CrystalLee</who>
    <bug_when>2021-03-17 21:59:33 +0000</bug_when>
    <thetext>Ray,

Ok, I understand.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3470</bug_id>
          
          <creation_ts>2021-06-30 16:01:51 +0000</creation_ts>
          <short_desc>UEFI Spec - Clarification of DevicePath examples using 0xFF for End of HW DP</short_desc>
          <delta_ts>2021-10-13 21:55:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>ardb</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>francois.ozog</cc>
    
    <cc>gaoliming</cc>
    
    <cc>ilias.apalodimas</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16500</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-06-30 16:01:51 +0000</bug_when>
    <thetext>UEFI 2.9 section 10.3.1 states that type 0x7F is the &quot;End of Hardware Device Path&quot;. This type is further refine with a subtype to identify the &quot;nature&quot; of separator:

• Sub-Type 0xFF – End Entire Device Path, or
• Sub-Type 0x01 – End This Instance of a Device Path and start a new Device Path


But later, in the samples, the actual type used is 0xFF and not 0x7F. For instance, you can look at the top of page 302:


In Linux kernel, there is a reference of EFI_DEV_END_PATH2 (https://elixir.bootlin.com/linux/latest/source/include/linux/efi.h#L887 to refer to this 0xFF tag while the  EFI_DEV_END_PATH correctly refers to the specification type.

U-Boot seem to only use the right one (0x7F) with DEVICE_PATH_TYPE_HARDWARE_DEVICE (https://elixir.bootlin.com/u-boot/latest/source/include/efi_api.h#L477).


It seems that EFI 1.10 specification had previously defined:
Type 0x7F – End of Hardware Device Path
Type 0xFF – End of Hardware Device Path


Is this a typo in the UEFI Spec (probably carried over from the historical EFI 1.10) that ended up using &quot;0xFF&quot; to indicate end of Hardware Device Path?

See attached PDF for illustration</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16501</commentid>
    <comment_count>1</comment_count>
      <attachid>748</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-06-30 16:02:14 +0000</bug_when>
    <thetext>Created attachment 748
Illustration</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16539</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-05 05:08:12 +0000</bug_when>
    <thetext>Samer El-Haj-Mahmoud will give the proposal to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16952</commentid>
    <comment_count>3</comment_count>
      <attachid>799</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-17 17:25:08 +0000</bug_when>
    <thetext>Created attachment 799
Codefirst_End of HW DP examples fix</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16954</commentid>
    <comment_count>4</comment_count>
    <who name="F1F0">francois.ozog</who>
    <bug_when>2021-08-18 03:39:36 +0000</bug_when>
    <thetext>(In reply to Samer El-Haj-Mahmoud from comment #3)
&gt; Created attachment 799 [details]
&gt; Codefirst_End of HW DP examples fix

In re-checking I also found those ones that need fixing:

Table C-1 Legacy Floppy Device Path
Table C-2 IDE Disk Device Path
Table C-3 Secondary Root PCI Bus with PCI to PCI Bridge Device Path</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16955</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-08-18 05:18:53 +0000</bug_when>
    <thetext>Codefirst_End of HW DP examples fix
https://bugzilla.tianocore.org/attachment.cgi?id=799

looks good to me.

But please, have a look at the Type Length Field in your references. You always provide a maintained value of 0x01. But the following tables do not use hexadecimal numbers for the Type Length Field but decimal 1:

* Table 10-37 IPv4 configuration
* Table 10-38 IPv6 configuration

Otherwise
Reviewed-by: Heinrich Schuchardt &lt;heinrich.schuchardt@canonical.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16960</commentid>
    <comment_count>6</comment_count>
      <attachid>800</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-18 07:54:54 +0000</bug_when>
    <thetext>Created attachment 800
Codefirst_End of HW DP examples fix_ver2

updated rev2 addressing feedback from comments 4 and 5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16961</commentid>
    <comment_count>7</comment_count>
    <who name="F1F0">francois.ozog</who>
    <bug_when>2021-08-18 10:05:56 +0000</bug_when>
    <thetext>Ack. good for me</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17083</commentid>
    <comment_count>8</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-25 17:35:32 +0000</bug_when>
    <thetext>UEFI Forum USWG 8/25 meeting: This has been approved, as submitted,, as an Errata for UEFI 2.9

Closing this issue as resolved</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17544</commentid>
    <comment_count>9</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-13 21:55:42 +0000</bug_when>
    <thetext>Linking the USWG approved ECR for completeness: https://mantis.uefi.org/mantis/view.php?id=2251</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>748</attachid>
            <date>2021-06-30 16:02:14 +0000</date>
            <delta_ts>2021-06-30 16:02:14 +0000</delta_ts>
            <desc>Illustration</desc>
            <filename>Separator bug-2.pdf</filename>
            <type>application/pdf</type>
            <size>434330</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>799</attachid>
            <date>2021-08-17 17:25:08 +0000</date>
            <delta_ts>2021-08-17 17:25:08 +0000</delta_ts>
            <desc>Codefirst_End of HW DP examples fix</desc>
            <filename>Codefirst_End of HW DP examples fix.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>21138</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>800</attachid>
            <date>2021-08-18 07:54:54 +0000</date>
            <delta_ts>2021-08-18 07:54:54 +0000</delta_ts>
            <desc>Codefirst_End of HW DP examples fix_ver2</desc>
            <filename>Codefirst_End of HW DP examples fix_ver2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>21711</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3349</bug_id>
          
          <creation_ts>2021-04-21 06:51:30 +0000</creation_ts>
          <short_desc>Add the ArmPlatformPkg to the azurepipeline</short_desc>
          <delta_ts>2021-04-30 06:48:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="Pierre Gondois">pierre.gondois</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15751</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-04-21 06:51:30 +0000</bug_when>
    <thetext>The azurepipeline does not currently have support for the ArmPlatformPkg. When submitting a pull-request, no tests are run. Having the ArmPlatformPkg part of the CI would be an enhancement.

Cf: https://github.com/tianocore/edk2/blob/master/.azurepipelines/templates/pr-gate-build-job.yml</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15804</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-27 21:46:23 +0000</bug_when>
    <thetext>Pierre is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15838</commentid>
    <comment_count>2</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-04-30 06:48:36 +0000</bug_when>
    <thetext>Resolved by:
https://github.com/tianocore/edk2/commit/a4cf19597f179a6af7dc56cf0c20e2f2f834db77
and
https://github.com/tianocore/edk2/commit/1cb1087749ad3281bc65311849028db70d4b9739</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3487</bug_id>
          
          <creation_ts>2021-07-12 17:59:30 +0000</creation_ts>
          <short_desc>Measured boot configurations will still compute hashes for TPM PCRs which are inactive.</short_desc>
          <delta_ts>2021-12-17 13:49:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>3515</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</reporter>
          <assigned_to name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Other</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16608</commentid>
    <comment_count>0</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-07-12 17:59:30 +0000</bug_when>
    <thetext>The current implementation is computing a hash value per supported hash algorithm, independently of the current active PCR banks in the TPM; this is having a significant boot time impact whenever the platform&apos;s BIOS supports multiple hashing algorithms.

To improve boot performance in measured boot configurations, BIOS should only compute the hash for those hashing algorithms corresponding to the active and supported PCRs in the detected TPM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16609</commentid>
    <comment_count>1</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-07-12 18:03:13 +0000</bug_when>
    <thetext>By removing HashLib instances matching inactive PCR banks we were able to confirm significant boot time deltas in our timestamps.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16781</commentid>
    <comment_count>2</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-08-04 19:52:18 +0000</bug_when>
    <thetext>With the latest changes proposed in BZ 3515 BIOS can be configured with PcdTpm2HashMask set to a zero value, the HashLibBaseCryptoRouter will then only compute the hash values for the supported and active PCRs in the TPM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18024</commentid>
    <comment_count>3</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-12-17 13:49:37 +0000</bug_when>
    <thetext>Merged 8ed8568922be9b5f7111fc1297317106aba7ab52</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3129</bug_id>
          
          <creation_ts>2020-12-17 22:07:37 +0000</creation_ts>
          <short_desc>Extend support of peripheral x64 MM_STANDALONE drivers</short_desc>
          <delta_ts>2021-02-01 22:22:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14617</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-12-17 22:07:37 +0000</bug_when>
    <thetext>Current MM_STANDALONE drivers are largely AARCH64 oriented and could not compile or function when used for x64 systems. This ticket is created to request support for MM_STANDALONE drivers for x64 architecture in general.

Below is a mu_basecore oriented branch that supports the most fundamental functionalities for this request: https://github.com/kuqin12/mu_basecore/tree/personal/kuqin/standalone_x64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14639</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-21 20:56:55 +0000</bug_when>
    <thetext>Kun has sent the patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14654</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-23 21:28:59 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14949</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-01 22:22:17 +0000</bug_when>
    <thetext>Patch is merged @ea56ebf67dd55483105aa9f9996a48213e78337e..3b468095cd3dfcd1aa4ae63bc623f534bc2390d2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3032</bug_id>
          
          <creation_ts>2020-10-30 12:58:15 +0000</creation_ts>
          <short_desc>Build failed due to MAX_LONG_FILE_PATH being too small. Should use PATH_MAX</short_desc>
          <delta_ts>2021-01-28 19:55:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to>gaoliming</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>zhuenze</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14154</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2020-10-30 12:58:15 +0000</bug_when>
    <thetext>We had a build fail due to the hard coded MAX_LONG_FILE_PATH value. We should use PATH_MAX if it is available. 

This fixed it for us:
diff --git a/BaseTools/Source/C/Common/CommonLib.h b/BaseTools/Source/C/Common/CommonLib.h
index e1cce985f7f9..0f05d88db206 100644
--- a/BaseTools/Source/C/Common/CommonLib.h
+++ b/BaseTools/Source/C/Common/CommonLib.h
@@ -12,9 +12,17 @@ SPDX-License-Identifier: BSD-2-Clause-Patent
 #include &lt;Common/UefiBaseTypes.h&gt;
 #include &lt;Common/BuildVersion.h&gt;
 #include &lt;assert.h&gt;
+#ifndef _WIN32
+#include &lt;limits.h&gt;
+#endif
+
 #define PRINTED_GUID_BUFFER_SIZE  37  // including null-termination
 
+#ifdef PATH_MAX
+#define MAX_LONG_FILE_PATH PATH_MAX
+#else
 #define MAX_LONG_FILE_PATH 500
+#endif
 
 #define MAX_UINT64 ((UINT64)0xFFFFFFFFFFFFFFFFULL)
 #define MAX_UINT32 ((UINT32)0xFFFFFFFF)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14208</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-03 20:57:15 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14588</commentid>
    <comment_count>2</comment_count>
      <attachid>611</attachid>
    <who name="">zhuenze</who>
    <bug_when>2020-12-16 01:33:23 +0000</bug_when>
    <thetext>Created attachment 611
Use PATH_MAX replace MAX_LONG_FILE_PATH</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14604</commentid>
    <comment_count>3</comment_count>
      <attachid>619</attachid>
    <who name="">zhuenze</who>
    <bug_when>2020-12-16 21:20:12 +0000</bug_when>
    <thetext>Created attachment 619
Use PATH_MAX replace MAX_LONG_FILE_PATH</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14930</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-28 19:55:23 +0000</bug_when>
    <thetext>Merged at edk2 020ec963048340c9eaf9799471167d769239bcfc</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>611</attachid>
            <date>2020-12-16 01:33:23 +0000</date>
            <delta_ts>2020-12-16 21:20:12 +0000</delta_ts>
            <desc>Use PATH_MAX replace MAX_LONG_FILE_PATH</desc>
            <filename>0001-BaseTools-CommonLib.h-Build-failed-due-to-MAX_LONG_F.patch</filename>
            <type>text/plain</type>
            <size>1369</size>
            <attacher>zhuenze</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>619</attachid>
            <date>2020-12-16 21:20:12 +0000</date>
            <delta_ts>2020-12-16 21:20:12 +0000</delta_ts>
            <desc>Use PATH_MAX replace MAX_LONG_FILE_PATH</desc>
            <filename>0001-BaseTools-CommonLib.h-Build-failed-due-to-MAX_LONG_F.patch</filename>
            <type>text/plain</type>
            <size>1375</size>
            <attacher>zhuenze</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3299</bug_id>
          
          <creation_ts>2021-04-06 12:30:49 +0000</creation_ts>
          <short_desc>[BaseTools] GenFw: Unsupported ELF EM_RISCV64 relocations 0x13 and 0x14</short_desc>
          <delta_ts>2021-04-15 20:54:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3040</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pete Batard">pete</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>daniel.schaefer</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15526</commentid>
    <comment_count>0</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-04-06 12:30:49 +0000</bug_when>
    <thetext>While compiling a UEFI driver for RISCV64, I am seeing a whole bunch of the following errors during the last step of the executable generation process:

---------------------------------------------------------------------------
GenFw: ERROR 3000: Invalid
  WriteSections64(): /home/runner/work/ntfs-3g/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/DEBUG/ntfs.dll unsupported ELF EM_RISCV64 relocation 0x13.
GenFw: ERROR 3000: Invalid
  WriteSections64(): /home/runner/work/ntfs-3g/ntfs-3g/Build/RELEASE_GCC5/RISCV64/uefi-driver/uefi_driver/DEBUG/ntfs.dll unsupported ELF EM_RISCV64 relocation 0x14.
---------------------------------------------------------------------------

You can actually see these errors, as part of a full compilation process (using the GitHub Ubuntu CI environment with the latest Linux RISC-V toolchain), at: https://github.com/pbatard/ntfs-3g/runs/2278190652?check_suite_focus=true#step:6:230

It therefore looks like GenFw need to be updated to handle 0x13 and 0x14 relocations (a.k.a. R_RISCV_CALL_PLT and R_RISCV_GOT_HI20, per https://github.com/riscv/riscv-elf-psabi-doc/blob/master/riscv-elf.md#relocations) as these are currently missing from Elf64Convert.c (https://github.com/tianocore/edk2/blob/4ac02962017c77bf38b462f970c884c2dc7931cf/BaseTools/Source/C/GenFw/Elf64Convert.c#L1446-L1546) and we have concrete scenarios where the GCC toolchain may produce these kind of relocations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15662</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-13 22:07:27 +0000</bug_when>
    <thetext>Need to include RISCV64 enabling people to check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15679</commentid>
    <comment_count>2</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-04-14 08:29:53 +0000</bug_when>
    <thetext>Added Abner Chang and Daniel Schaefer to CC list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15688</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-14 23:31:24 +0000</bug_when>
    <thetext>Yes, we didn&apos;t handle this in EDK2 tool chain. I remember there is a similar BZ opened for this.
Anyway, Liming, can you assign this issue to me.

Thanks
Abner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15690</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-15 01:07:32 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15701</commentid>
    <comment_count>5</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-04-15 11:31:00 +0000</bug_when>
    <thetext>As Abner pointed out, these relocation failures have also been mentioned in BZ3040 and BZ3042. Depending on how you want to proceed, we can flag this bug as duplicate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15706</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-15 20:54:52 +0000</bug_when>
    <thetext>This is the duplicated one.

*** This bug has been marked as a duplicate of bug 3040 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3473</bug_id>
          
          <creation_ts>2021-07-02 08:12:51 +0000</creation_ts>
          <short_desc>UefiCpuPkg VTF0 X64: Build page tables using Linear-Address Translation to a 1-GByte Page</short_desc>
          <delta_ts>2021-09-19 11:09:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ashraf Ali S">ashraf.ali.s</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>ashraf.ali.s</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16520</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-02 08:12:51 +0000</bug_when>
    <thetext>X64 Reset Vector Code can access the memory range till 4GB using the Linear-Address Translation to a 2-MByte Page, when user wants to use more than 4G using 2M Page it will leads to use more number of Page table entries.
using the 1-GByte Page table user can use more than 4G Memory by reducing the page table entries using 1-GByte Page, this patch attached can access memory range till 512GByte.

Build Scrips for Reset Vector currently based on Python 2 which is already EOL,
needs to modify the build script based on Python 3,
update the Binary accordingly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16521</commentid>
    <comment_count>1</comment_count>
      <attachid>749</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-02 08:29:51 +0000</bug_when>
    <thetext>Created attachment 749
[PATCH] UefiCpuPkg VTF0 X64: Build page tables using 1-GByte Page Granularity</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16626</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-13 21:52:02 +0000</bug_when>
    <thetext>Ray, can you give the comment for the attached patch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17241</commentid>
    <comment_count>3</comment_count>
      <attachid>826</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-09-11 08:10:00 +0000</bug_when>
    <thetext>Created attachment 826
[PATCH v3] UefiCpuPkg: VTF0 Linear-Address Translation to a 1-GByte Page till 512GB</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17310</commentid>
    <comment_count>4</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-09-19 11:09:47 +0000</bug_when>
    <thetext>Fixed: 
https://github.com/tianocore/edk2/commit/60d8bb9f28f663e6ca58bc87c042fdd82f5607bd#diff-944e7ea5962cf98982b56128f6165a8f743799d3733c25b3f79cd85c7b115903</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>749</attachid>
            <date>2021-07-02 08:29:51 +0000</date>
            <delta_ts>2021-09-11 08:10:00 +0000</delta_ts>
            <desc>[PATCH] UefiCpuPkg VTF0 X64: Build page tables using 1-GByte Page Granularity</desc>
            <filename>0001-UefiCpuPkg-VTF0-X64-Build-page-tables-using-1-GByte-.patch</filename>
            <type>text/plain</type>
            <size>30503</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>826</attachid>
            <date>2021-09-11 08:10:00 +0000</date>
            <delta_ts>2021-09-11 08:10:00 +0000</delta_ts>
            <desc>[PATCH v3] UefiCpuPkg: VTF0 Linear-Address Translation to a 1-GByte Page till 512GB</desc>
            <filename>0001-UefiCpuPkg-VTF0-Linear-Address-Translation-to-a-1-GB.patch</filename>
            <type>text/plain</type>
            <size>52941</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3978</bug_id>
          
          <creation_ts>2022-07-05 03:37:01 +0000</creation_ts>
          <short_desc>Update DMAR ACPI definitions according to Intel VT-d architecture specification rev4.0</short_desc>
          <delta_ts>2022-07-11 04:39:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Robert Kowalewski">robert.kowalewski</reporter>
          <assigned_to name="Robert Kowalewski">robert.kowalewski</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>w.sheng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19181</commentid>
    <comment_count>0</comment_count>
    <who name="Robert Kowalewski">robert.kowalewski</who>
    <bug_when>2022-07-05 03:37:01 +0000</bug_when>
    <thetext>Intel(R) Virtualization Technology for Directed I/O (VT-D) Architecture Specification is updated to rev4.0 (Edk2 still supports rev3.2). Changes in DMAR ACPI definitions:
- Added definition for SoC Integrated Device Property (SIDP) Reporting Structure
(Section 8.9) and enhanced Device Scope Entry (Section 8.3.1) to support SIDP;
- Updated DRHD Structure to support increased size of register set. (Section 8.3).

Reference link:
https://software.intel.com/content/dam/develop/external/us/en/documents/vt-directed-io-spec.pdf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19182</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-05 21:44:37 +0000</bug_when>
    <thetext>Robert, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19226</commentid>
    <comment_count>2</comment_count>
    <who name="Robert Kowalewski">robert.kowalewski</who>
    <bug_when>2022-07-11 04:39:24 +0000</bug_when>
    <thetext>Patch is already merged:
https://github.com/tianocore/edk2/commit/12dd064a1804536518eb12229836fa572c232502</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3225</bug_id>
          
          <creation_ts>2021-02-17 21:24:24 +0000</creation_ts>
          <short_desc>ArmPkg: Add Universal/Smbios</short_desc>
          <delta_ts>2021-02-22 20:29:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="Rebecca Cran">rebecca</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15079</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-02-17 21:24:24 +0000</bug_when>
    <thetext>ArmPkg/Universal/Smbios adds a generic SMBIOS library for ARM/AARCH64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15080</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-18 00:16:44 +0000</bug_when>
    <thetext>Rebecca fixes it @472276f59bba..ecc267fec55a.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15099</commentid>
    <comment_count>2</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-02-22 20:29:10 +0000</bug_when>
    <thetext>Can we add the upcoming release to the &quot;Release(s) the issues must be fixed&quot; field so I can set that as the fix version for this ticket?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3709</bug_id>
          
          <creation_ts>2021-10-27 14:39:23 +0000</creation_ts>
          <short_desc>MessageLength is counting in communicate header for variable policy operations</short_desc>
          <delta_ts>2022-01-27 18:01:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17619</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-10-27 14:39:23 +0000</bug_when>
    <thetext>For variable policy implementations in MdeModulePkg/Universal/Variable/RuntimeDxe/VariablePolicySmmDxe.c, the DXE runtime agent would communicate to MM to disable, register or query policies.

However, in lines such as: https://github.com/tianocore/edk2/blob/9a95d11023ac2f2ee49a2958cf80658270442c42/MdeModulePkg/Universal/Variable/RuntimeDxe/VariablePolicySmmDxe.c#L91, the MessageLength calculation is including MM communicate header. This could lead to MM agent read data across the given buffer boundary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17651</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-02 21:54:18 +0000</bug_when>
    <thetext>Kun: can you provide the patch for this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17810</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-11-23 19:57:42 +0000</bug_when>
    <thetext>Liming, I will provide the fix once I finalize the patch in another module that is related to this ticket here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17813</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 21:45:36 +0000</bug_when>
    <thetext>Kun will follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17864</commentid>
    <comment_count>4</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-11-29 22:18:00 +0000</bug_when>
    <thetext>Patch series sent here: https://edk2.groups.io/g/devel/message/84140</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18066</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-03 18:53:20 +0000</bug_when>
    <thetext>Patch series submitted (https://edk2.groups.io/g/devel/message/84140) has not been reviewed by any community stewards.

May I please get some suggestion on how to proceed here? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18144</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-14 15:23:40 +0000</bug_when>
    <thetext>v2 Patch sent here: https://edk2.groups.io/g/devel/message/85116. Partially reviewed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18186</commentid>
    <comment_count>7</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-19 14:03:50 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/topic/87869771#85116 patches reviewed. Awaiting merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18213</commentid>
    <comment_count>8</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-27 18:01:28 +0000</bug_when>
    <thetext>Merged as commit ee67067f174012abae98b1c9fce332d2ce90b952 from PR https://github.com/tianocore/edk2/pull/2443.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3109</bug_id>
          
          <creation_ts>2020-12-07 22:29:52 +0000</creation_ts>
          <short_desc>Add IOMMU DMAR SATC support.</short_desc>
          <delta_ts>2020-12-15 20:14:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14490</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-12-07 22:29:52 +0000</bug_when>
    <thetext>Intel(R) Virtualization Technology for Directed I/O (VT-D) Architecture Specification is updated to v3.2. It supports SoC Integrated Address Translation Cache (SATC) reporting structure. Add the definitions for DMAR SATC struct.
Reference link:
https://software.intel.com/content/dam/develop/external/us/en/documents/vt-directed-io-spec.pdf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14509</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 20:29:05 +0000</bug_when>
    <thetext>Wei takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14586</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-12-15 20:14:09 +0000</bug_when>
    <thetext>Patch is merged.
https://github.com/tianocore/edk2/commit/5c3cdebf95bfa32c611b8e72921277401bc90fec</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3227</bug_id>
          
          <creation_ts>2021-02-19 20:55:54 +0000</creation_ts>
          <short_desc>Remove DB-encoded CET instructions.</short_desc>
          <delta_ts>2021-12-05 22:31:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3192</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15084</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-02-19 20:55:54 +0000</bug_when>
    <thetext>CET instructions is supported since NASM 2.15.01.
Open CI is using NASM 2.14.02 now.
So, we are using DB-encoded CET instructions in nasm.inc.
The DB-encoded CET instructions need to be removed when update to use NASM 2.15.01.
Also, we need to update the code which is using the DB-encoded CET instructions。</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15088</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-22 05:24:37 +0000</bug_when>
    <thetext>Related: bug 3192.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15118</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-23 21:43:09 +0000</bug_when>
    <thetext>Wei is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17930</commentid>
    <comment_count>3</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-12-05 22:31:22 +0000</bug_when>
    <thetext>patch is merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3009</bug_id>
          
          <creation_ts>2020-10-15 12:01:33 +0000</creation_ts>
          <short_desc>FV Space Information is decimal and error messages are Hex.</short_desc>
          <delta_ts>2020-11-02 20:15:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to name="yunhua feng">fengyunhua</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13991</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2020-10-15 12:01:33 +0000</bug_when>
    <thetext>Update the FV Space Information[1] to display decimal and Hex.
1) Build Error message use hex numbers. 
2) FDF files tend to use Hex address and sizes. 

I&apos;m always manually converting to hex to debug size issues. 


[1] Example build output.
FV Space Information
SECFV [19%Full] 212992 total, 42176 used, 170816 free
PEIFV [31%Full] 917504 total, 293480 used, 624024 free
DXEFV [39%Full] 12582912 total, 5006816 used, 7576096 free
FVMAIN_COMPACT [37%Full] 3440640 total, 1279216 used, 2161424 free</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14127</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 22:01:42 +0000</bug_when>
    <thetext>Bob: can you look it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14162</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-02 00:27:26 +0000</bug_when>
    <thetext>The patch is under review https://edk2.groups.io/g/devel/message/66774</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14178</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-02 20:15:36 +0000</bug_when>
    <thetext>Create PR: https://github.com/tianocore/edk2/pull/1073</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3728</bug_id>
          
          <creation_ts>2021-11-09 23:05:29 +0000</creation_ts>
          <short_desc>Use SMM Interrupr Shadow Stack</short_desc>
          <delta_ts>2021-11-26 10:04:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17713</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-11-09 23:05:29 +0000</bug_when>
    <thetext>When CET shadow stack feature is enabled, it needs to use IST for the exceptions.
it needs to use interrupt shadow stack for the stack switch. According to SDM v075, shadow stack should be 32 bytes aligned. When exit exception handler, check IST field, if it need to clear shadow stack token busy bit when using retf when CET shadow stack feature is enabled,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17714</commentid>
    <comment_count>1</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-11-09 23:06:11 +0000</bug_when>
    <thetext>I will prepare the patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17715</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-11-10 00:38:52 +0000</bug_when>
    <thetext>review patch by https://edk2.groups.io/g/devel/message/83540</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17849</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:04:13 +0000</bug_when>
    <thetext>This one has been fixed 455b0347a7c55d3842e87b20259659a22f7e62a5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3366</bug_id>
          
          <creation_ts>2021-04-30 02:49:06 +0000</creation_ts>
          <short_desc>Support VTd Queued Invalidation Interface</short_desc>
          <delta_ts>2021-12-05 22:25:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15832</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-04-30 02:49:06 +0000</bug_when>
    <thetext>For software to invalidate the various caching structures, the architecture supports the following two types of invalidation interfaces:
1. Register-based invalidation interface
2. Queued invalidation interface
BIOS need check VER_REG to determine if register based invalidation can be used. Only for Major Version 6 or lower can support register based invalidation. For any version newer than that should use queue invalidation interface instead.
VTd core driver need to support VTd queued invalidation interface.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15833</commentid>
    <comment_count>1</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-04-30 02:50:42 +0000</bug_when>
    <thetext>I will create patch to support it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15834</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-04-30 03:01:09 +0000</bug_when>
    <thetext>patch : https://edk2.groups.io/g/devel/message/74625</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17921</commentid>
    <comment_count>3</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-12-05 22:25:31 +0000</bug_when>
    <thetext>Patch is merged</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3862</bug_id>
          
          <creation_ts>2022-03-07 05:46:47 +0000</creation_ts>
          <short_desc>Support FFS3 GUID in SearchForBfvBase.asm</short_desc>
          <delta_ts>2022-03-15 08:56:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ted.kuo</reporter>
          <assigned_to>ted.kuo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18564</commentid>
    <comment_count>0</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-03-07 05:46:47 +0000</bug_when>
    <thetext>Currently VTF0 driver only supports searching BFV with FFS2 GUID.
Need to support searching BFV with FFS3 GUID according to the
change e9e197ec7906e94a7e9a1659c0651630b9077e9b in FMMT tool.
Otherwise, VTF0 will fail to find the address of BFV which has
FFS3 GUID.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18571</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-08 21:35:43 +0000</bug_when>
    <thetext>Ted is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18602</commentid>
    <comment_count>2</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-03-15 08:56:54 +0000</bug_when>
    <thetext>SHA-1: 52e09dcd7a16c54442c059c2db8b8754534f9a5f

* UefiCpuPkg: Support FFS3 GUID in SearchForBfvBase.asm

REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3862
The new algorithm searches BFV address with FFS3 GUID first.
If not found, it will search BFV address with FFS2 GUID.

Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Cc: Debkumar De &lt;debkumar.de@intel.com&gt;
Cc: Harry Han &lt;harry.han@intel.com&gt;
Cc: Catharine West &lt;catharine.west@intel.com&gt;
Signed-off-by: Ted Kuo &lt;ted.kuo@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3156</bug_id>
          
          <creation_ts>2021-01-06 02:57:45 +0000</creation_ts>
          <short_desc>Core CI, Platform CI: issues with the &quot;ubuntu-latest&quot; VM image</short_desc>
          <delta_ts>2023-01-03 04:17:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Sean Brogan">sean.brogan</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>steven.downum</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14738</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-06 02:57:45 +0000</bug_when>
    <thetext>In December 2020, the &quot;actions&quot; organizaton on github.com bumped the
&quot;ubuntu-latest&quot; VM image label from Ubuntu 18.04 LTS (Bionic) to 20.04
LTS (Focal), in their &quot;virtual-environments&quot; repository:

  https://github.com/actions/virtual-environments/issues/1816

This broke our CI tasks in three ways:

(1) The &quot;qemu&quot; package became a dummy package with no dependencies, and
    so no actual emulator binaries are pulled in:

      https://packages.ubuntu.com/bionic/qemu
      https://packages.ubuntu.com/focal/qemu

    We should instead depend on the &quot;qemu-system&quot; package now:

      https://packages.ubuntu.com/bionic/qemu-system
      https://packages.ubuntu.com/focal/qemu-system

(2) When using &quot;qemu-system&quot;, the emulators crash immediately (they dump
    core) upon invocation:

      https://github.com/actions/virtual-environments/issues/2292

(3) Linking 32-bit (IA32) EmulatorPkg binaries fails, because 32-bit
    libgcc.a is not available in the VM image:

      https://github.com/actions/virtual-environments/issues/2324


We have temporarily mitigated these issues in the following edk2
commits:

- 90683caedf1e (&quot;ArmVirtPkg/PlatformCI: stick with &quot;ubuntu-18.04&quot; for
  now&quot;, 2020-12-18)

- c487970ac89d (&quot;OvmfPkg/PlatformCI: stick with &quot;ubuntu-18.04&quot; for now&quot;,
  2020-12-18)

- 3ce3274a5ea4 (&quot;EmulatorPkg/PlatformCI: stick with &quot;ubuntu-18.04&quot; for
  now&quot;, 2020-12-21)

In the longer term, we should certainly flip back to, and stay on,
&quot;ubuntu-latest&quot;.

From the three issues listed above, it&apos;s only (1) whose fixing is
actually the job of the edk2 community (i.e., using the &quot;qemu-system&quot;
package in place of the &quot;qemu&quot; package).

Unfortunately, my github.com tickets for (2) and (3) got closed less
helpfully (from the edk2 perspective) than I had hoped:

- Ticket #2324 (for problem (3)) *may* be fixed at this point in the VM
  image, but it&apos;s unclear whether the necessary package(s) are now
  auto-installed in the image, or we still need to spell out
  &quot;gcc-4.8-multilib&quot; in our YAML files.

- Ticket #2292 (for problem (2)) was simply rejected as an Ubuntu
  problem (it&apos;s been implied that the issue is with the QEMU binaries
  themselves in Ubuntu Focal), and we have been referred to the Ubuntu
  QEMU bug tracker. It does seem that there is a related ticket in the
  Ubuntu QEMU bug tracker:

  https://bugs.launchpad.net/ubuntu/+source/qemu/+bug/1908577


So here&apos;s the ask, in this TianoCore BZ:
- please flip back the VM image references in edk2 to &quot;ubuntu-latest&quot;,
- please depend on &quot;qemu-system&quot; instead on &quot;qemu&quot; (1),
- please check if additionally depending on &quot;qemu-system-gui&quot; fixes the
  QEMU crash (2),
- please check if additionally depending on &quot;gcc-multilib&quot; fixes the
  32-bit EmulatorPkg build (3).

If the above additional package installations don&apos;t fix issues (2) and
(3), then please triage the problems *interactively*, using the Focal VM
image, and report further bugs wherever needed
(&lt;https://github.com/actions/virtual-environments/issues&gt;,
&lt;https://bugs.launchpad.net/ubuntu/+source/qemu/+bugs&gt;, etc.)

(I&apos;m not an Ubuntu user, so I&apos;d prefer if someone using Ubuntu every day
looked into this. I might be able to help better if we used a Fedora
image (Fedora virt maintainers are my direct team mates at Red Hat), but
a Fedora image is not available yet:
&lt;https://github.com/actions/virtual-environments/issues/2307&gt;.)

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14739</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-06 03:03:17 +0000</bug_when>
    <thetext>Importance: normal (not urgent, but we should leave &quot;ubuntu-18.04&quot; behind soon)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14856</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-19 22:03:49 +0000</bug_when>
    <thetext>Sean: can you evaluate it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18914</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-05-02 03:09:30 +0000</bug_when>
    <thetext>Created a PR https://github.com/tianocore/edk2/pull/2845 to:

- flip back the VM image references in edk2 to &quot;ubuntu-latest&quot;
- install &quot;qemu-system&quot; instead of &quot;qemu&quot;

Result:

- QEMU still crash. (2)
- EmulatorPkg build pass (3)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18985</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 21:44:20 +0000</bug_when>
    <thetext>Still need to attach the failure log, and analyze the problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19124</commentid>
    <comment_count>5</comment_count>
      <attachid>997</attachid>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-06-23 00:48:16 +0000</bug_when>
    <thetext>Created attachment 997
Platform_CI QEMU_AARCH64_DEBUG Log</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20050</commentid>
    <comment_count>6</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2022-11-16 12:39:05 +0000</bug_when>
    <thetext>This will be addressed by using containers on Linux for CI.
The container repo has been created and a few patch series have been circulated.  A few more tweaks are being made to the azure pipeline build files.  Hopefully post 202211 stable tag the switch can be made to leverage containers.  

https://github.com/tianocore/containers</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20395</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:17:39 +0000</bug_when>
    <thetext>The containerization of CI seems to have completed at commit 316e6df435af81f8281150bb04b3dd5a304d9c92, so I&apos;m closing this as fixed.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>997</attachid>
            <date>2022-06-23 00:48:16 +0000</date>
            <delta_ts>2022-06-23 00:48:16 +0000</delta_ts>
            <desc>Platform_CI QEMU_AARCH64_DEBUG Log</desc>
            <filename>Platform_CI QEMU_AARCH64_DEBUG.txt</filename>
            <type>text/plain</type>
            <size>188982</size>
            <attacher name="Bob Feng">bob.c.feng</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3280</bug_id>
          
          <creation_ts>2021-03-26 01:58:25 +0000</creation_ts>
          <short_desc>Support detect SMM shadow stack overflow</short_desc>
          <delta_ts>2021-12-05 22:29:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15434</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-03-26 01:58:25 +0000</bug_when>
    <thetext>Use SMM stack guard feature to detect SMM shadow stack overflow.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15435</commentid>
    <comment_count>1</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-03-26 01:59:46 +0000</bug_when>
    <thetext>Change will be in function SmiPFHandler()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17927</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-12-05 22:29:57 +0000</bug_when>
    <thetext>patch is merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3954</bug_id>
          
          <creation_ts>2022-06-17 22:07:41 +0000</creation_ts>
          <short_desc>failure to read XHCI reg causes BIOS hang, incomplete error checking</short_desc>
          <delta_ts>2022-06-21 21:19:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Lee Hamel">lee.m.hamel</reporter>
          <assigned_to name="Lee Hamel">lee.m.hamel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19096</commentid>
    <comment_count>0</comment_count>
    <who name="Lee Hamel">lee.m.hamel</who>
    <bug_when>2022-06-17 22:07:41 +0000</bug_when>
    <thetext>BIOS fails to read XHC_PAGESIZE_OFFSET and returns 0xffffffff, but does not check that the value is valid and uses it as an address, causing hang.

The fix:
Edk2\MdeModulePkg\Bus\Pci\XhciDxe\Xhci.c:XhcCreateUsbHc()

  //
  // This PageSize field defines the page size supported by the xHC implementation.
  // This xHC supports a page size of 2^(n+12) if bit n is Set. For example,
  // if bit 0 is Set, the xHC supports 4k byte page sizes.
  //
  PageSize      = XhcReadOpReg (Xhc, XHC_PAGESIZE_OFFSET);
  if(PageSize == 0xFFFFFFFF) {
  DEBUG ((DEBUG_INFO, &quot;XhcCreateUsb3Hc: error reading XHC_PAGESIZE_OFFSET\n&quot;));
   goto ON_ERROR;
  }
  PageSize      &amp;= XHC_PAGESIZE_MASK;
  Xhc-&gt;PageSize = 1 &lt;&lt; (HighBitSet32 (PageSize) + 12);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19097</commentid>
    <comment_count>1</comment_count>
    <who name="Lee Hamel">lee.m.hamel</who>
    <bug_when>2022-06-17 22:11:22 +0000</bug_when>
    <thetext>Intel team encountered this bug and root caused it to Edk2\MdeModulePkg\Bus\Pci\XhciDxe\Xhci.c:XhcCreateUsbHc() and provided a fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19098</commentid>
    <comment_count>2</comment_count>
    <who name="Lee Hamel">lee.m.hamel</who>
    <bug_when>2022-06-17 22:38:12 +0000</bug_when>
    <thetext>Patch sent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19104</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-06-21 20:59:11 +0000</bug_when>
    <thetext>V1 patch sent at: https://edk2.groups.io/g/devel/message/90599
V2 patch sent at: https://edk2.groups.io/g/devel/message/90608</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19105</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-06-21 21:19:24 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/2997
Commit - https://github.com/tianocore/edk2/commit/b97243dea3c95ad923fa4ca190940158209e8384</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3121</bug_id>
          
          <creation_ts>2020-12-15 11:37:37 +0000</creation_ts>
          <short_desc>OvmfPkgX64 is broken on AMD (reset loop) after cee5b0441af3 UefiCpuPkg/CpuDxe: Fix boot error</short_desc>
          <delta_ts>2020-12-18 07:09:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="James.Bottomley@HansenPartnership.com">James.Bottomley</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14584</commentid>
    <comment_count>0</comment_count>
    <who name="James.Bottomley@HansenPartnership.com">James.Bottomley</who>
    <bug_when>2020-12-15 11:37:37 +0000</bug_when>
    <thetext>Current OVMF is doing an immediate reset in the CpuDxe protocol after commit cee5b0441af3 (&quot;UefiCpuPkg/CpuDxe: Fix boot error&quot;).  The problem is that commit altering the far jump from m16:32 to m16:64.  nasm does this by adding a rax.w prefix to the instruction, which works on Intel, but doesn&apos;t work on some AMD CPUs, meaning they&apos;re jumping to the Null selector and resetting because they&apos;re ignoring the rax.w prefix and doing a m16:32 jump, making the CS zero.

We actually ran across this exact same problem in Linux 8 years ago for the same reason:

https://lore.kernel.org/lkml/20121223184516.GC8190@liondog.tnic/

Our fix, which works here as well was to use lretq instead of the far jump because that works on all platforms.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14612</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-17 09:41:22 +0000</bug_when>
    <thetext>Sorry, I posted the revert for the CpuDxe patch (from bug 3084) before noticing this report.

So I guess I can flip this to IN_PROGRESS now:

[edk2-devel] [PATCH] Revert &quot;UefiCpuPkg/CpuDxe: Fix boot error&quot;
https://edk2.groups.io/g/devel/message/69087
https://www.redhat.com/archives/edk2-devel-archive/2020-December/msg00990.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14613</commentid>
    <comment_count>2</comment_count>
    <who name="James.Bottomley@HansenPartnership.com">James.Bottomley</who>
    <bug_when>2020-12-17 10:29:03 +0000</bug_when>
    <thetext>I&apos;m fine with a revert.  I also posted a fix:

https://www.redhat.com/archives/edk2-devel-archive/2020-December/msg00737.html

James</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14614</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-17 12:07:14 +0000</bug_when>
    <thetext>(In reply to James.Bottomley@HansenPartnership.com from comment #2)
&gt; I&apos;m fine with a revert.  I also posted a fix:
&gt; 
&gt; https://www.redhat.com/archives/edk2-devel-archive/2020-December/msg00737.
&gt; html
&gt; 
&gt; James

Yes, I&apos;ve seen that -- but it&apos;s not a standalone &quot;PATCH&quot; email, plus it would require approval (A-b or R-b) from one of the UefiCpuPkg maintainers (I&apos;m only a Reviewer for that package, not a Maintainer). I&apos;d like to resolve this issue for OVMF users &amp; developers on AMD hosts before I disappear for the end of the year, and I feel confident merging the revert (= returning to an earlier, already proven, state) *even if* through that, I technically break the development process myself, by not waiting for UefiCpuPkg maintainer approval. Leaving a regression in place for 9 days is unacceptable, and that kind of gives me the ammo to just go ahead with the revert. I couldn&apos;t go ahead with they retfq patch in the same vein. I realize the revert will break Guo Dong&apos;s platform (which has not been identified, and it&apos;s likely not part of edk2-platforms even), but the burden to make a new thing work is not on the old thing&apos;s dependents. Guo can post the retfq patch later.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14618</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-18 07:09:57 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)

&gt; [edk2-devel] [PATCH] Revert &quot;UefiCpuPkg/CpuDxe: Fix boot error&quot;
&gt; https://edk2.groups.io/g/devel/message/69087
&gt; https://www.redhat.com/archives/edk2-devel-archive/2020-December/msg00990.html

Merged as commit 089285b42c69, via &lt;https://github.com/tianocore/edk2/pull/1241&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3092</bug_id>
          
          <creation_ts>2020-11-25 14:51:49 +0000</creation_ts>
          <short_desc>New Variable Policy code is causing runtime panics in linux</short_desc>
          <delta_ts>2020-11-27 10:35:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2522</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="James.Bottomley@HansenPartnership.com">James.Bottomley</reporter>
          <assigned_to name="James.Bottomley@HansenPartnership.com">James.Bottomley</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14422</commentid>
    <comment_count>0</comment_count>
    <who name="James.Bottomley@HansenPartnership.com">James.Bottomley</who>
    <bug_when>2020-11-25 14:51:49 +0000</bug_when>
    <thetext>The problem is manifesting as an early boot panic in linux when it tries to remove an unset L&quot;DUMMY&quot; variable.  If this boot time code is commented out, linux boot, but will encounter a firmware bug if something in the linux runtime attempts to write to a firmware variable:

[  975.440240] [Firmware Bug]: Page fault caused by firmware at PA: 0x7e450020

The kernel panic looks like:

Loading Linux 5.9.0-3-amd64 ...
Loading initial ramdisk ...
[    0.000000] Linux version 5.9.0-3-amd64 (debian-kernel@lists.debian.org) (gcc-10 (Debian 10.2.0-17) 10.2.0, GNU ld (GNU Binutils for Debian) 2.35.1) #1 SMP Debian 5.9.9-1 (2020-11-19)
[    0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-5.9.0-3-amd64 root=UUID=8ebba08b-ff72-4030-ba43-8ce252e2e5a4 ro console=ttyS0,115200n8
[    0.000000] x86/fpu: x87 FPU will use FXSAVE
[    0.000000] BIOS-provided physical RAM map:
[    0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009ffff] usable
[    0.000000] BIOS-e820: [mem 0x0000000000100000-0x00000000007fffff] usable
[    0.000000] BIOS-e820: [mem 0x0000000000800000-0x0000000000807fff] ACPI NVS
[    0.000000] BIOS-e820: [mem 0x0000000000808000-0x000000000080ffff] usable
[    0.000000] BIOS-e820: [mem 0x0000000000810000-0x00000000008fffff] ACPI NVS
[    0.000000] BIOS-e820: [mem 0x0000000000900000-0x000000007f8eefff] usable
[    0.000000] BIOS-e820: [mem 0x000000007f8ef000-0x000000007f9eefff] reserved
[    0.000000] BIOS-e820: [mem 0x000000007f9ef000-0x000000007faeefff] type 20
[    0.000000] BIOS-e820: [mem 0x000000007faef000-0x000000007fb6efff] reserved
[    0.000000] BIOS-e820: [mem 0x000000007fb6f000-0x000000007fb7efff] ACPI data
[    0.000000] BIOS-e820: [mem 0x000000007fb7f000-0x000000007fbfefff] ACPI NVS
[    0.000000] BIOS-e820: [mem 0x000000007fbff000-0x000000007fef3fff] usable
[    0.000000] BIOS-e820: [mem 0x000000007fef4000-0x000000007ff77fff] reserved
[    0.000000] BIOS-e820: [mem 0x000000007ff78000-0x000000007fffffff] ACPI NVS
[    0.000000] BIOS-e820: [mem 0x00000000ffc00000-0x00000000ffffffff] reserved
[    0.000000] NX (Execute Disable) protection: active
[    0.000000] efi: EFI v2.70 by EDK II
[    0.000000] efi: SMBIOS=0x7f942000 ACPI=0x7fb7e000 ACPI 2.0=0x7fb7e014 MEMATTR=0x7ebe9018 
[    0.000000] secureboot: Secure boot could not be determined (mode 0)
[    0.000000] SMBIOS 2.8 present.
[    0.000000] DMI: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 0.0.0 02/06/2015
[    0.000000] Hypervisor detected: KVM
[    0.000000] kvm-clock: Using msrs 4b564d01 and 4b564d00
[    0.000000] kvm-clock: cpu 0, msr 57267001, primary cpu clock
[    0.000000] kvm-clock: using sched offset of 16019535822 cycles
[    0.000006] clocksource: kvm-clock: mask: 0xffffffffffffffff max_cycles: 0x1cd42e4dffb, max_idle_ns: 881590591483 ns
[    0.000013] tsc: Detected 2400.000 MHz processor
[    0.000110] last_pfn = 0x7fef4 max_arch_pfn = 0x400000000
[    0.000153] x86/PAT: PAT not supported by the CPU.
[    0.000161] x86/PAT: Configuration [0-7]: WB  WT  UC- UC  WB  WT  UC- UC  
[    0.016709] RAMDISK: [mem 0x34945000-0x36499fff]
[    0.016727] ACPI: Early table checksum verification disabled
[    0.016740] ACPI: RSDP 0x000000007FB7E014 000024 (v02 BOCHS )
[    0.016744] ACPI: XSDT 0x000000007FB7D0E8 000044 (v01 BOCHS  BXPCFACP 00000001      01000013)
[    0.016753] ACPI: FACP 0x000000007FB7A000 000074 (v01 BOCHS  BXPCFACP 00000001 BXPC 00000001)
[    0.016758] ACPI: DSDT 0x000000007FB7B000 00140B (v01 BOCHS  BXPCDSDT 00000001 BXPC 00000001)
[    0.016765] ACPI: FACS 0x000000007FBDD000 000040
[    0.016768] ACPI: APIC 0x000000007FB79000 000078 (v01 BOCHS  BXPCAPIC 00000001 BXPC 00000001)
[    0.016771] ACPI: HPET 0x000000007FB78000 000038 (v01 BOCHS  BXPCHPET 00000001 BXPC 00000001)
[    0.016777] ACPI: BGRT 0x000000007FB77000 000038 (v01 INTEL  EDK2     00000002      01000013)
[    0.017076] No NUMA configuration found
[    0.017077] Faking a node at [mem 0x0000000000000000-0x000000007fef3fff]
[    0.017084] NODE_DATA(0) allocated [mem 0x7fe7f000-0x7fe83fff]
[    0.017118] Zone ranges:
[    0.017119]   DMA      [mem 0x0000000000001000-0x0000000000ffffff]
[    0.017120]   DMA32    [mem 0x0000000001000000-0x000000007fef3fff]
[    0.017122]   Normal   empty
[    0.017122]   Device   empty
[    0.017123] Movable zone start for each node
[    0.017124] Early memory node ranges
[    0.017125]   node   0: [mem 0x0000000000001000-0x000000000009ffff]
[    0.017126]   node   0: [mem 0x0000000000100000-0x00000000007fffff]
[    0.017127]   node   0: [mem 0x0000000000808000-0x000000000080ffff]
[    0.017127]   node   0: [mem 0x0000000000900000-0x000000007f8eefff]
[    0.017128]   node   0: [mem 0x000000007fbff000-0x000000007fef3fff]
[    0.017395] Zeroed struct page in unavailable ranges: 1397 pages
[    0.017396] Initmem setup node 0 [mem 0x0000000000001000-0x000000007fef3fff]
[    0.023450] ACPI: PM-Timer IO Port: 0xb008
[    0.023466] ACPI: LAPIC_NMI (acpi_id[0xff] dfl dfl lint[0x1])
[    0.023510] IOAPIC[0]: apic_id 0, version 17, address 0xfec00000, GSI 0-23
[    0.023513] ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 dfl dfl)
[    0.023515] ACPI: INT_SRC_OVR (bus 0 bus_irq 5 global_irq 5 high level)
[    0.023515] ACPI: INT_SRC_OVR (bus 0 bus_irq 9 global_irq 9 high level)
[    0.023521] ACPI: INT_SRC_OVR (bus 0 bus_irq 10 global_irq 10 high level)
[    0.023522] ACPI: INT_SRC_OVR (bus 0 bus_irq 11 global_irq 11 high level)
[    0.023527] Using ACPI (MADT) for SMP configuration information
[    0.023529] ACPI: HPET id: 0x8086a201 base: 0xfed00000
[    0.023559] smpboot: Allowing 1 CPUs, 0 hotplug CPUs
[    0.023586] PM: hibernation: Registered nosave memory: [mem 0x00000000-0x00000fff]
[    0.023588] PM: hibernation: Registered nosave memory: [mem 0x000a0000-0x000fffff]
[    0.023589] PM: hibernation: Registered nosave memory: [mem 0x00800000-0x00807fff]
[    0.023590] PM: hibernation: Registered nosave memory: [mem 0x00810000-0x008fffff]
[    0.023592] PM: hibernation: Registered nosave memory: [mem 0x7e7e7000-0x7e7effff]
[    0.023593] PM: hibernation: Registered nosave memory: [mem 0x7f8ef000-0x7f9eefff]
[    0.023594] PM: hibernation: Registered nosave memory: [mem 0x7f9ef000-0x7faeefff]
[    0.023594] PM: hibernation: Registered nosave memory: [mem 0x7faef000-0x7fb6efff]
[    0.023595] PM: hibernation: Registered nosave memory: [mem 0x7fb6f000-0x7fb7efff]
[    0.023596] PM: hibernation: Registered nosave memory: [mem 0x7fb7f000-0x7fbfefff]
[    0.023597] [mem 0x80000000-0xffbfffff] available for PCI devices
[    0.023598] Booting paravirtualized kernel on KVM
[    0.023602] clocksource: refined-jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 7645519600211568 ns
[    0.027609] setup_percpu: NR_CPUS:512 nr_cpumask_bits:512 nr_cpu_ids:1 nr_node_ids:1
[    0.027833] percpu: Embedded 55 pages/cpu s185048 r8192 d32040 u2097152
[    0.027868] kvm-guest: stealtime: cpu 0, msr 7c418580
[    0.027872] kvm-guest: PV spinlocks disabled, no host support
[    0.027877] Built 1 zonelists, mobility grouping on.  Total pages: 512892
[    0.027878] Policy zone: DMA32
[    0.027880] Kernel command line: BOOT_IMAGE=/boot/vmlinuz-5.9.0-3-amd64 root=UUID=8ebba08b-ff72-4030-ba43-8ce252e2e5a4 ro console=ttyS0,115200n8
[    0.028094] Dentry cache hash table entries: 262144 (order: 9, 2097152 bytes, linear)
[    0.028524] Inode-cache hash table entries: 131072 (order: 8, 1048576 bytes, linear)
[    0.028570] mem auto-init: stack:off, heap alloc:on, heap free:off
[    0.033164] Memory: 1968032K/2091564K available (12291K kernel code, 1298K rwdata, 3804K rodata, 1640K init, 1768K bss, 123272K reserved, 0K cma-reserved)
[    0.033179] random: get_random_u64 called from __kmem_cache_create+0x2e/0x540 with crng_init=0
[    0.033271] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.033281] Kernel/User page tables isolation: enabled
[    0.033297] ftrace: allocating 34815 entries in 136 pages
[    0.046678] ftrace: allocated 136 pages with 2 groups
[    0.046769] rcu: Hierarchical RCU implementation.
[    0.046770] rcu:     RCU restricting CPUs from NR_CPUS=512 to nr_cpu_ids=1.
[    0.046771]  Rude variant of Tasks RCU enabled.
[    0.046772] rcu: RCU calculated value of scheduler-enlistment delay is 25 jiffies.
[    0.046773] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=1
[    0.049462] NR_IRQS: 33024, nr_irqs: 256, preallocated irqs: 16
[    0.049696] Console: colour dummy device 80x25
[    0.161997] printk: console [ttyS0] enabled
[    0.162674] ACPI: Core revision 20200717
[    0.163453] clocksource: hpet: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604467 ns
[    0.164992] APIC: Switch to symmetric I/O mode setup
[    0.166044] x2apic enabled
[    0.166784] Switched APIC routing to physical x2apic.
[    0.169130] ..TIMER: vector=0x30 apic1=0 pin1=2 apic2=-1 pin2=-1
[    0.170151] clocksource: tsc-early: mask: 0xffffffffffffffff max_cycles: 0x22983777dd9, max_idle_ns: 440795300422 ns
[    0.172152] Calibrating delay loop (skipped) preset value.. 4800.00 BogoMIPS (lpj=9600000)
[    0.176152] pid_max: default: 32768 minimum: 301
[    0.178520] BUG: unable to handle page fault for address: 000000007ed03020
[    0.179561] #PF: supervisor read access in kernel mode
[    0.180146] #PF: error_code(0x0000) - not-present page
[    0.180146] PGD 7b971063 P4D 7b971063 PUD 7b974063 PMD 7b97f063 PTE 800fffff812fc060
[    0.180146] Oops: 0000 [#1] SMP PTI
[    0.180146] CPU: 0 PID: 0 Comm: swapper/0 Not tainted 5.9.0-3-amd64 #1 Debian 5.9.9-1
[    0.180146] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 0.0.0 02/06/2015
[    0.180146] RIP: 0010:0xfffffffeff6c6648
[    0.180146] Code: 48 83 ec 20 e8 41 fd ff ff 48 85 c9 75 1c 84 c0 74 18 4c 8d 05 15 a1 00 00 48 8d 0d ec 93 00 00 ba ba 00 00 00 e8 c0 fe ff ff &lt;48&gt; 8b 03 48 83 c4 20 5b c3 55 57 56 53 48 89 d3 48 89 ce 48 83 ec
[    0.180146] RSP: 0000:ffffffff8ca03b80 EFLAGS: 00010202
[    0.180146] RAX: 0000000000000001 RBX: 000000007ed03020 RCX: 000000007ed03020
[    0.180146] RDX: ffffffff8ca03eb0 RSI: 000000007ed03020 RDI: ffffffff8c60a378
[    0.180146] RBP: 0000000000000000 R08: 0000000000000007 R09: 0000000000000000
[    0.180146] R10: 0000000000000048 R11: 0000000000001000 R12: ffffffff8ca03eb0
[    0.180146] R13: 0000000000000000 R14: 0000000000000000 R15: 0000000000000000
[    0.180146] FS:  0000000000000000(0000) GS:ffff9d1e7c400000(0000) knlGS:0000000000000000
[    0.180146] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[    0.180146] CR2: 000000007ed03020 CR3: 000000007b9ac000 CR4: 00000000000006b0
[    0.180146] Call Trace:
[    0.180146]  ? __alloc_pages_nodemask+0x15e/0x310
[    0.180146]  ? __change_page_attr_set_clr+0x652/0xcf0
[    0.180146]  ? native_flush_tlb_global+0x8a/0xa0
[    0.180146]  ? __flush_tlb_all+0x18/0x30
[    0.180146]  ? kernel_map_pages_in_pgd+0xba/0xda
[    0.180146]  ? efi_update_mappings+0x66/0x91
[    0.180146]  ? __efi_call+0x25/0x30
[    0.180146]  ? switch_mm_irqs_off+0x195/0x3c0
[    0.180146]  ? virt_efi_set_variable_nonblocking+0x9d/0x100
[    0.180146]  ? efi_delete_dummy_variable+0x54/0x70
[    0.180146]  ? efi_enter_virtual_mode+0x3df/0x3fa
[    0.180146]  ? start_kernel+0x50f/0x5a8
[    0.180146]  ? secondary_startup_64+0xa4/0xb0
[    0.180146] Modules linked in:
[    0.180146] CR2: 000000007ed03020
[    0.180146] ---[ end trace 842329954bcb47b2 ]---
[    0.180146] RIP: 0010:0xfffffffeff6c6648
[    0.180146] Code: 48 83 ec 20 e8 41 fd ff ff 48 85 c9 75 1c 84 c0 74 18 4c 8d 05 15 a1 00 00 48 8d 0d ec 93 00 00 ba ba 00 00 00 e8 c0 fe ff ff &lt;48&gt; 8b 03 48 83 c4 20 5b c3 55 57 56 53 48 89 d3 48 89 ce 48 83 ec
[    0.180146] RSP: 0000:ffffffff8ca03b80 EFLAGS: 00010202
[    0.180146] RAX: 0000000000000001 RBX: 000000007ed03020 RCX: 000000007ed03020
[    0.180146] RDX: ffffffff8ca03eb0 RSI: 000000007ed03020 RDI: ffffffff8c60a378
[    0.180146] RBP: 0000000000000000 R08: 0000000000000007 R09: 0000000000000000
[    0.180146] R10: 0000000000000048 R11: 0000000000001000 R12: ffffffff8ca03eb0
[    0.180146] R13: 0000000000000000 R14: 0000000000000000 R15: 0000000000000000
[    0.180146] FS:  0000000000000000(0000) GS:ffff9d1e7c400000(0000) knlGS:0000000000000000
[    0.180146] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[    0.180146] CR2: 000000007ed03020 CR3: 000000007b9ac000 CR4: 00000000000006b0
[    0.180146] Kernel panic - not syncing: Attempted to kill the idle task!
[    0.180146] ---[ end Kernel panic - not syncing: Attempted to kill the idle task! ]---</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14423</commentid>
    <comment_count>1</comment_count>
    <who name="James.Bottomley@HansenPartnership.com">James.Bottomley</who>
    <bug_when>2020-11-25 14:53:50 +0000</bug_when>
    <thetext>Problem is caused because in the non-SMM runtime, the memory allocated to the policy table is boot time only meaning it is gone in the runtime and thus linux panics in UEFI after ExitBootServices() with an unreferenced pointer when ValidateSetVariable() tries to check the policy</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14424</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-25 15:34:26 +0000</bug_when>
    <thetext>- Setting Regression keyword.

- Adding BZ 2522 to See Also (the boot regression was introduced in commit 355b181f7405 (&quot;MdeModulePkg: Define the VariablePolicyLib&quot;, 2020-11-17), made for BZ 2522).

- Patch on the list from James:

[edk2-devel] [PATCH] MdeModulePkg: Fix runtime panic in ValidateSetVariable()
msgid: &lt;414b7574bf8249de0cecd16fb422c711feb76e1a.camel@linux.ibm.com&gt;
https://edk2.groups.io/g/devel/message/68003
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg01163.html

- Additional discussion on the list (pre-patch):

msgid: &lt;e502bc20-f636-949c-a7bc-1d17394345e2@redhat.com&gt;
https://edk2.groups.io/g/devel/message/67997
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg01157.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14430</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-26 19:58:15 +0000</bug_when>
    <thetext>Create PR https://github.com/tianocore/edk2/pull/1148</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14431</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-27 10:35:38 +0000</bug_when>
    <thetext>Commit 872f953262d6.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3585</bug_id>
          
          <creation_ts>2021-08-24 11:52:18 +0000</creation_ts>
          <short_desc>UefiPayloadPkg: payload error</short_desc>
          <delta_ts>2021-09-08 22:04:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sumo">kingsumos</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17022</commentid>
    <comment_count>0</comment_count>
    <who name="Sumo">kingsumos</who>
    <bug_when>2021-08-24 11:52:18 +0000</bug_when>
    <thetext>The following patch broke the payload loading when using Coreboot.

commit 4bac086e8e007c7143e33f87bb96238326d1d6ba
Author: Zhiguang Liu &lt;zhiguang.liu@intel.com&gt;
Date:   Wed Jul 14 14:24:45 2021 +0800

    UefiPayloadPkg: Add FV Guid for DXEFV and PLDFV

    Signed-off-by: Zhiguang Liu &lt;zhiguang.liu@intel.com&gt;
    Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
    Reviewed-by: Guo Dong &lt;guo.dong@intel.com&gt;

Basically the coreboot cbfstool reports the following error when creating the CBFS / flash image:
&quot;Not a usable UEFI firmware volume&quot;

Trying to boot coreboot results in an exception and the following error message:
&quot;Payload not loaded&quot;

Link to discussion:
https://edk2.groups.io/g/devel/message/79729</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17036</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 21:43:25 +0000</bug_when>
    <thetext>Zhiguang, please check.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17155</commentid>
    <comment_count>2</comment_count>
    <who name="Sumo">kingsumos</who>
    <bug_when>2021-09-02 14:30:55 +0000</bug_when>
    <thetext>Support must be added in coreboot, se also:
https://review.coreboot.org/c/coreboot/+/57296</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17228</commentid>
    <comment_count>3</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2021-09-08 22:04:18 +0000</bug_when>
    <thetext>
The issue happens because coreboot didn&apos;t support extra FV header before. we already add the support in coreboot side at https://review.coreboot.org/c/coreboot/+/57296. I will close this bugzilla as fixed. If it is wrong, please inform me.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3732</bug_id>
          
          <creation_ts>2021-11-12 02:28:47 +0000</creation_ts>
          <short_desc>Recent change to AhciMode.c Potentially Causes NULL Pointer Access</short_desc>
          <delta_ts>2021-11-26 09:44:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>tabeebe</reporter>
          <assigned_to>gaoliming</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>rebecca</cc>
    
    <cc>tabeebe</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17745</commentid>
    <comment_count>0</comment_count>
    <who name="">tabeebe</who>
    <bug_when>2021-11-12 02:28:47 +0000</bug_when>
    <thetext>Changes made a few days ago to AtaAtapiPassThru/AhciMode.c: https://github.com/tianocore/edk2/commit/c974257821208fc6191779d1ddea918499f165b8

potentially causes a NULL access.

Full path to possible NULL access:
1: https://github.com/tianocore/edk2/blob/4c495e5e3d387b26e1f22d708ff707eee6898c17/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AhciMode.c#L2718
2: https://github.com/tianocore/edk2/blob/4c495e5e3d387b26e1f22d708ff707eee6898c17/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AhciMode.c#L2962
3: https://github.com/tianocore/edk2/blob/4c495e5e3d387b26e1f22d708ff707eee6898c17/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AhciMode.c#L1752
4: https://github.com/tianocore/edk2/blob/4c495e5e3d387b26e1f22d708ff707eee6898c17/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AhciMode.c#L1839
5: https://github.com/tianocore/edk2/blob/4c495e5e3d387b26e1f22d708ff707eee6898c17/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AhciMode.c#L1656
6: https://github.com/tianocore/edk2/blob/4c495e5e3d387b26e1f22d708ff707eee6898c17/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AhciMode.c#L1681
7: https://github.com/tianocore/edk2/blob/4c495e5e3d387b26e1f22d708ff707eee6898c17/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AhciMode.c#L1353
8: https://github.com/tianocore/edk2/blob/4c495e5e3d387b26e1f22d708ff707eee6898c17/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AhciMode.c#L1442
9: https://github.com/tianocore/edk2/blob/4c495e5e3d387b26e1f22d708ff707eee6898c17/MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AhciMode.c#L893


NULL value passed in at 2 will be accessed at 9.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17765</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-15 21:28:21 +0000</bug_when>
    <thetext>Liming will check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17770</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-15 21:57:35 +0000</bug_when>
    <thetext>The patch has been sent. https://edk2.groups.io/g/devel/message/83767</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17800</commentid>
    <comment_count>3</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-11-23 08:27:09 +0000</bug_when>
    <thetext>The SbsaQemu DEBUG build is broken due to this.
I get the following when booting:

SataControllerStart START
InstallProtocolInterface: A1E37052-80D9-4E65-A317-3E9A55C43EC9 100FAD5B9A0
SataControllerStart END status = Success
==AtaAtapiPassThru Start== Controller = FAE7FF18
IDENTIFY DEVICE: [0] = 0000000000000040, [2] = 0000000000000000, [83] =
0000000000007400, [86] = 0000000000003400
port [0] port multitplier [0] has a [harddisk]
Synchronous Exception at 0x00000100FB9F9654
Synchronous Exception at 0x00000100FB9F9654
PC 0x0100FB9F9654 (0x0100FB9F5000+0x00004654) [ 0] AtaAtapiPassThruDxe.dll
PC 0x0100FB9F9654 (0x0100FB9F5000+0x00004654) [ 0] AtaAtapiPassThruDxe.dll
PC 0x0100FB9FA750 (0x0100FB9F5000+0x00005750) [ 0] AtaAtapiPassThruDxe.dll
PC 0x0100FB9FB518 (0x0100FB9F5000+0x00006518) [ 0] AtaAtapiPassThruDxe.dll
PC 0x0100FB9FE9DC (0x0100FB9F5000+0x000099DC) [ 0] AtaAtapiPassThruDxe.dll
PC 0x0100FF8E3FF8 (0x0100FF8DE000+0x00005FF8) [ 1] DxeCore.dll
PC 0x0100F851CAB8 (0x0100F851A000+0x00002AB8) [ 2] UiApp.dll
PC 0x0100F85200BC (0x0100F851A000+0x000060BC) [ 2] UiApp.dll
PC 0x0100F8521084 (0x0100F851A000+0x00007084) [ 2] UiApp.dll
PC 0x0100FF8E5B58 (0x0100FF8DE000+0x00007B58) [ 3] DxeCore.dll
PC 0x0100FBAD6168 (0x0100FBACE000+0x00008168) [ 4] BdsDxe.dll
PC 0x0100FBAD7B6C (0x0100FBACE000+0x00009B6C) [ 4] BdsDxe.dll
PC 0x0100FF8E7A1C (0x0100FF8DE000+0x00009A1C) [ 5] DxeCore.dll
...

If I revert Liming&apos;s commit &quot;AtaAtapiPassThru: Always do S.M.A.R.T. check if device supports&quot; or apply the patch, it prints &quot;Enabled S.M.A.R.T feature at port [0] PortMultiplier [0]!&quot; and continues on.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17828</commentid>
    <comment_count>4</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-11-23 22:41:06 +0000</bug_when>
    <thetext>I&apos;ve confirmed the crash also happens on Platform/SoftIron/Overdrive1000Board.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17841</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 09:44:48 +0000</bug_when>
    <thetext>This has been fixed @4c7ce0d285bc7fd593718fd5dec02e136cbfad8e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3663</bug_id>
          
          <creation_ts>2021-09-28 22:07:05 +0000</creation_ts>
          <short_desc>Errors during compilation will be garbled</short_desc>
          <delta_ts>2021-10-12 21:47:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3664</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Willard Zhang">15319421996</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17408</commentid>
    <comment_count>0</comment_count>
      <attachid>838</attachid>
    <who name="Willard Zhang">15319421996</who>
    <bug_when>2021-09-28 22:07:05 +0000</bug_when>
    <thetext>Created attachment 838
Use Chinese Windows 10 garbled screenshots

c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(151): error C2143: ﷨: ȱ١{(ڡ__cdeclǰ)
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(154): warning C4431: ȱ˵ - ٶΪ intע: C ֧Ĭ int
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(154): warning C4218: ʹ˷Ǳ׼չ: ָһ洢һ
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(200): error C2146: ﷨: ȱ١)(ڱʶResourceTypeǰ)
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(200): error C2061: ﷨: ʶResourceType
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(200): error C2059: ﷨:;
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(200): error C2059: ﷨:,
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(205): error C2059: ﷨:)
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(225): error C2146: ﷨: ȱ١)(ڱʶResourceTypeǰ)
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(225): error C2061: ﷨: ʶResourceType
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(225): error C2059: ﷨:;
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(225): error C2059: ﷨:,
c:\edk2\workspace\MdePkg\Include\Library/HobLib.h(229): error C2059: ﷨:)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17512</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-12 21:47:35 +0000</bug_when>
    <thetext>this one can be closed.

*** This bug has been marked as a duplicate of bug 3664 ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>838</attachid>
            <date>2021-09-28 22:07:05 +0000</date>
            <delta_ts>2021-09-28 22:07:05 +0000</delta_ts>
            <desc>Use Chinese Windows 10 garbled screenshots</desc>
            <filename>Screenshot 2021-09-29 095040.png</filename>
            <type>image/png</type>
            <size>156850</size>
            <attacher name="Willard Zhang">15319421996</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3515</bug_id>
          
          <creation_ts>2021-07-29 12:56:15 +0000</creation_ts>
          <short_desc>SyncPcrAllocationsAndPcrMask should trigger PCR bank reallocation based on BIOS HashLib instances.</short_desc>
          <delta_ts>2023-05-30 18:19:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3487</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</reporter>
          <assigned_to name="Bret Barkelew">bret.barkelew</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>john.mathews</cc>
    
    <cc>miki.demeter</cc>
    
    <cc>sbrukbacher</cc>
    
    <cc>vincent.zimmer</cc>
    
    <cc>wkeown</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16726</commentid>
    <comment_count>0</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-07-29 12:56:15 +0000</bug_when>
    <thetext>The current implementation of SyncPcrAllocationsAndPcrMask() triggers PCR bank reallocation only based on the intersection between TpmActivePcrBanks and PcdTpm2HashMask.

When the software HashLibBaseCryptoRouter solution is used, no PCR bank reallocation is occurring based on the supported hashing algorithms registered by the HashLib instances.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16727</commentid>
    <comment_count>1</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-07-29 12:58:41 +0000</bug_when>
    <thetext>Need to have an additional check for the intersection between the TpmActivePcrBanks and the PcdTcg2HashAlgorithmBitmap populated by the HashLib instances present on the platform&apos;s BIOS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16776</commentid>
    <comment_count>2</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-08-04 12:24:33 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/78382 proposed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16780</commentid>
    <comment_count>3</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-08-04 19:50:06 +0000</bug_when>
    <thetext>The first patch needed additional changes for RegisterHashInterfaceLib to correctly handle registering the HashLib instance supported algorithm bitmap when PcdTpm2HashMask is set to zero.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17633</commentid>
    <comment_count>4</comment_count>
    <who name="Bill Keown">wkeown</who>
    <bug_when>2021-11-01 15:27:50 +0000</bug_when>
    <thetext>Question from Lenovo PSIRT team.  Lenovo is tracking the vulnerabilities reported in Mantis 3515 and 3499.  I was originally told these issues were to be under embargo until October 22nd.  I found Microsoft and the researcher have disclosed at least one of these issues, but understand the weaknesses are rooted in Tianocore.

Can you share an update on when Tianocore plans to disclose these issues, any assigned CVEs, and when the Bugzilla pages will be made public?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17638</commentid>
    <comment_count>5</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-11-02 17:22:56 +0000</bug_when>
    <thetext>bill:

is this the posting you mentioned

https://github.com/google/security-research/blob/master/pocs/bios/tpm-carte-blanche/writeup.md


from researcher?

from ms

https://msrc.microsoft.com/update-guide/en-US/vulnerability/CVE-2021-42299

?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17641</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-11-02 20:42:10 +0000</bug_when>
    <thetext>I am confused. The patch is already sent out publicly.

Should we make this issue also be public?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17678</commentid>
    <comment_count>7</comment_count>
    <who name="Bill Keown">wkeown</who>
    <bug_when>2021-11-03 11:52:21 +0000</bug_when>
    <thetext>These are the links our PSIRT lead saw, and I think that he is waiting for some ACK that this is public.  I can go back to him and explain that patch is public and see if that is all he needs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17882</commentid>
    <comment_count>8</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-12-01 14:27:48 +0000</bug_when>
    <thetext>Infosec mtg 12/1:
Agree with Jiewen that since the patch is already being developed in the open, we should make this BZ public. 

If no objections by next Infosec mtg (January 5, 2022), we will open this BZ then.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18025</commentid>
    <comment_count>9</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-12-17 13:55:17 +0000</bug_when>
    <thetext>Patch v4 submitted https://edk2.groups.io/g/devel/message/85040
Merged 195f0119731dbc4b93b4d485998dac3bbf8629a3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18095</commentid>
    <comment_count>10</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2022-01-05 11:45:56 +0000</bug_when>
    <thetext>Opening this ticket as discussed in Comment 8.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19634</commentid>
    <comment_count>11</comment_count>
    <who name="Bill Keown">wkeown</who>
    <bug_when>2022-09-26 15:37:44 +0000</bug_when>
    <thetext>John, Is this ever going public? Our PSIRT just called it to my attention that it is still private.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19640</commentid>
    <comment_count>12</comment_count>
    <who name="Miki Demeter">miki.demeter</who>
    <bug_when>2022-09-27 12:07:36 +0000</bug_when>
    <thetext>Moving to resolved this was merged Dec 14 PR-SecurityPkg change #2323</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21591</commentid>
    <comment_count>13</comment_count>
    <who name="Steve Brukbacher">sbrukbacher</who>
    <bug_when>2023-05-30 17:09:06 +0000</bug_when>
    <thetext>Does anyone know if this is the CVE that identifies this vulnerability?
https://msrc.microsoft.com/update-guide/en-US/vulnerability/CVE-2021-42299
Working w/ our IBV&apos;s to ensure we have this fixed and wasn&apos;t 100% sure if this is the CVE we should point to.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21592</commentid>
    <comment_count>14</comment_count>
    <who name="Miki Demeter">miki.demeter</who>
    <bug_when>2023-05-30 18:19:51 +0000</bug_when>
    <thetext>I will bring this issue up in the TianoCore Infosec meeting 1 week from tomorrow Wednesday</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3695</bug_id>
          
          <creation_ts>2021-10-18 04:24:01 +0000</creation_ts>
          <short_desc>Support multi PCI root bus</short_desc>
          <delta_ts>2021-12-05 22:26:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17568</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-10-18 04:24:01 +0000</bug_when>
    <thetext>For support multi PCI root bus, it needs to use PciHostBridgeGetRootBridges function to get root bug count. Scan each bus for all the PCI devices.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17569</commentid>
    <comment_count>1</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-10-18 04:24:29 +0000</bug_when>
    <thetext>I will prepare patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17922</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-12-05 22:26:09 +0000</bug_when>
    <thetext>patch is merged</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3499</bug_id>
          <alias>CVE-2021-38576</alias>
          <creation_ts>2021-07-19 11:40:44 +0000</creation_ts>
          <short_desc>Empty TPM Platform Auth</short_desc>
          <delta_ts>2023-10-20 06:51:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chris Fenner">cfenn</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>dick_wilkins</cc>
    
    <cc>jerecox</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kraxel</cc>
    
    <cc>marcandre.lureau</cc>
    
    <cc>miki.demeter</cc>
    
    <cc>stefanb</cc>
    
    <cc>vincent.zimmer</cc>
    
    <cc>wkeown</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16653</commentid>
    <comment_count>0</comment_count>
    <who name="Chris Fenner">cfenn</who>
    <bug_when>2021-07-19 11:40:44 +0000</bug_when>
    <thetext>Hi TianoCore Community,

I originally reported this issue to Microsoft, who asked me to report it to TCG, where Intel investigated, concluded it originates in EDKII source code, and asked me to report it to you. The current disclosure timeline (public disclosure 2021-09-03) is based on original disclosure to Microsoft, but if TianoCore agrees the bug is in TianoCore code, Google&apos;s standard 90-day disclosure timeline applies (https://www.google.com/about/appsecurity/) and a new coordinated public disclosure date of 2021-10-18 would apply.

Summary
A BIOS bug in firmware for a particular PC model leaves the Platform authorization value empty. This can be used to permanently brick the TPM in multiple ways, as well as to non-permanently DoS the system.

Severity
High: an attacker can exploit this bug to impersonate the BIOS to the system and permanently damage or or perform other activities that are assumed to be only possible for BIOS.

Background
BIOS is supposed to use Platform auth (which is initialized to NULL on each TPM reset) to authenticate itself to the TPM. It is supposed to randomize this auth value and throw it away before proceeding with the boot.

How This was Discovered
I observed using TPM2_PolicySecret (tool in https://github.com/chrisfenner/tippitywichit) that Platform auth is still NULL, at least when booted into Linux (and I see no reason why it should be different when booting into Windows)

Code
(email cfenn@google.com for access)
Generic detection tool: https://github.com/chrisfenner/tippitywichit

Exploit Analysis
This is an escalation of privilege to BIOS-level privileges for any software which can access the TPM from the booted OS. BIOS is able to:

* Create undeleteable TPM NV indices (DoS the NV space)
* Access Platform hierarchy objects created by BIOS, including the PK (which is EK like in its privacy implications)
* Clear the TPM
* Change the EPS, breaking the EK forever
* Update TPM firmware</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16692</commentid>
    <comment_count>1</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2021-07-23 09:55:43 +0000</bug_when>
    <thetext>FYI. The TCG Vulnerability Response Team (VRT) sent out an alert to the silicon vendor whose platforms were effected by this bug (VRT 0006) back in early July. This was filtered on to IFVs effected. I believe it is likely that most, if not all firmware vendors, have probably fixed the problem in their versions of the Tianocore code. I believe someone just needs to get the fix back into the main Tianocore tree.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16713</commentid>
    <comment_count>2</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2021-07-28 11:08:43 +0000</bug_when>
    <thetext>*** Bug 3510 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16715</commentid>
    <comment_count>3</comment_count>
    <who name="Stefan Berger">stefanb</who>
    <bug_when>2021-07-28 13:24:00 +0000</bug_when>
    <thetext>FYI: To test this using either the IBM (package tss2) or Intel TSS stack (package ) and tools on Linux, neither one of the following commands should succeed:

IBM:
tsshierarchychangeauth -hi p -pwdn newpass

Intel:
tpm2_changeauth -c platform newpass

Each one has to report (upon first try!) an error message that the password cannot be changed. &quot;... authorization failure without DA implications&quot; would be the expected error message reported by either one of them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16717</commentid>
    <comment_count>4</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2021-07-28 14:34:43 +0000</bug_when>
    <thetext>A little history... I think Intel added this to their MinPlatform package in 2019:
https://github.com/tianocore/edk2-platforms/commit/b4346451f925272a2af040871241d2ecdead8275#diff-285181cf62c12cc66be543d719a8e03ca4d1e655d71e24d63ac39c5c4d80485a

And just a couple weeks ago we added a PCD to allow platform choice between randomize or disable of the platform hierarchy:
https://github.com/tianocore/edk2-platforms/commit/bfabeef4c9a63374784bd19f18a869aa2769e011#diff-54e790c1842e2a5e0111fe8a1e1c56d8127e5aa296a127902e980213638955ce

I want everyone to benefit from this, so moving to EDK2 proper sounds great, but there is a question of &quot;when&quot; in the boot timeline this can safely execute (and know that the &quot;platform&quot; no longer needs platform auth).  End of End of DXE?  Ready to Boot?  Platform auth may be necessary to fulfill TPM Physical Presence requests, but may not be available once the UX is drawn.  Perhaps we have a flag and process the request on the boot following the PPI request approval, before this code runs to close platform hierarchy.  Food for thought.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16718</commentid>
    <comment_count>5</comment_count>
    <who name="Stefan Berger">stefanb</who>
    <bug_when>2021-07-28 15:09:59 +0000</bug_when>
    <thetext>(In reply to Jeremiah Cox from comment #4)

&gt; I want everyone to benefit from this, so moving to EDK2 proper sounds great,
&gt; but there is a question of &quot;when&quot; in the boot timeline this can safely
&gt; execute (and know that the &quot;platform&quot; no longer needs platform auth).  End
&gt; of End of DXE?  Ready to Boot?  Platform auth may be necessary to fulfill
&gt; TPM Physical Presence requests, but may not be available once the UX is
&gt; drawn.  Perhaps we have a flag and process the request on the boot following
&gt; the PPI request approval, before this code runs to close platform hierarchy.
&gt; Food for thought.

Right... I think PPI gets treated really early and the command could be issued after it. The TCG TPM 2 menu seems to not run commands immediately but also go through PPI to issue those commands after a reboot. What comes after PPI TPM 2 command-wise? A bunch of PCR extends and that&apos;s &apos;it&apos;?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16778</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-08-04 14:43:34 +0000</bug_when>
    <thetext>In the sample platform, PlatformAuth is cleared at ReadyToLock event. (https://github.com/tianocore/edk2-platforms/blob/master/Platform/Intel/MinPlatformPkg/Tcg/Tcg2PlatformDxe/Tcg2PlatformDxe.c)

PPI is issued at PciEnumComplete event. (https://github.com/tianocore/edk2-platforms/blob/master/Platform/Intel/BoardModulePkg/Library/BoardBdsHookLib/BoardBdsHookLib.c)

The PlatformAuth clear is a platform behavior. Different platform may use different policy.

Would you please clarify on which platform you find this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16782</commentid>
    <comment_count>7</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2021-08-04 21:19:15 +0000</bug_when>
    <thetext>I believe this was found on platforms with AMD CPUs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16790</commentid>
    <comment_count>8</comment_count>
    <who name="Stefan Berger">stefanb</who>
    <bug_when>2021-08-05 07:37:08 +0000</bug_when>
    <thetext>(In reply to jiewen.yao from comment #6)

&gt; 
&gt; Would you please clarify on which platform you find this issue?

OVMF for x86 and ARM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16791</commentid>
    <comment_count>9</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-08-05 08:26:49 +0000</bug_when>
    <thetext>According to https://github.com/tianocore/edk2/blob/master/Maintainers.txt,

OvmfPkg: TCG- and TPM2-related modules
F: OvmfPkg/Include/IndustryStandard/QemuTpm.h
F: OvmfPkg/Library/PlatformBootManagerLib/BdsPlatform.c
F: OvmfPkg/Library/Tcg2PhysicalPresenceLib*/
F: OvmfPkg/PlatformPei/ClearCache.c
F: OvmfPkg/Tcg/
R: Marc-André Lureau &lt;marcandre.lureau@redhat.com&gt;
R: Stefan Berger &lt;stefanb@linux.ibm.com&gt;

Stefan or Marc-Andre, can you provide a patch for OVMF?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16811</commentid>
    <comment_count>10</comment_count>
    <who name="Stefan Berger">stefanb</who>
    <bug_when>2021-08-05 12:29:58 +0000</bug_when>
    <thetext>jiewen.yao@intel.com 

I previously asked the question on the mailing list. Is the code from edk2-platforms intended to be copied over to edk2?

https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/MinPlatformPkg/Tcg/Library/PeiDxeTpmPlatformHierarchyLib

If yes, where do I copy it to? With this code being around, is this the only right approach to re-use this code or should we come up with something simpler for OVMF?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17252</commentid>
    <comment_count>11</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-09-13 12:57:47 +0000</bug_when>
    <thetext>Sample code in SecurityPkg: TcgPlatformDxe/Pei.

PR - https://github.com/tianocore/edk2/pull/1968
Git Hash: 3b69fcf5f849021aa3bc810f8100ea71c03019e5..610d8073f29f30aa2f9dd58fe9d59e0dc979d085</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17254</commentid>
    <comment_count>12</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-09-13 12:59:57 +0000</bug_when>
    <thetext>OvmfPkg update will be in next wave.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17445</commentid>
    <comment_count>13</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-10-06 12:25:08 +0000</bug_when>
    <thetext>Suggestion for CVSS scoring (8.2 high):
https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:L/AC:L/PR:H/UI:N/S:C/C:H/I:H/A:H

For the CVE description, suggest &quot;Platform authorization value left empty&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17634</commentid>
    <comment_count>14</comment_count>
    <who name="Bill Keown">wkeown</who>
    <bug_when>2021-11-01 15:28:14 +0000</bug_when>
    <thetext>Question from Lenovo PSIRT team.  Lenovo is tracking the vulnerabilities reported in Mantis 3515 and 3499.  I was originally told these issues were to be under embargo until October 22nd.  I found Microsoft and the researcher have disclosed at least one of these issues, but understand the weaknesses are rooted in Tianocore.

Can you share an update on when Tianocore plans to disclose these issues, any assigned CVEs, and when the Bugzilla pages will be made public?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17637</commentid>
    <comment_count>15</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-11-02 17:21:16 +0000</bug_when>
    <thetext>Bill:

Is https://github.com/google/security-research/blob/master/pocs/bios/tpm-carte-blanche/writeup.md the issue posting you were mentioning?  

Vincent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17681</commentid>
    <comment_count>16</comment_count>
    <who name="Chris Fenner">cfenn</who>
    <bug_when>2021-11-03 11:59:59 +0000</bug_when>
    <thetext>I&apos;m not sure where October 22nd came from as a date, our final disclosure date has been October 18th for quite some time.

The other issue (#3515) was disclosed publicly on October 18th:
https://msrc.microsoft.com/update-guide/vulnerability/CVE-2021-42299
https://github.com/google/security-research/blob/master/pocs/bios/tpm-carte-blanche/writeup.md

The tools (i.e., https://github.com/google/security-research/tree/master/pocs/bios/tpm-carte-blanche/cmd/bugtool) that we released that detect that issue also detect this one. However, we don&apos;t have a writeup.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17881</commentid>
    <comment_count>17</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-12-01 14:24:23 +0000</bug_when>
    <thetext>Infosec 12/1:
Kevin will get a CVE for this. Our disclosure will reference the existing platform implementation as the solution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18073</commentid>
    <comment_count>18</comment_count>
      <attachid>909</attachid>
    <who name="">kevinj</who>
    <bug_when>2022-01-04 18:44:21 +0000</bug_when>
    <thetext>Created attachment 909
.json file

.json file has been created for this bug. It has been submitted to MITRE and populated under CVE-2021-38576.

https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-38576</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21101</commentid>
    <comment_count>19</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2023-02-22 08:48:10 +0000</bug_when>
    <thetext>What is the status here?  Tcg2PlatformPei + Tcg2PlatformDxe have been added to edk2, OVMF has been updated to use them, all in 2021.  Are there any outstanding TODO items or can we set this to RESOLVED?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21104</commentid>
    <comment_count>20</comment_count>
    <who name="Stefan Berger">stefanb</who>
    <bug_when>2023-02-22 10:43:15 +0000</bug_when>
    <thetext>(In reply to Gerd Hoffmann from comment #19)
&gt; What is the status here?  Tcg2PlatformPei + Tcg2PlatformDxe have been added
&gt; to edk2, OVMF has been updated to use them, all in 2021.  Are there any
&gt; outstanding TODO items or can we set this to RESOLVED?

I think this bug can be closed/set to RESOLVED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21107</commentid>
    <comment_count>21</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2023-02-23 00:07:33 +0000</bug_when>
    <thetext>&gt; I think this bug can be closed/set to RESOLVED.

Good, setting to RESOLVED/FIXED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21169</commentid>
    <comment_count>22</comment_count>
    <who name="Bill Keown">wkeown</who>
    <bug_when>2023-03-09 16:14:24 +0000</bug_when>
    <thetext>Concern from Lenovo&apos;s PSIRT team is that to obtain the details on the vulnerability, the CVE has link to the bugzilla report which has restricted access.  Per the CVE rules, if a link is used as a CVE reference, it may be behind a login prompt, but have no other restrictions.  In this case, you must be part of EDK Infosec team or other authorized group to gain access.  If there is another authoritative link that has details about the issue, such as a Tianocore advisory, that could also serve as a reference link.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21170</commentid>
    <comment_count>23</comment_count>
    <who name="Miki Demeter">miki.demeter</who>
    <bug_when>2023-03-09 16:24:02 +0000</bug_when>
    <thetext>This is now set to public.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22026</commentid>
    <comment_count>24</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2023-10-20 06:51:32 +0000</bug_when>
    <thetext>The ovmf pr is at https://github.com/tianocore/edk2/pull/2034</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>909</attachid>
            <date>2022-01-04 18:44:21 +0000</date>
            <delta_ts>2022-01-04 18:44:21 +0000</delta_ts>
            <desc>.json file</desc>
            <filename>3499.json</filename>
            <type>application/json</type>
            <size>2070</size>
            <attacher>kevinj</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3082</bug_id>
          
          <creation_ts>2020-11-20 01:23:09 +0000</creation_ts>
          <short_desc>[SCT] RecordAssertion function parameter issue.</short_desc>
          <delta_ts>2021-09-20 11:20:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Arvin Chen">arvin.chen</reporter>
          <assigned_to name="Edhay">edhaya.chandran</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaojie</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14384</commentid>
    <comment_count>0</comment_count>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-11-20 01:23:09 +0000</bug_when>
    <thetext>Verification team often reports that SCT tool will hang up during operation, and I have find that some of this problems are due to the &quot;RecordAssertion&quot; function do not give the correct argument so I will try to find them out and fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14394</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-21 11:19:30 +0000</bug_when>
    <thetext>Hello Arvin,

I have appended a patch in

https://bugzilla.tianocore.org/show_bug.cgi?id=3086

for those RecordAssertion() problems occurring when testing OpenEx().

Which other tests did find that fail?

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14408</commentid>
    <comment_count>2</comment_count>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-11-23 23:50:42 +0000</bug_when>
    <thetext>(In reply to Heinrich Schuchardt from comment #1)
&gt; Hello Arvin,
&gt; 
&gt; I have appended a patch in
&gt; 
&gt; https://bugzilla.tianocore.org/show_bug.cgi?id=3086
&gt; 
&gt; for those RecordAssertion() problems occurring when testing OpenEx().
&gt; 
&gt; Which other tests did find that fail?
&gt; 
&gt; Best regards
&gt; 
&gt; Heinrich

Hi Heinrich~ 

   Yes, I have make a tool to find all kind of this issue :) and it find a lot :(, please reference my attach patch~

Thanks!
Arvin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14409</commentid>
    <comment_count>3</comment_count>
      <attachid>602</attachid>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2020-11-23 23:53:00 +0000</bug_when>
    <thetext>Created attachment 602
The patch set 1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14548</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-10 03:32:41 +0000</bug_when>
    <thetext>New patch version:

[PATCH] [edk2-devel] RecordAssertion function parameter issue.
https://edk2.groups.io/g/devel/message/68636</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15972</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-10 06:52:46 +0000</bug_when>
    <thetext>Could one of the maintainers, please, review Arvin&apos;s patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17142</commentid>
    <comment_count>6</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-02 10:34:45 +0000</bug_when>
    <thetext>Patch submitted. To be reviewed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17291</commentid>
    <comment_count>7</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-09-17 00:03:13 +0000</bug_when>
    <thetext>Patch reviewed:

Reviewed-by: Barton Gao &lt;gaojie@byosoft.com.cn&gt;
https://edk2.groups.io/g/devel/message/80695

Please, consider for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17314</commentid>
    <comment_count>8</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-20 11:20:03 +0000</bug_when>
    <thetext>The patch is upstreamed through the commit:
 https://github.com/tianocore/edk2-test/commit/92a0343c1553342c53fae9d9d646b763add232c0</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>602</attachid>
            <date>2020-11-23 23:53:00 +0000</date>
            <delta_ts>2020-11-23 23:53:00 +0000</delta_ts>
            <desc>The patch set 1</desc>
            <filename>0001-edk2-devel-RecordAssertion-function-parameter-issue.patch</filename>
            <type>text/plain</type>
            <size>50173</size>
            <attacher name="Arvin Chen">arvin.chen</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3104</bug_id>
          
          <creation_ts>2020-12-03 21:26:11 +0000</creation_ts>
          <short_desc>Define default value of NETWORK_HTTP_ENABLE</short_desc>
          <delta_ts>2020-12-08 02:45:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14478</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-03 21:26:11 +0000</bug_when>
    <thetext>Set default value of NETWORK_HTTP_ENABLE to FALSE for EmulatorPkg.
This incorporates with commit 126115a9,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14501</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-08 02:45:44 +0000</bug_when>
    <thetext>Fixed at 4b69fab6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3064</bug_id>
          
          <creation_ts>2020-11-09 03:18:07 +0000</creation_ts>
          <short_desc>X64 OVMF_CODE.fd with -DSMM_REQUIRE=TRUE -DSECURE_BOOT_ENABLE=TRUE does not show startup screen</short_desc>
          <delta_ts>2020-11-10 16:36:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          <see_also>http://bugs.debian.org/973783</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ryutaroh Matsumoto">ryutaroh2006</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ryutaroh2006</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14280</commentid>
    <comment_count>0</comment_count>
    <who name="Ryutaroh Matsumoto">ryutaroh2006</who>
    <bug_when>2020-11-09 03:18:07 +0000</bug_when>
    <thetext>Downstream bug report at
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=973783

I compiled OVMF_CODE.fd with b = master edk2-stable202008 edk2-stable202005 by
the following shell script:

#!/bin/sh

#branch=HEAD
if [ -z &quot;${branch}&quot; ]; then
    branch=$1
fi

if [ ! -d edk2-${branch} ]; then
    git clone -b ${branch} --recursive https://github.com/tianocore/edk2.git
    mv edk2 edk2-${branch}
    chmod -R a-w edk2-${branch}
fi

for i in X64 IA32; do
    cp -Rp edk2-${branch} edk2-${branch}-$i
    chmod -R u+w edk2-${branch}-$i
    cd edk2-${branch}-$i
    OvmfPkg/build.sh -DFD_SIZE_4MB -DSECURE_BOOT_ENABLE=TRUE -DSMM_REQUIRE=TRUE -a $i
    cd ..
done

For the latest github source and edk2-stable202008 edk2-stable202005
releases,

qemu-system-i386 -enable-kvm -cpu max -machine q35,smm=on,accel=kvm -global driver=cfi.pflash01,property=secure,value=on -m 1024 -drive if=pflash,format=raw,read-only,file=OVMF_CODE.fd -drive if=pflash,format=raw,file=OVMF_VARS.fd

starts the IA32 version of OVMF fine, but

qemu-system-x86_64 -enable-kvm -cpu max -machine q35,smm=on,accel=kvm -global driver=cfi.pflash01,property=secure,value=on -m 1024 -drive if=pflash,format=raw,read-only,file=OVMF_CODE.fd -drive if=pflash,format=raw,file=OVMF_VARS.fd

does not start X64 version of OVMF. The latter does not show any screen output.

THe compiling environment is Debian testing.
$ gcc --version
gcc (Debian 10.2.0-15) 10.2.0
$ qemu-system-x86_64 --version
QEMU emulator version 5.1.0 (Debian 1:5.1+dfsg-4+b1)

Actually, IA32 version of OVMF_CODE.fd can boot Debian in secure boot,
and Debian Linux kernel runs in &quot;locked down&quot; mode.

I wonder why X64 version of OVMF fails with -DSECURE_BOOT_ENABLE=TRUE -DSMM_REQUIRE=TRUE ...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14284</commentid>
    <comment_count>1</comment_count>
    <who name="Ryutaroh Matsumoto">ryutaroh2006</who>
    <bug_when>2020-11-09 19:07:16 +0000</bug_when>
    <thetext>I reproduced exactly the same symptom on freshly installed Fedora 33 Workstation.
This is not a distro-specific issue.
I hope this will be fixed before the next stable release.

On the other hand, Fedora 33&apos;s /usr/share/OVMF/OVMF_CODE.secboot.fd
does not have such a symptom.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14301</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-10 09:43:55 +0000</bug_when>
    <thetext>(1) Please add the following options to your qemu-system-x86_64 command line:

  -debugcon file:debug.log -global isa-debugcon.iobase=0x402

and attach &quot;debug.log&quot; to this BZ (compressed, please).

(2) In addition to (1), please append the following to the QEMU command line as well, and retry:

  -global ICH9-LPC.disable_s3=1

Please refer to commit 5133d1f1d297 (&quot;OvmfPkg: replace README fine print about X64 SMM S3 with PlatformPei check&quot;, 2015-11-30).

Brief summary: if you want S3 resume with SMM, then your PEI phase needs to be 32-bit (you need the IA32X64 build of OVMF -- &quot;OvmfPkg/OvmfPkgIa32X64.dsc&quot; -- if you want your DXE phase to be 64-bit). If you don&apos;t care about S3 resume, then you can use the purely 64-bit build of OVMF even with SMM enabled (like you are building X64 now), but then you need to explicitly disable S3 support on the QEMU command line (see option (2)) above.

The options under (1) should help us confirm by capturing the firmware debug log.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14306</commentid>
    <comment_count>3</comment_count>
      <attachid>597</attachid>
    <who name="Ryutaroh Matsumoto">ryutaroh2006</who>
    <bug_when>2020-11-10 15:57:57 +0000</bug_when>
    <thetext>Created attachment 597
Debug logs as requested

The debug logs as requested by the comment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14307</commentid>
    <comment_count>4</comment_count>
    <who name="Ryutaroh Matsumoto">ryutaroh2006</who>
    <bug_when>2020-11-10 16:02:08 +0000</bug_when>
    <thetext>Thank you very much for your comment. The debug logs are attached at
https://bugzilla.tianocore.org/attachment.cgi?id=597

As you said,
* Disabling S3 allowed me to boot.
* Rebuild with -a X64 -a IA32 also allowed me to boot.
I attach those logs also.

I was unable to see the necessity of disabling S3 for the secure boot,
by reading
https://github.com/tianocore/edk2/blob/master/OvmfPkg/README

I would appreciate it if this necessity is made clearer.

Should we consider this as a packaging issue of a specific distro?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14308</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-10 16:36:06 +0000</bug_when>
    <thetext>(In reply to Ryutaroh Matsumoto from comment #4)
&gt;| I was unable to see the necessity of disabling S3 for the secure
&gt;| boot, by reading
&gt;| https://github.com/tianocore/edk2/blob/master/OvmfPkg/README
&gt;|
&gt;| I would appreciate it if this necessity is made clearer.

The &quot;OvmfPkg/README&quot; file explains how the firmware debug log can be
captured, which is a generic instruction for all kinds of boot failures
and hangs. It can be found in section &quot;RUNNING OVMF on QEMU&quot;:

&gt;| * Capturing OVMF debug messages on qemu:
&gt;|   - The default OVMF build writes debug messages to IO port 0x402.  The
&gt;|     following qemu command line options save them in the file called
&gt;|     debug.log: &apos;-debugcon file:debug.log -global isa-debugcon.iobase=0x402&apos;.

Once you capture the debug log, you see

&gt;| S3Verification: S3Resume2Pei doesn&apos;t support X64 PEI + SMM yet.
&gt;| S3Verification: Please disable S3 on the QEMU command line (see the README),
&gt;| S3Verification: or build OVMF with &quot;OvmfPkgIa32X64.dsc&quot;.

This message gives you two options, build OVMF for IA32X64, or disable
S3. The former option needs no further explanation. The latter option
(disable S3) is explained in the &quot;OvmfPkg/README&quot; file, under the &quot;SMM
support&quot; section:

&gt;| * In order to disable S3, add:
&gt;|
&gt;|   -global ICH9-LPC.disable_s3=1 \

(In reply to Ryutaroh Matsumoto from comment #4)
&gt;| Should we consider this as a packaging issue of a specific distro?

Certainly. If a distro wishes to include such an SMM_REQUIRE build of
OVMF that can boot 64-bit OS-es, then the distro should select IA32X64
for that build, at this time.

Another approach could be to modify QEMU in the distro, changing the
default value of &quot;ICH9-LPC.disable_s3&quot;, from 0 to 1.

I&apos;m closing this ticket now. Thanks!</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>597</attachid>
            <date>2020-11-10 15:57:57 +0000</date>
            <delta_ts>2020-11-10 15:57:57 +0000</delta_ts>
            <desc>Debug logs as requested</desc>
            <filename>debug-log.tar.xz</filename>
            <type>application/octet-stream</type>
            <size>22296</size>
            <attacher name="Ryutaroh Matsumoto">ryutaroh2006</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3373</bug_id>
          
          <creation_ts>2021-05-03 17:34:36 +0000</creation_ts>
          <short_desc>Missing comma in initialization of mExceptionNameStr[]</short_desc>
          <delta_ts>2021-05-14 07:28:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2198</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Allen_Wynn@Dell.com">Allen_Wynn</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>thomas.lendacky</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15891</commentid>
    <comment_count>0</comment_count>
    <who name="Allen_Wynn@Dell.com">Allen_Wynn</who>
    <bug_when>2021-05-03 17:34:36 +0000</bug_when>
    <thetext>mExceptionNameStr[] is missing a comma in the initialization strings for  &quot;#CP - Control Protection&quot;.
&quot;#CP - Control protection&quot; was the last initialization string in the structure until this SHA: 
  * SHA-1: 5277540e37e88a1a69f9517c4ad895051b4b3ed3
  * UefiCpuPkg/CpuExceptionHandler: Add base support for the #VC exception

when additional strings were added.  Unfortunately, a comma was not placed at the end of &quot;#CP - Control Protection&quot;, so the string for exception 21 &quot;#CP - Control Protection&quot; gets concatenated with the following &quot;Reserved&quot; (&quot;#CP - Control ProtectionReserved&quot;).
This also makes &quot;#VC - VMM Communication&quot; index 28 instead of 29.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15892</commentid>
    <comment_count>1</comment_count>
      <attachid>715</attachid>
    <who name="Allen_Wynn@Dell.com">Allen_Wynn</who>
    <bug_when>2021-05-03 17:45:23 +0000</bug_when>
    <thetext>Created attachment 715
Mailing List Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15900</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-04 15:22:21 +0000</bug_when>
    <thetext>Hello Allen,

(CC&apos;ing Tom)

this is indeed a regression from commit 5277540e37e8 (&quot;UefiCpuPkg/CpuExceptionHandler: Add base support for the #VC exception&quot;, 2020-08-17), as far as I can see.

Can you please post the patch to the mailing list for review?

Or would you prefer if Tom sent a fix?

The official development process documentation is at:

https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process

An unofficial article with a few more hints is at:

https://github.com/tianocore/tianocore.github.io/wiki/Laszlo&apos;s-unkempt-git-guide-for-edk2-contributors-and-maintainers

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15901</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-04 15:24:15 +0000</bug_when>
    <thetext>(Assigning to Allen, for my question in comment 2.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15906</commentid>
    <comment_count>4</comment_count>
    <who name="Allen_Wynn@Dell.com">Allen_Wynn</who>
    <bug_when>2021-05-04 16:42:09 +0000</bug_when>
    <thetext>Hi Laszlo,  I&apos;ve never posted a patch to the mailing list for review, but I&apos;d like to learn how.  This seems like a nice, simple candidate to do so.  Thanks for the links, I&apos;ll try to get it out in the next day or so.

Thanks!
Allen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15996</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-11 13:57:50 +0000</bug_when>
    <thetext>Hello Allen,

sorry about the ping -- do you still intend to post the patch, or should we reassign the BZ? I&apos;m asking because getting the fix into the next(i.e., &quot;edk2-stable202105&quot;) release would be great. This is a bugfix, and so the Hard Feature Freeze applies as deadline -- 2021-May-24.

https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15997</commentid>
    <comment_count>6</comment_count>
    <who name="Allen_Wynn@Dell.com">Allen_Wynn</who>
    <bug_when>2021-05-11 14:01:21 +0000</bug_when>
    <thetext>Given the deadline and my inexperience, it&apos;s probably best to reassign to reduce risk of missing the next release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16056</commentid>
    <comment_count>7</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-05-13 11:30:16 +0000</bug_when>
    <thetext>v1:
  https://edk2.groups.io/g/devel/message/75097
  https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00413.html
  msgid: &lt;40e55bf6563ed8ea4962a1219efbe1ab77a56cc4.1620919615.git.thomas.lendacky@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16064</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-14 07:28:31 +0000</bug_when>
    <thetext>Merged as commit 32928415e36b, via &lt;https://github.com/tianocore/edk2/pull/1644&gt;.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>715</attachid>
            <date>2021-05-03 17:45:23 +0000</date>
            <delta_ts>2021-05-03 17:45:23 +0000</delta_ts>
            <desc>Mailing List Patch</desc>
            <filename>0001-UefiCpuPkg-Fix-missing-comma-in-initialization-of-mE.patch</filename>
            <type>text/plain</type>
            <size>1655</size>
            <attacher name="Allen_Wynn@Dell.com">Allen_Wynn</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3869</bug_id>
          
          <creation_ts>2022-03-16 12:43:23 +0000</creation_ts>
          <short_desc>Split pages should have their RW and Present Attributes Set</short_desc>
          <delta_ts>2024-04-24 12:09:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>tabeebe</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>ray.ni</cc>
    
    <cc>tabeebe</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
    
    <cf_package>FatPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18634</commentid>
    <comment_count>0</comment_count>
    <who name="">tabeebe</who>
    <bug_when>2022-03-16 12:43:23 +0000</bug_when>
    <thetext>A memory range can be submitted for attribute changes which is large enough to not require a page split during the attribute update. Consider the following scenario:

1. An attribute update removed the RW attribute on a range large enough to not require a page split.
2. Later, an attributes update is called to re-add the RW attribute for a subsection of that larger page which requires a split
3. The attribute update logic performs a page split, so now the parent and child pages have matching attributes
4. Then, the attribute update logic changes the child page to have the RW attribute.
5. The child page would then correctly have the RW attribute added but the parent page would still have the RW attribute removed which will cause an improper access violation.

I think we should &quot;loosen&quot; the attributes of a page being split to accommodate the above case. The split page should always have the attributes set so the lowest level page frame determines the access rights as detailed in 4.10.2.2 of the Intel 64 and IA-32 Architectures Software Developer’s Manual. Setting the User/Supervisor attribute shouldn&apos;t be necessary.

Here&apos;s example code: https://github.com/microsoft/mu_basecore/commit/62b80c4b6230f5caedab4c5b3f2358caf4fa1d88

This is related to Jiewen&apos;s memory attribute protocol: https://github.com/jyao1/edk2/commit/f9be3a62b51139e4bd816b1dd8e57f758a77fe75</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18639</commentid>
    <comment_count>1</comment_count>
    <who name="">tabeebe</who>
    <bug_when>2022-03-17 19:31:52 +0000</bug_when>
    <thetext>The other code link may be restricted. Here&apos;s one on my github:
https://github.com/TaylorBeebe/mu_basecore/commit/c24dab4c19c839662cd4f2010121dd0e83bd7155</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18677</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 21:47:11 +0000</bug_when>
    <thetext>Jiewen and Ray: can you help review this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18691</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2022-03-22 22:04:28 +0000</bug_when>
    <thetext>(In reply to tabeebe from comment #0)
&gt; A memory range can be submitted for attribute changes which is large enough
&gt; to not require a page split during the attribute update. Consider the
&gt; following scenario:
&gt; 
&gt; 1. An attribute update removed the RW attribute on a range large enough to
&gt; not require a page split.
&gt; 2. Later, an attributes update is called to re-add the RW attribute for a
&gt; subsection of that larger page which requires a split
&gt; 3. The attribute update logic performs a page split, so now the parent and
&gt; child pages have matching attributes
&gt; 4. Then, the attribute update logic changes the child page to have the RW
&gt; attribute.
&gt; 5. The child page would then correctly have the RW attribute added but the
&gt; parent page would still have the RW attribute removed which will cause an
&gt; improper access violation.
&gt; 
&gt; I think we should &quot;loosen&quot; the attributes of a page being split to
&gt; accommodate the above case. The split page should always have the attributes
&gt; set so the lowest level page frame determines the access rights as detailed
&gt; in 4.10.2.2 of the Intel 64 and IA-32 Architectures Software Developer’s
&gt; Manual. Setting the User/Supervisor attribute shouldn&apos;t be necessary.
&gt; 
&gt; Here&apos;s example code:
&gt; https://github.com/microsoft/mu_basecore/commit/
&gt; 62b80c4b6230f5caedab4c5b3f2358caf4fa1d88
&gt; 
&gt; This is related to Jiewen&apos;s memory attribute protocol:
&gt; https://github.com/jyao1/edk2/commit/f9be3a62b51139e4bd816b1dd8e57f758a77fe75

I can acces mu_basecore. I left comments there. Overall the change is good to me. Can you please work on the edk2 formal patch?

By the way, if you are interested, can you take a look at 

https://github.com/niruiyu/edk2/blob/open_pagetable/UefiCpuPkg/Library/CpuPageTableLib which I am planning to upstream in near future.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19082</commentid>
    <comment_count>4</comment_count>
    <who name="">tabeebe</who>
    <bug_when>2022-06-15 17:28:43 +0000</bug_when>
    <thetext>(In reply to Ray Ni from comment #3)
&gt; (In reply to tabeebe from comment #0)
&gt; &gt; A memory range can be submitted for attribute changes which is large enough
&gt; &gt; to not require a page split during the attribute update. Consider the
&gt; &gt; following scenario:
&gt; &gt; 
&gt; &gt; 1. An attribute update removed the RW attribute on a range large enough to
&gt; &gt; not require a page split.
&gt; &gt; 2. Later, an attributes update is called to re-add the RW attribute for a
&gt; &gt; subsection of that larger page which requires a split
&gt; &gt; 3. The attribute update logic performs a page split, so now the parent and
&gt; &gt; child pages have matching attributes
&gt; &gt; 4. Then, the attribute update logic changes the child page to have the RW
&gt; &gt; attribute.
&gt; &gt; 5. The child page would then correctly have the RW attribute added but the
&gt; &gt; parent page would still have the RW attribute removed which will cause an
&gt; &gt; improper access violation.
&gt; &gt; 
&gt; &gt; I think we should &quot;loosen&quot; the attributes of a page being split to
&gt; &gt; accommodate the above case. The split page should always have the attributes
&gt; &gt; set so the lowest level page frame determines the access rights as detailed
&gt; &gt; in 4.10.2.2 of the Intel 64 and IA-32 Architectures Software Developer’s
&gt; &gt; Manual. Setting the User/Supervisor attribute shouldn&apos;t be necessary.
&gt; &gt; 
&gt; &gt; Here&apos;s example code:
&gt; &gt; https://github.com/microsoft/mu_basecore/commit/
&gt; &gt; 62b80c4b6230f5caedab4c5b3f2358caf4fa1d88
&gt; &gt; 
&gt; &gt; This is related to Jiewen&apos;s memory attribute protocol:
&gt; &gt; https://github.com/jyao1/edk2/commit/f9be3a62b51139e4bd816b1dd8e57f758a77fe75
&gt; 
&gt; I can acces mu_basecore. I left comments there. Overall the change is good
&gt; to me. Can you please work on the edk2 formal patch?
&gt; 
&gt; By the way, if you are interested, can you take a look at 
&gt; 
&gt; https://github.com/niruiyu/edk2/blob/open_pagetable/UefiCpuPkg/Library/
&gt; CpuPageTableLib which I am planning to upstream in near future.

Sent out the patch series</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22949</commentid>
    <comment_count>5</comment_count>
    <who name="">tabeebe</who>
    <bug_when>2024-04-24 12:09:31 +0000</bug_when>
    <thetext>The fix has been committed: https://github.com/tianocore/edk2/commit/4bfd668e5edb59092a8e16414b3f6632efdac4f2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3249</bug_id>
          
          <creation_ts>2021-03-08 22:01:00 +0000</creation_ts>
          <short_desc>Add TdxLib support for Intel TDX</short_desc>
          <delta_ts>2023-02-02 00:58:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="mxu9">min.m.xu</reporter>
          <assigned_to name="mxu9">min.m.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15241</commentid>
    <comment_count>0</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-03-08 22:01:00 +0000</bug_when>
    <thetext>Intel&apos;s Trust Domain Extensions (Intel TDX) refers to an Intel technology
that extends Virtual Machines Extensions (VMX) and Multi-Key Total Memory
Encryption (MKTME) with a new kind of virutal machines guest called a 
Trust Domain (TD). A TD is desinged to run in a CPU mode that protects the
confidentiality of TD memory contents and the TD&apos;s CPU state from other
software, including the hosting Virtual-Machine Monitor (VMM), unless
explicitly shared by the TD itself.

The Intel TDX module uses the instruction-set architecture for Intel TDX
and the MKTME engine in the SOC to help serve as an intermediary between
the host VMM and the guest TD. TDCALL is the instruction which allows TD
guest privileged software to make a call for service into an underlying
TDX-module.

TdxLib is created with functions to perform the related Tdx operation.
This includes functions for:
  - TdCall         : to cause a VM exit to the Intel TDX module
  - TdVmCall       : it is a leaf function 0 for TDCALL
  - TdVmCallCpuid  : enable the TD guest to request VMM to emulate CPUID
  - TdReport       : to retrieve TDREPORT_STRUCT
  - TdAcceptPages  : to accept pending private pages
  - TdExtendRtmr   : to extend one of the RTMR registers</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15242</commentid>
    <comment_count>1</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-03-08 22:04:15 +0000</bug_when>
    <thetext>This BZ is confirmed and going to submit patch review to the community.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15248</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-09 08:10:15 +0000</bug_when>
    <thetext>Setting IN_PROGRESS status due to patches having been sent to the list:

* [edk2-devel] [PATCH 0/3] Add TdxLib support for Intel TDX
  message-id: &lt;cover.1615249174.git.min.m.xu@intel.com&gt;
  https://edk2.groups.io/g/devel/message/72547
  https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00293.html

* [edk2-devel] [PATCH V2 0/3] Add TdxLib support for Intel TDX
  message-id: &lt;cover.1615257614.git.min.m.xu@intel.com&gt;
  https://edk2.groups.io/g/devel/message/72558
  https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00304.html

* [edk2-devel] [PATCH V3 0/3] Add TdxLib support for Intel TDX
  message-id: &lt;cover.1615269637.git.min.m.xu@intel.com&gt;
  https://edk2.groups.io/g/devel/message/72565
  https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00311.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15272</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-10 14:00:40 +0000</bug_when>
    <thetext>Related:

* [edk2-devel] [PATCH 0/2]
  Maintainers: create the &quot;OvmfPkg: Confidential Computing&quot; subsystem

message-id: 20210310185649.19801-1-lersek@redhat.com
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00384.html
https://edk2.groups.io/g/devel/message/72637</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15366</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-18 14:14:31 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Related:
&gt; 
&gt; * [edk2-devel] [PATCH 0/2]
&gt;   Maintainers: create the &quot;OvmfPkg: Confidential Computing&quot; subsystem
&gt; 
&gt; message-id: 20210310185649.19801-1-lersek@redhat.com
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00384.
&gt; html
&gt; https://edk2.groups.io/g/devel/message/72637

Merged as commit range 9fd7e88c23f6..eb07bfb09ef5, via &lt;https://github.com/tianocore/edk2/pull/1506&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16602</commentid>
    <comment_count>5</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-07-11 21:32:45 +0000</bug_when>
    <thetext>
Intel&apos;s Trust Domain Extensions (Intel TDX) refers to an Intel technology
that extends Virtual Machines Extensions (VMX) and Multi-Key Total Memory
Encryption (MKTME) with a new kind of virutal machines guest called a 
Trust Domain (TD). A TD is desinged to run in a CPU mode that protects the
confidentiality of TD memory contents and the TD&apos;s CPU state from other
software, including the hosting Virtual-Machine Monitor (VMM), unless
explicitly shared by the TD itself.

The patch-sets to support Intel TDX in OvmfPkg is split into several wave1.
This is the wave1 which adds Intel TDX support in OvmfPkg/ResetVector.

Patch 1 add the PCDs of BFV/CFV. BFV is the code part of the image. CFV is
the configuration part. BFV is measured by VMM and CFV is measured by TDVF
itself.

Patch 2 add TdxMetadata in OvmfPkg/ResetVector. It describes the
information about the image so that VMM can do the initialization and
measurement based on these information.

Patch 3 add a null entry point of InitTdx in UefiCpuPkg/ResetVector. The
actual implemenation of InitTdx is in OvmfPkg/ResetVector.

Patch 4 add the ReloadFlat32 in UefiCpuPkg/ResetVector.

Patch 5 update the UefiCpuPkg/Vtf0/Main.asm to add Main32 entrypoint. It
is because on reset all the CPUs are in 32-bit protected mode.

Patch 6 put above stuff all together to enable Intel TDX in OvmfPkg.

[TDX]: https://software.intel.com/content/dam/develop/external/us/en/
documents/tdx-whitepaper-final9-17.pdf

[TDVF]: https://software.intel.com/content/dam/develop/external/us/en/
documents/tdx-virtual-firmware-design-guide-rev-1.pdf

wave1.v1 is at: https://edk2.groups.io/g/devel/message/77675</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20986</commentid>
    <comment_count>6</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2023-02-02 00:58:23 +0000</bug_when>
    <thetext>This is resolved.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3740</bug_id>
          
          <creation_ts>2021-11-18 00:41:43 +0000</creation_ts>
          <short_desc>[UEFIPayLoad]While BootMenuApp build in UEFI payload, pcd in BootMenuApp will not be override</short_desc>
          <delta_ts>2023-01-06 03:49:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ning Feng">ning.feng</reporter>
          <assigned_to name="Ning Feng">ning.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17782</commentid>
    <comment_count>0</comment_count>
    <who name="Ning Feng">ning.feng</who>
    <bug_when>2021-11-18 00:41:43 +0000</bug_when>
    <thetext>While BootMenuApp build in UEFI payload, pcdBootManagefile in BootMenuApp will not be override By Platform value.
Have already check with liiu, zhiguang, need to fix at UefiPayloadPkg.dsc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17783</commentid>
    <comment_count>1</comment_count>
    <who name="Ning Feng">ning.feng</who>
    <bug_when>2021-11-18 02:27:14 +0000</bug_when>
    <thetext>
Review Link:https://edk2.groups.io/g/devel/message/83846</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18495</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 22:07:16 +0000</bug_when>
    <thetext>Feng: has this patch merged or not? If it is merged, this issue can be closed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20512</commentid>
    <comment_count>3</comment_count>
    <who name="Ning Feng">ning.feng</who>
    <bug_when>2023-01-06 03:49:57 +0000</bug_when>
    <thetext>patch got merged, close the bug.:https://edk2.groups.io/g/devel/message/83846</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3130</bug_id>
          
          <creation_ts>2020-12-18 21:36:30 +0000</creation_ts>
          <short_desc>Enable EDK II CI for stable/* branches</short_desc>
          <delta_ts>2021-01-19 14:27:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Process</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>EmulatorPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14621</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-18 21:36:30 +0000</bug_when>
    <thetext>The following RFC proposes adding support for stable/*
branches for critical bug fixes against an edk2-stable* tag.

https://edk2.groups.io/g/devel/message/69241

The EDK II CI configuration of GitHub, Azure Pipelines, and Mergify
must be updated to support PRs against a stable/* branch.

GitHub branch protection for the default branch must be clones
to a new branch protection rule for stable/* branches.

Mergify configuration must be updated to support merging PRs
into master and stable/* branches.  Mergify supports regex in
the base name matching.  The following setting has been tested
with the Mergify simulator.  It matches a branch name that 
starts with master or stable/.

    - base~=(^master|^stable/)
 
The top level Azure Pipelines YML files that are configured 
to trigger on the master branch must be updated to also trigger
on the stable/* branch.  The following settings cover prs and 
pushes:

    trigger:
    - master
    - stable/*

    pr:  
    - master
    - stable/*</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14622</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-18 21:37:05 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14623</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-18 21:41:37 +0000</bug_when>
    <thetext>The updates to the Azure Pipelines top level YML files
and Mergify configuration files only need to be done in
the master branch.

The files that need to be updated are:

.azurepipelines/Ubuntu-GCC5.yml
.azurepipelines/Ubuntu-PatchCheck.yml
.azurepipelines/Windows-VS2019.yml
ArmVirtPkg/PlatformCI/.azurepipelines/Ubuntu-GCC5.yml 
EmulatorPkg/PlatformCI/.azurepipelines/Ubuntu-GCC5.yml 
EmulatorPkg/PlatformCI/.azurepipelines/Windows-VS2019.yml 
OvmfPkg/PlatformCI/.azurepipelines/Ubuntu-GCC5.yml
OvmfPkg/PlatformCI/.azurepipelines/Windows-VS2019.yml

.mergify/config.yml

Note: Mergify will not auto merge a change to the Mergify
configuration file.  This change will have to be manually 
committed by an administrator after all the EDK II CI
checks have passed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14624</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-18 21:58:16 +0000</bug_when>
    <thetext>Azure Pipelines patches for review

    https://edk2.groups.io/g/devel/message/69244

Mergify patch for review

    https://edk2.groups.io/g/devel/message/69247</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14841</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-19 14:27:29 +0000</bug_when>
    <thetext>Merged via &lt;https://github.com/tianocore/edk2/pull/1263&gt;, as commit range 88e47d1959bf..ab060128768b.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3616</bug_id>
          
          <creation_ts>2021-09-10 16:27:13 +0000</creation_ts>
          <short_desc>GdbStub, GdbSerialDebugPortLib, and FwVol have multiple 64-&gt;32 conversion errors</short_desc>
          <delta_ts>2022-03-22 21:59:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3723</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmbeddedPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17234</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-09-10 16:27:13 +0000</bug_when>
    <thetext>Will attach a link to patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17238</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-09-10 19:46:46 +0000</bug_when>
    <thetext>Fixes can be found here:
https://github.com/microsoft/mu_tiano_plus/commit/1fa560d66aac8807d4deea20f9642702cf419087</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18684</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 21:59:26 +0000</bug_when>
    <thetext>Duplicate request.

*** This bug has been marked as a duplicate of bug 3501 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18686</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 21:59:52 +0000</bug_when>
    <thetext>Duplicate request.

*** This bug has been marked as a duplicate of bug 3723 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3016</bug_id>
          
          <creation_ts>2020-10-20 20:59:13 +0000</creation_ts>
          <short_desc>USB halt caused by late PCI Bus Scanning in some platform</short_desc>
          <delta_ts>2020-11-19 20:02:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>BoardModulePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14055</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-20 20:59:13 +0000</bug_when>
    <thetext>In previous implementation, “ConnectRootBridge (FALSE)” is called before “EnumUsbKeyboard ()”, but it had been moved to BdsPciEnumCompleteCallback in https://bugzilla.tianocore.org/show_bug.cgi?id=2336, this change could caused USB halt in some platform because PCI Bus Scanning is too late.
So “ConnectRootBridge (FALSE)” should be moved to early process, and it is reasonable to call EnumUsbKeyboard() after PciEnumComplete because the USB XHCI controller requires PCI enumeration to be done before USB enumeration can be done.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14056</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-20 21:01:44 +0000</bug_when>
    <thetext>Reproduce issue in UpXtreme:
all USB devices cannot work at first boot after flashing BIOS, according to the log, HC is halted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14060</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-21 03:27:25 +0000</bug_when>
    <thetext>Patch V1 at https://edk2.groups.io/g/devel/message/66464</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14080</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-26 02:47:45 +0000</bug_when>
    <thetext>Patch V2 sent at https://edk2.groups.io/g/devel/message/66577:
remove
Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14081</commentid>
    <comment_count>4</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-26 02:47:51 +0000</bug_when>
    <thetext>Patch V2 sent at https://edk2.groups.io/g/devel/message/66577:
remove
Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14379</commentid>
    <comment_count>5</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-11-19 20:02:45 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2-platforms/commit/27ba1e1ab4a7d503620e118769bd27e33a56d404</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3511</bug_id>
          
          <creation_ts>2021-07-28 10:53:45 +0000</creation_ts>
          <short_desc>Platform/Intel/WhitleyOpenBoardPkg: WilsonCityRvp RELEASE build fails</short_desc>
          <delta_ts>2021-07-28 20:17:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Takuto Naito">naitaku</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16711</commentid>
    <comment_count>0</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2021-07-28 10:53:45 +0000</bug_when>
    <thetext>WilsonCityRvp RELEASE build fails with the following message.

---
build.py...
557
/home/runner/work/edk2-platforms-build/edk2-platforms-build/edk2-platforms/Platform/Intel/WhitleyOpenBoardPkg/PlatformPkg.dsc(151): error F001: Pcd (gEfiSourceLevelDebugPkgTokenSpaceGuid.PcdDebugLoadImageMethod) defined in DSC is not declared in DEC files referenced in INF files in FDF. Arch: [&apos;IA32&apos;]
---</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16714</commentid>
    <comment_count>1</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2021-07-28 11:44:07 +0000</bug_when>
    <thetext>The patch has been sent.
https://edk2.groups.io/g/devel/message/78294</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16720</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-07-28 20:17:36 +0000</bug_when>
    <thetext>fix merged:

commit bee9efb7524dc06799ff65e6e056c7725a54c7e1
Author: Takuto Naito &lt;naitaku@gmail.com&gt;
Date:   Wed Jul 28 23:42:40 2021 +0800

    Platform/Intel/WhitleyOpenBoardPkg: Fix build error of WilsonCityRvp

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3511

    The PCD PcdDebugLoadImageMethod, which is consumed by
    PeCoffExtraActionLibDebug.inf is only for the DEBUG build.

    Cc: Isaac Oram &lt;isaac.w.oram@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Signed-off-by: Takuto Naito &lt;naitaku@gmail.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3404</bug_id>
          
          <creation_ts>2021-05-19 00:11:22 +0000</creation_ts>
          <short_desc>IntelSiliconPkg: ReportCpuHobLib fails to build</short_desc>
          <delta_ts>2021-06-22 18:29:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16097</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-05-19 00:11:22 +0000</bug_when>
    <thetext>The following build error is encountered with VS2015 (and potentially other versions):

IntelSiliconPkg\Library\ReportCpuHobLib\ReportCpuHobLib.c(30):
  error C2220: warning treated as error - no &apos;object&apos; file generated
IntelSiliconPkg\Library\ReportCpuHobLib\ReportCpuHobLib.c(30):
  warning C4244: &apos;=&apos;: conversion from &apos;UINT32&apos; to &apos;UINT8&apos;,
  possible loss of data

This is a common issue related to implicitly truncating data during assignment from a larger data type to a smaller data type.

Introduced in commit d3c10d3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16098</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-05-19 00:16:28 +0000</bug_when>
    <thetext>I will send a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16099</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-05-19 00:16:39 +0000</bug_when>
    <thetext>V1 patch on mailing list: https://edk2.groups.io/g/devel/message/75342</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16422</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-06-22 18:28:25 +0000</bug_when>
    <thetext>Patch was merged to edk2-platforms/master: https://github.com/tianocore/edk2-platforms/commit/e89f5830bdd19c73a99d745b2646f4821069fc76</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16423</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-06-22 18:29:02 +0000</bug_when>
    <thetext>Marking as resolved</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3891</bug_id>
          
          <creation_ts>2022-04-01 21:15:53 +0000</creation_ts>
          <short_desc>Tar files fail with Python 3.9.11+</short_desc>
          <delta_ts>2022-09-01 23:10:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18743</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-01 21:15:53 +0000</bug_when>
    <thetext>stuart_update fails (tested on Ubuntu hosts) when using a tar file web_dependency.

I&apos;ve been able to confirm the only change for it to succeed, is to use an older Python version (3.8.x in the YAML file which uses 3.8.12 in the build).

Working build with 3.8.12: https://dev.azure.com/tianocore/edk2-ci/_build/results?buildId=47006&amp;view=logs&amp;j=7cd61938-4509-589a-75ed-329528680800&amp;t=38c35fc0-ec86-523b-c6c0-474b10188f3a

Failing build with 3.9.12: https://dev.azure.com/tianocore/edk2-ci/_build/results?buildId=47031&amp;view=logs&amp;jobId=ccd94ee7-b4fd-5c06-6e6d-9700ff38a42f&amp;j=ccd94ee7-b4fd-5c06-6e6d-9700ff38a42f&amp;t=895f3b06-431c-5b8f-e863-b1729515b6f7

  File &quot;/opt/hostedtoolcache/Python/3.9.12/x64/lib/python3.9/site-packages/edk2toolext/environment/extdeptypes/web_dependency.py&quot;, line 126, in fetch
    WebDependency.unpack(temp_file_path, temp_folder, self.internal_path, self.compression_type)
  File &quot;/opt/hostedtoolcache/Python/3.9.12/x64/lib/python3.9/site-packages/edk2toolext/environment/extdeptypes/web_dependency.py&quot;, line 90, in unpack
    _ref.extract(member=file, path=destination)
  File &quot;/opt/hostedtoolcache/Python/3.9.12/x64/lib/python3.9/tarfile.py&quot;, line 2077, in extract
    tarinfo = self.getmember(member)
  File &quot;/opt/hostedtoolcache/Python/3.9.12/x64/lib/python3.9/tarfile.py&quot;, line 1799, in getmember
    raise KeyError(&quot;filename %r not found&quot; % name)
KeyError: &quot;filename &apos;gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf/arm-none-linux-gnueabihf/libc/usr/include/asm-generic/&apos; not found&quot;

-------------------

Seems to be related to this change in the tarfile module: https://bugs.python.org/issue21987

That needs further testing to confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18744</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-01 21:33:26 +0000</bug_when>
    <thetext>Patch sent in the following series: https://edk2.groups.io/g/devel/message/88365</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18753</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-04 10:41:40 +0000</bug_when>
    <thetext>The patch series https://edk2.groups.io/g/devel/message/88365 which rolls the Python version used in CI back to 3.8 to work around the issue. The actual problem with Python 3.9 needs to be root caused and directly fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18764</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-05 21:20:47 +0000</bug_when>
    <thetext>Python bug filed here: https://bugs.python.org/issue47231</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18803</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-11 14:28:13 +0000</bug_when>
    <thetext>Python bugs moved to GitHub over the weekend. Corresponding issue link:
https://github.com/python/cpython/issues/91387

A proposed PR with fix has been posted there.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18972</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-05-20 09:22:18 +0000</bug_when>
    <thetext>Update: The PR is still open. https://github.com/python/cpython/issues/91387</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19058</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-06-09 20:51:44 +0000</bug_when>
    <thetext>Update: The PR has been approved and is waiting to be merged - https://github.com/python/cpython/pull/32423</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19434</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-08-25 10:46:01 +0000</bug_when>
    <thetext>This is fixed in Python 3.10.6 released on 2022-08-01.

Under &quot;Library&quot;[1], see:

&quot;&quot;&quot;
bpo-47231: Fixed an issue with inconsistent trailing slashes in tarfile longname directories.
&quot;&quot;&quot;

[1]: https://docs.python.org/release/3.10.6/whatsnew/changelog.html#library</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19435</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-08-25 11:38:16 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/92817

Upgrades edk2 CI Python from 3.8 to 3.10.6.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19469</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-09-01 23:10:20 +0000</bug_when>
    <thetext>Merged to edk2/master in 383d34159d136f2dc923dfb6a722912b1af451b7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3273</bug_id>
          
          <creation_ts>2021-03-23 01:37:51 +0000</creation_ts>
          <short_desc>Need asm common code for read/write extended control register (XCR)</short_desc>
          <delta_ts>2021-03-23 08:43:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>hongbin1.zhang</reporter>
          <assigned_to>hongbin1.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15401</commentid>
    <comment_count>0</comment_count>
    <who name="">hongbin1.zhang</who>
    <bug_when>2021-03-23 01:37:51 +0000</bug_when>
    <thetext>Currently, avx/avx3 disable feature need to access extended control register 0 to disable avx, so we need to add asm common code for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15402</commentid>
    <comment_count>1</comment_count>
    <who name="">hongbin1.zhang</who>
    <bug_when>2021-03-23 01:44:52 +0000</bug_when>
    <thetext>Assign to myself</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15406</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-23 08:43:19 +0000</bug_when>
    <thetext>This bug report makes *absolutely no sense*. Why are you setting it to CONFIRMED? You have not described the use case at all. That&apos;s unacceptable for an MdePkg feature request. (You didn&apos;t even qualify this ticket as a feature request, but as a bug.)

Please reopen with a sane description of the feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3158</bug_id>
          
          <creation_ts>2021-01-07 00:57:23 +0000</creation_ts>
          <short_desc>Fix assert error related with resizable bar feature</short_desc>
          <delta_ts>2021-01-13 22:43:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14751</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-01-07 00:57:23 +0000</bug_when>
    <thetext>After resizable bar feature is merged to edk2 master:
https://github.com/tianocore/edk2/commit/42fe8ca453f1ab19d03d8dc945398997b00b0777
we get assert:
ASSERT [PciHostBridgeDxe] c:\bios\open\edk2\MdePkg\Library\BasePciCf8Lib\PciCf8Lib.c(1108): ((Address) &amp; (~0xffff0ff | (3))) == 0
The reason is that this feature need to access PciExpress capability register block, the currently WhiskeylakeOpenBoardPkg use BasePciLibCf8 as PciLib instance:
 PciLib|MdePkg/Library/BasePciLibCf8/BasePciLibCf8.inf 

This lib instance doesn&apos;t support to access PciExpress capability register block.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14752</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-01-07 01:00:13 +0000</bug_when>
    <thetext>There is 2 solutions:

1. use BasePciLibPciExpress as PciLib instance:
  PciLib|MdePkg/Library/BasePciLibPciExpress/BasePciLibPciExpress.inf

2. disable resizable bar feature, add below line in dsc file:
gEfiMdeModulePkgTokenSpaceGuid.PcdPcieResizableBarSupport|FALSE</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14782</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-11 14:45:33 +0000</bug_when>
    <thetext>(In reply to Heng Luo from comment #1)
&gt; There is 2 solutions:
&gt; 
&gt; 1. use BasePciLibPciExpress as PciLib instance:
&gt;   PciLib|MdePkg/Library/BasePciLibPciExpress/BasePciLibPciExpress.inf
&gt; 
&gt; 2. disable resizable bar feature, add below line in dsc file:
&gt; gEfiMdeModulePkgTokenSpaceGuid.PcdPcieResizableBarSupport|FALSE

You are wrong; it does not fall on platforms to compensate for the breakage you introduced. Revert the original patch, or flip the default PCD value to FALSE, please.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14791</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-01-12 20:42:24 +0000</bug_when>
    <thetext>Thank Laszlo Ersek for the comment, I sent a patch to change default value of PcdPcieResizableBarSupport to FALSE:
https://edk2.groups.io/g/devel/message/70139

Thanks,
Heng</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14804</commentid>
    <comment_count>4</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-01-13 22:43:45 +0000</bug_when>
    <thetext>Issue had been fixed by https://github.com/tianocore/edk2/commit/ef23012e5439f14864630630d2e218aeab7df501</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3638</bug_id>
          
          <creation_ts>2021-09-19 08:16:16 +0000</creation_ts>
          <short_desc>edk2-libc: Enhance the python 3 efi package creation supporting script with IA32 support</short_desc>
          <delta_ts>2021-10-17 11:25:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Jayaprakash Nevara">n.jayaprakash</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17306</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-09-19 08:16:16 +0000</bug_when>
    <thetext>There is a supporting batch script (create_python368_pkg.bat) provided for users to create python 3 deploayable package afeter building py3 interpreter by following the instructions provided in the Py368ReadMe.txt. 

However this script has support for creating the package from X64 build only.
It needs to be enhanced to provide IA32 support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17307</commentid>
    <comment_count>1</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-09-19 08:16:51 +0000</bug_when>
    <thetext>Moving to confirmed status</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17308</commentid>
    <comment_count>2</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-09-19 08:26:56 +0000</bug_when>
    <thetext>Submitted the patch for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17564</commentid>
    <comment_count>3</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-10-17 11:25:54 +0000</bug_when>
    <thetext>The change has been merged and hence closing this ticket.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3532</bug_id>
          
          <creation_ts>2021-08-05 12:19:39 +0000</creation_ts>
          <short_desc>MinPlatformPkg: Use PcdAcpiDefaultOemRevision for WSMT</short_desc>
          <delta_ts>2021-09-15 11:29:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16805</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 12:19:39 +0000</bug_when>
    <thetext>The WSMT currently uses an OEM revision set in the C file. To allow board packages  to configure the revision without locally overriding the generic file, gEfiMdeModulePkgTokenSpaceGuid.PcdAcpiDefaultOemRevision can be used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16806</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 12:19:58 +0000</bug_when>
    <thetext>I will send a patch today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16812</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 12:40:20 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/78741

Part of the large patch series: https://edk2.groups.io/g/devel/message/78740</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17225</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-08 20:44:32 +0000</bug_when>
    <thetext>Still waiting on patch to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17276</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-15 11:29:35 +0000</bug_when>
    <thetext>Merged in the following commit https://github.com/tianocore/edk2-platforms/commit/dd9115f62c02951aac90d0e3006a07d9982bccce</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3914</bug_id>
          
          <creation_ts>2022-04-23 06:42:05 +0000</creation_ts>
          <short_desc>Add XHCI handle Port Speed field value of PORTSC according to Supported Protocol Capability</short_desc>
          <delta_ts>2022-06-26 22:54:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ian.chiu</reporter>
          <assigned_to>ian.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18895</commentid>
    <comment_count>0</comment_count>
    <who name="">ian.chiu</who>
    <bug_when>2022-04-23 06:42:05 +0000</bug_when>
    <thetext>The value of xHCI Supported Protocol Capability in Extended Capabilities register is new defined in XHCI 1.2 spec May 2019.

Originally update port speed using Port Speed field in PORTSC bit[10:13] and direct return which should be instead of using the value to query thru xHCI Supported Protocol Capability and return the value according the Protocol Speed ID (PSI) Dword.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18896</commentid>
    <comment_count>1</comment_count>
    <who name="">ian.chiu</who>
    <bug_when>2022-04-23 06:55:39 +0000</bug_when>
    <thetext>The value of Port Speed field in PORTSC bit[10:13] (see in xHCI 1.2 Chapter 5.4.8) should be correspond to (In reply to ian.chiu from comment #0)
&gt; The value of xHCI Supported Protocol Capability in Extended Capabilities
&gt; register is new defined in XHCI 1.2 spec May 2019.
&gt; 
&gt; Originally update port speed using Port Speed field in PORTSC bit[10:13] and
&gt; direct return which should be instead of using the value to query thru xHCI
&gt; Supported Protocol Capability and return the value according the Protocol
&gt; Speed ID (PSI) Dword.

Originally update port speed using Port Speed field in PORTSC bit[10:13] and
direct return which should be &quot;change to&quot; using the value to query thru xHCI
Supported Protocol Capability and return the value according the Protocol
Speed ID (PSI) Dword.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19123</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-06-22 20:21:30 +0000</bug_when>
    <thetext>V1 patch sent at: https://edk2.groups.io/g/devel/message/89242
V2 patch sent at: https://edk2.groups.io/g/devel/message/89269
V3 patch sent at: https://edk2.groups.io/g/devel/message/90675</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19125</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-06-23 02:51:27 +0000</bug_when>
    <thetext>V4 patch sent at: https://edk2.groups.io/g/devel/message/90711</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19139</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-06-26 22:54:13 +0000</bug_when>
    <thetext>Merged via:
PR - https://github.com/tianocore/edk2/pull/3014
Commit - https://github.com/tianocore/edk2/commit/7f4eca4cc2e01d4160ef265f477f9d098d7d33df</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3671</bug_id>
          
          <creation_ts>2021-09-30 07:18:19 +0000</creation_ts>
          <short_desc>What Should I Do To Fix The Problems If Cash App Won&apos;t Let Me Send Money?</short_desc>
          <delta_ts>2021-10-06 00:55:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc>https://www.techjaadu.com/blog/cash-app-wont-let-me-send-money/</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="windi kartika">windikartika376</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Distribution Packaging Specificatio</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17420</commentid>
    <comment_count>0</comment_count>
    <who name="windi kartika">windikartika376</who>
    <bug_when>2021-09-30 07:18:19 +0000</bug_when>
    <thetext>Are you looking to find out the best way to root out the tangled issues if Cash App Won&apos;t Let Me Send Money? All you have to dois to have a word with the experts who are capable of fixing the whole host of your problems and help you to send your money to someone flawlessly.

https://www.techjaadu.com/blog/cash-app-wont-let-me-send-money/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17441</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-10-06 00:55:14 +0000</bug_when>
    <thetext>Not a bug</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3065</bug_id>
          
          <creation_ts>2020-11-09 17:50:30 +0000</creation_ts>
          <short_desc>SctPkg: crash in CheckEbcProtocol if EFI_EBC_PROTOCOL not available</short_desc>
          <delta_ts>2020-11-24 11:31:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaoliming</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14281</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-09 17:50:30 +0000</bug_when>
    <thetext>Function CheckEbcProtocol() calls LocateProtocol() to find the EFI_EBC_PROTOCOL.

If the protocol is not found the string identified by L&quot;EBCSupport&quot; is read from the IniFile.

If the string is L&quot;yes&quot;, the pointer Ebc is dereferenced though it cannot point to the  EFI_EBC_PROTOCOL as LocateProtocol() could not find it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14313</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-10 20:40:42 +0000</bug_when>
    <thetext>@Heinrich, can you fix it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14328</commentid>
    <comment_count>2</comment_count>
      <attachid>598</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-11 02:51:15 +0000</bug_when>
    <thetext>Created attachment 598
[PATCH edk2-test 1/1] uefi-sct/SctPkg: illegal dereference in  CheckEbcProtocol()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14329</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-11 02:59:31 +0000</bug_when>
    <thetext>Patch submitted and appended:
[PATCH edk2-test 1/1] uefi-sct/SctPkg: illegal dereference in CheckEbcProtocol() 
https://edk2.groups.io/g/devel/topic/patch_edk2_test_1_1/78178670</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14400</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-23 08:05:44 +0000</bug_when>
    <thetext>Reviewed-by: Samer El-Haj-Mahmoud &lt;Samer.El-Haj-Mahmoud@arm.com&gt;
https://edk2.groups.io/g/devel/message/67285

Reviewed-by: Grant Likely &lt;grant.likely@arm.com&gt; 
https://edk2.groups.io/g/devel/message/67798</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14414</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-24 11:31:12 +0000</bug_when>
    <thetext>On 11/24/20 4:39 PM, G Edhaya Chandran wrote:
&gt; Reviewed-by: G Edhaya Chandran&lt;edhaya.chandran@arm.com&gt;
&gt; 
&gt; Upstreamed by the commit 
&gt; id: https://github.com/tianocore/edk2-test/commit/4b5dde3ed1e3300d61b95a2cc7b4a63594fc586e 
&gt;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>598</attachid>
            <date>2020-11-11 02:51:15 +0000</date>
            <delta_ts>2020-11-11 02:51:15 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: illegal dereference in  CheckEbcProtocol()</desc>
            <filename>0001-uefi-sct-SctPkg-illegal-dereference-in-CheckEbcProto.patch</filename>
            <type>text/plain</type>
            <size>1679</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3551</bug_id>
          
          <creation_ts>2021-08-10 21:33:14 +0000</creation_ts>
          <short_desc>Add new BootDiscoveryPolicyUiLib</short_desc>
          <delta_ts>2021-08-10 21:33:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to name="Grzegorz Bernacki">gjb</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16867</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-10 21:33:14 +0000</bug_when>
    <thetext>This library extends Boot Maintenance Menu and allows to select
Boot Discovery Policy. When choice is made BootDiscoveryPolicy
variable is set. Platform code can use this variable to decide
which class of device shall be connected.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16868</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-10 21:33:54 +0000</bug_when>
    <thetext>This feature has been merged at 2b47aaecef38b9440a65809cbdaf9d97029f4eeb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3449</bug_id>
          
          <creation_ts>2021-06-10 17:33:11 +0000</creation_ts>
          <short_desc>VariablePolicy needs to replace VariableLock.</short_desc>
          <delta_ts>2021-06-23 08:37:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kenneth Lautner">klautner</reporter>
          <assigned_to name="Kenneth Lautner">klautner</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16330</commentid>
    <comment_count>0</comment_count>
    <who name="Kenneth Lautner">klautner</who>
    <bug_when>2021-06-10 17:33:11 +0000</bug_when>
    <thetext>VariableLock is being deprecated and thus needs to be converted to VariablePolicy to handle locking variables.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16379</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-15 21:40:31 +0000</bug_when>
    <thetext>Please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16440</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-23 08:37:12 +0000</bug_when>
    <thetext>This bug report is almost completely useless, but anyway, I think it has been fixed in commit d9a7612f8d1d (&quot;MdeModulePkg/BdsDxe: Update BdsEntry to use Variable Policy&quot;, 2021-06-22).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3952</bug_id>
          
          <creation_ts>2022-06-17 03:57:30 +0000</creation_ts>
          <short_desc>Follow UEFI spec&apos;d way to reconnect in form browser</short_desc>
          <delta_ts>2022-09-13 01:25:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Walon Li">walon.li</reporter>
          <assigned_to name="Walon Li">walon.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19089</commentid>
    <comment_count>0</comment_count>
      <attachid>994</attachid>
    <who name="Walon Li">walon.li</who>
    <bug_when>2022-06-17 03:57:30 +0000</bug_when>
    <thetext>Created attachment 994
FormBrowserReconnect_v1.patch

In the UEFI spec, we have two cases for reconnect driver in form browser.

EFI_IFR_FLAG_RECONNECT_REQUIRED - 
If a particular choice is modified, designates that a return flag will be activated upon exiting of the formset or the browser, which indicates that the changes that the user requested require a reconnect to enact.

EFI_BROWSER_ACTION_REQUEST_RECONNECT - 
If the callback function returns with the ActionRequest set to _RECONNECT, a hardware and/or software configuration change was performed by the user, and the controller needs to be reconnected for the driver to recognize the change. Upon the user exiting the formset or the browser, the Forms Browser is required to call the EFI Boot Service DisconnectController() followed by the EFI Boot Service ConnectController() to reconnect the controller. The controller handle passed to DisconnectController()and ConnectController()is the handle on which this EFI_HII_CONFIG_ACCESS_PROTOCOLis installed.

These descriptions are explained about reconnect driver timing in form browser, but code doesn&apos;t use this kind of way to check reconnect condition. Currently, code only blocks reconnect if page is updated dynamically. That&apos;s not matched spec&apos;d way. We should check current formset is exiting then reconnect driver.

My purpose is comparing previous formset-guid and incoming formset-guid. If these are different, that means system enter to another formset and exit current formset. Please see FormBrowserReconnect_v1.patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19108</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-06-21 21:41:47 +0000</bug_when>
    <thetext>Walon: please send the patch to edk2 mail list for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19138</commentid>
    <comment_count>2</comment_count>
    <who name="Walon Li">walon.li</who>
    <bug_when>2022-06-26 20:59:17 +0000</bug_when>
    <thetext>Change request is submitted. https://edk2.groups.io/g/devel/message/90745</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19346</commentid>
    <comment_count>3</comment_count>
    <who name="Walon Li">walon.li</who>
    <bug_when>2022-08-01 03:36:22 +0000</bug_when>
    <thetext>Hi Liming,
I saw you had reviewed. Have any pending action for code merge? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19476</commentid>
    <comment_count>4</comment_count>
    <who name="Walon Li">walon.li</who>
    <bug_when>2022-09-06 09:30:48 +0000</bug_when>
    <thetext>Hi Liming,
Any update? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19559</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-09-13 01:25:48 +0000</bug_when>
    <thetext>This patch has been merged in edk2 343f37b5c07fd261b0fe8f3236459c9071be38b7</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>994</attachid>
            <date>2022-06-17 03:57:30 +0000</date>
            <delta_ts>2022-06-17 03:57:30 +0000</delta_ts>
            <desc>FormBrowserReconnect_v1.patch</desc>
            <filename>FormBrowserReconnect_v1.patch</filename>
            <type>application/octet-stream</type>
            <size>2370</size>
            <attacher name="Walon Li">walon.li</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3203</bug_id>
          
          <creation_ts>2021-02-02 22:04:31 +0000</creation_ts>
          <short_desc>StandaloneMmPkg/FvLib.h: FfsFindSection() missing EFIAPI</short_desc>
          <delta_ts>2021-02-11 23:16:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14973</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 22:04:31 +0000</bug_when>
    <thetext>The FfsFindSection() function in FvLib.h is missing EFIAPI whereas it is present in the definition in FvLib.c. This causes the following GCC build error:

/mnt/d/src/edk2/StandaloneMmPkg/Library/FvLib/FvLib.c:294:1: error: conflicting types for ‘FfsFindSection’
 FfsFindSection (
 ^~~~~~~~~~~~~~
In file included from /mnt/d/src/edk2/StandaloneMmPkg/Library/FvLib/FvLib.c:10:0:
/mnt/d/src/edk2/StandaloneMmPkg/Include/Library/FvLib.h:53:1: note: previous declaration of ‘FfsFindSection’ was here
 FfsFindSection (
 ^~~~~~~~~~~~~~
GNUmakefile:301: recipe for target &apos;/mnt/d/src/edk2/Build/StandaloneMm/DEBUG_GCC5/X64/StandaloneMmPkg/Library/FvLib/FvLib/OUTPUT/FvLib.obj&apos; failed
make: *** [/mnt/d/src/edk2/Build/StandaloneMm/DEBUG_GCC5/X64/StandaloneMmPkg/Library/FvLib/FvLib/OUTPUT/FvLib.obj] Error 1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14974</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 22:04:53 +0000</bug_when>
    <thetext>I will send a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14981</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 22:57:56 +0000</bug_when>
    <thetext>V1 patch on the mailing list: https://edk2.groups.io/g/devel/message/71088</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15064</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-11 23:16:14 +0000</bug_when>
    <thetext>Patch merged to edk2 master: https://github.com/tianocore/edk2/commit/71cd84ac09d575493425f90b203cc01741ebb884</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3690</bug_id>
          
          <creation_ts>2021-10-14 13:38:54 +0000</creation_ts>
          <short_desc>Code First - AARCH64 binding- Requirement for an OS calling RT services on platforms with SME</short_desc>
          <delta_ts>2021-11-22 09:15:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>ardb</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>Jose.Marinho</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17550</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-14 13:38:54 +0000</bug_when>
    <thetext>For AARCH64 platforms with SME, the core can be in a particular execution mode (Streaming SVE mode) for which a subset of FP instructions is illegal.
The proposed ECR requires the OS to exit Streaming SVE mode before calling a RT service.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17551</commentid>
    <comment_count>1</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-14 13:42:05 +0000</bug_when>
    <thetext>Corresponding USWG mantis: https://mantis.uefi.org/mantis/view.php?id=2278</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17578</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-18 21:24:45 +0000</bug_when>
    <thetext>Samer is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17587</commentid>
    <comment_count>3</comment_count>
      <attachid>846</attachid>
    <who name="Jose Marinho">Jose.Marinho</who>
    <bug_when>2021-10-20 04:45:04 +0000</bug_when>
    <thetext>Created attachment 846
ECR: Mandate OS to exit Streaming SVE mode for platform that implement SME.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17687</commentid>
    <comment_count>4</comment_count>
    <who name="Ard Biesheuvel">ardb</who>
    <bug_when>2021-11-04 05:25:32 +0000</bug_when>
    <thetext>Looks good to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17796</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-11-22 09:15:50 +0000</bug_when>
    <thetext>USWG approved this on 11/17 using this version of the ECR document: https://bugzilla.tianocore.org/attachment.cgi?id=846

Closing this BZ</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>846</attachid>
            <date>2021-10-20 04:45:04 +0000</date>
            <delta_ts>2021-10-20 04:45:04 +0000</delta_ts>
            <desc>ECR: Mandate OS to exit Streaming SVE mode for platform that implement SME.</desc>
            <filename>SME_OS_requirements_ECR_v2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>48699</size>
            <attacher name="Jose Marinho">Jose.Marinho</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3569</bug_id>
          
          <creation_ts>2021-08-18 05:36:01 +0000</creation_ts>
          <short_desc>CoreValidateHandle has the risk of invalid memory access</short_desc>
          <delta_ts>2021-10-14 02:05:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yi, Liang">774207616</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>xiewenyi0201</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable201903</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16956</commentid>
    <comment_count>0</comment_count>
    <who name="Yi, Liang">774207616</who>
    <bug_when>2021-08-18 05:36:01 +0000</bug_when>
    <thetext>I met a CoreValidateHandle invalid memory access problem during BDS phase, when I was testing usb device hot-plug. This call was from
PlatformBootManagerAfterConsole
BmConnectAllDriversToAllControllers
CoreConnectController
AddSortedDriverBindingProtocol
CoreValidateHandle
When the usb device is pulled out, the usb hub enum event notify can interrupt such process and the handle memory region will be released. The CoreValidateHandle code is below,
EFI_STATUS
CoreValidateHandle (
  IN  EFI_HANDLE                UserHandle
  )
{
  IHANDLE             *Handle;
  LIST_ENTRY          *Link;

  if (UserHandle == NULL) {
    return EFI_INVALID_PARAMETER;
  }

  for (Link = gHandleList.BackLink; Link != &amp;gHandleList; Link = Link-&gt;BackLink) {
    Handle = CR (Link, IHANDLE, AllHandles, EFI_HANDLE_SIGNATURE);
    if (Handle == (IHANDLE *) UserHandle) {
      return EFI_SUCCESS;
    }
  }

  return EFI_INVALID_PARAMETER;
}
If the variable Link had got the value of gHandleList.BackLink and this process was interrupted by the notify, then the assert would occur when the interrupt return. The variable Link used an release invalid memory region.
Then I found add protocol lock can fix this problem, like this

VOID
AddSortedDriverBindingProtocol (
  IN      EFI_HANDLE                   DriverBindingHandle,
  IN OUT  UINTN                        *NumberOfSortedDriverBindingProtocols,
  IN OUT  EFI_DRIVER_BINDING_PROTOCOL  **SortedDriverBindingProtocols,
  IN      UINTN                        DriverBindingHandleCount,
  IN OUT  EFI_HANDLE                   *DriverBindingHandleBuffer,
  IN      BOOLEAN                      IsImageHandle
  )
{
  EFI_STATUS                   Status;
  EFI_DRIVER_BINDING_PROTOCOL  *DriverBinding;
  UINTN                        Index;

  CoreAcquireProtocolLock ();

  //
  // Make sure the DriverBindingHandle is valid
  //
  Status = CoreValidateHandle (DriverBindingHandle);
  if (EFI_ERROR (Status)) {
    CoreReleaseProtocolLock ();
    return;
  }

  CoreReleaseProtocolLock ();

......

The data access conflict problem need to think about when calling CoreValidateHandle. Such problem may occur in other code calls CoreValidateHandle in MdeModulePkg/Core/Dxe.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17044</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 21:57:55 +0000</bug_when>
    <thetext>Suggest to add lock in CoreValidateHandle () function.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17088</commentid>
    <comment_count>2</comment_count>
    <who name="Yi, Liang">774207616</who>
    <bug_when>2021-08-26 08:14:51 +0000</bug_when>
    <thetext>Add lock in CoreValidateHandle can cause dead lock. CoreValidateHandle has been locked in some scenes, such as in CoreInstallProtocolInterfaceNotify.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17546</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-10-14 02:05:32 +0000</bug_when>
    <thetext>
(In reply to Yi, Liang from comment #2)
&gt; Add lock in CoreValidateHandle can cause dead lock. CoreValidateHandle has
&gt; been locked in some scenes, such as in CoreInstallProtocolInterfaceNotify.

This issue should be fixed via this one https://bugzilla.tianocore.org/show_bug.cgi?id=3680

Please test from your side with the fix.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3474</bug_id>
          
          <creation_ts>2021-07-03 00:29:53 +0000</creation_ts>
          <short_desc>edk2 does not ignore PMBR protective record BootIndicator as required by UEFI spec</short_desc>
          <delta_ts>2021-07-06 03:37:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chris Murphy">bugzilla</reporter>
          <assigned_to name="Neal Gompa">ngompa13</assigned_to>
          <cc>bugzilla</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ngompa13</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202008</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16523</commentid>
    <comment_count>0</comment_count>
    <who name="Chris Murphy">bugzilla</who>
    <bug_when>2021-07-03 00:29:53 +0000</bug_when>
    <thetext>Summary of problem:

UEFI Spec 2.8 (UEFI_Spec_2_8_final.pdf, page 114)
5.2.3 Protective MBR
Table 20. Protective MBR Partition Record protecting the entire disk

The description for BootIndicator states &quot;Set to 0x00 to indicate a non-bootable partition. If set to any value other than 0x00 the behavior of this flag on non-UEFI systems is undefined. Must be ignored by UEFI implementations.&quot;

When the GNU parted &apos;pmbr_boot&apos; flag is set on a disk containing a GPT, this sets the value of the single protective record of the PMBR to 0x01. However, a raw (or qcow2) VM image booted in a qemu-kvm with edk2-ovmf providing virtual UEFI firmware, drops to an EFI shell. The EFI appears to consider the GPT invalid, finding no partitions, thus no EFI System volume. This failure is inconsistent with the requirement to ignore the value of BootIndicator.

Detail:


pmbr_boot not set, i.e. BootIndicator value is 0x00.

# dd if=/dev/loop0 count=1 2&gt;/dev/null | hexdump -C
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
000001c0  02 00 ee ff ff ff 01 00  00 00 ff ff 1f 00 00 00  |................|
000001d0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
000001f0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 55 aa  |..............U.|
00000200
# 

pmbr_boot is set

# dd if=/dev/loop0 count=1 2&gt;/dev/null | hexdump -C
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
000001b0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 80 00  |................|
000001c0  02 00 ee ff ff ff 01 00  00 00 ff ff 1f 00 00 00  |................|
000001d0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
000001f0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 55 aa  |..............U.|
00000200
# 

We can see 0x80 for offset 1BE. So this is the only bit changed and it&apos;s causing the virtual firmware to seemingly consider the GPT entirely invalid (or ignorable).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16524</commentid>
    <comment_count>1</comment_count>
      <attachid>750</attachid>
    <who name="Chris Murphy">bugzilla</who>
    <bug_when>2021-07-03 00:32:45 +0000</bug_when>
    <thetext>Created attachment 750
screenshot of problem

The way this bug manifests is I&apos;m dropped to an EFI shell. But I should get to a GRUB prompt since the EFI System volume contains EFI/BOOT/BOOTX64.EFI which is grubx64.efi. If the value at 1BE is restored to 0x00, in fact I do get to a grub prompt.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16525</commentid>
    <comment_count>2</comment_count>
      <attachid>751</attachid>
    <who name="Chris Murphy">bugzilla</who>
    <bug_when>2021-07-03 00:38:19 +0000</bug_when>
    <thetext>Created attachment 751
test image

This unpacks to a ~4.6M sparse raw file containing a 1G EFI system volume, with a grub boot loader on it. It has pmbr_boot set, i.e. offset 1BE is 0x80 rather than 0x00.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16527</commentid>
    <comment_count>3</comment_count>
    <who name="Chris Murphy">bugzilla</who>
    <bug_when>2021-07-03 14:44:00 +0000</bug_when>
    <thetext>parted /dev/vda disk_set pmbr_boot off
parted /dev/vda disk_set pmbr_boot on</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16535</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-07-05 04:54:51 +0000</bug_when>
    <thetext>This bug report seems valid. At commit bb33c27fbed6, in function
PartitionInstallGptChildHandles(), file
&quot;MdeModulePkg/Universal/Disk/PartitionDxe/Gpt.c&quot;:

&gt;|   //
&gt;|   // Verify that the Protective MBR is valid
&gt;|   //
&gt;|   for (Index = 0; Index &lt; MAX_MBR_PARTITIONS; Index++) {
&gt;|     if (ProtectiveMbr-&gt;Partition[Index].BootIndicator == 0x00 &amp;&amp;
&gt;|         ProtectiveMbr-&gt;Partition[Index].OSIndicator == PMBR_GPT_PARTITION &amp;&amp;
&gt;|         UNPACK_UINT32 (ProtectiveMbr-&gt;Partition[Index].StartingLBA) == 1
&gt;|         ) {
&gt;|       break;
&gt;|     }
&gt;|   }
&gt;|   if (Index == MAX_MBR_PARTITIONS) {
&gt;|     goto Done;
&gt;|   }

Note the (BootIndicator == 0x00) check. Per spec, the BootIndicator
field should be ignored, AIUI.

The problematic BootIndicator check dates back to commit adbcbf8ffcae
(&quot;Modules cleanup.&quot;, 2007-07-16). The code in question was reworked in
commit 339c754a01fa (&quot;Enhance GPT to remove the assumption that GPT
partition entry in PMBR must be the first partition entry.&quot;,
2009-08-14), but that change did not affect the BootIndicator check.

Setting this one to CONFIRMED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16536</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-07-05 04:56:02 +0000</bug_when>
    <thetext>Chris, could you perhaps send a patch, just for removing the superfluous / harmful BootIndicator sub-condition? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16537</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-07-05 04:57:14 +0000</bug_when>
    <thetext>The official documentation for contributing patches is here:

https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process

Some other, unofficial hints:

https://github.com/tianocore/tianocore.github.io/wiki/Laszlo&apos;s-unkempt-git-guide-for-edk2-contributors-and-maintainers</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16544</commentid>
    <comment_count>7</comment_count>
    <who name="Neal Gompa">ngompa13</who>
    <bug_when>2021-07-05 05:38:47 +0000</bug_when>
    <thetext>I&apos;ve sent a patch to the list for this bug. Hopefully it is the fix you asked for. :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16545</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-07-05 05:58:46 +0000</bug_when>
    <thetext>Patch from Neal on the list:

* [edk2-devel] [PATCH]
  MdeModulePkg/PartitionDxe: Ignore PMBR BootIndicator per UEFI spec

https://edk2.groups.io/g/devel/message/77477
mid: &lt;20210705093603.575707-1-ngompa@fedoraproject.org&gt;
https://listman.redhat.com/archives/edk2-devel-archive/2021-July/msg00093.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16546</commentid>
    <comment_count>9</comment_count>
    <who name="Neal Gompa">ngompa13</who>
    <bug_when>2021-07-05 06:10:06 +0000</bug_when>
    <thetext>Hmm, well that&apos;s annoying, it seems like my email address got rewritten in the archive.

Here&apos;s the commit from GitHub: https://github.com/Conan-Kudo/edk2/commit/691e50436c57c2d52c16bec86c04ea33800082ba</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16548</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-07-05 07:49:38 +0000</bug_when>
    <thetext>That&apos;s indeed strange; the copy of the message that was delivered to me directly (not via the list) says &quot;From: Neal Gompa &lt;ngompa@fedoraproject.org&gt;&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16552</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-07-06 03:36:19 +0000</bug_when>
    <thetext>Merged as commit b3db0cb1f8d1, via &lt;https://github.com/tianocore/edk2/pull/1792&gt;.

I fixed up the authorship meta-datum with &quot;git commit --amend --author=&apos;Neal Gompa &lt;ngompa@fedoraproject.org&gt;&apos;&quot;, per BZ comment &lt;https://bugzilla.tianocore.org/show_bug.cgi?id=3474#c9&gt;.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>750</attachid>
            <date>2021-07-03 00:32:45 +0000</date>
            <delta_ts>2021-07-03 00:32:45 +0000</delta_ts>
            <desc>screenshot of problem</desc>
            <filename>Screenshot from 2021-07-02 22-22-43.png</filename>
            <type>image/png</type>
            <size>33291</size>
            <attacher name="Chris Murphy">bugzilla</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>751</attachid>
            <date>2021-07-03 00:38:19 +0000</date>
            <delta_ts>2021-07-03 00:38:19 +0000</delta_ts>
            <desc>test image</desc>
            <filename>test.tar.gz</filename>
            <type>application/gzip</type>
            <size>642802</size>
            <attacher name="Chris Murphy">bugzilla</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3979</bug_id>
          
          <creation_ts>2022-07-06 03:46:58 +0000</creation_ts>
          <short_desc>[UPL] UefiPayloadPkg: Add CryptoDxe driver to UefiPayload</short_desc>
          <delta_ts>2022-07-11 02:51:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Payton Hsieh">paytonx.hsieh</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19204</commentid>
    <comment_count>0</comment_count>
    <who name="Payton Hsieh">paytonx.hsieh</who>
    <bug_when>2022-07-06 03:46:58 +0000</bug_when>
    <thetext>Add CryptoDxe driver to UefiPayload when CRYPTO_ENABLE is TRUE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19224</commentid>
    <comment_count>1</comment_count>
    <who name="Payton Hsieh">paytonx.hsieh</who>
    <bug_when>2022-07-11 02:51:25 +0000</bug_when>
    <thetext>Resolved by https://github.com/tianocore/edk2/pull/3053</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3351</bug_id>
          
          <creation_ts>2021-04-21 15:20:07 +0000</creation_ts>
          <short_desc>LcdHwNullLib returns an inconvenient value for LcdIdentify()</short_desc>
          <delta_ts>2024-07-22 11:02:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15759</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-04-21 15:20:07 +0000</bug_when>
    <thetext>By returning EFI_SUCCESS, this NULL implementation seems to inform the platform that LCD HW does exist that the initialization should continue.

For this to truly be considered a NULL implementation, this should probably return EFI_UNSUPPORTED or EFI_NOT_FOUND.

Thoughts?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15764</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-04-22 11:47:44 +0000</bug_when>
    <thetext>Patch can be located here:
https://github.com/microsoft/mu_silicon_arm_tiano/commit/414bc6da4416f9d150eff869987e4adfd3d106d9#diff-fa90abd26710e3d2cd8fd2cd5e1574b9170d4d21c7db9f67a17acf4495fc35d8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15802</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-27 21:44:01 +0000</bug_when>
    <thetext>Include Leif</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18578</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-08 22:16:30 +0000</bug_when>
    <thetext>Bret: will you contribute the patch for this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18579</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-08 22:17:11 +0000</bug_when>
    <thetext>Bret: will you contribute the patch for this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23252</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2024-07-22 11:02:50 +0000</bug_when>
    <thetext>Submitted in PR https://github.com/tianocore/edk2/pull/5927. Commit https://github.com/tianocore/edk2/commit/734aaff8625760fb5d38024168a5f8696b14fd10.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3837</bug_id>
          
          <creation_ts>2022-02-15 01:37:03 +0000</creation_ts>
          <short_desc>UEFI-SCT: RISCV_EFI_BOOT_PROTOCOL Test</short_desc>
          <delta_ts>2022-10-06 10:14:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sunil V L">sunilvl</reporter>
          <assigned_to name="Sunil V L">sunilvl</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>Carolyn.Gjertsen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaojie</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18364</commentid>
    <comment_count>0</comment_count>
      <attachid>927</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-02-15 01:37:03 +0000</bug_when>
    <thetext>Created attachment 927
Proposed RISC-V Boot Protocol Test

There is a new EFI protocol (RISC-V_EFI_BOOT_PROTOCOL) for RISC-V platforms. The specification for this protocol is hosted at https://github.com/riscv-non-isa/riscv-uefi. 

This protocol is already implemented in u-boot efi but yet to be upstreamed in edk2. This bugzilla is created to track the test case addition to the SCT.

Attaching the first version of the test case spec chapter for RISC-V Boot Protocol. Will attach the test case patches soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18370</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-02-15 08:31:29 +0000</bug_when>
    <thetext>Thanks for defining a test for the new protocol.

Just to give some more background: Currently the boot hart ID is passed via the devicetree from the firmware to the EFI binary. This is not compatible with future ACPI based systems. Therefore the new protocol has been defined to replace the devicetree based solution.

The tests look correct to me. There are some capitalization typos (&quot;Passed&quot;, &quot;Status&quot; which we can fix when merging.

If we wanted to be a bit more rigorous, we could:

* check that revision has a known value (currently only RISCV_EFI_BOOT_PROTOCOL_REVISION == 0x0001000 is defined)
* call GetBootHartId() twice with different values of *BootHartId and check that after each call the returned value of BootHartId is the same.

A good next step would be to provide a patch implementing the test and run the SCT against the U-Boot implementation.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18531</commentid>
    <comment_count>2</comment_count>
      <attachid>950</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-03-03 09:22:56 +0000</bug_when>
    <thetext>Created attachment 950
Proposed RISC-V Boot Protocol Test Spec - V2

Changes since V1:
  - Added one more test case as per Heinrich&apos;s feedback. 
  - Corrected few typos</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18532</commentid>
    <comment_count>3</comment_count>
      <attachid>951</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-03-03 09:26:31 +0000</bug_when>
    <thetext>Created attachment 951
RFC V1: 0000-cover-letter.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18533</commentid>
    <comment_count>4</comment_count>
      <attachid>952</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-03-03 09:27:35 +0000</bug_when>
    <thetext>Created attachment 952
RFC V1: 0001-uefi-sct-SctPkg-Add-header-file-for-RISCV_EFI_BOOT_P.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18534</commentid>
    <comment_count>5</comment_count>
      <attachid>953</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-03-03 09:28:22 +0000</bug_when>
    <thetext>Created attachment 953
RFC V1: 0002-uefi-sct-SctPkg-Add-test-cases-for-RISCV_EFI_BOOT_PR.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18535</commentid>
    <comment_count>6</comment_count>
      <attachid>954</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-03-03 09:28:58 +0000</bug_when>
    <thetext>Created attachment 954
RFC V1: 0003-uefi-sct-SctPkg-Build-test-cases-of-RISCV_EFI_BOOT_P.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18536</commentid>
    <comment_count>7</comment_count>
      <attachid>955</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-03-03 09:29:32 +0000</bug_when>
    <thetext>Created attachment 955
RFC V1: 0004-uefi-sct-SctPkg-Install-RISCV_EFI_BOOT_PROTOCOL-test.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18537</commentid>
    <comment_count>8</comment_count>
      <attachid>956</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-03-03 09:30:10 +0000</bug_when>
    <thetext>Created attachment 956
RFC V1: 0005-uefi-sct-SctPkg-Add-a-category-for-RISCV_EFI_BOOT_PR.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18538</commentid>
    <comment_count>9</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-03-03 09:33:43 +0000</bug_when>
    <thetext>(In reply to Heinrich Schuchardt from comment #1)
&gt; Thanks for defining a test for the new protocol.
&gt; 
&gt; Just to give some more background: Currently the boot hart ID is passed via
&gt; the devicetree from the firmware to the EFI binary. This is not compatible
&gt; with future ACPI based systems. Therefore the new protocol has been defined
&gt; to replace the devicetree based solution.
&gt; 
&gt; The tests look correct to me. There are some capitalization typos (&quot;Passed&quot;,
&gt; &quot;Status&quot; which we can fix when merging.
&gt; 
&gt; If we wanted to be a bit more rigorous, we could:
&gt; 
&gt; * check that revision has a known value (currently only
&gt; RISCV_EFI_BOOT_PROTOCOL_REVISION == 0x0001000 is defined)
&gt; * call GetBootHartId() twice with different values of *BootHartId and check
&gt; that after each call the returned value of BootHartId is the same.
&gt; 
&gt; A good next step would be to provide a patch implementing the test and run
&gt; the SCT against the U-Boot implementation.
&gt; 
&gt; Best regards
&gt; 
&gt; Heinrich

Hi Heinrich,

Thanks a lot for the feedback. I added the test case for calling GetBootHartID() twice. But I didn&apos;t add revision check since in future different implementations might support different revisions.

I created test case patches and tested using u-boot SCT.

Thanks
Sunil</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19023</commentid>
    <comment_count>10</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-06-02 10:34:37 +0000</bug_when>
    <thetext>Thank you Sunil. Please copy this patches to the edk2 mailing list.
https://edk2.groups.io/g/devel

The patches to be reviewed by the forum.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19026</commentid>
    <comment_count>11</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-06-02 12:34:39 +0000</bug_when>
    <thetext>Please, remove trailing white space in the patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19029</commentid>
    <comment_count>12</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-06-02 13:17:51 +0000</bug_when>
    <thetext>I built target Platform/Qemu/RiscvVirt/RiscvVirt.dsc of https://github.com/ventanamicro/edk2-platforms branch dev-upstream.

The two new tests are available in the SCT menu and executable.

The following test fails:

RISCV_EFI_BOOT_PROTOCOL - GetBootHartId() returns EFI_INVALID_PARAMETER with invalid This pointer.

This matches a deficiency in the implementation which only checks for this != NULL. After patching the implementation the test succeeds.

Tested-by: Heinrich Schuchardt &lt;heinrich.schuchardt@canonical.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19031</commentid>
    <comment_count>13</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-06-02 14:02:59 +0000</bug_when>
    <thetext>Except for superfluous whitespace at end of lines and a typo %s/some thing/something/g the patches look good to me.

After fixing this you may add:
Reviewed-by: Heinrich Schuchardt &lt;heinrich.schuchardt@canonical.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19048</commentid>
    <comment_count>14</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-06-09 06:31:06 +0000</bug_when>
    <thetext>Thanks! Heinrich. Looks like those extra spaces are there in existing files and carried to my changes when I copied those copyright/header message etc to the new files. Now, I removed them in my changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19049</commentid>
    <comment_count>15</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-06-09 08:22:30 +0000</bug_when>
    <thetext>Hello Sunil,

thanks for sending the revised patches to the mailing list.

https://edk2.groups.io/g/devel/message/90388
https://edk2.groups.io/g/devel/message/90389
https://edk2.groups.io/g/devel/message/90390
https://edk2.groups.io/g/devel/message/90391
https://edk2.groups.io/g/devel/message/90392
https://edk2.groups.io/g/devel/message/90393


Could you, please, attach them here, too, as sometimes formatting get&apos;s changed in the mail process, when CRLF is involved.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19050</commentid>
    <comment_count>16</comment_count>
      <attachid>988</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-06-09 09:50:44 +0000</bug_when>
    <thetext>Created attachment 988
PATCH V1: 0000-cover-letter.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19051</commentid>
    <comment_count>17</comment_count>
      <attachid>989</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-06-09 09:51:56 +0000</bug_when>
    <thetext>Created attachment 989
PATCH V1: 0001-uefi-sct-SctPkg-Add-header-file-for-RISCV_EFI_BOOT_P.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19052</commentid>
    <comment_count>18</comment_count>
      <attachid>990</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-06-09 09:52:43 +0000</bug_when>
    <thetext>Created attachment 990
PATCH V1: 0002-uefi-sct-SctPkg-Add-test-cases-for-RISCV_EFI_BOOT_PR.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19053</commentid>
    <comment_count>19</comment_count>
      <attachid>991</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-06-09 09:53:34 +0000</bug_when>
    <thetext>Created attachment 991
PATCH V1: 0003-uefi-sct-SctPkg-Build-test-cases-of-RISCV_EFI_BOOT_P.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19054</commentid>
    <comment_count>20</comment_count>
      <attachid>992</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-06-09 09:54:12 +0000</bug_when>
    <thetext>Created attachment 992
PATCH V1: 0004-uefi-sct-SctPkg-Install-RISCV_EFI_BOOT_PROTOCOL-test.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19055</commentid>
    <comment_count>21</comment_count>
      <attachid>993</attachid>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-06-09 09:55:03 +0000</bug_when>
    <thetext>Created attachment 993
PATCH V1: 0005-uefi-sct-SctPkg-Add-a-category-for-RISCV_EFI_BOOT_PR.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19056</commentid>
    <comment_count>22</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2022-06-09 10:01:47 +0000</bug_when>
    <thetext>Hi Heinrich,

Attached V1 version which I sent to the mailing list.

I noticed that couple of patches could not be applied using &quot;git am&quot; unless I use --keep-cr option. Is that expected when CRLF is involved? Let me know if I am missing something.

Thanks
Sunil</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19213</commentid>
    <comment_count>23</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-07-07 10:07:29 +0000</bug_when>
    <thetext>Patches are reviewed by Heinrich. 
To be further reviewed by the forum.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19538</commentid>
    <comment_count>24</comment_count>
    <who name="Barton Gao">gaojie</who>
    <bug_when>2022-09-09 01:12:34 +0000</bug_when>
    <thetext>
The patch set looks good to me.
Reviewed-by: Barton Gao &lt;gaojie@byosoft.com.cn&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19725</commentid>
    <comment_count>25</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-10-06 10:14:42 +0000</bug_when>
    <thetext>The patch is reviewed and upstreamed by commit-id: https://github.com/tianocore/edk2-test/commit/f628bec2193da1f9402ef749fbca50f61c812d6f


Closing the ticket</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>927</attachid>
            <date>2022-02-15 01:37:03 +0000</date>
            <delta_ts>2022-02-15 08:01:56 +0000</delta_ts>
            <desc>Proposed RISC-V Boot Protocol Test</desc>
            <filename>RiscvBootProtocolSct.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>23901</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>950</attachid>
            <date>2022-03-03 09:22:56 +0000</date>
            <delta_ts>2022-03-03 09:22:56 +0000</delta_ts>
            <desc>Proposed RISC-V Boot Protocol Test Spec - V2</desc>
            <filename>RiscvBootProtocolSct.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>23413</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>951</attachid>
            <date>2022-03-03 09:26:31 +0000</date>
            <delta_ts>2022-06-09 09:50:44 +0000</delta_ts>
            <desc>RFC V1: 0000-cover-letter.patch</desc>
            <filename>0000-cover-letter.patch</filename>
            <type>text/plain</type>
            <size>2580</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>952</attachid>
            <date>2022-03-03 09:27:35 +0000</date>
            <delta_ts>2022-06-09 09:51:56 +0000</delta_ts>
            <desc>RFC V1: 0001-uefi-sct-SctPkg-Add-header-file-for-RISCV_EFI_BOOT_P.patch</desc>
            <filename>0001-uefi-sct-SctPkg-Add-header-file-for-RISCV_EFI_BOOT_P.patch</filename>
            <type>text/plain</type>
            <size>3067</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>953</attachid>
            <date>2022-03-03 09:28:22 +0000</date>
            <delta_ts>2022-06-09 09:52:43 +0000</delta_ts>
            <desc>RFC V1: 0002-uefi-sct-SctPkg-Add-test-cases-for-RISCV_EFI_BOOT_PR.patch</desc>
            <filename>0002-uefi-sct-SctPkg-Add-test-cases-for-RISCV_EFI_BOOT_PR.patch</filename>
            <type>text/plain</type>
            <size>23673</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>954</attachid>
            <date>2022-03-03 09:28:58 +0000</date>
            <delta_ts>2022-06-09 09:53:34 +0000</delta_ts>
            <desc>RFC V1: 0003-uefi-sct-SctPkg-Build-test-cases-of-RISCV_EFI_BOOT_P.patch</desc>
            <filename>0003-uefi-sct-SctPkg-Build-test-cases-of-RISCV_EFI_BOOT_P.patch</filename>
            <type>text/plain</type>
            <size>1789</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>955</attachid>
            <date>2022-03-03 09:29:32 +0000</date>
            <delta_ts>2022-06-09 09:54:12 +0000</delta_ts>
            <desc>RFC V1: 0004-uefi-sct-SctPkg-Install-RISCV_EFI_BOOT_PROTOCOL-test.patch</desc>
            <filename>0004-uefi-sct-SctPkg-Install-RISCV_EFI_BOOT_PROTOCOL-test.patch</filename>
            <type>text/plain</type>
            <size>1361</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>956</attachid>
            <date>2022-03-03 09:30:10 +0000</date>
            <delta_ts>2022-06-09 09:55:03 +0000</delta_ts>
            <desc>RFC V1: 0005-uefi-sct-SctPkg-Add-a-category-for-RISCV_EFI_BOOT_PR.patch</desc>
            <filename>0005-uefi-sct-SctPkg-Add-a-category-for-RISCV_EFI_BOOT_PR.patch</filename>
            <type>text/plain</type>
            <size>1208</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>988</attachid>
            <date>2022-06-09 09:50:44 +0000</date>
            <delta_ts>2022-06-09 09:50:44 +0000</delta_ts>
            <desc>PATCH V1: 0000-cover-letter.patch</desc>
            <filename>0000-cover-letter.patch</filename>
            <type>text/plain</type>
            <size>2444</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>989</attachid>
            <date>2022-06-09 09:51:56 +0000</date>
            <delta_ts>2022-06-09 09:51:56 +0000</delta_ts>
            <desc>PATCH V1: 0001-uefi-sct-SctPkg-Add-header-file-for-RISCV_EFI_BOOT_P.patch</desc>
            <filename>0001-uefi-sct-SctPkg-Add-header-file-for-RISCV_EFI_BOOT_P.patch</filename>
            <type>text/plain</type>
            <size>3546</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>990</attachid>
            <date>2022-06-09 09:52:43 +0000</date>
            <delta_ts>2022-06-09 09:52:43 +0000</delta_ts>
            <desc>PATCH V1: 0002-uefi-sct-SctPkg-Add-test-cases-for-RISCV_EFI_BOOT_PR.patch</desc>
            <filename>0002-uefi-sct-SctPkg-Add-test-cases-for-RISCV_EFI_BOOT_PR.patch</filename>
            <type>text/plain</type>
            <size>23957</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>991</attachid>
            <date>2022-06-09 09:53:34 +0000</date>
            <delta_ts>2022-06-09 09:53:34 +0000</delta_ts>
            <desc>PATCH V1: 0003-uefi-sct-SctPkg-Build-test-cases-of-RISCV_EFI_BOOT_P.patch</desc>
            <filename>0003-uefi-sct-SctPkg-Build-test-cases-of-RISCV_EFI_BOOT_P.patch</filename>
            <type>text/plain</type>
            <size>2363</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>992</attachid>
            <date>2022-06-09 09:54:12 +0000</date>
            <delta_ts>2022-06-09 09:54:12 +0000</delta_ts>
            <desc>PATCH V1: 0004-uefi-sct-SctPkg-Install-RISCV_EFI_BOOT_PROTOCOL-test.patch</desc>
            <filename>0004-uefi-sct-SctPkg-Install-RISCV_EFI_BOOT_PROTOCOL-test.patch</filename>
            <type>text/plain</type>
            <size>1936</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>993</attachid>
            <date>2022-06-09 09:55:03 +0000</date>
            <delta_ts>2022-06-09 09:55:03 +0000</delta_ts>
            <desc>PATCH V1: 0005-uefi-sct-SctPkg-Add-a-category-for-RISCV_EFI_BOOT_PR.patch</desc>
            <filename>0005-uefi-sct-SctPkg-Add-a-category-for-RISCV_EFI_BOOT_PR.patch</filename>
            <type>text/plain</type>
            <size>1778</size>
            <attacher name="Sunil V L">sunilvl</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3710</bug_id>
          
          <creation_ts>2021-10-28 18:37:30 +0000</creation_ts>
          <short_desc>EINJv2: Enabling advanced error data patterns</short_desc>
          <delta_ts>2022-01-14 10:52:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>harb</reporter>
          <assigned_to>harb</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17626</commentid>
    <comment_count>0</comment_count>
    <who name="">harb</who>
    <bug_when>2021-10-28 18:37:30 +0000</bug_when>
    <thetext># Summary of the change
-----------------------
This ECR introduces EINJ version 2 (EINJv2), which extends the ACPI EINJ capability to inject more advanced error syndrome.
This will cover arbitrary error bit patterns in multiple components (e.g. x4 and x8 DRAM devices).

# Benefits of this change
-------------------------
This is beneficial for platforms that rely on more advanced error correction coding (ECC) schemes (e.g. symbol ECC based on Reed-Solomon encoding).
Given the observation of the increasing number of uncorrectable memory errors in the fleet and potential silent data corruption caused by undetected memory errors, it becomes critical to verify detection and correction coverage of error correction code (ECC) in memory controllers.
On mainstream platforms, memory transactions are performed on the unit of a 512-bit cache line. Additional bits are attached to a cache line for error detection and correction (ECC). All the data and ECC bits of a cache line are distributed evenly into multiple x4 or x8 DRAM chips. Since these DRAM chips operate independently of each other, our goal here is to test the detection and correction coverage on all possible error patterns a mal-functioning single x4 or x8 DRAM chip would produce. As a reference, the state-of-the-art ECC today is single-device-data-correction (SDDC) which detects and corrects 100% errors from one single x4 DRAM device.

The problem with existing EINJ definition is that the exact DRAM device and the error pattern are not specifiable in the data structure and are usually hardcoded in the error injection functions behind the EINJ interface. Here we propose to add a new EINJ injection action to enable injecting arbitrary error patterns to memory devices.
Note that this has been generalized to potentially apply to other component errors (e.g. Processor and PCIe errors).

# Impact of the change
-----------------------
Existing OSPM implementations that support EINJ must be extended to supporting these new EINJ commands and capabilities.  Existing EINJ tools and scripts will need to be updated to take advantage of these new features.  Backwards compatibility will be maintained to continue to support older version of EINJ software and scripts.

ECR docx file to be attached soon...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17649</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-02 21:51:27 +0000</bug_when>
    <thetext>Please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17689</commentid>
    <comment_count>2</comment_count>
      <attachid>869</attachid>
    <who name="">harb</who>
    <bug_when>2021-11-04 10:34:59 +0000</bug_when>
    <thetext>Created attachment 869
EINJv2 ECR document</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17972</commentid>
    <comment_count>3</comment_count>
      <attachid>899</attachid>
    <who name="">harb</who>
    <bug_when>2021-12-09 18:42:49 +0000</bug_when>
    <thetext>Created attachment 899
EINJv2 ECR document (updated per feedback - 12092021

attaching updated ECR per feedback.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18139</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-01-14 10:52:12 +0000</bug_when>
    <thetext>approved by UEFI Forum ASWG as new content for ACPI.next</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>869</attachid>
            <date>2021-11-04 10:34:59 +0000</date>
            <delta_ts>2021-11-04 10:34:59 +0000</delta_ts>
            <desc>EINJv2 ECR document</desc>
            <filename>CodeFirst_ACPI_EINJv2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>41069</size>
            <attacher>harb</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>899</attachid>
            <date>2021-12-09 18:42:49 +0000</date>
            <delta_ts>2021-12-09 18:42:49 +0000</delta_ts>
            <desc>EINJv2 ECR document (updated per feedback - 12092021</desc>
            <filename>CodeFirst_ACPI_EINJv2-12092021.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>49143</size>
            <attacher>harb</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3596</bug_id>
          
          <creation_ts>2021-08-30 02:25:27 +0000</creation_ts>
          <short_desc>Add parallel hash feature into BaseCryptLib</short_desc>
          <delta_ts>2022-03-18 03:19:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="zhihao">zhihao.li</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>zhihao.li</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17107</commentid>
    <comment_count>0</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2021-08-30 02:25:27 +0000</bug_when>
    <thetext>This feature named Parallelhash256 can be applied for capsule authentication in SMM. It utilize multi-processor to calculate the image digest in parallel for update capsule authentication so that lessen the time of capsule authentication.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17196</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-07 23:16:58 +0000</bug_when>
    <thetext>Zhihao is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18360</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-14 20:05:06 +0000</bug_when>
    <thetext>Zhihao is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18643</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-03-18 03:19:28 +0000</bug_when>
    <thetext>Merged https://github.com/tianocore/edk2/pull/2650
githash - c1e6621</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18644</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-03-18 03:19:58 +0000</bug_when>
    <thetext>close</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3490</bug_id>
          
          <creation_ts>2021-07-13 17:31:34 +0000</creation_ts>
          <short_desc>ACPI spec clarification - Time and Alarm Device methods requirements</short_desc>
          <delta_ts>2021-10-13 21:45:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>andrey.warkentin</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.a.rothman</cc>
    
    <cc>rgough</cc>
    
    <cc>yinghany</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16616</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-07-13 17:31:34 +0000</bug_when>
    <thetext>The ACPI 6.4 spec is not clear on the requirements of the Time and alarm methods support https://uefi.org/specs/ACPI/6.4/09_ACPI-Defined_Devices_and_Device-Specific_Objects/ACPIdefined_Devices_and_DeviceSpecificObjects.html#time-and-alarm-device


Section 9.18.1 says:

&quot;The Time and Alarm device can support a range of services, the OSPM evaluates the _GCP object to get the supported capabilities of the device. If the capabilities indicate that the device supports time services, the OSPM evaluates the _GRT and _SRT objects to get and set time respectively.&quot;

However, going over _GCP, it is not clear what this means:

* _GRT and _SRT support is clearly flagged in _GCP bit[2]
* However, for the wakeup functions (_GWS, _CWS, _STP, STV, _TIP, _TIV), the only bit in _GCP that indicates whether these are supported or not are bits[0] and [1]:

Bit [0] - 1 = AC wake implemented, 0 = not supported
Bit [1] - 1 = DC wake implemented, 0 = not supported

Bits 3-8 talk about wake support on S4 vs S5, on AC/DC.


Could the spec be clarified? Is it safe for OSPM to assume that if either bits 0 or 1 in _GCP is set, then ALL of the wake functions (_GWS, _CWS, _STP, STV, _TIP, _TIV) must be implemented?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16618</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-13 21:35:16 +0000</bug_when>
    <thetext>Please give the proposal to clarify the spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16734</commentid>
    <comment_count>2</comment_count>
    <who name="Yinghan Yang">yinghany</who>
    <bug_when>2021-08-02 16:55:08 +0000</bug_when>
    <thetext>It seems that the intention of TAD is to provide an alternative to the RTC in waking the system from Sx to S0. The spec also defines two types of TAD: 

1) TAD that supports AC only wake 
2) TAD that supports AC+DC wake

It doesn&apos;t make much sense to have a DC-only TAD or one that doesn&apos;t provide any wake capabilities.

Hence, it would seem that bit 0 (AC wake supported) in the _GCP should always return 1. Maybe that can be clarified in the specification?

Similarly, it probably makes sense to say that if AC/DC wake from S4/S5 is supported (one of bits 5-8 is set), then bit 4 should also be supported. Seems to be odd that it&apos;d support wake from those states but not be able to report itself as the source.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16909</commentid>
    <comment_count>3</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-13 14:28:07 +0000</bug_when>
    <thetext>How about this:

- Section 9.18.2 _GCP
   o Add “If _GCP Bit[1] (DC wake) is set to 1, then Bit 0 (AC wake) must also be set to 1”. 
    - Rationale: Does not make sense to support AC wake and not support DC wake
    - Question: Are we sure this is the case? Shall we leave this out to be safe?

   o Add “If any of _GCP Bits [5:8] (wake support) are set to 1, then Bit [4] (_GWS) must also be set to 1”
    - Rationale: Does not make sense to support setting a wake state and not getting the status

- No need for changes in the object requirements for _GWS, _CWS, _STP, _STV, _TIP, _TIV, as they are all stated by the spec as “required”
    o All of these methods have the ability to return 0x01 (Failure) or 0xFFFFFFFF (timer disabled or will not wake up the system). This allows systems that have Time support (but not wakeup support) of implementing the objects, and hard-coding the return to errors
     o This would be true even if _GCP bits0 and 1 return 0, indicating no wakeup support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16962</commentid>
    <comment_count>4</comment_count>
      <attachid>801</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-18 12:39:40 +0000</bug_when>
    <thetext>Created attachment 801
CodeFirst_TimeAndAlarmDevice_ver1

Uploaded ECR proposal, ver 1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17015</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-23 18:24:45 +0000</bug_when>
    <thetext>Feedback received so far:

- Set of changes seems to be a relaxation of requirements- objects/methods that are currently required will be only conditionally required.

- Impact to FWTS to be noted; FWTS can be updated to match new requirements

- Currently TAD supported in Windows, Samer to investigate/confirm support in other OSes.

- Q: For systems that support TAD wake from S4/S5 but do not implement S3, does _GCP return bits 0 &amp; 1 set? Needs further clarification in ECR.

- There is desire to allow wake up (from S4/S5) on systems that do not support S3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17089</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-26 16:39:23 +0000</bug_when>
    <thetext>Additional feedback:

If we do allow wake from S4/S5, but not S3 (because the system does not support it), then we may need to specify the rule as 

“If wake from Sx is supported, then wake from all S(x-n) must also be supported if the platform has an S(x-n) state. If the platform does not support an Sx state, then the wake support bits must be 0 for that state”. 

The scenario that should be avoided is that a platform can’t support wake from S4 with the TAD, but not wake from S3 if both states are available. That complicates OS policy quite a bit, and doesn’t really provide any simplification at the hardware level.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17090</commentid>
    <comment_count>7</comment_count>
    <who name="Rob Gough">rgough</who>
    <bug_when>2021-08-26 16:46:22 +0000</bug_when>
    <thetext>Perhaps instead of adding &quot;from D3 is&quot; to bits 0 and 1, &quot;from any S-state is&quot; is a more useful change?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17093</commentid>
    <comment_count>8</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-26 19:07:25 +0000</bug_when>
    <thetext>Some feedback from UEFI Forum on whether LOW_POWER_S0_IDLE_CAPABLE should be considered (For platforms that support modern standby, and not S3).

Also, need to get feedback from VMware and Linux, which seem to support the interface.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17111</commentid>
    <comment_count>9</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-30 16:28:24 +0000</bug_when>
    <thetext>additional feedback received from Alex Hung:

&quot;The ECR (https://bugzilla.tianocore.org/attachment.cgi?id=801) says &quot;This object is required if the capabilities bit 0 is set to 1&quot;. Does this mean the objects are optional when bit 0 is set to 0? How does an OS behave in each case?

Or the intention is something like &quot;The object is present if and only if the capabilities bit 0 is set to 1&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17119</commentid>
    <comment_count>10</comment_count>
    <who name="Andrei Warkentin">andrey.warkentin</who>
    <bug_when>2021-08-31 15:06:48 +0000</bug_when>
    <thetext>Ok from VMware ESXi stand point</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17289</commentid>
    <comment_count>11</comment_count>
      <attachid>829</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-09-16 19:09:02 +0000</bug_when>
    <thetext>Created attachment 829
CodeFirst_TimeAndAlarmDevice_ver2

Updated per ASWG 9/16 meeting to remove the &quot;..from S3 is..&quot; text from Bits 0 and 1 definition, reverting back to original ACPI spec definition. This is done to match existing implementations that set those bits, but do not support S3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17324</commentid>
    <comment_count>12</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-09-21 13:42:23 +0000</bug_when>
    <thetext>(In reply to Samer El-Haj-Mahmoud from comment #9)
&gt; additional feedback received from Alex Hung:
&gt; 
&gt; &quot;The ECR (https://bugzilla.tianocore.org/attachment.cgi?id=801) says &quot;This
&gt; object is required if the capabilities bit 0 is set to 1&quot;. Does this mean
&gt; the objects are optional when bit 0 is set to 0? How does an OS behave in
&gt; each case?
&gt; 
&gt; Or the intention is something like &quot;The object is present if and only if the
&gt; capabilities bit 0 is set to 1&quot;

Offline discussion with Alex, who indicated his agreement with this explanation and the change:


The intention is that the OS should rely on this object being present only if bit 0 is set. 
 
This will have to be a change for FWTS to 
• Give an error if the bit is set, but the object is missing / not implemented
• Give possibly a warning if the object is implemented, but bit 0 is not set (as OSes may not be able to use the object)
 
We agreed that OSes today do not check for bit 0, and try to call the object regardless. And that OSes should probably change to check bit 0 and call the object only if it is set.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17422</commentid>
    <comment_count>13</comment_count>
      <attachid>839</attachid>
    <who name="Rob Gough">rgough</who>
    <bug_when>2021-09-30 17:25:24 +0000</bug_when>
    <thetext>Created attachment 839
Minor changes to v2 described in comment below.

I think there are two more minor changes that need to be applied. The string &quot;from S3&quot; should be removed from the text in the following bullets.

•	If wake on AC from S4 is supported (bit 5), then wake on AC from S3 must be supported (bit 0)

•	If wake on DC from S4 is supported (bit 7), then wake on DC from S3 must be supported (bit 1)


I took the liberty to make these changes, attached here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17427</commentid>
    <comment_count>14</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-01 08:56:16 +0000</bug_when>
    <thetext>(In reply to Rob Gough from comment #13)
&gt; Created attachment 839 [details]
&gt; Minor changes to v2 described in comment below.
&gt; 
The changes in v3 looks good. Thanks Rob!

I did make minor changes (uploaded v3b) to clarify the OS and FWTS impact of this ECR. There is no change to the normative/actual spec text portion of the ECR.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17428</commentid>
    <comment_count>15</comment_count>
      <attachid>840</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-01 08:57:14 +0000</bug_when>
    <thetext>Created attachment 840
CodeFirst_TimeAndAlarmDevice_ver3b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17462</commentid>
    <comment_count>16</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-07 19:01:48 +0000</bug_when>
    <thetext>ASWG meeting 10/7: This is approved as new content for for ACPI.next spec. Closing this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17541</commentid>
    <comment_count>17</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-13 21:45:06 +0000</bug_when>
    <thetext>Link to ASWG approved ECR, for completeness: https://mantis.uefi.org/mantis/view.php?id=2253</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>801</attachid>
            <date>2021-08-18 12:39:40 +0000</date>
            <delta_ts>2021-08-18 12:39:40 +0000</delta_ts>
            <desc>CodeFirst_TimeAndAlarmDevice_ver1</desc>
            <filename>CodeFirst_TimeAndAlarmDevice_ver1.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>25283</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>829</attachid>
            <date>2021-09-16 19:09:02 +0000</date>
            <delta_ts>2021-09-16 19:09:02 +0000</delta_ts>
            <desc>CodeFirst_TimeAndAlarmDevice_ver2</desc>
            <filename>CodeFirst_TimeAndAlarmDevice_ver2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>25251</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>839</attachid>
            <date>2021-09-30 17:25:24 +0000</date>
            <delta_ts>2021-09-30 17:25:24 +0000</delta_ts>
            <desc>Minor changes to v2 described in comment below.</desc>
            <filename>CodeFirst_TimeAndAlarmDevice_ver3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>25027</size>
            <attacher name="Rob Gough">rgough</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>840</attachid>
            <date>2021-10-01 08:57:14 +0000</date>
            <delta_ts>2021-10-01 08:57:14 +0000</delta_ts>
            <desc>CodeFirst_TimeAndAlarmDevice_ver3b</desc>
            <filename>CodeFirst_TimeAndAlarmDevice_ver3b.docx</filename>
            <type>application/octet-stream</type>
            <size>5635</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3375</bug_id>
          
          <creation_ts>2021-05-05 07:55:12 +0000</creation_ts>
          <short_desc>Add &apos;connect&apos; argument to bcfg command</short_desc>
          <delta_ts>2021-05-06 17:44:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Grzegorz Bernacki">gjb</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.a.rothman</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
          
          <cf_industrystandardspecifications>UEFI Shell Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15909</commentid>
    <comment_count>0</comment_count>
    <who name="Grzegorz Bernacki">gjb</who>
    <bug_when>2021-05-05 07:55:12 +0000</bug_when>
    <thetext>New arugument &apos;connect&apos; will allow user to select which devices shall be connected at boot.
Possible options are:

bcfg connect all
bcfg connect net
bcfg connect minimal

When this parameter is used, new variable &apos;BootDiscoveryPolicy&apos; will be set with choosen option. That variable will be checked by platform BM code and BootPolicyManagerProtocol will be used to connect specified class of devices. In case of &apos;minimal&apos; option, no additional devices will be connected.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15911</commentid>
    <comment_count>1</comment_count>
      <attachid>718</attachid>
    <who name="Grzegorz Bernacki">gjb</who>
    <bug_when>2021-05-05 08:46:12 +0000</bug_when>
    <thetext>Created attachment 718
Proposed changes in Uefi Shell Specification</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15927</commentid>
    <comment_count>2</comment_count>
    <who name="Michael A. Rothman">michael.a.rothman</who>
    <bug_when>2021-05-05 16:18:06 +0000</bug_when>
    <thetext>I think that if we want to have the shell behavior to be universal, a proposal for standardizing the variable associated with the expected behavior needs to be made into the main UEFI specification in addition to the Shell specification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15940</commentid>
    <comment_count>3</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-06 17:44:56 +0000</bug_when>
    <thetext>Agreed that a shell behavior that is based on a non-standard NV variable is not desired. For now, we will proceed with using the UEFI Platform Boot Policy Protocol directly, without need for shell bcfg changes.

Closing this ECR</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>718</attachid>
            <date>2021-05-05 08:46:12 +0000</date>
            <delta_ts>2021-05-05 08:46:12 +0000</delta_ts>
            <desc>Proposed changes in Uefi Shell Specification</desc>
            <filename>bcfg_connect_argument.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>7471</size>
            <attacher name="Grzegorz Bernacki">gjb</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3870</bug_id>
          
          <creation_ts>2022-03-17 01:41:02 +0000</creation_ts>
          <short_desc>Update BFV searching algorithm in VTF0</short_desc>
          <delta_ts>2022-03-31 05:55:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ted.kuo</reporter>
          <assigned_to>ted.kuo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>min.m.xu</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18635</commentid>
    <comment_count>0</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-03-17 01:41:02 +0000</bug_when>
    <thetext>The latest BFV searching algorithm in VTF0 may fail to find out the correct BFV address in BIOS with some scenarios. Need to update the searching algorithm to get the issue fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18678</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 21:47:58 +0000</bug_when>
    <thetext>Ted: please work out the solution to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18737</commentid>
    <comment_count>2</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-03-31 05:55:13 +0000</bug_when>
    <thetext>UefiCpuPkg: Update BFV searching algorithm in VTF0

REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3870
The new algorithm searches FFS3 GUID first and then FFS2 GUID at
every 4KB address in the top 16MB just below 4GB.

Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Cc: Debkumar De &lt;debkumar.de@intel.com&gt;
Cc: Harry Han &lt;harry.han@intel.com&gt;
Cc: Catharine West &lt;catharine.west@intel.com&gt;
Reviewed-by: Min Xu &lt;min.m.xu@intel.com&gt;
Signed-off-by: Ted Kuo &lt;ted.kuo@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3132</bug_id>
          
          <creation_ts>2020-12-21 09:39:16 +0000</creation_ts>
          <short_desc>OVMF RFE: VCPU hot-unplug with SMI</short_desc>
          <delta_ts>2021-03-16 10:03:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1512</dependson>
    
    <dependson>2929</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Ankur Arora">ankur.a.arora</assigned_to>
          <cc>ankur.a.arora</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14631</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-21 09:39:16 +0000</bug_when>
    <thetext>This feature request tracks the &quot;unplug side&quot; of bug 1512.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14632</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-21 09:42:38 +0000</bug_when>
    <thetext>Patches on the list from Ankur Arora:

* [edk2-devel] [RFC PATCH 0/5]
  support CPU hot-unplug
https://www.redhat.com/archives/edk2-devel-archive/2020-December/msg00553.html
https://edk2.groups.io/g/devel/message/68460

QEMU patches from Igor Mammedov:

* [qemu-devel] [PATCH 0/8]
  add support for cpu hot-unplug with SMI broadcast enabled
https://lists.gnu.org/archive/html/qemu-devel/2020-12/msg01107.html

* [qemu-devel] [PATCH v2 0/8]
  add support for cpu hot-unplug with SMI broadcast enabled
https://lists.gnu.org/archive/html/qemu-devel/2020-12/msg01409.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14834</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-18 12:29:58 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v2 00/10] support CPU hot-unplug
msgid: &lt;20210107195515.106158-1-ankur.a.arora@oracle.com&gt;
https://edk2.groups.io/g/devel/message/69978
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00465.html

* [edk2-devel] [PATCH v3 00/10] support CPU hot-unplug
msgid: &lt;20210115074533.277448-1-ankur.a.arora@oracle.com&gt;
https://edk2.groups.io/g/devel/message/70381
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00868.html

* [edk2-devel] [PATCH v4 0/9] support CPU hot-unplug
msgid: &lt;20210118063457.358581-1-ankur.a.arora@oracle.com&gt;
https://edk2.groups.io/g/devel/message/70478
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00965.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14921</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-26 11:52:06 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v5 0/9] support CPU hot-unplug
msgid: &lt;20210126064440.299596-1-ankur.a.arora@oracle.com&gt;
https://edk2.groups.io/g/devel/message/70759
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01246.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14935</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-29 20:05:32 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v6 0/9] support CPU hot-unplug
msgid: &lt;20210129005950.467638-1-ankur.a.arora@oracle.com&gt;
https://edk2.groups.io/g/devel/message/70875
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01354.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15083</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-19 17:01:09 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v7 00/10] support CPU hot-unplug
msgid: &lt;20210219090444.1332380-1-ankur.a.arora@oracle.com&gt;
https://edk2.groups.io/g/devel/message/71828
https://listman.redhat.com/archives/edk2-devel-archive/2021-February/msg00884.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15089</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-22 05:28:36 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v8 00/10] support CPU hot-unplug
msgid: &lt;20210222071928.1401820-1-ankur.a.arora@oracle.com&gt;
https://edk2.groups.io/g/devel/message/71911
https://listman.redhat.com/archives/edk2-devel-archive/2021-February/msg00963.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15289</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-12 15:23:01 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v9 00/10] support CPU hot-unplug
msgid: &lt;20210312062656.2477515-1-ankur.a.arora@oracle.com&gt;
https://edk2.groups.io/g/devel/message/72702
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00449.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15317</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-16 10:03:56 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #7)
&gt;| * [edk2-devel] [PATCH v9 00/10] support CPU hot-unplug
&gt;| msgid: &lt;20210312062656.2477515-1-ankur.a.arora@oracle.com&gt;
&gt;| https://edk2.groups.io/g/devel/message/72702
&gt;| https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00449.html

Merged as commit range 4751a48aeb2a..f3bdfc41866e, via &lt;https://github.com/tianocore/edk2/pull/1494&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3617</bug_id>
          
          <creation_ts>2021-09-10 17:27:46 +0000</creation_ts>
          <short_desc>CryptoPkg/BaseCryptLib: Pkcs7Verify() does extra buffer malloc and copy</short_desc>
          <delta_ts>2021-10-12 21:47:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Morgan">bobm</reporter>
          <assigned_to name="Bob Morgan">bobm</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17235</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Morgan">bobm</who>
    <bug_when>2021-09-10 17:27:46 +0000</bug_when>
    <thetext>Pkcs7Verify() creates an empty mem BIO for the input data buffer and then copies the input data buffer to it requiring openssl to allocate memory for the buffer copy in this sequence in CryptoPkg/Library/BaseCryptLib/Pk/CryptPkcs7VerifyCommon.c line 867


  DataBio = BIO_new (BIO_s_mem ());
  if (DataBio == NULL) {
    goto _Exit;
  }

  if (BIO_write (DataBio, InData, (int) DataLength) &lt;= 0) {
    goto _Exit;
  }


This memory allocation and buffer copy can be avoided by using  BIO_new_mem_buf() to create a mem BIO wrapper for the input data using this sequence instead:

  DataBio = BIO_new_mem_buf (InData, (int) DataLength);
  if (DataBio == NULL) {
    goto _Exit;
  }

See also https://edk2.groups.io/g/devel/message/80463</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17236</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Morgan">bobm</who>
    <bug_when>2021-09-10 17:37:37 +0000</bug_when>
    <thetext>Patch v2 submitted: https://edk2.groups.io/g/devel/message/80509

This patch has been tested with a prototype FmpDxe driver with calling sequence AuthenticateFmpImage()-&gt;FmpAuthenticatedHandlerPkcs7()-&gt;Pkcs7Verify() to authenticate an FMP payload pkc7s signature.

Without this patch, an 8MB payload would fail the Pkcs7Verify() call to BIO_write() shown above when CRYPTO_malloc() failed during the write sequence.  With the patch, there is no malloc or copy of the InData buffer and the pkcs7 signature of the FMP payload is successfully verified.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17261</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-13 21:34:04 +0000</bug_when>
    <thetext>Bob is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17448</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Morgan">bobm</who>
    <bug_when>2021-10-06 16:01:52 +0000</bug_when>
    <thetext>Patch v2 submitted and Reviewed-by: Jiewen Yao &lt;Jiewen.yao@intel.com&gt;
See https://edk2.groups.io/g/devel/message/80535</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17511</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-10-12 21:47:00 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/2055

https://github.com/tianocore/edk2/commit/f22feb0e3b3f08b95201b258b104c45a2acef71f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3017</bug_id>
          
          <creation_ts>2020-10-21 03:56:34 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: LoadMicrocodeDefault() failed with padding in FV.</short_desc>
          <delta_ts>2020-10-27 02:07:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14061</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-10-21 03:56:34 +0000</bug_when>
    <thetext>Platform microcode FV may have padding between each version of microcode binary, and current FSP-T/LoadMicrocodeDefault() cannot handle this case and return not_found unexpectedly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14098</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-10-27 02:07:37 +0000</bug_when>
    <thetext>commit 31e97bdae2c66e28c5c7df1340757304e1b76d41 
Author: Cosmo Lai &lt;cosmo.lai@intel.com&gt;
Date:   Thu Oct 22 10:51:27 2020 +0800

    IntelFsp2Pkg/FspSecCore: LoadMicrocodeDefault() failed with padding in FV.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3017

    Platform microcode FV may have padding between each version of microcode
    binary, and current FSP-T/LoadMicrocodeDefault() cannot handle this case
    and return not_found unexpectedly.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Signed-off-by: Cosmo Lai &lt;cosmo.lai@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3512</bug_id>
          
          <creation_ts>2021-07-28 13:38:23 +0000</creation_ts>
          <short_desc>Pointer size mismatch in EvacuateTempRam()</short_desc>
          <delta_ts>2021-09-28 11:47:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Terry Lee">terry.lee</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable202008</cf_release_observed>
    
    <cf_release_observed>edk2-stable202011</cf_release_observed>
    
    <cf_release_observed>edk2-stable202102</cf_release_observed>
    
    <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16716</commentid>
    <comment_count>0</comment_count>
    <who name="Terry Lee">terry.lee</who>
    <bug_when>2021-07-28 13:38:23 +0000</bug_when>
    <thetext>The EvacuateTempRam() function in MdeModulePkg/Core/Pei/Dispatcher/Dispatcher.c uses local pointer variables (MigratedFvHeader and RawDataFvHeader) allocated from the stack.  In 32-bit PEI environments, the pointer variables would be 32 bits in size.  The pointers are used as output parameters for calling PeiServicesAllocatePages(), which expects 64-bit output buffer of type EFI_PHYSICAL_ADDRESS.  When PeiServicesAllocatePages() writes to the output buffer, data overflow results.  Depending on the compiler allocation of the pointer variable addresses, the data overflow could results in immediate boot hang.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16761</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 21:55:51 +0000</bug_when>
    <thetext>Lee: can you provide the patch to fix it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16934</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:52:16 +0000</bug_when>
    <thetext>Include original owner for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17054</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 22:13:06 +0000</bug_when>
    <thetext>Michael, can you fix it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17229</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-08 23:47:55 +0000</bug_when>
    <thetext>v1 patch: https://edk2.groups.io/g/devel/message/80402</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17396</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-28 11:47:51 +0000</bug_when>
    <thetext>Patch merged in commit https://github.com/tianocore/edk2/commit/c19d18136ef920e3e84f961e2a335a41147adcb8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3405</bug_id>
          
          <creation_ts>2021-05-19 10:47:29 +0000</creation_ts>
          <short_desc>AsmReadSs() for the GCC toolchain returns DS instead of SS</short_desc>
          <delta_ts>2021-06-04 10:17:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Satoshi Tanda">tanda.sat</reporter>
          <assigned_to name="Satoshi Tanda">tanda.sat</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16102</commentid>
    <comment_count>0</comment_count>
    <who name="Satoshi Tanda">tanda.sat</who>
    <bug_when>2021-05-19 10:47:29 +0000</bug_when>
    <thetext>AsmReadSs() in GccInlinePriv.c returns DS instead of SS. Normally do not manifest as an issue but is a bug (and bit me).

https://github.com/tianocore/edk2/blob/037090cb7c0063bcb7788982cab73bf7c5b66924/MdePkg/Library/BaseLib/X64/GccInlinePriv.c#L907

It is going to a single character fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16119</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-23 07:31:56 +0000</bug_when>
    <thetext>The bug affects both of the following files:

MdePkg/Library/BaseLib/Ia32/GccInlinePriv.c
MdePkg/Library/BaseLib/X64/GccInlinePriv.c

Can you please submit a patch that fixes both files? Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16134</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-25 08:07:04 +0000</bug_when>
    <thetext>Patch on the list:

* [edk2-devel] [PATCH] MdePkg: Fix AsmReadSs() with GCC toolchain

https://edk2.groups.io/g/devel/message/75541
https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00879.html
message-id: &lt;d014090344f4822b57e806cc8d6a27bd5233429d.1621829775.git.tanda.sat@gmail.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16262</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-04 04:58:36 +0000</bug_when>
    <thetext>Fixed in commit c410ad4da4b7 (&quot;MdePkg/BaseLib: Fix AsmReadSs() with GCC toolchain&quot;, 2021-06-04), via &lt;https://github.com/tianocore/edk2/pull/1687&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16265</commentid>
    <comment_count>4</comment_count>
    <who name="Satoshi Tanda">tanda.sat</who>
    <bug_when>2021-06-04 09:08:31 +0000</bug_when>
    <thetext>Thank you for guiding me on this case, Laszlo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16266</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-04 10:17:37 +0000</bug_when>
    <thetext>No problem; our workflow is somewhat complex, thank you for putting up with it!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3275</bug_id>
          
          <creation_ts>2021-03-23 14:40:10 +0000</creation_ts>
          <short_desc>Add AMD Secure Nested Paging Support</short_desc>
          <delta_ts>2021-12-09 05:55:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="BRIJESH SINGH">brijesh.singh</reporter>
          <assigned_to name="BRIJESH SINGH">brijesh.singh</assigned_to>
          <cc>brijesh.singh</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15412</commentid>
    <comment_count>0</comment_count>
    <who name="BRIJESH SINGH">brijesh.singh</who>
    <bug_when>2021-03-23 14:40:10 +0000</bug_when>
    <thetext>AMD added a Secure Encrypted Virtualization (SEV) feature in EDKII, the first x86 technology designed to cryptographically isolate virtual machines (VMs) from the hypervisor. Recently, AMD added SEV-ES (Encrypted State) feature which added additional protection for the CPU register state.

The new Zen CPU introduces the next generation of SEV called SEV-SNP (Secure Nested Paging). SEV-SNP builds upon existing SEV and SEV-ES functionality while adding new hardware-based memory protections. SEV-SNP adds a strong memory integrity protection to help prevent malicious hypervisor-based attacks like data replay, memory re-mapping, and more in order to create an isolated memory encryption environment. Also, SEV-SNP introduces several optional security enhancements designed to support additional VM use models offering string protections around the interrupt behavior, and offer increased protection against the side-channel attacks.

This Bugzilla tracks the support for the SEV-SNP feature in the OVMF.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15418</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-24 15:11:50 +0000</bug_when>
    <thetext>Patches on the list from Brijesh:

* [edk2-devel] [RFC PATCH 00/19]
  Add AMD Secure Nested Paging (SEV-SNP) support

msgid: &lt;20210324153215.17971-1-brijesh.singh@amd.com&gt;
https://edk2.groups.io/g/devel/message/73216
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00963.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15881</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-03 04:15:01 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH RFC v2 00/28]
  Add AMD Secure Nested Paging (SEV-SNP) support

https://edk2.groups.io/g/devel/message/74629
https://listman.redhat.com/archives/edk2-devel-archive/2021-April/msg01043.html
msgid: &lt;20210430115148.22267-1-brijesh.singh@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15980</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-10 12:10:25 +0000</bug_when>
    <thetext>The patch set mentioned in comment 1 and comment 2 has been split to multiple &quot;waves&quot;. The first wave is:

* [edk2-devel] [PATCH 00/13] Add GHCBv2 macro and helpers

https://edk2.groups.io/g/devel/message/74823
https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00142.html
msgid: &lt;20210507203838.23706-1-brijesh.singh@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16069</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-16 21:11:20 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v2 00/13] Add GHCBv2 macro and helpers

https://edk2.groups.io/g/devel/message/75077
https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00390.html
msgid: &lt;20210512234615.1726-1-brijesh.singh@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16103</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-20 04:50:41 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v3 00/13] Add GHCBv2 macro and helpers

https://edk2.groups.io/g/devel/message/75389
https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00718.html
msgid: &lt;20210519181949.6574-1-brijesh.singh@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16213</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-29 08:17:01 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #5)
&gt; [edk2-devel] [PATCH v3 00/13] Add GHCBv2 macro and helpers
&gt; 
&gt; https://edk2.groups.io/g/devel/message/75389
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00718.html
&gt; msgid: &lt;20210519181949.6574-1-brijesh.singh@amd.com&gt;

This wave of patches has been merged as commit range dbc22a178546..adfa3327d4fc, via &lt;https://github.com/tianocore/edk2/pull/1675&gt;. The BZ should remain open for the next wave(s).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16214</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-29 08:21:06 +0000</bug_when>
    <thetext>* [edk2-devel] [RESEND PATCH RFC v3 00/22]
  Add AMD Secure Nested Paging (SEV-SNP) support

msgid: &lt;20210526231118.12946-1-brijesh.singh@amd.com&gt;
https://edk2.groups.io/g/devel/message/75716
https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg01009.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16497</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-30 12:21:02 +0000</bug_when>
    <thetext>* [edk2-devel] [RFC PATCH v4 00/27]
  Add AMD Secure Nested Paging (SEV-SNP) support

msgid: &lt;20210628174223.1302-1-brijesh.singh@amd.com&gt;
https://edk2.groups.io/g/devel/message/77187
https://listman.redhat.com/archives/edk2-devel-archive/2021-June/msg01307.html


* [edk2-devel] [RFC PATCH v5 00/28]
  Add AMD Secure Nested Paging (SEV-SNP) support

msgid: &lt;20210630125321.30278-1-brijesh.singh@amd.com&gt;
https://edk2.groups.io/g/devel/message/77335
https://listman.redhat.com/archives/edk2-devel-archive/2021-June/msg01455.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16721</commentid>
    <comment_count>9</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-07-28 21:07:26 +0000</bug_when>
    <thetext>Add initial patch https://github.com/tianocore/edk2/pull/1842

githash: dc485c556d5f5db21debe8de3a45a7564aacbe24..b461d67639f2deced77e9bb967d014b7cfcd75f8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17971</commentid>
    <comment_count>10</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-12-09 05:55:41 +0000</bug_when>
    <thetext>Merge at https://github.com/tianocore/edk2/pull/2269</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3758</bug_id>
          
          <creation_ts>2021-12-02 08:02:07 +0000</creation_ts>
          <short_desc>MemoryAllocationLib fails in clang release builds</short_desc>
          <delta_ts>2022-06-14 07:00:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ross Burton">ross.burton</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17897</commentid>
    <comment_count>0</comment_count>
    <who name="Ross Burton">ross.burton</who>
    <bug_when>2021-12-02 08:02:07 +0000</bug_when>
    <thetext>A release build using clang fails in MemoryAllocationLib:

&quot;clang&quot; -MMD -MF build/Build/ArmVirtQemu-AARCH64/RELEASE_CLANG38/AARCH64/MdePkg/Library/UefiUsbLib/UefiUsbLib/OUTPUT/Hid.obj.deps -g -Os -fshort-wchar -fno-builtin -fno-strict-aliasing -Wall -Werror -Wno-array-bounds -include AutoGen.h -fno-common -mlittle-endian -fno-short-enums -fverbose-asm -funsigned-char -ffunction-sections -fdata-sections -Wno-address -fno-asynchronous-unwind-tables -fno-unwind-tables -fno-pic -fno-pie -ffixed-x18 -target aarch64-poky-linux -mcmodel=small -Wno-parentheses-equality -Wno-tautological-compare -Wno-tautological-constant-out-of-range-compare -Wno-empty-body -Wno-unused-const-variable -Wno-varargs -Wno-unknown-warning-option   -flto -O3 -DMDEPKG_NDEBUG -DDISABLE_NEW_DEPRECATED_INTERFACES -D ENABLE_MD5_DEPRECATED_INTERFACES -c -o build/Build/ArmVirtQemu-AARCH64/RELEASE_CLANG38/AARCH64/MdePkg/Library/UefiUsbLib/UefiUsbLib/OUTPUT/./Hid.obj -Iedk2/MdePkg/Library/UefiUsbLib -Ibuild/Build/ArmVirtQemu-AARCH64/RELEASE_CLANG38/AARCH64/MdePkg/Library/UefiUsbLib/UefiUsbLib/DEBUG -Iedk2/MdePkg -Iedk2/MdePkg/Include -Iedk2/MdePkg/Test/UnitTest/Include -Iedk2/MdePkg/Include/AArch64 edk2/MdePkg/Library/UefiUsbLib/Hid.c

edk2/MdePkg/Library/UefiMemoryAllocationLib/MemoryAllocationLib.c:142:15: error: variable &apos;Status&apos; set but not used [-Werror,-Wunused-but-set-variable]
  EFI_STATUS  Status;
              ^
edk2/MdePkg/Library/UefiMemoryAllocationLib/MemoryAllocationLib.c:343:15: error: variable &apos;Status&apos; set but not used [-Werror,-Wunused-but-set-variable]
  EFI_STATUS  Status;
              ^
Building ... edk2/ArmPkg/Drivers/ArmGic/ArmGicLib.inf [AARCH64]
edk2/MdePkg/Library/UefiMemoryAllocationLib/MemoryAllocationLib.c:810:17: error: variable &apos;Status&apos; set but not used [-Werror,-Wunused-but-set-variable]
  EFI_STATUS    Status;
                ^
3 errors generated.

In those functions the user of Status is ASSERT_EFI_ERROR, which expands to nothing in release builds.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17960</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-12-07 21:54:24 +0000</bug_when>
    <thetext>the proposal is to disable this warning in release build flag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18862</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-19 22:08:28 +0000</bug_when>
    <thetext>-Wno-unused-but-set-variable has been added for GCC tool chain. It should be added for CLANG tool chain. 

ross.burton@arm.com: would you help make this change?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19076</commentid>
    <comment_count>3</comment_count>
    <who name="Ross Burton">ross.burton</who>
    <bug_when>2022-06-14 07:00:16 +0000</bug_when>
    <thetext>This was fixed in c9b7c6e0cc7da76b74bcdd8c90cef956d5ae971c (2022.02).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3159</bug_id>
          
          <creation_ts>2021-01-08 13:13:32 +0000</creation_ts>
          <short_desc>remove CPU_REGISTER_TABLE allocations in CpuS3DataDxe, in OvmfPkg and UefiCpuPkg</short_desc>
          <delta_ts>2021-01-21 09:38:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14762</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-08 13:13:32 +0000</bug_when>
    <thetext>@ 9783767fcfc2:

OvmfPkg/CpuS3DataDxe and UefiCpuPkg/CpuS3DataDxe allocate the RegisterTable and PreSmmInitRegisterTable arrays in ACPI_CPU_DATA just so every processor in the system can have its own empty register table, matched by APIC ID. This has never been useful.

Given &lt;https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00399.html&gt; (msgid: 20210107104650.27404-1-star.zeng@intel.com), i.e., the NULL-check in the IsRegisterTableEmpty() function, we should soon set both RegisterTable and PreSmmInitRegisterTable in ACPI_CPU_DATA to NULL, in the CpuS3DataDxe drivers. That will save some normal RAM, and simplify these drivers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14780</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-11 04:25:39 +0000</bug_when>
    <thetext>Pre-requisite patch is now upstream:

* [edk2-devel] [PATCH V4]
  UefiCpuPkg PiSmmCpuDxeSmm: Reduce SMRAM consumption in CpuS3.c

https://edk2.groups.io/g/devel/message/70097
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00584.html
Message-Id: 20210111015419.28368-1-star.zeng@intel.com

--&gt;

Merged as commit e992cc3f4859, via &lt;https://github.com/tianocore/edk2/pull/1331&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14790</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-12 14:21:59 +0000</bug_when>
    <thetext>Posted:

* [edk2-devel] [PATCH 0/3]
  UefiCpuPkg, OvmfPkg: do not allocate useless register tables for S3 resume

Message-Id: &lt;20210112191934.12459-1-lersek@redhat.com&gt;
https://edk2.groups.io/g/devel/message/70167
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00652.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14836</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-19 10:55:32 +0000</bug_when>
    <thetext>Posted v2:

* [edk2-devel] [PATCH v2 0/4]
  UefiCpuPkg, OvmfPkg: do not allocate useless register tables for S3 resume

Message-Id: &lt;20210119155440.2262-1-lersek@redhat.com&gt;
https://edk2.groups.io/g/devel/message/70548
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01036.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14865</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-20 13:46:53 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Posted v2:
&gt; 
&gt; * [edk2-devel] [PATCH v2 0/4]
&gt;   UefiCpuPkg, OvmfPkg: do not allocate useless register tables for S3 resume
&gt; 
&gt; Message-Id: &lt;20210119155440.2262-1-lersek@redhat.com&gt;
&gt; https://edk2.groups.io/g/devel/message/70548
&gt; https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01036.html

Series merged as commit range e843a21e23ea..339371ef78eb, via &lt;https://github.com/tianocore/edk2/pull/1373&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14880</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-21 09:38:01 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #4)
&gt; (In reply to Laszlo Ersek from comment #3)
&gt; &gt; Posted v2:
&gt; &gt; 
&gt; &gt; * [edk2-devel] [PATCH v2 0/4]
&gt; &gt;   UefiCpuPkg, OvmfPkg: do not allocate useless register tables for S3 resume
&gt; &gt; 
&gt; &gt; Message-Id: &lt;20210119155440.2262-1-lersek@redhat.com&gt;
&gt; &gt; https://edk2.groups.io/g/devel/message/70548
&gt; &gt; https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01036.html
&gt; 
&gt; Series merged as commit range e843a21e23ea..339371ef78eb, via
&gt; &lt;https://github.com/tianocore/edk2/pull/1373&gt;.

This series caused a regression.

Star Zeng posted the following fix:

* [edk2-devel] [PATCH]
  UefiCpuPkg RegisterCpuFeaturesLib: NumberOfCpus may be uninitialized

https://edk2.groups.io/g/devel/message/70614
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01101.html
msgid &lt;20210121093944.1621-1-star.zeng@intel.com&gt;

Which has now been merged as commit 6c5801be6ef3, via &lt;https://github.com/tianocore/edk2/pull/1380&gt;.

(Detached review from Ray:
https://edk2.groups.io/g/devel/message/70615
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01102.html
msgid &lt;CO1PR11MB4930879068372FDA9634033C8CA10@CO1PR11MB4930.namprd11.prod.outlook.com&gt;)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3040</bug_id>
          
          <creation_ts>2020-11-02 02:35:34 +0000</creation_ts>
          <short_desc>BaseTools: build failure for RISC-V using GCC 10</short_desc>
          <delta_ts>2021-05-28 08:53:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3096</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>pete</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>xypron.glpk</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14164</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-02 02:35:34 +0000</bug_when>
    <thetext>When trying to compile the EDK II UEFI shell for RISC-V I get the
following types of errors:

WriteSections64():
Build/Shell/RELEASE_GCC5/RISCV64/ShellPkg/Application/Shell/EA4BB293-2D7F-4456-A681-1F22F42CD0BC/DEBUG/Shell.dll
unsupported ELF EM_RISCV64 relocation 0x13.

0x13 is R_RISCV_CALL_PLT.

WriteRelocations64():
Build/Shell/RELEASE_GCC5/RISCV64/ShellPkg/DynamicCommand/TftpDynamicCommand/TftpApp/DEBUG/tftp.dll
unsupported ELF EM_RISCV64 relocation 0x14

0x14 is R_RISCV_GOT_HI20.

I am using binutils 2.35.1 and GCC 10.2 as delivered with Debian Bullseye.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14165</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-02 02:40:44 +0000</bug_when>
    <thetext>On 11/2/20 4:59 AM, Chang, Abner (HPS SW/FW Technologist) wrote:

Yes, this is what Leif told me to address (relocation 0x13 and 0x14) for GCC as they done for AARCH64 on edk2 Basetool.

Leif ever told me to we may try  to use -fno-pie to get rid of GOT however seems it doesn&apos;t work on GCC 8.3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15707</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-15 20:54:52 +0000</bug_when>
    <thetext>*** Bug 3299 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16205</commentid>
    <comment_count>3</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-05-28 08:53:22 +0000</bug_when>
    <thetext>This is a duplicate of BZ3096, which is in the process of being addressed in https://edk2.groups.io/g/devel/message/75836.

*** This bug has been marked as a duplicate of bug 3096 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3533</bug_id>
          
          <creation_ts>2021-08-05 12:23:23 +0000</creation_ts>
          <short_desc>MinPlatformPkg: Do not hardcode CreationId/Revision to zero in table headers</short_desc>
          <delta_ts>2021-09-15 11:30:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16807</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 12:23:23 +0000</bug_when>
    <thetext>AcpiPlatform.c currently hardcodes the CreatorId and CreatorRevision fields to zero. The table can easily provide more accurate information by using  
 gEfiMdeModulePkgTokenSpaceGuid.PcdAcpiDefaultCreatorId and gEfiMdeModulePkgTokenSpaceGuid.PcdAcpiDefaultCreatorRevision.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16808</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 12:23:35 +0000</bug_when>
    <thetext>I will send a patch today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16813</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 12:40:47 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/78742

Part of the large patch series: https://edk2.groups.io/g/devel/message/78740</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17224</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-08 20:44:10 +0000</bug_when>
    <thetext>Still waiting on patch to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17277</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-15 11:30:07 +0000</bug_when>
    <thetext>Merged in the following commit https://github.com/tianocore/edk2-platforms/commit/424085683267105aef16037f387cfab6466e95ce</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3429</bug_id>
          
          <creation_ts>2021-06-02 20:35:28 +0000</creation_ts>
          <short_desc>Add TDVF to OvmfPkg</short_desc>
          <delta_ts>2021-11-26 09:48:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="mxu9">min.m.xu</assigned_to>
          <cc>ashraf.ali.s</cc>
    
    <cc>brijesh.singh</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>erdemaktas</cc>
    
    <cc>gaoliming</cc>
    
    <cc>thomas.lendacky</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16246</commentid>
    <comment_count>0</comment_count>
      <attachid>732</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-02 20:35:28 +0000</bug_when>
    <thetext>Created attachment 732
TDVF_Design_Review(v0.8)

See design in https://edk2.groups.io/g/devel/files/Designs/2021/0611.

Also attach the design foil in the bugzilla.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16248</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-02 20:43:00 +0000</bug_when>
    <thetext>Assign the bug to min.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16249</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-02 20:49:31 +0000</bug_when>
    <thetext>Comment from Laszlo:



Hi,

these are my comments on

https://edk2.groups.io/g/devel/files/Designs/2021/0611/TDVF_Design_Review%28v0.8%29.pptx

Sorry about the long address list; I wasn&apos;t sure if I should post my
comments publicly.


*** Slides 4, 6, 7: the &quot;one binary requirement&quot;.

(1) The presentation refers to &quot;OvmfPkgX64.dsc&quot; as &quot;the one&quot; on slide#4,
but then the explanation for the requirement, given on slide 7, speaks
about &quot;common attestation interface&quot;.

I think we have a misunderstanding here. The &quot;OvmfPkgX64.dsc&quot; platform
indeed contains SEV, SEV-ES, and (in the future, will contain) SEV-SNP
support. In that sense, adding TDX support to the same platform should
be (hopefully) possible, at the cost of ugly gymnastics in the reset vector.

But &quot;OvmfPkgX64.dsc&quot; is *already* different from the remotely attested
OVMF platform, namely &quot;OvmfPkg/AmdSev/AmdSevX64.dsc&quot;.

The latter has some additional modules (secret PEIM and DXE driver), it
has the Grub binary built in, and -- probably most importantly -- it
trusts host-originated information less than &quot;OvmfPkgX64.dsc&quot;.

For example, &quot;OvmfPkg/AmdSev/AmdSevX64.dsc&quot; has a dedicated
PlatformBootManagerLib instance, one that ignores the non-volatile UEFI
variables Boot#### and BootOrder, and ignores (thus far) the fw_cfg
originated kernel/initrd/cmdline as well.

It remains an &quot;area of research&quot; to see what else should be removed from
the traditional host-guest integration (which integration is usually
desirable for management and convenience), in the remotely-attested boot
scenario. See e.g. &lt;https://bugzilla.tianocore.org/show_bug.cgi?id=3180&gt;.

My point is that the &quot;one binary&quot; that the slide deck refers to (i.e.,
OvmfPkgX64.dsc) might prove OK for utilizing the Intel TDX *technology*
in itself. Simply enabling OVMF + a guest OS to boot in a TDX domain.

But &quot;OvmfPkgX64.dsc&quot; is *not* the &quot;one binary&quot; that is suitable for
remote attestation, which has a much broader scope, involving multiple
computers, networking, deployment, guest-owner/host-owner separation,
whatever. For the latter, we needed a separate platform anyway, even
with only SEV in mind; that&apos;s why &quot;OvmfPkg/AmdSev/AmdSevX64.dsc&quot; exists.


*** Slides 8-9: general boot flow -- TDVF; TDVF Flow

I&apos;m likely missing a big bunch of background here, so just a few questions:

(2) Not sure what RTMR is, but it&apos;s associated with &quot;Enable TrustedBoot&quot;
-- so is a virtual TPM a hard requirement?

... Back from slide 10: &quot;TCG measurement and event log framework w/o
TPM&quot; -- that&apos;s curious.

... Back from slide 43: feel free to skip this now; I will comment in
more detail below.

(3) Prepare AcpiTable -- OVMF fetches ACPI tables from QEMU; is this a
new (firmware originated) table that is installed in addition, or does
it replace QEMU&apos;s tables?

... Ignore for now, will comment on the MADT stuff later.

(4) Does DMA management mean a different IOMMU protocol? That is going
to conflict with the SEV IOMMU protocol. Depexes in OVMF expect one or
zero IOMMU protocols to be present.

... Back from slide 40: feel free to skip this now; I&apos;ll comment on this
separately, below.

(5) Enumerate VirtIO -- virtio enumeration is PCI based on x86. But I
see no mention of PCI. If you mean VirtioMmioDeviceLib, that&apos;s no good,
because it does not support virtio-1.0, only virtio-0.9.5.

... Back from slide 42: I got my answer to this on slide 42, so don&apos;t
worry about this point.

(6) The PEI phase is skipped as a whole. I don&apos;t see how that can be
reasonably brought together with either &quot;OvmfPkgX64.dsc&quot; or
&quot;OvmfPkg/AmdSev/AmdSevX64.dsc&quot;. I guess you can always modify SEC to
jump into DXE directly, but then why keep the PEI core and a bunch of
PEIMs in the firmware binary?

Also touched on by slide 9, TDVF Flow -- PEI is eliminated but SEC
becomes more heavy-weight.

Wouldn&apos;t this deserve a dedicated, separate platform DSC? The
8-bit/32-bit branching at the front of the reset vector is a smaller
complication in comparison.

Slide 6 references the mailing list archive:

  https://edk2.groups.io/g/devel/topic/81969494#74319

and in that message, I wrote:

    I&apos;m doubtful that this is a unique problem (&quot;just fix the reset
    vector&quot;) the likes of which will supposedly never return during the
    integration of SEV and TDX

See also:


https://listman.redhat.com/archives/edk2-devel-archive/2021-April/msg00784.html

where I said:

    It&apos;s not lost on me that we&apos;re talking about ~3 instructions.

    Let&apos;s keep a close eye on further &quot;polymorphisms&quot; that would require
    hacks.

The first 9 slides in the presentation introduce much-much more
intrusive problems than the &quot;polymorphism&quot; of the reset vector. Would I
be correct to say that my concern in the above messages was right? I
think I was only given a fraction of the necessary information when I
was asked &quot;do you agree &apos;one binary&apos; is viable&quot;.


*** Slide 10 -- Key impact to firmware

(7) &quot;CPUs are left running in long mode after exiting firmware&quot; -- what
kind of &quot;pen&quot; are we talking about? Does a HLT loop still work?

(8) &quot;I/O, MMIO, MSR accesses are different&quot; -- those are implemented by
low-level libraries in edk2; how can they be configured dynamically?

... Back from slide 53: I&apos;ll comment on slide 53 separately; ignore this.


*** Slide 11 -- TDVF Image (1)

(9) CFV – Configuration Firmware Volume (VarStore.fdf.inc), containing
SB keys -- how is this firmware volume populated (at build time)? Is
this a hexdump?

... Back from slide 16: it seems like CFV is a raw hexdump indeed; how
is that managed when keys change (at build time)?

(10) This slide (slide 11) basically describes an intrusive
reorganization of &quot;OvmfPkgX64.fdf&quot;. I don&apos;t think I can agree to that.
While confidential computing is important, it is not relevant for many
users. Even if we don&apos;t cause outright regressions for existent setups,
the maintenance cost of the traditional OVMF platform will skyrocket.

The big bunch of areas that SEV-ES introduced to MEMFD is already a big
complication. I&apos;d feel much better if we could isolate all that to a
dedicated &quot;remote attested boot&quot; firmware platform, and not risk the
functionality and maintenance of the traditional platform. I think this
ties in with my comment (1).

For example, seeing a configuration firmware volume (CFV) with secure
boot keys embedded, in the &quot;usual&quot; FDF, will confuse lots of people, me
included. In the traditional OVMF use case, we use a different method:
namely OvmfPkg/EnrollDefaultKeys, for &quot;priming&quot; a variable store
template, in the build environment.

Edk2 (and PI and UEFI) are definitely flexible enough for accommodating
TDX, but the existent, traditional OVMF platforms are a bad fit. In my
opinion.


*** Slide 12: TDVF Image (2)

(11) &quot;Page table should support both 4-level and 5-level page table&quot;

As a general development strategy, I would suggest building TDX support
in small, well-isolated layers. 5-level paging is not enabled (has never
been tested, to my knowledge) with OVMF on QEMU/KVM, regardless of
confidential computing, for starters. If 5-level paging is a strict
requirement for TDX, then it arguably needs to be implemented
independently of TDX, at first. So that the common edk2 architecture be
at least testable on QEMU/KVM with 5-level paging enabled.


*** Slide 13:

(12) My comment is that the GUID-ed structure chain already starts at a
fixed GPA (the &quot;AMD SEV option&quot;). Ordering between GUID-ed structures is
irrelevant, so any TDX-specific structures should be eligible for
appending to, prepending to, or intermixing with, other (possibly
SEV-specific) structures. There need not be a separate entry point, just
different GUIDS.

(13) Regarding &quot;4G-0x20[0x10] is OVMF AP reset vector (used in OVMF
implementation)&quot; -- I think this is a typo: this &quot;AP reset vector&quot; is
*not* used in OVMF. To my knowledge, it is a vestige from the UefiCpuPkg
reset vector. In OVMF, APs are booted via MpInitLib (in multiple
firmware phases), using INIT-SIPI-SIPI, and the reset vector for the
APs, posited through those IPIs, is prepared in low RAM.


*** Slides 14 through 16:

I consider these TDVF firmware image internals, implementation details
-- do whatever you need to do, just don&apos;t interfere with existing
platforms / use cases. See my comment (10) above.


*** Slides 17-21:

(14) Again, a very big difference from traditional OVMF: APs never enter
SEC in traditional OVMF. I assume this new functionality is part of
TdxStartupLib (from slide 18) -- will there be a Null instance of that?

Last week I posted a 43-part patch series to edk2-devel, for separating
out the dynamic Xen enlightenments from the IA32, IA32X64, X64
platforms, in favor of the dedicated OvmfXen platform. TDX seems to
bring in incomparably more complications than Xen, and the OvmfPkg
maintainers have found even the Xen complications troublesome in the
long term.

If I had had access to all this information when we first discussed &quot;one
binary&quot; on the mailing list, I&apos;d have never agreed to &quot;one binary&quot;. I&apos;m
OK with attempting one firmware binary for &quot;confidential computing&quot;, but
that &quot;one platform&quot; cannot be &quot;OvmfPkgX64.dsc&quot;.

Even if I make a comparison with just the &quot;technology&quot; (not the
remotely-attested deployment) of SEV and SEV-ES, as it is included in
&quot;OvmfPkgX64.dsc&quot;, TDX is hugely more complicated and intrusive than
that. SEV proved possible to integrate into existing modules, into the
existing boot flow, maybe through the addition of some new drivers (such
as a new IOMMU protocol implementation, and some &quot;clever&quot; depexes). But
we never had to restructure the FD layout, eliminate whole firmware
phases, or think about multiprocessing in the reset vector or the SEC phase.

In order to bring an example from the ARM world, please note that
platforms that use a PEI phase, and platforms that don&apos;t, are distinct
platforms. In ArmVirtPkg, two examples are ArmVirtQemu and
ArmVirtQemuKernel. The latter does not include the PEI Core.


*** Slides 22 through 34:

(15) All these extra tasks and complications are perfectly fine, as long
as they exist peacefully *separately* from the traditional (&quot;legacy&quot;)
OVMF platforms.

Honestly, in the virtual world, picking your firmware binary is easy.
The approach here reminds me of a physical firmware binary that includes
everything possible from &quot;edk2-platforms/Features/Intel&quot;, just so it can
be deployed to any physical board imaginable. That&apos;s not how Intel
builds physical firmware, right? We have &quot;edk2-platforms/Platform/Intel&quot;
and &quot;edk2-platforms/Silicon/Intel&quot; with many-many separate DSC files.


*** Slide 35-36: DXE phase

(16) &quot;Some DXE Drivers not allowed to load/start in Td guest -- Network
stack, RNG, ...&quot;

Same comment as (several times) above. The Linuxboot project is a good
example for eliminating cruft from DXEFV (in fact, for eliminating most
of the DXE phase). In a TDX environment, why include drivers in the
firmware binary that are never used? Meanwhile, DXEFV in OVMF grows by a
MB every 1.5 years or so. Again, remove these drivers from the DSC/FDF
then, and it needs to be a separate platform.

(17) &quot;Other DXE Phase drivers -- [...] AcpiPlatformDxe&quot;

I&apos;m not sure what this section is supposed to mean. Other DXE phase
drivers included, or excluded? Without AcpiPlatformDxe, the guest OS
will not see QEMU&apos;s ACPI content, and will almost certainly malfunction.

... Back from slide 48: ignore this for now, I&apos;ll comment in more detail
later.


*** Slide 37: DXE Core

(18) says &quot;SMM is not supported in Td guest&quot; -- how is the variable
store protected from direct hardware (pflash) access from the guest OS?
Without SMM, the guest OS need not go through gRT-&gt;SetVariable() to
update authenticated non-volatile UEFI variables, and that undermines
Secure Boot.

Note that, while SEV-ES has the same limitation wrt. SMM, the
&quot;OvmfPkg/AmdSev/AmdSevX64.dsc&quot; platform doesn&apos;t even include the Secure
Boot firmware feature. For another example, the OVMF firmware binary in
RHEL that&apos;s going to support SEV-ES is such a build of &quot;OvmfPkgX64.dsc&quot;
that does not include the Secure Boot feature either.

But in this TDX slide deck, Secure Boot certificates are embedded in the
CFV (configuration firmware volume) -- see slide 11 and slide 16 --,
which suggests that this platform does want secure boot.

... Back from slide 48: I&apos;m going to make *additional* comments on this,
when I&apos;m at slide 48, too.

The rest of this slide (slide 37) looks reasonable (generic DXE Core
changes -- possibly PI spec changes too).


*** Slides 38 through 39:

These seem reasonable (TdxDxe assumes some responsibilities of
OvmfPkg/PlatformPei)


*** Slides 40 through 42:

*If* you really can implement TDX support for the IOMMU driver *this*
surgically, then I&apos;m OK with it. The general logic in the IOMMU driver
was truly difficult to write, and I&apos;d be seriously concerned if those
parts would have to be modified. Customizing just the page
encryption/decryption primitives for TDX vs. SEV is OK.


*** Slides 43 through 47:

(19) Slide 46 and slide 47 are almost identical. Please consolidate them
into a single slide.

(20) the TPM2 infrastructure in edk2 is baroque (over-engineered), in my
opinion. It has so many layers that I can never keep them in mind. When
we added TPM support to OVMF, I required commit messages that would help
us recall the layering. In particular, please refer to commit
0c0a50d6b3ff (&quot;OvmfPkg: include Tcg2Dxe module&quot;, 2018-03-09). Here&apos;s an
excerpt:

           TPM 2 consumer driver
                    |
                    v
      Tpm2DeviceLib class: Tpm2DeviceLibTcg2 instance
                    |
                    v
             TCG2 protocol interface
                    |
                    v
      TCG2 protocol provider: Tcg2Dxe.inf driver
                    |
                    v
      Tpm2DeviceLib class: Tpm2DeviceLibRouter instance
                    |
                    v
         NULL class: Tpm2InstanceLibDTpm instance
            (via earlier registration)
                    |
                    v
           TPM2 chip (actual hardware)

The slide deck says that EFI_TD_PROTOCOL is supposed to reuse the
EFI_TCG2_PROTOCOL definition. If that&apos;s the case, then why don&apos;t we push
the TDX specifics (more or less: the replacement of PCRs with RTMR) down
to the lowest possible level?

Can we have &quot;Tpm2InstanceLibTdxRtmr&quot;, plugged into the same Tcg2Dxe.inf
driver?

If not, can we have a new TdTcg2Dxe.inf driver, but make it so that it
install the same protocol as before (EFI_TCG2_PROTOCOL -- same old
protocol GUID)? Then DxeTpmMeasurementLib doesn&apos;t have to change.

As long as there is *at most* one EFI_TCG2_PROTOCOL instance published
in the protocol database, DxeTpmMeasurementLib should be fine. In SEV*
guests, the standard Tcg2Dxe driver provides that protocol. In TDX
guests, TdTcg2Dxe.inf should provide the protocol. Arbitration between
the two can be implemented with the pattern seen in the following commits:

 1  05db0948cc60 EmbeddedPkg: introduce EDKII Platform Has ACPI GUID
 2  786f476323a6 EmbeddedPkg: introduce PlatformHasAcpiLib
 3  65a69b214840 EmbeddedPkg: introduce EDKII Platform Has Device Tree
                 GUID
 4  2558bfe3e907 ArmVirtPkg: add PlatformHasAcpiDtDxe

The basic idea is that Tcg2Dxe can have a depex on a new &quot;running in
SEV&quot; protocol GUID, and TdTcg2Dxe can have a depex on a new &quot;running in
TDX&quot; protocol GUID. A separate platform driver can install the proper
GUID -- possibly *neither* of those GUIDs.

And, we don&apos;t have to change the depex section of
&quot;SecurityPkg/Tcg/Tcg2Dxe/Tcg2Dxe.inf&quot; for this; we can implement a
library instance with an empty constructor, but a non-empty depex, and
then hook this lib instance into Tcg2Dxe.inf via module scope NULL lib
class override in the DSC file. Basically we could forcibly restrict
Tcg2Dxe&apos;s DEPEX by making it inherit the new DEPEX from the library.


*** Slide 48: DXE Phase – Other Modules

Regarding IncompatiblePciDeviceSupportDxe: the proposed update sounds
plausible and simple enough.

(21) &quot;AcpiPlatformDxe: Support for MADT/ACPI addition to report Td
Mailbox entry&quot;

Firmware-owned tables must not be installed from this driver.

Please refer to my &quot;Xen removal&quot; patch set again, for
&lt;https://bugzilla.tianocore.org/show_bug.cgi?id=2122&gt;, which I mention
above in point (14). As part of the Xen removal, the AcpiPlatformDxe
driver in OvmfPkg is significantly trimmed: all unused (dead) cruft is
removed, including any ACPI table templates that are built into the
firmware.

OvmfPkg/AcpiPlatformDxe is responsible *solely* for implementing the
client side of the QEMU ACPI linker/loader.

If you need to prepare &amp; install different ACPI tables, please do it
elsewhere, in another DXE driver. A bunch of other firmware modules do
that (NFIT, IBFT, BGRT, ...).

For example, the OvmfPkg/TdxDxe DXE_DRIVER is supposed to be launched
early in the DXE phase, via APRIORI section -- please consider
registering a protocol notify in that driver, for
EFI_ACPI_TABLE_PROTOCOL, and when it becomes available, install whatever
*extra* tables you need.

Note that if you need to *customize* an ACPI table that QEMU already
provides, then you will have to modify the ACPI generator on the QEMU
side. It is a design tenet between QEMU and OVMF that OVMF include no
business logic for either parsing or fixing up ACPI tables that QEMU
provides. AcpiPlatformDxe contains the minimum (which is already a whole
lot, unfortunately) that&apos;s necessary for implementing the QEMU ACPI
linker/loader client in the UEFI environment.

The slide deck mentions MADT, which is also known as the &quot;APIC&quot; table --
and indeed, QEMU does provide that. (See acpi_build_madt()
[hw/i386/acpi-common.c].) So if TDX needs MADT customizations, that
should go into QEMU.

(22) EmuVariableFvbRuntimeDxe

Ouch, this is an unpleasant surprise.

First, if you know for a fact that pflash is not part of the *board* in
any TDX setup, then pulling

  OvmfPkg/QemuFlashFvbServicesRuntimeDxe/FvbServicesRuntimeDxe.inf

into the firmware platform is useless, as it is mutually exclusive with

  OvmfPkg/EmuVariableFvbRuntimeDxe/Fvb.inf

(via dynamic means -- a dynamic PCD).

Note that the FDF file places QemuFlashFvbServicesRuntimeDxe in APRIORI
DXE when SMM_REQUIRE is FALSE. This driver checks for pflash presence,
and lets EmuVariableFvbRuntimeDxe perform its in-RAM flash emulation
only in case pflash is not found.

So this is again in favor of a separate platform -- if we know pflash is
never part of the board, then QemuFlashFvbServicesRuntimeDxe is never
needed, but you cannot remove it from the traditional DSC/FDF files.

Second, EmuVariableFvbRuntimeDxe consumes the PlatformFvbLib class, for
the PlatformFvbDataWritten() API (among other things). This lib class is
implemented by two instances in OvmfPkg, PlatformFvbLibNull and
EmuVariableFvbLib. The latter instance allows Platform BDS to hook an
event (for signaling) via &quot;PcdEmuVariableEvent&quot; into the
EmuVariableFvbRuntimeDxe driver.

In old (very old) QEMU board configurations, namely those without
pflash, this (mis)feature is used by OVMF&apos;s PlatformBootManagerLib to
write out all variables to the EFI system partition in a regular file
called \NvVars, with the help of NvVarsFileLib, whenever
EmuVariableFvbRuntimeDxe writes out an emulated &quot;flash&quot; block. For this
purpose, the traditional OVMF DSC files link EmuVariableFvbLib into
EmuVariableFvbRuntimeDxe.

But it counts as an absolute disaster nowadays, and should not be
revived in any platform. If you don&apos;t have pflash in TDX guests, just
accept that you won&apos;t have non-volatile variables. And link
PlatformFvbLibNull into EmuVariableFvbRuntimeDxe. You&apos;re going to need a
separate PlatformBootManagerLib instance anyway.

(We should have removed EmuVariableFvbRuntimeDxe a long time ago from
the traditional OVMF platforms, i.e. made pflash a hard requirement,
even when SMM is not built into the platform -- but whenever I tried
that, Jordan always shot me down.)

My point is: using EmuVariableFvbRuntimeDxe in the TDX platform may be
defensible per se, but we must be very clear that it will never provide
a standards-conformant service for non-volatile UEFI variables, and we
must keep as much of the \NvVars mess out of EmuVariableFvbRuntimeDxe as
possible. This will require a separate PlatformBootManagerLib instance
for TDX anyway (or maybe share PlatformBootManagerLibGrub with
&quot;OvmfPkg/AmdSev/AmdSevX64.dsc&quot;).


*** Slide 50: Library

(23) Should we introduce Null instances for all (or most) new lib
classes here? Code size is a concern (static linking). If we extend a
common OvmfPkg module with new hook points, it&apos;s one thing to return
from that hook point early *dynamically*, but it&apos;s even better (given
separate platforms) to allow the traditional platform firmware to use a
Null lib instance, to cut out all the dead code statically.


*** Slides 51 through 52

Seems OK.


*** Slide 53:

(24) It might be worth noting that BaseIoLibIntrinsic already has some
SEV enlightenment, as the FIFO IO port operations (which normally use
the REP prefix) are not handled on SEV. I don&apos;t have an immediate idea
why this might matter, we should just minimize code duplication if possible.


*** Slides 54-56:

No  comments, this stuff seems reasonable.


*** Slide 57: MpInitLib

I don&apos;t know enough to give a summary judgement.


All in all, I see the controversial / messy parts in the platform
bringup, and how all that differs from the traditional (&quot;legacy&quot;) OVMF
platforms. I admit I *may* be biased in favor of SEV, possibly because
SEV landed first -- if you find signs of such a bias in my comments,
please don&apos;t hesitate to debunk those points. Yet my general impression
is that the early bringup stuff is significantly different from
everything before, and because of this, a separate platform is justified.

Definitely separate from the traditional OVMF IA32, IA32X64, and X64
platforms, and *possibly* separate from the &quot;remote attestation&quot;
AmdSevX64.dsc platform. I would approach the TDX feature-set in complete
isolation (exactly how Intel commenced the work, if I understand
correctly), modulo obviously shareable / reusable parts, and then slowly
&amp; gradually work on extracting / refactoring commonalities.

(But, given my stance on Xen for example, I could disagree even with the
latter, retroactive kind of unification -- it all boils down to shared
developer and user base. Component sharing should reflect the community
structure, otherwise maintenance will be a nightmare.)

Thanks
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16250</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-02 20:50:23 +0000</bug_when>
    <thetext>Laszlo Ersek wrote:

&gt; *** Slide 37: DXE Core
&gt; 
&gt; (18) says &quot;SMM is not supported in Td guest&quot; -- how is the variable
&gt; store protected from direct hardware (pflash) access from the guest OS?
&gt; Without SMM, the guest OS need not go through gRT-&gt;SetVariable() to
&gt; update authenticated non-volatile UEFI variables, and that undermines
&gt; Secure Boot.
&gt; 
&gt; Note that, while SEV-ES has the same limitation wrt. SMM, the
&gt; &quot;OvmfPkg/AmdSev/AmdSevX64.dsc&quot; platform doesn&apos;t even include the Secure
&gt; Boot firmware feature. For another example, the OVMF firmware binary in
&gt; RHEL that&apos;s going to support SEV-ES is such a build of &quot;OvmfPkgX64.dsc&quot;
&gt; that does not include the Secure Boot feature either.
&gt; 
&gt; But in this TDX slide deck, Secure Boot certificates are embedded in the
&gt; CFV (configuration firmware volume) -- see slide 11 and slide 16 --,
&gt; which suggests that this platform does want secure boot.
&gt; 
&gt; ... Back from slide 48: I&apos;m going to make *additional* comments on this,
&gt; when I&apos;m at slide 48, too.

[...]

&gt; *** Slide 48: DXE Phase – Other Modules

[...]

&gt; (22) EmuVariableFvbRuntimeDxe
&gt; 
&gt; Ouch, this is an unpleasant surprise.
&gt; 
&gt; First, if you know for a fact that pflash is not part of the *board* in
&gt; any TDX setup, then pulling
&gt; 
&gt;   OvmfPkg/QemuFlashFvbServicesRuntimeDxe/FvbServicesRuntimeDxe.inf
&gt; 
&gt; into the firmware platform is useless, as it is mutually exclusive with
&gt; 
&gt;   OvmfPkg/EmuVariableFvbRuntimeDxe/Fvb.inf
&gt; 
&gt; (via dynamic means -- a dynamic PCD).
&gt; 
&gt; Note that the FDF file places QemuFlashFvbServicesRuntimeDxe in APRIORI
&gt; DXE when SMM_REQUIRE is FALSE. This driver checks for pflash presence,
&gt; and lets EmuVariableFvbRuntimeDxe perform its in-RAM flash emulation
&gt; only in case pflash is not found.
&gt; 
&gt; So this is again in favor of a separate platform -- if we know pflash is
&gt; never part of the board, then QemuFlashFvbServicesRuntimeDxe is never
&gt; needed, but you cannot remove it from the traditional DSC/FDF files.
&gt; 
&gt; Second, EmuVariableFvbRuntimeDxe consumes the PlatformFvbLib class, for
&gt; the PlatformFvbDataWritten() API (among other things). This lib class is
&gt; implemented by two instances in OvmfPkg, PlatformFvbLibNull and
&gt; EmuVariableFvbLib. The latter instance allows Platform BDS to hook an
&gt; event (for signaling) via &quot;PcdEmuVariableEvent&quot; into the
&gt; EmuVariableFvbRuntimeDxe driver.
&gt; 
&gt; In old (very old) QEMU board configurations, namely those without
&gt; pflash, this (mis)feature is used by OVMF&apos;s PlatformBootManagerLib to
&gt; write out all variables to the EFI system partition in a regular file
&gt; called \NvVars, with the help of NvVarsFileLib, whenever
&gt; EmuVariableFvbRuntimeDxe writes out an emulated &quot;flash&quot; block. For this
&gt; purpose, the traditional OVMF DSC files link EmuVariableFvbLib into
&gt; EmuVariableFvbRuntimeDxe.
&gt; 
&gt; But it counts as an absolute disaster nowadays, and should not be
&gt; revived in any platform. If you don&apos;t have pflash in TDX guests, just
&gt; accept that you won&apos;t have non-volatile variables. And link
&gt; PlatformFvbLibNull into EmuVariableFvbRuntimeDxe. You&apos;re going to need a
&gt; separate PlatformBootManagerLib instance anyway.
&gt; 
&gt; (We should have removed EmuVariableFvbRuntimeDxe a long time ago from
&gt; the traditional OVMF platforms, i.e. made pflash a hard requirement,
&gt; even when SMM is not built into the platform -- but whenever I tried
&gt; that, Jordan always shot me down.)
&gt; 
&gt; My point is: using EmuVariableFvbRuntimeDxe in the TDX platform may be
&gt; defensible per se, but we must be very clear that it will never provide
&gt; a standards-conformant service for non-volatile UEFI variables, and we
&gt; must keep as much of the \NvVars mess out of EmuVariableFvbRuntimeDxe as
&gt; possible. This will require a separate PlatformBootManagerLib instance
&gt; for TDX anyway (or maybe share PlatformBootManagerLibGrub with
&gt; &quot;OvmfPkg/AmdSev/AmdSevX64.dsc&quot;).

So anyway, apart from the volatility aspect, let&apos;s assume we have this
in-RAM emulated &quot;flash device&quot;, storing authenticated UEFI variables for
Secure Boot purposes. And we don&apos;t have SMM.

What protects this in-RAM variable store from tampering by the guest OS?
It&apos;s all guest RAM only, after all. What provides the privilege barrier
between the guest firmware and the guest OS?

Thanks
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16251</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-02 20:51:17 +0000</bug_when>
    <thetext>Comment from Dr. David Alan Gilbert &lt;dgilbert@redhat.com&gt;


&gt; (2) Not sure what RTMR is, but it&apos;s associated with &quot;Enable TrustedBoot&quot;
&gt; -- so is a virtual TPM a hard requirement?
&gt; 
&gt; ... Back from slide 10: &quot;TCG measurement and event log framework w/o
&gt; TPM&quot; -- that&apos;s curious.

My reading of this is that the RTMR (and another set of similar
registers) are a TDX thing that is like the PCRs from a TPM but without
the rest of the TPM features;  so you can do the one-way measurement
into the RTMRs just like you do into a TPM PCR, and the measurements pop
out somewhere in the TDX quote.  Just like a TPM you need the event log
to make any sense of how the final hashed value supposedly got to
where it did.

Dave</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16252</commentid>
    <comment_count>5</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-02 20:51:55 +0000</bug_when>
    <thetext>From Erdem Aktas &lt;erdemaktas@google.com&gt;


Just FYI, I will provide my comments/feedback, It might take a few days for me to put them all together.

&gt;&gt;The first 9 slides in the presentation introduce much-much more
&gt;&gt;intrusive problems than the &quot;polymorphism&quot; of the reset vector. Would I
&gt;&gt;be correct to say that my concern in the above messages was right? I
&gt;&gt;think I was only given a fraction of the necessary information when I
&gt;&gt;was asked &quot;do you agree &apos;one binary&apos; is viable&quot;.

Let&apos;s not worry about this for now. We want the one binary solution for practical reasons and also for simplicity.  In the end, we want to do what is right and good for everyone.
Those are legit concerns and I think what Intel is trying to do (sorry for mind reading) is to discuss all those concerns and questions to make the right decision. I really appreciate their effort on preparing those slides and bringing it to the community to review.

I will also read your comments more carefully and provide my thoughts on them.
Sorry for being a little slow on this.


&gt;&gt;2) Not sure what RTMR is, but it&apos;s associated with &quot;Enable TrustedBoot&quot; -- so is a virtual TPM a hard requirement?

+1 to David on this. TDX provides 2 kinds of measurement registers: MRTDs and RTMRs (https://software.intel.com/content/dam/develop/external/us/en/documents/tdx-module-1eas-v0.85.039.pdf section 10.1.2) . MRTDs are build-time measurement registers which are updated when TDX is being created. Once TDX is finalized (before the first run), the MRTDs are finalized and cannot be updated anymore. On the other hand, while the TD is running, TD can extend RTMRs through TDCALLs which will provide TPM PCR kind of capabilities. 

-Erdem</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16449</commentid>
    <comment_count>6</comment_count>
      <attachid>744</attachid>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-06-23 20:52:53 +0000</bug_when>
    <thetext>Created attachment 744
TDVF Design Review v0.95</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16450</commentid>
    <comment_count>7</comment_count>
      <attachid>745</attachid>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-06-23 20:56:57 +0000</bug_when>
    <thetext>Created attachment 745
TDVF_Design_Review-AcpiPlatformDxe</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16603</commentid>
    <comment_count>8</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-07-11 21:35:59 +0000</bug_when>
    <thetext>Intel&apos;s Trust Domain Extensions (Intel TDX) refers to an Intel technology
that extends Virtual Machines Extensions (VMX) and Multi-Key Total Memory
Encryption (MKTME) with a new kind of virutal machines guest called a 
Trust Domain (TD). A TD is desinged to run in a CPU mode that protects the
confidentiality of TD memory contents and the TD&apos;s CPU state from other
software, including the hosting Virtual-Machine Monitor (VMM), unless
explicitly shared by the TD itself.

The patch-sets to support Intel TDX in OvmfPkg is split into several wave1.
This is the wave1 which adds Intel TDX support in OvmfPkg/ResetVector.

Patch 1 add the PCDs of BFV/CFV. BFV is the code part of the image. CFV is
the configuration part. BFV is measured by VMM and CFV is measured by TDVF
itself.

Patch 2 add TdxMetadata in OvmfPkg/ResetVector. It describes the
information about the image so that VMM can do the initialization and
measurement based on these information.

Patch 3 add a null entry point of InitTdx in UefiCpuPkg/ResetVector. The
actual implemenation of InitTdx is in OvmfPkg/ResetVector.

Patch 4 add the ReloadFlat32 in UefiCpuPkg/ResetVector.

Patch 5 update the UefiCpuPkg/Vtf0/Main.asm to add Main32 entrypoint. It
is because on reset all the CPUs are in 32-bit protected mode.

Patch 6 put above stuff all together to enable Intel TDX in OvmfPkg.

[TDX]: https://software.intel.com/content/dam/develop/external/us/en/
documents/tdx-whitepaper-final9-17.pdf

[TDVF]: https://software.intel.com/content/dam/develop/external/us/en/
documents/tdx-virtual-firmware-design-guide-rev-1.pdf

wave1.v1 is at: https://edk2.groups.io/g/devel/message/77675</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16680</commentid>
    <comment_count>9</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-07-22 01:56:34 +0000</bug_when>
    <thetext>V2 of wave 1 series posted to mailing list:

* [PATCH V2 0/4] Add Intel TDX support in OvmfPkg/ResetVector

https://edk2.groups.io/g/devel/message/78057</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16686</commentid>
    <comment_count>10</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-22 13:13:28 +0000</bug_when>
    <thetext>can you attached the patch file in the attachments section</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16688</commentid>
    <comment_count>11</comment_count>
      <attachid>776</attachid>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-07-22 22:00:54 +0000</bug_when>
    <thetext>Created attachment 776
Wave1.v2.patch-set

Wave1 v2 patch-set</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16700</commentid>
    <comment_count>12</comment_count>
      <attachid>781</attachid>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-07-27 01:44:13 +0000</bug_when>
    <thetext>Created attachment 781
Wave1.v3.patch-set</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16701</commentid>
    <comment_count>13</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-07-27 01:46:21 +0000</bug_when>
    <thetext>V3 of wave 1 series posted to mailing list:

* [PATCH V3 00/10] Add Intel TDX support in OvmfPkg/ResetVector

https://edk2.groups.io/g/devel/message/78190

Code: https://github.com/mxu9/edk2/tree/tdvf_wave1.v3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16741</commentid>
    <comment_count>14</comment_count>
      <attachid>784</attachid>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-08-02 21:20:35 +0000</bug_when>
    <thetext>Created attachment 784
Wave1.v4.patch-set</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16743</commentid>
    <comment_count>15</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-08-02 23:38:29 +0000</bug_when>
    <thetext>V4 of wave 1 series posted to mailing list:

* [PATCH V4 00/04] Add Intel TDX support in OvmfPkg/ResetVector

https://edk2.groups.io/g/devel/message/78575

Code: https://github.com/mxu9/edk2/tree/tdvf_wave1.v4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16893</commentid>
    <comment_count>16</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-08-12 08:03:22 +0000</bug_when>
    <thetext>Enable Intel TDX in Ovmf is split into several waves.
Wave-1 is for changes in ResetVector.
Wave-2 is for changes in SEC/PEI phases.
Wave-3 is for changes in DXE phases.

Now v1 of Wave-2 series posted to mailing list:
* [PATCH 00/23] Enable Intel TDX in OvmfPkg (SEC/PEI)

https://edk2.groups.io/g/devel/message/79156

Code: https://github.com/mxu9/edk2/tree/tdvf_wave2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16894</commentid>
    <comment_count>17</comment_count>
      <attachid>795</attachid>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-08-12 08:04:43 +0000</bug_when>
    <thetext>Created attachment 795
Wave2.v1.patch-set</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17105</commentid>
    <comment_count>18</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-08-29 22:37:55 +0000</bug_when>
    <thetext>V5 of wave 1 series posted to mailing list:

* [PATCH V5 0/2] Add Intel TDX support in OvmfPkg/ResetVector

https://edk2.groups.io/g/devel/message/79931

Code: https://github.com/mxu9/edk2/tree/tdvf_wave1.v5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17106</commentid>
    <comment_count>19</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-29 23:04:50 +0000</bug_when>
    <thetext>this is a new featuer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17488</commentid>
    <comment_count>20</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2021-10-11 22:42:15 +0000</bug_when>
    <thetext>V9 of wave 1 series posted to mailing list:

* [PATCH V9 0/4] Add Intel TDX support in OvmfPkg/ResetVector

https://edk2.groups.io/g/devel/message/81795

Code: https://github.com/mxu9/edk2/tree/tdvf_wave1.v9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17842</commentid>
    <comment_count>21</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 09:48:10 +0000</bug_when>
    <thetext>This feature has been merge at 62540372230ecb5318a9c8a40580a14beeb9ded0..8b76f235340922a6d293bff05978ba57d3b498e1</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>732</attachid>
            <date>2021-06-02 20:35:28 +0000</date>
            <delta_ts>2021-06-02 20:35:28 +0000</delta_ts>
            <desc>TDVF_Design_Review(v0.8)</desc>
            <filename>TDVF_Design_Review(v0.8).pptx</filename>
            <type>application/vnd.openxmlformats-officedocument.presentationml.presentation</type>
            <size>1015306</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>744</attachid>
            <date>2021-06-23 20:52:53 +0000</date>
            <delta_ts>2021-06-23 20:52:53 +0000</delta_ts>
            <desc>TDVF Design Review v0.95</desc>
            <filename>TDVF_Design_Review(v0.95).pptx</filename>
            <type>application/vnd.openxmlformats-officedocument.presentationml.presentation</type>
            <size>963672</size>
            <attacher name="mxu9">min.m.xu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>745</attachid>
            <date>2021-06-23 20:56:57 +0000</date>
            <delta_ts>2021-06-23 20:56:57 +0000</delta_ts>
            <desc>TDVF_Design_Review-AcpiPlatformDxe</desc>
            <filename>TDVF_Design_Review-AcpiPlatformDxe.pptx</filename>
            <type>application/vnd.openxmlformats-officedocument.presentationml.presentation</type>
            <size>66836</size>
            <attacher name="mxu9">min.m.xu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>776</attachid>
            <date>2021-07-22 22:00:54 +0000</date>
            <delta_ts>2021-07-22 22:00:54 +0000</delta_ts>
            <desc>Wave1.v2.patch-set</desc>
            <filename>wave1.v2.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>13503</size>
            <attacher name="mxu9">min.m.xu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>781</attachid>
            <date>2021-07-27 01:44:13 +0000</date>
            <delta_ts>2021-07-27 01:44:13 +0000</delta_ts>
            <desc>Wave1.v3.patch-set</desc>
            <filename>wave1.v3.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>30271</size>
            <attacher name="mxu9">min.m.xu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>784</attachid>
            <date>2021-08-02 21:20:35 +0000</date>
            <delta_ts>2021-08-02 21:20:35 +0000</delta_ts>
            <desc>Wave1.v4.patch-set</desc>
            <filename>wave1.v4.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>14623</size>
            <attacher name="mxu9">min.m.xu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>795</attachid>
            <date>2021-08-12 08:04:43 +0000</date>
            <delta_ts>2021-08-12 08:04:43 +0000</delta_ts>
            <desc>Wave2.v1.patch-set</desc>
            <filename>Wave2.v1.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>85662</size>
            <attacher name="mxu9">min.m.xu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3915</bug_id>
          
          <creation_ts>2022-04-25 11:54:46 +0000</creation_ts>
          <short_desc>Add missing NFIT Platform Capabilities Structure defined by Mantis 1831 and added in ACPI 6.2A</short_desc>
          <delta_ts>2022-07-19 19:08:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Paul Lohr">paul.a.lohr</reporter>
          <assigned_to name="Miki Shindo">miki.shindo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>miki.shindo</cc>
    
    <cc>paul.a.lohr</cc>
    
    <cc>ray.ni</cc>
    
    <cc>steven.downum</cc>
    
    <cc>zhiguang.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18900</commentid>
    <comment_count>0</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2022-04-25 11:54:46 +0000</bug_when>
    <thetext>Platform capabilities structure was added in ACPI 6.2A, yet the ACPI.H file does not have support defined.  Below is from ACPI64.h.  as you can see, it is missing type 7.

//
// Definition for NFIT Table Structure Types
//
#define EFI_ACPI_6_4_NFIT_SYSTEM_PHYSICAL_ADDRESS_RANGE_STRUCTURE_TYPE    0
#define EFI_ACPI_6_4_NFIT_NVDIMM_REGION_MAPPING_STRUCTURE_TYPE            1
#define EFI_ACPI_6_4_NFIT_INTERLEAVE_STRUCTURE_TYPE                       2
#define EFI_ACPI_6_4_NFIT_SMBIOS_MANAGEMENT_INFORMATION_STRUCTURE_TYPE    3
#define EFI_ACPI_6_4_NFIT_NVDIMM_CONTROL_REGION_STRUCTURE_TYPE            4
#define EFI_ACPI_6_4_NFIT_NVDIMM_BLOCK_DATA_WINDOW_REGION_STRUCTURE_TYPE  5
#define EFI_ACPI_6_4_NFIT_FLUSH_HINT_ADDRESS_STRUCTURE_TYPE               6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18965</commentid>
    <comment_count>1</comment_count>
      <attachid>985</attachid>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-05-19 14:47:50 +0000</bug_when>
    <thetext>Created attachment 985
MdePkg Acpi62 Adding type7 NFIT Platform Capability</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18966</commentid>
    <comment_count>2</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-05-19 14:49:36 +0000</bug_when>
    <thetext>
Please find the attached patch.
This went though review process and will be merged after the current stable tag creation process is done in May 27.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18979</commentid>
    <comment_count>3</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2022-05-31 16:23:19 +0000</bug_when>
    <thetext>Thanks Miki - how we doing on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18980</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 21:33:38 +0000</bug_when>
    <thetext>Miki takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19149</commentid>
    <comment_count>5</comment_count>
      <attachid>999</attachid>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-06-28 21:41:47 +0000</bug_when>
    <thetext>Created attachment 999
Added a definition of type 7 Platform Capabilities Structure and the struct definition for NFIT Table Structure Types

This version of patch will be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19151</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-06-29 00:35:52 +0000</bug_when>
    <thetext>It has been merged https://github.com/tianocore/edk2/pull/3024</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19160</commentid>
    <comment_count>7</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-06-29 18:47:45 +0000</bug_when>
    <thetext>Under this ticket, I have sent another patch for review to add bit definitions below.


#define EFI_ACPI_6_2_NFIT_PLATFORM_CAPABILITY_CPU_CACHE_FLUSH_TO_NVDIMM_DURABILITY_ON_POWER_LOSS          BIT0
#define EFI_ACPI_6_2_NFIT_PLATFORM_CAPABILITY_MEMORY_CONTROLLER_FLUSH_TO_NVDIMM_DURABILITY_ON_POWER_LOSS  BIT1
#define EFI_ACPI_6_2_NFIT_PLATFORM_CAPABILITY_BYTE_ADDRESSABLE_PERSISTENT_MEMORY_HARDWARE_MIRRORING       BIT2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19161</commentid>
    <comment_count>8</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-06-29 18:54:27 +0000</bug_when>
    <thetext>I am re-opening this ticket to track my additional patch under the same ticket as I stated in the previous comment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19162</commentid>
    <comment_count>9</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2022-06-29 18:58:57 +0000</bug_when>
    <thetext>Thanks Miki for the update!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19163</commentid>
    <comment_count>10</comment_count>
      <attachid>1000</attachid>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-06-29 19:06:49 +0000</bug_when>
    <thetext>Created attachment 1000
Add bit definitions to NFIT Platform Capabilities Structure

Attached the patch for adding each bit definition of Capabilities. This is the current version under review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19171</commentid>
    <comment_count>11</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-07-01 14:12:14 +0000</bug_when>
    <thetext>The bit definition patch has been merged.
https://github.com/tianocore/edk2/pull/3037</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19271</commentid>
    <comment_count>12</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-07-19 15:00:58 +0000</bug_when>
    <thetext>Paul, can we mark this ticket &quot;RESOLVED&quot;?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19275</commentid>
    <comment_count>13</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2022-07-19 18:41:49 +0000</bug_when>
    <thetext>Yes.  Looks good.  Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19279</commentid>
    <comment_count>14</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-07-19 19:08:10 +0000</bug_when>
    <thetext>Necessary patches have been merged. 

Mark as &quot;RESOLVED&quot;.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>985</attachid>
            <date>2022-05-19 14:47:50 +0000</date>
            <delta_ts>2022-05-19 14:47:50 +0000</delta_ts>
            <desc>MdePkg Acpi62 Adding type7 NFIT Platform Capability</desc>
            <filename>v2-0001-MdePkg-Acpi62-Add-type-7-NFIT-Platform-Capabiliti.patch</filename>
            <type>text/plain</type>
            <size>2817</size>
            <attacher name="Miki Shindo">miki.shindo</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>999</attachid>
            <date>2022-06-28 21:41:47 +0000</date>
            <delta_ts>2022-06-28 21:41:47 +0000</delta_ts>
            <desc>Added a definition of type 7 Platform Capabilities Structure and the struct definition for NFIT Table Structure Types</desc>
            <filename>v3-0001-MdePkg-Acpi62-Add-type-7-NFIT-Platform-Capabiliti.patch</filename>
            <type>text/plain</type>
            <size>4475</size>
            <attacher name="Miki Shindo">miki.shindo</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1000</attachid>
            <date>2022-06-29 19:06:49 +0000</date>
            <delta_ts>2022-06-29 19:06:49 +0000</delta_ts>
            <desc>Add bit definitions to NFIT Platform Capabilities Structure</desc>
            <filename>0001-MdePkg-Acpi62-Add-bit-definitions-to-NFIT-Platform-C.patch</filename>
            <type>text/plain</type>
            <size>3158</size>
            <attacher name="Miki Shindo">miki.shindo</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3301</bug_id>
          
          <creation_ts>2021-04-06 14:56:16 +0000</creation_ts>
          <short_desc>Create TianoCore mirror of cmocka and use it from UnitTestFrameworkPkg</short_desc>
          <delta_ts>2021-04-14 13:43:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15530</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-06 14:56:16 +0000</bug_when>
    <thetext>RFC Discussion on this topic:
    https://edk2.groups.io/g/devel/message/69255

TianoCore mirror of cmocka with GitHub Action to auto sync:
    https://github.com/tianocore/edk2-cmocka

This TianoCore mirror has been active for a couple months and the
GitHub action to auto-sync is running well. There is one minor issue
that a repo that has no activity for 60-days will auto disable 
GitHub actions.  If there is not activity from cryptomilk for a 
while, then the GitHub action may need to be manually re-enabled
in GitHub.

The remaining task is to update the edk2 repo to use the new URL
for cmocka.

* Change https://git.cryptomilk.org/projects/cmocka.git to
  https://github.com/tianocore/edk2-cmocka.git

The EDK II CI workaround to use another GitHub mirror can also be removed.

Original RFC Contents
=====================
There have been a few suggestions to create a mirror of cmocka in TianoCore
org in GitHub.

I have found a GitHub action that can do a repo sync.

    https://github.com/marketplace/actions/github-repo-sync

I have created a temporary mirror of cmocka in my personal GitHub area that
uses this GitHub action to sync all branches and all tags once a day.

    https://github.com/mdkinney/mirror-cmocka

Here is the GitHub workflow file.  It must be in the default branch for the
repo using a branch name that is not present in the repo being mirrored.
In this case, I used a branch name of &apos;repo-sync&apos;.

    https://github.com/mdkinney/mirror-cmocka/blob/repo-sync/.github/workflows/repo-sync.yml

Please provide feedback on this approach.  If we like this approach, then
I suggest we create a new repo in TianoCore called edk2-cmocka that is a 
mirror that is synced once a day and we update the cmocka submodule in the
edk2 repo to use edk2-cmocka.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15531</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-06 14:56:33 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15532</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-06 16:19:51 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/73744</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15681</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-14 13:43:52 +0000</bug_when>
    <thetext>Commit:
https://github.com/tianocore/edk2/commit/2ad22420a710dc07e3b644f91a5b55c09c39ecf3

GitHub PR:
https://github.com/tianocore/edk2/pull/1566</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3790</bug_id>
          
          <creation_ts>2021-12-28 01:07:26 +0000</creation_ts>
          <short_desc>Replace Opcode with the corresponding instructions</short_desc>
          <delta_ts>2022-03-19 04:47:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3876</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason">yun.lou</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>SourceLevelDebugPkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18053</commentid>
    <comment_count>0</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-12-28 01:07:26 +0000</bug_when>
    <thetext>Replace Opcode with the corresponding instructions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18054</commentid>
    <comment_count>1</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-12-28 01:09:10 +0000</bug_when>
    <thetext>Assign to Jason Lou.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18165</commentid>
    <comment_count>2</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2022-01-16 10:18:40 +0000</bug_when>
    <thetext>Have sent out the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18566</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-07 20:24:53 +0000</bug_when>
    <thetext>Fix at b1b89f9009f2390652e0061bd7b24fc40732bc70..6a890db161cd6d378bec3499a1e774db3f5a27a7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3180</bug_id>
          
          <creation_ts>2021-01-21 13:41:01 +0000</creation_ts>
          <short_desc>OvmfPkg/PlatformBootManagerLibGrub: consider removing EfiBootManagerDispatchDeferredImages() call</short_desc>
          <delta_ts>2023-01-03 04:22:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="James.Bottomley@HansenPartnership.com">James.Bottomley</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14881</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-21 13:41:01 +0000</bug_when>
    <thetext>In the remotely attested platform OvmfPkg/AmdSev/AmdSevX64.dsc, arguably
there shouldn&apos;t be a call to EfiBootManagerDispatchDeferredImages().
That call seems to allow QEMU to inject executable code (UEFI drivers
placed in PCI option ROMs) into the guest.

http://lists.katacontainers.io/pipermail/kata-dev/2021-January/001661.html

&gt; &quot;OvmfPkg/Library/PlatformBootManagerLibGrub/BdsPlatform.c&quot; still
&gt; contains a call to EfiBootManagerDispatchDeferredImages(), at which
&gt; point any option ROMs placed by QEMU in the PCI devices&apos; ROM BARs will
&gt; be executed.
&gt;
&gt; If we don&apos;t want that *ever*, in the remote attested boot platform,
&gt; then we should likely remove this call. (Cf. commit 0f9395d7c5cc
&gt; (&quot;ArmPkg: Dispatch deferred images after EndOfDxe&quot;, 2019-12-05).)
&gt;
&gt; This &quot;image deferral&quot; is outlined in commit 8be37a5cee70
&gt; (&quot;MdeModulePkg/SecurityStubDxe: Defer 3rd party image before
&gt; EndOfDxe&quot;, 2016-11-10). The point of the feature is that, even if a
&gt; 3rd party UEFI driver is properly signed, it should not be launched
&gt; immediately when found in a PCI option ROM, that is, before &quot;End of
&gt; DXE&quot; is reached. &quot;End of DXE&quot; is more or less when the platform locks
&gt; itself down (= more or less when SMRAM gets closed and locked, for
&gt; example), after everything has been dispatched from the firmware
&gt; volume(s) -- so even &quot;trusted&quot; 3rd party drivers are not allowed to
&gt; launch before that point.
&gt;
&gt; If we don&apos;t permit 3rd party UEFI binaries at all (incl. UEFI drivers
&gt; in option ROMs) on the remote attested firmware platform, then the
&gt; EfiBootManagerDispatchDeferredImages() call should be removed from
&gt; this platform&apos;s BDS Library instance. In that case, a warning will be
&gt; emitted to the firmware log during boot (about some deferred images
&gt; left un-dispatched), but there should not be any ill effects.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14975</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-02 22:05:00 +0000</bug_when>
    <thetext>James works on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20397</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:22:53 +0000</bug_when>
    <thetext>From a quick git-grep at bbd30066e137:

&gt;| Library/PlatformBootManagerLibGrub/BdsPlatform.c:  EfiBootManagerDispatchDeferredImages ();

I guess nobody cared.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3672</bug_id>
          
          <creation_ts>2021-10-01 02:11:23 +0000</creation_ts>
          <short_desc>Do you want to fix your cash app negative balance?</short_desc>
          <delta_ts>2021-10-06 00:52:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="john snow">snow68896</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17423</commentid>
    <comment_count>0</comment_count>
    <who name="john snow">snow68896</who>
    <bug_when>2021-10-01 02:11:23 +0000</bug_when>
    <thetext>Have a negative cash app balance and you want to fix it if yes then you are at the correct place to fix your cash app negative balance. Here you will know how to fix your cash app negative balance in just seconds but for this, you have to click on this given link. https://www.contact-customerservice.co/blog/how-do-you-fix-the-negative-balance-on-the-cash-app/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17439</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-10-06 00:52:25 +0000</bug_when>
    <thetext>Not a bug</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3552</bug_id>
          
          <creation_ts>2021-08-11 00:19:03 +0000</creation_ts>
          <short_desc>Claims Adjuster Toronto</short_desc>
          <delta_ts>2021-08-16 21:47:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Onyx Adjusting">onyxadjusting</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16869</commentid>
    <comment_count>0</comment_count>
    <who name="Onyx Adjusting">onyxadjusting</who>
    <bug_when>2021-08-11 00:19:03 +0000</bug_when>
    <thetext>Onyx Adjusting helps you with the best &lt;a href=&quot;https://onyxadjusting.ca/&quot;&gt;Claims Adjuster Toronto&lt;/a&gt; services. Our experts will evaluate insurance claim liability for any property damage. Whether the damage has inflicted to your office or home, our firm has got your back. Our agents will also prepare and process claim reports and negotiate payments with claimants. Contact us for more details.

Contact Us

Address: 10 Wincrest Dr, Toronto, ON M1P 4J4, Canada
Phone No: 416-846-5673
Official Email Id: claims@onyxadjusting.ca
Working Hours:	Monday - Sunday : 9 AM - 9 PM</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16929</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:47:45 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3450</bug_id>
          
          <creation_ts>2021-06-10 18:12:32 +0000</creation_ts>
          <short_desc>SmBusLib SmBusSendByte sending incorrect value</short_desc>
          <delta_ts>2021-06-11 12:36:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>CoffelakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>rangasai.v.chaganty</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16331</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-10 18:12:32 +0000</bug_when>
    <thetext>The SmBusSendByte command must write the value to the Command Register, not the Host Data registers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16336</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-10 19:06:58 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16338</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-10 19:51:20 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/76342</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16344</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-11 12:36:50 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2-platforms/commit/d5648533346a4f8dfb278fb4f91c1f0b91d7361b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3334</bug_id>
          
          <creation_ts>2021-04-13 05:47:28 +0000</creation_ts>
          <short_desc>Remove microcode related PCDs in IntelFsp2WrapperPkg</short_desc>
          <delta_ts>2021-05-30 23:18:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yun.lou</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2WrapperPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15623</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-04-13 05:47:28 +0000</bug_when>
    <thetext>IntelFsp2WrapperPkg defines following PCDs:
  PcdCpuMicrocodePatchAddress
  PcdCpuMicrocodePatchRegionSize
  PcdFlashMicrocodeOffset


But the meanings of PcdCpuMicrocodePatchAddress and PcdCpuMicrocodePatchRegionSize are different from the ones that have the same name in UefiCpuPkg.

To avoid confusion and bugzilla requests to remove the three PCDs defined in IntelFsp2WrapperPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15624</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-04-13 05:47:53 +0000</bug_when>
    <thetext>Assign to Yun Lou.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15625</commentid>
    <comment_count>2</comment_count>
      <attachid>693</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-04-13 05:49:19 +0000</bug_when>
    <thetext>Created attachment 693
patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15676</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-13 23:51:51 +0000</bug_when>
    <thetext>Have sent out the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16217</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-05-30 23:18:20 +0000</bug_when>
    <thetext>commit fe5da0927aad98f3c005088197fa30c1b8f9d3e8 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Lou, Yun &lt;Yun.Lou@intel.com&gt;
Date:   Thu Apr 15 14:48:47 2021 +0800

    IntelFsp2WrapperPkg: Remove microcode related PCDs

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3334

    IntelFsp2WrapperPkg defines following PCDs:
      PcdCpuMicrocodePatchAddress
      PcdCpuMicrocodePatchRegionSize
      PcdFlashMicrocodeOffset

    But the PCD name caused confusion because UefiCpuPkg defines:
      PcdCpuMicrocodePatchAddress
      PcdCpuMicrocodePatchRegionSize

    PcdCpuMicrocodePatchAddress in IntelFsp2WrapperPkg means the base
    address of the FV that holds the microcode.
    PcdCpuMicrocodePatchAddress in UefiCpuPkg means the address of the
    microcode.

    The relationship between the PCDs is:
    IntelFsp2WrapperPkg.PcdCpuMicrocodePatchAddress
     +  IntelFsp2WrapperPkg.PcdFlashMicrocodeOffset
     == UefiCpuPkg.PcdCpuMicrocodePatchAddress

    IntelFsp2WrapperPkg.PcdCpuMicrocodePatchRegionSize
     -  IntelFsp2WrapperPkg.PcdFlashMicrocodeOffset
     == UefiCpuPkg.PcdCpuMicrocodePatchRegionSize

    To avoid confusion and actually the PCDs in IntelFsp2WrapperPkg
    are only used by a sample FSP-T wrapper, this patch removes
    the 3 PCDs defined in IntelFsp2WrapperPkg.

    The FSP-T wrapper is updated to directly use the ones in UefiCpuPkg.

    Signed-off-by: Jason Lou &lt;yun.lou@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Cc: Ray Ni &lt;ray.ni@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>693</attachid>
            <date>2021-04-13 05:49:19 +0000</date>
            <delta_ts>2021-04-13 05:49:19 +0000</delta_ts>
            <desc>patch</desc>
            <filename>0001-IntelFsp2WrapperPkg-Remove-microcode-related-PCDs.patch</filename>
            <type>text/plain</type>
            <size>5665</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3814</bug_id>
          
          <creation_ts>2022-01-26 22:04:32 +0000</creation_ts>
          <short_desc>EmbeddedPkg: build error in FwVol.c in X64 arch</short_desc>
          <delta_ts>2022-01-28 02:46:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="mxu9">min.m.xu</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmbeddedPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18207</commentid>
    <comment_count>0</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2022-01-26 22:04:32 +0000</bug_when>
    <thetext>CompressedDataLength is declared as UINTN which is UINT64 in X64 arch. But the second parameter of UefiDecompressGetInfo() is declared as UINT32. So a build error is triggered. To declare CompressedDataLength as UINT32 to fix the build error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18208</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-01-27 02:41:05 +0000</bug_when>
    <thetext>Commit at https://github.com/tianocore/edk2/commit/6777e673839a510aaa62a48514a4223da7d3bba2

However, missed the Reviewed-by in the commit message. The Reviewed-by message is here: https://edk2.groups.io/g/devel/message/86108.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18220</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-01-28 02:46:33 +0000</bug_when>
    <thetext>Add PR link,
https://github.com/tianocore/edk2/pull/2444</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3204</bug_id>
          
          <creation_ts>2021-02-02 22:26:47 +0000</creation_ts>
          <short_desc>VS2019 compiler warning in StandaloneMmCore</short_desc>
          <delta_ts>2021-02-11 23:15:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14978</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 22:26:47 +0000</bug_when>
    <thetext>The following compiler warning is present in StandaloneMmCore.c in VS2019:

d:\src\edk2\StandaloneMmPkg\Core\StandaloneMmCore.c(570): error C2220: the following warning is treated as an error
d:\src\edk2\StandaloneMmPkg\Core\StandaloneMmCore.c(570): warning C4244: &apos;=&apos;: conversion from &apos;UINT64&apos; to &apos;UINT32&apos;, possible loss of data</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14979</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 22:27:02 +0000</bug_when>
    <thetext>I will send a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14980</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 22:57:21 +0000</bug_when>
    <thetext>V1 patch on the mailing list: https://edk2.groups.io/g/devel/message/71087</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15062</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-11 23:15:03 +0000</bug_when>
    <thetext>V2 patch on the mailing list: https://edk2.groups.io/g/devel/message/71593</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15063</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-11 23:15:34 +0000</bug_when>
    <thetext>Patch merged to edk2 master: https://github.com/tianocore/edk2/commit/1d27e58e401faea284309039f3962cb3cb4549fc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3093</bug_id>
          
          <creation_ts>2020-11-28 09:37:33 +0000</creation_ts>
          <short_desc>EmulatorPkg Linux X64 build crash</short_desc>
          <delta_ts>2022-03-01 22:20:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2639</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14432</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-11-28 09:37:33 +0000</bug_when>
    <thetext>The last error message is segment fault:

================
......
Temp Stack : BaseAddress=0x40000000 Length=0x10000
Temp Heap  : BaseAddress=0x40010000 Length=0x10000
Total temporary memory:    131072 bytes.
  temporary memory stack ever used:       65532 bytes.
  temporary memory heap used for HobList: 4000 bytes.
  temporary memory heap occupied by memory pages: 0 bytes.
Old Stack size 65536, New stack size 131072
Stack Hob: BaseAddress=0x41000000 Length=0x20000
Heap Offset = 0x1010000 Stack Offset = 0x1010000
Segmentation fault (core dumped)
================

Windows IA32/X64 is good.

Linux IA32 build failure on my platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14513</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 20:48:41 +0000</bug_when>
    <thetext>Below BZ reports the same issue. 

https://bugzilla.tianocore.org/show_bug.cgi?id=2639
https://bugzilla.tianocore.org/show_bug.cgi?id=2668</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18499</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 22:20:52 +0000</bug_when>
    <thetext>The duplicated one. can be closed.

*** This bug has been marked as a duplicate of bug 2639 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3570</bug_id>
          
          <creation_ts>2021-08-18 06:08:11 +0000</creation_ts>
          <short_desc>Support ACPI 6.4 in Acpiview HMAT parser</short_desc>
          <delta_ts>2021-10-10 21:16:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chris Jones">christopher.jones</reporter>
          <assigned_to name="Chris Jones">christopher.jones</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16957</commentid>
    <comment_count>0</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-08-18 06:08:11 +0000</bug_when>
    <thetext>The ACPI 6.4 specification adds a new &apos;MinTransferSize&apos; field to the System Locality, Latency and Bandwidth structure (table 5.129) which is part of HMAT. The Acpiview HMAT parser should be updated to use Acpi64.h and support the new &apos;MinTransferSize&apos; field.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16958</commentid>
    <comment_count>1</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-08-18 06:14:50 +0000</bug_when>
    <thetext>Patch sent to the list as: https://edk2.groups.io/g/devel/message/79487</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17049</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 22:05:22 +0000</bug_when>
    <thetext>Chris takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17474</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-10 21:16:08 +0000</bug_when>
    <thetext>Merged as 5ece2ad36caa..30400318a278</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3475</bug_id>
          
          <creation_ts>2021-07-03 08:22:44 +0000</creation_ts>
          <short_desc>What Is The AOL Blerk Error 1?</short_desc>
          <delta_ts>2021-07-05 05:13:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="smith8395john">smith8395john</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable201911</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16526</commentid>
    <comment_count>0</comment_count>
    <who name="smith8395john">smith8395john</who>
    <bug_when>2021-07-03 08:22:44 +0000</bug_when>
    <thetext>If there is a problem with the authentication procedure for AOL Mail, you may see the message AOL Blerk ERROR 1. This is most likely due to browser settings, especially if you&apos;re using an older or outdated browser, and may be resolved by performing the troubleshooting steps below.

Change your browser&apos;s settings.
Make a change to a saved bookmark
Troubleshoot Internet Explorer problems.

To access AOL Mail use the latest browser. Unfortunately, Microsoft has ceased upgrading Internet Explorer, it is no longer regarded as a secure means to browse the internet. While these troubleshooting techniques may assist in resolving certain difficulties with AOL Mail on Internet Explorer, they are not guaranteed to do so.

https://www.emailsupport.us/blog/aol-blerk-error-1/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16541</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-05 05:13:21 +0000</bug_when>
    <thetext>this is not related to edk2 project. close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3980</bug_id>
          
          <creation_ts>2022-07-06 11:38:10 +0000</creation_ts>
          <short_desc>Add retry mechanism if tpm command fails with timeout error</short_desc>
          <delta_ts>2022-07-31 12:36:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Swapnil Patil">S.Keshavrao.Patil</reporter>
          <assigned_to name="qi1.zhang@intel.com">qi1.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>qi1.zhang</cc>
    
    <cc>S.Keshavrao.Patil</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19205</commentid>
    <comment_count>0</comment_count>
      <attachid>1004</attachid>
    <who name="Swapnil Patil">S.Keshavrao.Patil</who>
    <bug_when>2022-07-06 11:38:10 +0000</bug_when>
    <thetext>Created attachment 1004
TCG&apos;s_flowchart_for_retry_ontimeout.jpg

As per TCG PC Client Device Driver Design Principle document, if tpm commands fails due to timeout condition, then it should have retry mechanism (3 retry attempts). 

Existing implementation of PtpCrbTpmCommand does not have retry mechanism if it fails with EFI_TIMEOUT. 

Please refer to attached flowchart for reference.
Please refer to code mentioned in below link :  https://github.com/tianocore/edk2/blob/master/SecurityPkg/Library/Tpm2DeviceLibDTpm/Tpm2Ptp.c#L213</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19206</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-07-06 11:45:30 +0000</bug_when>
    <thetext>Agree it is a bug. We need improve the process to follow TCG spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19215</commentid>
    <comment_count>2</comment_count>
      <attachid>1005</attachid>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2022-07-08 03:11:28 +0000</bug_when>
    <thetext>Created attachment 1005
0001-SecurityPkg-Add-retry-mechanism-for-tpm-command.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19216</commentid>
    <comment_count>3</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2022-07-08 03:13:01 +0000</bug_when>
    <thetext>(In reply to Swapnil Patil from comment #0)
&gt; Created attachment 1004 [details]
&gt; TCG&apos;s_flowchart_for_retry_ontimeout.jpg
&gt; 
&gt; As per TCG PC Client Device Driver Design Principle document, if tpm
&gt; commands fails due to timeout condition, then it should have retry mechanism
&gt; (3 retry attempts). 
&gt; 
&gt; Existing implementation of PtpCrbTpmCommand does not have retry mechanism if
&gt; it fails with EFI_TIMEOUT. 
&gt; 
&gt; Please refer to attached flowchart for reference.
&gt; Please refer to code mentioned in below link : 
&gt; https://github.com/tianocore/edk2/blob/master/SecurityPkg/Library/
&gt; Tpm2DeviceLibDTpm/Tpm2Ptp.c#L213

Hi,
Could you check the attached patch and try? Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19331</commentid>
    <comment_count>4</comment_count>
    <who name="Swapnil Patil">S.Keshavrao.Patil</who>
    <bug_when>2022-07-26 11:55:19 +0000</bug_when>
    <thetext>Hello Zhang,
Thanks for sharing the patch. We could get successful result after applying your patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19343</commentid>
    <comment_count>5</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-07-31 12:36:19 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/3160</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1004</attachid>
            <date>2022-07-06 11:38:10 +0000</date>
            <delta_ts>2022-07-06 11:38:10 +0000</delta_ts>
            <desc>TCG&apos;s_flowchart_for_retry_ontimeout.jpg</desc>
            <filename>TCG&apos;s_flowchart_for_retry_ontimeout.jpg</filename>
            <type>image/jpeg</type>
            <size>96676</size>
            <attacher name="Swapnil Patil">S.Keshavrao.Patil</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1005</attachid>
            <date>2022-07-08 03:11:28 +0000</date>
            <delta_ts>2022-07-08 03:11:28 +0000</delta_ts>
            <desc>0001-SecurityPkg-Add-retry-mechanism-for-tpm-command.patch</desc>
            <filename>0001-SecurityPkg-Add-retry-mechanism-for-tpm-command.patch</filename>
            <type>application/octet-stream</type>
            <size>5004</size>
            <attacher name="qi1.zhang@intel.com">qi1.zhang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3353</bug_id>
          
          <creation_ts>2021-04-25 19:59:38 +0000</creation_ts>
          <short_desc>BaseTools generated makefile tool definitions should be sorted</short_desc>
          <delta_ts>2021-04-27 02:41:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
    
    <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15771</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-25 19:59:38 +0000</bug_when>
    <thetext>When some types of changes are made to BaseTools, one developer
test is comparing the generated makefiles.  Some of the contents
of the generated makefiles are not sorted (specifically the tool
definitions), so the order of the contents is not guaranteed, which
can show up as differences when comparing makefiles.

Keeping the generated makefile contents consistent may also help
with some increment build flows.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15782</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-27 01:29:36 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15783</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-27 01:31:10 +0000</bug_when>
    <thetext>Patch review email

https://edk2.groups.io/g/devel/message/74412</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15784</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-27 02:41:11 +0000</bug_when>
    <thetext>Commit:
https://github.com/tianocore/edk2/commit/8d2012035db3cb869d1da8a95c1308025cadbeee

GitHub PR:
https://github.com/tianocore/edk2/pull/1599</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3839</bug_id>
          
          <creation_ts>2022-02-15 20:36:44 +0000</creation_ts>
          <short_desc>Add ACPI_PARSER bitfield parser for acpiview</short_desc>
          <delta_ts>2022-03-29 01:43:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="AbdulLateef Atta">AbdulLateef.Attar</reporter>
          <assigned_to name="AbdulLateef Atta">AbdulLateef.Attar</assigned_to>
          <cc>AbdulLateef.Attar</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18374</commentid>
    <comment_count>0</comment_count>
    <who name="AbdulLateef Atta">AbdulLateef.Attar</who>
    <bug_when>2022-02-15 20:36:44 +0000</bug_when>
    <thetext>The current acpiview command can display/parse the structure members.
Need parser for bitfields to display relative information regarding each bit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18375</commentid>
    <comment_count>1</comment_count>
    <who name="AbdulLateef Atta">AbdulLateef.Attar</who>
    <bug_when>2022-02-15 20:42:00 +0000</bug_when>
    <thetext>Created this bug as part of the below discussion.

https://edk2.groups.io/g/devel/message/85892</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18378</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-15 21:39:42 +0000</bug_when>
    <thetext>Atta is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18379</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-15 21:39:53 +0000</bug_when>
    <thetext>Atta is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18731</commentid>
    <comment_count>4</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2022-03-29 01:43:10 +0000</bug_when>
    <thetext>code merged at https://github.com/tianocore/edk2/commit/691b1786670d17f7dc5ad717925210f1f62ddd8a
https://github.com/tianocore/edk2/commit/40004ff9d5e11441bb970dfc701e552801060b1b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3228</bug_id>
          
          <creation_ts>2021-02-21 12:51:23 +0000</creation_ts>
          <short_desc>&quot;maybe-uninitialized&quot; warnings emitted by gcc-5.5.0</short_desc>
          <delta_ts>2021-05-14 06:01:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>sergei</reporter>
          <assigned_to>sergei</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>rebecca</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15085</commentid>
    <comment_count>0</comment_count>
    <who name="">sergei</who>
    <bug_when>2021-02-21 12:51:23 +0000</bug_when>
    <thetext>GCC 5 doesn&apos;t actually have `-no-pie` option.  My GCC&apos;s version is &quot;5.5.0&quot;.

This affects building for IA32 target, where `-no-pie` is used for linking.

So toolchain&apos;s name doesn&apos;t match compiler that it targets. Given that GCC 6 added `--enable-default-pie` configure option, `-no-pie` is probably available since GCC 6.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15121</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-23 21:45:49 +0000</bug_when>
    <thetext>Sergei: can you specify the error message for this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15131</commentid>
    <comment_count>2</comment_count>
    <who name="">sergei</who>
    <bug_when>2021-02-24 08:43:26 +0000</bug_when>
    <thetext>Compiler&apos;s error is in the title.  Here is tail of the build output:

&quot;gcc&quot; -o /.../3mdeb/edk2/Build/OvmfIa32/DEBUG_GCC5/IA32/OvmfPkg/AcpiTables/AcpiTables/OUTPUT/./Facp.dll -nostdlib -Wl,-n,-q,--gc-sections -z common-page-size=0x40 -Wl,--defsym=PECOFF_HEADER_SIZE=0 -Wl,--script=/.../3mdeb/edk2/BaseTools/Scripts/GccBase.lds -Wl,--entry,ReferenceAcpiTable -u ReferenceAcpiTable -Wl,-m,elf_i386 -no-pie /.../3mdeb/edk2/Build/OvmfIa32/DEBUG_GCC5/IA32/OvmfPkg/AcpiTables/AcpiTables/OUTPUT/./Facp.obj -g -Os -fshort-wchar -fno-builtin -fno-strict-aliasing -Wall -Werror -Wno-array-bounds -include AutoGen.h -fno-common -ffunction-sections -fdata-sections -DSTRING_ARRAY_NAME=PlatformAcpiTablesStrings -m32 -march=i586 -malign-double -fno-stack-protector -D EFI32 -fno-asynchronous-unwind-tables -Wno-address -fno-pic -fno-pie -flto -Os -mno-mmx -mno-sse -D DISABLE_NEW_DEPRECATED_INTERFACES -D ENABLE_MD5_DEPRECATED_INTERFACES -x c -fno-lto -m32
Building ... /.../3mdeb/edk2/MdePkg/Library/PeiCoreEntryPoint/PeiCoreEntryPoint.inf [IA32]
gcc: warning: ‘-x c’ after last input file has no effect
gcc: error: unrecognized command line option ‘-no-pie’
GNUmakefile:318: recipe for target &apos;/.../3mdeb/edk2/Build/OvmfIa32/DEBUG_GCC5/IA32/OvmfPkg/AcpiTables/AcpiTables/OUTPUT/Facp.acpi&apos; failed
make: *** [/.../3mdeb/edk2/Build/OvmfIa32/DEBUG_GCC5/IA32/OvmfPkg/AcpiTables/AcpiTables/OUTPUT/Facp.acpi] Error 1


build.py...
 : error 7000: Failed to execute command
        make tbuild [/.../3mdeb/edk2/Build/OvmfIa32/DEBUG_GCC5/IA32/OvmfPkg/AcpiTables/AcpiTables]


build.py...
 : error F002: Failed to build module
        /.../3mdeb/edk2/OvmfPkg/AcpiTables/AcpiTables.inf [IA32, GCC5, DEBUG]

- Failed -
Build end time: 15:39:12, Feb.24 2021
Build total time: 00:00:11</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15233</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-08 09:34:26 +0000</bug_when>
    <thetext>Hi,

with reference to commit 11d0cd23dd1b (&quot;BaseTools/tools_def IA32: drop -no-pie linker option for GCC49&quot;, 2018-06-18), admittedly as a workaround, please use the GCC49 edk2 toolchain for your compiler version.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15254</commentid>
    <comment_count>4</comment_count>
    <who name="">sergei</who>
    <bug_when>2021-03-09 13:41:05 +0000</bug_when>
    <thetext>Hi Laszlo,

using GCC49 toolchain fixes -no-pie problem, but causes multiple failures like these:

/.../edk2/ShellPkg/Library/UefiShellCommandLib/UefiShellCommandLib.c: In function ‘ShellSortFileList’:
/.../edk2/ShellPkg/Library/UefiShellCommandLib/UefiShellCommandLib.c:2202:19: error: ‘Dupes’ may be used uninitialized in this function [-Werror=maybe-uninitialized]
       *Duplicates = Dupes;

/.../edk2/ShellPkg/DynamicCommand/HttpDynamicCommand/Http.c: In function ‘RunHttp’:
/.../edk2/ShellPkg/DynamicCommand/HttpDynamicCommand/Http.c:1561:11: error: ‘Status’ may be used uninitialized in this function [-Werror=maybe-uninitialized]

Not sure why (it&apos;s the same compiler in both cases, but apparently different flags), however I did fix them just to complete the build and post a patch in case not all of them are false positives.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15255</commentid>
    <comment_count>5</comment_count>
      <attachid>668</attachid>
    <who name="">sergei</who>
    <bug_when>2021-03-09 13:42:10 +0000</bug_when>
    <thetext>Created attachment 668
Fix uninitialized-use warnings</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15262</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-10 08:09:19 +0000</bug_when>
    <thetext>Hi Sergei,

the &quot;maybe-uninitialized&quot; warnings (which we treat as errors in the build system) almost always originate from incorrect data flow analysis in the compiler. The older your gcc is (5.5.0), the more prevalent this issue is.

The community has not run into the specific errors you mention most likely because we&apos;ve been using much higher gcc versions for a time now, and the data flow analysis in those gcc versions is more advanced.

After you determine that a &quot;maybe-uninitialized&quot; warning is in fact incorrect -- that is, there is no way to use the variable in question without having assigned it a value --, the right way to suppress the warning is the following:

  //
  // Set Status to suppress incorrect compiler/analyzer warnings
  //
  Status = EFI_SUCCESS;

That is, *each* such case takes a separate assignment (edk2 forbids initialization of local variables anyway), and a dedicated comment.

Furthermore, your patch modifies 5 different modules. Therefore, the changes should be split into a series of 5 patches. The subject lines of the patches should be:

#1 MdeModulePkg/AtaAtapiPassThru: suppress incorrect gcc warning
#2 MdeModulePkg/PciBusDxe: suppress incorrect gcc warning
#3 OvmfPkg/VirtioFsDxe: suppress incorrect gcc warnings
#4 ShellPkg/HttpDynamicCommand: suppress incorrect gcc warning
#5 ShellPkg/UefiShellCommandLib: suppress incorrect gcc warning

Please subscribe to the edk2-devel mailing list:

https://edk2.groups.io/g/devel

and submit the patch series there for review, with git-send-email.

You can read about the edk2 development process here:

https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process

Here&apos;s an unofficial guide, with more details:

https://github.com/tianocore/tianocore.github.io/wiki/Laszlo&apos;s-unkempt-git-guide-for-edk2-contributors-and-maintainers

Note that, each patch in the series should be Cc&apos;d directly to the proper set of maintainers / reviewers (in addition to being addressed to the list), independently of the other patches in the series. The tool

  $EDK_TOOLS_PATH/Scripts/GetMaintainer.py

can help you determine the proper Cc&apos;s -- the &quot;Cc: ...&quot; tags should be included near the end of each commit message.

Also, please add

Ref: https://bugzilla.tianocore.org/show_bug.cgi?id=3228

to every commit message in the series, when you post the series.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15280</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-11 12:19:04 +0000</bug_when>
    <thetext>Related:

* [edk2-devel] [PATCH]
  MdeModulePkg: Initialize local variable value before they are used

mid: &lt;20210309012416.1981-1-gaoliming@byosoft.com.cn&gt;
https://edk2.groups.io/g/devel/message/72551
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00297.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15358</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-18 10:20:08 +0000</bug_when>
    <thetext>Related:

* [edk2-devel] [Patch v2]
  MdeModulePkg: Initialize local variable value before they are used

msgid: &lt;20210318045046.1909-1-gaoliming@byosoft.com.cn&gt;
https://edk2.groups.io/g/devel/message/73002
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00748.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15361</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-18 11:03:13 +0000</bug_when>
    <thetext>IN_PROGRESS per comment 7 / comment 8.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15974</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-10 07:50:47 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #8)
&gt; Related:
&gt; 
&gt; * [edk2-devel] [Patch v2]
&gt;   MdeModulePkg: Initialize local variable value before they are used
&gt; 
&gt; msgid: &lt;20210318045046.1909-1-gaoliming@byosoft.com.cn&gt;
&gt; https://edk2.groups.io/g/devel/message/73002
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00748.
&gt; html

This patch has been merged as commit aa7596534987 (&quot;MdeModulePkg: Initialize local variable value before they are used&quot;, 2021-03-25); but other patches / issues discussed in this BZ remain open.

Sergei, can you please follow up on comment 6? Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16062</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-14 05:16:53 +0000</bug_when>
    <thetext>Patches from Sergei on the list:

[edk2-devel] [PATCH v1 0/2] &quot;maybe-uninitialized&quot; warnings emitted by
https://edk2.groups.io/g/devel/message/75045
https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00411.html
msgid: &lt;20210511225616.5942-1-sergei@posteo.net&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16063</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-14 06:01:49 +0000</bug_when>
    <thetext>Merged as commit range 22ac5cc9d9db..d82c4693f8d5, via &lt;https://github.com/tianocore/edk2/pull/1643&gt;.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>668</attachid>
            <date>2021-03-09 13:42:10 +0000</date>
            <delta_ts>2021-03-09 13:42:10 +0000</delta_ts>
            <desc>Fix uninitialized-use warnings</desc>
            <filename>fix-uninitialized-warnings.patch</filename>
            <type>text/plain</type>
            <size>3773</size>
            <attacher>sergei</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3714</bug_id>
          
          <creation_ts>2021-10-30 09:29:30 +0000</creation_ts>
          <short_desc>Changing UFS descriptor configuration and retry for support device can&apos;t response in time</short_desc>
          <delta_ts>2022-01-03 21:28:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ian.chiu</reporter>
          <assigned_to>vincentx.ke</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>ian.chiu</cc>
    
    <cc>vincentx.ke</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17631</commentid>
    <comment_count>0</comment_count>
    <who name="">ian.chiu</who>
    <bug_when>2021-10-30 09:29:30 +0000</bug_when>
    <thetext>Issue be observed device can&apos;t response in time while reading whole UFS descriptor in one shot.
Adding five time retry and split descriptor structure into 8 (according to max LUN  support), for more fault tolerance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17644</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-02 21:42:12 +0000</bug_when>
    <thetext>Ian: can you provide the patch for this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17977</commentid>
    <comment_count>2</comment_count>
      <attachid>901</attachid>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-12 10:13:58 +0000</bug_when>
    <thetext>Created attachment 901
Replace with UFS_UNIT_DESC to fix response timeout problem

Replace with UFS_UNIT_DESC to fix response timeout problem</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17988</commentid>
    <comment_count>3</comment_count>
      <attachid>902</attachid>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-14 21:03:46 +0000</bug_when>
    <thetext>Created attachment 902
[PATCH v2] MdeModulePkg: Replace with UFS_UNIT_DESC to fix response timeout problem

Replace with UFS_UNIT_DESC to fix response timeout problem</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18007</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-12-16 01:29:00 +0000</bug_when>
    <thetext>V1 patch sent at: https://edk2.groups.io/g/devel/message/84795
V2 patch sent at: https://edk2.groups.io/g/devel/message/84845
V3 patch sent at: https://edk2.groups.io/g/devel/message/84848</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18019</commentid>
    <comment_count>5</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-17 05:08:55 +0000</bug_when>
    <thetext>V4 patch sent at: https://edk2.groups.io/g/devel/message/85052</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18040</commentid>
    <comment_count>6</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-22 01:54:28 +0000</bug_when>
    <thetext>PATCH v5 sent at: https://edk2.groups.io/g/devel/message/85157</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18067</commentid>
    <comment_count>7</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-01-03 21:26:42 +0000</bug_when>
    <thetext>Patch V7 sent at: https://edk2.groups.io/g/devel/message/85194</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18068</commentid>
    <comment_count>8</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-01-03 21:28:05 +0000</bug_when>
    <thetext>Resolved by Vincent via:
PR - https://github.com/tianocore/edk2/pull/2378
Commit - https://github.com/tianocore/edk2/commit/d463c56ddd2e321c78baff730fd32fe1a177fae0</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>901</attachid>
            <date>2021-12-12 10:13:58 +0000</date>
            <delta_ts>2021-12-14 21:03:46 +0000</delta_ts>
            <desc>Replace with UFS_UNIT_DESC to fix response timeout problem</desc>
            <filename>0001-MdeModulePkg-Replace-with-UfsUnitDesc-to-fix-respons.patch</filename>
            <type>text/plain</type>
            <size>2694</size>
            <attacher>vincentx.ke</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>902</attachid>
            <date>2021-12-14 21:03:46 +0000</date>
            <delta_ts>2021-12-14 21:03:46 +0000</delta_ts>
            <desc>[PATCH v2] MdeModulePkg: Replace with UFS_UNIT_DESC to fix response timeout problem</desc>
            <filename>0001-MdeModulePkg-Replace-with-UFS_UNIT_DESC-to-fix-respo.patch</filename>
            <type>text/plain</type>
            <size>2670</size>
            <attacher>vincentx.ke</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3111</bug_id>
          
          <creation_ts>2020-12-09 00:00:25 +0000</creation_ts>
          <short_desc>Variable Lock Protocol RequestToLock() shim on top of Variable Policy Protocol changed behavior</short_desc>
          <delta_ts>2021-05-21 16:06:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3410</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Bret Barkelew">bret.barkelew</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14529</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-09 00:00:25 +0000</bug_when>
    <thetext>The behavior of the Variable Lock Protocol has changed with the
introduction of the Variable Policy Protocol.  The original version
of the Variable Lock Protocol would return EFI_SUCESS if the same
variable was locked more than once.

With the new implementation of Variable Lock Protocol on top of the
Variable Policy Protocol, if the same variable is locked more than
once, then an ASSERT() is generated and an error code of EFI_ALREADY_STARTED
is returned.

This multi-lock behavior has been observed on platforms that are 
using edk2-stable202011 and it halting with an ASSERT() instead
of booting normally.

In order to preserve compatibility with the previous version of the
Variable Lock Protocol, this shim should be updated to never ASSERT()
and if the same variable is locked more than once, then the EFI_SUCCESS
should be returned.

The Variable Policy Protocol has more capabilities than the Variable
Lock Protocol, so in order to preserve the previous behavior, the
DumpVariablePolicy() service must be used to collect the entire
Variable Policy Table and evaluate if the exact same variable
matching the GUID and Name with no wildcards is in the Variable
Policy Table and the current policy is LOCK_NOW.

Since the behavior of the Variable Lock Protocol has been changed
it is recommended that this fix not only be applied to the EDK II
trunk, but also be applied to the edk2-stable202011 stable tag by
creating a branch from the edk2-stable202011 tag and adding this
critical bug fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14530</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-09 00:01:27 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14531</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-09 01:20:29 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/68489</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14582</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-15 11:07:36 +0000</bug_when>
    <thetext>Patch V2: https://edk2.groups.io/g/devel/message/68566

New in V3
==========
* Split into 2 patches.  One for code change.  Second for unit tests.
* Remove duplicate code and use ValidateSetVariable() to detect if a
  variable is already locked.

Patch V3: https://edk2.groups.io/g/devel/message/68692

New in V4
==========
* Fix spelling in unit tests
* Call ValidateSetVariable() with DataSize=0, Attributes=0

Patch V4: https://edk2.groups.io/g/devel/message/68701</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14583</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-15 11:15:02 +0000</bug_when>
    <thetext>Fix pushed to edk2/master
=========================
PR: https://github.com/tianocore/edk2/pull/1226
Commits:
    https://github.com/tianocore/edk2/pull/1226/commits/893cfe2847b83da74f53858d6acaa15a348bad7c
    https://github.com/tianocore/edk2/pull/1226/commits/16491ba6a6e9a91cedeeed45bc0fbdfde49f7968</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14712</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-01-05 18:17:47 +0000</bug_when>
    <thetext>stable/202011 patches for review that were cherry-picked from edk2/master

https://edk2.groups.io/g/devel/message/69672
https://edk2.groups.io/g/devel/message/69673
https://edk2.groups.io/g/devel/message/69674</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14713</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-01-05 18:19:05 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/184ece2d30bf6ed0ccd85e25250dcbdd0e951439
https://github.com/tianocore/edk2/commit/d7a66fceb16638bff9e2abece672ce73cb7a75f4

PR: https://github.com/tianocore/edk2/pull/1294</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3597</bug_id>
          
          <creation_ts>2021-08-30 03:53:37 +0000</creation_ts>
          <short_desc>RFE: OVMF/ArmVirt: add support for virtio-mmio 1.0</short_desc>
          <delta_ts>2021-10-18 21:27:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Gerd Hoffmann">kraxel</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17108</commentid>
    <comment_count>0</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2021-08-30 03:53:37 +0000</bug_when>
    <thetext>The virtio-mmio code in edk2 lacks support for the virtio 1.0 standard,
only the 0.9.5 draft version is supported.  Support for virtio-mmio 1.0
should be added, to allow transition away from virtio 0.9.5.

Testing:
qemu-system-aarch64 \
  -device virtio-scsi-device \
  -device scsi-hd,&lt;args&gt; \
  -global virtio-mmio.force-legacy=&lt;bool&gt;

force-legacy=true   =&gt; virtio 0.9.5 mode
force-legacy=false  =&gt; virtio 1.0 mode</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17112</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-30 20:52:00 +0000</bug_when>
    <thetext>This feature has been merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17580</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-18 21:27:33 +0000</bug_when>
    <thetext>*** Bug 3689 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3491</bug_id>
          
          <creation_ts>2021-07-14 01:51:59 +0000</creation_ts>
          <short_desc>Fix ariables may be used uninitializedv</short_desc>
          <delta_ts>2021-08-22 22:33:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>wesleyx.hsu</reporter>
          <assigned_to>wesleyx.hsu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16631</commentid>
    <comment_count>0</comment_count>
    <who name="">wesleyx.hsu</who>
    <bug_when>2021-07-14 01:51:59 +0000</bug_when>
    <thetext>Initialize variables may be used uninitialized after adding &quot;-ffat-lto-objects&quot; option in GCC5 tool chain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16632</commentid>
    <comment_count>1</comment_count>
    <who name="">wesleyx.hsu</who>
    <bug_when>2021-07-14 01:55:56 +0000</bug_when>
    <thetext>Change Assignee to WesleyX, Hsu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17006</commentid>
    <comment_count>2</comment_count>
    <who name="">wesleyx.hsu</who>
    <bug_when>2021-08-22 22:33:33 +0000</bug_when>
    <thetext>Code change has been submiited</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3377</bug_id>
          
          <creation_ts>2021-05-05 16:38:34 +0000</creation_ts>
          <short_desc>Clarify EFI_LOAD_OPTION.FilePathList[] device path definition</short_desc>
          <delta_ts>2021-06-30 16:56:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>felixp</cc>
    
    <cc>francois.ozog</cc>
    
    <cc>ilias.apalodimas</cc>
    
    <cc>michael.a.rothman</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15928</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-05 16:38:34 +0000</bug_when>
    <thetext>The UEFI spec knows two types of separators for device paths. Both have type 0x7F (End of Hardware Device Path) but differ by the sub-type:
 
Sub-Type 0xff – End Entire Device Path 
Sub-Type 0x01 – End Instance of a Device Path

Field EFI_LOAD_OPTION.FilePathList[] is described in the UEFI spec as follows:
 
&quot;A packed array of UEFI device paths. The first element of the array is a device path that describes the device and location of the Image for this load option.&quot;
 
It is not immediately clear if the separators between the array elements are of sub-type 0xff or 0x01. The description in the UEFI spec should be reworked for more clarity.

The UEFI variable ConDev is described as &quot;The device path of all possible console input devices&quot;. The spec does not refer to it as an array of device paths.

So it seems that the UEFI spec editors mean by array of device paths that an element of the array is separated by sub-type 0xff. Each individual array element may be a collection of device paths instances separated by 0x01 sub-type end nodes. 

This is further supported by the following evidence:

* EFI_DEVICE_PATH_UTILITIES_PROTOCOL has a function called IsDevicePathMultiInstance() along with walker functions AppendDevicePathInstance(), GetNextDevicePathInstance(). The description of these functions make it clear that the intention is to treat 0x01 as a separator between multiple instances of device paths in a multi-instance device path structure, with 0xff as the final end of DP indicator. For example, AppendDevicePathInstance() is defined as:

&quot;This function creates a new device path by appending a copy of the specified device path instance to a copy of the specified device path in an allocated buffer. The end-of-device-path device node is moved after the end of the appended device node and a new end-of-device-path-instance node is inserted between.&quot;

* In EFI_USER_INFO , there are user info policy types that leverage the device path definitions (such as EFI_USER_INFO_ACCESS_FORBID_LOAD), and they are clear on distinguishing the term &quot;multi-instance device path&quot; from a &quot;series of UEFI device paths&quot;:

&quot;The record is a series of normal UEFI device paths (not multi-instance device paths).&quot;

* The &quot;multi-instance&quot; usage also shows up in the language of LocateDevicePath()

So if the spec intended for FilePathList[] to use the 0x1 separator, they should have used the term &quot;multi-instance&quot; device path, which is not the case.





Note on the TianoCore implementation: 

The current EDK II coding requires that the device path identifying the UEFI binary (i.e. FilePathList[0] is terminated by a sub-type 0xff end node.)

The EDK2 code seems to be incomplete, with a &quot;TODO&quot; to support the FilePathList[]. In fact, the code calls it &quot;FilePath&quot; to be clear that it is assuming a single DevicePath (which means a 0xFF sub-type termination)

https://github.com/tianocore/edk2/blob/master/MdeModulePkg%2FLibrary%2FUefiBootManagerLib%2FBmLoadOption.c#L199

Searching the code further, I see there is support for parsing multi-instance device path (separated by END_INSTANCE_DEVICE_PATH_SUBTYPE, or 0x1) in things like UefiDevicePathLib , parsing code, etc... But it does not seem to be supported at all in the UEFI Boot Manager implemented in EDK2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15929</commentid>
    <comment_count>1</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-05 18:05:10 +0000</bug_when>
    <thetext>Review so far indicates general agreement with the conclusion. The UEFI spec language is consistent (using &quot;device path&quot;, not &quot;device path instance&quot;), and has been in the spec for a long time (from the &quot;beginning&quot;). Recommendation is to add a Note to clarify instead of changing the language.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15942</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-06 18:19:01 +0000</bug_when>
    <thetext>Feedback from Felix Polyudov &lt;Felixp@ami.com, proposed adding the following notes:


&quot;
Note: Each device path in the FilePathList can be a single instance or a multi-instance device path.

Note: FilePathList cannot be represented by the C-language array data structure. It&apos;s a sequence(a byte-packed buffer) of the variable length device path data structures described in chapter 10 below. References to FilePathList[0] here and throughout the UEFI specification refer to the first device path in the sequence and should not be treated as a literal C construct.
&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15981</commentid>
    <comment_count>3</comment_count>
    <who name="ilias.apalodimas@linaro.org">ilias.apalodimas</who>
    <bug_when>2021-05-10 14:31:59 +0000</bug_when>
    <thetext>The definition of this is already part of the device path description. Do we really need another clarification?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16004</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-11 17:34:38 +0000</bug_when>
    <thetext>USWG ECR In Progress: https://mantis.uefi.org/mantis/view.php?id=2227</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16043</commentid>
    <comment_count>5</comment_count>
    <who name="Michael A. Rothman">michael.a.rothman</who>
    <bug_when>2021-05-12 13:25:11 +0000</bug_when>
    <thetext>(In reply to Samer El-Haj-Mahmoud from comment #4)
&gt; USWG ECR In Progress: https://mantis.uefi.org/mantis/view.php?id=2227

2229</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16181</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-26 18:49:40 +0000</bug_when>
    <thetext>Correction. This is USWG ECR 2235 - https://mantis.uefi.org/mantis/view.php?id=2235</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16182</commentid>
    <comment_count>7</comment_count>
      <attachid>728</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-26 18:59:12 +0000</bug_when>
    <thetext>Created attachment 728
CodeFirst_Clarify_FilePathList</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16183</commentid>
    <comment_count>8</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-26 18:59:41 +0000</bug_when>
    <thetext>Added a proposed ECR with only the first note from comment 2

Please let me know if we think this is sufficient</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16275</commentid>
    <comment_count>9</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-06 11:33:21 +0000</bug_when>
    <thetext>As maintainer of the UEFI sub-system in U-Boot I am fine with the proposed change in the attachement. It provides the required clarification.

Reviewed-by: Heinrich Schuchardt &lt;xypron.glpk@gmx.de&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16281</commentid>
    <comment_count>10</comment_count>
    <who name="F1F0">francois.ozog</who>
    <bug_when>2021-06-07 09:27:28 +0000</bug_when>
    <thetext>The specification language was correct but, as subtlety is not a specification quality. The proposed clarification removes any doubt in the readers&apos; minds.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16301</commentid>
    <comment_count>11</comment_count>
    <who name="ilias.apalodimas@linaro.org">ilias.apalodimas</who>
    <bug_when>2021-06-08 13:40:28 +0000</bug_when>
    <thetext>U-Boot already treats the FilePathList[] as described in the clarification. The change looks good to me</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16505</commentid>
    <comment_count>12</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-06-30 16:56:18 +0000</bug_when>
    <thetext>This has been approved in UEFI Forum USWG meeting on 6/30, without change, as an Errata for UEFI 2.next

Closing this issue as resolved</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>728</attachid>
            <date>2021-05-26 18:59:12 +0000</date>
            <delta_ts>2021-05-26 18:59:12 +0000</delta_ts>
            <desc>CodeFirst_Clarify_FilePathList</desc>
            <filename>CodeFirst_Clarify_FilePathList.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>20409</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3871</bug_id>
          
          <creation_ts>2022-03-17 23:18:13 +0000</creation_ts>
          <short_desc>Add CRC16 and CRC32C to MdePkg</short_desc>
          <delta_ts>2022-06-14 12:02:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pedro Falcato">pedro.falcato</reporter>
          <assigned_to name="Pedro Falcato">pedro.falcato</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>pedro.falcato</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18640</commentid>
    <comment_count>0</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2022-03-17 23:18:13 +0000</bug_when>
    <thetext>edk2-platforms/Features/Ext4Pkg introduced CRC32C and CRC16 implementations for ext4 filesystem checksumming.
This recent commit (https://github.com/tianocore/edk2-platforms/commit/778ab79540e0df2e5e1b1656171a7dc9bafc9af9) added another CRC16 implementation for WhitleyOpenBoardPkg.

Since CRC16 and CRC32C are relatively useful for things other than Ext4Pkg, we should put them in core EDK2 and de-duplicate the crc16 code.

Note: I&apos;m divided between MdePkg and MdeModulePkg, since MdePkg seems to be for really core UEFI/PI stuff but has MdePkg/Library/BaseLib/CheckSum.c which would be a nice place to put CalculateCrc32C and CalculateCrc16. I don&apos;t know if we can change the BaseLib.h header like that, though.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18676</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 21:45:49 +0000</bug_when>
    <thetext>Pedro Falcato: agree this request. Can you work the patch to add them in MdePkg BaseLib?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18704</commentid>
    <comment_count>2</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2022-03-23 19:52:14 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; Pedro Falcato: agree this request. Can you work the patch to add them in
&gt; MdePkg BaseLib?

Yup, I&apos;ll submit the patch for this in the next few days.

It might be a bit awkward though since the patch set needs to affect both edk2 and edk2-platforms (since Ext4Pkg is there, and so is WhitleyOpenBoardPkg) and I&apos;m not sure if this is possible.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18705</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-23 21:09:48 +0000</bug_when>
    <thetext>Pedro: you can submit both changes for edk2 and edk2-platform</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18721</commentid>
    <comment_count>4</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2022-03-27 22:32:16 +0000</bug_when>
    <thetext>It appears that CRC16 is a wild beast and that all the usages of a &quot;CalculateCrc16()&quot; around edk2 and edk2-platforms are using different CRC16 variations. Maybe the value in a BaseLib CalculateCrc16() isn&apos;t a lot? 

I could still add the CRC16 Ext4Dxe is supposed to be using (I found out I was also using a wrong CRC16 algorithm!), which seems to be called CRC16-ANSI or just CRC16 for short.

Tell me what you think! I still think there&apos;s some value in having standard CRC32C and CRC16 implementations in BaseLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19080</commentid>
    <comment_count>5</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2022-06-14 12:02:24 +0000</bug_when>
    <thetext>Done in 92288f4(edk2) and a7e81ad (edk2-platforms)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3742</bug_id>
          
          <creation_ts>2021-11-18 09:37:22 +0000</creation_ts>
          <short_desc>Add ACPI support for Kvmtool</short_desc>
          <delta_ts>2022-02-02 04:58:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="Pierre Gondois">pierre.gondois</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17786</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-11-18 09:37:22 +0000</bug_when>
    <thetext>The DynamicTablesPkg allows to dynamically generates ACPI tables at runtime. KvmTool generates a Device Tree describing the platform running.

Make use of the DynamicTablesPkg to:
- Parse the Device Tree generated by KvmTool (the information is represented in structures specific to the DynamicTablesPkg)
- Dynamically generate ACPI tables describing the platform

This implies adding a Configuration Manager for KvmTool. Other Configuration Managers can be seen at edk2-platforms/Platform/ARM.

A v1 was posted at https://edk2.groups.io/g/devel/message/76990</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17788</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-11-18 11:05:24 +0000</bug_when>
    <thetext>Hi Pierre,

sorry, I&apos;m unsubscribing from this bug; I&apos;m no longer a reviewer for edk2. Thanks for your understanding.

Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17817</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 21:57:43 +0000</bug_when>
    <thetext>Pierre takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18117</commentid>
    <comment_count>3</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2022-01-11 11:18:55 +0000</bug_when>
    <thetext>V2 at: https://edk2.groups.io/g/devel/message/85562</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18228</commentid>
    <comment_count>4</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2022-02-02 04:57:10 +0000</bug_when>
    <thetext>V4: https://edk2.groups.io/g/devel/message/86279
V5: https://edk2.groups.io/g/devel/message/86303
Merged as #2477</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18229</commentid>
    <comment_count>5</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2022-02-02 04:58:05 +0000</bug_when>
    <thetext>This was merge as #2477</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3135</bug_id>
          
          <creation_ts>2020-12-22 02:30:30 +0000</creation_ts>
          <short_desc>Boot0000 would be first place after resetting BootOrder by efibootmgr</short_desc>
          <delta_ts>2021-02-28 20:26:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Walon Li">walon.li</reporter>
          <assigned_to name="Walon Li">walon.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>walon.li</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202008</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14646</commentid>
    <comment_count>0</comment_count>
      <attachid>621</attachid>
    <who name="Walon Li">walon.li</who>
    <bug_when>2020-12-22 02:30:30 +0000</bug_when>
    <thetext>Created attachment 621
V1 Patch

Reproduce step
1.  Boot to OS and check BootOrder. In my case, it&apos;s &quot;Boot0004, Boot0001, Boot0000, Boot0002, Boot0003&quot;.
2.  Then, adjust BootOrder by efibootmgr, only set one boot option in order by &quot;efibootmgr -o 0004&quot;. As screenshot, you can see 5 boot options, but only one(Boot0004) in BootOrder after changing.
3. Reboot system, will see Boot0000 be located at first place in BootOrder and others behind the specified option.

https://edk2.groups.io/g/discuss/message/463
I had submitted a question on edk2-discuss group but no feedback so far.

In this case, BootOrder would be reconstruct again so it should be &quot;Boot0004, Boot0000, Boot0001, Boot0002, Boot0003&quot; as I thought. Is it any reason to put Boot0000 at first place? Or just a bug? I used edk2-stable202008 to reproduce that on OVMF.
By the way, Boot0000 is none-bootable so the boot flow still works good to boot Boot0004. But options behavior aren&apos;t consistent, and it might affect user scripts if the specified option is not first one in BootOrder.

By the way, also checked code in BmBoot.c, looks like my patch can fix the issue but need owner to review that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14647</commentid>
    <comment_count>1</comment_count>
      <attachid>622</attachid>
    <who name="Walon Li">walon.li</who>
    <bug_when>2020-12-22 02:34:21 +0000</bug_when>
    <thetext>Created attachment 622
Change Bootorder screenshot</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14648</commentid>
    <comment_count>2</comment_count>
      <attachid>623</attachid>
    <who name="Walon Li">walon.li</who>
    <bug_when>2020-12-22 02:35:05 +0000</bug_when>
    <thetext>Created attachment 623
Change Bootorder screenshot (after reboot)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14727</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-05 21:57:09 +0000</bug_when>
    <thetext>Where is efibootmgr from? Is it EDK2 UEFI application?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14732</commentid>
    <comment_count>4</comment_count>
    <who name="Walon Li">walon.li</who>
    <bug_when>2021-01-05 22:10:27 +0000</bug_when>
    <thetext>efibootmgr is common utility in linux, user can change/dump boot variable by using that. https://linux.die.net/man/8/efibootmgr
But in this case, just demonstrate deleting BootOrder. I believe user can use dmpstore under efi-shell to delete BootOrder as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14857</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-19 22:07:40 +0000</bug_when>
    <thetext>Walon: what&apos;s your issue here? Delete boot order or change boot order variable?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14859</commentid>
    <comment_count>6</comment_count>
    <who name="Walon Li">walon.li</who>
    <bug_when>2021-01-20 00:47:22 +0000</bug_when>
    <thetext>Liming, delete BootOrder. I thought you can assign proper owner since I already commented how to reproduce the issue in first comment. Boot0000 is always be first place in BootOrder.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14977</commentid>
    <comment_count>7</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-02 22:08:43 +0000</bug_when>
    <thetext>Need to check UEFI spec on how to reconstruct bootorder when bootorder doesn&apos;t exist.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15003</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-02-03 12:43:17 +0000</bug_when>
    <thetext>Walon,

It looks like we may be discussing 2 difference scenarios.

1) Delete BootOrder variable and reboot.  The UEFI Spec states that 
   the behavior for this case is firmware vendor specific.  See
   Section 3.4.3 Boot Options Variables Default Boot Behavior.
   Do you have any concerns with the BDS behavior when the 
   BootOrder variable is deleted?

2) Change BootOrder from 0004,0001,0000,0002,0003 to just 0004 with all
   other Boot#### variables unmodified.  In this case you are observing
   that the BDS is changing the value of BootOrder with Boot0000 first.
   This does sound like a bug.  Can you please verify the state of the
   BootOrder variable after running the utility?  I want to make sure
   the state of the BootOrder variable going into BDS is what we expect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15012</commentid>
    <comment_count>9</comment_count>
    <who name="Walon Li">walon.li</who>
    <bug_when>2021-02-04 02:58:17 +0000</bug_when>
    <thetext>(In reply to Michael Kinney from comment #8)
&gt; Walon,
&gt; 
&gt; It looks like we may be discussing 2 difference scenarios.
&gt; 
&gt; 1) Delete BootOrder variable and reboot.  The UEFI Spec states that 
&gt;    the behavior for this case is firmware vendor specific.  See
&gt;    Section 3.4.3 Boot Options Variables Default Boot Behavior.
&gt;    Do you have any concerns with the BDS behavior when the 
&gt;    BootOrder variable is deleted?
I don&apos;t have any concern with deleting BootOrder here. Just comment the behavior is not only with efibootmgr-linux but also efi-shell.

&gt; 
&gt; 2) Change BootOrder from 0004,0001,0000,0002,0003 to just 0004 with all
&gt;    other Boot#### variables unmodified.  In this case you are observing
&gt;    that the BDS is changing the value of BootOrder with Boot0000 first.
&gt;    This does sound like a bug.  Can you please verify the state of the
&gt;    BootOrder variable after running the utility?  I want to make sure
&gt;    the state of the BootOrder variable going into BDS is what we expect.
Yep. BootOrder was changed by BDS. In my experiment, system under test is edk2-ovmf. That&apos;s edk2 behavior, no vendor&apos;s specific. You can see my V1 Patch, the moving Boot0000 to first place code is there.

Thanks for checking, Michael and Liming!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15016</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-04 05:09:00 +0000</bug_when>
    <thetext>Walon,

OVMF performs serious BootOrder management if you use the &quot;bootindex&quot; device properties on the QEMU command line.

That&apos;s a feature (BDS is platform policy). If at least one &quot;bootindex&quot; property appears on the QEMU command line, then QEMU exposes the &quot;bootorder&quot; fw_cfg file to OVMF, and OVMF adjusts the existing UEFI boot options accordingly.

The key actions are, from &quot;OvmfPkg/Library/PlatformBootManagerLib/BdsPlatform.c&quot;:

PlatformBootManagerAfterConsole()
  PlatformBdsConnectSequence()
    ConnectDevicesFromQemu()
  EfiBootManagerRefreshAllBootOption()
  SetBootOrderFromQemu()


If you want me to look into the symptom, please do the following:

* build OVMF with the following flags:

  -b NOOPT --pcd gEfiMdePkgTokenSpaceGuid.PcdDebugPrintErrorLevel=0x8040004F

* append the following options to your QEMU command line:

  -debugcon file:debug.log -global isa-debugcon.iobase=0x402

* paste your complete QEMU command line in a new BZ comment

* attach the file &quot;debug.log&quot;.

Thanks.
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15040</commentid>
    <comment_count>11</comment_count>
      <attachid>649</attachid>
    <who name="Walon Li">walon.li</who>
    <bug_when>2021-02-08 02:40:47 +0000</bug_when>
    <thetext>Created attachment 649
2021-02-08.15:28:16_debug.log

Laszlo,

Please see 2021-02-08.15:28:16_debug.log, thanks for your help. By the way, maybe you can check my solution (V1 Patch) after you agree that&apos;s a bug.

Build command - build -t GCC5 -D DEBUG_ON_SERIAL_PORT -b NOOPT --pcd gEfiMdePkgTokenSpaceGuid.PcdDebugPrintErrorLevel=0x8040004F
QEMU commnad - qemu-system-x86_64 -L . --bios ../edk2/Build/Ovmf3264/NOOPT_GCC5/FV/OVMF.fd -serial file:logs/`date +%Y-%m-%d.%H:%M:%S`_debug.log -net none -hda ../run_ovmf/disk.img -m 8192 -smp 8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15041</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-08 08:45:28 +0000</bug_when>
    <thetext>Your QEMU command line is wrong. You should use none of the &quot;-L&quot; and
&quot;-bios&quot; options with OVMF.

This is not just a general remark -- this problem may actually play a
role in the symptom you see. When you run QEMU with &quot;-bios&quot;, that is,
without a pflash chip, then OVMF has no access to a UEFI-spec-conformant
variable store. In particular, if a non-volatile UEFI variable is
created or modified at OS runtime, and then the virtual machine is
powered off (shut down), then such modifications/creations are lost.

This problem is not necessarily the root cause of your symptom, but
until you fix the QEMU command line, it makes no sense for me to look at
the OVMF debug log.

Here&apos;s the right way to run QEMU with OVMF:

(1) After the OVMF build finishes, create a copy of the &quot;OVMF_VARS.fd&quot;
variable store template file. The *copy* will be the actual variable
store of the virtual machine.

&gt;| cp ../edk2/Build/Ovmf3264/NOOPT_GCC5/FV/OVMF_VARS.fd varstore.fd

(2) On the QEMU command line, replace:

&gt;| -L . --bios ../edk2/Build/Ovmf3264/NOOPT_GCC5/FV/OVMF.fd
with:

&gt;| -drive if=pflash,format=raw,unit=0,file=../edk2/Build/Ovmf3264/NOOPT_GCC5/FV/OVMF_CODE.fd,readonly=on \
&gt;| -drive if=pflash,format=raw,unit=1,file=varstore.fd \

Please launch your virtual machine like this, and reattach the log.
Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15067</commentid>
    <comment_count>13</comment_count>
      <attachid>650</attachid>
    <who name="Walon Li">walon.li</who>
    <bug_when>2021-02-17 00:45:44 +0000</bug_when>
    <thetext>Created attachment 650
2021-02-17.13:34:36_debug.log

Laszlo,

Please check 2021-02-17.13:34:36_debug.log. Follow your information to run qemu again. Issue is still reproducible so need your help.

qemu-system-x86_64 -drive if=pflash,format=raw,unit=0,file=../edk2/Build/Ovmf3264/NOOPT_GCC5/FV/OVMF_CODE.fd,readonly=on -drive if=pflash,format=raw,unit=1,file=varstore.fd -serial file:logs/`date +%Y-%m-%d.%H:%M:%S`_debug.log -net none -hda ../run_ovmf/disk.img -m 8192 -smp 8

Thanks,
Walon</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15071</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-17 09:44:35 +0000</bug_when>
    <thetext>Hello Walon,

thank you for repeating the test, and for attaching the log file.

The log confirms (in accordance with the QEMU command line) that

- a &quot;bootorder&quot; fw_cfg file is not created by QEMU (accordingly to not
  having a &quot;bootindex&quot; property on the QEMU command line), and that

- OVMF does not modify the UEFI boot order (the BootOrder or Boot####
  variables).

So whatever issue you are reporting / experiencing indeed appears
independent of QEMU and OVMF.

--*--

Now, regarding the log itself, it contains:

&gt;| [Bds]=============Begin Load Options Dumping ...=============
&gt;|   Driver Options:
&gt;|   SysPrep Options:
&gt;|   Boot Options:
&gt;|     Boot0004: ubuntu             0x0001
&gt;|     Boot0001: UEFI QEMU DVD-ROM QM00003                  0x0001
&gt;|     Boot0000: UiApp              0x0109
&gt;|     Boot0002: UEFI QEMU HARDDISK QM00001                 0x0001
&gt;|     Boot0003: EFI Internal Shell                 0x0001
&gt;|   PlatformRecovery Options:
&gt;|     PlatformRecovery0000: Default PlatformRecovery               0x0001
&gt;| [Bds]=============End Load Options Dumping=============

Can you please clarify if, in your opinion, this boot order is correct
or incorrect?

To me, this boot order seems to match your *initial* setup (see step#1
in comment#0), that is, it doesn&apos;t appear to have been dumped after
running &quot;efibootmgr -o 0004&quot;. In other words, this particular log (from
comment#13) seems to prove that OVMF does not manipulate the boot order
/ boot options in any way, but the log does not reflect the actual
symptom you are reporting.

In comparison, the log from comment#11 -- where the QEMU command line
was not correct -- did show the symptom:

&gt; [Bds]=============Begin Load Options Dumping ...=============
&gt;   Driver Options:
&gt;   SysPrep Options:
&gt;   Boot Options:
&gt;     Boot0000: UiApp            0x0109
&gt;     Boot0004: ubuntu           0x0001
&gt;     Boot0001: UEFI QEMU DVD-ROM QM00003                0x0001
&gt;     Boot0002: UEFI QEMU HARDDISK QM00001               0x0001
&gt;     Boot0003: EFI Internal Shell               0x0001
&gt;   PlatformRecovery Options:
&gt;     PlatformRecovery0000: Default PlatformRecovery             0x0001
&gt; [Bds]=============End Load Options Dumping=============

Did you perhaps capture the log in comment#13 with your patch already
applied?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15073</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-17 10:02:06 +0000</bug_when>
    <thetext>Anyway:

I think we&apos;re on the wrong track with this. We&apos;ve spent too much time on discussing / analyzing the symptom, while the precise symptom is more or less irrelevant. It&apos;s just an unpleasant side-effect of BmRegisterBootManagerMenu() not doing the right thing.

What the patch does is: update BmRegisterBootManagerMenu() so that the Boot Manager Menu boot option be created at the *end* of BootOrder, not at the *start* of BootOrder.

BmRegisterBootManagerMenu() is called by EfiBootManagerGetBootManagerMenu() only if the Boot Manager Menu option does not exist yet, so this patch is a no-op if the Boot Manager Menu option already exists. If the option does not exist, then the change is to create it at the end of BootOrder, not at the start of BootOrder. This makes sense to me. I suggest writing a short commit message for the patch, and posting it to the list. A deep analysis of the symptom itself does not seem necessary to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15075</commentid>
    <comment_count>16</comment_count>
    <who name="Walon Li">walon.li</who>
    <bug_when>2021-02-17 11:18:30 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #14)
&gt; 
&gt; 
&gt; &gt; [Bds]=============Begin Load Options Dumping ...=============
&gt; &gt;   Driver Options:
&gt; &gt;   SysPrep Options:
&gt; &gt;   Boot Options:
&gt; &gt;     Boot0000: UiApp            0x0109
&gt; &gt;     Boot0004: ubuntu           0x0001
&gt; &gt;     Boot0001: UEFI QEMU DVD-ROM QM00003                0x0001
&gt; &gt;     Boot0002: UEFI QEMU HARDDISK QM00001               0x0001
&gt; &gt;     Boot0003: EFI Internal Shell               0x0001
&gt; &gt;   PlatformRecovery Options:
&gt; &gt;     PlatformRecovery0000: Default PlatformRecovery             0x0001
&gt; &gt; [Bds]=============End Load Options Dumping=============
&gt; 
&gt; Did you perhaps capture the log in comment#13 with your patch already
&gt; applied?
No. In this log, you can see &quot;[Bds]=============Begin Load Options Dumping ...=============&quot; twice because the log is following comment#1 Reproduce Step, that means system would be reboot. First &quot;Load Options Dumping&quot; is before command &quot;efibootmgr -o 0004&quot; and the second &quot;Load Options Dumping&quot; is after command.

Agree with you with comment#15, I&apos;ll send a patch and cc you in the list.

Thanks!
Walon</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15163</commentid>
    <comment_count>17</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-28 20:26:46 +0000</bug_when>
    <thetext>Walon has fixed it @7f34681c488aee2563eaa2afcc6a2c8aa7c5b912</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>621</attachid>
            <date>2020-12-22 02:30:30 +0000</date>
            <delta_ts>2020-12-22 02:30:30 +0000</delta_ts>
            <desc>V1 Patch</desc>
            <filename>FixBoot0000DefaultPriority.patch</filename>
            <type>application/octet-stream</type>
            <size>540</size>
            <attacher name="Walon Li">walon.li</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>622</attachid>
            <date>2020-12-22 02:34:21 +0000</date>
            <delta_ts>2020-12-22 02:34:21 +0000</delta_ts>
            <desc>Change Bootorder screenshot</desc>
            <filename>Screenshot_before_change.PNG</filename>
            <type>image/png</type>
            <size>15059</size>
            <attacher name="Walon Li">walon.li</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>623</attachid>
            <date>2020-12-22 02:35:05 +0000</date>
            <delta_ts>2020-12-22 02:35:05 +0000</delta_ts>
            <desc>Change Bootorder screenshot (after reboot)</desc>
            <filename>Screenshot_after_change.PNG</filename>
            <type>image/png</type>
            <size>5877</size>
            <attacher name="Walon Li">walon.li</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>649</attachid>
            <date>2021-02-08 02:40:47 +0000</date>
            <delta_ts>2021-02-08 02:40:47 +0000</delta_ts>
            <desc>2021-02-08.15:28:16_debug.log</desc>
            <filename>2021-02-08.15:28:16_debug.log</filename>
            <type>text/x-log</type>
            <size>340802</size>
            <attacher name="Walon Li">walon.li</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>650</attachid>
            <date>2021-02-17 00:45:44 +0000</date>
            <delta_ts>2021-02-17 00:45:44 +0000</delta_ts>
            <desc>2021-02-17.13:34:36_debug.log</desc>
            <filename>2021-02-17.13:34:36_debug.log</filename>
            <type>text/x-log</type>
            <size>343726</size>
            <attacher name="Walon Li">walon.li</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3620</bug_id>
          
          <creation_ts>2021-09-11 17:12:15 +0000</creation_ts>
          <short_desc>PeiVariableReadLib: Bad pointer type for PeiServicesLocatePpi</short_desc>
          <delta_ts>2021-12-01 16:40:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17243</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-09-11 17:12:15 +0000</bug_when>
    <thetext>Both instances need a cast to (VOID**)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17884</commentid>
    <comment_count>1</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-12-01 16:40:47 +0000</bug_when>
    <thetext>This was fixed in commit https://github.com/tianocore/edk2-platforms/commit/6b4a1eb461a87811627ee3bfdd847b1117aa155b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3018</bug_id>
          
          <creation_ts>2020-10-21 15:54:27 +0000</creation_ts>
          <short_desc>ACPI Spec ECR - Register Access Restriction</short_desc>
          <delta_ts>2021-04-30 14:19:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>rgough</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14069</commentid>
    <comment_count>0</comment_count>
      <attachid>583</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-10-21 15:54:27 +0000</bug_when>
    <thetext>Created attachment 583
ECR Draft

This is a code-first ECR / external submission to the UEFI Forum ACPI Specification. Will submit the edk2-staging and the markdown shortly

Description:
&quot;
Some systems have devices that do not support 64-bit MMIO transactions. Access to 64-bit registers needs to be done using separate 32-bit transfers.

One examples is the XHCI controller on the RPi4. But this exists on other types of controllers on other systems.

One solution is to define an ACPI AML for the firmware to describe to the OS this device register access limitation in a generic way.
&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14123</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:57:23 +0000</bug_when>
    <thetext>Samer: can take code first process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14240</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-11-05 18:16:32 +0000</bug_when>
    <thetext>Some feedback received on this:

• Remove the “0” return value/enum since it is not meaningful. An implementation without restrictions described in this interface will simply not present this _RAR object

• Add enums to define other register access width restrictions, such as 16, 128. Any others?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14536</commentid>
    <comment_count>3</comment_count>
      <attachid>607</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-12-09 13:04:53 +0000</bug_when>
    <thetext>Created attachment 607
ECR revision2

Updated to revision 2 based on feedback to drop the &quot;0&quot; return value. Other enumes for different register access /bit width restrictions can be added in the future if there are real use cases for known HW limitations</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14564</commentid>
    <comment_count>4</comment_count>
    <who name="Rob Gough">rgough</who>
    <bug_when>2020-12-11 10:13:45 +0000</bug_when>
    <thetext>This seems like a little bit of overkill to define an entirely new ACPI named object for a single binary property.

A _DSD property, using the device property UUID in my opinion, should be sufficient and preferred.

The link to the _DSD device properties definition is https://www.uefi.org/sites/default/files/resources/_DSD-device-properties-UUID.pdf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15017</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-02-04 09:02:52 +0000</bug_when>
    <thetext>To update this discussion. Based on Rob&apos;s feedback, there is work that started on building a &quot;repository of DSD&quot; documents, including a standard list of DSDs. Initial draft is available here: https://github.com/ahs3/dsd-guide

The plan is to move this method definition to a DSD property once that work is completed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15636</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-13 15:49:02 +0000</bug_when>
    <thetext>In order to make progress on this, I opened a code-first ECR  against the UEFI spec to clarify the language around the Boot#### options processing.

Code First ECR: https://bugzilla.tianocore.org/show_bug.cgi?id=3336

Feedback on the proposed language is appreciated. Please provide the feedback directly in the BZ above.

I will update the thread/BZ with results from USWG.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15638</commentid>
    <comment_count>7</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-13 15:50:58 +0000</bug_when>
    <thetext>The last comment was added to this BZ by mistake. Please ignore.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15639</commentid>
    <comment_count>8</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-13 17:20:58 +0000</bug_when>
    <thetext>I submitted a PR on the DSD Guide to add the Register Access Restriction property:

https://github.com/UEFI/DSD-Guide/pull/13</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15814</commentid>
    <comment_count>9</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-28 16:41:07 +0000</bug_when>
    <thetext>The PR was approved and merged in the DSD-Guide.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15854</commentid>
    <comment_count>10</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-30 14:19:44 +0000</bug_when>
    <thetext>This ECR can be closed, now that the proposal is approved and integrated in the DSD guide as a _DSD property rather than a new method</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>583</attachid>
            <date>2020-10-21 15:54:27 +0000</date>
            <delta_ts>2020-10-21 15:54:27 +0000</delta_ts>
            <desc>ECR Draft</desc>
            <filename>CodeFirst_Registers_Access_Restriction_ECR.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>20108</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>607</attachid>
            <date>2020-12-09 13:04:53 +0000</date>
            <delta_ts>2020-12-09 13:05:16 +0000</delta_ts>
            <desc>ECR revision2</desc>
            <filename>CodeFirst_Registers_Access_Restriction_ECR_ver2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>20036</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3514</bug_id>
          
          <creation_ts>2021-07-29 10:17:13 +0000</creation_ts>
          <short_desc>Platform/Intel/SimicsOpenBoardPkg: Fix build error of BoardX58Ich10 with GCC5 toolchain</short_desc>
          <delta_ts>2022-03-30 11:25:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Takuto Naito">naitaku</reporter>
          <assigned_to name="Takuto Naito">naitaku</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16722</commentid>
    <comment_count>0</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2021-07-29 10:17:13 +0000</bug_when>
    <thetext>BoardX58Ich10 fails to be built with the following error with GCC5 toolchain.

/home/runner/work/edk2-platforms-build/edk2-platforms-build/edk2-platforms/Platform/Intel/SimicsOpenBoardPkg/SimicsDxe/Platform.c: In function ‘ExecutePlatformConfig’:
3971
/home/runner/work/edk2-platforms-build/edk2-platforms-build/Build/SimicsOpenBoardPkg/BoardX58Ich10/DEBUG_GCC5/X64/SimicsOpenBoardPkg/SimicsDxe/SimicsDxe/DEBUG/AutoGen.h:94:124: error: right-hand operand of comma expression has no effect [-Werror=unused-value]
3972
   94 | #define _PCD_SET_MODE_32_S_PcdVideoHorizontalResolution(Value)  ((_gPcd_BinaryPatch_PcdVideoHorizontalResolution = (Value)), RETURN_SUCCESS)
3973
      |                                                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~
3974
/home/runner/work/edk2-platforms-build/edk2-platforms-build/edk2/MdePkg/Include/Library/PcdLib.h:524:45: note: in expansion of macro ‘_PCD_SET_MODE_32_S_PcdVideoHorizontalResolution’
3975
  524 | #define PcdSet32S(TokenName, Value)         _PCD_SET_MODE_32_S_##TokenName    ((Value))
3976
      |                                             ^~~~~~~~~~~~~~~~~~~
3977
/home/runner/work/edk2-platforms-build/edk2-platforms-build/edk2-platforms/Platform/Intel/SimicsOpenBoardPkg/SimicsDxe/Platform.c:672:5: note: in expansion of macro ‘PcdSet32S’
3978
  672 |     PcdSet32S (PcdVideoHorizontalResolution,
3979
      |     ^~~~~~~~~
3980
In file included from &lt;command-line&gt;:
3981
/home/runner/work/edk2-platforms-build/edk2-platforms-build/Build/SimicsOpenBoardPkg/BoardX58Ich10/DEBUG_GCC5/X64/SimicsOpenBoardPkg/SimicsDxe/SimicsDxe/DEBUG/AutoGen.h:104:120: error: right-hand operand of comma expression has no effect [-Werror=unused-value]
3982
  104 | #define _PCD_SET_MODE_32_S_PcdVideoVerticalResolution(Value)  ((_gPcd_BinaryPatch_PcdVideoVerticalResolution = (Value)), RETURN_SUCCESS)
3983
      |                                                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~
3984
/home/runner/work/edk2-platforms-build/edk2-platforms-build/edk2/MdePkg/Include/Library/PcdLib.h:524:45: note: in expansion of macro ‘_PCD_SET_MODE_32_S_PcdVideoVerticalResolution’
3985
  524 | #define PcdSet32S(TokenName, Value)         _PCD_SET_MODE_32_S_##TokenName    ((Value))
3986
      |                                             ^~~~~~~~~~~~~~~~~~~
3987
/home/runner/work/edk2-platforms-build/edk2-platforms-build/edk2-platforms/Platform/Intel/SimicsOpenBoardPkg/SimicsDxe/Platform.c:674:5: note: in expansion of macro ‘PcdSet32S’
3988
  674 |     PcdSet32S (PcdVideoVerticalResolution,
3989
      |     ^~~~~~~~~
3990
cc1: all warnings being treated as errors
3991
make: *** [GNUmakefile:379: /home/runner/work/edk2-platforms-build/edk2-platforms-build/Build/SimicsOpenBoardPkg/BoardX58Ich10/DEBUG_GCC5/X64/SimicsOpenBoardPkg/SimicsDxe/SimicsDxe/OUTPUT/Platform.obj] Error 1
3992

3993
@/home/runner/work/edk2-platforms-build/edk2-platforms-build/Build/SimicsOpenBoardPkg/BoardX58Ich10/DEBUG_GCC5/X64/SimicsOpenBoardPkg/SimicsDxe/SimicsDxe/OUTPUT/cc_resp.txt
3994

3995
build.py...
3996
 : error 7000: Failed to execute command</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16724</commentid>
    <comment_count>1</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2021-07-29 11:24:13 +0000</bug_when>
    <thetext>The patch has been sent.
https://edk2.groups.io/g/devel/message/78379</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16759</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 21:52:52 +0000</bug_when>
    <thetext>The patch has been sent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18734</commentid>
    <comment_count>3</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2022-03-30 11:25:46 +0000</bug_when>
    <thetext>Fix at 2bb031471cea3355f6fe88d8476babfdce275bb0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3408</bug_id>
          
          <creation_ts>2021-05-20 22:15:16 +0000</creation_ts>
          <short_desc>SupportedAttributes value in OpalGetSupportedAttributesInfo () is left undetermined and cause Descriptor.RemovalMechanism != 0 assertion</short_desc>
          <delta_ts>2021-06-15 04:52:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Scottie Kuo">scottie.kuo</reporter>
          <assigned_to name="Scottie Kuo">scottie.kuo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16106</commentid>
    <comment_count>0</comment_count>
    <who name="Scottie Kuo">scottie.kuo</who>
    <bug_when>2021-05-20 22:15:16 +0000</bug_when>
    <thetext>When I am trying to do erasing on a OPAL feature SSD by using OpalUtilRevert (), I meet this assertion.
ASSERT [SecureEraseDxe] d:\alderlake\Edk2\SecurityPkg\Library\TcgStorageOpalLib\TcgStorageOpalUtil.c(1071): Descriptor.RemovalMechanism != 0

But from the OpalGetSupportedAttributesInfo, the DataRemoval is 0, meaning it should not require any RemovalMechanism.

After debugging it, it is because SupportedAttributes.DataRemoval value in OpalGetSupportedAttributesInfo () is left undetermined and the caller doesn&apos;t initialize the entire SupportedAttributes parameter. Review the code, this could happened on all of the elements of SupportedAttributes.

Please help to fix it. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16107</commentid>
    <comment_count>1</comment_count>
    <who name="Scottie Kuo">scottie.kuo</who>
    <bug_when>2021-05-21 03:27:15 +0000</bug_when>
    <thetext>Issue identified, I will work on the solution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16364</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2021-06-15 04:52:40 +0000</bug_when>
    <thetext>Reviewed@https://edk2.groups.io/g/devel/topic/83121358#76503
Pushed@https://github.com/tianocore/edk2/commit/11b1c1d4b98bc1b5eaaaf9eaa94ecd34eeaba5f9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3893</bug_id>
          
          <creation_ts>2022-04-03 21:23:27 +0000</creation_ts>
          <short_desc>Support PEI 64bit in IntelFsp2Pkg and IntelFsp2WrapperPkg</short_desc>
          <delta_ts>2022-04-19 19:43:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ted.kuo</reporter>
          <assigned_to>ted.kuo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18747</commentid>
    <comment_count>0</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-04-03 21:23:27 +0000</bug_when>
    <thetext>Currently PEI drivers/libraries only support 32bit in IntelFsp2Pkg. Changes are needed to support these drivers/libraries in 64bit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18751</commentid>
    <comment_count>1</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-04-04 02:42:39 +0000</bug_when>
    <thetext>*** Bug 3894 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18785</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-07 20:38:51 +0000</bug_when>
    <thetext>This is new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18786</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-07 20:42:57 +0000</bug_when>
    <thetext>The patch has been sent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18842</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-19 19:43:43 +0000</bug_when>
    <thetext>The patch have been merged at 9bf7291d636ebd816b8f81edcf366dac926f9f44..91a03f78ba0b75bc4ed2c4b756cbe57c685d9c72</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3277</bug_id>
          
          <creation_ts>2021-03-24 02:04:45 +0000</creation_ts>
          <short_desc>Tcg2Smm.c - SecurityPkg\Tcg\Tcg2Smm\Tcg2Smm.c:254:7: error: variable &apos;Status&apos; is used uninitialized whenever &apos;if&apos; condition is false [-Werror,-Wsometimes-uninitialized]</short_desc>
          <delta_ts>2021-04-12 22:01:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15414</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-03-24 02:04:45 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/blob/master/SecurityPkg/Tcg/Tcg2Smm/Tcg2Smm.c#L254

Status should be initialized 

CLANG 12.0.0 detected this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15430</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-03-25 20:09:44 +0000</bug_when>
    <thetext>I will send a patch for this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15431</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-03-25 20:43:18 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/73301</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15529</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-04-06 14:28:53 +0000</bug_when>
    <thetext>V2 patch: https://edk2.groups.io/g/devel/message/73732</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15620</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2021-04-12 22:00:40 +0000</bug_when>
    <thetext>Reviewed @ https://edk2.groups.io/g/devel/message/73304
           https://edk2.groups.io/g/devel/message/73788
Pushed @ https://github.com/tianocore/edk2/commit/54211ab10fcd8532b49f4024ebdb601a8eb07e3e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15621</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2021-04-12 22:01:51 +0000</bug_when>
    <thetext>Fixed @ 54211ab10fcd8532b49f4024ebdb601a8eb07e3e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3759</bug_id>
          
          <creation_ts>2021-12-02 13:20:16 +0000</creation_ts>
          <short_desc>SCT test fails when RouteConfig returns EFI_ACCESS_DENIED</short_desc>
          <delta_ts>2023-10-05 10:15:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Felix">felixp</reporter>
          <assigned_to name="Abhi Singh">Abhi.Singh</assigned_to>
          <cc>Abhi.Singh</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17904</commentid>
    <comment_count>0</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-12-02 13:20:16 +0000</bug_when>
    <thetext>SCT includes the following test:
&quot;HII_CONFIG_ACCESS_PROTOCOL.RouteConfig- RouteConfig() returns EFI_SUCCESS with valid parameters and Progress points to the Configuration&apos;s null terminator.&quot;
There is also a similar HII_CONFIG_ROUTING_PROTOCOL.RouteConfig test.
Both test fails if RouteConfig returns anything other than EFI_SUCCESS or EFI_OUT_OF_RESOURCES. However, according to UEFI specification RouteConfig in both protocols can also return EFI_ACCESS_DENIED. The tests should be updated not to fail when EFI_ACCESS_DENIED is returned.

Refer to:
HII_CONFIG_ACCESS_PROTOCOL.RouteConfig test:
https://github.com/tianocore/edk2-test/blob/master/uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/HIIConfigAccess/BlackBoxTest/HIIConfigAccessBBTestFunction.c#L522

HII_CONFIG_ROUTING_PROTOCOL.RouteConfig test:
https://github.com/tianocore/edk2-test/blob/master/uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/HIIConfigRouting/BlackBoxTest/HIIConfigRoutingBBTestFunction.c#L547</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18128</commentid>
    <comment_count>1</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-01-13 09:13:54 +0000</bug_when>
    <thetext>@felix: Can AMI submit a patch for the below solution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18779</commentid>
    <comment_count>2</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-04-07 10:30:47 +0000</bug_when>
    <thetext>To ping Felix directly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19027</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-06-02 13:04:34 +0000</bug_when>
    <thetext>I built target Platform/Qemu/RiscvVirt/RiscvVirt.dsc of https://github.com/ventanamicro/edk2-platforms branch dev-upstream.

The two new tests are available in the SCT menu and executable.

The following test fails:

RISCV_EFI_BOOT_PROTOCOL - GetBootHartId() returns EFI_INVALID_PARAMETER with invalid This pointer.

This matches a deficiency in the implementation which only checks for this != NULL. After patching the implementation the test succeeds.

Tested-by: Heinrich Schuchardt &lt;heinrich.schuchardt@canonical.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19028</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-06-02 13:17:12 +0000</bug_when>
    <thetext>Sorry last comment was in wrong issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21844</commentid>
    <comment_count>5</comment_count>
      <attachid>1395</attachid>
    <who name="Abhi Singh">Abhi.Singh</who>
    <bug_when>2023-08-22 14:29:09 +0000</bug_when>
    <thetext>Created attachment 1395
RouteConfig returns EFI_ACCESS_DENIED passes with warning

PR: https://github.com/tianocore/edk2-test/pull/77</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21926</commentid>
    <comment_count>6</comment_count>
    <who name="Abhi Singh">Abhi.Singh</who>
    <bug_when>2023-09-21 12:30:20 +0000</bug_when>
    <thetext>mailing list: https://edk2.groups.io/g/devel/topic/100899969#107959</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21954</commentid>
    <comment_count>7</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2023-10-05 10:15:09 +0000</bug_when>
    <thetext>The solution is upstreamed through the commit:

https://github.com/tianocore/edk2-test/commit/81dfa8d53d4290366ae41e1f4c2ed6d6c5016c07</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1395</attachid>
            <date>2023-08-22 14:29:09 +0000</date>
            <delta_ts>2023-08-22 14:29:09 +0000</delta_ts>
            <desc>RouteConfig returns EFI_ACCESS_DENIED passes with warning</desc>
            <filename>0001-uefi-sct-SctPkg-RouteConfig-returns-EFI_ACCESS_DENIE.patch</filename>
            <type>text/plain</type>
            <size>3104</size>
            <attacher name="Abhi Singh">Abhi.Singh</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3160</bug_id>
          
          <creation_ts>2021-01-08 15:25:35 +0000</creation_ts>
          <short_desc>Possible TOCTOU in the GDT migration code</short_desc>
          <delta_ts>2023-03-09 16:35:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Eric Johnson">ericj</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>guomin.jiang</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>Jim_Mortensen</cc>
    
    <cc>miki.demeter</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14763</commentid>
    <comment_count>0</comment_count>
    <who name="Eric Johnson">ericj</who>
    <bug_when>2021-01-08 15:25:35 +0000</bug_when>
    <thetext>As reported by Felix in the 1614 ticket:

Regarding GDT migration introduced by commit 60b12e69fb1c8c7180fdda92f008248b9ec83db1.

If I&apos;m not mistaken there may still be TOCTOU in the GDT migration code.
This line copies GDT to memory
https://github.com/tianocore/edk2/blob/b70c4fdcde83689d8cd1e5e2faf598d0087934a3/UefiCpuPkg/CpuMpPei/CpuMpPei.c#L462
I think the source buffer is in ROM.
GDT migration happens in MigrateGdt function, which is called by the 
Memory Discovered PPI Callback. The callback is invoked when CAR is disabled.
So the copy operation performs SPI access.

Felix believes that this call happens during the same callback that the page tables are updated to block access to SPI and that the code calls to SPI to do one final fetch before preventing access.  For this reason he believes that there is an issue and that no page fault is seen.

I&apos;d personally defer to Felix for any questions as he is far more familiar with this problem than I am.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14933</commentid>
    <comment_count>1</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-01-29 03:40:48 +0000</bug_when>
    <thetext>Send patch for bugfix.

[edk2-devel] [PATCH v2 1/1] UefiCpuPkg: Move MigrateGdt from DiscoverMemory to TempRamDone. (CVE-2019-11098)

https://edk2.groups.io/g/devel/message/70899

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15011</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-02-04 00:05:03 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/1405 merged
commit f6ec1dd34fb6b9757b5ead465ee2ea20c182b0ac</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3042</bug_id>
          
          <creation_ts>2020-11-02 10:17:25 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: missing RISC-V support</short_desc>
          <delta_ts>2021-05-10 06:49:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Daniel Schaefer">daniel.schaefer</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>daniel.schaefer</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaoliming</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14169</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-02 10:17:25 +0000</bug_when>
    <thetext>RISC-V is not a support platform for the uefi-sct/SctPkg package. This implies that we cannot test the correct function of UEFI implementations like EDK II and U-Boot on this architecture.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14170</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-02 10:26:23 +0000</bug_when>
    <thetext>
These new files can probably just be copied from AARCH64

uefi-sct/SctPkg/Library/SctLib/Riscv64/SctLibPlat.h
uefi-sct/SctPkg/Library/SctLib/Riscv64/initplat.c
uefi-sct/SctPkg/TestInfrastructure/SCT/Framework/ENTS/EasLib/Riscv64/EntsLibPlat.h
uefi-sct/SctPkg/TestInfrastructure/SCT/Framework/ENTS/EasLib/Riscv64/InitPlat.c

These files will need adjustment

uefi-sct/SctPkg/Application/InstallSct/InstallSctDef.h
uefi-sct/SctPkg/Library/SctLib/SctLib.inf
uefi-sct/SctPkg/TestInfrastructure/SCT/Framework/ENTS/EasLib
uefi-sct/SctPkg/Tools/Source/GenBin/GNUmakefile
uefi-sct/SctPkg/UEFI/IHV_SCT.dsc
uefi-sct/SctPkg/UEFI/UEFI_SCT.dsc
uefi-sct/SctPkg/build.sh</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14201</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-03 20:50:25 +0000</bug_when>
    <thetext>Abner: have you plan to enable it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14429</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-11-26 09:10:24 +0000</bug_when>
    <thetext>Liming, yes I would like to enable it. However, I don&apos;t have th schedule for that yet.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14437</commentid>
    <comment_count>4</comment_count>
    <who name="Daniel Schaefer">daniel.schaefer</who>
    <bug_when>2020-11-30 21:23:21 +0000</bug_when>
    <thetext>Heinrich: I made it compile. Can you please test it on U-Boot?
I copied many of the files of AARCH64 - they don&apos;t seem to need any changes. We should probably unify them. Not sure why they&apos;re in a Aarch64 subdirectory.

However, I encountered on issue: https://github.com/JohnAZoidberg/edk2-test/commit/1253078394e813cd3818f17143434f4512e510b1#r44680927

There&apos;s code like `(MEDIA_OFFSET_DEVICE_PATH *)pDeviceNode2)-&gt;Length`, even though MEDIA_OFFSET_DEVICE_PATH doesn&apos;t have a Length attribute. I had to uncomment the code. Does that compile on AARCH64?

My branch is here: https://github.com/JohnAZoidberg/edk2-test/tree/riscv64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14440</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-01 01:11:06 +0000</bug_when>
    <thetext>Hello Daniel,

&gt; There&apos;s code like `(MEDIA_OFFSET_DEVICE_PATH *)pDeviceNode2)-&gt;Length`, even
&gt; though MEDIA_OFFSET_DEVICE_PATH doesn&apos;t have a Length attribute. I had to
&gt; uncomment the code. Does that compile on AARCH64?

This was corrected with commit

fb0e695747e2cb (&quot;uefi-sct/SctPkg: build failure DevicePathToText test&quot;)

merged today. Please, rebase your fork.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14441</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-01 02:14:41 +0000</bug_when>
    <thetext>Hello Daniel,

Is there a patch available for BaseTools/Source/C/GenFw/Elf64Convert.c?

I see errors like:

GenFw: ERROR 3000: Invalid
GenFw: ERROR 3000: Invalid
  WriteSections64(): /Build/Shell/RELEASE_GCC5/RISCV64/ShellPkg/DynamicCommand/HttpDynamicCommand/HttpApp/DEBUG/http.dll unsupported ELF EM_RISCV64 relocation 0x13.
  WriteSections64(): /Build/Shell/RELEASE_GCC5/RISCV64/ShellPkg/Application/AcpiViewApp/AcpiViewApp/DEBUG/AcpiViewApp.dll unsupported ELF EM_RISCV64 relocation 0x14.

using GCC 10.2 and binutils 2.35.1 from Debian Bullseye.

If I ignore these errors, I can compile your branch but it does not work due to the probably due to the incorrect relocations:

Booting /Shell.efi
Unhandled exception: Load access fault
EPC: 00000000be5fa258 RA: 00000000bff93eb6 TVAL: 0000000000000000
EPC: 000000007e691258 RA: 000000008002aeb6 reloc adjusted
UEFI image [0x00000000be5fa000:0x00000000be72ccff] pc=0x258 &apos;/Shell.efi&apos;

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14442</commentid>
    <comment_count>7</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-01 02:23:50 +0000</bug_when>
    <thetext>Hi Heinrich,
Yes, 0x13 and 0x14 relocation types are what we have to fix for the GCC you mentioned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14445</commentid>
    <comment_count>8</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-01 02:45:57 +0000</bug_when>
    <thetext>Cf. https://bugzilla.tianocore.org/show_bug.cgi?id=3096
Elf64Convert.c does not support R_RISCV_CALL_PLT, R_RISCV_GOT_HI20</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14446</commentid>
    <comment_count>9</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-01 02:49:47 +0000</bug_when>
    <thetext>Hello Abner, hello Daniel,

which compiler and binutils are you using?

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14447</commentid>
    <comment_count>10</comment_count>
    <who name="Daniel Schaefer">daniel.schaefer</who>
    <bug_when>2020-12-01 03:03:12 +0000</bug_when>
    <thetext>Hi Heinrich,

oh I&apos;m sorry, I&apos;m still using the old GCC version and we haven&apos;t implemented the relocations that the new GCC emits.
You can build it using this GCC: https://github.com/riscv/riscv-uefi-edk2-docs/blob/master/gcc-riscv-edk2-ci-toolchain/gcc-riscv-9.2.0-2020.04-x86_64_riscv64-unknown-gnu.tar.xz

Thanks for creating the issue. We&apos;ll look into implementing the relocations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14451</commentid>
    <comment_count>11</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-01 07:14:46 +0000</bug_when>
    <thetext>Hello Daniel,

using your GCC 9.2 I get an error:

/usr/bin/../libexec/gcc/riscv64-unknown-elf/9.2.0/cc1: error while loading shared libraries: libmpfr.so.4: cannot open shared object file: No such file or directory

In Debian Bullseye there is only libmpfr.so.6.

Which Linux distribution are you using?

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14453</commentid>
    <comment_count>12</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-01 10:18:38 +0000</bug_when>
    <thetext>Hello Daniel,

with the indicated compiler and your repository I was able to build Shell.efi and the SCT. The SCT runs fine on U-Boot qemu-riscv64_defconfig.

Please, go ahead with creating a patch.

Concerning code de-duplication I think that can be put into a later change.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14454</commentid>
    <comment_count>13</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-01 11:54:39 +0000</bug_when>
    <thetext>Patches submitted by Daniel:

[edk2-test PATCH v1 1/2] SctPkg: Add RISCV64 support
https://edk2.groups.io/g/devel/message/68138

[edk2-test PATCH v1 2/2] SctPkg: Enable RISCV64 support using AARCH64 sources
https://edk2.groups.io/g/devel/message/68140</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15864</commentid>
    <comment_count>14</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 03:48:04 +0000</bug_when>
    <thetext>Assign to Daniel.

Daniel, what is the status of your patches? Please, leave a comment in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15971</commentid>
    <comment_count>15</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-10 06:49:32 +0000</bug_when>
    <thetext>commit 5847a636b932 (&quot;SctPkg: Add RISCV64 build support&quot;) was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3534</bug_id>
          
          <creation_ts>2021-08-05 12:28:31 +0000</creation_ts>
          <short_desc>MinPlatformPkg: Set X_GPE1_BLK GAS structure to zero</short_desc>
          <delta_ts>2021-09-15 11:30:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16809</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 12:28:31 +0000</bug_when>
    <thetext>An FWTS change was made that allows X_GPE0/1_BLK to be zero when not used. 

The AddressSpaceId field in X_GPE1 needs to be set to zero to pass FWTS with this change.

Relevant FWTS commit: https://git.launchpad.net/fwts/commit/?id=4ad3e374bf98931c84adcf6e523982b5ebb83748</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16810</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 12:28:46 +0000</bug_when>
    <thetext>I will send a patch today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16814</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 12:41:09 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/78743

Part of the large patch series: https://edk2.groups.io/g/devel/message/78740</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17223</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-08 20:43:47 +0000</bug_when>
    <thetext>Still waiting on patch to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17278</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-15 11:30:30 +0000</bug_when>
    <thetext>Merged in the following commit https://github.com/tianocore/edk2-platforms/commit/cd89c96ec2b163df15aeb0ce79596d4f385a4040</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3431</bug_id>
          
          <creation_ts>2021-06-03 02:08:12 +0000</creation_ts>
          <short_desc>Add CLANGDWARF toolchain for generating ELF+DWARF (ELF is converted to PE by GenFw)</short_desc>
          <delta_ts>2021-06-08 00:48:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16256</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-06-03 02:08:12 +0000</bug_when>
    <thetext>Universal payload needs to be in ELF format so we require to add a cross OS toolchain that can generate ELF images.
As such, we need to add a CLANGDWARF toolchain for generating ELF+DWARF and then ELF is converted to PE by GenFw.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16292</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-08 00:48:23 +0000</bug_when>
    <thetext>Merge at https://github.com/tianocore/edk2/pull/1688</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3916</bug_id>
          
          <creation_ts>2022-04-27 05:00:18 +0000</creation_ts>
          <short_desc>IntelFsp2(Wrapper)Pkg: Support FSP 2.4 MultiPhaseInit.</short_desc>
          <delta_ts>2022-10-04 12:20:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2WrapperPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18905</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-04-27 05:00:18 +0000</bug_when>
    <thetext>Both FSP-M and FSP-S will support MultiPhase and boot loader will have to check if it is required to call FSP entry point multiple times.

The request is to create a library for typical platforms to utilize and if boot loader has to take special actions per phase index the customized library instance from platform code base can be used instead.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18906</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-04-27 05:01:30 +0000</bug_when>
    <thetext>will work on the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19454</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-08-31 12:52:55 +0000</bug_when>
    <thetext>Header and library changes has been merged:
https://github.com/tianocore/edk2/commit/df25a5457f04ec465dce97428cfee96f462676e7
https://github.com/tianocore/edk2/commit/31a94f7fba2a2c1244fc35b6f631e235e267715b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19467</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-09-01 19:49:00 +0000</bug_when>
    <thetext>Renaming lib patch merged: https://github.com/tianocore/edk2/commit/ec87181192f013f4f7ff916b2a39ff2c87b079f3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19477</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-09-06 16:07:20 +0000</bug_when>
    <thetext>edk2-platforms patch for adding required library to platform common dsc:
https://github.com/tianocore/edk2-platforms/commit/07bcc0be8c1bcfbd88eb254ebd4f674217013dca</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19508</commentid>
    <comment_count>5</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-09-07 00:27:10 +0000</bug_when>
    <thetext>patch3 Fsp24SecCore modules have been merged:
https://github.com/tianocore/edk2/commit/df25a5457f04ec465dce97428cfee96f462676e7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19635</commentid>
    <comment_count>6</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-09-26 16:24:59 +0000</bug_when>
    <thetext>Patch 4 Fspw to adopt FSP 2.4 MultiPhase has been merged:
https://github.com/tianocore/edk2/commit/96f3efbd991db83c608909c1c861a77fe26982f1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19694</commentid>
    <comment_count>7</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-10-04 12:20:11 +0000</bug_when>
    <thetext>as of now, all known patches have been merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3303</bug_id>
          
          <creation_ts>2021-04-06 22:33:06 +0000</creation_ts>
          <short_desc>[UefiCpuPkg] Add a new MicrocodeLib for microcode loading</short_desc>
          <delta_ts>2021-07-14 09:13:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15534</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-04-06 22:33:06 +0000</bug_when>
    <thetext>There are several modules that deal with the microcode:
1. UefiCpuPkg/MpInitLib
2. IntelSiliconPkg\ShadowMicrocode
3. ... &lt;some close source modules&gt;

To avoid code duplication and provide one microcode verification implementation, this bugzilla requests to create a new MicrocodeLib so that all modules that deal with microcode can rely on this library. The expectation is the consumers don&apos;t need to know the detailed format of the microcode with the help of MicrocodeLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15535</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-07 01:08:53 +0000</bug_when>
    <thetext>Ray has sent the patch for this feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16636</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-14 09:13:19 +0000</bug_when>
    <thetext>It has been fixed at 1a957f17bc62771df7517135c0e50052fc924ade</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3791</bug_id>
          
          <creation_ts>2021-12-28 02:57:06 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg/FspSecCore: ExtendedImageRevision was not printed.</short_desc>
          <delta_ts>2021-12-28 21:06:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18055</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-12-28 02:57:06 +0000</bug_when>
    <thetext>Current implementation cannot print ExtendedImageRevision which should be fixed.

IntelFsp2Pkg\FspSecCore\SecFsp.c:
  DEBUG ((
    DEBUG_INFO | DEBUG_INIT,
    &quot;\n============= FSP Spec v%d.%d Header Revision v%x (%a v%x.%x.%x.%x) =============\n&quot;, \
    (PeiFspData-&gt;FspInfoHeader-&gt;SpecVersion &gt;&gt; 4) &amp; 0xF, \
    PeiFspData-&gt;FspInfoHeader-&gt;SpecVersion &amp; 0xF, \
    PeiFspData-&gt;FspInfoHeader-&gt;HeaderRevision, \
    ImageId, \
    (PeiFspData-&gt;FspInfoHeader-&gt;ImageRevision &gt;&gt; 24) &amp; 0xFF, \
    (PeiFspData-&gt;FspInfoHeader-&gt;ImageRevision &gt;&gt; 16) &amp; 0xFF, \
    (PeiFspData-&gt;FspInfoHeader-&gt;ImageRevision &gt;&gt; 8) &amp; 0xFF, \
    PeiFspData-&gt;FspInfoHeader-&gt;ImageRevision &amp; 0xFF
    ));</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18056</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-12-28 21:06:09 +0000</bug_when>
    <thetext>Patch pushed:
https://github.com/tianocore/edk2/commit/7935be0fbd8f47266e5972f4cba1a1e58505061a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3673</bug_id>
          
          <creation_ts>2021-10-01 02:12:31 +0000</creation_ts>
          <short_desc>How Can I get in touch with cash app customer service?</short_desc>
          <delta_ts>2021-10-06 00:53:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="john snow">snow68896</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17424</commentid>
    <comment_count>0</comment_count>
    <who name="john snow">snow68896</who>
    <bug_when>2021-10-01 02:12:31 +0000</bug_when>
    <thetext>In order to get in touch with cash app customer service, users who are facing problems in operating their Cash app or if they are not able to pay and receive their cash on the app, then, they can easily dial the customer service number -  1-800-969-1940. Users who are confronting notifications like “Cash app is having an issue” or Cash app is not 
responding then, they can dial this number. https://www.cash-app-support.com/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17440</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-10-06 00:53:02 +0000</bug_when>
    <thetext>Not a bug</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3553</bug_id>
          
          <creation_ts>2021-08-11 00:24:33 +0000</creation_ts>
          <short_desc>Public Adjuster Toronro</short_desc>
          <delta_ts>2021-08-16 21:47:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Onyx Adjusting">onyxadjusting</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16870</commentid>
    <comment_count>0</comment_count>
    <who name="Onyx Adjusting">onyxadjusting</who>
    <bug_when>2021-08-11 00:24:33 +0000</bug_when>
    <thetext>Onyx Adjusting helps you with the best Public Adjuster Toronto services. Our experts will evaluate insurance claim liability for any property damage. Whether the damage has inflicted to your office or home, our firm has got your back. Our agents will also prepare and process claim reports and negotiate payments with claimants. Contact us for more details.

For Details Visit :  https://onyxadjusting.ca/


Contact Us

Address: 10 Wincrest Dr, Toronto, ON M1P 4J4, Canada
Phone No: 416-846-5673
Official Email Id: claims@onyxadjusting.ca
Working Hours:	Monday - Sunday : 9 AM - 9 PM</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16928</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:47:35 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3451</bug_id>
          
          <creation_ts>2021-06-10 18:14:50 +0000</creation_ts>
          <short_desc>SmbusLib SmBusSendByte sending incorrect value</short_desc>
          <delta_ts>2021-06-11 12:37:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16332</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-10 18:14:50 +0000</bug_when>
    <thetext>The SmBusSendByte command must write the value to the Command Register, not the Host Data registers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16335</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-10 19:06:41 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16340</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-10 19:52:22 +0000</bug_when>
    <thetext>Patch email for review:

https://edk2.groups.io/g/devel/message/76345</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16345</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-11 12:37:24 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2-platforms/commit/7d16f6dca185ae0f37f32af75c76847eef9b3df7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3955</bug_id>
          
          <creation_ts>2022-06-19 21:37:59 +0000</creation_ts>
          <short_desc>UefiPayloadPkg: UniversalPayloadBuild.py to support --pcd feature</short_desc>
          <delta_ts>2022-06-21 00:18:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Gua Guo">gua.guo</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19099</commentid>
    <comment_count>0</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2022-06-19 21:37:59 +0000</bug_when>
    <thetext>Currently, UniversalPayloadBuild.py only Macro define, some cases we will need PCD hook through UniversalPayloadBuild.py.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19101</commentid>
    <comment_count>1</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2022-06-21 00:18:21 +0000</bug_when>
    <thetext>It&apos;s done on https://github.com/tianocore/edk2/pull/2994.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3815</bug_id>
          
          <creation_ts>2022-01-27 03:41:39 +0000</creation_ts>
          <short_desc>Expose SmmWaitForApArrival() as a service protocol or library interface for SMI handler to do rendezvous if needed</short_desc>
          <delta_ts>2022-12-02 03:20:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="zhihao">zhihao.li</reporter>
          <assigned_to name="zhihao">zhihao.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>zhihao.li</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18209</commentid>
    <comment_count>0</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-01-27 03:41:39 +0000</bug_when>
    <thetext>In Relaxed AP flow, some SMI handlers that requires rendezvous.
Expose SmmWaitForApArrival() as a service protocol or library interface for SMI handler to do rendezvous if needed.
Produce a new protocol EDKII_SMM_CPU_SERVICE_PROTOCOL which extends EFI_SMM_CPU_SERVICE_PROTOCOL with the new interface.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18270</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-08 21:48:53 +0000</bug_when>
    <thetext>Zhihao is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18447</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-22 22:15:41 +0000</bug_when>
    <thetext>Zhihao is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20167</commentid>
    <comment_count>3</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-12-02 03:20:35 +0000</bug_when>
    <thetext>Fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3205</bug_id>
          
          <creation_ts>2021-02-02 23:18:56 +0000</creation_ts>
          <short_desc>Add a Standalone MM HOB production library</short_desc>
          <delta_ts>2021-04-07 14:52:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>kun.qin</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14983</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 23:18:56 +0000</bug_when>
    <thetext>While enabling Standalone MM on X64 platforms we&apos;ve found that it&apos;s common to produce HOBs that will be consumed by the Standalone MM core. These HOBs are produced in PEI and passed into the Standalone MM environment to remove access to the PPI database from within Standalone MM.

An example is gMpInformationHobGuid declared in StandaloneMmPkg.dec. ARM builds produce this HOB and similar HOBs in StandaloneMmPkg/Library/StandaloneMmCoreEntryPoint/AArch64/CreateHobList.c. We see a need for a generic HOB production facility in X64 systems that can be used to copy information from data sources with standardized APIs (such as EFI_PEI_MP_SERVICES_PPI) into HOBs consumed within StandaloneMmPkg (such as gMpInformationHobGuid).

As opposed to binding this functionality to the Standalone MM core entry point though, we&apos;d prefer to make the generic PEI library maintained in StandaloneMmPkg accessible to platforms such that it can be linked against any platform PEIM to produce the HOBs. This allows the HOBs to always be produced in PEI and the Standalone MM environment can be initialized in post-memory PEI or DXE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14984</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 23:25:36 +0000</bug_when>
    <thetext>I will send a patch with a proposed library for this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15143</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-24 22:37:03 +0000</bug_when>
    <thetext>The library is ready but there currently is not a non-ARM consumer for it in StandaloneMmPkg so I&apos;m considering holding off on adding this.

I&apos;ll check if we can make some additional changes in StandaloneMmPkg that would make use of such functionality on architectures other than ARM and then update this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15548</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-04-07 14:52:34 +0000</bug_when>
    <thetext>The library is available in the Mu repository (and actively being used there) but with the lack of a non-ARM Standalone MM core in edk2 that can leverage this library I don&apos;t believe this is a good candidate for edk2 at this time.

Library in Mu repository:
https://github.com/microsoft/mu_basecore/commit/4797e4afc031d75f4031403732e4f55fa809d7f2

Closing the BZ.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3694</bug_id>
          
          <creation_ts>2021-10-18 03:11:13 +0000</creation_ts>
          <short_desc>HttpBootDxe rejected bootloaders with upper-case file extensions</short_desc>
          <delta_ts>2021-11-26 10:08:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gary Lin">gary.lin</reporter>
          <assigned_to name="Gary Lin">gary.lin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>maciej.rabeda</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17566</commentid>
    <comment_count>0</comment_count>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-10-18 03:11:13 +0000</bug_when>
    <thetext>When HttpBootDxe got the URL to the bootloader, it checked the image type with HttpBootCheckImageType(). If the server just returns &quot;application/octet-stream&quot; instead of EFI image types, HttpBootCheckImageType() would try to detect the image type by the file extension. However, the function used &quot;AsciiStrCmp()&quot; to compare the given file extension with the lower-case ones, so it rejected the bootloaders with upper-case file extensions and returned EFI_NOT_FOUND. The function should use the case-insensitive &quot;AsciiStriCmp()&quot; to check the file extensions since an upper-case file name is also valid.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17567</commentid>
    <comment_count>1</comment_count>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-10-18 03:40:28 +0000</bug_when>
    <thetext>Submitted the patch to the mailing list:
https://edk2.groups.io/g/devel/message/82214</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17575</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-18 21:22:20 +0000</bug_when>
    <thetext>Gary is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17601</commentid>
    <comment_count>3</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2021-10-22 06:39:47 +0000</bug_when>
    <thetext>Patch reviewed and merged.
PR: https://github.com/tianocore/edk2/pull/2107</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17852</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:08:39 +0000</bug_when>
    <thetext>Fix at bd5ec03d87cacc5be2de4284b092aafd4ac4eb31</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3571</bug_id>
          
          <creation_ts>2021-08-18 07:36:35 +0000</creation_ts>
          <short_desc>setup browser stucked when frequently plug and unplug usb storege</short_desc>
          <delta_ts>2021-11-30 08:05:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Wenyi, Xie">xiewenyi0201</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16959</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-08-18 07:36:35 +0000</bug_when>
    <thetext>After entering setup browser, if frequently plug and unplug usb storege, the browser may be stucked for a few minutes, and user can not do any operation during that time.
The root cause is that usually it needs 0.5s to create connection, and this process will be possibly interrupted when frequently plug and unplug the usb storage. Then USBMassStorageDxe and XhciDxe will retry and it made the browser stucked.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17048</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 22:04:51 +0000</bug_when>
    <thetext>Is the critical issue for you? Have you the real user case to plug and unplug the usb key?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17109</commentid>
    <comment_count>2</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-08-30 07:38:38 +0000</bug_when>
    <thetext>

(In reply to gaoliming from comment #1)
&gt; Is the critical issue for you? Have you the real user case to plug and
&gt; unplug the usb key?

Hi, Liming, this issue is found in a test case. In real user case, usb device will not be pluged so frequently. I just send a patch as a workaround, could you help review it whether it&apos;s ok or not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17207</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-09-08 04:31:52 +0000</bug_when>
    <thetext>If the issue is not applicable for real user case, I would recommend to leave the current behavior as is.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17871</commentid>
    <comment_count>4</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-11-30 08:05:56 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #3)
&gt; If the issue is not applicable for real user case, I would recommend to
&gt; leave the current behavior as is.

Sorry to reply later, agree to leave the current behavior as before.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3982</bug_id>
          
          <creation_ts>2022-07-09 13:04:59 +0000</creation_ts>
          <short_desc>File path in OvmfPkg should use AArch64 instead of Aarch64</short_desc>
          <delta_ts>2022-08-02 12:18:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>anthony</cc>
    
    <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19221</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-07-09 13:04:59 +0000</bug_when>
    <thetext>The following file path in OvmfPkg does not follow naming convention for AArch64

    OvmfPkg/Library/XenHypercallLib/Aarch64/Hypercall.S

Should be:

    OvmfPkg/Library/XenHypercallLib/AArch64/Hypercall.S

This is causing incorrect maintainer/reviewer assignments for this file
from Maintainers.txt.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19302</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-19 22:20:40 +0000</bug_when>
    <thetext>Anthony: can you fix this inconsistent issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19313</commentid>
    <comment_count>2</comment_count>
    <who name="">anthony</who>
    <bug_when>2022-07-20 09:20:17 +0000</bug_when>
    <thetext>v1: [PATCH 1/1] OvmfPkg/XenHypercallLib: Fix naming of AArch64
https://edk2.groups.io/g/devel/message/91579</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19349</commentid>
    <comment_count>3</comment_count>
    <who name="">anthony</who>
    <bug_when>2022-08-02 12:18:25 +0000</bug_when>
    <thetext>Commited as 0e7add1d75fc75762208af84579e6809589ea6e5.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3354</bug_id>
          
          <creation_ts>2021-04-26 07:07:26 +0000</creation_ts>
          <short_desc>clean up TPM_ENABLE remnants in OvmfPkg/Bhyve</short_desc>
          <delta_ts>2021-06-24 04:03:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3345</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Rebecca Cran">rebecca</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>thomas.lendacky</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15773</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-26 07:07:26 +0000</bug_when>
    <thetext>Tom Lendacky reports [1]:

On 04/23/21 19:41, Tom Lendacky wrote:
&gt; One thing I found is that the Bhyve package makes reference to the
&gt; OvmfPkg/Bhyve/Tcg directory, but that directory does not exist. So I don&apos;t
&gt; think that TPM enablement has been tested.

Please remove the dead TPM_ENABLE code from the Bhyve DSC / FDF files, as it presents compatibility complications when updating other OvmfPkg DSCs / FDFs in that area. Thanks!

[1]
http://mid.mail-archive.com/311cdc78-d818-bea4-16a1-01077bfc1140@amd.com
https://edk2.groups.io/g/devel/message/74396
https://listman.redhat.com/archives/edk2-devel-archive/2021-April/msg00810.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15798</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-27 21:39:26 +0000</bug_when>
    <thetext>Rebecca will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16349</commentid>
    <comment_count>2</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-06-11 20:06:51 +0000</bug_when>
    <thetext>I&apos;m working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16357</commentid>
    <comment_count>3</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-06-12 17:08:26 +0000</bug_when>
    <thetext>I&apos;ve sent a patch to the devel ML.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16435</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-23 08:10:06 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH] OvmfPkg/Bhyve: clean up TPM_ENABLE remnants

https://edk2.groups.io/g/devel/message/76436
https://listman.redhat.com/archives/edk2-devel-archive/2021-June/msg00554.html
msgid: &lt;20210612204340.52290-1-rebecca@bsdio.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16456</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-24 04:03:31 +0000</bug_when>
    <thetext>Merged as commit 12e34cd2f790, via &lt;https://github.com/tianocore/edk2/pull/1759&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3841</bug_id>
          
          <creation_ts>2022-02-17 04:37:48 +0000</creation_ts>
          <short_desc>Can I Unlock Cash App Account On My Own Without Any Hassle?</short_desc>
          <delta_ts>2022-02-22 21:54:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Process</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc>https://www.cashelpsapp.net/how-to-unlock-my-cash-app-account/</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="james smith">js8435877</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18405</commentid>
    <comment_count>0</comment_count>
    <who name="james smith">js8435877</who>
    <bug_when>2022-02-17 04:37:48 +0000</bug_when>
    <thetext>Do you want to be aware of the fact whether you can Unlock Cash App Account or not? Yes, you can. All you have to do is to complete the verification part and once you get verified by the Cash App support officials, you will be able to unlock your Cash App account without hampering your work.   https://www.cashelpsapp.net/how-to-unlock-my-cash-app-account/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18435</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-22 21:54:58 +0000</bug_when>
    <thetext>invalid issue</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3717</bug_id>
          
          <creation_ts>2021-11-03 10:30:14 +0000</creation_ts>
          <short_desc>IntelSiliconPkg: Remove v1 PCH SPI PPI and PCH SPI Protocol</short_desc>
          <delta_ts>2021-12-08 10:58:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17666</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-03 10:30:14 +0000</bug_when>
    <thetext>V2 of PCH SPI PPI and PCH SPI Protocol interfaces was recently added. See:

https://github.com/tianocore/edk2-platforms/commit/5ffc54262a98da7f359c79e20b1abf3cbfae21ab#diff-f1abbcbb6232a8f32219393cfba5fd4e74e9968a27926ceaf2937a606626ef8f

Per request from Intel, it is requested to drop v1 of the interface definitions since v2 better supports multiple silicon generations which aligns with the goals of IntelSiliconPkg:

https://edk2.groups.io/g/devel/message/82947

This task tracks removing v1 of the PCH SPI PPI and PCH SPI Protocol.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17674</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-03 11:12:55 +0000</bug_when>
    <thetext>V1 patch series on the mailing list: https://edk2.groups.io/g/devel/message/83259</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17872</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-30 09:52:01 +0000</bug_when>
    <thetext>The V1 patch series had reviews shortly after being sent but I&apos;m still waiting on it to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17969</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-12-08 10:58:54 +0000</bug_when>
    <thetext>Series pushed as 5e6b853~..3fd4e12</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3112</bug_id>
          
          <creation_ts>2020-12-09 19:24:49 +0000</creation_ts>
          <short_desc>Remove redundant APIs from FspCommonLib</short_desc>
          <delta_ts>2021-01-12 01:02:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14542</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-12-09 19:24:49 +0000</bug_when>
    <thetext>Following APIs are exposed by FspCommonLib but not actively used:

  SetFspPlatformDataPointer
  GetFspPlatformDataPointer

  SetFspUpdDataPointer
  GetFspUpdDataPointer

It seems that FspData-&gt;PlatformData.DataPtr points to platform specific data, FspData-&gt;UpdDataPtr points to the active UPD data. But no one is using these APIs.

They cause confusion to me. I don&apos;t know what FspData-&gt;UpdDataPtr should store when we already have FspData-&gt;MemoryInitUpdPtr and FspData-&gt;SiliconInitUpdPtr.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14784</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-11 21:50:44 +0000</bug_when>
    <thetext>Chasel: have you any comments?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14785</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-01-11 21:59:36 +0000</bug_when>
    <thetext>We are discussing more and currently trending to keep them there for backward compatibility and future usage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14786</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-11 22:30:53 +0000</bug_when>
    <thetext>So, this tracker can be closed now. If so, please change status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14788</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-01-12 01:02:46 +0000</bug_when>
    <thetext>change to won&apos;t fix.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3598</bug_id>
          
          <creation_ts>2021-08-30 16:17:22 +0000</creation_ts>
          <short_desc>ACPI spec - Allow FFixedHW OpRegion</short_desc>
          <delta_ts>2022-05-04 16:42:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>andrey.warkentin</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17110</commentid>
    <comment_count>0</comment_count>
      <attachid>818</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-30 16:17:22 +0000</bug_when>
    <thetext>Created attachment 818
CodeFirst_FFHOpRegion_ver1

Today FFixedHW is only usable inside a Register descriptor (i.e. in a ResourceTemplate). Exposing FFixedHW via an OpRegion enables advanced use of FFH on some architectures. For example, it could be used to easily proxy AML code to architecture-specific behavior (to ensure it is OS initiated)

I.e.:
Add FFixedHW to RegionSpaceKeyword
Add FFixedHW (0x0C) as an OperationRegion address space identifier

Actual behavior of course would depend on FFH bindings for a specific architecture. (e.g. look in Arm FFH spec to understand how to handle AML code performing accesses to a certain offset)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17118</commentid>
    <comment_count>1</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-31 12:31:00 +0000</bug_when>
    <thetext>Linking ASWG Mantis: https://mantis.uefi.org/mantis/view.php?id=2272</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17191</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-07 23:14:22 +0000</bug_when>
    <thetext>Samer is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17325</commentid>
    <comment_count>3</comment_count>
      <attachid>834</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-09-21 14:58:29 +0000</bug_when>
    <thetext>Created attachment 834
CodeFirst_FFHOpRegion_ver2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17327</commentid>
    <comment_count>4</comment_count>
    <who name="Andrei Warkentin">andrey.warkentin</who>
    <bug_when>2021-09-21 15:44:06 +0000</bug_when>
    <thetext>Looks great to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17430</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-01 09:59:13 +0000</bug_when>
    <thetext>UEFI Forum ASWG meeting 9/30 - Approved as New Content for ACPI 6.next
Closing this as resolved</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18881</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-04-21 15:30:15 +0000</bug_when>
    <thetext>Re-=opening since additional feedback is being provided.

See latest attachment for the feedback:

The Operation Regions Address Space Identifiers that are being proposed in ACPI 6.5 are:
…
0x0A - PCC
0x0B  - PRM
0x0C – FFH
0x0D – 0x7F – Reserved
0x80 – 0xFF – OEM defined

That is making the OpRegion out of sync with the Address Space IDs:                               …
0x0A - PCC
0x0B – 0x7E – Reserved
0x07F - FFH
0x80 – 0xFF – OEM defined

Should we try to reconcile the two? This has not been necessarily a problem, until FFH is defined, since FFH OpRegion value (0x0C) is different from the FFH Address Space ID value (0x7F). Is this even an issue for Operating Systems and ACPICA?

One way to resolve the situation is to modify the definitions to be:

The Operation Regions Address Space:
…
0x0A - PCC
0x0B  - PRM
0x0C – 0x7E – Reserved      // currently: 0x0D - 0x7F 0x7F
0x07F - FFH                 // currently: 0x0C
0x80 – 0xFF – OEM defined

Address Space IDs 
…
0x0A – PCC
0x0B – PRM                    // Currently not defined. 
0x0C – 0x7E – Reserved        // currently 0x0B - 0x7E
0x07F - FFH
0x80 – 0xFF – OEM defined

Question: Do we even need PRM Address Space ID? Does it hurt to have one?

In addition, we could also remove one of the tables and cross-reference one table in both sections, to avoid further divergence in the future.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18926</commentid>
    <comment_count>7</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-05-04 16:42:05 +0000</bug_when>
    <thetext>This is now approved by ASWG with the new format/edits from 4-21. This will be included in ACI 6.5 as submitted and amended on 4/21.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>818</attachid>
            <date>2021-08-30 16:17:22 +0000</date>
            <delta_ts>2021-08-30 16:17:22 +0000</delta_ts>
            <desc>CodeFirst_FFHOpRegion_ver1</desc>
            <filename>CodeFirst_FFHOpRegion_ver1.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>28691</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>834</attachid>
            <date>2021-09-21 14:58:29 +0000</date>
            <delta_ts>2021-09-21 14:58:29 +0000</delta_ts>
            <desc>CodeFirst_FFHOpRegion_ver2</desc>
            <filename>CodeFirst_FFHOpRegion_ver2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>31787</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3599</bug_id>
          
          <creation_ts>2021-08-31 08:07:41 +0000</creation_ts>
          <short_desc>RFE: add support for the microvm machine type (qemu)</short_desc>
          <delta_ts>2021-10-11 21:01:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Gerd Hoffmann">kraxel</reporter>
          <assigned_to name="Gerd Hoffmann">kraxel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17114</commentid>
    <comment_count>0</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2021-08-31 08:07:41 +0000</bug_when>
    <thetext>microvm is designed for modern, virtio-based workloads.  Most legacy
lpc/isa devices like pit and pic can be turned off.  virtio-mmio
(i.e. &apos;-device virtio-{blk,net,scsi,...}-device&apos;) is used for
storage/network/etc.

Optional pcie support is available and any pcie device supported by
qemu can be plugged in (including virtio-pci if you prefer that over
virtio-mmio).

https://qemu.readthedocs.io/en/latest/system/i386/microvm.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17193</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-07 23:16:02 +0000</bug_when>
    <thetext>Gerd: will you take it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17201</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-07 23:58:25 +0000</bug_when>
    <thetext>Gerd is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17482</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-11 21:01:00 +0000</bug_when>
    <thetext>The patches have been merged at c806b76865fe207dd7c86c16d3b40b030bd8cb48..862e814de403ded2cb481e63baff08c8d2eecd49</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3001</bug_id>
          
          <creation_ts>2020-10-08 20:26:54 +0000</creation_ts>
          <short_desc>Structured PCD generated code has a casting error when using x64 tools</short_desc>
          <delta_ts>2020-11-02 00:45:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13922</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-10-08 20:26:54 +0000</bug_when>
    <thetext>This macro generates code that doesn&apos;t compile with VS2019 x64 tools.  

#define __OFFSET_OF(TYPE, Field) ((UINT32) &amp;(((TYPE *)0)-&gt;Field))

The pointer needs to be casted to (size_t) first or this should return a size_t type instead of UINT32 as it is unlikely but not impossible to exceed the size of UINT32.

This can be reproduced by using structured PCDs as this commit does
https://github.com/tianocore/edk2/pull/925/commits/9a484974ce74866b354712902f9d07c63f6c080a

And using stuart to build on an x64 windows machine with VS2019.  


Mike K identified a possible fix and i have confirmed my build passes:

#define __OFFSET_OF(TYPE, Field) ((UINT32)(size_t) &amp;(((TYPE *)0)-&gt;Field))</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13950</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-10-13 11:13:04 +0000</bug_when>
    <thetext>In order to reproduce the issue, the 64-bit version of VS compiler
must be used for the host environment on windows.  For development
environments may have to force this selection with the following
environment setting:

    set VS2019_HOST=x64

Here is the complete patch that appears to resolve this issue.  Needs
more complete testing across all tool chains.

diff --git a/BaseTools/Source/C/Common/PcdValueCommon.h b/BaseTools/Source/C/Common/PcdValueCommon.h
index cfd3bb76e1..1652bd5430 100644
--- a/BaseTools/Source/C/Common/PcdValueCommon.h
+++ b/BaseTools/Source/C/Common/PcdValueCommon.h
@@ -14,7 +14,7 @@ SPDX-License-Identifier: BSD-2-Clause-Patent

#define __FIELD_SIZE(TYPE, Field) (sizeof((TYPE *)0)-&gt;Field)
#define __ARRAY_ELEMENT_SIZE(TYPE, Field) (sizeof((TYPE *)0)-&gt;Field[0])
-#define __OFFSET_OF(TYPE, Field) ((UINT32) &amp;(((TYPE *)0)-&gt;Field))
+#define __OFFSET_OF(TYPE, Field) ((UINT32)(size_t) &amp;(((TYPE *)0)-&gt;Field))^M
#define __FLEXIBLE_SIZE(Size, TYPE, Field, MaxIndex)   if (__FIELD_SIZE(TYPE, Field) == 0) Size = MAX((__OFFSET_OF(TYPE, Field) + __ARRAY_ELEMENT_SIZE(TYPE, Field) * (MaxIndex)), Size)
#define __ARRAY_SIZE(Array) (sizeof(Array)/sizeof(Array[0]))</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13951</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-10-13 21:09:52 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13983</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-10-15 07:22:18 +0000</bug_when>
    <thetext>code review link: https://edk2.groups.io/g/devel/message/66253</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14003</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-15 21:02:47 +0000</bug_when>
    <thetext>Sean: do you meet with the issue to compile BaseTools C tools with VS2019 x64 tools?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14077</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-10-25 22:43:50 +0000</bug_when>
    <thetext>Liming, BaseTools\Edk2ToolsBuild.py is to build Basetools. The Arch which is used in that scripts does not rely on the Arch used for platform build. It&apos;s always x86. so there will not be a problem building BaseTools C tools.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14163</commentid>
    <comment_count>6</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-02 00:45:54 +0000</bug_when>
    <thetext>fixed at b70c4fdcde83689d8cd1e5e2faf598d0087934a3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3492</bug_id>
          
          <creation_ts>2021-07-14 05:41:25 +0000</creation_ts>
          <short_desc>UefiCpuPkg: SecCoreNative without ResetVector</short_desc>
          <delta_ts>2021-11-26 10:14:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ashraf Ali S">ashraf.ali.s</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16633</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-14 05:41:25 +0000</bug_when>
    <thetext>Currently SecCore.inf having the resetvector code under IA32. if the user wants to use both SecCore and UefiCpuPkg ResetVector it&apos;s not possible, since SecCore and ResetVector(VTF0.INF/ResetVector.inf) are sharing the same GUID which is BFV.
to overcome this issue we can create the Duplicate version of the SecCore.inf as SecCoreNative.inf which contains pure SecCore Native functionality without resetvector. SecCoreNative.inf should have the Unique GUID so that it can be used along with UefiCpuPkg ResetVector in there implementation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16634</commentid>
    <comment_count>1</comment_count>
      <attachid>766</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-14 05:49:57 +0000</bug_when>
    <thetext>Created attachment 766
Patch UefiCpuPkg: SecCoreNative without ResetVector</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17855</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:14:20 +0000</bug_when>
    <thetext>Fix at e3e47d7963985f669f5826eac41b3ac4f19fc444</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>766</attachid>
            <date>2021-07-14 05:49:57 +0000</date>
            <delta_ts>2021-07-14 05:49:57 +0000</delta_ts>
            <desc>Patch UefiCpuPkg: SecCoreNative without ResetVector</desc>
            <filename>0001-UefiCpuPkg-SecCoreNative-without-ResetVector.patch</filename>
            <type>text/plain</type>
            <size>3820</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3873</bug_id>
          
          <creation_ts>2022-03-18 01:17:49 +0000</creation_ts>
          <short_desc>CodeFirst - Confidential Computing Extension</short_desc>
          <delta_ts>2023-03-09 08:59:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18642</commentid>
    <comment_count>0</comment_count>
      <attachid>962</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2022-03-18 01:17:49 +0000</bug_when>
    <thetext>Created attachment 962
CodeFirst - Confidential Computing Extension

This proposal is to add a standalone document to describe &quot;Confidential Computing Extension&quot; for the UEFI firmware.

See attachment for detail proposal.

NOTE:

&quot;standalone document&quot; is something like: https://uefi.org/sites/default/files/resources/Coherent%20Device%20Attribute%20Table_1.02.pdf

It is also OK, to move the EFI_CC_MEASUREMENT_PROTOCOL to UEFI spec, and move CCEL ACPI table to ACPI spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18646</commentid>
    <comment_count>1</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-03-18 09:50:06 +0000</bug_when>
    <thetext>Related EDK2 BZ for the code submissions:
- https://bugzilla.tianocore.org/show_bug.cgi?id=3625
- https://bugzilla.tianocore.org/show_bug.cgi?id=3853


- Related EDK2 discussions on standardizing the CC UEFI framework:

- Initial discussion requesting change to EFI_TD_PROTOCOL:
https://edk2.groups.io/g/devel/topic/86163957#81832

- Discussion on what needs changing in the EFI_TD_PROTOCOL: 
https://edk2.groups.io/g/devel/topic/86163958#81650

- Feedback on integration with DxeTpm2MeasureBootLib:
https://edk2.groups.io/g/devel/topic/86163959#81651

- General feedback on integration with DxeTpmMeasurementLib:
https://edk2.groups.io/g/devel/topic/86163960#81652

- Discussion where EFI_CC_MEASUREMENT_PROTOCOL is accepted 
as the new name of the protocol:
https://edk2.groups.io/g/devel/message/82999

- EFI_CC_MEASUREMENT_PROTOCOL approved patch:
https://edk2.groups.io/g/devel/topic/86758666#83112

- TDEL to CCEL ACPI table discussion:
https://edk2.groups.io/g/devel/topic/89491522#87396</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18647</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-03-18 09:51:29 +0000</bug_when>
    <thetext>In addition to CCEL and the EFI_CC_MEASUREMENT_PROTOCOL, we should also consider adding the SVKL ACPI table to this new &quot;Confidential Computing Extension&quot; specification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18648</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-03-18 10:06:36 +0000</bug_when>
    <thetext>I am OK to add SVKL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18674</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 21:42:31 +0000</bug_when>
    <thetext>Jiewen is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18710</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-03-24 18:31:32 +0000</bug_when>
    <thetext>(In reply to jiewen.yao from comment #3)
&gt; I am OK to add SVKL.

Thanks Jiewen. Can you please update the attached ECR document to include the SVKL table. Was the TianoCore community OK with this name for the common CC feature? If the name needs to change, we need to notify UEFI Forum/ASWG right away.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18711</commentid>
    <comment_count>6</comment_count>
      <attachid>967</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2022-03-25 00:12:56 +0000</bug_when>
    <thetext>Created attachment 967
CodeFirst - Confidential Computing Extension for ACPI - v3

Split</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18712</commentid>
    <comment_count>7</comment_count>
      <attachid>968</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2022-03-25 00:13:48 +0000</bug_when>
    <thetext>Created attachment 968
CodeFirst - Confidential Computing Extension for UEFI - v3

split</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18713</commentid>
    <comment_count>8</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-03-25 00:14:23 +0000</bug_when>
    <thetext>&gt; Was the TianoCore community OK with this name for the common CC feature? 
YES.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18714</commentid>
    <comment_count>9</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-03-25 00:23:11 +0000</bug_when>
    <thetext>&gt; Can you please update the attached ECR document to include the SVKL table. 
SVKL table is also added.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18781</commentid>
    <comment_count>10</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-04-07 18:20:01 +0000</bug_when>
    <thetext>For the &quot;CC Type&quot; field:

Current definitions:

CC Type	1	36	Confidential computing (CC) type.
0: Reserved
1: SEV
2: TDX


Two comments:

1. Should we spell out SEV and TDX to refer to the AMD and Intel specific features, or at least call it &quot;Intel TDX&quot; and &quot;AMD SEV&quot;?

2. We should reserve all other values for future expansion by the specification, to allow defining CC for other architectures.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18782</commentid>
    <comment_count>11</comment_count>
      <attachid>970</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2022-04-07 19:26:33 +0000</bug_when>
    <thetext>Created attachment 970
CodeFirst - Confidential Computing Extension for ACPI - v4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18783</commentid>
    <comment_count>12</comment_count>
      <attachid>971</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2022-04-07 19:26:59 +0000</bug_when>
    <thetext>Created attachment 971
CodeFirst - Confidential Computing Extension for UEFI - v4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18784</commentid>
    <comment_count>13</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-04-07 19:27:45 +0000</bug_when>
    <thetext>&gt; Two comments:
&gt; 
&gt; 1. Should we spell out SEV and TDX to refer to the AMD and Intel specific features, or at least call it &quot;Intel TDX&quot; and &quot;AMD SEV&quot;?
&gt; 
&gt; 2. We should reserve all other values for future expansion by the specification, to allow defining CC for other architectures.

Agree both comments.
Both docs are updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18877</commentid>
    <comment_count>14</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-04-20 17:15:40 +0000</bug_when>
    <thetext>I have additional feedback, mostly editorial:

1. We should separate the vendor-specific information (for example Tables 39-1 and 39-2) into their own section. You can create a new section 39.4 that is called &quot;Vendor specific information&quot; or something similar, and divide it into sub-sections for each vendor technology (Intel TDXAMD SEV, etc..). The tables (and related text) for the mappings can move to the appropriate vendor section, and get referenced form the other protocol sections. This keeps the rest of the protocol definitions vendor-agnostic.


2. I see the following defined for AMD SEV:
#define EFI_CC_TYPE_AMD_SEV  1

But I do not see any mappings provided for AMD SEV that map the CC Measurements or TPM CRs Register Index, like there is for TDX (in tables 39-1 and 39-2). This begs the question on whether these mappings are needed to be part of the specification to begin with? If so, then I assume that information needs to be provided for the other CC types that are defined, which is AMD SEV for now. If not, then can we simply drop those vendor specific mappings from the specification (and maybe publish them in a vendor specific document as supplemental information?)


3. Last feedback, is Chapter 39 the best choice for this new protocol around confidential computing?  I think maybe it is better to add this to the Chapter 37 Secure Technologies (new section 37.7).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18890</commentid>
    <comment_count>15</comment_count>
      <attachid>981</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2022-04-21 20:36:39 +0000</bug_when>
    <thetext>Created attachment 981
CodeFirst - Confidential Computing Extension for UEFI - v5

Create 39.4 as CC vendor specific info.
Move all Intel TDX specific to 39.4.1.
Remove AMD SEV definition.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18891</commentid>
    <comment_count>16</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-04-21 20:42:22 +0000</bug_when>
    <thetext>(In reply to Samer El-Haj-Mahmoud from comment #14)
&gt; I have additional feedback, mostly editorial:
&gt; 
&gt; 1. We should separate the vendor-specific information (for example Tables
&gt; 39-1 and 39-2) into their own section. You can create a new section 39.4
&gt; that is called &quot;Vendor specific information&quot; or something similar, and
&gt; divide it into sub-sections for each vendor technology (Intel TDXAMD SEV,
&gt; etc..). The tables (and related text) for the mappings can move to the
&gt; appropriate vendor section, and get referenced form the other protocol
&gt; sections. This keeps the rest of the protocol definitions vendor-agnostic.

Good suggestion. I create 39.4 and move Intel TDX to 39.4.1.

&gt; 
&gt; 2. I see the following defined for AMD SEV:
&gt; #define EFI_CC_TYPE_AMD_SEV  1
&gt; 
&gt; But I do not see any mappings provided for AMD SEV that map the CC
&gt; Measurements or TPM CRs Register Index, like there is for TDX (in tables
&gt; 39-1 and 39-2). This begs the question on whether these mappings are needed
&gt; to be part of the specification to begin with? If so, then I assume that
&gt; information needs to be provided for the other CC types that are defined,
&gt; which is AMD SEV for now. If not, then can we simply drop those vendor
&gt; specific mappings from the specification (and maybe publish them in a vendor
&gt; specific document as supplemental information?)

You are right. I removed AMD SEV related thing.

&gt; 
&gt; 3. Last feedback, is Chapter 39 the best choice for this new protocol around
&gt; confidential computing?  I think maybe it is better to add this to the
&gt; Chapter 37 Secure Technologies (new section 37.7).

I still feel we should separate it, because chapter 37 is for platform firmware, while chapter 39 is only for virtual firmware.
I don&apos;t want to make people confused, that this is needed for platform firmware as well to support CC.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18925</commentid>
    <comment_count>17</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-05-04 16:40:25 +0000</bug_when>
    <thetext>(In reply to jiewen.yao from comment #16)

&gt; (In reply to Samer El-Haj-Mahmoud from comment #14)
&gt; &gt; I have additional feedback, mostly editorial:
&gt; &gt; 
&gt; &gt; 1. We should separate the vendor-specific information (for example Tables
&gt; &gt; 39-1 and 39-2) into their own section. You can create a new section 39.4
&gt; &gt; that is called &quot;Vendor specific information&quot; or something similar, and
&gt; &gt; divide it into sub-sections for each vendor technology (Intel TDXAMD SEV,
&gt; &gt; etc..). The tables (and related text) for the mappings can move to the
&gt; &gt; appropriate vendor section, and get referenced form the other protocol
&gt; &gt; sections. This keeps the rest of the protocol definitions vendor-agnostic.
&gt; 
&gt; Good suggestion. I create 39.4 and move Intel TDX to 39.4.1.
&gt; 

Only one minor question, I see this definition moved to 39.4 - Vendor Specific Information / 39.4.1 Intel:

#define EFI_CC_TYPE_INTEL_TDX  2

Is this needed for the protocol definition? If so, maybe we should keep it next to the protocol definition to avoid loosing important protocol information in the &quot;vendor specific&quot; section.



&gt; 
&gt; &gt; 
&gt; &gt; 3. Last feedback, is Chapter 39 the best choice for this new protocol around
&gt; &gt; confidential computing?  I think maybe it is better to add this to the
&gt; &gt; Chapter 37 Secure Technologies (new section 37.7).
&gt; 
&gt; I still feel we should separate it, because chapter 37 is for platform
&gt; firmware, while chapter 39 is only for virtual firmware.
&gt; I don&apos;t want to make people confused, that this is needed for platform
&gt; firmware as well to support CC.

This is fine. But maybe we make this new chapter 38, and move existing chapter 38 (Misc Protocols) to be 39 ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18927</commentid>
    <comment_count>18</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-05-04 21:03:56 +0000</bug_when>
    <thetext>&gt; Only one minor question, I see this definition moved to 39.4 - Vendor Specific Information / 39.4.1 Intel:

&gt; #define EFI_CC_TYPE_INTEL_TDX  2

&gt; Is this needed for the protocol definition? If so, maybe we should keep it next to the protocol definition to avoid loosing important protocol information in the &quot;vendor specific&quot; section.

We need the definition.
I will add comment - &quot;refer to 38.4&quot; in protocol definition, to help people connect them.


&gt; This is fine. But maybe we make this new chapter 38, and move existing chapter 38 (Misc Protocols) to be 39 ?

Agree. I will move to chap 38.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18928</commentid>
    <comment_count>19</comment_count>
      <attachid>983</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2022-05-04 21:05:45 +0000</bug_when>
    <thetext>Created attachment 983
CodeFirst - Confidential Computing Extension for UEFI - v6

move to chap 38.
add &quot;refer to 38&quot; in protocol definition.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18952</commentid>
    <comment_count>20</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-05-13 16:22:09 +0000</bug_when>
    <thetext>Both the UEFI and ACPI changes were approved by UEFI Forum to be included as-is in ACPI.next and UEFI.next. Implementations may proceed with the attached definitions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21167</commentid>
    <comment_count>21</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2023-03-09 08:59:49 +0000</bug_when>
    <thetext>merged into https://uefi.org/specs/ACPI/6.5/ and https://uefi.org/specs/UEFI/2.10/</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>962</attachid>
            <date>2022-03-18 01:17:49 +0000</date>
            <delta_ts>2022-03-25 00:12:56 +0000</delta_ts>
            <desc>CodeFirst - Confidential Computing Extension</desc>
            <filename>CodeFirst - Confidential Computing Extension.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>43442</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>967</attachid>
            <date>2022-03-25 00:12:56 +0000</date>
            <delta_ts>2022-04-07 19:26:33 +0000</delta_ts>
            <desc>CodeFirst - Confidential Computing Extension for ACPI - v3</desc>
            <filename>CodeFirst - Confidential Computing Extension for ACPI - v3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>30847</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>968</attachid>
            <date>2022-03-25 00:13:48 +0000</date>
            <delta_ts>2022-04-07 19:26:59 +0000</delta_ts>
            <desc>CodeFirst - Confidential Computing Extension for UEFI - v3</desc>
            <filename>CodeFirst - Confidential Computing Extension for UEFI - v3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>41664</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>970</attachid>
            <date>2022-04-07 19:26:33 +0000</date>
            <delta_ts>2022-04-07 19:26:33 +0000</delta_ts>
            <desc>CodeFirst - Confidential Computing Extension for ACPI - v4</desc>
            <filename>CodeFirst - Confidential Computing Extension for ACPI - v4.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>30661</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>971</attachid>
            <date>2022-04-07 19:26:59 +0000</date>
            <delta_ts>2022-04-21 20:36:39 +0000</delta_ts>
            <desc>CodeFirst - Confidential Computing Extension for UEFI - v4</desc>
            <filename>CodeFirst - Confidential Computing Extension for UEFI - v4.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>41070</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>981</attachid>
            <date>2022-04-21 20:36:39 +0000</date>
            <delta_ts>2022-05-04 21:06:21 +0000</delta_ts>
            <desc>CodeFirst - Confidential Computing Extension for UEFI - v5</desc>
            <filename>CodeFirst - Confidential Computing Extension for UEFI - v5.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>40336</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>983</attachid>
            <date>2022-05-04 21:05:45 +0000</date>
            <delta_ts>2022-05-04 21:05:45 +0000</delta_ts>
            <desc>CodeFirst - Confidential Computing Extension for UEFI - v6</desc>
            <filename>CodeFirst - Confidential Computing Extension for UEFI - v6.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>40524</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3253</bug_id>
          
          <creation_ts>2021-03-09 11:56:06 +0000</creation_ts>
          <short_desc>uefi-sct: print format mismatch in SimpleTextOutput test</short_desc>
          <delta_ts>2021-05-17 11:45:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>Sunny.Wang</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15251</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-09 11:56:06 +0000</bug_when>
    <thetext>SctPrint() requires that %d refers to an UINTN parameter.

uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/SimpleTextOut/BlackBoxTest/SimpleTextOutBBTestFunction_uefi.c has a lot of StandardLib-&gt;RecordAssertion() calls where an INT32 is passed as argument for a &apos;%d&apos; print code.

This leads to incorrect output like:

MaxMode=-549755813885,

-549755813885 is 0x0xFFFFFF8000000003. So MaxMode is actually an INT32 with value 3.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15252</commentid>
    <comment_count>1</comment_count>
      <attachid>667</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-09 13:02:23 +0000</bug_when>
    <thetext>Created attachment 667
[PATCH edk2-test 1/1] uefi-sct/SctPkg: type mismatch in SimpleTextOut</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15253</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-09 13:05:52 +0000</bug_when>
    <thetext>Patch appended and sent to developer list

https://edk2.groups.io/g/devel/message/72597
[PATCH edk2-test 1/1] uefi-sct/SctPkg: type mismatch in SimpleTextOut test

Please, review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15348</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-17 12:40:11 +0000</bug_when>
    <thetext>Appended patch
Reviewed-by: G Edhaya Chandran&lt;edhaya.chandran@arm.com&gt;
https://edk2.groups.io/g/devel/message/72969

Please, consider for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15388</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2021-03-21 21:57:58 +0000</bug_when>
    <thetext>uefi-sct/SctPkg/TestCase/UEFI/IHV/Protocol/SimpleTextOut may have the same issue. Please help check before we close this ticket in bugzilla.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15392</commentid>
    <comment_count>5</comment_count>
      <attachid>677</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-22 07:39:32 +0000</bug_when>
    <thetext>Created attachment 677
[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in Simple Network test

As Eric pointed out the IHV and EFI code is identical. So we need a patch for IHV too:

[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in Simple Network test
https://edk2.groups.io/g/devel/message/73139</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15452</commentid>
    <comment_count>6</comment_count>
      <attachid>684</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-30 11:11:25 +0000</bug_when>
    <thetext>Created attachment 684
[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in SimpleTextOut test

https://edk2.groups.io/g/devel/message/73535
[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in SimpleTextOut test</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15969</commentid>
    <comment_count>7</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-10 06:37:34 +0000</bug_when>
    <thetext>
[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in SimpleTextOut test:

Reviewed-by: G Edhaya Chandran&lt;edhaya.chandran@arm.com&gt;
https://edk2.groups.io/g/devel/message/73694

Reviewed-by: Samer El-Haj-Mahmoud &lt;Samer.El-Haj-Mahmoud@arm.com&gt;
https://edk2.groups.io/g/devel/message/74849

Reviewed-by: Sunny Wang &lt;sunny.wang@arm.com&gt;
https://edk2.groups.io/g/devel/message/74872

Please, consider the patch for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16077</commentid>
    <comment_count>8</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-17 11:45:13 +0000</bug_when>
    <thetext>Commit 2821093d6f2b (&quot;uefi-sct/SctPkg: IHV: type mismatch in SimpleTextOut test&quot;) merged.

Commit f171d5b25295 (&quot;uefi-sct/SctPkg: type mismatch in SimpleTextOut test&quot;) merged.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>667</attachid>
            <date>2021-03-09 13:02:23 +0000</date>
            <delta_ts>2021-03-09 13:02:23 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: type mismatch in SimpleTextOut</desc>
            <filename>0001-uefi-sct-SctPkg-type-mismatch-in-SimpleTextOut-test.patch</filename>
            <type>text/plain</type>
            <size>40356</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>677</attachid>
            <date>2021-03-22 07:39:32 +0000</date>
            <delta_ts>2021-03-30 11:11:25 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in Simple Network test</desc>
            <filename>0001-uefi-sct-SctPkg-IHV-type-mismatch-in-Simple-Network-.patch</filename>
            <type>text/plain</type>
            <size>5735</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>684</attachid>
            <date>2021-03-30 11:11:25 +0000</date>
            <delta_ts>2021-03-30 11:11:25 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in SimpleTextOut test</desc>
            <filename>0001-uefi-sct-SctPkg-IHV-type-mismatch-in-SimpleTextOut-t.patch</filename>
            <type>text/plain</type>
            <size>40286</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3743</bug_id>
          
          <creation_ts>2021-11-18 09:44:16 +0000</creation_ts>
          <short_desc>Add DynamicPlatRepo library</short_desc>
          <delta_ts>2022-01-03 03:27:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="Pierre Gondois">pierre.gondois</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>DynamicTablesPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17787</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-11-18 09:44:16 +0000</bug_when>
    <thetext>The DynamicTablesPkg allows to dynamically generates ACPI tables at runtime. The ACPI tables are generated from information stored as Configuration Manager objects (CmObj).

The FdtHwInfoParser (https://bugzilla.tianocore.org/show_bug.cgi?id=3741) will allow to parse a Device Tree and generate CmObj. A new library is necessary to:
- receive/store the created CmObj
- handle the Token generation for the CmObj
- provide a getter function to search a specific CmObj

The DynamicPlatRepo intends to do this.

A V1 was posted at https://edk2.groups.io/g/devel/message/76984</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17818</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 21:59:19 +0000</bug_when>
    <thetext>Pierre, why call DynamicPlatRepoLib? As you know, Repo normally as Git Repo. This name may confuse.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17997</commentid>
    <comment_count>2</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-12-15 03:20:32 +0000</bug_when>
    <thetext>Hello Liming,
repository is also the name that is used to describe the entity that contains platform specific information in the DynamicaTablesPkg. Cf
DynamicTablesPkg/Include/Protocol/ConfigurationManagerProtocol.h

Unfortunately I only see your comment now and a V3 was submitted and pushed at 
V3: https://edk2.groups.io/g/devel/message/84601
Pushed as 9006967c8d24..38f6d78c3b62

I am letting the ticket open to have a mean to discuss, but I think that:
- As a git repo and a repo for the DynamicTablesPkg are concepts that are really distinct, there shouldn&apos;t be confusion.
- Changing the &apos;repo&apos; word in the DynamicTablesPkg would be a significant change as we would have to do the same in edk2-platforms

Regards,
Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17999</commentid>
    <comment_count>3</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-12-15 05:47:25 +0000</bug_when>
    <thetext>Hi Liming,

Apologies, I missed this comment before merging the code. 

Would it help if we renamed it to DynamicPlatHwInfoRepo?
Kindly let me know your thoughts, and we could submit a patch to reflect that.

Regards,

Sami Mujawar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18045</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-12-23 21:24:20 +0000</bug_when>
    <thetext>Pierre and Sami: if this name doesn&apos;t bring confuse, I am OK to keep it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18063</commentid>
    <comment_count>5</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2022-01-03 03:27:19 +0000</bug_when>
    <thetext>Closing the bugzilla as it is ok to keep the &apos;repo&apos; in the name.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3138</bug_id>
          
          <creation_ts>2020-12-24 22:45:30 +0000</creation_ts>
          <short_desc>Add PCIe Resizable BAR Capability Support</short_desc>
          <delta_ts>2021-01-13 20:48:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>heng.luo</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14663</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-12-24 22:45:30 +0000</bug_when>
    <thetext>Add PCIe Resizable BAR Capability support (PCIe Specification, Section “Resizable BAR Capability”) in EDK2, allow BIOS to resize PCIe BAR size if it supports Resizable BAR Capability.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14664</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-12-24 22:50:07 +0000</bug_when>
    <thetext>I will submit a patch for this</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14706</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-01-04 22:22:52 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/42fe8ca453f1ab19d03d8dc945398997b00b0777
https://github.com/tianocore/edk2/commit/0785c619a58a450091d2bf6755591012533b80b8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14803</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-01-13 20:48:26 +0000</bug_when>
    <thetext>Additional fixes have been merged via:
PR: https://github.com/tianocore/edk2/pull/1351
Commits:
https://github.com/tianocore/edk2/commit/ef23012e5439f14864630630d2e218aeab7df501
https://github.com/tianocore/edk2/commit/da45a3608787d77fc55d915bee3903f5119b3ee6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3410</bug_id>
          
          <creation_ts>2021-05-21 16:06:18 +0000</creation_ts>
          <short_desc>overly noisy deprecation warning in varlock / varpol compat code</short_desc>
          <delta_ts>2021-05-23 08:30:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3111</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16113</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-21 16:06:18 +0000</bug_when>
    <thetext>Commit a18a9bde36d2 (&quot;MdeModulePkg/Variable/RuntimeDxe: Restore Variable Lock Protocol behavior&quot;, 2020-12-15), for bug 3111, added two such sets of debug messages that:

(a) are relevant for developers,

(b) yet should not necessarily poke end-users, because no functionality suffers in practice.

Both message sets are in function VariableLockRequestToLock(): the first is a generic interface deprecation warning; the second is the double-locking situation, which we permit for compatibility (return status EFI_SUCCESS).

Both message sets should be emitted with the DEBUG_WARN mask, not the most serious DEBUG_ERROR mask. On some platforms, the serial console carries both terminal traffic, and grave (DEBUG_ERROR-only) log messages. On such platforms, both message sets may be perceived as a nuisance by end-users, as there is nothing they can do, and there&apos;s nothing they *should* do -- in practice, nothing malfunctions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16114</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-21 16:16:15 +0000</bug_when>
    <thetext>Example log (with GUIDs substituted):

!!! DEPRECATED INTERFACE !!! VariableLockRequestToLock() will go away soon!
!!! DEPRECATED INTERFACE !!! Please move to use Variable Policy!
!!! DEPRECATED INTERFACE !!! Variable: [EfiGlobalVariable] PlatformLangCodes
!!! DEPRECATED INTERFACE !!! VariableLockRequestToLock() will go away soon!
!!! DEPRECATED INTERFACE !!! Please move to use Variable Policy!
!!! DEPRECATED INTERFACE !!! Variable: [EfiGlobalVariable] LangCodes
!!! DEPRECATED INTERFACE !!! VariableLockRequestToLock() will go away soon!
!!! DEPRECATED INTERFACE !!! Please move to use Variable Policy!
!!! DEPRECATED INTERFACE !!! Variable: [EfiGlobalVariable] BootOptionSupport
!!! DEPRECATED INTERFACE !!! VariableLockRequestToLock() will go away soon!
!!! DEPRECATED INTERFACE !!! Please move to use Variable Policy!
!!! DEPRECATED INTERFACE !!! Variable: [EfiGlobalVariable] HwErrRecSupport
!!! DEPRECATED INTERFACE !!! VariableLockRequestToLock() will go away soon!
!!! DEPRECATED INTERFACE !!! Please move to use Variable Policy!
!!! DEPRECATED INTERFACE !!! Variable: [EfiGlobalVariable] OsIndicationsSupported
!!! DEPRECATED INTERFACE !!! VariableLockRequestToLock() will go away soon!
!!! DEPRECATED INTERFACE !!! Please move to use Variable Policy!
!!! DEPRECATED INTERFACE !!! Variable: [EfiGlobalVariable] PlatformRecovery0000</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16115</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-21 16:42:06 +0000</bug_when>
    <thetext>Posted

* [edk2-stable202105 PATCH]
  MdeModulePkg/VariableLock: downgrade compatibility warnings to DEBUG_WARN

Message-Id: &lt;20210521204037.11980-1-lersek@redhat.com&gt;
https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00764.html
https://edk2.groups.io/g/devel/message/75449

Personal build (CI run):
https://github.com/tianocore/edk2/pull/1660/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16116</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-21 16:42:17 +0000</bug_when>
    <thetext>IN_PROGRESS per comment 2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16120</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-23 08:30:33 +0000</bug_when>
    <thetext>Merged as commit cfa6ffb113f2, via &lt;https://github.com/tianocore/edk2/pull/1661&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3894</bug_id>
          
          <creation_ts>2022-04-03 21:25:34 +0000</creation_ts>
          <short_desc>To support PEI 64bit in IntelFsp2WrapperPkg</short_desc>
          <delta_ts>2022-04-04 02:43:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3893</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>ted.kuo</reporter>
          <assigned_to>ted.kuo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
    
    <cf_package>IntelFsp2WrapperPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18748</commentid>
    <comment_count>0</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-04-03 21:25:34 +0000</bug_when>
    <thetext>Currently PEI drivers/libraries only support 32bit in IntelFsp2WrapperPkg. Changes are needed to support these drivers/libraries in 64bit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18750</commentid>
    <comment_count>1</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-04-04 02:42:39 +0000</bug_when>
    <thetext>Merged to https://bugzilla.tianocore.org/show_bug.cgi?id=3893

*** This bug has been marked as a duplicate of bug 3893 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3760</bug_id>
          
          <creation_ts>2021-12-02 20:01:53 +0000</creation_ts>
          <short_desc>Update source style for use of OPTIONAL keyword</short_desc>
          <delta_ts>2022-01-14 20:10:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
    
    <cf_package>ArmPlatformPkg</cf_package>
    
    <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>CryptoPkg</cf_package>
    
    <cf_package>DynamicTablesPkg</cf_package>
    
    <cf_package>EmbeddedPkg</cf_package>
    
    <cf_package>EmulatorPkg</cf_package>
    
    <cf_package>FatPkg</cf_package>
    
    <cf_package>FmpDevicePkg</cf_package>
    
    <cf_package>IntelFsp2Pkg</cf_package>
    
    <cf_package>IntelFsp2WrapperPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
    
    <cf_package>PcAtChipsetPkg</cf_package>
    
    <cf_package>RedfishPkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
    
    <cf_package>SignedCapsulePkg</cf_package>
    
    <cf_package>SourceLevelDebugPkg</cf_package>
    
    <cf_package>StandaloneMmPkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
    
    <cf_package>UefiPayloadPkg</cf_package>
    
    <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17905</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-12-02 20:01:53 +0000</bug_when>
    <thetext>Alignment of parameters in function declarations is not correct when the
uncrustify tool is used.  The root cause of this is the use of the OPTIONAL
keyword.  If the OPTIONAL keyword is removed, then the alignment is correct.
The alignment is also correct if the OPTIONAL keyword appears before the &apos;,&apos;.  
If the OPTIONAL keyword appears after the &apos;,&apos;, then the format is  not correct.
The OPTIONAL keyword indicates that the parameter in the function is not
required and may be passed in as NULL or 0 or some other default value defined
by the API.  It makes more sense for this OPTIONAL keyword that follows the
parameter names to appear before the &apos;,&apos; so it is scoped to the parameter on
that line.  If it appears after the &apos;,&apos;, then C parsers thinks it is a prefix
(IN, OUT, CONST, volatile, static) for the next parameter in the function.

Review and update all uses of OPTIONAL and make sure OPTIONAL appears before
&apos;,&apos; on the same line.

Example:

EFI_STATUS
EFIAPI
TlsDoHandshake (
  IN     VOID   *Tls,
  IN     UINT8  *BufferIn,      OPTIONAL
  IN     UINTN  BufferInSize,   OPTIONAL
  OUT UINT8     *BufferOut,     OPTIONAL
  IN OUT UINTN  *BufferOutSize
  );

Change to:

EFI_STATUS
EFIAPI
TlsDoHandshake (
  IN     VOID   *Tls,
  IN     UINT8  *BufferIn       OPTIONAL,
  IN     UINTN  BufferInSize    OPTIONAL,
  OUT UINT8     *BufferOut      OPTIONAL,
  IN OUT UINTN  *BufferOutSize
  );

The RegEx to perform this fix is:

Search string:  &apos;,( *)OPTIONAL( *)&apos;
Replace string: &apos; $1OPTIONAL,$2&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17908</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-12-02 20:54:35 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18152</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:10:16 +0000</bug_when>
    <thetext>This change was included in the uncrustify patch series
that was merged in the following PR:

    https://github.com/tianocore/edk2/pull/2242

This patch series is composed of 72 commits.  Push range: 
    https://github.com/tianocore/edk2/pull/2242/commits/8c2820c0502820d957b200f9d7ae3e15ecc6368e
    ...
    https://github.com/tianocore/edk2/pull/2242/commits/e0f4416242c7c6b7d06d8939f45da837df06a116

============================================================
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3737
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3767
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3760
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3739

* Update all use of EFI_D_* defines in DEBUG() macros to DEBUG_* defines.
* Update all use of &apos;, OPTIONAL&apos; to &apos; OPTIONAL,&apos; for function params.
* Change complex DEBUG_CODE() to DEBUG_CODE_BEGIN/END()
* Apply uncrustify changes to all package .c/.h files(BaseTools excluded)

devel@edk2.groups.io discussions:
* https://edk2.groups.io/g/devel/topic/uncrustify_conversion/87414953?p=,,,20,0,0,0::recentpostdate/sticky,,,20,2,0,87414953,previd=1638890440315310506,nextid=1638842194018157807&amp;previd=1638890440315310506&amp;nextid=1638842194018157807
* https://edk2.groups.io/g/devel/message/84132
* https://edk2.groups.io/g/devel/message/84112
* https://edk2.groups.io/g/devel/message/84074

Compare Build Results across all commits in this PR
* Detects any binary differences across entire patch series (obj, lib, dll, efi, ffs, fv, fd)
* repo: https://github.com/mdkinney/edk2
* ref1: 8c2820c0502820d957b200f9d7ae3e15ecc6368e
* ref2: e0f4416242c7c6b7d06d8939f45da837df06a116
* 30 VS2019 build comparisons. Pass 100%.  No binary differences detected.
* 40 GCC5 build comparisons. Pass 100%.    No binary differences detected.
* https://github.com/mdkinney/edk2/actions/runs/1550132292

Cc: Andrew Fish afish@apple.com
Cc: Leif Lindholm leif@nuviainc.com
Cc: Michael D Kinney michael.d.kinney@intel.com
Cc: Michael Kubacki michael.kubacki@microsoft.com</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3535</bug_id>
          
          <creation_ts>2021-08-06 15:49:14 +0000</creation_ts>
          <short_desc>MinPlatformPkg/AcpiTables: Update to ACPI 6.3</short_desc>
          <delta_ts>2021-10-01 21:36:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16820</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-06 15:49:14 +0000</bug_when>
    <thetext>Many of the ACPI structures in MinPlatformPkg are still based on older ACPI Specifications. This BZ tracks updating the structures to ACPI 6.3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16821</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-06 15:55:07 +0000</bug_when>
    <thetext>V1 patch on mailing list: https://edk2.groups.io/g/devel/message/78830</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17222</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-08 20:43:27 +0000</bug_when>
    <thetext>Still waiting on patch to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17376</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-24 14:24:45 +0000</bug_when>
    <thetext>V2 patch on mailing list (no functional changes; needed for rebase): https://edk2.groups.io/g/devel/message/81108</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17432</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-10-01 21:36:18 +0000</bug_when>
    <thetext>Pushed in the following commit https://github.com/tianocore/edk2-platforms/commit/bbb431a0c65865a8d6d05035125858373f250708</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3792</bug_id>
          
          <creation_ts>2021-12-31 13:40:42 +0000</creation_ts>
          <short_desc>Update FvLength to UINTN from UINT32 in FirmwareVolumeInfo</short_desc>
          <delta_ts>2022-01-04 21:41:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ashraf Ali S">ashraf.ali.s</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>ashraf.ali.s</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18059</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-12-31 13:40:42 +0000</bug_when>
    <thetext>Pi/PiFirmwareVolume FvLength has been assigned as UINT64, and
Ppi/FirmwareVolumeInfo FvLength has mentioned as UINT32 which will
break the X64 build, updating the FvLenth to UINTN will support for both</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18060</commentid>
    <comment_count>1</comment_count>
      <attachid>908</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-12-31 13:48:10 +0000</bug_when>
    <thetext>Created attachment 908
[PATCH] Update FvLength to UINTN from UINT32 in FirmwareVolumeInfo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18075</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-04 21:41:14 +0000</bug_when>
    <thetext>don&apos;t fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18076</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-04 21:41:56 +0000</bug_when>
    <thetext>Platform code can be updated for this one. Don&apos;t need to update spec.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>908</attachid>
            <date>2021-12-31 13:48:10 +0000</date>
            <delta_ts>2021-12-31 13:48:10 +0000</delta_ts>
            <desc>[PATCH] Update FvLength to UINTN from UINT32 in FirmwareVolumeInfo</desc>
            <filename>0001-Update-FvLength-to-UINTN-from-UINT32-in-FirmwareVolu.patch</filename>
            <type>text/plain</type>
            <size>12605</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3182</bug_id>
          
          <creation_ts>2021-01-22 07:02:56 +0000</creation_ts>
          <short_desc>MP: Racing condition in AP wake up</short_desc>
          <delta_ts>2021-03-09 02:59:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14888</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-01-22 07:02:56 +0000</bug_when>
    <thetext>Reproduce steps:
1. In Mp.c: CollectProcessorCount(), call WakeUpAP again.
--------
  while (CpuMpData-&gt;FinishedCount &lt; (CpuMpData-&gt;CpuCount - 1)) {
    CpuPause ();
  }

 +WakeUpAP (CpuMpData, TRUE, 0, ApDummy, NULL, TRUE);
 +while (CpuMpData-&gt;FinishedCount &lt; (CpuMpData-&gt;CpuCount - 1)) {
 +  CpuPause ();
 +}

  //
  // Enable x2APIC mode if
---------

2. In Mp.c: ApWakeupFunction(), add a 5 seconds delay in ApInitConfig path.
-----------

    //
    // AP finished executing C code
    //
    InterlockedIncrement ((UINT32 *) &amp;CpuMpData-&gt;FinishedCount);
   +if (CpuMpData-&gt;InitFlag == ApInitConfig) {
   +  DEBUG ((DEBUG_ERROR, &quot;Delay 5 secs\n&quot;));
   +  MicroSecondDelay (5000000);
   +}

    //
    // Place AP is specified loop mode
    //
    if (CpuMpData-&gt;ApLoopMode == ApInHltLoop) {
      //
      // Save AP volatile registers
      //
      SaveVolatileRegisters (&amp;CpuMpData-&gt;CpuData[ProcessorNumber].VolatileRegisters);
-------------

3. Start QEMU in MP mode. Observe the QEMU reset immediately when the newly added WakeUpAP() is called.

Reason:
The AP restores from CpuData[0].VolatileRegisters in ApInitConfig path (first time wake up) and saves to CpuData[ProcessorNumber].VolatileRegisters before entering to HLT mode.
So that next time AP can restore from CpuData[ProcessorNumber].VolatileRegisters.

It&apos;s expected that BSP wakes up AP again after the volatile register save is done.
But today&apos;s logic cannot guarantee that.
There is a rare case that some APs haven&apos;t saved the volatile registers and BSP wakes up them again.
The volatile register restore from a all-zero structure causes QEMU resets. (Remove the register store operation can avoid reset.)
Adding a 5-second delay expose this issue quickly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14889</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-01-22 12:11:18 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14890</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-01-22 12:12:33 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/70688</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15246</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-03-09 02:59:08 +0000</bug_when>
    <thetext>Fixed @ 96d738aa25b21dc65aa14f9b1c0d44d16e65fb6b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3674</bug_id>
          
          <creation_ts>2021-10-01 04:19:07 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: adopt FSP 2.3 specification.</short_desc>
          <delta_ts>2021-10-03 21:10:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17425</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-10-01 04:19:07 +0000</bug_when>
    <thetext>Need to add ExtendedImageRevision in FSP_INFO_HEADER structure.
Need to add FSP_NON_VOLATILE_STORAGE_HOB2 header.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17426</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-10-01 04:19:35 +0000</bug_when>
    <thetext>will work on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17437</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-10-03 21:10:53 +0000</bug_when>
    <thetext>Patch pushed: https://github.com/tianocore/edk2/commit/4cc1458dbe004b1d70534caa55f475f6d19fe14a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3452</bug_id>
          
          <creation_ts>2021-06-10 18:18:11 +0000</creation_ts>
          <short_desc>QuarkSocPkg: SmbusLib SmBusSendByte sending incorrect value</short_desc>
          <delta_ts>2021-06-11 12:37:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16333</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-10 18:18:11 +0000</bug_when>
    <thetext>The SmBusSendByte command must write the value to the Command Register, not the Host Data registers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16334</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-10 19:06:24 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16339</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-10 19:51:54 +0000</bug_when>
    <thetext>Patch email for review:

https://edk2.groups.io/g/devel/message/76344</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16346</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-11 12:37:47 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2-platforms/commit/4deb510cb00da13081d3f4fe5f5135031ed2e543</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3957</bug_id>
          
          <creation_ts>2022-06-21 01:27:24 +0000</creation_ts>
          <short_desc>The reserved IDT table size in SecCore is too small for X64</short_desc>
          <delta_ts>2022-07-14 14:39:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ted.kuo</reporter>
          <assigned_to>ted.kuo</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19102</commentid>
    <comment_count>0</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-06-21 01:27:24 +0000</bug_when>
    <thetext>The reserved IDT table size in SecCore is too small for X64. We need to double the size of IdtTable in SecCore when ARCH is X64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19106</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-06-21 21:38:06 +0000</bug_when>
    <thetext>Kuo will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19244</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-07-14 14:39:51 +0000</bug_when>
    <thetext>Fix patch series has been merged:
https://github.com/tianocore/edk2/commit/9ab389c01b875869c6173557aa053d397aaf14f1
https://github.com/tianocore/edk2/commit/470206ba7f118aaa1153d66689cf3ee4d17051b7

Thanks,
Chasel</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3817</bug_id>
          
          <creation_ts>2022-01-27 12:52:32 +0000</creation_ts>
          <short_desc>GetCpuidFw() uses Compacted when it is not initialized.</short_desc>
          <delta_ts>2024-02-03 12:26:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>ardb</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>thomas.lendacky</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18212</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2022-01-27 12:52:32 +0000</bug_when>
    <thetext>I got a warning from the latest XCODE that Compacted is used but not initialized. Looks like if EcxIn == 0 Compacted is not initialized. 

This fixes the warning

diff --git a/OvmfPkg/Library/VmgExitLib/VmgExitVcHandler.c b/OvmfPkg/Library/VmgExitLib/VmgExitVcHandler.c
index a40a31f7c275..6e1410eee81f 100644
--- a/OvmfPkg/Library/VmgExitLib/VmgExitVcHandler.c
+++ b/OvmfPkg/Library/VmgExitLib/VmgExitVcHandler.c
@@ -1886,6 +1886,8 @@ GetCpuidFw (
 
       Compacted     = TRUE;
       XssMsr.Uint64 = AsmReadMsr64 (MSR_IA32_XSS);
+    } else {
+      Compacted     = FALSE;
     }
 
     if (!GetCpuidXSaveSize (</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18271</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-08 21:50:48 +0000</bug_when>
    <thetext>Tom: can you fix this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18281</commentid>
    <comment_count>2</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2022-02-09 00:16:59 +0000</bug_when>
    <thetext>A patch was originally submitted by Brijesh to address this, but it didn&apos;t pass CI. Rebecca knew what the CI failure reason was and resubmitted an updated patch a few days ago:

https://edk2.groups.io/g/devel/message/86395

(Although I just noticed that it is setting Compacted to 0 vs FALSE).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22514</commentid>
    <comment_count>3</comment_count>
    <who name="Ard Biesheuvel">ardb</who>
    <bug_when>2024-02-03 12:26:26 +0000</bug_when>
    <thetext>Merged as #2523 on 11 feb 2022</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3207</bug_id>
          
          <creation_ts>2021-02-03 11:11:51 +0000</creation_ts>
          <short_desc>ECC: catch invalid indentation of multi-line function calls (and function-like macro invocations)</short_desc>
          <delta_ts>2023-01-03 04:25:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3737</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3206</blocked>
          <everconfirmed>0</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14998</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-03 11:11:51 +0000</bug_when>
    <thetext>In a function call (or in the invocation of a function-like macro), it sometimes happens that the full argument list does not fit on a single line. For breaking the arguments to multiple lines, we accept two styles:

(1) The canonical edk2 style:

  Status = gBS-&gt;InstallMultipleProtocolInterfaces (
                  &amp;ImageHandle,
                  &amp;gEfiSmmControl2ProtocolGuid,
                  &amp;mControl2,
                  NULL
                  );

This style can be described as follows:

- the function designator stands alone on the first line (the first argument is on a separate line)

- the closing parenthesis stands alone on the last line,

- each argument, and the closing parenthesis too, is indented two spaces relative to the function designator,

- if the function designator is a field in a structure, then the indentation noted above is relative to the last field name in the function designator.

Special cases:

- The DEBUG macro uses double parentheses:

  DEBUG ((
    DEBUG_VERBOSE,
    &quot;%a: hello world\n&quot;,
    __FUNCTION__
    ));

- In some cases, a single argument is so long that it must be broken to multiple lines. For readability, we use the following style, with additional parentheses, and additional single-space indentation within the argument-expression:

    Status = VirtioFsFuseWrite (
               VirtioFs,
               VirtioFsFile-&gt;NodeId,
               VirtioFsFile-&gt;FuseHandle,
               (VirtioFsFile-&gt;FilePosition +
                Transferred),
               &amp;WriteSize,
               ((UINT8 *)Buffer +
                Transferred),
               );

(2) The condensed style:

This is identical to the canonical style, with three differences:
- line breaks are only introduced between arguments when an argument would have to be split between lines,
- long string literals can be freely split to multiple lines at embedded spaces,
- the first argument and the closing parenthesis are *not* on separate lines,

Valid examples:

  Status = gBS-&gt;InstallMultipleProtocolInterfaces (&amp;ImageHandle,
                  &amp;gEfiSmmControl2ProtocolGuid, &amp;mControl2, NULL);

  DEBUG ((DEBUG_VERBOSE, &quot;%a:%a:%d: inconsistent feature bitmaps: &quot;
    &quot;requested: 0x%Lx, received: 0x%Lx\n&quot;, gEfiCallerBaseName, __FUNCTION__,
    __LINE__, RequestedFeatures, ReceivedFeatures));


In this BZ ticket, the ask is that ECC accept function calls and macro invocations that conform to either one of these styles (i.e., (1) or (2)), and ECC *reject* other formats.

For example, a common formatting mistake (which should be rejected) is:

  DEBUG ((DEBUG_VERBOSE,
          &quot;%a: hello world\n&quot;,
          __FUNCTION__));

This style is frequently used in other projects, but it&apos;s not idiomatic in edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20398</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:25:09 +0000</bug_when>
    <thetext>I *think* this has been solved by the adoption of uncrustify.

*** This bug has been marked as a duplicate of bug 3737 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3096</bug_id>
          
          <creation_ts>2020-12-01 02:28:16 +0000</creation_ts>
          <short_desc>Elf64Convert.c does not support R_RISCV_CALL_PLT, R_RISCV_GOT_HI20</short_desc>
          <delta_ts>2021-07-21 12:02:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Sunil V L">sunilvl</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>bob.c.feng</cc>
    
    <cc>daniel.schaefer</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sunilvl</cc>
    
    <cc>xypron.glpk</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14443</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-01 02:28:16 +0000</bug_when>
    <thetext>I try to compile Shell.efi for RISCV64 using GCC 10.2 and bintutils 2.35.1 (as provided by Debian Bullseye.

I see errors like:

I see errors like:

GenFw: ERROR 3000: Invalid
GenFw: ERROR 3000: Invalid
  WriteSections64(): /Build/Shell/RELEASE_GCC5/RISCV64/ShellPkg/DynamicCommand/HttpDynamicCommand/HttpApp/DEBUG/http.dll unsupported ELF EM_RISCV64 relocation 0x13.
  WriteSections64(): /Build/Shell/RELEASE_GCC5/RISCV64/ShellPkg/Application/AcpiViewApp/AcpiViewApp/DEBUG/AcpiViewApp.dll unsupported ELF EM_RISCV64 relocation 0x14.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14444</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-01 02:45:12 +0000</bug_when>
    <thetext>--- Comment from Chang, Abner &lt;abner.chang@hpe.com&gt; ---
Hi Heinrich,
Yes, 0x13 and 0x14 relocation types are what we have to fix for the GCC you
mentioned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14450</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-01 03:55:50 +0000</bug_when>
    <thetext>--- Comment from Daniel Schaefer &lt;daniel.schaefer@hpe.com&gt; ---
Hi Heinrich,

oh I&apos;m sorry, I&apos;m still using the old GCC version and we haven&apos;t implemented
the relocations that the new GCC emits.
You can build it using this GCC:
https://github.com/riscv/riscv-uefi-edk2-docs/blob/master/gcc-riscv-edk2-ci-toolchain/gcc-riscv-9.2.0-2020.04-x86_64_riscv64-unknown-gnu.tar.xz

Thanks for creating the issue. We&apos;ll look into implementing the relocations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16206</commentid>
    <comment_count>3</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2021-05-28 08:53:22 +0000</bug_when>
    <thetext>*** Bug 3040 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16405</commentid>
    <comment_count>4</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2021-06-21 02:34:44 +0000</bug_when>
    <thetext>The patch for this issue had been reviewed by maintainers.

https://edk2.groups.io/g/devel/message/76792</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16477</commentid>
    <comment_count>5</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2021-06-29 00:53:12 +0000</bug_when>
    <thetext>Patch is merged.
https://github.com/tianocore/edk2/commit/abfff7c45d43360ebd292dc26b6542094c145f5f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16672</commentid>
    <comment_count>6</comment_count>
    <who name="Sunil V L">sunilvl</who>
    <bug_when>2021-07-21 12:02:24 +0000</bug_when>
    <thetext>Patch for this issue is merged.
https://github.com/tianocore/edk2/commit/abfff7c45d43360ebd292dc26b6542094c145f5f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3573</bug_id>
          
          <creation_ts>2021-08-19 03:18:12 +0000</creation_ts>
          <short_desc>OvmfXen boot failed at SaveS3BootScript()</short_desc>
          <delta_ts>2021-09-13 23:06:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gary Lin">gary.lin</reporter>
          <assigned_to name="Gary Lin">gary.lin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16989</commentid>
    <comment_count>0</comment_count>
      <attachid>804</attachid>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-08-19 03:18:12 +0000</bug_when>
    <thetext>Created attachment 804
error log

When booting OvmfXen with HVM direct kernel boot, the following error showed:

ASSERT_EFI_ERROR (Status = Not Found)                                                                                                                                                          
ASSERT OvmfPkg/Library/PlatformBootManagerLib/BdsPlatform.c(1444): !EFI_ERROR (Status)

Here is the code raised the assertion:

STATIC
VOID
SaveS3BootScript (
  VOID
  )
{
  ...
  Status = gBS-&gt;LocateProtocol (&amp;gEfiS3SaveStateProtocolGuid, NULL,
                  (VOID **) &amp;BootScript);
  ASSERT_EFI_ERROR (Status); &lt;---- Failed here
  ...
}

Per the error log, &quot;Status&quot; was &quot;EFI_NOT_FOUND&quot;, so it means BootScript wasn&apos;t installed. If we check the log file further, we&apos;ll see this line:

S3SaveStateDxe: Skip S3BootScript because ACPI S3 disabled.

It&apos;s because PcdAcpiS3Enable was set as &quot;False&quot; in OvmfXen by default, and S3SaveStateDxe believed it&apos;s alright to skip S3BootScript. However, in BdsPlatform.c/PlatformBootManagerBeforeConsole(), it used QemuFwCfgS3Enabled() to determine whether SaveS3BootScript() should be invoked or not. Since InitializeXenPlatform() didn&apos;t set PcdAcpiS3Enable as InitializePlatform() does, the inconsistency between PcdAcpiS3Enable and QemuFwCfgS3Enabled() caused the crash.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16990</commentid>
    <comment_count>1</comment_count>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-08-19 03:18:37 +0000</bug_when>
    <thetext>The command generated by libvirt:

/usr/bin/qemu-system-i386 -xen-domid 7 -no-shutdown \
 -chardev socket,id=libxl-cmd,path=/run/xen/qmp-libxl-7,server=on,wait=off \
 -mon chardev=libxl-cmd,mode=control \
 -chardev socket,id=libxenstat-cmd,path=/run/xen/qmp-libxenstat-7,server=on,wait=off \
 -mon chardev=libxenstat-cmd,mode=control \
 -nodefaults -no-user-config -name ovmf-test \
 -vnc 127.0.0.1:2 \
 -display none \
 -kernel /vm_images/test/linux \
 -initrd /vm_images/test/initrd \
 -append install=http://virt1/install/sles15sp3x86_64 \ 
 -serial pty \
 -device VGA,vgamem_mb=16 \
 -boot order=c \
 -usb -usbdevice tablet \
 -smp 4,maxcpus=4 \
 -device rtl8139,id=nic0,netdev=net0,mac=00:16:3e:ec:6c:47 \
 -netdev type=tap,id=net0,ifname=vif7.0-emu,script=no,downscript=no \
 -global isa-debugcon.iobase=0x402 -debugcon file:/tmp/ovmf-test.log \
 -machine xenfv \
 -m 4080 \
 -drive file=/vm_images/test/disk.qcow2,if=ide,index=0,media=disk,format=qcow2,cache=unsafe</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16991</commentid>
    <comment_count>2</comment_count>
      <attachid>805</attachid>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-08-19 03:19:32 +0000</bug_when>
    <thetext>Created attachment 805
XML for libvirt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17046</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 22:00:08 +0000</bug_when>
    <thetext>Gary, can you provide the patch to fix it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17060</commentid>
    <comment_count>4</comment_count>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-08-24 23:02:25 +0000</bug_when>
    <thetext>The patches are posted to the mailing list:

[PATCH v3 0/4] Fix OvmfXen boot failure due to s3 support state
https://edk2.groups.io/g/devel/message/79707
[PATCH v3 1/4] OvmfPkg/OvmfXen: set PcdAcpiS3Enable at initialization 
https://edk2.groups.io/g/devel/message/79708
[PATCH v3 2/4] OvmfPkg/LockBoxLib: use PcdAcpiS3Enable to detect S3 support
https://edk2.groups.io/g/devel/message/79709
[PATCH v3 3/4] OvmfPkg/PlatformBootManagerLib: use PcdAcpiS3Enable to detect S3 support
https://edk2.groups.io/g/devel/message/79709
[PATCH v3 4/4] OvmfPkg/SmmControl2Dxe: use PcdAcpiS3Enable to detect S3 support
https://edk2.groups.io/g/devel/message/79711</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17061</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 23:03:52 +0000</bug_when>
    <thetext>Gary has sent the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17268</commentid>
    <comment_count>6</comment_count>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-09-13 23:06:01 +0000</bug_when>
    <thetext>The fixes have been merged as cb0d24637dfd..5b5f10d746500.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>804</attachid>
            <date>2021-08-19 03:18:12 +0000</date>
            <delta_ts>2021-08-19 03:18:12 +0000</delta_ts>
            <desc>error log</desc>
            <filename>ovmf-debug-saves3bootscript.log</filename>
            <type>text/x-log</type>
            <size>68129</size>
            <attacher name="Gary Lin">gary.lin</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>805</attachid>
            <date>2021-08-19 03:19:32 +0000</date>
            <delta_ts>2021-08-19 03:19:32 +0000</delta_ts>
            <desc>XML for libvirt</desc>
            <filename>ovmf-install.xml</filename>
            <type>text/xml</type>
            <size>2446</size>
            <attacher name="Gary Lin">gary.lin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3477</bug_id>
          
          <creation_ts>2021-07-05 02:07:42 +0000</creation_ts>
          <short_desc>How to install 123.hp.com/setup 6978 printer drivers ?</short_desc>
          <delta_ts>2021-07-24 01:20:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="jimmyandrew">andrewjimmy813</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>smb6620294</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16532</commentid>
    <comment_count>0</comment_count>
    <who name="jimmyandrew">andrewjimmy813</who>
    <bug_when>2021-07-05 02:07:42 +0000</bug_when>
    <thetext>Drivers are required to use an HP printer 6978. 123.hp.com/setup 6978 is where you can get the setup file. You don&apos;t need to be concerned about malware or viruses since you&apos;re getting the files from the HP website. It&apos;s a secure site. When you navigate to the URL, you&apos;ll see a download button. You may download the setup file based on your operating system. You may open the setup file by clicking on it. A warning notice will appear on the screen. Yes, should be selected. The drivers will be downloaded and installed on your computer. 
https://l-123hp.com/officejet-pro-models/ojpro6978</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16542</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-05 05:13:49 +0000</bug_when>
    <thetext>this is not related to edk2 project. close it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16693</commentid>
    <comment_count>2</comment_count>
    <who name="centimeter">smb6620294</who>
    <bug_when>2021-07-24 01:20:17 +0000</bug_when>
    <thetext>Quarters, Rods, Ropes, shaku, smoots, spans ,Twips And Yards.
https://www.free-online-converters.com/blog/what-website-would-i-use-to-make-8-bit-music/ 
https://www.free-online-converters.com 
https://eshoppii.eu 
https://free-online-converters.blogspot.com 
https://ar.free-online-converters.com 
https://cs.free-online-converters.com</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3985</bug_id>
          
          <creation_ts>2022-07-11 03:53:31 +0000</creation_ts>
          <short_desc>Slowness issue when using &quot;edit&quot; command in Shell</short_desc>
          <delta_ts>2022-07-27 09:54:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>prarthanasv</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>miki.demeter</cc>
    
    <cc>prarthanasv</cc>
    
    <cc>vasudevans</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19225</commentid>
    <comment_count>0</comment_count>
    <who name="">prarthanasv</who>
    <bug_when>2022-07-11 03:53:31 +0000</bug_when>
    <thetext>Issue: 
When trying to edit a file in Shell in DEBUG MODE, it takes 6.5 minutes to open the file of size 6.5MB.

Root Cause:
In FileBuffer.c file, 
FileBufferRead() -&gt; FileBufferCreateLine() -&gt; InsertTailList()
InsertTailList will be called for every line in the file, which is having ASSERT statements that is causing the delay.
When the ASSERT statement in InsertTailList function is commented out, the slowness issue in opening the file is fixed.
Please check if there is any possibility on resolving this slowness issue.

Note: The slowness issue is not present in release mode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19232</commentid>
    <comment_count>1</comment_count>
    <who name="Miki Demeter">miki.demeter</who>
    <bug_when>2022-07-12 14:41:44 +0000</bug_when>
    <thetext>Spoke with John M and we agree this is not a Security Issue. Moving to regular bug for triage</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19296</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-19 22:13:59 +0000</bug_when>
    <thetext>There is the known behavior in Link list in DEBUG mode. You can set gEfiMdePkgTokenSpaceGuid.PcdMaximumLinkedListLength to zero to disable the check.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19336</commentid>
    <comment_count>3</comment_count>
    <who name="">prarthanasv</who>
    <bug_when>2022-07-27 09:54:46 +0000</bug_when>
    <thetext>Thanks @gaoliming for the information. Proceeding to resolve this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3355</bug_id>
          
          <creation_ts>2021-04-26 15:16:03 +0000</creation_ts>
          <short_desc>NetworkPkg/IScsiDxe: add sha256 support to CHAP</short_desc>
          <delta_ts>2021-06-30 16:32:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>3356</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>maciej.rabeda</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15775</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-26 15:16:03 +0000</bug_when>
    <thetext>The CHAP auth in IScsiDxe only supports MD5. MD5 is deprecated.

RFC 7143 requires MD5, and several vendors have confirmed that their iscsi servers (&quot;targets&quot;) support MD5 only. Therefore, removing MD5 statically is not good for compatibility.

However, by adding support for cryptographically stronger hash algorithms, such as sha256, and assigning higher priority to sha256 than md5, the target can opt for sha256. This allows for better security than just md5 and for good compatibility at the same time.

Original discussion:

[edk2-rfc] removing CHAP-MD5 from IScsiDxe
https://edk2.groups.io/g/rfc/message/571</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15776</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-26 15:16:47 +0000</bug_when>
    <thetext>The discussion on edk2-rfc has reached a design that seems acceptable to all stakeholders. I&apos;m working on patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16296</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-08 08:26:18 +0000</bug_when>
    <thetext>Test matrix template:

Tests with no authentication  Results
----------------------------  -------------------------
                              login result  test result
                              ------------  -----------
                              ?             ?


Tests with mutual authentication    Results
----------------------------------  --------------------------------------
                     secret of ...
                     matches        CHAP_A
target    initiator  -------------  -------------------
supports  supports                  offered   picked     login      test
SHA256    MD5        target  init.  by init.  by target  result     result
--------  ---------  ------  -----  --------  ---------  ---------  ------
no        no         n/a     n/a    ?         ?          ?          ?
no        yes        no      n/a    ?         ?          ?          ?
no        yes        yes     no     ?         ?          ?          ?
no        yes        yes     yes    ?         ?          ?          ?
yes       no         no      n/a    ?         ?          ?          ?
yes       no         yes     no     ?         ?          ?          ?
yes       no         yes     yes    ?         ?          ?          ?
yes       yes        no      n/a    ?         ?          ?          ?
yes       yes        yes     no     ?         ?          ?          ?
yes       yes        yes     yes    ?         ?          ?          ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16299</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-08 09:08:08 +0000</bug_when>
    <thetext>Posted:

* [edk2-devel] [PATCH 0/6] NetworkPkg/IScsiDxe: support SHA256 in CHAP

Message-Id: &lt;20210608130652.2434-1-lersek@redhat.com&gt;
https://listman.redhat.com/archives/edk2-devel-archive/2021-June/msg00331.html
https://edk2.groups.io/g/devel/message/76213</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16486</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-29 12:34:41 +0000</bug_when>
    <thetext>Posted:

* [edk2-devel] [PATCH v2 0/6] NetworkPkg/IScsiDxe: support SHA256 in CHAP

Message-Id: &lt;20210629163337.14120-1-lersek@redhat.com&gt;
https://listman.redhat.com/archives/edk2-devel-archive/2021-June/msg01402.html
https://edk2.groups.io/g/devel/message/77282</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16503</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-30 16:32:19 +0000</bug_when>
    <thetext>Merged as commit range 3cde0d553d93..bb33c27fbed6, via &lt;https://github.com/tianocore/edk2/pull/1780&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3843</bug_id>
          
          <creation_ts>2022-02-22 04:12:18 +0000</creation_ts>
          <short_desc>Add definitions in SmBios.h to support SMBIOS Spec v3.5.0</short_desc>
          <delta_ts>2022-08-23 06:19:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>sainadhn</reporter>
          <assigned_to>sainadhn</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sainadhn</cc>
    
    <cc>sundaresans</cc>
    
    <cc>vasudevans</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18423</commentid>
    <comment_count>0</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-02-22 04:12:18 +0000</bug_when>
    <thetext>As per SMBIOS spec v3.5.0 new structure type for Firmware Inventory Information (Type 45) is added. Please include definitions to support SMBIOS Type 45 record and other new updates from Spec v3.5.0 to SmBios.h.

https://www.dmtf.org/standards/smbios</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18431</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-22 21:39:18 +0000</bug_when>
    <thetext>sainadhn@ami.com : will you contribute the patch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18724</commentid>
    <comment_count>2</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-03-28 00:47:02 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; sainadhn@ami.com : will you contribute the patch?

gaoliming@byosoft.com.cn : Yes, but to contribute the patch first the changes from Bug 3607(https://bugzilla.tianocore.org/show_bug.cgi?id=3607) need to be merged since there is one more new member defined in smbios type 9 after variable data. So please let us know whether we can submit changes for both bugs together for review or seperately.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18856</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-19 21:53:43 +0000</bug_when>
    <thetext>sainadhn@ami.com: yes, you can send the patch togehter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18910</commentid>
    <comment_count>4</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-04-29 09:47:38 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #3)
&gt; sainadhn@ami.com: yes, you can send the patch togehter.

gaoliming@byosoft.com.cn : We can see Smbios 3.5.0 changes are already included through Bug 3896(https://bugzilla.tianocore.org/show_bug.cgi?id=3896) last week. 

I have sent the patch to devel@edk2.groups.io with some improvements to 3.5.0 changes and changes for Bug 3607(https://bugzilla.tianocore.org/show_bug.cgi?id=3607) please help to review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19165</commentid>
    <comment_count>5</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-06-30 03:33:34 +0000</bug_when>
    <thetext>Hi gaoliming@byosoft.com.cn :

I have sent the patch to devel@edk2.groups.io with some improvements to 3.5.0 changes. Can you please help to confirm whether it&apos;s received on your end.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19355</commentid>
    <comment_count>6</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-08-03 01:11:59 +0000</bug_when>
    <thetext>Liming: I have resent the Patch and it&apos;s available in edk2 mail list (https://edk2.groups.io/g/devel/message/91944), Please help to review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19423</commentid>
    <comment_count>7</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-08-23 06:19:29 +0000</bug_when>
    <thetext>Changes merged to edk2 and will be part of stable tag 202208.

CommitId: 9102518d297546d349e9dcbaf9a87706ec8529e0 (https://github.com/tianocore/edk2/commit/9102518d297546d349e9dcbaf9a87706ec8529e0)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3230</bug_id>
          
          <creation_ts>2021-02-22 10:10:47 +0000</creation_ts>
          <short_desc>Add support for use of FF-A calls</short_desc>
          <delta_ts>2021-02-23 21:42:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Sughosh Ganu">sughosh.ganu</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15090</commentid>
    <comment_count>0</comment_count>
    <who name="Sughosh Ganu">sughosh.ganu</who>
    <bug_when>2021-02-22 10:10:47 +0000</bug_when>
    <thetext>Add support for using Firmware Framework(FF-A) as the transport layer for communication between StandaloneMm, running as a Secure Partition(SP), and the Secure Partition Manager Core(SPMC). Add initial support for basic communication between the SP and SPMC.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15103</commentid>
    <comment_count>1</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-02-23 11:07:14 +0000</bug_when>
    <thetext>This patch series was submitted to edk2 mailing list and was reviewed at https://edk2.groups.io/g/devel/message/71813</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15104</commentid>
    <comment_count>2</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-02-23 11:15:30 +0000</bug_when>
    <thetext>The changes have been merged in edk2 master at: a2b5ea38a6fb..68e5ecc4d208

68e5ecc4d208 StandaloneMmPkg: Allow sending FFA Direct Request message to StandaloneMm
1262c0267764 MdeModulePkg/VariableStandaloneMm: Set PcdFlashNvStorageVariableBase to Pcd
9da5ee116a28 ArmPkg: Allow FF-A calls to set memory region&apos;s attributes
0e43e02b9bd8 ArmPkg: Allow FF-A calls to get memory region&apos;s attributes
67f3f8b661d6 ArmPkg: Use FF-A header file in Standalone MM Arm MMU library
388dfe02fb9a StandaloneMmPkg: Add option to use FF-A calls for communication with SPM
cb4267d4c2fb StandaloneMmPkg: Add option to use FF-A calls for getting SPM version
799c07ca280f ArmPkg: Add macros for SPM version with FF-A support enabled
053cd5980cdb StandaloneMmPkg: Use macros for SPM version check
2385e1deca5d ArmPkg: Add macros for SPM version
ee283e33953a ArmPkg: Introduce support for PcdFfaEnable
82abb8f98170 StandaloneMmPkg: Use FF-A header file in Standalone MM Core entry point
af0c597e9833 ArmPkg/ArmSvcLib: Return x4-x7 in output parameters
37ef4bb1a700 ArmPkg/IndustryStandard: Add barebones FF-A header</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15117</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-23 21:42:35 +0000</bug_when>
    <thetext>The patch set has been merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3718</bug_id>
          
          <creation_ts>2021-11-03 23:27:44 +0000</creation_ts>
          <short_desc>BaseTools/DevicePath: DevicePatch should support PCD value Lengths longer than now</short_desc>
          <delta_ts>2022-01-17 00:29:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="xiaolu.jiang">xiaolu.jiang</reporter>
          <assigned_to name="xiaolu.jiang">xiaolu.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17685</commentid>
    <comment_count>0</comment_count>
      <attachid>868</attachid>
    <who name="xiaolu.jiang">xiaolu.jiang</who>
    <bug_when>2021-11-03 23:27:44 +0000</bug_when>
    <thetext>Created attachment 868
Fail log

Current PCD value only supports 1024 lengths. So when add more then 14 guid value for PCD will occur the error。 The tools can&apos;t identify the right value. We need increase the length to support the more value of PCD.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17763</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-15 21:26:08 +0000</bug_when>
    <thetext>Xiaolu is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18168</commentid>
    <comment_count>2</comment_count>
    <who name="xiaolu.jiang">xiaolu.jiang</who>
    <bug_when>2022-01-17 00:29:33 +0000</bug_when>
    <thetext>The patch is check-in.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>868</attachid>
            <date>2021-11-03 23:27:44 +0000</date>
            <delta_ts>2021-11-03 23:27:44 +0000</delta_ts>
            <desc>Fail log</desc>
            <filename>Capture.PNG</filename>
            <type>image/png</type>
            <size>22597</size>
            <attacher name="xiaolu.jiang">xiaolu.jiang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3113</bug_id>
          
          <creation_ts>2020-12-09 22:41:52 +0000</creation_ts>
          <short_desc>Exception happened when length of usb disk path is larger than 260</short_desc>
          <delta_ts>2021-01-17 20:17:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wenyi, Xie">xiewenyi0201</reporter>
          <assigned_to name="Wenyi, Xie">xiewenyi0201</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>FatPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14543</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2020-12-09 22:41:52 +0000</bug_when>
    <thetext>According to FAT specification, the length of file path should not larger than 260. When the length exceed 260, function FatLocateOFile will return EFI_INVALID_PARAMETER.

//
// Per FAT Spec the file name should meet the following criteria:
//   C1. Length (FileLongName) &lt;= 255
//   C2. Length (X:FileFullPath&lt;NUL&gt;) &lt;= 260
// Here we check C2 first.
//
if (2 + OFile-&gt;FullPathLen + 1 + FileNameLen + 1 &gt; EFI_PATH_STRING_LENGTH) {
  //
  // Full path length can not surpass 256
  //
  return EFI_INVALID_PARAMETER;
}

So in the top-level function call LibUpdateFileExplorer，the FileHandle is passed to LibGetFileHandleFromMenu but not assigned, then this FileHandle is passed to LibFindFiles and causes exception when used.

FileHandle-&gt;SetPosition (FileHandle, 0);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14731</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-05 22:06:29 +0000</bug_when>
    <thetext>Wenyi: can you provide the patch to fix it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14792</commentid>
    <comment_count>2</comment_count>
      <attachid>636</attachid>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-01-13 01:37:17 +0000</bug_when>
    <thetext>Created attachment 636
v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14793</commentid>
    <comment_count>3</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-01-13 01:38:37 +0000</bug_when>
    <thetext>IN_PROGRESS since code has been written.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14818</commentid>
    <comment_count>4</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-01-17 20:17:23 +0000</bug_when>
    <thetext>Pushed at 014b9850f2a33ae402b87c46268f4d98395d5d59</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>636</attachid>
            <date>2021-01-13 01:37:17 +0000</date>
            <delta_ts>2021-01-13 01:37:17 +0000</delta_ts>
            <desc>v1</desc>
            <filename>0001-MdeModulePkg-FileExplorerLib-Add-return-value-check.patch</filename>
            <type>text/plain</type>
            <size>2301</size>
            <attacher name="Wenyi, Xie">xiewenyi0201</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3114</bug_id>
          
          <creation_ts>2020-12-10 18:53:47 +0000</creation_ts>
          <short_desc>Prevent  lost characters and error status across config changes in UARTs managed by PciSioSerialDxe</short_desc>
          <delta_ts>2020-12-18 20:31:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14553</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-10 18:53:47 +0000</bug_when>
    <thetext>The PciSioSerialDxe driver produces the Serial I/O Protocol for
a 16550 UART.  There are 3 APIs in the Serial I/O Protocol that
make configuration changes to the UART itself.  These are 
Reset(), SetAttributes(), and SetControl().

If there are characters in the Tx FIFO when a configuration 
change is requested, the configuration change can cause
characters to be lost and can cause the UART to go into
a bad state and reports error status.

A proposed solution is to flush the Tx FIFO, the Transmit
Holding Register and the Transmit Shift registers before
applying a configuration change.  A reasonable timeout should
be used to wait for the flush operation to guarantee that
a system does not hang waiting for characters to be flushed.
If they can not be flushed, then completing the configuration
change will likely put the UART into a usable state.

This approach is already being used in the BaseSerialPortLib16550
when a serial port is initialized.  It waits until the TEMT and
THRE bits are both set.

https://github.com/tianocore/edk2/blob/10dc8c561c687c9e73e29743d04d828cca56a288/MdeModulePkg/Library/BaseSerialPortLib16550/BaseSerialPortLib16550.c#L536

A similar algorithm was present in an earlier version of the 
PciSioSerialDxe module, but it did not include the timeout.
The flush operation without a timeout was removed due to
a system hang on some PCI serial devices.

https://github.com/tianocore/edk2/commit/9c0dc0b01a79666c3ba8aa0c69ad92131aada113

The addition of the timeout provide the greatest compatibility
and resolve the lost characters issues and prevent the UART 
from reporting error status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14554</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-10 18:54:01 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14619</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-18 20:07:29 +0000</bug_when>
    <thetext>Patch review

https://edk2.groups.io/g/devel/message/68671</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14620</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-18 20:31:11 +0000</bug_when>
    <thetext>Pushed as

https://github.com/tianocore/edk2/commit/6932f4bfe552c1704c5715430de6045c78a5b62f

PR: https://github.com/tianocore/edk2/pull/1247</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3602</bug_id>
          
          <creation_ts>2021-09-02 13:36:26 +0000</creation_ts>
          <short_desc>AuthVariableServicesBBTestConformance.c return code checks</short_desc>
          <delta_ts>2022-01-13 09:15:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Stuart Yoder">stuart.yoder</reporter>
          <assigned_to name="Edhay">edhaya.chandran</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>takahiro.akashi</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17152</commentid>
    <comment_count>0</comment_count>
    <who name="Stuart Yoder">stuart.yoder</who>
    <bug_when>2021-09-02 13:36:26 +0000</bug_when>
    <thetext>This was found by Takahiro Akashi at Linaro who is debugging SCT on u-boot.

He reported: I have looked at failures around AuthVariableDERConfTest()
in AuthVariableServicesBBTestConformance.c.
In the assertions at line 254, 279 and 304, you determine
the test results by checking whether a tested runtime service
function returns EFI_UNSUPPORTED or not.
Is this what you intended to test?

In all failure cases, such functions actually return
EFI_INVALID_PARAMETER.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17891</commentid>
    <comment_count>1</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-12-02 01:08:41 +0000</bug_when>
    <thetext>The assertion mentioned by the author at line 254, 279 and 304. Checks for the below case:

UEFI Spec 2.9 page 245

&quot;EFI_VARIABLE_AUTHENTICATED_WRITE_ACCESS is deprecated and should not be used. Platforms should return EFI_UNSUPPORTED if a caller to SetVariable() specifies this attribute.&quot;


In all the above assertion tests, the attr passed to SetVariable is appended with EFI_VARIABLE_AUTHENTICATED_WRITE_ACCESS

 Attr |= EFI_VARIABLE_AUTHENTICATED_WRITE_ACCESS;

So the check for SetVariable() returning EFI_UNSUPPORTED is correct.

https://github.com/tianocore/edk2-test/blob/dc6efa23c099a04702854d36e518939b50aeea7f/uefi-sct/SctPkg/TestCase/UEFI/EFI/RuntimeServices/VariableServices/BlackBoxTest/AuthVariableServicesBBTestConformance.c#L231</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17903</commentid>
    <comment_count>2</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-12-02 09:49:41 +0000</bug_when>
    <thetext>Is there a reference in SCT spec?
Can we add a comment in code describing the intent of test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18120</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-01-13 02:36:25 +0000</bug_when>
    <thetext>Added a clarification comments as per the checkin below:
https://github.com/tianocore/edk2-test/commit/27aca88e89999130e87d59f0137ee777839a1297</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18129</commentid>
    <comment_count>4</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-01-13 09:15:47 +0000</bug_when>
    <thetext>Clarification added in code regarding the intent of the test.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3493</bug_id>
          
          <creation_ts>2021-07-15 08:11:30 +0000</creation_ts>
          <short_desc>&quot;PCI Express Gen 4&quot; SlotID display information support is not added in ShellPkg</short_desc>
          <delta_ts>2022-08-02 12:58:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>prarthanasv</reporter>
          <assigned_to>prarthanasv</assigned_to>
          <cc>arunk</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>prarthanasv</cc>
    
    <cc>vasudevans</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16643</commentid>
    <comment_count>0</comment_count>
    <who name="">prarthanasv</who>
    <bug_when>2021-07-15 08:11:30 +0000</bug_when>
    <thetext>DisplaySystemSlotId() is checking only up-to PCI Express Gen 3 x16( Byte Value is B6). So, if system has slot type of &quot;PCI Express Gen 4&quot;( Byte Value is B8), then Shell is displaying as &quot;Undefined SlotID&quot; for Smbioview type-9 field.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18612</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-15 21:56:58 +0000</bug_when>
    <thetext>prarthanasv@amiindia.co.in: Byte Value is B8 is in new SMBIOS spec?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19236</commentid>
    <comment_count>2</comment_count>
    <who name="">prarthanasv</who>
    <bug_when>2022-07-13 03:35:51 +0000</bug_when>
    <thetext>Yes, B8 is updated in SMBIOS_3.4.0 Spec for PCI Express Gen 4.
C4 is updated for PCI Express Gen 6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19295</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-19 22:09:24 +0000</bug_when>
    <thetext>prarthanasv@amiindia.co.in: can you contribute the patch for this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19350</commentid>
    <comment_count>4</comment_count>
    <who name="">prarthanasv</who>
    <bug_when>2022-08-02 12:58:00 +0000</bug_when>
    <thetext>These changes are already available as part of EDK2-stable-202205 tag. Resolving this issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3874</bug_id>
          
          <creation_ts>2022-03-18 14:57:51 +0000</creation_ts>
          <short_desc>Unground expectations in SimpleTextInEx-&gt;ReadKeyStrokeEx Test</short_desc>
          <delta_ts>2022-09-01 17:19:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Felix">felixp</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18649</commentid>
    <comment_count>0</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2022-03-18 14:57:51 +0000</bug_when>
    <thetext>When SimpleTextInEx-&gt;ReadKeyStrokeEx Test verifies support for partial key strokes it assumes that when SimpleTextInEx-&gt;ReadKeyStrokeEx returns EFI_NOT_READY,
both Key.Key.ScanCode and Key.Key.UnicodeChar must be set to zero by the protocol function. Refer to:
https://github.com/tianocore/edk2-test/blob/d919c4a5d9fe2681de4d11a0bbfb07373fe6f9c7/uefi-sct/SctPkg/TestCase/UEFI/IHV/Protocol/SimpleTextInputEx/BlackBoxTest/SimpleTextInputExBBTestFunction.c#L1258

The assumption does not seem to be backed up by the UEFI specification.
EFI_SIMPLE_TEXT_INPUT_EX_PROTOCOL.ReadKeyStrokeEx() description mentions that
incomplete keystrokes &quot;are expressed as a part of KeyState when there is no Key data&quot;

&quot;No Key data&quot; does not necessarily mean that Key data fields are set to zero.

The EFI_NOT_READY status code is described in the specification as follows:
&quot;There was no keystroke data available. Current KeyData.KeyState values are exposed.&quot;

It explicitly mentions KeyData.KeyState, but does not say anything about KeyData.Key.

So EFI_SIMPLE_TEXT_INPUT_EX_PROTOCOL.ReadKeyStrokeEx() description does not explicitly says that Key.Key.ScanCode and Key.Key.UnicodeChar must be zero.

Lucking a specific guidance, a generic guidance from page 19 of UEFI 2.9 should be followed:
&quot;Unless otherwise stated, a caller should not make any assumptions regarding the state of pointer parameters if the function returns with an error.&quot;

The quote above explicitly forbids assumptions regarding the state of the output parameters on error, and that&apos;s exactly what current test implementation is doing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18776</commentid>
    <comment_count>1</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-04-07 10:16:15 +0000</bug_when>
    <thetext>Hi Felix,

   Thank you for reporting this bug.
Could you please submit a solution patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19466</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-09-01 17:19:42 +0000</bug_when>
    <thetext>KeyData.KeyState describes the modifier keys (shift, meta, alt). If only one or multiple of these keys are pressed EFI_NOT_READY is the correct status.

The specification explicitly requires: &quot;UEFI drivers which implement the EFI_SIMPLE_TEXT_INPUT_EX protocol are required to return KeyData.Key and
KeyData.KeyState values.&quot; It does not foresee invalid data in these fields.

Non-zero Key.Key.ScanCode or Key.Key.UnicodeChar would mean that a non-modifier key has been pressed. EFI_NOT_READY may only be returned if &quot;There was no keystroke data available.&quot; So it can not be returned in this case.

I cannot see any deficiency in the test. Please, fix your driver.

Best regards

Heinrich</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3142</bug_id>
          
          <creation_ts>2020-12-28 14:52:27 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: typo ExtendedVeirification</short_desc>
          <delta_ts>2021-01-23 01:24:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14672</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-28 14:52:27 +0000</bug_when>
    <thetext>The parameter name ExtendedVerification has repeatedly been misspelled.

Concerned files are:

 .../ProtocolHandlerBBTestFunction_3.c         |  8 ++---
 .../EfiCompliantBBTestPlatform_uefi.c         |  2 +-
 .../AcpiTableProtocolBBTestFunction.c         |  2 +-
 .../BlackBoxTest/BlockIo2BBTestFunction.c     |  3 +-
 .../ComponentName2BBTestFunction.c            |  6 ++--
 .../DevicePathFromTextBBTestCoverage.c        |  5 +--
 .../DevicePathUtilitiesBBTestConformance.c    | 15 +++++---
 .../DriverDiagnostics2BBTestFunction.c        |  4 +--
 .../EraseBlockBBTestConformance.c             |  8 ++---
 .../GraphicsOutputBBTestFunction.c            |  8 +++--
 .../BlackBoxTest/HIIFontBBTestConformance.c   |  3 +-
 .../BlackBoxTest/HIIImageBBTestConformance.c  |  4 +--
 .../BlackBoxTest/HIIStringBBTestConformance.c |  3 +-
 .../IPsecConfigBBTestConformance.c            |  8 ++---
 .../BlackBoxTest/PciIoBBTestFunction_1.c      |  5 +--
 .../BlackBoxTest/PxeBaseCodeBBTestFunction.c  |  2 +-
 .../SimpleFileSystemBBTestFunction.c          |  2 +-
 .../SimpleFileSystemExBBTestFunction_OpenEx.c | 10 +++---
 .../SimpleNetworkBBTestConformance.c          |  2 +-
 .../SimpleTextInBBTestConformance.c           |  6 ++--
 .../BlackBoxTest/SimpleTextInBBTestFunction.c |  2 +-
 .../BlackBoxTest/SimpleTextInBBTestStress.c   |  2 +-
 .../SimpleTextOutBBTestFunction_efi.c         | 36 +++++++++----------
 .../SimpleTextOutBBTestFunction_uefi.c        | 20 +++++------
 .../UFSDeviceConfigBBTestConformance.c        |  6 ++--
 .../VariableServicesBBTestConformance.c       |  6 ++--
 .../BlackBoxTest/BlockIo2BBTestFunction.c     |  3 +-
 .../ComponentName2BBTestFunction.c            |  6 ++--
 .../DriverDiagnostics2BBTestFunction.c        |  4 +--
 .../GraphicsOutputBBTestFunction.c            |  8 +++--
 .../BlackBoxTest/PxeBaseCodeBBTestFunction.c  |  2 +-
 .../SimpleFileSystemBBTestFunction.c          |  2 +-
 .../SimpleFileSystemExBBTestFunction_OpenEx.c | 10 +++---
 .../SimpleNetworkBBTestConformance.c          |  2 +-
 .../SimpleTextInBBTestConformance.c           |  6 ++--
 .../BlackBoxTest/SimpleTextInBBTestFunction.c |  2 +-
 .../BlackBoxTest/SimpleTextInBBTestStress.c   |  2 +-
 .../SimpleTextOutBBTestFunction_uefi.c        | 20 +++++------</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14673</commentid>
    <comment_count>1</comment_count>
      <attachid>628</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-28 14:54:28 +0000</bug_when>
    <thetext>Created attachment 628
[PATCH edk2-test 1/1] uefi-sct/SctPkg: typo ExtendedVeirification</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14674</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-28 15:00:09 +0000</bug_when>
    <thetext>A patch is available as appendix and on the development list as

https://edk2.groups.io/g/devel/message/69479</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14675</commentid>
    <comment_count>3</comment_count>
      <attachid>629</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-28 15:09:33 +0000</bug_when>
    <thetext>Created attachment 629
[PATCH edk2-test v2 1/1] uefi-sct/SctPkg: typo ExtendedVeirification

In v1 unrelated changes slipped in.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14676</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-28 15:21:04 +0000</bug_when>
    <thetext>Here is the link to the v2 patch

https://edk2.groups.io/g/devel/message/69480</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14904</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-23 01:24:08 +0000</bug_when>
    <thetext>Correction merged as bb782fb435940f9d2f0a0f7d09348466007a1c35.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>628</attachid>
            <date>2020-12-28 14:54:28 +0000</date>
            <delta_ts>2020-12-28 14:54:28 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: typo ExtendedVeirification</desc>
            <filename>0001-uefi-sct-SctPkg-typo-ExtendedVeirification.patch</filename>
            <type>text/plain</type>
            <size>72689</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>629</attachid>
            <date>2020-12-28 15:09:33 +0000</date>
            <delta_ts>2020-12-28 15:09:33 +0000</delta_ts>
            <desc>[PATCH edk2-test v2 1/1] uefi-sct/SctPkg: typo ExtendedVeirification</desc>
            <filename>0001-uefi-sct-SctPkg-typo-ExtendedVeirification.patch</filename>
            <type>text/plain</type>
            <size>32113</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3623</bug_id>
          
          <creation_ts>2021-09-13 08:17:01 +0000</creation_ts>
          <short_desc>From expert’s help your cash app negative balance</short_desc>
          <delta_ts>2021-09-13 21:30:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc>https://www.cash-app-support.com/blog/how-do-i-get-my-money-back-from-cash-app/</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="john smith">js6523335</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          <cf_documents>EDK II UNI Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17249</commentid>
    <comment_count>0</comment_count>
      <attachid>827</attachid>
    <who name="john smith">js6523335</who>
    <bug_when>2021-09-13 08:17:01 +0000</bug_when>
    <thetext>Created attachment 827
Is your account having a cash app negative balance? Don’t know to fix this glitch? If yes then you just need to rely on the cash app support team. Users can talk to the experts of the cash app for get

Is your account having a cash app negative balance? Don’t know to fix this glitch? If yes then you just need to rely on the cash app support team. Users can talk to the experts of the cash app for getting instant tech support. Dial the helpline number to talk to the techies for reliable assistance
https://www.contact-customerservice.co/blog/how-do-you-fix-the-negative-balance-on-the-cash-app/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17260</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-13 21:30:58 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>827</attachid>
            <date>2021-09-13 08:17:01 +0000</date>
            <delta_ts>2021-09-13 08:17:01 +0000</delta_ts>
            <desc>Is your account having a cash app negative balance? Don’t know to fix this glitch? If yes then you just need to rely on the cash app support team. Users can talk to the experts of the cash app for get</desc>
            <filename>5e0bd75e855cc27b562af232 (1).jpg</filename>
            <type>image/jpeg</type>
            <size>18388</size>
            <attacher name="john smith">js6523335</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3020</bug_id>
          
          <creation_ts>2020-10-26 03:05:28 +0000</creation_ts>
          <short_desc>Building SCT with VS2019 fails</short_desc>
          <delta_ts>2021-03-04 01:05:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaoliming</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14082</commentid>
    <comment_count>0</comment_count>
      <attachid>585</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-10-26 03:05:28 +0000</bug_when>
    <thetext>Created attachment 585
error log

I tried to build the UEFI-SCT for X64 on Windows 10.

I followed the steps described in:

https://github.com/xypron/edk2-build/blob/VS2019/README.rst

The following error occurs:

```
Building ... c:\users\user\workspace\edk2-build\edk2\SctPkg\TestCase\UEFI\EFI\Protocol\SerialIo\BlackBoxTest\SerialIoBBTest.inf [X64]
LINK : fatal error LNK1104: cannot open file &apos;&apos;
```</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14083</commentid>
    <comment_count>1</comment_count>
      <attachid>586</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-10-26 03:11:10 +0000</bug_when>
    <thetext>Created attachment 586
Build instruction leading to error

Append the build instruction leading to error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14105</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-10-27 15:32:53 +0000</bug_when>
    <thetext>See also bug 2126 which blocks building x86_64 on Linux.

https://bugzilla.tianocore.org/show_bug.cgi?id=2126</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14106</commentid>
    <comment_count>3</comment_count>
      <attachid>590</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-10-27 15:41:09 +0000</bug_when>
    <thetext>Created attachment 590
error.log</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14109</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:38:57 +0000</bug_when>
    <thetext>Sct Maintainers &amp; Reviewers: can you help review this build issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15213</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-04 01:05:39 +0000</bug_when>
    <thetext>The problem seems to be with file paths getting too long:

This command fails on Windows 10:

c:\Users\user1\workspace\edk2-build\edk2\Build\UefiSct\RELEASE_VS2019\X64\SctPkg\TestCase\UEFI\EFI\BootServices\ProtocolHandlerServices\BlackBoxTest\Dependency\PlatformOverrideDriver1\PlatformOverrideDriver1&gt;copy c:\temp\foo.lib c:\users\user1\workspace\edk2-build\edk2\Build\UefiSct\RELEASE_VS2019\X64\SctPkg\TestCase\UEFI\EFI\BootServices\ProtocolHandlerServices\BlackBoxTest\Dependency\PlatformOverrideDriver1\PlatformOverrideDriver1\OUTPUT\ProtocolHandlerServices_PlatformOverrideD.lib
Das System kann den angegebenen Pfad nicht finden.
        0 Datei(en) kopiert.

(File not found, 0 files copied)

This command succeeds:

c:\Users\user1\workspace\edk2-build\edk2\Build\UefiSct\RELEASE_VS2019\X64\SctPkg\TestCase\UEFI\EFI\BootServices\ProtocolHandlerServices\BlackBoxTest\Dependency\PlatformOverrideDriver1\PlatformOverrideDriver1&gt;copy c:\temp\foo.lib c:\users\user1\workspace\edk2-build\edk2\Build\UefiSct\RELEASE_VS2019\X64\SctPkg\TestCase\UEFI\EFI\BootServices\ProtocolHandlerServices\BlackBoxTest\Dependency\PlatformOverrideDriver1\PlatformOverrideDriver1\OUTPUT\ProtocolHandlerServices_PlatformOverride.lib
        1 Datei(en) kopiert.

(1 file copied)

For copy itself this can be fixed using a registry setting:

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem]
&quot;LongPathsEnabled&quot;=dword:00000001

But this does not help for nmake:

c:\Users\user1\workspace\edk2-build\edk2\Build\UefiSct\RELEASE_VS2019\X64\SctPkg\TestCase\UEFI\EFI\BootServices\ProtocolHandlerServices\BlackBoxTest\Dependency\PlatformOverrideDriver1\PlatformOverrideDriver1&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.28.29333\bin\Hostx86\x64\lib.exe&quot; /NOLOGO /LTCG /OUT:c:\users\user1\workspace\edk2-build\edk2\Build\UefiSct\RELEASE_VS2019\X64\SctPkg\TestCase\UEFI\EFI\BootServices\ProtocolHandlerServices\BlackBoxTest\Dependency\PlatformOverrideDriver1\PlatformOverrideDriver1\OUTPUT\ProtocolHandlerServices_PlatformOverrideDriver1.lib @c:\users\user1\workspace\edk2-build\edk2\Build\UefiSct\RELEASE_VS2019\X64\SctPkg\TestCase\UEFI\EFI\BootServices\ProtocolHandlerServices\BlackBoxTest\Dependency\PlatformOverrideDriver1\PlatformOverrideDriver1\OUTPUT\object_files.lst
LINK : fatal error LNK1104: cannot open file &apos;&apos;

The following succeeds:

c:\Users\user1\workspace\edk2-build\edk2\Build\UefiSct\RELEASE_VS2019\X64\SctPkg\TestCase\UEFI\EFI\BootServices\ProtocolHandlerServices\BlackBoxTest\Dependency\PlatformOverrideDriver1\PlatformOverrideDriver1&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.28.29333\bin\Hostx86\x64\lib.exe&quot; /NOLOGO /LTCG /OUT:c:\users\user1\workspace\edk2-build\edk2\Build\UefiSct\RELEASE_VS2019\X64\SctPkg\TestCase\UEFI\EFI\BootServices\ProtocolHandlerServices\BlackBoxTest\Dependency\PlatformOverrideDriver1\PlatformOverrideDriver1\OUTPUT\ProtocolHandlerServices.lib @c:\users\user1\workspace\edk2-build\edk2\Build\UefiSct\RELEASE_VS2019\X64\SctPkg\TestCase\UEFI\EFI\BootServices\ProtocolHandlerServices\BlackBoxTest\Dependency\PlatformOverrideDriver1\PlatformOverrideDriver1\OUTPUT\object_files.lst

We must ensure that paths will not exceed 260 characters.

Building inside c:\temp\ solves the &quot;LINK : fatal error LNK1104: cannot open file &apos;&apos;&quot; issue for me.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>585</attachid>
            <date>2020-10-26 03:05:28 +0000</date>
            <delta_ts>2020-10-27 15:41:09 +0000</delta_ts>
            <desc>error log</desc>
            <filename>error.log</filename>
            <type>application/octet-stream</type>
            <size>90133</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>586</attachid>
            <date>2020-10-26 03:11:10 +0000</date>
            <delta_ts>2020-10-26 03:11:10 +0000</delta_ts>
            <desc>Build instruction leading to error</desc>
            <filename>README.rst</filename>
            <type>application/octet-stream</type>
            <size>1465</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>590</attachid>
            <date>2020-10-27 15:41:09 +0000</date>
            <delta_ts>2020-10-27 15:41:09 +0000</delta_ts>
            <desc>error.log</desc>
            <filename>error.log</filename>
            <type>text/plain</type>
            <size>3190</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3516</bug_id>
          
          <creation_ts>2021-07-30 06:06:01 +0000</creation_ts>
          <short_desc>Add ACPI 6.4 header</short_desc>
          <delta_ts>2021-08-10 21:27:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chris Jones">christopher.jones</reporter>
          <assigned_to name="Chris Jones">christopher.jones</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16728</commentid>
    <comment_count>0</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-07-30 06:06:01 +0000</bug_when>
    <thetext>The latest revision of the ACPI specification was released January 2021 with a number of changes and additions to tables used by EDK2. Therefore to keep EDK2 up to date with the specification a new header file (Acpi64.h) should be added which contains all the relevant updates to ACPI 6.4.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16758</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 21:51:53 +0000</bug_when>
    <thetext>Chris has sent the patch for this new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16866</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-10 21:27:42 +0000</bug_when>
    <thetext>The patch has been merged at https://github.com/tianocore/edk2/pull/1887</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3896</bug_id>
          
          <creation_ts>2022-04-07 06:14:55 +0000</creation_ts>
          <short_desc>Update smbiosview type 9 with SMBIOS 3.5 fields</short_desc>
          <delta_ts>2022-05-03 00:29:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bo-ChangX Ke">bo-changx.ke</reporter>
          <assigned_to name="Bo-ChangX Ke">bo-changx.ke</assigned_to>
          <cc>bo-changx.ke</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18773</commentid>
    <comment_count>0</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-07 06:14:55 +0000</bug_when>
    <thetext>Update smbiosview type 9 with SMBIOS 3.5 fields</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18774</commentid>
    <comment_count>1</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-07 06:17:40 +0000</bug_when>
    <thetext>working on type 9 upgrade</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18795</commentid>
    <comment_count>2</comment_count>
      <attachid>972</attachid>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-08 12:28:15 +0000</bug_when>
    <thetext>Created attachment 972
update type 9 patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18800</commentid>
    <comment_count>3</comment_count>
      <attachid>975</attachid>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-11 02:19:52 +0000</bug_when>
    <thetext>Created attachment 975
update type 9 patch (1/2)

split the patch file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18801</commentid>
    <comment_count>4</comment_count>
      <attachid>976</attachid>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-11 02:21:20 +0000</bug_when>
    <thetext>Created attachment 976
update type 9 patch (2/2)

split the patch file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18808</commentid>
    <comment_count>5</comment_count>
      <attachid>977</attachid>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-12 23:18:01 +0000</bug_when>
    <thetext>Created attachment 977
update type 9 patch v2 (1/2)

update type 9 patch v2 (1/2)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18809</commentid>
    <comment_count>6</comment_count>
      <attachid>978</attachid>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-12 23:18:36 +0000</bug_when>
    <thetext>Created attachment 978
update type 9 patch v2 (2/2)

update type 9 patch v2 (2/2)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18916</commentid>
    <comment_count>7</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-05-02 23:33:49 +0000</bug_when>
    <thetext>code changes are merged

Commit ID:a85ae8d964c24d7078517e250b2b17a537cef89a
(https://github.com/tianocore/edk2/commit/a85ae8d964c24d7078517e250b2b17a537cef89a)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18919</commentid>
    <comment_count>8</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-05-02 23:37:46 +0000</bug_when>
    <thetext>close the issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18920</commentid>
    <comment_count>9</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-05-03 00:29:36 +0000</bug_when>
    <thetext>update URL and Commit ID:

Commit ID:9c738f128d32cb81d8779c593c44b084004b0b29

Commit ID:397a342ea950a619d85edca586ae995be22f69d0

https://github.com/tianocore/edk2/pull/2797/</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>972</attachid>
            <date>2022-04-08 12:28:15 +0000</date>
            <delta_ts>2022-04-11 02:23:09 +0000</delta_ts>
            <desc>update type 9 patch</desc>
            <filename>0001-ShellPkg-Update-smbiosview-type-9-with-SMBIOS-3.5-fi.patch</filename>
            <type>text/plain</type>
            <size>13990</size>
            <attacher name="Bo-ChangX Ke">bo-changx.ke</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>975</attachid>
            <date>2022-04-11 02:19:52 +0000</date>
            <delta_ts>2022-04-12 23:18:01 +0000</delta_ts>
            <desc>update type 9 patch (1/2)</desc>
            <filename>0001-MdePkg-Update-smbiosview-type-9-with-SMBIOS-3.5-fiel.patch</filename>
            <type>text/plain</type>
            <size>3808</size>
            <attacher name="Bo-ChangX Ke">bo-changx.ke</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>976</attachid>
            <date>2022-04-11 02:21:20 +0000</date>
            <delta_ts>2022-04-12 23:18:01 +0000</delta_ts>
            <desc>update type 9 patch (2/2)</desc>
            <filename>0001-ShellPkg-Update-smbiosview-type-9-with-SMBIOS-3.5-fi.patch</filename>
            <type>text/plain</type>
            <size>10895</size>
            <attacher name="Bo-ChangX Ke">bo-changx.ke</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>977</attachid>
            <date>2022-04-12 23:18:01 +0000</date>
            <delta_ts>2022-04-12 23:18:01 +0000</delta_ts>
            <desc>update type 9 patch v2 (1/2)</desc>
            <filename>v2-0001-MdePkg-Update-smbiosview-type-9-with-SMBIOS-3.5-f.patch</filename>
            <type>text/plain</type>
            <size>3810</size>
            <attacher name="Bo-ChangX Ke">bo-changx.ke</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>978</attachid>
            <date>2022-04-12 23:18:36 +0000</date>
            <delta_ts>2022-04-12 23:18:36 +0000</delta_ts>
            <desc>update type 9 patch v2 (2/2)</desc>
            <filename>v2-0001-ShellPkg-Update-smbiosview-type-9-with-SMBIOS-3.5.patch</filename>
            <type>text/plain</type>
            <size>11078</size>
            <attacher name="Bo-ChangX Ke">bo-changx.ke</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3165</bug_id>
          
          <creation_ts>2021-01-13 05:11:10 +0000</creation_ts>
          <short_desc>Basetool: Convert Split from C to Python</short_desc>
          <delta_ts>2021-01-21 08:20:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14799</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-01-13 05:11:10 +0000</bug_when>
    <thetext>1. We are in the process of moving the Basetools Python code
to a separate repository. But there still are many C tools under
edk2/BaseTools. To make all Basetools be in the separate repo,
we can convert the C tools to Python tools. The Split tool is a simple one.
2. The original Split tool is very slow.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14800</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-01-13 05:11:29 +0000</bug_when>
    <thetext>Take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14801</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-01-13 09:27:56 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14802</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-01-13 09:29:01 +0000</bug_when>
    <thetext>Patch for review.
https://edk2.groups.io/g/devel/message/70235
https://edk2.groups.io/g/devel/message/70236</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14843</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-19 20:07:32 +0000</bug_when>
    <thetext>This is a feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14877</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-01-21 08:19:31 +0000</bug_when>
    <thetext>Pushed

45962a0  BaseTools: Add unittest for Split tool
5b4a97b  BaseTools: Convert Split tool to python</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14878</commentid>
    <comment_count>6</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-01-21 08:20:10 +0000</bug_when>
    <thetext>A reminder that if the user has the windows bat script that calls Split in it，it needs to change to &quot;call Split&quot; because Split will be a bat script but not an executable file.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3646</bug_id>
          
          <creation_ts>2021-09-21 23:15:19 +0000</creation_ts>
          <short_desc>TCG_DEVICE_SECURITY_EVENT_DATA_VERSION   definition should be 1</short_desc>
          <delta_ts>2021-11-26 10:03:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17346</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-09-21 23:15:19 +0000</bug_when>
    <thetext>In https://github.com/tianocore/edk2/blob/master/MdePkg/Include/IndustryStandard/UefiTcgPlatform.h, 

#define TCG_DEVICE_SECURITY_EVENT_DATA_VERSION   0


According to latest TCG PFP spec 1.05 revision 23 (https://trustedcomputinggroup.org/resource/pc-client-specific-platform-firmware-profile-specification/), 10.2.7 DEVICE_SECURITY_EVENT_DATA Structure, the version is 1.

We should change it to:
#define TCG_DEVICE_SECURITY_EVENT_DATA_VERSION   1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17347</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-09-21 23:19:02 +0000</bug_when>
    <thetext>Take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17848</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:03:10 +0000</bug_when>
    <thetext>This one has been fixed b0f1b1c5fd9b44809058072d18051483aa3e72b1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3536</bug_id>
          
          <creation_ts>2021-08-07 03:23:54 +0000</creation_ts>
          <short_desc>How do you find a good SEO company in Florida?</short_desc>
          <delta_ts>2021-08-09 22:47:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc>https://www.firstrankseoservices.com/seo-services-in-florida</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Jonsan smith">smitjohan267</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16823</commentid>
    <comment_count>0</comment_count>
    <who name="Jonsan smith">smitjohan267</who>
    <bug_when>2021-08-07 03:23:54 +0000</bug_when>
    <thetext>If you are searching for the best SEO company in Florida then first of all you should know the benefits of SEO for your website related business. Here is the list of some benefits of SEO business that you should keep in mind before to choose any service for you. More contact us:- https://www.firstrankseoservices.com/seo-services-in-florida</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16848</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-09 22:47:04 +0000</bug_when>
    <thetext>this is not an issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3433</bug_id>
          
          <creation_ts>2021-06-04 04:32:48 +0000</creation_ts>
          <short_desc>Why Should You Enable Cash App Direct Deposit Feature?</short_desc>
          <delta_ts>2021-06-08 21:42:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bella Smith">bs9145130</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Distribution Packaging Specificatio</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16260</commentid>
    <comment_count>0</comment_count>
    <who name="Bella Smith">bs9145130</who>
    <bug_when>2021-06-04 04:32:48 +0000</bug_when>
    <thetext>Don’t you know the benefits of enabling Cash App Direct Deposit feature to your Cash app account? Once you successfully enable it on your own, you will be able to get your tax and paycheck deposited automatically without even facing any kind of hassles and hurdles. Contact troubleshooting professionals if you face anything wrong.   

 https://www.techjaadu.com/blog/cash-app-direct-deposit/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16304</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-08 21:42:43 +0000</bug_when>
    <thetext>Invalid</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3921</bug_id>
          
          <creation_ts>2022-05-03 21:45:16 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg/ConfigEditor: Support FSP 2.3 header</short_desc>
          <delta_ts>2022-05-30 22:17:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Loo Tung Lun">tung.lun.loo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18921</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-05-03 21:45:16 +0000</bug_when>
    <thetext>ConfigEditor scripts currently do not support FSP 2.3 header. We need to add it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18922</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-05-03 21:45:38 +0000</bug_when>
    <thetext>Will send code reiew.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18978</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-05-30 22:17:22 +0000</bug_when>
    <thetext>patch pushed:
https://github.com/tianocore/edk2/commit/fa2b212d61dfeb9c00a174280a73a4f573ef617d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3793</bug_id>
          
          <creation_ts>2022-01-02 11:29:09 +0000</creation_ts>
          <short_desc>Update Graphics Info Hob FrameBufferSize Based on UEFI Spec 2.0</short_desc>
          <delta_ts>2022-01-03 02:46:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ashraf Ali S">ashraf.ali.s</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18061</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2022-01-02 11:29:09 +0000</bug_when>
    <thetext>Basede on UEFI Spec 2.0 section 17.7.1 structure EFI_GRAPHICS_OUTPUT_PROTOCOL_MODE say FrameBufferSize should be size of UINTN,
in MdePkg\Include\Guid\GraphicsInfoHob.h EFI_PEI_GRAPHICS_INFO_HOB FrameBufferSize  is UINT32, 

UefiPayloadPkg\GraphicsOutputDxe\GraphicsOutput.c
MdeModulePkg\Universal\Console\GraphicsOutputDxe\GraphicsOutput.c

Private-&gt;GraphicsOutputMode.FrameBufferSize = GraphicsInfo-&gt;FrameBufferSize;

UINT32 value is getting assigned to UINTN,
in X64 build compiler will throw possible loss of data error.

so update the EFI_PEI_GRAPHICS_INFO_HOB  based on UEFI Spec 2.0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18062</commentid>
    <comment_count>1</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2022-01-03 02:46:59 +0000</bug_when>
    <thetext>We don&apos;t need any change from EDK2.
Closing the Bug</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3183</bug_id>
          
          <creation_ts>2021-01-22 12:30:30 +0000</creation_ts>
          <short_desc>Runtime service flash updates not succeeding for an SEV-ES guest</short_desc>
          <delta_ts>2021-01-25 19:30:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>thomas.lendacky</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202008</cf_release_observed>
    
    <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14891</commentid>
    <comment_count>0</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-01-22 12:30:30 +0000</bug_when>
    <thetext>The OvmfPkg SEV-ES flash support uses a VMGEXIT call to perform an MMIO write to update the flash device. This support assumes an identity mapped address for the flash address (VA == PA). However, when done as part of the EFI runtime services after the SetVitualAddressMap() API has been called, the VA == PA assumption is no longer correct and the MMIO write fails.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14892</commentid>
    <comment_count>1</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-01-22 12:33:53 +0000</bug_when>
    <thetext>The Qemu flash services needs to track the original base address, as this represents the physical address of the flash device. QemuFlashPtrWrite() can then use this address to always calculate the physical address even after SetVitualAddressMap() has been called.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14903</commentid>
    <comment_count>2</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-01-23 00:47:30 +0000</bug_when>
    <thetext>v1:
  https://edk2.groups.io/g/devel/message/70692
  https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01178.html
  msgid: &lt;8bba19920e58813f32889dec522bbcd8de113219.1611338106.git.thomas.lendacky@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14906</commentid>
    <comment_count>3</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-01-23 09:03:58 +0000</bug_when>
    <thetext>v2:
  https://edk2.groups.io/g/devel/message/70703
  https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01190.html
  msgid: &lt;84a5f9161541db5aa3b57c96b737afbcb4b6189d.1611410263.git.thomas.lendacky@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14913</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-25 19:30:45 +0000</bug_when>
    <thetext>(In reply to thomas.lendacky from comment #3)
&gt;| v2:
&gt;|   https://edk2.groups.io/g/devel/message/70703
&gt;|   https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01190.html
&gt;|   msgid: &lt;84a5f9161541db5aa3b57c96b737afbcb4b6189d.1611410263.git.thomas.lendacky@amd.com&gt;

Merged as commit 3a3501862f73, via &lt;https://github.com/tianocore/edk2/pull/1389&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3675</bug_id>
          
          <creation_ts>2021-10-03 20:49:09 +0000</creation_ts>
          <short_desc>Add QuickSort function into BaseLib</short_desc>
          <delta_ts>2021-10-20 23:34:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gua Guo">gua.guo</reporter>
          <assigned_to name="Gua Guo">gua.guo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17436</commentid>
    <comment_count>0</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2021-10-03 20:49:09 +0000</bug_when>
    <thetext>A commit (UefiCpuPkg/CpuCacheInfoLib: Sort CpuCacheInfo array) to UefiCpuPkg let
UefiCpuPkg depend on MdeModulePkg because the SortLib class and instances are all in MdeModulePkg.

UefiCpuPkg depending on MdeModulePkg breaks the rule that “UefiCpuPkg should ONLY depend on MdePkg”.

Discuss link: https://edk2.groups.io/g/devel/message/81264

1. Add QuickSort() API to BaseLib in MdePkg.
2. Update existing MdeModulePkg/SortLib to use QuickSort() in the implementation
3. Update UefiCpuPkg to use QuickSortLib to remove improper dependency on MdeModulePkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17465</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-07 21:20:15 +0000</bug_when>
    <thetext>Ian is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17475</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-10 21:26:41 +0000</bug_when>
    <thetext>Ian is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17596</commentid>
    <comment_count>3</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2021-10-20 23:34:51 +0000</bug_when>
    <thetext>The task is done on below PR.
1. https://github.com/tianocore/edk2/pull/2056 (Part1)
2. https://github.com/tianocore/edk2/pull/2095 (Part2)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3555</bug_id>
          
          <creation_ts>2021-08-11 05:21:56 +0000</creation_ts>
          <short_desc>Understand How Much Money Can You Send On Cash App Account</short_desc>
          <delta_ts>2021-08-16 21:47:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="howard123">howardpotts797</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16872</commentid>
    <comment_count>0</comment_count>
    <who name="howard123">howardpotts797</who>
    <bug_when>2021-08-11 05:21:56 +0000</bug_when>
    <thetext>Knowing How Much Money Can You Send On Cash App is recommended as it will prevent you from several issues such as payment failure and many more. Basically, it will allow you to send $250 per week and receive $1000 from a basic account. Moreover, you have to verify your account if you are looking for the limit enhancement. 
https://www.contact-customerservice.co/blog/can-you-send-$10000-through-cash-app/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16926</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:47:13 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3454</bug_id>
          
          <creation_ts>2021-06-11 18:51:39 +0000</creation_ts>
          <short_desc>Spellcheck plugin finds fewer files when run on Linux</short_desc>
          <delta_ts>2021-07-11 03:25:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>kun.qin</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16348</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-06-11 18:51:39 +0000</bug_when>
    <thetext>When spellcheck plugin invokes cspell to check files it uses a wildcard path like &lt;package&gt;/**/*.h.  On Linux this is expanded by the shell therefore doesn&apos;t pick up the expected files (fewer files).  

To resolve double quote the path so that the shell doesn&apos;t expand and the parameter is passed to cspell to expand.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16353</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-12 01:06:04 +0000</bug_when>
    <thetext>Patch sent for review: https://edk2.groups.io/g/devel/message/76428

PR created here: https://github.com/tianocore/edk2/pull/1706</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16354</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-12 01:06:04 +0000</bug_when>
    <thetext>Patch sent for review: https://edk2.groups.io/g/devel/message/76428

PR created here: https://github.com/tianocore/edk2/pull/1706</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16367</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-15 12:55:18 +0000</bug_when>
    <thetext>v2 patch sent here: https://edk2.groups.io/g/devel/message/76553</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16372</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-15 21:33:37 +0000</bug_when>
    <thetext>The patch has been sent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16429</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-23 02:55:21 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #4)
&gt; The patch has been sent.

Patch reviewed: https://edk2.groups.io/g/devel/message/76636. Still need to merge.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16601</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-07-11 03:25:33 +0000</bug_when>
    <thetext>Merged via f47c4676dd1a532b22a059cd036918abd6b0dd11. PR: &lt;https://github.com/tianocore/edk2/pull/1804&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3958</bug_id>
          
          <creation_ts>2022-06-23 04:58:06 +0000</creation_ts>
          <short_desc>[Silicon][Intel][FitGen] Support multiple Startup ACM Type 2 entries in FitGen tool</short_desc>
          <delta_ts>2022-07-08 09:25:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason Lin">jason1.lin</reporter>
          <assigned_to name="Jason Lin">jason1.lin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19126</commentid>
    <comment_count>0</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-06-23 04:58:06 +0000</bug_when>
    <thetext>Within current FitGen tool there had limitation only allow
one S-ACM to generate the Type 2 entry.
This FR is used to support multiple type 2 entries up to 0x20.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19127</commentid>
    <comment_count>1</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-06-23 04:58:48 +0000</bug_when>
    <thetext>1. As per recently released FIT BIOS Specification 1.2 Rules, at least one Startup ACM Entry in the FIT is required.
2. In current FitGen only allowed to generate one type 2 entry from BIOS INFO structure or user input.
3. This feature request is to allow user to input at most 0x20 entries (align with other type entries).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19220</commentid>
    <comment_count>2</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-07-08 09:25:03 +0000</bug_when>
    <thetext>The code change had been merged to codebase.

[1]
Silicon/Intel/FitGen: Support multiple Startup ACM Type 2 entries in FitGen tool
SHA-ID: da13a4a1aa77f9d4e512e043d93b9ddf52580e2a
https://github.com/tianocore/edk2-platforms/commit/da13a4a1aa77f9d4e512e043d93b9ddf52580e2a

[2]
Silicon/Intel/FitGen: Reduce the typecasting and pointer usage
SHA-ID: e0bde4be87058c74a3b4ef54a1df058766471345
https://github.com/tianocore/edk2-platforms/commit/e0bde4be87058c74a3b4ef54a1df058766471345

Mark this Bugzilla as resolved.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3337</bug_id>
          
          <creation_ts>2021-04-13 23:44:15 +0000</creation_ts>
          <short_desc>Remove redundant MAKE_PATH and MAKE_FLAGS statements in tools_def.template</short_desc>
          <delta_ts>2021-04-19 14:36:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15674</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-13 23:44:15 +0000</bug_when>
    <thetext>BaseTools/Conf/tools_def.template has redundant MAKE_PATH and 
MAKE_FLAGS statements for VS20xx tool chains.

Simplify tools_def.template by removing these extra statements.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15675</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-13 23:44:29 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15720</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-19 13:38:59 +0000</bug_when>
    <thetext>Patch email for review:

https://edk2.groups.io/g/devel/message/74086</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15721</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-19 14:36:01 +0000</bug_when>
    <thetext>Commit:
https://github.com/tianocore/edk2/commit/64138c95db5a7a3e4768d8a01ba71dc3475e6524

GitHub PR:
https://github.com/tianocore/edk2/pull/1578</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3818</bug_id>
          
          <creation_ts>2022-01-29 03:19:41 +0000</creation_ts>
          <short_desc>Incorrect data type of ProcessRelocation64</short_desc>
          <delta_ts>2022-03-01 19:46:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>guomin.jiang</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18221</commentid>
    <comment_count>0</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-01-29 03:19:41 +0000</bug_when>
    <thetext>ProcessRelocation64 use INTN  Delta. However it force it with UINTN when call it.

It will have some potential issue when you memory larger than 2G because the high memory will be fill with 0xFFFFFFFF if use INTN.

Have patch for it and will submit later.

Thanks
Guomin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18222</commentid>
    <comment_count>1</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-01-29 03:32:28 +0000</bug_when>
    <thetext>Send change https://edk2.groups.io/g/devel/message/86198 for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18312</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-02-09 22:04:36 +0000</bug_when>
    <thetext>Send change v2 https://edk2.groups.io/g/devel/message/86540 for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18396</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-02-16 06:20:32 +0000</bug_when>
    <thetext>Sent https://github.com/tianocore/edk2/pull/2515. Waiting for merge.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18419</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-02-21 01:46:30 +0000</bug_when>
    <thetext>Sent change v3 https://edk2.groups.io/g/devel/message/86824 for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18477</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-03-01 19:46:13 +0000</bug_when>
    <thetext>Merged patch: https://github.com/tianocore/edk2/commit/497ac7b6d7f9750f48f137db244931a5728b1968.

Thanks</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3208</bug_id>
          
          <creation_ts>2021-02-03 11:28:26 +0000</creation_ts>
          <short_desc>ECC: support high-level disablement of error categories</short_desc>
          <delta_ts>2023-01-03 04:25:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3206</blocked>
          <everconfirmed>0</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14999</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-03 11:28:26 +0000</bug_when>
    <thetext>(1) Currently, the EccCheck plugin offers an exception list in the following format (EccCheck.ExceptionList):

  &quot;&lt;ErrorID&gt;&quot;, &quot;&lt;KeyWord&gt;&quot;, &quot;&lt;ErrorID&gt;&quot;, &quot;&lt;KeyWord&gt;&quot;, ...

Each pair binds a particular &lt;ErrorID&gt; to a particular &quot;offending&quot; identifier (called &lt;KeyWord&gt;), such as C variable name. There is no wildcard support, so it&apos;s impossible for a package maintainer to disable entire classes of ECC reports.

Every time a new variable is added that triggers an undesired error identifier, the package maintainer has to edit the exception list.

If a variable is removed from the source code, the maintainer has to remember that the exception tied to the same variable should also be removed, from the CI control file (&quot;XxxPkg/XxxPkg.ci.yaml&quot;).

The current behavior is actually a limitation of the ECC utility, not the EccCheck plugin. The format -- the list of (&quot;&lt;ErrorID&gt;&quot;, &quot;&lt;KeyWord&gt;&quot;) pairs -- is in fact dictated by the ECC utility&apos;s &quot;exceptions&quot; XML document. The list format of the EccCheck plugin closely maps to the XML schema that&apos;s required by the ECC utility.

(2) Furthermore, the &quot;EccCheck.IgnoreFiles&quot; list does not support wildcards.

Feature requests:

- any given &lt;ErrorID&gt; should be possible to disable for a set of *files* (not for a set of C-language identifiers!),

- in the definition of those files, wildcards should be recognized,

- in the definition of those files, the &quot;.&quot; (dot) filename should be recognized as well, effectively disabling the &lt;ErrorID&gt; for the *whole package*. (In the &quot;XxxPkg/XxxPkg.ci.yaml&quot; file, the &quot;current directory&quot; (i.e., &quot;.&quot; (dot)) means &quot;XxxPkg/&quot;.)

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20400</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:25:56 +0000</bug_when>
    <thetext>I don&apos;t think anyone has cared.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3697</bug_id>
          
          <creation_ts>2021-10-18 10:56:04 +0000</creation_ts>
          <short_desc>Support ACPI 6.4 PPTT changes</short_desc>
          <delta_ts>2021-12-15 00:29:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chris Jones">christopher.jones</reporter>
          <assigned_to name="Chris Jones">christopher.jones</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>DynamicTablesPkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17571</commentid>
    <comment_count>0</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-10-18 10:56:04 +0000</bug_when>
    <thetext>The ACPI 6.4 specification added a new &apos;Cache ID&apos; field to the PPTT Cache (type 1) Structure as well as removed the previously deprecated PPTT ID (type 2) structure. These changes should be incorporated into edk2 to support the latest specification.

The changes that need to be made to accommodate the latest ACPI 6.4 spec are:
- Remove the PPTT type 2 structure from Acpi64.h 
- Update the Acpiview PPTT parser to add &apos;Cache ID&apos; and remove type 2 structure.
- Update the DynamicTablesPkg PPTT generator with the &apos;Cache ID&apos; field and remove the type 2 structure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17572</commentid>
    <comment_count>1</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-10-18 11:13:12 +0000</bug_when>
    <thetext>Patch series posted to the list as: https://edk2.groups.io/g/devel/message/82229</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17573</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-18 21:20:56 +0000</bug_when>
    <thetext>christopher.jones@arm.com is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17682</commentid>
    <comment_count>3</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-11-03 12:14:52 +0000</bug_when>
    <thetext>I noticed a bug and some fixes in the old patch series so I have reuploaded a v2 series posted at: https://edk2.groups.io/g/devel/message/83272</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17990</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-12-15 00:29:54 +0000</bug_when>
    <thetext>Merged as 0f1d7477c0a8..e81a81e5846e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3097</bug_id>
          
          <creation_ts>2020-12-01 03:31:53 +0000</creation_ts>
          <short_desc>virtio-fs driver for OvmfPkg and ArmVirtPkg</short_desc>
          <delta_ts>2020-12-21 12:59:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3125</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14448</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-01 03:31:53 +0000</bug_when>
    <thetext>Sharing files between the virtualization host and ArmVirtQemu &amp; OVMF (for the UEFI shell, or maybe even for booting) has been a bit of a chore. In particular when the guest and the host should &quot;collaborate&quot;, in a sense, on a set of files, with both sides having a kind of &quot;online&quot; access, and generally avoiding disk image files.

Here&apos;s one use case from the mailing list:

[edk2-devel] OVMF/QEMU shell based unit tests and writing to a virtual disk
https://edk2.groups.io/g/devel/message/66544
https://www.redhat.com/archives/edk2-devel-archive/2020-October/msg00766.html

msgid: &lt;BN8PR07MB6962B04D8A71EE688D080763C81D0@BN8PR07MB6962.namprd07.prod.outlook.com&gt;

In that thread, I mentioned virtio-fs &lt;https://virtio-fs.gitlab.io&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14449</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-01 03:32:11 +0000</bug_when>
    <thetext>I&apos;m working on a virtio-fs driver for OVMF.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14452</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-01 10:16:18 +0000</bug_when>
    <thetext>... one interesting use case I should test later is the following: what if the host directory that virtiofsd shares with the guest is itself a FUSE mount -- for example, an sshfs mount? That would transitively give OVMF sshfs / sftp access.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14602</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-16 16:18:22 +0000</bug_when>
    <thetext>Posting in progress:

[edk2 PATCH 00/48] ArmVirtPkg, OvmfPkg: virtio filesystem driver
Message-Id: &lt;20201216211125.19496-1-lersek@redhat.com&gt;

https://edk2.groups.io/g/devel/message/69012
https://www.redhat.com/archives/edk2-devel-archive/2020-December/msg00915.html
https://www.redhat.com/archives/virtio-fs/2020-December/msg00064.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14628</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-21 07:49:18 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; ... one interesting use case I should test later is the following: what if
&gt; the host directory that virtiofsd shares with the guest is itself a FUSE
&gt; mount -- for example, an sshfs mount? That would transitively give OVMF
&gt; sshfs / sftp access.

Yes, that works. It&apos;s possible to create a directory under the virtiofsd shared dir, and use that directory as an sshfs mount point. What&apos;s important is that the sshfs command must be invoked with the &quot;-o allow_root&quot; option, as virtiofsd runs as root, and sshfs by default protects the local root user from seeing potentially nasty files that could be presented by the remote SFTP server.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14634</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-21 12:59:52 +0000</bug_when>
    <thetext>Merged as commit range c06635ea3f4b..35ed29f207fd, via &lt;https://github.com/tianocore/edk2/pull/1256&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3574</bug_id>
          
          <creation_ts>2021-08-19 03:29:47 +0000</creation_ts>
          <short_desc>Missing QemuKernelLoaderFsDxe in OvmfXen</short_desc>
          <delta_ts>2021-09-13 23:05:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gary Lin">gary.lin</reporter>
          <assigned_to name="Gary Lin">gary.lin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16992</commentid>
    <comment_count>0</comment_count>
      <attachid>806</attachid>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-08-19 03:29:47 +0000</bug_when>
    <thetext>Created attachment 806
error log

OvmfXen didn&apos;t include QemuKernelLoaderFsDxe. When trying HVM direct kernel boot, it failed to load the given kernel/initrd through fw_cfg and ended up in the built-in UEFI shell.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16993</commentid>
    <comment_count>1</comment_count>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-08-19 03:30:39 +0000</bug_when>
    <thetext>The command generated by libvirt:

/usr/bin/qemu-system-i386 -xen-domid 7 -no-shutdown \
 -chardev socket,id=libxl-cmd,path=/run/xen/qmp-libxl-7,server=on,wait=off \
 -mon chardev=libxl-cmd,mode=control \
 -chardev socket,id=libxenstat-cmd,path=/run/xen/qmp-libxenstat-7,server=on,wait=off \
 -mon chardev=libxenstat-cmd,mode=control \
 -nodefaults -no-user-config -name ovmf-test \
 -vnc 127.0.0.1:2 \
 -display none \
 -kernel /vm_images/test/linux \
 -initrd /vm_images/test/initrd \
 -append install=http://virt1/install/sles15sp3x86_64 \ 
 -serial pty \
 -device VGA,vgamem_mb=16 \
 -boot order=c \
 -usb -usbdevice tablet \
 -smp 4,maxcpus=4 \
 -device rtl8139,id=nic0,netdev=net0,mac=00:16:3e:ec:6c:47 \
 -netdev type=tap,id=net0,ifname=vif7.0-emu,script=no,downscript=no \
 -global isa-debugcon.iobase=0x402 -debugcon file:/tmp/ovmf-test.log \
 -machine xenfv \
 -m 4080 \
 -drive file=/vm_images/test/disk.qcow2,if=ide,index=0,media=disk,format=qcow2,cache=unsafe</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17045</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 21:59:07 +0000</bug_when>
    <thetext>Gary: can you provide the patch to fix it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17059</commentid>
    <comment_count>3</comment_count>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-08-24 22:46:22 +0000</bug_when>
    <thetext>The patch was posted to the mailing list:
https://edk2.groups.io/g/devel/topic/patch_v3_ovmfpkg_ovmfxen/85080285?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,85080285</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17267</commentid>
    <comment_count>4</comment_count>
    <who name="Gary Lin">gary.lin</who>
    <bug_when>2021-09-13 23:05:20 +0000</bug_when>
    <thetext>The fix has been merged as 9f3eda177a4b2.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>806</attachid>
            <date>2021-08-19 03:29:47 +0000</date>
            <delta_ts>2021-08-19 03:29:47 +0000</delta_ts>
            <desc>error log</desc>
            <filename>ovmf-debug-missing-kernel-loader-fs.log</filename>
            <type>text/x-log</type>
            <size>85220</size>
            <attacher name="Gary Lin">gary.lin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3478</bug_id>
          
          <creation_ts>2021-07-06 10:23:01 +0000</creation_ts>
          <short_desc>Add dynamic flash base and size support for Standalone MM</short_desc>
          <delta_ts>2022-08-09 23:52:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16557</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-07-06 10:23:01 +0000</bug_when>
    <thetext>MinPlatformPkg has a driver called SpiFvbServiceSmm and SpiFvbServiceStandaloneMm to produce the firmware volume block protocol for the Traditional MM and Standalone MM environments.

Traditionally, if platforms wanted to adjust flash base/sizes during boot, they could do so as PCDs such as the flash base/size PCDs supported Dynamic/DynamicEx. However, in a Standalone MM environment, the PCD service is not readily available.

While support to pass this information to the variable driver through means in addition to PCDs is in progress, the SpiFvbService drivers need to leverage that mechanism so the firmware volumes described by the drivers are consistent with the information consumed by the variable driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16624</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-13 21:45:20 +0000</bug_when>
    <thetext>Michael will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17226</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-08 20:46:49 +0000</bug_when>
    <thetext>This change is blocked on this patch getting merged (it has been on the mailing list since April 2021): https://bugzilla.tianocore.org/show_bug.cgi?id=3307</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18769</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-06 12:29:43 +0000</bug_when>
    <thetext>BZ 3307 was merged.

Now this changed is dependent on support being merged in MdeModulePkg as tracked in BZ 3479.
https://bugzilla.tianocore.org/show_bug.cgi?id=3479</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18827</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-18 19:44:31 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/89027</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18971</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-05-20 09:20:44 +0000</bug_when>
    <thetext>Sent 4 reminders to review this patch. Waiting for feedback. Latest is here: https://edk2.groups.io/g/devel/message/89729

Going to send 5 soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19057</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-06-09 20:50:08 +0000</bug_when>
    <thetext>Still waiting for the patch to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19169</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-07-01 10:41:44 +0000</bug_when>
    <thetext>No feedback on v1. Sent v2 today:
https://edk2.groups.io/g/devel/message/90986</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19385</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-08-09 23:52:59 +0000</bug_when>
    <thetext>Patch was pushed in the following commit - https://github.com/tianocore/edk2-platforms/commit/bc93dea9b98ccb608639d3a923fd9b437fc73ddb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3986</bug_id>
          
          <creation_ts>2022-07-12 03:09:28 +0000</creation_ts>
          <short_desc>Debug string is limited to 104 char due to EFI_STATUS_CODE_DATA_MAX_SIZE set to 200</short_desc>
          <delta_ts>2022-07-26 04:59:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Cosmo Lai">cosmo.lai</reporter>
          <assigned_to name="Cosmo Lai">cosmo.lai</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19231</commentid>
    <comment_count>0</comment_count>
    <who name="Cosmo Lai">cosmo.lai</who>
    <bug_when>2022-07-12 03:09:28 +0000</bug_when>
    <thetext>Overview: 
The EFI_STATUS_CODE_DATA_MAX_SIZE is defined as 200 in MdeModulePkg. After reducing 96byte buffer for variable parameters it is limited to only 104 char debug string. This is a non-necessary limitation. It can be set to 0x200 to inherit from MAX_EXTENDED_DATA_SIZE (also 0x200) which is used in ReportStatusCodeLib to support longer debug string.

Steps to Reproduce: 
Below debug msg will be truncated. 
DEBUG (&quot;N# = Nibble, BCx = Bit Center, NPi = Minimum across nibble, BSx = Bit Skew , DTx = DRAM TCK (Linear), MSL = Most Skewed Lane, \n\n&quot;);

Actual Results: 
The output msg is:
N# = Nibble, BCx = Bit Center, NPi = Minimum across nibble, BSx = Bit Skew , DTx = DRAM TCK (Linear), M

Expected Results: 
It should output full msg:
N# = Nibble, BCx = Bit Center, NPi = Minimum across nibble, BSx = Bit Skew , DTx = DRAM TCK (Linear), MSL = Most Skewed Lane, 

Build Date &amp; Hardware: 2022-07-11

Additional Builds and Platforms: NA

Additional Information: NA</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19297</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-19 22:15:27 +0000</bug_when>
    <thetext>Cosmo is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19330</commentid>
    <comment_count>2</comment_count>
    <who name="Cosmo Lai">cosmo.lai</who>
    <bug_when>2022-07-26 04:59:50 +0000</bug_when>
    <thetext>commit 6964b5c48c69e4961bad2dd9d6c02918f23c3be0
Author:     Cosmo Lai &lt;cosmo.lai@intel.com&gt;
AuthorDate: Tue Jul 19 13:58:32 2022 +0800
Commit:     mergify[bot] &lt;37929162+mergify[bot]@users.noreply.github.com&gt;
CommitDate: Sat Jul 23 03:12:49 2022 +0000</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3356</bug_id>
          <alias>CVE-2021-38575</alias>
          <creation_ts>2021-04-26 15:44:05 +0000</creation_ts>
          <short_desc>NetworkPkg/IScsiDxe: remotely exploitable buffer overflows</short_desc>
          <delta_ts>2021-11-30 18:41:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3355</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>andrey.warkentin</cc>
    
    <cc>bret.barkelew</cc>
    
    <cc>f4bug</cc>
    
    <cc>glin</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>kevinj</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>rschiron</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>tuxmealux+tianocorebz</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15777</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-26 15:44:05 +0000</bug_when>
    <thetext>According to RFC 7143 &lt;https://tools.ietf.org/html/rfc7143&gt;, the iscsi target may send two hex-encoded strings to the initiator, as part of CHAP:

- CHAP_C, with the intent to authenticate the initiator,

- CHAP_R, with the intent to answer the challenge from the initiator (in case the initiator wants mutual authentication).

As of edk2 commit 61680cac5e43, these hex strings are decoded by NetworkPkg/IScsiDxe, using the IScsiHexToBin() function [NetworkPkg/IScsiDxe/IScsiMisc.c].

The function is plagued by numerous security issues:

- The IScsiHexToBin() call sites do not check the return value. According to the interface contract, EFI_BUFFER_TOO_SMALL is returned when the caller-provided binary is too small for decoding the hex string.

- The IScsiHexToBin() function never checks the BinLength parameter (which is an in-out parameter), and only ever returns EFI_SUCCESS; meaning that IScsiHexToBin() breaks its interface contract, and the decoded buffer is easy to overflow for the remote server (the iscsi target).

- The IScsiHexToBin() function peeks at HexStr (input) characters without checking the HexStr length first.

- IScsiHexToBin() does not reject an input HexStr that does not end with a full octet (i.e. one that terminates with just one nibble).

- IScsiHexToBin() silently truncates the UINTN Index to the UINT32 output BinLength.


Issues exist in the opposite direction too; minimally:

&gt;|   if (((*HexLength) - 3) &lt; BinLength * 2) {

here, the subtraction may underflow, the multiplication may overflow.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15778</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-26 15:47:50 +0000</bug_when>
    <thetext>I&apos;ll probably fix this as part of my work on bug 3355.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15779</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-26 15:48:04 +0000</bug_when>
    <thetext>I think a CVE number would be justified.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15789</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-27 05:08:35 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #0)

&gt; - The IScsiHexToBin() function peeks at HexStr (input) characters without
&gt; checking the HexStr length first.

Correction: this does not happen. HexStr is NUL-terminated, and so the condition

  (HexStr[0] == &apos;0&apos;) &amp;&amp; ((HexStr[1] == &apos;x&apos;) || (HexStr[1] == &apos;X&apos;))

is safe, even without checking the length of the string first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15828</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-29 17:25:34 +0000</bug_when>
    <thetext>Regression test matrix template:

Tests with no authentication  Results
----------------------------  -------------------------
                              login result  test result
                              ------------  -----------
                              ?             ?


Tests with mutual authentication  Results
--------------------------------  --------------------------------------
secret of ... matches             CHAP_A
---------------------             -------------------
                                  offered   picked     login      test
target  initiator                 by init.  by target  result     result
------  ---------                 --------  ---------  ---------  ------
no      n/a                       ?         ?          ?          ?
yes     no                        ?         ?          ?          ?
yes     yes                       ?         ?          ?          ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15829</commentid>
    <comment_count>5</comment_count>
      <attachid>713</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-29 17:37:51 +0000</bug_when>
    <thetext>Created attachment 713
NetworkPkg/IScsiDxe: fix IScsiHexToBin() security and functionality bugs

Series of 10 patches, applies on 01c0ab90beb3 (&quot;AzurePipelines: Add support for ArmPlatformPkg&quot;, 2021-04-28).

Regression test results:

Tests with no authentication  Results
----------------------------  -------------------------
                              login result  test result
                              ------------  -----------
                              ok            PASS


Tests with mutual authentication  Results
--------------------------------  --------------------------------------
secret of ... matches             CHAP_A
---------------------             -------------------
                                  offered   picked     login      test
target  initiator                 by init.  by target  result     result
------  ---------                 --------  ---------  ---------  ------
no      n/a                       5         5          targ abrt  PASS
yes     no                        5         5          init abrt  PASS
yes     yes                       5         5          ok         PASS

Notes:

- iSCSI communication was monitored with wireshark.

Thanks,
Laszlo

Laszlo Ersek (10):
  NetworkPkg/IScsiDxe: wrap IScsiCHAP source files to 80 characters
  NetworkPkg/IScsiDxe: simplify &quot;ISCSI_CHAP_AUTH_DATA.InChallenge&quot; size
  NetworkPkg/IScsiDxe: clean up
    &quot;ISCSI_CHAP_AUTH_DATA.OutChallengeLength&quot;
  NetworkPkg/IScsiDxe: clean up library class dependencies
  NetworkPkg/IScsiDxe: fix potential integer overflow in IScsiBinToHex()
  NetworkPkg/IScsiDxe: assert that IScsiBinToHex() always succeeds
  NetworkPkg/IScsiDxe: reformat IScsiHexToBin() leading comment block
  NetworkPkg/IScsiDxe: fix IScsiHexToBin() hex parsing
  NetworkPkg/IScsiDxe: fix IScsiHexToBin() buffer overflow
  NetworkPkg/IScsiDxe: check IScsiHexToBin() return values

 NetworkPkg/IScsiDxe/IScsiDxe.inf |  7 +-
 NetworkPkg/IScsiDxe/IScsiCHAP.h  | 14 +--
 NetworkPkg/IScsiDxe/IScsiImpl.h  | 18 ++--
 NetworkPkg/IScsiDxe/IScsiCHAP.c  | 93 ++++++++++++++------
 NetworkPkg/IScsiDxe/IScsiMisc.c  | 65 ++++++++++----
 5 files changed, 139 insertions(+), 58 deletions(-)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15830</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-29 17:44:39 +0000</bug_when>
    <thetext>I intend to propose an embargo end date soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15877</commentid>
    <comment_count>7</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2021-05-02 16:03:15 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; I think a CVE number would be justified.

Certainly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15878</commentid>
    <comment_count>8</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2021-05-02 16:10:13 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #5)

&gt;   NetworkPkg/IScsiDxe: wrap IScsiCHAP source files to 80 characters

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: simplify &quot;ISCSI_CHAP_AUTH_DATA.InChallenge&quot; size

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: clean up
&gt;     &quot;ISCSI_CHAP_AUTH_DATA.OutChallengeLength&quot;

Why use ISCSI_CHAP_RSP_LEN instead of sizeof (AuthData-&gt;OutChallengeLength)?

Otherwise:
Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: clean up library class dependencies

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: fix potential integer overflow in IScsiBinToHex()

Predating your series, I note, while HexLength docstring has the &apos;output&apos; qualifier, what is returned isn&apos;t documented.

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: assert that IScsiBinToHex() always succeeds

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: reformat IScsiHexToBin() leading comment block

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: fix IScsiHexToBin() hex parsing

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: fix IScsiHexToBin() buffer overflow

Predating your series, I note BinLength isn&apos;t documented as output (neither docstring, nor what is returned in comment).

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: check IScsiHexToBin() return values

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;


For the patches fixing issues you might consider adding:
Fixes: 4c5a5e0cfecf (&quot;Add IScsiDxe driver to NetworkPkg in order to support iSCSI over IPv6 stack and iSCSI MPIO.&quot;)

Thank you for fixing the issue!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15882</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-03 07:14:38 +0000</bug_when>
    <thetext>(In reply to Philippe Mathieu-Daudé from comment #8)
&gt; (In reply to Laszlo Ersek from comment #5)

&gt; &gt;   NetworkPkg/IScsiDxe: clean up
&gt; &gt;     &quot;ISCSI_CHAP_AUTH_DATA.OutChallengeLength&quot;
&gt; 
&gt; Why use ISCSI_CHAP_RSP_LEN instead of sizeof (AuthData-&gt;OutChallengeLength)?
&gt; 
&gt; Otherwise:
&gt; Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

This is a great observation :) I expected it, and I&apos;m ready with the answer.

Using ISCSI_CHAP_RSP_LEN in this patch is intentional. Bug 3355 depends on this bug, and for one of my patches for bug 3356, it is *semantically* important to use ISCSI_CHAP_RSP_LEN here, rather than the sizeof expression that you -- otherwise very correctly -- suggest.

The current security issue (= bug 3356) was discovered, and is being fixed, as a part of my solution for bug 3355. Therefore, some choices made in the present patch series are not made in isolation from the larger feature / goal.

I&apos;d be happy to share the dependent feature patches for bug 3355 as well. However, I have not found a good way to do so, in the TianoCore bugzilla installation. The issue is that the feature patches for bug 3355 include such context (both semantic and actual patch context) that would break the embargo on the security problem. So normally, at this time, I would add a *private attachment* to bug 3355. But this bugzilla instance does not support private attachments, as far as I can tell. And I wouldn&apos;t like to attach the bug 3355 patches *here* either, as it would only cause confusion.

Another possibility would be to keep bug 3355 a Feature Request (= not Security Issue) BZ ticket, but *still* restrict its visibility to the TianoCore Security Group, temporarily. I don&apos;t want to do it because it&apos;s risky. If someone misses my reason for that restriction (thinks that such a restriction is improper for a Feature Request) and clears the visibility restriction flag, we would again break the embargo.

NB, internally at Red Hat, I have already shared the feature patches, see: &lt;https://bugzilla.redhat.com/show_bug.cgi?id=1935497#c14&gt;. The patch that really depends on ISCSI_CHAP_RSP_LEN is called

  NetworkPkg/IScsiDxe: distinguish &quot;maximum&quot; and &quot;selected&quot; CHAP digest sizes

there. Let me quote the commit message of that patch here:

&gt;| NetworkPkg/IScsiDxe: distinguish &quot;maximum&quot; and &quot;selected&quot; CHAP digest
&gt;| sizes
&gt;|
&gt;| IScsiDxe uses the ISCSI_CHAP_RSP_LEN macro for expressing the size of
&gt;| the digest (16) that it solely supports at this point (MD5).
&gt;| ISCSI_CHAP_RSP_LEN is used for both (a) *allocating* digest-related
&gt;| buffers (binary buffers and hex encodings alike), and (b)
&gt;| *processing* binary digest buffers (comparing them, filling them,
&gt;| reading them).
&gt;|
&gt;| In preparation for adding other hash algorithms, split purpose (a)
&gt;| from purpose (b). For purpose (a) -- buffer allocation --, introduce
&gt;| ISCSI_CHAP_MAX_DIGEST_SIZE. For purpose (b) -- processing --, rely on
&gt;| MD5_DIGEST_SIZE from &lt;BaseCryptLib.h&gt;.
&gt;|
&gt;| Distinguishing these purposes is justified because purpose (b) --
&gt;| processing -- must depend on the hashing algorithm negotiated between
&gt;| initiator and target, while for purpose (a) -- allocation --, using
&gt;| the maximum supported digest size is suitable. For now, because only
&gt;| MD5 is supported, introduce ISCSI_CHAP_MAX_DIGEST_SIZE *as*
&gt;| MD5_DIGEST_SIZE.
&gt;|
&gt;| Note that the argument for using the digest size as the size of the
&gt;| outgoing challenge (in case mutual authentication is desired by the
&gt;| initiator) remains in place. Because of this, the above two purposes
&gt;| are distinguished for the &quot;ISCSI_CHAP_AUTH_DATA.OutChallenge&quot; field
&gt;| as well.
&gt;|
&gt;| This patch is functionally a no-op, just yet.

The same &quot;purpose-splitting&quot; would actually be harder to implement and understand if in the *present* patch (&apos;NetworkPkg/IScsiDxe: clean up &quot;ISCSI_CHAP_AUTH_DATA.OutChallengeLength&quot;&apos;) we used the sizeof expression rather than the macro.

So that&apos;s the reason.

&gt; &gt;   NetworkPkg/IScsiDxe: fix potential integer overflow in IScsiBinToHex()
&gt; 
&gt; Predating your series, I note, while HexLength docstring has the &apos;output&apos;
&gt; qualifier, what is returned isn&apos;t documented.
&gt; 
&gt; Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

You are right, but at least it is *somewhat* forgivable. In UEFI (even at the spec level), it is a common interface pattern to take an in-out size parameter, especially in combination with an EFI_BUFFER_TOO_SMALL return status. On input, the caller-allocated size is passed in, on output, the necessary (used) size is exposed, and the return status explains whether the transfer was actually made (i.e., whether the passed-in size was large enough). I didn&apos;t want to add more patches nor complicate these otherwise small patches.

&gt; &gt;   NetworkPkg/IScsiDxe: fix IScsiHexToBin() buffer overflow
&gt; 
&gt; Predating your series, I note BinLength isn&apos;t documented as output (neither
&gt; docstring, nor what is returned in comment).
&gt; 
&gt; Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

Same story as above -- the interface&apos;s idea wasn&apos;t bad at all, and again there is much precedent even in the UEFI spec for this kind of size passing / size checking. (What&apos;s unfortunate is that the function didn&apos;t actually implement the interface contract.)

&gt; For the patches fixing issues you might consider adding:
&gt; Fixes: 4c5a5e0cfecf (&quot;Add IScsiDxe driver to NetworkPkg in order to support
&gt; iSCSI over IPv6 stack and iSCSI MPIO.&quot;)

Valid observation. I considered it myself, but opted against it. Here&apos;s why.

The &quot;Fixes:&quot; tag is useful when we can identify a *specific* earlier patch that either (a) regressed something, or (b) implemented a *well-contained* (nicely isolated) feature buggily right from the start.

Unfortunately, the commit you -- correctly -- mention is not like that. I ran &quot;git blame&quot; myself on the problematic code, because I wanted to understand where it came from. Commit 4c5a5e0cfecf however is a 14300 line patch, which basically dumped the -- potentially multi-month! -- original work on IScsiDxe into edk2 in a single action.

By today&apos;s standards, that&apos;s of course unacceptable. But my main point is that &quot;Fixes: 4c5a5e0cfecf&quot; carries very little information, as more or less *anything* we might fix in IScsiDxe nowadays would come from that huge original dump of code. Commit 4c5a5e0cfecf is not a specific, well-contained change; therefore referencing it, while fixing various bugs, is simply not informative. In my opinion anyway.

If the original 14300 lines of IScsiDxe had been carefully constructed over a series of tens of patches, then things would be different. In that case, the IScsiHexToBin() helper function would likely have been added in a much smaller patch (something like &quot;CHAP: decode challenge from iSCSI target&quot;), and *then* we could sensibly point a &quot;Fixes&quot; tag at *that* small commit now.

Put differently: this is why nowadays we require small, well isolated patches. We want bisectability, and we want &quot;Fixes&quot; tags that actually make sense.

&gt; Thank you for fixing the issue!

Thank you for the review! I hope my answers are acceptable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15888</commentid>
    <comment_count>10</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2021-05-03 11:55:03 +0000</bug_when>
    <thetext>&gt; NetworkPkg/IScsiDxe: fix IScsiHexToBin() buffer overflow

I&apos;m not sure if there is a &quot;contract&quot; about this or not, but I noticed that BinLength here might be set to a newer value even if IScsiHexToBin ends up returning EFI_INVALID_PARAMETER due to wrong hex-characters in the input. Is this alright? I don&apos;t think it causes any real problem right now, but I&apos;m not sure if in the rest of edk2 codebase it is expected to have values changed only when the return value is EFI_SUCCESS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15898</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-04 14:24:59 +0000</bug_when>
    <thetext>(In reply to Riccardo Schirone from comment #10)
&gt; &gt; NetworkPkg/IScsiDxe: fix IScsiHexToBin() buffer overflow
&gt; 
&gt; I&apos;m not sure if there is a &quot;contract&quot; about this or not, but I noticed that
&gt; BinLength here might be set to a newer value even if IScsiHexToBin ends up
&gt; returning EFI_INVALID_PARAMETER due to wrong hex-characters in the input. Is
&gt; this alright?

Yes, that&apos;s alright. I can again only point at the general UEFI spec pattern: most error codes, returned by APIs, indicate that output parameters have indeterminate contents. There is a handful of (one-off) exceptions to this pattern [*], and there is one (quite common) exception *class*: namely that EFI_BUFFER_TOO_SMALL allows the caller to learn about the necessary size-on-input. This practically allows the caller to use the API for *querying* the needed size (pass in zero size at first, check for EFI_BUFFER_TOO_SMALL, allocate as needed, call API again). So that&apos;s the pattern we&apos;re sticking with here.

[*] Any such exceptional contract may be one of two kinds: a guarantee that an output parameter takes a specific new value on error return, or a guarantee that an input-output parameter does not change on error return. The rule of thumb is however that on error return, all output and all input-output parameters should be expected to have indeterminate value.

&gt; I don&apos;t think it causes any real problem right now, but I&apos;m
&gt; not sure if in the rest of edk2 codebase it is expected to have values
&gt; changed only when the return value is EFI_SUCCESS.

Yes. That&apos;s the general expectation.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15899</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-04 14:33:10 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #11)
&gt; (In reply to Riccardo Schirone from comment #10)

&gt; &gt; I don&apos;t think it causes any real problem right now, but I&apos;m
&gt; &gt; not sure if in the rest of edk2 codebase it is expected to have values
&gt; &gt; changed only when the return value is EFI_SUCCESS.
&gt; 
&gt; Yes. That&apos;s the general expectation.

Argh, I meant the right thing, but I didn&apos;t say what I meant. :/

To repeat:

- The general expection is that input-output and output parameters are meaningful only when EFI_SUCCESS is returned.

- The general expectation for error returns is that input-output and output parameters are indeterminate (garbled).

- In some exceptional (documented) cases, an error return may guarantee an *unchanged* parameter, or may guarantee a *particular value* for a parameter.

- The EFI_BUFFER_TOO_SMALL error return, in combination with a &quot;size&quot; input-output parameter, idiomatically means that &quot;size&quot; has been adjusted to the minimum sufficient size for calling the API successfully, given the original set of parameters (apart from &quot;size&quot;). On EFI_BUFFER_TOO_SMALL, all other (non-size) output and input-output parameters are usually allowed / expected to be garbled.

So, if an API fails, the caller can generally *not* expect the input-output and output parameters to preserve their values.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15908</commentid>
    <comment_count>13</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2021-05-05 04:50:20 +0000</bug_when>
    <thetext>We would like to propose an embargo of about 1 month from today to give time to everyone to review and test patches before making this flaw public, while not delay the fix for too long. 

To be precise, we propose June 8 2021 (a Tuesday) as the disclosure date.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15914</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-05 10:54:33 +0000</bug_when>
    <thetext>NetworkPkg maintainers, can you please review these patches quickly? (See comment 5.) Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15934</commentid>
    <comment_count>15</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2021-05-06 11:38:11 +0000</bug_when>
    <thetext>Sorry, I was OOO for a week. Came back today, going through the thread.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15939</commentid>
    <comment_count>16</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2021-05-06 15:01:54 +0000</bug_when>
    <thetext>Laszlo,

Thanks for fixing this!
Review summary:

1. NetworkPkg/IScsiDxe: wrap IScsiCHAP source files to 80 characters

Coding standard - function parameter breaks &amp; alignment:
IScsiCHAPOnRspReceived() -&gt; IScsiGetValueByKeyFromList() calls
IScsiCHAPToSendReq() -&gt; IScsiAddKeyValuePair() calls

2. NetworkPkg/IScsiDxe: simplify &quot;ISCSI_CHAP_AUTH_DATA.InChallenge&quot; size
3. NetworkPkg/IScsiDxe: clean up &quot;ISCSI_CHAP_AUTH_DATA.OutChallengeLength&quot;

OK, accepting explanation in your responses to Philippe.

4. NetworkPkg/IScsiDxe: clean up library class dependencies
5. NetworkPkg/IScsiDxe: fix potential integer overflow in IScsiBinToHex()
6. NetworkPkg/IScsiDxe: assert that IScsiBinToHex() always succeeds
7. NetworkPkg/IScsiDxe: reformat IScsiHexToBin() leading comment block

OK

8. NetworkPkg/IScsiDxe: fix IScsiHexToBin() hex parsing
9. NetworkPkg/IScsiDxe: fix IScsiHexToBin() buffer overflow

Comment mismatch between declaration and definition of IScsiHexToBin().

10. NetworkPkg/IScsiDxe: check IScsiHexToBin() return values

OK</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15950</commentid>
    <comment_count>17</comment_count>
      <attachid>720</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-07 07:15:59 +0000</bug_when>
    <thetext>Created attachment 720
NetworkPkg/IScsiDxe: fix IScsiHexToBin() security and functionality bugs [v2]

v1 was attached to comment#5.

The v2 series applies on top of commit f297b7f20010
(&quot;UnitTestFrameworkPkg: Sample unit test hangs when running in
OVMF/QEMU&quot;, 2021-05-04).

v2 addresses Maciej&apos;s review comments from comment#16. v2 incorporates
Phil&apos;s R-b tags from comment#8, except on the patches that I had to
modify. The Notes section of each individual patch summarizes the
changes (feel free to use git-range-diff too, of course, for an
incremental review).

The v2 series builds at every stage.

The v2 series has been retested for regressions using the template from
comment#4:

Tests with no authentication  Results
----------------------------  -------------------------
                              login result  test result
                              ------------  -----------
                              ok            PASS

Tests with mutual authentication  Results
--------------------------------  --------------------------------------
secret of ... matches             CHAP_A
---------------------             -------------------
                                  offered   picked     login      test
target  initiator                 by init.  by target  result     result
------  ---------                 --------  ---------  ---------  ------
no      n/a                       5         5          targ abrt  PASS
yes     no                        5         5          init abrt  PASS
yes     yes                       5         5          ok         PASS

Notes:

- iSCSI communication was monitored with wireshark.

The v2 series has been retested functionally too, with one of our
reproducers.

Thanks,
Laszlo

Laszlo Ersek (10):
  NetworkPkg/IScsiDxe: wrap IScsiCHAP source files to 80 characters
  NetworkPkg/IScsiDxe: simplify &quot;ISCSI_CHAP_AUTH_DATA.InChallenge&quot; size
  NetworkPkg/IScsiDxe: clean up
    &quot;ISCSI_CHAP_AUTH_DATA.OutChallengeLength&quot;
  NetworkPkg/IScsiDxe: clean up library class dependencies
  NetworkPkg/IScsiDxe: fix potential integer overflow in IScsiBinToHex()
  NetworkPkg/IScsiDxe: assert that IScsiBinToHex() always succeeds
  NetworkPkg/IScsiDxe: reformat IScsiHexToBin() leading comment block
  NetworkPkg/IScsiDxe: fix IScsiHexToBin() hex parsing
  NetworkPkg/IScsiDxe: fix IScsiHexToBin() buffer overflow
  NetworkPkg/IScsiDxe: check IScsiHexToBin() return values

 NetworkPkg/IScsiDxe/IScsiCHAP.c  | 108 +++++++++++++++-----
 NetworkPkg/IScsiDxe/IScsiCHAP.h  |  14 ++-
 NetworkPkg/IScsiDxe/IScsiDxe.inf |   7 +-
 NetworkPkg/IScsiDxe/IScsiImpl.h  |  18 ++--
 NetworkPkg/IScsiDxe/IScsiMisc.c  |  65 +++++++++---
 NetworkPkg/IScsiDxe/IScsiMisc.h  |  19 ++--
 6 files changed, 166 insertions(+), 65 deletions(-)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15977</commentid>
    <comment_count>18</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2021-05-10 09:14:50 +0000</bug_when>
    <thetext>Reviewed-by: Maciej Rabeda &lt;maciej.rabeda@linux.intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15990</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-11 10:28:15 +0000</bug_when>
    <thetext>Thank you, Maciej!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15993</commentid>
    <comment_count>20</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2021-05-11 13:07:45 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #17)

&gt;   NetworkPkg/IScsiDxe: wrap IScsiCHAP source files to 80 characters

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: fix potential integer overflow in IScsiBinToHex()

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: reformat IScsiHexToBin() leading comment block

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: fix IScsiHexToBin() hex parsing

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;

&gt;   NetworkPkg/IScsiDxe: fix IScsiHexToBin() buffer overflow

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15998</commentid>
    <comment_count>21</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-11 15:00:25 +0000</bug_when>
    <thetext>Thank you for being awesome, Phil! :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15999</commentid>
    <comment_count>22</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-11 15:14:36 +0000</bug_when>
    <thetext>Note for backporters (given that the patches from comment 17 are supposed to reach downstreams before I post them to edk2-devel): all patches have been R-b Phil and Maciej. Don&apos;t forget to pick up those tags in your backports. I&apos;m not refreshing the patches from comment 17 here, just for the sake of the R-b updates  -- I don&apos;t want any confusion about the &quot;latest code updates&quot; in this BZ. I&apos;ll include the R-b&apos;s (a) in my own backports, and (b) in my posting to edk2-devel, upon public disclosure (see comment 13). Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16258</commentid>
    <comment_count>23</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2021-06-03 05:19:24 +0000</bug_when>
    <thetext>Hi, could you assign a CVE before this becomes public in 5 days? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16295</commentid>
    <comment_count>24</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-08 08:14:58 +0000</bug_when>
    <thetext>Public posting:

* [edk2-devel] [PUBLIC edk2 PATCH v2 00/10]
  NetworkPkg/IScsiDxe: fix IScsiHexToBin() security and functionality bugs

Message-Id: &lt;20210608121259.32451-1-lersek@redhat.com&gt;
https://listman.redhat.com/archives/edk2-devel-archive/2021-June/msg00316.html
https://edk2.groups.io/g/devel/message/76198</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16320</commentid>
    <comment_count>25</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-09 13:28:52 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #24)
&gt; Public posting:
&gt; 
&gt; * [edk2-devel] [PUBLIC edk2 PATCH v2 00/10]
&gt;   NetworkPkg/IScsiDxe: fix IScsiHexToBin() security and functionality bugs
&gt; 
&gt; Message-Id: &lt;20210608121259.32451-1-lersek@redhat.com&gt;
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-June/msg00316.html
&gt; https://edk2.groups.io/g/devel/message/76198

Merged as commit range 702ba436ed8e..b8649cf2a3e6, via &lt;https://github.com/tianocore/edk2/pull/1698&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16360</commentid>
    <comment_count>26</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2021-06-14 03:40:46 +0000</bug_when>
    <thetext>Any news about a CVE for this? The later it is assigned, the less useful it becomes. In general it would be great to have it even before the flaw becomes public.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16361</commentid>
    <comment_count>27</comment_count>
    <who name="Gianluca Gabrielli">tuxmealux+tianocorebz</who>
    <bug_when>2021-06-14 10:04:59 +0000</bug_when>
    <thetext>As Riccardo pointed out, having a CVE ID assigned is very important to increase the security level of downstream projects which are shipping/levering this package. If nobody managed to request one yet, I will do.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16362</commentid>
    <comment_count>28</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2021-06-14 11:10:26 +0000</bug_when>
    <thetext>(In reply to Gianluca Gabrielli from comment #27)
&gt; As Riccardo pointed out, having a CVE ID assigned is very important to
&gt; increase the security level of downstream projects which are
&gt; shipping/levering this package. If nobody managed to request one yet, I will
&gt; do.

As TianoCore itself is CNA for edk2 I think they are already aware of this, but someone more involved with the project might know more.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16533</commentid>
    <comment_count>29</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2021-07-05 03:57:08 +0000</bug_when>
    <thetext>Asking again: can we have a CVE for this please?

I will wait until tomorrow, then I will ask directly MITRE for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16587</commentid>
    <comment_count>30</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2021-07-08 02:05:16 +0000</bug_when>
    <thetext>(In reply to Riccardo Schirone from comment #29)
&gt; Asking again: can we have a CVE for this please?
&gt; 
&gt; I will wait until tomorrow, then I will ask directly MITRE for it.

I requested the CVE directly to MITRE. No reply yet.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17237</commentid>
    <comment_count>31</comment_count>
      <attachid>825</attachid>
    <who name="">kevinj</who>
    <bug_when>2021-09-10 18:55:23 +0000</bug_when>
    <thetext>Created attachment 825
.json file_v1

I have attached the .json file for CVE classification. Please review and provide feedback, and assign a release this issue is observed in, so I can update the .json file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17874</commentid>
    <comment_count>32</comment_count>
      <attachid>890</attachid>
    <who name="">kevinj</who>
    <bug_when>2021-11-30 18:41:41 +0000</bug_when>
    <thetext>Created attachment 890
.json file_v2

I have updated the .json file and submitted to MITRE for publication.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>713</attachid>
            <date>2021-04-29 17:37:51 +0000</date>
            <delta_ts>2021-05-07 07:15:59 +0000</delta_ts>
            <desc>NetworkPkg/IScsiDxe: fix IScsiHexToBin() security and functionality bugs</desc>
            <filename>tianocore-3356-on-01c0ab90beb3.zip</filename>
            <type>application/zip</type>
            <size>24429</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>720</attachid>
            <date>2021-05-07 07:15:59 +0000</date>
            <delta_ts>2021-05-07 07:15:59 +0000</delta_ts>
            <desc>NetworkPkg/IScsiDxe: fix IScsiHexToBin() security and functionality bugs [v2]</desc>
            <filename>tianocore-3356-v2-on-f297b7f20010.zip</filename>
            <type>application/zip</type>
            <size>25999</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>825</attachid>
            <date>2021-09-10 18:55:23 +0000</date>
            <delta_ts>2021-09-10 18:55:23 +0000</delta_ts>
            <desc>.json file_v1</desc>
            <filename>3356.json</filename>
            <type>application/json</type>
            <size>1921</size>
            <attacher>kevinj</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>890</attachid>
            <date>2021-11-30 18:41:41 +0000</date>
            <delta_ts>2021-11-30 18:41:41 +0000</delta_ts>
            <desc>.json file_v2</desc>
            <filename>3356.json</filename>
            <type>application/json</type>
            <size>1939</size>
            <attacher>kevinj</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3844</bug_id>
          
          <creation_ts>2022-02-22 08:57:52 +0000</creation_ts>
          <short_desc>MdePackage/PeiDxeDebugLibReportStatusCode：Add Standalone MM support</short_desc>
          <delta_ts>2022-03-03 21:13:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="xiaolu.jiang">xiaolu.jiang</reporter>
          <assigned_to name="xiaolu.jiang">xiaolu.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jian.j.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18425</commentid>
    <comment_count>0</comment_count>
    <who name="xiaolu.jiang">xiaolu.jiang</who>
    <bug_when>2022-02-22 08:57:52 +0000</bug_when>
    <thetext>DebugLib need support MM_STANDALONE</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18430</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-22 21:38:39 +0000</bug_when>
    <thetext>Xiaolu will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18542</commentid>
    <comment_count>2</comment_count>
    <who name="xiaolu.jiang">xiaolu.jiang</who>
    <bug_when>2022-03-03 21:12:06 +0000</bug_when>
    <thetext>The patch has merged</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18543</commentid>
    <comment_count>3</comment_count>
    <who name="xiaolu.jiang">xiaolu.jiang</who>
    <bug_when>2022-03-03 21:12:22 +0000</bug_when>
    <thetext>The patch has merged</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18544</commentid>
    <comment_count>4</comment_count>
    <who name="xiaolu.jiang">xiaolu.jiang</who>
    <bug_when>2022-03-03 21:13:23 +0000</bug_when>
    <thetext>The patch has merged</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3719</bug_id>
          
          <creation_ts>2021-11-04 08:34:06 +0000</creation_ts>
          <short_desc>DnsDxe: Host2Address pointer in response token is not null on error</short_desc>
          <delta_ts>2021-11-25 20:05:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Baranee">anbazhagan</reporter>
          <assigned_to name="Baranee">anbazhagan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17688</commentid>
    <comment_count>0</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2021-11-04 08:34:06 +0000</bug_when>
    <thetext>Memory allocated for Token-&gt;RspData.H2AData is freed on error (if response doesn&apos;t have PTR) but it&apos;s not set to NULL. HTTP module attempts to free again and cause assert. 

NetworkPkg\DnsDxe\DnsImpl.c -&gt; ParseDnsResponse()

          FreePool (Dns4TokenEntry-&gt;Token-&gt;RspData.H2AData);
+         Dns4TokenEntry-&gt;Token-&gt;RspData.H2AData = NULL;


          FreePool (Dns6TokenEntry-&gt;Token-&gt;RspData.H2AData);
+         Dns6TokenEntry-&gt;Token-&gt;RspData.H2AData = NULL;


Attempted to fix with above change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17826</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 22:13:08 +0000</bug_when>
    <thetext>Baranee: can you provide the patch for it? And, send the patch to edk2 mail list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17838</commentid>
    <comment_count>2</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2021-11-25 09:57:23 +0000</bug_when>
    <thetext>Invalid pointer issue started from below commit

NetworkPkg/DnsDxe: Fix the potential memory leak issue
https://github.com/tianocore/edk2/commit/43d7e607348ee14de334e11e9c6987278af57f14</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17839</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-25 20:05:51 +0000</bug_when>
    <thetext>Add PR https://github.com/tianocore/edk2/pull/2222</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3004</bug_id>
          
          <creation_ts>2020-10-13 02:57:10 +0000</creation_ts>
          <short_desc>Pyrite support - Secure erase is only available if encryption is supported</short_desc>
          <delta_ts>2023-10-26 16:40:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Maggie Chu">maggie.chu</reporter>
          <assigned_to name="Maggie Chu">maggie.chu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>maggie.chu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202002</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13947</commentid>
    <comment_count>0</comment_count>
    <who name="Maggie Chu">maggie.chu</who>
    <bug_when>2020-10-13 02:57:10 +0000</bug_when>
    <thetext>fist time to file bug</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13948</commentid>
    <comment_count>1</comment_count>
    <who name="Maggie Chu">maggie.chu</who>
    <bug_when>2020-10-13 02:59:34 +0000</bug_when>
    <thetext>change status to confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13981</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-15 06:53:09 +0000</bug_when>
    <thetext>This ticket contains zero information beyond the title (&quot;Pyrite support - Secure erase is only available if encryption is supported&quot;).

How can it be set to CONFIRMED?

Is this a feature request? The bug classification (Product + Component) imply a bug currently.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13984</commentid>
    <comment_count>3</comment_count>
    <who name="Maggie Chu">maggie.chu</who>
    <bug_when>2020-10-15 07:29:12 +0000</bug_when>
    <thetext>yes, it is a bug.
Current flow allow user to select performing secure erase on device which support Pyrite 2.0 whereas Pyrite device could have optional support for encryption.
the comment has already clearly point out that encryption support is mandatory for secure erase.
Apparently, Required check logic is missing here.

&quot;Secure erase is performed by generating a new encryption key
this is only available if encryption is supported&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21912</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2023-09-13 03:45:53 +0000</bug_when>
    <thetext>Merged https://github.com/tianocore/edk2/pull/4827</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22073</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-10-26 16:40:36 +0000</bug_when>
    <thetext>commit cdfe4310dda2a30b0ca05c8ede6896edce37a656</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3494</bug_id>
          
          <creation_ts>2021-07-15 10:23:37 +0000</creation_ts>
          <short_desc>Feature/Intel/IpmiFeaturePkg: Use MdePkg macros instead of redefinition.</short_desc>
          <delta_ts>2021-07-20 23:53:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IpmiFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16646</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-07-15 10:23:37 +0000</bug_when>
    <thetext>Some macros have been added to MdePkg, we should not redefine them in another package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16657</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-19 22:04:53 +0000</bug_when>
    <thetext>Chasel is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16665</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-07-20 23:53:35 +0000</bug_when>
    <thetext>commit d549e39ca1a9da14d86ff841358f990a0ace71f5
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue Jul 13 13:52:51 2021 +0800

    Features/Intel/IpmiFeaturePkg: Use MdePkg macros instead of redefining.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3494

    Renamed below macros and structure to use MdePkg ones.
      IPMI_MSG_GET_BMC_EXEC_RSP
      IPMI_GET_BMC_EXECUTION_CONTEXT
      IPMI_BMC_IN_FORCED_UPDATE_MODE

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Sai Chaganty &lt;rangasai.v.chaganty@intel.com&gt;
    Cc: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;
    Cc: Isaac Oram &lt;isaac.w.oram@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Sai Chaganty &lt;rangasai.v.chaganty@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3384</bug_id>
          
          <creation_ts>2021-05-10 04:08:30 +0000</creation_ts>
          <short_desc>Remove UefiBootManagerLib&apos;s assumption &quot;BootManagerMenuFile is in the same FV as the module links to this library&quot;</short_desc>
          <delta_ts>2021-05-28 03:50:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15966</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2021-05-10 04:08:30 +0000</bug_when>
    <thetext>Currently, UefiBootManagerLib has the below assumption:
  Assume the BootManagerMenuFile is in the same FV as the module links to this library.

It has some limitation now, and should be removed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16014</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-11 21:43:20 +0000</bug_when>
    <thetext>Zhiguang has sent the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16204</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-28 03:50:04 +0000</bug_when>
    <thetext>it has been merged at 42ec0a315b8a2f445b7a7d74b8d78965f1dff8f6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3875</bug_id>
          
          <creation_ts>2022-03-19 04:40:20 +0000</creation_ts>
          <short_desc>OvmfPkg: uncrustify should not modify generated files</short_desc>
          <delta_ts>2022-04-04 12:07:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3737</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>kraxel</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18651</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2022-03-19 04:40:20 +0000</bug_when>
    <thetext>For bug 3737, in commit ac0a286f4d74 (&quot;OvmfPkg: Apply uncrustify changes&quot;, 2021-12-07), style changes were applied to the following two files as well:

  OvmfPkg/Bhyve/BhyveRfbDxe/VbeShim.h
  OvmfPkg/QemuVideoDxe/VbeShim.h

However, these files are generated (as their banners say) by:

  OvmfPkg/Bhyve/BhyveRfbDxe/VbeShim.sh
  OvmfPkg/QemuVideoDxe/VbeShim.sh

respectively.

In case the generators are re-run, they produce a needlessly large diff, which is due to uncrustify having modified the previously generated output.

So please either (1) revert the uncrustify changes for these generated files AND make these files exempt from uncrustification (including any related CI checks), or (2) please update the generators (VbeShim.sh) such that their outputs immediately pass the uncrustification checks (and therefore running uncrustify on the captured outputs not produce any changes).

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18657</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-03-21 20:00:53 +0000</bug_when>
    <thetext>I will make the changes for (1).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18660</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-03-21 22:00:03 +0000</bug_when>
    <thetext>V1 series on list: https://edk2.groups.io/g/devel/message/87809</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18754</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-04 10:42:58 +0000</bug_when>
    <thetext>V2 series on list: https://edk2.groups.io/g/devel/message/88341</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18755</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-04 10:43:17 +0000</bug_when>
    <thetext>V3 series on list: https://edk2.groups.io/g/devel/message/88358</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18761</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-04 12:07:12 +0000</bug_when>
    <thetext>Patches merged:
https://github.com/tianocore/edk2/commit/d932199d39a5e8e47e2d431e897a765b70ceb51e
and
https://github.com/tianocore/edk2/commit/ad6816c319cdbd927d81e071996a0dea33c86e4a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3745</bug_id>
          
          <creation_ts>2021-11-18 22:17:24 +0000</creation_ts>
          <short_desc>Support Ext2/Ext3 File System</short_desc>
          <delta_ts>2022-06-14 12:03:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Ext4Pkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to name="Pedro Falcato">pedro.falcato</assigned_to>
          <cc>pedro.falcato</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17790</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-18 22:17:24 +0000</bug_when>
    <thetext>Some old Linux system still uses Ext2/Ext3 file system. To support them, I suggest to enhance Ext4Driver to support them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17815</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 21:56:32 +0000</bug_when>
    <thetext>Pedro can decide whether support it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18722</commentid>
    <comment_count>2</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2022-03-27 22:34:02 +0000</bug_when>
    <thetext>I already have a working patch I&apos;ll try to upstream in the next day or two.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19081</commentid>
    <comment_count>3</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2022-06-14 12:03:08 +0000</bug_when>
    <thetext>Done in 7c46116b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3143</bug_id>
          
          <creation_ts>2020-12-30 05:39:44 +0000</creation_ts>
          <short_desc>Create password does not prompt &quot;Configuration changed&quot;</short_desc>
          <delta_ts>2021-01-05 21:42:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Kiet Pham">qkiet97</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable201911</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>edk2-stable201911</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14685</commentid>
    <comment_count>0</comment_count>
    <who name="Kiet Pham">qkiet97</who>
    <bug_when>2020-12-30 05:39:44 +0000</bug_when>
    <thetext>I recent clone edk2 tag edk2-stable201911 and try to create new UEFI driver that allow user to setup password. 

But when I test create password feature, there is no prompt &quot;Configuration changed&quot; (in yellow text) that notice user that a configuration has changed. Other OPcode is fine like checkbox, oneof.

I&apos;d like to know if I miss something or this is unsupported feature in this edk2&apos;s version. Please let me know

Here a short version of source code that mention password feature:

////SecurityConfigVfr.vfr////

#include &quot;SecurityConfigNVDataStruct.h&quot;

formset
  guid = SECURITY_CONFIG_FORMSET_GUID,
  title = STRING_TOKEN(STR_SECURITY_CONFIG_FORM_SET_TITLE),
  help = STRING_TOKEN(STR_SECURITY_CONFIG_FORM_SET_HELP),

  varstore SECURITY_CONFIGURATION_NV_STRUCTURE,
    varid = SECURITY_CONFIG_VARID,
    name  = SECURITY_CONFIG_IFR_NVDATA,
    guid  = SECURITY_CONFIG_VARSTORE_GUID;

  form formid = SECURITY_CONFIG_FRONT_PAGE_ID,
    title = STRING_TOKEN(STR_SECURITY_CONFIG_FRONT_PAGE_TITLE);

    subtitle text = STRING_TOKEN(STR_NULL_STRING);

    checkbox varid = SECURITY_CONFIGURATION_NV_STRUCTURE.IsPasswordEnable,
      prompt   = STRING_TOKEN(STR_PASSWORD_CHECKBOX_PROMPT),
      help     = STRING_TOKEN(STR_PASSWORD_CHECKBOX_HELP),
      flags    = CHECKBOX_DEFAULT,
    endcheckbox;

    grayoutif ideqval SECURITY_CONFIGURATION_NV_STRUCTURE.IsPasswordEnable == 0x00;
      password  varid    = SECURITY_CONFIGURATION_NV_STRUCTURE.BIOSPassword,
                  prompt   = STRING_TOKEN(STR_PASSWORD_PROMPT),
                  help     = STRING_TOKEN(STR_PASSWORD_HELP),
                  flags    = INTERACTIVE,
                  key      = PASSWORD_FIELD_QUESTION_ID,
                  minsize  = MIN_PASSWORD_LENGTH,
                  maxsize  = MAX_PASSWORD_LENGTH,
      endpassword;
    endif;


  endform;


endformset;

////HiiConfigAccess.c////
EFI_STATUS
EFIAPI
SecurityConfigHiiConfigAccessExtractConfig (
  IN CONST  EFI_HII_CONFIG_ACCESS_PROTOCOL  *This,
  IN CONST  EFI_STRING                      Request,
  OUT       EFI_STRING                      *Progress,
  OUT       EFI_STRING                      *Results
  )
{
   EFI_STATUS                        Status;
  UINTN                             BufferSize;
  UINTN                             Size;
  EFI_STRING                        ConfigRequest;
  EFI_STRING                        ConfigRequestHdr;
  SECURITY_PRIVATE_DATA_STRUCTURE   *Private;
  BOOLEAN                           AllocatedRequest;

  if (Progress == NULL || Results == NULL) {
    return EFI_INVALID_PARAMETER;
  }

  AllocatedRequest = FALSE;
  ConfigRequestHdr = NULL;
  ConfigRequest    = NULL;
  Size             = 0;

  Private          = SECURITY_PRIVATE_DATA_STRUCTURE_FROM_THIS (This);
  
  Status = gRT-&gt;GetVariable (
    IfrVarstoreName, 
    &amp;mVarstoreGuid, 
    NULL,
    &amp;BufferSize,
    &amp;Private-&gt;Configuration
  );

  *Progress        = Request;

  if ((Request != NULL) &amp;&amp; !HiiIsConfigHdrMatch (Request, &amp;mVarstoreGuid, IfrVarstoreName)) {
    return EFI_NOT_FOUND;
  }

  ConfigRequest = Request;
  if ((Request == NULL) || (StrStr (Request, L&quot;OFFSET&quot;) == NULL)) {
    //
    // Request is set to NULL or OFFSET is NULL, construct full request string.
    //
    // Allocate and fill a buffer large enough to hold the &lt;ConfigHdr&gt; template
    // followed by &quot;&amp;OFFSET=0&amp;WIDTH=WWWWWWWWWWWWWWWW&quot; followed by a Null-terminator
    //
    ConfigRequestHdr = HiiConstructConfigHdr (&amp;mVarstoreGuid, IfrVarstoreName, Private-&gt;DriverHandle);
    Size = (StrLen (ConfigRequestHdr) + 32 + 1) * sizeof (CHAR16);
    ConfigRequest = AllocateZeroPool (Size);
    ASSERT (ConfigRequest != NULL);
    AllocatedRequest = TRUE;
    UnicodeSPrint (ConfigRequest, Size, L&quot;%s&amp;OFFSET=0&amp;WIDTH=%016LX&quot;, ConfigRequestHdr, (UINT64)BufferSize);
    FreePool (ConfigRequestHdr);
    ConfigRequestHdr = NULL;
    DEBUG((DEBUG_INFO, &quot;[SecurityConfig] ConfigReq is NULL\n&quot;));
  }
  Status = Private-&gt;HiiConfigRouting-&gt;BlockToConfig (
                                Private-&gt;HiiConfigRouting,
                                ConfigRequest,
                                (UINT8 *) &amp;Private-&gt;Configuration,
                                BufferSize,
                                Results,
                                Progress
                                );

  //
  // Free the allocated config request string.
  //

  if (AllocatedRequest) {
    FreePool (ConfigRequest);
  }

  //
  // Set Progress string to the original request string.
  //
  if (Request == NULL) {
    *Progress = NULL;
  } else if (StrStr (Request, L&quot;OFFSET&quot;) == NULL) {
    *Progress = Request + StrLen (Request);
  }
  DEBUG((DEBUG_INFO, &quot;[SecurityConfig] ConfigAccess Extract Status %d\n&quot;, Status));
  return Status;
}

/**
   
  This function applies changes in a driver&apos;s configuration.
  Input is a Configuration, which has the routing data for this
  driver followed by name / value configuration pairs. The driver
  must apply those pairs to its configurable storage. If the
  driver&apos;s configuration is stored in a linear block of data
  and the driver&apos;s name / value pairs are in &lt;BlockConfig&gt;
  format, it may use the ConfigToBlock helper function (above) to
  simplify the job.

  @param This           Points to the EFI_HII_CONFIG_ACCESS_PROTOCOL.

  @param Configuration  A null-terminated Unicode string in
                        &lt;ConfigString&gt; format. 
  
  @param Progress       A pointer to a string filled in with the
                        offset of the most recent &apos;&amp;&apos; before the
                        first failing name / value pair (or the
                        beginn ing of the string if the failure
                        is in the first name / value pair) or
                        the terminating NULL if all was
                        successful.

  @retval EFI_SUCCESS             The results have been distributed or are
                                  awaiting distribution.
  
  @retval EFI_OUT_OF_RESOURCES    Not enough memory to store the
                                  parts of the results that must be
                                  stored awaiting possible future
                                  protocols.
  
  @retval EFI_INVALID_PARAMETERS  Passing in a NULL for the
                                  Results parameter would result
                                  in this type of error.
  
  @retval EFI_NOT_FOUND           Target for the specified routing data
                                  was not found

**/
EFI_STATUS
EFIAPI
SecurityConfigHiiConfigAccessRouteConfig (
  IN CONST  EFI_HII_CONFIG_ACCESS_PROTOCOL  *This,
  IN CONST  EFI_STRING                      Configuration,
  OUT       EFI_STRING                      *Progress
  )
{
    
  EFI_STATUS                                Status;
  UINTN                                     BufferSize;
  SECURITY_PRIVATE_DATA_STRUCTURE           *Private;
  SECURITY_CONFIGURATION_NV_STRUCTURE       *IfrData;

  EFI_STRING                           StrBuffer2;
  StrBuffer2 = Configuration;

  if (Configuration == NULL || Progress == NULL) {
    return EFI_INVALID_PARAMETER;
  }

  *Progress  = Configuration;
  BufferSize = sizeof (SECURITY_CONFIGURATION_NV_STRUCTURE);
  Private    = SECURITY_PRIVATE_DATA_STRUCTURE_FROM_THIS (This);

  IfrData = AllocateZeroPool(BufferSize);

  if (!HiiIsConfigHdrMatch (Configuration, &amp;mVarstoreGuid, IfrVarstoreName)) {
    return EFI_NOT_FOUND;
  }



  

  // DEBUG((DEBUG_INFO, &quot;[SecurityConfig] Old data is %d\n&quot;, Private-&gt;Configuration.IsPasswordEnable));
  Status = Private-&gt;HiiConfigRouting-&gt;ConfigToBlock (
                                Private-&gt;HiiConfigRouting,
                                Configuration,
                                (UINT8*) IfrData,
                                &amp;BufferSize,
                                Progress
                                );
  if (EFI_ERROR (Status)) {
    DEBUG((DEBUG_INFO, &quot;[SecurityConfig] Fail Route Config\n&quot;));
    return Status;
  }
  Status = gRT-&gt;SetVariable (
    IfrVarstoreName,
    &amp;mVarstoreGuid,
    EFI_VARIABLE_NON_VOLATILE | EFI_VARIABLE_BOOTSERVICE_ACCESS,
    sizeof(SECURITY_CONFIGURATION_NV_STRUCTURE),
    IfrData
  );

  FreePool(IfrData);
  IfrData = NULL;
  DEBUG((DEBUG_INFO, &quot;[SecurityConfig] Successfully Route Config. Status is %d\n&quot;, Status));
  return Status;
//  return EFI_UNSUPPORTED;
}  

/**
   
  This function is called to provide results data to the driver.
  This data consists of a unique key that is used to identify
  which data is either being passed back or being asked for.

  @param  This                   Points to the EFI_HII_CONFIG_ACCESS_PROTOCOL.
  @param  Action                 Specifies the type of action taken by the browser.
  @param  QuestionId             A unique value which is sent to the original
                                 exporting driver so that it can identify the type
                                 of data to expect. The format of the data tends to 
                                 vary based on the opcode that generated the callback.
  @param  Type                   The type of value for the question.
  @param  Value                  A pointer to the data being sent to the original
                                 exporting driver.
  @param  ActionRequest          On return, points to the action requested by the
                                 callback function.

  @retval EFI_SUCCESS            The callback successfully handled the action.
  @retval EFI_OUT_OF_RESOURCES   Not enough storage is available to hold the
                                 variable and its data.
  @retval EFI_DEVICE_ERROR       The variable could not be saved.
  @retval EFI_UNSUPPORTED        The specified Action is not supported by the
                                 callback.
**/
EFI_STATUS
EFIAPI
SecurityConfigHiiConfigAccessCallback (
  IN     CONST EFI_HII_CONFIG_ACCESS_PROTOCOL   *This,
  IN     EFI_BROWSER_ACTION                     Action,
  IN     EFI_QUESTION_ID                        QuestionId,
  IN     UINT8                                  Type,
  IN OUT EFI_IFR_TYPE_VALUE                     *Value,
  OUT    EFI_BROWSER_ACTION_REQUEST             *ActionRequest
  )
{
  SECURITY_PRIVATE_DATA_STRUCTURE     *Private;

  Private = SECURITY_PRIVATE_DATA_STRUCTURE_FROM_THIS (This);

  switch (Action)
  {
    case EFI_BROWSER_ACTION_CHANGING:
    {
        switch (QuestionId)
        {
          case PASSWORD_FIELD_QUESTION_ID:
          {
            return EFI_SUCCESS;
          }
        }
    }
    case EFI_BROWSER_ACTION_CHANGED:
    {
        switch (QuestionId)
        {
          case PASSWORD_FIELD_QUESTION_ID:
          {
            *ActionRequest = EFI_BROWSER_ACTION_REQUEST_FORM_APPLY;
            return EFI_SUCCESS;
          }
        }
    }
    case EFI_BROWSER_ACTION_FORM_OPEN:
    {
      HiiSetString (
        Private-&gt;HiiHandle, 
        STRING_TOKEN (STR_NULL_STRING), 
        Private-&gt;Configuration.BIOSPassword, 
        NULL
        );
      DEBUG((DEBUG_INFO, &quot;[SecurityConfig] BIOS password is %s\n&quot;, Private-&gt;Configuration.BIOSPassword));
      return EFI_SUCCESS;
    }
  }

  return EFI_UNSUPPORTED;
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14709</commentid>
    <comment_count>1</comment_count>
    <who name="Kiet Pham">qkiet97</who>
    <bug_when>2021-01-05 04:09:51 +0000</bug_when>
    <thetext>Never mine, I already found the solution by implement password check and save in ConfigAccess CallBack</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14717</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-05 21:42:07 +0000</bug_when>
    <thetext>Close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3624</bug_id>
          
          <creation_ts>2021-09-13 08:19:48 +0000</creation_ts>
          <short_desc>From expert’s help your cash app negative balance</short_desc>
          <delta_ts>2021-09-13 21:30:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="john smith">js6523335</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          <cf_documents>EDK II UNI Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17250</commentid>
    <comment_count>0</comment_count>
    <who name="john smith">js6523335</who>
    <bug_when>2021-09-13 08:19:48 +0000</bug_when>
    <thetext>Is your account having a cash app negative balance? Don’t know to fix this glitch? If yes then you just need to rely on the cash app support team. Users can talk to the experts of the cash app for getting instant tech support. Dial the helpline number to talk to the techies for reliable assistance
https://www.contact-customerservice.co/blog/how-do-you-fix-the-negative-balance-on-the-cash-app/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17259</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-13 21:30:45 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3518</bug_id>
          
          <creation_ts>2021-07-31 11:21:30 +0000</creation_ts>
          <short_desc>TestPointCheckTcgTrustedBoot() forgets to initialize the size of ProtocolCapability</short_desc>
          <delta_ts>2021-08-11 21:39:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeremiah Cox">jerecox</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16731</commentid>
    <comment_count>0</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2021-07-31 11:21:30 +0000</bug_when>
    <thetext>The size member of EFI_TCG2_BOOT_SERVICE_CAPABILITY ProtocolCapability should be initialized prior to calling Tcg2-&gt;GetCapability(), else it might return EFI_BUFFER_TOO_SMALL because it does not know which version of the structure is in use.


--- a/MinPlatformPkg/Test/Library/TestPointCheckLib/DxeCheckTcgTrustedBoot.c
+++ b/MinPlatformPkg/Test/Library/TestPointCheckLib/DxeCheckTcgTrustedBoot.c
@@ -41,6 +41,7 @@ TestPointCheckTcgTrustedBoot (
     goto Done;
   }

+  ProtocolCapability.Size = (UINT8) sizeof (ProtocolCapability);
   Status = Tcg2-&gt;GetCapability (Tcg2, &amp;ProtocolCapability);
   if (EFI_ERROR(Status)) {
     DEBUG ((DEBUG_ERROR, &quot;Tcg2-&gt;GetCapability - %r\n&quot;, Status));</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16756</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 21:48:15 +0000</bug_when>
    <thetext>Please send the patch to edk2 mail list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16793</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 10:18:32 +0000</bug_when>
    <thetext>I will be be sending a patch today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16799</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 11:02:59 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/78712

Sent in the larger patch series: https://edk2.groups.io/g/devel/message/78710</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16803</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 11:05:56 +0000</bug_when>
    <thetext>Moving to IN_PROGRESS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16885</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-11 21:39:59 +0000</bug_when>
    <thetext>Pushed to edk2-platforms/master in the following commit: https://github.com/tianocore/edk2-platforms/commit/d82cc1c13774cf9c084d77a838bbbe043da5fe7e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3899</bug_id>
          
          <creation_ts>2022-04-08 06:23:35 +0000</creation_ts>
          <short_desc>edk2-libc: uuid.py script needs porting to UEFI as it is one of the key modules required for chipsec open source tool</short_desc>
          <delta_ts>2022-06-01 11:28:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Jayaprakash Nevara">n.jayaprakash</assigned_to>
          <cc>aaron.frinzell</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>n.jayaprakash</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18790</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-04-08 06:23:35 +0000</bug_when>
    <thetext>Currently uuid.py available in the edk2-libc port of Py3 UEFI interpreter doesn&apos;t have support for UEFI environment. It is supported only for OS environments such as Windows, Linux and Mac.

It requires basic porting effort to get this module working on UEFI environment. 
This is one of the modules used by Chipsec open source tool, used for chip security tests.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18791</commentid>
    <comment_count>1</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-04-08 06:25:42 +0000</bug_when>
    <thetext>Self assigning the issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18792</commentid>
    <comment_count>2</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-04-08 06:29:06 +0000</bug_when>
    <thetext>Made necessary chages for porting uuid.py module to UEFI shell and verified with the chipsec tool team. The team has confirmed that the tool is working good with the updated uuid.py module. 

Will be sending a patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18797</commentid>
    <comment_count>3</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-04-08 13:06:59 +0000</bug_when>
    <thetext>The UUID generation is done through the random number generation &amp; time unix time stamp features available through the built-in python modules &apos;random&apos; and &apos;time&apos; respectively.

The random number &amp; time (unix time stamp or epoch) based method of generating the UUID is already there in uuid.py module, with this patch request enabled this path to take effect for UEFI invocation of this module.

There are some OS specific ways to generate the UUID&apos;s such as by using the libuuid on Linux kind of OS, windll.rpcrt4 library on windows. 
These will not work for UEFI and hence added appropriate platform check to ensure that this path is not taken for UEFI invocation. 

Besides this there are MAC address based algorithms available in uuid.py module. 
These algorism are based on reading MAC address through various OS supported methods such as ipconfig command processing, NetBIOS calls on Windows, using netstat command in Linux, lanscan in Unix, from arp - address resolution protocol in Linux, NetBSD and other flavours of Linux.
These are currently not enabled for UEFI invocation of the uuid module. This has been done through platform check added at appropriate place in the uuid.py module code.

There is a scope to enahnce this module further to enable mac based UUID generation and any other custom UUID generations libraries if available for UEFI in the future.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19009</commentid>
    <comment_count>4</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-06-01 11:28:14 +0000</bug_when>
    <thetext>This has been fixed and the changes are merged to the edk2-libc master / main repo.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3284</bug_id>
          
          <creation_ts>2021-03-30 01:40:15 +0000</creation_ts>
          <short_desc>Support Extended Control Register(XCR) read and write</short_desc>
          <delta_ts>2021-04-05 22:10:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="jiaxinwu">jiaxin.wu</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15448</commentid>
    <comment_count>0</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2021-03-30 01:40:15 +0000</bug_when>
    <thetext>Provide the libs to support writing the 64-bit value into the XCR0,and Read the  XCR values</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15465</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-30 21:37:03 +0000</bug_when>
    <thetext>Jiaxin is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15516</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-05 19:32:53 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/73633</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15517</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-05 20:19:09 +0000</bug_when>
    <thetext>Patch email for review V2

https://edk2.groups.io/g/devel/message/73633</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15518</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-05 22:10:37 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/4ac02962017c77bf38b462f970c884c2dc7931cf

GitHub PR:

https://github.com/tianocore/edk2/pull/1534</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3767</bug_id>
          
          <creation_ts>2021-12-06 00:24:05 +0000</creation_ts>
          <short_desc>Change DEBUG_CODE() to DEBUG_CODE_BEGIN/END() for complex C code  blocks</short_desc>
          <delta_ts>2022-01-14 20:08:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
    
    <cf_package>ArmPlatformPkg</cf_package>
    
    <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>CryptoPkg</cf_package>
    
    <cf_package>DynamicTablesPkg</cf_package>
    
    <cf_package>EmbeddedPkg</cf_package>
    
    <cf_package>EmulatorPkg</cf_package>
    
    <cf_package>FatPkg</cf_package>
    
    <cf_package>FmpDevicePkg</cf_package>
    
    <cf_package>IntelFsp2Pkg</cf_package>
    
    <cf_package>IntelFsp2WrapperPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
    
    <cf_package>PcAtChipsetPkg</cf_package>
    
    <cf_package>RedfishPkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
    
    <cf_package>SignedCapsulePkg</cf_package>
    
    <cf_package>SourceLevelDebugPkg</cf_package>
    
    <cf_package>StandaloneMmPkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
    
    <cf_package>UefiPayloadPkg</cf_package>
    
    <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17935</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-12-06 00:24:05 +0000</bug_when>
    <thetext>Discussion on mailing list related to uncrustify and interaction
with DEBBUG_CODE(Expression) macro

https://edk2.groups.io/g/devel/message/84362

Other options to add features to uncrustify were considered,
but were set aside because it would require adding EDK II
specific macro name information to the uncrustify tool.
Instead, the focus should be on formatting code using 
standard C parsing rules.

The definition of a macro called DEBUG_CODE() that takes
any block of C code as an argument is not something any
code formatting tool could handle well.  Changing to
DEBUG_CODE_BEGIN() and DEBUG_CODE_END() for complex
blocks of C code that include {} is a recommended to 
allow code formatting tools that have standard C parsers
to perform a reasonable job of formatting EDK II sources.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17936</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-12-06 00:25:00 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18150</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:08:17 +0000</bug_when>
    <thetext>This change was included in the uncrustify patch series
that was merged in the following PR:

    https://github.com/tianocore/edk2/pull/2242

This patch series is composed of 72 commits.  Push range: 
    https://github.com/tianocore/edk2/pull/2242/commits/8c2820c0502820d957b200f9d7ae3e15ecc6368e
    ...
    https://github.com/tianocore/edk2/pull/2242/commits/e0f4416242c7c6b7d06d8939f45da837df06a116

============================================================
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3737
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3767
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3760
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3739

* Update all use of EFI_D_* defines in DEBUG() macros to DEBUG_* defines.
* Update all use of &apos;, OPTIONAL&apos; to &apos; OPTIONAL,&apos; for function params.
* Change complex DEBUG_CODE() to DEBUG_CODE_BEGIN/END()
* Apply uncrustify changes to all package .c/.h files(BaseTools excluded)

devel@edk2.groups.io discussions:
* https://edk2.groups.io/g/devel/topic/uncrustify_conversion/87414953?p=,,,20,0,0,0::recentpostdate/sticky,,,20,2,0,87414953,previd=1638890440315310506,nextid=1638842194018157807&amp;previd=1638890440315310506&amp;nextid=1638842194018157807
* https://edk2.groups.io/g/devel/message/84132
* https://edk2.groups.io/g/devel/message/84112
* https://edk2.groups.io/g/devel/message/84074

Compare Build Results across all commits in this PR
* Detects any binary differences across entire patch series (obj, lib, dll, efi, ffs, fv, fd)
* repo: https://github.com/mdkinney/edk2
* ref1: 8c2820c0502820d957b200f9d7ae3e15ecc6368e
* ref2: e0f4416242c7c6b7d06d8939f45da837df06a116
* 30 VS2019 build comparisons. Pass 100%.  No binary differences detected.
* 40 GCC5 build comparisons. Pass 100%.    No binary differences detected.
* https://github.com/mdkinney/edk2/actions/runs/1550132292

Cc: Andrew Fish afish@apple.com
Cc: Leif Lindholm leif@nuviainc.com
Cc: Michael D Kinney michael.d.kinney@intel.com
Cc: Michael Kubacki michael.kubacki@microsoft.com</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3167</bug_id>
          
          <creation_ts>2021-01-14 08:05:10 +0000</creation_ts>
          <short_desc>CpuMp calls AllocatePool() to allocate &gt; 64KB memory</short_desc>
          <delta_ts>2021-01-21 22:30:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14808</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-01-14 08:05:10 +0000</bug_when>
    <thetext>When stack guard is enabled, the CpuMp driver allocates known good stacks for all CPUs. It uses AllocatePool to do so.

The allocation is StackSize (2K) * ExceptionNumber (2) * NumberOfProcessors (16) = 64KB in a 16-thread platform.

However, AllocatePool max allocation size is less than 64K.
To fix the issue, AllocatePages() should be used.

File: UefiCpuPkg\CpuMpPei\CpuMpPei.c
495:   ExceptionNumber = FixedPcdGetSize (PcdCpuStackSwitchExceptionList);
496:   NewStackSize = FixedPcdGet32 (PcdCpuKnownGoodStackSize) * ExceptionNumber;
497: 
498:   Status = PeiServicesAllocatePool (
499:              NewStackSize * NumberOfProcessors,
500:              (VOID **)&amp;StackTop
501:              );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14809</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-01-14 08:05:37 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14816</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-01-15 08:06:45 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14886</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-01-21 22:30:04 +0000</bug_when>
    <thetext>Reviewed in https://edk2.groups.io/g/devel/topic/79674591#70320
Commit in https://github.com/tianocore/edk2/commit/3b769c5110384fb33bcfeddced80f721ec7838cc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3648</bug_id>
          
          <creation_ts>2021-09-22 21:19:23 +0000</creation_ts>
          <short_desc>The SMI to handle the user authentication should be unregister before booting to OS</short_desc>
          <delta_ts>2021-10-13 21:12:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>UserAuthFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Hao">hao.shi</reporter>
          <assigned_to name="Shi Hao">hao.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17367</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Hao">hao.shi</who>
    <bug_when>2021-09-22 21:19:23 +0000</bug_when>
    <thetext>Edk2Platforms UserAuthenticationSmm works with a DXE driver to manage password in a HII setup menu. An SMI handler to perform password authentication and operate NV variable. The SMI handler is useless in OS runtime and should be unregister before booting to OS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17368</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Hao">hao.shi</who>
    <bug_when>2021-09-22 21:23:58 +0000</bug_when>
    <thetext>Just need to register a SmmExitBootService callback function and unregister this handler in this callback function.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17369</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Hao">hao.shi</who>
    <bug_when>2021-09-22 22:56:15 +0000</bug_when>
    <thetext>Wrong status are set in last comment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17374</commentid>
    <comment_count>3</comment_count>
    <who name="Shi Hao">hao.shi</who>
    <bug_when>2021-09-23 20:33:19 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/topic/patch/85815442?p=,,,20,0,0,0::recentpostdate/sticky,,,20,2,0,85815442,previd=1632422303522475006,nextid=1632387551065600697&amp;previd=1632422303522475006&amp;nextid=1632387551065600697

The patch has been send review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17539</commentid>
    <comment_count>4</comment_count>
    <who name="Shi Hao">hao.shi</who>
    <bug_when>2021-10-13 21:12:07 +0000</bug_when>
    <thetext>Patch is submitted via commit 23ca68c23dd600973e961de4368abacf4db8c5c0 by maintainer.
https://github.com/tianocore/edk2-platforms/commit/23ca68c23dd600973e961de4368abacf4db8c5c0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3537</bug_id>
          
          <creation_ts>2021-08-07 03:25:17 +0000</creation_ts>
          <short_desc>How do you find a good SEO company in Florida?</short_desc>
          <delta_ts>2021-08-09 22:46:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc>https://www.firstrankseoservices.com/seo-services-in-florida</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Jonsan smith">smitjohan267</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16824</commentid>
    <comment_count>0</comment_count>
    <who name="Jonsan smith">smitjohan267</who>
    <bug_when>2021-08-07 03:25:17 +0000</bug_when>
    <thetext>If you are searching for the best SEO company in Florida then first of all you should know the benefits of SEO for your website related business. Here is the list of some benefits of SEO business that you should keep in mind before to choose any service for you. More contact us:- https://www.firstrankseoservices.com/seo-services-in-florida</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16847</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-09 22:46:50 +0000</bug_when>
    <thetext>this is not an issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3434</bug_id>
          
          <creation_ts>2021-06-04 04:38:45 +0000</creation_ts>
          <short_desc>How can I withdraw cash app dispute the purchase if I pay them before?</short_desc>
          <delta_ts>2021-06-08 21:43:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bella Smith">bs9145130</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Specification Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16261</commentid>
    <comment_count>0</comment_count>
    <who name="Bella Smith">bs9145130</who>
    <bug_when>2021-06-04 04:38:45 +0000</bug_when>
    <thetext>Do not pay the people who do not believe (like a chicken in the supermarket or rent a new apartment). As a result, payments are generally instant and generally irrevocable. In general, if something looks too good to true for a real cash app dispute (like free money at a low cost), it’s a scam. Even if you list issues related to disputes information, you can visit the website.
 https://www.numbersforsupport.net/blog/cash-app-dispute/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16306</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-08 21:43:02 +0000</bug_when>
    <thetext>Invalid</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3926</bug_id>
          
          <creation_ts>2022-05-06 00:48:45 +0000</creation_ts>
          <short_desc>X64 Version  of FSP_TEMP_RAM_INIT API call must follow X64 Calling Convention</short_desc>
          <delta_ts>2022-06-21 13:33:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="cbduggap">chinni.b.duggapu</reporter>
          <assigned_to name="cbduggap">chinni.b.duggapu</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18940</commentid>
    <comment_count>0</comment_count>
    <who name="cbduggap">chinni.b.duggapu</who>
    <bug_when>2022-05-06 00:48:45 +0000</bug_when>
    <thetext>FSP_TEMP_RAM_INIT API consumes one input parameter FsptUpdDataPtr and this input needs to consume using RCX Register in X64 implementation.
However, Current implementation still uses Stack. 


Request to Modify the implementation to consume inputs using X64 Calling Convention instead of Stack.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18991</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 21:52:52 +0000</bug_when>
    <thetext>chinni.b.duggapu@intel.com: please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19103</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-06-21 13:33:06 +0000</bug_when>
    <thetext>patch merged:
IntelFsp2Pkg: https://github.com/tianocore/edk2/commit/11d8abcba2fcc067778778f6cb2be870c831919d
IntelFsp2WrapperPkg: https://github.com/tianocore/edk2/commit/df1c7e91b46db364ba1ce5e21660987c29c35334</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3307</bug_id>
          
          <creation_ts>2021-04-07 15:03:52 +0000</creation_ts>
          <short_desc>Cleanup and consolidate SpiFlashCommonLib instances</short_desc>
          <delta_ts>2021-11-03 10:20:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15549</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-04-07 15:03:52 +0000</bug_when>
    <thetext>SpiFlashCommonLib is duplicated in multiple places across the MinPlatform design in edk2-platforms. I&apos;m planning to build some additional functionality on top of SpiFlashCommonLib and, ideally, this duplication will be consolidated into a single instance usable across all current library consumers.

The library interface is currently defined in the following header files:
 1. Platform\Intel\MinPlatformPkg\Include\Library\SpiFlashCommonLib.h
 2. Silicon\Intel\SimicsIch10Pkg\Include\Library\SpiFlashCommonLib.h
 3. Silicon\Intel\KabylakeSiliconPkg\Pch\Include\Library\SpiFlashCommonLib.h
 4. Silicon\Intel\CoffeelakeSiliconPkg\Pch\Include\Library\SpiFlashCommonLib.h

Instances of SmmSpiFlashCommonLib implementation exist in a mix of platform and silicon packages:
 1. Silicon\Intel\SimicsIch10Pkg\Library\SmmSpiFlashCommonLib\SmmSpiFlashCommonLib.inf
 2. Platform\Intel\TigerlakeOpenBoardPkg\Library\SmmSpiFlashCommonLib\SmmSpiFlashCommonLib.inf
 3. Silicon\Intel\KabylakeSiliconPkg\Pch\Library\SmmSpiFlashCommonLib\SmmSpiFlashCommonLib.inf
 4. Silicon\Intel\CoffeelakeSiliconPkg\Pch\Library\SmmSpiFlashCommonLib\SmmSpiFlashCommonLib.inf
 5. Platform\Intel\MinPlatformPkg\Flash\Library\SpiFlashCommonLibNull\SpiFlashCommonLibNull.inf

The library class is currently consumed in the following INFs:
 1. Platform\Intel\MinPlatformPkg\Flash\SpiFvbService\SpiFvbServiceSmm.inf
 2. Platform\Intel\MinPlatformPkg\Flash\SpiFvbService\SpiFvbServiceStandaloneMm.inf

My understanding is:

1. The header file is defined in each silicon package because silicon cannot depend upon platform (i.e. the MinPlatformPkg
header).

2. The header is present in each silicon package because the implementation is silicon-specific and these packages cannot
depend on one another.

3. The header is defined in MinPlatformPkg because MinPlatformPkg should be silicon vendor agnostic (cannot depend on the
silicon packages).

4. The header is needed in MinPlatformPkg because the SpiFvbService there depends on SPI flash operations implemented in
SpiFlashCommonLib.

--------------------------------------

I sent a RFC to the edk2 mailing list in the following thread:
https://edk2.groups.io/g/devel/message/71701

The following changes were agreed upon:

 1. Consolidate the library interface into a single header in IntelSiliconPkg.
 2. Consolidate the library implementation into a single instance in IntelSiliconPkg.
 3. Move SpiFvbServiceSmm out of MinPlatformPkg into IntelSiliconPkg.
 4. Add SpiFvbServiceStandaloneMm to IntelSiliconPkg sharing implementation with SpiFvbServiceSmm where appropriate.

Intel board packages would then use the SpiFlashCommonLib from IntelSiliconPkg (a generation specific instance could be created if needed) and use the SpiFvbServiceXyz driver from IntelSiliconPkg.

A key point in the above set of changes is that a SPI access abstraction already exists with the Firmware Volume Block protocol (defined in MdePkg).

The original design that led to duplication essentially had a a driver that produced a protocol with the assistance of a helper library. These changes, as proposed, would consolidate this design into IntelSiliconPkg since it is currently specific to Intel platforms.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15660</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-13 22:03:44 +0000</bug_when>
    <thetext>Michael is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15714</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-04-16 12:37:56 +0000</bug_when>
    <thetext>V1 series: https://edk2.groups.io/g/devel/message/74153</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16100</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-05-19 00:17:32 +0000</bug_when>
    <thetext>V2 series: https://edk2.groups.io/g/devel/message/75306</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16394</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-06-17 22:17:29 +0000</bug_when>
    <thetext>V3 series: https://edk2.groups.io/g/devel/message/76694</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16470</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-06-25 21:00:49 +0000</bug_when>
    <thetext>V4 series: https://edk2.groups.io/g/devel/message/77097</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16888</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-11 21:41:59 +0000</bug_when>
    <thetext>V5 series: https://edk2.groups.io/g/devel/message/78600</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17217</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-08 20:30:36 +0000</bug_when>
    <thetext>Still waiting on this series to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17624</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-10-28 18:14:10 +0000</bug_when>
    <thetext>V6 series: https://edk2.groups.io/g/devel/message/82819</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17664</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-03 10:20:17 +0000</bug_when>
    <thetext>Patch series pushed to edk2-platforms/master starting in commit https://github.com/tianocore/edk2-platforms/commit/04bfa22c3859458bf8f230571afd09101ea3197d and ending in commit https://github.com/tianocore/edk2-platforms/commit/bae4725bfeab2610b39496d9c0b8754794fd1264.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3184</bug_id>
          
          <creation_ts>2021-01-22 14:53:05 +0000</creation_ts>
          <short_desc>Add MM_STANDALONE support to SmiHandlerProfileLibNull</short_desc>
          <delta_ts>2021-02-01 12:23:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14893</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-01-22 14:53:05 +0000</bug_when>
    <thetext>The NULL instance of SmiHandlerProfileLib can support Standalone MM modules with minimal change and would be useful in some Traditional MM environments that are being converted to support Standalone MM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14894</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-01-22 14:53:30 +0000</bug_when>
    <thetext>I will send a patch with the change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14897</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-01-22 16:53:06 +0000</bug_when>
    <thetext>V1 patch on the list - https://edk2.groups.io/g/devel/message/70694</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14945</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-01 12:23:54 +0000</bug_when>
    <thetext>Pushed to edk2 master - https://github.com/tianocore/edk2/commit/ea56ebf67dd55483105aa9f9996a48213e78337e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3677</bug_id>
          
          <creation_ts>2021-10-06 06:34:07 +0000</creation_ts>
          <short_desc>Ext4Pkg does not support symbolic links</short_desc>
          <delta_ts>2022-09-15 17:02:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>krichanov</reporter>
          <assigned_to name="Pedro Falcato">pedro.falcato</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>pedro.falcato</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17443</commentid>
    <comment_count>0</comment_count>
    <who name="">krichanov</who>
    <bug_when>2021-10-06 06:34:07 +0000</bug_when>
    <thetext>Symbolic links can be useful for finding all possible boot options of different Linux distributions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17505</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-12 21:40:39 +0000</bug_when>
    <thetext>This is a new feature. Need to decide whether add it into the supported scope.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17521</commentid>
    <comment_count>2</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2021-10-12 21:56:24 +0000</bug_when>
    <thetext>The need for symbolic link support was discovered in one of our drivers, namely OpenLinuxBoot (https://github.com/acidanthera/OpenCorePkg/tree/master/Platform/OpenLinuxBoot). It detects and boots Linux distros, which are installed according to the Boot Loader Specification (https://systemd.io/BOOT_LOADER_SPECIFICATION/) or to the closely related systemd BootLoaderSpecByDefault (https://fedoraproject.org/wiki/Changes/BootLoaderSpecByDefault). In other words it boots Linux distros without GRUB.

Finding available boot options requires looking through certain directories, which in different distros can be (and really are) symbolic links to other directories. In such cases OpenLinuxBoot fails to boot Linux with the help of Ext4Pkg. Examples: Fedora Silverblue has symlinks for /boot directory, Debian 10/11 has symlinks for /bin/sh.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18723</commentid>
    <comment_count>3</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2022-03-27 22:40:03 +0000</bug_when>
    <thetext>Sorry for taking so long to get to this, this completely slipped my mind!
I&apos;ll write something up and submit a patch for this in the next few days. Do note that whatever symlinking can be done in UEFI land isn&apos;t guaranteed to work as well as in Linux since firmware has no mount points, so you&apos;re stuck navigating your way through the boot/root partition.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19583</commentid>
    <comment_count>4</comment_count>
    <who name="Pedro Falcato">pedro.falcato</who>
    <bug_when>2022-09-15 17:02:59 +0000</bug_when>
    <thetext>Fixed as of e81432f and 76fc44f.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3072</bug_id>
          
          <creation_ts>2020-11-11 14:41:35 +0000</creation_ts>
          <short_desc>Develop a way to support host-test entry points while complying with ECC</short_desc>
          <delta_ts>2021-07-27 11:58:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3206</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Bret Barkelew">bret.barkelew</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14335</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-11-11 14:41:35 +0000</bug_when>
    <thetext>Can assign to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14525</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 21:24:24 +0000</bug_when>
    <thetext>Bret will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16706</commentid>
    <comment_count>2</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-07-27 11:58:27 +0000</bug_when>
    <thetext>Completed. An example can be seen in this test:
https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Universal/Variable/RuntimeDxe/RuntimeDxeUnitTest/VariableLockRequestToLockUnitTest.c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3556</bug_id>
          
          <creation_ts>2021-08-11 05:28:41 +0000</creation_ts>
          <short_desc>Methods to talk to a Cash App representative quickly:</short_desc>
          <delta_ts>2021-08-16 21:47:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="howard123">howardpotts797</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202008</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          <cf_documents>EDK II Template Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16873</commentid>
    <comment_count>0</comment_count>
    <who name="howard123">howardpotts797</who>
    <bug_when>2021-08-11 05:28:41 +0000</bug_when>
    <thetext>Knowing the methods to talk to a Cash App representative quickly can help you to get rid of the unexpected issues with your cash app account. The need for online payment is increasing gradually, thus, looking for working tips is necessary. Problems based on different factors are the most disturbing element and hence you should be very cautious for such aspects to manage cash app account.
https://www.pcmonks.net/cash-app-customer-service-phone-number.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16925</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:47:02 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3455</bug_id>
          
          <creation_ts>2021-06-12 07:34:34 +0000</creation_ts>
          <short_desc>RSA PSS API had better enforce SaltSize to be same as DigestSize</short_desc>
          <delta_ts>2021-06-23 11:43:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Sachin Agrawal">sachin.agrawal</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jian.j.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16355</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-12 07:34:34 +0000</bug_when>
    <thetext>In https://github.com/tianocore/edk2/blob/master/CryptoPkg/Library/BaseCryptLib/Pk/CryptRsaPss.c and https://github.com/tianocore/edk2/blob/master/CryptoPkg/Library/BaseCryptLib/Pk/CryptRsaPssSign.c, it uses below check

===============
  if (SaltLen &lt; DigestLen) {
    return FALSE;
  }
===============

See [reference], I think the best practice is to enforce SaltLen == DigestLen, unless there is real case which requires different SaltLen.





[reference]

0) RFC 8017 - PKCS #1: RSA Cryptography Specifications Version 2.2 (https://datatracker.ietf.org/doc/rfc8017/)

4.  Typical salt lengths in octets are hLen (the length of the output
       of the hash function Hash) and 0.  In both cases, the security of
       RSASSA-PSS can be closely related to the hardness of inverting
       RSAVP1.  Bellare and Rogaway [RSARABIN] give a tight lower bound
       for the security of the original RSA-PSS scheme, which
       corresponds roughly to the former case, while Coron [FDH] gives a
       lower bound for the related Full Domain Hashing scheme, which
       corresponds roughly to the latter case.  In [PSSPROOF], Coron
       provides a general treatment with various salt lengths ranging
       from 0 to hLen; see [IEEE1363A] for discussion.  See also
       [JONSSON], which adapts the security proofs in [RSARABIN]
       [PSSPROOF] to address the differences between the original and
       the present version of RSA-PSS as listed in Note 1 above.


1) TPM2 Library Specification, part 2 structure (https://trustedcomputinggroup.org/wp-content/uploads/TCG_TPM2_r1p64_Part2_Structures_15may2021.pdf) describes the PSS salt length.

 

For the TPM_ALG_RSAPSS signing scheme, ...

.... The salt size is

always the largest salt value that will fit into the available space.

 

 

2) NIST FIPS 186-5 draft (https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-5-draft.pdf) and NIST FIPS 186-4 (https://doi.org/10.6028/NIST.FIPS.186-4) says:

 

For RSASSA-PSS,

the length (in bytes) of the salt (sLen) shall satisfy 0 ≤ sLen ≤ hLen

 

3) TCG FIPS 140-2 Guidance for TPM2 (https://trustedcomputinggroup.org/resource/tcg-fips-140-2-guidance-for-tpm-2-0/) mentions:

 

Language in [1] Part 1 Appendix B.7 RSASSA_PSS indicates:

    &quot;For both restricted and unrestricted signing keys, the random salt length will be the largest

    size allowed by the key size and message digest size.

NOTE If the TPM implementation is required to be compliant with FIPS 186-4, then the random

    salt length will be the largest size allowed by that specification.&quot;

 

4) TLS1.3 - RFC8446 (https://datatracker.ietf.org/doc/rfc8446/) has below.

 

   RSASSA-PSS PSS algorithms:

      The length of the Salt MUST be equal to the length of the digest

      algorithm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16377</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-15 21:39:14 +0000</bug_when>
    <thetext>please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16444</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2021-06-23 11:43:51 +0000</bug_when>
    <thetext>Reviewed @ https://edk2.groups.io/g/devel/message/76492
Pushed @ https://github.com/tianocore/edk2/commit/20ca52882877ba9025da2ee58c8dab7808eca457</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3959</bug_id>
          
          <creation_ts>2022-06-23 05:00:38 +0000</creation_ts>
          <short_desc>[Silicon][Intel][FitGen] Support to override the MBZ byte in Startup ACM entries for other usages</short_desc>
          <delta_ts>2022-07-08 09:24:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason Lin">jason1.lin</reporter>
          <assigned_to name="Jason Lin">jason1.lin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19128</commentid>
    <comment_count>0</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-06-23 05:00:38 +0000</bug_when>
    <thetext>This FR is used for to allow user override the MBZ byte for other purpose usage
in Type 2 S-ACM entry.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19129</commentid>
    <comment_count>1</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-06-23 05:01:03 +0000</bug_when>
    <thetext>1. As per FIT BIOS Specification 1.2 Rules, the size bytes (3 bytes) / reserved byte (1 byte) / CheckSum byte (1 byte) in type 2 are must-be-zero (MBZ).
2. These bytes could be override for the other usages.
3. In the future, if these bytes field have other meanings, there would be no need to change the FitGen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19218</commentid>
    <comment_count>2</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-07-08 09:23:10 +0000</bug_when>
    <thetext>The code change had been merged to codebase.

[1]
Silicon/Intel/FitGen: Support multiple Startup ACM Type 2 entries in FitGen tool
SHA-ID: da13a4a1aa77f9d4e512e043d93b9ddf52580e2a
https://github.com/tianocore/edk2-platforms/commit/da13a4a1aa77f9d4e512e043d93b9ddf52580e2a

[2]
Silicon/Intel/FitGen: Reduce the typecasting and pointer usage
SHA-ID: e0bde4be87058c74a3b4ef54a1df058766471345
https://github.com/tianocore/edk2-platforms/commit/e0bde4be87058c74a3b4ef54a1df058766471345

Mark this Bugzilla as resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19219</commentid>
    <comment_count>3</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-07-08 09:24:40 +0000</bug_when>
    <thetext>[3]
Silicon/Intel/FitGen: Support Startup ACM entries (Type 2) 0x200 Version

Command:
[-S &lt;StartupAcmAddress StartupAcmSize&gt;|&lt;StartupAcmGuid&gt;]
[-I &lt;StartupAcmFMS StartupAcmFMSMask&gt;]
[-V &lt;StartupAcmVersion&gt;]

SHA-ID: 4775d4e4f890bef9b14c798a1707d3424231947b
https://github.com/tianocore/edk2-platforms/commit/4775d4e4f890bef9b14c798a1707d3424231947b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3338</bug_id>
          
          <creation_ts>2021-04-14 18:32:44 +0000</creation_ts>
          <short_desc>Clarify NVMe device path EUI-64 byte order</short_desc>
          <delta_ts>2022-04-20 17:18:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>pjones</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15683</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-14 18:32:44 +0000</bug_when>
    <thetext>REF:


The UEFI Spec is ambiguous when it comes to the byte-order of EUI-64 fields for NVMe (and Infiniband) device path nodes

See: https://bugzilla.tianocore.org/show_bug.cgi?id=3291 and https://bugzilla.tianocore.org/show_bug.cgi?id=3292

The UEFI specification for the NVme() node refers to NVM Express Specification.

In the &quot;NVM Express Base Specification&quot;, NVM Express Revision 1.4b ,September 21, 2020, chapter 7.10.4IEEE Extended Unique Identifier (EUI64) we find:

&quot;EUI64 is defined in big endian format.&quot;

But TianoCore implemented NVMe device path as Little endian:
* DevPathToTextNVMe()
* DevPathFromTextNVMe() - both in BaseTools and MdePkg
* TranslatePciOfwNodes()


Similar issue exists for Infiniband:

10.3.4.15 InfiniBand Device Path
&quot;IOC GUID/Service ID : 64-bit unique identifier to remote IOC or server process. Interpretation of field specified by Resource Flags (bit 0) Target Port ID : 64-bit persistent ID of remote IOC port Device ID: 64-bit persistent ID of remote device&quot;

Table 10-61:
&quot;ServiceId, TargetId and DeviceId are 64-bit unsigned integers.&quot;

15.5.4 InfiniBand Device Path Example
&quot; The SCSI Host Adapter is a PCI device that is located at PCI device number 0x07 and PCI function 0x00, and is directly attached to a PCI root bridge. The SCSI device is addressed by the (IOU X, IOC Y, DeviceId Z) in the InfiniBand Network. (X, Y, Z are EUI-64 compliant identifiers).&quot;


Just like NVMe, in this case, it is not clear if the UEFI spec intended for infiniband to big or little endian. But the Infiniband spec (https://cw.infinibandta.org/document/dl/7161 ) uses big-endian for all of these EUI-64 IDs. The EDK2 implementation DevPathFromTextInfiniband () seems to also be using little endian.


Looking more into the spec, I see that there was conscious effort to use little endian in other device path types that contain 64-bit values, even though the original spec defined it as big-endian. See for example:

10.3.4.3 Fibre Channel Device Path
&quot;When an application client displays or otherwise makes a 64-bit LUN visible to a user, it should be done in conformance with SAM-4. SAM-4 requires a LUN to be displayed in hexadecimal format with byte 0 first (i.e., on the left) and byte 7 last (i.e., on the right) regardless of the internal representation of the LUN. UEFI defines all data structures a “little endian” and SCSI defines all data structures as “big endian”.&quot;

10.3.4.20 Serial Attached SCSI (SAS) Ex Device Path &quot;This section defines the extended device node for Serial Attached SCSI (SAS) devices. In this device path the SAS Address and LUN are now defined as arrays to remove the need to endian swap the values.&quot;
...
&quot;When an application client displays or otherwise makes a 64-bit LUN (8 byte array) visible to a user, it should be done in conformance with SAM-4. SAM-4 requires a LUN to be displayed in hexadecimal format with byte 0 first (i.e., on the left) and byte 7 last (i.e., on the right) regardless of the internal representation of the LUN. UEFI defines all data structures a “little endian” and SCSI defines all data structures as “big endian”.&quot;


Given that EDK2 implementation of NVMe and Infiiniband device paths is little endian, and the explicit sentences on using little endian for SAS and Fibre channel, I am inclined to say the UEFI spec intended for NVMe and Infiniband EUI-64 to be little endian. 


If this is the case, then we need a clarification in the UEFI spec similar to the statements added for SAS and Fibre Channel.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15699</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-15 05:56:20 +0000</bug_when>
    <thetext>(In reply to Samer El-Haj-Mahmoud from comment #0)

&gt; Given that EDK2 implementation of NVMe and Infiiniband device paths is
&gt; little endian, and the explicit sentences on using little endian for SAS and
&gt; Fibre channel, I am inclined to say the UEFI spec intended for NVMe and
&gt; Infiniband EUI-64 to be little endian. 

I agree; as far as I can tell, UEFI has been consciously little endian as much as possible. If we have particular omissions in the spec regarding byte order, I think that should be considered a wording inconsistency, not an inconsistency of intent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16002</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-11 17:32:47 +0000</bug_when>
    <thetext>Heinrich,

Can you please comment, since you opened the original BZ code issues?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16003</commentid>
    <comment_count>3</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-11 17:33:45 +0000</bug_when>
    <thetext>In Progress in USWG ECR: https://mantis.uefi.org/mantis/view.php?id=2227</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16079</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-17 11:54:00 +0000</bug_when>
    <thetext>&gt; Heinrich, Can you please comment, since you opened the original BZ code issues?

I am fine if the existing implementation of EDK II is specified as normative.
I have not access to manis.uefi.org to reviewe the change request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16274</commentid>
    <comment_count>5</comment_count>
      <attachid>733</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-06-06 10:59:19 +0000</bug_when>
    <thetext>Created attachment 733
Clarify NVMe and Infiniband EUI-64 DP</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16276</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-06 11:44:30 +0000</bug_when>
    <thetext>There is a typo %s/a/as/ in the sentence below (occurs twice in the attachment):

UEFI defines all data structures a “little endian” and IEEE defines EUI-64 as “big endian”.&quot;

Otherwise as the maintainer of the UEFI sub-system in U-Boot I am fine with the proposed change in the attachment and will adjust the code once the erratum is published.

Reviewed-by: Heinrich Schuchardt &lt;xypron.glpk@gmx.de&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16278</commentid>
    <comment_count>7</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-06 14:00:48 +0000</bug_when>
    <thetext>*** Bug 3291 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16280</commentid>
    <comment_count>8</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-06 14:01:31 +0000</bug_when>
    <thetext>*** Bug 3292 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16290</commentid>
    <comment_count>9</comment_count>
      <attachid>734</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-06-07 18:26:13 +0000</bug_when>
    <thetext>Created attachment 734
CodeFirst_Clarify_NVMe_IB_EUI64_DP_ver2

Updated ECR with the typo correction</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16502</commentid>
    <comment_count>10</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-06-30 16:13:28 +0000</bug_when>
    <thetext>Feedback from Heinrich Schuchardt &lt;xypron.glpk@gmx.de&gt; :




I just looked at what EDK II is currently doing for the eui64:

EDK II Device Path
PcieRoot(0x0)/Pci(0x0,0x0)/NVMe(0x1,E7-66-03-81-B5-38-25-00)

Variable NV+RT+BS &apos;EFIGlobalVariable:Boot000B&apos; DataSize = 0x9E
  00000000: 01 00 00 00 26 00 55 00-45 00 46 00 49 00 20 00  *....&amp;.U.E.F.I. .*
  00000010: 53 00 41 00 4D 00 53 00-55 00 4E 00 47 00 20 00  *S.A.M.S.U.N.G. .*
  00000020: 4D 00 5A 00 56 00 4C 00-57 00 32 00 35 00 36 00  *M.Z.V.L.W.2.5.6.*
  00000030: 48 00 45 00 48 00 50 00-2D 00 30 00 30 00 30 00  *H.E.H.P.-.0.0.0.*
  00000040: 4C 00 37 00 20 00 53 00-33 00 35 00 45 00 4E 00  *L.7..S.3.5.E.N.*
  00000050: 41 00 32 00 4B 00 35 00-33 00 30 00 31 00 38 00  *A.2.K.5.3.0.1.8.*
  00000060: 35 00 20 00 31 00 00 00-02 01 0C 00 D0 41 08 0A  *5..1........A..*
  00000070: 00 00 00 00 01 01 06 00-00 00 03 17 10 00 01 00  *................*
  00000080: 00 00 00 25 38 B5 81 03-66 E7 7F FF 04 00 4E AC  *...%8...f.....N.*
  00000090: 08 81 11 9F 59 4D 85 0E-E2 1A 52 2C 59 B2        *....YM....R,Y.*

In Linux I see:

sudo smartctl -a /dev/nvme0n1
Namespace 1 IEEE EUI-64:            002538 b5810366e7

sudo nvme id-ns /dev/nvme0n1
eui64   : 002538b5810366e7

Either both smartctl and NVMe both err in how they output the EUI-64 or
the EUI-64 in the device path of EDK II is not little endian.

Smartmontools defines eui-64 as unsigned char[8]. Printing is is in the
natural sequence.

The namespace field is filled by a call to the NVMe controller. So it
should be in the same sequence as on the controller.



for testing NVMe namespace EUI64 in UEFI firmware with QEMU HEAD you can
use the patch below. It provides a new parameter eui64 for namespaces.

qemu-system-x86_64 -machine pc-i440fx-2.5 -m 1G -smp cores=2 \
        -bios u-boot.rom -nographic -gdb tcp::1234 \
        -drive file=../sandbox.img,if=none,format=raw,id=nvme1n0 \
        -device nvme,id=nvme-ctrl-0,serial=deadbeef \
        -device nvme-ns,drive=nvme1n0,eui64=0x123456789ABCDEF0 \
        -netdev user,id=eth0,tftp=tftp -device e1000,netdev=eth0 \
        -device virtio-rng-pci</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16504</commentid>
    <comment_count>11</comment_count>
    <who name="Peter Jones">pjones</who>
    <bug_when>2021-06-30 16:54:20 +0000</bug_when>
    <thetext>&gt; In Linux I see:
&gt;
&gt; sudo smartctl -a /dev/nvme0n1
&gt; Namespace 1 IEEE EUI-64:            002538 b5810366e7
&gt;
&gt; sudo nvme id-ns /dev/nvme0n1
&gt; eui64   : 002538b5810366e7

FWIW, we also have the same byte order in libefivar (and thus efibootmgr):

# efibootmgr -C -b 0006 -d /dev/nvme0n1p1 -p 1 -L test -l &apos;/EFI/fedora/shimx64.efi&apos; -e 3 -v | grep 0006
Boot0006* test	PciRoot(0x2)/Pci(0x1,0x4)/Pci(0x0,0x0)/NVMe(0x1,00-25-38-55-91-50-87-05)/HD(1,GPT,927f5841-dc54-4ff4-821c-d29b59c48ab1,0x800,0x1ff800)/File(\EFI\fedora\shimx64.efi)

Where the other two commands give:

[root@random ~]# nvme id-ns /dev/nvme0n1 | grep eui64
eui64   : 0025385591508705
[root@random ~]# smartctl -a /dev/nvme0n1 | grep EUI-64
Namespace 1 IEEE EUI-64:            002538 5591508705

So if that&apos;s wrong we&apos;ll need to fix it there as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16506</commentid>
    <comment_count>12</comment_count>
    <who name="Peter Jones">pjones</who>
    <bug_when>2021-06-30 16:58:28 +0000</bug_when>
    <thetext>&gt; # efibootmgr -C -b 0006 -d /dev/nvme0n1p1 -p 1 -L test -l
&gt; &apos;/EFI/fedora/shimx64.efi&apos; -e 3 -v | grep 0006
&gt; Boot0006* test
&gt; PciRoot(0x2)/Pci(0x1,0x4)/Pci(0x0,0x0)/NVMe(0x1,00-25-38-55-91-50-87-05)/
&gt; HD(1,GPT,927f5841-dc54-4ff4-821c-d29b59c48ab1,0x800,0x1ff800)/
&gt; File(\EFI\fedora\shimx64.efi)

Oh, and for completion, the relevant binary device path looks like:

00000030  01 00 00 00 00 25 38 55  91 50 87 05 04 01 2a 00  |.....%8U.P....*.|</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16968</commentid>
    <comment_count>13</comment_count>
      <attachid>803</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-18 18:11:18 +0000</bug_when>
    <thetext>Created attachment 803
ECR - proposal ver3

Updated proposal based on the data provided in comment 10 comment 11 and comment 12.

Please comment on the approach.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16994</commentid>
    <comment_count>14</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-08-19 08:26:19 +0000</bug_when>
    <thetext>Samer, you suggest to add the following text to the UEFI spec;

&quot;When an application client displays or otherwise makes the EUI-64 identifiers visible to a user, the values should be displayed in hexadecimal format with byte 0 first (i.e., on the left) and byte 7 last (i.e., on the right) regardless of the internal representation of the EUI-64.”

But according to &quot;ECR - proposal ver3&quot; the device-path-to text protocol renders the EUI-64 in reverse order (byte 7 first, byte 0 last). Software like iPXE and the UEFI Shell display the output of the device-path-to-text-protocol.

This implies that after the addition of the paragraph the EDK II implementation of this protocol would have to be changed. But I cannot see this in your proposal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16995</commentid>
    <comment_count>15</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-08-19 08:47:27 +0000</bug_when>
    <thetext>I am still missing a clear statement in the UEFI specification defining how an EUI-64 must be stored in the device path.

..

The output of the device path to text protocol is not an &quot;internal representation&quot;; it is a printable string. Don&apos;t expect any software to try to change the sequence of the characters before output.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17070</commentid>
    <comment_count>16</comment_count>
      <attachid>813</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-25 13:41:48 +0000</bug_when>
    <thetext>Created attachment 813
proposal ver4

Updated proposal to address the typo (issue in comment 14), and add pointers to the some of the impacted FW/OS implementations</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17071</commentid>
    <comment_count>17</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-25 13:44:57 +0000</bug_when>
    <thetext>Opens / discussion points from Heinrich:

In the UEFI spec I would like to see a clear statement how the bytes of
an EUI-64 are stored in the device path node (in chapter &quot;10.3.4.22 NVM
Express namespace messaging device path node&quot;) and what the output in
the device path protocol must look like (in table &quot;10-62 Device Node
Table&quot;).

&gt;
&gt;   - EDK2 implementation of Devicepath to text puts the NVME EUI64 byte 7 first, and byte 0 last ( https://github.com/tianocore/edk2/blob/master/MdePkg/Library/UefiDevicePathLib/DevicePathToText.c#L788). This new UEFI spec language should allow the EDK2 implementation to match the spec, correct?

Is this byte 7 of the (low-endian?) internal representation or byte 7 of
the EUI-64?

Could you, please, add output from the UEFI shell to your paper so that
it becomes clear what the current implementation of the device path to
text protocol produces in comparison to all other tools.

&gt;
&gt;   - UBoot does its own NVMe EIO64 binary to text device path conversion (https://github.com/u-boot/u-boot/blob/master/lib/efi_loader/efi_device_path_to_text.c#L185). Does it need to change to match the EDK2 implementation and the new UEFI spec, or is this already the case?

We should run both U-Boot and EDK II  with the same NVMe and compare the
internal and external representation.

Current QEMU can take the EUI-64 as argument if you do not have a
physical device. See
https://qemu.readthedocs.io/en/latest/system/devices/nvme.html?highlight=eui64#additional-namespaces</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18451</commentid>
    <comment_count>18</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-02-23 03:01:37 +0000</bug_when>
    <thetext>EDK II called via QEMU 6.1 called with

-drive file=$(ARCH).img,format=raw,if=none,id=NVME1 \
-device nvme,id=nvme-ctrl-0,serial=nvme-1 \
-device nvme-ns,drive=NVME1,eui64=0xdeadbeef \

shows the drive as

PciRoot(0x0)/Pci(0x4,0x0)/NVMe(0x1,EF-BE-AD-DE-00-00-00-00)/HD(1,GPT,82C9E3C6-7D9A-4A83-AD5F-E46160C5A6F7,0x800,0x7FF7DF)

The device path node stores the EUI-64 as &apos;00 00 00 00 DE AD BE EF&apos;:

Shell&gt; setvar Boot0004
8BE4DF61-93CA-11D2-AA0D-00E098032B8C - Boot0004 - 0076 Bytes
01 00 00 00 26 00 55 00 45 00 46 00 49 00 20 00 51 00 45 00 4D 00 55 00 20 00 4E 00 56 00 4D 00 65 00 20 00 43 00 74 00 72 00 6C 00 20 00 6E 00 76 00 6D 00 65 00 2D 00 31 00 20 00 31 00 00 00 02 01 0C 00 D0 41 03 0A 00 00 00 00 01 01 06 00 00 04 03 17 10 00 01 00 00 00 00 00 00 00 DE AD BE EF 7F FF 04 00 4E AC 08 81 11 9F 59 4D 85 0E E2 1A 52 2C 59 B2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18452</commentid>
    <comment_count>19</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-02-23 05:18:09 +0000</bug_when>
    <thetext>The IEEE has published:

Guidelines for Use of Extended Unique Identifier (EUI), Organizationally Unique Identifier (OUI), and Company ID (CID)

https://standards.ieee.org/wp-content/uploads/import/documents/tutorials/eui.pdf

In chapter EUI Structure and Representation it is indicated that in the hexadecimal representations byte 7 should be last.

It does not make sense to use a representation in UEFI that contradicts IEEE standards.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18454</commentid>
    <comment_count>20</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-02-23 13:34:02 +0000</bug_when>
    <thetext>Considering that the EDK2 implementation is has been shipping for many years on systems (and devices with OptionROMs), there is strong hesitancy to updating the UEFI spec language to contradict the existing industry-wide implementation. 

I suggest we update the UEFI spec language to match the EDK2 implementation in this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18456</commentid>
    <comment_count>21</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-02-23 15:48:55 +0000</bug_when>
    <thetext>Looks like UBoot is updating the code to match the language in this ECR, and the EDK2 implementation

https://patchwork.ozlabs.org/project/uboot/patch/20220223080624.50653-1-heinrich.schuchardt@canonical.com/


The converged language from ver4 of the proposal (attached) is:

&quot;When an application client displays or otherwise makes the EUI-64
identifiers visible to a user, the values should be displayed in
hexadecimal format with byte 7 first (i.e., on the left) and byte
0 last regardless of the internal representation of the EUI-64.&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18879</commentid>
    <comment_count>22</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-04-20 17:18:11 +0000</bug_when>
    <thetext>This was approved in USWG meeting 3/25 as submitted without change, an errata to UEFI 2.9. Implementation may proceed with this ECR</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>733</attachid>
            <date>2021-06-06 10:59:19 +0000</date>
            <delta_ts>2021-06-06 10:59:19 +0000</delta_ts>
            <desc>Clarify NVMe and Infiniband EUI-64 DP</desc>
            <filename>CodeFirst_Clarify_NVMe_IB_EUI64_DP.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>22571</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>734</attachid>
            <date>2021-06-07 18:26:13 +0000</date>
            <delta_ts>2021-06-07 18:26:13 +0000</delta_ts>
            <desc>CodeFirst_Clarify_NVMe_IB_EUI64_DP_ver2</desc>
            <filename>CodeFirst_Clarify_NVMe_IB_EUI64_DP_ver2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>22584</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>803</attachid>
            <date>2021-08-18 18:11:18 +0000</date>
            <delta_ts>2021-08-18 18:11:18 +0000</delta_ts>
            <desc>ECR - proposal ver3</desc>
            <filename>CodeFirst_Clarify_NVMe_IB_EUI64_DP_ver3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>23367</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>813</attachid>
            <date>2021-08-25 13:41:48 +0000</date>
            <delta_ts>2021-08-25 13:41:48 +0000</delta_ts>
            <desc>proposal ver4</desc>
            <filename>CodeFirst_Clarify_NVMe_IB_EUI64_DP_ver4.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>24116</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3209</bug_id>
          
          <creation_ts>2021-02-03 11:45:08 +0000</creation_ts>
          <short_desc>ECC: deal with (lack of) leading comments on functions more flexibly</short_desc>
          <delta_ts>2023-01-03 04:26:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3206</blocked>
          <everconfirmed>0</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15001</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-03 11:45:08 +0000</bug_when>
    <thetext>ECC currently enforces that every single function declaration and function definition have a full-blown leading comment, using the doxygen-inspired style that&apos;s described in the Edk2 C Coding Standards document.

This is too heavy-handed, and leads to inconsistencies and to bad signal-to-noise ratio in the codebase. Every time a function prototype (such as a library class API, or a protocol member function) is implemented with a function definition, the leading comment block is uselessly copied around. And if a single patch series introduces both the library class and the library instance(s), then, during the multiple iterations of patch review, it&apos;s easy for the contributor to update only one instance of the leading comment, and forget the other instance(s).

The requested behavior is as follows:

* For function declarations:

- Recognize a specially formatted *short* leading comment that marks the function as *singleton*, meaning that only a single implementation (definition) of the function is ever expected. In this case, the actual documentation of the function is expected to precede the *definition* of the function, not the *declaration*. This feature is useful because text editors compatible with ctags/cscope &quot;tags&quot; files can usually jump to function *definitions*, but not to function *declarations*.

* For function definitions:

- Recognize a specially formatted *short* leading comment that marks the function as trivial, needing no particular documentation. (Note: in some cases, this can be validly combined with the &quot;singleton&quot; mark on the declaration!)

- Recognize a specially formatted *short* leading comment that means: &quot;see the interface contract near the declaration&quot;. This feature is useful because it prevents comment duplication (despite it not being particularly helpful with the above-mentioned &quot;tags&quot;-compatible text editors).


When none of these extra marks are used, the current behavior should be preserved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20401</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:26:17 +0000</bug_when>
    <thetext>I don&apos;t think anyone has cared.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3579</bug_id>
          
          <creation_ts>2021-08-20 16:49:37 +0000</creation_ts>
          <short_desc>PMTT memory device definitions do not match code</short_desc>
          <delta_ts>2021-11-26 10:06:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Chris Jones">christopher.jones</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.a.rothman</cc>
    
    <cc>rgough</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17004</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-20 16:49:37 +0000</bug_when>
    <thetext>ACPI specification (since 5.0) defines the PMTT Memory Device Types as the following (https://uefi.org/specs/ACPI/6.4/05_ACPI_Software_Programming_Model/ACPI_Software_Programming_Model.html?highlight=pmtt#common-memory-device):


0 - Socket
1 - Memory Controller
2 - DIMM
3 - 0xFE - Reserved, 0xFF - Vendor Specific Type

However, EDK2 code (since when ACPI 5.0 was first implemented) has been using these values:

#define EFI_ACPI_6_3_PMMT_MEMORY_AGGREGATOR_DEVICE_TYPE_SOCKET            0x1
#define EFI_ACPI_6_3_PMMT_MEMORY_AGGREGATOR_DEVICE_TYPE_MEMORY_CONTROLLER 0x2
#define EFI_ACPI_6_3_PMMT_MEMORY_AGGREGATOR_DEVICE_TYPE_DIMM              0x3


See EDKII Code reference: 
ACPI 6.3: https://github.com/tianocore/edk2/blob/master/MdePkg/Include/IndustryStandard/Acpi63.h#L1043..L1045
ACPI 6.2: https://github.com/tianocore/edk2/blob/master/MdePkg/Include/IndustryStandard/Acpi62.h#L1081..L1083
ACPI 6.1: https://github.com/tianocore/edk2/blob/master/MdePkg/Include/IndustryStandard/Acpi61.h#L969..L971
ACPI 6.0: https://github.com/tianocore/edk2/blob/master/MdePkg/Include/IndustryStandard/Acpi60.h#L969..L971
ACPI 5.1: https://github.com/tianocore/edk2/blob/master/MdePkg/Include/IndustryStandard/Acpi51.h#L954..L956
ACPI 5.0: https://github.com/tianocore/edk2/blob/master/MdePkg/Include/IndustryStandard/Acpi50.h#L999..L1001



Recommendation is to update the spec to match the values used in the code (1, 2, 3... instead of 0, 1, 2)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17039</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 21:49:26 +0000</bug_when>
    <thetext>Samer, please discuss it with ACPI spec maintainer (Robert and Rothman), and make sure the code and spec be aligned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17117</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-31 12:28:43 +0000</bug_when>
    <thetext>Latest feedback:

It looks like Linux is following the ACPI spec defined values (0, 1, 2):
https://github.com/torvalds/linux/blob/master/include/acpi/actbl2.h#L1551
 
Grepping for those symbols however, I do not see any usage in Linux, other than this header file. However, ACPICA has the same values as the spec/Linux (https://github.com/acpica/acpica/blob/master/source/include/actbl2.h#L2140), and uses them internally.
 
Considering that this has been out for a while (4 years!), the more sensible thing to do is to fix the UEFI code to match the spec. 
 

For completion, we need to confirm other OSes (Windows, ESXi) are following the spec defined values and not assuming the values present from the FW implementations. Will check and update the proposal accordingly.


Note: Separately, the UEFI defines incorrectly refer to _PMMT_ when they should be _PMTT_ . but that has been addressed in https://edk2.groups.io/g/devel/message/78727</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17157</commentid>
    <comment_count>3</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-09-02 17:21:48 +0000</bug_when>
    <thetext>After checking with multiple OS implementations and usage of these tables, it seems that the right thing to do is to fix the EDK2 code to match the ACPI spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17323</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-09-21 13:35:41 +0000</bug_when>
    <thetext>Moving from a &quot;code first spec ECR&quot; to an EDK2 code fix, per consensus.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17444</commentid>
    <comment_count>5</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-10-06 11:25:06 +0000</bug_when>
    <thetext>Sent to the mailing list as: https://edk2.groups.io/g/devel/message/81534</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17851</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:06:58 +0000</bug_when>
    <thetext>Fix at d6e6337cd6ee0b7f06578693ea0cef8e428b93f9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3479</bug_id>
          
          <creation_ts>2021-07-06 10:44:53 +0000</creation_ts>
          <short_desc>Dynamic variable flash information cannot be passed in Standalone MM</short_desc>
          <delta_ts>2022-05-20 01:25:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16558</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-07-06 10:44:53 +0000</bug_when>
    <thetext>The UEFI variable drivers such as VariableRuntimeDxe, VariableSmm, VariableStandaloneMm, etc. (and their dependent protocol/library stack), typically acquire UEFI variable store flash information with PCDs declared in MdeModulePkg.

For example:
[Pcd]
  gEfiMdeModulePkgTokenSpaceGuid.PcdFlashNvStorageVariableBase       ## SOMETIMES_CONSUMES
  gEfiMdeModulePkgTokenSpaceGuid.PcdFlashNvStorageVariableBase64     ## CONSUMES
  gEfiMdeModulePkgTokenSpaceGuid.PcdFlashNvStorageVariableSize       ## CONSUMES

These PCDs work as-is in the StandaloneMm driver if they are not dynamic such as Dynamic or DynamicEx because PCD services are not readily available in the Standalone MM environment. However, the PCDs do allow platforms to treat the PCDs as Dynamic/DynamicEx.

This bug tracks allowing the variable flash information to be passed dynamically into the Standalone MM driver stack. This likely needs similar support for drivers like FaultTolerantWriteStandaloneMm and its flash information PCDs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16559</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-07-06 10:46:06 +0000</bug_when>
    <thetext>I am prototyping some changes and I will add a proposal here soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18768</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-06 12:27:59 +0000</bug_when>
    <thetext>V1 patch series: https://edk2.groups.io/g/devel/message/88461</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18798</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-08 17:32:34 +0000</bug_when>
    <thetext>V2 patch series: https://edk2.groups.io/g/devel/message/88649</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18802</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-11 13:44:14 +0000</bug_when>
    <thetext>V3 patch series: https://edk2.groups.io/g/devel/message/88709</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18876</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-20 16:41:31 +0000</bug_when>
    <thetext>v4 patch series: https://edk2.groups.io/g/devel/message/88787</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18902</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-25 22:20:54 +0000</bug_when>
    <thetext>V5 patch series: https://edk2.groups.io/g/devel/message/89296</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18903</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-25 22:22:46 +0000</bug_when>
    <thetext>V2 patch series to integrate into edk2-platforms:
https://edk2.groups.io/g/devel/message/89308</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18967</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-20 01:25:14 +0000</bug_when>
    <thetext>merged in edk2 2189c71026..1f026ababf and edk2-platform fdaf4eb69a..3b896d1a32.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3987</bug_id>
          
          <creation_ts>2022-07-12 19:14:56 +0000</creation_ts>
          <short_desc>Add a new standard protocol for disabling the behavior of accepting all memory at ExitBootServices</short_desc>
          <delta_ts>2023-01-31 19:50:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dionna Glaze">dionnaglaze</reporter>
          <assigned_to name="Dionna Glaze">dionnaglaze</assigned_to>
          <cc>ardb</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>erdemaktas</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>michael.a.rothman</cc>
    
    <cc>min.m.xu</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19233</commentid>
    <comment_count>0</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-07-12 19:14:56 +0000</bug_when>
    <thetext># Title: GetMemoryMapEx

# Status: Draft

# Document: UEFI Specification Version 2.10

# License

SPDX-License-Identifier: CC-BY-4.0

# Submitter: [TianoCore Community](https://www.tianocore.org)

# Summary of the change

Adds a new memory allocation boot service GetMemoryMapEx that carries a memory feature support bitmap.

# Benefits of the change

The addition of unaccepted memory in v2.9 makes the assumption that support of a technology (e.g., Intel TDX, AMD SEV-SNP) is paired with support of unaccepted memory in the guest OS. This is not the case. Linux has support for SEV-SNP without support for accepting unaccepted memory. By adding this boot service, the guest OS can inform the UEFI whether it has support for unaccepted memory or not so that in the case that unaccepted memory is not supported, the UEFI can accept all memory and classify unaccepted memory as system memory before returning a memory map.

# Impact of the change

Virtual machines that run SEV-SNP will enjoy the benefits of a faster boot, since accepting all memory before booting the guest OS can take a significant amount of time for VMs with a large memory footprint.

# Detailed description of the change [normative updates]

Addition to end of Section 4.4 EFI Boot services table

 EFI_GET_MEMORY_MAP_EX GetMemoryMapEx; // UEFI 2.10+

Addition to Section 7.2

EFI_BOOT_SERVICES.GetMemoryMapEx()

Summary
Returns the current memory map subject to feature support.

Prototype

typedef EFI_STATUS (EFIAPI *EFI_GET_MEMORY_MAP_EX) (
  IN OUT UINTN *MemoryMapSize,
  IN         EFI_MEMORY_MAP_FEATURES_TYPE *MemoryMapFeatures,
  OUT EFI_MEMORY_DESCRIPTOR *MemoryMap,
  OUT UINTN *MapKey,
  OUT UINTN *DescriptorSize,
  OUT UINT32 *DescriptorVersion
  );

Parameters

MemoryMapSize

A pointer to the size, in bytes, of the MemoryMap buffer. On input, this is the size of the buffer allocated by the caller. On output, it is the size of the buffer returned by the firmware if the buffer was large enough, or the size of the buffer needed to contain the map if the buffer was too small.

MemoryMapFeatures

A pointer to the description of the caller&apos;s support for particular memory features. The description is a sized struct to permit future extension. If NULL, then all features are considered supported. See “Related Definitions.”

MemoryMap

A pointer to the buffer in which firmware places the current memory map. The map is an array of EFI_MEMORY_DESCRIPTORs, which is defined in the GetMemoryMap() function description.

MapKey

A pointer to the location in which firmware returns the key for the current memory map. DescriptorSize A pointer to the location in which firmware returns the size, in bytes, of an individual EFI_MEMORY_DESCRIPTOR.

DescriptorVersion

A pointer to the location in which firmware returns the version number associated with the EFI_MEMORY_DESCRIPTOR. See “Related Definitions.”

EFI_SUCCESS The requested memory pages were freed.
EFI_NOT_FOUND The requested memory pages were not allocated with AllocatePages(). EFI_INVALID_PARAMETER Memory is not a page-aligned address or Pages is invalid.

Related Definitions

//*******************************************************
//EFI_MEMORY_MAP_FEATURES_TYPE
//*******************************************************
typedef struct {
  UINT32 Size;
  UINT64 FeatureBitmap0;
} EFI_MEMORY_MAP_FEATURES_TYPE;

//*******************************************************
// Acceptable values for FeatureBitmap0 in EFI_MEMORY_MAP_FEATURES_TYPE
//*******************************************************
#define EFI_MEMORY_MAP_FEATURE0_UNACCEPTED_MEMORY 1

Size

The size of this struct. If less than the size of the struct, then the remaining data are defined as 0. If larger than the size of the struct, then all data beyond is considered unsupported optional feature data and is defined as 0.

FeatureBitmap0

A bitmap of features that the caller supports. Must be a bitwise OR of EFI_MEMORY_MAP_FEATURE0_* values.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19254</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-07-18 12:27:18 +0000</bug_when>
    <thetext>To help me understand the proposal, would you please clarify couple of things?

1) When you say &quot;guest OS&quot;, are you referring to &quot;OS loader&quot;, or &quot;OS kernel&quot;, or the combination?

2) If it means combination, do you only want to support all below cases, or a subset?

+------+-----------+-----------+
| case | OS loader | OS kernel |
+------+-----------+-----------+
| A    | NO        | NO        |
+------+-----------+-----------+
| B    | NO        | YES       |
+------+-----------+-----------+
| C    | YES       | NO        |
+------+-----------+-----------+
| D    | YES       | YES       |
+------+-----------+-----------+
where YES == knows unaccepted-memory, NO == does not know unaccepted-memory.

3) Would you please give a flow on how the GetMemoryMap() or GetMemoryMapEx() is called in those 4 cases?

NOTE: Both OS loader and OS kernel may call GetMemoryMap() or GetMemoryMapEx().
Some BIOS code may also call GetMemoryMap() internally.

4) When does ACCEPT-ALL happen in above 4 cases?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19255</commentid>
    <comment_count>2</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-07-18 12:50:49 +0000</bug_when>
    <thetext>&gt; 1) When you say &quot;guest OS&quot;, are you referring to &quot;OS loader&quot;, or &quot;OS kernel&quot;, or the combination?

I mean the combination.

&gt; 2) If it means combination, do you only want to support all below cases, or a subset? [2-bit table naming 0-3 as A,B,C,D and truth value := GetMemoryMapEx enlightened]

I think A, C, and D are what makes sense to support, although there&apos;s no reason to forbid all combinations. If the OS loader calls GetMemoryMap before (say) Linux calls GetMemoryMapEx, the all memory would be accepted at that point and there wouldn&apos;t be any unaccepted memory to utilize.

&gt; 3) Would you please give a flow on how the GetMemoryMap() or GetMemoryMapEx() is called in those 4 cases?
&gt; NOTE: Both OS loader and OS kernel may call GetMemoryMap() or GetMemoryMapEx().
Some BIOS code may also call GetMemoryMap() internally.

The proposed change I have to EDK2 changes all calls to GetMemoryMap with GetMemoryMapEx with a NULL features pointer to not resolve unsupported features&quot;.

GetMemoryMap becomes a call to GetMemoryMapEx with a zeroed feature struct to state all memory features are unsupported. Every call to GetMemoryMap thus tries to change unaccepted memory to accepted memory, but only the first time is it not a no-op.

&gt; 4) When does ACCEPT-ALL happen in above 4 cases?

Any call to GetMemoryMapEx with a non-null features struct that doesn&apos;t set the unaccepted memory feature bit will accept all unaccepted memory and convert those memory ranges to conventional system memory.

A. Thus, an unenlightened OS loader that builds an E820 map for the OS that calls GetMemoryMap instead of GetMemoryMapEx will accept all memory. The guest OS doesn&apos;t see the unaccepted memory ranges.

B. Same as A.

C. The OS loader doesn&apos;t accept all memory. The guest OS doesn&apos;t know about GetMemoryMapEx, so it does accept all memory at the time it calls GetMemoryMap.

D. Both OS loader and OS use GetMemoryMapEx with the unaccepted memory feature bit so there is no accept-all event.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19260</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-07-18 21:00:16 +0000</bug_when>
    <thetext>It seems the pattern you want to build is: The first GetMemoryMap() from either OS loader or OS kernel will cause ACCEPT-ALL.

The assumption is that: The module that does not know Unaccepted-Memory must be in UEFI boot environment and must call GetMemoryMap() to trigger the ACCEPT-ALL.

I am not sure if that is right assumption, because that will force the kernel to be UEFI-aware. What if the kernel is not?

Case A, B, and D are still good.
Case C is problematic then.

Apparently, I forget to add case E and F, which are kernel direct boot.
+------+-----------+-----------+
| case | OS loader | OS kernel |
+------+-----------+-----------+
| E    | --        | NO        |
+------+-----------+-----------+
| F    | --        | YES       |
+------+-----------+-----------+
where &quot;--&quot; means the OS loader is absent, the VBIOS boot kernel directly.


I am thinking other simplification models.

1) We restrict the decision from *all boot image* to *first boot image*.

The first booted image decides the ACCEPT-ALL or not. (Not all booted images).

That means in case A,B,D, we only rely on boot loader to make right decision. The Boot loader may need figure out if the kernel supports Unaccepted memory - this can resolve the non-UEFI kernel issue.

Case C is unsupported.

In case E,F, we can rely on kernel. What if the kernel is non-UEFI?

2) We change the decision from *function call* to *capability report*.

Instead of calling a function from guest OS, we may let guest OS self-report the capability. (i.e. from a bit in kernel header).

This model is simple and more natural from my perspective.

2.1) The TDVF can detect it, if the cap bit is detected from boot image directly. It does not care the guest is UEFI or not.

Case C is still a problem, because the TDVF may not have chance to touch the kernel directly. All TDVF can see is the first boot image.

2.2) The VMM can detect it from cap bit or from a manifest, which is more flexible.

The VMM can detect it and pass the info to TDVF. Because the VMM is untrusted, it will be measured to RTMR for attestation later. This is a potential attack point, because VMM may lie - when the guest does not support, VMM says it supports. The consequence is: the TDVF wrongly configures the unaccepted memory and cause problem in the kernel (hang or low memory). -- I treat it as deny-of-server (DOS) attack, but DOS is out of scope of confidential computing, because the VMM can DOS anyway - jump to wrong kernel or configure lower memory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19261</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-07-18 21:20:48 +0000</bug_when>
    <thetext>I think the third way:

3) Use UEFI &quot;OsIndications&quot; variable. Ref: UEFI specification 2.9, section 8.5.4.

The pattern is:
* BIOS reports the capability via - &quot;OsIndicationsSupported&quot; variable.
* OS reports the enable/disable via - &quot;OsIndications&quot; non-volatile variable.

However, it has two limitations / assumptions:
* The guest OS must be UEFI aware.
* The guest BIOS must support non-volatile storage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19266</commentid>
    <comment_count>5</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-07-19 13:50:51 +0000</bug_when>
    <thetext>Case C is where we&apos;re at with SEV-SNP right now. We&apos;d have the enlightened UEFI but a non-enlightened guest OS.

It sounds like the solution you&apos;re suggesting is a combination for UEFI and non-UEFI kernels, but a solution for a non-UEFI kernel could still work for a UEFI kernel it seems.

I think requiring a capability bit that is in the kernel binary for the bootloader or direct boot path to utilize would be best.

For linux, we can use the `setup_data` linked list by the boot header at offset 0x01f1 of the kernel binary: https://www.kernel.org/doc/html/latest/x86/boot.html to have a memory feature bitmap like this bug suggests for GetMemoryMapEx.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19267</commentid>
    <comment_count>6</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-07-19 13:57:08 +0000</bug_when>
    <thetext>Unfinished comment accidentally sent. I meant to follow up with a question: given a communication channel for the OS and bootloader, we still don&apos;t solve the &quot;C&quot; case if we change the boot service to be an &quot;explicitly ask for accept all&quot; (supports B, not C) instead of &quot;explicitly ask to not accept all&quot; model (supports C, not B).

To solve &quot;B&quot;, I think we need to incorporate your idea of the OsIndications variable as well, and have it override the feature support passed in to GetMemoryMapEx.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19312</commentid>
    <comment_count>7</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-07-20 05:24:51 +0000</bug_when>
    <thetext>With this bit definition, we can resolve case A,B,D,E,F.

Then we don&apos;t need this GetMemoryMapEx API, right?
We just need a &quot;new mechanism&quot; to let the boot loader explicitly request to accept all memory, if it detects the kernel has no capability. That resolves the case C.

The UEFI variable is not required, because the accept should happen in current boot, immediately.

The new mechanism could be a UEFI protocol to provide AcceptMemory() API. (optional, and only for confidential computing). It seems more natural to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19314</commentid>
    <comment_count>8</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-07-20 15:21:47 +0000</bug_when>
    <thetext>I don&apos;t see how we resolve (A) with just this bit if there&apos;s a bootloader that&apos;s required to accept all memory if the OS doesn&apos;t support unaccepted memory. We&apos;d still end up with the UEFI creating unaccepted memory that nothing then accepts.

If we go through a typical path of UEFI -&gt; shim -&gt; GRUB2 -&gt; Linux, then we simply can&apos;t get the information to the UEFI that all memory should be accepted because neither GRUB2 nor Linux support unaccepted memory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19315</commentid>
    <comment_count>9</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-07-20 15:41:20 +0000</bug_when>
    <thetext>I think the combination of an OsIndications bit and the self-report kernel header bit could be a full solution, but a new OsIndications bit requires a spec change, correct?

A. No OsIndications bit, accept all.
B. OsIndications bit set on second boot, so don&apos;t accept all.
C. No OsIndications bit, accept all.
D. OsIndications bit set on second boot, so don&apos;t accept all.
E. VMM inspects kernel binary for bit, doesn&apos;t create unaccepted memory regions for e820.
F. VMM inspects kernel binary for bit, creates unaccepted memory regions for e820.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19325</commentid>
    <comment_count>10</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-07-22 15:15:32 +0000</bug_when>
    <thetext>For the OsIndication bit idea, I have a PoC that I&apos;ve tested internally.

EDK2 changes

https://github.com/deeglaze/edk2/tree/osindicationaccept

Linux changes (with Kirill&apos;s patch set and Brijesh&apos;s SEV-SNP extension):

https://github.com/deeglaze/amdese-linux/commit/f1c3db19d97d1851fec39d0d1de97fb11143f214

The single bit here works alright and is pretty simple to use.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19390</commentid>
    <comment_count>11</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-08-11 12:12:33 +0000</bug_when>
    <thetext>Any other comments on how we can solve this upgrade path without external information about OS images?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19480</commentid>
    <comment_count>12</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-09-06 21:37:04 +0000</bug_when>
    <thetext>Jiewen: have you any other comments?

Dionna Glaze: can you help title to match new change?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19512</commentid>
    <comment_count>13</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-09-07 04:22:53 +0000</bug_when>
    <thetext>&gt; a new OsIndications bit requires a spec change, correct?

That is correct. Any contract between BIOS and OS need UEFI spec change.
But I think this is a minor update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19513</commentid>
    <comment_count>14</comment_count>
    <who name="Ard Biesheuvel">ardb</who>
    <bug_when>2022-09-07 05:00:22 +0000</bug_when>
    <thetext>(In reply to Dionna Glaze from comment #9)
&gt; I think the combination of an OsIndications bit and the self-report kernel
&gt; header bit could be a full solution, but a new OsIndications bit requires a
&gt; spec change, correct?
&gt; 
&gt; A. No OsIndications bit, accept all.
&gt; B. OsIndications bit set on second boot, so don&apos;t accept all.
&gt; C. No OsIndications bit, accept all.
&gt; D. OsIndications bit set on second boot, so don&apos;t accept all.
&gt; E. VMM inspects kernel binary for bit, doesn&apos;t create unaccepted memory
&gt; regions for e820.
&gt; F. VMM inspects kernel binary for bit, creates unaccepted memory regions for
&gt; e820.

What I am missing here is the justification for supporting all these combinations in what amounts to a highly bespoke and restricted confidential VM scenario.

The attestation and memory encryption pieces of confidential computing rely heavily on firmware abstractions. Is it really a priority, and worth obfuscating the picture, to support a boot mode where a legacy BIOS boots directly into a Linux kernel without awareness of the EFI firmware at all? If so, could you elaborate on how such a deployment still makes meaningful use of the features that confidential VMs provide?

In the light of this, I think it may have been a mistake to use a completely new memory type for unaccepted memory as opposed to a memory attribute.

As for the use of OsIndications: I think this is a reasonable and idiomatic way of using this feature. I do wonder if we could &apos;abuse&apos; the fact that GetMemoryMap()+ExitBootServices() are documented as potentially needing to be invoked twice, and accept all memory at ExitBootServices() time if the OsIndication has not been set by the EFI stub (as opposed to the OS proper). ExitBootServices() would accept all memory and return an error, forcing the caller to call GetMemoryMap() again to obtain the updated version before calling EBS() again. If the OsIndication has been set, things proceed as usual.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19524</commentid>
    <comment_count>15</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-09-07 19:37:20 +0000</bug_when>
    <thetext>&gt; What I am missing here is the justification for supporting all these combinations in what amounts to a highly bespoke and restricted confidential VM scenario.

We have customers in each category is the short of it. There&apos;s demand for supporting all these cases.

&gt; The attestation and memory encryption pieces of confidential computing rely heavily on firmware abstractions. Is it really a priority, and worth obfuscating the picture, to support a boot mode where a legacy BIOS boots directly into a Linux kernel without awareness of the EFI firmware at all? If so, could you elaborate on how such a deployment still makes meaningful use of the features that confidential VMs provide?

I&apos;m not sure I understand your question. Canonical for example ships their Ubuntu virtual machine images with GRUB2 installed, so it may call ExitBootServices before Linux can. I&apos;m not talking about Linux having no understanding of the EFI. I&apos;m talking about supporting a clean path where Linux might not be compiled with CONFIG_UNSUPPORTED_MEMORY=y, which is an allowed configuration for both SEV-SNP and TDX.

&gt; As for the use of OsIndications: I think this is a reasonable and idiomatic way of using this feature. I do wonder if we could &apos;abuse&apos; the fact that GetMemoryMap()+ExitBootServices() are documented as potentially needing to be invoked twice, and accept all memory at ExitBootServices() time if the OsIndication has not been set by the EFI stub (as opposed to the OS proper). 
ExitBootServices() would accept all memory and return an error, forcing the caller to call GetMemoryMap() again to obtain the updated version before calling EBS() again. If the OsIndication has been set, things proceed as usual.

I&apos;ve implemented this and it doesn&apos;t work without a reboot when using GRUB2 to boot Linux. It calls ExitBootServices before launching Linux. We&apos;d have to do some kind of inspection in GRUB2 to check if the kernel supports unaccepted memory, or add a grub configuration thingy and have it perform the EFI variable dance. That kernel inspection is something I know you&apos;ve NACK&apos;d explicitly. GRUB2 configuration is kind of this problem all over again, so I feel a bit stuck.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19525</commentid>
    <comment_count>16</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2022-09-07 19:42:08 +0000</bug_when>
    <thetext>(In reply to Dionna Glaze from comment #9)
&gt; I think the combination of an OsIndications bit and the self-report kernel
&gt; header bit could be a full solution, but a new OsIndications bit requires a
&gt; spec change, correct?
&gt; 
&gt; A. No OsIndications bit, accept all.
&gt; B. OsIndications bit set on second boot, so don&apos;t accept all.
&gt; C. No OsIndications bit, accept all.
&gt; D. OsIndications bit set on second boot, so don&apos;t accept all.
&gt; E. VMM inspects kernel binary for bit, doesn&apos;t create unaccepted memory
&gt; regions for e820.
&gt; F. VMM inspects kernel binary for bit, creates unaccepted memory regions for
&gt; e820.

It seems OsIndications is ignored in E/F, right? VMM inspects kernel binary for the bit and then what VMM does? Does VMM pass the capability of unaccept memmory of the kernel to FW in some way, for example, fw_cfg (QEMU talks with FW) or TD-Hob (VMM pass information in TD-Hob to TDVF)? If this is the case, I am thinking E/F can handle A/B/C/D as well.

Another question is that it seems the discussion is focused on whether the kernel support unaccept-mem or not. Shall we also consider the minimal amount of the memory that kernel needs. So that FW can accept that amount of memory then let OS handle the left unaccept-mem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19526</commentid>
    <comment_count>17</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-09-07 19:51:44 +0000</bug_when>
    <thetext>The E/F options were speculative as to whether the OS community (Linux in my case) would accept baking in this kind of configuration information directly into the binary. Ard was firmly against this https://lore.kernel.org/linux-mm/CAMj1kXHEc=vEt=CtfdiPEsUe2i8QogAi+jvtY6h1awo7GZ-nRg@mail.gmail.com/

My original idea about E/F would be to inspect the binary before running anything, then set up a QemuFwCfg file opt/ovmf/AcceptAllMemory if the binary was missing the appropriate information. We&apos;d use that file to determine in PEI whether to accept all memory or allow creation of unaccepted memory.

With inspection, we couldn&apos;t handle something as complicated (impossible?) as finding and analyzing a grub.cfg file to determine in the kernel that will be booted will have the appropriate support information included. Boot loaders make this hard, since they can call ExitBootServices before the guest kernel has a chance to start and indicate the right support bit. That is, if we use the OsIndications solution over the GetMemoryMapEx solution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19527</commentid>
    <comment_count>18</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2022-09-07 21:33:21 +0000</bug_when>
    <thetext>(In reply to Dionna Glaze from comment #17)
&gt; The E/F options were speculative as to whether the OS community (Linux in my
&gt; case) would accept baking in this kind of configuration information directly
&gt; into the binary. Ard was firmly against this
&gt; https://lore.kernel.org/linux-mm/
&gt; CAMj1kXHEc=vEt=CtfdiPEsUe2i8QogAi+jvtY6h1awo7GZ-nRg@mail.gmail.com/

So is self-report kernel binary bit still an option?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19529</commentid>
    <comment_count>19</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-09-07 22:17:08 +0000</bug_when>
    <thetext>The only downside of OsIndicator is that: This solution assumes that the firmware has OS-writable non-volatile storage.

Maybe not a problem for UEFI, since UEFI supports SetVariable().

But it might be a problem for non-UEFI system.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19534</commentid>
    <comment_count>20</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-09-08 11:52:51 +0000</bug_when>
    <thetext>&gt; So is self-report kernel binary bit still an option?

It&apos;s unlikely, but maybe we can convince Linux upstream that it&apos;s really necessary. There&apos;s a mechanism for it in the boot protocol called kernel_info.

&gt; Shall we also consider the minimal amount of the memory that kernel needs. So that FW can accept that amount of memory then let OS handle the left unaccept-mem.

We could add a 64-bit entry in kernel_info called required_accepted_memory and only have it be non-zero if the kernel supports unaccepted memory.

Ard, what do you think about this? I think since it involves necessary information for booting (accepting the right amount of memory), this should fit in the boot protocol.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19535</commentid>
    <comment_count>21</comment_count>
    <who name="Ard Biesheuvel">ardb</who>
    <bug_when>2022-09-08 12:01:59 +0000</bug_when>
    <thetext>(In reply to Dionna Glaze from comment #20)
&gt; &gt; So is self-report kernel binary bit still an option?
&gt; 
&gt; It&apos;s unlikely, but maybe we can convince Linux upstream that it&apos;s really
&gt; necessary. There&apos;s a mechanism for it in the boot protocol called
&gt; kernel_info.
&gt; 
&gt; &gt; Shall we also consider the minimal amount of the memory that kernel needs. So that FW can accept that amount of memory then let OS handle the left unaccept-mem.
&gt; 
&gt; We could add a 64-bit entry in kernel_info called required_accepted_memory
&gt; and only have it be non-zero if the kernel supports unaccepted memory.
&gt; 
&gt; Ard, what do you think about this? I think since it involves necessary
&gt; information for booting (accepting the right amount of memory), this should
&gt; fit in the boot protocol.

I&apos;m skeptical but perhaps you could elaborate on the execution flow in this case? Who checks this bit and when/where? And how about other OSes or architectures? (note that &quot;we don&apos;t care&quot; is a valid response but it has to be explicit)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19536</commentid>
    <comment_count>22</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-09-08 12:20:11 +0000</bug_when>
    <thetext>
&gt; I&apos;m skeptical but perhaps you could elaborate on the execution flow in this case? Who checks this bit and when/where? And how about other OSes or architectures? (note that &quot;we don&apos;t care&quot; is a valid response but it has to be explicit)

We put the onus on bootloading modules at this point.

The idea is that either the Linux EFI module or the GRUB2 Linux bootloader will grab this data from the boot_params struct to create an event handler for ExitBootServices. If missing the required_accepted_memory entry, then accept all memory. If the entry exists, then accept enough memory to boot the OS to the point that the OS can interpret unaccepted_memory memory types from GetMemoryMap and accept as needed.

For direct boot from VMM (like CrosVM) I&apos;m little less familiar, but the idea would be that the VMM will use the boot_params information to determine how much memory should be part of the initially measured image at launch, as well as how to present the e820 map. This way even without EFI or bootloader to do the work, the kernel still has enough accepted memory to decompress itself to get to understanding the new memory type.

That&apos;s unfortunately many places to change since it counts as changing the boot protocol, but that&apos;s what I&apos;ve got for now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19548</commentid>
    <comment_count>23</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-09-09 18:10:03 +0000</bug_when>
    <thetext>&gt;Another question is that it seems the discussion is focused on whether the kernel support unaccept-mem or not. Shall we also consider the minimal amount of the memory that kernel needs. So that FW can accept that amount of memory then let OS handle the left unaccept-mem.

On the topic of reporting the required accepted memory amount, Min, do you know how one might calculate that for something like the linux kernel? What has TDX with lazy accept needed? If we add a kernel_info struct for unaccepted memory, then it can include things like absolute memory ranges that need to be accepted, and start and end address-relative address ranges that need to be accepted before StartImage. I&apos;ll need your input for the patch to Linux.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19689</commentid>
    <comment_count>24</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-10-03 12:52:45 +0000</bug_when>
    <thetext># Document: UEFI Specification 2.10

# License

SPDX-License-Identifier: CC-BY-4.0

# Submitter: [TianoCore Community](https://www.tianocore.org)

# Summary of the change

Adds a new protocol to disable the UEFI&apos;s behavior of accepting all memory eagerly. 

# Benefits of the change

The new protocol allows a safe transition for operating systems to go from not supporting the EFI_UNACCEPTED_MEMORY type to then support it and have the UEFI do &quot;the right thing&quot;.

# Impact of the change

Confidential compute technologies that require memory acceptance will be able to boot much faster. This is due to two factors:

1. memory acceptance itself takes time
2. memory acceptance requires that the backing pages are pinned, which takes even more time.

Neither acceptance nor pinning for the entire virtual RAM space are required for boot.

Detailed description of the change [normative updates]

Changes to section 8.5.4: Exchanging information between the OS and Firmware

&quot;The firmware and an Operating System may exchange information through the OsIndicationsSupported and the
OSIndications variables as follows:&quot;

to become

&quot;The firmware and an Operating System may exchange information through protocols defined in [Protocols - OS to Firmware Communication](#chapter21) and the OsIndicationsSupported and the
OSIndications variables. The OsIndicationsSupported and OSIndications variable usage is as follows:&quot;

Addition of chapter between Chapter 20 Protocols - ACPI Protocols and Chapter 21 String Services, named Protocols - OS to Firmware communication

Introduction text:

&quot;There are situations such as a multi-boot system where a single system-wide bit in OsIndications is not suitable, and persistence is not necessary. In those cases, we specify protocols to communicate support for UEFI features that cannot be known ahead of time.&quot;

Section 21.1 - EFI_ACCEPT_ALL_UNACCEPTED_MEMORY_PROTOCOL

# Summary

# GUID:

```
#define EFI_ACCEPT_ALL_UNACCEPTED_MEMORY_PROTOCOL_GUID \
  {0xc5a010fe,0x38a7,0x4531, \
    {0x8a,0x4a,0x05,0x00,0xd2,0xfd,0x16,0x49}}


# Protocol Interface Structure:

```
typedef struct _EFI_ACCEPT_ALL_UNACCEPTED_MEMORY_PROTOCOL {
  EFI_DISABLE_ACCEPT_ALL_UNACCEPTED_MEMORY  Disable;
} EFI_ACCEPT_ALL_UNACCEPTED_MEMORY_PROTOCOL;
```

# Parameters:

# **Disable** Disables behavior of accepting all memory before ExitBootServices returns. See the [EFI_ACCEPT_ALL_UNACCEPTED_MEMORY_PROTOCOL.Disable()](#section21.1.1) function description.

# Description: This interface does not provide any way to re-enable the AcceptAllUnacceptedMemory behavior.

Section 21.1.1 EFI_ACCEPT_ALL_UNACCEPTED_MEMORY_PROTOCOL.Disable()

# Summary

Disables behavior of accepting all memory before ExitBootServices returns.

# Prototype:

```
typedef
EFI_STATUS
(EFIAPI *EFI_DISABLE_ACCEPT_ALL_UNACCEPTED_MEMORY)(
  IN  EFI_ACCEPT_ALL_UNACCEPTED_MEMORY_PROTOCOL  *This
  );
```

# Parameters:

**This** A pointer to EFI_ACCEPT_ALL_MEMORY_PROTOCOL instance. Type EFI_ACCEPT_ALL_MEMORY_PROTOCOL is defined in [EFI_ACCEPT_ALL_MEMORY_PROTOCOL](#section21.1)

# Description:

Meant to be called by OS loader if the OS supports EfiUnacceptedMemoryType and means to assume the role of accepting memory before its use. The UEFI is permitted to create unaccepted memory for the memory map whether or not this function is called. The intent is for the UEFI to default to the safe behavior of accepting all memory for the OS unless requests otherwise, but that is not required behavior.

==========================


Following Ard&apos;s advice, I tried the protocol implementation for disabling the default safe behavior of accepting all memory before ExitBootServices returns.
Do let me know if the means of accomplishing this disabling behavior must also be specified. For now you can see that I&apos;ve inserted a new callback point in DxeMain&apos;s CoreExitBootServices to be called after the timer is disabled and before TerminateMemoryMap is called.

I have a candidate implementation at https://github.com/deeglaze/edk2/pull/new/enable_umv5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19800</commentid>
    <comment_count>25</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-10-21 06:49:19 +0000</bug_when>
    <thetext>Thanks for the update. Some questions:

1) What is the difference between ACCEPT_ALL_UNACCEPTED_MEMORY and ACCEPT_ALL_MEMORY?

2) Does DISABLE_ACCEPT_ALL_UNACCEPTED_MEMORY == ENABLE_UNACCEPT_MEMORY ?
If yes, can we this simpler name?
If no, what is the difference?

3) Is this one permanent setting, then BIOS need save the configuration for future boot? Or one-time setting that only impact current boot?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19801</commentid>
    <comment_count>26</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-10-21 11:40:13 +0000</bug_when>
    <thetext>&gt; 1) What is the difference between ACCEPT_ALL_UNACCEPTED_MEMORY and ACCEPT_ALL_MEMORY?

ACCEPT_ALL_MEMORY is a typo. It should be ACCEPT_ALL_UNACCEPTED_MEMORY.


&gt;2) Does DISABLE_ACCEPT_ALL_UNACCEPTED_MEMORY == ENABLE_UNACCEPT_MEMORY ?
&gt;If yes, can we this simpler name?
&gt;If no, what is the difference?

This name is the result of an earlier comment from Ard on the EDK2 mailing list
https://edk2.groups.io/g/devel/message/94477?p=%2C%2C%2C20%2C0%2C0%2C0%3A%3Acreated%2C0%2CPcdEnableUnacceptedMemory+confusing%2C20%2C2%2C0%2C93975247

The answer is depends on the semantics the UEFI standards committee want to codify about unaccepted memory. If we say that the correct behavior of the UEFI is to always accept all unaccepted memory before ExitBootServices returns (exactly when is unspecified), then I&apos;m okay saying that we&apos;re &quot;enabling&quot; unaccepted memory.

If we&apos;re not saying that unaccepted memory should always be accepted without this protocol being called, then the specific name seems appropriate. If the UEFI has the behavior of accepting all unaccepted memory, then disable that behavior.

&gt; 3) Is this one permanent setting, then BIOS need save the configuration for future boot? Or one-time setting that only impact current boot?

This is a one-time setting for the current boot.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19802</commentid>
    <comment_count>27</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-10-21 12:20:24 +0000</bug_when>
    <thetext>&gt; ACCEPT_ALL_MEMORY is a typo. It should be ACCEPT_ALL_UNACCEPTED_MEMORY.

I think ACCEPT_ALL_MEMORY is enough.
Not sure why we need say ACCEPT_ALL_UNACCEPTED_MEMORY?
Is there any other memory we want to accept, such as ACCEPT_ALL_TYPEXXX_MEMORY?

&gt; Ard on the EDK2 mailing list

The comment is about PCD - PcdAcceptAllUnacceptedMemory v.s. PcdEnableUnacceptedMemory.
I agree that saying explicitly &quot;AcceptAll&quot; is better than &quot;enable&quot;

But saying: AcceptAllUnacceptedMemory seems redundant to me. Can we simply it to AcceptAllMemory?

Now back to the protocol/function name - EFI_ACCEPT_ALL_UNACCEPTED_MEMORY_PROTOCOL.EFI_DISABLE_ACCEPT_ALL_UNACCEPTED_MEMORY

I know it means what we want to do. But I just feel it is too hard to read it out, especially when the first word is DISABLE.

Can we make it simpler?
Protocol name candidate: EFI_MEMORY_ACCEPTING_PROTOCOL
Function name candidate: EFI_NOT_ACCEPT_ALL_MEMORY, or EFI_ALLOW_UNACCEPTED_MEMORY


&gt; This is a one-time setting for the current boot.

I feel we had better document the requirement in Description section clearly:
A) When the OS loader shall call this API, if supported.
B) When the BIOS shall accept all memory, if this is not called from OS loader.

Otherwise, the BIOS might accept all memory too early or the OS loader may call this API too late.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19803</commentid>
    <comment_count>28</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-10-21 12:49:07 +0000</bug_when>
    <thetext>&gt;I think ACCEPT_ALL_MEMORY is enough.
&gt;Not sure why we need say ACCEPT_ALL_UNACCEPTED_MEMORY?

I say all unaccepted memory since we don&apos;t accept already accepted memory, since that would be a security vulnerability. If that&apos;s obvious enough from context, then I&apos;m fine dropping the _UNACCEPTED.

&gt;Is there any other memory we want to accept, such as ACCEPT_ALL_TYPEXXX_MEMORY?

There might be in the future? I don&apos;t know enough about the confidential PCI passthrough features to make bold claims that there won&apos;t be other kinds of memory. There could be DMA areas that need to be accepted and not become EfiConventionalMemory, but rather EfiMemoryMappedIO. I&apos;m not sure if the unaccepted memory type would have an attribute for that distinction, or if there would be an unaccepted_mmio type.

&gt;Now back to the protocol/function name - EFI_ACCEPT_ALL_UNACCEPTED_MEMORY_PROTOCOL.EFI_DISABLE_ACCEPT_ALL_UNACCEPTED_MEMORY

&gt;I know it means what we want to do. But I just feel it is too hard to read it out, especially when the first word is DISABLE.

&gt;Can we make it simpler?
&gt;Protocol name candidate: EFI_MEMORY_ACCEPTING_PROTOCOL
&gt;Function name candidate: EFI_NOT_ACCEPT_ALL_MEMORY, or EFI_ALLOW_UNACCEPTED_MEMORY

EFI_MEMORY_ACCEPTANCE_PROTOCOL seems more natural to me. I&apos;m down for EFI_ALLOW_UNACCEPTED_MEMORY.

&gt;I feel we had better document the requirement in Description section clearly:
&gt;A) When the OS loader shall call this API, if supported.
&gt;B) When the BIOS shall accept all memory, if this is not called from OS loader.
&gt;
&gt; Otherwise, the BIOS might accept all memory too early or the OS loader may call this API too late.

The BIOS might accept all memory because the firmware vendor decided that the runtime latency of accepting dynamically is too costly. I don&apos;t want to enforce that the BIOS /doesn&apos;t/ accept all memory, just that it&apos;s allowed to not accept all memory. We would count that as the OS supporting unaccepting memory and the firmware not supporting it.

In the other case, I agree that it is rather obtuse for the UEFI to ignore this protocol and produce unaccepted memory even when not called.

I had made a comment before that the OS loader has to call the protocol before ExitBootServices, but Ard pointed out that all protocols have that restriction, so saying it was redundant. It could be the first thing an OS loader does and that would still be safe, since the firmware has to ensure there&apos;s at least enough memory accepted for the image it loads.

diff:
 # Description
-Meant to be called by OS loader if the OS supports EfiUnacceptedMemoryType and means to assume the role of accepting memory before its use.
+The OS loader shall call this protocol if it supports the EfiUnacceptedMemoryType.
-The UEFI is permitted to create unaccepted memory for the memory map whether or not this function is called.
-The intent is for the UEFI to default to the safe behavior of accepting all memory for the OS unless requests otherwise, but that is not required behavior.
+If this protocol is not been called, then before ExitBootServices returns, the UEFI shall accept all EfiUnacceptedMemoryType regions, and subsequent calls to GetMemoryMap will report those regions as EfiConventionalMemory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19805</commentid>
    <comment_count>29</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-10-21 22:41:57 +0000</bug_when>
    <thetext>&gt; DMA areas

Any DMA memory must be accepted, then converted from private to shared.

I don&apos;t think this protocol need care about DMA. It is out of scope.

&gt; EFI_MEMORY_ACCEPTANCE_PROTOCOL seems more natural to me. I&apos;m down for EFI_ALLOW_UNACCEPTED_MEMORY.

Thanks. That seems good to me.

&gt; The BIOS might accept all memory because the firmware vendor decided that the runtime latency of accepting dynamically is too costly. I don&apos;t want to enforce that the BIOS /doesn&apos;t/ accept all memory, just that it&apos;s allowed to not accept all memory. We would count that as the OS supporting unaccepting memory and the firmware not supporting it.

If that is the case, the BIOS shall NOT expose this protocol.

The implication is:
1) If BIOS expose this protocol, the OS makes decision and tell BIOS.
2) If the BIOS does not expose this protocol, the BIOS makes decision to accept all or not.

&gt; I had made a comment before that the OS loader has to call the protocol before ExitBootServices, but Ard pointed out that all protocols have that restriction, so saying it was redundant.

I dont think it is redundant. This sentence &quot;call the protocol before ExitBootServices&quot; implies that the BIOS must wait till ExitBootServices.

I provide another option: If supported, OS loader must locate this protocol and call this API immediately. Then the BIOS implementation may use a hook to see what is the first function call. If no, then BIOS can accept all much earlier.



Last but not least, we use a word document to track the CodeFirst content and use different version document to track the progress. We do not put all content to the comment section. If you can follow the same model, that would be great.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19810</commentid>
    <comment_count>30</comment_count>
      <attachid>1040</attachid>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-10-24 13:38:29 +0000</bug_when>
    <thetext>Created attachment 1040
Version 2 of the proposed spec change</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19811</commentid>
    <comment_count>31</comment_count>
      <attachid>1041</attachid>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-10-24 13:39:17 +0000</bug_when>
    <thetext>Created attachment 1041
diff Version1 Version2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19812</commentid>
    <comment_count>32</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-10-24 13:40:19 +0000</bug_when>
    <thetext>I don&apos;t have word, so I hope pdf is acceptable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19813</commentid>
    <comment_count>33</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-10-24 21:30:33 +0000</bug_when>
    <thetext>Thank you!

I have some other thought that I would like to discuss.

1) About mechanism.

I understand why that existing &quot;OsIndications&quot; cannot be used since it requires non-volatile storage (NV).

If we want to generalize the requirement, we just need define a way for &quot;one-time configuration from OS&quot;. One possible way is to define an &quot;OsOneTimeIndications&quot; volatile variable.

I dont mean we have to use variable. This is for discussion on what is best way to pass 1 bit configuration info with an extensible way.

2) About content location

If we finally decide to use EFI_MEMORY_ACCEPTANCE_PROTOCOL, I am thinking if it can be moved to &quot;Chapter 38 - Confidential Computing&quot;. This is a new chapter in UEFI 2.10, to describe the confidential computing related protocols.

The intention is to separate the confidential computing virtual BIOS specific thing from physical BIOS to avoid any misunderstanding.

People may argue that &quot;EfiUnacceptedMemoryType&quot; definition is not here. Because it is just a new memory type, it is naturally put with other memory type definition. We may consider to add more description there.

But if we decide to use &quot;OsOneTimeIndications&quot; variable, we had better keep the content in &quot;8.5.4. Exchanging information between the OS and Firmware&quot;.


3) About unaccepted memory size

In EDKII mailing list, we are discussing how the virtual BIOS knows how many memory it should accept before boot to OS which supports Unaccepted Memory.

Current decision is to unconditionally accept 4GiB, as known limitation/work-around.

I think this should be resolved in this protocol as well, as a complete end-to-end solution.

For example, when the OS/OsLoader says: &quot;I can allow the unaccepted memory&quot;, it should also say: &quot;I need xxxMB available memory at least, please ensure those size memory is accepted.&quot;

The possible solutions are:
A) Add one more parameter in AllowUnacceptedMemory(), such as &quot;UINT64  MinimalAcceptedMemorySize&quot;
B) Add several bits in &quot;OsOneTimeIndications&quot; variable, with 1MB granularity.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19818</commentid>
    <comment_count>34</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-10-25 12:21:21 +0000</bug_when>
    <thetext>&gt; I dont mean we have to use variable. This is for discussion on what is best way to pass 1 bit configuration info with an extensible way.

I think that OsIndications as a 64-bit variable with specified bit positions makes sense only because those bits need to be persisted. For something one-time each boot, I think that a UUID is better to identify a communication channel. It doesn&apos;t need to be a single bit either. The size could be determined by the UUID by convention, or made manifest in a configuration protocol that states the required data size for the UUID, and has a one-time message that takes that many bytes for the UUID.

We&apos;d then need a handle registration mechanism in the UEFI to allow registering handlers for data passed in from the OS.

This all seems like a meta-protocol, which I don&apos;t particularly like. I don&apos;t know why disparate communication channels need to be coalesced into one that has a constraint of one-time message sending. That constraint is not likely to have the versatility that some future problem&apos;s solution may need.

&gt; 2) Content location [...]

I&apos;m fine with wherever. I&apos;ll update the doc once we&apos;ve settled on a configuration protocol if it&apos;s not going to be the memory acceptance protocol.

&gt; In EDKII mailing list, we are discussing how the virtual BIOS knows how many memory it should accept before boot to OS which supports Unaccepted Memory.
&gt;Current decision is to unconditionally accept 4GiB, as known limitation/work-around.

Accept at most up to the 4GiB address (more likely 3GiB due to the MMIO hole) I think is more precise, but I understand. I don&apos;t know specifically how an OS would determine this number to communicate to the UEFI, so I couldn&apos;t really say whether accepting &lt; 4GiB is a good goal to try to achieve. Given the patches I&apos;ve seen that handle memory demand, it seems like a lot more complexity.

&gt;I think this should be resolved in this protocol as well, as a complete end-to-end solution.

Let me know when you have a proposal.

&gt; For example, when the OS/OsLoader says: &quot;I can allow the unaccepted memory&quot;, it should also say: &quot;I need xxxMB available memory at least, please ensure those size memory is accepted.&quot;

I don&apos;t know why this would need to be specified. The UEFI loads an image into memory that it has accepted and starts execution in it. The image must either call ExitBootServices and have the UEFI accept the memory, or accept memory itself. I&apos;m not familiar enough with how kernels manage their stack space in early boot to know if that&apos;s sufficient.

With something like a bootloader in the way, it sounds like the bootloader would need a binary format change from the OS image to know how much it should ask for on the OS&apos;s behalf, since the bootloader is also going to allocate memory for the next image. It can be done.. maybe, for Linux with the kernel_info boot parameter, but it seems awfully complicated.

&gt; The possible solutions are:
&gt;A) Add one more parameter in AllowUnacceptedMemory(), such as &quot;UINT64  MinimalAcceptedMemorySize&quot;

I&apos;d welcome a PoC to try, but I don&apos;t know how you imagine this working robustly.

&gt; B) Add several bits in &quot;OsOneTimeIndications&quot; variable, with 1MB granularity.

I would avoid a UEFI variable since they are R or R/W with no notion of one-time, and the bit positions would be limited and hard to add given the specification cadence. See reasoning above.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19820</commentid>
    <comment_count>35</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-10-25 13:23:36 +0000</bug_when>
    <thetext>If we&apos;re trying to make this protocol do more than I&apos;ve specified here, and there is no Code First use of it, I&apos;d much prefer that we leave that to a later specification.

If you want the flexibility of adding it as an entry point in this protocol, I could be down for having an entry point return the number version of the protocol so that it can be elaborated upon later.

Version 0 would have

EFI_STATUS EFIAPI AllowUnacceptedMemory(VOID) and
UINT32 EFIAPI Version(VOID);

Such that Version() returns 0 and the expected acceptance behavior is that up to address 4GiB is accepted before the first image is started.

I could imagine a version 1 that has another entry point like EFI_STATUS EFIAPI EnsureAccepted(EFI_PHYSICAL_ADDR StartAddress, UINTN NumPages) that a boot loader EFI driver could use to change the 4GiB acceptance behavior so that we have an OnReadyToBoot event that accepts up to 4GiB if EnsureAccepted has not been called.

But all that is to say, I&apos;d like for us to be able have this protocol while we&apos;re using the 4GiB solution and have an upgrade path for any new kind of feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19824</commentid>
    <comment_count>36</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-10-25 21:29:49 +0000</bug_when>
    <thetext>Let discuss MinimalAcceptedMemorySize at first.

4GiB is just one example, we think it may work in most cases. But there is no guarantee.

What if 4GiB is not enough?
What if we think 4GiB is too big and we want to save more boot time with 512MiB?

Do we want to say something like: If unaccepted memory is allowed, the BIOS shall accept 4GiB at least. This protocol consumer shall evaluate and ensure 4GiB accepted memory is large enough for setting up the reset memory acceptance action in OS. Otherwise, the protocol consumer shall not allow unaccepted memory.

I think your &quot;EnsureAccepted()&quot; can resolve those concern.



BTW: I dont think there is mandatory to implement all features to align with every version of spec. The final submission just need one version protocol.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19844</commentid>
    <comment_count>37</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-10-26 11:35:45 +0000</bug_when>
    <thetext>&gt; BTW: I dont think there is mandatory to implement all features to align with every version of spec. The final submission just need one version protocol.

I don&apos;t think this is true practically. OVMF still advertises itself as v2.7. If an OS finds a protocol that has one meaning at 2.7 and another meaning at 2.11, then the OS has to wait until the UEFI changes this very slow moving number. For a protocol to have its own version number, you can have much more granular control over what you can expect just from that protocol. That is why if we are considering adding to the protocol in a later specification, we should build versioning into its ABI on version 0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19890</commentid>
    <comment_count>38</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-11-01 10:45:05 +0000</bug_when>
    <thetext>&gt; I don&apos;t think this is true practically. OVMF still advertises itself as v2.7. If an OS finds a protocol that has one meaning at 2.7 and another meaning at 2.11, then the OS has to wait until the UEFI changes this very slow moving number. For a protocol to have its own version number, you can have much more granular control over what you can expect just from that protocol. That is why if we are considering adding to the protocol in a later specification, we should build versioning into its ABI on version 0.

Sorry, I don&apos;t understand what you mean.

For version, I am talking about CodeFirst ECR proposal. There is no need to provide 2 different version.

To me, missing size is a gap for the CodeFirst ECR proposal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19911</commentid>
    <comment_count>39</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-11-02 11:55:59 +0000</bug_when>
    <thetext>&gt;For version, I am talking about CodeFirst ECR proposal. There is no need to provide 2 different version.
&gt;To me, missing size is a gap for the CodeFirst ECR proposal.

While I could certainly propose the EnsureAccepted method here, I don&apos;t have a plausible use for it in a Code First solution.

The problem in my understanding is that, let&apos;s say instead of accepting an arbitrary amount of 4GiB of memory, we instead accept only the memory that is used by the UEFI, including its allocations for loading images. How then can we ensure that

* when we start an image that the image will only touch accepted memory either until

   a. it requests the right amount of memory to make it to EBS without enabling unaccepted memory support, or

   b. until it enables unaccepted memory support and handles its own memory acceptance henceforth?

But the issue is that if the loaded image has no knowledge of the memory acceptance protocol, then neither a. nor b. are solutions. Instead we need a &quot;big enough&quot; initial acceptance that allows the image to make it to EBS for the UEFI to then accept all memory.

I don&apos;t see a compelling case to support a. and it doesn&apos;t seem like we can know we&apos;re in the b case or not until it&apos;s too late to accept more memory before starting the OS loader.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19912</commentid>
    <comment_count>40</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-11-02 12:06:32 +0000</bug_when>
    <thetext>&gt; Instead we need a &quot;big enough&quot; initial acceptance that allows the image to make it to EBS for the UEFI to then accept all memory.

So how can a BIOS know what value is &quot;big enough&quot; ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19916</commentid>
    <comment_count>41</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-11-02 18:26:44 +0000</bug_when>
    <thetext>&gt; So how can a BIOS know what value is &quot;big enough&quot; ?

I think 4GiB is not entirely arbitrary. It&apos;s the entirety of 32-bit memory. The UEFI boot sequence sets up page tables only up to 4GiB, so we should be allowed to assume that the booted image will need to do something special before accessing higher memory. In that case they will also need to accept memory or have called EBS to have the UEFI accept all memory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19917</commentid>
    <comment_count>42</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-11-02 19:59:42 +0000</bug_when>
    <thetext>I hope to use 128M or 256M if possible, especially in small environment.

Why we mandate 4G? 4G is too big in my opinion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19918</commentid>
    <comment_count>43</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-11-02 20:26:19 +0000</bug_when>
    <thetext>&gt; I hope to use 128M or 256M if possible, especially in small environment.

If the environment is truly meant to be small, then the VM will not even have 4GiB attached. The acceptance is _up to_ 4GiB, provided that memory is present. If the environment is not meant to be small, then it can handle the milliseconds it takes to accept the 4GiB before starting the rest of the image to get to the EnableUnacceptedMemory method.

If the environment is not meant to be small and also isn&apos;t going to be enlightened to accept its own memory, then accepting 4GiB or before accepting the rest at EBS isn&apos;t going to make much difference over accepting 128MiB before EBS accepts &quot;the rest&quot; that includes the unaccepted regions with in the 4GiB - 128MiB lower memory range.

All of this isn&apos;t to say that the call for 4GiB memory acceptance is required, just required in the absence of a more specific protocol that could come later that is use case-driven. I don&apos;t have such a use case to drive a sound design.

This protocol would not preclude that possibility in the future. I just don&apos;t know what conditions would make that &quot;if possible&quot; a reality. Unless there&apos;s some binary inspection

&gt; Why we mandate 4G? 4G is too big in my opinion.

To support the OSes that don&apos;t understand unaccepted memory at all. That includes

1. The OS doesn&apos;t know to tell the UEFI that it needs at least X,Y,Z memory ranges accepted to get to EBS.

2. The OS boot protocol hasn&apos;t been updated to inform a boot loader of the required memory ranges to get to EBS.

3. The boot loader hasn&apos;t been updated to interpret an updated boot protocol to request that the UEFI accept the denoted memory ranges.

We mandate 4G because the UEFI sets up memory contents at both ends of the conventional memory ranges within 0..4GiB, and a launched image is free to operate normally with the assumption that memory mapped in the page table can be accessed without extra enlightenment. That assumption makes it possible for both enlightened and unenlightened images to execute all the way to ExitBootServices. At that time, the OS knows it needs to handle the rest of unaccepted memory, or it doesn&apos;t and doesn&apos;t have to because the memory has all been accepted.

Again I think that a later protocol or a later numbered version of this protocol should be what introduces the behavior you&apos;re asking for because it is much more complicated than simply saying that all memory mapped in the page table OnReadyToBoot should be accepted. I think that means all memory ranges within 0..4GiB.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19919</commentid>
    <comment_count>44</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-11-02 22:11:14 +0000</bug_when>
    <thetext>&gt; To support the OSes that don&apos;t understand unaccepted memory at all. 

&gt; That assumption makes it possible for both enlightened and unenlightened images to execute all the way to ExitBootServices. At that time, the OS knows it needs to handle the rest of unaccepted memory, or it doesn&apos;t and doesn&apos;t have to because the memory has all been accepted.


I don&apos;t understand this part.
If you are considering to support the OSes that don&apos;t understand unaccepted memory at all, then why we need introduce this new protocol?

The vBIOS can always accept 4GB and boot to OS. Done.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19930</commentid>
    <comment_count>45</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-11-03 12:40:07 +0000</bug_when>
    <thetext>&gt;If you are considering to support the OSes that don&apos;t understand unaccepted memory at all, then why we need introduce this new protocol?
&gt;The vBIOS can always accept 4GB and boot to OS. Done.

Your Comment 27 called for specifying the memory acceptance behavior for when this protocol is not used.

We want UEFI to accept 4GB and boot to OS. What other option is there? UEFI doesn&apos;t accept 4GB for.. an unspecified reason, and then boots to the OS under the assumption that the OS will understand unaccepted memory?

How do we learn this reason early enough to /not/ accept the 4GiB of memory? This seems like the same problem we were trying to solve earlier in this bug just for enabling unaccepted memory. Ard showed me that we can delay acceptance until EBS to wait for an &quot;Enable&quot; call to disable the acceptance behavior.

But now say GRUB2&apos;s BOOTX64.EFI runs after being loaded. If it doesn&apos;t call EnsureAccepted for memory it needs, then the UEFI will have needed to accept the memory before loading BOOTX64.EFI. Oops. This is probably unfair, since GRUB2 will use AllocatePages, which Min Xu&apos;s lazy accept code would lazily accept before releasing it to GRUB2.

So GRUB2 has enough accepted memory to be able to parse the Linux boot parameters and learn that Linux needs memory ranges X0-Y0,X1-Y1 to be accepted. So GRUB2 calls EnsureAccepted for Linux&apos;s ranges and then continues boot. That might work to accept fewer than 4GB.

But what happens if GRUB2 doesn&apos;t see the boot parameters for Linux? It could force UEFI to accept up to 4GB to be safe.

What happens if GRUB2 hasn&apos;t been updated to know it needs to call EnsureAccepted though? There&apos;s no specific crossover call at which the UEFI would know, &quot;oh the bootloader doesn&apos;t understand restricted memory acceptance, so let&apos;s accept up to 4GB before continuing&quot;.

I&apos;m not seeing a safe enablement semantics for accepting fewer than 4GB.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19935</commentid>
    <comment_count>46</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-11-03 23:00:14 +0000</bug_when>
    <thetext>Hi Dionna
I am having a discussion with different teams and collecting data on how many memory acceptance is the best way to achieve boot performance.

I would be back to discuss more detail with solid data.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19980</commentid>
    <comment_count>47</comment_count>
    <who name="Michael A. Rothman">michael.a.rothman</who>
    <bug_when>2022-11-09 14:42:23 +0000</bug_when>
    <thetext>Several comments:

You make reference to a EFI_MEMORY_ACCEPTANCE_PROTOCOL.Disable(), but there isn&apos;t one in the protocol definition.

The memory types are an enum, so theoretically if you&apos;re going to do an accept of a memory region that&apos;s decorated as a EfiUnacceptedMemoryType, what then does it become? How does this memory look like in the GUEST view of the memory map? EfiConventionalMemory? Whatever the answer, that needs to be documented as well.


Current language:

The UEFI shall accept all memory any time before ExitBootServices returns if it does not provide this protocol. The UEFI shall not accept all memory until ExitBootServices is called if the protocol is provided.

This protocol and acceptance behavior ensures that the UEFI safely supports OSes that don’t interpret the new EfiUnacceptedMemory type and those that do.


--- I don&apos;t understand the nuance you&apos;re grasping at here, because things triggered by ExitBootServices() aren&apos;t support to change the memory map, so ignore the whole ExitBootServices thing and describe what you want/problem statement - we can try to convert that to compliant language.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19981</commentid>
    <comment_count>48</comment_count>
      <attachid>1051</attachid>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-11-09 15:40:43 +0000</bug_when>
    <thetext>Created attachment 1051
Version 3 of the proposed spec change</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19982</commentid>
    <comment_count>49</comment_count>
      <attachid>1052</attachid>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-11-09 15:41:19 +0000</bug_when>
    <thetext>Created attachment 1052
diff Version2 Version3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19983</commentid>
    <comment_count>50</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-11-09 15:47:42 +0000</bug_when>
    <thetext>Hi Michael, thanks for reviewing.

&gt; things triggered by ExitBootServices() aren&apos;t support to change the memory map, so ignore the whole ExitBootServices thing and describe what you want/problem statement - we can try to convert that to compliant language.

I&apos;ve updated the language in v3 to be more clear about what the protocol is trying to accomplish.

The ExitBootServices() call is a must-happen interaction with the UEFI that I use as a checkpoint that can accept all memory if the OS hasn&apos;t indicated support. Is there another such must-be-called function/protocol/service that could serve as this checkpoint? We need the OS to have an opportunity to run and advertise support, whereas we also need to be flexible enough such that any calls that a bootloader makes before loading the OS won&apos;t trigger the accept all behavior.

I thought we could make ExitBootServices return invalid_argument when we change the memory map to not have unaccepted memory anymore, and by spec, the caller needs to GetMemoryMap and re-call ExitBootServices. Ard Biesheuvel recommended this approach.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20029</commentid>
    <comment_count>51</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-11-15 21:40:16 +0000</bug_when>
    <thetext>Need spec change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20049</commentid>
    <comment_count>52</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-11-16 12:07:24 +0000</bug_when>
    <thetext>&gt; Need spec change.

Are you asking for me to change something in my draft, or are you just confirming this &quot;Specification Update&quot; bug indeed needs a spec change?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20163</commentid>
    <comment_count>53</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-12-01 09:39:24 +0000</bug_when>
    <thetext>Feedback from Intel:

1) TDX virtual firmware (TDVF) will only support the guest OS which supports Lazy Accept, because of performance.

2) Intel Linux kernel maintainer has no plan to use this protocol in Linux as well. Reference: https://lore.kernel.org/all/bb7479df-7871-9861-600d-
c2fed783b659@intel.com/

3) All in all, we believe that a kernel without lazy accept is just short team. In long term, the kernel will support lazy accept by default.
Using policy protocol just for a short term is not preferred. It is useless in long term.
As such, TDVF and TDX-enlightened Guest will not use this policy protocol.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20164</commentid>
    <comment_count>54</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2022-12-01 11:47:56 +0000</bug_when>
    <thetext>This is a disappointing result, because it permanently destabilizes early adopters.

In GCP for example, we do not pin firmware versions. When a VM migrates, it receives the firmware that&apos;s released with the VMM that it has migrated to. This means a cold boot in a firmware that assumes lazy accept support for SEV-SNP will silently make most memory unavailable to the guest, only for them to experience an unexpected OOM at an unknown time in the future.

Ard Biesheuvel, another Linux EFI maintainer, has stated that he&apos;d accept a protocol use in Linux to enable lazy accept when the kernel supports it.

Proposed protocol: https://lkml.org/lkml/2022/6/27/990
Suggestion that he would accept it even without a spec change, although that is not a good outcome: https://lkml.org/lkml/2022/6/28/1240
Affirmative &quot;no problem adopting&quot; the use of the protocol: https://patchew.org/EDK2/20220928153323.2583389-1-dionnaglaze@google.com/20220928153323.2583389-6-dionnaglaze@google.com/#CAMj1kXFrsh83DT7PvrMtwWPO4OjkXt3E=Wc4Tis1Hbd+G._5FjaCQ@mail.gmail.com

Both TDX and SEV-SNP have proposed Kconfigs that make unaccepted memory optional, not required. This means any later version of the linux kernel can be configured in a breaking way due to the inability for a firmware to support both configurations of kernels.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20970</commentid>
    <comment_count>55</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2023-01-31 19:29:39 +0000</bug_when>
    <thetext>It becomes https://github.com/tianocore/edk2/blob/master/OvmfPkg/Include/Protocol/SevMemoryAcceptance.h.

Can we close this one?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20971</commentid>
    <comment_count>56</comment_count>
    <who name="Dionna Glaze">dionnaglaze</who>
    <bug_when>2023-01-31 19:50:11 +0000</bug_when>
    <thetext>(In reply to jiewen.yao from comment #55)
&gt; It becomes
&gt; https://github.com/tianocore/edk2/blob/master/OvmfPkg/Include/Protocol/
&gt; SevMemoryAcceptance.h.
&gt; 
&gt; Can we close this one?

Yes, good to close.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1040</attachid>
            <date>2022-10-24 13:38:29 +0000</date>
            <delta_ts>2022-11-09 15:40:43 +0000</delta_ts>
            <desc>Version 2 of the proposed spec change</desc>
            <filename>EFI_ACCEPT_ALL_UNACCEPTED_MEMORYv2.pdf</filename>
            <type>application/pdf</type>
            <size>158282</size>
            <attacher name="Dionna Glaze">dionnaglaze</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1041</attachid>
            <date>2022-10-24 13:39:17 +0000</date>
            <delta_ts>2022-11-09 15:41:19 +0000</delta_ts>
            <desc>diff Version1 Version2</desc>
            <filename>EFI_ACCEPT_ALL_UNACCEPTED_MEMORYv2diff.pdf</filename>
            <type>application/pdf</type>
            <size>164601</size>
            <attacher name="Dionna Glaze">dionnaglaze</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1051</attachid>
            <date>2022-11-09 15:40:43 +0000</date>
            <delta_ts>2022-11-09 15:40:43 +0000</delta_ts>
            <desc>Version 3 of the proposed spec change</desc>
            <filename>EFI_MEMORY_ACCEPTANCE_PROTOCOLv3.pdf</filename>
            <type>application/pdf</type>
            <size>93247</size>
            <attacher name="Dionna Glaze">dionnaglaze</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1052</attachid>
            <date>2022-11-09 15:41:19 +0000</date>
            <delta_ts>2022-11-09 15:41:19 +0000</delta_ts>
            <desc>diff Version2 Version3</desc>
            <filename>EFI_MEMORY_ACCEPTANCE_PROTOCOLv3diff.pdf</filename>
            <type>application/pdf</type>
            <size>166032</size>
            <attacher name="Dionna Glaze">dionnaglaze</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3848</bug_id>
          
          <creation_ts>2022-02-25 06:03:06 +0000</creation_ts>
          <short_desc>OvmfPkg: Generate CloudHv target as PVH ELF binary</short_desc>
          <delta_ts>2022-03-04 04:30:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Sebastien Boeuf">sebastien.boeuf</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18465</commentid>
    <comment_count>0</comment_count>
    <who name="Sebastien Boeuf">sebastien.boeuf</who>
    <bug_when>2022-02-25 06:03:06 +0000</bug_when>
    <thetext>Cloud Hypervisor aims at emulating the minimal amount of legacy devices and this is why it supports the PVH boot specification. The point is to be able to share some information with the guest without the need for emulating devices that would be present on real hardware.

Since Cloud Hypervisor supports loading a PVH ELF binary, the CloudHv target is updated to be generated as such. Relying on the PVH boot specification, CloudHv doesn&apos;t need to hardcode the location of the ACPI tables anymore since it can retrieve the RSDP address from the hvm_start_info structure. Same thing for the RAM below 4G, it can be found through the PVH memmap entries rather than relying on an emulated CMOS device.

In edk2-stable202202 release, CloudHv was generated as a data binary.
Starting with edk2-stable202205 release, CloudHv will be generated as a PVH ELF binary.

+-------------------+----------------+
|                   |   CLOUDHV.fd   |
+-------------------+----------------+
| edk2-stable202202 | Data binary    |
+-------------------+----------------+
| edk2-stable202205 | PVH ELF binary |
+-------------------+----------------+</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18487</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 21:47:27 +0000</bug_when>
    <thetext>Sebastien: what change will be made?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18504</commentid>
    <comment_count>2</comment_count>
    <who name="Sebastien Boeuf">sebastien.boeuf</who>
    <bug_when>2022-03-02 03:13:31 +0000</bug_when>
    <thetext>The changes have been sent upstream through the following patchset:
[PATCH v5 0/7] CloudHv: Rely on PVH boot specification
[PATCH v5 1/7] OvmfPkg: Make the Xen ELF header generator more flexible
[PATCH v5 2/7] OvmfPkg: Xen: Use a new fdf include for the PVH ELF header
[PATCH v5 3/7] OvmfPkg: Xen: Generate fdf include file from ELF header generator
[PATCH v5 4/7] OvmfPkg: Generate CloudHv as a PVH ELF binary
[PATCH v5 5/7] OvmfPkg: CloudHv: Retrieve RSDP address from PVH
[PATCH v5 6/7] OvmfPkg: CloudHv: Rely on PVH memmap instead of CMOS
[PATCH v5 7/7] OvmfPkg: CloudHv: Add README

You can also see the changed through Github: https://github.com/tianocore/edk2/pull/2540

First, I&apos;ve updated the PVH ELF generator to make it fit both Xen and CloudHv. Then I&apos;ve updated the Xen target so that it relies on the auto generated header.
Then I&apos;ve updated the CloudHv target so that it relies on the auto generated header as well as removed useless parts such as VARS and CODE sections.
Once the CloudHv binary is generated as the correct PVH ELF binary, I&apos;ve updated the way we retrieve the RDSP address, relying on the PVH structure containing the RSDP information.
I&apos;ve updated the way to determine the RAM below 4G by relying on the memmap structures provided by PVH rather than using the legacy CMOS device.
I&apos;ve added a README to describe the CloudHv target.

Hope this helps.

Sebastien</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18559</commentid>
    <comment_count>3</comment_count>
    <who name="Sebastien Boeuf">sebastien.boeuf</who>
    <bug_when>2022-03-04 04:30:34 +0000</bug_when>
    <thetext>The patchset has been merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3720</bug_id>
          
          <creation_ts>2021-11-05 09:58:03 +0000</creation_ts>
          <short_desc>Action is set to &apos;untested&apos; if image signature is not found in DB</short_desc>
          <delta_ts>2021-12-06 04:22:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3721</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Joseph Hemann">Joseph.Hemann</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>xiaolu.jiang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch>yuwei.chen@intel.com</cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17692</commentid>
    <comment_count>0</comment_count>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-11-05 09:58:03 +0000</bug_when>
    <thetext>In the DxeImageVerificationHandler if the image is signed but not allowed by DB and the hash of image is not found in DB/DBX, then the EFI_IMAGE_INFO_ACTION of the load of said image should be set to, EFI_IMAGE_EXECUTION_AUTH_SIG_NOT_FOUND, rather then being left  unset as EFI_IMAGE_EXECUTION_AUTH_UNTESTED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17824</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 22:11:43 +0000</bug_when>
    <thetext>Duplicated.

*** This bug has been marked as a duplicate of bug 3721 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17939</commentid>
    <comment_count>2</comment_count>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-12-06 04:22:36 +0000</bug_when>
    <thetext>Proposed patch: https://edk2.groups.io/g/devel/message/81837?p=%2C%2C%2C20%2C0%2C0%2C0%3A%3Arecentpostdate%2Fsticky%2C%2Cjoseph+hemann%2C20%2C2%2C0%2C86267146</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3605</bug_id>
          
          <creation_ts>2021-09-03 15:49:33 +0000</creation_ts>
          <short_desc>SecurityPkg/MemoryOverwriteControl: DEBUG print missing argument</short_desc>
          <delta_ts>2021-09-04 05:05:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17164</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-03 15:49:33 +0000</bug_when>
    <thetext>The error message is missing the argument for the status code
print specifier.

SecurityPkg\Tcg\MemoryOverwriteControl\TcgMor.c:

  Status   = gRT-&gt;SetVariable (
               MEMORY_OVERWRITE_REQUEST_VARIABLE_NAME,
               &amp;gEfiMemoryOverwriteControlDataGuid,
               EFI_VARIABLE_NON_VOLATILE | EFI_VARIABLE_BOOTSERVICE_ACCESS | EFI_VARIABLE_RUNTIME_ACCESS,
               DataSize,
               &amp;mMorControl
               );
  if (EFI_ERROR (Status)) {
    DEBUG ((EFI_D_ERROR, &quot;TcgMor: Clear MOR_CLEAR_MEMORY_BIT failure, Status = %r\n&quot;));
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17165</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-03 15:49:54 +0000</bug_when>
    <thetext>I will submit a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17166</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-03 15:59:24 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/80246</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17168</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-09-04 05:05:36 +0000</bug_when>
    <thetext>Merged - https://github.com/tianocore/edk2/pull/1950
edf8bc6d24c6f490c27de3144eee88f1ca40ce6a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3006</bug_id>
          
          <creation_ts>2020-10-14 11:45:21 +0000</creation_ts>
          <short_desc>Cannot start vm with OVMF_CODE/VARS.fd (stable 202005 and 202008) if hdmi is not attached / Compilation with XCODE5/clang - Only RELEASE version</short_desc>
          <delta_ts>2020-10-19 12:34:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Daniele Crudo">crudo.daniele</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>afish</cc>
    
    <cc>alex.williamson</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13968</commentid>
    <comment_count>0</comment_count>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-14 11:45:21 +0000</bug_when>
    <thetext>Good morning, I have an issue with compiled OVMF_CODE.fd and OVMF_VARS.fd from v. 202005 and v. 202008 stable releases from github.
I&apos;m using qemu 5.1.0-1 on linux manjaro architect 20.1.1 to run a macos vm with gpu passthrough (Nvidia GTX Titan black).
My setup usually has 2 monitors attached:
Titan Black: dvi &lt;---&gt; dvi to vga adapter &lt;---&gt; vga on monitor 1
Titan Black: hdmi &lt;---&gt; hdmi on monitor 2

This configuration works.

With OVMF_CODE.fd and OVMF_VARS.fd from v. 202005 or v. 202008 stable releases, if I detach the hdmi cable from the monitor (or from the gpu) the vm doesn&apos;t start anymore: all I have on monitor 1 is a blinking power led (it&apos;s not a &quot;no signal&quot;). Note that the vm doesn&apos;t start I don&apos;t have only a black screen (the bootloader of the vm has a bootchime and I cannot hear it).

I solved the described issue by replacing OVMF_CODE.fd and OVMF_VARS.fd with an older version (probably 2019), sorry I don&apos;t know the exact version, these files come with linux distro Unraid 6.8.3 (I contacted the company asking the exact version they included in the distro).

I&apos;m open to provide logs or tests if guided.

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13975</commentid>
    <comment_count>1</comment_count>
      <attachid>575</attachid>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-15 02:43:25 +0000</bug_when>
    <thetext>Created attachment 575
OVMF_CODE NOT affected by this issue - part1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13976</commentid>
    <comment_count>2</comment_count>
      <attachid>576</attachid>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-15 02:43:51 +0000</bug_when>
    <thetext>Created attachment 576
OVMF_CODE NOT affected by this issue - part2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13977</commentid>
    <comment_count>3</comment_count>
      <attachid>577</attachid>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-15 02:44:43 +0000</bug_when>
    <thetext>Created attachment 577
OVMF_VARS NOT affected by this issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13980</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-15 06:47:16 +0000</bug_when>
    <thetext>Hi Daniele,

I don&apos;t have the slightest clue, sorry. If you have a known good and a known bad OVMF version, I suggest bisecting the commit range between them, do pinpoint the culprit commit.

You could also ask for help on the vfio-users mailing list:
https://www.redhat.com/mailman/listinfo/vfio-users

and/or on the Unraid forums.

You can collect the OVMF debug log with

  -debugcon file:debug.log -global isa-debugcon.iobase=0x402

but I&apos;m not too hopeful that comparing logs before/after is going to be very helpful in this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13982</commentid>
    <comment_count>5</comment_count>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-15 06:59:54 +0000</bug_when>
    <thetext>Thank you very much for your reply, I appreciate.
Yes, I will try to find the commit.

I did some more tests today, and now I&apos;m not really sure if the issue is related to the code itself or something else..Because I tried the OVMF_CODE.fd and OVMF_VARS.fd coming with manjaro (202005 at the moment) and the issue is not there! (it&apos;s working).

I noticed that my compiled versions don&apos;t have the tianocore logo, all other precompiled versions (including that of manjaro) have the tianocore logo, and I noticed that in github sources the logo is still there.

So, before proceeding further may I ask if I&apos;m compiling correctly?

On macos this is what I&apos;m doing:

git clone https://github.com/tianocore/edk2.git
cd edk2
git checkout 06dc822
git submodule init
git submodule update
cd OvmfPkg
./build.sh -a X64 -t XCODE5 -b RELEASE -p /Users/daniele/Downloads/edk2/OvmfPkg/OvmfPkgX64.dsc

Is this approach correct? And why I don&apos;t have the tianocore logo?

PS:
Commit 06dc822 is to have 202008 stable version.

Again, thank you for your attention.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13985</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-15 07:37:32 +0000</bug_when>
    <thetext>(In reply to Daniele Crudo from comment #5)
&gt; Thank you very much for your reply, I appreciate.
&gt; Yes, I will try to find the commit.
&gt; 
&gt; I did some more tests today, and now I&apos;m not really sure if the issue is
&gt; related to the code itself or something else..Because I tried the
&gt; OVMF_CODE.fd and OVMF_VARS.fd coming with manjaro (202005 at the moment) and
&gt; the issue is not there! (it&apos;s working).

If I understand correctly, this means that you have seen both success and failure with the exact same OVMF binary. Can you confirm please?

&gt; I noticed that my compiled versions don&apos;t have the tianocore logo, all other
&gt; precompiled versions (including that of manjaro) have the tianocore logo,
&gt; and I noticed that in github sources the logo is still there.

Not having the boot logo in the binaries that you build yourself is unexpected.

&gt; So, before proceeding further may I ask if I&apos;m compiling correctly?
&gt; 
&gt; On macos this is what I&apos;m doing:
&gt; 
&gt; git clone https://github.com/tianocore/edk2.git
&gt; cd edk2
&gt; git checkout 06dc822
&gt; git submodule init
&gt; git submodule update
&gt; cd OvmfPkg
&gt; ./build.sh -a X64 -t XCODE5 -b RELEASE -p
&gt; /Users/daniele/Downloads/edk2/OvmfPkg/OvmfPkgX64.dsc
&gt; 
&gt; Is this approach correct? And why I don&apos;t have the tianocore logo?

Hmm, I don&apos;t really use &quot;build.sh&quot;. Also, the pathname of the DSC file should be relative to the project root dir, not an absolute pathname.

Can you try this, standing in the edk2 project root dir, after the initial clone?

$ git clean -ffdx
$ git reset --hard
$ git submodule deinit --force --all
$ git checkout edk2-stable202008
$ git submodule update --init --force
$ source edksetup.sh
$ nice make -C &quot;$EDK_TOOLS_PATH&quot; -j $(getconf _NPROCESSORS_ONLN)
$ build -a X64 -b RELEASE -p OvmfPkg/OvmfPkgX64.dsc -t XCODE5 

That said, I have zero experience with building edk2 on OSX. You&apos;ll have better luck asking for help with that on the edk2-devel or edk2-discuss mailing lists.

Thanks
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13986</commentid>
    <comment_count>7</comment_count>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-15 09:20:09 +0000</bug_when>
    <thetext>Thank you very much, you pointed me in the right direction to at least be able to compile a working copy of latest stable 202008.

Ok, here what I found:

&quot;If I understand correctly, this means that you have seen both success and failure with the exact same OVMF binary. Can you confirm please?&quot;

Yes, exactly; not the same binary but same version: I directly tried 202005 from manjaro (tianocore logo, can boot without hdmi plugged in) and 202005 compiled by me on MacOS (No tianocore logo, cannot boot without hdmi plugged in).

&quot;Can you try this, standing in the edk2 project root dir, after the initial clone?&quot;

$ git clean -ffdx
$ git reset --hard
$ git submodule deinit --force --all
$ git checkout edk2-stable202008
$ git submodule update --init --force
$ source edksetup.sh
$ nice make -C &quot;$EDK_TOOLS_PATH&quot; -j $(getconf _NPROCESSORS_ONLN)
$ build -a X64 -b RELEASE -p OvmfPkg/OvmfPkgX64.dsc -t XCODE5

Thank you for the instructions, unfortunately it has the same results as before: all seems to be compiled without errors, but on compiled files same issues (no tianocore logo, cannot boot without hdmi plugged in).

So, I thought, luckily I have a kali virtual machine setup, let&apos;s try to compile in another environment; after installing iasl, that was missing:

$ git clean -ffdx
$ git reset --hard
$ git submodule deinit --force --all
$ git checkout edk2-stable202008
$ git submodule update --init --force
$ source edksetup.sh
$ nice make -C &quot;$EDK_TOOLS_PATH&quot; -j $(getconf _NPROCESSORS_ONLN)
$ build -a X64 -b RELEASE -p OvmfPkg/OvmfPkgX64.dsc -t GCC5

It built without errors and now I have compiled files working well (tianocore logo, can boot without hdmi plugged in).

So, at least now I have a working environment in which I&apos;m able to compile edk2.
Not sure what&apos;s happening in MacOS, but it can be only 2 things:
1- my environment is broken or
2- edk2 can&apos;t be successfully built with xcode

From terminal, as I said, I cannot see any error, but maybe I&apos;m missing something in this log, so I&apos;m attaching it here for who is interested.

Thank you</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13988</commentid>
    <comment_count>8</comment_count>
      <attachid>578</attachid>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-15 09:21:51 +0000</bug_when>
    <thetext>Created attachment 578
building log from mac OS terminal</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13992</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-15 12:03:14 +0000</bug_when>
    <thetext>Daniele,

XCODE5 could be mis-building OVMF. XCODE5&apos;s coverage for OVMF is not complete; search the OVMF DSC files for &quot;XCODE5&quot;, for seeing exceptions / quirks.

I&apos;m unsure what to do here; I&apos;ll try to raise this ticket on the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13993</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-15 12:08:25 +0000</bug_when>
    <thetext>Daniele,

please

(1) build OVMF for DEBUG rather than RELEASE, and
(2) build one OVMF binary in each of your envs (Kali and OSX)
(3) capture the OVMF log using both binaries, in the interesting use case (HDMI unplugged) -- see comment 4

Maybe if we compare the OVMF logs between the failing and succeeding binaries, we can figure out something.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13994</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-15 12:10:45 +0000</bug_when>
    <thetext>... The UEFI driver that&apos;s flashed on your &quot;Nvidia GTX Titan black&quot; GPU (option ROM) almost certainly sees that the HDMI cable is unplugged. When that happens, maybe the driver fails to interoperate with the platform firmware *IF* the platform firmware was built with XCODE5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14007</commentid>
    <comment_count>12</comment_count>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-16 02:17:22 +0000</bug_when>
    <thetext>Lazko, thank you.
Unfortunately I think this will not be easy to track, because the debug version works well when compiled with xcode/clang.
So there should be something related to release version only.

Anyway I&apos;m attaching both debug logs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14008</commentid>
    <comment_count>13</comment_count>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-16 02:18:43 +0000</bug_when>
    <thetext>Sorry for the OT, sorry for the name mismatch! (Laszlo)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14009</commentid>
    <comment_count>14</comment_count>
      <attachid>579</attachid>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-16 02:19:27 +0000</bug_when>
    <thetext>Created attachment 579
OVMF debug lof - Kali linux files</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14010</commentid>
    <comment_count>15</comment_count>
      <attachid>580</attachid>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-16 02:19:57 +0000</bug_when>
    <thetext>Created attachment 580
OVMF debug log - MacOS files</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14016</commentid>
    <comment_count>16</comment_count>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-17 08:15:45 +0000</bug_when>
    <thetext>Finally I found the culprit.

I tested also different toolchains; here the details.

On Big Sur beta 10:

Xcode 12.0.1
Build version 12A7300

1- Toolchain 1:
Apple clang version 12.0.0 (clang-1200.0.32.2)
Target: x86_64-apple-darwin20.1.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin

2- Toolchain 2:
clang version 9.0.0 (git://github.com/llvm/llvm-project.git 0399d5a9682b3cef71c653373e38890c63c4c365)
Target: x86_64-apple-darwin20.1.0
Thread model: posix
InstalledDir: /Users/daniele/Downloads/clang+llvm-9.0.0-x86_64-darwin-apple/bin


On Catalina 10.15.7:

Xcode 12.0.1
Build version 12A7300

1- Toolchain 1:
Apple clang version 12.0.0 (clang-1200.0.32.2)
Target: x86_64-apple-darwin19.6.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin

2- Toolchain 2:
clang version 9.0.0 (git://github.com/llvm/llvm-project.git 0399d5a9682b3cef71c653373e38890c63c4c365)
Target: x86_64-apple-darwin19.6.0
Thread model: posix
InstalledDir: /Users/daniele/Downloads/clang+llvm-9.0.0-x86_64-darwin-apple/bin

3- Toolchain 3:
Apple clang version 7.0.0  (based on LLVM 7.0.0)
Target: x86_64-apple-darwin19.6.0
Thread model: posix
InstalledDir: /Library/Developer/Toolchains/swift-latest.xctoolchain/usr/bin
------------------------------------------------------------------------------

I noticed that the issue was with Catalina and Toolchain 3.
Commands to compile the files with GPU issue (Toolchain 3):

$ git clone https://github.com/tianocore/edk2.git
$ cd edk2
$ git clean -ffdx
$ git reset --hard
$ git submodule deinit --force --all
$ git checkout edk2-stable202008
$ git submodule update --init --force
$ source edksetup.sh
$ nice make -C &quot;$EDK_TOOLS_PATH&quot; -j $(getconf _NPROCESSORS_ONLN)
$ build -a X64 -b RELEASE -p OvmfPkg/OvmfPkgX64.dsc -t XCODE5

These commands build files successfully, but OVMF_VARS.fd and OVMF_CODE.fd give the described issue (cannot boot if hdmi is not plugged in).

Other toolchains (both on Big Sur and Catalina), with the same commands reported above, give an error if:

$ make -C BaseTools/

is not run after:

$ git submodule update --init --force

All the other toolchains build files without the described issue (I can boot with only dvi attached).

So, I thought, let&apos;s run:

$ make -C BaseTools/

with toolchain 3 (clang 7, on Catalina) and boom, I&apos;m able to boot with only dvi attached.

I&apos;m not sure where the problem is, because if you take a look at the first mac os log I attached (where I did not explicitly run $ make -C BaseTools/), BaseTools seem to have compiled:

&quot;Finished building BaseTools C Tools with HOST_ARCH=X64&quot;

Anyway, if I don&apos;t explicitly run:

$ make -C BaseTools/

OVMF_CODE.fd and OVMF_VARS.fd don&apos;t work properly.

Best regards</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14017</commentid>
    <comment_count>17</comment_count>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-17 14:49:11 +0000</bug_when>
    <thetext>No sorry, my mistake. Lots of tests and some confusion.
The above post contains invalid info.

All can I say now is that clang 7.0.0 generates files with issues, all ok with clang 12.0.0 and 9.0.0.

I will make some more tests in the next days.

Sorry for confusion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14019</commentid>
    <comment_count>18</comment_count>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-18 07:34:46 +0000</bug_when>
    <thetext>Moreover, with these commands with clang 7.0.0:
$ git clone https://github.com/tianocore/edk2.git
$ cd edk2
$ git clean -ffdx
$ git reset --hard
$ git submodule deinit --force --all
$ git checkout edk2-stable202008
$ git submodule update --init --force
$ make -C BaseTools/

then switching to clang 12.0.0:
$ source edksetu﻿p.sh﻿
$ build -a X64 -b RELEASE -p OvmfPkg/OvmfPkgX64.dsc -t XCODE5

generate proper files.
So the &quot;build -a X64 -b RELEASE -p OvmfPkg/OvmfPkgX64.dsc -t XCODE5&quot; is having issue with clang 7.0.0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14026</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-19 09:43:23 +0000</bug_when>
    <thetext>Given that clang 9 and clang 12 compile OVMF fine even for the RELEASE target, I&apos;m inclined to rule out Andrew&apos;s implication on the mailing list, namely &quot;clang being so aggressive about optimizing out undefined behavior&quot;. If there is UB in OVMF, then it&apos;s minimally strange / unexpected that clang 7 triggers it, but clang 9 and clang 12 don&apos;t. Instead, this pattern is rather consistent with clang 7 having a bug, one that got fixed in clang 9 and clang 12.

I think we could only narrow it down by disassembling the object files and comparing the disassemblies. That would be a huge amount of work, and honestly I don&apos;t see the point. I&apos;m proposing to close this BZ as WONTFIX or INVALID, and avoiding clang 7 for building OVMF.

(I&apos;ve checked &quot;BaseTools/Conf/tools_def.template&quot;, and it does not seem to spell out any version requirements at all for XCODE5.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14027</commentid>
    <comment_count>20</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-19 09:44:17 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #19)

&gt; (I&apos;ve checked &quot;BaseTools/Conf/tools_def.template&quot;, and it does not seem to
&gt; spell out any version requirements at all for XCODE5.)

I meant &quot;any *clang* version requirements&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14028</commentid>
    <comment_count>21</comment_count>
    <who name="Daniele Crudo">crudo.daniele</who>
    <bug_when>2020-10-19 09:50:25 +0000</bug_when>
    <thetext>I agree, moreover the issue is not so severe and I only found out a special case, anyhow OVMF boots also in this case, we don&apos;t have really corrupted files.
Avoiding clang 7.0.0 should be specified.
And who knows..maybe also other toolchains have issues in special cases, I just found one!
WONTFIX should be more appropriate than INVALID.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14030</commentid>
    <comment_count>22</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-19 12:34:39 +0000</bug_when>
    <thetext>OK, going with WONTFIX then. Thanks.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>575</attachid>
            <date>2020-10-15 02:43:25 +0000</date>
            <delta_ts>2020-10-15 02:43:25 +0000</delta_ts>
            <desc>OVMF_CODE NOT affected by this issue - part1</desc>
            <filename>OVMF_CODE.fd.zip.001</filename>
            <type>application/octet-stream</type>
            <size>900000</size>
            <attacher name="Daniele Crudo">crudo.daniele</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>576</attachid>
            <date>2020-10-15 02:43:51 +0000</date>
            <delta_ts>2020-10-15 02:43:51 +0000</delta_ts>
            <desc>OVMF_CODE NOT affected by this issue - part2</desc>
            <filename>OVMF_CODE.fd.zip.002</filename>
            <type>application/octet-stream</type>
            <size>362684</size>
            <attacher name="Daniele Crudo">crudo.daniele</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>577</attachid>
            <date>2020-10-15 02:44:43 +0000</date>
            <delta_ts>2020-10-15 02:44:43 +0000</delta_ts>
            <desc>OVMF_VARS NOT affected by this issue</desc>
            <filename>OVMF_VARS.fd.zip</filename>
            <type>application/zip</type>
            <size>465</size>
            <attacher name="Daniele Crudo">crudo.daniele</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>578</attachid>
            <date>2020-10-15 09:21:51 +0000</date>
            <delta_ts>2020-10-15 09:21:51 +0000</delta_ts>
            <desc>building log from mac OS terminal</desc>
            <filename>log-macOs.txt.zip</filename>
            <type>application/zip</type>
            <size>94123</size>
            <attacher name="Daniele Crudo">crudo.daniele</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>579</attachid>
            <date>2020-10-16 02:19:27 +0000</date>
            <delta_ts>2020-10-16 02:19:27 +0000</delta_ts>
            <desc>OVMF debug lof - Kali linux files</desc>
            <filename>ovmf-kali-debug.log</filename>
            <type>application/octet-stream</type>
            <size>141555</size>
            <attacher name="Daniele Crudo">crudo.daniele</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>580</attachid>
            <date>2020-10-16 02:19:57 +0000</date>
            <delta_ts>2020-10-16 02:19:57 +0000</delta_ts>
            <desc>OVMF debug log - MacOS files</desc>
            <filename>ovmf-macos-debug.log</filename>
            <type>application/octet-stream</type>
            <size>141991</size>
            <attacher name="Daniele Crudo">crudo.daniele</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3496</bug_id>
          
          <creation_ts>2021-07-18 22:58:21 +0000</creation_ts>
          <short_desc>HTTPS Additional Event Notifications</short_desc>
          <delta_ts>2022-05-10 23:07:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16649</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-07-18 22:58:21 +0000</bug_when>
    <thetext>Some Platform code want to receive Additional HTTP(s) events and do corresponding response:
HTTPS URI Name Resolved
HTTPS Connected Successfully
No network connection available
Name Resolution of URI failed
Connect to URI failed
HTTPS TLS Auth failed

Hope NetworkPkg can provide a mechanism to notify platform code when the events occurs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16651</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-07-19 08:03:30 +0000</bug_when>
    <thetext>I will submit a patch for this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18945</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-05-10 23:07:36 +0000</bug_when>
    <thetext>fixed by https://github.com/tianocore/edk2/commit/ab796d3e2ab41bde3a0bdd932cdcd09fd641e00c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3385</bug_id>
          
          <creation_ts>2021-05-10 09:13:46 +0000</creation_ts>
          <short_desc>UefiCpuPkg MpLib.c: &apos;type cast&apos; : conversion from &apos;int&apos; to &apos;SEV_ES_AP_JMP_FAR *&apos; of greater size</short_desc>
          <delta_ts>2021-05-11 13:53:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>thomas.lendacky</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15976</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-05-10 09:13:46 +0000</bug_when>
    <thetext>c:\users\administrator\src\edk2\UefiCpuPkg\Library\MpInitLib\MpLib.c(1268)
: error C2220: warning treated as error - no &apos;object&apos; file generated
c:\users\administrator\src\edk2\UefiCpuPkg\Library\MpInitLib\MpLib.c(1268)
: warning C4306: &apos;type cast&apos; : conversion from &apos;int&apos; to
&apos;SEV_ES_AP_JMP_FAR *&apos; of greater size

&quot;I think the compiler is justified to complain here:

7b7508ad784d1 (Tom Lendacky     2020-08-12 15:21:42 -0500 1268)   JmpFar = (SEV_ES_AP_JMP_FAR *) FixedPcdGet32 (PcdSevEsWorkAreaBase);

The proper way to spell such casts is with (UINTN) in the middle.&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15978</commentid>
    <comment_count>1</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-05-10 10:31:27 +0000</bug_when>
    <thetext>v1:
  https://edk2.groups.io/g/devel/message/74878
  https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00194.html
  msgid: &lt;c89bc819856d448360430c32cb3833a9667f987b.1620656694.git.thomas.lendacky@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15994</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-11 13:24:09 +0000</bug_when>
    <thetext>IN_PROGRESS per comment 1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15995</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-11 13:53:09 +0000</bug_when>
    <thetext>Merged as commit 6933c78e4dc2, via &lt;https://github.com/tianocore/edk2/pull/1634&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3876</bug_id>
          
          <creation_ts>2022-03-19 04:47:19 +0000</creation_ts>
          <short_desc>command line changes in recent NASM release(s) break VbeShim.sh</short_desc>
          <delta_ts>2023-01-04 07:59:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3790</see_also>
    
    <see_also>https://bugzilla.nasm.us/show_bug.cgi?id=3392829</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>ardb</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>kraxel</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>rebecca</cc>
    
    <cc>yun.lou</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18652</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2022-03-19 04:47:19 +0000</bug_when>
    <thetext>(report against c1e662101add)

The following two files:

  OvmfPkg/Bhyve/BhyveRfbDxe/VbeShim.sh
  OvmfPkg/QemuVideoDxe/VbeShim.sh

invoke both &quot;nasm&quot; and &quot;ndisasm&quot;:

&gt;| #
&gt;| # Assemble the source file.
&gt;| #
&gt;| nasm -o &quot;$STEM&quot;.bin -- &quot;$STEM&quot;.asm
&gt;|
&gt;| #
&gt;| # Disassemble it, in order to get a binary dump associated with the source.
&gt;| # (ndisasm doesn&apos;t recognize the &quot;--&quot; end-of-options delimiter.)
&gt;| #
&gt;| ndisasm &quot;$STEM&quot;.bin &gt;&quot;$STEM&quot;.disasm

With the NASM version requirement recently bumped from 2.10 to 2.15.05
-- see bug 3790, commit 6a890db161cd --, even the &quot;nasm&quot; executable has
stopped recognizing the &quot;--&quot; end-of-options delimiter.

As a consequence, &quot;VbeShim.sh&quot; no longer works.

Please update the &quot;nasm&quot; command line, and the &quot;ndisasm&quot; *comment*,
accordingly (i.e., please remove &quot;--&quot; from &quot;nasm&quot;, and please remove the
discussion of &quot;--&quot; from before &quot;ndisasm&quot;, as there is no difference
between &quot;nasm&quot; and &quot;ndisasm&quot; in that regard any longer).

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18673</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 21:41:43 +0000</bug_when>
    <thetext>Rebecca: can you fix this one?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18682</commentid>
    <comment_count>2</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2022-03-22 21:57:10 +0000</bug_when>
    <thetext>Yes, I&apos;ll work on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20335</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-01 07:40:06 +0000</bug_when>
    <thetext>Per my bisection of NASM, the breakage in NASM is not intentional. In other words, NASM still intends to parse &quot;--&quot; as the end-of-options delimiter, it just fails to. Namely, the breakage is from NASM commit 55568c1193df (&quot;nasm: scan the command line twice&quot;, 2016-10-03), part of the nasm-2.13 release.

I&apos;ve tried reporting this at &lt;https://bugzilla.nasm.us/&gt;; however, account registration is currently locked down to prevent spam accounts, and I&apos;ve not received an answer yet after emailing &lt;gorcunov@gmail.com&gt; and &lt;hpa@zytor.com&gt;.

Therefore, I think that the &quot;--&quot; end-of-options delimiter should indeed be removed from the NASM invocation in Vbeshim.sh; *however*, I think that the ndisasm comment should be *duplicated* near the nasm invocation. Because, the fact that &quot;--&quot; does not work is clearly a NASM bug, not by design. (Grep the NASM source for &quot;stopoptions&quot; -- that&apos;s what&apos;s supposed to work, but does not.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20363</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-02 08:08:11 +0000</bug_when>
    <thetext>Upstream NASM bug report:

https://bugzilla.nasm.us/show_bug.cgi?id=3392829</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20415</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 10:04:01 +0000</bug_when>
    <thetext>[PATCH 0/4] fixes for BZs 3876, 4235, 4236
Message-Id: &lt;20230103150244.66835-1-lersek@redhat.com&gt;
https://listman.redhat.com/archives/edk2-devel-archive/2023-January/057171.html
https://edk2.groups.io/g/devel/message/97873</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20463</commentid>
    <comment_count>6</comment_count>
    <who name="Ard Biesheuvel">ardb</who>
    <bug_when>2023-01-04 04:45:33 +0000</bug_when>
    <thetext>Fix merged as part of #3852</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20479</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-04 07:59:14 +0000</bug_when>
    <thetext>(commit 12e4043bd61a67d9cab423aa48dc45adce1769cc)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3256</bug_id>
          
          <creation_ts>2021-03-10 08:15:35 +0000</creation_ts>
          <short_desc>GenFw embeds full DLL pathname in RELEASE binaries</short_desc>
          <delta_ts>2021-03-24 18:23:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ross Burton">ross.burton</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15263</commentid>
    <comment_count>0</comment_count>
    <who name="Ross Burton">ross.burton</who>
    <bug_when>2021-03-10 08:15:35 +0000</bug_when>
    <thetext>In a release build bootx86.efi contains one build path as can be seen in this diffoscope:

https://autobuilder.yocto.io/pub/repro-fail/2021-2-25-rp/ovmf-shell-efi/diff/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15264</commentid>
    <comment_count>1</comment_count>
    <who name="Ross Burton">ross.burton</who>
    <bug_when>2021-03-10 08:55:31 +0000</bug_when>
    <thetext>The one difference is a build path in a binary ending in DEBUG​/​Shell.​dll.  With a local build grepping for that shows the string in the following files:

OvmfX64/RELEASE_GCC5/FV/MEMFD.fd
OvmfX64/RELEASE_GCC5/FV/DXEFV.Fv
OvmfX64/RELEASE_GCC5/FV/Ffs/9E21FD93-9C72-4c15-8C4B-E77F1DB2D792FVMAIN_COMPACT/9E21FD93-9C72-4c15-8C4B-E77F1DB2D792SEC1.guided.dummy
OvmfX64/RELEASE_GCC5/FV/Ffs/9E21FD93-9C72-4c15-8C4B-E77F1DB2D792FVMAIN_COMPACT/9E21FD93-9C72-4c15-8C4B-E77F1DB2D792SEC1.2fv.sec
OvmfX64/RELEASE_GCC5/FV/Ffs/7C04A583-9E3E-4f1c-AD65-E05268D0B4D1Shell/7C04A583-9E3E-4f1c-AD65-E05268D0B4D1.ffs
OvmfX64/RELEASE_GCC5/FV/Ffs/7C04A583-9E3E-4f1c-AD65-E05268D0B4D1Shell/7C04A583-9E3E-4f1c-AD65-E05268D0B4D1SEC1.1.pe32
OvmfX64/RELEASE_GCC5/FV/Ffs/7C04A583-9E3E-4f1c-AD65-E05268D0B4D1Shell/7C04A583-9E3E-4f1c-AD65-E05268D0B4D1.map
OvmfX64/RELEASE_GCC5/X64/Shell.efi
OvmfX64/RELEASE_GCC5/X64/ShellPkg/Application/Shell/Shell/GNUmakefile
OvmfX64/RELEASE_GCC5/X64/ShellPkg/Application/Shell/Shell/DEBUG/Shell.efi
OvmfX64/RELEASE_GCC5/X64/ShellPkg/Application/Shell/Shell/DEBUG/Shell.map
OvmfX64/RELEASE_GCC5/X64/ShellPkg/Application/Shell/Shell/OUTPUT/Shell.map
OvmfX64/RELEASE_GCC5/X64/ShellPkg/Application/Shell/Shell/OUTPUT/Shell.efi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15267</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-10 11:46:27 +0000</bug_when>
    <thetext>I confirm that the following command:

build \
  -a X64 \
  -b RELEASE \
  -p OvmfPkg/OvmfPkgX64.dsc \
  -t GCC5 \
  -m ShellPkg/Application/Shell/Shell.inf

produces a binary

  Build/OvmfX64/RELEASE_GCC5/X64/Shell.efi

that contains the string

  $PREFIX/Build/OvmfX64/RELEASE_GCC5/X64/ShellPkg/Application/Shell/Shell/DEBUG/Shell.dll

I agree this is not optimal; I think it&apos;s a BaseTools issue.

... This seems to come from the following command line (generated by &quot;build&quot;):

&quot;GenFw&quot; -e UEFI_APPLICATION \
  -o $PREFIX/Build/OvmfX64/RELEASE_GCC5/X64/ShellPkg/Application/Shell/Shell/OUTPUT/Shell.efi \
  $PREFIX/Build/OvmfX64/RELEASE_GCC5/X64/ShellPkg/Application/Shell/Shell/DEBUG/Shell.dll

In &quot;BaseTools/Source/C/GenFw/Elf64Convert.c&quot;, the WriteDebug64() function embeds &quot;mInImageName&quot; in the output (called from ConvertElf() in &quot;BaseTools/Source/C/GenFw/ElfConvert.c&quot;).

... Passing the &quot;--zero&quot; flag (as a guess) to &quot;GenFw&quot; does not change this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15268</commentid>
    <comment_count>3</comment_count>
    <who name="Ross Burton">ross.burton</who>
    <bug_when>2021-03-10 12:39:11 +0000</bug_when>
    <thetext>Would respecting --zero be an appropriate action?

Alternatively (and more involved), passing and respecting file name mappings (as passed to GCC already)?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15273</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-10 14:15:33 +0000</bug_when>
    <thetext>I can&apos;t really tell. I&apos;m not sure what good WriteDebug64() does in a RELEASE build -- I don&apos;t know what utilities are supposed to consume the resultant binary content. From where I stand, it should be possible to disable the invocation of WriteDebug altogether, but given no parameter seems to exist for that, I&apos;m likely wrong.

Stripping $PREFIX in the invocation of GenFw could be easier (no changes to GenFw); then again, the resultant pathnames (in the release binaries) would be relative, and (again) I don&apos;t know if that&apos;s a problem for the tools (whatever they may be) that consume the embedded pathnames right now.

I think we&apos;ll have to wait for BaseTools maintainer feedback here. Feel free to raise the issue on the list as well, CC&apos;ing the BaseTools maintainers directly (see Maintainers.txt).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15281</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-11 12:32:43 +0000</bug_when>
    <thetext>Related:

[edk2-discuss] Non-reproducible binaries generated by GenFw
https://edk2.groups.io/g/discuss/message/604</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15288</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-12 13:38:49 +0000</bug_when>
    <thetext>In comment 2, I was -- apparently -- wrong about &quot;--zero&quot;. The &quot;--zero&quot; option exists precisely for this purpose, and it works for Liming and Ross both.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15355</commentid>
    <comment_count>7</comment_count>
    <who name="Ross Burton">ross.burton</who>
    <bug_when>2021-03-18 06:45:25 +0000</bug_when>
    <thetext>Patch on the list now: https://edk2.groups.io/g/devel/message/72990</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15359</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-18 10:43:41 +0000</bug_when>
    <thetext>IN_PROGRESS per comment 7.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15422</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-24 17:38:57 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v2] OvmfPkg: strip build paths in release builds

msgid: &lt;20210324115819.605436-1-ross.burton@arm.com&gt;
https://edk2.groups.io/g/devel/message/73207
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00954.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15424</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-24 18:23:12 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #9)
&gt; * [edk2-devel] [PATCH v2] OvmfPkg: strip build paths in release builds
&gt; 
&gt; msgid: &lt;20210324115819.605436-1-ross.burton@arm.com&gt;
&gt; https://edk2.groups.io/g/devel/message/73207
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00954.html

Merged as commit f037af6ecbc3, via &lt;https://github.com/tianocore/edk2/pull/1513&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3746</bug_id>
          
          <creation_ts>2021-11-23 11:44:25 +0000</creation_ts>
          <short_desc>Update pytool LicenseCheck plugin to use temp directory for diff output file</short_desc>
          <delta_ts>2022-01-14 20:27:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2986</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17801</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-23 11:44:25 +0000</bug_when>
    <thetext>In #2986, EccCheck is updated to use a temp directory with 
one benefit being improved performance by using a temp directory
and --output option in git diff command to send diff output to
a file instead of stdout.  This reduces log size and also
improved performance by not generating the redundant diff
content in the stdout when stuart commands are run with
verbose output.

https://bugzilla.tianocore.org/show_bug.cgi?id=2986

Apply same technique from EccCheck to LicneseCheck when the 
git diff command is run.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17802</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-23 11:45:21 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18158</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:27:08 +0000</bug_when>
    <thetext>GitHub PR Merged:   
    https://github.com/tianocore/edk2/pull/2217

Commit:
    https://github.com/tianocore/edk2/pull/2217/commits/0ed51c16481d7467cd7b4f7dcb5d723a127f7699

Email code review V2:
    https://edk2.groups.io/g/devel/message/83976</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3145</bug_id>
          
          <creation_ts>2020-12-31 13:59:15 +0000</creation_ts>
          <short_desc>UEFI-SCT: handling of unsupported EFI_SIMPLE_NETWORK_PROTOCOL functions</short_desc>
          <delta_ts>2022-02-03 09:14:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Sunny Wang">Sunny.Wang</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14687</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-31 13:59:15 +0000</bug_when>
    <thetext>The UEFI specification allows EFI_SIMPLE_NETWORK_PROTOCOL.ReceiveFilters() to return EFI_UNSUPPORTED to signal that &quot;this function is not supported by the network interface&quot;.

Accordingly with commit 3d98de052fcd (&quot;uefi-sct/SctPkg: SNP ReceiveFilters may be unsupported&quot;) the conformance test for EFI_SIMPLE_NETWORK_PROTOCOL.ReceiveFilters() was adjusted.

But the functional test still return an error:
SctPkg/TestCase/UEFI/EFI/Protocol/SimpleNetwork/BlackBoxTest/SimpleNetworkBBTestFunction.c:891:Status - Unsupported, Filter - AAAA00000000, Mask -

So we should adjust this test too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14688</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-31 14:03:29 +0000</bug_when>
    <thetext>Like in the conformance test we could write a warning:

  if (Status == EFI_UNSUPPORTED) {
    StandardLib-&gt;RecordMessage(
                   StandardLib,
                   EFI_VERBOSE_LEVEL_QUIET,
                   L&quot;ReceiveFilters isn&apos;t supported, Status - %r\n&quot;,
                   Status^M
                   );^M</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15863</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 03:43:17 +0000</bug_when>
    <thetext>Assign resolver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17459</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-10-07 10:58:15 +0000</bug_when>
    <thetext>Sunny to further analyse.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17722</commentid>
    <comment_count>4</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-11-10 16:56:17 +0000</bug_when>
    <thetext>Hi Heinrich, 

&quot;this function is not supported by the network interface&quot; may not mean that SCT should allow the function to return EFI_UNSUPPORTED.
 
SNP.Start, SNP.Stop, and other SNP functions also have &quot;this function is not supported by the network interface&quot; in its sections in the UEFI spec, but I think some of them are required for UEFI network boot (like PXE, HTTP boot) or other functionality that is required during boot, so it looks like we should not allow the firmware to return EFI_UNSUPPORTED for them. 

Or do you see any description saying a specific SNP function or the whole SNP is optional in the UEFI spec? I couldn&apos;t find it by roughly checking the spec. If you can&apos;t find it either, it looks like making sense to show failure for the SNP.ReceiveFilters that returns EFI_UNSUPPORTED and we may need to revert commit 3d98de052fcd for consistency.    

If we want to allow EFI_SIMPLE_NETWORK_PROTOCOL.ReceiveFilters() to return EFI_UNSUPPORTED, we may need to update the UEFI specification. For the SCT users, they can use the sequence file (.seq) to skip testing specific functions if they think the function is not needed (fine to return EFI_UNSUPPORTED).  


Best Regards,
Sunny</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17725</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-11-11 04:18:49 +0000</bug_when>
    <thetext>The following functions may return EFI_UNSUPPORTED according to the UEFI 2.9 specification:

* Start()
* Stop()
* Initialize() only if increased buffer size feature is not supported
* Reset()
* ReceiveFilters()
* StationAddress()
* Statistics()
* MCastIPtoMAC() only if IPv6 requested but not supported
* NvData()
* Transmit()

The following functions may not return EFI_UNSUPPORTED:

* Shutdown()
* GetStatus()
* Receive()

If the NIC is already initialized, Transmit(), Receive(), and GetStatus() are enough to build all other protocols upon them. So these are really essential. I don&apos;t know under which circumstances Transmit() might return EFI_UNSUPPORTED (e.g MAC address not set?).

Functions like NvData(), ReceiveFilsters(), or Statistics() are non-essential for booting from the network. So it is understandable why they may return EFI_UNSUPPORTED.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17727</commentid>
    <comment_count>6</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-11-11 09:27:56 +0000</bug_when>
    <thetext>Sunny to implement functions to return EFI_UNSUPPORTED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18125</commentid>
    <comment_count>7</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2022-01-13 09:01:13 +0000</bug_when>
    <thetext>The patch has been sent out. Waiting for review. 
https://edk2.groups.io/g/devel/message/85577</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18133</commentid>
    <comment_count>8</comment_count>
      <attachid>915</attachid>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2022-01-13 09:23:58 +0000</bug_when>
    <thetext>Created attachment 915
0001-uefi-sct-SctPkg-Allow-some-SNP-functions-to-return-E.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18232</commentid>
    <comment_count>9</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-02-03 09:14:17 +0000</bug_when>
    <thetext>The solution is upstreamed.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>915</attachid>
            <date>2022-01-13 09:23:58 +0000</date>
            <delta_ts>2022-01-13 09:23:58 +0000</delta_ts>
            <desc>0001-uefi-sct-SctPkg-Allow-some-SNP-functions-to-return-E.patch</desc>
            <filename>0001-uefi-sct-SctPkg-Allow-some-SNP-functions-to-return-E.patch</filename>
            <type>text/plain</type>
            <size>290092</size>
            <attacher name="Sunny Wang">Sunny.Wang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3626</bug_id>
          
          <creation_ts>2021-09-14 04:19:26 +0000</creation_ts>
          <short_desc>AppPkg: Add support for atexit builtin module in Py 3.6.8</short_desc>
          <delta_ts>2021-09-19 08:12:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Jayaprakash Nevara">n.jayaprakash</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17269</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-09-14 04:19:26 +0000</bug_when>
    <thetext>atexit is a built in module in standard python 3.6.8 and this has not been enabled in Py 3.6.8 port of UEFI. This module is currently needed for Chipsec tool but it can be used by other python scripts running on UEFI shell as well.

This BZ is to add support for the atexit builtin module in py 3.6.8 UEFI port</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17270</commentid>
    <comment_count>1</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-09-14 04:19:56 +0000</bug_when>
    <thetext>moving to confirmed status</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17305</commentid>
    <comment_count>2</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-09-19 08:12:25 +0000</bug_when>
    <thetext>The changes are merged with the master repo</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3520</bug_id>
          
          <creation_ts>2021-08-02 17:14:54 +0000</creation_ts>
          <short_desc>SmmTestPointCheckLib has incorrect array index</short_desc>
          <delta_ts>2021-08-11 21:40:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeremiah Cox">jerecox</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16735</commentid>
    <comment_count>0</comment_count>
      <attachid>783</attachid>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2021-08-02 17:14:54 +0000</bug_when>
    <thetext>Created attachment 783
Patch

BYTE6 is at array offset 6, not 5.  See attached patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16755</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 21:47:45 +0000</bug_when>
    <thetext>Please send the patch to edk2 mail list for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16794</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 10:19:00 +0000</bug_when>
    <thetext>I will be sending a patch today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16798</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 11:01:50 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/78713

Sent in the larger patch series: https://edk2.groups.io/g/devel/topics</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16804</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 11:06:06 +0000</bug_when>
    <thetext>Moving to IN_PROGRESS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16886</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-11 21:40:28 +0000</bug_when>
    <thetext>Merged to edk2-platforms/master in the following commit: https://github.com/tianocore/edk2-platforms/commit/d4045cd508c4a89edc687483870a05e2e5dcffc2</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>783</attachid>
            <date>2021-08-02 17:14:54 +0000</date>
            <delta_ts>2021-08-02 17:14:54 +0000</delta_ts>
            <desc>Patch</desc>
            <filename>0001-TCBZ_-SmmTestPointCheckLib-index-bugs.patch</filename>
            <type>application/octet-stream</type>
            <size>1400</size>
            <attacher name="Jeremiah Cox">jerecox</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3413</bug_id>
          
          <creation_ts>2021-05-24 02:50:49 +0000</creation_ts>
          <short_desc>UEFI cryptography agile solution - separate crypto algorithm (phase I)</short_desc>
          <delta_ts>2023-10-26 16:11:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.a.rothman</cc>
    
    <cc>w.sheng</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16125</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-05-24 02:50:49 +0000</bug_when>
    <thetext>This bugzilla is the follow-up discussion for https://bugzilla.tianocore.org/show_bug.cgi?id=2950.

2950 brings a specific case:
0) UEFI spec mentions: &quot;Only a digest algorithm of SHA-256 is accepted.&quot;
We need extend to &quot;Only a SHA-2 digest algorithm with the hash size 256 or greater is accepted.&quot;

However, there are other cases:
1) For digest algorithm, there might be need to support SHA-3 digest algorithm or others such as SM3.

2) UEFI spec mentions: &quot;Only a digest encryption algorithm of RSA with PKCS #1 v1.5 padding (RSASSA_PKCS1v1_5). is accepted&quot;
There might be need to support RSA-PSS algorithm, or ECDSA.

As Jeremiah commented:
======
ITEM 2: minimums and downgrades
======
This opens up the maximum digest size, but provides no enforcement of a minimum.  I could imagine a platform wanting a platform-wide minimum, say to require SHA2-384 (when SHA2-256 is determined by the platform owner to be insufficient). 
Going further, what about per-variable digest minimums, if I use SHA2-384 as the digest when I create the PK, I can later delete the PK using a SHA2-256 digest algorithm, correct?  Should each variable have its own minimum that is declared (or assumed selected) at creation time?  If I create a PK using SHA2-512, should all future SetVariable() operations on that variable require SHA2-512 (or better, and what is better?).  Or perhaps we don&apos;t allow &quot;better&quot;, because &quot;better&quot; might not really be &quot;better&quot; - snap to digest type/size at creation and use that until deletion (but that excludes upgrading a digest across a key update).
======


We have see the problem resolved in other area:
A) TCG platform firmware profile spec defines the crypto agile solution: The EFI_TCG2_PROTOCOL reports the crypto capability from BIOS to OS. The OS can use TPM Physical Presence to ask the BIOS to change the algorithm.

B) Network TLS defines cipher suite to allow client/server to negotiate. (Client provides a list, server selects one)

C) DMTF SPDM defines NEGOTIATE_ALGORITHM message to allow requester and responder to negotiate. (Requester provides a list, responder selects one).

D) PCI-SIG CMA ECR chooses to mandate a subset of SPDM supported algorithm. Such as TPM_ALG_RSASSA_3072/ECDSA_P256/ECDSA_P384 + SHA2_256/SHA2_384.

E) OCP Secure Boot requires: RSA PSS PKCS#1 v2.1 3072 or higher/ECDSA P384 or higher + SHA2-384

F) There are other crypto requirements such as SM3 + SM2.


I think we need finally isolate crypto algorithm from the spec, and make it crypto agile.

Also we may need a consistent way to:
1) indicate cryptography algorithm capabilities
2) indicate minimal platform requirement


There are some pattern:
1) Mandate: make a set of algorithms mandatory. Both BIOS and OS need support.
2) Discover: BIOS reports a set of supported algorithm. (a new API ? or OsIndicator variable?)
3) Negotiate: OS can choose what is desired algorithm. (OsIndicator Variable ?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16142</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-25 21:40:41 +0000</bug_when>
    <thetext>Jiewen drives it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16175</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-05-26 13:07:03 +0000</bug_when>
    <thetext>Multiple UEFI image signature is already supported:
=============
Multiple signatures are allowed to exist in the binary’s certificate table (as per PE/COFF Section “Attribute Certificate Table”). Only one hash or signature is required to be present in db in order to pass validation, so long as neither the SHA-256 hash of the binary nor any present signature is reflected in dbx.
=============
We probably just need remove SHA-256 here.



Multiple trust anchor should be discussed as well.
============
For UEFI, the recommended Platform Key format is RSA-2048. 
============
The RAS-2048 recommendation should be updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16407</commentid>
    <comment_count>3</comment_count>
      <attachid>737</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-21 06:03:03 +0000</bug_when>
    <thetext>Created attachment 737
CodeFirst - UEFI Crypto Agile - remove hardcoded algorithm</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16408</commentid>
    <comment_count>4</comment_count>
      <attachid>738</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-21 08:32:50 +0000</bug_when>
    <thetext>Created attachment 738
CodeFirst - UEFI Crypto Agile - remove hardcoded algorithm v2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16409</commentid>
    <comment_count>5</comment_count>
      <attachid>739</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-21 08:35:34 +0000</bug_when>
    <thetext>Created attachment 739
CodeFirst - UEFI Cryptographic Algorithm Guideline</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16445</commentid>
    <comment_count>6</comment_count>
      <attachid>741</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-23 13:12:54 +0000</bug_when>
    <thetext>Created attachment 741
CodeFirst - UEFI Crypto Agile - remove hardcoded algorithm v3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16446</commentid>
    <comment_count>7</comment_count>
      <attachid>742</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-23 13:13:25 +0000</bug_when>
    <thetext>Created attachment 742
CodeFirst - UEFI Cryptographic Algorithm Guideline v2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16664</commentid>
    <comment_count>8</comment_count>
      <attachid>768</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-07-20 22:07:11 +0000</bug_when>
    <thetext>Created attachment 768
CodeFirst - UEFI Cryptographic Algorithm Guideline v3

add summary information in background section.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17530</commentid>
    <comment_count>9</comment_count>
    <who name="Michael A. Rothman">michael.a.rothman</who>
    <bug_when>2021-10-13 14:07:38 +0000</bug_when>
    <thetext>Is this proposal complete?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17661</commentid>
    <comment_count>10</comment_count>
      <attachid>857</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-11-03 09:04:12 +0000</bug_when>
    <thetext>Created attachment 857
UEFI Crypto Agile v3.pptx

Add phase II proposal for discussion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17684</commentid>
    <comment_count>11</comment_count>
      <attachid>867</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-11-03 13:07:28 +0000</bug_when>
    <thetext>Created attachment 867
CodeFirst - UEFI Crypto Agile - support crypto indication variable v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17703</commentid>
    <comment_count>12</comment_count>
      <attachid>870</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-11-09 01:38:29 +0000</bug_when>
    <thetext>Created attachment 870
CodeFirst - UEFI Cryptographic Algorithm Guideline v4

Move the content to UEFI specification, section 2.6.5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17704</commentid>
    <comment_count>13</comment_count>
      <attachid>867</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-11-09 01:39:19 +0000</bug_when>
    <thetext>Comment on attachment 867
CodeFirst - UEFI Crypto Agile - support crypto indication variable v1

remove this file from phase I.
I will submit the document to another bugzilla to handle phase II/III.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17706</commentid>
    <comment_count>14</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-11-09 01:46:05 +0000</bug_when>
    <thetext>The phase II/III content (more algorithm + compatibility consideration) is tracked in https://bugzilla.tianocore.org/show_bug.cgi?id=3725.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18218</commentid>
    <comment_count>15</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2022-01-28 02:05:08 +0000</bug_when>
    <thetext>Upload the code change to https://github.com/swei22/edk2/tree/CryptoAgile.
For the unsigned image, it will use SHA-384 digest to verify the image.
And support a image with RSA-3072 key sign.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22065</commentid>
    <comment_count>16</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-10-26 16:11:08 +0000</bug_when>
    <thetext>Fixed in commit 24da5c2f283eeb44b625af9bf86cae7db2f99ff4.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22066</commentid>
    <comment_count>17</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-10-26 16:11:26 +0000</bug_when>
    <thetext>... and commit bbf182229587958b17336c114e0a1525c4f90f3d.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>737</attachid>
            <date>2021-06-21 06:03:03 +0000</date>
            <delta_ts>2021-06-21 08:33:23 +0000</delta_ts>
            <desc>CodeFirst - UEFI Crypto Agile - remove hardcoded algorithm</desc>
            <filename>CodeFirst - UEFI Crypto Agile - remove hardcoded algorithm.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>30135</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>738</attachid>
            <date>2021-06-21 08:32:50 +0000</date>
            <delta_ts>2021-06-23 13:12:54 +0000</delta_ts>
            <desc>CodeFirst - UEFI Crypto Agile - remove hardcoded algorithm v2</desc>
            <filename>CodeFirst - UEFI Crypto Agile - remove hardcoded algorithm v2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>31083</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>739</attachid>
            <date>2021-06-21 08:35:34 +0000</date>
            <delta_ts>2021-06-23 13:13:25 +0000</delta_ts>
            <desc>CodeFirst - UEFI Cryptographic Algorithm Guideline</desc>
            <filename>CodeFirst - UEFI Cryptographic Algorithm Guideline.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>23848</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>741</attachid>
            <date>2021-06-23 13:12:54 +0000</date>
            <delta_ts>2021-06-23 13:12:54 +0000</delta_ts>
            <desc>CodeFirst - UEFI Crypto Agile - remove hardcoded algorithm v3</desc>
            <filename>CodeFirst - UEFI Crypto Agile - remove hardcoded algorithm v3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>30185</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>742</attachid>
            <date>2021-06-23 13:13:25 +0000</date>
            <delta_ts>2021-07-20 22:07:11 +0000</delta_ts>
            <desc>CodeFirst - UEFI Cryptographic Algorithm Guideline v2</desc>
            <filename>CodeFirst - UEFI Cryptographic Algorithm Guideline v2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>24435</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>768</attachid>
            <date>2021-07-20 22:07:11 +0000</date>
            <delta_ts>2021-11-09 01:38:29 +0000</delta_ts>
            <desc>CodeFirst - UEFI Cryptographic Algorithm Guideline v3</desc>
            <filename>CodeFirst - UEFI Cryptographic Algorithm Guideline v3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>27838</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>857</attachid>
            <date>2021-11-03 09:04:12 +0000</date>
            <delta_ts>2021-11-03 09:04:12 +0000</delta_ts>
            <desc>UEFI Crypto Agile v3.pptx</desc>
            <filename>UEFI Crypto Agile v3.pptx</filename>
            <type>application/vnd.openxmlformats-officedocument.presentationml.presentation</type>
            <size>157915</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>867</attachid>
            <date>2021-11-03 13:07:28 +0000</date>
            <delta_ts>2021-11-09 01:39:19 +0000</delta_ts>
            <desc>CodeFirst - UEFI Crypto Agile - support crypto indication variable v1</desc>
            <filename>CodeFirst - UEFI Crypto Agile - support crypto indication variable v1.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>28201</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>870</attachid>
            <date>2021-11-09 01:38:29 +0000</date>
            <delta_ts>2021-11-09 01:38:29 +0000</delta_ts>
            <desc>CodeFirst - UEFI Cryptographic Algorithm Guideline v4</desc>
            <filename>CodeFirst - UEFI Cryptographic Algorithm Guideline v4.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>27934</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3900</bug_id>
          
          <creation_ts>2022-04-08 12:16:08 +0000</creation_ts>
          <short_desc>Update smbiosview type 41 with SMBIOS 3.5 fields</short_desc>
          <delta_ts>2022-05-02 23:36:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bo-ChangX Ke">bo-changx.ke</reporter>
          <assigned_to name="Bo-ChangX Ke">bo-changx.ke</assigned_to>
          <cc>bo-changx.ke</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18793</commentid>
    <comment_count>0</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-08 12:16:08 +0000</bug_when>
    <thetext>Update smbiosview type 41 with SMBIOS 3.5 fields</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18794</commentid>
    <comment_count>1</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-08 12:17:32 +0000</bug_when>
    <thetext>working on type 41 upgrade</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18796</commentid>
    <comment_count>2</comment_count>
      <attachid>973</attachid>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-08 12:30:03 +0000</bug_when>
    <thetext>Created attachment 973
update type 41 patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18799</commentid>
    <comment_count>3</comment_count>
      <attachid>974</attachid>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-11 02:18:38 +0000</bug_when>
    <thetext>Created attachment 974
update type 41 patch

edit the patch contents</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18833</commentid>
    <comment_count>4</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-19 04:23:52 +0000</bug_when>
    <thetext>changes are merged

URL:https://github.com/tianocore/edk2/commit/9bf7291d636ebd816b8f81edcf366dac926f9f44

Commit ID:9bf7291d636ebd816b8f81edcf366dac926f9f44</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18918</commentid>
    <comment_count>5</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-05-02 23:36:39 +0000</bug_when>
    <thetext>update Commit ID and URL:

Commit ID:9bf7291d636ebd816b8f81edcf366dac926f9f44

(https://github.com/tianocore/edk2/commit/9bf7291d636ebd816b8f81edcf366dac926f9f44)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>973</attachid>
            <date>2022-04-08 12:30:03 +0000</date>
            <delta_ts>2022-04-08 12:30:03 +0000</delta_ts>
            <desc>update type 41 patch</desc>
            <filename>0001-ShellPkg-Update-smbiosview-type-41-with-SMBIOS-3.5-f.patch</filename>
            <type>text/plain</type>
            <size>1471</size>
            <attacher name="Bo-ChangX Ke">bo-changx.ke</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>974</attachid>
            <date>2022-04-11 02:18:38 +0000</date>
            <delta_ts>2022-04-11 02:18:38 +0000</delta_ts>
            <desc>update type 41 patch</desc>
            <filename>0001-ShellPkg-Update-smbiosview-type-41-with-SMBIOS-3.5-f.patch</filename>
            <type>text/plain</type>
            <size>1469</size>
            <attacher name="Bo-ChangX Ke">bo-changx.ke</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3285</bug_id>
          
          <creation_ts>2021-03-30 15:32:24 +0000</creation_ts>
          <short_desc>Remove duplicate declaration of   EFI_HII_POPUP_PROTOCOL in MdePkg/Include/Protocol/HiiPopup.h</short_desc>
          <delta_ts>2021-04-01 19:23:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15454</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-03-30 15:32:24 +0000</bug_when>
    <thetext>The EFI_HII_PROTOCOL id declared twice in MdePkg/Include/Protocol/HiiPopup.h

Once in a forward declaration:

  typedef struct _EFI_HII_POPUP_PROTOCOL EFI_HII_POPUP_PROTOCOL;

And again in the protocol structure:

  typedef struct _EFI_HII_POPUP_PROTOCOL {
    UINT64                Revision;
    EFI_HII_CREATE_POPUP  CreatePopup;
  } EFI_HII_POPUP_PROTOCOL;

The forward declaration is correct, but the typedef struct should
remove EFI_HII_POPUP_PROTOCOL after the &apos;}&apos;.

This change will match other protocol declarations and improve 
compiler compatibility when this is seen as a duplicate declaration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15455</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-03-30 15:32:59 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15497</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-01 19:21:37 +0000</bug_when>
    <thetext>Patch review email

https://edk2.groups.io/g/devel/message/73546</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15498</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-01 19:23:22 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/32976569af6bbf2b33ce4a7e02072e9b34e9954e

GitHub PR:

https://github.com/tianocore/edk2/pull/1531</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3768</bug_id>
          
          <creation_ts>2021-12-06 13:54:35 +0000</creation_ts>
          <short_desc>DMAR structure length calculation in TestPointCheckLib is invalid</short_desc>
          <delta_ts>2021-12-13 19:28:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17941</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-12-06 13:54:35 +0000</bug_when>
    <thetext>When processing DMAR structures of type EFI_ACPI_DMAR_STRUCTURE_HEADER within the ACPI DMAR table, the code determines the structure length by subtracting the DMAR structure headers present from the overall DMAR ACPI table size.

typedef struct {
  UINT16        Type;
  UINT16        Length;
} EFI_ACPI_DMAR_STRUCTURE_HEADER;

The terminating condition is that the remaining total DMAR length is greater than zero. However, the current DMAR structure length is subtracted after the DMAR structure pointer has already been assigned to the next structure. For example:

  while (DmarLen &gt; 0) {
    switch (DmarStructHeader-&gt;Type) {
    case EFI_ACPI_DMAR_TYPE_DRHD:
      Drhd = (EFI_ACPI_DMAR_DRHD_HEADER *)DmarStructHeader;

      Reg32 = MmioRead32 ((UINTN)Drhd-&gt;RegisterBaseAddress + R_GSTS_REG);
      if ((Reg32 &amp; B_GSTS_REG_TE) == 0) {
        return EFI_INVALID_PARAMETER;
      }
      break;
    default:
      break;
    }
    DmarStructHeader = (EFI_ACPI_DMAR_STRUCTURE_HEADER *)((UINT8 *)DmarStructHeader + DmarStructHeader-&gt;Length);
    DmarLen         -= DmarStructHeader-&gt;Length;
  }

This can lead to the final iteration of the loop dereferencing an invalid DMAR structure in memory. In this case, further leading to an invalid MMIO read.


Note that a similar algorithm in IntelSiliconPkg\Feature\VTd\IntelVTdDmarPei\DmarTable.c and IntelSiliconPkg\Feature\VTd\IntelVTdDxe\DmarAcpiTable.c has the correct logic.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17942</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-12-06 16:14:41 +0000</bug_when>
    <thetext>I will send a patch soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17943</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-12-06 18:38:04 +0000</bug_when>
    <thetext>v1: https://edk2.groups.io/g/devel/message/84425
Branch: https://github.com/makubacki/edk2-platforms/tree/fix_dmar_testpoint_iter_calculation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17975</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-12-10 19:27:22 +0000</bug_when>
    <thetext>v2: https://edk2.groups.io/g/devel/message/84649
Branch: https://github.com/makubacki/edk2-platforms/tree/fix_dmar_testpoint_iter_calculation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17980</commentid>
    <comment_count>4</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-12-13 19:28:26 +0000</bug_when>
    <thetext>Fix has been pushed upstream: https://github.com/tianocore/edk2-platforms/commit/871ce77</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3538</bug_id>
          
          <creation_ts>2021-08-09 03:00:59 +0000</creation_ts>
          <short_desc>Best Web Design Company in Toronto</short_desc>
          <delta_ts>2021-08-09 22:46:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Compny Inc">compnyinc00</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16829</commentid>
    <comment_count>0</comment_count>
    <who name="Compny Inc">compnyinc00</who>
    <bug_when>2021-08-09 03:00:59 +0000</bug_when>
    <thetext>The team at Company Inc. provides Web Design Service, we build sites that our clients and their customers can interact with and improve relationships while accomplishing successful online business goals. We provide services in website design, eCommerce website design, graphic design services, search engine optimization (SEO) Toronto, and more. Best Web Design Company in Toronto. Contact us for more details.

Visit- https://compny.co/web-design-toronto/
Address- 4243C Dundas Street West Unit # 31 Etobicoke, ON M8X 1Y3 Canada
Phone no. 6472812926
Email - hello@compny.co
Working Hours – Mon to Fri – 9 am to 6 pm</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16846</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-09 22:46:36 +0000</bug_when>
    <thetext>this is not an issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3435</bug_id>
          
          <creation_ts>2021-06-05 05:25:39 +0000</creation_ts>
          <short_desc>How do I talk to a cash app representative with no troublesome conditions?</short_desc>
          <delta_ts>2021-06-07 11:35:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Reference Implementation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="peter butler">peterbutler.797</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Specification Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16270</commentid>
    <comment_count>0</comment_count>
    <who name="peter butler">peterbutler.797</who>
    <bug_when>2021-06-05 05:25:39 +0000</bug_when>
    <thetext>Cash app clients should be keen as far as imparting the issues to the cash app support team to get the arrangement when needed to utilize a computerized installment application. Transactional activities dependent on obscure components are another factor to make the deceptive condition for a cash application account. In this way, having a thought regarding how I talk to a cash app representative is an obligatory viewpoint to handle the issues with the cash app account.https://www.contact-customerservice.co/customer-service/cash-app</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16283</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-07 11:35:35 +0000</bug_when>
    <thetext>Invalid</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3928</bug_id>
          
          <creation_ts>2022-05-16 04:28:05 +0000</creation_ts>
          <short_desc>[BaseTools] Support to assign the subject name to sign the capsule file</short_desc>
          <delta_ts>2022-08-04 22:59:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason Lin">jason1.lin</reporter>
          <assigned_to name="Jason Lin">jason1.lin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18954</commentid>
    <comment_count>0</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-05-16 04:28:05 +0000</bug_when>
    <thetext>In edk2/BaseTools/Source/Python/Capsule/GenerateCapsule.py file would call
the signtool.exe to sign the capsule file in Windows-based system.
Script should to support the /n parameter when the sign keystore is not store
in local computer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18988</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 21:47:39 +0000</bug_when>
    <thetext>Jason: please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19007</commentid>
    <comment_count>2</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-06-01 07:50:59 +0000</bug_when>
    <thetext>Hi

Have been sent out the patch.
https://edk2.groups.io/g/devel/topic/patch_v1_basetools_capsule/91470157
Please help to do the code review.

Thanks,
Jason.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19250</commentid>
    <comment_count>3</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-07-15 23:32:07 +0000</bug_when>
    <thetext>[Scenario]
- Windows-based system provide the certificate manager
  to store the certificate. (With public key and
  corresponding privte key).
- With the certificate store in computer, user no need
  to assign the pfx file directly.
- Just need to assign the certificate subject name to
  sign the file. 

[Description]
- signtool.exe support to sign the file with assign
  the certificate&apos;s subject name with the input argument
  &quot;/n&quot;.
- In the current flow, it is only allow user to assign the
  pfx file directly to generate capsule.
- This FR is used to add the support to pass the &quot;/n&quot; flag
  to signtool.exe. Then user could assign the pfx file or
  subject name by demand.

[Note]
- To view the certificate store in computer could use
  &quot;certmgr.msc&quot; tool)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19360</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-08-04 22:59:23 +0000</bug_when>
    <thetext>It has been fixed at edk2 b68d566439683d0ebe60d52c85ff0e90331db740</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3308</bug_id>
          
          <creation_ts>2021-04-07 17:31:27 +0000</creation_ts>
          <short_desc>Remove fixed CPU architecture list assumptions from BaseTools, MdePkg, and CryptoPkg</short_desc>
          <delta_ts>2021-04-15 12:48:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>afish</cc>
    
    <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15550</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-07 17:31:27 +0000</bug_when>
    <thetext>The EDK II Build Specifications do not restrict the set of
CPU architectures that can be supported.  The EDK II DSC
Specification defines the following EBFN for a CPU Arch
and a CPU Arch List.  The &lt;OA&gt; allows any string.

  &lt;OA&gt; ::= (a-zA-Z)(a-zA-Z0-9)*
  &lt;arch&gt; ::= {&quot;IA32&quot;} {&quot;X64&quot;} {&quot;EBC&quot;} {&lt;OA&gt;} {&quot;COMMON&quot;}

  &lt;ArchList&gt; ::= &lt;arch&gt; [&lt;FS&gt; &lt;arch&gt;]*

Remove places in the EDK II that assume a fixed set of CPU
architectures and break the build if a CPU outside the fixed set
is used.  This includes the following build tools:

* Build
* GenFw
* GenFds
* TargetTool

In addition, there are a few defines in the MdePkg that will
generate a #error condition from the C pre-processor if one of
a fixed set of CPU architectures is not used.  Allow these few
defines to be predefined in an EDK II Build using either
/D command line options or DSC file [BuildOptions] sections.

MdePkg: 
* EFI_IMAGE_MACHINE_TYPE_SUPPORTED
* EFI_IMAGE_MACHINE_CROSS_TYPE_SUPPORTED
* EFI_REMOVABLE_MEDIA_FILE_NAME

CryptoPkg: One of the following must be defined.  Never both at same time.
* SIXTY_FOUR_BIT
* THIRTY_TWO_BIT</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15551</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-07 17:31:45 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15669</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-13 22:51:06 +0000</bug_when>
    <thetext>Using the build command /D flags does not pass additional /D flags into 
the C compiler.  The MdePkg and CryptoPkg defines can only be set using
CC_FLAGS in tools_def.conf or CC_FLAGS in a DSC file [BuildOptions] section.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15671</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-13 23:02:36 +0000</bug_when>
    <thetext>The EFI_IMAGE_MACHINE_TYPE_SUPPORTED(Machine) and 
EFI_IMAGE_MACHINE_CROSS_TYPE_SUPPORTED(Machine) are function-like 
macros.

The VS20xx compilers do not support setting a function-like macro
on the command line.  The GCC and CLANG compilers do.  

https://docs.microsoft.com/en-us/cpp/build/reference/d-preprocessor-definitions?view=msvc-160#remarks

    The /D option doesn&apos;t support function-like macro definitions. To insert 
    definitions that can&apos;t be defined on the command line, consider the /FI (Name 
    forced include file) compiler option.

Using an addition /FI flag with an extra include file is complicated.

Instead, two new #define values can be used to provide the machine
type values to check for a supported machine type or a supported
cross machine type.

* EFI_IMAGE_MACHINE_TYPE_VALUE
* EFI_IMAGE_MACHINE_CROSS_TYPE_VALUE

tools_def.txt and DSC [BuildOptions] section can use the
following style to set the 16-bit machine type values

  *_*_*_CC_FLAGS = /D EFI_IMAGE_MACHINE_TYPE_VALUE=0x1234
  *_*_*_CC_FLAGS = /D EFI_IMAGE_MACHINE_CROSS_TYPE_VALUE=0x5678

If neither of these _VALUE defines are defined (exiting use case), then the current
macros for the UEFI supported machine types are used.  If either or both are defined,
then check if Machine is equal to the provided value.

#if !defined(EFI_IMAGE_MACHINE_TYPE_VALUE) &amp;&amp; !defined(EFI_IMAGE_MACHINE_CROSS_TYPE_VALUE)

&lt;Exiting code&gt; 

#else
#if defined (EFI_IMAGE_MACHINE_TYPE_VALUE)
#define EFI_IMAGE_MACHINE_TYPE_SUPPORTED(Machine) ((Machine) == EFI_IMAGE_MACHINE_TYPE_VALUE)
#else
#define EFI_IMAGE_MACHINE_TYPE_SUPPORTED(Machine) (FALSE)
#endif
#if defined (EFI_IMAGE_MACHINE_CROSS_TYPE_VALUE)
#define EFI_IMAGE_MACHINE_CROSS_TYPE_SUPPORTED(Machine) ((Machine) == EFI_IMAGE_MACHINE_CROSS_TYPE_VALUE)
#else
#define EFI_IMAGE_MACHINE_CROSS_TYPE_SUPPORTED(Machine) (FALSE)
#endif
#endif</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15702</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-15 11:36:55 +0000</bug_when>
    <thetext>Path email review

https://edk2.groups.io/g/devel/message/74081
https://edk2.groups.io/g/devel/message/74082
https://edk2.groups.io/g/devel/message/74083
https://edk2.groups.io/g/devel/message/74084
https://edk2.groups.io/g/devel/message/74085</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15703</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-15 12:48:41 +0000</bug_when>
    <thetext>Commits:
https://github.com/tianocore/edk2/commit/3c13938079886e0e49031ab29a4f1ed7a4ceab68
https://github.com/tianocore/edk2/commit/251f9b3906370f9b539f3d364c3d42dcc7173e86
https://github.com/tianocore/edk2/commit/d0bf83e1ccabaf86169d664385eab5aed1c2a1f2
https://github.com/tianocore/edk2/commit/db2338af0d2746f34c8df18751116af209b202b2

GitHub PR:
https://github.com/tianocore/edk2/pull/1570</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3796</bug_id>
          
          <creation_ts>2022-01-07 01:38:38 +0000</creation_ts>
          <short_desc>HiiDataBaseDxe module lacks handling of authenticated variable type</short_desc>
          <delta_ts>2022-03-01 22:04:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Long Huang">long1.huang</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18101</commentid>
    <comment_count>0</comment_count>
    <who name="Long Huang">long1.huang</who>
    <bug_when>2022-01-07 01:38:38 +0000</bug_when>
    <thetext>HiiDataBaseDxe module lacks handling of authenticated variable type now, so if the default variable type is AUTHENTICATED_VARIABLE_HEADER instead of VARIABLE_HEADER, when press &quot;F9 == Reset to Defaults&quot;, would get a wrong default.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18102</commentid>
    <comment_count>1</comment_count>
    <who name="Long Huang">long1.huang</who>
    <bug_when>2022-01-07 01:40:53 +0000</bug_when>
    <thetext>Huang Long is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18110</commentid>
    <comment_count>2</comment_count>
    <who name="Long Huang">long1.huang</who>
    <bug_when>2022-01-10 20:02:51 +0000</bug_when>
    <thetext>MdeModulePkg/HiiDatabaseDxe: Add Support for authenticated variable                                                                                                                
 
Database.c:
   1. Replace PcdGetExPtr with PcdGetExPtr.
   2. Add FindAuthVariableData function to parse authenticated variable type for getting a correct default value in PcdNvStoreDefaultValueBuffer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18493</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 22:04:43 +0000</bug_when>
    <thetext>This request can be closed. BaseTools always generates normal variable storage.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3185</bug_id>
          
          <creation_ts>2021-01-22 15:02:41 +0000</creation_ts>
          <short_desc>Add MM_STANDALONE support to SmiHandlerProfileLib</short_desc>
          <delta_ts>2021-03-05 13:34:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14895</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-01-22 15:02:41 +0000</bug_when>
    <thetext>The NULL instance of SmiHandlerProfileLib in MdeModulePkg can support Standalone MM modules with a well known set of changes (add new constructor, switch to MM services tables, etc) and would be useful in some Traditional MM environments that are being converted to support Standalone MM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14898</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-01-22 16:54:19 +0000</bug_when>
    <thetext>Ignore the &quot;NULL instance&quot; remark in the last comment. I meant to say the &quot;MdeModulePkg instance&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14914</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-25 20:54:07 +0000</bug_when>
    <thetext>The patch has been sent for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15227</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-03-05 13:34:41 +0000</bug_when>
    <thetext>Patch merged as commit 1f0fa9187b6e.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3678</bug_id>
          
          <creation_ts>2021-10-07 21:06:12 +0000</creation_ts>
          <short_desc>MinPlatformPkg: Support FSP 2.3 FSP_NON_VOLATILE_STORAGE_HOB2.</short_desc>
          <delta_ts>2021-10-14 22:45:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17464</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-10-07 21:06:12 +0000</bug_when>
    <thetext>Implementation should search FSP_NON_VOLATILE_STORAGE_HOB2 firstly and only search  FSP_NON_VOLATILE_STORAGE_HOB when former one is not found.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17504</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-12 21:38:52 +0000</bug_when>
    <thetext>Chasel is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17556</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-10-14 22:45:59 +0000</bug_when>
    <thetext>commit c24188b81fa9d286dbb4070cca774066f39d4bb7
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Oct 8 09:46:41 2021 +0800

    WhitleySiliconPkg: Use same variable name for FspNvsHob.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3678

    To simplify the implementation the variable Name/GUID has been
    changed to &quot;FspNvsBuffer&quot; and gFspNvsBufferVariableGuid
    regardless it stores the data from FSP_NON_VOLATILE_STORAGE_HOB2
    or FSP_NON_VOLATILE_STORAGE_HOB.

    Cc: Isaac Oram &lt;isaac.w.oram@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Isaac Oram &lt;isaac.w.oram@intel.com&gt;

commit e8a64852af49b91473d3e3cdecabf83f2184d8c2
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Oct 8 09:44:52 2021 +0800

    WhitleyOpenBoardPkg: Support FSP 2.3 FSP_NON_VOLATILE_STORAGE_HOB2.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3678

    Implementation should search FSP_NON_VOLATILE_STORAGE_HOB2 firstly
    and only search FSP_NON_VOLATILE_STORAGE_HOB when former one is not found.

    Also added PeiGetLargeVariable () to support the scenarios where the
    variable data size is bigger than a single variable size limit.

    Cc: Isaac Oram &lt;isaac.w.oram@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Isaac Oram &lt;isaac.w.oram@intel.com&gt;

commit 33d556c6c6387e92e24daff0e9b8f5c8029b997d
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Oct 8 09:42:26 2021 +0800

    WhiskeylakeOpenBoardPkg: Use same variable name for FspNvsHob.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3678

    To simplify the implementation the variable Name/GUID has been
    changed to &quot;FspNvsBuffer&quot; and gFspNvsBufferVariableGuid
    regardless it stores the data from FSP_NON_VOLATILE_STORAGE_HOB2
    or FSP_NON_VOLATILE_STORAGE_HOB.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Isaac Oram &lt;isaac.w.oram@intel.com&gt;

commit 6f543cdde0031571b6a1d64a9e899b5c19a5a52f
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Oct 8 09:40:07 2021 +0800

    TigerlakeOpenBoardPkg: Use same variable name for FspNvsHob.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3678

    To simplify the implementation the variable Name/GUID has been
    changed to &quot;FspNvsBuffer&quot; and gFspNvsBufferVariableGuid
    regardless it stores the data from FSP_NON_VOLATILE_STORAGE_HOB2
    or FSP_NON_VOLATILE_STORAGE_HOB.

    Cc: Sai Chaganty &lt;rangasai.v.chaganty@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Heng Luo &lt;heng.luo@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Heng Luo &lt;heng.luo@intel.com&gt;
    Reviewed-by: Isaac Oram &lt;isaac.w.oram@intel.com&gt;

commit 547fe50eff072fe05f4043924c24696ce2a58f40
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Oct 8 09:38:26 2021 +0800

    KabylakeOpenBoardPkg/KabylakeRvp3: Use same variable name for FspNvsHob.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3678

    To simplify the implementation the variable Name/GUID has been
    changed to &quot;FspNvsBuffer&quot; and gFspNvsBufferVariableGuid
    regardless it stores the data from FSP_NON_VOLATILE_STORAGE_HOB2
    or FSP_NON_VOLATILE_STORAGE_HOB.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Isaac Oram &lt;isaac.w.oram@intel.com&gt;

commit 71af84858edad6a69291e4d6a825b4dbdcb4528b
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Oct 8 09:37:11 2021 +0800

    KabylakeOpenBoardPkg/GalagoPro3: Use same variable name for FspNvsHob.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3678

    To simplify the implementation the variable Name/GUID has been
    changed to &quot;FspNvsBuffer&quot; and gFspNvsBufferVariableGuid
    regardless it stores the data from FSP_NON_VOLATILE_STORAGE_HOB2
    or FSP_NON_VOLATILE_STORAGE_HOB.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Jeremy Soller &lt;jeremy@system76.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Isaac Oram &lt;isaac.w.oram@intel.com&gt;

commit df697c2230f8a0ff6a82bf12164e285c54e27a43
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Oct 8 09:35:18 2021 +0800

    KabylakeOpenBoardPkg/AspireVn7Dash572G:Use same variable name for FspNvsHob

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3678

    To simplify the implementation the variable Name/GUID has been
    changed to &quot;FspNvsBuffer&quot; and gFspNvsBufferVariableGuid
    regardless it stores the data from FSP_NON_VOLATILE_STORAGE_HOB2
    or FSP_NON_VOLATILE_STORAGE_HOB.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Benjamin Doron &lt;benjamin.doron00@gmail.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Isaac Oram &lt;isaac.w.oram@intel.com&gt;

commit 59dc66e86afad34293a124b5facecd193ada26c8
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Oct 8 09:33:11 2021 +0800

    CometlakeOpenBoardPkg: Use same variable name for FspNvsHob.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3678

    To simplify the implementation the variable Name/GUID has been
    changed to &quot;FspNvsBuffer&quot; and gFspNvsBufferVariableGuid
    regardless it stores the data from FSP_NON_VOLATILE_STORAGE_HOB2
    or FSP_NON_VOLATILE_STORAGE_HOB.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Rangasai V Chaganty &lt;rangasai.v.chaganty@intel.com&gt;
    Cc: Deepika Kethi Reddy &lt;deepika.kethi.reddy@intel.com&gt;
    Cc: Kathappan Esakkithevar &lt;kathappan.esakkithevar@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Kathappan Esakkithevar &lt;kathappan.esakkithevar@intel.com&gt;
    Reviewed-by: Isaac Oram &lt;isaac.w.oram@intel.com&gt;

commit 6b4a1eb461a87811627ee3bfdd847b1117aa155b
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue Oct 5 20:25:47 2021 +0800

    MinPlatformPkg: Support FSP 2.3 FSP_NON_VOLATILE_STORAGE_HOB2.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3678

    Implementation should search FSP_NON_VOLATILE_STORAGE_HOB2 firstly
    and only search FSP_NON_VOLATILE_STORAGE_HOB when former one is not found.

    Also added PeiGetLargeVariable () to support the scenarios where the
    variable data size is bigger than a single variable size limit. (stored
    across multiple variables)

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;
    Cc: Eric Dong &lt;eric.dong@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Isaac Oram &lt;isaac.w.oram@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3074</bug_id>
          
          <creation_ts>2020-11-12 18:02:14 +0000</creation_ts>
          <short_desc>Fields in CXL_1_1_LINK_CAPABILITY_STRUCTURE in Cxl11.h have incorrect offsets</short_desc>
          <delta_ts>2021-04-12 20:33:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>ashraf.javeed</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>zhiguang.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14342</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-11-12 18:02:14 +0000</bug_when>
    <thetext>The following fields of the CXL_1_1_LINK_CAPABILITY_STRUCTURE in MdePkg/Include/IndustryStandard/Cxl11.h have incorrect offsets.

* CXL_LINK_LAYER_CONTROL_AND_STATUS should be 64-bits wide instead of 16-bits.
* CXL_LINK_LAYER_ACK_TIMER_CONTROL should be 64-bits wide instead of 32-bits.
* CXL_LINK_LAYER_DEFEATURE should be 64-bits wide instead of 32-bits.

These fields structures can either be extended to 64-bits or reserved bytes can be added to proper pad between these fields.  The rest of the registers in the CXL_1_1_LINK_CAPABILITY_STRUCTURE are 64-bits, so the making them all 64-bits wide makes the CXL_1_1_LINK_CAPABILITY_STRUCTURE consistent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14347</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-11-13 11:40:33 +0000</bug_when>
    <thetext>Patch for review

https://edk2.groups.io/g/devel/message/67408</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15618</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-12 20:33:24 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/29d59baa3907277782e9f26ecaa99704ff57e3f1

GitHub PR:

https://github.com/tianocore/edk2/pull/1124</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3557</bug_id>
          
          <creation_ts>2021-08-11 07:18:34 +0000</creation_ts>
          <short_desc>Get Chime Customer Service If Require Experts Support Immediately</short_desc>
          <delta_ts>2021-08-16 21:46:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="howard123">howardpotts797</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16879</commentid>
    <comment_count>0</comment_count>
    <who name="howard123">howardpotts797</who>
    <bug_when>2021-08-11 07:18:34 +0000</bug_when>
    <thetext>Have you been stuck due to the occurrence of technical glitches and obstacles? Do you also require guidance directly from the proficient geeks to resolve your problems permanently from the root? If yes, you can make use of Chime Customer Service to discuss your issues and get the best possible solutions with ease.
https://chime-customerservice.net/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16924</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:46:52 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3960</bug_id>
          
          <creation_ts>2022-06-23 23:13:40 +0000</creation_ts>
          <short_desc>[UPL] UefiPayloadPkg: Backward support with python 3.6</short_desc>
          <delta_ts>2022-06-28 07:13:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Kasim Liu">kasimx.liu</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19131</commentid>
    <comment_count>0</comment_count>
    <who name="Kasim Liu">kasimx.liu</who>
    <bug_when>2022-06-23 23:13:40 +0000</bug_when>
    <thetext>UniveralPayloadBuild need to support Python3.6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19148</commentid>
    <comment_count>1</comment_count>
    <who name="Kasim Liu">kasimx.liu</who>
    <bug_when>2022-06-28 07:13:07 +0000</bug_when>
    <thetext>It&apos;s resolved by https://github.com/tianocore/edk2/pull/3008</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3821</bug_id>
          
          <creation_ts>2022-02-04 03:52:45 +0000</creation_ts>
          <short_desc>Make GetFspmUpdDataAddress and GetFspsUpdDataAddress reusable</short_desc>
          <delta_ts>2022-02-21 07:08:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>ted.kuo</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2WrapperPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18234</commentid>
    <comment_count>0</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-02-04 03:52:45 +0000</bug_when>
    <thetext>Currently GetFspmUpdDataAddress and GetFspsUpdDataAddress are implemented in FspmWrapperPeim and FspsWrapperPeim drivers respectively. The purpose of this ticket is to move both functions to FspWrapperApiLib so that they can be consumed by other drivers as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18247</commentid>
    <comment_count>1</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-02-06 22:03:39 +0000</bug_when>
    <thetext>After discussed with Chasel, platform can always use PcdFspmUpdDataAddress64 and PcdFspsUpdDataAddress64 regardless of the architecture (e.g. IA32 or X64). Hence no need to move the two functions to library.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18420</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-02-21 07:08:32 +0000</bug_when>
    <thetext>Thanks Ted! Good to know it works!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3099</bug_id>
          
          <creation_ts>2020-12-02 05:42:31 +0000</creation_ts>
          <short_desc>Stable source release archives</short_desc>
          <delta_ts>2020-12-03 17:32:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Anisse Astier">aastier</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14459</commentid>
    <comment_count>0</comment_count>
    <who name="Anisse Astier">aastier</who>
    <bug_when>2020-12-02 05:42:31 +0000</bug_when>
    <thetext>Source releases on the GitHub release page (https://github.com/tianocore/edk2/releases/tag/edk2-stable202011) contain source archives that are &quot;auto-generated&quot; by GitHub (https://github.com/tianocore/edk2/archive/edk2-stable202011.tar.gz). 

Unfortunately those source archives aren&apos;t stable, and there hash might change as you change GitHub server, and they are re-compressed on the fly (non-deterministically). It has caused issues with many open-source projects.

A simple workaround would be to upload the tarball and zip files manually (or with a script), like is currently done for the submodule archives.

It would help the downstreams that prefer source archives to git clones.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14463</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-02 17:54:50 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14464</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-02 17:57:37 +0000</bug_when>
    <thetext>I downloaded the GitHub generated zip and tar.gz files
and uploaded them to the same release as new assets.

Please confirm if this resolves the issue.

https://github.com/tianocore/edk2/releases/tag/edk2-stable202011


If this looks correct, then the same process can be used to
edit all the previous releases.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14470</commentid>
    <comment_count>3</comment_count>
    <who name="Anisse Astier">aastier</who>
    <bug_when>2020-12-03 03:23:59 +0000</bug_when>
    <thetext>This solves the issue for me. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14471</commentid>
    <comment_count>4</comment_count>
    <who name="Anisse Astier">aastier</who>
    <bug_when>2020-12-03 03:24:35 +0000</bug_when>
    <thetext>I might have marked this as resolved too soon, do not hesitate to change the status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14476</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-03 17:32:47 +0000</bug_when>
    <thetext>I have applied this same fix to all the following releases

edk2-stable201808
edk2-stable201811
edk2-stable201903
edk2-stable201905
edk2-stable201908
edk2-stable201911
edk2-stable202002
edk2-stable202005
edk2-stable202008
edk2-stable202011
vUDK2017
vUDK2018</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3581</bug_id>
          
          <creation_ts>2021-08-23 08:38:39 +0000</creation_ts>
          <short_desc>shell invocation might cause inconsistencies in memory maps presented to a operating system</short_desc>
          <delta_ts>2022-03-22 21:52:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Petr Špaček">pspacek</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17008</commentid>
    <comment_count>0</comment_count>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-23 08:38:39 +0000</bug_when>
    <thetext>Version:
Shell compiled from commit e0e960652302152d77ee23a916ee57c09c975259

Firmware:
System76 firmware 2021-07-20_93c2809 (based on EDK2 commit e0e960652302152d77ee23a916ee57c09c975259 + coreboot)

Hardware:
System76 Darter Pro, model darp7 + USB-C docking station https://i-tec.pro/en/produkt/c31dualdpdockpd-2/

Situation:
Booting Linux kernel 5.13.12 from shell command line (using startup.nsh script to pass parameters to Linux kernel).

Observed behavior:
Shell invocation slightly &quot;randomizes&quot; memory map visible to the operating system, and this inconsistency subsequently causes failures when resuming from hibernation (S4).

Occasionally there are slight variations between reboots even when no peripherals are connected to the laptop, but these variations get significant when a LCD is connected to display port on the USB-C docking station.

These differences cause sanity checks in the Linux kernel to fail, and the system cannot be resumed from hibernation. Linux error message is:

Hibernate inconsistent memory map detected!
PM: hibernation: Image mismatch: architecture specific data
PM: Error -1 resuming


Expected behavior:
I would expect the shell to keep memory maps as they were. Exactly the hardware/firmware/operating system setup together works fine _if_ I skip EDK2 UEFI shell and load Linux kernel either directly using UEFI Boot Manager or indirectly by invoking systemd-boot from UEFI Boot Manager.

Based on this, I believe the randomization must be happening in the shell itself; otherwise, other boot methods should be failing in the same way.


I&apos;m going to attach maps in &quot;e820&quot; text format printed by Linux kernel during boot as attachments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17009</commentid>
    <comment_count>1</comment_count>
      <attachid>807</attachid>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-23 08:40:15 +0000</bug_when>
    <thetext>Created attachment 807
memory map: boot from shell, attempt #1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17010</commentid>
    <comment_count>2</comment_count>
      <attachid>808</attachid>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-23 08:41:51 +0000</bug_when>
    <thetext>Created attachment 808
memory map: boot from shell, attempt #2

Comparison between files shell.boot-1 and shell.boot-2 shows inconsistencies:
@@ -4,3 +4,3 @@
-BIOS-e820: [mem 0x0000000000100000-0x0000000074b88fff] usable
-BIOS-e820: [mem 0x0000000074b89000-0x0000000074c5cfff] reserved
-BIOS-e820: [mem 0x0000000074c5d000-0x00000000762f6fff] usable
+BIOS-e820: [mem 0x0000000000100000-0x0000000074bbefff] usable
+BIOS-e820: [mem 0x0000000074bbf000-0x0000000074c92fff] reserved
+BIOS-e820: [mem 0x0000000074c93000-0x00000000762f6fff] usable
@@ -26,3 +26,3 @@
-e820: update [mem 0x756eb000-0x75739fff] usable ==&gt; reserved
-e820: reserve RAM buffer [mem 0x74b89000-0x77ffffff]
-e820: reserve RAM buffer [mem 0x756eb000-0x77ffffff]
+e820: update [mem 0x7570a000-0x75758fff] usable ==&gt; reserved
+e820: reserve RAM buffer [mem 0x74bbf000-0x77ffffff]
+e820: reserve RAM buffer [mem 0x7570a000-0x77ffffff]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17011</commentid>
    <comment_count>3</comment_count>
      <attachid>809</attachid>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-23 08:42:38 +0000</bug_when>
    <thetext>Created attachment 809
memory map: boot directly from UEFI Boot Manager, attempt #1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17012</commentid>
    <comment_count>4</comment_count>
      <attachid>809</attachid>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-23 08:44:15 +0000</bug_when>
    <thetext>Comment on attachment 809
memory map: boot directly from UEFI Boot Manager, attempt #1

File stub.boot-1 shows memory map printed by Linux kernel when the kernel is invoked directly by UEFI Boot Manager. Subsequent reboots and power cycles do not change this map, so I will skip adding further attachments with the exactly same content.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17037</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 21:45:29 +0000</bug_when>
    <thetext>Please check MemoryTypeInfo feature is enabled in BIOS code. MemoryTypeInfo is to keep the consistent memory range for S4 boot.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17062</commentid>
    <comment_count>6</comment_count>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-25 02:15:13 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #5)
&gt; Please check MemoryTypeInfo feature is enabled in BIOS code. MemoryTypeInfo
&gt; is to keep the consistent memory range for S4 boot.

Please excuse my ignorance, I&apos;m new to all this:

Is there a particular string in some sort of configuration/build file I can search for? Or a command in UEFI Shell to see what was compiled in? The source for firmware I&apos;m using is at https://github.com/system76/firmware-open but I don&apos;t know where to start looking.

Secondly, is that possible that MemoryTypeInfo feature is disabled but it manifests only when OS is loaded via UEFI Shell, while not manifesting the problem when UEFI Shell is not participating in the boot chain? That sounds surprising to me.

Thank you for your time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17064</commentid>
    <comment_count>7</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2021-08-25 04:23:19 +0000</bug_when>
    <thetext>The BDS tunes the memory map so s4 works properly.

Booting the UEFI Shell is booting an extra OS so the Shell allocations show up in the memory map.

Can you dump the EFI memory map? E820 does not exist on and EFI system so you lose info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17065</commentid>
    <comment_count>8</comment_count>
      <attachid>811</attachid>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-25 04:31:30 +0000</bug_when>
    <thetext>Created attachment 811
memory map: obtained from shell, attempt #3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17066</commentid>
    <comment_count>9</comment_count>
      <attachid>812</attachid>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-25 04:31:46 +0000</bug_when>
    <thetext>Created attachment 812
memory map: obtained from shell, attempt #4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17067</commentid>
    <comment_count>10</comment_count>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-25 04:33:04 +0000</bug_when>
    <thetext>Here are two memory maps obtained right inside the Shell, across two reboots. Is that what you are asking for?

I&apos;m really new to UEFI ecosystem so I might need more detailed instructions if it&apos;s not what you are asking about. Thank you for patience!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17068</commentid>
    <comment_count>11</comment_count>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-25 06:31:29 +0000</bug_when>
    <thetext>(In reply to Andrew Fish from comment #7)
&gt; Booting the UEFI Shell is booting an extra OS so the Shell allocations show
&gt; up in the memory map.

Now when I think about it, it still sounds a bit suspicious. Why should Shell allocations differ significantly between these two cases:
a) LCD is connected to display port on the USB-C docking station
b) LCD is NOT connected to display port on the USB-C docking station (but the docking station itself is connected, to be clear)
?

When no display-port-on-dock is in use the variations are so small that they do not present resume from working. When display-port-on-dock is in use variations are &quot;too big&quot; and resume consistently fails, but only if UEFI Shell is in boot chain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17074</commentid>
    <comment_count>12</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2021-08-25 14:38:00 +0000</bug_when>
    <thetext>To be clear the EFI Shell (any EFI App) allocates memory from the memory map just like the firmware. 

These memory types end up being free memory from the OS point of view:
Available - Is just free memory
BS_Code / BS_Data - Is Boot Services allocations that are freed back to OS as available memory at gBS-&gt;ExitBootServices()
LoaderCode / LoaderData - Allocated when an App (EFI OS Loader) also freed back to OS. 

This memory can never be used by the OS:
Reserved

This memory has special meaning when the OS is running:
RT_Core:RT_Data -&gt; This is usually EFI Runtime services. gRT-&gt;GetVariable etc. These services can be called by the OS in a virtual mode provided by the OS. If you look at the Attribute 800000000000000F, bit 63 means EFI requires a virtual mapping.

ACPI_Recl -&gt; Is the ACPI table and the memory can be reclaimed to the OS after the ACPI tables are copied out.

ACPI_NVS -&gt; This is memory that must be preserved by the OS and is used for S3.

So the allocations that look a little strange are:
RT_Data    000000007540F000-00000000754DCFFF 00000000000000CE 800000000000000F
ACPI_NVS   00000000762F7000-00000000762FEFFF 0000000000000008 000000000000000F

The ACPI_NVS may be OK if it is the same from boot to boot since it was allocated in PEI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17075</commentid>
    <comment_count>13</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2021-08-25 14:38:51 +0000</bug_when>
    <thetext>To be clear the EFI Shell (any EFI App) allocates memory from the memory map just like the firmware. 

These memory types end up being free memory from the OS point of view:
Available - Is just free memory
BS_Code / BS_Data - Is Boot Services allocations that are freed back to OS as available memory at gBS-&gt;ExitBootServices()
LoaderCode / LoaderData - Allocated when an App (EFI OS Loader) also freed back to OS. 

This memory can never be used by the OS:
Reserved

This memory has special meaning when the OS is running:
RT_Core:RT_Data -&gt; This is usually EFI Runtime services. gRT-&gt;GetVariable etc. These services can be called by the OS in a virtual mode provided by the OS. If you look at the Attribute 800000000000000F, bit 63 means EFI requires a virtual mapping.

ACPI_Recl -&gt; Is the ACPI table and the memory can be reclaimed to the OS after the ACPI tables are copied out.

ACPI_NVS -&gt; This is memory that must be preserved by the OS and is used for S3.

So the allocations that look a little strange are:
RT_Data    000000007540F000-00000000754DCFFF 00000000000000CE 800000000000000F
ACPI_NVS   00000000762F7000-00000000762FEFFF 0000000000000008 000000000000000F

The ACPI_NVS may be OK if it is the same from boot to boot since it was allocated in PEI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17076</commentid>
    <comment_count>14</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2021-08-25 14:43:45 +0000</bug_when>
    <thetext>Gao&apos;s comment is about gEfiMemoryTypeInformationGuid[1]. This is a scheme to make sure there is enough contiguous memory to allocate runtime required EFI regions. Basically the EFI allocator has buckets for each type of memory so that the Runtime/ACPI regions don&apos;t have to change from boot to boot, so S4 works. 

As I mentioned I think one of the ACPI_NVS allocations can be a strange space as that is memory for PEI, so it might get allocated prior to EFI setting up the memory map. 

The 1st thing I&apos;d look at is fragmented RT_Data allocation. 

This is not a bug, but something wrong with your platform. So probably best to debug on the mailing list.

[1] https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Library/UefiBootManagerLib/BmMisc.c#L129</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17095</commentid>
    <comment_count>15</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-26 21:31:20 +0000</bug_when>
    <thetext>You can refer to OvmfPkg\PlatformPei\MemTypeInfo.c on how to report memory type info hob.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17103</commentid>
    <comment_count>16</comment_count>
    <who name="Petr Špaček">pspacek</who>
    <bug_when>2021-08-27 05:27:17 +0000</bug_when>
    <thetext>Okay, I will take this to https://edk2.groups.io/g/discuss so we can debug it further. Thank you for your time!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18679</commentid>
    <comment_count>17</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 21:52:09 +0000</bug_when>
    <thetext>Please report the issue when you find it.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>807</attachid>
            <date>2021-08-23 08:40:15 +0000</date>
            <delta_ts>2021-08-23 08:40:15 +0000</delta_ts>
            <desc>memory map: boot from shell, attempt #1</desc>
            <filename>shell.boot-1</filename>
            <type>text/plain</type>
            <size>2002</size>
            <attacher name="Petr Špaček">pspacek</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>808</attachid>
            <date>2021-08-23 08:41:51 +0000</date>
            <delta_ts>2021-08-23 08:41:51 +0000</delta_ts>
            <desc>memory map: boot from shell, attempt #2</desc>
            <filename>shell.boot-2</filename>
            <type>text/plain</type>
            <size>2002</size>
            <attacher name="Petr Špaček">pspacek</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>809</attachid>
            <date>2021-08-23 08:42:38 +0000</date>
            <delta_ts>2021-08-23 08:42:38 +0000</delta_ts>
            <desc>memory map: boot directly from UEFI Boot Manager, attempt #1</desc>
            <filename>stub.boot-1</filename>
            <type>text/plain</type>
            <size>1823</size>
            <attacher name="Petr Špaček">pspacek</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>811</attachid>
            <date>2021-08-25 04:31:30 +0000</date>
            <delta_ts>2021-08-25 04:31:30 +0000</delta_ts>
            <desc>memory map: obtained from shell, attempt #3</desc>
            <filename>shell-memmap-3.log</filename>
            <type>text/plain</type>
            <size>17768</size>
            <attacher name="Petr Špaček">pspacek</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>812</attachid>
            <date>2021-08-25 04:31:46 +0000</date>
            <delta_ts>2021-08-25 04:31:46 +0000</delta_ts>
            <desc>memory map: obtained from shell, attempt #4</desc>
            <filename>shell-memmap-4.log</filename>
            <type>text/plain</type>
            <size>17768</size>
            <attacher name="Petr Špaček">pspacek</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3480</bug_id>
          
          <creation_ts>2021-07-07 03:33:16 +0000</creation_ts>
          <short_desc>What is the purpose of 123.hp.com?</short_desc>
          <delta_ts>2021-07-13 21:43:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="alinacrew">alinacrew57</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2010.SR1</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16567</commentid>
    <comment_count>0</comment_count>
    <who name="alinacrew">alinacrew57</who>
    <bug_when>2021-07-07 03:33:16 +0000</bug_when>
    <thetext>For the printers, drivers are needed. The printers can interpret the jobs and the printing needs by using them. As a result, a visit to 123.hp.com is required to get the essential drivers. After visiting the HP website, type the model number of your printer into the search box. All of the drivers associated with the model number of the printer will be shown. You must choose a driver that is compatible with your printer. You must install the driver file after downloading it. This will download and install drivers on your computer.

https://www.123hgh.com/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16623</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-13 21:43:40 +0000</bug_when>
    <thetext>Close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3988</bug_id>
          
          <creation_ts>2022-07-13 01:02:35 +0000</creation_ts>
          <short_desc>[Silicon][Intel][FitGen] S-ACM entry version value from BiosInfo would always 0x0</short_desc>
          <delta_ts>2022-07-16 04:09:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason Lin">jason1.lin</reporter>
          <assigned_to name="Jason Lin">jason1.lin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19234</commentid>
    <comment_count>0</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-07-13 01:02:35 +0000</bug_when>
    <thetext>With the change #3958 using the incorrect variable to
store the S-ACM entry version.
That would cause the value always 0x0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19235</commentid>
    <comment_count>1</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-07-13 01:07:07 +0000</bug_when>
    <thetext>In FitGen.c

Line 1185.

The usage of FIT_TABLE_CONTEXT_ENTRY version is used for OptionalModule and PortModule only.
&gt; gFitTableContext.StartupAcm[gFitTableContext.StartupAcmNumber].Version = BiosInfoStruct[BiosInfoIndex].Version;

This line should correct to use StartupAcmVersion array to save the entry version information.
&gt; gFitTableContext.StartupAcmVersion[gFitTableContext.StartupAcmNumber] = BiosInfoStruct[BiosInfoIndex].Version;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19251</commentid>
    <comment_count>2</comment_count>
    <who name="Jason Lin">jason1.lin</who>
    <bug_when>2022-07-16 04:09:56 +0000</bug_when>
    <thetext>Mark this bugzilla as fixed since the
code change had been merged.

https://github.com/tianocore/edk2-platforms/commit/9935472b19466b630c684a1153df7693aab4ee5e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3234</bug_id>
          
          <creation_ts>2021-02-24 06:17:02 +0000</creation_ts>
          <short_desc>Need to disable the &quot;map&quot; print when entering to EFI shell</short_desc>
          <delta_ts>2021-03-01 10:44:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ilan Bar">ilan.bar</reporter>
          <assigned_to name="Ilan Bar">ilan.bar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15127</commentid>
    <comment_count>0</comment_count>
    <who name="Ilan Bar">ilan.bar</who>
    <bug_when>2021-02-24 06:17:02 +0000</bug_when>
    <thetext>hi,

(this ticket is a feature request and not a bug)

Current state:
==============
When booting to UEFI shell all of the device mapping is printed

Requested change (Edk2\ShellPkg\Application\Shell\Shell.c)
==========================================================
Add new Boolean PCD PcdShellEntryPrintMap to control the map print

old code:
    //
    // Display the mapping
    //
    if (PcdGet8(PcdShellSupportLevel) &gt;= 2 &amp;&amp; !ShellInfoObject.ShellInitSettings.BitUnion.Bits.NoMap) {
      Status = RunCommand(L&quot;map&quot;);
      ASSERT_EFI_ERROR(Status);
    }

new code:

    //
    // Display the mapping
    //
    if (PcdGet8(PcdShellSupportLevel) &gt;= 2 &amp;&amp; !ShellInfoObject.ShellInitSettings.BitUnion.Bits.NoMap &amp;&amp; PcdGetBool(PcdShellEntryPrintMap)) {
      Status = RunCommand(L&quot;map&quot;);
      ASSERT_EFI_ERROR(Status);
    }




Justification
=============
When using EFI shell as BIOS validation environment the &quot;map&quot; print impact the overall testing time</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15132</commentid>
    <comment_count>1</comment_count>
    <who name="Ilan Bar">ilan.bar</who>
    <bug_when>2021-02-24 09:10:40 +0000</bug_when>
    <thetext>Adding this PCD will reduce test time when entering to EFI shell</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15147</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-25 14:56:53 +0000</bug_when>
    <thetext>According to the UEFI Shell Specification v2.2, section &quot;3.3
Initialization&quot;, step#9:

&gt;| If the shell supports interactive mode and console output support is
&gt;| enabled and map support is enabled (see &quot;-nomap&quot;), then the
&gt;| equivalent of &quot;map -terse&quot; will be executed.

So, first, the new PCD would permit the creation of a shell binary that
didn&apos;t conform to the spec. The PCD would have to be named and
documented carefully.

Second, consider the &quot;-nomap&quot; option (in section &quot;3.2 Invocation&quot;):

&gt;| -nomap  The default mappings will not be displayed.

Note that the option does not say that the default mappings will not be
*created*, only that they won&apos;t be *displayed*. That seems to match
exactly what you are after.

So I would not recommend creating a new PCD; instead, a proper UEFI Boot
Option should be created, for passing &quot;-nomap&quot; to the shell.

In case you start the shell with manual LoadImage() + StartImage() boot
service invocations, then you can add the &quot;-nomap&quot; option between them,
using the &quot;LoadOptionsSize&quot; and &quot;LoadOptions&quot; fields of
EFI_LOADED_IMAGE_PROTOCOL. The Shell Spec says in section &quot;3.2
Invocation&quot;:

&gt;| The UEFI Shell takes command-line options that are null-terminated
&gt;| UCS-2 encoded strings.

I think setting the Status field to CONFIRMED was premature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15158</commentid>
    <comment_count>3</comment_count>
    <who name="Ilan Bar">ilan.bar</who>
    <bug_when>2021-02-28 03:57:14 +0000</bug_when>
    <thetext>thanks! for your replay. using the &quot;-nomap&quot; option in the BIOS platform code I&apos;m able to disable the shell map print.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15159</commentid>
    <comment_count>4</comment_count>
    <who name="Ilan Bar">ilan.bar</who>
    <bug_when>2021-02-28 03:59:57 +0000</bug_when>
    <thetext>closing:
No need to change the shell, since platform code can send the &quot;-nomap&quot; option to shell when it is invoked</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15170</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-01 10:44:30 +0000</bug_when>
    <thetext>(Correctiong resolution from WONTFIX to INVALID -- &quot;WONTFIX&quot; stands for bug reports that are valid but we lack capacity etc for fixing them. OTOH in this case there&apos;s no bug or missing feature in the first place.)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3722</bug_id>
          
          <creation_ts>2021-11-08 11:18:52 +0000</creation_ts>
          <short_desc>Fix VS2019 NOOPT build issues with OvmfPkg/OvmfXen.dsc platform</short_desc>
          <delta_ts>2021-11-11 18:33:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>anthony</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17696</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-08 11:18:52 +0000</bug_when>
    <thetext>OvmfPkg/OvmfXen.dsc VS2019 NOOPT build generates the following errors:

XenRealTimeClockLib:
OvmfPkg\Library\XenRealTimeClockLib\XenRealTimeClockLib.c(56): error C2220: the following warning is treated as an error
OvmfPkg\Library\XenRealTimeClockLib\XenRealTimeClockLib.c(56): warning C4244: &apos;=&apos;: conversion from &apos;UINTN&apos; to &apos;UINT16&apos;, possible loss of data
OvmfPkg\Library\XenRealTimeClockLib\XenRealTimeClockLib.c(58): warning C4244: &apos;=&apos;: conversion from &apos;UINTN&apos; to &apos;UINT8&apos;, possible loss of data
OvmfPkg\Library\XenRealTimeClockLib\XenRealTimeClockLib.c(66): warning C4244: &apos;=&apos;: conversion from &apos;UINTN&apos; to &apos;UINT8&apos;, possible loss of data
OvmfPkg\Library\XenRealTimeClockLib\XenRealTimeClockLib.c(67): warning C4244: &apos;=&apos;: conversion from &apos;UINTN&apos; to &apos;UINT8&apos;, possible loss of data
OvmfPkg\Library\XenRealTimeClockLib\XenRealTimeClockLib.c(68): warning C4244: &apos;=&apos;: conversion from &apos;UINTN&apos; to &apos;UINT8&apos;, possible loss of data

XenPlatformPei:
OvmfPkg\XenPlatformPei\MemDetect.c(157): error C2220: the following warning is treated as an error
OvmfPkg\XenPlatformPei\MemDetect.c(157): warning C4244: &apos;return&apos;: conversion from &apos;UINT64&apos; to &apos;UINT32&apos;, possible loss of data

XenTimerDxe:
OvmfPkg\XenTimerDxe\XenTimerDxe.c(176): error C2220: the following warning is treated as an error
OvmfPkg\XenTimerDxe\XenTimerDxe.c(176): warning C4244: &apos;=&apos;: conversion from &apos;UINTN&apos; to &apos;UINT32&apos;, possible loss of data
OvmfPkg\XenTimerDxe\XenTimerDxe.c(196): warning C4244: &apos;function&apos;: conversion from &apos;UINT64&apos; to &apos;UINT32&apos;, possible loss of data</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17697</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-08 11:21:33 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17698</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-08 11:29:53 +0000</bug_when>
    <thetext>Email patch review

https://edk2.groups.io/g/devel/message/83454</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17742</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-11 18:33:54 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/a92559671a3bbdbc154429cf66edf4f490bbe218

PR:

https://github.com/tianocore/edk2/pull/2196</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3724</bug_id>
          
          <creation_ts>2021-11-08 23:48:44 +0000</creation_ts>
          <short_desc>Fix VS2019 build issue with OvmfPkg/Bhyve</short_desc>
          <delta_ts>2021-11-11 18:32:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>rebecca</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17700</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-08 23:48:44 +0000</bug_when>
    <thetext>Fix conversion from UINT64 to UINT32 in 

OvmfPkg/Bhyve/PlatformPei/Platform.c line 194</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17701</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-08 23:54:29 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17702</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-08 23:55:19 +0000</bug_when>
    <thetext>Patch email for review:

https://edk2.groups.io/g/devel/message/83482</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17741</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-11 18:32:44 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/4c495e5e3d387b26e1f22d708ff707eee6898c17

PR:

https://github.com/tianocore/edk2/pull/2195</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3119</bug_id>
          
          <creation_ts>2020-12-11 12:20:19 +0000</creation_ts>
          <short_desc>MdePkg/UefiFileHandleLib: EFI_FILE_PROTOCOL leak</short_desc>
          <delta_ts>2020-12-17 15:59:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2295</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14565</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-11 12:20:19 +0000</bug_when>
    <thetext>As of master @ 4b69fab6e20a:

Commit 6407186db950 (&quot;MdePkg/UefiFileHandleLib: Tolerate more Root
handle FileNames&quot;, 2019-11-04), made for
&lt;https://bugzilla.tianocore.org/show_bug.cgi?id=2295&gt;, introduced an
EFI_FILE_PROTOCOL leak. The second &quot;break&quot; statement in the
FileHandleGetFileName() loop is now reachable if at least one of the
following conditions holds:

(a) when FileInfo-&gt;FileName is the empty string,

(b) when &quot;NextHigherHandle&quot; could not be opened.

In case (a), &quot;NextHigherHandle&quot; may have been opened successfully, and
then it must be closed before exiting the loop.

I&apos;ll send the patch later:

&gt; diff --git a/MdePkg/Library/UefiFileHandleLib/UefiFileHandleLib.c b/MdePkg/Library/UefiFileHandleLib/UefiFileHandleLib.c
&gt; index ab34e6ccd5f4..80fdf8f1bebd 100644
&gt; --- a/MdePkg/Library/UefiFileHandleLib/UefiFileHandleLib.c
&gt; +++ b/MdePkg/Library/UefiFileHandleLib/UefiFileHandleLib.c
&gt; @@ -834,6 +834,9 @@ FileHandleGetFileName (
&gt;            // &apos;\0&apos; or &apos;\\&apos;, &apos;\\&apos; is guaranteed to be supported by the
&gt;            // specification and hence its value can safely be ignored.
&gt;            //
&gt; +          if (!EFI_ERROR (Status)) {
&gt; +            NextHigherHandle-&gt;Close (NextHigherHandle);
&gt; +          }
&gt;            Status = EFI_SUCCESS;
&gt;            if (*FullFileName == NULL) {
&gt;              ASSERT((*FullFileName == NULL &amp;&amp; Size == 0) || (*FullFileName != NULL));</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14567</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-11 12:22:25 +0000</bug_when>
    <thetext>I&apos;ll post this fix later, as part of the series for bug 3097.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14568</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-11 13:01:21 +0000</bug_when>
    <thetext>... on second thought, perhaps there is no bug. The spec requires opening L&quot;..&quot; relative to the root directory to fail, in EFI_FILE_PROTOCOL.Open():

  &quot;..&quot;   Opens the parent directory for the current location. If the location
         is the root directory the request will return an error, as there is
         no parent directory for the root directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14571</commentid>
    <comment_count>3</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-12-12 15:55:09 +0000</bug_when>
    <thetext>We agree that there does not seem to be a bug here, however, we all know that the filesystem developers can do anything. Better to safeguard the case by introducing an !EFI_ERROR check and closing the file accordingly just in case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14573</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-14 09:17:34 +0000</bug_when>
    <thetext>Thank you, Vitaly, for commenting!

I&apos;ll post the patch later, with a revised commit message.

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14616</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-17 15:59:05 +0000</bug_when>
    <thetext>Sorry, it looks unlikely that I&apos;ll find the time for this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3606</bug_id>
          
          <creation_ts>2021-09-06 01:38:04 +0000</creation_ts>
          <short_desc>VMs that created from CentOS-7-x86_64-DVD-1708.iso fail to boot</short_desc>
          <delta_ts>2021-09-21 21:58:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Lei Liu">lei.liu</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17169</commentid>
    <comment_count>0</comment_count>
    <who name="Lei Liu">lei.liu</who>
    <bug_when>2021-09-06 01:38:04 +0000</bug_when>
    <thetext>use CentOS-7-x86_64-DVD-1708.iso(upstream release: http://ftp.iij.ad.jp/pub/linux/centos-vault/7.4.1708/isos/x86_64/CentOS-7-x86_64-DVD-1708.iso) ​create a vm, then reboot it via virsh cmd. the vm will enter uefi shell rather than os.This is caused by iso bug: https://bugs.centos.org/view.php?id=14519. But as cloud platform(IaaS), we can not  prevent our customer from useing this version iso. So,a solution for this issue is to add anoter boot option in ovmf.
Current boot option in ovmf:
 ​Boot0001: UEFI Misc Device           0x0001
 ​Boot0000: UiApp              0x0109
 ​Boot0002: EFI Internal Shell

Boot001: UEFI Misc Device will entry \EFI\BOOT\BOOTX64.EFI(there is something wrong with this file in CentOS-7-x86_64-DVD-1708.iso). So i need add another boot option that entry \EFI\BOOT\fbx64.efi just for adapt CentOS-7-x86_64-DVD-1708.iso</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17188</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-07 23:11:33 +0000</bug_when>
    <thetext>So, the request is to update PlatformBdsLib to add new boot option for this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17194</commentid>
    <comment_count>2</comment_count>
    <who name="Lei Liu">lei.liu</who>
    <bug_when>2021-09-07 23:16:18 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; So, the request is to update PlatformBdsLib to add new boot option for this
&gt; case.

Yes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17342</commentid>
    <comment_count>3</comment_count>
    <who name="Lei Liu">lei.liu</who>
    <bug_when>2021-09-21 21:55:19 +0000</bug_when>
    <thetext>I&apos;ve resolve this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17344</commentid>
    <comment_count>4</comment_count>
    <who name="Lei Liu">lei.liu</who>
    <bug_when>2021-09-21 21:58:40 +0000</bug_when>
    <thetext>Will retry anoter entry image if EFI status is NOT FOUNT.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3007</bug_id>
          
          <creation_ts>2020-10-14 20:40:14 +0000</creation_ts>
          <short_desc>XhciDxe: Clean up UsbDevContext if USB slot initialization is failed</short_desc>
          <delta_ts>2020-10-26 21:13:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13969</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-14 20:40:14 +0000</bug_when>
    <thetext>Currently UsbDevContext is not cleaned up if USB slot initialization is failed, the wrong context data will affect next USB devices and and the USB devices can not be enumerated</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13970</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-14 21:10:18 +0000</bug_when>
    <thetext>The issue can be reproduced with UpXtreme, an unworkable USB devices is connected on hub port 9 of UpXtreme board, xhci driver does not correctly clean up context data when it fails to initialize the USB devices, the wrong context data will affect next hub port 15.

I applied debug pathes debug_xhci.diff, and get upx-debug-usb-2.log:
1. failed to enumerate hub port 9
Enable Slot Successfully, The Slot ID = 0x2
XhcCheckUrbResult: TRANSACTION_ERROR! Completecode = 4
UsbEnumerateNewDev: hub port 9 is reset
UsbEnumerateNewDev: device is of 0 speed
UsbEnumerateNewDev: device uses translator (0, 0)
XhcControlTransfer: SlotId == 2 DeviceAddress=0
XhcControlTransfer: Xhc-&gt;UsbDevContext[2].XhciDevAddr
XhcControlTransfer: error - Device Error, transfer - 100
UsbEnumerateNewDev: failed to set device address - Device Error
XhcClearRootHubPortFeature: status Success
UsbEnumeratePort: port 15 state - 803, change - 01 on 888E2318
UsbEnumeratePort: Device Connect/Disconnect Normally

2. It will use &quot;XhcControlTransfer: SlotId == 2 DeviceAddress=0&quot; for next hub port 15 because of the effect of wrong context data, the correct SlotId Should be 3.
Enable Slot Successfully, The Slot ID = 0x3
    Address 3 assigned successfully
UsbEnumerateNewDev: hub port 15 is reset
UsbEnumerateNewDev: device is of 3 speed
UsbEnumerateNewDev: device uses translator (0, 0)
XhcControlTransfer: SlotId == 2 DeviceAddress=0
XhcControlTransfer: Xhc-&gt;UsbDevContext[2].XhciDevAddr
XhcControlTransfer: error - Device Error, transfer - 100
UsbEnumerateNewDev: failed to set device address - Device Error

This issue can be fixed by the context data cleanup after initialization failure. I will submit a patch for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13971</commentid>
    <comment_count>2</comment_count>
      <attachid>573</attachid>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-14 21:11:39 +0000</bug_when>
    <thetext>Created attachment 573
debug patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13972</commentid>
    <comment_count>3</comment_count>
      <attachid>574</attachid>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-14 21:13:12 +0000</bug_when>
    <thetext>Created attachment 574
debug log for UpXtreme</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14044</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-10-19 22:37:30 +0000</bug_when>
    <thetext>V1 patch sent at: https://edk2.groups.io/g/devel/message/66232</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14045</commentid>
    <comment_count>5</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-19 23:18:20 +0000</bug_when>
    <thetext>V2 patch sent at: https://edk2.groups.io/g/devel/message/66441</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14070</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-10-22 02:52:14 +0000</bug_when>
    <thetext>V3 patch sent at: https://edk2.groups.io/g/devel/message/66529</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14075</commentid>
    <comment_count>7</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-10-23 08:49:25 +0000</bug_when>
    <thetext>V4 patch sent at: https://edk2.groups.io/g/devel/message/66550</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14095</commentid>
    <comment_count>8</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-10-26 21:13:50 +0000</bug_when>
    <thetext>Resolved via:
PR: https://github.com/tianocore/edk2/pull/1049
Commit: https://github.com/tianocore/edk2/commit/a3212009d95bbcba7d08076aba2eee51eb1f8e7c</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>573</attachid>
            <date>2020-10-14 21:11:39 +0000</date>
            <delta_ts>2020-10-14 21:11:39 +0000</delta_ts>
            <desc>debug patch</desc>
            <filename>debug_xhci.diff</filename>
            <type>text/plain</type>
            <size>1072</size>
            <attacher name="Heng Luo">heng.luo</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>574</attachid>
            <date>2020-10-14 21:13:12 +0000</date>
            <delta_ts>2020-10-14 21:13:12 +0000</delta_ts>
            <desc>debug log for UpXtreme</desc>
            <filename>upx-debug-usb-2.log</filename>
            <type>application/octet-stream</type>
            <size>511536</size>
            <attacher name="Heng Luo">heng.luo</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3497</bug_id>
          
          <creation_ts>2021-07-19 07:32:23 +0000</creation_ts>
          <short_desc>CXL CPER updates</short_desc>
          <delta_ts>2021-08-25 17:29:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Thanunathan Rangarajan">thanu.rangarajan</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>mahesh.natu</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16650</commentid>
    <comment_count>0</comment_count>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2021-07-19 07:32:23 +0000</bug_when>
    <thetext>The current form of the CXL-specific CPER only covers CXL 1.1 definitions. This ECR describes updates to the CPER to accommodate CXL 2.0 and beyond.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16677</commentid>
    <comment_count>1</comment_count>
      <attachid>772</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2021-07-21 23:33:19 +0000</bug_when>
    <thetext>Created attachment 772
CXL CPER Updates

Initial draft of ECR document attached for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16678</commentid>
    <comment_count>2</comment_count>
      <attachid>773</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2021-07-21 23:39:10 +0000</bug_when>
    <thetext>Created attachment 773
CXL CPER Updates v.0.4

Updated with minor corrections.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16765</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 22:02:12 +0000</bug_when>
    <thetext>Thanunathan Rangarajan is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16902</commentid>
    <comment_count>4</comment_count>
      <attachid>796</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-13 09:48:06 +0000</bug_when>
    <thetext>Created attachment 796
CodeFirst_CXL-CPER_UEFI_ver0-41</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16904</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-13 09:51:33 +0000</bug_when>
    <thetext>corresponding USWG mantis: https://mantis.uefi.org/mantis/view.php?id=2263</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16951</commentid>
    <comment_count>6</comment_count>
    <who name="">mahesh.natu</who>
    <bug_when>2021-08-17 14:42:19 +0000</bug_when>
    <thetext>I am good with the 08-13 version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17082</commentid>
    <comment_count>7</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-25 17:29:53 +0000</bug_when>
    <thetext>UEFI Forum 8/25 meeting: approved this ECR as submitted, to be new content for UEFI 2.next

Closing this BZ.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>772</attachid>
            <date>2021-07-21 23:33:19 +0000</date>
            <delta_ts>2021-07-21 23:33:19 +0000</delta_ts>
            <desc>CXL CPER Updates</desc>
            <filename>CodeFirst_CXL-CPER_UEFI_ver0-3.pdf</filename>
            <type>application/pdf</type>
            <size>170632</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>773</attachid>
            <date>2021-07-21 23:39:10 +0000</date>
            <delta_ts>2021-07-21 23:39:10 +0000</delta_ts>
            <desc>CXL CPER Updates v.0.4</desc>
            <filename>CodeFirst_CXL-CPER_UEFI_ver0-4.pdf</filename>
            <type>application/pdf</type>
            <size>170720</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>796</attachid>
            <date>2021-08-13 09:48:06 +0000</date>
            <delta_ts>2021-08-13 09:48:06 +0000</delta_ts>
            <desc>CodeFirst_CXL-CPER_UEFI_ver0-41</desc>
            <filename>CodeFirst_CXL-CPER_UEFI_ver0-41.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>25860</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3387</bug_id>
          <alias>CVE-2021-38578</alias>
          <creation_ts>2021-05-10 16:43:15 +0000</creation_ts>
          <short_desc>SmmEntryPoint underflow allowing potential SMM privilege escalation</short_desc>
          <delta_ts>2024-08-05 20:57:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="John Mathews">john.mathews</reporter>
          <assigned_to name="Bret Barkelew">bret.barkelew</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>BrianM</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gsuckevi</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>jlee</cc>
    
    <cc>jmaloy</cc>
    
    <cc>jorge.e.gonzalez</cc>
    
    <cc>jorge.hernandez.beltran</cc>
    
    <cc>kevinj</cc>
    
    <cc>kraxel</cc>
    
    <cc>miki.demeter</cc>
    
    <cc>nicholas.armour</cc>
    
    <cc>rschiron</cc>
    
    <cc>timothy_hoppen</cc>
    
    <cc>tong.lin</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15985</commentid>
    <comment_count>0</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-05-10 16:43:15 +0000</bug_when>
    <thetext>Existing CommBuffer checks in SmmEntryPoint will not catch underflow when computing BufferSize.

https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Core/PiSmmCore/PiSmmCore.c#L701
https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Core/PiSmmCore/PiSmmCore.c#L711

Line 701 is checking for valid CommBuffer, later line 711 substract OFFSET_OF (EFI_SMM_COMMUNICATE_HEADER, Data) which is equal to 0x18.  If  0x0 &lt; BufferSize &lt; 0x18 then it will pass the check at line 701 while getting a 64 bit number as a result of the subtraction in line 711.  This is potentially dangerous for the CommBuffer SMI relying on these checks.  For example, HddPasswordSmm (BpCommonPkg\Universal\HddPassword\Smm\HddPasswordSmm.c) doesn&apos;t do additional CommBuffer checks.  As a result of this underflow an attacker can write into SMM region.


Proposed fix:
Add another check making sure BufferSize &gt;= OFFSET_OF (EFI_SMM_COMMUNICATE_HEADER, Data). Fail otherwise.


CVSS Score High
https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:L/AC:H/PR:H/UI:N/S:C/C:H/I:H/A:L</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15991</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-11 12:03:59 +0000</bug_when>
    <thetext>I agree that this is a security bug.

In particular, note the EFI_MM_COMMUNICATION_PROTOCOL.Communicate() implementation in edk2, in other words, the &quot;untrusted half&quot; of this service.

It is in function SmmCommunicationCommunicate() [MdeModulePkg/Core/PiSmmCore/PiSmmIpl.c]. It prepares the communication buffer, and then calls EFI_MM_CONTROL_PROTOCOL.Trigger() to enter MM. In the part where it prepares the communication buffer, it performs the following check:

    if (TempCommSize &lt; OFFSET_OF (EFI_SMM_COMMUNICATE_HEADER, Data)) {
      return EFI_INVALID_PARAMETER;
    }

So we can see that the *unprivileged* half of the service performs the check -- but that&apos;s only a sanity check. It is only active if the caller relies on EFI_MM_COMMUNICATION_PROTOCOL. If the caller is malicious and performs the internal actions of SmmCommunicationCommunicate() manually, it can pass an arbitrary buffer size to SmmEntryPoint() [MdeModulePkg/Core/PiSmmCore/PiSmmCore.c]. So the check must indeed be present in both the runtime DXE driver and in the the SMM Core.

Furthermore, HandlerType GUIDs (EFI_MM_COMMUNICATE_HEADER.HeaderGuid values) are not secret, so the attacker could choose such a GUID that actually caused SmiManage() to call a real, registered handler.

--*--

Another issue I&apos;m noticing just now... SmmCommunicationCommunicate() has the following &quot;convenience&quot; calculation:

  if (CommSize == NULL) {
    TempCommSize = OFFSET_OF (EFI_SMM_COMMUNICATE_HEADER, Data) + CommunicateHeader-&gt;MessageLength;
  } ...

Here, TempCommSize, OFFSET_OF, and MessageLength all have type UINTN. The addition may overflow.

While this is indeed not in the SMM_CORE but in the SMM IPL runtime DXE driver, I think it should be fixed as well.

--*--

Yet another issue... I think the InternalIsBufferOverlapped() function itself is broken. Note the context, in SmmEntryPoint() [MdeModulePkg/Core/PiSmmCore/PiSmmCore.c]:

    if (CommunicationBuffer != NULL) {
      //
      // Synchronous SMI for SMM Core or request from Communicate protocol
      //
      IsOverlapped = InternalIsBufferOverlapped (
                       (UINT8 *) CommunicationBuffer,
                       BufferSize,
                       (UINT8 *) gSmmCorePrivate,
                       sizeof (*gSmmCorePrivate)
                       );
      if (!SmmIsBufferOutsideSmmValid ((UINTN)CommunicationBuffer, BufferSize) || IsOverlapped) {
        //
        // If CommunicationBuffer is not in valid address scope,
        // or there is overlap between gSmmCorePrivate and CommunicationBuffer,
        // return EFI_INVALID_PARAMETER
        //
        gSmmCorePrivate-&gt;CommunicationBuffer = NULL;
        gSmmCorePrivate-&gt;ReturnStatus = EFI_ACCESS_DENIED;

Thus, IsOverlapped() is security-critical, and works with untrusted data. But then see its implementation:

BOOLEAN
InternalIsBufferOverlapped (
  IN UINT8      *Buff1,
  IN UINTN      Size1,
  IN UINT8      *Buff2,
  IN UINTN      Size2
  )
{
  //
  // If buff1&apos;s end is less than the start of buff2, then it&apos;s ok.
  // Also, if buff1&apos;s start is beyond buff2&apos;s end, then it&apos;s ok.
  //
  if (((Buff1 + Size1) &lt;= Buff2) || (Buff1 &gt;= (Buff2 + Size2))) {
    return FALSE;
  }

  return TRUE;
}

At the call site in question, we don&apos;t expect (Buff2 + Size2) to overflow, because Buff2 and Size2 describe &quot;gSmmCorePrivate&quot;.

However, especially Size1 is attacker-controlled, and the &quot;end of CommunicationBuffer&quot;, that is, (Buff1 + Size1), may overflow. Then it may fall under &quot;Buff2&quot;, leading to a FALSE return value (meaning &quot;no overlap&quot;).

All of these checks should be rewritten with SafeIntLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15992</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-11 12:39:38 +0000</bug_when>
    <thetext>Regarding InternalIsBufferOverlapped(), another comment: I&apos;ve just noticed that the additions and comparisons are performed in (UINT8*), which is *completely bogus*. Pointer arithmetic may only be performed over elements of the same array, and one past the last element in the same array; otherwise, we get undefined behavior. Therefore, performing pointer arithmetic to check whether pointers and sizes are valid, puts the cart before the horse. The additions and comparisons must be done in UINTN, with SafeIntLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16009</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-05-11 19:13:58 +0000</bug_when>
    <thetext>The overflow can be detected in SmmIsBufferOutsideSmmValid(). - https://github.com/tianocore/edk2/blob/master/MdePkg/Library/SmmMemLib/SmmMemLib.c#L125


Maybe we should move InternalIsBufferOverlapped() to a library function for broader review, instead of implement it as *Internalxxx*.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16448</commentid>
    <comment_count>4</comment_count>
      <attachid>743</attachid>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-06-23 18:09:03 +0000</bug_when>
    <thetext>Created attachment 743
Possible Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16458</commentid>
    <comment_count>5</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-06-24 18:04:44 +0000</bug_when>
    <thetext>The patch is incomplete.

PiSmmCore.inf needs to add SafeIntLib as a LibraryClass, and the second SafeUint64Add in SmmIsSmramOverlap() needs to change to:

SafeUint64Add ((UINT64)ReservedRangeToCompare-&gt;SmramReservedStart, ReservedRangeToCompare-&gt;SmramReservedSize, &amp;ReservedRangeToCompareEnd)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16464</commentid>
    <comment_count>6</comment_count>
      <attachid>746</attachid>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-06-25 05:11:41 +0000</bug_when>
    <thetext>Created attachment 746
Patch v3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16583</commentid>
    <comment_count>7</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-07-07 14:02:27 +0000</bug_when>
    <thetext>from 7/7/2021 infosec meeting - 

recommend creation of a CVE for this item</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16584</commentid>
    <comment_count>8</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-07-07 14:03:23 +0000</bug_when>
    <thetext>given availability of the patch the CVE should go live no later than 9/25/21.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18235</commentid>
    <comment_count>9</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2022-02-04 06:04:01 +0000</bug_when>
    <thetext>Still no CVE for this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18239</commentid>
    <comment_count>10</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2022-02-04 15:18:03 +0000</bug_when>
    <thetext>I am assigned this to Bret because he has already attached a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18474</commentid>
    <comment_count>11</comment_count>
      <attachid>939</attachid>
    <who name="">kevinj</who>
    <bug_when>2022-03-01 11:16:03 +0000</bug_when>
    <thetext>Created attachment 939
.json file

I have attached the .json file for CVE classification and assigned a CVE-ID. Please review and provide feedback, so I can submit to MITRE for publication Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18475</commentid>
    <comment_count>12</comment_count>
      <attachid>940</attachid>
    <who name="">kevinj</who>
    <bug_when>2022-03-01 14:25:38 +0000</bug_when>
    <thetext>Created attachment 940
.json file_v2

I have updated the version affected value to start with the latest stable tag &quot;edk-stable202202&quot;. I will be submitting this to MITRE for CVE publication today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18736</commentid>
    <comment_count>13</comment_count>
    <who name="Brian Mullen">BrianM</who>
    <bug_when>2022-03-30 22:11:40 +0000</bug_when>
    <thetext>Does a remediation plan exist for this issue? Which release of EDK2 is the fix expected to be in?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18943</commentid>
    <comment_count>14</comment_count>
    <who name="Brian Mullen">BrianM</who>
    <bug_when>2022-05-10 21:04:45 +0000</bug_when>
    <thetext>Blackduck has this CVE in their database so this CVE is being flagged for all edk2 products that are scanned.

Can we move the patch to validated and get this into the EDK2 main branch or is there more work to be done?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19074</commentid>
    <comment_count>15</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2022-06-14 05:52:10 +0000</bug_when>
    <thetext>(In reply to Brian Mullen from comment #14)
&gt; Blackduck has this CVE in their database so this CVE is being flagged for
&gt; all edk2 products that are scanned.
&gt; 
&gt; Can we move the patch to validated and get this into the EDK2 main branch or
&gt; is there more work to be done?

Patch doesn&apos;t build.

MdeModulePkg/Core/PiSmmCore/PiSmmCore.h:57:10: fatal error: Library/SaveIntLib.h: No such file or directory

So we have to import SaveIntLib into edk2 first, from project mu I guess?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19075</commentid>
    <comment_count>16</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2022-06-14 05:58:15 +0000</bug_when>
    <thetext>&gt; MdeModulePkg/Core/PiSmmCore/PiSmmCore.h:57:10: fatal error:
&gt; Library/SaveIntLib.h: No such file or directory

Oops, typo added while adapting the patch to latest master.
With the header file name fixed it does actually build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19079</commentid>
    <comment_count>17</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2022-06-14 07:59:18 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/90516</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19971</commentid>
    <comment_count>18</comment_count>
    <who name="Miki Demeter">miki.demeter</who>
    <bug_when>2022-11-08 17:30:17 +0000</bug_when>
    <thetext>This issue has been resolved 202211 stable

https://github.com/tianocore/edk2/commit/cab1f02565d3b29081dd21afb074f35fdb4e1fd6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21379</commentid>
    <comment_count>19</comment_count>
    <who name="Tim Hoppen">timothy_hoppen</who>
    <bug_when>2023-04-19 21:26:52 +0000</bug_when>
    <thetext>The CVSS score in the description of this bug and the score listed at CVE and NVD are quite different.
Was a different CVSS score decided on outside this bugzilla issue?

From the description:

https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:L/AC:H/PR:H/UI:N/S:C/C:H/I:H/A:L 7.4 (High)

From external databases:

https://www.cve.org/CVERecord?id=CVE-2021-38578 (viewable via the JSON link)
https://nvd.nist.gov/vuln/detail/CVE-2021-38578

https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:H/I:H/A:H 10.0 (Critical)

Which is the correct CVSS?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23296</commentid>
    <comment_count>20</comment_count>
    <who name="Brian Mullen">BrianM</who>
    <bug_when>2024-08-05 20:57:15 +0000</bug_when>
    <thetext>7.4 is correct. It has been changed from 10 to 7.4</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>743</attachid>
            <date>2021-06-23 18:09:03 +0000</date>
            <delta_ts>2021-06-23 18:09:03 +0000</delta_ts>
            <desc>Possible Patch</desc>
            <filename>0001-SECURITY-PATCH-MU_SEC_TCBZ3387.patch</filename>
            <type>application/octet-stream</type>
            <size>5463</size>
            <attacher name="Bret Barkelew">bret.barkelew</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>746</attachid>
            <date>2021-06-25 05:11:41 +0000</date>
            <delta_ts>2021-06-25 05:11:41 +0000</delta_ts>
            <desc>Patch v3</desc>
            <filename>0001-SECURITY-PATCH-MU_SEC_TCBZ3387.patch</filename>
            <type>application/octet-stream</type>
            <size>6057</size>
            <attacher name="Bret Barkelew">bret.barkelew</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>939</attachid>
            <date>2022-03-01 11:16:03 +0000</date>
            <delta_ts>2022-03-01 11:16:03 +0000</delta_ts>
            <desc>.json file</desc>
            <filename>3387.json</filename>
            <type>application/json</type>
            <size>1939</size>
            <attacher>kevinj</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>940</attachid>
            <date>2022-03-01 14:25:38 +0000</date>
            <delta_ts>2022-03-01 14:25:38 +0000</delta_ts>
            <desc>.json file_v2</desc>
            <filename>3387.json</filename>
            <type>application/json</type>
            <size>1939</size>
            <attacher>kevinj</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3880</bug_id>
          
          <creation_ts>2022-03-21 21:06:24 +0000</creation_ts>
          <short_desc>Add ignore file list to UncrustifyCheck.py</short_desc>
          <delta_ts>2023-01-03 04:09:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18659</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-03-21 21:06:24 +0000</bug_when>
    <thetext>Currently UncrustifyCheck.py provides the following exclusion options:

1. Override the type of files UncrustifyCheck operates against by default (.c and .h files). Using the &quot;IgnoreStandardPaths&quot; configuration option.

2. By default, UncrustifyCheck skips files in git submodules and ignored by git (the &quot;SkipGitExclusions&quot; configuration option can override this behavior).

UncrustifyCheck operates on a given package at a time. A few requests have been made by package maintainers to ignore files in their package that would otherwise be formatted. For example, an auto-generated file copy/pasted from another codebase. If UncrustifyCheck ran against the file, maintaining a clean diff to the source would be more tedious.

In general, the goal of UncrustifyCheck is to ensure consistent formatting across the codebase and a file ignore list is somewhat counter to that goal. However, for the cases it is required, this BZ tracks adding a new configuration option that can be specified in a package CI YAML file to specify a list of files within the package that should be ignored by UncrustifyCheck.

The configuration option is called &quot;IgnoreFiles&quot; and it uses similar syntax to git ignore to ignore a list of files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18661</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-03-21 22:00:14 +0000</bug_when>
    <thetext>V1 series on list: https://edk2.groups.io/g/devel/message/87809</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18756</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-04 10:43:52 +0000</bug_when>
    <thetext>V2 series on list: https://edk2.groups.io/g/devel/message/88341</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18757</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-04 10:44:05 +0000</bug_when>
    <thetext>V3 series on list: https://edk2.groups.io/g/devel/message/88358</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18758</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-04 10:44:56 +0000</bug_when>
    <thetext>V3 series is ready to merge. Waiting for the push label in the PR - https://github.com/tianocore/edk2/pull/2725.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18762</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-04 12:08:02 +0000</bug_when>
    <thetext>Patch merged: https://github.com/tianocore/edk2/commit/dbfbaedb21c94ef8344086ba6532e964e40f5526</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20391</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:09:18 +0000</bug_when>
    <thetext>*** Bug 2833 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3257</bug_id>
          
          <creation_ts>2021-03-10 10:52:10 +0000</creation_ts>
          <short_desc>uefi-sct: print format mismatch in SimpleNetwork test</short_desc>
          <delta_ts>2021-06-08 09:07:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>gaoliming</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15266</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-10 10:52:10 +0000</bug_when>
    <thetext>SctPrint() requires that %x and %d refers to an UINTN parameter.

uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/SimpleNetwork/BlackBoxTest/SimpleNetworkBBTestFunction.c tries to print INT32 using %x, %d without converting to UINTN resulting in corrupted output like:

SimpleNetworkBBTestFunction.c:891:
Status - Unsupported, Filter - AAAA00000000

Mode-&gt;ReceiveFilterSetting has only 32 bit. The true value is 0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15450</commentid>
    <comment_count>1</comment_count>
      <attachid>682</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-30 11:01:54 +0000</bug_when>
    <thetext>Created attachment 682
[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in Simple Network test

[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in Simple Network test
https://edk2.groups.io/g/devel/message/73139</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15451</commentid>
    <comment_count>2</comment_count>
      <attachid>683</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-30 11:04:43 +0000</bug_when>
    <thetext>Created attachment 683
[PATCH edk2-test 1/1] uefi-sct/SctPkg: type mismatch in Simple Network test

[PATCH edk2-test 1/1] uefi-sct/SctPkg: type mismatch in Simple Network test
https://edk2.groups.io/g/devel/message/73534</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15464</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-30 21:36:31 +0000</bug_when>
    <thetext>Include SCT maintainer to review the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16013</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-11 21:43:01 +0000</bug_when>
    <thetext>The patch is sent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16036</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-12 05:42:50 +0000</bug_when>
    <thetext>3c9b20bee2d8 (&quot;uefi-sct/SctPkg: type mismatch in Simple Network test&quot;) merged.

Appended [PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in Simple Network test still needs to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16037</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-12 06:04:38 +0000</bug_when>
    <thetext>[PATCH edk2-test 1/1] uefi-sct/SctPkg: type mismatch in Simple Network test 
Reviewed-by: Sunny Wang &lt;sunny.wang@arm.com&gt;
https://edk2.groups.io/g/devel/message/75062</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16078</commentid>
    <comment_count>7</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-17 11:49:26 +0000</bug_when>
    <thetext>attached
[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in Simple Network test (https://edk2.groups.io/g/devel/message/73139)
still needs to be reviewed and merged</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16080</commentid>
    <comment_count>8</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-17 11:55:00 +0000</bug_when>
    <thetext>This is now merged, correct?
https://github.com/tianocore/edk2-test/commit/3c9b20bee2d8610b9a88acb5ae7f9255b0140a67</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16081</commentid>
    <comment_count>9</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-17 12:07:37 +0000</bug_when>
    <thetext>Commit 3c9b20bee2d8 (&quot;uefi-sct/SctPkg: type mismatch in Simple Network test&quot;) is merged.

But &quot;PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in Simple Network test&quot; for IHV is missing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16297</commentid>
    <comment_count>10</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-06-08 08:47:18 +0000</bug_when>
    <thetext>The patch for 
&quot;PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in Simple Network test&quot;
has been upstreamed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16298</commentid>
    <comment_count>11</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-08 09:07:05 +0000</bug_when>
    <thetext>All patches merged.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>682</attachid>
            <date>2021-03-30 11:01:54 +0000</date>
            <delta_ts>2021-03-30 11:01:54 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: IHV: type mismatch in Simple Network test</desc>
            <filename>0001-uefi-sct-SctPkg-IHV-type-mismatch-in-Simple-Network-.patch</filename>
            <type>text/plain</type>
            <size>5735</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>683</attachid>
            <date>2021-03-30 11:04:43 +0000</date>
            <delta_ts>2021-03-30 11:04:43 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: type mismatch in Simple Network test</desc>
            <filename>0001-uefi-sct-SctPkg-type-mismatch-in-Simple-Network-test.patch</filename>
            <type>text/plain</type>
            <size>6216</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3747</bug_id>
          
          <creation_ts>2021-11-23 12:17:59 +0000</creation_ts>
          <short_desc>Update EmulatorPkg Win Host [BuildOptions] MSFT CC_FLAGS to not force debug information</short_desc>
          <delta_ts>2022-01-14 20:23:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17803</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-23 12:17:59 +0000</bug_when>
    <thetext>The EmulatorPkg WinHost.inf current uses &apos;==&apos; syntax in the [BuildOptions] section to override all the CC_FLAGS for MSFT compilers.

 MSFT:*_*_*_CC_FLAGS               == /nologo /W4 /WX /Gy /c /D UNICODE /Od /Oy- /FIAutoGen.h /EHs-c- /GF /Gs8192 /Zi /Gm /D _CRT_SECURE_NO_WARNINGS /D _CRT_SECURE_NO_DEPRECATE

This includes enabling debug information using /Zi.

The debug information is already being set to the correct options from
toold_def.txt for MSFT compilers based on DEBUG, RELEASE, or NOOPT
build targets.  The use of &apos;==&apos; also prevents flags to be customized from
the EmulatorPkg DSC file.

The /Gm option is also specified which is a deprecated flag which
should be removed.

The /Gs8192 flag is also overriding the default setting from tools_def.txt
that is already set to the larger size using /Gs32768.

WinHost.inf should be updated to use &apos;=&apos; and remove the /Zi, /Gm, 
and /Gs8192 options.

This change has the added benefit of allowing the CompareBuild tool 
to support comparing the EmulatorPkg for VS2019 builds.  The use of
&apos;==&apos; that enables /Zi can not be disabled by CompareBuild because
there is no flag to disable debug information once it is enabled 
earlier in the option list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17804</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-23 12:22:41 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18157</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:23:34 +0000</bug_when>
    <thetext>Github PR Merged:    
    https://github.com/tianocore/edk2/pull/2215

Commit:
    https://github.com/tianocore/edk2/pull/2215/commits/3b07938b5b0c9a9228af9c3ed03b473f78498b5f

Email code review:
    https://edk2.groups.io/g/devel/message/83974</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3146</bug_id>
          
          <creation_ts>2021-01-01 14:14:57 +0000</creation_ts>
          <short_desc>uefi-sct: wrong print format string in FatToStr() test</short_desc>
          <delta_ts>2021-01-25 07:45:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14689</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-01 14:14:57 +0000</bug_when>
    <thetext>EFI_UNICODE_COLLATION_PROTOCOL.FatToStr() expects as parameter FAT an ASCII string not a wide string.

In function BBTestFatToStrFunctionAutoTest() the this string is supplied as TestData[Index].

When printing this string we cannot use &quot;%s&quot; but we must use &quot;%a&quot; in the assertion for gUnicodeCollationFunctionTestAssertionGuid007.

This bug leads to corrupted log and CSV files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14690</commentid>
    <comment_count>1</comment_count>
      <attachid>631</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-01 14:56:07 +0000</bug_when>
    <thetext>Created attachment 631
[PATCH 1/1] uefi-sct/SctPkg: format string BBTestFatToStrFunctionAutoTest</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14691</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-01 14:57:02 +0000</bug_when>
    <thetext>Please, review the appended patch. It is also available as
https://edk2.groups.io/g/devel/message/69512</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14905</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-23 01:36:21 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/69716 marked the appended patch as

Reviewed-By: G Edhaya Chandran &lt;edhaya.chandran@arm.com&gt;

Please, consider for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14912</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-25 07:45:03 +0000</bug_when>
    <thetext>Patch merged
uefi-sct/SctPkg: format string BBTestFatToStrFunctionAutoTest
b8a7e423bd4a055f31ebcfc8c483fb75f49e8f1e</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>631</attachid>
            <date>2021-01-01 14:56:07 +0000</date>
            <delta_ts>2021-01-01 14:56:07 +0000</delta_ts>
            <desc>[PATCH 1/1] uefi-sct/SctPkg: format string BBTestFatToStrFunctionAutoTest</desc>
            <filename>0001-uefi-sct-SctPkg-format-string-BBTestFatToStrFunction.patch</filename>
            <type>text/plain</type>
            <size>2854</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3627</bug_id>
          
          <creation_ts>2021-09-14 16:45:57 +0000</creation_ts>
          <short_desc>Update HW Error Notification Structure to reference SDEI</short_desc>
          <delta_ts>2021-10-13 18:23:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17271</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-09-14 16:45:57 +0000</bug_when>
    <thetext>The HW Error Notification Structure (ACPI 6.4, Table 18.14) has a general reference to Arm SDEI spec for Type = 11 (SDEI).

However, some of the fields defined in this table have special meaning (or are ignored) per the SDEI spec:

Vector: Defined by the SDEI spec to be the &quot;SDEI Event Number&quot;


These other fields are ignored for SDEI events:

Configuration Write Enable, Poll Interval, Switch To Polling Threshold Value, Switch To Polling Threshold Window, Error Threshold Value, Error Threshold Window

Seems like a clarification is needed in the ACPI spec to make sure this information is captured with reference to the SDEI spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17290</commentid>
    <comment_count>1</comment_count>
      <attachid>830</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-09-16 19:36:31 +0000</bug_when>
    <thetext>Created attachment 830
CodeFirst_SDEI_HW_Error_ver1

ECR proposal ver 1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17429</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-01 09:55:04 +0000</bug_when>
    <thetext>UEFI Forum ASWG 9/30 meeting: Approved as Errata for ACPI 6.4
Closing this BZ as resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17534</commentid>
    <comment_count>3</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-13 18:23:09 +0000</bug_when>
    <thetext>Linking approved ASWG ECR For completeness: https://mantis.uefi.org/mantis/view.php?id=2274</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>830</attachid>
            <date>2021-09-16 19:36:31 +0000</date>
            <delta_ts>2021-09-16 19:36:31 +0000</delta_ts>
            <desc>CodeFirst_SDEI_HW_Error_ver1</desc>
            <filename>CodeFirst_SDEI_HW_Error_ver1.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>23946</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3521</bug_id>
          
          <creation_ts>2021-08-02 17:27:38 +0000</creation_ts>
          <short_desc>CheckSmramDescriptor() adjacency assumptions not always true</short_desc>
          <delta_ts>2021-08-11 21:39:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeremiah Cox">jerecox</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16736</commentid>
    <comment_count>0</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2021-08-02 17:27:38 +0000</bug_when>
    <thetext>MinPlatformPkg/Test/Library/TestPointCheckLib/DxeCheckSmmInfo.c

&quot;Adjacent region checking...  The current logic depends on a particular order in which the descriptors for three or more regions are placed in the array to perform proper adjacency checking. When three or more regions are all adjacent, but neighboring descriptors are not adjacent, the logic can improperly report a failure.,&quot; C.R.
Consider checking all ranges against all other ranges.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16754</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 21:47:02 +0000</bug_when>
    <thetext>Include MinPlatform Package Maintainers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16795</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 10:19:42 +0000</bug_when>
    <thetext>I will be sending a patch today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16796</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 10:20:09 +0000</bug_when>
    <thetext>Updating status to confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16797</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 11:01:10 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/78714

Sent in the larger patch series: https://edk2.groups.io/g/devel/topics</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16802</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 11:05:18 +0000</bug_when>
    <thetext>Correct larger patch series link: https://edk2.groups.io/g/devel/message/78710

Moved to IN_PROGRESS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16884</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-11 21:39:25 +0000</bug_when>
    <thetext>Merged to edk2-platforms/master in the following commit: https://github.com/tianocore/edk2-platforms/commit/5021f0151728ca85772bb4424c2518b267a812e0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3414</bug_id>
          
          <creation_ts>2021-05-24 02:56:08 +0000</creation_ts>
          <short_desc>Parameters passed to IsLanguageSupported () function inside LookupUnicodeString2() Needs to be interchanged.</short_desc>
          <delta_ts>2021-05-25 08:32:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3211</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Shrishail Patil">shrishail105</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16127</commentid>
    <comment_count>0</comment_count>
    <who name="Shrishail Patil">shrishail105</who>
    <bug_when>2021-05-24 02:56:08 +0000</bug_when>
    <thetext>The uefi function IsLanguageSupported() is expecting first argument &quot;SupportedLanguages&quot; and second argument &quot;TargetLanguage&quot;.
While calling IsLanguageSupported() this function inside LookupUnicodeString2() function we are passing first parameter as &quot;TargetLangauge&quot; and Second Language as &quot;SupportedLanguages&quot;.

Possible fix: Interchange the parameters passed to IsLangauageSupported() function.
IsLanguageSupported(SupportedLanguages,Language);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16135</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-25 08:32:46 +0000</bug_when>
    <thetext>Already fixed in commit 2e51b27fed31 (&quot;MdePkg/UefiLib: Correct the arguments passed to IsLanguageSupported()&quot;, 2021-03-17), for bug 3211.

*** This bug has been marked as a duplicate of bug 3211 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3905</bug_id>
          
          <creation_ts>2022-04-18 21:25:49 +0000</creation_ts>
          <short_desc>PrmPkg: Fix unit test GCC compilation errors</short_desc>
          <delta_ts>2022-04-20 15:35:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>PrmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18830</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-18 21:25:49 +0000</bug_when>
    <thetext>The file PrmPkg/Library/DxePrmContextBufferLib/UnitTest/DxePrmContextBufferLibUnitTest.c currently has some errors when compiled with GCC such as the following:

```
PrmPkg/Library/DxePrmContextBufferLib/UnitTest/DxePrmContextBufferLibUnitTest.c
INFO - PrmPkg/Library/DxePrmContextBufferLib/UnitTest/DxePrmContextBufferLibUnitTest.c: In function ‘VerifyGetContextBuffer’:
INFO - PrmPkg/Library/DxePrmContextBufferLib/UnitTest/DxePrmContextBufferLibUnitTest.c:461:37: error: variable ‘ContextBuffers’ set but not used [-Werror=unused-but-set-variable]
INFO -   461 |   PRM_MODULE_CONTEXT_BUFFERS       *ContextBuffers;
INFO -       |                                     ^~~~~~~~~~~~~~
INFO - rm -f 
```</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18831</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-18 21:31:17 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/89042</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18875</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-20 15:35:37 +0000</bug_when>
    <thetext>Patch merged in the following commit: https://github.com/tianocore/edk2/commit/6d2baf9dfbffe43019932c2771cd7d39697d4b11</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3286</bug_id>
          
          <creation_ts>2021-03-30 17:43:05 +0000</creation_ts>
          <short_desc>Remove duplicate declaration of EFI_RESET_NOTIFICATION_PROTOCOL in MdePkg/Include/Protocol/ResetNotification.h</short_desc>
          <delta_ts>2021-04-01 19:24:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15456</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-03-30 17:43:05 +0000</bug_when>
    <thetext>The EFI_RESET_NOTIFICATION_PROTOCOL is declared twice in MdePkg/Include/Protocol/ResetNotification.h

Once in a forward declaration:

  typedef struct _EFI_RESET_NOTIFICATION_PROTOCOL EFI_RESET_NOTIFICATION_PROTOCOL;

And again in the protocol structure:

  typedef struct _EFI_RESET_NOTIFICATION_PROTOCOL {
    EFI_REGISTER_RESET_NOTIFY   RegisterResetNotify;
    EFI_UNREGISTER_RESET_NOTIFY UnregisterResetNotify;
  } EFI_RESET_NOTIFICATION_PROTOCOL;
  
The forward declaration is correct, but the typedef struct should
remove EFI_RESET_NOTIFICATION_PROTOCOL after the &apos;}&apos;.

This change will match other protocol declarations and improve 
compiler compatibility when this is seen as a duplicate declaration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15457</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-03-30 17:43:22 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15496</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-01 19:21:26 +0000</bug_when>
    <thetext>Patch review email

https://edk2.groups.io/g/devel/message/73546</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15499</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-01 19:24:23 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/8c10a2c014c4af6486620982880cc4caf85e3eeb

GitHub PR:

https://github.com/tianocore/edk2/pull/1531</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3769</bug_id>
          
          <creation_ts>2021-12-07 21:54:24 +0000</creation_ts>
          <short_desc>StandaloneMmPkg/FvLib needs to support large file with EFI_FFS_FILE_HEADER2.</short_desc>
          <delta_ts>2022-04-19 23:31:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>wei6.xu</reporter>
          <assigned_to>wei6.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17961</commentid>
    <comment_count>0</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2021-12-07 21:54:24 +0000</bug_when>
    <thetext>Current FvLib will hit parse issue when encountering LARGE file, then ignore latter ffs/section, thus causing required drivers not being dispatched.
Therefore, need to add support for EFI_FFS_FILE_HEADER2 and EFI_COMMON_SECTION_HEADER2 in FvLib to fix this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18863</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-19 22:09:04 +0000</bug_when>
    <thetext>Wei: please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18870</commentid>
    <comment_count>2</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2022-04-19 23:31:32 +0000</bug_when>
    <thetext>Sorry for forgetting update status.
The patch has been pushed to upstream.
https://github.com/tianocore/edk2/commit/f14fff513540757bef62923ee4aeca4bf3ea8081</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3539</bug_id>
          
          <creation_ts>2021-08-09 09:35:09 +0000</creation_ts>
          <short_desc>IntelSiliconPkg/PeiSmmAccessLib: Remove S3 requirement in PeiInstallSmmAccessPpi()</short_desc>
          <delta_ts>2021-11-03 10:25:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16833</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-09 09:35:09 +0000</bug_when>
    <thetext>The function PeiInstallSmmAccessPpi() is currently the only interface exposed in the SmmAccessLib library class.

Library class header file: 
https://github.com/tianocore/edk2-platforms/blob/master/Silicon/Intel/IntelSiliconPkg/Include/Library/SmmAccessLib.h

Library instance implementation file:
https://github.com/tianocore/edk2-platforms/blob/master/Silicon/Intel/IntelSiliconPkg/Feature/SmmAccess/Library/PeiSmmAccessLib/PeiSmmAccessLib.c

PeiInstallSmmAccessPpi() currently requires the boot mode be set
to S3 to actually install gEfiPeiMmAccessPpiGuid.

The function should allow the caller to determine whether it is appropriate to install the PPI (including conditions such as boot mode) as opposed to embedding the logic within the function definition.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16835</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-09 09:41:28 +0000</bug_when>
    <thetext>V1 patch on mailing list: https://edk2.groups.io/g/devel/message/78959</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17221</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-08 20:43:07 +0000</bug_when>
    <thetext>Still waiting on patch to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17665</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-03 10:25:08 +0000</bug_when>
    <thetext>Pushed to edk2-platforms/master in commit https://github.com/tianocore/edk2-platforms/commit/5c96aa73b984fc4880fcd931f8f896e27e6c5999</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3436</bug_id>
          
          <creation_ts>2021-06-05 05:34:53 +0000</creation_ts>
          <short_desc>Get a solution if the user needs PayPal to cash app transfer</short_desc>
          <delta_ts>2021-06-07 11:36:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Reference Implementation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="peter butler">peterbutler.797</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Distribution Packaging Specificatio</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16271</commentid>
    <comment_count>0</comment_count>
    <who name="peter butler">peterbutler.797</who>
    <bug_when>2021-06-05 05:34:53 +0000</bug_when>
    <thetext>Users who want to send their money from PayPal to cash app then follow some steps:
First login into the PayPal application and go to the wallet
Tap on the Transfer Funds option
Go to the transfer to the bank account
Follow all the remaining instructions to successfully transfer the money from Paypal to the cash app. https://www.pcmonks.net/blog/how-to-send-money-from-paypal-to-cash-app/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16284</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-07 11:36:02 +0000</bug_when>
    <thetext>Invalid</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3929</bug_id>
          
          <creation_ts>2022-05-17 11:13:59 +0000</creation_ts>
          <short_desc>Review and fix spelling errors in ArmPkg.ci.yaml</short_desc>
          <delta_ts>2022-12-15 11:41:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18956</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-05-17 11:13:59 +0000</bug_when>
    <thetext>ArmPkg.ci.yaml has quite a few spelling errors relative to other packages. Several are actual typos and can be resolved by fixing the error in the source files.

This BZ tracks the review and resolution of those spelling errors.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18957</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-05-17 19:08:07 +0000</bug_when>
    <thetext>I will clean this up now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18968</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-05-20 09:15:13 +0000</bug_when>
    <thetext>Patch on mailing list: https://edk2.groups.io/g/devel/message/89863

Instead of applying this patch now, the cspell version was locked to the previous version edk2 was using that did not cause the new spelling errors to be reported. This was the minimal change needed before the stable tag was created.

This patch can be reconsidered after the stable tag release is complete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19060</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-06-09 20:53:51 +0000</bug_when>
    <thetext>Closing this as the package maintainers indicated they would prefer not to fix these issues now and the patch is available if anyone would like it submitted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20209</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-12-13 20:29:58 +0000</bug_when>
    <thetext>Reopening this due to renewed interest.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20218</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-12-15 11:41:15 +0000</bug_when>
    <thetext>Closing again due to maintainer feedback</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3309</bug_id>
          
          <creation_ts>2021-04-08 02:10:20 +0000</creation_ts>
          <short_desc>Define new element in CPUID Leaf(07h) data structure</short_desc>
          <delta_ts>2021-04-19 22:03:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason">yun.lou</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>chandana.c.kumar</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yun.lou</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15556</commentid>
    <comment_count>0</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-08 02:10:20 +0000</bug_when>
    <thetext>Define new element(Hybird) in CPUID_STRUCTURED_EXTENDED_FEATURE_FLAGS
(07h) data structure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15557</commentid>
    <comment_count>1</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-08 02:12:16 +0000</bug_when>
    <thetext>Assign to Jason Lou.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15558</commentid>
    <comment_count>2</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-08 02:39:17 +0000</bug_when>
    <thetext>Have sent out the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15725</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-19 22:03:45 +0000</bug_when>
    <thetext>Have merged the code change into master, close this bug.

SHA-1: 0bbc20727598421c4e47d46b982246217df8c6bc

* MdePkg/Cpuid.h: Define new element in CPUID Leaf(07h) data structure.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3309

Define new element(Hybird) in CPUID_STRUCTURED_EXTENDED_FEATURE_FLAGS
(07h) data structure.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3797</bug_id>
          
          <creation_ts>2022-01-07 10:38:06 +0000</creation_ts>
          <short_desc>Armv9 TRBE Support</short_desc>
          <delta_ts>2022-02-08 08:50:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Thanunathan Rangarajan">thanu.rangarajan</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18103</commentid>
    <comment_count>0</comment_count>
      <attachid>911</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-01-07 10:38:06 +0000</bug_when>
    <thetext>Created attachment 911
Code First GICC TRBE Update 0.3

This ECR pertains to support for the Armv9 Trace Buffer Extension feature on Arm systems. TRBE relies on a Processor Private Interrupt (PPI) to signal overflows. The PPI is described using the GIC CPU structure within the MADT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18115</commentid>
    <comment_count>1</comment_count>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-01-11 02:38:28 +0000</bug_when>
    <thetext>Version 0.35 attached. This version addresses feedback received from internal reviewers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18116</commentid>
    <comment_count>2</comment_count>
      <attachid>912</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-01-11 02:39:58 +0000</bug_when>
    <thetext>Created attachment 912
Code First GICC TRBE Update 0.35</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18138</commentid>
    <comment_count>3</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-01-14 10:49:27 +0000</bug_when>
    <thetext>ASWG mantis : https://mantis.uefi.org/mantis/view.php?id=2303</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18140</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-01-14 10:59:13 +0000</bug_when>
    <thetext>Note that since this is adding a new field in the GICC struct, we should increment the MADT table revision. This has already been done in a previous ECR since the published ACPI 6.4 (See: https://bugzilla.tianocore.org/show_bug.cgi?id=3706)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18166</commentid>
    <comment_count>5</comment_count>
      <attachid>917</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-01-16 23:53:27 +0000</bug_when>
    <thetext>Created attachment 917
Code First GICC TRBE Update 0.4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18174</commentid>
    <comment_count>6</comment_count>
      <attachid>918</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-01-17 06:49:21 +0000</bug_when>
    <thetext>Created attachment 918
Code First GICC TRBE Update 0.45</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18223</commentid>
    <comment_count>7</comment_count>
      <attachid>921</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-01-31 06:40:08 +0000</bug_when>
    <thetext>Created attachment 921
Code First GICC TRBE Update 0.6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18259</commentid>
    <comment_count>8</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-02-08 08:50:23 +0000</bug_when>
    <thetext>Approved by ASWG as new content for ACPI.next</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>911</attachid>
            <date>2022-01-07 10:38:06 +0000</date>
            <delta_ts>2022-01-07 10:38:06 +0000</delta_ts>
            <desc>Code First GICC TRBE Update 0.3</desc>
            <filename>CodeFirst_GICC_TRBE_ACPI_ver0.3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>27773</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>912</attachid>
            <date>2022-01-11 02:39:58 +0000</date>
            <delta_ts>2022-01-11 02:39:58 +0000</delta_ts>
            <desc>Code First GICC TRBE Update 0.35</desc>
            <filename>CodeFirst_GICC_TRBE_ACPI_ver0.35.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>28271</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>917</attachid>
            <date>2022-01-16 23:53:27 +0000</date>
            <delta_ts>2022-01-16 23:53:27 +0000</delta_ts>
            <desc>Code First GICC TRBE Update 0.4</desc>
            <filename>CodeFirst_GICC_TRBE_ACPI_ver0.4.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>29380</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>918</attachid>
            <date>2022-01-17 06:49:21 +0000</date>
            <delta_ts>2022-01-17 06:49:21 +0000</delta_ts>
            <desc>Code First GICC TRBE Update 0.45</desc>
            <filename>CodeFirst_GICC_TRBE_ACPI_ver0.45.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>28413</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>921</attachid>
            <date>2022-01-31 06:40:08 +0000</date>
            <delta_ts>2022-01-31 06:40:08 +0000</delta_ts>
            <desc>Code First GICC TRBE Update 0.6</desc>
            <filename>CodeFirst_GICC_TRBE_ACPI_ver0.6.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>28566</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3190</bug_id>
          
          <creation_ts>2021-01-26 22:19:57 +0000</creation_ts>
          <short_desc>Add MpService dependency in CpuCacheInfoLib</short_desc>
          <delta_ts>2021-02-03 03:16:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason">yun.lou</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14923</commentid>
    <comment_count>0</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-01-26 22:19:57 +0000</bug_when>
    <thetext>Add more dependency of CpuCacheInfoLib for
1. Enforce the executability of CpuCacheInfoLib.
2. The consumer&apos;s dependency issue has been fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14926</commentid>
    <comment_count>1</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-01-27 01:32:57 +0000</bug_when>
    <thetext>Assign to Jason Lou.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14937</commentid>
    <comment_count>2</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-02-01 02:42:23 +0000</bug_when>
    <thetext>Have sent out the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14989</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-02-03 03:16:01 +0000</bug_when>
    <thetext>Have merged all the code change into master, close this bug.

SHA-1: 51b96e4b4cb6d68093f7c7004d4716152ad3ac79

* UefiCpuPkg/CpuCacheInfoLib: Add MpService dependency

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3190

Add MpService dependency to enforce the executability of CpuCacheInfoLib.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3558</bug_id>
          
          <creation_ts>2021-08-11 07:22:15 +0000</creation_ts>
          <short_desc>Learn how to use the Cash app refund to challenge a Cash transaction?</short_desc>
          <delta_ts>2021-08-16 21:46:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="howard123">howardpotts797</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16881</commentid>
    <comment_count>0</comment_count>
    <who name="howard123">howardpotts797</who>
    <bug_when>2021-08-11 07:22:15 +0000</bug_when>
    <thetext>Hey, go to the Cash app refund to challenge a transaction that was made earlier. When you accept a disputed payment here, you&apos;ll have to wait until a full message appears on the screen. Therefore, after receiving this confirmation message, you must notify assistance to initiate a refund. If you would like to contact support, you can visit our website.
https://www.quick-utilities.net/blog/get-refund-on-cash-app</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16922</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:46:26 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3961</bug_id>
          
          <creation_ts>2022-06-24 01:22:11 +0000</creation_ts>
          <short_desc>NetworkPkg: Need to support Wi-Fi Wpa3 in WifiConnectManager</short_desc>
          <delta_ts>2022-07-14 04:33:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19132</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-06-24 01:22:11 +0000</bug_when>
    <thetext>WPa3 is the newest WI-FI security protocols. WPA3 adds new features to simplify WI-FI security, enable more robust authentication, deliver increased cryptographic strength for highly sensitive data markets, and maintain resiliency of mission critical networks. 
Current WifiConnectManager doesn&apos;t support WPA3, it shows &quot;Unsupported&quot; if an AP is &quot;WPA3-Personal&quot;/&quot;WPA3-Enterprise&quot;/&quot;Wi-Fi CERTIFIED Enhanced Open&quot; mode and can&apos;t connect to it.
Need to add Wi-Fi Wpa3 support in WifiConnectManager.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19133</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-06-24 01:22:51 +0000</bug_when>
    <thetext>I will submit a patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19134</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-06-24 04:01:39 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/90746</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19240</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-07-14 04:33:36 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/e1eef3a8b01a25e75abf63d15bdc90157a74cba9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3823</bug_id>
          
          <creation_ts>2022-02-06 21:58:17 +0000</creation_ts>
          <short_desc>OvmfPkg Add new target for Cloud Hypervisor</short_desc>
          <delta_ts>2022-02-06 22:00:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18245</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-06 21:58:17 +0000</bug_when>
    <thetext>Adding the new target CloudHvX64, copied directly from OvmfPkgX64. The
point is to create a target dedicated for Cloud Hypervisor rather than
trying to support both QEMU and Cloud Hypervisor on the same target.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18246</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-06 22:00:29 +0000</bug_when>
    <thetext>Merge 7438a85bf1388add286a89707079d9afca735814..5302bd81d9ba0c9e7f2371a81c438ec919ec8e1e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3701</bug_id>
          
          <creation_ts>2021-10-20 18:30:41 +0000</creation_ts>
          <short_desc>Code first - Fix incorrect reference to &quot;Memory Aggregator Device&quot;</short_desc>
          <delta_ts>2021-10-28 18:29:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17591</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-20 18:30:41 +0000</bug_when>
    <thetext>ACPI 6.4 specification, Table 5.80 the name of the last field at offset 40 is &quot;Memory Aggregator Device Structure [n]&quot;. This is incorrect, as the structure referenced in table 5.81 is &quot;Common Memory Device&quot;, not &quot;Memory Aggregator Device&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17592</commentid>
    <comment_count>1</comment_count>
      <attachid>847</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-20 18:40:09 +0000</bug_when>
    <thetext>Created attachment 847
CodeFirst_Mem_Agg_Device_Typo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17625</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-28 18:29:22 +0000</bug_when>
    <thetext>Approved by ASWG 10/28 meeting as-submitted without changes, as an errata for ACPI 6.4.

Closing this ECR</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>847</attachid>
            <date>2021-10-20 18:40:09 +0000</date>
            <delta_ts>2021-10-20 18:40:09 +0000</delta_ts>
            <desc>CodeFirst_Mem_Agg_Device_Typo</desc>
            <filename>CodeFirst_Mem_Agg_Device_Typo.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>22448</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3100</bug_id>
          
          <creation_ts>2020-12-02 16:59:28 +0000</creation_ts>
          <short_desc>Remove PEI phase from UEFI payload</short_desc>
          <delta_ts>2020-12-02 18:16:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="dong_guo@126.com">guo.dong</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14462</commentid>
    <comment_count>0</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2020-12-02 16:59:28 +0000</bug_when>
    <thetext>It is not necessary to have a PEI phase in the UEFI payload since no specific PEI task is required. we could have a single UefiPayloadEntry driver to get UEFI Payload required information from the bootloaders, convert them into a HOB list, load DXE core and transfer control to it.
There is already a patch for this change and it passed code review. Just create this BZ for track purpose.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14465</commentid>
    <comment_count>1</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2020-12-02 18:16:16 +0000</bug_when>
    <thetext>This patch was just merged.
https://github.com/tianocore/edk2/pull/1165</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3584</bug_id>
          
          <creation_ts>2021-08-24 03:49:05 +0000</creation_ts>
          <short_desc>Update mPatchCetSupported set  condition</short_desc>
          <delta_ts>2021-09-01 01:46:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>wenxing.hou</reporter>
          <assigned_to>wenxing.hou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17020</commentid>
    <comment_count>0</comment_count>
    <who name="">wenxing.hou</who>
    <bug_when>2021-08-24 03:49:05 +0000</bug_when>
    <thetext>update the mPatchCetSupported set to prevent judgment statement errors</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17021</commentid>
    <comment_count>1</comment_count>
    <who name="">wenxing.hou</who>
    <bug_when>2021-08-24 05:17:43 +0000</bug_when>
    <thetext>I will raise a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17121</commentid>
    <comment_count>2</comment_count>
    <who name="">wenxing.hou</who>
    <bug_when>2021-09-01 01:46:09 +0000</bug_when>
    <thetext>The patch(UefiCpuPkg/PiSmmCpuDxeSmm: Update mPatchCetSupported set condition) have been merged to EDK2.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3990</bug_id>
          
          <creation_ts>2022-07-14 13:58:56 +0000</creation_ts>
          <short_desc>Bug in BaseMemAllocation causes memory leak in PEI phase</short_desc>
          <delta_ts>2022-07-21 16:32:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Judah Vang">judah.vang</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19243</commentid>
    <comment_count>0</comment_count>
    <who name="Judah Vang">judah.vang</who>
    <bug_when>2022-07-14 13:58:56 +0000</bug_when>
    <thetext>The BaseMemAllocation uses AllocatePool() and FreePool().
In PEI phase the FreePool() is not supported so the memory
allocated is actually never freed. This causes a memory leak.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19292</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-19 22:06:21 +0000</bug_when>
    <thetext>This is not bug. This behavior is defined in PI spec. 

In PEI phase, AllocatePages and FreePages are supported. But, FreePool() is not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19320</commentid>
    <comment_count>2</comment_count>
    <who name="Judah Vang">judah.vang</who>
    <bug_when>2022-07-21 16:32:45 +0000</bug_when>
    <thetext>We plan on changing the implementation in BaseMemAllocation() from AllocatePool() and FreePool() to AllocatePages() and FreePages().  Is this ok?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3361</bug_id>
          
          <creation_ts>2021-04-28 00:10:34 +0000</creation_ts>
          <short_desc>edk2-libc: StdLib is broken following removal of insecure string functions in edk2 repo</short_desc>
          <delta_ts>2022-02-04 16:10:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3549</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="Rebecca Cran">rebecca</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jie.b.gao</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15808</commentid>
    <comment_count>0</comment_count>
      <attachid>706</attachid>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-04-28 00:10:34 +0000</bug_when>
    <thetext>Created attachment 706
Hacky patch to fix StdLib

(creating this in the EDK2 product because there&apos;s no product for edk2-libc)

The edk2-libc StdLib is broken with edk2 master since the insecure string functions were removed a while ago.

I&apos;ve attached a quick and hacky patch that fixes it. It should at least highlight the places that need updated, though the use of UNICODE_STRING_MAX is wrong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16030</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-11 22:15:44 +0000</bug_when>
    <thetext>Rebecca, you can fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16031</commentid>
    <comment_count>2</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-05-11 22:38:19 +0000</bug_when>
    <thetext>Take.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16287</commentid>
    <comment_count>3</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-06-07 11:49:51 +0000</bug_when>
    <thetext>I&apos;m working on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16291</commentid>
    <comment_count>4</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-06-07 22:29:34 +0000</bug_when>
    <thetext>I&apos;ve sent a patch to devel@edk2.groups.io for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16899</commentid>
    <comment_count>5</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-08-12 23:39:15 +0000</bug_when>
    <thetext>Fixed in 66dd218b89c6cf84b439618338c563274ed0ae4c.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16941</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-17 11:31:35 +0000</bug_when>
    <thetext>One additional update required in StdLib/PosixLib/GetPass
to use UnicodeStrToAsciiStrS().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16969</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 18:12:25 +0000</bug_when>
    <thetext>Patch review email

https://edk2.groups.io/g/devel/message/79437</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16970</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 18:13:05 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2-libc/commit/954dcf8966470d5f6e1df0ada13b87cbfba75e4b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16978</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 20:02:01 +0000</bug_when>
    <thetext>*** Bug 96 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17120</commentid>
    <comment_count>10</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-31 17:14:12 +0000</bug_when>
    <thetext>Reopen to address functional issues with use of UNICODE_STRING_MAX.

Porting Python 3.x to edk2-libc found issues with these changes
for safe string compatibility that assumed the maximum size of
strings in some functions is UNICODE_STRING_MAX.  Python uses
strings that can be much larger.

The return status when available from safe string fucntions
should be evaluated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18241</commentid>
    <comment_count>11</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2022-02-04 16:10:24 +0000</bug_when>
    <thetext>This was fixed with commit 1b3ca3b55e7bd659514236455b34519912890d72.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>706</attachid>
            <date>2021-04-28 00:10:34 +0000</date>
            <delta_ts>2021-04-28 00:10:34 +0000</delta_ts>
            <desc>Hacky patch to fix StdLib</desc>
            <filename>FixupStdLib.diff</filename>
            <type>text/plain</type>
            <size>7435</size>
            <attacher name="Rebecca Cran">rebecca</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3854</bug_id>
          
          <creation_ts>2022-03-02 06:51:17 +0000</creation_ts>
          <short_desc>Use SmmWaitForAllProcessor() form UefiCpuPkg to make Smm cpu rendezvous in needed driver</short_desc>
          <delta_ts>2022-12-02 03:23:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="zhihao">zhihao.li</reporter>
          <assigned_to name="zhihao">zhihao.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>ray.ni</cc>
    
    <cc>zhihao.li</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18505</commentid>
    <comment_count>0</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-03-02 06:51:17 +0000</bug_when>
    <thetext>In UefiCpuPkg, there are a new Protocol with the new service
SmmWaitForAllProcessor(), which can be used by SMI handler
to optionally wait for other APs to complete SMM rendezvous in
relaxed AP mode.

This patch use the new service to let VariableSmm driver work
normally.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18572</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-08 21:52:28 +0000</bug_when>
    <thetext>Zhichao: why need this change? Is it for bug fix or improvement?

And, can you git the full list of the smm modules to be updated?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18583</commentid>
    <comment_count>2</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-03-09 03:28:38 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; Zhichao: why need this change? Is it for bug fix or improvement?
&gt; 
&gt; And, can you git the full list of the smm modules to be updated?

It&apos;s the improvement for Cpu relaxed mode. So it need improve some 
SMI handlers which need SMM rendezvous such as SmmVariableHandler in VariableSmm.c.

In relaxed mode, Bsp don&apos;t need to wait all APs enter SMM. You can 
see code in UefiCpuPkg/PiSmmCpuDxeSmm/MpService.c. SmmVariableHandler need
SMM rendezvous.

Smm modules to be updated list:
MdeModulePkg: VariableSmm.inf
SecurityPkg: Tcg2Smm.inf, TcgSmm.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18607</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-15 21:47:26 +0000</bug_when>
    <thetext>Ray Ni: can you review this request and give your suggestion?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18626</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2022-03-15 22:29:11 +0000</bug_when>
    <thetext>The code was done by Zhihao. Assign to him.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20170</commentid>
    <comment_count>5</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-12-02 03:23:51 +0000</bug_when>
    <thetext>Invalid.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3235</bug_id>
          
          <creation_ts>2021-02-24 22:26:21 +0000</creation_ts>
          <short_desc>StandaloneMmPkg StandaloneMmDriverEntryPoint.h Duplicates MdePkg File</short_desc>
          <delta_ts>2021-03-03 15:47:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15140</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-24 22:26:21 +0000</bug_when>
    <thetext>StandaloneMmPkg has a StandaloneMmDriverEntryPoint.h that is a duplicate of the header file in MdePkg. The duplicate file in StandaloneMmPkg should be removed as it is a stale copy of the header file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15141</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-24 22:28:23 +0000</bug_when>
    <thetext>Discussion that led to identifying the file in StandaloneMmPkg as the duplicate file can be found in reply to this message on the edk2 mailing list:
https://edk2.groups.io/g/devel/message/71999

I will send a patch to remove the header file in StandaloneMmPkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15142</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-24 22:34:18 +0000</bug_when>
    <thetext>V1 patch is on the edk2 mailing list: https://edk2.groups.io/g/devel/message/72178</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15202</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-03-03 15:47:04 +0000</bug_when>
    <thetext>Submitted as cd14150c1594d8deeee6ecf80feb5751dcd7f315</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15203</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-03-03 15:47:37 +0000</bug_when>
    <thetext>Closing</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3607</bug_id>
          
          <creation_ts>2021-09-06 03:10:24 +0000</creation_ts>
          <short_desc>Can not access new members added to SMBIOS_TABLE_TYPE9 structure after variable data</short_desc>
          <delta_ts>2022-08-23 23:38:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>sainadhn</reporter>
          <assigned_to>gaoliming</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sainadhn</cc>
    
    <cc>sundaresans</cc>
    
    <cc>vasudevans</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17170</commentid>
    <comment_count>0</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2021-09-06 03:10:24 +0000</bug_when>
    <thetext>In Smbios Spec v3.4, new members are added after variable data (PeerGroups). In edk2-stable202108 SmBios.h, these new members are added in SMBIOS_TABLE_TYPE9 structure after variable data. If peer groups are increased then can&apos;t access new members by type casting using SMBIOS_TABLE_TYPE9 structure as size may vary. We can&apos;t read the new members based on this structure if peer groups increased or zero peer group. Please help to fix this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17187</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-07 23:09:12 +0000</bug_when>
    <thetext>So, is this smbios spec issue or code issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17202</commentid>
    <comment_count>2</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2021-09-08 00:49:43 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; So, is this smbios spec issue or code issue?

This is code issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17211</commentid>
    <comment_count>3</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-09-08 10:22:35 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; So, is this smbios spec issue or code issue?

SMBIOS_TABLE_TYPE9 structure is currently defined like this (I stripped some fields):
typedef struct {
  // ... stripped ....
  // Add for smbios 3.2
  //
  UINT8                       DataBusWidth;
  UINT8                       PeerGroupingCount;
  MISC_SLOT_PEER_GROUP        PeerGroups[1];
  //
  // Add for smbios 3.4
  //
  UINT8                       SlotInformation;
  UINT8                       SlotPhysicalWidth;
  UINT16                      SlotPitch;
} SMBIOS_TABLE_TYPE9;

The problem is that PeerGroups is a variables size array. The number of elements is defined by the PeerGroupingCount field.
Whenever PeerGroupingCount is more than one, assignments to the last 3 fields will be corrupting PeerGroups data.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17258</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-13 21:24:48 +0000</bug_when>
    <thetext>Per Smbios spec, 3.4 Slot Information BYTE Varies is 14h + 5*n. So, SMBIOS_TABLE_TYPE9 can be updated like below.  

typedef struct {
  // ... stripped ....
  // Add for smbios 3.2
  //
  UINT8                       DataBusWidth;
  UINT8                       PeerGroupingCount;
  MISC_SLOT_PEER_GROUP        PeerGroups[1];
  //
  // Add for smbios 3.4
  //
  UINT8                       SlotInformation;
  UINT8                       SlotPhysicalWidth;
  UINT16                      SlotPitch;
} SMBIOS_TABLE_TYPE9;

==&gt;

typedef struct {
  // ... stripped ....
  // Add for smbios 3.2
  //
  UINT8                       DataBusWidth;
  UINT8                       PeerGroupingCount;
  MISC_SLOT_PEER_GROUP        PeerGroups[1];
  //
  // Add for smbios 3.4
  //
  // UINT8                       SlotInformation;
  // UINT8                       SlotPhysicalWidth;
  // UINT16                      SlotPitch;
} SMBIOS_TABLE_TYPE9;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17557</commentid>
    <comment_count>5</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2021-10-14 23:38:22 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #4)
&gt; Per Smbios spec, 3.4 Slot Information BYTE Varies is 14h + 5*n. So,
&gt; SMBIOS_TABLE_TYPE9 can be updated like below.  
&gt; 
&gt; typedef struct {
&gt;   // ... stripped ....
&gt;   // Add for smbios 3.2
&gt;   //
&gt;   UINT8                       DataBusWidth;
&gt;   UINT8                       PeerGroupingCount;
&gt;   MISC_SLOT_PEER_GROUP        PeerGroups[1];
&gt;   //
&gt;   // Add for smbios 3.4
&gt;   //
&gt;   UINT8                       SlotInformation;
&gt;   UINT8                       SlotPhysicalWidth;
&gt;   UINT16                      SlotPitch;
&gt; } SMBIOS_TABLE_TYPE9;
&gt; 
&gt; ==&gt;
&gt; 
&gt; typedef struct {
&gt;   // ... stripped ....
&gt;   // Add for smbios 3.2
&gt;   //
&gt;   UINT8                       DataBusWidth;
&gt;   UINT8                       PeerGroupingCount;
&gt;   MISC_SLOT_PEER_GROUP        PeerGroups[1];
&gt;   //
&gt;   // Add for smbios 3.4
&gt;   //
&gt;   // UINT8                       SlotInformation;
&gt;   // UINT8                       SlotPhysicalWidth;
&gt;   // UINT16                      SlotPitch;
&gt; } SMBIOS_TABLE_TYPE9;

But in the case of PeerGroupingCount is increased last 3 fields of slot information will be corrupting PeerGroups data in the above structure which causes loss of data.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18453</commentid>
    <comment_count>6</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-02-23 05:32:20 +0000</bug_when>
    <thetext>typedef struct {
  // ... stripped ....
  // Add for smbios 3.2
  //
  UINT8                       DataBusWidth;
  UINT8                       PeerGroupingCount;
  MISC_SLOT_PEER_GROUP        PeerGroups[1];
  //
  // Add for smbios 3.4
  //
  UINT8                       SlotInformation;
  UINT8                       SlotPhysicalWidth;
  UINT16                      SlotPitch;
} SMBIOS_TABLE_TYPE9;

==&gt;

typedef struct {
  // ... stripped ....
  // Add for smbios 3.2
  //
  UINT8                       DataBusWidth;
  UINT8                       PeerGroupingCount;
  MISC_SLOT_PEER_GROUP        PeerGroups[1];
  //
  // Add for smbios 3.4
  //
  // UINT8                       SlotInformation;
  // UINT8                       SlotPhysicalWidth;
  // UINT16                      SlotPitch;
} SMBIOS_TABLE_TYPE9;

gaoliming@byosoft.com.cn : Please confirm if we can comment members added after PeerGroups. As part of Smbios 3.5 one more new member (SlotHeight) is added. If we can comment these members,SMBIOS_TABLE_TYPE9 can be updated like below.

typedef struct {
  // ... stripped ....
  // Add for smbios 3.2
  //
  UINT8                       DataBusWidth;
  UINT8                       PeerGroupingCount;
  MISC_SLOT_PEER_GROUP        PeerGroups[1];
  //
  // Add for smbios 3.4
  //
  // UINT8                       SlotInformation;
  // UINT8                       SlotPhysicalWidth;
  // UINT16                      SlotPitch;
  //
  // Add for Smbios 3.5
  //
  //UINT8                         SlotHeight;
} SMBIOS_TABLE_TYPE9;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18489</commentid>
    <comment_count>7</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 21:52:34 +0000</bug_when>
    <thetext>We can define sub structure for the new added field. So, new fields can be accessed in souce code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18508</commentid>
    <comment_count>8</comment_count>
      <attachid>941</attachid>
    <who name="">sainadhn</who>
    <bug_when>2022-03-02 11:04:00 +0000</bug_when>
    <thetext>Created attachment 941
Proposed Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18509</commentid>
    <comment_count>9</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-03-02 11:04:59 +0000</bug_when>
    <thetext>gaoliming@byosoft.com.cn : Done changes adding sub structure for the new fields added after PeerGroups. Also prepared SmBios.h patch to support SMBIOS spec v3.5.0 (As mentioned in issue:https://bugzilla.tianocore.org/show_bug.cgi?id=3843).

Attached the SmBios.h with changes for reference.

Please let me know if I can submit the changes from both bugs(ID:3607 and ID:3843) together for review or should I submit two seperate patches for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18636</commentid>
    <comment_count>10</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-03-17 03:36:27 +0000</bug_when>
    <thetext>(In reply to sainadhn from comment #9)
&gt; gaoliming@byosoft.com.cn : Done changes adding sub structure for the new
&gt; fields added after PeerGroups. Also prepared SmBios.h patch to support
&gt; SMBIOS spec v3.5.0 (As mentioned in
&gt; issue:https://bugzilla.tianocore.org/show_bug.cgi?id=3843).
&gt; 
&gt; Attached the SmBios.h with changes for reference.
&gt; 
&gt; Please let me know if I can submit the changes from both bugs(ID:3607 and
&gt; ID:3843) together for review or should I submit two seperate patches for
&gt; review.

gaoliming@byosoft.com.cn : Can you please provide your suggestion on above comment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18911</commentid>
    <comment_count>11</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-04-29 09:53:40 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #7)
&gt; We can define sub structure for the new added field. So, new fields can be
&gt; accessed in souce code.

gaoliming@byosoft.com.cn : I have sent the patch to devel@edk2.groups.io along with some improvements to Smbios 3.5.0 changes (https://bugzilla.tianocore.org/show_bug.cgi?id=3843) please help to review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19170</commentid>
    <comment_count>12</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-01 11:38:29 +0000</bug_when>
    <thetext>I dont&apos;t find your patch in edk2 mail list. Can you forward it to me gaoliming@byosoft.com.cn?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19172</commentid>
    <comment_count>13</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-07-01 21:06:11 +0000</bug_when>
    <thetext>Forwarded the Patch mail to gaoliming@byosoft.com.cn.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19354</commentid>
    <comment_count>14</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-08-03 01:08:44 +0000</bug_when>
    <thetext>Liming: I have resent the Patch and it&apos;s available in edk2 mail list (https://edk2.groups.io/g/devel/message/91944), Please help to review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19422</commentid>
    <comment_count>15</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-08-23 06:18:35 +0000</bug_when>
    <thetext>Changes merged to edk2 and will be part of stable tag 202208.

CommitId: 9102518d297546d349e9dcbaf9a87706ec8529e0 (https://github.com/tianocore/edk2/commit/9102518d297546d349e9dcbaf9a87706ec8529e0)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19426</commentid>
    <comment_count>16</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-08-23 23:38:37 +0000</bug_when>
    <thetext>ShellPkg CommitId:35d167ef3c17dde8f2c2338c7bae1d9290a07da3
(https://github.com/tianocore/edk2/commit/35d167ef3c17dde8f2c2338c7bae1d9290a07da3)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>941</attachid>
            <date>2022-03-02 11:04:00 +0000</date>
            <delta_ts>2022-03-02 11:04:00 +0000</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Smbios3.5.rar</filename>
            <type>text/plain</type>
            <size>21541</size>
            <attacher>sainadhn</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3008</bug_id>
          
          <creation_ts>2020-10-15 09:21:39 +0000</creation_ts>
          <short_desc>SEV-ES fixes, updates and cleanups</short_desc>
          <delta_ts>2020-11-10 14:27:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>thomas.lendacky</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13987</commentid>
    <comment_count>0</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-10-15 09:21:39 +0000</bug_when>
    <thetext>Resolve some issues and cleanup some of the code in the SEV-ES support. Specifically:
  - Cleanup GHCB offset calculations and savearea fields
  - Set the ValidBitmap fields for the SwExitCode/SwExitInfo1/SwExitInfo2/SwScratch fields when used
  - Fix Qemu flash services block erasing to use VmgExit for SEV-ES guests
  - Use GetProcessorNumber () in place of APIC ID to assign the SEV-ES reset stack</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13996</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-15 12:23:19 +0000</bug_when>
    <thetext>v1 patch set on the list:

[edk2-devel] [PATCH 0/9] SEV-ES guest support fixes and cleanup
https://edk2.groups.io/g/devel/message/66099
http://mid.mail-archive.com/cover.1602346027.git.thomas.lendacky@amd.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14012</commentid>
    <comment_count>2</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-10-16 12:22:31 +0000</bug_when>
    <thetext>v2:

[PATCH v2 00/11] SEV-ES guest support fixes and cleanup
https://edk2.groups.io/g/devel/message/66327

(can&apos;t find the mail-archive.com link...)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14024</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-19 09:26:05 +0000</bug_when>
    <thetext>The mail-archive.com link becomes valid only later (once mail-archive.com indexes the new message); however, knowing the message-id of the blurb (which git-send-email does tell you), you can pre-generate the link, even before the link works. Just take the message-id, remove the angle brackets, and prefix

  http://mid.mail-archive.com/

In this case:

  http://mid.mail-archive.com/cover.1602864557.git.thomas.lendacky@amd.com

mail-archive.com is great because it lets you generate a stable and permanent URL from information you have immediately (the message-id, from git-send-email) even before the archive digests the new message. It&apos;s common that a mail-archive.com link like above starts working only one or two days after it&apos;s pasted into a bugzilla comment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14025</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-19 09:28:48 +0000</bug_when>
    <thetext>... in other words, if you paste just the message-id from the git-send-email output, for the blurb, into the BZ, that&apos;s sufficient info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14149</commentid>
    <comment_count>5</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-10-29 11:34:07 +0000</bug_when>
    <thetext>v3:
  [edk2-devel] [PATCH v3 00/11] SEV-ES guest support fixes and cleanup
  https://edk2.groups.io/g/devel/message/66741
  http://mid.mail-archive.com/cover.1603981082.git.thomas.lendacky@amd.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14254</commentid>
    <comment_count>6</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-11-06 13:01:03 +0000</bug_when>
    <thetext>v4:
  [PATCH v4 00/11] SEV-ES guest support fixes and cleanup
  https://edk2.groups.io/g/devel/message/67099
  http://mid.mail-archive.com/cover.1604685192.git.thomas.lendacky@amd.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14255</commentid>
    <comment_count>7</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-11-06 13:05:30 +0000</bug_when>
    <thetext>By the way, I&apos;ve been adding a link to mid.mail-archive.com in this bugzilla for each version of the series, but from what I can see, that site&apos;s last edk2-devel post is from October 6th.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14294</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-10 06:55:42 +0000</bug_when>
    <thetext>(In reply to thomas.lendacky from comment #7)
&gt; By the way, I&apos;ve been adding a link to mid.mail-archive.com in this bugzilla
&gt; for each version of the series, but from what I can see, that site&apos;s last
&gt; edk2-devel post is from October 6th.

Correct, unfortunately. I&apos;ve noticed the same with some other messages that I attempted to create links for.

I contacted the Mail-Archive Support Team, the Groups.io Support Team, and the other stewards about this, on Nov 4th.

FWIW, there&apos;s yet another mailing list archive, at &lt;https://www.redhat.com/archives/edk2-devel-archive/&gt;. But it doesn&apos;t support message-id-based search, alas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14295</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-10 06:56:41 +0000</bug_when>
    <thetext>So one alternate link to the v4 posting is:

https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00258.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14303</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-10 14:27:32 +0000</bug_when>
    <thetext>(In reply to thomas.lendacky from comment #6)
&gt; v4:
&gt;   [PATCH v4 00/11] SEV-ES guest support fixes and cleanup
&gt;   https://edk2.groups.io/g/devel/message/67099
&gt;   http://mid.mail-archive.com/cover.1604685192.git.thomas.lendacky@amd.com

Merged as commit range 8c610e6075f2..d150439b7263, via &lt;https://github.com/tianocore/edk2/pull/1110&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3390</bug_id>
          
          <creation_ts>2021-05-12 02:16:24 +0000</creation_ts>
          <short_desc>uefi-sct: Incorrect test of EFI_SIMPLE_TEXT_INPUT_EX_PROTOCOL.SetState()</short_desc>
          <delta_ts>2021-10-25 03:45:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>vincent.stehle</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16033</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-12 02:16:24 +0000</bug_when>
    <thetext>Function BBTestReadKeyStrokeExFunctionAutoTestCheckpoint1() calls EFI_SIMPLE_TEXT_INPUT_EX_PROTOCOL.SetState() with different values of KeyToggleState.

UEFI spec 2.9 does not require the setting of toggle states to be supported. This holds true even if EFI_KEY_STATE_EXPOSED is supported.

The spec does not describe what passing or not passing EFI_TOGGLE_STATE_VALID to SetState() will result in. This should be clarified in the specification.

EFI_SIMPLE_TEXT_INPUT_EX_PROTOCOL.SetState() returning EFI_UNSUPPORTED must be accepted as a valid return value. It does not constitute a bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17214</commentid>
    <comment_count>1</comment_count>
      <attachid>823</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-09-08 15:18:04 +0000</bug_when>
    <thetext>Created attachment 823
[PATCH edk2-test 1/1] uefi-sct/SctPkg: unsupported TEXT_INPUT_EX.SetState

Please, review the appended patch which has been sent to the mailing list:

[PATCH edk2-test 1/1] uefi-sct/SctPkg: unsupported TEXT_INPUT_EX.SetState
https://edk2.groups.io/g/devel/message/80376

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17215</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-09-08 15:19:35 +0000</bug_when>
    <thetext>Patch created</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17453</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-10-07 10:38:45 +0000</bug_when>
    <thetext>Patch to be reviewed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17498</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-10-12 09:19:52 +0000</bug_when>
    <thetext>The appended patch was reviewed:

Reviewed-by: G Edhaya Chandran&lt;edhaya.chandran@arm.com&gt;
https://edk2.groups.io/g/devel/message/81807

Please, consider for merging</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17602</commentid>
    <comment_count>5</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-10-25 03:45:44 +0000</bug_when>
    <thetext>The patch is upstreamed through commit:

https://github.com/tianocore/edk2-test/commit/7c60a6d4c73a2a4a5e1f352534e103f0f1a418bd</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>823</attachid>
            <date>2021-09-08 15:18:04 +0000</date>
            <delta_ts>2021-09-08 15:18:04 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: unsupported TEXT_INPUT_EX.SetState</desc>
            <filename>0001-uefi-sct-SctPkg-unsupported-TEXT_INPUT_EX.SetState.patch</filename>
            <type>text/plain</type>
            <size>2593</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3881</bug_id>
          
          <creation_ts>2022-03-22 06:54:28 +0000</creation_ts>
          <short_desc>CryptoPkg: should list all used library in dsc file</short_desc>
          <delta_ts>2022-09-26 07:55:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="yi1.li@intel.com">yi1.li</reporter>
          <assigned_to name="yi1.li@intel.com">yi1.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>yi1.li</cc>
    
    <cc>zhihao.li</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18665</commentid>
    <comment_count>0</comment_count>
      <attachid>965</attachid>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-03-22 06:54:28 +0000</bug_when>
    <thetext>Created attachment 965
Patch file

LibraryClass MmServicesTableLib SynchronizationLib in SmmCryptLib.inf should be list in CryptoPkg.dsc.

This issue causes errors when compiling CryptoPkg modules separately by build-in basetools.

Attachment fixed this issue.

REF: ERROR CODE:
λ build -p .\edk2\CryptoPkg\CryptoPkg.dsc -t VS2019 -a X64 -D CRYPTO_SERVICES=ALL
Build environment: Windows-10-10.0.19041-SP0
Build start time: 18:36:07, Mar.22 2022


Processing meta-data
.Architecture(s)  = X64
Build target     = DEBUG
Toolchain        = VS2019

Active Platform          = e:\workspace\tianocore\edk2\CryptoPkg\CryptoPkg.dsc


build.py...
e:\workspace\tianocore\edk2\CryptoPkg\CryptoPkg.dsc(...): error 4000: Instance of library class [MmServicesTableLib] is not found
        in [e:\workspace\tianocore\edk2\CryptoPkg\Library\BaseCryptLib\SmmCryptLib.inf] [X64]
        consumed by module [e:\workspace\tianocore\edk2\conf\.cache\A3542CE8-77F7-49DC-A834-45D37D2EC1FACryptoSmm.inf]


- Failed -
Build end time: 18:36:08, Mar.22 2022
Build total time: 00:00:00</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18670</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 21:34:52 +0000</bug_when>
    <thetext>Yi: please submit the patch to edk2 mail list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18701</commentid>
    <comment_count>2</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-03-23 02:42:17 +0000</bug_when>
    <thetext>Done,
Patch: https://edk2.groups.io/g/devel/message/87830?p=%2C%2C%2C20%2C0%2C0%2C0%3A%3Arecentpostdate%2Fsticky%2C%2Cyi1.li%2C20%2C2%2C0%2C89949443
Code: https://github.com/tianocore/edk2/pull/2656</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19631</commentid>
    <comment_count>3</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2022-09-26 07:55:49 +0000</bug_when>
    <thetext>Fixed by Mike: https://github.com/tianocore/edk2/commit/582a7c9995a8fd036a3583ba485467f5a0316cca</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>965</attachid>
            <date>2022-03-22 06:54:28 +0000</date>
            <delta_ts>2022-03-22 06:54:28 +0000</delta_ts>
            <desc>Patch file</desc>
            <filename>0001-CryptoPkg-Add-consumed-library-class-by-SMM-to-dsc-f.patch</filename>
            <type>application/octet-stream</type>
            <size>1305</size>
            <attacher name="yi1.li@intel.com">yi1.li</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3748</bug_id>
          
          <creation_ts>2021-11-23 15:48:25 +0000</creation_ts>
          <short_desc>Add Uncrustify CI Plugin</short_desc>
          <delta_ts>2021-12-23 21:26:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17805</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-23 15:48:25 +0000</bug_when>
    <thetext>After Uncrustify has been applied to all package C and H files (as tracked in https://bugzilla.tianocore.org/show_bug.cgi?id=3737), a CI plugin should be added to check for future violations.

If violations are found, the number of files with violations will be noted in the CI plugin output.

The plugin is expected to have the following configuration options:

  &quot;Uncrustify&quot;: {
      &quot;AuditOnly&quot;: False,           # Don&apos;t fail the build if there are errors. Just log them.
      &quot;OutputFileDiffs&quot;: False      # Output chunks of formatting diffs in the test case log.
                                    # This can significantly slow down the plugin on very large packages.
      &quot;ConfigFilePath&quot;: &quot;&quot;,         # Custom path to an Uncrustify config file. Path is relative to the package.
      &quot;IgnoreStandardPaths&quot;: [],    # Standard Plugin defined paths that should be ignored.
      &quot;AdditionalIncludePaths&quot;: []  # Additional paths to check formatting (wildcards supported).
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17814</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 21:47:22 +0000</bug_when>
    <thetext>Michael will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17829</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-23 22:45:58 +0000</bug_when>
    <thetext>Patches sent to list so far:

v1: https://edk2.groups.io/g/devel/message/83956
v2: https://edk2.groups.io/g/devel/message/83982
v3: https://edk2.groups.io/g/devel/message/84013</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17831</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-24 16:48:16 +0000</bug_when>
    <thetext>v4: https://edk2.groups.io/g/devel/message/84058</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17832</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-24 16:48:56 +0000</bug_when>
    <thetext>The v4 patch is also published to the following branch:
https://github.com/makubacki/edk2/tree/add_uncrustify_ci_plugin_v4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17834</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-24 20:26:49 +0000</bug_when>
    <thetext>v5: https://edk2.groups.io/g/devel/message/84068
Branch: https://github.com/makubacki/edk2/commits/add_uncrustify_ci_plugin_v5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17918</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-12-05 21:36:15 +0000</bug_when>
    <thetext>v6: https://edk2.groups.io/g/devel/message/84369
Branch: https://github.com/makubacki/edk2/tree/add_uncrustify_ci_plugin_v6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17940</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-12-06 10:27:35 +0000</bug_when>
    <thetext>v7: https://edk2.groups.io/g/devel/message/84411
Branch: https://github.com/makubacki/edk2/tree/add_uncrustify_ci_plugin_v7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17968</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-12-08 10:58:02 +0000</bug_when>
    <thetext>Series including Uncrustify formatting changes and the Uncrustify CI plugin was pushed in commits 429309e0c6b74792d679681a8edd0d5ae0ff850c - dc453b51640f945233a1edb062c0c97f88c21e79.

Tianocore wiki patch v1 is on list: https://edk2.groups.io/g/devel/message/84476

Closing this BZ since the CI plugin is now merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18046</commentid>
    <comment_count>9</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-12-23 21:26:26 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3147</bug_id>
          
          <creation_ts>2021-01-02 03:30:41 +0000</creation_ts>
          <short_desc>uefi-sct: Incorrect test BBTestFindKeyboardLayoutsConformanceTestCheckpoint3 for FindKeyboardLayouts()</short_desc>
          <delta_ts>2021-01-04 01:52:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14692</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-02 03:30:41 +0000</bug_when>
    <thetext>BBTestFindKeyboardLayoutsConformanceTestCheckpoint3 tries to test that HIIDatabase-&gt;FindKeyboardLayouts() returns EFI_BUFFER_TOO_SMALL, if KeyGuidBufferLength is too small to encompass all keyboard layout GUIDs.

This relates to check 5.18.4.8.3 of &quot;Self Certification Test (SCT) IICase Specification, 2017&quot;.

The following actions are taken in sequence:

* create a new package list
* call FindKeyboardLayouts() with space for one GUID, i.e. 16 bytes
* delete package list

The number of package list has no influence on the number of keyboard layouts. So the first and last step are superfluous.

Assuming that a compliant implementation has at least one keyboard layout it is sufficient to call FindKeyboardLayouts() with *KeyGuidBufferLength = 15 to check the conformance.

Another approach would be to install an additional keyboard layout.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14693</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-02 06:44:00 +0000</bug_when>
    <thetext>BBTestFindKeyboardLayoutsFunctionTestCheckpoint1() also creates a package list that is not related to the test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14695</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-04 01:52:31 +0000</bug_when>
    <thetext>The installed package list mPackageList1 contains two keyboard layout defined in uefi-sct/SctPkg/TestCase/UEFI/EFI/BootServices/ImageServices/BlackBoxTest/HiiImagePackageList.c.

So nothing wrong here.

Closing the ticket. Sorry for the noise.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3024</bug_id>
          
          <creation_ts>2020-10-26 08:47:17 +0000</creation_ts>
          <short_desc>AtaAtapiPassThru polls D2H register type instead of checking IS</short_desc>
          <delta_ts>2020-11-10 22:11:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mateusz Albecki">mateusz.albecki</reporter>
          <assigned_to name="Mateusz Albecki">mateusz.albecki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14091</commentid>
    <comment_count>0</comment_count>
    <who name="Mateusz Albecki">mateusz.albecki</who>
    <bug_when>2020-10-26 08:47:17 +0000</bug_when>
    <thetext>When AtaAtapiPassThru driver waits for ATA command completion in Ahci mode it checks if the D2H register type is set. This will fail to detect scenario when there was a problem on the SATA link which caused the D2H FIS to never arrive to the controller which will result in needlessly long wait. Waiting for D2H register type set is also not sanctioned by AHCI spec which doesn&apos;t guarantee that command is completed if type has been updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14114</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:44:22 +0000</bug_when>
    <thetext>Alecki: please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14210</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-11-03 20:59:06 +0000</bug_when>
    <thetext>V1 patch sent at:
https://edk2.groups.io/g/devel/message/66923</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14248</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-11-05 21:57:35 +0000</bug_when>
    <thetext>V2 patch sent at: https://edk2.groups.io/g/devel/message/67034
V3 patch sent at: https://edk2.groups.io/g/devel/message/67038</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14324</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-11-10 22:11:20 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/1113
Commit - https://github.com/tianocore/edk2/commit/cc28ab7a1d7353ad7ade55d19e58e85c50d8fa4d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3523</bug_id>
          
          <creation_ts>2021-08-03 04:58:18 +0000</creation_ts>
          <short_desc>How can I change my AOL Password?</short_desc>
          <delta_ts>2021-08-03 21:28:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="woakeschris">woakeschris41</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16745</commentid>
    <comment_count>0</comment_count>
    <who name="woakeschris">woakeschris41</who>
    <bug_when>2021-08-03 04:58:18 +0000</bug_when>
    <thetext>AOL provides a highly secured mailing environment to keep the user’s account secure from hackers or spammers. Changing the password of your AOL account gives you an extra protection and a sense of satisfaction. Follow the simple step given below to Change AOL Password successfully.
1. Go to the Account security page.
2. Click on the ‘Change password’ option.
3. Enter your new password and click on the ‘Continue’ button to secure your account.
In case you find any issue while changing the password, feel free to write to us and we will get back to you.

Visit Us: https://www.limksys.com/aol-password-reset-not-working/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16750</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 21:28:03 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3906</bug_id>
          
          <creation_ts>2022-04-19 04:27:10 +0000</creation_ts>
          <short_desc>Update smbiosview type 0 with SMBIOS 3.5 fields</short_desc>
          <delta_ts>2022-05-02 23:34:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bo-ChangX Ke">bo-changx.ke</reporter>
          <assigned_to name="Bo-ChangX Ke">bo-changx.ke</assigned_to>
          <cc>bo-changx.ke</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18834</commentid>
    <comment_count>0</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-19 04:27:10 +0000</bug_when>
    <thetext>Update smbiosview type 0 with SMBIOS 3.5 fields</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18835</commentid>
    <comment_count>1</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-19 04:27:57 +0000</bug_when>
    <thetext>working on type 0 upgrade</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18872</commentid>
    <comment_count>2</comment_count>
      <attachid>980</attachid>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-04-20 02:45:39 +0000</bug_when>
    <thetext>Created attachment 980
update type 0 patch

update type 0 patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18917</commentid>
    <comment_count>3</comment_count>
    <who name="Bo-ChangX Ke">bo-changx.ke</who>
    <bug_when>2022-05-02 23:34:40 +0000</bug_when>
    <thetext>code changes are merged.

Commit ID:a85ae8d964c24d7078517e250b2b17a537cef89a
(https://github.com/tianocore/edk2/commit/a85ae8d964c24d7078517e250b2b17a537cef89a)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>980</attachid>
            <date>2022-04-20 02:45:39 +0000</date>
            <delta_ts>2022-04-20 02:45:39 +0000</delta_ts>
            <desc>update type 0 patch</desc>
            <filename>0001-ShellPkg-Update-smbiosview-type-0-with-SMBIOS-3.5-fi.patch</filename>
            <type>text/plain</type>
            <size>3103</size>
            <attacher name="Bo-ChangX Ke">bo-changx.ke</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3287</bug_id>
          
          <creation_ts>2021-03-30 17:50:53 +0000</creation_ts>
          <short_desc>Remove duplicate declaration of EDKII_CRYPTO_RSA_GET_PUBLIC_KEY_FROM_X509 in CryptoPkg/Private/Protocol/Crypto.h</short_desc>
          <delta_ts>2021-04-01 19:24:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15458</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-03-30 17:50:53 +0000</bug_when>
    <thetext>The function prototype EDKII_CRYPTO_RSA_GET_PUBLIC_KEY_FROM_X509 is 
declared twice in CryptoPkg/Private/Protocol/Crypto.h

The duplicate should be removed to improve compiler compatibility
when a duplicate declaration is seen as an warning or error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15459</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-03-30 17:51:09 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15495</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-01 19:21:11 +0000</bug_when>
    <thetext>Patch review email

https://edk2.groups.io/g/devel/message/73546</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15500</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-01 19:24:52 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/8c8922988544d31e8c87dd595f209828edcee962

GitHub PR:

https://github.com/tianocore/edk2/pull/1531</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3656</bug_id>
          
          <creation_ts>2021-09-27 04:40:43 +0000</creation_ts>
          <short_desc>Can I load cash app card at Walgreens? Follow relevant tips:</short_desc>
          <delta_ts>2021-09-28 01:17:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>CoffelakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="tony123">tonystark797123</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17384</commentid>
    <comment_count>0</comment_count>
    <who name="tony123">tonystark797123</who>
    <bug_when>2021-09-27 04:40:43 +0000</bug_when>
    <thetext>Cash app customers may opt to follow the relevant tips if they are thinking of Can I load cash app card at Walgreens. The use of a cash card is the easiest way to pay after completion of the shopping. This is a vital facet to keep on taking the benefits of the cash app account but when it comes to Walgreens, they need to find the actual tactics to avoid the problems.
https://www.contact-customerservice.co/blog/how-to-add-money-to-cash-app-card-at-walgreens/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17387</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-28 01:17:27 +0000</bug_when>
    <thetext>invalid issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3540</bug_id>
          
          <creation_ts>2021-08-09 09:45:28 +0000</creation_ts>
          <short_desc>IntelSiliconPkg: Add NULL instance for SmmAccessLib</short_desc>
          <delta_ts>2021-10-01 21:37:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16836</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-09 09:45:28 +0000</bug_when>
    <thetext>It would be useful to have a NULL instance of SmmAccessLib for builds that do not need to link an actual instance of the library.

The only instance currently provided in  IntelSiliconPkg is PeiSmmAccessLib:
https://github.com/tianocore/edk2-platforms/blob/master/Silicon/Intel/IntelSiliconPkg/Feature/SmmAccess/Library/PeiSmmAccessLib/PeiSmmAccessLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16837</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-09 10:17:01 +0000</bug_when>
    <thetext>V1 patch on mailing list: https://edk2.groups.io/g/devel/message/78961</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17220</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-08 20:42:22 +0000</bug_when>
    <thetext>Still working with maintainer to understand if this will be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17433</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-10-01 21:37:13 +0000</bug_when>
    <thetext>Maintainer does not want to have a NULL lib. I will close this BZ.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3437</bug_id>
          
          <creation_ts>2021-06-05 06:39:48 +0000</creation_ts>
          <short_desc>To Know About why Windows 10 Require an HP Support Assistant?</short_desc>
          <delta_ts>2021-06-07 11:36:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Reference Implementation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="peter butler">peterbutler.797</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Distribution Packaging Specificatio</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16272</commentid>
    <comment_count>0</comment_count>
    <who name="peter butler">peterbutler.797</who>
    <bug_when>2021-06-05 06:39:48 +0000</bug_when>
    <thetext>Honestly, you don&apos;t need an HP Support Assistant to fight the Windows on which you install drivers and other settings on your computer. HP has the worst experience installing malware on their new computer, with most users uninstalling all HP utilities because they will never use them Although you need to visit our website for more details.https://www.amiytech.com/hp-support-assistant/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16285</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-07 11:36:21 +0000</bug_when>
    <thetext>Invalid</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3930</bug_id>
          
          <creation_ts>2022-05-17 23:31:24 +0000</creation_ts>
          <short_desc>[edk2-stable202205] QEMU is hang when SMM is enabled</short_desc>
          <delta_ts>2022-05-31 21:45:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="mxu9">min.m.xu</reporter>
          <assigned_to name="mxu9">min.m.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18959</commentid>
    <comment_count>0</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2022-05-17 23:31:24 +0000</bug_when>
    <thetext>When SMM is enabled all of the tests are failing with QEMU hanging w/o output. Bisect shows it is caused by the patch of [PATCH V2 5/6] MdePkg: Probe Cc guest in BaseIoLibIntrinsicSev.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18960</commentid>
    <comment_count>1</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2022-05-17 23:35:00 +0000</bug_when>
    <thetext>CcProbeLib is designed to check the vm guest type. The OvmfPkg/CcProbeLib
reads the OvmfWorkArea (0x80B000) to get the vm guest type which is
written by each guest (SEV or TDX guest). But in SMM drivers the access
to OvmfWorkArea is illegal. PiSmmCpuDxeSmm.inf is an example. It uses
IoLib which in OvmfPkgX64 BaseIoLibIntrinsicSev.inf is included. The
IoLib probes if the working guest is td guest by calling CcProbe().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18961</commentid>
    <comment_count>2</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2022-05-17 23:37:44 +0000</bug_when>
    <thetext>Min is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18987</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 21:45:57 +0000</bug_when>
    <thetext>This has been fixed @a72d552f197b9b5cc3afdf22891b27ecf4067037</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3310</bug_id>
          
          <creation_ts>2021-04-08 17:01:04 +0000</creation_ts>
          <short_desc>VarCheckPolicyLibMmiHandler() passes uninitialized TempSize to DumpVariablePolicy()</short_desc>
          <delta_ts>2021-04-12 21:40:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Allen_Wynn@Dell.com">Allen_Wynn</reporter>
          <assigned_to name="Bret Barkelew">bret.barkelew</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15567</commentid>
    <comment_count>0</comment_count>
    <who name="Allen_Wynn@Dell.com">Allen_Wynn</who>
    <bug_when>2021-04-08 17:01:04 +0000</bug_when>
    <thetext>In file MdeModulePkg\Library\VariablePolicyLib\VariablePolicyLib.c procedure DumpVariablePolicy() function header says  the &quot;call can be made with a 0 size and it will return the size of the buffer required to hold the table.&quot;

In file MdeModulePkg\Library\VarCheckPolicyLib\VarCheckPolicyLib.c procedure VarCheckPolicyLibMmiHandler() around line 219 calls DumpVariablePolicy(NULL, &amp;TempSize).  It is attempting to get the required size of the policy buffer, and is passing in NULL as the Policy pointer.
However, TempSize is uninitialized.

In file MdeModulePkg\Library\VariablePolicyLib\VariablePolicyLib.c procedure DumpVariablePolicy() and receives &amp;Tempsize as *Size.  The code checks the parameters, and checks to see if the size passed in is greater than zero.
  // Check the parameters.
  if (Size == NULL || (*Size &gt; 0 &amp;&amp; Policy == NULL)) {
    return EFI_INVALID_PARAMETER;
  }
Since TempSize has never been set, the variable could contain anything.

I believe VarCheckPolicyLibMmiHandler() needs to set TempSize to zero before calling DumpVariablePolicy(NULL, &amp;TempSize).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15577</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-04-09 13:35:38 +0000</bug_when>
    <thetext>Good catch, Allen! I expect nothing less.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15578</commentid>
    <comment_count>2</comment_count>
      <attachid>690</attachid>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-04-09 14:23:26 +0000</bug_when>
    <thetext>Created attachment 690
Mailing List Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15619</commentid>
    <comment_count>3</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-04-12 21:40:11 +0000</bug_when>
    <thetext>Will be fixed in PR:
https://github.com/tianocore/edk2/pull/1557</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>690</attachid>
            <date>2021-04-09 14:23:26 +0000</date>
            <delta_ts>2021-04-09 14:23:26 +0000</delta_ts>
            <desc>Mailing List Patch</desc>
            <filename>0001-MdeModulePkg-Initialize-temp-variable-in-VarCheckPol.patch</filename>
            <type>application/octet-stream</type>
            <size>1400</size>
            <attacher name="Bret Barkelew">bret.barkelew</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3798</bug_id>
          
          <creation_ts>2022-01-07 21:41:15 +0000</creation_ts>
          <short_desc>Spell check caused pipeline failures</short_desc>
          <delta_ts>2022-01-07 22:49:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18106</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-07 21:41:15 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/blob/9dd14fc91c174eae87fd122c7ac70073a363527f/UnitTestFrameworkPkg/UnitTestFrameworkPkg.dec#L23 contains term &quot;cmockery&quot; unrecognized by cspell tool.

This spell check failure caused build to break when the build is triggered. This ticket is to track the work of granting exception of this word.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18107</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-07 21:43:26 +0000</bug_when>
    <thetext>Failed examples:
https://dev.azure.com/tianocore/edk2-ci/_build/results?buildId=37312&amp;view=logs&amp;j=216bd3cb-36c2-5579-221e-bd2f77088687
https://dev.azure.com/tianocore/edk2-ci/_build/results?buildId=37311&amp;view=logs&amp;j=9b8d87a5-bd93-5358-8ffa-588e312c4376</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18108</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-07 22:49:32 +0000</bug_when>
    <thetext>Merged as 14a731096d388aa20c0afa9fe5af55c998082efb.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3191</bug_id>
          
          <creation_ts>2021-01-26 22:31:01 +0000</creation_ts>
          <short_desc>Support Non-Blocking Execution in CpuCacheInfoLib</short_desc>
          <delta_ts>2021-04-28 02:21:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason">yun.lou</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14924</commentid>
    <comment_count>0</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-01-26 22:31:01 +0000</bug_when>
    <thetext>Support Non-Blocking Execution in CpuCacheInfoLib to enhance performance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14925</commentid>
    <comment_count>1</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-01-27 01:26:51 +0000</bug_when>
    <thetext>Assign to Jason Lou.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15726</commentid>
    <comment_count>2</comment_count>
      <attachid>702</attachid>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-20 01:47:32 +0000</bug_when>
    <thetext>Created attachment 702
Time required in blocking/nonblocking mode</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15727</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-20 01:55:37 +0000</bug_when>
    <thetext>The time required to run &quot;CpuCacheInfoStartupAllCPUs&quot;(invokes &quot;EFI_MP_SERVICES_PROTOCOL.StartupAllAPs&quot;) in non-blocking mode is determined by 
the shorter time period of &quot;PcdCpuApStatusCheckIntervalInMicroSeconds&quot; and &quot;PcdHpetDefaultTimerPeriod&quot;.

1) Edk2\PcAtChipsetPkg\PcAtChipsetPkg.dec
## This PCD specifies the default period of the HPET Timer in 100 ns units.
#  The default value of 100000 100 ns units is the same as 10 ms.
# @Prompt Default period of HPET timer.
gPcAtChipsetPkgTokenSpaceGuid.PcdHpetDefaultTimerPeriod|100000|UINT64|0x0000000B

2) Edk2\UefiCpuPkg\UefiCpuPkg.dec
## Specifies the periodic interval value in microseconds for the status check
#  of APs for StartupAllAPs() and StartupThisAP() executed in non-blocking
#  mode in DXE phase.
# @Prompt Periodic interval value in microseconds for AP status check in DXE.
gUefiCpuPkgTokenSpaceGuid.PcdCpuApStatusCheckIntervalInMicroSeconds|100000|UINT32|0x0000001E

I did some experiments on one server platform and collected some data, please refer to the attachment above.

To reduce the time required in non-blocking mode, we need to change the values of both PCDs, but it  will have big impact. In addition, 140us is a short 
period of time and the impact on the platform is very limited. So recommend keeping &quot;CpuCacheInfoStartupAllCPUs&quot; function running in blocking mode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15809</commentid>
    <comment_count>4</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-28 02:19:21 +0000</bug_when>
    <thetext>(In reply to Jason from comment #3)
&gt; The time required to run &quot;CpuCacheInfoStartupAllCPUs&quot;(invokes
&gt; &quot;EFI_MP_SERVICES_PROTOCOL.StartupAllAPs&quot;) in non-blocking mode is determined
&gt; by 
&gt; the shorter time period of &quot;PcdCpuApStatusCheckIntervalInMicroSeconds&quot; and
&gt; &quot;PcdHpetDefaultTimerPeriod&quot;.
&gt; 
&gt; 1) Edk2\PcAtChipsetPkg\PcAtChipsetPkg.dec
&gt; ## This PCD specifies the default period of the HPET Timer in 100 ns units.
&gt; #  The default value of 100000 100 ns units is the same as 10 ms.
&gt; # @Prompt Default period of HPET timer.
&gt; gPcAtChipsetPkgTokenSpaceGuid.
&gt; PcdHpetDefaultTimerPeriod|100000|UINT64|0x0000000B
&gt; 
&gt; 2) Edk2\UefiCpuPkg\UefiCpuPkg.dec
&gt; ## Specifies the periodic interval value in microseconds for the status check
&gt; #  of APs for StartupAllAPs() and StartupThisAP() executed in non-blocking
&gt; #  mode in DXE phase.
&gt; # @Prompt Periodic interval value in microseconds for AP status check in DXE.
&gt; gUefiCpuPkgTokenSpaceGuid.
&gt; PcdCpuApStatusCheckIntervalInMicroSeconds|100000|UINT32|0x0000001E
&gt; 
&gt; I did some experiments on one server platform and collected some data,
&gt; please refer to the attachment above.
&gt; 
&gt; To reduce the time required in non-blocking mode, we need to change the
&gt; values of both PCDs, but it  will have big impact. In addition, 140us is a
&gt; short 
&gt; period of time and the impact on the platform is very limited. So recommend
&gt; keeping &quot;CpuCacheInfoStartupAllCPUs&quot; function running in blocking mode.

Error correction:
In the 1st section, &quot;the shorter time period of&quot; should be corrected to &quot;the longer time period of&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15810</commentid>
    <comment_count>5</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-28 02:21:30 +0000</bug_when>
    <thetext>Keep &quot;CpuCacheInfoStartupAllCPUs&quot; function running in blocking mode, and do not need to change any code.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>702</attachid>
            <date>2021-04-20 01:47:32 +0000</date>
            <delta_ts>2021-04-20 01:47:32 +0000</delta_ts>
            <desc>Time required in blocking/nonblocking mode</desc>
            <filename>Table1.jpg</filename>
            <type>image/jpeg</type>
            <size>67831</size>
            <attacher name="Jason">yun.lou</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3680</bug_id>
          
          <creation_ts>2021-10-11 02:03:48 +0000</creation_ts>
          <short_desc>MdeModulePkg/Core/Dxe: Lock when iterates the gHandleList</short_desc>
          <delta_ts>2021-10-14 02:29:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="huama">hua.ma</reporter>
          <assigned_to name="huama">hua.ma</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17477</commentid>
    <comment_count>0</comment_count>
    <who name="huama">hua.ma</who>
    <bug_when>2021-10-11 02:03:48 +0000</bug_when>
    <thetext>For global linked list variable gHandleList,
there is a lock when add/remove entry from the list,
but currently there is no lock when iterates list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17478</commentid>
    <comment_count>1</comment_count>
    <who name="huama">hua.ma</who>
    <bug_when>2021-10-11 02:17:37 +0000</bug_when>
    <thetext>moving to confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17480</commentid>
    <comment_count>2</comment_count>
    <who name="huama">hua.ma</who>
    <bug_when>2021-10-11 06:55:25 +0000</bug_when>
    <thetext>patch is sent to waiting for review, thanks.

[edk2-devel] [PATCH] MdeModulePkg/Core/Dxe: Acquire a lock when iterating gHandleList</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17547</commentid>
    <comment_count>3</comment_count>
    <who name="huama">hua.ma</who>
    <bug_when>2021-10-14 02:29:41 +0000</bug_when>
    <thetext>code is reviewed, and PR is merged,
commit id: a7fcab7aa3de338c02e61fd891610b1ec926e6c8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3080</bug_id>
          
          <creation_ts>2020-11-19 10:02:06 +0000</creation_ts>
          <short_desc>bcfg: invalid argument - option index</short_desc>
          <delta_ts>2021-01-05 21:47:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="ynikitenko">metst13</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>corey</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>ray.ni</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14376</commentid>
    <comment_count>0</comment_count>
    <who name="ynikitenko">metst13</who>
    <bug_when>2020-11-19 10:02:06 +0000</bug_when>
    <thetext>I use the most recent UEFI Shell from Arch Linux distribution.

I can create a boot entry in bcfg, but can&apos;t change the options for the 0th entry.

The command 

  Shell&gt; bcfg boot dump -v

shows that my first entry is 0, however, when I type 

   Shell&gt; bcfg boot -opt 0 FS1:\options.txt

it gives the error:

  bcfg: invalid argument - option index

For other entry numbers (e.g. 5) it works fine.

Please write if I shall provide other details.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14403</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-23 11:11:33 +0000</bug_when>
    <thetext>CC&apos;ing ShellPkg maintainers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14517</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 21:07:51 +0000</bug_when>
    <thetext>do you verify Shell in latest Edk2 project?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14556</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-12-10 23:01:41 +0000</bug_when>
    <thetext>The Index after &apos;-opt&apos; should be the BootXXXX number &apos;XXXX&apos;. It would change the content of BootXXXX. It is not the option number.
example:
if you want to change Boot0001:
bcfg boot -opt 0001 fs0:\changeBoot0001.bin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14561</commentid>
    <comment_count>4</comment_count>
    <who name="ynikitenko">metst13</who>
    <bug_when>2020-12-11 05:28:39 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #2)
&gt; do you verify Shell in latest Edk2 project?

Sorry, I don&apos;t understand the question and whether it was addressed to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14562</commentid>
    <comment_count>5</comment_count>
    <who name="ynikitenko">metst13</who>
    <bug_when>2020-12-11 05:31:29 +0000</bug_when>
    <thetext>(In reply to Zhichao Gao from comment #3)
&gt; The Index after &apos;-opt&apos; should be the BootXXXX number &apos;XXXX&apos;. It would change
&gt; the content of BootXXXX. It is not the option number.
&gt; example:
&gt; if you want to change Boot0001:
&gt; bcfg boot -opt 0001 fs0:\changeBoot0001.bin

1) I tried both &apos;0000&apos; and &apos;0&apos;, as well as &apos;0001&apos; and &apos;1&apos;. The results are the same (in case of 1 it works, for 0 it doesn&apos;t).
2) If there must be only one way to set the boot number, &apos;0&apos;, &apos;1&apos; and all those must be prohibited and give an error message.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14587</commentid>
    <comment_count>6</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-12-16 01:32:52 +0000</bug_when>
    <thetext>(In reply to ynikitenko from comment #5)
&gt; (In reply to Zhichao Gao from comment #3)
&gt; &gt; The Index after &apos;-opt&apos; should be the BootXXXX number &apos;XXXX&apos;. It would change
&gt; &gt; the content of BootXXXX. It is not the option number.
&gt; &gt; example:
&gt; &gt; if you want to change Boot0001:
&gt; &gt; bcfg boot -opt 0001 fs0:\changeBoot0001.bin
&gt; 
&gt; 1) I tried both &apos;0000&apos; and &apos;0&apos;, as well as &apos;0001&apos; and &apos;1&apos;. The results are
&gt; the same (in case of 1 it works, for 0 it doesn&apos;t).
&gt; 2) If there must be only one way to set the boot number, &apos;0&apos;, &apos;1&apos; and all
&gt; those must be prohibited and give an error message.

Sorry, I forgot the BootXXXX starts at 0. It is a bug for UEFI shell to parse 0. For now, the working value is 0x0.
Can you have a try on 0x0?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14627</commentid>
    <comment_count>7</comment_count>
    <who name="Corey Clayton">corey</who>
    <bug_when>2020-12-20 13:52:31 +0000</bug_when>
    <thetext>(In reply to Zhichao Gao from comment #6)
&gt; (In reply to ynikitenko from comment #5)
&gt; &gt; (In reply to Zhichao Gao from comment #3)
&gt; &gt; &gt; The Index after &apos;-opt&apos; should be the BootXXXX number &apos;XXXX&apos;. It would change
&gt; &gt; &gt; the content of BootXXXX. It is not the option number.
&gt; &gt; &gt; example:
&gt; &gt; &gt; if you want to change Boot0001:
&gt; &gt; &gt; bcfg boot -opt 0001 fs0:\changeBoot0001.bin
&gt; &gt; 
&gt; &gt; 1) I tried both &apos;0000&apos; and &apos;0&apos;, as well as &apos;0001&apos; and &apos;1&apos;. The results are
&gt; &gt; the same (in case of 1 it works, for 0 it doesn&apos;t).
&gt; &gt; 2) If there must be only one way to set the boot number, &apos;0&apos;, &apos;1&apos; and all
&gt; &gt; those must be prohibited and give an error message.
&gt; 
&gt; Sorry, I forgot the BootXXXX starts at 0. It is a bug for UEFI shell to
&gt; parse 0. For now, the working value is 0x0.
&gt; Can you have a try on 0x0?

Hi,

I have also run in to this bug. Can confirm that I am getting the same behavior as ynikitenko has described. However when using 0x0 instead of 0 I do get a different, but still unexpected result:

```
Shell&gt; bcfg boot -opt 0x0 &quot;root=/dev/nvme0n1p3 initrd=\EFI\arch\initramfs-linux.img&quot;
bcfg: Invalid argument - &apos;root=/dev/nvme0n1p3 initrd=\EFI\arch\initramfs-linux.img&apos;
```</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14630</commentid>
    <comment_count>8</comment_count>
    <who name="ynikitenko">metst13</who>
    <bug_when>2020-12-21 08:20:18 +0000</bug_when>
    <thetext>(In reply to Zhichao Gao from comment #6)
&gt; (In reply to ynikitenko from comment #5)
&gt; &gt; (In reply to Zhichao Gao from comment #3)
&gt; &gt; &gt; The Index after &apos;-opt&apos; should be the BootXXXX number &apos;XXXX&apos;. It would change
&gt; &gt; &gt; the content of BootXXXX. It is not the option number.
&gt; &gt; &gt; example:
&gt; &gt; &gt; if you want to change Boot0001:
&gt; &gt; &gt; bcfg boot -opt 0001 fs0:\changeBoot0001.bin
&gt; &gt; 
&gt; &gt; 1) I tried both &apos;0000&apos; and &apos;0&apos;, as well as &apos;0001&apos; and &apos;1&apos;. The results are
&gt; &gt; the same (in case of 1 it works, for 0 it doesn&apos;t).
&gt; &gt; 2) If there must be only one way to set the boot number, &apos;0&apos;, &apos;1&apos; and all
&gt; &gt; those must be prohibited and give an error message.
&gt; 
&gt; Sorry, I forgot the BootXXXX starts at 0. It is a bug for UEFI shell to
&gt; parse 0. For now, the working value is 0x0.
&gt; Can you have a try on 0x0?

Yes, I just tried 0x0, and it seems to work for me (it gives no error).
You say it&apos;s a bug for UEFI shell - is it a known bug, why don&apos;t we just link to that? Is this bug report in its right place, is it the original one?

@Corey Clayton: initially I solved this by moving the 0th entry to some other number, applying the options and moving it back to 0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14677</commentid>
    <comment_count>9</comment_count>
    <who name="Corey Clayton">corey</who>
    <bug_when>2020-12-28 19:39:37 +0000</bug_when>
    <thetext>(In reply to ynikitenko from comment #8)
&gt; (In reply to Zhichao Gao from comment #6)
&gt; &gt; (In reply to ynikitenko from comment #5)
&gt; &gt; &gt; (In reply to Zhichao Gao from comment #3)
&gt; &gt; &gt; &gt; The Index after &apos;-opt&apos; should be the BootXXXX number &apos;XXXX&apos;. It would change
&gt; &gt; &gt; &gt; the content of BootXXXX. It is not the option number.
&gt; &gt; &gt; &gt; example:
&gt; &gt; &gt; &gt; if you want to change Boot0001:
&gt; &gt; &gt; &gt; bcfg boot -opt 0001 fs0:\changeBoot0001.bin
&gt; &gt; &gt; 
&gt; &gt; &gt; 1) I tried both &apos;0000&apos; and &apos;0&apos;, as well as &apos;0001&apos; and &apos;1&apos;. The results are
&gt; &gt; &gt; the same (in case of 1 it works, for 0 it doesn&apos;t).
&gt; &gt; &gt; 2) If there must be only one way to set the boot number, &apos;0&apos;, &apos;1&apos; and all
&gt; &gt; &gt; those must be prohibited and give an error message.
&gt; &gt; 
&gt; &gt; Sorry, I forgot the BootXXXX starts at 0. It is a bug for UEFI shell to
&gt; &gt; parse 0. For now, the working value is 0x0.
&gt; &gt; Can you have a try on 0x0?
&gt; 
&gt; Yes, I just tried 0x0, and it seems to work for me (it gives no error).
&gt; You say it&apos;s a bug for UEFI shell - is it a known bug, why don&apos;t we just
&gt; link to that? Is this bug report in its right place, is it the original one?
&gt; 
&gt; @Corey Clayton: initially I solved this by moving the 0th entry to some
&gt; other number, applying the options and moving it back to 0.

Thanks, I was able to work around the problem by moving the entry as you suggest!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14722</commentid>
    <comment_count>10</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-05 21:47:59 +0000</bug_when>
    <thetext>So, I propose to close it without the fix.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3559</bug_id>
          
          <creation_ts>2021-08-12 01:43:29 +0000</creation_ts>
          <short_desc>Glitch in symbol prompting activate Cash App card disappointment? Get help by calling support.</short_desc>
          <delta_ts>2021-08-16 21:46:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="windi kartika">windikartika376</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Distribution Packaging Specificatio</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16891</commentid>
    <comment_count>0</comment_count>
    <who name="windi kartika">windikartika376</who>
    <bug_when>2021-08-12 01:43:29 +0000</bug_when>
    <thetext>Some of the time there can be a glitch in the symbol to activate Cash App card disappointment. In this way, you can utilize the assistance that is given in the technical support locales or you can explore to the assistance community to utilize the FAQs as arrangements. Notwithstanding that, you can likewise get help from the tech help recordings. https://www.techjaadu.com/blog/activate-cash-app-card/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16921</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:46:18 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3963</bug_id>
          
          <creation_ts>2022-06-26 22:59:48 +0000</creation_ts>
          <short_desc>UefiPayloadPkg: Align Attribute value with UPL spec</short_desc>
          <delta_ts>2022-07-05 22:15:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gua Guo">gua.guo</reporter>
          <assigned_to name="Gua Guo">gua.guo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19140</commentid>
    <comment_count>0</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2022-06-26 22:59:48 +0000</bug_when>
    <thetext>Based on UPL spec 2.12.2. Universal Payload Information Section, it defines 
item &quot;Attribute&quot; on UPLD_INFO_HEADER for Debug build should be &quot;1&quot;

Currently, Value of Item &quot;Attribute&quot; is always &quot;0&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19196</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-05 22:13:40 +0000</bug_when>
    <thetext>Gua, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19198</commentid>
    <comment_count>2</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2022-07-05 22:15:35 +0000</bug_when>
    <thetext>Change status to resolved. It&apos;s done by https://github.com/tianocore/edk2/pull/3031</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3342</bug_id>
          
          <creation_ts>2021-04-19 16:18:12 +0000</creation_ts>
          <short_desc>FmpDeviceLib interface for Driver Unload is missing.</short_desc>
          <delta_ts>2021-05-24 17:01:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="John Rahn">jrahn</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable202005</cf_release_observed>
    
    <cf_release_observed>edk2-stable202008</cf_release_observed>
    
    <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15722</commentid>
    <comment_count>0</comment_count>
    <who name="John Rahn">jrahn</who>
    <bug_when>2021-04-19 16:18:12 +0000</bug_when>
    <thetext>When implementing a FmpDeviceLib with support for the UEFI Driver Binding model, there is no interface to provide Driver Unload functionality.

The FmpDeviceLib header file does not provide the interface required to support driver unload.
The TianoCore EDK2 sample FmpDxe only support the single instance FmpDeviceLib variant for Driver Unload and directly installs the FmpDxe FmpUninstaller with the ImageHandle.
To support Driver Unload of a FmpDeviceLib supporting the UEFI Driver Binding model, the FmpDxe implementation needs to call the FmpDeviceLib for Driver Unload support and the FmpDeviceLib needs to do perform the necessary FmpUninstaller call and private data management that is required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15723</commentid>
    <comment_count>1</comment_count>
    <who name="John Rahn">jrahn</who>
    <bug_when>2021-04-19 16:22:05 +0000</bug_when>
    <thetext>I have a prototype of a fix for this with declared a function to support Driver Unload in FmpDeviceLib.h and has a patched Driver Unload path in the sample FmpDxe.c as well as a shim for FmpDeviceLibNull.c implementing the interface (EFI_UNSUPPORTED).

I am currently updating to code to include the BZ3342 reference for pending additions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15744</commentid>
    <comment_count>2</comment_count>
    <who name="John Rahn">jrahn</who>
    <bug_when>2021-04-20 18:50:46 +0000</bug_when>
    <thetext>GitHub fork with patch for review: https://github.com/jrahn-nvidia/edk2/pull/new/BZ3342_FmpDeviceLib_DriverUnload

Patch e-mail sent to devel@edk2.groups.io</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16133</commentid>
    <comment_count>3</comment_count>
    <who name="John Rahn">jrahn</who>
    <bug_when>2021-05-24 17:01:30 +0000</bug_when>
    <thetext>Based on the discussion of the patch submitted to resolve this issue, this is not a bug as the repro case to get the bug is not expected usage.

Discussion has been summarized at https://edk2.groups.io/g/devel/topic/82247522#74306

Closing this as not a bug (RESOLVED, INVALID)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3212</bug_id>
          
          <creation_ts>2021-02-05 12:52:59 +0000</creation_ts>
          <short_desc>Mismatch in Ecc check and EDK II coding standard policy</short_desc>
          <delta_ts>2021-02-28 20:27:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3206</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15024</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-02-05 12:52:59 +0000</bug_when>
    <thetext>Hello,
I am submitting a bugzilla to log the issue somewhere.

The EDK II C Coding Standards Specification states that:
&quot;Names starting with one or two underscores, such as _MACRO_GUARD_FILE_NAME_H_, must not be used. They are reserved for compiler implementation.&quot; [1]

The Ecc tool currently checks that the include guard end with a trailing underscore. Thus, the Ecc check and the EDK II specifications are not matching.

A patch [2] was submitted to address this issue.

However, a vast majority of the include guards are currently starting with 1 or 2 underscores and are thus not following the standard. Modifying the Ecc check would raise many Ecc errors in the CI. They should however not break it. Indeed, the Ecc errors should only reject a patch if it modifies a line having an Ecc error. This means that:
- the patch should not break all the CI jobs
- modifying a header file that has a bad include guard will make the CI prevent the patch from being merged
- any newly created header file will trigger the new check and ask for a correction
- any modification of a bad include guard will trigger the new check and ask for a correction

Regards,
Pierre


[1] Section 5.3.5 &quot;All include file contents must be protected by a #include guard&quot;:
https://edk2-docs.gitbook.io/edk-ii-c-coding-standards-specification/5_source_files/53_include_files

[2]: https://edk2.groups.io/g/devel/topic/80106488</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15026</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-05 13:56:12 +0000</bug_when>
    <thetext>- IN_PROGRESS because of the patch being on the list.

- Furthermore, this BZ blocks EccTracker.

- I think the EccCheck plugin in CI filters the ECC logs, and only those ECC error messages are allowed to bubble up that refer to modified *lines*, not files. This means that a patch fixing a header guard (removing the underscores), and a patch adding a new header with a leading-underscore-free guard, would be accepted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15164</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-28 20:27:46 +0000</bug_when>
    <thetext>The patch has merged @6ffbb3581ab7c25a35041bac03b760af54f852bf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3702</bug_id>
          
          <creation_ts>2021-10-20 19:23:10 +0000</creation_ts>
          <short_desc>Code First - BGRT table &quot;valid&quot; field typo</short_desc>
          <delta_ts>2021-10-28 19:02:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17593</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-20 19:23:10 +0000</bug_when>
    <thetext>In section 5.2.22 Boot Graphics Resource Table (BGRT) the description is mismatched with the description mentioned in the table. The description of BGRT says:

&quot;If the boot path is interrupted (e.g., by a key press), the valid bit within the status field should be changed to 0 to indicate to the OS that the current image is invalidated.&quot;

However there is no &quot;valid&quot; bit mentioned within the status field of the table. Instead I think it is referring to &quot;Bit [0] = Displayed&quot; and so the description of BGRT should be changed to match the description in the table, or vice-versa.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17594</commentid>
    <comment_count>1</comment_count>
      <attachid>848</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-20 19:27:25 +0000</bug_when>
    <thetext>Created attachment 848
BGRT_valid_bit_typo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17595</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-20 19:28:07 +0000</bug_when>
    <thetext>Corresponding ASWG mantis: https://mantis.uefi.org/mantis/view.php?id=2283</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17627</commentid>
    <comment_count>3</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-28 19:02:38 +0000</bug_when>
    <thetext>Approved by ASWG 10/28 meeting as-submitted without changes, as an errata for ACPI 6.4.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>848</attachid>
            <date>2021-10-20 19:27:25 +0000</date>
            <delta_ts>2021-10-20 19:27:25 +0000</delta_ts>
            <desc>BGRT_valid_bit_typo</desc>
            <filename>CodeFirst_BGRT_Valid_bit_typo.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>23557</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3101</bug_id>
          
          <creation_ts>2020-12-02 22:21:40 +0000</creation_ts>
          <short_desc>Need to update LZMA module to LZMA SDK latest version 19.00.</short_desc>
          <delta_ts>2021-01-11 00:37:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wei Liu">weix.c.liu</reporter>
          <assigned_to name="Wei Liu">weix.c.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14466</commentid>
    <comment_count>0</comment_count>
    <who name="Wei Liu">weix.c.liu</who>
    <bug_when>2020-12-02 22:21:40 +0000</bug_when>
    <thetext>Need to update LZMA module to LZMA SDK latest version 19.00.

https://www.7-zip.org/sdk.html

Thank you,
LiuWei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14474</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-03 05:44:21 +0000</bug_when>
    <thetext>Why?

We seem to be at 18.05 at the moment:

5ec5a236d1fe (&quot;BaseTools Lzma: Update LZMA SDK version to 18.05&quot;, 2018-10-09)

f0737de8d9dc (&quot;MdeModulePkg Lzma: Update LZMA SDK version to 18.05&quot;, 2018-10-09)

and according to the changelog on 7-zip.org:

- 18.06: Some speed optimiztions in LZMA/LZMA2 code.
- 19.00: Encryption strength for 7z archives was increased.

doesn&apos;t look convincing. &quot;Encryption strength for 7z archives&quot; (19.00) is irrelevant in edk2, and &quot;Some speed optimiztions&quot; (18.06) would need demonstration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14481</commentid>
    <comment_count>2</comment_count>
    <who name="Wei Liu">weix.c.liu</who>
    <bug_when>2020-12-04 03:43:57 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; Why?
&gt; 
&gt; We seem to be at 18.05 at the moment:
&gt; 
&gt; 5ec5a236d1fe (&quot;BaseTools Lzma: Update LZMA SDK version to 18.05&quot;, 2018-10-09)
&gt; 
&gt; f0737de8d9dc (&quot;MdeModulePkg Lzma: Update LZMA SDK version to 18.05&quot;,
&gt; 2018-10-09)
&gt; 
&gt; and according to the changelog on 7-zip.org:
&gt; 
&gt; - 18.06: Some speed optimiztions in LZMA/LZMA2 code.
&gt; - 19.00: Encryption strength for 7z archives was increased.
&gt; 
&gt; doesn&apos;t look convincing. &quot;Encryption strength for 7z archives&quot; (19.00) is
&gt; irrelevant in edk2, and &quot;Some speed optimiztions&quot; (18.06) would need
&gt; demonstration.

According to detailed change history, the speed for LZMA/LZMA2 compressing was increased by 3-10%, and there are minor changes in compression ratio.

Besides speed optimization, the upgrade is proposed as “1. address the memory leak in xz decoder as well as some others bugfixes (preventive maintenance although no security threats mentioned this moment); 2. reduce the impact (like api may face more changes if the lib is not updated for a long time) of upgrade across multiple versions once needed”. 

Refer https://www.7-zip.org/history.txt, https://github.com/coelckers/gzdoom/blob/master/libraries/lzma/DOC/lzma-history.txt for details.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14482</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-04 10:38:14 +0000</bug_when>
    <thetext>Thanks. I&apos;m not necessarily opposed to the upgrade, I just think the original justification was very lacking. Thanks for providing the info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14511</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 20:35:48 +0000</bug_when>
    <thetext>Wei: have you verified the latest verison LZMA in Edk2 project? Will you take this  task?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14532</commentid>
    <comment_count>5</comment_count>
    <who name="Wei Liu">weix.c.liu</who>
    <bug_when>2020-12-09 02:07:24 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #4)
&gt; Wei: have you verified the latest verison LZMA in Edk2 project? Will you
&gt; take this  task?

Liming: yes, I will take this task. And I did verification test on latest EDKII with the latest version LZMA: Build Ovmf and try boot to shell.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14533</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-09 03:38:30 +0000</bug_when>
    <thetext>Wei takes it. Do you collect the build performance in edk2 ovmf? Is there any benefit?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14534</commentid>
    <comment_count>7</comment_count>
    <who name="Wei Liu">weix.c.liu</who>
    <bug_when>2020-12-09 04:56:03 +0000</bug_when>
    <thetext>Liming: Build performance has no obviously change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14772</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-11 00:37:17 +0000</bug_when>
    <thetext>Merged https://github.com/tianocore/edk2/pull/1272</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3993</bug_id>
          
          <creation_ts>2022-07-14 14:49:38 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg/FspSecCore: Add FSP-I entry for SMM support.</short_desc>
          <delta_ts>2022-07-28 23:18:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19247</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-07-14 14:49:38 +0000</bug_when>
    <thetext>In coming FSP 2.4 spec. the FSP-I is introduced for SMM support that requires IntelFsp2Pkg update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19289</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-19 21:59:59 +0000</bug_when>
    <thetext>Chasel will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19301</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-07-19 22:19:26 +0000</bug_when>
    <thetext>patch merged:
https://github.com/tianocore/edk2/commit/48249243777882d7d89ca0b86c89e355b5f941f3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19324</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-07-22 14:14:43 +0000</bug_when>
    <thetext>One more patch merged for missing FSPI_UPD and some bug fixes.
https://github.com/tianocore/edk2/commit/5a3641bfcdcf99fd76817833488f2af8abb69383</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19339</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-07-28 12:45:12 +0000</bug_when>
    <thetext>One more patch to fix FSP_GLOBAL_DATA structure natural alignment issue and unnecessary non-backward compatible change in previous FSP_I checkin.
https://github.com/tianocore/edk2/commit/3eca64f157c340f9bbf552d89a69698a3090c080</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19340</commentid>
    <comment_count>5</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-07-28 23:18:08 +0000</bug_when>
    <thetext>Fixed GenCfgOpt bug in previous patch:
https://github.com/tianocore/edk2/commit/0d0bfcb4571caa65b7875003f38e67e2ac7e5560</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3363</bug_id>
          
          <creation_ts>2021-04-28 17:07:01 +0000</creation_ts>
          <short_desc>edk2 202102 fail to build (Illegal instruction)</short_desc>
          <delta_ts>2021-05-23 09:07:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>donoban</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>ariadne</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15815</commentid>
    <comment_count>0</comment_count>
      <attachid>708</attachid>
    <who name="">donoban</who>
    <bug_when>2021-04-28 17:07:01 +0000</bug_when>
    <thetext>Created attachment 708
build log

Hi,

trying to build edk2 version 202102 on Alpinelinux (musl based) fails:

Trim --trim-long --source-code -o /home/mps/aports/community/edk2/src/edk2-edk2-stable202102/Build/OvmfX64/RELEASE_GCC5/X64/MdePkg/Library/BaseLib/BaseLib/OUTPUT/X64/EnableDi
sableInterrupts.iii /home/mps/aports/community/edk2/src/edk2-edk2-stable202102/Build/OvmfX64/RELEASE_GCC5/X64/MdePkg/Library/BaseLib/BaseLib/OUTPUT/X64/EnableDisableInterrupt
s.ii
&quot;VfrCompile&quot; -l -n --string-db /home/mps/aports/community/edk2/src/edk2-edk2-stable202102/Build/OvmfX64/RELEASE_GCC5/X64/MdeModulePkg/Library/BootMaintenanceManagerUiLib/Boot
MaintenanceManagerUiLib/OUTPUT/BootMaintenanceManagerUiLibStrDefs.hpk --output-directory /home/mps/aports/community/edk2/src/edk2-edk2-stable202102/Build/OvmfX64/RELEASE_GCC5
/X64/MdeModulePkg/Library/BootMaintenanceManagerUiLib/BootMaintenanceManagerUiLib/DEBUG/. /home/mps/aports/community/edk2/src/edk2-edk2-stable202102/Build/OvmfX64/RELEASE_GCC
5/X64/MdeModulePkg/Library/BootMaintenanceManagerUiLib/BootMaintenanceManagerUiLib/OUTPUT/BootMaintenanceManager.i
make: *** [GNUmakefile:315: /home/mps/aports/community/edk2/src/edk2-edk2-stable202102/Build/OvmfX64/RELEASE_GCC5/X64/MdeModulePkg/Library/BootMaintenanceManagerUiLib/BootMai
ntenanceManagerUiLib/DEBUG/BootMaintenanceManager.c] Illegal instruction
make: *** Waiting for unfinished jobs....


After running build dmesg out shows next message:

traps: VfrCompile[24490] trap invalid opcode ip:5602091c59e0 sp:7ffe2836a7e0 error:0 in VfrCompile[5602091c2000+67000]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15816</commentid>
    <comment_count>1</comment_count>
    <who name="Ariadne Conill">ariadne</who>
    <bug_when>2021-04-28 17:30:50 +0000</bug_when>
    <thetext>This is likely caused by a FORTIFY violation on Alpine.  I&apos;ll dig into it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15839</commentid>
    <comment_count>2</comment_count>
    <who name="">donoban</who>
    <bug_when>2021-04-30 06:50:17 +0000</bug_when>
    <thetext>After applying patch from Arch Linux for adding brotli and fixing fortify disabling it fails now here:

make: *** No rule to make target &apos;/home/builder/aports/community/edk2/src/edk2-edk2-stable202102/Build/OvmfX64/RELEASE_GCC5/X64/OvmfPkg/VirtioScsiDxe/VirtioScsi/OUTPUT/VirtioScsiDxe.map&apos;, needed by &apos;/home/builder/aports/community/edk2/src/edk2-edk2-stable202102/Build/OvmfX64/RELEASE_GCC5/FV/Ffs/FAB5D4F4-83C0-4AAF-8480-442D11DF6CEAVirtioScsiDxe/FAB5D4F4-83C0-4AAF-8480-442D11DF6CEA.map&apos;.  Stop.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15844</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-30 12:21:34 +0000</bug_when>
    <thetext>If VfrCompile contained undefined behavior, I wouldn&apos;t be surprised. Please compile VfrCompile with conservative / permissive compiler settings.

Regarding &quot;No rule to make target...&quot; in comment 2; that&apos;s likely the consequence of an aborted build, and the build system not dealing well with an incremental build request. Such tend to pop up from time to time, IIRC. Please clean your build tree and retry. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16122</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-23 09:07:03 +0000</bug_when>
    <thetext>If the issue persists, please reopen this BZ -- and in that case, please move it from OvmfPkg to BaseTools. Thanks.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>708</attachid>
            <date>2021-04-28 17:07:01 +0000</date>
            <delta_ts>2021-04-28 17:07:01 +0000</delta_ts>
            <desc>build log</desc>
            <filename>build.log</filename>
            <type>application/octet-stream</type>
            <size>997817</size>
            <attacher>donoban</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3855</bug_id>
          
          <creation_ts>2022-03-02 08:44:27 +0000</creation_ts>
          <short_desc>Use SmmWaitForAllProcessor() form UefiCpuPkg to make Smm cpu rendezvous in TcgSmm and Tcg2Smm driver</short_desc>
          <delta_ts>2022-12-02 03:21:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="zhihao">zhihao.li</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18507</commentid>
    <comment_count>0</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-03-02 08:44:27 +0000</bug_when>
    <thetext>In UefiCpuPkg, there are a new Protocol with the new service
SmmWaitForAllProcessor(), which can be used by SMI handler
to optionally wait for other APs to complete SMM rendezvous in
relaxed AP mode.

This patch use the new service to let TcgSmm and Tcg2Smm driver work
normally in relaxed AP mode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20168</commentid>
    <comment_count>1</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-12-02 03:21:30 +0000</bug_when>
    <thetext>Invalid.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3237</bug_id>
          
          <creation_ts>2021-02-25 21:28:14 +0000</creation_ts>
          <short_desc>SMM stack offset is not correct under multi processor</short_desc>
          <delta_ts>2021-12-05 22:28:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15149</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-02-25 21:28:14 +0000</bug_when>
    <thetext>In below code, SMM stack offset is not correct.
https://github.com/tianocore/edk2/blob/master/UefiCpuPkg/PiSmmCpuDxeSmm/X64/SmmFuncsArch.c#L96
https://github.com/tianocore/edk2/blob/master/UefiCpuPkg/PiSmmCpuDxeSmm/X64/PageTbl.c#L1040
It uses &apos;CpuIndex * mSmmStackSize&apos; to count the offset.
Refer to code https://github.com/tianocore/edk2/blob/master/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.c#L873
It misses the size of Shadow Stack.
It should use &apos;CpuIndex * (mSmmStackSize + mSmmShadowStackSize)&apos;.
If &apos;mSmmShadowStackSize &gt; 0&apos; and &apos;using multi processor&apos; (CpuIndex &gt; 0), we would meet such memory access issue, system will blocked by the exception.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15150</commentid>
    <comment_count>1</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-02-25 21:29:45 +0000</bug_when>
    <thetext>I will create patch to fix the issue on below code.
https://github.com/tianocore/edk2/blob/master/UefiCpuPkg/PiSmmCpuDxeSmm/X64/SmmFuncsArch.c#L96
https://github.com/tianocore/edk2/blob/master/UefiCpuPkg/PiSmmCpuDxeSmm/X64/PageTbl.c#L1040</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15153</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-02-26 02:28:08 +0000</bug_when>
    <thetext>In function InitGdt(), SmiPFHandler() and Gen4GPageTable(), it uses
 CpuIndex * mSmmStackSize to get the SMM stack address offset for
 multi processor. It misses the SMM Shadow Stack Size. Each processor
 will use mSmmStackSize + mSmmShadowStackSize in the memory.
It should use CpuIndex * (mSmmStackSize + mSmmShadowStackSize) to get
 this SMM stack address offset. If mSmmShadowStackSize &gt; 0 and multi
 processor enabled, it will get the wrong offset value.
CET shadow stack feature will set the value of mSmmShadowStackSize.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17924</commentid>
    <comment_count>3</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-12-05 22:28:11 +0000</bug_when>
    <thetext>patch is merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3731</bug_id>
          
          <creation_ts>2021-11-11 14:29:40 +0000</creation_ts>
          <short_desc>Fix OvmfPkg Microvm builds with VS2019 NOOPT (edk2-stable202111)</short_desc>
          <delta_ts>2021-11-14 18:22:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>kraxel</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17738</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-11 14:29:40 +0000</bug_when>
    <thetext>OvmfPkg Microvm platform fails with build with VS2019 NOOPT due to
a type cast of a define value to a VOID * in the ResetSystemLib.

The proposed fix is:

OvmfPkg/Library/ResetSystemLib/ResetSystemLibMicrovm.c

static UINTN MicrovmGedBase (VOID)
 {
-  VOID *Address = (VOID*) MICROVM_GED_MMIO_BASE_REGS;
+  VOID *Address = (VOID*)(UINTN) MICROVM_GED_MMIO_BASE_REGS;

   if (EfiGoneVirtual ()) {
     EfiConvertPointer (0, &amp;Address);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17739</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-11 14:31:26 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17740</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-11 14:50:00 +0000</bug_when>
    <thetext>Target is to fix in edk2-stable202111</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17743</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-11 18:34:52 +0000</bug_when>
    <thetext>Patch email review:

https://edk2.groups.io/g/devel/message/83658</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17748</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-14 18:22:34 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/e1e7306b54147e65cb7347b060e94f336d4a82d2

PR:

https://github.com/tianocore/edk2/pull/2198</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3609</bug_id>
          
          <creation_ts>2021-09-06 09:13:37 +0000</creation_ts>
          <short_desc>How to delete a cash app account without any hassles?</short_desc>
          <delta_ts>2021-09-06 21:25:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="windi kartika">windikartika376</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          <cf_documents>EDK II C Coding Standards</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17176</commentid>
    <comment_count>0</comment_count>
    <who name="windi kartika">windikartika376</who>
    <bug_when>2021-09-06 09:13:37 +0000</bug_when>
    <thetext>Hassles are the usual thing when it comes to implementing the technical process. The same applies to How to delete cash app account. Cash app customers willing to delete their cash app account will need to opt for the certain steps that have been created particularly for removal. However, users will require staying focused on steps, at last, to end up with the fi8nal deletion of the cash app account at last.
 
https://www.techjaadu.com/blog/deactivate-cash-app-account/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17178</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-06 21:25:13 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3882</bug_id>
          
          <creation_ts>2022-03-23 01:55:30 +0000</creation_ts>
          <short_desc>Add dependency of VariableSmm driver to make it work normally</short_desc>
          <delta_ts>2022-12-02 03:24:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="zhihao">zhihao.li</reporter>
          <assigned_to name="zhihao">zhihao.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18700</commentid>
    <comment_count>0</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-03-23 01:55:30 +0000</bug_when>
    <thetext>UefiCpuPkg define a new Protocol with the new services
SmmWaitForAllProcessor(), which can be used by SMI handler
to optionally wait for other APs to complete SMM rendezvous in
relaxed AP mode.

VariableSmm driver need use SmmCpuRendezvousLib, So add
SmmCpuRendezvousLib dependency in UefiPayloadPkg which use
VariableSmm driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18859</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-19 21:57:47 +0000</bug_when>
    <thetext>Zhihao is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20171</commentid>
    <comment_count>2</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-12-02 03:24:26 +0000</bug_when>
    <thetext>Fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3749</bug_id>
          
          <creation_ts>2021-11-23 16:10:08 +0000</creation_ts>
          <short_desc>Update Package YAML files to ignore specific ECC files/errors</short_desc>
          <delta_ts>2022-01-14 20:18:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>pierre.gondois</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
    
    <cf_package>ArmPlatformPkg</cf_package>
    
    <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>CryptoPkg</cf_package>
    
    <cf_package>EmulatorPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
    
    <cf_package>StandaloneMmPkg</cf_package>
    
    <cf_package>UefiPayloadPkg</cf_package>
    
    <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17806</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-23 16:10:08 +0000</bug_when>
    <thetext>A number of packages have ECC issues that were present before
the ECC check was enabled, or there have been no patch reviews 
against the lines of code in those packages that have ECC errors.

The work on the uncrustify source formatting tool is modifying
many lines of source files in packages that do have ECC issues.
These ECC issues do need to be reviewed and fixed, but that
work can be deferred till after the uncrustify source format
changes are made.

The temporary fix is to amend the EccCheck section of the 
Package YAML files with a set of IgnoreErrors and IgnoreFiles
statements to remove errors reported by the ECC tool.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17807</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-23 16:10:50 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17836</commentid>
    <comment_count>2</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-11-25 06:12:45 +0000</bug_when>
    <thetext>Hello Michael,
I don&apos;t understand why we need to exclude some files/folders from the EccCheck to enable Uncrustify. Aren&apos;t they two different tools ? How do the files/folders are selected ?
From what I saw, even with the files/folders that are newly excluded, there are still EccError that are triggered.

For instance, in the ArmPlatformPkg:
- Error 9003
- ArmPlatformPkg/Drivers/NorFlashDxe/NorFlashBlockIoDxe.c
 -The first line of text in a comment block should be a brief description of the element being documented and the brief description must end with a period.
- line 109
is an error that remains. (remainder: ArmPlatformPkg/Drivers/PL061GpioDxe/PL061Gpio.c is to be excluded from the EccCheck, but not ArmPlatformPkg/Drivers/NorFlashDxe/NorFlashBlockIoDxe.c).

Regards,
Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17837</commentid>
    <comment_count>3</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-11-25 06:44:42 +0000</bug_when>
    <thetext>I think I now understand why some files are excluded, but shouldn&apos;t them be re-included once the Uncrustify modifications have been merged ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18154</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:14:35 +0000</bug_when>
    <thetext>Each package owner need to review their YAML files and work on
address all ECC issues.  We can open new issues for each package.
The goal should be no ECC exceptions in any package and the YAML
files have no ECC exceptions listed and from that point forward
any proposed code change that has an ECC issues will be caught by
EDK II CI and require submitter to resolve before it can be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18155</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:18:01 +0000</bug_when>
    <thetext>Merged in PR:
    https://github.com/tianocore/edk2/pull/2218

Commit range:
    https://github.com/tianocore/edk2/pull/2218/commits/fc85cbd7ebeb4756d242ca4720507b8c7b386c24
    ...
    https://github.com/tianocore/edk2/pull/2218/commits/49ad9df29563627cae27c7bcb673f5a34af51d1e

Code Review Email:
https://edk2.groups.io/g/devel/message/83983</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3149</bug_id>
          
          <creation_ts>2021-01-04 02:59:30 +0000</creation_ts>
          <short_desc>Exception handle for high 32bit of Pmem64 bit BAR being zero</short_desc>
          <delta_ts>2021-01-17 20:44:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chunde Zhong">zarcd.zhong</reporter>
          <assigned_to name="Chunde Zhong">zarcd.zhong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>zarcd.zhong</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14696</commentid>
    <comment_count>0</comment_count>
    <who name="Chunde Zhong">zarcd.zhong</who>
    <bug_when>2021-01-04 02:59:30 +0000</bug_when>
    <thetext>We found once we configured a specific U.2 SSD, system will hang during booting into OS. The last host console output message as below.
[   10.575062] ipmi_si dmi-ipmi-si.0: Cannot check clearing the rcv irq: -22
[   10.959015] ProdID: no data region found.
[   11.008153] zswap: default zpool zbud not available
[   11.013065] zswap: pool creation failed

After checked, we found this U.2 SSD have abnormal VFBAR Alignment/Length setting as below.
PciBus: Discovered PCI @ [38|00|00]
 ARI: forwarding enabled for PPB[37:01:00]
 ARI: CapOffset = 0x168
 SR-IOV: SupportedPageSize = 0x553; SystemPageSize = 0x1; FirstVFOffset = 0x1;
         InitialVFs = 0x20; ReservedBusNum = 0x1; CapOffset = 0x1E8
   BAR[0]: Type =  Mem64; Alignment = 0x7FFF;Length = 0x8000;Offset = 0x10
   BAR[3]: Type = PMem64; Alignment = 0x3FFFFF;Length = 0x400000;Offset = 0x20
 VFBAR[0]: Type =  Mem64; Alignment = 0x7FFF;Length = 0x100000;Offset = 0x20C
 VFBAR[3]: Type = PMem64; Alignment = 0xFFFFFFFFFFFFFFFF;Length = 0x0;Offset = 0x21C

The root cause is this SSD VFBAR[4] requested a 64-bit memory resource but both VFBAR[4] and VFBAR[5] didn&apos;t request any size. We write all 1 value in VFBAR and read value back as below.
VFBAR[4] = 0000000c
VFBAR[5] = 00000000

For this case in function PciIovParseVfBar(), code flow won&apos;t clear Alignment/Length and causing this abnormal Alignment/Length. We try a workaround to clear Alignment/Length for this case and can boot into OS successfully. Customer will help push workaround to Intel, please help review and merge, thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14697</commentid>
    <comment_count>1</comment_count>
    <who name="Chunde Zhong">zarcd.zhong</who>
    <bug_when>2021-01-04 03:03:45 +0000</bug_when>
    <thetext>EDKII coding issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14715</commentid>
    <comment_count>2</comment_count>
    <who name="Chunde Zhong">zarcd.zhong</who>
    <bug_when>2021-01-05 20:40:19 +0000</bug_when>
    <thetext>Code patch is sent to EDKII maillist.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14819</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-01-17 20:24:08 +0000</bug_when>
    <thetext>V1 patch sent at:
https://edk2.groups.io/g/devel/message/70427</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14820</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-01-17 20:44:52 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/1360
Commit - https://github.com/tianocore/edk2/commit/a7ef2a03b96c464c776a139c104471fb2b84e39b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3629</bug_id>
          
          <creation_ts>2021-09-15 00:37:37 +0000</creation_ts>
          <short_desc>Mm Communication Ppi is not defined in MdePkg</short_desc>
          <delta_ts>2021-11-26 10:02:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17274</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-09-15 00:37:37 +0000</bug_when>
    <thetext>In PI spec, EFI_PEI_MM_COMMUNICATION_PPI is defined in section 6.5 MM Communication PPI. But there is no such PPI interface defined in https://github.com/tianocore/edk2/tree/master/MdePkg/Include/Ppi. (The only available one is defined here: https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Include/Ppi/SmmCommunication.h)

Since this is defined through specification, this ticket intends to track the progress of adding the definition into edkII repo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17279</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-09-15 20:15:43 +0000</bug_when>
    <thetext>Patch sent for review at: https://edk2.groups.io/g/devel/message/80737</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17282</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-15 21:27:13 +0000</bug_when>
    <thetext>Kun is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17303</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-09-17 16:53:37 +0000</bug_when>
    <thetext>Patch cover letter is reviewed here: https://edk2.groups.io/g/devel/message/80837.

Should we still expect all patches to be reviewed individually? If not, the patch series are pending merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17847</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:02:39 +0000</bug_when>
    <thetext>This has been fixed b0f1b1c5fd9b44809058072d18051483aa3e72b1..8b4bb94f6484f84d48a3dc77fa31e954fc75c4b5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3525</bug_id>
          
          <creation_ts>2021-08-04 01:34:33 +0000</creation_ts>
          <short_desc>FSP NotifyPhase APIs caused 100ms delay in chrome platform.</short_desc>
          <delta_ts>2021-08-12 22:02:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Greg">gregx.yeh</reporter>
          <assigned_to name="Greg">gregx.yeh</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16771</commentid>
    <comment_count>0</comment_count>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2021-08-04 01:34:33 +0000</bug_when>
    <thetext>After PciSegmentLib using Dynamic PCD for Pcie base address such
long delay found in FSP. The root cause is some of the PCD service
PPIs not shadowed to memory and flash cache may have been disabled
in NotifyPhase stage. Solution is to shadow all PCD service PPIs
to memory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16897</commentid>
    <comment_count>1</comment_count>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2021-08-12 22:02:26 +0000</bug_when>
    <thetext> Commit ID: 6fdd1c13a734609aff68d37e606e995d673d9aeb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3416</bug_id>
          
          <creation_ts>2021-05-24 11:34:41 +0000</creation_ts>
          <short_desc>Update link to latest DBG2 and SPCR specs on uefi.org/acpi</short_desc>
          <delta_ts>2021-08-17 11:57:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16131</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-24 11:34:41 +0000</bug_when>
    <thetext>The uefi.org/acpi has a stale link to DBG2: 

Debug Port Table 2	DBG2	http://msdn.microsoft.com/en-us/library/windows/hardware/dn639131(v=vs.85).aspx

This should be updated to the following latest version of the spec:

https://docs.microsoft.com/en-us/windows-hardware/drivers/bringup/acpi-debug-port-table</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16132</commentid>
    <comment_count>1</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-24 11:40:30 +0000</bug_when>
    <thetext>Similarly, the SPCR link is also old. However, it is being auto-redirected by Microsoft to the newer document. Could we also fix the uefi.org/acpi link to point to the newer spec?

Current link on uefi.org/acpi:

Serial Port Console Redirection Table	SPCR	http://msdn.microsoft.com/en-us/library/windows/hardware/dn639132(v=vs.85).aspx

New (correct) link: https://docs.microsoft.com/en-us/windows-hardware/drivers/serports/serial-port-console-redirection-table</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16139</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-25 21:38:51 +0000</bug_when>
    <thetext>suggest to contact uefi org people to update uefi.org.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16946</commentid>
    <comment_count>3</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-17 11:57:52 +0000</bug_when>
    <thetext>Will work with UEFI Forum to fix on uefi.org/acpi</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3288</bug_id>
          
          <creation_ts>2021-03-30 19:32:45 +0000</creation_ts>
          <short_desc>Simplify CryptoPkg.dsc by using UnitTestFrameworkPkgTarget.dsc.inc</short_desc>
          <delta_ts>2021-04-02 21:54:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15461</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-03-30 19:32:45 +0000</bug_when>
    <thetext>The CryptoPkg.dsc file builds target based unit tests using
TestBaseCryptLibShell.inf component.  This INF is using module specific 
&lt;LibraryClasses&gt; that are identical to the library class mappings provided by 
UnitTestFrameworkPkg/UnitTestFrameworkPkgTarget.dsc.inc.

Simplify CryptoPkg.dsc by removing the module specific &lt;LibraryClasses&gt;
statements and including UnitTestFrameworkPkg/UnitTestFrameworkPkgTarget.dsc.inc 
instead.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15462</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-03-30 19:33:02 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15511</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-02 21:45:25 +0000</bug_when>
    <thetext>Patch review email

https://edk2.groups.io/g/devel/message/73552</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15512</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-02 21:54:59 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/f95cdd316c3d56e8f76b5044be54b9645e1dc60f

GitHub PR:

https://github.com/tianocore/edk2/pull/1532</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3775</bug_id>
          
          <creation_ts>2021-12-16 00:50:45 +0000</creation_ts>
          <short_desc>Retry up to 5 times while sending UFS DME request to fix timing problem</short_desc>
          <delta_ts>2022-01-03 21:29:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>vincentx.ke</reporter>
          <assigned_to>vincentx.ke</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>ian.chiu</cc>
    
    <cc>vincentx.ke</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18005</commentid>
    <comment_count>0</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-16 00:50:45 +0000</bug_when>
    <thetext>Refactoring UFS DME request sending function.
Sending UFS DME request up to 5 times to fix timing issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18006</commentid>
    <comment_count>1</comment_count>
      <attachid>905</attachid>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-16 00:56:04 +0000</bug_when>
    <thetext>Created attachment 905
[PATCH] MdeModulePkg: Retry up to 5 times while sending UFS DME request to fix timing problem

Refactoring UFS DME request sending function.
Sending UFS DME request up to 5 times to fix timing issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18008</commentid>
    <comment_count>2</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-16 01:32:44 +0000</bug_when>
    <thetext>V1 patch sent at: https://edk2.groups.io/g/devel/message/84960</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18018</commentid>
    <comment_count>3</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-17 05:07:57 +0000</bug_when>
    <thetext>V2 patch sent at: https://edk2.groups.io/g/devel/message/85053</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18041</commentid>
    <comment_count>4</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-22 01:55:00 +0000</bug_when>
    <thetext>PATCH v5 sent at: https://edk2.groups.io/g/devel/message/85158</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18069</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-01-03 21:28:56 +0000</bug_when>
    <thetext>V7 patch sent at: https://edk2.groups.io/g/devel/message/85195</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18070</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-01-03 21:29:29 +0000</bug_when>
    <thetext>Resolved by Vincent via:
PR - https://github.com/tianocore/edk2/pull/2378
Commit - https://github.com/tianocore/edk2/commit/45920941d9ae543d9c5b4881622fe0ed769673b6</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>905</attachid>
            <date>2021-12-16 00:56:04 +0000</date>
            <delta_ts>2021-12-16 00:56:04 +0000</delta_ts>
            <desc>[PATCH] MdeModulePkg: Retry up to 5 times while sending UFS DME request to fix timing problem</desc>
            <filename>0001-MdeModulePkg-Retry-up-to-5-times-while-sending-UFS-D.patch</filename>
            <type>text/plain</type>
            <size>15286</size>
            <attacher>vincentx.ke</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3171</bug_id>
          
          <creation_ts>2021-01-17 20:49:51 +0000</creation_ts>
          <short_desc>Add silicon initialization code for Intel Tiger Lake products</short_desc>
          <delta_ts>2021-02-10 21:31:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>heng.luo</cc>
    
    <cc>rangasai.v.chaganty</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14821</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-01-17 20:49:51 +0000</bug_when>
    <thetext>To implement open source platform code for Intel Tiger Lake products, a silicon support package is needed so that it may be used in conjunction with the Intel FSP in TigerLakeFspBinPkg (https://github.com/intel/FSP/tree/master/TigerLakeFspBinPkg) similar to the silicon support provided for Intel Kaby Lake generation products by KabylakeSiliconPkg (https://github.com/tianocore/edk2-platforms/tree/master/Silicon/Intel/KabylakeSiliconPkg).

The name of this package should be TigerlakeSiliconPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14831</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-01-18 03:05:39 +0000</bug_when>
    <thetext>I am working on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15051</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-02-10 21:31:58 +0000</bug_when>
    <thetext>40 patches have been merged:
ee33d4f049 Maintainers.txt: Add TigerlakeSiliconPkg maintainers
2cfc88ca26 TigerlakeSiliconPkg: Add package DSC files
eaf23d836d TigerlakeSiliconPkg/Fru: Add Fru DSC files
3835a3c198 TigerlakeSiliconPkg/SystemAgent: Add SystemAgent modules
06d807b49d TigerlakeSiliconPkg/Pch: Add Pch modules
5b7413649e TigerlakeSiliconPkg/Fru/TglCpu: Add CpuPcieRp and Vtd library instances
8ddd42b301 TigerlakeSiliconPkg/SystemAgent: Add Acpi Tables and library instances
2380f896fa TigerlakeSiliconPkg/Pch: Add Pch private library instances
32b988e5cc TigerlakeSiliconPkg/Pch: Add Pch common library instances
78869ee4e1 TigerlakeSiliconPkg/Library: Add package common library instances
e9b9b8fa2b TigerlakeSiliconPkg/IpBlock: Add Vtd component
3828c8aa25 TigerlakeSiliconPkg/IpBlock: Add Spi component
ab68417375 TigerlakeSiliconPkg/IpBlock: Add Smbus component
5915409c7e TigerlakeSiliconPkg/IpBlock: Add SerialIo component
58ec98c560 TigerlakeSiliconPkg/IpBlock: Add Sata component
6c20f29061 TigerlakeSiliconPkg/IpBlock: Add Psf component
cff346f352 TigerlakeSiliconPkg/IpBlock: Add Pmc component
c90940866d TigerlakeSiliconPkg/IpBlock: Add PcieRp component
c67f99663e TigerlakeSiliconPkg/IpBlock: Add PchDmi component
074e9db1ba TigerlakeSiliconPkg/IpBlock: Add P2sb component
5a8441a1fd TigerlakeSiliconPkg/IpBlock: Add HostBridge component
2b97c235dd TigerlakeSiliconPkg/IpBlock: Add Hda component
e8ebcad0b4 TigerlakeSiliconPkg/IpBlock: Add Graphics component
72457e481c TigerlakeSiliconPkg/IpBlock: Add Gpio component
07aa563676 TigerlakeSiliconPkg/IpBlock: Add Gbe component
2cf5e4b358 TigerlakeSiliconPkg/IpBlock: Add Espi component
0c5efb495f TigerlakeSiliconPkg/IpBlock: Add CpuPcieRp component
f1dc9fd5a1 TigerlakeSiliconPkg/IpBlock: Add Cnvi component
0bfb93f9f9 TigerlakeSiliconPkg/Fru: Add TglPch/IncludePrivate headers
9013990b1e TigerlakeSiliconPkg/Fru: Add TglPch/Include headers
c28b71da98 TigerlakeSiliconPkg/Fru: Add TglCpu/IncludePrivate headers
93411144c7 TigerlakeSiliconPkg/Fru: Add TglCpu/Include headers
ad37ecc1bd TigerlakeSiliconPkg/SystemAgent: Add IncludePrivate headers
c0f2ee5385 TigerlakeSiliconPkg/SystemAgent: Add include headers
00b148a8b9 TigerlakeSiliconPkg/Pch: Add IncludePrivate headers
572d9509e3 TigerlakeSiliconPkg/Pch: Add include headers
b39b293c8f TigerlakeSiliconPkg/Cpu: Add Include headers
d1ab062878 TigerlakeSiliconPkg/Include: Add Pins, Register and other include headers
1643b5d221 TigerlakeSiliconPkg/Include: Add Library, PPI and Protocol include headers
d55602c891 TigerlakeSiliconPkg: Add package and Include/ConfigBlock headers</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3657</bug_id>
          
          <creation_ts>2021-09-27 04:55:18 +0000</creation_ts>
          <short_desc>Steps to know about transfer Money from Venmo to cash app</short_desc>
          <delta_ts>2021-09-28 11:25:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="tony123">tonystark797123</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17385</commentid>
    <comment_count>0</comment_count>
    <who name="tony123">tonystark797123</who>
    <bug_when>2021-09-27 04:55:18 +0000</bug_when>
    <thetext>Go to the menu section from the cash app’s home screen
Go to the Manage Balance option and tap on the transfer money
Enter the amount which you want to transfer and select the money transfer speed
Click on the Transfer option to review the details
Click on the Balance once login into the Cash App Account
Tap on the Add Cash and enter the money
Click on the Add option to transfer Money from Venmo to cash app. 
https://www.contactcustomer-service.co/blog/transfer-money-from-venmo-to-cash-app/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17395</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-09-28 11:25:14 +0000</bug_when>
    <thetext>spam</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3052</bug_id>
          
          <creation_ts>2020-11-04 23:22:51 +0000</creation_ts>
          <short_desc>BaseTools: Incremental build issues collections by Nov 2020</short_desc>
          <delta_ts>2020-11-10 01:09:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>2880</dependson>
    
    <dependson>2881</dependson>
    
    <dependson>2882</dependson>
    
    <dependson>2965</dependson>
    
    <dependson>2972</dependson>
    
    <dependson>2978</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14232</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-04 23:22:51 +0000</bug_when>
    <thetext>Bugzilla 2880: When doing the Incremental build, the directory macros extended to an absolute path in output Makefile, which is inconsistent with the output of Clean build.

Bugzilla 2881: When doing the Incremental build, GenFfs command macro &quot;-n&quot; in Makefile has different values with Clean build results.

Bugzilla 2882: In some cases, the source code files name has been changed. When doing the incremental build at this time, the .deps file which records the source code file will not be overridden, and that triggers the build error.

Bugzilla 2965: When using incremental build to delete the &quot;SECTION FV_IMAGE = XXX&quot; of the Fv section in the FDF file, the deleted content &quot;SECTION FV_IMAGE = XXX&quot; still be kept in Guid.xref.

Bugzilla 2978: When using incremental build to add a new Pcd in INF file [Pcd] section, the PCD_TOKEN value in AutoGen.c &amp; AutoGen.h file will not be changed with the incremental build operation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14233</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-04 23:26:38 +0000</bug_when>
    <thetext>Bob takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14285</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-09 19:56:16 +0000</bug_when>
    <thetext>in progress doing
Bug 2972 - Incremental build issue for included ASI file&apos;s deletion</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14290</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-10 01:09:20 +0000</bug_when>
    <thetext>All dependent bugs were fixed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3543</bug_id>
          
          <creation_ts>2021-08-09 19:21:48 +0000</creation_ts>
          <short_desc>MinPlatformPkg: Allow DUTY_WIDTH and DUTY_OFFSET values in FADT to be customizable</short_desc>
          <delta_ts>2022-06-09 20:52:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16843</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-09 19:21:48 +0000</bug_when>
    <thetext>The duty width and duty offset values in the FADT produced by MinPlatformPkg are currently hardcoded to 0x0 and 0x1 respectively in: 

https://github.com/tianocore/edk2-platforms/blob/master/Platform/Intel/MinPlatformPkg/Acpi/AcpiTables/Fadt/Fadt.c

#define EFI_ACPI_DUTY_OFFSET  0x01
#define EFI_ACPI_DUTY_WIDTH   0x00

These values need to be customized by platforms (board packages) to non-default values.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16844</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-09 19:22:32 +0000</bug_when>
    <thetext>Initial suggestion is to declare these values as a FixedAtBuild PCD in MinPlatformPkg.dec with defaults set to the current values.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16845</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-09 19:22:52 +0000</bug_when>
    <thetext>I&apos;ll take ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17218</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-08 20:31:46 +0000</bug_when>
    <thetext>Waiting for other patches that have been sitting for weeks to get merged and then I&apos;ll send this one</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18804</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-11 16:59:36 +0000</bug_when>
    <thetext>V1 patch series: https://edk2.groups.io/g/devel/message/88721</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18970</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-05-20 09:18:40 +0000</bug_when>
    <thetext>Sent around 6 reminder emails to the merge the patch. Latest is here - https://edk2.groups.io/g/devel/message/89796</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19059</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-06-09 20:52:48 +0000</bug_when>
    <thetext>Series merged:

https://github.com/tianocore/edk2-platforms/commit/3018b1f31f9906976fe86b7e73914bbcf6de795b

https://github.com/tianocore/edk2-platforms/commit/6ebb2da1aee72c5d9a7c0a3e0a0f0f18ce861fa1

https://github.com/tianocore/edk2-platforms/commit/61af47078eb9e206766f99554b894a6712d41569</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3438</bug_id>
          
          <creation_ts>2021-06-05 06:50:14 +0000</creation_ts>
          <short_desc>Everything know How to reset support for Epson printer support ?</short_desc>
          <delta_ts>2021-06-07 11:36:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Reference Implementation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="peter butler">peterbutler.797</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16273</commentid>
    <comment_count>0</comment_count>
    <who name="peter butler">peterbutler.797</who>
    <bug_when>2021-06-05 06:50:14 +0000</bug_when>
    <thetext>To reset Epson printer support to factory defaults using this method, follow these steps: Turn off the printer using the power button. Use the pin to push, however. Consequently, hold the reset button on the back of the printer. Although,Turn on the printer, but press and hold the reset button for at least 5 seconds. Release the restart button after the warning page has been printed and you should visit the website.https://www.epsonprintersupportpro.com/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16286</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-07 11:36:43 +0000</bug_when>
    <thetext>Invalid</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3931</bug_id>
          
          <creation_ts>2022-05-18 00:26:54 +0000</creation_ts>
          <short_desc>Remove &quot;assert&quot; from SmmCpuRendevousLibNull.c</short_desc>
          <delta_ts>2022-12-02 03:24:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="zhihao">zhihao.li</reporter>
          <assigned_to name="zhihao">zhihao.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18962</commentid>
    <comment_count>0</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-05-18 00:26:54 +0000</bug_when>
    <thetext>Some drivers will break down when they use SmmWaitForAllProcessor() which from SmmCpuRendezvousLibNull.c. Removing the code &quot;ASSERT(False)&quot; will make consumer work normally.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18986</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 21:44:47 +0000</bug_when>
    <thetext>Zhihao takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20172</commentid>
    <comment_count>2</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-12-02 03:24:44 +0000</bug_when>
    <thetext>Fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3312</bug_id>
          
          <creation_ts>2021-04-09 17:32:38 +0000</creation_ts>
          <short_desc>Support MAKE_PATH in DSC [BuildOptions] and split MAKE_FLAGS in DSC [BuildOptions]</short_desc>
          <delta_ts>2021-04-14 12:29:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15579</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-09 17:32:38 +0000</bug_when>
    <thetext>When MAKE_FLAGS are specified in the [BuildOptions] section of a 
DSC file, the options are not being split up for compatibility with
popen().  They should be split up into a list.

For example, adding the following to the MdeModulePkg DSC file
to enable debug of the generated makefile breaks the build because
there are two flags being added that are not being split up into 
a list.

    [BuildOptions]
      *_VS2019_*_MAKE_FLAGS = /D /P

The MAKE_PATH is also assumed to only come from tools_def.txt.
MAKE_PATH can also be specified in the [BuildOptions] section of 
a DSC file and the MAKE_PATH in the DSC is higher priority than 
MAKE_PATH from tools_def.txt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15580</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-09 17:32:53 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15585</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-09 18:02:19 +0000</bug_when>
    <thetext>Path email for review

https://edk2.groups.io/g/devel/message/73914</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15680</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-14 12:29:11 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/c055be5b82d3591c531ced88965523dfdbe1b9ae

GitHub PR

https://github.com/tianocore/edk2/pull/1565</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3681</bug_id>
          
          <creation_ts>2021-10-11 03:37:48 +0000</creation_ts>
          <short_desc>Add SSDT CPU topology generator</short_desc>
          <delta_ts>2021-10-12 01:24:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="Pierre Gondois">pierre.gondois</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17479</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-10-11 03:37:48 +0000</bug_when>
    <thetext>The DynamicTablesPkg allows to dynamically generates ACPI tables at runtime. The AmlLib (available in the DynamicTablesPkg) allows to generate/modifies AML blobs at runtime.

In ACPI 6.4, s8.4 &quot;Declaring Processors&quot;:
&quot;Each processor in the system must be declared in the ACPI namespace in the \_SB scope.&quot;

The SSDT CPU topology generator generates the AML bytecode describing a CPU topology. It is also possible to generate _LPI objects associated with the processors/clusters devices (ACPI 6.4, s8.4.4 &quot;8.4.4 Lower Power Idle States&quot; (_LPI)).

In ACPI 6.4, s8.4 &quot;Declaring Processors&quot;:
&quot;When the platform uses the APIC interrupt model, UID object values under a processor device are used to associate processor devices with entries in the MADT.&quot;
Thus, the DynamicTablesPkg allows to generate an MADT ACPI table along with its corresponding CPU topology while doing some verification.

An example of a simple CPU topology describing 2 CPUs:
-- Start --
Device (CPU0)
{
  Name (_HID, &quot;ACPI0007&quot;)
  Name (_UID, 0x0)
  Method (_STA)
  {
    Return (0xf)
  }
}

Device (CPU1)
{
  Name (_HID, &quot;ACPI0007&quot;)
  Name (_UID, 0x1)
  Method (_STA)
  {
    Return (0xf)
  }
}
-- End --</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17492</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-12 01:23:41 +0000</bug_when>
    <thetext>Merged as 30400318a278..769e63999ff5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17493</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-12 01:24:39 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3081</bug_id>
          
          <creation_ts>2020-11-19 23:58:02 +0000</creation_ts>
          <short_desc>Enable USB DCI debug for UpXtreme</short_desc>
          <delta_ts>2020-12-25 02:59:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14382</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-11-19 23:58:02 +0000</bug_when>
    <thetext>Since there is no ITP connector on the UpXtreme, need to Enable USB DCI debug for UpXtreme for debug purpose.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14383</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-11-19 23:58:34 +0000</bug_when>
    <thetext>I will submit patch for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14666</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-12-25 02:59:01 +0000</bug_when>
    <thetext>Patch was pushed:
https://github.com/tianocore/edk2-platforms/commit/2f8160835d4049703b0165f51570abf205f37b0b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3560</bug_id>
          
          <creation_ts>2021-08-12 01:44:56 +0000</creation_ts>
          <short_desc>Learn how to your cash app delete account from your iPhone</short_desc>
          <delta_ts>2021-08-16 21:46:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>CoffelakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="windi kartika">windikartika376</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16892</commentid>
    <comment_count>0</comment_count>
    <who name="windi kartika">windikartika376</who>
    <bug_when>2021-08-12 01:44:56 +0000</bug_when>
    <thetext>If you want to know how to cash app delete account , tap the app on your iPhone. Although, if you have a newer version of your iPhone, you&apos;ll need to click &quot;Reorder Apps&quot; when it appears. Although, Once you choose this, your apps will start shaking on the screen. Although, When you shake, the exclusion fields will appear. On the other hand, click the one associated with the Cash app and it will uninstall the app. Please visit our website for more details on the cash application. https://www.techjaadu.com/blog/deactivate-cash-app-account/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16920</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:46:04 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3463</bug_id>
          
          <creation_ts>2021-06-24 20:18:32 +0000</creation_ts>
          <short_desc>TPM must go to Idle state on CRB command completion.</short_desc>
          <delta_ts>2021-12-17 13:41:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</reporter>
          <assigned_to name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16460</commentid>
    <comment_count>0</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-06-24 20:18:32 +0000</bug_when>
    <thetext>The EDK2 TPM command abstraction issues a single command on each call. To follow the TCG CRB protocol specification, on every CRB TPM command
completion the TPM should return to Idle state.

The current implementation keeps the TPM in ready state if the CRB Idle bypass capability is reported by the TPM device, violating the TCG CRB protocol specification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16461</commentid>
    <comment_count>1</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-06-24 20:24:11 +0000</bug_when>
    <thetext>Verified the current Tpm2Ptp.c implementation keeps the TPM in ready state if PcdCRBIdleByPass value is 1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16462</commentid>
    <comment_count>2</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-06-24 20:26:45 +0000</bug_when>
    <thetext>See: TCG PC Client Device Driver Design Principles for TPM 2.0, Version 1.0, Rev 0.27</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18021</commentid>
    <comment_count>3</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-12-17 13:40:58 +0000</bug_when>
    <thetext>Patch submitted: https://edk2.groups.io/g/devel/message/85039</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18022</commentid>
    <comment_count>4</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-12-17 13:41:31 +0000</bug_when>
    <thetext>Merged ab5ab2f60348138a4b7b1c95ad6f5d0954fb96f1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3966</bug_id>
          
          <creation_ts>2022-06-27 17:40:06 +0000</creation_ts>
          <short_desc>Collision of TPM subclass definitions</short_desc>
          <delta_ts>2023-06-23 16:02:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Specification Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19144</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-06-27 17:40:06 +0000</bug_when>
    <thetext>As of today, 0xD0000 is defined as EFI_PERIPHERAL_DOCKING in the status code: https://github.com/tianocore/edk2/blob/7f4eca4cc2e01d4160ef265f477f9d098d7d33df/MdePkg/Include/Pi/PiStatusCode.h#L365

However, 0xD0000 employed here as well as the TPM subclass code: https://github.com/tianocore/edk2/blob/7c0ad2c33810ead45b7919f8f8d0e282dae52e71/SecurityPkg/SecurityPkg.dec#L309.

The TPM subclass code was used in TcgPei.c when reporting error code: https://github.com/tianocore/edk2/blob/7f4eca4cc2e01d4160ef265f477f9d098d7d33df/SecurityPkg/Tcg/Tcg2Pei/Tcg2Pei.c#L504

The collision of subclass definition could cause the parsing of reported errors being ambiguous.

The suggested change is to add EFI_PERIPHERAL_TPM as a spec-defined #define in PiStatusCode.h.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19145</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-06-27 20:30:08 +0000</bug_when>
    <thetext>An example change is made available on github here: https://github.com/kuqin12/edk2/tree/BZ3966-add_tpm_subclass</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19194</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-05 22:10:48 +0000</bug_when>
    <thetext>Kun: please follow code first process to make this change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19201</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-07-05 23:40:05 +0000</bug_when>
    <thetext>Patch series submitted here: https://edk2.groups.io/g/devel/message/91075</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21639</commentid>
    <comment_count>4</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2023-06-07 11:42:15 +0000</bug_when>
    <thetext>New patch series sent here: https://edk2.groups.io/g/devel/message/105599. Waiting for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21688</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2023-06-23 16:02:19 +0000</bug_when>
    <thetext>Merged as 7c703f0...6ee981c8 in https://github.com/tianocore/edk2/pull/4537.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3344</bug_id>
          
          <creation_ts>2021-04-20 13:27:45 +0000</creation_ts>
          <short_desc>Verify that TAB_TOD_DEFINES_FAMILY key is present in ToolDef dictionary before access</short_desc>
          <delta_ts>2021-04-23 15:00:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15737</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-20 13:27:45 +0000</bug_when>
    <thetext>In all the places that TAB_TOD_DEFINES_FAMILY is used as a key to 
into the ToolDef dictionary, make sure the key is present before
access.

There are a few places where is check is not being done and it
will crash with a stack back trace.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15738</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-20 13:51:12 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15739</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-20 13:51:49 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/74302</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15766</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-23 15:00:18 +0000</bug_when>
    <thetext>Commit:
https://github.com/tianocore/edk2/commit/f2f4c6be2dba3f8e97ac544b9c3da71e9f81b294

GitHub PR:
https://github.com/tianocore/edk2/pull/1593</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3214</bug_id>
          
          <creation_ts>2021-02-05 23:56:44 +0000</creation_ts>
          <short_desc>Incorrect dependencies on Tcg2PhysicalPresenceLib</short_desc>
          <delta_ts>2021-02-08 09:24:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Joseph Lee">development</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>development</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15030</commentid>
    <comment_count>0</comment_count>
    <who name="Joseph Lee">development</who>
    <bug_when>2021-02-05 23:56:44 +0000</bug_when>
    <thetext>In progress at edk2-discuss.
https://edk2.groups.io/g/discuss/topic/80400637

MdeModulePkg/Library/CustomizedDisplayLib/CustomizedDisplayLib.inf
SecurityPkg/Library/DxeTcg2PhysicalPresenceLib/DxeTcg2PhysicalPresenceLib.inf
SecurityPkg/Library/DxeTcgPhysicalPresenceLib/DxeTcgPhysicalPresenceLib.inf

Those library instances should not depend on the UefiDriverEntryPoint class.

https://github.com/jc-lab/temp-edk2-tpm2-problem/commit/d9afc8f562d1bda190b27ac8db67df3b0a5bb24a
If solve these problems like the above commit, the following error will finally occur.

&gt; /usr/bin/ld: Tpm2DeviceLibTcg2.obj (symbol from plugin): in function `mTcg2Protocol&apos;:
&gt; (.text+0x0): multiple definition of `Tpm2SubmitCommand&apos;; Tpm2DeviceLibDTpm.obj (symbol from plugin):(.text+0x0): first defined here
&gt; /usr/bin/ld: Tpm2DeviceLibTcg2.obj (symbol from plugin): in function `mTcg2Protocol&apos;:
&gt; (.text+0x0): multiple definition of `Tpm2RequestUseTpm&apos;; Tpm2DeviceLibDTpm.obj (symbol from plugin):(.text+0x0): first defined here
&gt; /usr/bin/ld: Tpm2DeviceLibTcg2.obj (symbol from plugin): in function `mTcg2Protocol&apos;:
&gt; (.text+0x0): multiple definition of `Tpm2RegisterTpm2DeviceLib&apos;; Tpm2DeviceLibDTpm.obj (symbol from plugin):(.text+0x0): first defined here
&gt;  collect2: error: ld returned 1 exit status
&gt;  make: *** [GNUmakefile:375: ...MyApp.dll] Error 1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15035</commentid>
    <comment_count>1</comment_count>
    <who name="Joseph Lee">development</who>
    <bug_when>2021-02-07 19:13:34 +0000</bug_when>
    <thetext>The above error was because the Tpm2DeviceLib and Tpm2DeviceLibTcg2 libraries were linked both.

Ignore the link problem.
Only dependency issues exist.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15043</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-08 09:24:52 +0000</bug_when>
    <thetext>Closing this as INVALID; please refer to my answer on the list:

  https://edk2.groups.io/g/discuss/message/538

More concretely, please refer to the commit message

  https://github.com/tianocore/edk2/commit/0c0a50d6b3ff

which explains how the various TPM drivers and library instances stack.

Thanks.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3703</bug_id>
          
          <creation_ts>2021-10-21 00:05:28 +0000</creation_ts>
          <short_desc>UFS MMIO address overflow issue observed when find more than one UFS HC</short_desc>
          <delta_ts>2021-11-09 22:02:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ian.chiu</reporter>
          <assigned_to>ian.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17597</commentid>
    <comment_count>0</comment_count>
    <who name="">ian.chiu</who>
    <bug_when>2021-10-21 00:05:28 +0000</bug_when>
    <thetext>When calculating UFS MMIO address, &quot;Size&quot; be read from PCI.
In exist code will add with PcdUfsPciHostControllerMmioBase will causes overflow.
For example, 
Size be read is FFFF F004 which mean the size should be 0x1000 in 32 bit address space, 
and if we assume PcdUfsPciHostControllerMmioBase to be A000 0000
and it will get overflow by FFFF F004 + A000 0000 = 1 9FFF F004 (9FFF F004)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17598</commentid>
    <comment_count>1</comment_count>
    <who name="">ian.chiu</who>
    <bug_when>2021-10-21 00:06:52 +0000</bug_when>
    <thetext>When calculating UFS MMIO address, &quot;Size&quot; be read from PCI.
In exist code will add with PcdUfsPciHostControllerMmioBase will causes overflow.
For example, 
Size be read is FFFF F004 which mean the size should be 0x1000 in 32 bit address space, 
and if we assume PcdUfsPciHostControllerMmioBase to be A000 0000
and it will get overflow by FFFF F004 + A000 0000 = 1 9FFF F004 (9FFF F004)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17711</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-11-09 21:43:42 +0000</bug_when>
    <thetext>V1 patch sent at: https://edk2.groups.io/g/devel/message/82530
V2 patch sent at: https://edk2.groups.io/g/devel/message/83381</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17712</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-11-09 22:02:02 +0000</bug_when>
    <thetext>Resolve by Ian via:
PR - https://github.com/tianocore/edk2/pull/2192
Commit - https://github.com/tianocore/edk2/commit/a7b35aae13b2d69b9be68874f275f511b1367a5e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3102</bug_id>
          
          <creation_ts>2020-12-03 01:12:37 +0000</creation_ts>
          <short_desc>Implement EmulatorPkg platform Redfish host interface library</short_desc>
          <delta_ts>2020-12-08 02:49:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nickle.wang</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14469</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-03 01:12:37 +0000</bug_when>
    <thetext>Provide platform Redfish host interface library to create SMBIOS type42 on EmulatorPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14503</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-08 02:49:07 +0000</bug_when>
    <thetext>Fixed at cc5faa78-484e869d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3586</bug_id>
          
          <creation_ts>2021-08-24 11:54:55 +0000</creation_ts>
          <short_desc>UefiPayloadPkg: build error</short_desc>
          <delta_ts>2021-09-02 14:28:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sumo">kingsumos</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17023</commentid>
    <comment_count>0</comment_count>
    <who name="Sumo">kingsumos</who>
    <bug_when>2021-08-24 11:54:55 +0000</bug_when>
    <thetext>The following commit broke the UefiPayloadPkg build:

commit d63595c3c91624f258f291adee329724edeac12e (HEAD)
Author: Zhiguang Liu &lt;zhiguang.liu@...&gt;
Date:   Sun Apr 25 15:50:46 2021 +0800

Environment: GCC5 / openSUSE 15.x
 build -a IA32 -a X64 -p UefiPayloadPkg/UefiPayloadPkg.dsc -b DEBUG -t GCC5 -D BOOTLOADER=COREBOOT

Build log:
/home/lxuser/edk2/edk2-orig/UefiPayloadPkg/Library/PayloadEntryHobLib/Hob.c:80:30: error: cast from pointer to integer of different size [-Werror=pointer-to-int-cast]
   Hob-&gt;EfiMemoryTop        = (EFI_PHYSICAL_ADDRESS) EfiMemoryTop;
                              ^
/home/lxuser/edk2/edk2-orig/UefiPayloadPkg/Library/PayloadEntryHobLib/Hob.c:81:30: error: cast from pointer to integer of different size [-Werror=pointer-to-int-cast]
   Hob-&gt;EfiMemoryBottom     = (EFI_PHYSICAL_ADDRESS) EfiMemoryBottom;
                              ^
/home/lxuser/edk2/edk2-orig/UefiPayloadPkg/Library/PayloadEntryHobLib/Hob.c:82:30: error: cast from pointer to integer of different size [-Werror=pointer-to-int-cast]
   Hob-&gt;EfiFreeMemoryTop    = (EFI_PHYSICAL_ADDRESS) EfiFreeMemoryTop;
                              ^

The below patch fixes the build, however I&apos;m not sure if this is the best way to solve the issue - or if there are any side effects:

diff --git a/UefiPayloadPkg/Library/PayloadEntryHobLib/Hob.c b/UefiPayloadPkg/Library/PayloadEntryHobLib/Hob.c
index 768c3db770..53ee1440f5 100644
--- a/UefiPayloadPkg/Library/PayloadEntryHobLib/Hob.c
+++ b/UefiPayloadPkg/Library/PayloadEntryHobLib/Hob.c
@@ -77,9 +77,9 @@ HobConstructor (
   Hob-&gt;Version             = EFI_HOB_HANDOFF_TABLE_VERSION;
   Hob-&gt;BootMode            = BOOT_WITH_FULL_CONFIGURATION;

-  Hob-&gt;EfiMemoryTop        = (EFI_PHYSICAL_ADDRESS) EfiMemoryTop;
-  Hob-&gt;EfiMemoryBottom     = (EFI_PHYSICAL_ADDRESS) EfiMemoryBottom;
-  Hob-&gt;EfiFreeMemoryTop    = (EFI_PHYSICAL_ADDRESS) EfiFreeMemoryTop;
+  Hob-&gt;EfiMemoryTop        = (EFI_PHYSICAL_ADDRESS) (UINTN)EfiMemoryTop;
+  Hob-&gt;EfiMemoryBottom     = (EFI_PHYSICAL_ADDRESS) (UINTN)EfiMemoryBottom;
+  Hob-&gt;EfiFreeMemoryTop    = (EFI_PHYSICAL_ADDRESS) (UINTN)EfiFreeMemoryTop;
   Hob-&gt;EfiFreeMemoryBottom = (EFI_PHYSICAL_ADDRESS) (UINTN) (HobEnd+1);
   Hob-&gt;EfiEndOfHobList     = (EFI_PHYSICAL_ADDRESS) (UINTN) HobEnd;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17025</commentid>
    <comment_count>1</comment_count>
    <who name="Sumo">kingsumos</who>
    <bug_when>2021-08-24 11:58:30 +0000</bug_when>
    <thetext>Link to mail list discussion:
https://edk2.groups.io/g/devel/message/79728
(still no answers)

Looks like the move to Universal Payload is broking things, IMHO automatic building for all targets (i.e. IA32) and verifying the functionality before commit is a must. Azure CI/DC doesn&apos;t covers this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17034</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 21:40:50 +0000</bug_when>
    <thetext>Ray will fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17154</commentid>
    <comment_count>3</comment_count>
    <who name="Sumo">kingsumos</who>
    <bug_when>2021-09-02 14:28:52 +0000</bug_when>
    <thetext>Fixed in commit:

commit f0fe55bca4651734abf1752a1d7c69fb5bee00b9
Author: duntan &lt;dun.tan@intel.com&gt;
Date:   Fri Aug 20 13:04:29 2021 +0800

    UefiPayloadPkg: Fix the build error when enable Core ci for UefiPayloadPkg

    V1: Add quotes when using $(ARCH) in .dsc and .fdf file.
    The quotes are added due to the way by which Core ci parse the .dsc file.
    Add UINTN in Hob.c to fix cast from pointer to integer of different size error.
    V2: Delete lines which reference ShellBinPkg.The pkg doesn&apos;t exist in edk2.

    Cc: Guo Dong &lt;guo.dong@intel.com&gt;
    Cc: Ray Ni &lt;ray.ni@intel.com&gt;
    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Benjamin You &lt;benjamin.you@intel.com&gt;
    Signed-off-by: DunTan &lt;dun.tan@intel.com&gt;
    Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3365</bug_id>
          
          <creation_ts>2021-04-30 01:11:32 +0000</creation_ts>
          <short_desc>Update MinPlat MADT with support for newer generation Intel SoCs</short_desc>
          <delta_ts>2021-08-27 04:42:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jackx.lin</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15831</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-04-30 01:11:32 +0000</bug_when>
    <thetext>If you&apos;re hip, you&apos;ll know what this means.
If you aren&apos;t, you can ask Daniel Maddy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17100</commentid>
    <comment_count>1</comment_count>
      <attachid>816</attachid>
    <who name="">jackx.lin</who>
    <bug_when>2021-08-27 04:41:30 +0000</bug_when>
    <thetext>Created attachment 816
Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17101</commentid>
    <comment_count>2</comment_count>
      <attachid>817</attachid>
    <who name="">jackx.lin</who>
    <bug_when>2021-08-27 04:41:59 +0000</bug_when>
    <thetext>Created attachment 817
Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17102</commentid>
    <comment_count>3</comment_count>
    <who name="">jackx.lin</who>
    <bug_when>2021-08-27 04:42:48 +0000</bug_when>
    <thetext>BIOS cannot find correct AcpiProcId in mApicIdMap because of
there is no suitable map, that causes ACPI_BIOS_ERROR.
Remove mApicIdMap for determing AcpiProcId, uses normal
countings instead.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>816</attachid>
            <date>2021-08-27 04:41:30 +0000</date>
            <delta_ts>2021-08-27 04:41:30 +0000</delta_ts>
            <desc>Patch</desc>
            <filename>0001-Platform-Intel-Correct-CPU-APIC-IDs.patch</filename>
            <type>text/plain</type>
            <size>26131</size>
            <attacher>jackx.lin</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>817</attachid>
            <date>2021-08-27 04:41:59 +0000</date>
            <delta_ts>2021-08-27 04:41:59 +0000</delta_ts>
            <desc>Patch</desc>
            <filename>0002-Platform-Intel-Correct-CPU-APIC-IDs.patch</filename>
            <type>text/plain</type>
            <size>19447</size>
            <attacher>jackx.lin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3856</bug_id>
          
          <creation_ts>2022-03-02 19:48:07 +0000</creation_ts>
          <short_desc>Add a check for metadata size in NvmExpress  Driver</short_desc>
          <delta_ts>2022-03-06 20:58:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="huama">hua.ma</reporter>
          <assigned_to name="huama">hua.ma</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18510</commentid>
    <comment_count>0</comment_count>
    <who name="huama">hua.ma</who>
    <bug_when>2022-03-02 19:48:07 +0000</bug_when>
    <thetext>According to the NVME specs, metadata may be transferred by the controller
to the host. Currently this NvmeExpress Driver do not support metadata
handling. Return not support for devices formatted with metadata.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18511</commentid>
    <comment_count>1</comment_count>
    <who name="huama">hua.ma</who>
    <bug_when>2022-03-02 19:50:38 +0000</bug_when>
    <thetext>will add a check.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18522</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-03-03 01:43:25 +0000</bug_when>
    <thetext>V1 patch sent at: https://edk2.groups.io/g/devel/message/87242
V2 patch sent at: https://edk2.groups.io/g/devel/message/87249</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18561</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-03-06 20:57:53 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/2592
Commit - https://github.com/tianocore/edk2/commit/79f2734e5a7bc2e5256eb0e599f45407855159c7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3860</bug_id>
          
          <creation_ts>2022-03-03 22:35:22 +0000</creation_ts>
          <short_desc>Revise UEfiCpuPkg to accomodate all processor architectures</short_desc>
          <delta_ts>2023-10-30 01:23:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18555</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-03 22:35:22 +0000</bug_when>
    <thetext>In order to support a variety of processor architectures, some modules under UefiCpuPkg are required to be abstract for different archs. This is the main BZ that will involve other BZ issues opened for the individual module under UefiCpuPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18556</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-03 22:39:36 +0000</bug_when>
    <thetext>Assign to Abner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19699</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-10-04 20:47:56 +0000</bug_when>
    <thetext>Abner is working on the edk2 C coding standard spec and Wiki page to provide the guidelines of module directory/file naming and the principle of module reconstruction for accommodating archs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22101</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2023-10-30 01:23:11 +0000</bug_when>
    <thetext>wont fix!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3238</bug_id>
          
          <creation_ts>2021-02-26 00:14:56 +0000</creation_ts>
          <short_desc>build command &quot;modules&quot; option doesn&apos;t work</short_desc>
          <delta_ts>2022-02-10 22:09:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15151</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-02-26 00:14:56 +0000</bug_when>
    <thetext>The &quot;modules&quot; option in build command is to build all modules only but not to generate the final FV image. The option doesn&apos;t work and has below build failure. We need to fix it.

Edk2&gt;build -p OvmfPkg\OvmfPkgIa32X64.dsc -a IA32 -a X64 -t VS2015x86 modules
… …
Active Platform          = c:\project\edkrepo\servergen2\edk2\OvmfPkg\OvmfPkgIa32X64.dsc
... done!
Generating makefile and code ... done!
NMAKE : fatal error U1052: file &apos;c:\project\edkrepo\servergen2\edk2\Build\Ovmf3264\DEBUG_VS2015x86\IA32\MdePkg\Library\PeiHobLib\PeiHobLib&apos; not found
Stop.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15152</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2021-02-26 00:16:02 +0000</bug_when>
    <thetext>Confirmed it fails in both windows and linux</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18326</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2022-02-10 22:09:35 +0000</bug_when>
    <thetext>Already fixed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3610</bug_id>
          
          <creation_ts>2021-09-06 09:14:48 +0000</creation_ts>
          <short_desc>Seek right guidance for fixing cash app not sending money issues.</short_desc>
          <delta_ts>2021-09-06 21:27:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="windi kartika">windikartika376</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202008</cf_releases_to_fix>
          <cf_documents>EDK II DEC Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17177</commentid>
    <comment_count>0</comment_count>
    <who name="windi kartika">windikartika376</who>
    <bug_when>2021-09-06 09:14:48 +0000</bug_when>
    <thetext>Is your payment not getting successful?
Are you getting the issue of the cash app not sending money?
Do you wish to cancel the pending payment?
For this, users just need to seek the help of cash app customer service to remove all sorts of technical mishaps. Also, call experts to get quick solutions and guidance on solving the problem.

https://www.techjaadu.com/blog/cash-app-wont-let-me-send-money/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17179</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-06 21:27:24 +0000</bug_when>
    <thetext>close</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3502</bug_id>
          
          <creation_ts>2021-07-21 03:29:39 +0000</creation_ts>
          <short_desc>best seo services new york | seo agency</short_desc>
          <delta_ts>2021-07-26 21:42:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Jonsan smith">smitjohan267</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16667</commentid>
    <comment_count>0</comment_count>
    <who name="Jonsan smith">smitjohan267</who>
    <bug_when>2021-07-21 03:29:39 +0000</bug_when>
    <thetext>Hi, i&apos;m Jonsan smith. I’m team member firstrankseoservices and one the best SEO agency. Implementing SEO techniques during developing content helps to boost your website ranking in the search engine results. our team have taken the best of local SEO services business directories and social media and offers an online business directory that gives your business the best opportunity to be found by customers.if the mind buy an online SEO Services New York you can contact us. We are provide best service  24 hours support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16698</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-26 21:42:11 +0000</bug_when>
    <thetext>this is invalid request.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3393</bug_id>
          
          <creation_ts>2021-05-14 05:07:13 +0000</creation_ts>
          <short_desc>Add firmware support for Cloud Hypervisor on arm64</short_desc>
          <delta_ts>2021-07-19 21:55:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jianyong Wu">jianyong.wu</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16061</commentid>
    <comment_count>0</comment_count>
    <who name="Jianyong Wu">jianyong.wu</who>
    <bug_when>2021-05-14 05:07:13 +0000</bug_when>
    <thetext>Cloud Hypervisor is an open source Virtual Machine Monitor (VMM) that runs on top of KVM. There must be firmware support to enable Acpi in Cloud guest, so  Cloud Hypervisor needs support on edk2 side. Here we only focus on arm64 side and ignore other arches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16155</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-25 22:05:07 +0000</bug_when>
    <thetext>Jianyong: will you contribute the patch for this new feature?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16166</commentid>
    <comment_count>2</comment_count>
    <who name="Jianyong Wu">jianyong.wu</who>
    <bug_when>2021-05-26 05:15:57 +0000</bug_when>
    <thetext>I have raised a patch serial to enable it. Now I&apos;m waiting for comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16167</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-26 05:24:45 +0000</bug_when>
    <thetext>(In reply to Jianyong Wu from comment #2)
&gt; I have raised a patch serial to enable it.

When patches are posted for a BZ, the BZ state should be moved to IN_PROGRESS, and the cover letter of the patch series, from the mailing list archive, should be referenced in the BZ, in a new comment.

The v2 patch set is here:

[edk2-devel] [PATCH v2 0/5] Enable Cloud Hypervisor support in edk2

https://edk2.groups.io/g/devel/message/75183
http://mid.mail-archive.com/20210517065032.82423-1-jianyong.wu@arm.com
https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00499.html

&gt; Now I&apos;m waiting for comments.

I don&apos;t understand. Sami and I reviewed the series. I thought the review session was complete. As far as I can see, the last comments were sent to the v2 thread on May 19th.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16168</commentid>
    <comment_count>4</comment_count>
    <who name="Jianyong Wu">jianyong.wu</who>
    <bug_when>2021-05-26 06:09:28 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; (In reply to Jianyong Wu from comment #2)
&gt; &gt; I have raised a patch serial to enable it.
&gt; 
&gt; When patches are posted for a BZ, the BZ state should be moved to
&gt; IN_PROGRESS, and the cover letter of the patch series, from the mailing list
&gt; archive, should be referenced in the BZ, in a new comment.
&gt; 
&gt; The v2 patch set is here:
&gt; 
&gt; [edk2-devel] [PATCH v2 0/5] Enable Cloud Hypervisor support in edk2
&gt; 
&gt; https://edk2.groups.io/g/devel/message/75183
&gt; http://mid.mail-archive.com/20210517065032.82423-1-jianyong.wu@arm.com
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00499.html
&gt; 
&gt; &gt; Now I&apos;m waiting for comments.
&gt; 
&gt; I don&apos;t understand. Sami and I reviewed the series. I thought the review
&gt; session was complete. As far as I can see, the last comments were sent to
&gt; the v2 thread on May 19th.

Thanks Laszlo, sorry to have done nothing about it as I&apos;m not familiar with that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16169</commentid>
    <comment_count>5</comment_count>
    <who name="Jianyong Wu">jianyong.wu</who>
    <bug_when>2021-05-26 06:15:40 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; (In reply to Jianyong Wu from comment #2)
&gt; &gt; I have raised a patch serial to enable it.
&gt; 
&gt; When patches are posted for a BZ, the BZ state should be moved to
&gt; IN_PROGRESS, and the cover letter of the patch series, from the mailing list
&gt; archive, should be referenced in the BZ, in a new comment.
&gt; 
&gt; The v2 patch set is here:
&gt; 
&gt; [edk2-devel] [PATCH v2 0/5] Enable Cloud Hypervisor support in edk2
&gt; 
&gt; https://edk2.groups.io/g/devel/message/75183
&gt; http://mid.mail-archive.com/20210517065032.82423-1-jianyong.wu@arm.com
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00499.html
&gt; 
&gt; &gt; Now I&apos;m waiting for comments.
&gt; 
&gt; I don&apos;t understand. Sami and I reviewed the series. I thought the review
&gt; session was complete. As far as I can see, the last comments were sent to
&gt; the v2 thread on May 19th.

yeah, I see the comments from you and Sami, but you said:

&quot;Confirming that I got this in my review queue. I&apos;ll need some time to get to it; please bear with me&quot;

So I&apos;m not sure if you will give more comments later.

If there is no more comments, is it time for me to send the patch v3?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16170</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-26 07:48:58 +0000</bug_when>
    <thetext>(In reply to Jianyong Wu from comment #5)
&gt; (In reply to Laszlo Ersek from comment #3)
&gt; &gt; (In reply to Jianyong Wu from comment #2)

&gt; &gt; &gt; Now I&apos;m waiting for comments.
&gt; &gt; 
&gt; &gt; I don&apos;t understand. Sami and I reviewed the series. I thought the review
&gt; &gt; session was complete. As far as I can see, the last comments were sent to
&gt; &gt; the v2 thread on May 19th.
&gt; 
&gt; yeah, I see the comments from you and Sami, but you said:
&gt; 
&gt; &quot;Confirming that I got this in my review queue. I&apos;ll need some time to get
&gt; to it; please bear with me&quot;
&gt; 
&gt; So I&apos;m not sure if you will give more comments later.

Please check the dates and times on the messages. The message you refer to was my *first* response to your series (05/18/21 CEST 19:46). I sent my actual review comments later: next morning (05/19/21 CEST, between 08:00 and 09:00).

&gt; If there is no more comments, is it time for me to send the patch v3?

Certainly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16191</commentid>
    <comment_count>7</comment_count>
    <who name="Jianyong Wu">jianyong.wu</who>
    <bug_when>2021-05-27 01:21:20 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #6)
&gt; (In reply to Jianyong Wu from comment #5)
&gt; &gt; (In reply to Laszlo Ersek from comment #3)
&gt; &gt; &gt; (In reply to Jianyong Wu from comment #2)
&gt; 
&gt; &gt; &gt; &gt; Now I&apos;m waiting for comments.
&gt; &gt; &gt; 
&gt; &gt; &gt; I don&apos;t understand. Sami and I reviewed the series. I thought the review
&gt; &gt; &gt; session was complete. As far as I can see, the last comments were sent to
&gt; &gt; &gt; the v2 thread on May 19th.
&gt; &gt; 
&gt; &gt; yeah, I see the comments from you and Sami, but you said:
&gt; &gt; 
&gt; &gt; &quot;Confirming that I got this in my review queue. I&apos;ll need some time to get
&gt; &gt; to it; please bear with me&quot;
&gt; &gt; 
&gt; &gt; So I&apos;m not sure if you will give more comments later.
&gt; 
&gt; Please check the dates and times on the messages. The message you refer to
&gt; was my *first* response to your series (05/18/21 CEST 19:46). I sent my
&gt; actual review comments later: next morning (05/19/21 CEST, between 08:00 and
&gt; 09:00).
&gt; 

Oh sorry, I missed all of both Sami and your comments.


&gt; &gt; If there is no more comments, is it time for me to send the patch v3?
&gt; 
&gt; Certainly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16656</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-19 21:55:41 +0000</bug_when>
    <thetext>This has been fixed at edk2 4c051c2c65a85f9c0268c5555460e2fdb8bca7a9..0e3b6bd0ee753d77c957480657060ae1ea5172b0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3884</bug_id>
          
          <creation_ts>2022-03-24 02:22:41 +0000</creation_ts>
          <short_desc>Support BIOS ROM Size extension for SMBIOS Type 0</short_desc>
          <delta_ts>2023-03-02 20:33:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18707</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-24 02:22:41 +0000</bug_when>
    <thetext>Support the BIOS ROM Size extension introduced in SMBIOS spec 3.1 for SMBIOS record Type 0 in EFI Shell command SmbiosView.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18708</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-24 02:26:49 +0000</bug_when>
    <thetext>HPE Roger Hsu will look at this issue.
roger.hsu@hpe.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18857</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-19 21:54:37 +0000</bug_when>
    <thetext>Abner: I assign it to you. Your team will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21142</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2023-03-02 20:33:54 +0000</bug_when>
    <thetext>I am no longer with HPE, so change the BZ status to invalid.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3750</bug_id>
          
          <creation_ts>2021-11-23 19:41:09 +0000</creation_ts>
          <short_desc>Update max job time from 60 min to 120 minutes in .azurepipelines/templates</short_desc>
          <delta_ts>2022-01-14 20:21:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17808</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-23 19:41:09 +0000</bug_when>
    <thetext>If a large patch series with many source files changes
are processed by EDK II CI, then the execution time of 
EccCheck can be very long and the total build time for
a single job can be longer than the current maximum of 
60 minutes.

The uncrustify source format change that updates 4000+
files is an example of such a patch series.  The larges
job execution time required for this specific patch series
was measured at 90 min for GCC and 75 min for VS2019.

Increase the max job time from 60 minutes to 120 minutes
to accommodate larger patch series and provide enough
margin for variations in CI agents.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17809</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-23 19:41:43 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18156</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:21:09 +0000</bug_when>
    <thetext>Github PR Merged:
    https://github.com/tianocore/edk2/pull/2219

Commit:
    https://github.com/tianocore/edk2/pull/2219/commits

Email code review:
    https://edk2.groups.io/g/devel/message/84004</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3026</bug_id>
          
          <creation_ts>2020-10-26 08:59:57 +0000</creation_ts>
          <short_desc>Restart failed ATA packets when operating in AHCI mode</short_desc>
          <delta_ts>2020-11-10 22:12:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mateusz Albecki">mateusz.albecki</reporter>
          <assigned_to name="Mateusz Albecki">mateusz.albecki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14093</commentid>
    <comment_count>0</comment_count>
    <who name="Mateusz Albecki">mateusz.albecki</who>
    <bug_when>2020-10-26 08:59:57 +0000</bug_when>
    <thetext>It is possible that during boot one of the ATA packets will fail which currently will result in the entire boot process abort. Since the failure of the SATA link is to some degree random(depends on BER of specific controller + board + device combination) this can cause inconsistent boot behavior when booting from SATA drives. Adding an ATA packet restart to AtaAtapiPassThru will provide a more reliable boot.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14112</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:42:50 +0000</bug_when>
    <thetext>Albecki: please work the design and patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14213</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-11-03 21:00:07 +0000</bug_when>
    <thetext>V1 patch sent at:
https://edk2.groups.io/g/devel/message/66925</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14250</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-11-05 21:58:55 +0000</bug_when>
    <thetext>V2 patch sent at: https://edk2.groups.io/g/devel/message/67036
V3 patch sent at: https://edk2.groups.io/g/devel/message/67040</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14326</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-11-10 22:12:50 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/1113
Commit - https://github.com/tianocore/edk2/commit/64e25d4b062c907dab2dd30b686de9219d8e372c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3526</bug_id>
          
          <creation_ts>2021-08-04 04:03:07 +0000</creation_ts>
          <short_desc>Roadrunner Email - How to Create and Login to Roadrunner Mail Account?</short_desc>
          <delta_ts>2021-08-09 22:47:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="techginius">babachris0101</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202008</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16773</commentid>
    <comment_count>0</comment_count>
    <who name="techginius">babachris0101</who>
    <bug_when>2021-08-04 04:03:07 +0000</bug_when>
    <thetext>Many users are looking for methods to create a Roadrunner Email account, so the information penned in this blog section would be beneficial. The users having or email accounts can easily access it through the official website of the roadrunner.https://roadrunneremail.live/
https://aolmaill.live/
https://myrokulink.live
https://sites.google.com/view/bitdefender-login-us
https://sites.google.com/view/mywifiextguide
https://sites.google.com/view/getroadrunneremail
https://sites.google.com/view/paypallogin-help
https://sites.google.com/view/ijstartcannon-us
https://sites.google.com/view/amazonprimelogin-now
https://sites.google.com/view/tomtomhomeinstall
https://sites.google.com/view/myavastcomhelp
https://sites.google.com/view/webrootdownloadhere
https://sites.google.com/view/belkin-range
https://sites.google.com/view/nortondownloadusa
https://sites.google.com/view/gowebrootlogin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16850</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-09 22:47:55 +0000</bug_when>
    <thetext>this is not an issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3908</bug_id>
          
          <creation_ts>2022-04-19 22:20:24 +0000</creation_ts>
          <short_desc>CryptoPkg: Build failure in CryptoPkg caused by this patch &quot; CryptoPkg/CrtLibSupport: fix strcpy&quot;</short_desc>
          <delta_ts>2022-05-31 22:09:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Dun Tan">dun.tan</reporter>
          <assigned_to name="Dun Tan">dun.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18867</commentid>
    <comment_count>0</comment_count>
    <who name="Dun Tan">dun.tan</who>
    <bug_when>2022-04-19 22:20:24 +0000</bug_when>
    <thetext>There is build failure when builing CryptoPkg by VS old version before VS2019. This is caused by this patch &quot; CryptoPkg/CrtLibSupport: fix strcpy&quot; https://github.com/tianocore/edk2/commit/fab6285a73c4c73bb131792d0afb20be369082d1.

The root cause is the ‘restrict’ keyword usage starts in VS2019. Here is the official document:
https://docs.microsoft.com/en-us/cpp/c-language/c-keywords?view=msvc-170</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18874</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-04-20 10:58:45 +0000</bug_when>
    <thetext>Merged - https://github.com/tianocore/edk2/pull/2805</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19003</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 22:09:08 +0000</bug_when>
    <thetext>It has been fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3776</bug_id>
          
          <creation_ts>2021-12-16 01:45:04 +0000</creation_ts>
          <short_desc>Moving UFS HCS.DP (Device Attached) checking out of UfsExecUicCommands() to fix timing problem</short_desc>
          <delta_ts>2022-01-03 21:30:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>vincentx.ke</reporter>
          <assigned_to>vincentx.ke</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>ian.chiu</cc>
    
    <cc>vincentx.ke</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18009</commentid>
    <comment_count>0</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-16 01:45:04 +0000</bug_when>
    <thetext>Moving UFS HCS.DP (Device Attached) checking out of UfsExecUicCommands() to fix timing problem</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18010</commentid>
    <comment_count>1</comment_count>
      <attachid>906</attachid>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-16 01:54:48 +0000</bug_when>
    <thetext>Created attachment 906
Moving UFS HCS.DP checking out of UfsExecUicCommands() to fix timing problem

Moving UFS HCS.DP (Device Attached) checking under UfsDeviceDetection() to fix timing problem</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18012</commentid>
    <comment_count>2</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-16 01:59:48 +0000</bug_when>
    <thetext>V1 patch sent at: https://edk2.groups.io/g/devel/message/84964</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18017</commentid>
    <comment_count>3</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-17 05:07:30 +0000</bug_when>
    <thetext>V2 patch sent at: https://edk2.groups.io/g/devel/message/85054</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18042</commentid>
    <comment_count>4</comment_count>
    <who name="">vincentx.ke</who>
    <bug_when>2021-12-22 01:55:22 +0000</bug_when>
    <thetext>PATCH v5 sent at: https://edk2.groups.io/g/devel/message/85159</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18071</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-01-03 21:30:09 +0000</bug_when>
    <thetext>V7 patch sent at: https://edk2.groups.io/g/devel/message/85196</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18072</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-01-03 21:30:32 +0000</bug_when>
    <thetext>Resolved by Vincent via:
PR - https://github.com/tianocore/edk2/pull/2378
Commit - https://github.com/tianocore/edk2/commit/13d9e8ec98ee3f9f14a45471b38a22b9fd66d1ce</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>906</attachid>
            <date>2021-12-16 01:54:48 +0000</date>
            <delta_ts>2021-12-16 01:54:48 +0000</delta_ts>
            <desc>Moving UFS HCS.DP checking out of UfsExecUicCommands() to fix timing problem</desc>
            <filename>0001-MdeModulePkg-Moving-UFS-HCS.DP-checking-out-of-UfsEx.patch</filename>
            <type>text/plain</type>
            <size>3097</size>
            <attacher>vincentx.ke</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3172</bug_id>
          
          <creation_ts>2021-01-17 22:02:03 +0000</creation_ts>
          <short_desc>Migrate HTTP header manipulation APIs</short_desc>
          <delta_ts>2021-01-17 22:02:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14824</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-17 22:02:03 +0000</bug_when>
    <thetext>Move HTTP header manipulation functions to DxeHttpLib from
HttpBootSupport.c. These general functions are used by both
Http BOOT and RedfishLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14825</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-17 22:02:28 +0000</bug_when>
    <thetext>Fix at 40c4cd54</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3662</bug_id>
          
          <creation_ts>2021-09-28 15:01:10 +0000</creation_ts>
          <short_desc>Missing parameter in DEBUG print in XhciInitializeDeviceSlot() in XhciSched.c</short_desc>
          <delta_ts>2021-11-07 23:13:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17406</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-28 15:01:10 +0000</bug_when>
    <thetext>The following DEBUG print is missing a parameter:

DEBUG ((DEBUG_INFO, &quot;    Address %d assigned unsuccessfully\n&quot;));

https://github.com/tianocore/edk2/blob/46b4606ba23498d3d0e66b53e498eb3d5d592586/MdeModulePkg/Bus/Pci/XhciDxe/XhciSched.c#L2301</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17407</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-09-28 15:04:23 +0000</bug_when>
    <thetext>There&apos;s a fix in review here:

https://github.com/microsoft/mu_basecore/pull/93</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17514</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-12 21:48:44 +0000</bug_when>
    <thetext>Michael, will you send the patch for it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17675</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-11-03 11:17:38 +0000</bug_when>
    <thetext>V1 patch on mailing list: https://edk2.groups.io/g/devel/message/83269</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17695</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-11-07 23:13:40 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/2181
Commit - https://github.com/tianocore/edk2/commit/b5d4a35d90771ec86ce9cf28727f471ee589fb78</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3544</bug_id>
          
          <creation_ts>2021-08-10 04:23:17 +0000</creation_ts>
          <short_desc>With techies, get immediate solution for cash app dispute problem</short_desc>
          <delta_ts>2021-08-16 21:50:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="james smith">js8435877</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Distribution Packaging Specificatio</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16854</commentid>
    <comment_count>0</comment_count>
    <who name="james smith">js8435877</who>
    <bug_when>2021-08-10 04:23:17 +0000</bug_when>
    <thetext>Not able to solve cash app dispute with the recipient or any merchant? If yes then contact the experts of the cash app support team that provides a quick guide to all the users. Make sure to ask the techies directly via live chat to overcome this problem. Call them for reliable solutions. https://www.contact-customerservice.co/blog/how-to-get-cash-app-support/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16933</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:50:33 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3440</bug_id>
          
          <creation_ts>2021-06-09 03:48:42 +0000</creation_ts>
          <short_desc>Add MM Configuration PPI definition to MdePkg</short_desc>
          <delta_ts>2021-07-06 19:14:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16315</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-09 03:48:42 +0000</bug_when>
    <thetext>EFI_PEI_MM_CONFIGURATION_PPI is defined in the PI spec v1.7 errata A. This ticket is used to add the definition header for code usage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16384</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-15 22:01:14 +0000</bug_when>
    <thetext>Please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16388</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-16 21:45:27 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; Please work on it.

Liming,

according to PI spec definition, EFI_PEI_MM_CONFIGURATION_PPI has a field EFI_MM_RESERVED_MMRAM_REGION (i.e.: https://github.com/kuqin12/mu_basecore/blob/065d9d047427f274ea1965ab96068ef35ab6542d/MdePkg/Include/Ppi/MmConfiguration.h#L50). But it is defined in MdePkg/Include/Protocol/MmConfiguration.h.

It seems not ideal to entangle these 2 header files. Do you have any suggestions? We could move this structure definition out separately. But please let me know if there is any preferred destinations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16399</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-18 05:49:52 +0000</bug_when>
    <thetext>Patch sent for review: https://edk2.groups.io/g/devel/message/76748</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16454</commentid>
    <comment_count>4</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-23 23:34:08 +0000</bug_when>
    <thetext>(In reply to kun.qin from comment #3)
&gt; Patch sent for review: https://edk2.groups.io/g/devel/message/76748

V2 patches submitted: https://edk2.groups.io/g/devel/message/77035</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16564</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-07-06 19:14:26 +0000</bug_when>
    <thetext>Merged as commit 27b8a52957 - d1fc3d7ef3, via &lt;https://github.com/tianocore/edk2/pull/1769&gt;.

Thanks to Liming!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3933</bug_id>
          
          <creation_ts>2022-05-25 21:03:59 +0000</creation_ts>
          <short_desc>MdeModulePkg/UefiPayloadPkg: need to have align Identifier value with UPL spec</short_desc>
          <delta_ts>2022-05-30 21:52:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Gua Guo">gua.guo</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18973</commentid>
    <comment_count>0</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2022-05-25 21:03:59 +0000</bug_when>
    <thetext>Currently, Identifier value on UPL spec 2.12.2 is &quot;PLDH&quot;, but value on Edk2 is &quot;UPLD&quot;, I think it need to be changed to follow spec definition.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18977</commentid>
    <comment_count>1</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2022-05-30 21:52:09 +0000</bug_when>
    <thetext>It&apos;s resolved by https://github.com/tianocore/edk2/pull/2917.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3313</bug_id>
          
          <creation_ts>2021-04-09 17:56:47 +0000</creation_ts>
          <short_desc>Fix MAKE_FLAG typos in tools_def.template for VS20xx toolchains</short_desc>
          <delta_ts>2021-04-12 14:56:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15581</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-09 17:56:47 +0000</bug_when>
    <thetext>MAKLE_FLAG should be MAKE_FLAGS to match EDK II Build Specification
requirements.

Most of the VX20xx tool chains have this typo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15582</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-09 17:57:32 +0000</bug_when>
    <thetext>Assign to owner


Type is MAKE_FLAG.  Should be MAKE_FLAGS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15583</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-09 17:57:53 +0000</bug_when>
    <thetext>Confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15584</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-09 18:01:42 +0000</bug_when>
    <thetext>Path email for review:

https://edk2.groups.io/g/devel/message/73916</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15614</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-12 14:56:12 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/4b59b22fed05eea1cb92ad90b86759d4bfbc4870

GitHub PR:

https://github.com/tianocore/edk2/pull/1555</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3193</bug_id>
          
          <creation_ts>2021-01-29 12:27:26 +0000</creation_ts>
          <short_desc>Seems like OVMF cannot initialize Radeon Pro VII</short_desc>
          <delta_ts>2021-02-02 09:57:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2796</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>pshirshov</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14934</commentid>
    <comment_count>0</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2021-01-29 12:27:26 +0000</bug_when>
    <thetext>Hi,

I&apos;m not sure if this issue belongs to this bugtracker but probably it is.

I&apos;m trying to start a libvirt/qemu/KVM virtual machine with Radeon Pro VII attached through VFIO.

My VM starts and does not report any bugs though the GPU does not initialize.

Other cards (e.g. regular Radeon VII, various NVidia cards) work flawlessly in exactly the same environment.

I&apos;ve tried to build the most recent OVMF but it didn&apos;t help.

I would be happy to provide more debug information if necessary.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14954</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-02 07:27:54 +0000</bug_when>
    <thetext>The OvmfPkg/README file describes how the OVMF debug log can be captured; please attach the debug log to this ticket. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14958</commentid>
    <comment_count>2</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2021-02-02 09:46:17 +0000</bug_when>
    <thetext>Hi,

I’m awfully sorry, I have no access to the card anymore, I’ve sent the card back this morning.

There was no output on the serial console but I’ve been using a release build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14959</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-02-02 09:57:56 +0000</bug_when>
    <thetext>The debug log is not written to the serial console, using OVMF&apos;s default build settings; it&apos;s written to the QEMU debug port, which needs to be captured with additional command line arguments.

My hunch is that the card comes with a huge MMIO BAR (or maybe several such BARs), and OVMF&apos;s default 32GB PCI MMIO64 aperture is not sufficient to accommodate those BARs. In such cases, PciBusDxe drops those devices from the resource assignment whose needs are the most demanding. We&apos;ve seen this with a few GPUs earlier. Refer for example to:

https://bugzilla.tianocore.org/show_bug.cgi?id=2796

There is an experimental QEMU command line switch that lets users tweak the aperture size:

  -fw_cfg name=opt/ovmf/X-PciMmio64Mb,string=65536

but a larger than 32GB aperture may not work if the physical address width of your host CPU is only 36 bits. Please see more details in bug 2796.

For now I&apos;m closing this as INVALID. We could close it as a duplicate of bug 2796 as well, but we don&apos;t have enough data / evidence for that. I&apos;m adding a &quot;See Also&quot; reference.

Thanks.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3682</bug_id>
          
          <creation_ts>2021-10-11 12:40:03 +0000</creation_ts>
          <short_desc>Add SSDT PCI generator in DynamicTablesPkg</short_desc>
          <delta_ts>2021-12-14 03:13:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="Pierre Gondois">pierre.gondois</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>DynamicTablesPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17481</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-10-11 12:40:03 +0000</bug_when>
    <thetext>The DynamicTablesPkg allows to dynamically generates ACPI tables at runtime. The AmlLib (available in the DynamicTablesPkg) allows to generate/modifies AML blobs at runtime.

The SSDT PCI generator generates the AML bytecode describing a PCI device. This means describing:
- the legacy PCI interrupts routing via the _PRT object (cf ACPI 6.4, s6.2.13 &quot;_PRT (PCI Routing Table)&quot;)
- the memory mapping via the _CRS object
- the _OSC object to communicate PCI/OS capabilities

The DynamicTablesPkg also allows to do some verification during the AML generation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17494</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-12 01:28:18 +0000</bug_when>
    <thetext>Pierre works on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17981</commentid>
    <comment_count>2</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-12-14 03:13:25 +0000</bug_when>
    <thetext>V4 at https://edk2.groups.io/g/devel/message/84580 
Pushed as e07d27e24d5d..ec37fd9c1fbc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3561</bug_id>
          
          <creation_ts>2021-08-12 18:38:00 +0000</creation_ts>
          <short_desc>Image Execution Table - clarify revocations of hashes</short_desc>
          <delta_ts>2022-03-09 17:21:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Jose Marinho">Jose.Marinho</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>Jose.Marinho</cc>
    
    <cc>michael.a.rothman</cc>
    
    <cc>stuart.yoder</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16895</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-12 18:38:00 +0000</bug_when>
    <thetext>The UEFI spec 2.9, section 32.4.2 does not state explicitly what Action types are used for revocations by hash (whether a hash of a certificate or hash of an image).

Current definitions are:

1.If EFI_IMAGE_EXECUTION_AUTH_UNTESTED is set, then no authentication attempt was made.
2.If EFI_IMAGE_EXECUTION_AUTH_SIG_FAILED is set, then the image had at least one digital signature and the check of the digital signatures failed.
3.If EFI_IMAGE_EXECUTION_AUTH_SIG_PASSED is set, then the image had at least one valid digital signature and a check of that digital signature passed.
4.If EFI_IMAGE_EXECUTION_AUTH_SIG_NOT_FOUND is set, then the image’s signature could not be found in the signature database.
5.If EFI_IMAGE_EXECUTION_AUTH_SIG_FOUND is set, then the image’s signature was found in the signature database.
6.If EFI_IMAGE_EXECUTION_POLICY_FAILED is set, then authentication failed because of (unspecified) firmware security policy.

Clarifying what the distinction is between EFI_IMAGE_EXECUTION_AUTH_SIG_FAILED and EFI_IMAGE_EXECUTION_AUTH_SIG_FOUND is would be helpful.  When there is an image load failure due to revocation of an image by signature, hash of signature, or hash of image, which Action codes would be expected.

EDK2 reports EFI_IMAGE_EXECUTION_AUTH_SIG_FOUND for a case where the signature is in db but the image was revoked by a hash.  It&apos;s not clear why the action wouldn&apos;t be EFI_IMAGE_EXECUTION_AUTH_SIG_FAILED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16919</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:45:43 +0000</bug_when>
    <thetext>Samer is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17499</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-12 09:42:19 +0000</bug_when>
    <thetext>One patch already submitted to fix a case in the EDK2 code that did not make sense compared to the existing spec language: https://edk2.groups.io/g/devel/message/81829</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17501</commentid>
    <comment_count>3</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-12 13:58:45 +0000</bug_when>
    <thetext>EDK2 patches to address some of the cases:

SecurityPkg/DxeImageVerificationLib: Set Action for failed signed image
https://edk2.groups.io/g/devel/message/81837

SecurityPkg/DxeImageVerificationLib: Set Action for failed unsigned image
https://edk2.groups.io/g/devel/message/81836</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17531</commentid>
    <comment_count>4</comment_count>
      <attachid>842</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-13 16:48:21 +0000</bug_when>
    <thetext>Created attachment 842
WIP - scrub</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17614</commentid>
    <comment_count>5</comment_count>
      <attachid>852</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-26 17:09:29 +0000</bug_when>
    <thetext>Created attachment 852
ImageVerification_EDK2_Spec_scrub_ver2

Updated table with code/spec recommendations</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17948</commentid>
    <comment_count>6</comment_count>
      <attachid>896</attachid>
    <who name="Jose Marinho">Jose.Marinho</who>
    <bug_when>2021-12-07 15:45:30 +0000</bug_when>
    <thetext>Created attachment 896
ECR_Image_Execution_table_v3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18319</commentid>
    <comment_count>7</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-02-10 11:02:12 +0000</bug_when>
    <thetext>Still waiting for review from USST sub-team</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18358</commentid>
    <comment_count>8</comment_count>
      <attachid>925</attachid>
    <who name="Jose Marinho">Jose.Marinho</who>
    <bug_when>2022-02-14 10:57:38 +0000</bug_when>
    <thetext>Created attachment 925
Image_exec_table_flowchart_compliant_with_ECR_v3

Flowchart compliant with wording introduced in ECR v3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18397</commentid>
    <comment_count>9</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-02-16 13:04:50 +0000</bug_when>
    <thetext>Read spec again after the meeting.

Here is another possible interpretation:

Action &lt;= EFI_IMAGE_EXECUTION_AUTH_UNTESTED // verification handle not installed.

If Image is signed, then

If (digital signature invalid) || (pub cert not in db) or (hash in dbx), then
Action &lt;= EFI_IMAGE_EXECUTION_AUTH_SIG_FAILED
Else
Action &lt;= EFI_IMAGE_EXECUTION_AUTH_SIG_PASSED
Endif

Else // Image is not signed

If (image hash not in db) or (hash in dbx), then
Action &lt;= EFI_IMAGE_EXECUTION_AUTH_NOT_FOUND
Else
Action &lt;= EFI_IMAGE_EXECUTION_AUTH_FOUND
Endif

Endif // Image signed or not

If (platform specific policy check failed), then // platform verification  handler
Action &lt;= EFI_IMAGE_EXECUTION_POLICY_FAILED
Endif</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18457</commentid>
    <comment_count>10</comment_count>
      <attachid>930</attachid>
    <who name="Jose Marinho">Jose.Marinho</who>
    <bug_when>2022-02-23 16:30:42 +0000</bug_when>
    <thetext>Created attachment 930
ECR_Image_Execution_table_v4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18588</commentid>
    <comment_count>11</comment_count>
      <attachid>958</attachid>
    <who name="Jose Marinho">Jose.Marinho</who>
    <bug_when>2022-03-09 14:42:03 +0000</bug_when>
    <thetext>Created attachment 958
ECR_Image_Execution_table_ver5

Set the &quot;conditions met&quot; for the EFI_IMAGE_EXECUTION_AUTH_UNTESTED return to &quot;The image contained no certificates&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18589</commentid>
    <comment_count>12</comment_count>
      <attachid>959</attachid>
    <who name="Michael A. Rothman">michael.a.rothman</who>
    <bug_when>2022-03-09 16:13:28 +0000</bug_when>
    <thetext>Created attachment 959
Update Image Execution Table Ver6 (adding to _FAILED)

Added &quot;The image signature check failed&quot; to the EFI_IMAGE_EXECUTION_AUTH_SIG_FAILED authentication attempt status code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18592</commentid>
    <comment_count>13</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-03-09 17:21:40 +0000</bug_when>
    <thetext>This ECR was approved as submitted in ver6 this BZ (https://bugzilla.tianocore.org/attachment.cgi?id=959) an errata to UEFI 2.9, without any further changes. Implementations may proceed with the wording of this ECR.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>842</attachid>
            <date>2021-10-13 16:48:21 +0000</date>
            <delta_ts>2021-10-13 16:48:21 +0000</delta_ts>
            <desc>WIP - scrub</desc>
            <filename>edk2ImageVerificationTableResults.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>15654</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>852</attachid>
            <date>2021-10-26 17:09:29 +0000</date>
            <delta_ts>2021-10-26 17:09:29 +0000</delta_ts>
            <desc>ImageVerification_EDK2_Spec_scrub_ver2</desc>
            <filename>edk2ImageVerificationTableResults.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>19979</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>896</attachid>
            <date>2021-12-07 15:45:30 +0000</date>
            <delta_ts>2021-12-07 15:45:30 +0000</delta_ts>
            <desc>ECR_Image_Execution_table_v3</desc>
            <filename>ECR_Image_Execution_table_v3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>24451</size>
            <attacher name="Jose Marinho">Jose.Marinho</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>925</attachid>
            <date>2022-02-14 10:57:38 +0000</date>
            <delta_ts>2022-02-14 10:57:38 +0000</delta_ts>
            <desc>Image_exec_table_flowchart_compliant_with_ECR_v3</desc>
            <filename>Image_exec_table_flowchart_compliant_with_ECR_v3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>57331</size>
            <attacher name="Jose Marinho">Jose.Marinho</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>930</attachid>
            <date>2022-02-23 16:30:42 +0000</date>
            <delta_ts>2022-02-23 16:30:42 +0000</delta_ts>
            <desc>ECR_Image_Execution_table_v4</desc>
            <filename>ECR_Image_Execution_table_v4.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>28449</size>
            <attacher name="Jose Marinho">Jose.Marinho</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>958</attachid>
            <date>2022-03-09 14:42:03 +0000</date>
            <delta_ts>2022-03-09 14:42:03 +0000</delta_ts>
            <desc>ECR_Image_Execution_table_ver5</desc>
            <filename>ECR_Image_Execution_table_v5.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>28261</size>
            <attacher name="Jose Marinho">Jose.Marinho</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>959</attachid>
            <date>2022-03-09 16:13:28 +0000</date>
            <delta_ts>2022-03-09 16:13:28 +0000</delta_ts>
            <desc>Update Image Execution Table Ver6 (adding to _FAILED)</desc>
            <filename>ECR_Image_Execution_table_v6.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>28554</size>
            <attacher name="Michael A. Rothman">michael.a.rothman</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3465</bug_id>
          
          <creation_ts>2021-06-29 02:57:28 +0000</creation_ts>
          <short_desc>Build tools cannot parse #if FixedPcdGetBool , used in header file of Structure PCD</short_desc>
          <delta_ts>2022-03-15 21:59:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Madhusudhan Balaji">madhusudhan.nimbuja</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16479</commentid>
    <comment_count>0</comment_count>
    <who name="Madhusudhan Balaji">madhusudhan.nimbuja</who>
    <bug_when>2021-06-29 02:57:28 +0000</bug_when>
    <thetext>If Structure PCD use header file which includes FixedPcdGetBool() function , this results in build error:

example : 
SAMPLE_STRU type structure PCD gives build error.

-------------sample.h----------------------
typedef struct {
  UINT8   BlockId;
#if FixedPcdGetBool(PcdTimeoutSupport) == 1
  union {
    UINT8 Value;
    struct {
      UINT8 Timeout:7;
      UINT8 Reserved:1;
    } Bits;
  } Timeout;
#endif
} SAMPLE_STRU;
-----------------------------------------------


gBoardModuleTokenSpaceGuid.Sample|{0}|SAMPLE_STRU|0x00001133 {
  &lt;HeaderFiles&gt;
    sample.h
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16543</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-05 05:16:25 +0000</bug_when>
    <thetext>StructurePcd is preprocessed before build. So, its consumed structure can&apos;t depend  on FixedPcd. This behavior is expected. There is no support for this usage model.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16549</commentid>
    <comment_count>2</comment_count>
    <who name="Madhusudhan Balaji">madhusudhan.nimbuja</who>
    <bug_when>2021-07-05 08:23:10 +0000</bug_when>
    <thetext>Can we process FixedPcd , before we process Structure PCD. In this way structure PCD can use header files with FixedPcd usage.

Currently i have to define values in header file which has FixedPcd usage again in another header file to add under Structure PCD to avoid build error -- this will result in multiple definition. Not a clean way to maintain source, will result in bugs if failed to update one of header file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16625</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-13 21:48:56 +0000</bug_when>
    <thetext>One solution is to define the different strucuture, and define more than one PCDs for the strucutre. This solution doesn&apos;t depend on Fixed PcdTimeoutSupport.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16645</commentid>
    <comment_count>4</comment_count>
    <who name="Madhusudhan Balaji">madhusudhan.nimbuja</who>
    <bug_when>2021-07-15 09:02:17 +0000</bug_when>
    <thetext>PcdTimeoutSupport is just an example i have taken here. Having multiple definition is not a clean solution. Can we make changes to support this in tool.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16658</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-19 22:49:58 +0000</bug_when>
    <thetext>You can contibute the proposal and patch to add such support in BaseTools.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18614</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-15 21:59:37 +0000</bug_when>
    <thetext>No proposal now, close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3972</bug_id>
          
          <creation_ts>2022-06-30 03:19:03 +0000</creation_ts>
          <short_desc>Add support for SMBIOS spec 3.6.0 to SmBios.h</short_desc>
          <delta_ts>2022-08-23 10:24:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>sainadhn</reporter>
          <assigned_to>sainadhn</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sainadhn</cc>
    
    <cc>sundaresans</cc>
    
    <cc>vasudevans</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19164</commentid>
    <comment_count>0</comment_count>
      <attachid>1001</attachid>
    <who name="">sainadhn</who>
    <bug_when>2022-06-30 03:19:03 +0000</bug_when>
    <thetext>Created attachment 1001
Proposed Patch

Please include support for Smbios Spec v3.6.0 to IndustryStandard\SmBios.h under MdePkg. We will contribute the changes attached the Patch for reference.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19187</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-05 21:53:33 +0000</bug_when>
    <thetext>Sai: please send the patch to edk2 mail list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19353</commentid>
    <comment_count>2</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-08-03 01:05:38 +0000</bug_when>
    <thetext>Liming: Patch sent and available in edk2 mail list (https://edk2.groups.io/g/devel/message/92077), Please help to review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19424</commentid>
    <comment_count>3</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-08-23 10:24:52 +0000</bug_when>
    <thetext>Changes merged to edk2 and will be part of stable tag 202208.

CommitId: 68bf712d4f5928af4c426dc82d27b9783e499d93
(https://github.com/tianocore/edk2/commit/68bf712d4f5928af4c426dc82d27b9783e499d93)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1001</attachid>
            <date>2022-06-30 03:19:03 +0000</date>
            <delta_ts>2022-06-30 03:19:03 +0000</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Smbios3.6PatchV1.rar</filename>
            <type>application/octet-stream</type>
            <size>44814</size>
            <attacher>sainadhn</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3829</bug_id>
          
          <creation_ts>2022-02-08 11:07:52 +0000</creation_ts>
          <short_desc>MinPlatformPkg/SaveMemoryConfig: Variable may not be locked.</short_desc>
          <delta_ts>2022-02-17 22:50:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18260</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-02-08 11:07:52 +0000</bug_when>
    <thetext>Fixed the bug that existing variable will not be locked when it is identical with hob data, also switch to VariablePolicyProtocol for locking variables.

This patch also updated SaveMemoryConfig driver to be unloaded after execution because it does not produce any service protocol. To achieve this goal the DxeRuntimeVariableWriteLib should close registered ExitBootService events in its DESTRUCTOR.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18261</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-02-08 11:21:19 +0000</bug_when>
    <thetext>Working on the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18262</commentid>
    <comment_count>2</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2022-02-08 20:40:17 +0000</bug_when>
    <thetext>Patch sent: https://edk2.groups.io/g/devel/message/86450</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18407</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-02-17 20:39:46 +0000</bug_when>
    <thetext>fix pushed: https://github.com/tianocore/edk2-platforms/commit/cbc8e420ac4505e9c51aa0d4f049026691024ca5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18410</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-02-17 22:50:53 +0000</bug_when>
    <thetext>Fixed GCC  build failure caused by previous commit.
Fix patch pushed:
https://github.com/tianocore/edk2-platforms/commit/c398756604f54515da7af75a3f60a0380429a78c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3215</bug_id>
          
          <creation_ts>2021-02-08 15:48:59 +0000</creation_ts>
          <short_desc>SMBIOS 3.4.0 support</short_desc>
          <delta_ts>2021-09-21 13:32:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15045</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-02-08 15:48:59 +0000</bug_when>
    <thetext>EDK2 latest SMBIOS implementation matches SMBIOS 3.3.0

SMBIOS 3.4.0 is currently published (https://www.dmtf.org/sites/default/files/standards/documents/DSP0134_3.4.0.pdf ), and should be implemented, at least in the Smbios.h in MdePkg and SmbiosView in UEFI Shell</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15123</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-23 21:47:34 +0000</bug_when>
    <thetext>Samer: will you contribute the patch for it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17322</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-09-21 13:32:26 +0000</bug_when>
    <thetext>No I am not working on SMBIOS 3.4.0.
However, I see some patches already submitted and merged:

MdePkg/Include: Smbios Specification 3.4.0 changes

https://github.com/tianocore/edk2/commit/885efcd3f990fe7bf58713f9a76d633f102a8f03

So it seems this is already completed by Thotala Gopi &lt;gopi.thotala@intel.com&gt;

I will close as &quot;fixed&quot;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3705</bug_id>
          
          <creation_ts>2021-10-26 03:48:43 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg/SplitFspBin.py: adopt FSP 2.3 specification.</short_desc>
          <delta_ts>2021-10-27 07:57:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17608</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-10-26 03:48:43 +0000</bug_when>
    <thetext>FSP 2.3 has updated FSP_INFO_HEADER to support ExtendedImageRevision and SplitFspBin.py needs to support it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17618</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-10-27 07:57:04 +0000</bug_when>
    <thetext>commit 9a95d11023ac2f2ee49a2958cf80658270442c42
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue Oct 26 15:53:37 2021 +0800

    IntelFsp2Pkg/SplitFspBin.py: adopt FSP 2.3 specification.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3705

    FSP 2.3 has updated FSP_INFO_HEADER to support ExtendedImageRevision
    and SplitFspBin.py needs to support it.

    Also updated script to display integer value basing on length.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3588</bug_id>
          
          <creation_ts>2021-08-24 12:42:28 +0000</creation_ts>
          <short_desc>Add Python 3 support for UEFI shell through edk2-libc project</short_desc>
          <delta_ts>2021-09-02 22:49:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3589</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Jayaprakash Nevara">n.jayaprakash</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17028</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-08-24 12:42:28 +0000</bug_when>
    <thetext>This bugzilla ticket is to consider adding Py3 support into edk2-libc and make it available to the community.

I have been working on this for quitesome and have a working Py3.6.8 port available for UEFI shell. Will be using this bugzilla ticket to get this port committed to edk2-libc project. 

As the Bugzilla product category doesn&apos;t consider edk2-libc as a seperate product I am raising this ticket against the edk2 product itself.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17029</commentid>
    <comment_count>1</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-08-24 12:43:12 +0000</bug_when>
    <thetext>Self assigning the bug</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17031</commentid>
    <comment_count>2</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-08-24 13:02:11 +0000</bug_when>
    <thetext>Moving the status to confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17160</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-09-02 22:49:02 +0000</bug_when>
    <thetext>Patch emails for review:

https://edk2.groups.io/g/devel/message/80172
https://edk2.groups.io/g/devel/message/80173</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17161</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-09-02 22:49:52 +0000</bug_when>
    <thetext>Commits:
https://github.com/tianocore/edk2-libc/commit/7b8c2df073a35a38595bcda8388097e0eaa30c09
https://github.com/tianocore/edk2-libc/commit/7769ee0af3429ca650b651a7894308ae09906302</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3483</bug_id>
          
          <creation_ts>2021-07-08 10:00:31 +0000</creation_ts>
          <short_desc>RamDiskDxe crashes if ramdisks are registered via notify event</short_desc>
          <delta_ts>2021-07-13 23:10:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Trammell Hudson">hudson</reporter>
          <assigned_to name="Trammell Hudson">hudson</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16590</commentid>
    <comment_count>0</comment_count>
    <who name="Trammell Hudson">hudson</who>
    <bug_when>2021-07-08 10:00:31 +0000</bug_when>
    <thetext>In RamDiskDxeEntryPoint, gEfiRamDiskProtocolGuid is registered *before* the  RegisteredRamDisks linked list is setup. This means that if an earlier driver has called RegisterProtocolNotify() on the protocol, its callback will be triggered before the ramdisks are ready to be registered and RamDiskDxe will fault with an error:

ASSERT [RamDiskDxe] /home/ubuntu/uefipayload/MdePkg/Library/BaseLib/LinkedList.c(75): List-&gt;ForwardLink != ((void *) 0)

Swapping the initialization and registration fixes this, allowing ramdisks to be registered via the callback as soon as the protocol is registered:

diff --git a/MdeModulePkg/Universal/Disk/RamDiskDxe/RamDiskDriver.c b/MdeModulePkg/Universal/Disk/RamDiskDxe/RamDiskDriver.c
index fcbf4f117d..13e2aed87c 100644
--- a/MdeModulePkg/Universal/Disk/RamDiskDxe/RamDiskDriver.c
+++ b/MdeModulePkg/Universal/Disk/RamDiskDxe/RamDiskDriver.c
@@ -154,6 +154,12 @@ RamDiskDxeEntryPoint (
     goto ErrorExit;
   }
 
+  //
+  // Initialize the list of registered RAM disks maintained by the driver
+  // before installing the protocol
+  //
+  InitializeListHead (&amp;RegisteredRamDisks);
+
   //
   // Install the EFI_RAM_DISK_PROTOCOL and RAM disk private data onto a
   // new handle
@@ -170,11 +176,6 @@ RamDiskDxeEntryPoint (
     goto ErrorExit;
   }
 
-  //
-  // Initialize the list of registered RAM disks maintained by the driver
-  //
-  InitializeListHead (&amp;RegisteredRamDisks);
-
   Status = EfiCreateEventReadyToBootEx (
              TPL_CALLBACK,
              RamDiskAcpiCheck,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16617</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-07-13 21:15:59 +0000</bug_when>
    <thetext>V1 patch sent at:
https://edk2.groups.io/g/devel/message/77723</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16629</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-07-13 23:10:40 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/1814
Commit - https://github.com/tianocore/edk2/commit/d0b6596b8e7ad72c86de0b9faa342a7a866bc87e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3996</bug_id>
          
          <creation_ts>2022-07-18 15:11:19 +0000</creation_ts>
          <short_desc>Improve DynamicPlatRepoLib applicability</short_desc>
          <delta_ts>2022-09-07 17:37:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>DynamicTablesPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19256</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-07-18 15:11:19 +0000</bug_when>
    <thetext>Current DynamicPlatRepoLib provides decent functionality for configuration Manager object token fixer. However, there are a few minor issues could prevent the library from further usage:

1. The library uses MemoryAllocationLib but did not include it in the library inf file, which could cause build break.
2. The dereferencing operations of CM_ARM_ITS_GROUP_NODE is performed on the header pointer, instead of its data, which will cause incorrect data reference.

There are also a few other potentially useful token fixers not implemented.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19285</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-19 21:51:18 +0000</bug_when>
    <thetext>Kun: please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19521</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-09-07 17:37:38 +0000</bug_when>
    <thetext>Merged 61cd901fcecda13418bc209589639591094fc739-230dd5246d93de16f4c0dd9739c7f62919a820bf at https://github.com/tianocore/edk2/pull/3270</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3367</bug_id>
          
          <creation_ts>2021-04-30 06:10:02 +0000</creation_ts>
          <short_desc>URL links | HTTP redirected to HTTPS or non-secure TLS version</short_desc>
          <delta_ts>2022-03-09 04:25:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>ricky.tigg</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202008</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>edk2-stable202008</cf_releases_to_fix>
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15835</commentid>
    <comment_count>0</comment_count>
    <who name="">ricky.tigg</who>
    <bug_when>2021-04-30 06:10:02 +0000</bug_when>
    <thetext>OS: Fedora; Component: edk2-ovmf-20200801stable-4.fc34.noarch (Build Date: Jan 26 2021)

None of the URL links of the TianoCore components packaged as RPM are valid. Links invariably redirect to https://github.com/tianocore/.

Examples:
 Package information:

$ rpm -qi edk2-ovmf | grep ^URL
URL : http://www.tianocore.org/edk2/

 README contents:

$ rpm -ql edk2-ovmf | grep README$
/usr/share/doc/edk2-ovmf/README

$ cat `rpm -ql edk2-ovmf | grep README$`| grep -i tianocore.org
http://www.tianocore.org/ovmf/

 At https://en.wikipedia.org/wiki/TianoCore_EDK_II, section External links, 
&quot;Official website&quot; link https://tianocore.org/ cannot be opened in modern web browser due to the use of a non-secure version of TLS 1.0 or 1.1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15895</commentid>
    <comment_count>1</comment_count>
      <attachid>716</attachid>
    <who name="">ricky.tigg</who>
    <bug_when>2021-05-04 05:14:08 +0000</bug_when>
    <thetext>Created attachment 716
Exhibited mentions during boot

Fedora 34 | While the boot is taking place an obsolete URL is exhibited; it is redirected by its server to https://www.openssl.org/.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16021</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-11 21:57:32 +0000</bug_when>
    <thetext>Could you provide more information about this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16022</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-11 21:58:45 +0000</bug_when>
    <thetext>Could you provide more information about this issue?

Do you mean some links are incorrect?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16035</commentid>
    <comment_count>4</comment_count>
    <who name="">ricky.tigg</who>
    <bug_when>2021-05-12 05:09:11 +0000</bug_when>
    <thetext>&quot;Do you mean some links are incorrect?&quot; | No &quot;mean&quot;; As far as i observe nothing was meant here. All materials, be they textual or pictures, were explicit.

In other words:
- those very links as HTTP are invalid, since pages are served as HTTPS:
http://www.tianocore.org/edk2/, http://www.tianocore.org/ovmf/ and in Exhibited_Openssl_URL_during_boot.png.

- this very link as HTTPS is invalid, since page is served with a non-secure version of TLS – 1.0 or 1.1 – which was scheduled to be soon unsupported both by Google Chrome and Mozilla Firefox newest releases:
https://en.wikipedia.org/wiki/TianoCore_EDK_II</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16158</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-25 22:17:39 +0000</bug_when>
    <thetext>Do you find the issue in edk2 source code?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16165</commentid>
    <comment_count>6</comment_count>
    <who name="">ricky.tigg</who>
    <bug_when>2021-05-26 04:01:45 +0000</bug_when>
    <thetext>As noticeable the present report was done against Fedora repositories. Then edk2 source code was not involved. Staring now an investigation in this regard:

$ git clone https://github.com/tianocore/edk2.git
$ cd edk2/; ack &apos;http://&apos;

URL links represented with the &apos;ack&apos; search pattern are represented there too. All of them became obsolete since they are served as https://, bet the addresses redirected or not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18582</commentid>
    <comment_count>7</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-08 22:25:06 +0000</bug_when>
    <thetext>this is not edk2 code issue.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>716</attachid>
            <date>2021-05-04 05:14:08 +0000</date>
            <delta_ts>2021-05-04 05:14:08 +0000</delta_ts>
            <desc>Exhibited mentions during boot</desc>
            <filename>Exhibited_Openssl_URL_during_boot.png</filename>
            <type>image/png</type>
            <size>372759</size>
            <attacher>ricky.tigg</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3861</bug_id>
          
          <creation_ts>2022-03-04 01:30:11 +0000</creation_ts>
          <short_desc>Add dependency of VariableSmm driver to make it work normally.</short_desc>
          <delta_ts>2022-12-02 03:22:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="zhihao">zhihao.li</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18558</commentid>
    <comment_count>0</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-03-04 01:30:11 +0000</bug_when>
    <thetext>UefiCpuPkg define a new Protocol with the new services
SmmWaitForAllProcessor(), which can be used by SMI handler
to optionally wait for other APs to complete SMM rendezvous in
relaxed AP mode.

VariableSmm driver need use SmmCpuRendezvousLib, So add
SmmCpuRendezvousLib in OvmfPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20169</commentid>
    <comment_count>1</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-12-02 03:22:06 +0000</bug_when>
    <thetext>Fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3239</bug_id>
          
          <creation_ts>2021-02-26 07:27:35 +0000</creation_ts>
          <short_desc>SctPkg/build.sh broken by superfluous CR</short_desc>
          <delta_ts>2021-03-03 22:26:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15154</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-02-26 07:27:35 +0000</bug_when>
    <thetext>Patch 9d34508dc9 (&quot;uefi-sct/SctPkg: Changed compiler check from greater 5 to equal to 5&quot;) introduced a superfluous carriage return. This results in an error:

uefi-sct/SctPkg/build.sh: line 61: syntax error near unexpected token `fi&apos;
uefi-sct/SctPkg/build.sh: line 61: `    fi&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15155</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-02-26 07:30:52 +0000</bug_when>
    <thetext>Observed with Debian Bullseye, GNU bash, version 5.1.4(1)-release</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15156</commentid>
    <comment_count>2</comment_count>
      <attachid>654</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-02-26 07:42:59 +0000</bug_when>
    <thetext>Created attachment 654
[PATCH edk2-test 1/1] SctPkg: remove CR in uefi-sct/SctPkg/build.sh

Patch appended and submitted:

[PATCH edk2-test 1/1] SctPkg: remove CR in uefi-sct/SctPkg/build.sh https://edk2.groups.io/g/devel/message/72232</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15179</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-02 11:03:03 +0000</bug_when>
    <thetext>The appended patch was reviewed:

Reviewed-by: Barton Gao &lt;gaojie@byosoft.com.cn&gt;
https://edk2.groups.io/g/devel/message/72253

Reviewed-by: G Edhaya Chandran&lt;edhaya.chandran@arm.com&gt;
https://edk2.groups.io/g/devel/message/72341

Please, consider for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15209</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-03 22:26:53 +0000</bug_when>
    <thetext>Patch applied

435b79a7bbbf (&quot;SctPkg: remove CR in uefi-sct/SctPkg/build.sh&quot;)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>654</attachid>
            <date>2021-02-26 07:42:59 +0000</date>
            <delta_ts>2021-02-26 07:42:59 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] SctPkg: remove CR in uefi-sct/SctPkg/build.sh</desc>
            <filename>0001-SctPkg-remove-CR-in-uefi-sct-SctPkg-build.sh.patch</filename>
            <type>text/plain</type>
            <size>968</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3733</bug_id>
          
          <creation_ts>2021-11-14 07:58:55 +0000</creation_ts>
          <short_desc>time_t typedef is incorrect</short_desc>
          <delta_ts>2022-12-01 03:32:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>4167</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17747</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-11-14 07:58:55 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/blob/master/CryptoPkg/Library/Include/CrtLibSupport.h#L107

We use &quot;typedef INT32          time_t;&quot;

This is incorrect. According to https://www.ibm.com/docs/en/ibm-mq/9.0?topic=platforms-standard-data-types-unix-linux-windows. time_t is 64bit in 64bit system.

Maybe it does not cause error just because we does not use time_t yet. Or the error is hidden, not exposed yet.

Anyway, it is a potential issue.

If there is a function calls &quot;time_t         time        (time_t *);&quot;, the system may crash.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17820</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 22:02:39 +0000</bug_when>
    <thetext>Jiewen: will you provide the fix for it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18697</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 22:25:35 +0000</bug_when>
    <thetext>Jiewen: will you work on it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20161</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-12-01 03:32:56 +0000</bug_when>
    <thetext>duplicated with https://bugzilla.tianocore.org/show_bug.cgi?id=4167

*** This bug has been marked as a duplicate of bug 4167 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3123</bug_id>
          
          <creation_ts>2020-12-16 04:08:44 +0000</creation_ts>
          <short_desc>please add file buffering to the COMP command</short_desc>
          <delta_ts>2021-01-19 13:47:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3125</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14597</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-16 04:08:44 +0000</bug_when>
    <thetext>(master @ 01726b6d23d4)

The COMP shell command (implemented in
&quot;ShellPkg/Library/UefiShellDebug1CommandsLib/Comp.c&quot;) compares two files
byte for byte. In order to retrieve the bytes to compare, it invokes
gEfiShellProtocol-&gt;ReadFile() on both files, using a single-byte buffer
every time.

This is very inefficient; the underlying EFI_FILE_PROTOCOL.Read()
function may be costly.

I&apos;ve reviewed several other UEFI shell commands, by grepping the
ShellPkg/Library/ directory tree for the whole words &quot;ReadFile&quot;,
&quot;WriteFile&quot;, &quot;ShellReadFile&quot;, &quot;ShellWriteFile&quot;. There are four classes
of commands:

(1) Commands that read or write the file in one go. Example:
    EfiCompress, EfiDecompress.

(2) Commands that read or write the file in
    &quot;PcdShellFileOperationSize&quot;-sized chunks. Example: Cp.

(3) Commands that read or write data that is known to have a particular
    structure, or is being parsed for a particular structure. These
    commands are justified to read the input in byte-sized (or small
    structure-sized) chunks. Examples:

    - IsStdInDataAvailable()
      [ShellPkg/Library/UefiShellLevel2CommandsLib/Parse.c]

    - ShellFileHandleReadLine()
      [ShellPkg/Library/UefiShellLib/UefiShellLib.c]

    - InternalPrintTo() [ShellPkg/Library/UefiShellLib/UefiShellLib.c]

    - FileBufferSave(), where it writes the BOM
      [ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/FileBuffer.c]

(4) Commands that read or write the file in unjustifiedly small chunks.
    The only member of this class is COMP
    [ShellPkg/Library/UefiShellDebug1CommandsLib/Comp.c]:

&gt;|         while (DiffPointNumber &lt; DifferentCount) {
&gt;|           DataSizeFromFile1 = 1;
&gt;|           DataSizeFromFile2 = 1;
&gt;|           OneByteFromFile1 = 0;
&gt;|           OneByteFromFile2 = 0;
&gt;|           Status = gEfiShellProtocol-&gt;ReadFile (FileHandle1, &amp;DataSizeFromFile1, &amp;OneByteFromFile1);
&gt;|           ASSERT_EFI_ERROR (Status);
&gt;|           Status = gEfiShellProtocol-&gt;ReadFile (FileHandle2, &amp;DataSizeFromFile2, &amp;OneByteFromFile2);
&gt;|           ASSERT_EFI_ERROR (Status);

Please add buffering to COMP -- the byte-fetching logic should be
improved with an internal read-ahead buffer (for each file), using
&quot;PcdShellFileOperationSize&quot;. In other words, COMP should belong in class
(2).

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14652</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-22 20:32:31 +0000</bug_when>
    <thetext>I&apos;ll send a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14701</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-04 10:45:55 +0000</bug_when>
    <thetext>Addressed by patch #1 in

* [edk2-devel] [PATCH 0/8]
  ShellPkg, ArmVirtPkg, OvmfPkg: shell usability improvements

https://edk2.groups.io/g/devel/message/69590
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00070.html
Message-Id: &lt;20210104154235.31785-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14795</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-13 03:56:40 +0000</bug_when>
    <thetext>Addressed by patch #1 in

* [edk2-devel] [PATCH v2 00/10]
  multiple packages: shell usability improvements

https://edk2.groups.io/g/devel/message/70216
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00700.html
Message-Id: &lt;20210113085453.10168-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14837</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-19 13:47:07 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Addressed by patch #1 in
&gt; 
&gt; * [edk2-devel] [PATCH v2 00/10]
&gt;   multiple packages: shell usability improvements
&gt; 
&gt; https://edk2.groups.io/g/devel/message/70216
&gt; https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00700.html
&gt; Message-Id: &lt;20210113085453.10168-1-lersek@redhat.com&gt;

Merged as commit range e68c2a22caae..6e5586863148, via
&lt;https://github.com/tianocore/edk2/pull/1370&gt;:

*  1  f72fd9616eed ShellPkg/Comp: add file buffering
   2  2912341cd924 OvmfPkg: raise PcdShellFileOperationSize to 128KB
   3  a0b352e18bde ArmVirtPkg: raise PcdShellFileOperationSize to 128KB
   4  130e929f98ce EmulatorPkg: add OrderedCollectionLib class
                   resolution
   5  ef03e72651b8 UefiPayloadPkg: add OrderedCollectionLib class
                   resolution
   6  101c55ac0db7 ShellPkg/ShellCommandLib: add ShellSortFileList()
   7  70254306a823 ShellPkg/Ls: sort output by FileName in non-SFO mode
   8  c8ce60eb2938 ShellPkg/ShellProtocol: sort files by FullName in
                   RemoveDupInFileList()
   9  d3f3c942013a OvmfPkg: disable list length checks in NOOPT and
                   DEBUG builds
  10  6e5586863148 ArmVirtPkg: disable list length checks in NOOPT and
                   DEBUG builds</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3611</bug_id>
          
          <creation_ts>2021-09-08 01:14:25 +0000</creation_ts>
          <short_desc>readme.md in AppPkg to be updated to include python 3.6.8</short_desc>
          <delta_ts>2021-09-12 10:16:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Jayaprakash Nevara">n.jayaprakash</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17203</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-09-08 01:14:25 +0000</bug_when>
    <thetext>Python 3.6.8 UEFI port has been made available to community through edk2-libc project (REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3588)

So in readme.md file below section needs to be updated to include the python 3.6.8 as well 

&lt;&lt;&lt; extracted from readme.md
The EDK II open source project contains the following components that are covered by additional licenses:

AppPkg/Applications/Python/Python-2.7.2/Tools/pybench
AppPkg/Applications/Python/Python-2.7.2
AppPkg/Applications/Python/Python-2.7.10
&gt;&gt;&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17204</commentid>
    <comment_count>1</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-09-08 01:16:30 +0000</bug_when>
    <thetext>Changing the status to confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17212</commentid>
    <comment_count>2</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-09-08 11:00:21 +0000</bug_when>
    <thetext>Created a branch with the change, will be submitting it for review and commit</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17244</commentid>
    <comment_count>3</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-09-12 10:16:42 +0000</bug_when>
    <thetext>Change commited to the master repo</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3503</bug_id>
          
          <creation_ts>2021-07-21 03:34:26 +0000</creation_ts>
          <short_desc>best seo services new york | seo agency</short_desc>
          <delta_ts>2021-07-26 21:42:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc>https://www.firstrankseoservices.com/seo-services-in-new-york</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Jonsan smith">smitjohan267</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16668</commentid>
    <comment_count>0</comment_count>
    <who name="Jonsan smith">smitjohan267</who>
    <bug_when>2021-07-21 03:34:26 +0000</bug_when>
    <thetext>Hi, i&apos;m Jonsan smith. I’m team member firstrankseoservices and one the best SEO agency. Implementing SEO techniques during developing content helps to boost your website ranking in the search engine results. our team have taken the best of local SEO services business directories and social media and offers an online business directory that gives your business the best opportunity to be found by customers.if the mind buy an online SEO Services New York you can contact us. We are provide best service  24 hours support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16699</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-26 21:42:38 +0000</bug_when>
    <thetext>this is the invalid request.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3395</bug_id>
          
          <creation_ts>2021-05-16 23:52:38 +0000</creation_ts>
          <short_desc>Bug fix for existing Yaml script for BSF to YAML conversion and array size check issue</short_desc>
          <delta_ts>2021-05-17 20:51:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Loo Tung Lun">tung.lun.loo</reporter>
          <assigned_to name="Loo Tung Lun">tung.lun.loo</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>tung.lun.loo</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16070</commentid>
    <comment_count>0</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-05-16 23:52:38 +0000</bug_when>
    <thetext>The UINT16 array size check is misrepresented in existing FspDscBsf2Yaml.py code. With current code, below structure will fail in size check resulting in build failure to generate yaml file.

| * | 0x0A | { 0xFFFF, 0xFFFF, 0x0000, 0x0000, 0x0000 }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16071</commentid>
    <comment_count>1</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-05-17 00:08:19 +0000</bug_when>
    <thetext>Patch submitted for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16073</commentid>
    <comment_count>2</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-05-17 00:12:36 +0000</bug_when>
    <thetext>Another observation for this BSF to YAML fix was during ADL BSF to YAML conversion. When executing FspDscBsf2Yaml.py, below error was returned.

line 46, in &lt;lambda&gt;
    return reduce(lambda x, y: (x &lt;&lt; 8) | y, Bytes[::-1])
TypeError: unsupported operand type(s) for &lt;&lt;: &apos;str&apos; and &apos;int&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16082</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-05-17 20:51:39 +0000</bug_when>
    <thetext>commit 1fbf5e30ae8eb725f4e10984f7b0a208f78abbd0 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Loo, Tung Lun &lt;tung.lun.loo@intel.com&gt;
Date:   Mon May 17 12:04:13 2021 +0800

    IntelFsp2Pkg: YAML script bug fix

    REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3395

    This patch fixes the issue observed during
    BSF file to YAML file conversion. It also
    addresses the issue during multibyte array
    data conversion check, for example the data
    representation of 0xFFFF instead of 0xFF, 0xFF
    would be thrown exception &quot;Array size is not
    proper&quot; without this patch.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Signed-off-by: Loo Tung Lun &lt;tung.lun.loo@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3885</bug_id>
          
          <creation_ts>2022-03-25 02:32:42 +0000</creation_ts>
          <short_desc>Redefinition bug in CrtLibSupport.h</short_desc>
          <delta_ts>2022-03-28 01:08:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="zhihao">zhihao.li</reporter>
          <assigned_to name="zhihao">zhihao.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18715</commentid>
    <comment_count>0</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-03-25 02:32:42 +0000</bug_when>
    <thetext>Parallel hash patch redefines uint_64 type in CrtLibSupport.h which has been defined in openssl/include/openssl/e_os2.h.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18716</commentid>
    <comment_count>1</comment_count>
    <who name="zhihao">zhihao.li</who>
    <bug_when>2022-03-25 02:51:08 +0000</bug_when>
    <thetext>cryptMd5.c including e_os2.h cause redefinition bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18725</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-28 01:08:14 +0000</bug_when>
    <thetext>Fix at https://github.com/tianocore/edk2/pull/2692</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3263</bug_id>
          
          <creation_ts>2021-03-12 17:47:35 +0000</creation_ts>
          <short_desc>build tool does not work with Python 3.9</short_desc>
          <delta_ts>2021-03-16 21:36:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3136</dup_id>
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3136</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Felix">felixp</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15305</commentid>
    <comment_count>0</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-03-12 17:47:35 +0000</bug_when>
    <thetext>Build tool crashes during FFS file generation when executed with Python 3.9 because fromstring method of the array.array class has been deprecated (renamed to frombytes)
Refer to https://docs.python.org/3/library/array.html?highlight=array#array.array.frombytes

Apart from the specific problem at hand this issue raises a more generic question of forward compatibility of the build tools with the future versions of Python.
Python community typically provides an advanced notification about deprecation or replacement of the interfaces with special deprecation warnings. There are usually several versions of Python supporting both old and new interfaces. For example, in this case both interfaces (fromstring and frombbytes) were supported for 10 years (fromstring was deprecated in python 3.2 released in 2011; it was removed in 3.9 released in 2021). So the key in ensuring compatibility with the future version of python is paying attention to the deprecation warnings. The warnings are by default disabled . They can be enabled by passing &apos;-We::DeprecationWarning&apos; command line option to the python interpreter.
Refer to 
https://docs.python.org/3/using/cmdline.html#cmdoption-w
https://docs.python.org/3/library/warnings.html#describing-warning-filters

I think it makes sense to enable deprecation warnings in the CI builds to catch forward compatibility issues early.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15320</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-16 13:55:36 +0000</bug_when>
    <thetext>(In reply to Felix from comment #0)
&gt; Build tool crashes during FFS file generation when executed with Python 3.9
&gt; because fromstring method of the array.array class has been deprecated
&gt; (renamed to frombytes)
&gt; Refer to
&gt; https://docs.python.org/3/library/array.html?highlight=array#array.array.
&gt; frombytes

Hasn&apos;t this been fixed in commit 20b292d0cdf7 (&quot;BaseTools: Fix the issue caused by tostring() removal on Py39&quot;, 2021-01-06), for bug 3136?

The only &quot;fromstring&quot; invocations are left in &quot;BaseTools/Source/Python/Eot/EotMain.py&quot;, as far as I can see (as of current &quot;master&quot; HEAD f3bdfc41866e). AIUI &quot;Eot&quot; is usually not invoked by &quot;build&quot;.

&gt; 
&gt; Apart from the specific problem at hand this issue raises a more generic
&gt; question of forward compatibility of the build tools with the future
&gt; versions of Python.
&gt; Python community typically provides an advanced notification about
&gt; deprecation or replacement of the interfaces with special deprecation
&gt; warnings. There are usually several versions of Python supporting both old
&gt; and new interfaces. For example, in this case both interfaces (fromstring
&gt; and frombbytes) were supported for 10 years (fromstring was deprecated in
&gt; python 3.2 released in 2011; it was removed in 3.9 released in 2021). So the
&gt; key in ensuring compatibility with the future version of python is paying
&gt; attention to the deprecation warnings. The warnings are by default disabled
&gt; . They can be enabled by passing &apos;-We::DeprecationWarning&apos; command line
&gt; option to the python interpreter.
&gt; Refer to 
&gt; https://docs.python.org/3/using/cmdline.html#cmdoption-w
&gt; https://docs.python.org/3/library/warnings.html#describing-warning-filters
&gt; 
&gt; I think it makes sense to enable deprecation warnings in the CI builds to
&gt; catch forward compatibility issues early.

This is a good idea of course.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15322</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-16 13:58:05 +0000</bug_when>
    <thetext>See also bug 3136.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15324</commentid>
    <comment_count>3</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2021-03-16 14:31:08 +0000</bug_when>
    <thetext>Yes, this has been fixed in commit 20b292d0cdf7 for bug 3136. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15325</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-16 21:36:18 +0000</bug_when>
    <thetext>This issue can be closed now.

*** This bug has been marked as a duplicate of bug 3136 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3751</bug_id>
          
          <creation_ts>2021-11-23 20:08:11 +0000</creation_ts>
          <short_desc>Check routine from Mm Communication from Arm package fails unnecessarily</short_desc>
          <delta_ts>2022-01-27 18:02:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17811</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-11-23 20:08:11 +0000</bug_when>
    <thetext>Currently the MM communicate routine from ArmPkg is failing the operation if the input message length does not equal to incoming buffer size (https://github.com/tianocore/edk2/blob/e1e7306b54147e65cb7347b060e94f336d4a82d2/ArmPkg/Drivers/MmCommunicationDxe/MmCommunication.c#L110).

As specification defined, the CommSize, as input, should stand for &quot;The size of the data buffer being passed in.&quot;, which, in my perception, is the maximal number of bytes &quot;CommBuffer&quot; can hold. In turn, this parameter can be used for MM handlers to determine whether the output data is too large to fit in this buffer.

However, the line pointed out is enforcing the incoming buffer to hold exactly the number of USED bytes, which mismatches with the PI spec description.

The suggested change is to make this routine check to make sure the incoming buffer size is at least large enough to hold message length and communicate header combined.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17812</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 21:44:54 +0000</bug_when>
    <thetext>Include ArmPkg maintainer</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17865</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-11-29 22:18:14 +0000</bug_when>
    <thetext>Patch sent here: https://edk2.groups.io/g/devel/message/84140</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17963</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-12-07 21:57:13 +0000</bug_when>
    <thetext>Kun has sent the patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18145</commentid>
    <comment_count>4</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-14 15:24:12 +0000</bug_when>
    <thetext>v2 patches sent here: https://edk2.groups.io/g/devel/message/85116. Changes in ArmPkg are not reviewed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18187</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-19 14:03:57 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/topic/87869771#85116 patches reviewed. Awaiting merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18214</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-27 18:02:07 +0000</bug_when>
    <thetext>Merged as commit 5b39832e184f3d00b0b35f006706d4c7e9a54fae-8cc5590eab974ab34e2bfa1c9d6a7ef94c70ffae from PR https://github.com/tianocore/edk2/pull/2443.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18215</commentid>
    <comment_count>7</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-01-27 18:02:46 +0000</bug_when>
    <thetext>Mark this ticket as resolved as the change was checked in.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3151</bug_id>
          
          <creation_ts>2021-01-04 09:31:29 +0000</creation_ts>
          <short_desc>Shell: pathname / filename sorting</short_desc>
          <delta_ts>2021-05-13 08:53:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3388</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14699</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-04 09:31:29 +0000</bug_when>
    <thetext>With edk2 master @ 0785c619a58a, I have identified two usability
shortcomings in how the UEFI shell works with file lists:

(1) LS prints filenames in unpredictable order, directly exposing the
directory order from the underlying EFI_SIMPLE_FILE_SYSTEM. Locating a
file in the listing is therefore not easy for a human reader. Even the
&quot;.&quot; (dot) and &quot;..&quot; (dot-dot) entries can show up in any position
relative to other entries in the same directory.

(2) The current implementation of
EFI_SHELL_PROTOCOL.RemoveDupInFileList(), namely
EfiShellRemoveDupInFileList() in
&quot;ShellPkg/Application/Shell/ShellProtocol.c&quot;, has quadratic time
complexity. It slows down working with long file lists.

I&apos;m proposing the following improvements:

(1) In LS, sort the output by FileName (= last pathname component), when
not in SFO mode.

(2) In EfiShellRemoveDupInFileList(), use an O(n*log(n)) *sorting*
algorithm (by FullName), for duplicate elimination.

This has two benefits:

(2a) EfiShellRemoveDupInFileList(), and other shell operations involving
this protocol member, become faster.

(2b) the FileList parameter becomes sorted on output.

On one hand, the UEFI shell spec leaves FileList order unspecified,
therefore UEFI shell spec conformance is left intact.

On the other hand, the ShellOpenFileMetaArg() function in the
ShellPkg/Library/UefiShellLib instance will produce file lists that are
sorted by FullName. Consequently, when used with wildcards, the ATTRIB,
CP, FOR, LOAD, LOADPCIROM, LS, MV, RM, TOUCH, TYPE commands will process
files in FullName order.

--*--

Note that both improvements compose very nicely specifically for the LS
command. There are four cases to consider:
#1 &quot;LS&quot; without wildcards
#2 &quot;LS -R&quot;, or &quot;LS&quot; with wildcards
#3 &quot;LS -SFO&quot; without wildcards,
#4 &quot;LS -R -SFO&quot;, or &quot;LS -SFO&quot; with wildcards

In cases #3 and #4, &quot;-SFO&quot; is enabled. This causes LS to print full
pathnames. Therefore the FullName-based sorting from improvement (2) is
sufficient, for getting a usefully sorted list; improvement (1) is
unneeded (and therefore inactive).

In case#1, improvement (1) is active on top of improvement (2); that is,
the single-directory listing is stably re-sorted by FileName on top of
the FullName-based sorting from improvement (2). This has the useful
consequence of consistently sorting &quot;.&quot; (dot) before &quot;..&quot; (dot-dot),
which would *not* be the case from a FullName-based sorting.

In case#2, improvement (1) is again active on top of improvement (2).
Both improvements together are useful because a wildcard term like &quot;LS
apps\*\*.efi&quot; will produce a listing that is primarily sorted by last
pathname component (and so it&apos;s easy for humans to read), but for
identical FileNames, it will also honor the ordering between their
containing directories.


The commit messages on the patches will contain example listings, to
illustrate the effects of improvements (1) and (2).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14703</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-04 10:46:04 +0000</bug_when>
    <thetext>Addressed by patches #4-#6 in

* [edk2-devel] [PATCH 0/8]
  ShellPkg, ArmVirtPkg, OvmfPkg: shell usability improvements

https://edk2.groups.io/g/devel/message/69590
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00070.html
Message-Id: &lt;20210104154235.31785-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14794</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-13 03:30:36 +0000</bug_when>
    <thetext>Related edk2-platforms series:

* [edk2-devel] [edk2-platforms PATCH 0/3]
  add OrderedCollectionLib class resolution

https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00694.html
https://edk2.groups.io/g/devel/message/70210
Message-Id: &lt;20210113082843.9095-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14797</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-13 03:58:08 +0000</bug_when>
    <thetext>Addressed by patches #4-#8 in

* [edk2-devel] [PATCH v2 00/10]
  multiple packages: shell usability improvements

https://edk2.groups.io/g/devel/message/70216
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00700.html
Message-Id: &lt;20210113085453.10168-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14833</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-18 03:54:56 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; Related edk2-platforms series:
&gt; 
&gt; * [edk2-devel] [edk2-platforms PATCH 0/3]
&gt;   add OrderedCollectionLib class resolution
&gt; 
&gt; https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00694.html
&gt; https://edk2.groups.io/g/devel/message/70210
&gt; Message-Id: &lt;20210113082843.9095-1-lersek@redhat.com&gt;

The first two patches of this series have been committed as 0864b5027085 and d12d9c963ba3, respectively. The third patch has been resubmitted stand-alone, with an update:

* [edk2-devel] [edk2-platforms PATCH v2]
  Intel Platforms: add OrderedCollectionLib class resolution

https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00984.html
https://edk2.groups.io/g/devel/message/70497
Message-Id: &lt;20210118084803.22552-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14835</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-19 03:56:27 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #4)

&gt; * [edk2-devel] [edk2-platforms PATCH v2]
&gt;   Intel Platforms: add OrderedCollectionLib class resolution
&gt; 
&gt; https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00984.html
&gt; https://edk2.groups.io/g/devel/message/70497
&gt; Message-Id: &lt;20210118084803.22552-1-lersek@redhat.com&gt;

Pushed as commit b29970a5c5a1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14839</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-19 13:47:15 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Addressed by patches #4-#8 in
&gt; 
&gt; * [edk2-devel] [PATCH v2 00/10]
&gt;   multiple packages: shell usability improvements
&gt; 
&gt; https://edk2.groups.io/g/devel/message/70216
&gt; https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00700.html
&gt; Message-Id: &lt;20210113085453.10168-1-lersek@redhat.com&gt;

Merged as commit range e68c2a22caae..6e5586863148, via
&lt;https://github.com/tianocore/edk2/pull/1370&gt;:

   1  f72fd9616eed ShellPkg/Comp: add file buffering
   2  2912341cd924 OvmfPkg: raise PcdShellFileOperationSize to 128KB
   3  a0b352e18bde ArmVirtPkg: raise PcdShellFileOperationSize to 128KB
*  4  130e929f98ce EmulatorPkg: add OrderedCollectionLib class
                   resolution
*  5  ef03e72651b8 UefiPayloadPkg: add OrderedCollectionLib class
                   resolution
*  6  101c55ac0db7 ShellPkg/ShellCommandLib: add ShellSortFileList()
*  7  70254306a823 ShellPkg/Ls: sort output by FileName in non-SFO mode
*  8  c8ce60eb2938 ShellPkg/ShellProtocol: sort files by FullName in
                   RemoveDupInFileList()
   9  d3f3c942013a OvmfPkg: disable list length checks in NOOPT and
                   DEBUG builds
  10  6e5586863148 ArmVirtPkg: disable list length checks in NOOPT and
                   DEBUG builds</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3527</bug_id>
          
          <creation_ts>2021-08-04 04:58:11 +0000</creation_ts>
          <short_desc>How to perform Roadrunner email settings?</short_desc>
          <delta_ts>2021-08-09 22:48:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="woakeschris">woakeschris41</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16775</commentid>
    <comment_count>0</comment_count>
    <who name="woakeschris">woakeschris41</who>
    <bug_when>2021-08-04 04:58:11 +0000</bug_when>
    <thetext>To perform Roadrunner Email Settings, you need to have an idea about certain technical skills. You should know how to navigate and set up certain settings. To get the full advantage and features of the Roadrunner email service, follow the below instructions:
1.	Go to ‘My accounts’. It will be written on the left or right side of the account email panel.
2.	Under my accounts, you need to click on the ‘Add Account’ option.
3.	This will help you to add a new account.
4.	Next, you are going to set up your own Roadrunner email address.
5.	For the same, think about the username you would like to have.
6.	It can be in the form of the: Name of your account@—-.(domain name).com’. The domain name here means you need to enter the name of your domain.
7.	All the characters should be in lower case.
8.	Next, you need to set up the password. 
9.	Think about the password, which would be difficult for others to find out.

Visit Us: https://www.limksys.com/roadrunner-email-settings/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16852</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-09 22:48:44 +0000</bug_when>
    <thetext>this is not an issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3418</bug_id>
          
          <creation_ts>2021-05-27 04:34:15 +0000</creation_ts>
          <short_desc>Having problem when xHCI create Setup Stage TRB</short_desc>
          <delta_ts>2021-06-02 03:58:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wenyi, Xie">xiewenyi0201</reporter>
          <assigned_to name="Wenyi, Xie">xiewenyi0201</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16194</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-05-27 04:34:15 +0000</bug_when>
    <thetext>According to usb-xhci specification, at USB packet level, a Control Transfer consists of multiple transactions partitioned into stages: a setup stage, an optional data stage, and a terminating status stage.
If Data Stage does not exist, the Transfer Type flag(TRT) should be No Data Stage.

But in function XhcCreateUrb() in file XhciSched.c, the Direction is set to EfiUsbDataIn  or EfiUsbDataOut.
Ep-&gt;Direction = ((EpAddr &amp; 0x80) != 0) ? EfiUsbDataIn : EfiUsbDataOut;

and then in function XhcCreateTransferTrb(), TRT is set  to 3 or 2, it will never be 0.
if (Urb-&gt;Ep.Direction == EfiUsbDataIn) {
        TrbStart-&gt;TrbCtrSetup.TRT = 3;
      } else if (Urb-&gt;Ep.Direction == EfiUsbDataOut) {
        TrbStart-&gt;TrbCtrSetup.TRT = 2;
      } else {
        TrbStart-&gt;TrbCtrSetup.TRT = 0;
      }

TRT Value Definition 
0 No Data Stage
1 Reserved
2 OUT Data Stage
3 IN Data Stage</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16219</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-05-30 23:29:53 +0000</bug_when>
    <thetext>V1 patch sent at:
https://edk2.groups.io/g/devel/message/75808</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16235</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-06-02 03:58:15 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/1683
Commit - https://github.com/tianocore/edk2/commit/b5379899b38ed84561db6dc07dc4641a049ae238</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3909</bug_id>
          
          <creation_ts>2022-04-21 16:31:35 +0000</creation_ts>
          <short_desc>SecureBootVariableLib depends on time protocol</short_desc>
          <delta_ts>2022-07-07 01:46:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>min.m.xu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18882</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-04-21 16:31:35 +0000</bug_when>
    <thetext>Current implementation of CreateTimeBasedPayload from SecureBootVariableLib will directly use the time protocol from gRT (see here: https://github.com/tianocore/edk2/blob/b06a007b6471b6eba6d1c38ff1bcfff183b57488/SecurityPkg/Library/SecureBootVariableLib/SecureBootVariableLib.c#L260).

This would push the availability of this library to be after real time clock protocol and potentially cause circular dependencies for certain platforms.

The suggestion is to make this interface to take EFI_TIME instance as an input and the caller would supply this per their own discretion. This would require the consumer to update the way of invocation but leave the flexibilities of callers to invoke at an earlier stage during boot.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18883</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-04-21 16:32:08 +0000</bug_when>
    <thetext>Potential change for the library would be:
https://github.com/kuqin12/mu_tiano_plus/commit/3f52a8585389c01656fb2841da469fb10aaa0b1d</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18884</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-04-21 16:33:01 +0000</bug_when>
    <thetext>Potential change for the consumer module would be:
https://github.com/kuqin12/mu_tiano_plus/commit/06efffd24e3c74a62dfb5de21f022dbfa134f90a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19002</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 22:08:41 +0000</bug_when>
    <thetext>Include Jiewen and Min to reivew this proposal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19211</commentid>
    <comment_count>4</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-07-07 01:46:06 +0000</bug_when>
    <thetext>Merged as 56c717aafa037f8d1fa3ef8c7cf7f4de91c2575e &lt;https://github.com/tianocore/edk2/pull/3050&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3290</bug_id>
          
          <creation_ts>2021-03-31 11:34:45 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: BuildAtaDeviceNode() fails for L&quot;Ata(0,0,0)&quot;</short_desc>
          <delta_ts>2021-10-25 03:57:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15483</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-31 11:34:45 +0000</bug_when>
    <thetext>When BuildAtaDeviceNode() is called with L&quot;Ata(0,0,0)&quot; it creates a node Ata(1,1,0).

This leads to test to an assertion failed test result

SctPkg/TestCase/UEFI/EFI/Protocol/DevicePathToText/BlackBoxTest/DevicePathToTextBBTestFunction.c:332:Convert result: Ata(0,0,0) - Expected: Ata(Primary,Master,0)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15484</commentid>
    <comment_count>1</comment_count>
      <attachid>686</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-31 11:37:58 +0000</bug_when>
    <thetext>Created attachment 686
[PATCH edk2-test 1/1] uefi-sct/SctPkg: fix BuildAtaDeviceNode()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15485</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-31 11:41:43 +0000</bug_when>
    <thetext>Patch appended and sent to list:

[PATCH edk2-test 1/1] uefi-sct/SctPkg: fix BuildAtaDeviceNode()
https://edk2.groups.io/g/devel/message/73580

Please, review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17139</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-02 10:28:34 +0000</bug_when>
    <thetext>Heinrich to check the comments and update</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17216</commentid>
    <comment_count>4</comment_count>
      <attachid>824</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-09-08 15:24:42 +0000</bug_when>
    <thetext>Created attachment 824
[PATCH edk2-test v2 1/1] uefi-sct/SctPkg: fix BuildAtaDeviceNode()

Please, review the revised attached patch which has been sent to the mailing list:

[PATCH edk2-test v2 1/1] uefi-sct/SctPkg: fix BuildAtaDeviceNode()
https://edk2.groups.io/g/devel/message/80377</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17497</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-10-12 09:16:51 +0000</bug_when>
    <thetext>The appended patch was reviewed:

Reviewed-by: G Edhaya Chandran&lt;edhaya.chandran@arm.com&gt;
https://edk2.groups.io/g/devel/message/81811

Please, consider for merging</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17603</commentid>
    <comment_count>6</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-10-25 03:57:13 +0000</bug_when>
    <thetext>Patch is upstreamed through the commit id: https://github.com/tianocore/edk2-test/commit/dc6efa23c099a04702854d36e518939b50aeea7f</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>686</attachid>
            <date>2021-03-31 11:37:58 +0000</date>
            <delta_ts>2021-09-08 15:24:42 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: fix BuildAtaDeviceNode()</desc>
            <filename>0001-uefi-sct-SctPkg-fix-BuildAtaDeviceNode.patch</filename>
            <type>text/plain</type>
            <size>2737</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>824</attachid>
            <date>2021-09-08 15:24:42 +0000</date>
            <delta_ts>2021-09-08 15:24:42 +0000</delta_ts>
            <desc>[PATCH edk2-test v2 1/1] uefi-sct/SctPkg: fix BuildAtaDeviceNode()</desc>
            <filename>0001-uefi-sct-SctPkg-fix-BuildAtaDeviceNode.patch</filename>
            <type>text/plain</type>
            <size>2776</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3779</bug_id>
          
          <creation_ts>2021-12-20 02:00:35 +0000</creation_ts>
          <short_desc>edk2-libc: Enhance Py3 to build with latest version of GCC tool chain on Linux</short_desc>
          <delta_ts>2022-10-07 02:39:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Jayaprakash Nevara">n.jayaprakash</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18027</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-12-20 02:00:35 +0000</bug_when>
    <thetext>The Py3 version available on edk2-libc repo supports building with the VS tool chains such as VS2019, VS2017 and etc. Currently it doesn&apos;t have support for building using Linux based tool chains such as GCC. This bug zilla ticket has been created to request for adding GCC compiler support for building Py3 UEFI interpreter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18087</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-04 21:52:21 +0000</bug_when>
    <thetext>JP will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18942</commentid>
    <comment_count>2</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-05-10 13:44:06 +0000</bug_when>
    <thetext>Able to compile the Python interpreter 3.6.8 except the ctypes module using GCC tool chain on Ubuntu Linux system 20.04 LTS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18963</commentid>
    <comment_count>3</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-05-18 14:35:51 +0000</bug_when>
    <thetext>Excluded the ctypes module from GCC compilation. 
I think it requires additional porting work. It requires help from Linux tool chain expert. Would be creating another BZ to track that. 

Also there is a limitation in the LibC support for edk2. Currently it can be built using only X64 bit version of GCC compiler tool chain. 

I am raising a merge request for the X64 bit GCC tool chin based compilation of the Python UEFI source code on Linux OS. 

These changes have been tested both with MSFT and GCC tool chains. Python UEFI interpreter is building fine with both the tool chains. I have also tested the Python UEFI interpreter from UEFI environment post building it with MSFT and GCC tool chains.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19062</commentid>
    <comment_count>4</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-06-09 23:51:40 +0000</bug_when>
    <thetext>Patch merged to the main repo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19083</commentid>
    <comment_count>5</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-06-16 13:23:43 +0000</bug_when>
    <thetext>Planning to checkin the changes required to build 32 bit GCC build</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19090</commentid>
    <comment_count>6</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-06-17 04:50:18 +0000</bug_when>
    <thetext>Submitted the patch request for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19728</commentid>
    <comment_count>7</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-10-07 02:39:31 +0000</bug_when>
    <thetext>This has been implemented.
The changes are merged to the git repo.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3173</bug_id>
          
          <creation_ts>2021-01-17 22:10:50 +0000</creation_ts>
          <short_desc>Implement EmulatorPkg platform Redfish credential library</short_desc>
          <delta_ts>2021-01-17 22:11:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nickle.wang</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14826</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-17 22:10:50 +0000</bug_when>
    <thetext>Platform-specific implementation of acquiring credential
to access to Redfish service. This is the platform library
that incorporates with Redfish Credential DXE driver under
Redfish package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14827</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-17 22:11:25 +0000</bug_when>
    <thetext>Fixed at c88736f8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3545</bug_id>
          
          <creation_ts>2021-08-10 04:41:34 +0000</creation_ts>
          <short_desc>How to reach to cash app customer service number?</short_desc>
          <delta_ts>2021-08-16 21:46:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc>https://www.7qasearch.net/robinhood-customer-service/</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="james smith">js8435877</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>albertlisy90</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Distribution Packaging Specificatio</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16855</commentid>
    <comment_count>0</comment_count>
    <who name="james smith">js8435877</who>
    <bug_when>2021-08-10 04:41:34 +0000</bug_when>
    <thetext>The presence of the cash app customer service number has provided the cash app customer with the confidence of having an instant solution service for their cash app account. The unexpected problems usually appear with no prior notification and finally create problems for cash app customers. Therefore, considering the factors is the most important thing to handle the cash app account with no troubles. https://www.contactcustomer-service.co/phone-number/Cash-app</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16875</commentid>
    <comment_count>1</comment_count>
    <who name="albert lisy">albertlisy90</who>
    <bug_when>2021-08-11 06:18:07 +0000</bug_when>
    <thetext>If you are chime users and having issues in accessing your app then immediately initiate to converse with the Chime Customer Service executives. They are available round the clock to help their customers to listen to them and fix the unexpected situations they face, unfortunately. They implement the latest techniques to resolve the Chi tech issues and enable their customers to know more about the online payment app. https://www.monktech.us/chime-customer-service-number.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16876</commentid>
    <comment_count>2</comment_count>
    <who name="albert lisy">albertlisy90</who>
    <bug_when>2021-08-11 06:33:47 +0000</bug_when>
    <thetext>Through eBay Customer Service, fix the technical issue
Is there any sign in issues with eBay account?
Not able to add more accounts to the eBay account?
With eBay Customer Service, all the technical errors will be rectified immediately. The tech support team will handle every issue in no time. You can talk directly to the professionals for more help. https://www.7qasearch.net/ebay-customer-service-phone-number/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16877</commentid>
    <comment_count>3</comment_count>
    <who name="albert lisy">albertlisy90</who>
    <bug_when>2021-08-11 07:03:09 +0000</bug_when>
    <thetext>Fix the technical problems with reliable eBay Customer Service
Getting problems with an eBay account is common. By availing eBay Customer Service, you can remove all kinds of woes. eBay users will get a quick response for troubleshooting the problems. The techies of ebay will handle the problems by offering proper guidance and troubleshooting steps. Connect with experts for instant reliable help. https://www.monktech.us/ebay-customer-service-phone-number.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16878</commentid>
    <comment_count>4</comment_count>
    <who name="albert lisy">albertlisy90</who>
    <bug_when>2021-08-11 07:15:33 +0000</bug_when>
    <thetext>How to Handle The Situation If Robinhood Steal Your Money?
If it looks that Robinhood Steal Your Money, you can immediately apply for a refund to get your money back to your account with optimum ease. Apart from that, you need to go to the official help and support section of Robinhood account and come to know the right information in a hassle-free manner. https://www.7qasearch.net/blog/does-robinhood-steal-your-money/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16880</commentid>
    <comment_count>5</comment_count>
    <who name="albert lisy">albertlisy90</who>
    <bug_when>2021-08-11 07:22:13 +0000</bug_when>
    <thetext>Contact Robinhood Support to realize the most ideal approach to procure benefit by exchanging:
On the off chance that you have as of late began to utilize a Robinhood account, you should require the assistance of specialists to explore this application. We prescribe you to contact the Robinhood Support group accessible as needs be to think about this application. Leaders will inform you regarding the well-known administrations and exchanging elements of Robin hood. https://www.7qasearch.net/robinhood-customer-service/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16923</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:46:40 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3441</bug_id>
          
          <creation_ts>2021-06-09 04:39:23 +0000</creation_ts>
          <short_desc>Device path has wrong FV path if the boot manager menu is from different FV</short_desc>
          <delta_ts>2022-02-15 01:02:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16317</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2021-06-09 04:39:23 +0000</bug_when>
    <thetext>bugzilla https://bugzilla.tianocore.org/show_bug.cgi?id=3384 make is possible to let boot manager menu exists in different FV, but the device path is missed to fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16383</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-15 21:50:08 +0000</bug_when>
    <thetext>Zhiguang takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18362</commentid>
    <comment_count>2</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2022-02-15 01:02:29 +0000</bug_when>
    <thetext>fix at 1ad794b6276ed902a838a444504848255ce576c9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3937</bug_id>
          
          <creation_ts>2022-06-02 03:29:16 +0000</creation_ts>
          <short_desc>TDVF Lazy Accept in OvmfPkg</short_desc>
          <delta_ts>2022-11-01 11:38:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="mxu9">min.m.xu</reporter>
          <assigned_to name="mxu9">min.m.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19014</commentid>
    <comment_count>0</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2022-06-02 03:29:16 +0000</bug_when>
    <thetext>UnacceptedMemory is one of the four defined types of TD memory in Intel TDX guest. TDVF must invoke TDCALL [TDG.MEM.PAGE.ACCEPT] the unaccepted memory before use it. See [TDVF] Section 7.1.
TDVF: https://www.intel.com/content/dam/develop/external/us/en/documents/tdx-virtual-firmware-design-guide-rev-1.01.pdf 

It is a time-consuming task which impacts the boot performance badly. One of the mitigation is the lazy-accept mechanism. That the whole system memory is divided into 2 parts, one is accepted in bios phase, the other is tagged as EfiGcdMemoryTypeUnaccepted and OS will handle these &quot;unaccepted&quot; memories. See &quot;UEFI Spec v2.9 Table 7-5 Memory Type Usage before ExitBootServices()&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19015</commentid>
    <comment_count>1</comment_count>
    <who name="mxu9">min.m.xu</who>
    <bug_when>2022-06-02 03:29:43 +0000</bug_when>
    <thetext>Min is working on this feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19040</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-06-07 21:40:48 +0000</bug_when>
    <thetext>Min takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19894</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-11-01 11:38:53 +0000</bug_when>
    <thetext>merged https://github.com/tianocore/edk2/pull/3572</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3808</bug_id>
          
          <creation_ts>2022-01-17 16:42:33 +0000</creation_ts>
          <short_desc>CI: Uncrustify test should display what changes were made</short_desc>
          <delta_ts>2022-03-20 09:00:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>rebecca</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18176</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2022-01-17 16:42:33 +0000</bug_when>
    <thetext>It would be useful if the Uncrustify test in CI would display the changes that it made in addition to which files and lines were changed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18273</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-08 21:54:55 +0000</bug_when>
    <thetext>Kubacki: can you enhance it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18280</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-02-08 22:30:54 +0000</bug_when>
    <thetext>The changes that need to be made can be output into the TestSuites.xml file by setting &quot;OutputFileDiffs&quot; to &quot;True&quot; in the package CI YAML file.

https://github.com/tianocore/edk2/blob/master/.pytool/Plugin/UncrustifyCheck/Readme.md#outputfilediffs

Rebecca, is that sufficient? Or did you have something else in mind?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18282</commentid>
    <comment_count>3</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2022-02-09 09:40:33 +0000</bug_when>
    <thetext>Personally I think the default should be true.

It&apos;s causing confusion not having any explanation of what&apos;s going wrong. For example from a recent thread I started about CLANG38 failing (&quot;OvmfPkg VmgExitLib fails to build with CLANG38 (clang 13.0.0)&quot;):

&quot;This looks like the same error that XCODE5 was complaining about. The patch was submitted by Brijesh, but some CI failure occurred. I&apos;m not sure how that is possible from a one line patch like that, maybe it has something to do with the file in general, excluding the patch?&quot;

The cause was simply that the equals sign was mis-indented.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18283</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-02-09 10:56:57 +0000</bug_when>
    <thetext>It was originally disabled due to the large amount of diffs present when initially enabling Uncrustify. The expected flow after enabling was to use the identification of an Uncrustify CI error to perform further investigation using the tool outside CI either manually or with an IDE plugin.

I don&apos;t see a problem enabling the diffs in output by default. I&apos;ve added Mike Kinney to this BZ since he has used Uncrustify extensively in CI as well and to get his opinion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18320</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-02-10 11:21:27 +0000</bug_when>
    <thetext>I spoke to Mike Kinney and he is in favor as well.

V1 patch: https://edk2.groups.io/g/devel/message/86563</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18650</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2022-03-19 04:30:35 +0000</bug_when>
    <thetext>Seems like this was fixed in commit 56530dec1105 (&quot;.pytool/Plugin/UncrustifyCheck: Output file diffs by default&quot;, 2022-03-08).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18653</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-03-20 09:00:41 +0000</bug_when>
    <thetext>Yes, thanks for updating the BZ Laszlo.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3195</bug_id>
          
          <creation_ts>2021-02-01 03:12:48 +0000</creation_ts>
          <short_desc>Support no enabled AP case in DxeCpuCacheInfoLib</short_desc>
          <delta_ts>2021-02-03 03:17:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason">yun.lou</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14939</commentid>
    <comment_count>0</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-02-01 03:12:48 +0000</bug_when>
    <thetext>Support system has no enabled AP case in DxeCpuCacheInfoLib.
Otherwise, if the system only has 1 BSP without any enabled AP, UEFI POST hangs when invoking StartupAllAPs protocol because EFI_NOT_STARTED is returned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14940</commentid>
    <comment_count>1</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-02-01 03:13:37 +0000</bug_when>
    <thetext>Assign to Jason Lou.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14941</commentid>
    <comment_count>2</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-02-01 03:30:57 +0000</bug_when>
    <thetext>Have sent out the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14990</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-02-03 03:17:26 +0000</bug_when>
    <thetext>Have merged all the code change into master, close this bug.

SHA-1: e806bb29cfde1b242bb37e72e77364dd812830e0

* UefiCpuPkg/CpuCacheInfoLib: Support no enabled AP case in DxeLib

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3195

Support system has no enabled AP case in DxeCpuCacheInfoLib.
Otherwise, if the system only has 1 BSP without any enabled AP,
UEFI POST hangs when invoking StartupAllAPs protocol because
EFI_NOT_STARTED is returned.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3684</bug_id>
          
          <creation_ts>2021-10-12 01:11:47 +0000</creation_ts>
          <short_desc>add support for virtio-mmio 1.0</short_desc>
          <delta_ts>2021-10-12 01:15:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Gerd Hoffmann">kraxel</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17489</commentid>
    <comment_count>0</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2021-10-12 01:11:47 +0000</bug_when>
    <thetext>The virtio-mmio implementation supports only the virtio-mmio spec 0.9.5.
Add support for the 1.0 spec revision, so the world can move away from
0.9.5 ...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17490</commentid>
    <comment_count>1</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2021-10-12 01:12:21 +0000</bug_when>
    <thetext>merged as:
94e465e5cbb65c47d9e98f5c4c61f3a5e008ee5d..77d5fa80246e8784f89e109ff9dadfeb7089ff85</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17491</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-12 01:15:00 +0000</bug_when>
    <thetext>This feature has been done.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3083</bug_id>
          
          <creation_ts>2020-11-20 13:33:51 +0000</creation_ts>
          <short_desc>Callback function name in UefiDebugLibDebugPortProtocol is too generic</short_desc>
          <delta_ts>2024-07-22 11:04:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Bret Barkelew">bret.barkelew</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14385</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-11-20 13:33:51 +0000</bug_when>
    <thetext>ExitBootServicesCallback() is likely to collide with other symbol names (given that this is a lib). Please make this STATIC.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14386</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-11-20 13:34:28 +0000</bug_when>
    <thetext>For reals, yo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23171</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2024-07-02 12:14:39 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/5849</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23253</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2024-07-22 11:04:56 +0000</bug_when>
    <thetext>Completed in https://github.com/tianocore/edk2/pull/5917 as 55b043732d20305c769c6243e0a9a6e1f5ae879d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3563</bug_id>
          
          <creation_ts>2021-08-13 12:56:42 +0000</creation_ts>
          <short_desc>Support ACPI 6.4 in Acpiview PCCT parser</short_desc>
          <delta_ts>2021-10-11 21:02:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chris Jones">christopher.jones</reporter>
          <assigned_to name="Chris Jones">christopher.jones</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16907</commentid>
    <comment_count>0</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-08-13 12:56:42 +0000</bug_when>
    <thetext>The ACPI 6.4 specification introduced a new &apos;Type 5&apos; subspace structure (section 14.1.7) which needs to be supported in Acpiview so that it can be successfully parsed, validated and printed in the UEFI shell.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16908</commentid>
    <comment_count>1</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-08-13 13:04:55 +0000</bug_when>
    <thetext>Submitted patch series here: https://edk2.groups.io/g/devel/message/79285</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16917</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:44:52 +0000</bug_when>
    <thetext>Chris is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17483</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-11 21:02:04 +0000</bug_when>
    <thetext>It has been merged @942c9bd357d87cc6eed7c8250c213eff218d674e..b4da6c29f1d36031e04212f53277ce0dcba309f1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3466</bug_id>
          
          <creation_ts>2021-06-29 05:11:01 +0000</creation_ts>
          <short_desc>CryptoPkg: consume OpenSSL 3.0</short_desc>
          <delta_ts>2023-10-24 12:53:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2424</blocked>
    
    <blocked>1897</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>dick_wilkins</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16482</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-29 05:11:01 +0000</bug_when>
    <thetext>https://www.openssl.org/blog/blog/2021/06/17/OpenSSL3.0ReleaseCandidate/

Advancing to OpenSSL 3.0 should be possible without functionality changes in edk2, but some API conversions in OpensslLib and/or BaseCryptLib could be necessary.

&gt;| OpenSSL 3.0 is a major release, which means that the library ABI is
&gt;| changed requiring recompilation of all dependent applications and there
&gt;| are also minor API breaking changes. For most applications that need to
&gt;| be upgraded to work with 3.0 we expect that a simple recompile will be
&gt;| sufficient. However, it is likely that application developers will notice
&gt;| new deprecation warnings when compiling their applications. Many of the
&gt;| “low level” cryptographic API functions have been deprecated in
&gt;| preference to the higher level “EVP” APIs. For detailed guidance on
&gt;| how to migrate applications to work with OpenSSL 3.0, refer to our
&gt;| migration guide.

https://www.openssl.org/docs/manmaster/man7/migration_guide.html

This could be seen as a basis for TLSv1.3 enablement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16627</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-13 21:54:06 +0000</bug_when>
    <thetext>Jiewen, can you review this request?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16628</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-07-13 22:18:25 +0000</bug_when>
    <thetext>I think the request makes a lot of sense.

Current openssl 3.0 is beta. Once it becomes official release, then we can migrate.

We need volunteer from community to do impact analysis (including size and performance) and porting/enabling.



One potential interface change is HASH service - GetShaXXXContextSize() does not make sense to me, because it requires to know the context explictely.

A better idea is to use ShaXXXNew() and ShaXXXFree() similar to HMAC.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17183</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-09-07 08:14:53 +0000</bug_when>
    <thetext>Openssl 3.0 - https://www.openssl.org/news/openssl-3.0-notes.html

https://www.openssl.org/docs/man3.0/man7/migration_guide.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19887</commentid>
    <comment_count>4</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2022-10-31 15:27:24 +0000</bug_when>
    <thetext>FYI, there is a VINCE report (VU#794340) that states that OpenSSL 3.x thru 3.0.7 have been found vulnerable to a CRITICAL severity vulnerability that can lead to crash or unexpected behavior. 

More info, including CVE will be forthcoming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19888</commentid>
    <comment_count>5</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2022-10-31 16:14:01 +0000</bug_when>
    <thetext>FYI, this is the OpenSSL vulnerability that is being announced tomorrow.  

https://mta.openssl.org/pipermail/openssl-announce/2022-October/000238.html

Hello,

The OpenSSL project team would like to announce the forthcoming release 
of OpenSSL version 3.0.7.

This release will be made available on Tuesday 1st November 2022 between 
1300-1700 UTC.

OpenSSL 3.0.7 is a security-fix release. The highest severity issue 
fixed in this release is CRITICAL:

https://www.openssl.org/policies/general/security-policy.html

Yours
The OpenSSL Project Team

Kevin D Davis
Security Strategist
Insyde Software</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19897</commentid>
    <comment_count>6</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2022-11-01 14:41:46 +0000</bug_when>
    <thetext>CVE-2022-3786, CVE-2022-3602</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20014</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-11-14 15:30:42 +0000</bug_when>
    <thetext>edk2 is not currently using OpenSSL 3.0

When OpenSSL 3.0 porting is started, the min version must be 3.0.7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20143</commentid>
    <comment_count>8</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-11-30 02:44:59 +0000</bug_when>
    <thetext>The initial POC data is at https://github.com/kraxel/edk2/tree/archive/openssl3-v1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20144</commentid>
    <comment_count>9</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2022-11-30 02:49:02 +0000</bug_when>
    <thetext>The edkii discussion is at https://edk2.groups.io/g/devel/topic/87479913</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21028</commentid>
    <comment_count>10</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2023-02-10 21:22:42 +0000</bug_when>
    <thetext>Staging branch is created for collaboration - https://github.com/tianocore/edk2-staging/tree/OpenSSL11_EOL</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21030</commentid>
    <comment_count>11</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2023-02-10 21:23:53 +0000</bug_when>
    <thetext>Confirmed that openssl 1.1 will be EOL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21814</commentid>
    <comment_count>12</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2023-08-09 03:41:24 +0000</bug_when>
    <thetext>merged https://github.com/tianocore/edk2/pull/4728</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3973</bug_id>
          
          <creation_ts>2022-07-01 01:21:39 +0000</creation_ts>
          <short_desc>Add NULL check for input pointer in MemoryAllocationLib FreePool function</short_desc>
          <delta_ts>2022-07-05 22:00:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>sundaresans</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>felixp</cc>
    
    <cc>gaoliming</cc>
    
    <cc>srinin</cc>
    
    <cc>vasudevans</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19167</commentid>
    <comment_count>0</comment_count>
    <who name="">sundaresans</who>
    <bug_when>2022-07-01 01:21:39 +0000</bug_when>
    <thetext>When NULL pointer is passed to BootService FreePool(), EFI_INVALID_PARAMETER will be returned from &quot;CoreInternalFreePool&quot; and FreePool library function asserts.

https://github.com/tianocore/edk2/blob/master/MdePkg/Library/UefiMemoryAllocationLib/MemoryAllocationLib.c#L821 

From SMI handler if NULL pointer is passed to MemoryAllocationLib&apos;s FreePool function, SMM instance of MemoryAllocationLib checks whether the buffer is inside SMRAM or not. For NULL pointer this check will fail, and call goes to else case. In else case, gBS-&gt;FreePool() service is called. Exception occurs when gBS pointer is accessed as non-SMRAM memory accessed from SMM.

https://github.com/tianocore/edk2/blob/master/MdePkg/Library/SmmMemoryAllocationLib/MemoryAllocationLib.c#L986 

Adding NULL check inside FreePool library function will avoid these scenarios.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19188</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-05 22:00:19 +0000</bug_when>
    <thetext>For UefiMemoryAllocationLib, current behavior has been disucussed before. Reject this change. 

For SmmMemoryAllocationLib, the smiliar issue has been reported on https://bugzilla.tianocore.org/show_bug.cgi?id=3305. Can close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3831</bug_id>
          
          <creation_ts>2022-02-10 10:43:52 +0000</creation_ts>
          <short_desc>Code First - Arm CPER Processor Error Types not defined</short_desc>
          <delta_ts>2022-03-09 10:02:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18316</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-02-10 10:43:52 +0000</bug_when>
    <thetext>The bit definitions for the Type field in ARM Processor Error Information Structure is not defined. See N.2.4.4.1 ARM Processor Error Information, Table N-17 ARM Processor Error Information Structure, UEFI specification version 2.9, page 2365

There is a patch on the edk2 mailing list that adds the CPER definitions for ARM at https://edk2.groups.io/g/devel/message/86558 The patch is currently defining the Type field bits as below

Bit 0: Cache Error
Bit 1: TLB Error
Bit 2: Bus Error
Bit 3: Micro-architectural Error

Linux seems to be already doing this as well:
https://elixir.bootlin.com/linux/latest/source/include/linux/cper.h#L273

We need to update the UEFI spec to define these values to be consistent with FW/OS implementations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18317</commentid>
    <comment_count>1</comment_count>
      <attachid>923</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-02-10 10:57:24 +0000</bug_when>
    <thetext>Created attachment 923
Arm CPER Processor Error Info Type values missing_v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18318</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-02-10 10:58:06 +0000</bug_when>
    <thetext>USWG mantis: https://mantis.uefi.org/mantis/view.php?id=2306</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18442</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-22 22:07:13 +0000</bug_when>
    <thetext>Samer takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18585</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-03-09 10:02:24 +0000</bug_when>
    <thetext>This was approved by USWG as submitted, without changes, as an errata for UEFI 2.9. Implementations may proceed according to the approved ECR attached to this BZ.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>923</attachid>
            <date>2022-02-10 10:57:24 +0000</date>
            <delta_ts>2022-02-10 10:57:24 +0000</delta_ts>
            <desc>Arm CPER Processor Error Info Type values missing_v1</desc>
            <filename>Arm CPER Processor Error Info Type values missing_v1.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>50237</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3217</bug_id>
          
          <creation_ts>2021-02-11 07:47:56 +0000</creation_ts>
          <short_desc>Increase Timeout in fDeviceInit polling loop in Ufs Pass Thru Driver.</short_desc>
          <delta_ts>2021-03-05 03:46:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</reporter>
          <assigned_to name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>Purna.Chandra.Rao.Bandaru</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15056</commentid>
    <comment_count>0</comment_count>
    <who name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</who>
    <bug_when>2021-02-11 07:47:56 +0000</bug_when>
    <thetext>1) Current Usf Pass Thru driver tries DME_LINKSTARTUP three times, To improve further reliability, shall try one more time with Host controller reset.

Section 7.1.1 Host Controller Initialization of Universal Flash Storage Host
Controller Interface (UFSHCI) specification.

2) After link is brought up, The host sends a NOP OUT UPIU.
The device responds with a NOP IN UPIU. Current host driver sends NOP OUT UPIU once, if it does receive NOP IN UPIU, it bails out. Host should implement retry up to 10 times to improve reliability. 

3) Current Ufs Pass Thru driver implemented 5us timeout for fDeviceInit polling loop however there are UFS Devices/cards which can take up to 600ms for its initialization to complete and hence Timeout should be increased.

Section 13.1.3.3 Initialization completion of Universal Flash Storage (UFS) specification.

Note: Above specification sections doesn&apos;t talk about these improvement specifically but based on validation on multiple platforms and devices, these changes are proposed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15100</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-02-22 20:57:33 +0000</bug_when>
    <thetext>V1 patch sent at:
https://edk2.groups.io/g/devel/message/71609

V2 series sent at:
https://edk2.groups.io/g/devel/message/72008
https://edk2.groups.io/g/devel/message/72009
https://edk2.groups.io/g/devel/message/72010</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15107</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-02-23 20:12:11 +0000</bug_when>
    <thetext>V3 patch for improvement:

&gt; 3) Current Ufs Pass Thru driver implemented 5us timeout for fDeviceInit polling loop however there are UFS Devices/cards which can take up to 600ms for its initialization to complete and hence Timeout should be increased.

sent at:
https://edk2.groups.io/g/devel/message/72119</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15177</commentid>
    <comment_count>3</comment_count>
    <who name="Purna Chandra Rao Bandaru">Purna.Chandra.Rao.Bandaru</who>
    <bug_when>2021-03-02 00:06:47 +0000</bug_when>
    <thetext>Updated Bugzilla title to limit the scope to address the third improvement alone. i.e. &quot;Current Ufs Pass Thru driver implemented 5us timeout for fDeviceInit polling loop however there are UFS Devices/cards which can take up to 600ms for its initialization to complete and hence Timeout should be increased.&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15178</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-03-02 01:05:31 +0000</bug_when>
    <thetext>V4 patch sent at:
https://edk2.groups.io/g/devel/message/72322</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15217</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-03-05 03:46:45 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/c5740f360636479fb91681093b1dee1cc366075c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3105</bug_id>
          
          <creation_ts>2020-12-04 00:53:19 +0000</creation_ts>
          <short_desc>Add new CpuCacheInfoLib in UefiCpuPkg</short_desc>
          <delta_ts>2021-01-26 21:15:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason">yun.lou</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14479</commentid>
    <comment_count>0</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2020-12-04 00:53:19 +0000</bug_when>
    <thetext>This new library uses a platform agnostic algorithm to get CPU cache information. It provides user with an API-GetCpuCacheInfo to get detailed CPU cache information by each package, each core type included in this package, and each cache level &amp; type. This library can be used by code that produces SMBIOS_TABLE_TYPE7 SMBIOS table.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14480</commentid>
    <comment_count>1</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2020-12-04 01:04:25 +0000</bug_when>
    <thetext>Assign to Jason Lou.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14493</commentid>
    <comment_count>2</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2020-12-08 00:27:31 +0000</bug_when>
    <thetext>Have sent out the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14922</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-01-26 21:15:00 +0000</bug_when>
    <thetext>Have merged all the code change into master, close this bug.

(1)
SHA-1: 79f3404ad82f500c6de78997e6a01ac5b045c38a

* MdePkg/Cpuid.h: Add CPUID_HYBRID_INFORMATION Leaf(1Ah).

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3105

The UefiCpuPkg/CpuCacheInfoLib will reference new definition
about CPUID_HYBRID_INFORMATION Leaf(1Ah).

(2)
SHA-1: 83facfd184021874f95a6a34b2e47e0ebb34a762

* UefiCpuPkg/CpuCacheInfoLib: Add new CpuCacheInfoLib.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3105

This new library uses a platform agnostic algorithm to get CPU
cache information. It provides user with an API(GetCpuCacheInfo)
to get detailed CPU cache information by each package, each core
type included in this package, and each cache level &amp; type.
This library can be used by code that produces SMBIOS_TABLE_TYPE7
SMBIOS table.

(3)
SHA-1: 2d6fc9d36fd5ff15972bedab919f37bb4ee951d0

* MdePkg/Cpuid.h: Change and add some macro definitions.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3105

Change and add some macro definitions about
CPUID_HYBRID_INFORMATION Leaf(1Ah).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3589</bug_id>
          
          <creation_ts>2021-08-24 12:45:44 +0000</creation_ts>
          <short_desc>Remove the older versions of Python 2.7 port from edk2-libc</short_desc>
          <delta_ts>2021-11-05 14:50:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>3588</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Jayaprakash Nevara">n.jayaprakash</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17030</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-08-24 12:45:44 +0000</bug_when>
    <thetext>This bugzilla ticket is to do clean up of the edk2-libc repo by removing the older version of the Py 2.7.2 port for UEFI shell from this repo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17032</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 21:38:21 +0000</bug_when>
    <thetext>Jayaprakash Nevara will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17565</commentid>
    <comment_count>2</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-10-17 21:21:38 +0000</bug_when>
    <thetext>Made the changes required to remove Py2.7.2 support in remove_py272_support branch.
will be raising a patch request for community review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17600</commentid>
    <comment_count>3</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-10-21 12:44:24 +0000</bug_when>
    <thetext>Expanding the scope of the BZ to remove complete Py2.7 support including Py 2.7.2 and Py 2.7.10 from edk2-libc.

Created a Patch and sent it for review to remove the py 2.7.2 support.
Will raise another patch for removing the py 2.7.10 support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17604</commentid>
    <comment_count>4</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-10-25 12:36:03 +0000</bug_when>
    <thetext>Sent patches for review with patch version 2.
AppPkg/Applications/Python: To remove the py2.7.2 uefi port code
  AppPkg/Applications/Python: to remove document references to py2.7.2
  AppPkg/Applications/Python: to remove py2.7.10 support from edk2-libc
  AppPkg/Applications/Python: to remove py2.7.10 references from edk2-libc

There was some issue with my system and the send email command was failing. 
So I had issued the command couple of times, you might have got duplicate emails with the same patch details for review.

Apologies and Please ignore the duplicates.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17694</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-05 14:50:09 +0000</bug_when>
    <thetext>pushed:

2ebe49cc..0fdfe217

Commits:

https://github.com/tianocore/edk2-libc/commit/bf99a245396898664f45445c4d759a1e57e4545b
https://github.com/tianocore/edk2-libc/commit/6e041719c64102f596c6eb022e3e220df26ff1fc
https://github.com/tianocore/edk2-libc/commit/4f2222dee101662228393960ea3edb206d582955
https://github.com/tianocore/edk2-libc/commit/31de4d3bb744ef2ffb386fbbe24c6de8ca97ed6a
https://github.com/tianocore/edk2-libc/commit/0fdfe2175459ace25e5bcfe5acedd2dd54ebfe05</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3484</bug_id>
          
          <creation_ts>2021-07-08 10:21:30 +0000</creation_ts>
          <short_desc>IpmiFeaturePkg: Fail to build this package.</short_desc>
          <delta_ts>2021-07-09 02:39:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IpmiFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16591</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-07-08 10:21:30 +0000</bug_when>
    <thetext>Build failure occurred when compiling this IpmiFeaturePkg:

Architecture(s)  = IA32 X64
Build target     = DEBUG
Toolchain        = VS2015x86

Active Platform          = c:\source\work7\f7e6e7f6b4312fd6\Edk2Platforms\Features\Intel\AdvancedFeaturePkg\AdvancedFeaturePkg.dsc


build.py...
c:\source\work7\f7e6e7f6b4312fd6\Edk2Platforms\Features\Intel\AdvancedFeaturePkg\AdvancedFeaturePkg.dsc(...): error 4000: Instance of library class [IpmiBaseLib] is not found
	in [c:\source\work7\f7e6e7f6b4312fd6\Edk2Platforms\Features\Intel\OutOfBandManagement\IpmiFeaturePkg\Library\IpmiCommandLib\IpmiCommandLib.inf] [IA32]
	consumed by module [c:\source\work7\f7e6e7f6b4312fd6\Edk2Platforms\Features\Intel\OutOfBandManagement\IpmiFeaturePkg\Frb\FrbPei.inf]

- Failed -</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16595</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-07-09 02:39:31 +0000</bug_when>
    <thetext>commit 8cb431b46a0888a8ee8e442dc3ea50d7de79e473 
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Thu Jul 8 18:36:11 2021 +0800

    AdvancedFeaturePkg: Fail to build this package.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3484

    Fixed the build failure of this package.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Sai Chaganty &lt;rangasai.v.chaganty@intel.com&gt;
    Cc: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;
    Cc: Isaac Oram &lt;isaac.w.oram@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Sai Chaganty &lt;rangasai.v.chaganty@intel.com&gt;

commit 107af998afe1a34c7b6aff5240abd9918e51b073
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Thu Jul 8 18:31:31 2021 +0800

    IpmiFeaturePkg: Fail to build this package.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3484

    Fixed the build failure of this package.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Sai Chaganty &lt;rangasai.v.chaganty@intel.com&gt;
    Cc: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;
    Cc: Isaac Oram &lt;isaac.w.oram@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Sai Chaganty &lt;rangasai.v.chaganty@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3997</bug_id>
          
          <creation_ts>2022-07-18 15:27:00 +0000</creation_ts>
          <short_desc>DynamicTableManagerDxe: Take installed tables into consideration</short_desc>
          <delta_ts>2022-09-07 17:39:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>DynamicTablesPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19257</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-07-18 15:27:00 +0000</bug_when>
    <thetext>The DynamicTableManagerDxe currently reconstructs all the ACPI tables from the configuration manager protocol. However, certain platforms could have already installed some required ACPI tables separately instead of deriving from the Configuration Manager Protocol:

https://github.com/tianocore/edk2/blob/792ebb6374f2b92e2c4b84f5b8d151a129ed81cc/DynamicTablesPkg/Drivers/DynamicTableManagerDxe/DynamicTableManagerDxe.c#L402

The suggestion is that, during the verification step, the manager module will consider both the installed table or configured manager entry to be a valid &quot;present&quot; state.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19284</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-19 21:50:41 +0000</bug_when>
    <thetext>Kun: please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19522</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-09-07 17:39:21 +0000</bug_when>
    <thetext>Merged as 5236d47854e75e05a1d0e70e1c9b9a2fd9df5b70 at https://github.com/tianocore/edk2/pull/3270</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3736</bug_id>
          
          <creation_ts>2021-11-15 09:42:34 +0000</creation_ts>
          <short_desc>UEFI-SCT: TCG2 Protocol Test</short_desc>
          <delta_ts>2024-03-19 05:09:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Joseph Hemann">Joseph.Hemann</reporter>
          <assigned_to name="Stuart Yoder">stuart.yoder</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ilias.apalodimas</cc>
    
    <cc>stuart.yoder</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17755</commentid>
    <comment_count>0</comment_count>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-11-15 09:42:34 +0000</bug_when>
    <thetext>Implementation for TCG2 Protocol Test in UEFI-SCT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17756</commentid>
    <comment_count>1</comment_count>
      <attachid>881</attachid>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-11-15 14:21:50 +0000</bug_when>
    <thetext>Created attachment 881
Proposed Patch 0/6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17757</commentid>
    <comment_count>2</comment_count>
      <attachid>882</attachid>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-11-15 14:25:42 +0000</bug_when>
    <thetext>Created attachment 882
Proposed Patch 1/6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17758</commentid>
    <comment_count>3</comment_count>
      <attachid>883</attachid>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-11-15 14:26:16 +0000</bug_when>
    <thetext>Created attachment 883
Proposed Patch 2/6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17759</commentid>
    <comment_count>4</comment_count>
      <attachid>884</attachid>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-11-15 14:27:12 +0000</bug_when>
    <thetext>Created attachment 884
Proposed Patch 3/6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17760</commentid>
    <comment_count>5</comment_count>
      <attachid>885</attachid>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-11-15 14:27:46 +0000</bug_when>
    <thetext>Created attachment 885
Proposed Patch 4/6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17761</commentid>
    <comment_count>6</comment_count>
      <attachid>886</attachid>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-11-15 14:28:19 +0000</bug_when>
    <thetext>Created attachment 886
Proposed Patch 5/6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17762</commentid>
    <comment_count>7</comment_count>
      <attachid>887</attachid>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-11-15 14:28:45 +0000</bug_when>
    <thetext>Created attachment 887
Proposed Patch 6/6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17833</commentid>
    <comment_count>8</comment_count>
      <attachid>888</attachid>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-11-24 18:49:38 +0000</bug_when>
    <thetext>Created attachment 888
Proposed SCT spec chapter</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17974</commentid>
    <comment_count>9</comment_count>
      <attachid>900</attachid>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2021-12-10 14:04:38 +0000</bug_when>
    <thetext>Created attachment 900
Proposed Sct Chapter v2

Made changes to GetCapabilities() test
-Add test to insure 0 == ~ActivePcrBanks &amp; HashAlgorithmBitMap
Made changes to GetActivePcrBanks() Test
-Insured returned ActivePcrBanks match those returned by GetCapabilities()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18135</commentid>
    <comment_count>10</comment_count>
      <attachid>916</attachid>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2022-01-13 14:33:19 +0000</bug_when>
    <thetext>Created attachment 916
Proposed Sct Chapter v3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18146</commentid>
    <comment_count>11</comment_count>
    <who name="Joseph Hemann">Joseph.Hemann</who>
    <bug_when>2022-01-14 15:40:38 +0000</bug_when>
    <thetext>SetActivePcrBanks test has been included in proposed spec, but for now cannot be tested on arm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18164</commentid>
    <comment_count>12</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-01-15 05:47:47 +0000</bug_when>
    <thetext>Hello Josef,

EDK II implements SetActivePcrBanks() which invokes the TPM function.

swtpm supports up to 10 PCR banks and has a function swtpm_tpm2_set_active_pcr_banks() which allows switching the active bank. This calls libtpms function TPM2_PCR_Allocate().

So this function should work on ARM QEMU using swtpm.

What did the test that you built look like? Do you have a repository with the code?

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18955</commentid>
    <comment_count>13</comment_count>
    <who name="Stuart Yoder">stuart.yoder</who>
    <bug_when>2022-05-16 17:05:13 +0000</bug_when>
    <thetext>The reason that SetActivePcrBanks() can&apos;t be tested on aarch64 is due to missing functionality in QEMU for aarch64.

There is a dependency on TPM physical presence functionality.  See:
https://github.com/tianocore/edk2/blob/master/SecurityPkg/Tcg/Tcg2Dxe/Tcg2Dxe.c#L1454

See: https://qemu.readthedocs.io/en/latest/specs/tpm.html

...it appears that the fw_config interface is not supported in aarch64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19021</commentid>
    <comment_count>14</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-06-02 10:11:47 +0000</bug_when>
    <thetext>Next steps:

1. We will continue in SCT Spec in .md
2. Targeted review from Illias before we upstream.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19214</commentid>
    <comment_count>15</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-07-07 10:26:10 +0000</bug_when>
    <thetext>Next steps:
1. Review and approval of .md of specs newly drafted.
   https://github.com/stuyod01/edk2-test/blob/master/uefi-sct/Doc/UEFI-SCT-Case-Spec/30_Protocols_TCG2_Test.md
   Review by the community
   Samer to approve
   
2. Review of the patches
   Illias, Heinrich, Barton and Edhay</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19217</commentid>
    <comment_count>16</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-07-08 08:10:46 +0000</bug_when>
    <thetext>The specification as provided in https://github.com/stuyod01/edk2-test/blob/master/uefi-sct/Doc/UEFI-SCT-Case-Spec/30_Protocols_TCG2_Test.md looks good to me.

Reviewed-by: Heinrich Schuchardt &lt;heinrich.schuchardt@canaonical.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22269</commentid>
    <comment_count>17</comment_count>
      <attachid>1453</attachid>
    <who name="Stuart Yoder">stuart.yoder</who>
    <bug_when>2023-12-14 18:36:07 +0000</bug_when>
    <thetext>Created attachment 1453
TCG2 test patchset</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22495</commentid>
    <comment_count>18</comment_count>
    <who name="Stuart Yoder">stuart.yoder</who>
    <bug_when>2024-02-01 11:17:01 +0000</bug_when>
    <thetext>Link to branch with latest patch set.
https://github.com/stuyod01/edk2-test/tree/tcg2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22691</commentid>
    <comment_count>19</comment_count>
      <attachid>1479</attachid>
    <who name="Stuart Yoder">stuart.yoder</who>
    <bug_when>2024-03-05 10:48:07 +0000</bug_when>
    <thetext>Created attachment 1479
v2 of the patchset</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22807</commentid>
    <comment_count>20</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2024-03-19 05:09:08 +0000</bug_when>
    <thetext>The patches are upstreamed by the commits:
https://github.com/tianocore/edk2-test/commit/ee928b21d8df70c5729a6ae470366d3c6a6fd84b
https://github.com/tianocore/edk2-test/commit/7ec35ffac51d0682c1368041ca1e599189a58223
https://github.com/tianocore/edk2-test/commit/244ebf6954c43496ca173e9091de92b061e0957e
https://github.com/tianocore/edk2-test/commit/bebabc28d9471de17b9dbebf83d4dfb54624ac0c
https://github.com/tianocore/edk2-test/commit/ff8a146ace642cadc83b58cd4382181ec2dac633
https://github.com/tianocore/edk2-test/commit/49620fa0bb9757bce13f41f604001114ea6c40de</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>881</attachid>
            <date>2021-11-15 14:21:50 +0000</date>
            <delta_ts>2023-12-14 18:36:07 +0000</delta_ts>
            <desc>Proposed Patch 0/6</desc>
            <filename>0000-cover-letter.patch</filename>
            <type>text/plain</type>
            <size>2775</size>
            <attacher name="Joseph Hemann">Joseph.Hemann</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>882</attachid>
            <date>2021-11-15 14:25:42 +0000</date>
            <delta_ts>2023-12-14 18:36:07 +0000</delta_ts>
            <desc>Proposed Patch 1/6</desc>
            <filename>0001-uefi-sct-SctPkg-TCG2-Protocol-add-header-with-TCG2-p.patch</filename>
            <type>text/plain</type>
            <size>5228</size>
            <attacher name="Joseph Hemann">Joseph.Hemann</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>883</attachid>
            <date>2021-11-15 14:26:16 +0000</date>
            <delta_ts>2023-12-14 18:36:07 +0000</delta_ts>
            <desc>Proposed Patch 2/6</desc>
            <filename>0002-uefi-sct-SctPkg-TCG2-Protocol-add-GetCapability-Test.patch</filename>
            <type>text/plain</type>
            <size>22277</size>
            <attacher name="Joseph Hemann">Joseph.Hemann</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>884</attachid>
            <date>2021-11-15 14:27:12 +0000</date>
            <delta_ts>2023-12-14 18:36:07 +0000</delta_ts>
            <desc>Proposed Patch 3/6</desc>
            <filename>0003-uefi-sct-SctPkg-TCG2-Protocol-add-GetActivePcrBanks-.patch</filename>
            <type>text/plain</type>
            <size>11114</size>
            <attacher name="Joseph Hemann">Joseph.Hemann</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>885</attachid>
            <date>2021-11-15 14:27:46 +0000</date>
            <delta_ts>2023-12-14 18:36:07 +0000</delta_ts>
            <desc>Proposed Patch 4/6</desc>
            <filename>0004-uefi-sct-SctPkg-TCG2-Protocol-add-HashLogExtendEvent.patch</filename>
            <type>text/plain</type>
            <size>16655</size>
            <attacher name="Joseph Hemann">Joseph.Hemann</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>886</attachid>
            <date>2021-11-15 14:28:19 +0000</date>
            <delta_ts>2023-12-14 18:36:07 +0000</delta_ts>
            <desc>Proposed Patch 5/6</desc>
            <filename>0005-uefi-sct-SctPkg-TCG2-Protocol-add-GetEventLog-test.patch</filename>
            <type>text/plain</type>
            <size>14979</size>
            <attacher name="Joseph Hemann">Joseph.Hemann</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>887</attachid>
            <date>2021-11-15 14:28:45 +0000</date>
            <delta_ts>2023-12-14 18:36:07 +0000</delta_ts>
            <desc>Proposed Patch 6/6</desc>
            <filename>0006-uefi-sct-SctPkg-TCG2-Protocol-add-SubmitCommand-test.patch</filename>
            <type>text/plain</type>
            <size>13323</size>
            <attacher name="Joseph Hemann">Joseph.Hemann</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>888</attachid>
            <date>2021-11-24 18:49:38 +0000</date>
            <delta_ts>2023-12-14 18:36:07 +0000</delta_ts>
            <desc>Proposed SCT spec chapter</desc>
            <filename>TCG2_Protocol_SCT_spec_Chapter.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>44764</size>
            <attacher name="Joseph Hemann">Joseph.Hemann</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>900</attachid>
            <date>2021-12-10 14:04:38 +0000</date>
            <delta_ts>2023-12-14 18:36:07 +0000</delta_ts>
            <desc>Proposed Sct Chapter v2</desc>
            <filename>TCG2_protocol_SCT_spec.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>45244</size>
            <attacher name="Joseph Hemann">Joseph.Hemann</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>916</attachid>
            <date>2022-01-13 14:33:19 +0000</date>
            <delta_ts>2023-12-14 18:36:07 +0000</delta_ts>
            <desc>Proposed Sct Chapter v3</desc>
            <filename>TCG2ProtocolSct.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>49330</size>
            <attacher name="Joseph Hemann">Joseph.Hemann</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1453</attachid>
            <date>2023-12-14 18:36:07 +0000</date>
            <delta_ts>2024-03-05 10:48:07 +0000</delta_ts>
            <desc>TCG2 test patchset</desc>
            <filename>tcg2_patches.tar.z</filename>
            <type>application/x-compress</type>
            <size>14449</size>
            <attacher name="Stuart Yoder">stuart.yoder</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1479</attachid>
            <date>2024-03-05 10:48:07 +0000</date>
            <delta_ts>2024-03-05 10:48:07 +0000</delta_ts>
            <desc>v2 of the patchset</desc>
            <filename>TCG2.zip</filename>
            <type>application/zip</type>
            <size>22230</size>
            <attacher name="Stuart Yoder">stuart.yoder</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3125</bug_id>
          
          <creation_ts>2020-12-16 06:21:15 +0000</creation_ts>
          <short_desc>ArmVirtPkg, OvmfPkg: set PcdShellFileOperationSize to 0x20000 (128KB)</short_desc>
          <delta_ts>2021-01-19 13:47:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3123</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>3097</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14600</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-16 06:21:15 +0000</bug_when>
    <thetext>(1) Some UEFI shell commands read and write files in chunks. The chunk size is given by &quot;PcdShellFileOperationSize&quot;, whose default in &quot;ShellPkg/ShellPkg.dec&quot; is 4KB (0x1000). (More background in bug 3123.) In order to work through a file of size S, approximately (S/4096) read and/or write requests are necessary.

(2) The virtio-fs daemon in QEMU advertizes a 128KB maximum buffer size by default, for the FUSE_WRITE operation.  This is as of commit d73c46e4a84e (&quot;Update version for v5.2.0-rc4 release&quot;, 2020-12-01). This default 128KB write maximum goes back to original upstream libfuse commit 027d0d17c8a4 (&quot;fuse_lowlevel: Add max_pages support (#384)&quot;, 2019-06-13) -- &lt;https://github.com/libfuse/libfuse/commit/027d0d17c8a4&gt;.


Raise &quot;PcdShellFileOperationSize&quot; to 0x20000 (128KB) in those ArmVirtPkg and OvmfPkg DSC files that will include the virtio-fs driver from bug 3097. This way, the number of FUSE_WRITE requests necessary for working through the same files with the same UEFI shell commands will be 1/32nd of the original request count.

This should be a FixedAtBuild PCD setting; a 128KB buffer size in the affected shell commands cannot be considered particularly wasteful even if the Virtio Filesystem is not used.

The present BZ depends on bug 3097, because it&apos;s only really relevant once bug 3097 is fixed (i.e., once the virtio-fs driver is merged upstream).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14642</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-21 21:00:33 +0000</bug_when>
    <thetext>Laszlo, confirm it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14702</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-04 10:46:00 +0000</bug_when>
    <thetext>Addressed by patches #2-#3 in

* [edk2-devel] [PATCH 0/8]
  ShellPkg, ArmVirtPkg, OvmfPkg: shell usability improvements

https://edk2.groups.io/g/devel/message/69590
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00070.html
Message-Id: &lt;20210104154235.31785-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14796</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-13 03:56:53 +0000</bug_when>
    <thetext>Addressed by patches #2-#3 in

* [edk2-devel] [PATCH v2 00/10]
  multiple packages: shell usability improvements

https://edk2.groups.io/g/devel/message/70216
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00700.html
Message-Id: &lt;20210113085453.10168-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14838</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-19 13:47:12 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Addressed by patches #2-#3 in
&gt; 
&gt; * [edk2-devel] [PATCH v2 00/10]
&gt;   multiple packages: shell usability improvements
&gt; 
&gt; https://edk2.groups.io/g/devel/message/70216
&gt; https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00700.html
&gt; Message-Id: &lt;20210113085453.10168-1-lersek@redhat.com&gt;

Merged as commit range e68c2a22caae..6e5586863148, via
&lt;https://github.com/tianocore/edk2/pull/1370&gt;:

   1  f72fd9616eed ShellPkg/Comp: add file buffering
*  2  2912341cd924 OvmfPkg: raise PcdShellFileOperationSize to 128KB
*  3  a0b352e18bde ArmVirtPkg: raise PcdShellFileOperationSize to 128KB
   4  130e929f98ce EmulatorPkg: add OrderedCollectionLib class
                   resolution
   5  ef03e72651b8 UefiPayloadPkg: add OrderedCollectionLib class
                   resolution
   6  101c55ac0db7 ShellPkg/ShellCommandLib: add ShellSortFileList()
   7  70254306a823 ShellPkg/Ls: sort output by FileName in non-SFO mode
   8  c8ce60eb2938 ShellPkg/ShellProtocol: sort files by FullName in
                   RemoveDupInFileList()
   9  d3f3c942013a OvmfPkg: disable list length checks in NOOPT and
                   DEBUG builds
  10  6e5586863148 ArmVirtPkg: disable list length checks in NOOPT and
                   DEBUG builds</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3612</bug_id>
          
          <creation_ts>2021-09-08 21:22:49 +0000</creation_ts>
          <short_desc>DxeCheckHsti might under-index an IHV HSTI structure when dumping</short_desc>
          <delta_ts>2022-04-06 21:24:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17227</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-09-08 21:22:49 +0000</bug_when>
    <thetext>See proposed patch here...
https://github.com/microsoft/mu_common_intel_min_platform/pull/13/files</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18667</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-03-22 21:12:21 +0000</bug_when>
    <thetext>Sent v1 patch: https://edk2.groups.io/g/devel/message/87886</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18765</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-05 21:21:48 +0000</bug_when>
    <thetext>Still waiting for the patch to be merged</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18770</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-06 21:24:11 +0000</bug_when>
    <thetext>Patch merged in the following commit: https://github.com/tianocore/edk2-platforms/commit/170f455d1b1be74458ffbb3aec28cd9bd99b582c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3396</bug_id>
          
          <creation_ts>2021-05-17 00:16:08 +0000</creation_ts>
          <short_desc>Add Config Editor tool support for YAML configuration editing</short_desc>
          <delta_ts>2021-06-30 00:10:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Loo Tung Lun">tung.lun.loo</reporter>
          <assigned_to name="Loo Tung Lun">tung.lun.loo</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>tung.lun.loo</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16074</commentid>
    <comment_count>0</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-05-17 00:16:08 +0000</bug_when>
    <thetext>This patch is to include ConfigEditor python based tool for YAML format configuration. This tool will support patching FSP YAML file and backward compatible to BSF format file, similar to what Binary Configuration Tool (BCT) is able to do today. It will also support FSP 1.x and FSP 2.x header format and binary patching.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16075</commentid>
    <comment_count>1</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-05-17 00:17:22 +0000</bug_when>
    <thetext>Submitted patch for review process and gathering feedback</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16475</commentid>
    <comment_count>2</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-06-28 21:47:54 +0000</bug_when>
    <thetext>This tool has been extended to support FSP BSF format as well</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16489</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-06-30 00:10:24 +0000</bug_when>
    <thetext>Patch submitted:

commit 580b11201ed001f9533c6782ec87d430b1736040 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Loo, Tung Lun &lt;tung.lun.loo@intel.com&gt;
Date:   Tue Jun 29 12:32:35 2021 +0800

    IntelFsp2Pkg: Add Config Editor tool support

    BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=3396</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3265</bug_id>
          
          <creation_ts>2021-03-14 10:06:13 +0000</creation_ts>
          <short_desc>Collect cache associative type in CpuCacheInfoLib</short_desc>
          <delta_ts>2021-08-23 04:55:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason">yun.lou</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15307</commentid>
    <comment_count>0</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-03-14 10:06:13 +0000</bug_when>
    <thetext>Support collecting cache associative type in CpuCacheInfoLib.
This prevents the user from using additional code to obtain the same information.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15308</commentid>
    <comment_count>1</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-03-14 10:07:17 +0000</bug_when>
    <thetext>Assign to Jason Lou.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15309</commentid>
    <comment_count>2</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-03-15 04:13:28 +0000</bug_when>
    <thetext>Have sent out the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15356</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-03-18 10:15:10 +0000</bug_when>
    <thetext>Have merged the code change into master, close this bug.

SHA-1: e4ff3773b711527ff46759759f34ea1cb9ff2a45

* UefiCpuPkg/CpuCacheInfoLib: Collect cache associative type

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3265

Support collecting cache associative type in CpuCacheInfoLib.
This prevents the user from using additional code to obtain the
same information.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17007</commentid>
    <comment_count>4</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-08-23 04:55:40 +0000</bug_when>
    <thetext>Merged another code change into master.

SHA-1: 8dd4fc5be6189666b37e5b00131a4173c6a2b085

* UefiCpuPkg/CpuCacheInfoLib: Correct logical for identifying cache type

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3265

Correct the logical for identifying &quot;Direct mapped&quot; cache type.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3752</bug_id>
          
          <creation_ts>2021-11-28 20:34:11 +0000</creation_ts>
          <short_desc>VfrCompile: Numeric/one of opcode&apos;s Flag setting for bit field missing bit mask at VfrSyntax.g</short_desc>
          <delta_ts>2021-12-09 22:21:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Long Huang">long1.huang</reporter>
          <assigned_to name="Long Huang">long1.huang</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17858</commentid>
    <comment_count>0</comment_count>
    <who name="Long Huang">long1.huang</who>
    <bug_when>2021-11-28 20:34:11 +0000</bug_when>
    <thetext>Before running SetFlagsForBitField, LFlags should be set to: LFlags &amp;= EDKII_IFR_DISPLAY_BIT</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17862</commentid>
    <comment_count>1</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-11-29 20:38:54 +0000</bug_when>
    <thetext>huang long is working on it now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17973</commentid>
    <comment_count>2</comment_count>
    <who name="Long Huang">long1.huang</who>
    <bug_when>2021-12-09 22:21:24 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/2268/commits/4f0645f7a86bdcfb182d9cbe421679038e5a2142</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3152</bug_id>
          
          <creation_ts>2021-01-04 09:39:43 +0000</creation_ts>
          <short_desc>ArmVirtPkg, OvmfPkg: disable list length checks in NOOPT and DEBUG builds</short_desc>
          <delta_ts>2021-01-19 13:47:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14700</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-04 09:39:43 +0000</bug_when>
    <thetext>With edk2 master @ 0785c619a58a:

In NOOPT and DEBUG builds, if &quot;PcdMaximumLinkedListLength&quot; is nonzero,
then several LIST_ENTRY *node* APIs in BaseLib compare the *full* list
length against the PCD.

This turns the time complexity of node-level APIs from constant to
linear, and that of full-list manipulations from linear to quadratic.

As an example, consider the EFI_SHELL_FILE_INFO list, which is a data
structure that&apos;s widely used in the UEFI shell. I randomly extracted
5000 files from &quot;/usr/include&quot; on my laptop, spanning 1095
subdirectories out of 1538, and then ran &quot;DIR -R&quot; in the UEFI shell on
this tree, using OVMF. These are the wall-clock times:

           PcdMaximumLinkedListLength  PcdMaximumLinkedListLength
           =1,000,000                  =0
           --------------------------  ---------------------------
FAT        4 min 31 s                        18 s
virtio-fs  5 min 13 s                  1 min 33 s

Checking list lengths against an arbitrary maximum (default: 1,000,000)
seems useless even in NOOPT and DEBUG builds, while the cost is
significant. Therefore we should set the PCD to 0 in both ArmVirtPkg and
OvmfPkg platforms.

(Reporting this as a &quot;Feature Request&quot; and not as a &quot;Bug&quot; because the
present (slow) setting cannot be considered a bug outright. Instead, the
request is to theoretically &quot;weaken&quot; the list self-checking that&apos;s
currently part of NOOPT and DEBUG builds, in order to gain a big
speedup. So this can be considered an upstream &quot;debug policy&quot; change.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14704</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-04 10:46:08 +0000</bug_when>
    <thetext>Addressed by patches #7-#8 in

* [edk2-devel] [PATCH 0/8]
  ShellPkg, ArmVirtPkg, OvmfPkg: shell usability improvements

https://edk2.groups.io/g/devel/message/69590
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00070.html
Message-Id: &lt;20210104154235.31785-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14798</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-13 03:58:25 +0000</bug_when>
    <thetext>Addressed by patches #9-#10 in

* [edk2-devel] [PATCH v2 00/10]
  multiple packages: shell usability improvements

https://edk2.groups.io/g/devel/message/70216
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00700.html
Message-Id: &lt;20210113085453.10168-1-lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14840</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-19 13:47:18 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; Addressed by patches #9-#10 in
&gt; 
&gt; * [edk2-devel] [PATCH v2 00/10]
&gt;   multiple packages: shell usability improvements
&gt; 
&gt; https://edk2.groups.io/g/devel/message/70216
&gt; https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00700.html
&gt; Message-Id: &lt;20210113085453.10168-1-lersek@redhat.com&gt;

Merged as commit range e68c2a22caae..6e5586863148, via
&lt;https://github.com/tianocore/edk2/pull/1370&gt;:

   1  f72fd9616eed ShellPkg/Comp: add file buffering
   2  2912341cd924 OvmfPkg: raise PcdShellFileOperationSize to 128KB
   3  a0b352e18bde ArmVirtPkg: raise PcdShellFileOperationSize to 128KB
   4  130e929f98ce EmulatorPkg: add OrderedCollectionLib class
                   resolution
   5  ef03e72651b8 UefiPayloadPkg: add OrderedCollectionLib class
                   resolution
   6  101c55ac0db7 ShellPkg/ShellCommandLib: add ShellSortFileList()
   7  70254306a823 ShellPkg/Ls: sort output by FileName in non-SFO mode
   8  c8ce60eb2938 ShellPkg/ShellProtocol: sort files by FullName in
                   RemoveDupInFileList()
*  9  d3f3c942013a OvmfPkg: disable list length checks in NOOPT and
                   DEBUG builds
* 10  6e5586863148 ArmVirtPkg: disable list length checks in NOOPT and
                   DEBUG builds</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3910</bug_id>
          
          <creation_ts>2022-04-21 16:44:59 +0000</creation_ts>
          <short_desc>SecureBootVariableLib assumes initialization from FV</short_desc>
          <delta_ts>2022-07-07 01:45:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>min.m.xu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18885</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-04-21 16:44:59 +0000</bug_when>
    <thetext>Current implementation of SecureBootVariableLib provides an interface `SecureBootFetchData` to iterate through the entire FV to collect all certificates and create signature list based on the result.

The collective signature list creation function is a useful functionality but the input always come from the FV limited the usage. The suggestion is to add a function that creates `EFI_SIGNATURE_LIST` from input data. So that `SecureBootFetchData` can be moved to `SecureBootVariableProvisionLib` that consumes this new interface.

This will extend the interface usability and provide flexibility to platforms that do not initialize certificates from FV.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18886</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-04-21 16:46:29 +0000</bug_when>
    <thetext>Potential suggested changes for SecureBootVariableLib:
https://github.com/kuqin12/mu_tiano_plus/commit/bc0b4ef7bc0c1cbc4c2e26990a3f6a0452f778f5
https://github.com/kuqin12/mu_tiano_plus/commit/1021fabd004262c434561a1824454f8121412059

Potential changes for SecureBootVariableProvisionLib that consumes the new interface:
https://github.com/kuqin12/mu_tiano_plus/commit/abaf8d5df04a76b3d4dfce6b4d7da7ef992a8803</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19001</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 22:07:50 +0000</bug_when>
    <thetext>Include package maintianer Jiewen and Min to review this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19210</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-07-07 01:45:27 +0000</bug_when>
    <thetext>Merged as 134fbd552c, 6de7c084db, and fe73e9cd89 &lt;https://github.com/tianocore/edk2/pull/3050&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3291</bug_id>
          
          <creation_ts>2021-03-31 13:50:57 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: IEEE Extended Unique Identifiers (EUI64) are big endian</short_desc>
          <delta_ts>2021-06-06 14:00:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3338</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15486</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-31 13:50:57 +0000</bug_when>
    <thetext>The UEFI specification for the NVme() node refers to NVM Express Specification.

In the &quot;NVM Express Base Specification&quot;, NVM Express Revision 1.4b ,September 21, 2020, chapter 7.10.4IEEE Extended Unique Identifier (EUI64) we find:

&quot;EUI64 is defined in big endian format.&quot;

The SCT implementations of EUI64StrToUInt64() get this wrong.

This results in a false positive

DevicePathToTextBBTestCoverage.c:1846: Convert result: NVMe(0xab124bef,89-67-45-23-01-ef-cd-ab) - Expected: NVMe(0xAB124BEF,AB-CD-EF-01-23-45-67-89)

when testing U-Boot.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15488</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-31 14:15:19 +0000</bug_when>
    <thetext>Bug report #3291 can be used for fixing the problem in the EDK II.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15684</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-14 18:34:18 +0000</bug_when>
    <thetext>I submitted https://bugzilla.tianocore.org/show_bug.cgi?id=3338 as a code-first UEFI Spec ECR to clarify the intention of the spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16277</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-06 14:00:48 +0000</bug_when>
    <thetext>Closing as the issue is handled in https://bugzilla.tianocore.org/show_bug.cgi?id=3338 now.

*** This bug has been marked as a duplicate of bug 3338 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3780</bug_id>
          
          <creation_ts>2021-12-20 02:08:09 +0000</creation_ts>
          <short_desc>edk2-libc: Enhance Py3 to build with latest version of Clang compiler tool chain</short_desc>
          <delta_ts>2022-06-28 02:46:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Jayaprakash Nevara">n.jayaprakash</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18028</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-12-20 02:08:09 +0000</bug_when>
    <thetext>The Py3 version available on edk2-libc repo supports building with the VS tool chains such as VS2019, VS2017 and etc. To address the needs of developers working with different tool chains having support for building Py3 with Clang would be helpful as Clang compiler tool chain is one of the dominant tool chains used by the open source community. 

This BZ has been created to request for clang compiler support for building Py3 UEFI interpreter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18086</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-04 21:52:02 +0000</bug_when>
    <thetext>JP will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19091</commentid>
    <comment_count>2</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-06-17 04:50:58 +0000</bug_when>
    <thetext>Patch request is under review.
Will close this BZ once the changes are merged to master / main repo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19146</commentid>
    <comment_count>3</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-06-28 02:46:25 +0000</bug_when>
    <thetext>Patch request for the 32 bit build support has been merged to the main repo of edk2-libc project.

Below is the merge commit related to the enabling 32 bit GCC build of Python-UEFI interpreter

https://github.com/tianocore/edk2-libc/commit/02a77dd71c22c7c5b74e30b30a5e5b97f330f8f7

Hence closing this BZ.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3665</bug_id>
          
          <creation_ts>2021-09-28 23:26:29 +0000</creation_ts>
          <short_desc>Migrate some ArmVirtPkg modules to OvmfPkg for RiscVVirtPkg</short_desc>
          <delta_ts>2022-03-03 22:26:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17410</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-09-28 23:26:29 +0000</bug_when>
    <thetext>The ticket is submitted to migrate some modules from ArmVirtPkg
to under OvmfPkg for the upcoming RiscVVirtPkg be able to leverage
those modules without the dependency with Arm*Pkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17467</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-07 22:25:45 +0000</bug_when>
    <thetext>Abner is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18553</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-03 22:26:52 +0000</bug_when>
    <thetext>77e9b3a7c68cea4eeb64af85e4f695f278172314 to e0c23cba5eaeb6c934a10ecdabcb235ef5d63799</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3057</bug_id>
          
          <creation_ts>2020-11-07 02:05:33 +0000</creation_ts>
          <short_desc>SctPkg: CreateEvent: conformance of test for NotifyTpl</short_desc>
          <delta_ts>2021-06-11 04:25:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>gaoliming</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>Sunny.Wang</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14263</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-07 02:05:33 +0000</bug_when>
    <thetext>According to table Table 27. TPL Restrictions in UEFI spec 2.8 B:

Event Notification Levels must be &quot;&gt; TPL_APPLICATION&quot; and &quot;&lt;= TPL_HIGH_LEVEL&quot;.

So calling CreateEvent() with either EVT_NOTIFY_WAIT or EVT_NOTIFY_SIGNAL and NotifyTpl == TPL_APPLICATION must result in EFI_INVALID_PARAMETER while calling CreateEvent() with NotifyTPL == TPL_APPLICATION is allowable.

The corresponding code in EDK II, CoreCreateEventEx() seems to be wrong in this respect:


  //  
  // If it&apos;s a notify type of event, check for invalid NotifyTpl
  //  
  if ((Type &amp; (EVT_NOTIFY_WAIT | EVT_NOTIFY_SIGNAL)) != 0) {
    if (NotifyTpl != TPL_APPLICATION &amp;&amp;
        NotifyTpl != TPL_CALLBACK &amp;&amp;
        NotifyTpl != TPL_NOTIFY) {
      return EFI_INVALID_PARAMETER;
    }   
  }

The SCT should produce a FAIL for allowing TPL_APPLICATION
and another FAIL for disallowing TPL_HIGH_LEVEL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14266</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-07 02:14:40 +0000</bug_when>
    <thetext>I have created a related bug report for EDK II:
https://bugzilla.tianocore.org/show_bug.cgi?id=3058</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14740</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-06 03:07:26 +0000</bug_when>
    <thetext>Gao Liming confirmed the issue in the related bug report
https://bugzilla.tianocore.org/show_bug.cgi?id=3058.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14743</commentid>
    <comment_count>3</comment_count>
      <attachid>633</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-06 07:36:45 +0000</bug_when>
    <thetext>Created attachment 633
[PATCH 1/2] uefi-sct/SctPkg: allowable NotifyTpl in CreateEventEx</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14744</commentid>
    <comment_count>4</comment_count>
      <attachid>634</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-06 07:37:25 +0000</bug_when>
    <thetext>Created attachment 634
[PATCH 2/2] uefi-sct/SctPkg: allowable NotifyTpl in CreateEvent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14745</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-01-06 07:44:51 +0000</bug_when>
    <thetext>Patches are provided in the appendix and on the mailing list as:

https://edk2.groups.io/g/devel/message/69815
https://edk2.groups.io/g/devel/message/69816

Please, review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14944</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-02-01 09:43:07 +0000</bug_when>
    <thetext>The appended patches were reviewed:

Re: [PATCH 1/2] uefi-sct/SctPkg: allowable NotifyTpl in CreateEventEx 
Reviewed-By: Samer El-Haj-Mahmoud &lt;Samer.El-Haj-Mahmoud@arm.com&gt;
https://edk2.groups.io/g/devel/message/71021

Re: [PATCH 2/2] uefi-sct/SctPkg: allowable NotifyTpl in CreateEvent 
Reviewed-by: Samer El-Haj-Mahmoud &lt;Samer.El-Haj-Mahmoud@arm.com&gt;
https://edk2.groups.io/g/devel/message/71020

Please, consider for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15862</commentid>
    <comment_count>7</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 03:39:37 +0000</bug_when>
    <thetext>Patches are merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16341</commentid>
    <comment_count>8</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-11 04:25:23 +0000</bug_when>
    <thetext>According to a discussion in https://edk2.groups.io/g/devel/message/76338 patch 2 is partially reverted by:

[edk2-test][PATCH v1 1/1] uefi-sct/SctPkg: Not create event with TPL_HIGH_LEVEL 
https://edk2.groups.io/g/devel/message/76368

The same should be done for patch 1.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>633</attachid>
            <date>2021-01-06 07:36:45 +0000</date>
            <delta_ts>2021-01-06 07:36:45 +0000</delta_ts>
            <desc>[PATCH 1/2] uefi-sct/SctPkg: allowable NotifyTpl in CreateEventEx</desc>
            <filename>0001-uefi-sct-SctPkg-allowable-NotifyTpl-in-CreateEventEx.patch</filename>
            <type>text/plain</type>
            <size>2769</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>634</attachid>
            <date>2021-01-06 07:37:25 +0000</date>
            <delta_ts>2021-01-06 07:37:25 +0000</delta_ts>
            <desc>[PATCH 2/2] uefi-sct/SctPkg: allowable NotifyTpl in CreateEvent</desc>
            <filename>0002-uefi-sct-SctPkg-allowable-NotifyTpl-in-CreateEvent.patch</filename>
            <type>text/plain</type>
            <size>2954</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3546</bug_id>
          
          <creation_ts>2021-08-10 04:42:15 +0000</creation_ts>
          <short_desc>How to get a cash app refund by raising a dispute?</short_desc>
          <delta_ts>2021-08-16 21:50:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Reference Implementation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="james smith">js8435877</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Distribution Packaging Specificatio</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16856</commentid>
    <comment_count>0</comment_count>
    <who name="james smith">js8435877</who>
    <bug_when>2021-08-10 04:42:15 +0000</bug_when>
    <thetext>Raising a dispute is another way to request a refund on a cash app. If you are not getting the refund from the merchant by raising a refund request, then you have to raise a dispute for this. We recommend you contact our experts to know the process to get a cash app refund by raising a dispute. https://www.numbers-for-support.com/blog/cash-app-refund/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16932</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:50:24 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3443</bug_id>
          
          <creation_ts>2021-06-09 13:27:28 +0000</creation_ts>
          <short_desc>spell check plugin for CI has incorrect file include patterns for invocation when a previous package modifies the standard list.</short_desc>
          <delta_ts>2021-06-15 13:02:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16319</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-06-09 13:27:28 +0000</bug_when>
    <thetext>Spell Check plugin uses incorrect file include patterns when a previous package yaml modifies the standard include patterns.  

For example in MdeModulePkg you can see the package config ignores some of the standard patterns.

https://github.com/tianocore/edk2/blob/master/MdeModulePkg/MdeModulePkg.ci.yaml#L92

This is then &quot;leaked&quot; into any package that is tested in CI after the MdeModulePkg.  

For Edk2 and how it is currently configured in the azurepipeline &quot;matrix&quot; this is not an issue.  If more packages start doing spell checking or the matrix is changed this could be a problem.  

For a local developer testing multiple packages at once this could lead to files not being spell checked.  

For other projects using pytools and the spell check edk2 plugin this could be a problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16321</commentid>
    <comment_count>1</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-06-09 14:03:58 +0000</bug_when>
    <thetext>bug is class variable STANDARD_PLUGIN_DEFINED_PATHS
seen here: https://github.com/tianocore/edk2/blob/master/.pytool/Plugin/SpellCheck/SpellCheck.py#L40
is a list.  

In a local function the list is modified based on the package config.  This then leaks to the next package.  

Proposed solution is to convert class member to tuple so that is read-only.  Then copy into list in the local function before package specific modifications.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16369</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-15 13:00:35 +0000</bug_when>
    <thetext>Merged as commit 288bd74a22b1a3c7130d8a303e332161f923b8d4, via
&lt;https://github.com/tianocore/edk2/pull/1713&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16370</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-15 13:02:52 +0000</bug_when>
    <thetext>Patch merged. Mark as resolved - fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3939</bug_id>
          
          <creation_ts>2022-06-02 11:08:27 +0000</creation_ts>
          <short_desc>Tag and Release of edk2-test</short_desc>
          <delta_ts>2024-07-17 15:26:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Edhay">edhaya.chandran</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>Carolyn.Gjertsen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaojie</cc>
    
    <cc>Sunny.Wang</cc>
    
    <cc>vincent.stehle</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19024</commentid>
    <comment_count>0</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-06-02 11:08:27 +0000</bug_when>
    <thetext>This ticket is created to tag and release of edk2-test

Release plan: August 2022

Criteria:
1. Compile on AArch64, Arm, x64 and RISC-V
2. Test on all the architecture


Must have features to be discussed in the triage meeting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19464</commentid>
    <comment_count>1</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-09-01 10:58:32 +0000</bug_when>
    <thetext>Major Features:
RISCV EFI BOOT protocol
TCG2 Protocol Tests
SecureBoot Tests



New Tag Date: October End 2022</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23236</commentid>
    <comment_count>2</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2024-07-17 15:25:52 +0000</bug_when>
    <thetext>The edk2-test release was tagged and released.
The details are as below:
https://github.com/tianocore/edk2-test/releases/tag/edk2-test-stable202406</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23237</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2024-07-17 15:26:29 +0000</bug_when>
    <thetext>Release completed. Closing this ticket.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3809</bug_id>
          
          <creation_ts>2022-01-20 01:41:32 +0000</creation_ts>
          <short_desc>Simplify http response status check</short_desc>
          <delta_ts>2022-01-20 01:55:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Wenyi, Xie">xiewenyi0201</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>RedfishPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18188</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2022-01-20 01:41:32 +0000</bug_when>
    <thetext>Remove redundant if statement to simplify the function RedfishCheckHttpReceiveStatus.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18189</commentid>
    <comment_count>1</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2022-01-20 01:55:17 +0000</bug_when>
    <thetext>Sorry for creating this issue, it&apos;s a mistake, just close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3196</bug_id>
          
          <creation_ts>2021-02-01 21:19:56 +0000</creation_ts>
          <short_desc>ShadowMicrocodePei: Microcode header should be verified before shadow.</short_desc>
          <delta_ts>2021-02-08 19:49:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Aaron Li">aaron.li</reporter>
          <assigned_to name="Aaron Li">aaron.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14947</commentid>
    <comment_count>0</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2021-02-01 21:19:56 +0000</bug_when>
    <thetext>Microcode header should be checked before calling IsMicrocodePatchNeedLoad(). This is to make sure garbage value after remove microcode from FV would not cause stack overflow in IsMicrocodePatchNeedLoad().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14948</commentid>
    <comment_count>1</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2021-02-01 21:20:19 +0000</bug_when>
    <thetext>take owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14970</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-02 21:55:00 +0000</bug_when>
    <thetext>Aaron is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15047</commentid>
    <comment_count>3</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2021-02-08 19:49:29 +0000</bug_when>
    <thetext>fixed @ 4515854365cc678dc5e804f634c3077c6a116fea</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3686</bug_id>
          
          <creation_ts>2021-10-13 17:48:25 +0000</creation_ts>
          <short_desc>code first- Clarify Uart() DevicePath Text/binary representation</short_desc>
          <delta_ts>2022-03-09 12:00:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Jose Marinho">Jose.Marinho</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17532</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-13 17:48:25 +0000</bug_when>
    <thetext>Background information:

- EDK2-Test BZ with details : https://bugzilla.tianocore.org/show_bug.cgi?id=3270
- Edk2-test code: https://github.com/tianocore/edk2-test/blob/master/uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/DevicePathFromText/BlackBoxTest/DevicePathFromTextBBTestCoverage.c#L2722


See attached ECR with the problem statement and proposal</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17533</commentid>
    <comment_count>1</comment_count>
      <attachid>843</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-13 18:22:02 +0000</bug_when>
    <thetext>Created attachment 843
Uart_DP_Text_Clarification_ver1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17581</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-18 21:28:04 +0000</bug_when>
    <thetext>Samer is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17970</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-12-08 12:56:30 +0000</bug_when>
    <thetext>Could you, please, change
&quot;Parity and StopBits can either be integers or keywords.&quot;
to
&quot;Parity and StopBits can either both be integers or both be keywords.&quot;

I think that would better emphasize the message. Otherwise I am fine with the change.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18121</commentid>
    <comment_count>4</comment_count>
      <attachid>913</attachid>
    <who name="Jose Marinho">Jose.Marinho</who>
    <bug_when>2022-01-13 06:39:59 +0000</bug_when>
    <thetext>Created attachment 913
Add further clarification to the ECR that type mixing for Parity and Stopbit is disallowed.

Further clarify that the only legal {Parity, Stopbits} type pairs are {integer, integer} or {keyword, keyword}.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18175</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-01-17 11:48:28 +0000</bug_when>
    <thetext>The added sentence in appendix &quot;Add further clarification to the ECR that type mixing for Parity and Stopbit is disallowed.&quot; looks fine to me.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18586</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-03-09 10:08:29 +0000</bug_when>
    <thetext>Approved by USWG as submitted without changes, as an errata for UEFI 2.9. Implementations may proceed using the approved ECR attached to this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18587</commentid>
    <comment_count>7</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2022-03-09 12:00:17 +0000</bug_when>
    <thetext>U-Boot v2022.04-rc3 contains a fix to follow the clarified description.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>843</attachid>
            <date>2021-10-13 18:22:02 +0000</date>
            <delta_ts>2021-10-13 18:22:02 +0000</delta_ts>
            <desc>Uart_DP_Text_Clarification_ver1</desc>
            <filename>Uart_DP_Text_Clarification.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>50554</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>913</attachid>
            <date>2022-01-13 06:39:59 +0000</date>
            <delta_ts>2022-01-13 06:39:59 +0000</delta_ts>
            <desc>Add further clarification to the ECR that type mixing for Parity and Stopbit is disallowed.</desc>
            <filename>Uart_DP_Text_Clarification_ver2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>50747</size>
            <attacher name="Jose Marinho">Jose.Marinho</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3084</bug_id>
          
          <creation_ts>2020-11-20 17:29:33 +0000</creation_ts>
          <short_desc>Boot ERROR in CpuDxe driver when it is dispatched above 4GB memory</short_desc>
          <delta_ts>2021-10-28 11:12:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dong_guo@126.com">guo.dong</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14387</commentid>
    <comment_count>0</comment_count>
      <attachid>600</attachid>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2020-11-20 17:29:33 +0000</bug_when>
    <thetext>Created attachment 600
the boot log using SBL + UEFI payload

when CpuDxe driver is dispatched above 4GB memory, below code has issue in
UefiCpuPkg\CpuDxe\X64\CpuAsm.nasm

global ASM_PFX(SetCodeSelector)
ASM_PFX(SetCodeSelector):
    sub     rsp, 0x10
    lea     rax, [setCodeSelectorLongJump]
    mov     [rsp], rax
    mov     [rsp+4], cx
    jmp     dword far [rsp]
setCodeSelectorLongJump:
    add     rsp, 0x10
    ret

1. if removing jmp instruction it works fine since it is already in 64bit mode
2. with below changes, it also works fine
global ASM_PFX(SetCodeSelector)
ASM_PFX(SetCodeSelector):
    sub     rsp, 0x10
    lea     rax, [setCodeSelectorLongJump]
    mov     [rsp], rax
    mov     [rsp+8], cx
    jmp     qword far [rsp]
setCodeSelectorLongJump:
    add     rsp, 0x10
    ret</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14404</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-23 11:12:50 +0000</bug_when>
    <thetext>Can you submit a patch please? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14461</commentid>
    <comment_count>2</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2020-12-02 16:41:53 +0000</bug_when>
    <thetext>Now the patch is under code review.
https://github.com/tianocore/edk2/pull/1162</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14507</commentid>
    <comment_count>3</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2020-12-08 17:25:31 +0000</bug_when>
    <thetext>merged the fix in cee5b0441af39dd6f76cc4e0447a1c7f788cbb00.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14610</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-17 03:51:45 +0000</bug_when>
    <thetext>(In reply to dong_guo@126.com from comment #3)
&gt; merged the fix in cee5b0441af39dd6f76cc4e0447a1c7f788cbb00.

That commit broke CpuDxe on AMD processors; it is being reverted.

[edk2-devel] [PATCH] Revert &quot;UefiCpuPkg/CpuDxe: Fix boot error&quot;
Message-Id: &lt;20201217085055.15131-1-lersek@redhat.com&gt;
https://edk2.groups.io/g/devel/message/69087
https://www.redhat.com/archives/edk2-devel-archive/2020-December/msg00990.html

Reopening this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14662</commentid>
    <comment_count>5</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2020-12-24 15:21:36 +0000</bug_when>
    <thetext>A new patch using retfq is under code review.
https://github.com/tianocore/edk2/pull/1277</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17623</commentid>
    <comment_count>6</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2021-10-28 11:12:20 +0000</bug_when>
    <thetext>The patch was merged. commit: ebfe2d3eb5ac7fd92</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>600</attachid>
            <date>2020-11-20 17:29:33 +0000</date>
            <delta_ts>2020-11-20 17:29:33 +0000</delta_ts>
            <desc>the boot log using SBL + UEFI payload</desc>
            <filename>UEFI_payload_error.txt</filename>
            <type>text/plain</type>
            <size>74408</size>
            <attacher name="dong_guo@126.com">guo.dong</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3564</bug_id>
          
          <creation_ts>2021-08-13 15:48:57 +0000</creation_ts>
          <short_desc>MdeModulePkg/PeiCore: Remove MigrateSecModulesInFv()</short_desc>
          <delta_ts>2021-08-27 04:34:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>mhaeuser</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16910</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-13 15:48:57 +0000</bug_when>
    <thetext>The function MigrateSecModulesInFv() in MdeModulePkg/Core/Pei/Dispatcher/Dispatcher.c was added in commit 9bedaec05b7b8ba9aee248361bb61a85a26726cb but is not called.

This function should be removed since has not been called since it was added in that commit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16911</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-13 15:49:34 +0000</bug_when>
    <thetext>I will send a patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17099</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2021-08-27 04:34:32 +0000</bug_when>
    <thetext>Resolved via:
PR - https://github.com/tianocore/edk2/pull/1913
Commit - https://github.com/tianocore/edk2/commit/82f7e315d612399f65a3bedd3b2c0364b43b6929</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3468</bug_id>
          
          <creation_ts>2021-06-30 07:53:41 +0000</creation_ts>
          <short_desc>Chime Support</short_desc>
          <delta_ts>2021-07-05 05:12:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="albert lisy">albertlisy90</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16493</commentid>
    <comment_count>0</comment_count>
    <who name="albert lisy">albertlisy90</who>
    <bug_when>2021-06-30 07:53:41 +0000</bug_when>
    <thetext>I am a Chime Support. I am providing solutions for all Chime Support. Website- https://www.monktech.us/chime-customer-service-number.html
How do you chat with Chime
Unfreeze Cash App Account
Check My Chime Balance On My Phone
Filter out Dealership on Facebook Marketplace</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16540</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-05 05:12:51 +0000</bug_when>
    <thetext>this is not related to edk2 project.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3975</bug_id>
          
          <creation_ts>2022-07-03 04:12:48 +0000</creation_ts>
          <short_desc>Add TPM NvIndex Extend support</short_desc>
          <delta_ts>2022-07-03 21:10:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="qi1.zhang@intel.com">qi1.zhang</reporter>
          <assigned_to name="qi1.zhang@intel.com">qi1.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19173</commentid>
    <comment_count>0</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2022-07-03 04:12:48 +0000</bug_when>
    <thetext>It is a requirement of PFP 1.06(draft)
https://members.trustedcomputinggroup.org/wg/PC_Client/document/folder/1761</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19174</commentid>
    <comment_count>1</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2022-07-03 04:14:09 +0000</bug_when>
    <thetext>Work in progress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19175</commentid>
    <comment_count>2</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2022-07-03 21:10:02 +0000</bug_when>
    <thetext>invalid</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3347</bug_id>
          
          <creation_ts>2021-04-20 23:40:18 +0000</creation_ts>
          <short_desc>Add new GUID (EFI_BOOT_MANAGER_POLICY_USB_GUID) to EFI_BOOT_MANAGER_POLICY_PROTOCOL</short_desc>
          <delta_ts>2021-04-21 10:56:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Sunny Wang">Sunny.Wang</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>ardb</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>pete</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15747</commentid>
    <comment_count>0</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-04-20 23:40:18 +0000</bug_when>
    <thetext>The new GUID will be used by platform firmware or application to discover USB devices in the Fast Boot path for system diagnostic testing or deployment. We saw this need on ARM systems.

For more information about Fast Boot, please check https://github.com/tianocore/edk2-platforms/commit/efdc159ef7c9f15581a0f63d755a1530ff475156#diff-0975811f2220366c94305668f68704bc5bca2b6918fcfa6f4c1a52a415355011.   

Currently, the classes supported by EFI_BOOT_MANAGER_PROTOCOL.ConnectDeviceClass() are the following three GUIDs for different connecting target devices. We want to add one more GUID to connect USB devices. 
 - EFI_BOOT_MANAGER_POLICY_CONSOLE_GUID 
 - EFI_BOOT_MANAGER_POLICY_NETWORK_GUID
 - EFI_BOOT_MANAGER_POLICY_CONNECT_ALL_GUID</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15752</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-21 07:53:39 +0000</bug_when>
    <thetext>Hi Sunny,

(1) You are referring to EFI_BOOT_MANAGER_PROTOCOL as an existent thing (or maybe a thing already under standardization / code first). Where does it live? I can&apos;t see any trace of it in edk2.

Ah, do you mean EFI_BOOT_MANAGER_POLICY_PROTOCOL?

(2) Regarding the commit you reference (the introduction of &quot;gRaspberryPiTokenSpaceGuid.PcdBootPolicy&quot;) -- is that PCD not redundant with the PI-specified &quot;boot mode&quot; concept?

The boot mode is maintained in the EFI_HOB_HANDOFF_INFO_TABLE (PHIT) HOB, can be managed via the GetBootMode() / SetBootMode() PEI services, and once the boot mode has been determined / finalized, the EFI_PEI_MASTER_BOOT_MODE_PPI (with null interface struct) must be installed. The standard boot modes include BOOT_WITH_FULL_CONFIGURATION, BOOT_WITH_MINIMAL_CONFIGURATION, BOOT_ASSUMING_NO_CONFIGURATION_CHANGES, BOOT_WITH_DEFAULT_SETTINGS, among others. There is also room for reserved encodings. Could one of those perhaps map to your &quot;fast boot&quot; policy?

Asking because &quot;ConnectAll() or not&quot; seems to map to &quot;full config vs. minimal&quot; or something like that (cf. &quot;only required devices will be discovered&quot;, in the UNI file in the commit).

Also, if you want to control the boot mode via the setup browser / HII, that&apos;s possible -- a DXE driver can manage a non-volatile UEFI variable via HII indeed, and in the PEI phase (after reboot), you can have read-only UEFI variable access. You could have a platform PEIM that sets the boot mode (see above) from the UEFI variable.

Note that Platform BDS can also access the boot mode, see GetBootModeHob() [MdePkg/Library/DxeHobLib/HobLib.c].

Basically I would recommend replacing PcdBootPolicy with BOOT_WITH_FULL_CONFIGURATION / BOOT_WITH_MINIMAL_CONFIGURATION.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15757</commentid>
    <comment_count>2</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-04-21 10:54:15 +0000</bug_when>
    <thetext>I just got an internal comment that this proposal may not work on some ARM systems&apos; USB controllers that are not on a common PCI bus. Therefore, let&apos;s close this bug. 

Thanks for the comments, Laszlo. I will still take your valuable comments back to our internal discussion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15758</commentid>
    <comment_count>3</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-04-21 10:56:35 +0000</bug_when>
    <thetext>I just got an internal comment that this proposal may not work on some ARM systems&apos; USB controllers that are not on a common PCI bus. Therefore, let&apos;s close this bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3832</bug_id>
          
          <creation_ts>2022-02-13 10:43:05 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: BaseFspSwitchStackLib Support for X64 Build</short_desc>
          <delta_ts>2022-03-17 09:28:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashraf Ali S">ashraf.ali.s</reporter>
          <assigned_to>ted.kuo</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>ted.kuo</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18340</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2022-02-13 10:43:05 +0000</bug_when>
    <thetext>Currently BaseFspSwitchStackLib support IA32, adding support for X64 Build</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18440</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-22 22:03:29 +0000</bug_when>
    <thetext>Ashraf Ali S will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18638</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-03-17 09:28:51 +0000</bug_when>
    <thetext>commit 411b3ff6ddb4042374a6e61285dac9f5a227f652
Author: Kuo, Ted &lt;ted.kuo@intel.com&gt;
Date:   Mon Mar 14 10:48:00 2022 +0800

    IntelFsp2Pkg: BaseFspSwitchStackLib Support for X64

    REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3832
    Add BaseFspSwitchStackLib Support for X64.

    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Cc: Ashraf Ali S &lt;ashraf.ali.s@intel.com&gt;
    Signed-off-by: Ted Kuo &lt;ted.kuo@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3218</bug_id>
          
          <creation_ts>2021-02-11 20:24:04 +0000</creation_ts>
          <short_desc>UefiCpuPkg/SmmCpuFeaturesLib: Add Standalone MM support</short_desc>
          <delta_ts>2021-03-08 13:16:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15057</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-11 20:24:04 +0000</bug_when>
    <thetext>The SmmCpuFeaturesLib can be useful for IA32/X64 platforms that need a library instance in Standalone MM environments. Much of the logic can be reused and a new INF can be added for a library instance called &quot;StandaloneMmCpuFeaturesLib&quot; that supports MM_STANDALONE module types.

The most notable constraint will be that PcdCpuMaxLogicalProcessorNumber will need to be FixedAtBuild in the Standalone MM library instance since PCD services will not be available within Standalone MM. This can be a constraint enforced in the Standalone MM INF file with the understanding that platforms will need to ensure the PCD is FixedAtBuild when using Standalone MM.

It would be possible to allow that information to be passed in via a HOB but I don&apos;t think a duplicate data input interface is desirable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15058</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-11 20:24:29 +0000</bug_when>
    <thetext>I am preparing the changes and will send a patch soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15059</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-11 23:12:12 +0000</bug_when>
    <thetext>V1 patch is on the mailing list: https://edk2.groups.io/g/devel/message/71626</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15066</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-12 20:00:23 +0000</bug_when>
    <thetext>V2 patch is on the mailing list: https://edk2.groups.io/g/devel/message/71656

It addresses the following feedback on v1:
https://edk2.groups.io/g/devel/message/71628</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15076</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-17 16:35:38 +0000</bug_when>
    <thetext>V3 patch series is on the mailing list: https://edk2.groups.io/g/devel/message/71751

It addresses feedback on PATCH v2 4/4.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15162</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-02-28 20:25:52 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15236</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-08 13:16:32 +0000</bug_when>
    <thetext>(In reply to Michael Kubacki from comment #4)
&gt; V3 patch series is on the mailing list:
&gt; https://edk2.groups.io/g/devel/message/71751
&gt; 
&gt; It addresses feedback on PATCH v2 4/4.

Merged as commit range 94fa95c8746c..edd46cd407ea, via &lt;https://github.com/tianocore/edk2/pull/1482&gt;.

I had to replace the guard macro &quot;_CPU_FEATURES_LIB_H_&quot; with &quot;CPU_FEATURES_LIB_H_&quot; (removing the underscore prefix) in the first patch.

That&apos;s because commit 6ffbb3581ab7 (&quot;BaseTools: Align include guards policy&quot;, 2021-02-26) was merged after this series had been posted, and now &quot;_CPU_FEATURES_LIB_H_&quot; triggered ECC error 8003.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3590</bug_id>
          
          <creation_ts>2021-08-25 04:19:17 +0000</creation_ts>
          <short_desc>The BootManagerMenuApp would show incorrect when the boot option description is too long</short_desc>
          <delta_ts>2021-11-26 10:12:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17063</commentid>
    <comment_count>0</comment_count>
      <attachid>810</attachid>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2021-08-25 04:19:17 +0000</bug_when>
    <thetext>Created attachment 810
BootMenuCapture

Some USB disk like some type of Sandisk USB disk would have a long USB serialnumber which would make it boot option with a very long description string. (disk link: https://item.jd.com/100005607784.html). And in this case the boot manager menu would show incorrectly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17096</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-26 21:33:41 +0000</bug_when>
    <thetext>Limit the boot description when show it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17097</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2021-08-26 22:04:51 +0000</bug_when>
    <thetext>hi, Liming. do you mean truncate the boot description from BmGetBootDescription if the return value is too long?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17098</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2021-08-26 22:06:42 +0000</bug_when>
    <thetext>(In reply to Zhichao Gao from comment #2)
&gt; hi, Liming. do you mean truncate the boot description from
&gt; BmGetBootDescription if the return value is too long?

If just limit it when show it, it would cause the different showing in Setup Boot manager page with BootManagerMenu.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17113</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-30 22:13:16 +0000</bug_when>
    <thetext>I mean to update Boot Scription handler in BmGetBootDescription().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17195</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-07 23:16:28 +0000</bug_when>
    <thetext>Zhichao is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17231</commentid>
    <comment_count>6</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2021-09-10 02:41:08 +0000</bug_when>
    <thetext>I have sent out two patch to the open source community.
V1: limit the boot description within 71 chars
V2: limit the option string length within 1 line in BM app

Hope we can get a decision from this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17383</commentid>
    <comment_count>7</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2021-09-27 01:35:51 +0000</bug_when>
    <thetext>Final solution:
Limit the boot option description showing within one line for BootManagerMenuApp.
The last 3 characters for the uncompleted boot option string would be replace as &quot;...&quot;.

Affect:
The boot option would be displayed different between BootManagerMenuApp and Setup BootManagerUi Page:
BootManagerMenuApp: All boot option would be limited within one line. For the uncompleted string the last 3 characters would be replaced with &quot;...&quot;.
BootManagerUi Page: All boot option would be displayed completely.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17853</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:12:47 +0000</bug_when>
    <thetext>Fix at f57040b038ccf9ea2a79e3ce58b14e7634666d19</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>810</attachid>
            <date>2021-08-25 04:19:17 +0000</date>
            <delta_ts>2021-08-25 04:19:17 +0000</delta_ts>
            <desc>BootMenuCapture</desc>
            <filename>bootmenu.png</filename>
            <type>image/png</type>
            <size>329479</size>
            <attacher name="Zhichao Gao">zhichao.gao</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3485</bug_id>
          
          <creation_ts>2021-07-09 03:27:27 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: BaseCacheLib EfiProgramMtrr MtrrNumber Should be UINT32</short_desc>
          <delta_ts>2021-07-14 00:04:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashraf Ali S">ashraf.ali.s</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>ashraf.ali.s</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16596</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-09 03:27:27 +0000</bug_when>
    <thetext>CacheLib EfiProgramMtrr Function takes MTRR number as a input parameter,
in the function the parameter is defined as UINTN were as the caller calling MTTR number in UINT32.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16597</commentid>
    <comment_count>1</comment_count>
      <attachid>764</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-09 03:37:10 +0000</bug_when>
    <thetext>Created attachment 764
Patch with Required Changes

Attaching the patch with required changes.
Removing IA32 from Source of INF since CacheLib can be available to all Arch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16598</commentid>
    <comment_count>2</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-09 03:41:06 +0000</bug_when>
    <thetext>EfiProgramMtrr function is calling from SetCacheAttributes where
MsrNum and UsedMsrNum are defined as UINT32</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16621</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-13 21:40:52 +0000</bug_when>
    <thetext>Chasel, can you help review the attached patch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16630</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-07-14 00:04:56 +0000</bug_when>
    <thetext>commit 91f5d3b41043b8a0c8a5ed00e1c88bca4a777067
Author: S, Ashraf Ali &lt;ashraf.ali.s@intel.com&gt;
Date:   Fri Jul 9 15:33:16 2021 +0800

    IntelFsp2Pkg: BaseCacheLib EfiProgramMtrr MtrrNumber Should be UINT32

    REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3485

    CacheLib EfiProgramMtrr Function takes MTRR number as a input parameter,
    in the function the parameter is defined as UINTN were as the caller
    calling MTTR number in UINT32.

    Signed-off-by: Ashraf Ali S &lt;ashraf.ali.s@intel.com&gt;
    Cc: Ray Ni &lt;ray.ni@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Cc: Digant H Solanki &lt;digant.h.solanki@intel.com&gt;
    Cc: Sangeetha V &lt;sangeetha.v@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>764</attachid>
            <date>2021-07-09 03:37:10 +0000</date>
            <delta_ts>2021-07-09 03:37:10 +0000</delta_ts>
            <desc>Patch with Required Changes</desc>
            <filename>0001-IntelFsp2Pkg-BaseCacheLib-EfiProgramMtrr-MtrrNumber-.patch</filename>
            <type>text/plain</type>
            <size>2574</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3998</bug_id>
          
          <creation_ts>2022-07-18 15:54:02 +0000</creation_ts>
          <short_desc>Improve AcpiSsdtPcieLibArm compatibility</short_desc>
          <delta_ts>2022-09-07 17:40:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>DynamicTablesPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19258</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-07-18 15:54:02 +0000</bug_when>
    <thetext>The AcpiSsdtPcieLibArm provides decent functionality to create PCIe objects within SSDT table. However, there are some edge cases that the existing version of AcpiSsdtPcieLibArm does not support:

1. The ECAM config space is not reserved in the ACPI namespace, which could cause certain OSes to complain.
2. During the _CRS method for the Pci device generation, the switch-case statement did not handle a valid case, which could potentially cause the system to assert.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19283</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-19 21:49:36 +0000</bug_when>
    <thetext>Kun, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19523</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-09-07 17:40:01 +0000</bug_when>
    <thetext>Merged as 033ba8bb2976629fdb664d7131f44f8b0b8f6777 at https://github.com/tianocore/edk2/pull/3270</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3370</bug_id>
          
          <creation_ts>2021-05-03 11:52:49 +0000</creation_ts>
          <short_desc>No root-level directory in release archive</short_desc>
          <delta_ts>2021-06-01 03:15:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Anisse Astier">aastier</reporter>
          <assigned_to>gaoliming</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15886</commentid>
    <comment_count>0</comment_count>
    <who name="Anisse Astier">aastier</who>
    <bug_when>2021-05-03 11:52:49 +0000</bug_when>
    <thetext>This file has no root-level directory, unlike the previous release:

https://github.com/tianocore/edk2/releases/download/edk2-stable202011/edk2-edk2-stable202011.zip</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15905</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-04 15:40:53 +0000</bug_when>
    <thetext>Anisse, I don&apos;t see a difference:

$ unzip -l edk2-edk2-stable202011.zip

&gt;| Archive:  edk2-edk2-stable202011.zip
&gt;| 872f953262d68a11da7bc2fb3ded16df234b8700
&gt;|   Length      Date    Time    Name
&gt;| ---------  ---------- -----   ----
&gt;|         0  11-27-2020 02:19   edk2-edk2-stable202011/
&gt;|         0  11-27-2020 02:19   edk2-edk2-stable202011/.azurepipelines/
&gt;|      2591  11-27-2020 02:19   edk2-edk2-stable202011/.azurepipelines/ReadMe.md
&gt;|       471  11-27-2020 02:19   edk2-edk2-stable202011/.azurepipelines/Ubuntu-GCC5.yml
&gt;|       939  11-27-2020 02:19   edk2-edk2-stable202011/.azurepipelines/Ubuntu-PatchCheck.yml
&gt;|       366  11-27-2020 02:19   edk2-edk2-stable202011/.azurepipelines/Windows-VS2019.yml
&gt;| [...]

$ unzip -l edk2-edk2-stable202008.zip

&gt; Archive:  edk2-edk2-stable202008.zip
&gt; 06dc822d045c2bb42e497487935485302486e151
&gt;   Length      Date    Time    Name
&gt; ---------  ---------- -----   ----
&gt;         0  09-03-2020 16:48   edk2-edk2-stable202008/
&gt;         0  09-03-2020 16:48   edk2-edk2-stable202008/.azurepipelines/
&gt;      2591  09-03-2020 16:48   edk2-edk2-stable202008/.azurepipelines/ReadMe.md
&gt;       471  09-03-2020 16:48   edk2-edk2-stable202008/.azurepipelines/Ubuntu-GCC5.yml
&gt;       939  09-03-2020 16:48   edk2-edk2-stable202008/.azurepipelines/Ubuntu-PatchCheck.yml
&gt;       366  09-03-2020 16:48   edk2-edk2-stable202008/.azurepipelines/Windows-VS2019.yml
&gt; [...]

Both 202011 and 202008 seem to have root directories within the ZIP files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15907</commentid>
    <comment_count>2</comment_count>
    <who name="Anisse Astier">aastier</who>
    <bug_when>2021-05-04 17:20:31 +0000</bug_when>
    <thetext>I am sorry, I was lost in copy-pastes and I gave the wrong link, see:

https://github.com/tianocore/edk2/releases/download/edk2-stable202102/edk2-stable202102.zip

This is for 202102, indeed 202011 and 202008 were OK.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15910</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-05 08:11:12 +0000</bug_when>
    <thetext>Thanks, I&apos;m asking Mike to take a look then. Also CC&apos;ing Liming (Liming is the Release Manager).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15930</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-05 22:45:03 +0000</bug_when>
    <thetext>liming will update it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16201</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-28 03:48:04 +0000</bug_when>
    <thetext>Fixed for 202102 stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16228</commentid>
    <comment_count>6</comment_count>
    <who name="Anisse Astier">aastier</who>
    <bug_when>2021-06-01 03:15:16 +0000</bug_when>
    <thetext>Thanks.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3244</bug_id>
          
          <creation_ts>2021-03-03 22:30:20 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: typo Positoin</short_desc>
          <delta_ts>2021-03-30 10:51:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15210</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-03 22:30:20 +0000</bug_when>
    <thetext>The misspelled word &quot;Positoin&quot; can be found in:

 .../BlackBoxTest/SimpleTextOutBBTestConformance_efi.c
 .../BlackBoxTest/SimpleTextOutBBTestConformance_uefi.c
 .../BlackBoxTest/SimpleTextOutBBTestFunction_efi.c
 .../BlackBoxTest/SimpleTextOutBBTestFunction_uefi.c
 .../BlackBoxTest/SimpleTextOutBBTestConformance_uefi.c
 .../BlackBoxTest/SimpleTextOutBBTestFunction_uefi.c
 .../SctPkg/TestInfrastructure/SCT/Framework/UI/KeyFunction.c

As it shows up in output it should be fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15211</commentid>
    <comment_count>1</comment_count>
      <attachid>664</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-03 22:34:02 +0000</bug_when>
    <thetext>Created attachment 664
[PATCH edk2-test 1/1] uefi-sct/SctPkg: typo Positoin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15212</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-03 22:37:05 +0000</bug_when>
    <thetext>Patch provided as appendix and as mail to developer list:

[PATCH edk2-test 1/1] uefi-sct/SctPkg: typo Positoin 
https://edk2.groups.io/g/devel/message/72426</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15347</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-17 12:38:45 +0000</bug_when>
    <thetext>Appended patch
Reviewed-by: G Edhaya Chandran&lt;edhaya.chandran@arm.com&gt;
https://edk2.groups.io/g/devel/message/72970

Please, consider for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15449</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-30 10:51:15 +0000</bug_when>
    <thetext>Patch is merged</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>664</attachid>
            <date>2021-03-03 22:34:02 +0000</date>
            <delta_ts>2021-03-03 22:34:02 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: typo Positoin</desc>
            <filename>0001-uefi-sct-SctPkg-typo-Positoin.patch</filename>
            <type>text/plain</type>
            <size>10870</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3737</bug_id>
          
          <creation_ts>2021-11-16 12:42:55 +0000</creation_ts>
          <short_desc>Apply uncrustify changes to all package C and H files</short_desc>
          <delta_ts>2023-01-03 04:25:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3875</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>3739</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
    
    <cf_package>ArmPlatformPkg</cf_package>
    
    <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>CryptoPkg</cf_package>
    
    <cf_package>DynamicTablesPkg</cf_package>
    
    <cf_package>EmbeddedPkg</cf_package>
    
    <cf_package>EmulatorPkg</cf_package>
    
    <cf_package>FatPkg</cf_package>
    
    <cf_package>FmpDevicePkg</cf_package>
    
    <cf_package>IntelFsp2Pkg</cf_package>
    
    <cf_package>IntelFsp2WrapperPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
    
    <cf_package>PcAtChipsetPkg</cf_package>
    
    <cf_package>RedfishPkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
    
    <cf_package>SignedCapsulePkg</cf_package>
    
    <cf_package>SourceLevelDebugPkg</cf_package>
    
    <cf_package>StandaloneMmPkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
    
    <cf_package>UefiPayloadPkg</cf_package>
    
    <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17771</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-16 12:42:55 +0000</bug_when>
    <thetext>Add uncrustify configuration file to edk2 and apply uncrustify
changes to all package C and H files.

Uncrustify changes must not be applied to BaseTools directory or
to an submodules.

Documentation from development of uncrustify for TianoCore:

https://dev.azure.com/projectmu/Uncrustify/_wiki/wikis/Uncrustify.wiki/1/Project-Mu-(EDK-II)-Fork-Readme

Git repo with version of uncrustify with small updates to support some
edk2 specific C coding style rules

https://dev.azure.com/projectmu/_git/Uncrustify</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17772</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-16 12:49:16 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17843</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 09:49:22 +0000</bug_when>
    <thetext>This should be new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18151</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:09:27 +0000</bug_when>
    <thetext>This change was included in the uncrustify patch series
that was merged in the following PR:

    https://github.com/tianocore/edk2/pull/2242

This patch series is composed of 72 commits.  Push range: 
    https://github.com/tianocore/edk2/pull/2242/commits/8c2820c0502820d957b200f9d7ae3e15ecc6368e
    ...
    https://github.com/tianocore/edk2/pull/2242/commits/e0f4416242c7c6b7d06d8939f45da837df06a116

============================================================
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3737
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3767
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3760
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3739

* Update all use of EFI_D_* defines in DEBUG() macros to DEBUG_* defines.
* Update all use of &apos;, OPTIONAL&apos; to &apos; OPTIONAL,&apos; for function params.
* Change complex DEBUG_CODE() to DEBUG_CODE_BEGIN/END()
* Apply uncrustify changes to all package .c/.h files(BaseTools excluded)

devel@edk2.groups.io discussions:
* https://edk2.groups.io/g/devel/topic/uncrustify_conversion/87414953?p=,,,20,0,0,0::recentpostdate/sticky,,,20,2,0,87414953,previd=1638890440315310506,nextid=1638842194018157807&amp;previd=1638890440315310506&amp;nextid=1638842194018157807
* https://edk2.groups.io/g/devel/message/84132
* https://edk2.groups.io/g/devel/message/84112
* https://edk2.groups.io/g/devel/message/84074

Compare Build Results across all commits in this PR
* Detects any binary differences across entire patch series (obj, lib, dll, efi, ffs, fv, fd)
* repo: https://github.com/mdkinney/edk2
* ref1: 8c2820c0502820d957b200f9d7ae3e15ecc6368e
* ref2: e0f4416242c7c6b7d06d8939f45da837df06a116
* 30 VS2019 build comparisons. Pass 100%.  No binary differences detected.
* 40 GCC5 build comparisons. Pass 100%.    No binary differences detected.
* https://github.com/mdkinney/edk2/actions/runs/1550132292

Cc: Andrew Fish afish@apple.com
Cc: Leif Lindholm leif@nuviainc.com
Cc: Michael D Kinney michael.d.kinney@intel.com
Cc: Michael Kubacki michael.kubacki@microsoft.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20399</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:25:09 +0000</bug_when>
    <thetext>*** Bug 3207 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3613</bug_id>
          
          <creation_ts>2021-09-09 13:41:04 +0000</creation_ts>
          <short_desc>What is World777?</short_desc>
          <delta_ts>2021-09-13 21:15:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="world777">world777id</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          <cf_documents>EDK II C Coding Standards</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17230</commentid>
    <comment_count>0</comment_count>
    <who name="world777">world777id</who>
    <bug_when>2021-09-09 13:41:04 +0000</bug_when>
    <thetext>World777 is a complicated platform to bet and play. Exciting online slots of live events and games are available at your fingerprints. you&apos;ll back any live sports, events or other games. We&apos;ve curated a selection of Indian Casino games like Andar bahar,2020 Cricket, Bollywood Casino, Teen Patti and far more. The World777 Website and its application may be a very user-friendly thing you&apos;ll use. All the listed games are easy to browse and key ones are always highlighted within the links section or highlights area on the house page. you&apos;ll also make your demo account to explore and learn all the games and events before coming live. we&apos;ve a client base of 8000 + clients with zero complaints. Our customer support is out there 24 hours to supply support. for any details or queries. you&apos;ll reach us anytime on our WhatsApp customer care contact number. Deposits and withdrawals are very easy with this website all of your winnings are transferred instantly to your accounts.

For More Info Visit:- https://theworld777.com/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17257</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-13 21:15:03 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3506</bug_id>
          
          <creation_ts>2021-07-22 12:19:27 +0000</creation_ts>
          <short_desc>UefiCpuPkg ResetVector Tool Support for Python 3</short_desc>
          <delta_ts>2021-09-19 11:08:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashraf Ali S">ashraf.ali.s</reporter>
          <assigned_to name="Ashraf Ali S">ashraf.ali.s</assigned_to>
          <cc>ashraf.ali.s</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16684</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-22 12:19:27 +0000</bug_when>
    <thetext>Build Scrips for Reset Vector currently based on Python 2 which is already EOL,
needs to modify the build script based on Python 3,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16685</commentid>
    <comment_count>1</comment_count>
      <attachid>775</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-22 12:50:15 +0000</bug_when>
    <thetext>Created attachment 775
ResetVector Tool Support for Python 3

Verified the Binaries by generating using both Python2 and Python3.
output Binaries are same.

the binaries which are present in the EDK has been generated using the old nasm compiler. so updating the binaries also.

Binaries generated using latest stable nasm compiler 2.15.05.
compare the binaries with nasm compiler 2.11.08 also, results remains the same.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16690</commentid>
    <comment_count>2</comment_count>
      <attachid>778</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-23 09:47:03 +0000</bug_when>
    <thetext>Created attachment 778
only do minimal update to the python script to make it python3 capable.

Based on review comments.

1. only do minimal update to the python script to make it python3 capable. No additional printing.
2. add additional printing in 2nd patch
3. submit new .raw binary in a new patch serial because this binary update is not because of python3 but the out-of-dated binary.

To make it clear, 1 and 2 are two patches that belong to the same patch set.
3 is a separate patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16691</commentid>
    <comment_count>3</comment_count>
      <attachid>779</attachid>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-07-23 09:49:59 +0000</bug_when>
    <thetext>Created attachment 779
add additional printing in 2nd patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16762</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-03 21:57:19 +0000</bug_when>
    <thetext>please send the patch to edk2 mail list for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17309</commentid>
    <comment_count>5</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2021-09-19 11:08:54 +0000</bug_when>
    <thetext>Fixed 
https://github.com/tianocore/edk2/commit/6c7d6d4a5e0b69a52e65785f308be0e8ad5fcc96#diff-944e7ea5962cf98982b56128f6165a8f743799d3733c25b3f79cd85c7b115903
https://github.com/tianocore/edk2/commit/cf7c65059202e7858fbc00ce1f163ee243947e08#diff-944e7ea5962cf98982b56128f6165a8f743799d3733c25b3f79cd85c7b115903</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>775</attachid>
            <date>2021-07-22 12:50:15 +0000</date>
            <delta_ts>2021-07-23 09:47:03 +0000</delta_ts>
            <desc>ResetVector Tool Support for Python 3</desc>
            <filename>0001-UefiCpuPkg-ResetVector-Tool-Support-for-Python-3.patch</filename>
            <type>text/plain</type>
            <size>32571</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>778</attachid>
            <date>2021-07-23 09:47:03 +0000</date>
            <delta_ts>2021-07-23 09:51:12 +0000</delta_ts>
            <desc>only do minimal update to the python script to make it python3 capable.</desc>
            <filename>0001-UefiCpuPkg-ResetVector-Tool-Support-for-Python-3.patch</filename>
            <type>text/plain</type>
            <size>2765</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>779</attachid>
            <date>2021-07-23 09:49:59 +0000</date>
            <delta_ts>2021-07-23 09:51:26 +0000</delta_ts>
            <desc>add additional printing in 2nd patch</desc>
            <filename>0002-UefiCpuPkg-ResetVector-Tool-additional-debug-prints.patch</filename>
            <type>text/plain</type>
            <size>1611</size>
            <attacher name="Ashraf Ali S">ashraf.ali.s</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3888</bug_id>
          
          <creation_ts>2022-03-30 04:05:06 +0000</creation_ts>
          <short_desc>Support SPI reading under TPM</short_desc>
          <delta_ts>2022-06-10 05:28:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Wenyi, Xie">xiewenyi0201</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18732</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2022-03-30 04:05:06 +0000</bug_when>
    <thetext>TIS registerd now is only read via MMIO, as SPI is used in some platform for TPM, is there any plan to support reading TIS registerd via SPI?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18853</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-19 21:49:15 +0000</bug_when>
    <thetext>Wenyi: will you contribute the patch to support SPI access in TPM?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18950</commentid>
    <comment_count>2</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2022-05-12 05:14:29 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #2)
&gt; Wenyi: will you contribute the patch to support SPI access in TPM?

Sorry, our code is only work for Hisi SPI access not for common SPI access, so we have no patch to contribute.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18989</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 21:49:23 +0000</bug_when>
    <thetext>Wenyi: seemly, this doesn&apos;t belong to common module. It will not be fixed in edk2. Suggest to close this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19063</commentid>
    <comment_count>4</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2022-06-10 05:28:08 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #3)
&gt; Wenyi: seemly, this doesn&apos;t belong to common module. It will not be fixed in
&gt; edk2. Suggest to close this issue.

OK, I will close this issue, thank you for your reply.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3753</bug_id>
          
          <creation_ts>2021-11-29 06:16:48 +0000</creation_ts>
          <short_desc>BuildAndIntegrationInstructions should contain solution for a common coreboot integration issue</short_desc>
          <delta_ts>2021-12-16 01:57:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Aaron Li">aaron.li</reporter>
          <assigned_to name="Aaron Li">aaron.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17859</commentid>
    <comment_count>0</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2021-11-29 06:16:48 +0000</bug_when>
    <thetext>When integrate the latest UefiPayload with coreboot 4.14 or older, a common error would occur:

&quot;E: Not a usable UEFI firmware volume.&quot;

People who are currently using old version of coreboot should be noticed by BuildAndIntegrationInstructions with how to solve this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17860</commentid>
    <comment_count>1</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2021-11-29 06:17:18 +0000</bug_when>
    <thetext>take owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17964</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-12-07 21:58:55 +0000</bug_when>
    <thetext>Aaron works on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18011</commentid>
    <comment_count>3</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2021-12-16 01:57:38 +0000</bug_when>
    <thetext>fixed @ 85a678bf76c5aac2e40255f48ea3209ff95f150a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3153</bug_id>
          
          <creation_ts>2021-01-05 04:08:35 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: Support FSP private temporary memory.</short_desc>
          <delta_ts>2021-01-06 21:52:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14707</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-01-05 04:08:35 +0000</bug_when>
    <thetext>When FSP sharing same bootloader stack, the bootloader provided temporary memory for FSP will be totally given to PeiCore as Heap, but in some cases FSP may have to reserve some more temporary memory for private usage.

This commit adds this flexibility for FSP to reserve some temporary memory before giving them to PeiCore.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14708</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-01-05 04:09:00 +0000</bug_when>
    <thetext>working on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14750</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-01-06 21:52:32 +0000</bug_when>
    <thetext>commit 379e5098a4836b21b893b4801baa34b570c24599
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue Jan 5 16:55:25 2021 +0800

    IntelFsp2Pkg: Support FSP private temporary memory.

    REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3153

    In FSP the temporary memory provided by bootloader typically will be
    totally given to PeiCore as Heap, but in some cases FSP may have to
    reserve some more temporary memory for private usage.

    This commit adds this flexibility for FSP to reserve some
    temporary memory before giving them to PeiCore.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3029</bug_id>
          
          <creation_ts>2020-10-29 15:34:24 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: NULL dereference in DevicePathToText test</short_desc>
          <delta_ts>2020-11-24 12:10:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>grant.likely</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14150</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-10-29 15:34:24 +0000</bug_when>
    <thetext>Function DevicePathToTextConvertDeviceNodeToTextCoverageTest() tests if
DeviceNodeToText() correctly converts a Relative Offset Range node. When
calling SctConvertTextToDeviceNode() it tries to set the field Reserved
of the returned device node to 0.

If the tested firmware does not return the expected text DeviceNodeToText()
may return NULL or a device node that is shorter than expected. In both
cases it is not possible to access the filed Reserved.

So we must check both that the returned node is not NULL and that it has
the exepected size.

Due to the missing check a NULL dereference was observed when running the
SCT on U-Boot resulting in signal SIGSEGV, Segmentation fault.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14151</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-10-29 16:03:20 +0000</bug_when>
    <thetext>Patch submitted:
[PATCH 1/1] uefi-sct/SctPkg: NULL deref in DevicePathToText test
https://edk2.groups.io/g/devel/topic/patch_1_1_uefi_sct_sctpkg/77896437?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,77896437</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14375</commentid>
    <comment_count>2</comment_count>
      <attachid>599</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-19 08:05:17 +0000</bug_when>
    <thetext>Created attachment 599
[PATCH 1/1] uefi-sct/SctPkg: NULL deref in DevicePathToText test</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14399</commentid>
    <comment_count>3</comment_count>
    <who name="Grant Likely">grant.likely</who>
    <bug_when>2020-11-23 05:21:09 +0000</bug_when>
    <thetext>Patch looks good to me.

Reviewed-by: Grant Likely &lt;grant.likely@arm.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14415</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-24 12:10:20 +0000</bug_when>
    <thetext>On 11/24/20 5:07 PM, G Edhaya Chandran wrote:
&gt; Upstreamed by commit-id 
&gt; : https://github.com/tianocore/edk2-test/commit/75c92b85bf9bb82a7049bf44f40a2741f963230c 
&gt;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>599</attachid>
            <date>2020-11-19 08:05:17 +0000</date>
            <delta_ts>2020-11-19 08:05:17 +0000</delta_ts>
            <desc>[PATCH 1/1] uefi-sct/SctPkg: NULL deref in DevicePathToText test</desc>
            <filename>0001-uefi-sct-SctPkg-NULL-deref-in-DevicePathToText-test.patch</filename>
            <type>text/plain</type>
            <size>2413</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3529</bug_id>
          
          <creation_ts>2021-08-05 02:55:18 +0000</creation_ts>
          <short_desc>Online Guidance</short_desc>
          <delta_ts>2021-08-09 22:48:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="anikaparker03">anikaparker03</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16787</commentid>
    <comment_count>0</comment_count>
    <who name="anikaparker03">anikaparker03</who>
    <bug_when>2021-08-05 02:55:18 +0000</bug_when>
    <thetext>Customer support is a service provider 100 percent recognized within the US which helps to fix your PC remotely, professionally and basically 
http://sites.google.com/view/paypallogindesk
http://sbcgloballoginn.com
https://sbcgloballoginn.com/sbcglobal-email-login/
https://linksysrouterlogins.com/extender-linksys-com/
https://linksysrouterlogins.com/
https://linksysrouterlogins.com/linksys-connect/	
http://sites.google.com/view/aolmailloginnow
http://sites.google.com/view/cash-app-login-us	
http://sites.google.com/view/amazoncomcode-usa
http://sites.google.com/view/bitdefendercentral-login	
http://sites.google.com/view/bitdefenderlogin-usa
http://sites.google.com/view/my-amazonprimelogin	
http://sites.google.com/view/avastdownloadsteps
http://sites.google.com/view/mywifiextnet-usa	
http://sites.google.com/view/myavastcom-help
http://sites.google.com/view/getoffice365login	
http://sites.google.com/view/tomtomhome-usa
http://sites.google.com/view/belkinrange	
http://sites.google.com/view/nortonloginguide
http://sites.google.com/view/wwwamazoncommytv-usa	
http://sites.google.com/view/ijstartcannon-help
http://sites.google.com/view/www-webrootcomsafeguide
http://contactassistance.com/quickbooks-support/
http://contactassistance.com/turbotax-support/
http://contactassistance.com/quicken-support/
http://mywifi-extt.com
http://mywifi-extt.com/netgear-login/
http://mywifi-extt.com/www-mywifiext-net/
http://mywifi-extt.com/netgear-router-setup/
http://mywifi-extt.com/netgear-router-login/
http://ibitdefenderlogin.com/
http://ibitdefenderlogin.com/bitdefender-central/
http://aolmailx.com
http://aolmailx.com/aol-mail-login/
http://aolmailx.com/aol-signin/
http://aolmailx.com/aol-gold-download/
http://aolmailx.com/aol-download/
http://aolmailx.com/aol-webmail/
http://sites.google.com/view/garminexpress-desk</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16851</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-09 22:48:19 +0000</bug_when>
    <thetext>this is not an issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3911</bug_id>
          
          <creation_ts>2022-04-21 16:59:03 +0000</creation_ts>
          <short_desc>Extend SecureBootVariableLib interfaces</short_desc>
          <delta_ts>2022-07-07 01:43:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18887</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-04-21 16:59:03 +0000</bug_when>
    <thetext>Current SecureBootVariableLib provide great support for deleting secure boot related variables, creating time-based payloads.

However, for secure boot enrollment, the interfaces from SecureBootVariableProvisionLib always assumes the changes from variable storage, limiting the usage and requiring existing platforms to change extensive key initialization process to adapt to the new methods.

The suggestion is to add an `EnrollVariableFromInput` function for the general purpose authenticated variable creation and SecureBootProvisionLib could leverage it by supplying the data from default key values.

In the meantime, to provide two functions that would enroll or delete all secure boot related variables will be helpful for platforms to absorb this public interface.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18888</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-04-21 16:59:51 +0000</bug_when>
    <thetext>Newly added interfaces could be found here for reference:
https://github.com/kuqin12/mu_tiano_plus/commit/6c74dc189c5c5e439c516c52601dd7b9a05e18b0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19000</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-05-31 22:06:27 +0000</bug_when>
    <thetext>Kun: will you provide the patch in edk2 project?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19010</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-06-01 14:15:21 +0000</bug_when>
    <thetext>Hi Liming, I sent one round of patches here: https://edk2.groups.io/g/devel/message/89507. But it was before the freeze period, so it might get lost. I can rebase the branch and send a v2 round if so desired. Please let me know. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19042</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-06-07 21:42:42 +0000</bug_when>
    <thetext>Kun, please go ahead, and invole SecurityPkg maintainer to review it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19070</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-06-13 17:13:38 +0000</bug_when>
    <thetext>Thanks, Liming. New patch series is sent here: https://edk2.groups.io/g/devel/message/90491. Please feel free to leave comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19209</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-07-07 01:43:49 +0000</bug_when>
    <thetext>Merged as 6eb407947592e084110a124be089bef167af1383, &lt;https://github.com/tianocore/edk2/pull/3050&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3292</bug_id>
          
          <creation_ts>2021-03-31 14:10:30 +0000</creation_ts>
          <short_desc>MdePkg: IEEE Extended Unique Identifiers (EUI64) are big endian</short_desc>
          <delta_ts>2021-06-06 14:01:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3338</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
    
    <cc>yuwei.chen</cc>
    
    <cc>zhiguang.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15487</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-31 14:10:30 +0000</bug_when>
    <thetext>The UEFI specification for the NVme() node refers to NVM Express Specification.

In the &quot;NVM Express Base Specification&quot;, NVM Express Revision 1.4b ,September 21, 2020, chapter 7.10.4IEEE Extended Unique Identifier (EUI64) we find:

&quot;EUI64 is defined in big endian format.&quot;

Hence the following functions need to be fixed:

* DevPathToTextNVMe()
* DevPathFromTextNVMe() - both in BaseTools and MdePkg
* TranslatePciOfwNodes()

Bug report #3291 will be used for fixing the problem in the SCT.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15685</commentid>
    <comment_count>1</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-14 18:34:22 +0000</bug_when>
    <thetext>I submitted https://bugzilla.tianocore.org/show_bug.cgi?id=3338 as a code-first UEFI Spec ECR to clarify the intention of the spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16279</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-06 14:01:31 +0000</bug_when>
    <thetext>Closing as the issue is handled in https://bugzilla.tianocore.org/show_bug.cgi?id=3338 now.

*** This bug has been marked as a duplicate of bug 3338 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3784</bug_id>
          
          <creation_ts>2021-12-20 02:15:00 +0000</creation_ts>
          <short_desc>edk2-libc : Upstreaming UEFI changes to Python project</short_desc>
          <delta_ts>2024-02-07 04:06:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Jayaprakash Nevara">n.jayaprakash</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18032</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-12-20 02:15:00 +0000</bug_when>
    <thetext>This BZ ticket has been created to upstream the UEFI specific changes to the Python project.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18083</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-04 21:49:21 +0000</bug_when>
    <thetext>JP will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22541</commentid>
    <comment_count>2</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2024-02-07 04:06:25 +0000</bug_when>
    <thetext>Checked with the Python community about the possibility. 
Suggested to have update information about UEFI port in Python.org website under other sections. 

https://www.python.org/download/other/

Worked with the Python core team and got the information about Python UEFI port updated into the above webpage. 

Hence closing this HSDES ticket as they are not going to accept the UEFI port to the main branch of the python code base.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3175</bug_id>
          
          <creation_ts>2021-01-18 03:03:26 +0000</creation_ts>
          <short_desc>Add platform code for Intel Tiger Lake</short_desc>
          <delta_ts>2021-02-10 21:34:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>rangasai.v.chaganty</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14830</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-01-18 03:03:26 +0000</bug_when>
    <thetext>Platform code should be made available in edk2-platforms that can be used to support open source platforms based on Intel Tiger Lake U products.

This code should follow the EDK II Minimum Platform specification (https://edk2-docs.gitbooks.io/edk-ii-minimum-platform-specification). Consequentially, the code must use the MinPlatformPkg (https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/MinPlatformPkg).

Similar to the code currently in KabylakeOpenBoardPkg (https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/KabylakeOpenBoardPkg), the support necessary to boot a Tiger Lake U Reference Validation Platform (RVP) to boot stage IV as defined in the EDK II Minimum Platform specification should be provided. This will allow other board&apos;s sample code to quickly enable Tiger Lake board support.

The package for Tiger Lake should be called TigerlakeOpenBoardPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14832</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-01-18 03:06:48 +0000</bug_when>
    <thetext>I am working on this</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15052</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-02-10 21:34:29 +0000</bug_when>
    <thetext>8 patches have been merged
6f2b23c36d Update Maintainers.txt for TigerlakeOpenBoardPkg
1d080b3761 Enable build for TigerlakeOpenBoardPkg
0f5d0b68dc TigerlakeOpenBoardPkg/TigerlakeURvp: Add DSC and build files
e64f9f5216 TigerlakeOpenBoardPkg: Add modules
37e9dcf57f TigerlakeOpenBoardPkg/TigerlakeURvp: Add library instances
acc16e00ad TigerlakeOpenBoardPkg: Add library instances
14591c1002 TigerlakeOpenBoardPkg/TigerlakeURvp: Add fdf and header file
51bfa26264 TigerlakeOpenBoardPkg: Add package and headers</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3666</bug_id>
          
          <creation_ts>2021-09-29 01:00:04 +0000</creation_ts>
          <short_desc>MdeModulePkg/Core/Dxe: Add lock protection in CoreLocateHandleBuffer()</short_desc>
          <delta_ts>2021-10-08 04:07:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="huama">hua.ma</reporter>
          <assigned_to name="huama">hua.ma</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17411</commentid>
    <comment_count>0</comment_count>
    <who name="huama">hua.ma</who>
    <bug_when>2021-09-29 01:00:04 +0000</bug_when>
    <thetext>currently, CoreLocateHandleBuffer() follows three steps:
1) get the size of protocol database firstly
2) allocate the buffer based on the size
3) get the protocol database into the buffer
There is no lock protection for the whole three steps. If a new protocol
added in step 2) by other task, e.g. (timer event handle USB device
hotplug). The size of protocol database may be increased and cannot fit
into the previous buffer. The protocol database cannot be returned
successfully, EFI_BUFFER_TOO_SMALL error will be returned.

This patch adds the lock to protect the whole three steps.
It can make sure the correct protocol database be returned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17412</commentid>
    <comment_count>1</comment_count>
    <who name="huama">hua.ma</who>
    <bug_when>2021-09-29 01:52:04 +0000</bug_when>
    <thetext>the patch is sent to review. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17471</commentid>
    <comment_count>2</comment_count>
    <who name="huama">hua.ma</who>
    <bug_when>2021-10-08 04:07:00 +0000</bug_when>
    <thetext>the patch is reviewed and merged, https://github.com/tianocore/edk2/commit/5ece2ad36caa7ddc62d4954559b2cdd0d8a40a14
resolved, thank you.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3059</bug_id>
          
          <creation_ts>2020-11-07 02:33:37 +0000</creation_ts>
          <short_desc>Support extra pci root bridges (pxb) for ARM</short_desc>
          <delta_ts>2021-04-14 04:22:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jiahui Cen">cenjiahui</reporter>
          <assigned_to name="Jiahui Cen">cenjiahui</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Other</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14267</commentid>
    <comment_count>0</comment_count>
    <who name="Jiahui Cen">cenjiahui</who>
    <bug_when>2020-11-07 02:33:37 +0000</bug_when>
    <thetext>Currently, QEMU only supports pci expander bridge(PXB) for i386(pc/q35). Some work is in progress to support PXB for ARM [1].

Only if the bios(uefi for arm) supports multiple roots, configure space of devices behind PXBs counld be obtained. So it is necessary for ArmVirtPkg to support scanning extra root buses and recognize multiple roots.

[1] https://lore.kernel.org/qemu-devel/20201103120157.2286-1-cenjiahui@huawei.com/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14296</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-10 07:19:43 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v2 0/4] Add extra pci roots support for Arm
msgid: &lt;20201109130511.5946-1-cenjiahui@huawei.com&gt;
https://edk2.groups.io/g/devel/message/67180
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00369.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14297</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-10 07:21:25 +0000</bug_when>
    <thetext>v1 was:

[edk2-devel] [PATCH] ArmVirtPkg/FdtPciHostBridgeLib: add extra roots for Arm.

at:

http://mid.mail-archive.com/20200402120803.1482-1-miaoyubo@huawei.com
https://edk2.groups.io/g/devel/message/56901
https://www.redhat.com/archives/edk2-devel-archive/2020-April/msg00205.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14741</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-06 03:21:16 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v3 0/5] Add extra pci roots support for Arm
msgid: &lt;20201222095944.8686-1-cenjiahui@huawei.com&gt;
https://edk2.groups.io/g/devel/message/69382
https://www.redhat.com/archives/edk2-devel-archive/2020-December/msg01281.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14807</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-14 06:07:00 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v4 0/9] Add extra pci roots support for Arm
msgid: &lt;20210112094549.10238-1-cenjiahui@huawei.com&gt;
https://edk2.groups.io/g/devel/message/70147
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00634.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14863</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-20 10:50:58 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v6 00/11] Add extra pci roots support for Arm
msgid: &lt;20210119011302.10908-1-cenjiahui@huawei.com&gt;
https://edk2.groups.io/g/devel/message/70515
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01007.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14864</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-20 11:20:26 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #5)
&gt; [edk2-devel] [PATCH v6 00/11] Add extra pci roots support for Arm
&gt; msgid: &lt;20210119011302.10908-1-cenjiahui@huawei.com&gt;
&gt; https://edk2.groups.io/g/devel/message/70515
&gt; https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01007.html

Merged via &lt;https://github.com/tianocore/edk2/pull/1372&gt; as commit range ca272b9513a6..e843a21e23ea, with the fixups enumerated in the v6 thread on the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15441</commentid>
    <comment_count>7</comment_count>
      <attachid>679</attachid>
    <who name="alex">cheatergames35</who>
    <bug_when>2021-03-28 19:27:22 +0000</bug_when>
    <thetext>Created attachment 679
yuyyu

jklljk</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15442</commentid>
    <comment_count>8</comment_count>
      <attachid>680</attachid>
    <who name="alex">cheatergames35</who>
    <bug_when>2021-03-28 19:29:03 +0000</bug_when>
    <thetext>Created attachment 680
tewsfsdwrwr</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15443</commentid>
    <comment_count>9</comment_count>
      <attachid>681</attachid>
    <who name="alex">cheatergames35</who>
    <bug_when>2021-03-28 19:32:56 +0000</bug_when>
    <thetext>Created attachment 681
234243</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15444</commentid>
    <comment_count>10</comment_count>
    <who name="alex">cheatergames35</who>
    <bug_when>2021-03-28 19:46:47 +0000</bug_when>
    <thetext>dsffsdsd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15587</commentid>
    <comment_count>11</comment_count>
      <attachid>691</attachid>
    <who name="alex">figiv65444</who>
    <bug_when>2021-04-11 21:40:49 +0000</bug_when>
    <thetext>Created attachment 691
test</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15588</commentid>
    <comment_count>12</comment_count>
      <attachid>692</attachid>
    <who name="alex">figiv65444</who>
    <bug_when>2021-04-11 21:48:58 +0000</bug_when>
    <thetext>Created attachment 692
evi</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>679</attachid>
            <date>2021-03-28 19:27:22 +0000</date>
            <delta_ts>2021-04-06 10:53:15 +0000</delta_ts>
            <desc>yuyyu</desc>
            <filename>bootx64.efi</filename>
            <type>text/plain</type>
            <size>939648</size>
            <attacher name="alex">cheatergames35</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>680</attachid>
            <date>2021-03-28 19:29:03 +0000</date>
            <delta_ts>2021-04-06 10:53:12 +0000</delta_ts>
            <desc>tewsfsdwrwr</desc>
            <filename>bootx64.efi</filename>
            <type>application/octet-stream</type>
            <size>939648</size>
            <attacher name="alex">cheatergames35</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>681</attachid>
            <date>2021-03-28 19:32:56 +0000</date>
            <delta_ts>2021-04-06 10:53:11 +0000</delta_ts>
            <desc>234243</desc>
            <filename>bootx64.efi</filename>
            <type>application/octet-stream</type>
            <size>939648</size>
            <attacher name="alex">cheatergames35</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>691</attachid>
            <date>2021-04-11 21:40:49 +0000</date>
            <delta_ts>2021-04-14 04:21:02 +0000</delta_ts>
            <desc>test</desc>
            <filename>bootx64.efi</filename>
            <type>text/plain</type>
            <size>939648</size>
            <attacher name="alex">figiv65444</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>692</attachid>
            <date>2021-04-11 21:48:58 +0000</date>
            <delta_ts>2021-04-14 04:21:10 +0000</delta_ts>
            <desc>evi</desc>
            <filename>bootx64.efi</filename>
            <type>text/plain</type>
            <size>939648</size>
            <attacher name="alex">figiv65444</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3547</bug_id>
          
          <creation_ts>2021-08-10 05:03:48 +0000</creation_ts>
          <short_desc>Cash app customer service number-Find quick solution services:</short_desc>
          <delta_ts>2021-09-13 08:22:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="james smith">js8435877</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>js6523335</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16857</commentid>
    <comment_count>0</comment_count>
    <who name="james smith">js8435877</who>
    <bug_when>2021-08-10 05:03:48 +0000</bug_when>
    <thetext>Feel free in finding the tech solution quickly with the help of a Cash app customer service number. This is the authentic factor to get to the cash app service team. Technical obstruction with the cash app account leads to many unpredicted troubles with users and they could not handle the requirements of the transaction at a time. This is why; they must be familiar with the aspects that may enable them for something appropriate. https://www.squarecashhelps.com/blog/what-is-cash-app-customer-service-number/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16931</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:50:15 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17251</commentid>
    <comment_count>2</comment_count>
      <attachid>828</attachid>
    <who name="john smith">js6523335</who>
    <bug_when>2021-09-13 08:22:42 +0000</bug_when>
    <thetext>Created attachment 828
If you are not able to have a flawless experience on your Cash App account and are looking forward to getting a flying start, you have to first set up an account on Cash App. Besides, you can also ava

If you are not able to have a flawless experience on your Cash App account and are looking forward to getting a flying start, you have to first set up an account on Cash App. Besides, you can also avail of Cash App Customer Service via which you will be able to fetch the complete guidelines from the professionals</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>828</attachid>
            <date>2021-09-13 08:22:42 +0000</date>
            <delta_ts>2021-09-13 08:22:42 +0000</delta_ts>
            <desc>If you are not able to have a flawless experience on your Cash App account and are looking forward to getting a flying start, you have to first set up an account on Cash App. Besides, you can also ava</desc>
            <filename>5e0bd75e855cc27b562af232 (1) (1).jpg</filename>
            <type>image/jpeg</type>
            <size>18388</size>
            <attacher name="john smith">js6523335</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3445</bug_id>
          
          <creation_ts>2021-06-09 17:05:10 +0000</creation_ts>
          <short_desc>Update node to at least 12 to support cspell</short_desc>
          <delta_ts>2021-06-24 03:33:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16323</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-09 17:05:10 +0000</bug_when>
    <thetext>According to requirements set by cspell, the minimal node version to support cspell v5+ should be 12 or above (ref: https://github.com/streetsidesoftware/cspell/tree/main/packages/cspell#requirements).

This mismatched dependency caused &quot;Failed to process &quot;**&quot; TypeError: text.matchAll(...) is not a function or its return value is not iterable&quot; errors on multiple files during spell check, and they have been ignored silently.

An example PR has been created here: https://github.com/tianocore/edk2/pull/1700. It picked up v14 for node and some spell check start to fail (ShellPkg, StandaloneMmPkg, ArmModulePkg and ArmPkg, specifically).

This ticket is created to track the progress to update node version, as well as fixing those misspellings.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16347</commentid>
    <comment_count>1</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-06-11 17:25:37 +0000</bug_when>
    <thetext>I propose:
* spelling errors in StandaloneMM get fixed.  Its just one and is easy.
* spelling errors in ArmPkg look like valid acryonms.  Add them to the package config
* spelling errors in ArmPlatformPkg look like a mix of errors.  Set package to audit mode and request the maintainers resolve the errors.  

Changes here:
https://github.com/tianocore/edk2/pull/1703</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16352</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-11 23:58:14 +0000</bug_when>
    <thetext>Patch series sent for review: https://edk2.groups.io/g/devel/message/76419</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16368</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-15 12:57:34 +0000</bug_when>
    <thetext>v2 patches sent for review: https://edk2.groups.io/g/devel/message/76520</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16373</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-15 21:34:49 +0000</bug_when>
    <thetext>The patch has been sent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16387</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-16 17:10:35 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #4)
&gt; The patch has been sent.

Partially merged 9cf9de668f2049cae797ce136fd98617a0d80449-04ddd1271e9518008bcd899bdaf29c1701f0f7a0. PR &lt;https://github.com/tianocore/edk2/pull/1726&gt;

Patch https://edk2.groups.io/g/devel/message/76483 is still not reviewed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16428</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-06-23 02:54:44 +0000</bug_when>
    <thetext>the (In reply to kun.qin from comment #5)
&gt; (In reply to gaoliming from comment #4)
&gt; &gt; The patch has been sent.
&gt; 
&gt; Partially merged
&gt; 9cf9de668f2049cae797ce136fd98617a0d80449-
&gt; 04ddd1271e9518008bcd899bdaf29c1701f0f7a0. PR
&gt; &lt;https://github.com/tianocore/edk2/pull/1726&gt;
&gt; 
&gt; Patch https://edk2.groups.io/g/devel/message/76483 is still not reviewed.

Patch acked &amp; reviewed: https://edk2.groups.io/g/devel/message/76637, https://edk2.groups.io/g/devel/message/76687. Still needs to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16452</commentid>
    <comment_count>7</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-23 21:41:02 +0000</bug_when>
    <thetext>Create PR https://github.com/tianocore/edk2/pull/1756</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16455</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-24 03:33:16 +0000</bug_when>
    <thetext>Merged as commit 18b2272e4d6c (&quot;Azurepipeline: SpellCheck: Enforce Node dependency to use version 14.x&quot;, 2021-06-24).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3941</bug_id>
          
          <creation_ts>2022-06-04 05:54:56 +0000</creation_ts>
          <short_desc>Support package-scope register programming during Smm CPU init (SmmCpuFeaturesInitializeProcessor)</short_desc>
          <delta_ts>2022-06-06 21:58:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="jiaxinwu">jiaxin.wu</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19033</commentid>
    <comment_count>0</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2022-06-04 05:54:56 +0000</bug_when>
    <thetext>Currently SmmCpuFeaturesInitializeProcessor() does not support package-scope
register programming during Smm CPU init. Add new interface with additional
parameter (PackageLevelProgram? TBD) to support that.
The package-scope register will only be programmed once for each package scope,
which is specified by parameter during the initialization.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19035</commentid>
    <comment_count>1</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2022-06-06 21:58:02 +0000</bug_when>
    <thetext>don&apos;t need this anymore</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3324</bug_id>
          
          <creation_ts>2021-04-12 10:29:11 +0000</creation_ts>
          <short_desc>MpInitLib: SEV-ES stacks share page with code and other data</short_desc>
          <delta_ts>2021-05-29 07:38:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Marvin Häuser">mhaeuser</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>john.mathews</cc>
    
    <cc>krichanov</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>louis.rodriguez</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>ray.ni</cc>
    
    <cc>rschiron</cc>
    
    <cc>thomas.lendacky</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15603</commentid>
    <comment_count>0</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2021-04-12 10:29:11 +0000</bug_when>
    <thetext>The SEV-ES stacks may share page with code and other data. This does not only risk the other data to be overwritten by stack overflows, it also prevents stack guarding and NX stack.

[1] https://github.com/tianocore/edk2/blob/2072c22a0d63c780b0cc6377f6d4ffb116ad6144/UefiCpuPkg/Library/MpInitLib/MpLib.c#L1171-L1179

[2] https://github.com/tianocore/edk2/blob/2072c22a0d63c780b0cc6377f6d4ffb116ad6144/UefiCpuPkg/Library/MpInitLib/MpLib.c#L1212</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15921</commentid>
    <comment_count>1</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-05-05 14:29:37 +0000</bug_when>
    <thetext>Thomas Lendacky, 
I added you to CC list, to bring this BZ to your attention. Please review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15933</commentid>
    <comment_count>2</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-05-06 11:37:35 +0000</bug_when>
    <thetext>Would a separate allocation, that is page aligned/page sized, resolve the concern? In other words, for example during PEI:

- Have the reset vector code and data be at 9F000 for 0x1000

- Have the SEV-ES AP reset stacks be at 9E000 for 0x1000 (variable based on vCPU count) below the reset vector code and data</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15935</commentid>
    <comment_count>3</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2021-05-06 12:42:52 +0000</bug_when>
    <thetext>Thank you for your reply, Thomas. That will definitely improve the situation, but I am wondering whether it would not make sense to go a step further and separate the individual AP stacks, so that guarding pages can be placed on each&apos;s top and bottom. To not waste too much space, I guess they can remain contiguous (as in the top guard page of one stack doubles as the bottom guard page of another), but that&apos;d need explicit support then (as guard pages are otherwise automatically inserted by DxeCore according to the PCD policy per page allocation).

I don&apos;t think I can comment on the reset vector situation as I lack information on data content and page protection on entry. I trust your judgement. :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15936</commentid>
    <comment_count>4</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-05-06 13:11:03 +0000</bug_when>
    <thetext>(In reply to Marvin Häuser from comment #3)
&gt; Thank you for your reply, Thomas. That will definitely improve the
&gt; situation, but I am wondering whether it would not make sense to go a step
&gt; further and separate the individual AP stacks, so that guarding pages can be
&gt; placed on each&apos;s top and bottom. To not waste too much space, I guess they
&gt; can remain contiguous (as in the top guard page of one stack doubles as the
&gt; bottom guard page of another), but that&apos;d need explicit support then (as
&gt; guard pages are otherwise automatically inserted by DxeCore according to the
&gt; PCD policy per page allocation).

IIUC, that would be two pages per AP + one initial top page? If that is the case, I don&apos;t think we can do that because we have a limited number of pages available below 1MB. For example, when I boot a VM today, the current range below 1MB in PEI is 0 - 0xA0000, which is only 160 pages. It would impose a much stricter limit on the number of vCPUs that can be specified.

&gt; 
&gt; I don&apos;t think I can comment on the reset vector situation as I lack
&gt; information on data content and page protection on entry. I trust your
&gt; judgement. :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15938</commentid>
    <comment_count>5</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2021-05-06 13:47:16 +0000</bug_when>
    <thetext>Oh, the stacks must be below 1 MB too? That&apos;s unfortunate. :( Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16000</commentid>
    <comment_count>6</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-05-11 16:53:11 +0000</bug_when>
    <thetext>v1:
  https://edk2.groups.io/g/devel/message/75033
  https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00349.html
  msgid: &lt;1162d1f4fe09048aaafba6f6ea3046bebd34fc2b.1620766224.git.thomas.lendacky@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16047</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-13 06:24:42 +0000</bug_when>
    <thetext>Hi Tom,

(In reply to thomas.lendacky from comment #6)
&gt; v1:
&gt;   https://edk2.groups.io/g/devel/message/75033
&gt;  
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00349.html
&gt;   msgid:
&gt; &lt;1162d1f4fe09048aaafba6f6ea3046bebd34fc2b.1620766224.git.thomas.lendacky@amd.
&gt; com&gt;

this BZ has been filed as a Security Issue.

Personally, I disagree that this is a security issue (it doesn&apos;t seem exploitable). I would rather call it an &quot;armoring feature request&quot;.

*However*, even though that&apos;s my personal opinion, as long as the BZ *is* filed as a (non-public) security issue, we should consider it embargoed, and we should neither discuss it publicly, nor post patches for it to the list. I&apos;d support opening this ticket up to the public, but until / unless that happens, we shouldn&apos;t just post patches to the list, before an embargo date is set, and the set date elapses.

https://github.com/tianocore/tianocore.github.io/wiki/Reporting-Security-Issues

While bugzilla is *by far* not the perfect tool for patch reviews, for the time being we attach security patches to BZ tickets, for review. So all the discussions around the symptoms, impact, CVSS score, embargo date, fixes, reviews etc happen in the ticket, for a security issue. Once the embargo ends, the ticket is opened up and the latest patches from the BZ are reposted to the edk2-devel mailing list, a bit of time is given to the community for a final round of review, and then the patches are merged upstream.

Regarding the current patch review -- personally I&apos;d like to defer that to Marvin (primarily) and the UefiCpuPkg maintainers (secondarily).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16048</commentid>
    <comment_count>8</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2021-05-13 06:31:09 +0000</bug_when>
    <thetext>Hey Laszlo,

Sorry, I&apos;m actually not sure why I filed this as security issue. I filed I think 17 tickets that day, so maybe I simply got it mixed up. :) Of course you can decide on whether to open it, but if it is fine for me to do it as the reporter, I absolutely will.

Hey Thomas,

Thank you a lot for the patch. Sorry, but it will take me a bit to get to it. First glance is good and definitely addresses the issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16049</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-13 06:31:58 +0000</bug_when>
    <thetext>I should also mention that the infosec group has a monthly phone (maybe video?) meeting where they go through the security BZ backlog, and that&apos;s when eligible BZs get opened up, based on the live discussion and the prior comments in the tickets. I usually don&apos;t dial in to the meeting, but seek to keep a close eye on tickets, and to state quickly (usually, although not always, with the help of Red Hat ProdSec) whether a ticket should be embargoed, and if so, for how long, in our opinion.

This one, I don&apos;t see as directly exploitable. It may be a gap in a generic protection mechanism, yes. So personally I don&apos;t mind that the patch was posted, but it did not conform to the process, as far as I can tell.

Best I can offer is some regression testing (in non-SEV guests), once we figure out where the patch should be discussed, going forward.

(Unfortunately I don&apos;t have a SEV-ES environment set up yet, for regression-testing in a SEV-ES guest.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16050</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-13 06:35:59 +0000</bug_when>
    <thetext>(In reply to Marvin Häuser from comment #8)
&gt; Hey Laszlo,
&gt; 
&gt; Sorry, I&apos;m actually not sure why I filed this as security issue. I filed I
&gt; think 17 tickets that day, so maybe I simply got it mixed up. :) Of course
&gt; you can decide on whether to open it, but if it is fine for me to do it as
&gt; the reporter, I absolutely will.

I think it never hurts to file a BZ as a Security Issue at first if the reporter has any concerns about the potential exploitability of the problem -- people can always discuss on the BZ and then decide to open it up. Looks like you had no such concerns however, when filing this ticket.

Tom, can you please comment? Do you agree as well that we shouldn&apos;t treat this as a security issue? If that&apos;s the case, then I&apos;d propose that Marvin do open up the ticket. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16054</commentid>
    <comment_count>11</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-05-13 09:16:55 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #10)
&gt; 
&gt; Tom, can you please comment? Do you agree as well that we shouldn&apos;t treat
&gt; this as a security issue? If that&apos;s the case, then I&apos;d propose that Marvin
&gt; do open up the ticket. Thanks!

Yes, I agree, I don&apos;t see this as a security issue.

And my bad on posting patches. Since there wasn&apos;t a paper or method of exploitation mentioned I didn&apos;t think there was any kind of embargo period.

For my education, would all patch review for a security issue be done within the bugzilla or is there a special mailing list or ... ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16055</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-13 10:25:58 +0000</bug_when>
    <thetext>Hi Tom,

Personally, I would strongly prefer to use the existent &lt;infosec@edk2.groups.io&gt; mailing list for security patch review, but many other project participants disagreed, saying that such a mailing list is not confidential enough.

So we&apos;ve been stuck with security patch reviews through bugzilla attachments, for a while. There isn&apos;t any more recent guidance that I could cite here.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16066</commentid>
    <comment_count>13</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2021-05-14 16:35:24 +0000</bug_when>
    <thetext>v2:
  https://edk2.groups.io/g/devel/message/75132
  https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00448.html
  msgid: &lt;3cae2ac836884b131725866264e0a0e1897052de.1621024125.git.thomas.lendacky@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16212</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-29 07:38:29 +0000</bug_when>
    <thetext>Merged in commit dbc22a178546 via &lt;https://github.com/tianocore/edk2/pull/1674&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3687</bug_id>
          
          <creation_ts>2021-10-13 19:32:06 +0000</creation_ts>
          <short_desc>VFR Compiler generated random data in output files when unnamed fields used in HII C structure</short_desc>
          <delta_ts>2021-11-04 23:04:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17535</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-10-13 19:32:06 +0000</bug_when>
    <thetext>If an unnamed field is used in an unnamed C structure, then the 
variable mFieldName is not initialized and this can result in random
data in the VFR compiler output file.

If the FieldName is NULL, then initialize pNewField-&gt;mFieldName
to a Null-terminated empty string.  Proposed fix:

--- a/BaseTools/Source/C/VfrCompile/VfrUtilityLib.cpp
+++ b/BaseTools/Source/C/VfrCompile/VfrUtilityLib.cpp
@@ -1135,6 +1135,8 @@ CVfrVarDataTypeDB::DataTypeAddBitField (
   if (FieldName != NULL) {
     strncpy (pNewField-&gt;mFieldName, FieldName, MAX_NAME_LEN - 1);
     pNewField-&gt;mFieldName[MAX_NAME_LEN - 1] = 0;
+  } else {
+    strncpy (pNewField-&gt;mFieldName, &quot;&quot;, MAX_NAME_LEN - 1);
   }
   pNewField-&gt;mFieldType    = pFieldType;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17536</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-10-13 19:32:50 +0000</bug_when>
    <thetext>Assign owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17690</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-04 23:03:18 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/83007</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17691</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-04 23:04:44 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/b258f12889c09555e99c9cebf56dba45190c5dc2

PR:

https://github.com/tianocore/edk2/pull/2159</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3469</bug_id>
          
          <creation_ts>2021-06-30 10:38:17 +0000</creation_ts>
          <short_desc>uefi-sct: QueryVariableInfo(attributes = EFI_VARIABLE_NON_VOLATILE)</short_desc>
          <delta_ts>2021-08-09 07:34:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16494</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-30 10:38:17 +0000</bug_when>
    <thetext>The Self Certification Test (SCT) II Case Specification, 2017 requires in 5.2.1.4.5.:


&quot;1. Call QueryVariableInfoservice with the Attributes:

* EFI_VARIABLE_NON_VOLATILE
* EFI_VARIABLE_RUNTIME_ACCESS
* EFI_VARIABLE_NON_VOLATILE|EFI_VARIABLE_RUNTIME_ACCESS

The returned code must be EFI_INVALID_PARAMETER.&quot;

Value EFI_VARIABLE_NON_VOLATILE is missing in array 
InvalidAttributes[] of function QueryVariableInfoConfTestSub5().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16495</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-30 10:40:33 +0000</bug_when>
    <thetext>Assign to myself.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16496</commentid>
    <comment_count>2</comment_count>
      <attachid>747</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-06-30 10:53:25 +0000</bug_when>
    <thetext>Created attachment 747
uefi-sct/SctPkg: uefi-sct: QueryVariableInfo(EFI_VARIABLE_NON_VOLATILE)

The appended patch was sent to the development list:
https://edk2.groups.io/g/devel/message/77367

Please, review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16831</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-08-09 07:31:47 +0000</bug_when>
    <thetext>The appended patch was reviewed:

Reviewed-by: G Edhaya Chandran&lt;edhaya.chandran@arm.com&gt;
https://edk2.groups.io/g/devel/message/78952

Please, consider for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16832</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-08-09 07:34:37 +0000</bug_when>
    <thetext>The appended patch was merged as 814b2af535d977b3967d.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>747</attachid>
            <date>2021-06-30 10:53:25 +0000</date>
            <delta_ts>2021-06-30 10:53:25 +0000</delta_ts>
            <desc>uefi-sct/SctPkg: uefi-sct: QueryVariableInfo(EFI_VARIABLE_NON_VOLATILE)</desc>
            <filename>0001-uefi-sct-SctPkg-uefi-sct-QueryVariableInfo-EFI_VARIA.patch</filename>
            <type>text/plain</type>
            <size>1658</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3976</bug_id>
          
          <creation_ts>2022-07-04 02:05:19 +0000</creation_ts>
          <short_desc>RAS2 Extensions</short_desc>
          <delta_ts>2022-09-29 18:16:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Thanunathan Rangarajan">thanu.rangarajan</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>thanu.rangarajan</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19176</commentid>
    <comment_count>0</comment_count>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-07-04 02:05:19 +0000</bug_when>
    <thetext>This ECR pertains to enhancements to the RAS2 table for improved patrol scrub control.

The following extensions are being proposed:
1. Definition of a &quot;nominal&quot; scrub rate a la CPPC, that allows platform to describe the scrub rate as a real value.
2. Extension of the maximum and minimum scrub rates as a percentage of the nominal rate.
3. A cost factor associated with the above definitions, for OS to make informed decision regarding bandwidth/power vs. RAS tradeoffs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19186</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-05 21:52:41 +0000</bug_when>
    <thetext>Which spec will be updated? Please go ahead to follow code first process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19328</commentid>
    <comment_count>2</comment_count>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-07-25 03:15:35 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; Which spec will be updated? Please go ahead to follow code first process.

This will be the ACPI specification. ACPI.next.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19329</commentid>
    <comment_count>3</comment_count>
      <attachid>1012</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-07-25 03:18:42 +0000</bug_when>
    <thetext>Created attachment 1012
RAS2 Extensions ECR version 0.3

Initial draft for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19344</commentid>
    <comment_count>4</comment_count>
      <attachid>1013</attachid>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-08-01 02:18:53 +0000</bug_when>
    <thetext>Created attachment 1013
Code First RAS2 Extensions v.0.7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19345</commentid>
    <comment_count>5</comment_count>
    <who name="Thanunathan Rangarajan">thanu.rangarajan</who>
    <bug_when>2022-08-01 02:20:44 +0000</bug_when>
    <thetext>New revision (v0.7) of the ECR added. The only change since 0.3 is in the Array of Scrub rate descriptors field, where the descriptor now returns a fraction of total bandwidth consumed instead of a percentage.

Please review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19357</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-08-03 15:19:15 +0000</bug_when>
    <thetext>ASWG mantis ticket: https://mantis.uefi.org/mantis/view.php?id=2344</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19672</commentid>
    <comment_count>7</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-09-29 18:16:25 +0000</bug_when>
    <thetext>Approved by ASWG in 9/29 meeting as new content for ACPI.next</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1012</attachid>
            <date>2022-07-25 03:18:42 +0000</date>
            <delta_ts>2022-07-25 03:18:42 +0000</delta_ts>
            <desc>RAS2 Extensions ECR version 0.3</desc>
            <filename>CodeFirst_RAS2_Extensions_ver0.6.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>28082</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1013</attachid>
            <date>2022-08-01 02:18:53 +0000</date>
            <delta_ts>2022-08-01 02:18:53 +0000</delta_ts>
            <desc>Code First RAS2 Extensions v.0.7</desc>
            <filename>CodeFirst_RAS2_Extensions_ver0.7.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>28152</size>
            <attacher name="Thanunathan Rangarajan">thanu.rangarajan</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3833</bug_id>
          
          <creation_ts>2022-02-13 11:15:58 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: BaseFspDebugLibSerialPort Support for X64</short_desc>
          <delta_ts>2022-03-17 09:00:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashraf Ali S">ashraf.ali.s</reporter>
          <assigned_to>ted.kuo</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>ted.kuo</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18341</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Ali S">ashraf.ali.s</who>
    <bug_when>2022-02-13 11:15:58 +0000</bug_when>
    <thetext>Currenly BaseFspDebugLibSerialPort supports only IA32 based on the INF,
move the nasm to the root, and remove IA32 for it, which will fix both builds</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18439</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-22 22:03:04 +0000</bug_when>
    <thetext>Ashraf will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18637</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-03-17 09:00:18 +0000</bug_when>
    <thetext>commit 0531f61376548c8a4d79eaee1dd5f4070ef009bf 
Author: Kuo, Ted &lt;ted.kuo@intel.com&gt;
Date:   Mon Mar 14 10:32:42 2022 +0800

    IntelFsp2Pkg: BaseFspDebugLibSerialPort Support for X64

    REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3833
    Add BaseFspDebugLibSerialPort Support for X64.

    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Cc: Ashraf Ali S &lt;ashraf.ali.s@intel.com&gt;
    Cc: Ted Kuo &lt;ted.kuo@intel.com&gt;
    Signed-off-by: Ted Kuo &lt;ted.kuo@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3707</bug_id>
          
          <creation_ts>2021-10-26 09:58:46 +0000</creation_ts>
          <short_desc>Code First - Clarify EFI_AUTHENTICATION_INFO_PROTOCOL requirements</short_desc>
          <delta_ts>2021-11-22 09:12:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>Jose.Marinho</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17611</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-26 09:58:46 +0000</bug_when>
    <thetext>Issue originally reported against edk2-test: https://bugzilla.tianocore.org/show_bug.cgi?id=1570


Details of the issue (copied from https://bugzilla.tianocore.org/show_bug.cgi?id=1570#c3):

Heinrich Schuchardt 2021-10-20 04:26:21 EDT

The EFI_AUTHENTICATION_INFO_PROTOCOL is required for handles with the EFI_ISCSI_INITIATOR_NAME_PROTOCOL.

A service DumpAll() is not needed as the Get() service already provides access to a buffer with all authentication nodes and the test framework can dump the nodes if needed.

A service ClearAll() is not needed as the at the end of the test the Set() service can be used to set the authentication information to the original state.

The EDK II implementation of the EFI_AUTHENTICATION_INFO_PROTOCOL just returns EFI_DEVICE_ERROR and EFI_UNSUPPORTED. So this implementation is non-conformant.

According to the UEFI specification the buffer with the authentication information may contain multiple authentication nodes. It does not define how the end of the buffer is marked.

A clarification in the specification is necessary before the EFI_AUTHENTICATION_INFO_PROTOCOL can be correctly implemented and tested at all.

In a change to the specification a GUID for the end node should be defined (possibly 00000000-0000-0000-0000-000000000000). The size of the end node should be defined as 18 (GUID + length field) as no specific authentication data is needed for the end node.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17613</commentid>
    <comment_count>1</comment_count>
      <attachid>851</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-10-26 14:31:00 +0000</bug_when>
    <thetext>Created attachment 851
Suggested change to UEFI specification

Please, find in the attachment the suggested change to the definition of the EFI_AUTHENTICATION_INFO_PROTOCOL in the UEFI specification, chapter &quot;32.1 Secure Boot&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17652</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-02 21:54:48 +0000</bug_when>
    <thetext>Samer is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17716</commentid>
    <comment_count>3</comment_count>
    <who name="Jose Marinho">Jose.Marinho</who>
    <bug_when>2021-11-10 10:38:29 +0000</bug_when>
    <thetext>The EFI_AUTHENTICATION_INFO_PROTOCOL.Get() function returns a single Authentication Node in the memory pointed to by Buffer.
This is specified in the function description:
&quot;Description
This function retrieves the Authentication Node for a given controller handle.&quot;


The text &quot;CHAP (using RADIUS) Authentication Node&quot; has the incorrect heading and should be corrected.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17717</commentid>
    <comment_count>4</comment_count>
      <attachid>873</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-11-10 10:42:07 +0000</bug_when>
    <thetext>Created attachment 873
Suggested change to UEFI specification</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17718</commentid>
    <comment_count>5</comment_count>
      <attachid>874</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-11-10 12:30:54 +0000</bug_when>
    <thetext>Created attachment 874
Suggested change to UEFI specification

Use the ECR template</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17779</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-11-17 10:23:31 +0000</bug_when>
    <thetext>Looks good! Just a formatting change to separate the sections. and no EDK2 code changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17794</commentid>
    <comment_count>7</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-11-22 09:11:34 +0000</bug_when>
    <thetext>USWG approved this on 11/17 using the version https://bugzilla.tianocore.org/attachment.cgi?id=874 of the document. Closing this BZ</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17795</commentid>
    <comment_count>8</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-11-22 09:12:14 +0000</bug_when>
    <thetext>Documenting the ASWG Mantis ticket for completeness: https://mantis.uefi.org/mantis/view.php?id=2286</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>851</attachid>
            <date>2021-10-26 14:31:00 +0000</date>
            <delta_ts>2021-11-10 10:42:07 +0000</delta_ts>
            <desc>Suggested change to UEFI specification</desc>
            <filename>authentication_end_node.rst</filename>
            <type>text/x-rst</type>
            <size>1242</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>873</attachid>
            <date>2021-11-10 10:42:07 +0000</date>
            <delta_ts>2021-11-10 10:42:07 +0000</delta_ts>
            <desc>Suggested change to UEFI specification</desc>
            <filename>authentication_end_node.rst</filename>
            <type>text/x-rst</type>
            <size>514</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>874</attachid>
            <date>2021-11-10 12:30:54 +0000</date>
            <delta_ts>2021-11-10 12:30:54 +0000</delta_ts>
            <desc>Suggested change to UEFI specification</desc>
            <filename>EFI_AUTHENTICATION_INFO_PROTOCOL___ECR.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>47446</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3591</bug_id>
          
          <creation_ts>2021-08-25 13:50:27 +0000</creation_ts>
          <short_desc>Code First - UEFI Config table to describe Profiles</short_desc>
          <delta_ts>2021-12-17 12:38:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>vincent.zimmer</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17072</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-25 13:50:27 +0000</bug_when>
    <thetext>This proposal updates the UEFI specification to allow publishing UEFI Conformance profiles, allowing implementations to advertise to the OS if they follow a reduced-model of UEFI implementation, which conforms to an external specification defining a subset of the UEFI specification requirements.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17073</commentid>
    <comment_count>1</comment_count>
      <attachid>814</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-25 13:50:53 +0000</bug_when>
    <thetext>Created attachment 814
proposal - ver1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17077</commentid>
    <comment_count>2</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2021-08-25 16:10:02 +0000</bug_when>
    <thetext>It would good to comment on if they table lives into Runtime.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17078</commentid>
    <comment_count>3</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2021-08-25 16:14:59 +0000</bug_when>
    <thetext>I think this is a little too complex...

EFI_GUID **ConformanceProfilesBuffer;

You have to allocate storage for:
EFI_CONFORMANCE_PROFILES_TABLE
The table of EFI_GUID *
And the value that each table entry points to. 

Especially if you want it to survive into runtime fewer allocations is better. 

This gets you down to 2 allocations:
EFI_GUID *ConformanceProfilesBuffer;

Or you could just define the EFI_GUIDs to follow:
typedef struct {
  UINT16   Version;
  UINT16   NumberOfProfiles;
  //EFI_GUID ConformanceProfilesBuffer[];
} EFI_CONFORMANCE_PROFILES_TABLE;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17079</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-25 16:21:46 +0000</bug_when>
    <thetext>thanks Andrew for the review. Yes the table will live into Runtime. I will update the proposal to use your suggested format and simplify the allocations</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17080</commentid>
    <comment_count>5</comment_count>
      <attachid>815</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-25 16:34:23 +0000</bug_when>
    <thetext>Created attachment 815
proposal - ver2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17081</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-08-25 17:25:59 +0000</bug_when>
    <thetext>Feedback from UEFI Forum discussion:

- Define a new GUID for &quot;Full conformance of this version of the UEFI spec, as defined in section 2.6 - Requirements&quot;
- The absence of EFI_CONFORMANCE_PROFILES_TABLE means &quot;fully compliant&quot;
- Add a note in section 2.6 that points to the conformance profiles table

This allows platforms to advertise being conformant to *both* the UEFI spec, as well as additional profiles defined by external specifications (which may be subset of the UEFI spec, or has additional requirements not defined in the UEFI spec).

This also allows backwards compatibility with existing implementations that are assumed fully compliant without a need to advertise the new Config Table</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17320</commentid>
    <comment_count>7</comment_count>
      <attachid>833</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-09-21 13:20:07 +0000</bug_when>
    <thetext>Created attachment 833
proposal_ver3

Updated per feedback form USWG</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17321</commentid>
    <comment_count>8</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-09-21 13:20:42 +0000</bug_when>
    <thetext>Cross-referencing USWG mantis ticket: https://mantis.uefi.org/mantis/view.php?id=2271</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17781</commentid>
    <comment_count>9</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-11-17 15:57:31 +0000</bug_when>
    <thetext>is this going to use .md format per https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Code-First-Process given it has code within it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17792</commentid>
    <comment_count>10</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-11-22 09:05:25 +0000</bug_when>
    <thetext>Approved in USWG on 11/17 as new content for UEFI 2.next. Implementations can proceed to using the definition in the approved ver3 https://bugzilla.tianocore.org/attachment.cgi?id=833

Closing this BZ</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18020</commentid>
    <comment_count>11</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-12-17 12:38:43 +0000</bug_when>
    <thetext>Non-compliant firmware does not implement all elements. Therefore it makes no sense to let the absence of a table signify compliance. Please, adjust the suggested change accordingly.

From the communication it is unclear why the new table is needed.

Which software will consume it?
What decision will it take based on the table that it could not better base on the result of API calls?

Best regards

Heinrich</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>814</attachid>
            <date>2021-08-25 13:50:53 +0000</date>
            <delta_ts>2021-08-25 13:50:53 +0000</delta_ts>
            <desc>proposal - ver1</desc>
            <filename>UEFI_Conformance_Profiles_ver1.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>51117</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>815</attachid>
            <date>2021-08-25 16:34:23 +0000</date>
            <delta_ts>2021-08-25 16:34:23 +0000</delta_ts>
            <desc>proposal - ver2</desc>
            <filename>UEFI_Conformance_Profiles_ver2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>51001</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>833</attachid>
            <date>2021-09-21 13:20:07 +0000</date>
            <delta_ts>2021-09-21 13:20:07 +0000</delta_ts>
            <desc>proposal_ver3</desc>
            <filename>UEFI_Conformance_Profiles_ver3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>57827</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3486</bug_id>
          
          <creation_ts>2021-07-09 12:05:31 +0000</creation_ts>
          <short_desc>KabylakeOpenBoardPkg/PeiSerialPortLibSpiFlash: PPI should not be stored in HOB</short_desc>
          <delta_ts>2021-08-11 21:41:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16599</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-07-09 12:05:31 +0000</bug_when>
    <thetext>The library currently stores the PCH SPI PPI pointer in a context HOB. This was done to prevent additional lists look up. The context data is already stored in a HOB which requires a HOB list search and the PPI if not cached would have caused a PPI list search.

The PPI can get out of sync with the PPI list. Since the PPI will be invoked frequently as this library instance implements the serial port library interface (it interacts with SPI flash but the debug interfaces need to be cleaned up), the PPI needs to always directly come from the current PPI list. This will introduce a slight performance penalty due to the additional list lookup in the library but this is a debug feature and the improvement in functionality is needed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16600</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-07-09 12:11:11 +0000</bug_when>
    <thetext>V1 patch on the mailing list: https://edk2.groups.io/g/devel/message/77656</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16887</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-11 21:41:06 +0000</bug_when>
    <thetext>Merged to edk2-platforms/master in the following commit: https://github.com/tianocore/edk2-platforms/commit/8c9335e1847802623fc1352703b53edc4eb38a4c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3999</bug_id>
          
          <creation_ts>2022-07-18 23:45:41 +0000</creation_ts>
          <short_desc>Support 64bit FspResetType for X64 build.</short_desc>
          <delta_ts>2022-07-19 18:27:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19262</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-07-18 23:45:41 +0000</bug_when>
    <thetext>FspResetType can be either 32bit or 64bit basing on the build type.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19263</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-07-18 23:46:06 +0000</bug_when>
    <thetext>Will send patch for this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19274</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-07-19 18:27:44 +0000</bug_when>
    <thetext>patch series merged:
https://github.com/tianocore/edk2/commit/140446cd595cad870a0e8cef7a367bae8f09effa
https://github.com/tianocore/edk2/commit/24eac4caf31afae48349af44588a52783c1819b8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3371</bug_id>
          
          <creation_ts>2021-05-03 11:54:54 +0000</creation_ts>
          <short_desc>No tarball in 202102 release</short_desc>
          <delta_ts>2021-06-01 03:15:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Anisse Astier">aastier</reporter>
          <assigned_to>gaoliming</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15887</commentid>
    <comment_count>0</comment_count>
    <who name="Anisse Astier">aastier</who>
    <bug_when>2021-05-03 11:54:54 +0000</bug_when>
    <thetext>In release 202102, there was no .tar.gz archive uploaded in the github release assets. See bug #3099 for why this is useful instead of github automatic archives.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15904</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-04 15:36:49 +0000</bug_when>
    <thetext>Mike, could you please take a look? From a cursory view at &lt;https://github.com/tianocore/edk2/releases/&gt;, I can&apos;t tell what&apos;s wrong. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15944</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-06 23:02:53 +0000</bug_when>
    <thetext>I will check what&apos;s wrong here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16020</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-11 21:53:11 +0000</bug_when>
    <thetext>Liming takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16202</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-28 03:48:35 +0000</bug_when>
    <thetext>Fix it in edk2 202102 stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16229</commentid>
    <comment_count>5</comment_count>
    <who name="Anisse Astier">aastier</who>
    <bug_when>2021-06-01 03:15:37 +0000</bug_when>
    <thetext>Thank you.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3865</bug_id>
          
          <creation_ts>2022-03-10 00:25:47 +0000</creation_ts>
          <short_desc>StackOffset must be aligned to a 16-byte boundary in X64</short_desc>
          <delta_ts>2022-03-22 03:27:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ted.kuo</reporter>
          <assigned_to>ted.kuo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>mhaeuser</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18594</commentid>
    <comment_count>0</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-03-10 00:25:47 +0000</bug_when>
    <thetext>Per X64 calling convention, RSP has to be 16-byte aligned before making a call. In order to support 64bit in PEI, we need to implement a function which ensures RSP is 16-byte aligned before switching PeiCore from temporary memory to permanent memory. Otherwise, it may cause exception in some scenarios(e.g. executing movaps with address which is not 16-byte aligned).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18605</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-15 21:38:41 +0000</bug_when>
    <thetext>Ted: which module will be required to be updated for this support?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18622</commentid>
    <comment_count>2</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-03-15 22:21:55 +0000</bug_when>
    <thetext>Hi Liming,
The changes are needed in MdeModulePkg/Core/Pei for supporting PEI 64bit. I&apos;ve sent code review with mail subject - [edk2-devel][PATCH] MdeModulePkg: Make RSP 16-byte boundary aligned for PEI 64bit. Please kindly review it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18645</commentid>
    <comment_count>3</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-03-18 09:19:03 +0000</bug_when>
    <thetext>Correcting problem statement:
For X64, StackOffset must be aligned to a 16-byte boundary as well as old stack and new stack before switching stack. Otherwise, it&apos;ll get wrong data from Private
pointer and lead to unexpected failure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18662</commentid>
    <comment_count>4</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-03-22 03:27:39 +0000</bug_when>
    <thetext>The patch should be specific to X64 in IntelFspPkg not MdeModulePkg. Closed the issue with WONTFIX.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3738</bug_id>
          
          <creation_ts>2021-11-16 16:45:36 +0000</creation_ts>
          <short_desc>EFI_SIMPLE_TEXT_OUT_PROTOCOL tests should allow SetMode to return EFI_UNSUPPORTED</short_desc>
          <delta_ts>2022-02-03 09:14:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sunny Wang">Sunny.Wang</reporter>
          <assigned_to name="Sunny Wang">Sunny.Wang</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>Sunny.Wang</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17774</commentid>
    <comment_count>0</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-11-16 16:45:36 +0000</bug_when>
    <thetext>For now, the EFI_SIMPLE_TEXT_OUT_PROTOCOL related tests identify all the errors from SetMode as failures, so we may run into the failure &quot;SetMode() with valid mode -- FAILURE&quot; with the EFI_SIMPLE_TEXT_OUT_PROTOCOL tests below: 
 - ClearScreen_Func: [FAILED
 - EnableCursor_Func: [FAILED]
 - Reset_Func: [FAILED]
 - SetAttribute_Func: [FAILED]
 - SetCursorPosition_Conf: [FAILED]
 - SetCursorPosition_Func: [FAILED]

For example, https://github.com/tianocore/edk2-test/blob/f171d5b2529563c2b76a51d07d7c602cced6ecaa/uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/SimpleTextOut/BlackBoxTest/SimpleTextOutBBTestFunction_uefi.c#L3848 -&gt; ClearScreen_Func test 


UEFI spec allows SetMode function to return EFI_UNSUPPORTED for the condition below:    
If the output devices support 80x50, that is defined to be mode 1. All other text dimensions supported by the device will follow as modes 2 and above. If an output device supports modes 2 and above, but does not support 80x50, then querying for mode 1 will return EFI_UNSUPPORTED.

Therefore, we should update the tests listed above for fixing this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17898</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-12-02 08:05:25 +0000</bug_when>
    <thetext>From the specification and the code it is obvious that this is a bug.

Status changed to confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18124</commentid>
    <comment_count>2</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2022-01-13 09:00:11 +0000</bug_when>
    <thetext>The patch has been sent out. Waiting for review. 
https://edk2.groups.io/g/devel/message/85576</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18132</commentid>
    <comment_count>3</comment_count>
      <attachid>914</attachid>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2022-01-13 09:23:00 +0000</bug_when>
    <thetext>Created attachment 914
0001-uefi-sct-SctPkg-Allow-SimpleTextOut-SetMode-to-retur.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18233</commentid>
    <comment_count>4</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-02-03 09:14:44 +0000</bug_when>
    <thetext>The solution is upstreamed.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>914</attachid>
            <date>2022-01-13 09:23:00 +0000</date>
            <delta_ts>2022-01-13 09:23:00 +0000</delta_ts>
            <desc>0001-uefi-sct-SctPkg-Allow-SimpleTextOut-SetMode-to-retur.patch</desc>
            <filename>0001-uefi-sct-SctPkg-Allow-SimpleTextOut-SetMode-to-retur.patch</filename>
            <type>text/plain</type>
            <size>87028</size>
            <attacher name="Sunny Wang">Sunny.Wang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3614</bug_id>
          
          <creation_ts>2021-09-10 02:41:15 +0000</creation_ts>
          <short_desc>bad one title bandoned</short_desc>
          <delta_ts>2021-09-13 21:36:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3615</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Yang, longlong">longl.yang</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17232</commentid>
    <comment_count>0</comment_count>
    <who name="Yang, longlong">longl.yang</who>
    <bug_when>2021-09-10 02:41:15 +0000</bug_when>
    <thetext>Debug message should be added for indicating IBB is successfully verifying the OBB

\Edk2\SecurityPkg\FvReportPei\FvReportPei.c

All UEFI firmware functional requirements (FR) must be captured using the EARS syntax.  All UEFI functional requirements (FR) and quality and performance requirements (QPR) must meet all of the properties of good requirements, and must contain the metadata fields required by UEFI FW.  Other metadata fields may be included.   Please reference the following wiki for the full UEFI FW requirement standards:   https://wiki.ith.intel.com/display/DcgUefiFw/UEFI+Firmware+Requirements+Specification *</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17263</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-13 21:36:12 +0000</bug_when>
    <thetext>Duplicate

*** This bug has been marked as a duplicate of bug 3615 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3014</bug_id>
          
          <creation_ts>2020-10-19 21:06:09 +0000</creation_ts>
          <short_desc>Add the serial port terminal library</short_desc>
          <delta_ts>2020-12-25 03:01:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14039</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-19 21:06:09 +0000</bug_when>
    <thetext>Add the serial port terminal library to get console redirect after the shell is loaded.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14040</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-19 21:06:40 +0000</bug_when>
    <thetext>I will add the library.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14041</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-19 21:06:53 +0000</bug_when>
    <thetext>I will add the library.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14046</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-19 23:21:22 +0000</bug_when>
    <thetext>V1 patch sent at:
https://edk2.groups.io/g/devel/message/66436
https://edk2.groups.io/g/devel/message/66437</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14073</commentid>
    <comment_count>4</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-23 03:16:36 +0000</bug_when>
    <thetext>Move the library to AdvancedFeaturePkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14076</commentid>
    <comment_count>5</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-25 20:54:59 +0000</bug_when>
    <thetext>Patch V2 sent at:
https://edk2.groups.io/g/devel/message/66559
https://edk2.groups.io/g/devel/message/66560</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14215</commentid>
    <comment_count>6</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-11-04 00:08:18 +0000</bug_when>
    <thetext>Move the library to MinPlatformPkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14378</commentid>
    <comment_count>7</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-11-19 20:02:15 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2-platforms/commit/27ba1e1ab4a7d503620e118769bd27e33a56d404</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14380</commentid>
    <comment_count>8</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-11-19 20:03:55 +0000</bug_when>
    <thetext>Previous change is for other bug, this issue is still in progress.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14381</commentid>
    <comment_count>9</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-11-19 20:05:24 +0000</bug_when>
    <thetext>Patch V7: https://edk2.groups.io/g/devel/message/67641</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14667</commentid>
    <comment_count>10</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-12-25 03:01:48 +0000</bug_when>
    <thetext>patch was pushed:
https://github.com/tianocore/edk2-platforms/commit/c3c477792d2f90d1d78edf947ccad6915e4e0b06</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3508</bug_id>
          
          <creation_ts>2021-07-27 05:12:56 +0000</creation_ts>
          <short_desc>Sort CpuCacheInfo array in CpuCacheInfoLib</short_desc>
          <delta_ts>2021-08-09 01:36:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason">yun.lou</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16702</commentid>
    <comment_count>0</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-07-27 05:12:56 +0000</bug_when>
    <thetext>Sort the CpuCacheInfo array by the core type values from largest to smallest.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16703</commentid>
    <comment_count>1</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-07-27 05:14:26 +0000</bug_when>
    <thetext>Assign to Jason Lou.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16705</commentid>
    <comment_count>2</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-07-27 06:18:27 +0000</bug_when>
    <thetext>Have sent out the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16819</commentid>
    <comment_count>3</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-08-06 10:49:55 +0000</bug_when>
    <thetext>(In reply to Jason from comment #0)
&gt; Sort the CpuCacheInfo array by the core type values from largest to smallest.

Update:
Sort the CpuCacheInfo array by CPU package ID, core type, cache level and cache type.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16828</commentid>
    <comment_count>4</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-08-09 01:36:54 +0000</bug_when>
    <thetext>Have merged all the code change into master, close this bug.

SHA-1: 4de77ae9890d241271f543e9195ab3516f3abec6

* UefiCpuPkg/CpuCacheInfoLib: Sort CpuCacheInfo array

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3508

Sort the CpuCacheInfo array by CPU package ID, core type, cache level
and cache type.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3399</bug_id>
          
          <creation_ts>2021-05-18 00:58:05 +0000</creation_ts>
          <short_desc>ArmGicLib.c is rife with bad assignments for AARCH64</short_desc>
          <delta_ts>2023-08-16 01:46:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>ardb</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16088</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-05-18 00:58:05 +0000</bug_when>
    <thetext>This file is full of functions that take in UINTNs and then use them as UINT32s without check size or even explicitly casting. It&apos;s untenable for a driver that supports being built for AARCH64 and I&apos;m a little confused as to how it has lived this way.

Please fix these or update ArmGicLib.inf to explain that this file can&apos;t be used for AARCH64. No, don&apos;t do that. Just fix it, please.

Just to name a few:
https://github.com/tianocore/edk2/blob/1fbf5e30ae8eb725f4e10984f7b0a208f78abbd0/ArmPkg/Drivers/ArmGic/ArmGicLib.c#L214
https://github.com/tianocore/edk2/blob/1fbf5e30ae8eb725f4e10984f7b0a208f78abbd0/ArmPkg/Drivers/ArmGic/ArmGicLib.c#L263
https://github.com/tianocore/edk2/blob/1fbf5e30ae8eb725f4e10984f7b0a208f78abbd0/ArmPkg/Drivers/ArmGic/ArmGicLib.c#L301</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16153</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-25 21:58:19 +0000</bug_when>
    <thetext>Include Ard for the comment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21828</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2023-08-16 01:45:27 +0000</bug_when>
    <thetext>This issue has been fixed at b38068..ded1d5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21829</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2023-08-16 01:46:01 +0000</bug_when>
    <thetext>ArmPkg: Arm GIC Library and Driver improvements</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3889</bug_id>
          
          <creation_ts>2022-03-31 21:02:36 +0000</creation_ts>
          <short_desc>NetworkPkg: Allow to set HTTP DNS RetryCount and RetryInterval</short_desc>
          <delta_ts>2022-05-10 23:10:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18738</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-03-31 21:02:36 +0000</bug_when>
    <thetext>Currently the HTTP DNS Retry Interval is 2 second and no retry attempt. If DNS response can arrive in 2 second, the DNS request is failed, and then HTTP boot is failed.
In order to resolve this issue, we need a mechanism to configurate RetryCount and RetryInterval in platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18739</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-03-31 21:03:32 +0000</bug_when>
    <thetext>I will submit a patch for this issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18740</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-03-31 21:07:19 +0000</bug_when>
    <thetext>(In reply to Heng Luo from comment #0)
&gt; Currently the HTTP DNS Retry Interval is 2 second and no retry attempt. If
&gt; DNS response can arrive in 2 second, the DNS request is failed, and then
&gt; HTTP boot is failed.
&gt; In order to resolve this issue, we need a mechanism to configurate
&gt; RetryCount and RetryInterval in platform.

Correct typo:
Currently the HTTP DNS Retry Interval is 2 second and no retry attempt. If DNS response can&apos;t arrive in 2 second, the DNS request is failed, and then HTTP boot is failed.
In order to resolve this issue, we need a mechanism to configurate RetryCount and RetryInterval in platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18766</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-04-05 22:01:50 +0000</bug_when>
    <thetext>All checks have passed the EDK2 CI build.
https://github.com/tianocore/edk2/pull/2717</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18946</commentid>
    <comment_count>4</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2022-05-10 23:10:37 +0000</bug_when>
    <thetext>fixed by
https://github.com/tianocore/edk2/commit/35a4b63247cb4e42f3484dcf2b45ce9a4360596e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3754</bug_id>
          
          <creation_ts>2021-11-29 23:17:20 +0000</creation_ts>
          <short_desc>DxeCore Install mismatched LoadedImage Protocol when enable UniversalPayload</short_desc>
          <delta_ts>2021-12-14 05:09:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>guomin.jiang</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17866</commentid>
    <comment_count>0</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-11-29 23:17:20 +0000</bug_when>
    <thetext>1. DxeCore will use ModuleInfo to install LoadedImage protocol for DxeCore.
2. DxeIpl will create the ModuleInfo of UniversalPayload. and UniversalPayload will create the ModuleInfo of DxeCore.
3. Only the first ModuleInfo will be used by DxeCore to install LoadedImage.
4. So it will install the mismatched LoadedImage of DxeCore by consuming mismatch ModuleInfo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17867</commentid>
    <comment_count>1</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-11-29 23:18:24 +0000</bug_when>
    <thetext>It can be reproduced when enable the UniversalPayload</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17868</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-11-29 23:27:12 +0000</bug_when>
    <thetext>Sent change https://edk2.groups.io/g/devel/message/84149 for reviewing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17916</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-12-03 00:19:52 +0000</bug_when>
    <thetext>Sent change v2 https://edk2.groups.io/g/devel/message/84291 for reviewing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17982</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-12-14 05:09:54 +0000</bug_when>
    <thetext>Merged in https://github.com/tianocore/edk2/commit/ffdde9d7198982b880a9e333b2f2f48c2bbe958d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3530</bug_id>
          
          <creation_ts>2021-08-05 06:17:05 +0000</creation_ts>
          <short_desc>Get WordPress website development services from experts</short_desc>
          <delta_ts>2021-08-09 22:47:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="PNJ Sharptech">joesmithjs1922</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202008</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202008</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16789</commentid>
    <comment_count>0</comment_count>
    <who name="PNJ Sharptech">joesmithjs1922</who>
    <bug_when>2021-08-05 06:17:05 +0000</bug_when>
    <thetext>Get to choose an amazing template for your website design. Incorporate important plugins and themes to manage your website easily and witness an increase in website traffic with top-notch WordPress website development services. We ensure that your website is not only Google friendly but also engages potential customers leading to an increase in revenue.

Visit- https://www.pnjsharptech.com/web-development-company</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16849</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-09 22:47:24 +0000</bug_when>
    <thetext>this is not an issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3425</bug_id>
          
          <creation_ts>2021-06-02 04:26:24 +0000</creation_ts>
          <short_desc>How To Contact Cash App By Phone To Avoid Cash App Issues?</short_desc>
          <delta_ts>2021-06-08 21:48:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="mark wilson">mw8124</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Distribution Packaging Specificatio</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16236</commentid>
    <comment_count>0</comment_count>
    <who name="mark wilson">mw8124</who>
    <bug_when>2021-06-02 04:26:24 +0000</bug_when>
    <thetext>All technical problems of Cash App will never let you down if you have immediate access of technical support. So, what are you waiting for when you feel free with the help of technical support and help 24/7? In such a case, you should Contact Cash App By Phone and get assistance technically &amp; professionally.  https://www.contact-customerservice.co/customer-service/cash-app</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16237</commentid>
    <comment_count>1</comment_count>
    <who name="mark wilson">mw8124</who>
    <bug_when>2021-06-02 04:27:19 +0000</bug_when>
    <thetext>In addition, it can be difficult to submit payments using the Apple Pay to Cash app. To protect your savings, you may need to verify your identity in certain locations when using Apple Cash. However, if you do not provide this information, you may not be able to use all the features of Apple Cash. You can then visit the website to learn about cash payment programs. https://www.pcmonks.net/blog/transfer-money-from-apple-pay-to-cash-app/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16311</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-06-08 21:48:36 +0000</bug_when>
    <thetext>Invalid</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3297</bug_id>
          
          <creation_ts>2021-04-05 18:05:42 +0000</creation_ts>
          <short_desc>Rename mAcpiS3Enable global in PiDxeS3BootScriptLib to avoid duplicate symbol with CLANGPDB</short_desc>
          <delta_ts>2021-04-07 12:36:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>paul.a.lohr</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15513</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-05 18:05:42 +0000</bug_when>
    <thetext>If the module PiSmmCpuDxeSmm from the UefiCpuPkg is linked with the
PiDxeS3BootScriptLib from the MdeModulePkg with the CLANGPDB toolchain,
then a duplicate symbol is detected for the global variable mAcpiS3Enable.

The recommended fix is to rename this global variable in PiDxeS3BootScriptLib
to have a lib specific name such as mS3BootScriptAcpiS3Enable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15514</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-05 18:06:00 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15515</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-05 18:33:28 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/73701</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15541</commentid>
    <comment_count>3</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2021-04-07 10:19:28 +0000</bug_when>
    <thetext>looks good to me mike.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15544</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-04-07 12:36:57 +0000</bug_when>
    <thetext>Commit:
https://github.com/tianocore/edk2/commit/9c08b3e7d5ac177a1ecb3678004fd94164865814

GitHub PR:
https://github.com/tianocore/edk2/pull/1538</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3447</bug_id>
          
          <creation_ts>2021-06-10 05:45:32 +0000</creation_ts>
          <short_desc>Create header files and multiple Hobs for Universal Payload</short_desc>
          <delta_ts>2021-07-19 21:39:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16328</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2021-06-10 05:45:32 +0000</bug_when>
    <thetext>To enable Universal Payload feature in Edk2, and follow spec from https://universalpayload.github.io/documentation/, changes need to be done including:
Add definition about the hob interfaces Guid according to the spec.
Get the information from hobs for some drivers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16378</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-15 21:39:37 +0000</bug_when>
    <thetext>Zhiguang is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16655</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-19 21:39:00 +0000</bug_when>
    <thetext>It has been fixed at edk2 11b1c1d4b98bc1b5eaaaf9eaa94ecd34eeaba5f9..fa24b6ed2679ce238de312204ff516928c34e631</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3942</bug_id>
          
          <creation_ts>2022-06-06 15:45:22 +0000</creation_ts>
          <short_desc>UncrustifyCheck ignore file list paths reduction</short_desc>
          <delta_ts>2022-06-13 17:15:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19034</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-06-06 15:45:22 +0000</bug_when>
    <thetext>When UncrustifyCheck plugin checks against &quot;IgnoreFiles&quot; tag, the script
references the files relative to the workspace.

This will require all files listed under such category to specify the
package name in the corresponding package CI YAML file.

To resolve this issue, the ignore files&apos; paths are changed to be based on
the applicable package path.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19038</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-06-07 21:38:03 +0000</bug_when>
    <thetext>Kun is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19071</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-06-13 17:15:26 +0000</bug_when>
    <thetext>Checked in from https://github.com/tianocore/edk2/pull/2949 as &lt;4f89e4b3e80329b9a445500009c658d2ebce8475&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3811</bug_id>
          
          <creation_ts>2022-01-21 20:25:43 +0000</creation_ts>
          <short_desc>PciBusDxe: Allow PCI Platform Protocol to override existing PCI ROM image</short_desc>
          <delta_ts>2022-02-04 13:15:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>ray.ni</cc>
    
    <cc>star.zeng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18193</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-21 20:25:43 +0000</bug_when>
    <thetext>The PCI Platform Protocol allows a platform to provide a PCI
ROM image for a PCI Controller.

This feature works well for a PCI Controller that does not have
an attached PCI ROM.  However, if a PCI Controller has an attached
PCI ROM that is discovered by the PCI Bus Driver, attempts by the
PCI Platform Protocol to provide an alternate PCI ROM image generate
an ASSERT() in PciRomTable.c in the PciRomAddImageMapping() function
from the following loop.  It generates an ASSERT() if the RomImage and
RomImage passed in do not match the previously recorded one for that
specific PCI Seg/Bus/Dev/Func.


  for (Index = 0; Index &lt; mNumberOfPciRomImages; Index++) {
    if ((mRomImageTable[Index].Seg  == Seg) &amp;&amp;
        (mRomImageTable[Index].Bus  == Bus) &amp;&amp;
        (mRomImageTable[Index].Dev  == Dev) &amp;&amp;
        (mRomImageTable[Index].Func == Func))
    {
      //
      // Expect once RomImage and RomSize are recorded, they will be passed in
      // later when updating ImageHandle
      //
      ASSERT ((mRomImageTable[Index].RomImage == NULL) || (RomImage == mRomImageTable[Index].RomImage));
      ASSERT ((mRomImageTable[Index].RomSize  == 0) || (RomSize  == mRomImageTable[Index].RomSize));
      break;
    }
  }


If these 2 ASSERT() statements are removed, then the PCI Platform Protocol
can override the PCI ROM image that was read from a PCI Controller during 
PCI enumeration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18194</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-21 20:26:06 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18237</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-02-04 12:39:50 +0000</bug_when>
    <thetext>Patch email code review:
https://edk2.groups.io/g/devel/message/85939

GitHub PR:
https://github.com/tianocore/edk2/pull/2488</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18238</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-02-04 13:15:27 +0000</bug_when>
    <thetext>Commit:
https://github.com/tianocore/edk2/commit/a4b7aa362d94bbe0287663cab9af4ab503f6185d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3688</bug_id>
          
          <creation_ts>2021-10-13 19:48:28 +0000</creation_ts>
          <short_desc>Make package and platform builds reproducible across source format changes</short_desc>
          <delta_ts>2021-11-26 09:56:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17537</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-10-13 19:48:28 +0000</bug_when>
    <thetext>There are discussions about using source format tools such as
uncrustify to clean up the source formatting of EDK II C source files.

In order to verify that the source format changes do not have any impacts
to the functionality of firmware the build output files before and after
a source format change can be compared to see if there are any differences.

The C language elements that can cause build output differences are:

1) __TIME__
2) __DATE__
3) __LINE__
4) Format changes to C expressions used in ASSERT(Expression) macros

Use of __TIME__ and __DATE__ can be handled by defining __TIME__ and
__DATE__ to fixed values.  Use of these macros are rare in the edk2 repo.

Use of __LINE__ is more difficult to address because __LINE__ has built
in behavior to produce the source file line number.  
* It can not be defined to a fixed value.
* Pragma #line can be used to reset the __LINE__ to a new start value,
  but this can not be added in every location that uses the __LINE__ 
  through a macro.  
* Use of MDEPKG_NDEBUG does resolve this difference but it also removes
  all DEBUG() and ASSERT() macros, which means verification of no functional
  changes in the use of those macros can not be covered
* Setting PCDs to disable DEBUG() and ASSERT() macros does not remove the
  __LINE__ references.

The proposal is to add a new defined called DEBUG_LINE_NUMBER to the DebugLib
class that is by default defined to __LINE__, but can be set to a fixed 
value when verifying built output across a source format change.

The ASSERT(Expression) macro, when triggered, prints the expression that
triggered the ASSERT().  The C preprocessor stringize operation &apos;#&apos; is used
to convert the C expression to an Null-terminated ASCII string.  If source
format changes are made to the C expression, then the strings will not be
the same.

The proposal is to add a new macro called DEBUG_EXPRESSION_STRING(Expression)
to the DebugLib class that by default is mapped to #Expression.  If the
define DEBUG_EXPRESSION_STRING_VALUE is defined, then DEBUG_EXPRESSION_STRING
is mapped to that fixed string value.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17538</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-10-13 19:48:44 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17844</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 09:56:19 +0000</bug_when>
    <thetext>This is new feature. 

This feature has been merged d79df34bebdd87aa01ccf78f541b4ae4c9f68f74..fd42dcb1fc416b85bbbee1d546abfb7ac758b5c1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3086</bug_id>
          
          <creation_ts>2020-11-21 10:54:29 +0000</creation_ts>
          <short_desc>SctPkg: segmentation violation in OpenEx() functional test</short_desc>
          <delta_ts>2020-12-10 03:36:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14391</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-21 10:54:29 +0000</bug_when>
    <thetext>An incorrect RecordAssertion() statement leads to a segmentation
violation in the functional test for OpenEx() if not all events
are notified.

At multiple locations the format string passed to
RecordAssertion() lacks a format specifier for FileIoEntity-&gt;Tpl.

Both
uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/SimpleFileSystem/BlackBoxTest/SimpleFileSystemExBBTestFunction_OpenEx.c
and
uefi-sct/SctPkg/TestCase/UEFI/IHV/Protocol/SimpleFileSystem/BlackBoxTest/SimpleFileSystemExBBTestFunction_OpenEx.c
need to be fixed.

Here is an example:

      StandardLib-&gt;RecordAssertion (
                     StandardLib,
                     EFI_TEST_ASSERTION_FAILED,
                     gSimpleFileSystemExBBTestFunctionAssertionGuid027,
                     L&quot;OpenEx() Basic Test - checkpoint1 ----Test1----Async&quot;,
                     L&quot;%a:%d: FileIoEntity-&gt;Tpl, Status - %r, File Name - %&quot;,
                     __FILE__,
                     (UINTN)__LINE__,
                     FileIoEntity-&gt;Tpl,
                     FileIoEntity-&gt;StatusAsync,
                     FileIoEntity-&gt;Name
                     );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14392</commentid>
    <comment_count>1</comment_count>
      <attachid>601</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-21 10:58:16 +0000</bug_when>
    <thetext>Created attachment 601
[PATCH edk2-test 1/1] uefi-sct/SctPkg: OpenEx incorrect assertion</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14393</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-21 11:12:02 +0000</bug_when>
    <thetext>Patch sent to developer list and maintainers:

https://edk2.groups.io/g/devel/message/67777
[PATCH edk2-test 1/1] uefi-sct/SctPkg: OpenEx incorrect assertion</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14401</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-23 08:56:08 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/67799
Looks like an obvious fix
Reviewed-by: Grant Likely &lt;grant.likely@arm.com&gt; 

https://edk2.groups.io/g/devel/message/67801
Reviewed-by: Samer El-Haj-Mahmoud &lt;Samer.El-Haj-Mahmoud@arm.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14549</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-12-10 03:36:46 +0000</bug_when>
    <thetext>Patch merged:

uefi-sct/SctPkg: OpenEx incorrect assertion
00257df4e7a6b80548d60731448e18ec1feb4476</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>601</attachid>
            <date>2020-11-21 10:58:16 +0000</date>
            <delta_ts>2020-11-21 10:58:16 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: OpenEx incorrect assertion</desc>
            <filename>0001-edk2-test-PATCH-uefi-sct-SctPkg-OpenEx-incorrect-ass.patch</filename>
            <type>text/plain</type>
            <size>6053</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3567</bug_id>
          
          <creation_ts>2021-08-17 03:04:55 +0000</creation_ts>
          <short_desc>Enable Config Editor tool support for config file and binary delta comparison</short_desc>
          <delta_ts>2021-09-01 08:51:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Loo Tung Lun">tung.lun.loo</reporter>
          <assigned_to name="Loo Tung Lun">tung.lun.loo</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>tung.lun.loo</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16938</commentid>
    <comment_count>0</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-08-17 03:04:55 +0000</bug_when>
    <thetext>This patch is to enable config editor to have a new feature that can spell out the delta between the default configuration files&apos; data, such as YAML and BSF, against the data stored in the binary. This can help users to understand the difference when modifications are made.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17051</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 22:06:11 +0000</bug_when>
    <thetext>please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17122</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-09-01 08:51:27 +0000</bug_when>
    <thetext>commit 12e33dca4c0612a0975265e5ba641c6261a26455
Author: Loo, Tung Lun &lt;tung.lun.loo@intel.com&gt;
Date:   Tue Aug 17 15:43:12 2021 +0800

    IntelFsp2Pkg: Support Config File and Binary delta comparison

    BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=3567

    This patch is to enable config editor to have a new feature that
    can spell out the delta between the default configuration files&apos;
    data, such as YAML and BSF, against the data stored in the binary.
    This can help users understand and track the difference when
    modifications are made.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Signed-off-by: Loo Tung Lun &lt;tung.lun.loo@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3834</bug_id>
          
          <creation_ts>2022-02-14 08:33:11 +0000</creation_ts>
          <short_desc>Define the DevicePath argument from LoadImage as optional</short_desc>
          <delta_ts>2022-04-20 17:16:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jose Marinho">Jose.Marinho</reporter>
          <assigned_to name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>Jose.Marinho</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18356</commentid>
    <comment_count>0</comment_count>
    <who name="Jose Marinho">Jose.Marinho</who>
    <bug_when>2022-02-14 08:33:11 +0000</bug_when>
    <thetext>In UEFI 2.9, the definition of EFI_BOOT_SERVICES.LoadImage() list the *DevicePath argument as mandatory.

From looking at the EFI_NO_FOUND status codes definition,
&quot;EFI_NOT_FOUND Both SourceBuffer and DevicePath are NULL&quot;, it becomes clear that 
 (DevicePath==NULL &amp;&amp; SourceBuffer!=NULL) is considered legal.
Thus it is natural for DevicePath to be declared as optional.

The inconsistency manifested in the UEFI SCT, see BZ ticket reporting the test failure: https://bugzilla.tianocore.org/show_bug.cgi?id=2650
Since then, the test failure has been corrected by allowing devicePath to be Null: https://github.com/tianocore/edk2/commit/1755932f89e0b32fa09232661a5ae6c357f4e471

This ECR sets the DevicePath argument of LoadImage as Optional so that the LoadImage definition is coherent with the return statuses and also so that the UEFI spec agrees with the reference implementation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18357</commentid>
    <comment_count>1</comment_count>
      <attachid>924</attachid>
    <who name="Jose Marinho">Jose.Marinho</who>
    <bug_when>2022-02-14 08:34:22 +0000</bug_when>
    <thetext>Created attachment 924
device_path_optional_ECR_v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18383</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-15 21:44:55 +0000</bug_when>
    <thetext>code first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18598</commentid>
    <comment_count>3</comment_count>
      <attachid>960</attachid>
    <who name="Jose Marinho">Jose.Marinho</who>
    <bug_when>2022-03-11 14:40:03 +0000</bug_when>
    <thetext>Created attachment 960
device_path_optional_ECR_v2

Clarify that, although the DevicePath is optional when SourceBuffer is not NULL, a caller is advised to provide a DevicePath since certain portions of firmware may use it to make certain security policy decisions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18878</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2022-04-20 17:16:36 +0000</bug_when>
    <thetext>This was approved in USWG meeting 3/25 as submitted without change, as an errata to UEFI 2.9. Implementation can proceed with this change.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>924</attachid>
            <date>2022-02-14 08:34:22 +0000</date>
            <delta_ts>2022-02-14 08:34:22 +0000</delta_ts>
            <desc>device_path_optional_ECR_v1</desc>
            <filename>device_path_optional_ECR_v1.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>48098</size>
            <attacher name="Jose Marinho">Jose.Marinho</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>960</attachid>
            <date>2022-03-11 14:40:03 +0000</date>
            <delta_ts>2022-03-11 14:40:03 +0000</delta_ts>
            <desc>device_path_optional_ECR_v2</desc>
            <filename>device_path_optional_ECR_v2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>49700</size>
            <attacher name="Jose Marinho">Jose.Marinho</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3224</bug_id>
          
          <creation_ts>2021-02-17 21:04:22 +0000</creation_ts>
          <short_desc>TigerlakeOpenBoard: Fix build errors with GCC5</short_desc>
          <delta_ts>2021-02-24 21:24:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Takuto Naito">naitaku</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michal.zygowski</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15077</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-02-17 21:04:22 +0000</bug_when>
    <thetext>Build TigerlakeURvp with GCC5, faced some build errors:

Build error 1:

Platform/Intel/TigerlakeOpenBoardPkg/FspWrapper/Library/PeiFspPolicyInitLib/PeiFspPolicyInitLib.inf(55): error 000E: File/directory not found in workspace

TigerLakeFspBinPkg/TigerLakeFspBinPkg.dec is not found in packages path:

It seems that the correct path is TigerLakeFspBinPkg/Client/TigerLakeFspBinPkg.dec.


Build error 2:

Platform/Intel/TigerlakeOpenBoardPkg/Policy/Library/DxeSiliconPolicyUpdateLib/DxeSiliconPolicyUpdateLate.c:91:5: note: in expansion of macro ?RETURN_ERROR?

   91 |     RETURN_ERROR (Status);

      |     ^~~~~~~~~~~~

It seems that ASSERT_EFI_ERROR should be here instead of RETURN_ERROR.


Build error 3:

Silicon/Intel/TigerlakeSiliconPkg/IpBlock/PcieRp/LibraryPrivate/DxePchPcieRpPolicyLib/DxePchPcieRpPolicyLib.c:18:77: error: missing braces around initializer [-Werror=missing-braces]

   18 | GLOBAL_REMOVE_IF_UNREFERENCED PCH_PCIE_DEVICE_OVERRIDE mPcieDeviceTable[] = {

      |                                                                             ^

......

  101 |   { 0x8086, 0x0975, 0xff, 0, 0, 0, PchPcieL1SubstatesOverride, 0, 0xff, 0x3C, 0, 5, 0, 0, 0, 0 },

      |                                                                                              { }


The number of the fields seems to be wrong.


Build error 4:

Platform/Intel/TigerlakeOpenBoardPkg/Library/BasePlatformHookLib/BasePlatformHookLib.c:105:1: error: ?CheckNationalSio? defined but not used [-Werror=unused-function]


CheckNationalSio function needed to be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15078</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-02-17 21:10:12 +0000</bug_when>
    <thetext>confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15091</commentid>
    <comment_count>2</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-02-22 17:40:12 +0000</bug_when>
    <thetext>Patch sent for review: https://edk2.groups.io/g/devel/message/71893</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15092</commentid>
    <comment_count>3</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-02-22 17:41:03 +0000</bug_when>
    <thetext>Committed - https://github.com/tianocore/edk2-platforms/compare/41b54dbb68036743768c53de9586f68a6d2c986f...9fb5174e0a164f83fc708c5941de6085e9cbb1c4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15108</commentid>
    <comment_count>4</comment_count>
    <who name="Takuto Naito">naitaku</who>
    <bug_when>2021-02-23 20:19:43 +0000</bug_when>
    <thetext>Now the RELEASE build succeeds, but the DEBUG build still fails.
These build errors occur only with DEBUG target because 
RELEASE_GCC5_X64_CC_FLAGS has &quot;-Wno-unused-but-set-variable&quot;, but DEBUG_GCC5_X64_CC_FLAGS doesn&apos;t.

/edk2-platforms/Silicon/Intel/TigerlakeSiliconPkg/IpBlock/Vtd/LibraryPrivate/DxeVtdInitLib/DxeVtdInitLib.c:316:23: error: variable ‘GttMmAdr’ set but not used [-Werror=unused-but-set-variable]
950
   UINT32              GttMmAdr;
951
                       ^~~~~~~~

/edk2-platforms/Silicon/Intel/TigerlakeSiliconPkg/IpBlock/Vtd/LibraryPrivate/DxeVtdInitLib/DxeVtdInitLib.c:316:23: error: variable ‘McD2BaseAddress’ set but not used [-Werror=unused-but-set-variable]
954
   UINT64              McD2BaseAddress;
955
                       ^~~~~~~~~~~~~~~


/edk2-platforms/Silicon/Intel/TigerlakeSiliconPkg/IpBlock/PcieRp/LibraryPrivate/PcieClientRpLib/PcieClientRpLib.c:107:16: error: variable ‘LtrCfgLock’ set but not used [-Werror=unused-but-set-variable]
1466
   UINT32       LtrCfgLock;
1467
                ^~~~~~~~~~



/edk2-platforms/Silicon/Intel/TigerlakeSiliconPkg/Pch/PchSmiDispatcher/Smm/PchSmiHelperClient.c:32:11: error: variable ‘RpBase’ set but not used [-Werror=unused-but-set-variable]
3060
   UINT64  RpBase;
3061
           ^~~~~~

/edk2-platforms/Platform/Intel/TigerlakeOpenBoardPkg/Library/BasePlatformHookLib/BasePlatformHookLib.c:187:11: error: variable ‘Index’ set but not used [-Werror=unused-but-set-variable]
2120
   UINT8   Index;
2121
           ^~~~~
2122
/edk2-platforms/Platform/Intel/TigerlakeOpenBoardPkg/Library/BasePlatformHookLib/BasePlatformHookLib.c:186:11: error: variable ‘DataPort’ set but not used [-Werror=unused-but-set-variable]
2123
   UINT16  DataPort;
2124
           ^~~~~~~~
2125
/edk2-platforms/Platform/Intel/TigerlakeOpenBoardPkg/Library/BasePlatformHookLib/BasePlatformHookLib.c:185:11: error: variable ‘IndexPort’ set but not used [-Werror=unused-but-set-variable]
2126
   UINT16  IndexPort;
2127
           ^~~~~~~~~

/edk2-platforms/Platform/Intel/TigerlakeOpenBoardPkg/TigerlakeURvp/Library/BoardInitLib/PeiTigerlakeURvpInitPreMemLib.c:390:14: error: variable ‘Status’ set but not used [-Werror=unused-but-set-variable]
2258
   EFI_STATUS Status;
2259
              ^~~~~~</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15135</commentid>
    <comment_count>5</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2021-02-24 20:07:25 +0000</bug_when>
    <thetext>*** Bug 3220 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15137</commentid>
    <comment_count>6</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-02-24 21:23:19 +0000</bug_when>
    <thetext>Patch sent for review: https://edk2.groups.io/g/devel/message/72130</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15138</commentid>
    <comment_count>7</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-02-24 21:24:40 +0000</bug_when>
    <thetext>Committed - https://github.com/tianocore/edk2-platforms/compare/71d92a044db00bb128894f8ef01d8a88ba67f20b...9951457625be37a93c11587abcee8bf454e02ff9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3708</bug_id>
          
          <creation_ts>2021-10-27 01:42:08 +0000</creation_ts>
          <short_desc>SPCR testing failed using FWTS V21.08.00</short_desc>
          <delta_ts>2021-12-01 19:59:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>SpcrFeaturePkg</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ming.tan</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17616</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2021-10-27 01:42:08 +0000</bug_when>
    <thetext>Use FWTS V21.08.00 to test an Intel platform with SPCR supported, will report following error:

 spcr: SPCR PC-AT compatible IRQ 0xff is invalid
 spcr: SPCR PCI flags compatibility bit 0 is 0, expecting 1 for PCI device</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17617</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2021-10-27 01:42:42 +0000</bug_when>
    <thetext>I will submit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17889</commentid>
    <comment_count>2</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2021-12-01 19:59:46 +0000</bug_when>
    <thetext>The patch has been merged to edk2-platforms master branch:

SHA-1: e9149e2c1b5427caf90bcfc39ce0a418b29d76d7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3108</bug_id>
          
          <creation_ts>2020-12-07 16:08:49 +0000</creation_ts>
          <short_desc>Apply SEV-ES mitigations for encryption bit position and MMIO</short_desc>
          <delta_ts>2021-01-07 14:40:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>thomas.lendacky</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>thomas.lendacky</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202008</cf_release_observed>
    
    <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14488</commentid>
    <comment_count>0</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-12-07 16:08:49 +0000</bug_when>
    <thetext>An embargo is not required for these mitigations, since the problems are commonly known. The following paper documents the attacks:

  https://arxiv.org/pdf/2010.07094.pdf

Mitigations are needed to validate the hypervisor supplied encryption bit position, checking if a #VC was taken early in boot even though the SEV-ES feature is not indicated and ensuring MMIO under SEV-ES is being performed against unencrypted data.

The first mitigation is to validate the encryption bit position as reported by the hypervisor through CPUID. Once validated, the value will be cached and propagated through boot phases from SEC to DXE without having to reference the CPUID information again.

The second mitigation is a simple check to see if the #VC handler was invoked even though the hypervisor has indicated that SEV-ES is not supported.

The final mitigation is a simple check to validate that the address range being used for MMIO is to unencrypted memory. This prevents the hypervisor from marking regular RAM as MMIO (setting a reserved bit in the nested page table entry) and retrieving data from an encrypted region or setting data in an encrypted region. When an MMIO is to be performed, the page table entry of the target address will be checked to be sure that it is an unencrypted memory range.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14489</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-07 20:28:50 +0000</bug_when>
    <thetext>Opening up the ticket per Tom&apos;s comment#0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14510</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 20:29:34 +0000</bug_when>
    <thetext>Tom takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14585</commentid>
    <comment_count>3</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-12-15 16:19:41 +0000</bug_when>
    <thetext>v1:
  https://edk2.groups.io/g/devel/message/68900</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14755</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-07 08:54:55 +0000</bug_when>
    <thetext>v2:

[edk2-devel] [PATCH v2 00/15] SEV-ES security mitigations

https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00346.html
https://edk2.groups.io/g/devel/message/69858
msgid: &lt;cover.1609968101.git.thomas.lendacky@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14757</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-07 14:13:23 +0000</bug_when>
    <thetext>v3:

[edk2-devel] [PATCH v3 00/15] SEV-ES security mitigations

https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00435.html
https://edk2.groups.io/g/devel/message/69949
msgid: &lt;cover.1610045305.git.thomas.lendacky@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14758</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-07 14:40:53 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #5)
&gt; v3:
&gt; 
&gt; [edk2-devel] [PATCH v3 00/15] SEV-ES security mitigations
&gt; 
&gt; https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg00435.html
&gt; https://edk2.groups.io/g/devel/message/69949
&gt; msgid: &lt;cover.1610045305.git.thomas.lendacky@amd.com&gt;

Merged as commit range 55ee36b0c490..85b8eac59b8c, via &lt;https://github.com/tianocore/edk2/pull/1317&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3593</bug_id>
          
          <creation_ts>2021-08-26 05:50:02 +0000</creation_ts>
          <short_desc>OVMF: use qemu firmware config instead of cmos for memory detection</short_desc>
          <delta_ts>2021-12-16 04:31:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gerd Hoffmann">kraxel</reporter>
          <assigned_to name="Gerd Hoffmann">kraxel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17087</commentid>
    <comment_count>0</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2021-08-26 05:50:02 +0000</bug_when>
    <thetext>qemu 1.7+ provides the etc/e820 firmware config file with a memory map.
ovmf already uses it to detect memory above 4G.
ovmf should use it for memory below 4G too,
for consistency reasons and to remove the dependency on cmos.

We could keep the cmos support as fallback, to continue supporting qemu
version 1.6 and older, or remove completely remove cmos support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17197</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-07 23:17:42 +0000</bug_when>
    <thetext>Gerd: will you take it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17205</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-08 01:55:29 +0000</bug_when>
    <thetext>Gerd takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18013</commentid>
    <comment_count>3</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2021-12-16 04:31:18 +0000</bug_when>
    <thetext>merged (#2297).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3867</bug_id>
          
          <creation_ts>2022-03-13 23:23:38 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: BaseFspCommonLib Support for X64 Build</short_desc>
          <delta_ts>2022-03-22 04:12:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ted.kuo</reporter>
          <assigned_to>ted.kuo</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>mhaeuser</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18600</commentid>
    <comment_count>0</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-03-13 23:23:38 +0000</bug_when>
    <thetext>Currently BaseFspCommonLib only supports IA32, adding support for X64 Build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18604</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-15 21:37:11 +0000</bug_when>
    <thetext>Ted is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18663</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-03-22 04:12:51 +0000</bug_when>
    <thetext>commit ec0b54849b23efa25caf0055b0eef8bf9b4dec98
Author: Kuo, Ted &lt;ted.kuo@intel.com&gt;
Date:   Mon Mar 14 12:22:38 2022 +0800

    IntelFsp2Pkg: BaseFspCommonLib Support for X64

    REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3867
    Add BaseFspCommonLib Support for X64.

    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Cc: Ashraf Ali S &lt;ashraf.ali.s@intel.com&gt;
    Signed-off-by: Ted Kuo &lt;ted.kuo@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3248</bug_id>
          
          <creation_ts>2021-03-08 11:50:59 +0000</creation_ts>
          <short_desc>Add Standalone MM support to AcpiSmm in MinPlatformPkg</short_desc>
          <delta_ts>2021-04-07 14:49:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15235</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-03-08 11:50:59 +0000</bug_when>
    <thetext>AcpiSmm performs the responsibility of enabling ACPI (setting SCI_EN in PM1_CNT). The module handles registration of the SW SMI that will be invoked by the OS using the ACPI enable value in FADT. The module allows board-specific logic to be invoked for ACPI enable/disable through the BoardAcpiEnableLib.

This functionality is needed on a Standalone MM boot as well, so a Standalone MM counterpart of AcpiSmm should be added.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15239</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-08 20:43:28 +0000</bug_when>
    <thetext>Michael is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15240</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-03-08 20:48:54 +0000</bug_when>
    <thetext>V2 is on the mailing list: https://edk2.groups.io/g/devel/message/72541</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15546</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-04-07 14:48:18 +0000</bug_when>
    <thetext>Submitted to edk2-platforms in the following commit:
https://github.com/tianocore/edk2-platforms/commit/325097364dbdbc7b9311c723372e4e36a2f0012e#diff-c78ffe19571018fbc93a78873969046fe1a80c3d21e5d20fbb2ca17c7c53a144</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15547</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-04-07 14:49:04 +0000</bug_when>
    <thetext>With patch submitted, the issue is resolved.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3739</bug_id>
          
          <creation_ts>2021-11-16 22:16:47 +0000</creation_ts>
          <short_desc>Update all C/H files in edk2 repo to use DEBUG_* defines instead of EFI_D_* defines</short_desc>
          <delta_ts>2022-01-14 20:11:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3737</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
    
    <cf_package>ArmPlatformPkg</cf_package>
    
    <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>CryptoPkg</cf_package>
    
    <cf_package>DynamicTablesPkg</cf_package>
    
    <cf_package>EmbeddedPkg</cf_package>
    
    <cf_package>EmulatorPkg</cf_package>
    
    <cf_package>FatPkg</cf_package>
    
    <cf_package>FmpDevicePkg</cf_package>
    
    <cf_package>IntelFsp2Pkg</cf_package>
    
    <cf_package>IntelFsp2WrapperPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
    
    <cf_package>PcAtChipsetPkg</cf_package>
    
    <cf_package>RedfishPkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
    
    <cf_package>SignedCapsulePkg</cf_package>
    
    <cf_package>SourceLevelDebugPkg</cf_package>
    
    <cf_package>StandaloneMmPkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
    
    <cf_package>UefiPayloadPkg</cf_package>
    
    <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17775</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-16 22:16:47 +0000</bug_when>
    <thetext>The ECC tool requires that the DEBUG_* defines be used
in DEBUG() macros.

ECC only scans file that have changes so there is still lingering
use of EFI_D_*.  Update all C/H files to use DEBUG_* defines instead.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17776</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-16 22:18:12 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17777</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-16 22:19:06 +0000</bug_when>
    <thetext>This issue was highlighted when applying uncrustify.

As a result the uncrustify update depends on this change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17778</commentid>
    <comment_count>3</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2021-11-17 06:13:00 +0000</bug_when>
    <thetext>Quick ocular inspection suggests

find * -type f | xargs sed -i &apos;s/EFI_D_/DEBUG_/g&apos;

does the right thing, apart from MdePkg/Include/Library/DebugLib.h

Are you already on this, or should I send a set out?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18153</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:11:10 +0000</bug_when>
    <thetext>This change was included in the uncrustify patch series
that was merged in the following PR:

    https://github.com/tianocore/edk2/pull/2242

This patch series is composed of 72 commits.  Push range: 
    https://github.com/tianocore/edk2/pull/2242/commits/8c2820c0502820d957b200f9d7ae3e15ecc6368e
    ...
    https://github.com/tianocore/edk2/pull/2242/commits/e0f4416242c7c6b7d06d8939f45da837df06a116

============================================================
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3737
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3767
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3760
REF: https://bugzilla.tianocore.org/show_bug.cgi?id=3739

* Update all use of EFI_D_* defines in DEBUG() macros to DEBUG_* defines.
* Update all use of &apos;, OPTIONAL&apos; to &apos; OPTIONAL,&apos; for function params.
* Change complex DEBUG_CODE() to DEBUG_CODE_BEGIN/END()
* Apply uncrustify changes to all package .c/.h files(BaseTools excluded)

devel@edk2.groups.io discussions:
* https://edk2.groups.io/g/devel/topic/uncrustify_conversion/87414953?p=,,,20,0,0,0::recentpostdate/sticky,,,20,2,0,87414953,previd=1638890440315310506,nextid=1638842194018157807&amp;previd=1638890440315310506&amp;nextid=1638842194018157807
* https://edk2.groups.io/g/devel/message/84132
* https://edk2.groups.io/g/devel/message/84112
* https://edk2.groups.io/g/devel/message/84074

Compare Build Results across all commits in this PR
* Detects any binary differences across entire patch series (obj, lib, dll, efi, ffs, fv, fd)
* repo: https://github.com/mdkinney/edk2
* ref1: 8c2820c0502820d957b200f9d7ae3e15ecc6368e
* ref2: e0f4416242c7c6b7d06d8939f45da837df06a116
* 30 VS2019 build comparisons. Pass 100%.  No binary differences detected.
* 40 GCC5 build comparisons. Pass 100%.    No binary differences detected.
* https://github.com/mdkinney/edk2/actions/runs/1550132292

Cc: Andrew Fish afish@apple.com
Cc: Leif Lindholm leif@nuviainc.com
Cc: Michael D Kinney michael.d.kinney@intel.com
Cc: Michael Kubacki michael.kubacki@microsoft.com</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3615</bug_id>
          
          <creation_ts>2021-09-10 03:11:06 +0000</creation_ts>
          <short_desc>Need to add debug message for indicating IBB is successfully verified OBB</short_desc>
          <delta_ts>2021-11-26 10:13:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yang, Longlong">longlong.yang</reporter>
          <assigned_to name="Yang, Longlong">longlong.yang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>longl.yang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17233</commentid>
    <comment_count>0</comment_count>
    <who name="Yang, Longlong">longlong.yang</who>
    <bug_when>2021-09-10 03:11:06 +0000</bug_when>
    <thetext>Debug message should be added for indicating IBB is successfully verifying the OBB.

\Edk2\SecurityPkg\FvReportPei\FvReportPei.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17262</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-13 21:34:52 +0000</bug_when>
    <thetext>Longlong takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17264</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-13 21:36:12 +0000</bug_when>
    <thetext>*** Bug 3614 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17854</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:13:52 +0000</bug_when>
    <thetext>Fix at 542cba73d21b7bcc1e3852a9d9843d5fffc2d173</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3015</bug_id>
          
          <creation_ts>2020-10-20 01:28:08 +0000</creation_ts>
          <short_desc>Support 5 level paging for mInternalCr3</short_desc>
          <delta_ts>2020-12-01 20:45:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>w.sheng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14047</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-10-20 01:28:08 +0000</bug_when>
    <thetext>When use mInternalCr3, GetPageTableEntry() get the 5 level paging state by hardware Cr4.Bits.LA57. But it should use the paging level state when create mInternalCr3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14124</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 21:57:57 +0000</bug_when>
    <thetext>Wei is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14181</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-11-02 23:18:21 +0000</bug_when>
    <thetext>If mInternalCr3 is non zero, it will use the page table from mInternalCr3.
And it will use mInternalIs5LevelPaging to reflect the page table type.
If use page table from CR3, reflect the page table type by CR4 LA57 bit.

PiCpuSmmEntry() will generate the page table of SMM shack memory.
If CET feature is enabled, it also includes the SMM shadows shack memory.
And we need to set some attributes on SMM shadows shack memory
 in PiCpuSmmEntry() when CET feature is enabled.
Since the page table of SMM shack memory is used in SMI entry, and it does not
 set to CR3 in PiCpuSmmEntry(). We use mInternalCr3 as page table root
 when PiCpuSmmEntry() calls ConvertMemoryPageAttributes(). We need to use
 mInternalIs5LevelPaging determining whether 5-level paging is enabled or not.
If mInternalCr3 is zero, ConvertMemoryPageAttributes() will use the page table
 in CR3, and refects the page table type by CR4 LA57 bit.

It is a bug fix when enable CET feature with 5 level paging.
https://bugzilla.tianocore.org/show_bug.cgi?id=1521
https://bugzilla.tianocore.org/show_bug.cgi?id=1946</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14457</commentid>
    <comment_count>3</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-12-01 20:45:10 +0000</bug_when>
    <thetext>The patch is merged.
https://github.com/tianocore/edk2/commit/404250c8f77d09077321766602c3118cec7f6ecd#diff-046f96e518d3e1cc29af30e1e2766e8ccbfaef1465cd8fe7fcc167b1a45fcb02</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3510</bug_id>
          
          <creation_ts>2021-07-28 10:53:21 +0000</creation_ts>
          <short_desc>OVMF: The TPM 2 platform hierarchy must be disabled</short_desc>
          <delta_ts>2021-09-13 21:14:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3499</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Stefan Berger">stefanb</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>dick_wilkins</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>marcandre.lureau</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16710</commentid>
    <comment_count>0</comment_count>
    <who name="Stefan Berger">stefanb</who>
    <bug_when>2021-07-28 10:53:21 +0000</bug_when>
    <thetext>Per the TCG firmware specification &quot;TCG PC Client Platform  Firmware Profile Specification&quot; the TPM 2 platform hierarchy needs to be disabled or a random password set and discarded before the firmware passes control to the next stage bootloader or kernel.

Current specs are here: https://trustedcomputinggroup.org/wp-content/uploads/TCG_PCClient_PFP_r1p05_v22_02dec2020.pdf

Section 11 states:
&quot;Platform Firmware MUST protect access to the Platform Hierarchy and prevent access to the platform hierarchy by non-manufacturer-controlled components. &quot;

Ideally the bugfix would be applied to a recent stable branch as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16712</commentid>
    <comment_count>1</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2021-07-28 11:08:43 +0000</bug_when>
    <thetext>This issue has previously been reported and is in the hands of the Infosec team. It does need to be resolved ASAP but discussion should continue in bug 3499.

*** This bug has been marked as a duplicate of bug 3499 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16777</commentid>
    <comment_count>2</comment_count>
    <who name="Stefan Berger">stefanb</who>
    <bug_when>2021-08-04 14:25:44 +0000</bug_when>
    <thetext>(In reply to Dick Wilkins from comment #1)
&gt; This issue has previously been reported and is in the hands of the Infosec
&gt; team. It does need to be resolved ASAP but discussion should continue in bug
&gt; 3499.

What does &apos;in the hands of the Infosec team&apos; mean? They will implement the fix?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17253</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-09-13 12:59:16 +0000</bug_when>
    <thetext>Sample code in SecurityPkg: TcgPlatformDxe/Pei.
https://bugzilla.tianocore.org/show_bug.cgi?id=3499


First wave checked in:
PR - https://github.com/tianocore/edk2/pull/1968
Git Hash: 3b69fcf5f849021aa3bc810f8100ea71c03019e5..610d8073f29f30aa2f9dd58fe9d59e0dc979d085


OvmfPkg update will be in next wave.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17256</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-13 21:14:30 +0000</bug_when>
    <thetext>It has been fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3400</bug_id>
          
          <creation_ts>2021-05-18 01:21:30 +0000</creation_ts>
          <short_desc>Movierulz</short_desc>
          <delta_ts>2021-05-25 22:06:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Other</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc>https://www.technicalhosts.com/movierulz-vpn-2021-watch-hd-movies-for-free-in-movierulz-com/</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>amaraane2108</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16089</commentid>
    <comment_count>0</comment_count>
    <who name="">amaraane2108</who>
    <bug_when>2021-05-18 01:21:30 +0000</bug_when>
    <thetext>At the first they are using the domain name Movierulz.com after they will change the website names various domain due to it was the illegal,So they have changed their domains like 2movierulz, 3movierulz, 4movierulz and 6movierulz having the movierulz.vpn.
https://www.technicalhosts.com/movierulz-vpn-2021-watch-hd-movies-for-free-in-movierulz-com/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16156</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-05-25 22:06:25 +0000</bug_when>
    <thetext>Not a Tianocore related issue</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3890</bug_id>
          
          <creation_ts>2022-04-01 13:00:35 +0000</creation_ts>
          <short_desc>Fix VS2019 pipeline builds</short_desc>
          <delta_ts>2022-04-04 10:40:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18741</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-01 13:00:35 +0000</bug_when>
    <thetext>Pipelines are currently building against VS2019 and use the &quot;windows-latest&quot; VM image in Azure Pipelines. The &quot;windows-latest&quot; image recently moved its toolchain to VS2022, so VS2019 is no longer found.

To immediately address the issue with no change in build behavior, the YAML files in the repository need to be updated from &quot;windows-latest&quot; to &quot;windows-2019&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18742</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-01 13:13:20 +0000</bug_when>
    <thetext>v1 series: https://edk2.groups.io/g/devel/message/88352</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18745</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-01 21:33:40 +0000</bug_when>
    <thetext>V2 series: https://edk2.groups.io/g/devel/message/88365</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18752</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-04 10:40:20 +0000</bug_when>
    <thetext>VS2019 pipelines are working after the v2 patch series push.

The Visual Studio pipelines should be updated to VS2022 in the near future. That work is tracked here: https://bugzilla.tianocore.org/show_bug.cgi?id=3879</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3272</bug_id>
          
          <creation_ts>2021-03-21 22:08:03 +0000</creation_ts>
          <short_desc>ImageIndex need be corrected in CheckForSupportGetImage</short_desc>
          <delta_ts>2021-05-10 06:43:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="eric.jin">eric.jin</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>gaoliming</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15389</commentid>
    <comment_count>0</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2021-03-21 22:08:03 +0000</bug_when>
    <thetext>The goal of the Support Routine: CheckForSupportGetImage is to detect the current FMP instance&apos;s capability for supporting GetImage().

In current code, &quot;ImageIndex = 0&quot; is the input parameter, but it is inconsistent with spec -&quot;A unique number identifying the firmware image(s) within the device. The number is between 1 and DescriptorCount.&quot;

It is a bug and need the fix.
The similar errors exist in CheckForSupportSetImage/CheckForSupportCheckImage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15390</commentid>
    <comment_count>1</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2021-03-21 22:09:54 +0000</bug_when>
    <thetext>The file:
uefi-sct\SctPkg\TestCase\UEFI\EFI\Protocol\FirmwareManagement\BlackBoxTest\FirmwareManagementBBTestConformance.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15471</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-30 21:43:14 +0000</bug_when>
    <thetext>Eric, who will fix it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15970</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-10 06:43:58 +0000</bug_when>
    <thetext>Commit da461e14fe86 (&quot;ImageIndex need be corrected to range 1 ~ DescriptorCount.&quot;) was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3755</bug_id>
          
          <creation_ts>2021-11-30 07:22:30 +0000</creation_ts>
          <short_desc>Displaying SMBIOS Type38 fields in smbiosview command in formatted manner</short_desc>
          <delta_ts>2023-01-30 00:13:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>sainadhn</reporter>
          <assigned_to>sainadhn</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>gayathrit</cc>
    
    <cc>prakashk</cc>
    
    <cc>sainadhn</cc>
    
    <cc>srinivasanm</cc>
    
    <cc>sundaresans</cc>
    
    <cc>vasudevans</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17869</commentid>
    <comment_count>0</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2021-11-30 07:22:30 +0000</bug_when>
    <thetext>In smbiosview command in shell, below are the fields of SMBIOS Type38 table which can be displayed in formatted manner.
1. Base Address
1. IPMI Specification Version.
2. NV Storage Device Address.

Base Address:
As per spec, the value in Base Address field of SMBIOS type38 table should be right shifted by 1 if the interface type is SSIF. In DmiDecode, the value in Base Address field is displayed by right shifting by 1 if the interface type is SSIF. Why can&apos;t it be printed as same in EDKII Shell. 
I have attached the DmiDecode code for printing SMBIOS Type38 Base address. 

static void dmi_ipmi_base_address(u8 type, const u8 *p, u8 lsb)
{
    if (type == 0x04) /* SSIF */
	{
	    pr_attr(&quot;Base Address&quot;, &quot;0x%02X (SMBus)&quot;, (*p) &gt;&gt; 1);
	}

Also attaching the Dmidecode code link:
https://github.com/mirror/dmidecode/blob/master/dmidecode.c

IPMI Specification Version:
If the value in IPMI Specification Version field is 15H, it means that the version of IPMI specification is 1.5. Why can&apos;t it be displayed as 1.5 instead of displaying as 15h in EDKII Shell. 

NV Storage Device Address:
If the value in NV Storage Device Address field is 0xFF, it means that No storage device is Present. Why can&apos;t it be displayed as &quot;No Storage Device Present&quot; instead of displaying 0xFF in EDKII Shell.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17962</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-12-07 21:56:27 +0000</bug_when>
    <thetext>Sainadhn: will you provide the patch to support it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17967</commentid>
    <comment_count>2</comment_count>
      <attachid>898</attachid>
    <who name="">sainadhn</who>
    <bug_when>2021-12-08 05:55:19 +0000</bug_when>
    <thetext>Created attachment 898
Patch to display SMBIOS Type38 table values in formatted manner in Shell</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18038</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-12-21 19:54:55 +0000</bug_when>
    <thetext>can you send the patch to devel@edk2.groups.io for review?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18058</commentid>
    <comment_count>4</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2021-12-31 01:09:55 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #3)
&gt; can you send the patch to devel@edk2.groups.io for review?

I have sent the patch to devel@edk2.groups.io for review using GIT send-email command.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18077</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-04 21:42:38 +0000</bug_when>
    <thetext>The patch has been sent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19332</commentid>
    <comment_count>6</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-07-26 12:47:40 +0000</bug_when>
    <thetext>gaoliming:

Please let us know the current status regarding the patch changes. When can we expect the changes to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19427</commentid>
    <comment_count>7</comment_count>
    <who name="">sainadhn</who>
    <bug_when>2022-08-23 23:41:34 +0000</bug_when>
    <thetext>gaoliming:

Please let us know the current status of this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19774</commentid>
    <comment_count>8</comment_count>
    <who name="Prakash Kashivishwanathan">prakashk</who>
    <bug_when>2022-10-17 08:38:12 +0000</bug_when>
    <thetext>Hi Gaoliming,

kindly let us know the review status of this issue.

Thanks,
Prakash K</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20929</commentid>
    <comment_count>9</comment_count>
    <who name="Prakash Kashivishwanathan">prakashk</who>
    <bug_when>2023-01-30 00:13:02 +0000</bug_when>
    <thetext>Changes merged into master through below commit.

https://github.com/tianocore/edk2/commit/6c1988af7683f3234dfd06a6a99deb3ea6946c39.

Thanks,
Prakash K</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>898</attachid>
            <date>2021-12-08 05:55:19 +0000</date>
            <delta_ts>2021-12-08 05:55:19 +0000</delta_ts>
            <desc>Patch to display SMBIOS Type38 table values in formatted manner in Shell</desc>
            <filename>Shell_Changes.zip</filename>
            <type>text/plain</type>
            <size>35546</size>
            <attacher>sainadhn</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3531</bug_id>
          
          <creation_ts>2021-08-05 10:16:40 +0000</creation_ts>
          <short_desc>TestPointCheckLib: SMM Communicate MessageLength is invalid</short_desc>
          <delta_ts>2021-08-11 21:38:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16792</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 10:16:40 +0000</bug_when>
    <thetext>This change modified the MessageLength field of EFI_MM_COMMUNICATE_HEADER as defined in MdePkg/Include/Protocol/MmCommunication.h:
  https://bugzilla.tianocore.org/show_bug.cgi?id=3398

The MinPlatformPkg code needs to be updated to be compliant with this change (that is in edk2/master). Without doing so, MinPlatformPkg currently fails to build:

DxeTestPointCheckLib.c:

\edk2-platforms\Platform\Intel\MinPlatformPkg\Test\Library\TestPointCheckLib\DxeTestPointCheckLib.c(623): error C2220: warning treated as error - no &apos;object&apos; file generated
\edk2-platforms\Platform\Intel\MinPlatformPkg\Test\Library\TestPointCheckLib\DxeTestPointCheckLib.c(623): warning C4244: &apos;=&apos;: conversion from &apos;UINT64&apos; to &apos;UINTN&apos;, possible loss of data

TestPointStubDxe.c:

\edk2-platforms\Platform\Intel\MinPlatformPkg\Test\TestPointStubDxe\TestPointStubDxe.c(125): error C2220: warning treated as error - no &apos;object&apos; file generated
\edk2-platforms\Platform\Intel\MinPlatformPkg\Test\TestPointStubDxe\TestPointStubDxe.c(125): warning C4244: &apos;=&apos;: conversion from &apos;UINT64&apos; to &apos;UINTN&apos;, possible loss of data
\edk2-platforms\Platform\Intel\MinPlatformPkg\Test\TestPointStubDxe\TestPointStubDxe.c(158): warning C4244: &apos;=&apos;: conversion from &apos;UINT64&apos; to &apos;UINTN&apos;, possible loss of data</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16800</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 11:03:55 +0000</bug_when>
    <thetext>V1 patch: https://edk2.groups.io/g/devel/message/78711

Sent in the larger patch series: https://edk2.groups.io/g/devel/message/78710</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16801</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-05 11:04:21 +0000</bug_when>
    <thetext>Moving to IN_PROGRESS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16883</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-08-11 21:38:29 +0000</bug_when>
    <thetext>Merged to edk2-platforms/master in the following commit: https://github.com/tianocore/edk2-platforms/commit/5b257da6dc74d393866d3c1e3d8293423ce54ab4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3427</bug_id>
          
          <creation_ts>2021-06-02 09:19:30 +0000</creation_ts>
          <short_desc>Build failure with GCC11</short_desc>
          <delta_ts>2021-06-02 12:56:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3417</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Guillaume GARDET">guillaume.gardet</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16240</commentid>
    <comment_count>0</comment_count>
    <who name="Guillaume GARDET">guillaume.gardet</who>
    <bug_when>2021-06-02 09:19:30 +0000</bug_when>
    <thetext>With EDK2 202105 and GCC11, I get the following error:

[   88s] brotli/c/dec/decode.c:2033:41: error: argument 2 of type &apos;const uint8_t *&apos; {aka &apos;const unsigned char *&apos;} declared as a pointer [-Werror=vla-parameter]
[   88s]  2033 |     size_t encoded_size, const uint8_t* encoded_buffer, size_t* decoded_size,
[   88s]       |                          ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~
[   88s] In file included from brotli/c/dec/decode.c:7:
[   88s] ./brotli/c/include/brotli/decode.h:204:19: note: previously declared as a variable length array &apos;const uint8_t[*decoded_size]&apos; {aka &apos;const unsigned char[*decoded_size]&apos;}
[   88s]   204 |     const uint8_t encoded_buffer[BROTLI_ARRAY_PARAM(encoded_size)],
[   88s]       |     ~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[   88s] brotli/c/dec/decode.c:2034:14: error: argument 4 of type &apos;uint8_t *&apos; {aka &apos;unsigned char *&apos;} declared as a pointer [-Werror=vla-parameter]
[   88s]  2034 |     uint8_t* decoded_buffer) {
[   88s]       |     ~~~~~~~~~^~~~~~~~~~~~~~
[   88s] In file included from brotli/c/dec/decode.c:7:
[   88s] ./brotli/c/include/brotli/decode.h:206:13: note: previously declared as a variable length array &apos;uint8_t[encoded_size]&apos; {aka &apos;unsigned char[encoded_size]&apos;}
[   88s]   206 |     uint8_t decoded_buffer[BROTLI_ARRAY_PARAM(*decoded_size)]);
[   88s]       |     ~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[   90s] cc1: all warnings being treated as errors
[   90s] make[2]: *** [../Makefiles/footer.makefile:21: brotli/c/dec/decode.o] Error 1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16243</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-02 12:56:38 +0000</bug_when>
    <thetext>Already tracked under &lt;https://bugzilla.tianocore.org/show_bug.cgi?id=3417&gt;, thanks.

*** This bug has been marked as a duplicate of bug 3417 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3913</bug_id>
          
          <creation_ts>2022-04-22 04:21:48 +0000</creation_ts>
          <short_desc>PcAtChipsetPkg: Change the flow of PcRtcInit().</short_desc>
          <delta_ts>2022-05-14 05:41:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="zhuoran.chao@intel.com">zhuoran.chao</reporter>
          <assigned_to name="zhuoran.chao@intel.com">zhuoran.chao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>PcAtChipsetPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18893</commentid>
    <comment_count>0</comment_count>
    <who name="zhuoran.chao@intel.com">zhuoran.chao</who>
    <bug_when>2022-04-22 04:21:48 +0000</bug_when>
    <thetext>The RTC register B (Hour Format bit) should be programmed right before the first time PcRtcSetTime is executed. Now, EDK sets RTC to its 24h mode. Then function ConvertRtcTimeToEfiTime converts the RTC time value to their 24h mode by checking the HF bit (1:24h mode,0:12h mode). And here lies the problem: the 12h mode data will not be converted in ConvertRtcTimeToEfiTime because the HF bit has already been set to 1 before ConvertRtcTimeToEfiTime.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18894</commentid>
    <comment_count>1</comment_count>
    <who name="zhuoran.chao@intel.com">zhuoran.chao</who>
    <bug_when>2022-04-22 04:26:42 +0000</bug_when>
    <thetext>Assign this bug to Chao Zhuoran</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18904</commentid>
    <comment_count>2</comment_count>
    <who name="zhuoran.chao@intel.com">zhuoran.chao</who>
    <bug_when>2022-04-25 22:26:25 +0000</bug_when>
    <thetext>Have sent the patch to devel@edk2.groups.io but no reply yet</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18953</commentid>
    <comment_count>3</comment_count>
    <who name="zhuoran.chao@intel.com">zhuoran.chao</who>
    <bug_when>2022-05-14 05:41:53 +0000</bug_when>
    <thetext>Patch merged: https://github.com/tianocore/edk2/pull/2862</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3788</bug_id>
          
          <creation_ts>2021-12-20 10:42:47 +0000</creation_ts>
          <short_desc>edk2 build instructions in wiki to be updated to remove references to Py2.7</short_desc>
          <delta_ts>2022-06-29 05:33:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18036</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-12-20 10:42:47 +0000</bug_when>
    <thetext>edk2 build process has broken with Python 2.7.x and it is not supported anymore.
The instructions in the wiki page needs to be updated to reflect the same.

&lt;&lt;&lt;extract from https://github.com/tianocore/tianocore.github.io/wiki/Windows-systems&gt;&gt;&gt;
The below instructions are suggesting users to download and install &gt;=py3.7
Compile Tools
For EDK II project developers on Windows with source BaseTools:
Create a workspace directory
Change to the workspace directory
Clone the EDK II project repository (See Download section above)
Example: git clone https://github.com/tianocore/edk2
Install Python37 or late version (https://www.python.org/) to run python tool from source
Compile BaseTools C source tools
Example:
Inside Git Bash
     $ git clone https://github.com/tianocore/edk2



But the instructions to compile Basetools as given below suggests the users to set the PYTHON_HOME to py2.7 which is ambiguous. 

&lt;&lt;&lt;extracted from https://github.com/tianocore/tianocore.github.io/wiki/Windows-systems&gt;&gt;&gt;

Compile BaseTools
Example:

Open Command prompt and CD C:\edk2:
     C:\edk2&gt; set PYTHON_HOME=C:\Python27
     C:\edk2&gt; edksetup.bat Rebuild

There may be references to py2.7 in other places as well and all of them needs to be replaced with the right version of the py3.x</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18080</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-01-04 21:46:30 +0000</bug_when>
    <thetext>Jayaprakash: can you provide the patch to update wiki page? And, send the patch to edk2 mail list for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18865</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-19 22:11:48 +0000</bug_when>
    <thetext>Include Bob.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19013</commentid>
    <comment_count>3</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-06-02 01:08:38 +0000</bug_when>
    <thetext>This issue has been confirmed. 
Need to created and submit a patch request to update the wiki page.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19061</commentid>
    <comment_count>4</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-06-09 23:50:25 +0000</bug_when>
    <thetext>Sent patch request for updating the wiki to edk2 mailing list for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19092</commentid>
    <comment_count>5</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-06-17 04:52:51 +0000</bug_when>
    <thetext>Any updates on the status of the patch submitted?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19153</commentid>
    <comment_count>6</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2022-06-29 05:33:02 +0000</bug_when>
    <thetext>Patch merged to the git repo.
Will be closing this BZ</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3178</bug_id>
          
          <creation_ts>2021-01-20 13:55:50 +0000</creation_ts>
          <short_desc>UEFI shell rebuild for edk2-stable202102</short_desc>
          <delta_ts>2023-01-03 04:21:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to>gaoliming</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14866</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-01-20 13:55:50 +0000</bug_when>
    <thetext>(
Related mailing list thread:

[edk2-devel] building the shell for edk2-stable202102
https://edk2.groups.io/g/devel/message/70557
https://www.redhat.com/archives/edk2-devel-archive/2021-January/msg01044.html
)

We&apos;ve last built the UEFI shell binary for edk2-stable202002 (i.e.,
almost 1 year ago):

  https://github.com/tianocore/edk2/releases/tag/edk2-stable202002

Note &quot;ShellBinPkg.zip&quot; under Assets -- there is no stable tag that is
(a) more recent and (b) whose Assets contain &quot;ShellBinPkg.zip&quot;.

Contents:

&gt;| Archive:  ShellBinPkg.zip
&gt;|   Length      Date    Time    Name
&gt;| ---------  ---------- -----   ----
&gt;|         0  03-06-2020 22:43   ShellBinPkg/MinUefiShell/
&gt;|         0  03-06-2020 22:41   ShellBinPkg/MinUefiShell/AArch64/
&gt;|    380928  03-06-2020 17:39   ShellBinPkg/MinUefiShell/AArch64/Shell.efi
&gt;|         0  03-06-2020 22:41   ShellBinPkg/MinUefiShell/Arm/
&gt;|    321568  03-06-2020 17:38   ShellBinPkg/MinUefiShell/Arm/Shell.efi
&gt;|         0  03-05-2020 09:01   ShellBinPkg/MinUefiShell/Ia32/
&gt;|    339424  03-05-2020 09:01   ShellBinPkg/MinUefiShell/Ia32/Shell.efi
&gt;|       643  03-06-2020 22:43   ShellBinPkg/MinUefiShell/MinUefiShell.inf
&gt;|         0  03-05-2020 09:01   ShellBinPkg/MinUefiShell/X64/
&gt;|    392352  03-05-2020 09:01   ShellBinPkg/MinUefiShell/X64/Shell.efi
&gt;|         0  03-06-2020 22:43   ShellBinPkg/UefiShell/
&gt;|         0  03-06-2020 22:41   ShellBinPkg/UefiShell/AArch64/
&gt;|    892928  03-06-2020 17:40   ShellBinPkg/UefiShell/AArch64/Shell.efi
&gt;|         0  03-06-2020 22:41   ShellBinPkg/UefiShell/Arm/
&gt;|    791360  03-06-2020 17:39   ShellBinPkg/UefiShell/Arm/Shell.efi
&gt;|         0  03-05-2020 09:01   ShellBinPkg/UefiShell/Ia32/
&gt;|    825184  03-05-2020 09:00   ShellBinPkg/UefiShell/Ia32/Shell.efi
&gt;|       643  03-06-2020 22:43   ShellBinPkg/UefiShell/UefiShell.inf
&gt;|         0  03-05-2020 09:01   ShellBinPkg/UefiShell/X64/
&gt;|    939648  03-05-2020 09:01   ShellBinPkg/UefiShell/X64/Shell.efi
&gt;|         0  03-06-2020 22:40   ShellBinPkg/
&gt;| ---------                     -------
&gt;|   4884678                     21 files

I request that we rebuild the shell for edk2-stable202102. Reasons:

(1) There are two small shell features minimally in the latest
    development cycle:

    https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning

    * add file buffering to the UEFI shell&apos;s COMP command
    https://bugzilla.tianocore.org/show_bug.cgi?id=3123

    * Shell: pathname / filename sorting
    https://bugzilla.tianocore.org/show_bug.cgi?id=3151

(2) The zip file listed above does not contain a RISC-V binary, and
    RISC-V has been an official UEFI and edk2 platform minimally since
    edk2-stable202005 /
    &lt;https://bugzilla.tianocore.org/show_bug.cgi?id=2672&gt;.

    In particular, the following two platforms in edk2-platforms include
    the shell (SUPPORTED_ARCHITECTURES = RISCV64):

    Platform/SiFive/U5SeriesPkg/FreedomU500VC707Board/U500.dsc
    Platform/SiFive/U5SeriesPkg/FreedomU540HiFiveUnleashedBoard/U540.dsc

Thanks
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14915</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-25 20:54:37 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20396</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:21:51 +0000</bug_when>
    <thetext>Almost two years later, the latest release for which edk2 has provided a UEFI shell binary remains edk2-stable202002. That&apos;s evidence that the request is not important; closing it as WONTFIX.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3670</bug_id>
          
          <creation_ts>2021-09-30 07:11:28 +0000</creation_ts>
          <short_desc>Step by step instructions to investigate the Cash app Transfer Failed circumstance:</short_desc>
          <delta_ts>2021-10-06 00:55:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc>https://www.cash-appsupport.com/blog/why-is-my-cash-app-transfer-failed/</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="markkoziel">markkoziel578</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>UEFI Platform Initialization Distribution Packaging Specificatio</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17419</commentid>
    <comment_count>0</comment_count>
    <who name="markkoziel">markkoziel578</who>
    <bug_when>2021-09-30 07:11:28 +0000</bug_when>
    <thetext>The appropriate examination of the Cash app Transfer Failed issues can simply help clients to emerge from the upsetting circumstance. The execution of the appropriate strategies is the essential thing to utilize the cash app successfully. the arrangement productivity matters a great deal to determine the installment issues through cash app account. This is the reason counseling the cash app specialists are significant under all conditions.

https://www.cash-appsupport.com/blog/why-is-my-cash-app-transfer-failed/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17442</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-10-06 00:55:34 +0000</bug_when>
    <thetext>Not a bug</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3947</bug_id>
          
          <creation_ts>2022-06-10 21:22:25 +0000</creation_ts>
          <short_desc>VM stuck at initializing guest display with Secure Boot build of OVMF</short_desc>
          <delta_ts>2022-06-21 21:48:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Tom Yan">tom.ty89</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19067</commentid>
    <comment_count>0</comment_count>
    <who name="Tom Yan">tom.ty89</who>
    <bug_when>2022-06-10 21:22:25 +0000</bug_when>
    <thetext>As title. I don&apos;t know if anything is going on behind, but the display just stuck at &quot;Guest has not initialized the display yet&quot;.

I also see these unless I do not use -M q35 or add ,smm=off to it:

KVM internal error. Suberror: 1
extra data[0]: 0x0000000000000000
extra data[1]: 0x0000000000000030
extra data[2]: 0x0000000000000184
extra data[3]: 0x0000000000000000
extra data[4]: 0x0000000000000000
extra data[5]: 0x0000000000000000
emulation failure
RAX=0000000000000000 RBX=ffffffffffffffff RCX=0000000000000000 RDX=0000000000000000
RSI=00000000068ec798 RDI=0000000006f495f0 RBP=0000000006f31ea0 RSP=0000000006f31e18
R8 =0000000000000000 R9 =0000000003041001 R10=000000000000003a R11=0000000006f47e98
R12=0000000006f31e98 R13=0000000000000001 R14=000000008000f880 R15=000000008000f840
RIP=00000000000a0000 RFL=00010246 [---Z-P-] CPL=0 II=0 A20=1 SMM=0 HLT=0
ES =0030 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
CS =0038 0000000000000000 ffffffff 00a09b00 DPL=0 CS64 [-RA]
SS =0030 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
DS =0030 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
FS =0030 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
GS =0030 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
LDT=0000 0000000000000000 0000ffff 00008200 DPL=0 LDT
TR =0000 0000000000000000 0000ffff 00008b00 DPL=0 TSS64-busy
GDT=     00000000069e2000 00000047
IDT=     00000000065b7018 00000fff
CR0=80010033 CR2=0000000000000000 CR3=0000000006c01000 CR4=00000668
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d00
Code=00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 &lt;00&gt; 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

qemu command:
qemu-system-x86_64 -enable-kvm -M q35 --bios path/to/code/var/combined/ovmf

I&apos;m using qemu 7.0.0 and kernel 5.18.3 on Arch. EDK2/OVMF is the 202205 tag/release.

The secure boot build of ovmf on Arch is built with a json that has &quot;smm-required&quot;. I also tested a build with that removed. Same (not similar, byte-exact identical same) error above.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19068</commentid>
    <comment_count>1</comment_count>
    <who name="Tom Yan">tom.ty89</who>
    <bug_when>2022-06-10 21:30:35 +0000</bug_when>
    <thetext>Hmm apparently the json doesn&apos;t really matter for the actual build process. I then removed -D SMM_REQUIRE from the actual build script (PKGBUILD). Not it doesn&apos;t stuck anymore. So it seems like either OVMF has some bug in SMM support, or the kernel/kvm or qemu (in my distro / upstream) does.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19069</commentid>
    <comment_count>2</comment_count>
    <who name="Tom Yan">tom.ty89</who>
    <bug_when>2022-06-10 21:52:07 +0000</bug_when>
    <thetext>By the way my research seems to tell me that -D SMM_REQUIRED seems to be a workaround because the relevant native driver/module of SMM was missing in OVMF. Is my interpretation correct? And if is, is the fact still true? Should we even build with -D SMM_REQUIRED anymore? (And is it a really bad thing to enable SB without having SMM?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19073</commentid>
    <comment_count>3</comment_count>
    <who name="Tom Yan">tom.ty89</who>
    <bug_when>2022-06-13 23:04:46 +0000</bug_when>
    <thetext>Hmm apparently the issue only occurs if I use the `--bios` approach. As long as I use the pflash drive approach, it works. (Whether CODE and VARS are in one single image and whether readonly=on is used do not matter.)

I suppose that more or less makes it an issue in qemu.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19111</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-06-21 21:48:34 +0000</bug_when>
    <thetext>pflash is the correct way to invoke qemu. this is not an issue, and close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3328</bug_id>
          
          <creation_ts>2021-04-12 11:21:46 +0000</creation_ts>
          <short_desc>DxeCore: PE code section protection uses raw file size</short_desc>
          <delta_ts>2024-03-06 13:15:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Marvin Häuser">mhaeuser</reporter>
          <assigned_to>gaoliming</assigned_to>
          <cc>benjamin.you</cc>
    
    <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kraxel</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>miki.demeter</cc>
    
    <cc>rschiron</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15608</commentid>
    <comment_count>0</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2021-04-12 11:21:46 +0000</bug_when>
    <thetext>PE/COFF image sections have two sizes, the &quot;raw&quot; size (i.e. the size section data occupies in a stored file) and &quot;virtual&quot; size (i.e. the size section data occupies in a loaded image). There is no strict relation between them, i.e. raw size can be lesser than, equal to, or greater than virtual size. As memory protection always works on loaded images, virtual size needs to be used to ensure adequate permissions. Yet, the current code uses the raw file size[1].

[1] https://github.com/tianocore/edk2/blob/2072c22a0d63c780b0cc6377f6d4ffb116ad6144/MdeModulePkg/Core/Dxe/Misc/MemoryProtection.c#L528</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15922</commentid>
    <comment_count>1</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-05-05 14:31:54 +0000</bug_when>
    <thetext>Moving this to CONFIRMED, per discussion in the 5/5 Infosec meeting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21105</commentid>
    <comment_count>2</comment_count>
      <attachid>1332</attachid>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2023-02-22 10:57:00 +0000</bug_when>
    <thetext>Created attachment 1332
suggested patch

Simple one-line fix, not applied for almost two years.
May I ask what the heck you are waiting for?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21106</commentid>
    <comment_count>3</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2023-02-22 11:24:51 +0000</bug_when>
    <thetext>Sorry Gerd, not terribly interested in working on this code. Applying red tape could fool people into believing it’s adequate afterwards. :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21108</commentid>
    <comment_count>4</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2023-02-23 02:34:02 +0000</bug_when>
    <thetext>(In reply to Marvin Häuser from comment #3)
&gt; Sorry Gerd, not terribly interested in working on this code.

Oh, that question was directed to bug assignee and SecurityPkg maintainer.
Caring about bugs, especially security bugs, is their duty IMHO.

Bug reporter also providing fixes is a nice-to-have,
but certainly not required.

&gt; Applying red tape could fool people into believing it’s adequate afterwards. :)

Yea, no doubt there is more, looking at the list of open security bugs there are multiple PE-related ones and I have my doubts that this is complete.

I guess your recommendation is to swap the complete image loader instead?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21110</commentid>
    <comment_count>5</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2023-02-23 04:55:33 +0000</bug_when>
    <thetext>Actually both interpretations are valid. While replacing the image loader also basically is mandatory - I got a “we don’t care about the details, just give us literally anything else” from multiple core contributors back then -, this sub-code in particular is its own design defect. Basically the notion of PE section permissions is ignored entirely and a heuristic is applied to divide the image into code (RX) and data (RW) segments, with no support for configurations like RNX whatsoever. I don’t remember the other issues with it, but I’m pretty sure there were more.

But yes, my image loader replacement proposal did fix this implicitly and is now maintained in a downstream fork, fixing this BZ, most of my other BZs, and more at: https://github.com/acidanthera/audk

Mainlining it was shelved after an uncontroversial no-op (w.r.t. the compiled result) patch with prerequisites was not merged after extensive discussion, one R-b, a ping by me, a ping by a colleague, and a real-world toolchain bug it was able to discover via the STATIC_ASSERTs (which also had its fix ignored at the time): https://edk2.groups.io/g/devel/topic/84909448

Please just unembargo and mark as WONTFIX.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22738</commentid>
    <comment_count>6</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2024-03-06 13:15:57 +0000</bug_when>
    <thetext>As recommended by Marvin, unembargo and mark as WONTFIX.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1332</attachid>
            <date>2023-02-22 10:57:00 +0000</date>
            <delta_ts>2023-02-22 10:57:00 +0000</delta_ts>
            <desc>suggested patch</desc>
            <filename>0001-MdeModulePkg-DxeCore-fix-code-section-protection.patch</filename>
            <type>text/plain</type>
            <size>1878</size>
            <attacher name="Gerd Hoffmann">kraxel</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3812</bug_id>
          
          <creation_ts>2022-01-21 23:40:34 +0000</creation_ts>
          <short_desc>Add PrmPkg</short_desc>
          <delta_ts>2022-04-05 21:19:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18195</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-01-21 23:40:34 +0000</bug_when>
    <thetext>Platform Runtime Mechanism (PRM) introduces the capability of moving platform-specific code out of SMM and into a code module that executes within the OS context. Moving this firmware to the OS context provides better transparency and mitigates the negative system impact currently accompanied with SMM solutions. Furthermore, the PRM code is packaged into modules with well-defined entry points, each representing a specific PRM functionality.

PRM firmware is maintained in a package called PrmPkg has been developed in edk2-staging: https://github.com/tianocore/edk2-staging/tree/PlatformRuntimeMechanism

More details about the PRM functionality and how to use the code proposed to be placed in PrmPkg within edk2 are available in the Readme.md file at the root of the PlatformRuntimeMechanism branch - https://github.com/tianocore/edk2-staging/blob/PlatformRuntimeMechanism/Readme.md.

This BZ proposes adding PrmPkg to edk2 since:
1. The PRM Specification is now available on uefi.org - https://uefi.org/sites/default/files/resources/Platform%20Runtime%20Mechanism%20-%20with%20legal%20notice.pdf
2. Official PRM ACPI support is pending for the ACPI 6.4 Specification release - https://uefi.org/node/4149
3. iASL has had support for the PlatformRtMechanism OpRegion since 20200528 and it is supported in recent versions of the ASL compiler
4. PRM has been introduced to the community through public conferences and there is interest in collaborating to leverage PRM and evolve it further (e.g. https://cfp.osfc.io/osfc2020/talk/MCJASB/)
5. Windows 11 supports PRM invocation through the ACPI specification defined PRM interface
6. Linux includes support for the PRMT ACPI table (https://github.com/torvalds/linux/commit/cefc7ca46235f01d5233e3abd4b79452af01d9e9#diff-42a4015f92f3ad2bbd7c32a6b41440b7d8a21464045130a2478ce6963bb2d73b)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18196</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-01-21 23:42:44 +0000</bug_when>
    <thetext>I am updating the content from edk2-staging/PlatformRuntimeMechanism for edk2/master in a patch series that I will share for review soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18668</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 21:17:07 +0000</bug_when>
    <thetext>Michael Kubacki is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18669</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-03-22 21:30:39 +0000</bug_when>
    <thetext>V1 patch series: https://edk2.groups.io/g/devel/message/87842</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18760</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-04 12:04:34 +0000</bug_when>
    <thetext>PR with patch series that has all feedback included and passes CI - https://github.com/tianocore/edk2/pull/2733</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18763</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2022-04-05 21:19:35 +0000</bug_when>
    <thetext>Merged in commits d2998af2117119d3db4a41f7907d0e6f22548cc2..a298a84478053872ed9da660a75f182ce81b8ddc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3202</bug_id>
          
          <creation_ts>2021-02-02 21:16:27 +0000</creation_ts>
          <short_desc>Add X64 build support to StandaloneMmPkg</short_desc>
          <delta_ts>2021-02-11 23:14:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14962</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 21:16:27 +0000</bug_when>
    <thetext>Several libraries have been updated to add support for X64 recently but the package itself does not support X64 build. The DSC should be updated to verify and build the code for X64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14963</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 21:26:09 +0000</bug_when>
    <thetext>I will send a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14982</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-02 22:58:42 +0000</bug_when>
    <thetext>V1 patch on the mailing list: https://edk2.groups.io/g/devel/message/71089</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15060</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-11 23:13:32 +0000</bug_when>
    <thetext>V2 patch on the mailing list: https://edk2.groups.io/g/devel/message/71592</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15061</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-02-11 23:14:07 +0000</bug_when>
    <thetext>Patch merged: https://github.com/tianocore/edk2/commit/641866ac42e41963105a8c42064e92686a001a71</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3689</bug_id>
          
          <creation_ts>2021-10-14 11:20:46 +0000</creation_ts>
          <short_desc>microvm: add support for virtio-mmio devices</short_desc>
          <delta_ts>2021-12-16 04:32:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gerd Hoffmann">kraxel</reporter>
          <assigned_to name="Gerd Hoffmann">kraxel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17549</commentid>
    <comment_count>0</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2021-10-14 11:20:46 +0000</bug_when>
    <thetext>Improves microvm support, in addition to the direkt kernel boot it is also possible to boot from virtio-mmio based storage (blk and scsi) and network.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17579</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-18 21:27:33 +0000</bug_when>
    <thetext>this one has been fixed.

*** This bug has been marked as a duplicate of bug 3597 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17663</commentid>
    <comment_count>2</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2021-11-03 10:06:49 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; this one has been fixed.
&gt; 
&gt; *** This bug has been marked as a duplicate of bug 3597 ***

No, that is a different issue.  microvm needs some code to actually load the fdt and also dsc changes to link in some drivers needed.

qemu version 6.2+ will provide a fdt (via fw_cfg) listing the virtio-mmio devices.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18014</commentid>
    <comment_count>3</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2021-12-16 04:32:06 +0000</bug_when>
    <thetext>Merged (#2295).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3091</bug_id>
          
          <creation_ts>2020-11-24 01:59:40 +0000</creation_ts>
          <short_desc>Add YAML support for package configuration</short_desc>
          <delta_ts>2021-05-17 00:10:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Loo Tung Lun">tung.lun.loo</reporter>
          <assigned_to name="Loo Tung Lun">tung.lun.loo</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>tung.lun.loo</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14410</commentid>
    <comment_count>0</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2020-11-24 01:59:40 +0000</bug_when>
    <thetext>Add support for YAML in addition to current BSF structure.
Configuration of YAML format output will be supported by an open source ConfigEditor. Reference to YAML code and test is done here @ https://github.com/mauricema/fsp_yaml_cfg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14411</commentid>
    <comment_count>1</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2020-11-24 02:01:17 +0000</bug_when>
    <thetext>Moving to confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14412</commentid>
    <comment_count>2</comment_count>
      <attachid>603</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2020-11-24 02:33:20 +0000</bug_when>
    <thetext>Created attachment 603
Patch to add 2 scripts for YAML support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14413</commentid>
    <comment_count>3</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2020-11-24 02:34:37 +0000</bug_when>
    <thetext>submitted patch in attachment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14649</commentid>
    <comment_count>4</comment_count>
      <attachid>624</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2020-12-22 02:53:37 +0000</bug_when>
    <thetext>Created attachment 624
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14650</commentid>
    <comment_count>5</comment_count>
      <attachid>625</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2020-12-22 02:54:27 +0000</bug_when>
    <thetext>Created attachment 625
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14705</commentid>
    <comment_count>6</comment_count>
      <attachid>632</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-01-04 20:35:07 +0000</bug_when>
    <thetext>Created attachment 632
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14870</commentid>
    <comment_count>7</comment_count>
      <attachid>638</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-01-21 00:50:57 +0000</bug_when>
    <thetext>Created attachment 638
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14911</commentid>
    <comment_count>8</comment_count>
      <attachid>641</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-01-25 02:00:51 +0000</bug_when>
    <thetext>Created attachment 641
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14927</commentid>
    <comment_count>9</comment_count>
      <attachid>642</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-01-27 06:13:04 +0000</bug_when>
    <thetext>Created attachment 642
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14928</commentid>
    <comment_count>10</comment_count>
      <attachid>643</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-01-27 09:07:45 +0000</bug_when>
    <thetext>Created attachment 643
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14938</commentid>
    <comment_count>11</comment_count>
      <attachid>644</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-02-01 03:07:33 +0000</bug_when>
    <thetext>Created attachment 644
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14942</commentid>
    <comment_count>12</comment_count>
      <attachid>645</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-02-01 05:38:55 +0000</bug_when>
    <thetext>Created attachment 645
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14943</commentid>
    <comment_count>13</comment_count>
      <attachid>646</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-02-01 06:08:29 +0000</bug_when>
    <thetext>Created attachment 646
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14946</commentid>
    <comment_count>14</comment_count>
      <attachid>647</attachid>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-02-01 20:44:20 +0000</bug_when>
    <thetext>Created attachment 647
IntelFsp2Pkg: Add YAML file generation support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15048</commentid>
    <comment_count>15</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-02-09 03:25:11 +0000</bug_when>
    <thetext>Patch pushed:
commit 273261126e30c46737736bff3ece64c4bd77bedd
Author: Loo Tung Lun &lt;tung.lun.loo@intel.com&gt;
Date:   Mon Feb 8 13:04:16 2021 +0800

    IntelFsp2Pkg: Add YAML file generation support

    REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3091

    Add support for YAML format file generation in addition
    to current BSF structure. Configuration of YAML format
    output will be supported by an open source ConfigEditor.

    Reference to YAML code, test and ConfigEditor is at
    https://github.com/joshloo/fsp_yaml_cfg/tree/master/Tools

    A unit test is also added in Tests folder. This test compares
    the generated yaml file against the expected output to know
    if it is constructing the yaml data structure as expected.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Cc: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Signed-off-by: Loo Tung Lun &lt;tung.lun.loo@intel.com&gt;
    Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16072</commentid>
    <comment_count>16</comment_count>
    <who name="Loo Tung Lun">tung.lun.loo</who>
    <bug_when>2021-05-17 00:10:10 +0000</bug_when>
    <thetext>patch merged</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>603</attachid>
            <date>2020-11-24 02:33:20 +0000</date>
            <delta_ts>2020-12-22 02:54:27 +0000</delta_ts>
            <desc>Patch to add 2 scripts for YAML support</desc>
            <filename>0001-IntelFsp2Pkg-add-YAML-support-in-addition-to-BSF-str.patch</filename>
            <type>text/plain</type>
            <size>126018</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>624</attachid>
            <date>2020-12-22 02:53:37 +0000</date>
            <delta_ts>2020-12-22 02:54:27 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>115013</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>625</attachid>
            <date>2020-12-22 02:54:27 +0000</date>
            <delta_ts>2021-01-04 20:35:07 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>115013</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>632</attachid>
            <date>2021-01-04 20:35:07 +0000</date>
            <delta_ts>2021-01-21 00:50:57 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>113775</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>638</attachid>
            <date>2021-01-21 00:50:57 +0000</date>
            <delta_ts>2021-01-25 02:00:51 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>69162</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>641</attachid>
            <date>2021-01-25 02:00:51 +0000</date>
            <delta_ts>2021-01-27 06:13:04 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>67984</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>642</attachid>
            <date>2021-01-27 06:13:04 +0000</date>
            <delta_ts>2021-01-27 09:07:45 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>67984</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>643</attachid>
            <date>2021-01-27 09:07:45 +0000</date>
            <delta_ts>2021-02-01 03:07:33 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>66265</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>644</attachid>
            <date>2021-02-01 03:07:33 +0000</date>
            <delta_ts>2021-02-01 05:38:55 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>100635</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>645</attachid>
            <date>2021-02-01 05:38:55 +0000</date>
            <delta_ts>2021-02-01 06:08:29 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>116399</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>646</attachid>
            <date>2021-02-01 06:08:29 +0000</date>
            <delta_ts>2021-02-01 20:44:20 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>115715</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>647</attachid>
            <date>2021-02-01 20:44:20 +0000</date>
            <delta_ts>2021-02-01 20:44:20 +0000</delta_ts>
            <desc>IntelFsp2Pkg: Add YAML file generation support</desc>
            <filename>0001-IntelFsp2Pkg-Add-YAML-file-generation-support.patch</filename>
            <type>text/plain</type>
            <size>116409</size>
            <attacher name="Loo Tung Lun">tung.lun.loo</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>3568</bug_id>
          
          <creation_ts>2021-08-17 09:49:39 +0000</creation_ts>
          <short_desc>Support ACPI 6.4 in DynamicTables FADT parser</short_desc>
          <delta_ts>2021-10-11 21:03:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chris Jones">christopher.jones</reporter>
          <assigned_to name="Chris Jones">christopher.jones</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16939</commentid>
    <comment_count>0</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-08-17 09:49:39 +0000</bug_when>
    <thetext>The ACPI 6.4 specification updated the FADT minor revision as it tracks the ACPI revision. The DynamicTables FADT generator needs to be updated to use Acpi64.h so it can generate FADT tables with the latest minor revision.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16940</commentid>
    <comment_count>1</comment_count>
    <who name="Chris Jones">christopher.jones</who>
    <bug_when>2021-08-17 10:08:34 +0000</bug_when>
    <thetext>Patch submitted to mailing list as: https://edk2.groups.io/g/devel/message/79429</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17050</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-24 22:05:45 +0000</bug_when>
    <thetext>Chris takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17485</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-11 21:03:20 +0000</bug_when>
    <thetext>The patch has been merged 06a326caf1259fc51e44ce4cb2361748bea371b2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3350</bug_id>
          
          <creation_ts>2021-04-21 09:49:31 +0000</creation_ts>
          <short_desc>About the URL of BoringSSL in CryptoPkg.</short_desc>
          <delta_ts>2022-03-08 22:18:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>myothers2014</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15756</commentid>
    <comment_count>0</comment_count>
    <who name="">myothers2014</who>
    <bug_when>2021-04-21 09:49:31 +0000</bug_when>
    <thetext>Hi all,
   What I report here is not a real issue actually, but it blocks the developers in China:
   when tried to set up submodules of EDK2, I always got failed on clone BoringSSL
from https://boringssl.googlesource.com/boringssl, this is because Google related websites are blocked in China:(.
   And I checked that EDK2 is using OpenSSL version 1.1.1j(52c587d60be67c337364b830dd3fdc15404a2f04), this version of OpenSSL uses the BoringSSL submodule with googlesource repository URL, but the latest version of OpenSSL does not contain BoringSSL submodule.
   So I have a request that is a little hard to say：would EDK2 upgrade the version of OpenSSL or shall we find a way to replace the current URL of BoringSSL(https://boringssl.googlesource.com/boringssl) with https://github.com/google/boringssl(most of the repositories on github can be accessed in China with no problem).
    I am very grateful if this request could be considered, and if so, developers in China may not only benefits from the EDK2 project itself, but also the other project like QEMU that depends on EDK2(projects that use EDK2 as a submodule are also meeting the same issue of BoringSSL for developers in China).
    Thank you very much!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15803</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-27 21:45:38 +0000</bug_when>
    <thetext>Suggest to use insteadof feature in local .gitconfig file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18580</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-08 22:18:48 +0000</bug_when>
    <thetext>this is not code issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3836</bug_id>
          
          <creation_ts>2022-02-14 21:12:25 +0000</creation_ts>
          <short_desc>IntelSiliconPkg/VTd: Fix to support IntelVTdDmarPei in 64bit</short_desc>
          <delta_ts>2022-03-13 21:41:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ted.kuo</reporter>
          <assigned_to>ted.kuo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jenny.huang</cc>
    
    <cc>rangasai.v.chaganty</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18361</commentid>
    <comment_count>0</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-02-14 21:12:25 +0000</bug_when>
    <thetext>Currently VtdIndex is defined as UINTN but the arg2 of the callback function is defined as UINT32. This will result in type incompatible when enable PEI in 64bit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18381</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-15 21:42:02 +0000</bug_when>
    <thetext>Kuo is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18599</commentid>
    <comment_count>2</comment_count>
    <who name="">ted.kuo</who>
    <bug_when>2022-03-13 21:41:34 +0000</bug_when>
    <thetext>SHA-1: 3c40bddded2c73cb6cad0a0c14be0a86e6985d32

* IntelSiliconPkg/VTd: Fix to support IntelVTdDmarPei in 64bit

REF:https://bugzilla.tianocore.org/show_bug.cgi?id=3836
Changed VtdIndex defined in PROCESS_DRHD_CALLBACK_FUNC from UINT32 to UINTN
to avoid type incompatible error when enable PEI in 64bit.

Cc: Sheng Wei &lt;w.sheng@intel.com&gt;
Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Cc: Rangasai V Chaganty &lt;rangasai.v.chaganty@intel.com&gt;
Cc: Jenny Huang &lt;jenny.huang@intel.com&gt;
Reviewed-by: Robert Kowalewski &lt;robert.kowalewski@intel.com&gt;
Reviewed-by: Sheng Wei &lt;w.sheng@intel.com&gt;
Signed-off-by: Ted Kuo &lt;ted.kuo@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3594</bug_id>
          
          <creation_ts>2021-08-26 17:01:51 +0000</creation_ts>
          <short_desc>gcc_[arm,aarch64]_linux_ext_dep.yaml should download GCC releases from Arm, not Linaro</short_desc>
          <delta_ts>2022-02-04 16:04:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="Rebecca Cran">rebecca</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17091</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-08-26 17:01:51 +0000</bug_when>
    <thetext>BaseTools/Bin/gcc_[arm,aarch64]_linux_ext_dep.yaml downloads GCC releases from https://releases.linaro.org/components/toolchain/binaries/7.4-2019.02 . 

As indicated in the URL, those builds are from 2019 because Linaro no longer do GCC releases, with that task having moved to Arm. 

The Arm GCC page is https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-a/downloads, with the latest release being 10.3-2021.07.

We should switch from Linaro to Arm.

I&apos;ve submitted a patch for review in https://edk2.groups.io/g/devel/message/79701 .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17094</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-26 21:17:17 +0000</bug_when>
    <thetext>Rebecca is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18240</commentid>
    <comment_count>2</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2022-02-04 16:04:55 +0000</bug_when>
    <thetext>This was fixed with commit 1ce6ceb75bc7b8c3f60c99e79a8373731d3509a4.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3488</bug_id>
          
          <creation_ts>2021-07-13 00:42:03 +0000</creation_ts>
          <short_desc>SMM memory management: Inspect memory guarded with pool headers</short_desc>
          <delta_ts>2022-05-12 21:08:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16610</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2021-07-13 00:42:03 +0000</bug_when>
    <thetext>Current free pool routine from PiSmmCore will inspect memory guard status for target buffer without considering pool headers. This could lead `IsMemoryGuarded` function to return incorrect results.

i.e. A 0 sized pool that is configured to be near tail guard page, it could cause the returned region points into a guard page, which is legal. However, trying to free this 0 sized pool will cause the routine here (https://github.com/tianocore/edk2/blob/fb5b6220a9718fc28ae67f317d3611214a05589c/MdeModulePkg/Core/PiSmmCore/Pool.c#L373) to access guard page, which leads to page fault.

Proposed change pushed here:
https://github.com/kuqin12/mu_basecore/tree/personal/kuqin/smm_hg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16620</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-13 21:38:47 +0000</bug_when>
    <thetext>Include Jiewen, Ray and Eric to reivew this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18611</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-15 21:55:49 +0000</bug_when>
    <thetext>Kun: will you contribute the patch to edk2 mail list?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18615</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-03-15 22:00:06 +0000</bug_when>
    <thetext>Hi Liming, Sure, I will send the patch out sometime this week.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18628</commentid>
    <comment_count>4</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-03-16 00:03:27 +0000</bug_when>
    <thetext>Patch series sent here: https://edk2.groups.io/g/devel/message/87618</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18709</commentid>
    <comment_count>5</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-03-24 15:28:15 +0000</bug_when>
    <thetext>Patch reviewed by Liming: https://edk2.groups.io/g/devel/message/87719. Do we still need more approvals?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18901</commentid>
    <comment_count>6</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-04-25 20:50:32 +0000</bug_when>
    <thetext>Patch also reviewed by Jian (https://edk2.groups.io/g/devel/message/89209).

Updated patch was sent here: https://edk2.groups.io/g/devel/message/89295.

Please let me know if we can merge it. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18951</commentid>
    <comment_count>7</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2022-05-12 21:08:12 +0000</bug_when>
    <thetext>Merged as https://github.com/tianocore/edk2/pull/2881: &lt;17702186b56209842e002235c29ffec5ed69745a&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3741</bug_id>
          
          <creation_ts>2021-11-18 09:27:41 +0000</creation_ts>
          <short_desc>Add FdtHwInfoParser library</short_desc>
          <delta_ts>2021-12-15 03:23:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="Pierre Gondois">pierre.gondois</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>DynamicTablesPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17784</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-11-18 09:27:41 +0000</bug_when>
    <thetext>The DynamicTablesPkg allows to dynamically generates ACPI tables at runtime. The ACPI tables are generated from information stored as Configuration Manager objects (CmObj).

The FdtHwInfoParser library will allow to create CmObj by parsing a Device Tree (DT). These CmObjs will then be used to generated ACPI tables.

Thus, the FdtHwInfoParser is essentially a Device Tree parser. The available parsers are for:
- Serial ports
- Generic times
- PCI
- Generic Interrupt Controller (GIC)
- BootArch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17785</commentid>
    <comment_count>1</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-11-18 09:29:19 +0000</bug_when>
    <thetext>A v1 of the serie is available at:
https://edk2.groups.io/g/devel/message/76967</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17819</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 22:00:08 +0000</bug_when>
    <thetext>Pierre takes platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17998</commentid>
    <comment_count>3</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2021-12-15 03:23:57 +0000</bug_when>
    <thetext>V4 at https://edk2.groups.io/g/devel/message/84585
Pushed at: 90ad4b3b3428deb4a38d7590b20dcfe2ba6c94b6..9006967c8d24f5d9585278fb6363b08f2118d424</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3554</bug_id>
          
          <creation_ts>2021-08-11 01:32:59 +0000</creation_ts>
          <short_desc>Remote Interpretation Services</short_desc>
          <delta_ts>2021-08-16 21:47:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="mcislanguage">mcislanguage</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>UDK 2014.SP1</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16871</commentid>
    <comment_count>0</comment_count>
    <who name="mcislanguage">mcislanguage</who>
    <bug_when>2021-08-11 01:32:59 +0000</bug_when>
    <thetext>The remote interpretation services help with clear and easy communication. The highly cost-effective method is part of many worlds. Have complete clarity with the remote interpretation services offered by MCIS Language Solutions. We charge very reasonably for our work.

Website : https://www.mcislanguages.com/interpretation/

Contact Details:

Address: 789 Don Mills Road – Suite 1010 North York, ON M3C 1T5 Canada

Email- info@mcis.on.ca

Phone:  1 (888) 990-9014</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16927</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-08-16 21:47:25 +0000</bug_when>
    <thetext>close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3744</bug_id>
          
          <creation_ts>2021-11-18 15:42:24 +0000</creation_ts>
          <short_desc>OvmfPkg: Remove unused print service driver</short_desc>
          <delta_ts>2021-12-29 14:32:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Philippe Mathieu-Daudé">f4bug</reporter>
          <assigned_to name="Philippe Mathieu-Daudé">f4bug</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17789</commentid>
    <comment_count>0</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2021-11-18 15:42:24 +0000</bug_when>
    <thetext>None of the OVMF platforms need the PrintDxe driver, so it can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17816</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-23 21:57:03 +0000</bug_when>
    <thetext>Philippe takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18057</commentid>
    <comment_count>2</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2021-12-29 14:32:19 +0000</bug_when>
    <thetext>Committed as 0f1d7477c0a86a31e2edede7d3a3c74087bb6e21.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3306</bug_id>
          
          <creation_ts>2021-04-07 13:59:15 +0000</creation_ts>
          <short_desc>Incorrect link in the Tianocore github wiki</short_desc>
          <delta_ts>2021-04-08 08:06:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Yaroslav Kurlaev">yaroslav.kurlaev</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15545</commentid>
    <comment_count>0</comment_count>
    <who name="Yaroslav Kurlaev">yaroslav.kurlaev</who>
    <bug_when>2021-04-07 13:59:15 +0000</bug_when>
    <thetext>This wiki page https://github.com/tianocore/tianocore.github.io/wiki/How-to-run-OVMF has the following link: https://github.com/tianocore/tianocore.github.io/wiki/How_to_build_OVMF which is a non-existent page. The correct link should be https://github.com/tianocore/tianocore.github.io/wiki/How-to-build-OVMF

I can&apos;t open a pull request because it&apos;s not possible for github wikis.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15560</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-08 08:05:44 +0000</bug_when>
    <thetext>I&apos;ve fixed the typo in:

https://github.com/tianocore/tianocore.github.io/wiki/How-to-run-OVMF/_compare/aac4095ac9309c0746bd5a8fa2cee3bf79cc1436...b0c000d9f3a26f9ad965db3693ae32b7bcb48cf9

(Note that the build &amp; run instructions may be severely out of date anyway; I don&apos;t spend time maintaining the contents of these articles otherwise. So this is really just the typo fix you suggested.)

Thanks.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3603</bug_id>
          
          <creation_ts>2021-09-02 15:33:31 +0000</creation_ts>
          <short_desc>UefiPayloadPkg: build warnings for IA32+X64 (GCC)</short_desc>
          <delta_ts>2021-11-26 10:15:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sumo">kingsumos</reporter>
          <assigned_to name="Dun Tan">dun.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17156</commentid>
    <comment_count>0</comment_count>
    <who name="Sumo">kingsumos</who>
    <bug_when>2021-09-02 15:33:31 +0000</bug_when>
    <thetext>Building for IA32+X64 (required for coreboot as it doen&apos;t supports pure X64 env) throws the following warnings:

build -a IA32 -a X64 -p UefiPayloadPkg/UefiPayloadPkg.dsc -b DEBUG -t GCC5 -D BOOTLOADER=COREBOOT

...

Active Platform          = /home/user/edk2/edk2-orig/UefiPayloadPkg/UefiPayloadPkg.dsc
...build: : warning: The PCD was not specified by any INF module in the platform for the given architecture.
        PCD: [gPcAtChipsetPkgTokenSpaceGuid.PcdRtcIndexRegister]
        Platform: [UefiPayloadPkg.dsc]
        Arch: [&apos;IA32&apos;]
build: : warning: The PCD was not specified by any INF module in the platform for the given architecture.
        PCD: [gPcAtChipsetPkgTokenSpaceGuid.PcdRtcTargetRegister]
        Platform: [UefiPayloadPkg.dsc]
        Arch: [&apos;IA32&apos;]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17190</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-07 23:13:39 +0000</bug_when>
    <thetext>@Ray, who will check this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17200</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2021-09-07 23:43:55 +0000</bug_when>
    <thetext>@Liming, I will take care of this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17265</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-13 21:37:08 +0000</bug_when>
    <thetext>Ray will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17856</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:15:07 +0000</bug_when>
    <thetext>Fix at bda3546c55e807c5d10ca9ecb5c664c184144c98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3995</bug_id>
          
          <creation_ts>2022-07-18 09:55:00 +0000</creation_ts>
          <short_desc>DSDT Parser does not warn if revision field is less than 2 on Arm</short_desc>
          <delta_ts>2022-08-29 05:06:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Edward Pickup">Edward.Pickup</reporter>
          <assigned_to name="Edward Pickup">Edward.Pickup</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19253</commentid>
    <comment_count>0</comment_count>
    <who name="Edward Pickup">Edward.Pickup</who>
    <bug_when>2022-07-18 09:55:00 +0000</bug_when>
    <thetext>As per the ACPI specification for DSDT block, if revision is less than 2 then all integers are restricted to 32 bits. This is a requirement for compatibility with versions of ACPI prior to 2.0

As per the Arm Base Boot requirements, platforms must conform to ACPI 6.3 or later, and legacy tables are not supported.

As such a warning should be raised by the DSDT parser if this field is less than 2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19286</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-07-19 21:52:35 +0000</bug_when>
    <thetext>Edward: where is DSDT parser module?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19311</commentid>
    <comment_count>2</comment_count>
    <who name="Edward Pickup">Edward.Pickup</who>
    <bug_when>2022-07-20 05:00:52 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #1)
&gt; Edward: where is DSDT parser module?

The DSDT parser can be found inShellPkg/Library/UefiShellAcpiViewCommandLib/Parsers/Dsdt/DsdtParser.c


I&apos;ve submitted a patch for this that can be found at https://edk2.groups.io/g/devel/message/91570</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19381</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-08-09 22:02:51 +0000</bug_when>
    <thetext>Edward.Pickup@arm.com is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19445</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-08-29 05:06:57 +0000</bug_when>
    <thetext>Merge at 4d83ee04f44a8dc9e6425a719b39c9d378730ca1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3548</bug_id>
          
          <creation_ts>2021-08-10 13:23:30 +0000</creation_ts>
          <short_desc>OPEN_MAX limit value 20 from StdLib/Include/sys/syslimits.h causes Python interpreter 3.6.8 to fail with error IOError: [Errno 24] Too many open files</short_desc>
          <delta_ts>2021-08-18 23:06:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Jayaprakash Nevara">n.jayaprakash</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16861</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-08-10 13:23:30 +0000</bug_when>
    <thetext>We have ported Python 3.6.8 to run on UEFI shell and as part of this porting effort encountered an issue related to Max Open Files limits set in the Standard C Library of UEFI through the header file 

StdLib/Include/sys/syslimits.h

#define OPEN_MAX 20

The Python interpreter is failing consistenly with the error &quot;OError: [Errno 24] Too many open files&quot;

We are in the process of making Python 3.6.8 port available to community through edk2-libc and we need to fix this issue in StdLib before that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16905</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-13 12:23:49 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16906</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-13 12:36:12 +0000</bug_when>
    <thetext>Patch review email

https://edk2.groups.io/g/devel/message/79283</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16984</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 23:06:28 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2-libc/commit/cc45b5cc3decaafaccb9435a4c2224d9464560a9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3637</bug_id>
          
          <creation_ts>2021-09-17 22:51:19 +0000</creation_ts>
          <short_desc>Trim.py doesn&apos;t always properly report encoding error</short_desc>
          <delta_ts>2024-09-04 20:56:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="genaro saucedo tejada">genaro.saucedo.tejada</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>genaro.saucedo.tejada</cc>
    
    <cc>prasanthr</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable202102</cf_release_observed>
    
    <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17304</commentid>
    <comment_count>0</comment_count>
    <who name="genaro saucedo tejada">genaro.saucedo.tejada</who>
    <bug_when>2021-09-17 22:51:19 +0000</bug_when>
    <thetext>Trim.py fails to provide meaningful information regarding what failed when opening a file.

For instance when nested try fails in line 281:
            try:
                with open(IncludeFile, &quot;r&quot;) as File:
                    F = File.readlines()
            except:
                with codecs.open(IncludeFile, &quot;r&quot;, encoding=&apos;utf-8&apos;) as File:
                    F = File.readlines()
The error is reported in 286 but mentions argument Source, instead of the file that caused the exception (IncludeFile).

It would be better to know more generic information such as current line or, if available, the kind of exception caught.

This might include file:
Edk2\BaseTools\Source\Python\Common\LongFilePathSupport.py

The above mentioned nested try was introduced as part of a fix that also relates to encoding:
58742d79457e71fba75d72e79050ba43915e3ed6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17337</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-09-21 21:50:24 +0000</bug_when>
    <thetext>Include Yuwei for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18692</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 22:07:24 +0000</bug_when>
    <thetext>Bob: have you any comment on this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23201</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2024-07-10 20:59:52 +0000</bug_when>
    <thetext>genaro.saucedo.tejada@intel.com: could you give the proposal for this fix?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23376</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2024-09-04 20:56:24 +0000</bug_when>
    <thetext>close it first.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3549</bug_id>
          
          <creation_ts>2021-08-10 13:32:28 +0000</creation_ts>
          <short_desc>Update edk2-libc to build with edk2/master and address VS2017/VS2019 compatibility issues</short_desc>
          <delta_ts>2021-08-18 20:44:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>3361</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayaprakash Nevara">n.jayaprakash</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>chicken.oo</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16862</commentid>
    <comment_count>0</comment_count>
    <who name="Jayaprakash Nevara">n.jayaprakash</who>
    <bug_when>2021-08-10 13:32:28 +0000</bug_when>
    <thetext>We have ported Python 3.6.8 to run on UEFI using the StdLib available in edk2-libc repo.
We are using the UDK2018 and VS2017 build tool to build Python 3.6.8 interpreter for UEFI.

We have observed that even through UDK2018 supports building applications with VS2017 build tool we have see certain build errors caused due to warnings being treated as errors. These warnings have been ignored in case of the VS2015 compiler by defining the following flags

    MSFT:*_VS2015x86_*_CC_FLAGS       = /Wv:11
    MSFT:*_VS2015xASL_*_CC_FLAGS      = /Wv:11
    MSFT:*_VS2015x86xASL_*_CC_FLAGS   = /Wv:11

Similar flags needs to be applied for VS2017 compiler tool as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16942</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-17 11:36:12 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16943</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-17 11:38:30 +0000</bug_when>
    <thetext>Additional issues need to be addressed to update edk2-libc to 
build with edk2/master.  The latest version of tools_def.txt adds 
the /WHOLEARCHIVE flag that improves the detection of multiply
defined symbols and missing symbols references by C code that
is not always included in the final linked image.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16944</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-17 11:39:07 +0000</bug_when>
    <thetext>Increase the scope of this issues to add support for both
VS2017 and VS2019.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16945</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-17 11:40:55 +0000</bug_when>
    <thetext>Update title and target repos</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16953</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 01:48:45 +0000</bug_when>
    <thetext>Patch series for review

https://edk2.groups.io/g/devel/message/79458</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16971</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 18:40:31 +0000</bug_when>
    <thetext>V2 series for review

https://edk2.groups.io/g/devel/message/79527</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16972</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 18:43:01 +0000</bug_when>
    <thetext>Commits:
https://github.com/tianocore/edk2-libc/commit/0b1a748e73f9eac544a8509b32af82df25dfa397
https://github.com/tianocore/edk2-libc/commit/afa705e3bfcd952031ad8358a8b9ad5f09d6c0cc
https://github.com/tianocore/edk2-libc/commit/91bf254a980832a41a09440bb41ced58c6a4c743
https://github.com/tianocore/edk2-libc/commit/65bae25197fe06a432262dc2da13f654fdb0d715
https://github.com/tianocore/edk2-libc/commit/a13049a64d1589119206e6da6ef683d085d84a32
https://github.com/tianocore/edk2-libc/commit/b652d46a48377e01d3c13380260fa4f593b43eb9
https://github.com/tianocore/edk2-libc/commit/d0885850905bd401dec064510961986423fc3690
https://github.com/tianocore/edk2-libc/commit/bdc5e7d2c9337ef746993e279dd31942f7be0639
https://github.com/tianocore/edk2-libc/commit/735ebf9a114016430d4921134ae16d84545bca92</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16982</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 20:44:26 +0000</bug_when>
    <thetext>*** Bug 1807 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3095</bug_id>
          
          <creation_ts>2020-11-30 21:53:35 +0000</creation_ts>
          <short_desc>Support pre-boot DMA protection in PEI phase by VT-d DMAR</short_desc>
          <delta_ts>2021-12-05 22:27:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14439</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-11-30 21:53:35 +0000</bug_when>
    <thetext>Use VT-d DMAR to do the pre-boot DMA protection in PEI phase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14512</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 20:36:03 +0000</bug_when>
    <thetext>Wei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17923</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-12-05 22:27:35 +0000</bug_when>
    <thetext>new driver is created.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3411</bug_id>
          
          <creation_ts>2021-05-21 20:28:21 +0000</creation_ts>
          <short_desc>Propose ConfigureTpmPlatformHierarchy() could disable TPM platform hierarchy</short_desc>
          <delta_ts>2021-07-14 23:39:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeremiah Cox">jerecox</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16117</commentid>
    <comment_count>0</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2021-05-21 20:28:21 +0000</bug_when>
    <thetext>The current implementation of ConfigureTpmPlatformHierarchy() in TpmPlatformHierarchyLib.c randomizes the Platform Auth, then &quot;forgets&quot; it, to prevent later boot/OS code from accessing TPM Platform features.

This BZ proposes an alternate strategy, to instruct the TPM to disable the Platform Hierarchy.  There is no random to generate, and no secrets in memory to &quot;forget&quot;.  This has worked successfully for several generations of Surface products.

See an example here: https://github.com/microsoft/mu_common_intel_min_platform/commit/1d31b8e2e3e71cc1745979005a61706224a62851</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16143</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-25 21:41:48 +0000</bug_when>
    <thetext>Include jiewen for discussion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16247</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-02 20:41:37 +0000</bug_when>
    <thetext>That could be a solution. Please submit patch to EDKII.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16253</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-06-02 21:39:34 +0000</bug_when>
    <thetext>v1 patch series: https://edk2.groups.io/g/devel/message/76001</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16288</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-06-07 12:07:00 +0000</bug_when>
    <thetext>v2 patch series: https://edk2.groups.io/g/devel/message/76141

Made several changes from v1, noted in the cover letter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16392</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-06-17 19:36:33 +0000</bug_when>
    <thetext>Patch is still waiting for maintainers to acknowledge it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16467</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2021-06-25 11:51:03 +0000</bug_when>
    <thetext>Patch is still waiting for maintainers to acknowledge it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16640</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-07-14 23:38:36 +0000</bug_when>
    <thetext>Patch is in review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16641</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-07-14 23:39:44 +0000</bug_when>
    <thetext>Series Pushed:

https://github.com/tianocore/edk2-platforms/commit/ae8412ca994cbe01ba88a45498768c20f15614cf

https://github.com/tianocore/edk2-platforms/commit/970b621c04ed4596ca003fd39b32f0c3022dd3fd

https://github.com/tianocore/edk2-platforms/commit/bfabeef4c9a63374784bd19f18a869aa2769e011</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3070</bug_id>
          
          <creation_ts>2020-11-10 23:34:58 +0000</creation_ts>
          <short_desc>X-windows configuration for WSL2</short_desc>
          <delta_ts>2022-03-01 22:25:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Fred Kerr">fekerr</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14327</commentid>
    <comment_count>0</comment_count>
    <who name="Fred Kerr">fekerr</who>
    <bug_when>2020-11-10 23:34:58 +0000</bug_when>
    <thetext>This is probably far out of scope, but it would be nice to have some notes (links) provided to help set up a build environment with Win10 WSL2. X-windows and SSH are likely configuration issues.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14527</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-08 21:25:42 +0000</bug_when>
    <thetext>I have no such experience. Sorry.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18502</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 22:25:08 +0000</bug_when>
    <thetext> Win10 WSL2 doesn&apos;t support X-windows.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3654</bug_id>
          
          <creation_ts>2021-09-24 17:32:46 +0000</creation_ts>
          <short_desc>Openssl native instructions for 32-bit</short_desc>
          <delta_ts>2022-09-23 17:18:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kenneth Lautner">klautner</reporter>
          <assigned_to name="Christopher Zurcher">christopher.zurcher</assigned_to>
          <cc>christopher.zurcher</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17377</commentid>
    <comment_count>0</comment_count>
    <who name="Kenneth Lautner">klautner</who>
    <bug_when>2021-09-24 17:32:46 +0000</bug_when>
    <thetext>Openssl native instructions 64-bit instructions have been added to edk2 and 32-bit native instructions would be a nice addition as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17431</commentid>
    <comment_count>1</comment_count>
    <who name="Christopher Zurcher">christopher.zurcher</who>
    <bug_when>2021-10-01 10:34:37 +0000</bug_when>
    <thetext>I will take this</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17507</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-10-12 21:42:28 +0000</bug_when>
    <thetext>Assign it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19622</commentid>
    <comment_count>3</comment_count>
    <who name="Christopher Zurcher">christopher.zurcher</who>
    <bug_when>2022-09-23 17:18:00 +0000</bug_when>
    <thetext>Completed:
https://github.com/tianocore/edk2/commit/03f708090b9da25909935e556c351a4d9445fd3f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3907</bug_id>
          
          <creation_ts>2022-04-19 17:26:30 +0000</creation_ts>
          <short_desc>Add PCI_DEVICE_PPI definition to EDK2</short_desc>
          <delta_ts>2022-08-04 22:28:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mateusz Albecki">mateusz.albecki</reporter>
          <assigned_to name="Maciej Czajkowski">maciej.czajkowski</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18841</commentid>
    <comment_count>0</comment_count>
    <who name="Mateusz Albecki">mateusz.albecki</who>
    <bug_when>2022-04-19 17:26:30 +0000</bug_when>
    <thetext>This bugzilla is a follow up on the rfc discussed here: 

https://edk2.groups.io/g/rfc/topic/proposal_to_add_support_for/86658203?p=,,,20,0,0,0::recentpostdate/sticky,,,20,2,0,86658203,previd%3D1641399596065842965,nextid%3D1626916856753718458&amp;previd=1641399596065842965&amp;nextid=1626916856753718458

For systems with more then one PciRoot we need a way to enumerate and assign resources in PEI in a standardized way similar to what we have in DXE. This requires a centralized place to discover and assign system resources(later called enumerator PEIM) and install a standardized PPI which will allow device driver PEIM to communicate with the HW.

We have prepared a POC which implements the changes here: https://github.com/mczaj/edk2/commits/AhciPei_PciDevicePpi_Both

The implementation of the enumerator itself would be left to the platform for the time being.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18843</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-04-19 21:35:29 +0000</bug_when>
    <thetext>mateusz.albecki@intel.com: please continue your work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19358</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-08-04 21:53:45 +0000</bug_when>
    <thetext>V1 series sent at: https://edk2.groups.io/g/devel/message/90243
V2 series sent at: https://edk2.groups.io/g/devel/message/91893
V3 series sent at: https://edk2.groups.io/g/devel/message/92015</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19359</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2022-08-04 22:28:16 +0000</bug_when>
    <thetext>Feature implementation merged via:
PR - https://github.com/tianocore/edk2/pull/3176
Commits:
https://github.com/tianocore/edk2/commit/86757f0b4750f672f346d955f89e5b76430ba6b4
https://github.com/tianocore/edk2/commit/a8f59e2eb44199040d2e1f747a6d950a25ed0984</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3372</bug_id>
          
          <creation_ts>2021-05-03 11:58:39 +0000</creation_ts>
          <short_desc>BASE_CR triggers UB sanitizer doing math on a zero pointer is undefined behavior in C us OFFSET_OF()</short_desc>
          <delta_ts>2021-05-04 15:32:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15889</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2021-05-03 11:58:39 +0000</bug_when>
    <thetext>We were running clang UB sanitize on the code and the CR macros are getting flagged as Undefined Behavior (UB). 

#define BASE_CR(Record, TYPE, Field)  ((TYPE *) ((CHAR8 *) (Record) - (CHAR8 *) &amp;(((TYPE *) 0)-&gt;Field)))

Looks like complies have added offset intrinsics to remove the above form of code. Thus OFFSET_OF() was added to edk2. 

So we should update BASE_CR to use OFFSET_OF():
#define BASE_CR(Record, TYPE, Field)  ((TYPE *) ((CHAR8 *) (Record) - (CHAR8 *) OFFSET_OF(TYPE, Field)))</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15902</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-04 15:32:07 +0000</bug_when>
    <thetext>Hello Andrew,

this is a valid report, but the BASE_CR macro has already been fixed, exactly as you&apos;re proposing now, in commit 498cb29dfdcc (&quot;MdePkg/Base.h: Implement BASE_CR() via OFFSET_OF().&quot;, 2018-11-02).

So normally I&apos;d close this as NOTABUG (or even as a duplicate, if there had ever been a BZ ticket for commit 498cb29dfdcc). However, this BZ installation does not support the NOTABUG resolution, nor was a different ticket ever reported for commit 498cb29dfdcc -- so I can only close this as INVALID.

Thanks
Laszlo</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3448</bug_id>
          
          <creation_ts>2021-06-10 13:21:47 +0000</creation_ts>
          <short_desc>EDK II platform for Cherry Trail</short_desc>
          <delta_ts>2021-06-15 21:45:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Nicklas Frahm">nicklas.frahm</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nicklas.frahm</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>16329</commentid>
    <comment_count>0</comment_count>
    <who name="Nicklas Frahm">nicklas.frahm</who>
    <bug_when>2021-06-10 13:21:47 +0000</bug_when>
    <thetext>I bought a Rock Pi X, which has an Intel Atom x5-Z8350 and comes with an AMI UEFI BIOS. The issue however is that this does not support netbooting due to the missing driver for the RTL8168. So I am considering to build EDK II for it, but that would require a platform to support this.

Additionally, it would be nice to get additional pointers how I could get started to build a platform support package for this board.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16380</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-15 21:45:18 +0000</bug_when>
    <thetext>There is no support for this platform in open source Edk2 platform today.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>