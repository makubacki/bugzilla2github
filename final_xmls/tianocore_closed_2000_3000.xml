<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.tianocore.org/page.cgi?id=bugzilla.dtd">

<bugzilla version="5.0.4"
          urlbase="https://bugzilla.tianocore.org/"
          
          maintainer="john.mathews@intel.com"
>

    <bug>
          <bug_id>2529</bug_id>
          
          <creation_ts>2020-02-17 04:27:25 +0000</creation_ts>
          <short_desc>SetWakeupTimeConsistencyTest,Year test cases are not comparable to UEFI Spec.</short_desc>
          <delta_ts>2022-01-13 09:19:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Highest</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gaurav Jain">gaurav.jain</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaurav.jain</cc>
    
    <cc>pankaj.bansal</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11274</commentid>
    <comment_count>0</comment_count>
    <who name="Gaurav Jain">gaurav.jain</who>
    <bug_when>2020-02-17 04:27:25 +0000</bug_when>
    <thetext>In uefi-sct/SctPkg/TestCase/UEFI/EFI/RuntimeServices/TimeServices/BlackBoxTest/TimeServicesBBTestConformance.c 

Function BBTestSetWakeupTimeConsistencyTest.

2 Test cases for Time.Year = 1997 and Time.Year = 2100 are not comparable to UEFI Specification, Version 2.8(https://uefi.org/sites/default/files/resources/UEFI_Spec_2_8_final.pdf)page 252.

//*******************************************************
//EFI_TIME
//*******************************************************
// This represents the current time information
typedef struct {
 UINT16 Year; // 1900 – 9999
 UINT8 Month; // 1 – 12
 UINT8 Day; // 1 – 31
 UINT8 Hour; // 0 – 23
 UINT8 Minute; // 0 – 59
 UINT8 Second; // 0 – 59
 UINT8 Pad1;
 UINT32 Nanosecond; // 0 – 999,999,999
 INT16 TimeZone; // -1440 to 1440 or 2047
 UINT8 Daylight;
 UINT8 Pad2;
} EFI_TIME;

valid Range of year is  1900 – 9999.
But as per Runtime services Consistency test, Year 1997 and 2100 is invalid.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11275</commentid>
    <comment_count>1</comment_count>
    <who name="Gaurav Jain">gaurav.jain</who>
    <bug_when>2020-02-17 04:43:45 +0000</bug_when>
    <thetext>Changing the status to confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14104</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-10-27 15:18:27 +0000</bug_when>
    <thetext>32 bit real time clocks may not support times after January 19th, 2038 um 03:14:07. 
So not accepting year 2100 may be the correct thing to do depending on the hardware.

Using a wakeup time that is in the past relative to the current time does not make much sense. So it might be reasonable for a firmware to reject it.

So both 1997 and 2100 are not good choices for a test.

I would expect every implementation with a working implementation to accept a time that is less then 24 hours in the future relative to the current time. A time before 1900 and after 9999 should be rejected.

So these would be good choices for dates used for conformance testing:

* 1899-12-31 - expect EFI_INVALID_PARAMETER
* now + 1 h - expect EFI_SUCCESS
* 10000-01-01 - expect EFI_INVALID_PARAMETER</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17455</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-10-07 10:46:14 +0000</bug_when>
    <thetext>Edhay to confirm with the ticket raiser Gaurav Jain</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17732</commentid>
    <comment_count>4</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-11-11 09:45:23 +0000</bug_when>
    <thetext>Heinrich to provide the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17736</commentid>
    <comment_count>5</comment_count>
      <attachid>879</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-11-11 11:37:44 +0000</bug_when>
    <thetext>Created attachment 879
[PATCH edk2-test 1/1] uefi-sct/SctPkg: invalid values for SetWakeupTime()

Patch appended and sent to edk2-devel mailing list.

[PATCH edk2-test 1/1] uefi-sct/SctPkg: invalid values for SetWakeupTime()
https://edk2.groups.io/g/devel/message/83655

Please, review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17893</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-12-02 02:19:26 +0000</bug_when>
    <thetext>The appended patch was reviewed:

Reviewed-by: G Edhaya Chandran&lt;edhaya.chandran@arm.com&gt;
https://edk2.groups.io/g/devel/message/84242</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18122</commentid>
    <comment_count>7</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-01-13 08:08:12 +0000</bug_when>
    <thetext>Upstreamed as commit - id:
https://github.com/tianocore/edk2-test/commit/01d9d24efdedb30ff6b0e1f1c47c6c3b0c5a7093</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18131</commentid>
    <comment_count>8</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-01-13 09:19:25 +0000</bug_when>
    <thetext>Patch is upstreamed.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>879</attachid>
            <date>2021-11-11 11:37:44 +0000</date>
            <delta_ts>2021-11-11 11:37:44 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: invalid values for SetWakeupTime()</desc>
            <filename>0001-uefi-sct-SctPkg-invalid-values-for-SetWakeupTime.patch</filename>
            <type>text/plain</type>
            <size>2714</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2406</bug_id>
          
          <creation_ts>2019-12-06 05:10:13 +0000</creation_ts>
          <short_desc>PatchCheck: Address false error conditions</short_desc>
          <delta_ts>2020-06-03 16:32:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2462</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Highest</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10627</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-12-06 05:10:13 +0000</bug_when>
    <thetext>In bug 113 / commit e61406708c83, we enforced a subject length of 72
characters. That was done for synchronizing PatchCheck.py to the Wiki
article at

https://github.com/tianocore/tianocore.github.io/wiki/Commit-Message-Format

which says (at present, too [*]):

&gt;| The length of &apos;Pkg-Module: Brief-single-line-summary&apos; should be less
&gt;| than 72 characters

[*] https://github.com/tianocore/tianocore.github.io/wiki/Commit-Message-Format/9e42c97618a2818536c4417fa76a1853b3bc6376

Rejecting subjects with 72 or more characters is both unjustified, and
extremely limiting.

Unjustified because (a) &quot;git show&quot; indents the subject line exactly as
it does the rest of the commit message (4 spaces, namely), (b) allowing
three more characters in email subjects is not disruptive to the mailing
list based development workflow.

Extremely limiting because edk2 employs unusually long directory and
file names (subsystems, modules, source files), with the &quot;Pkg-Module&quot;
prefix eating up an inordinate proportion of the subject line. Therefore
the difference between 72 characters and 75 characters can make or break
a subject -- it can be the difference between a terse but understandable
subject, and gibberish filled with abbreviations.

The QEMU project applies a uniform limit of 76 characters (inclusive) to
the subject line and the body of commit message:

https://wiki.qemu.org/index.php?title=Contribute/SubmitAPatch&amp;oldid=8024

&gt;| Please do not use lines that are longer than 76 characters in your
&gt;| commit message (so that the text still shows up nicely with &quot;git
&gt;| show&quot; in a 80-columns terminal window).

The Linux kernel project is a *bit* more restrictive: they require an
*exclusive* limit of 76 characters (both subject and commit message).
Excluding 76 itself makes a lot of sense: in an 80-columns terminal,
lines up to and including 79 chars will never force newlines.

https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/process/submitting-patches.rst?id=e8686a40a32aee572b87552b0835922a1e47bd87

&gt;|  - The body of the explanation, line wrapped at 75 columns, which will
&gt;|    be copied to the permanent changelog to describe this patch.
&gt;| [...]
&gt;| For these reasons, the ``summary`` must be no more than 70-75
&gt;| characters, and it must describe both what the patch changes, as well

Both our Wiki article and PatchCheck.py are correct wrt. the body line
limit of 75 chars (inclusive).

However, both the Wiki article and PatchCheck.py should relax the
subject length to the same 75 chars (inclusive) from the current 71
chars (inclusive).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10628</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-12-06 05:12:08 +0000</bug_when>
    <thetext>Setting Severity to Major, because the new CI gating strictly enforces the limits -- PatchCheck.py failure prevents the merging of otherwise approved patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10629</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-12-06 05:55:25 +0000</bug_when>
    <thetext>I started writing a patch for this. However, when I was composing the commit message, and inserted the link

https://github.com/tianocore/tianocore.github.io/wiki/Commit-Message-Format/9e42c97618a2818536c4417fa76a1853b3bc6376

to capture the Wiki article at its *current* state (mandating an exclusive limit of 72 chars on subjects), I realized that link *itself*, in the commit message, would be rejected by &quot;PatchCheck.py&quot;!

Therefore, the only real fix for this issue is if we permit maintainers to waive (opt out of) PatchCheck.py failures in the CI system. We should absolutely enforce good line wrapping by default, but it&apos;s unacceptable to reject commit messages just because they contain long URLs.

Consider: even if we don&apos;t use commit hashes in Wiki references (for capturing a specific article state in time), the following example:

https://github.com/tianocore/tianocore.github.io/wiki/Reporting-Security-Issues

is already 79 characters.

Mailing list archive references can be long too:

http://mid.mail-archive.com/20191202175630.12788-1-michael.d.kinney@intel.com

(77 characters).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10630</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-12-06 06:00:10 +0000</bug_when>
    <thetext>I&apos;m not sure where I should file (at this moment) feature requests for the EDK II CI system.

Anyway, I think it would be nice if we could add a new label, for waiving PatchCheck.py failures.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10631</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-12-06 06:04:26 +0000</bug_when>
    <thetext>Another example (from the Wiki) where strict enforcement of the current
limits is counter-productive:

&gt;| CVE fix needs to append CVE number in Brief-single-line-summary. The
&gt;| format is &apos;Pkg-Module: Brief-single-line-summary (CVE-Year-Number)&apos;.
&gt;| Its length should be less than 92 characters.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10639</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-12-09 13:18:07 +0000</bug_when>
    <thetext>Can we update PatchCheck.py to

1) Enforce 76 char subject line limit if CVE not present
2) Enforce 92 char subject line limit if CVE is present.
3) Do not generate error for commit message body line lengths.
4) Generate warnings that do not block CI for commit message
   body line lengths &gt; 76 characters.

We can also recommend that the Pkg-Module be the Package Name and
name of the module/lib without requiring intermediate directory
names.  The full path can be in the commit message body.

We can also consider some flags to PatchCheck.py. The default
for local checks and personal builds can be stricter than 
push requests.  The CI system can set this flag for a push
request.  But I do not prefer this difference in behavior 
because it can cause more confusion when there are behavior
differences.

Adding a feature for a maintainer to bypass PatchCheck errors
is technically possible, but adds more complexity to the 
system and the opportunity for maintainers to bypass checks
instead of fixing commit messages that can updated to meet
the requirements.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10640</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-12-09 16:09:24 +0000</bug_when>
    <thetext>Hello Mike,

(In reply to Michael Kinney from comment #5)
&gt; Can we update PatchCheck.py to
&gt; 
&gt; 1) Enforce 76 char subject line limit if CVE not present
&gt; 2) Enforce 92 char subject line limit if CVE is present.
&gt; 3) Do not generate error for commit message body line lengths.
&gt; 4) Generate warnings that do not block CI for commit message
&gt;    body line lengths &gt; 76 characters.

this sounds nice; it&apos;s indeed more robust than a generic opt-out.

I just can&apos;t volunteer for writing it. :)

&gt; We can also recommend that the Pkg-Module be the Package Name and
&gt; name of the module/lib without requiring intermediate directory
&gt; names.  The full path can be in the commit message body.

We&apos;ve referred to Pkg-Module like that for a good while now; unfortunately, it still eats up quite a bit of space (it varies, of course).

But, with point (1), it&apos;s going to be fine.

(Personally I&apos;ve been using 74 characters in edk2 subject lines, and that length has been workable, after a bit of editing on occasion.  It&apos;s the 71 char limit that has broken my model. 76 is going to be luxurious.)

--*--

I&apos;d like to point out a nuance. The CVE subject length (92) was proposed, and adopted, based on the following format:

  &quot;&lt;normal subject: max. 75 chars inclusive&gt; (CVE-YYYY-NNNNN)&quot;

The suffix &quot; (CVE-YYYY-NNNNN)&quot; is 17 chars long. Therefore, if we bump the normal subject length to 76 inclusive (and not to 75 inclusive), then we should also use a 93 chars (inclusive) limit for CVE subjects.

Put differently, points (1) and (2) should agree in their use of inclusive vs. exclusive limits; then whichever is chosen, their difference should be 17.

Thank you!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10790</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-06 12:24:33 +0000</bug_when>
    <thetext>This issue should be fixed as soon as possible, please. PatchCheck.py is blocking completely good-looking pull requests, and the failed result doesn&apos;t even expose the &quot;PatchCheck.py&quot; error messages.

https://github.com/tianocore/edk2/pull/272
https://github.com/tianocore/edk2/pull/272/checks?check_run_id=375969977</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10791</commentid>
    <comment_count>8</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2020-01-06 12:30:34 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #6)
&gt; Hello Mike,
&gt; 
&gt; (In reply to Michael Kinney from comment #5)
&gt; &gt; Can we update PatchCheck.py to
&gt; &gt; 
&gt; &gt; 1) Enforce 76 char subject line limit if CVE not present
&gt; &gt; 2) Enforce 92 char subject line limit if CVE is present.
&gt; &gt; 3) Do not generate error for commit message body line lengths.
&gt; &gt; 4) Generate warnings that do not block CI for commit message
&gt; &gt;    body line lengths &gt; 76 characters.
&gt; 
&gt; this sounds nice; it&apos;s indeed more robust than a generic opt-out.
&gt; 
&gt; I just can&apos;t volunteer for writing it. :)
&gt; 
&gt; &gt; We can also recommend that the Pkg-Module be the Package Name and
&gt; &gt; name of the module/lib without requiring intermediate directory
&gt; &gt; names.  The full path can be in the commit message body.
&gt; 
&gt; We&apos;ve referred to Pkg-Module like that for a good while now; unfortunately,
&gt; it still eats up quite a bit of space (it varies, of course).
&gt; 
&gt; But, with point (1), it&apos;s going to be fine.
&gt; 
&gt; (Personally I&apos;ve been using 74 characters in edk2 subject lines, and that
&gt; length has been workable, after a bit of editing on occasion.  It&apos;s the 71
&gt; char limit that has broken my model. 76 is going to be luxurious.)
&gt; 
&gt; --*--
&gt; 
&gt; I&apos;d like to point out a nuance. The CVE subject length (92) was proposed,
&gt; and adopted, based on the following format:
&gt; 
&gt;   &quot;&lt;normal subject: max. 75 chars inclusive&gt; (CVE-YYYY-NNNNN)&quot;
&gt; 
&gt; The suffix &quot; (CVE-YYYY-NNNNN)&quot; is 17 chars long. Therefore, if we bump the
&gt; normal subject length to 76 inclusive (and not to 75 inclusive), then we
&gt; should also use a 93 chars (inclusive) limit for CVE subjects.
&gt; 
&gt; Put differently, points (1) and (2) should agree in their use of inclusive
&gt; vs. exclusive limits; then whichever is chosen, their difference should be
&gt; 17.

FWIW related patch: https://edk2.groups.io/g/devel/message/52650
&quot;BaseTools/PatchCheck.py: Ignore CR and LF characters in subject length&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10792</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-06 12:45:03 +0000</bug_when>
    <thetext>&quot;PatchCheck.py&quot; chokes on non-ASCII characters in subject lines. Such as (from &lt;http://mid.mail-archive.com/20200106115415.11624-1-philmd@redhat.com&gt; / ):

  [PATCH v4 03/32] .mailmap: Add an entry for Antoine Cœur
                                                       ^

  [PATCH v4 18/32] .mailmap: Add an entry for Marc-André Lureau
                                                       ^

  [PATCH v4 19/32] .mailmap: Add an entry for Marvin Häuser
                                                      ^

  [PATCH v4 24/32] .mailmap: Add an entry for Philippe Mathieu-Daudé
                                                                   ^

It doesn&apos;t only occur on my local system, but also in the edk2 CI system:

https://github.com/tianocore/edk2/pull/272/checks?check_run_id=376014613
https://dev.azure.com/tianocore/11ea4a10-ac9f-4e5f-8b13-7def1f19d478/_build/results?buildId=3459

I&apos;m going to approximate those code points with 7-bit ASCII sequences for now. But, again, these subjects are valid, and should be accepted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10864</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-13 12:34:09 +0000</bug_when>
    <thetext>Patch from Mike on the list:

[edk2-devel] [Patch]
BaseTools/Scripts/PatchCheck: Address false error conditions

https://edk2.groups.io/g/devel/message/53169
http://mid.mail-archive.com/20200110225358.8204-1-michael.d.kinney@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10866</commentid>
    <comment_count>11</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-13 13:25:27 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/297

Pushed as 4465cd124f..b112ec225f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2563</bug_id>
          
          <creation_ts>2020-02-27 04:44:08 +0000</creation_ts>
          <short_desc>BaseTools: Changing header file does not trigger module re-build</short_desc>
          <delta_ts>2020-03-01 21:46:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2481</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Highest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11448</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-02-27 04:44:08 +0000</bug_when>
    <thetext>This is the incremental build regression issue.

Reproduce steps:
1. Build Ovmf Platform
2. Change MdePkg\Include\Base.h
3. Re-build Ovmf Platform
4. No modules are re-build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11449</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-02-27 04:44:43 +0000</bug_when>
    <thetext>Take the ownership.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11455</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 07:24:35 +0000</bug_when>
    <thetext>The regression was introduced by commit 818283de3f6d (&quot;BaseTools: Rationalise makefile generation&quot;, 2020-02-12), under bug 2481.

Fix on the list:

* [Patch 1/1][edk2-stable202002]
  BaseTools: Fixed a regression issue in Makefile for incremental build

http://mid.mail-archive.com/20200227094705.25404-1-bob.c.feng@intel.com
https://edk2.groups.io/g/devel/message/54992</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11458</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-27 09:17:51 +0000</bug_when>
    <thetext>Update importance to critical.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11459</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 09:35:22 +0000</bug_when>
    <thetext>[edk2-devel] [Patch]
BaseTools: Remove invalid leading space before !INCLUDE in Makefile

https://edk2.groups.io/g/devel/message/55003
http://mid.mail-archive.com/20200227142524.24504-1-bob.c.feng@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11482</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-01 21:46:34 +0000</bug_when>
    <thetext>patch was pushed.
https://github.com/tianocore/edk2/commit/2be4828af1c92a848af90429a9a0b44544c80553</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2556</bug_id>
          
          <creation_ts>2020-02-24 20:02:16 +0000</creation_ts>
          <short_desc>MpInitLib ucode regression: &quot;PlatformId&quot; MSR does not exist on AMD-based platforms</short_desc>
          <delta_ts>2020-06-03 16:45:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2678</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>High</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="LeoDuran@AMD">leo.duran</reporter>
          <assigned_to name="LeoDuran@AMD">leo.duran</assigned_to>
          <cc>anthony</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11424</commentid>
    <comment_count>0</comment_count>
    <who name="LeoDuran@AMD">leo.duran</who>
    <bug_when>2020-02-24 20:02:16 +0000</bug_when>
    <thetext>Need to add mitigation code since the &quot;PlatformId&quot; MSR does not exist on AMD-based platforms.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11441</commentid>
    <comment_count>1</comment_count>
    <who name="LeoDuran@AMD">leo.duran</who>
    <bug_when>2020-02-26 10:33:40 +0000</bug_when>
    <thetext>This issue is a &quot;must-fix&quot; as the MSR being read simply does not exist on AMD processors. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11446</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-02-27 00:52:24 +0000</bug_when>
    <thetext>Leo,
MpInitLibInitialize basically does 2 things:

1. Collect information (CPU Count, APIC ID, Platform ID, ...)
MpInitLibInitialize -&gt; InitializeApData: *BSP*: Init Basic Info (APIC ID, Platform ID)
MpInitLibInitialize -&gt; CollectProcessorCount: *BSP*: Collect CPU Count &amp; Enable X2 APIC
CollectProcessorCount -&gt; InitializeApData: *AP*: Collect Basic Info (APIC ID, Platform ID)

2. Apply uCode (microcode) and sync MTRR
MpInitLibInitialize -&gt; ShadowMicrocodeUpdatePatch: *BSP*: Shadow uCode to Memory (Platform Way or through PCD)
MpInitLibInitialize -&gt; MicrocodeDetect: *BSP*: Apply uCode
MpInitLibInitialize -&gt; MtrrGetAllMtrrs: *BSP*: Get MTRR setting
MpInitLibInitialize -&gt; ApInitializeSync: *AP*: Apply uCode &amp; Set MTRR


The issue here is about the operation to get Platform ID information from a &quot;PlatformId&quot; MSR. AMD processors don&apos;t have such MSR.
I also got another information from you through the community discussion that AMD processors don&apos;t rely on MpInitLib applies uCode.

So before we jump to the solution, I have several questions:
1. Do AMD processors require applying uCode in boot phase?
2. If yes to #1, is applying uCode in MpInitLib a better place?

If yes to #2, we may need to revisit UefiCpuPkg/Include/Ppi/ShadowMicrocode.h for AMD usage because it assumes &quot;ProcessorSignature&quot; and  &quot;PlatformId&quot; are the key to locate the proper uCode for a certain processor.

I want to make sure that the ShadowMicrocode PPI is generic enough to meet the needs of all x86 ARCH.

By the way, I tried to study http://support.amd.com/TechDocs/24593.pdf (AMD64 Architecture Programmer’s Manual Volume 2: System Programming) for uCode knowledge but didn&apos;t find any detailed information about how to apply uCode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11467</commentid>
    <comment_count>3</comment_count>
    <who name="LeoDuran@AMD">leo.duran</who>
    <bug_when>2020-02-27 13:14:14 +0000</bug_when>
    <thetext>AMD handles microcode patches outside of the context of UEFI. So EDK2 hooks (ShadowMicrocode PPI, et al) are not required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11499</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-03 20:20:38 +0000</bug_when>
    <thetext>leo sends the patch https://edk2.groups.io/g/devel/message/55105</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11500</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-03 20:22:14 +0000</bug_when>
    <thetext>Fix at Edk2 4c0f6e349d32cf27a7104ddd3e729d6ebc88ea70</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2982</bug_id>
          
          <creation_ts>2020-09-22 11:48:31 +0000</creation_ts>
          <short_desc>DxeCore: UEFI memmap workaround for hiding page-access caps from OSes hides SP and CRYPTO caps too</short_desc>
          <delta_ts>2020-10-15 06:36:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Małgorzata Kukiełło">jacek.kukiello</reporter>
          <assigned_to name="Małgorzata Kukiełło">jacek.kukiello</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jacek.kukiello</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>oleksiyy</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13735</commentid>
    <comment_count>0</comment_count>
    <who name="Małgorzata Kukiełło">jacek.kukiello</who>
    <bug_when>2020-09-22 11:48:31 +0000</bug_when>
    <thetext>A change introduced in bda18f5ed04f5317ab2bdc9da4530c078b33cc63 to page.c is causing all attributes set to be cleared. This means that even if e.g. total memory encryption engine will mark memory as EFI_MEMORY_CPU_CRYPTO meaning it is capable of being encrypted, this attribute will be cleared.
problem is that a definition of EFI_MEMORY_ATTRIBUTE_MASK is covering all possible attributes but then in some places a higher granularity is needed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13736</commentid>
    <comment_count>1</comment_count>
    <who name="Małgorzata Kukiełło">jacek.kukiello</who>
    <bug_when>2020-09-22 11:53:08 +0000</bug_when>
    <thetext>checked under efi shell using memmap</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13737</commentid>
    <comment_count>2</comment_count>
    <who name="Małgorzata Kukiełło">jacek.kukiello</who>
    <bug_when>2020-09-22 11:54:19 +0000</bug_when>
    <thetext>checked under efi shell using memmap</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13738</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-22 12:04:51 +0000</bug_when>
    <thetext>As of this writing -- with the master branch currently pointing at commit fb97626fe047 --, there is no such commit as bda18f5ed04f5317ab2bdc9da4530c078b33cc63 in the edk2 git history.

Commit 3bd5c994c879 (&quot;MdeModulePkg: Add New Memory Attributes&quot;, 2020-07-15) could be what you have in mind. Please clarify.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13766</commentid>
    <comment_count>4</comment_count>
    <who name="Małgorzata Kukiełło">jacek.kukiello</who>
    <bug_when>2020-09-23 02:44:10 +0000</bug_when>
    <thetext>Thank you for the catch - You&apos;re right it&apos;s 3bd5c994c879f78e8e3d5346dc3b627f199291aa in master, what i gave was a copy in my repo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13771</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-23 06:40:16 +0000</bug_when>
    <thetext>v1 posted by Małgorzata (two different patches, using the same subject line):

(1)
https://edk2.groups.io/g/devel/message/65518
http://mid.mail-archive.com/20200923080829.6884-1-jacek.kukiello@intel.com

(2)
https://edk2.groups.io/g/devel/message/65519
http://mid.mail-archive.com/20200923080829.6884-2-jacek.kukiello@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13772</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-23 06:44:35 +0000</bug_when>
    <thetext>Clarifying the bug title.

Also, clarifying the problem statement:

The workaround in the UEFI memmap construction, near the end of the
function CoreGetMemoryMap() [MdeModulePkg/Core/Dxe/Mem/Page.c] should
not clear the SP and CRYPTO bits, because OSes do (apparently) correctly
interpret SP and CRYPTO as capabilities, and not as currently set
attributes (upon which the OSes should set their page tables). For this
reason, the SP and CRYPTO bits should be separated from the bitmask that
we use for hiding the page-access attributes, in the workaround.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13941</commentid>
    <comment_count>7</comment_count>
    <who name="Małgorzata Kukiełło">jacek.kukiello</who>
    <bug_when>2020-10-12 05:04:42 +0000</bug_when>
    <thetext>Change has been pulled: https://github.com/tianocore/edk2/pull/999</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13979</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-15 06:36:38 +0000</bug_when>
    <thetext>Commit range 244be783ae04..f1567720b13a.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2116</bug_id>
          
          <creation_ts>2019-08-22 15:13:03 +0000</creation_ts>
          <short_desc>NULL pointer de-reference in IntelSiliconPkg - IntelVTdDxe</short_desc>
          <delta_ts>2019-08-26 21:37:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9168</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 15:13:03 +0000</bug_when>
    <thetext>The pointer NextEfiEntry returned from a call to AllocatePool() may be dereferenced when NULL in ReturnUefiMemoryMap() in DmaProtection.c.

/edk2-platforms/Silicon/Intel/IntelSiliconPkg/Feature/VTd/IntelVTdDxe/DmaProtection.c

.  .  .
  //
  // Sort memory map from low to high
  //
  EfiEntry        = EfiMemoryMap;
  NextEfiEntry    = NEXT_MEMORY_DESCRIPTOR (EfiEntry, EfiDescriptorSize);
  EfiMemoryMapEnd = (EFI_MEMORY_DESCRIPTOR *) ((UINT8 *) EfiMemoryMap + EfiMemoryMapSize);
  while (EfiEntry &lt; EfiMemoryMapEnd) {
.  .  .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9169</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 15:15:23 +0000</bug_when>
    <thetext>Similar issue for pointer EfiEntry</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9170</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 15:15:48 +0000</bug_when>
    <thetext>Fix is work in progress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9229</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-23 22:59:50 +0000</bug_when>
    <thetext>Code is currently sent for review - https://edk2.groups.io/g/devel/message/46344</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9257</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-26 21:37:03 +0000</bug_when>
    <thetext>Committed - https://github.com/tianocore/edk2-platforms/commit/0d4d661b5a7cf3114a7d81e1c59e5cb57ceaf139</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2671</bug_id>
          
          <creation_ts>2020-04-09 08:38:16 +0000</creation_ts>
          <short_desc>Incorrect Start Address Calculation in AllocatePages Functionality Test MemoryAllocationServices</short_desc>
          <delta_ts>2020-10-27 15:55:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gaurav Jain">gaurav.jain</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaoliming</cc>
    
    <cc>gaurav.jain</cc>
    
    <cc>pankaj.bansal</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>westside333</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12172</commentid>
    <comment_count>0</comment_count>
    <who name="Gaurav Jain">gaurav.jain</who>
    <bug_when>2020-04-09 08:38:16 +0000</bug_when>
    <thetext>File: uefi-sct/SctPkg/TestCase/UEFI/EFI/BootServices/MemoryAllocationServices/BlackBoxTest/MemoryAllocationServicesBBTestFunction.c

Function: BBTestAllocatePagesInterfaceTest

Line: 709
      Start   = (Start + 0x10000) &amp; 0xFFFFFFFFFFFF0000;
This is incorrect way of aligning Start to 64k.
Above code will add 64k even if Start is already aligned to 64k.

Correct Calculation for aligning Start to 64k is:
      Start   = (Start + 0xFFFF) &amp; 0xFFFFFFFFFFFF0000;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13682</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-15 22:14:37 +0000</bug_when>
    <thetext>Confirm. This is a clear issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14108</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-10-27 15:55:27 +0000</bug_when>
    <thetext>This issue was fixed with commit 
ed8a7477d474 (&quot;SctPkg: Updated Start Address Alignment code&quot;)
So let&apos;s mark this as resolved/fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2117</bug_id>
          
          <creation_ts>2019-08-22 15:40:05 +0000</creation_ts>
          <short_desc>Unvalidated Path Input Used in Intel/Tools/FitGen</short_desc>
          <delta_ts>2020-02-20 09:36:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
    
    <cc>paul.a.lohr</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9171</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 15:40:05 +0000</bug_when>
    <thetext>In FitGen.c, main() passes the argv parameter to two functions - FitGen() and FitView(). Without proper string validation and character neutralization, the code is left open to a path traversal attach. This should be fixed.

More details regarding the issue and mitigation/prevention are available at: https://docs.roguewave.com/en/klocwork/current/sv.tainted.path_traversal.

.  .  .
int
main (
  int   argc,
  char  **argv
  )
{
  SetUtilityName (UTILITY_NAME);

  //
  // Display utility information
  //
  PrintUtilityInfo ();

  //
  // Verify the correct number of arguments
  //
  if (argc &gt;= MIN_VIEW_ARGS &amp;&amp; stricmp (argv[1], &quot;-view&quot;) == 0) {
    return FitView (argc, argv);
  } else if (argc &gt;= MIN_ARGS) {
    return FitGen (argc, argv);
  } else {
    Error (NULL, 0, 0, &quot;invalid number of input parameters specified&quot;, NULL);
    PrintUsage ();
    return STATUS_ERROR;
  }
}
.  .  .

FitView() then performs file-system access:

.  .  .
STATUS
FitView (
  IN INTN   argc,
  IN CHAR8  **argv
  )
{
  UINT32                      FvRecoveryFileSize;
  UINT8                       *FileBuffer;
  UINT8                       *FileBufferRaw = NULL;
  STATUS                      Status;

  //
  // Step 1: Read input file
  //
  Status = ReadInputFile (argv[2], &amp;FileBuffer, &amp;FvRecoveryFileSize, &amp;FileBufferRaw);

.  .  .


STATUS
ReadInputFile (
  IN CHAR8    *FileName,
  OUT UINT8   **FileData,
  OUT UINT32  *FileSize,
  OUT UINT8   **FileBufferRaw OPTIONAL
  )
{
  FILE                        *FpIn;
  UINT32                      TempResult;

  //
  // Open the Input FvRecovery.fv file
  //
  if ((FpIn = fopen (FileName, &quot;rb&quot;)) == NULL) {
    //
    // Return WARNING, let caller make decision
    //
//    Error (NULL, 0, 0, &quot;Unable to open file&quot;, FileName);
    return STATUS_WARNING;
  }
  //
  // Get the Input FvRecovery.fv file size
  //
  fseek (FpIn, 0, SEEK_END);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9193</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-22 20:48:03 +0000</bug_when>
    <thetext>There is no Component category for this issue.

The FitGen tool is in edk2-platforms/Silicon/Intel/Tools</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9854</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 20:57:02 +0000</bug_when>
    <thetext>Shenglei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10917</commentid>
    <comment_count>3</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-01-16 08:18:43 +0000</bug_when>
    <thetext>How are we doing on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10920</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-16 08:56:09 +0000</bug_when>
    <thetext>Is there the real issue reported from the user? Or just code enhancement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10921</commentid>
    <comment_count>5</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-01-16 08:58:39 +0000</bug_when>
    <thetext>It looks to me like an enhancement, and the issue was found when running Klocworks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10944</commentid>
    <comment_count>6</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-01-17 15:38:08 +0000</bug_when>
    <thetext>Hi - we want this checked in by 2020-002 EDK2 Stable Tag.  Please confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10949</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-19 01:51:59 +0000</bug_when>
    <thetext>Is it really required? Without this fix, FitGen will hang in OS for the invalid input. But, it doesn&apos;t generate BIOS image with the security issue. So, I don&apos;t think this fix is required for the security BIOS image generation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10986</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-28 01:14:28 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #7)
&gt; Is it really required? Without this fix, FitGen will hang in OS for the
&gt; invalid input. But, it doesn&apos;t generate BIOS image with the security issue.
&gt; So, I don&apos;t think this fix is required for the security BIOS image
&gt; generation.

Liming, I checked with Mike Kinney. Tool security and robustness issues have been fixed in the past as a high priority and we support this being checked in for the stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11249</commentid>
    <comment_count>9</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-02-13 16:56:48 +0000</bug_when>
    <thetext>Hi - will this make it into 2020.02 Stable Tag?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11287</commentid>
    <comment_count>10</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-17 21:57:35 +0000</bug_when>
    <thetext>I mean the issue is not critical. I will try to provide the fix before end of Feb.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11306</commentid>
    <comment_count>11</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 10:52:45 +0000</bug_when>
    <thetext>The patch has been sent for code review 
https://edk2.groups.io/g/devel/message/54634</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11337</commentid>
    <comment_count>12</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 09:36:25 +0000</bug_when>
    <thetext>Fix it at edk2-platform 67957909babe64ec70a44af360148809f2a6c707</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2078</bug_id>
          
          <creation_ts>2019-08-13 00:04:29 +0000</creation_ts>
          <short_desc>BaseTools: Incorrect incremental build behavior</short_desc>
          <delta_ts>2019-08-13 23:12:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8968</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-13 00:04:29 +0000</bug_when>
    <thetext>If a module (e.g. Shell) uses one or more NULL lib instances, and the number of NULL lib instances are changed in a DSC file, the module is not linked with the new set of libs.  

This is a build tool regression issue that introduced by multiple-process-autogen.

The workspace timestamp value is not pass to module autogen object correctly, so build tool does not detect the change of .dsc and ignore the autogen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8969</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-13 00:05:06 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8996</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-13 23:12:38 +0000</bug_when>
    <thetext>fixed at SHA-1: a000d5d1cac3a3df329e26877ad181a632b4e6ed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2321</bug_id>
          
          <creation_ts>2019-11-01 03:27:17 +0000</creation_ts>
          <short_desc>Add FitGen feature to support uCode Capsule Update</short_desc>
          <delta_ts>2020-01-16 08:51:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kenji">kenji.chen</reporter>
          <assigned_to name="Kenji">kenji.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>paul.a.lohr</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10276</commentid>
    <comment_count>0</comment_count>
      <attachid>424</attachid>
    <who name="Kenji">kenji.chen</who>
    <bug_when>2019-11-01 03:27:17 +0000</bug_when>
    <thetext>Created attachment 424
FitGen.c patch file

In order to support uCode Capsule update, we need the patch attached.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10293</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-03 21:13:30 +0000</bug_when>
    <thetext>Kenji is working on the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10409</commentid>
    <comment_count>2</comment_count>
      <attachid>429</attachid>
    <who name="Kenji">kenji.chen</who>
    <bug_when>2019-11-12 20:44:32 +0000</bug_when>
    <thetext>Created attachment 429
FitGen.c patch file

added slot size for Microcode slot mode for ucode capsule update.
changed StartupAcm parameter -S/-s to -A/-a.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10410</commentid>
    <comment_count>3</comment_count>
      <attachid>430</attachid>
    <who name="Kenji">kenji.chen</who>
    <bug_when>2019-11-12 20:51:19 +0000</bug_when>
    <thetext>Created attachment 430
FitGen.c patch file

add -L/-l as new parameter for Microcode Slot mode.
recovery -S/-s for StartupAcm in order to keep backward compatibility.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10411</commentid>
    <comment_count>4</comment_count>
      <attachid>431</attachid>
    <who name="Kenji">kenji.chen</who>
    <bug_when>2019-11-12 20:58:44 +0000</bug_when>
    <thetext>Created attachment 431
FitGen.c patch file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10412</commentid>
    <comment_count>5</comment_count>
      <attachid>432</attachid>
    <who name="Kenji">kenji.chen</who>
    <bug_when>2019-11-12 21:35:50 +0000</bug_when>
    <thetext>Created attachment 432
FitGen.c patch file

fixing the help message in correct parameter order</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10915</commentid>
    <comment_count>6</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-01-16 08:09:21 +0000</bug_when>
    <thetext>Hi - shouldn&apos;t this be in the resolved state?  I see the change checked into EDK2Platforms repo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10919</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-16 08:51:47 +0000</bug_when>
    <thetext>Yes. This has been fixed at 2f80712296cf1e6f61eb3c98de95c36eb894feb0.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>424</attachid>
            <date>2019-11-01 03:27:17 +0000</date>
            <delta_ts>2019-11-01 03:27:17 +0000</delta_ts>
            <desc>FitGen.c patch file</desc>
            <filename>0001-Enhance-FitGen.patch</filename>
            <type>text/plain</type>
            <size>6496</size>
            <attacher name="Kenji">kenji.chen</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>429</attachid>
            <date>2019-11-12 20:44:32 +0000</date>
            <delta_ts>2019-11-12 20:44:32 +0000</delta_ts>
            <desc>FitGen.c patch file</desc>
            <filename>0001-FitGen-Add-FitGen-feature-to-support-uCode-Capsule-U_20191113.patch</filename>
            <type>text/plain</type>
            <size>9272</size>
            <attacher name="Kenji">kenji.chen</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>430</attachid>
            <date>2019-11-12 20:51:19 +0000</date>
            <delta_ts>2019-11-12 20:51:19 +0000</delta_ts>
            <desc>FitGen.c patch file</desc>
            <filename>0001-FitGen-Add-FitGen-feature-to-support-uCode-Capsule-U_20191113_1.patch</filename>
            <type>text/plain</type>
            <size>9272</size>
            <attacher name="Kenji">kenji.chen</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>431</attachid>
            <date>2019-11-12 20:58:44 +0000</date>
            <delta_ts>2019-11-12 20:58:44 +0000</delta_ts>
            <desc>FitGen.c patch file</desc>
            <filename>0001-FitGen-Add-FitGen-feature-to-support-uCode-Capsule-U_20191113_1.patch</filename>
            <type>text/plain</type>
            <size>7181</size>
            <attacher name="Kenji">kenji.chen</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>432</attachid>
            <date>2019-11-12 21:35:50 +0000</date>
            <delta_ts>2019-11-12 21:35:50 +0000</delta_ts>
            <desc>FitGen.c patch file</desc>
            <filename>0001-FitGen-Add-FitGen-feature-to-support-uCode-Capsule-U_20191113_1.patch</filename>
            <type>text/plain</type>
            <size>7099</size>
            <attacher name="Kenji">kenji.chen</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2114</bug_id>
          
          <creation_ts>2019-08-22 14:49:08 +0000</creation_ts>
          <short_desc>NULL pointer de-reference in MinPlatformPkg - MultiBoardInitSupportLib</short_desc>
          <delta_ts>2019-08-26 21:36:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9159</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 14:49:08 +0000</bug_when>
    <thetext>The pointer PpiListBoardDetect may be dereferenced when NULL in RegisterBoardDetect() in PeiMultiBoardInitSupportLib.c. 

/edk2-platforms/Platform/Intel/MinPlatformPkg/PlatformInit/Library/MultiBoardInitSupportLib/PeiMultiBoardInitSupportLib.c.

The pointer must not be dereferenced if NULL. The ASSERT does not break control flow and is often not active on a RELEASE production image:

  EFI_STATUS                 Status;
  EFI_PEI_PPI_DESCRIPTOR     *PpiListBoardDetect;

  PpiListBoardDetect = AllocatePool (sizeof(EFI_PEI_PPI_DESCRIPTOR));
  ASSERT (PpiListBoardDetect != NULL);

  PpiListBoardDetect-&gt;Flags = (EFI_PEI_PPI_DESCRIPTOR_PPI | EFI_PEI_PPI_DESCRIPTOR_TERMINATE_LIST);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9160</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 14:50:29 +0000</bug_when>
    <thetext>Fix is work in progress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9162</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 15:00:15 +0000</bug_when>
    <thetext>There&apos;s a similar issue in PeiMultiBoardInitSupportLib.c in RegisterBoardPreMemInit ():

  EFI_PEI_PPI_DESCRIPTOR     *PpiListBoardInitPreMem;

  PpiListBoardInitPreMem = AllocatePool (sizeof(EFI_PEI_PPI_DESCRIPTOR));
  ASSERT (PpiListBoardInitPreMem != NULL);

  PpiListBoardInitPreMem-&gt;Flags = (EFI_PEI_PPI_DESCRIPTOR_PPI | EFI_PEI_PPI_DESCRIPTOR_TERMINATE_LIST);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9163</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 15:01:46 +0000</bug_when>
    <thetext>Similar issue in PeiMultiBoardInitSupportLib.c in RegisterBoardPostMemInit ():

  EFI_PEI_PPI_DESCRIPTOR     *PpiListBoardInitPostMem;

  PpiListBoardInitPostMem = AllocatePool (sizeof(EFI_PEI_PPI_DESCRIPTOR));
  ASSERT (PpiListBoardInitPostMem != NULL);

  PpiListBoardInitPostMem-&gt;Flags = (EFI_PEI_PPI_DESCRIPTOR_PPI | EFI_PEI_PPI_DESCRIPTOR_TERMINATE_LIST);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9227</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-23 19:25:04 +0000</bug_when>
    <thetext>Patch sent for review - https://edk2.groups.io/g/devel/message/46340</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9256</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-26 21:36:18 +0000</bug_when>
    <thetext>Commited - https://github.com/tianocore/edk2-platforms/commit/f6563a0fe90d40d2963837d961b4fd8f99bb0dd5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2688</bug_id>
          
          <creation_ts>2020-04-23 01:46:26 +0000</creation_ts>
          <short_desc>Remove AdvancedFeaturePkg/TemporaryBuildWorkaround</short_desc>
          <delta_ts>2020-05-08 02:15:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>heng.luo</cc>
          <deadline>2020-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12286</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-04-23 01:46:26 +0000</bug_when>
    <thetext>TemporaryBuildWorkaround was added when BaseTools didn&apos;t support to reference a PCD defined in a concrete advanced feature package in AdvancedFeaturePkg DSC file if no component INF file listed in AdvancedFeaturePkg DSC references the PCD.

Now since BaseTools has been enhanced to add such support through new &quot;[Packages]&quot; section in DSC file, the workaround component can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12287</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-04-23 01:48:14 +0000</bug_when>
    <thetext>Assign to Eric for further dispatch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12292</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-04-23 02:54:54 +0000</bug_when>
    <thetext>Heng,

can you help to remove this workaround?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12294</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-04-23 03:08:57 +0000</bug_when>
    <thetext>*** Bug 2684 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12297</commentid>
    <comment_count>4</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-04-23 04:44:24 +0000</bug_when>
    <thetext>patches are sent out for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12448</commentid>
    <comment_count>5</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-05-08 02:15:00 +0000</bug_when>
    <thetext>SHA-1: 16282f58541575b914d1cbe673e4fd58679f1752

* Remove temporary build workaround in Features/Intel/AdvancedFeaturePkg

[edk2-devel] [PATCH]
From: Heng Luo &lt;heng.luo@intel.com&gt;

Ref: https://bugzilla.tianocore.org/show_bug.cgi?id=2688

Remove Features/Intel/AdvancedFeaturePkg/TemporaryBuildWorkaround,
Add Features/Intel/AdvancedFeaturePkg/Include/AdvancedFeaturesPcd.dsc
to support Feature PCDs.
Use AdvancedFeaturePkg/Include/AdvancedFeaturesPcd.dsc instead of
AdvancedFeaturePkg/TemporaryBuildWorkaround/TemporaryBuildWorkaround.dsc

Cc: Liming Gao &lt;liming.gao@intel.com&gt;
Cc: Eric Dong &lt;eric.dong@intel.com&gt;
Cc: Ray Ni &lt;ray.ni@intel.com&gt;
Signed-off-by: Heng Luo &lt;heng.luo@intel.com&gt;
Reviewed-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2690</bug_id>
          
          <creation_ts>2020-04-23 02:20:27 +0000</creation_ts>
          <short_desc>Remove duplicated advanced features under Platform/Intel/</short_desc>
          <delta_ts>2020-05-09 22:30:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          <deadline>2020-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12290</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-04-23 02:20:27 +0000</bug_when>
    <thetext>Today there are 3 duplicated and obsolete advanced feature packages under Platform/Intel/:
1. AdvancedFeaturePkg
2. DebugFeaturePkg
3. UserInterfaceFeaturePkg

These duplicated packages should be removed.

Platforms should use the counterpart proper advanced feature packages in Features/Intel/ directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12291</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-04-23 02:21:00 +0000</bug_when>
    <thetext>Transfer to Eric for further dispatch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12467</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-05-09 22:30:30 +0000</bug_when>
    <thetext>SHA-1: 51da3c318e3d2b0a3cb527b383358f5a298e182c

* Platform/Intel: Remove deprecated packages

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2690

After moving the AdvancedFeaturePkg, UserInterfaceFeaturePkg
and DebugFeaturePkg to Features/Intel Package, remove deprecated
packages in Platform/Intel folder.

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2115</bug_id>
          
          <creation_ts>2019-08-22 15:07:50 +0000</creation_ts>
          <short_desc>NULL pointer de-reference in UserInterfacePkg - UserAuthenticationDxe</short_desc>
          <delta_ts>2019-08-29 01:23:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>UserInterfaceFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9164</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 15:07:50 +0000</bug_when>
    <thetext>The pointer UserInputPassword may be dereferenced in UserAuthenticationCallback() in UserAuthentication2Dxe.c

edk2-platforms/Platform/Intel/UserInterfaceFeaturePkg/UserAuthentication/UserAuthentication2Dxe.c


The pointer must not be dereferenced if NULL.

.  .  .
          UserInputPassword = HiiGetString (mUserAuthenticationData-&gt;HiiHandle, Value-&gt;string, NULL);
          if ((StrLen (UserInputPassword) &gt;= PASSWORD_MAX_SIZE)) {
            Status = EFI_NOT_READY;
            break;
          }
          if (UserInputPassword[0] == 0) {
.  .  .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9165</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 15:08:21 +0000</bug_when>
    <thetext>Fix is work in progress.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9228</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-23 20:51:29 +0000</bug_when>
    <thetext>Patch is created. Validating the changes before sending it for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9258</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-26 21:37:35 +0000</bug_when>
    <thetext>Patch sent for code review - https://edk2.groups.io/g/devel/message/46394</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9387</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-29 01:23:09 +0000</bug_when>
    <thetext>Fixed committed - https://github.com/tianocore/edk2-platforms/commit/8c718ea66d631261ac5547b73bbee302ead1bc2d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2162</bug_id>
          
          <creation_ts>2019-09-06 21:54:30 +0000</creation_ts>
          <short_desc>Fix SimicsOpenBoardPkg GCC Build Failures</short_desc>
          <delta_ts>2019-09-19 17:29:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to>david.y.wei</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>prince.agyeman</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9489</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-06 21:54:30 +0000</bug_when>
    <thetext>This is currently filed under the Placeholder component since this package is not in the Component list yet.

The SimicsOpenBoardPkg build fails with multiple errors. All build failures must be fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9491</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-06 22:03:03 +0000</bug_when>
    <thetext>Issue confirmed with ownership moved to David.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9733</commentid>
    <comment_count>2</comment_count>
    <who name="">david.y.wei</who>
    <bug_when>2019-09-19 17:29:08 +0000</bug_when>
    <thetext>MinPlatform PKG now use gEfiSmmSmramMemoryGuid instead of 
gEfiSmmPeiSmramMemoryReserveGuid to build memory HOB.
SimicsOpenBoardPkg need to update for it accordingly.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2911</bug_id>
          
          <creation_ts>2020-08-20 11:27:34 +0000</creation_ts>
          <short_desc>EDKII Redfish Config Handler Protocol</short_desc>
          <delta_ts>2021-04-12 04:26:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>RedfishPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13477</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 11:27:34 +0000</bug_when>
    <thetext>EFI Redfish Config Handler Protocol is the centralized management which allow the EFI Redfish Feature drivers (e.g. Redfish BIOS, Redfish Boot Option and etc.) to registered itself to EFI Redfish Config Handler driver in order to provision the Redfish resource, consume the Redfish proerties and modificy the BIOS settings to Redfish service.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13532</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 22:23:54 +0000</bug_when>
    <thetext>This one has passed code review in Tiano Design meeting. Next step is to push the changes into edk2 staging first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15128</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-02-24 06:51:37 +0000</bug_when>
    <thetext>Header file committed @69637f91
Driver is not committed yet</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15537</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-07 02:36:04 +0000</bug_when>
    <thetext>This is new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15591</commentid>
    <comment_count>4</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-12 04:26:09 +0000</bug_when>
    <thetext>@2072c22a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2099</bug_id>
          
          <creation_ts>2019-08-21 02:16:16 +0000</creation_ts>
          <short_desc>BaseTools: The error message for missing library instance is incorrect</short_desc>
          <delta_ts>2019-08-22 23:29:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>glin</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ming.shao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9107</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-21 02:16:16 +0000</bug_when>
    <thetext>If the instance of a library class is not found in dsc file, but it&apos;s consumed by a driver, build tool should report meaningful error message in autogen phase. 

Now, the error message is reported in Link phase and error message is confusing.

LINK : error LNK2001: unresolved external symbol _ModuleEntryPoint

This is a regression issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9108</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-21 02:16:57 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9161</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-22 14:58:27 +0000</bug_when>
    <thetext>patch on the list:

[edk2-devel] [Patch V2][edk2-stable201908]
BaseTools: Incorrect error message for library instance not found

http://mid.mail-archive.com/20190822040046.12628-1-bob.c.feng@intel.com
https://edk2.groups.io/g/devel/message/46196</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9167</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-22 15:11:51 +0000</bug_when>
    <thetext>*** Bug 2112 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9201</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-22 23:29:20 +0000</bug_when>
    <thetext>fixed at abc0155b034230128ad4aaa51ac05a315acfa7c1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2912</bug_id>
          
          <creation_ts>2020-08-20 11:42:14 +0000</creation_ts>
          <short_desc>Implementation of UEFI Redfish Host Interface Dxe</short_desc>
          <delta_ts>2020-11-05 20:27:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13478</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 11:42:14 +0000</bug_when>
    <thetext>This is the abstract driver to consume the contents of SMBIOS type 42h device descriptor and protocol type data provided by PlatformHostInterfaceLib, and create SMBIOS type 42 record through EFI SMBIOS protocol.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13533</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 22:25:11 +0000</bug_when>
    <thetext>This one has passed code review in Tiano Design meeting. Next step is to add the code into edk2-staging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13942</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-10-12 21:54:42 +0000</bug_when>
    <thetext>This one doesn&apos;t require the corresponding body in UEFI spec. This is the edk2 implementation of creating SMBIOS 42h to collaborate with EFI Redfish Discover Protocol. (UEFI spec 31.3).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14244</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-05 20:27:09 +0000</bug_when>
    <thetext>This is EDK2 implementation, doesn&apos;t require the change in spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14245</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-05 20:27:44 +0000</bug_when>
    <thetext>Fix it @d4fae44d0dc260b66046fc233f09897b38d2b7d2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2914</bug_id>
          
          <creation_ts>2020-08-20 12:05:11 +0000</creation_ts>
          <short_desc>Reference implementation of EFI SOURCE CODING PROTOCOL</short_desc>
          <delta_ts>2021-01-10 21:58:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Reference Implementation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13480</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 12:05:11 +0000</bug_when>
    <thetext>The centralized EFI driver provides protocols of Compress/Decompress of the algorithms registered to this driver. Caller can coding the source content with the specific compress algorithm, or decompress the coded source content.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13526</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 22:10:10 +0000</bug_when>
    <thetext>Start the reference implemenation in Edk2. Plan to design review in TianoCore. 
100% disucssion and implemenation in Edk2 community first.

How many algorithmes are defined in HTTP?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14770</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-10 21:58:57 +0000</bug_when>
    <thetext>Use library instance for now</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2124</bug_id>
          
          <creation_ts>2019-08-23 14:41:30 +0000</creation_ts>
          <short_desc>Fix CoffeelakeSiliconPkg GCC Build Errors</short_desc>
          <delta_ts>2019-08-29 01:24:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>CoffelakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9216</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-23 14:41:30 +0000</bug_when>
    <thetext>The CoffeelakeSiliconPkg currently does not build successfully against GCC5 on Ubuntu 16.04 &amp; 18.04 LTS due to multiple errors. All build failures must be resolved such that the code builds successfully.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9226</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-23 19:12:03 +0000</bug_when>
    <thetext>Fixes are work in progress.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9259</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-26 21:39:26 +0000</bug_when>
    <thetext>Patch sent for review - https://edk2.groups.io/g/devel/message/46369</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9389</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-29 01:24:18 +0000</bug_when>
    <thetext>Fixed in commit https://github.com/tianocore/edk2-platforms/commit/541552c27c76688a16b6ca95a6472cd176c05c1b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2040</bug_id>
          <alias>CVE-2019-14588</alias>
          <creation_ts>2019-08-01 01:48:29 +0000</creation_ts>
          <short_desc>IA32_FEATURE_CONTROL stays unlocked in S3 after a warm reset</short_desc>
          <delta_ts>2019-09-25 02:44:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1305</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>jian.j.wang</cc>
    
    <cc>john.mathews</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>stephano</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8672</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-08-01 01:48:29 +0000</bug_when>
    <thetext>Function LockFeatureControlRegisterInitialize in CpuCommonFeaturesLib has following code logic:


if (MsrRegister[ProcessorNumber].Bits.Lock == 0) {
  CPU_REGISTER_TABLE_WRITE_FIELD (
    ProcessorNumber,
    Msr,
    MSR_IA32_FEATURE_CONTROL,
    MSR_IA32_FEATURE_CONTROL_REGISTER,
    Bits.Lock,
    1
  );
}


1. In first normal boot, the Bits.Lock is 0, 1 will be added into the register table and then will set to the MSR.

2. When do warm restart, in normal boot the Bits.Lock is 1, so it will not be added into the register table.

3. Do S3 after restart, the Bits.Lock is 0 and Bits.Lock is not added in register table, so it&apos;s still 0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8674</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-08-01 02:08:27 +0000</bug_when>
    <thetext>From this issue itself perspective, we think it&apos;s a security issue. But currently there&apos;s no real platforms from Intel employing this feature (newly introduced in stable201905). Please point out if there&apos;re other platforms out there using this feature. If none, we will disclose this issue and publish the solution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8827</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-07 07:42:32 +0000</bug_when>
    <thetext>The OvmfPkg DSC files do not reference

  UefiCpuPkg/Library/CpuCommonFeaturesLib/CpuCommonFeaturesLib.inf

so OVMF does not contain the problematic code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8845</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-08-07 21:54:35 +0000</bug_when>
    <thetext>Laszlo, 

Thanks for the input. Since I got no report that any other platforms is using this feature so far, I&apos;ll put this track into public.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9275</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 17:44:23 +0000</bug_when>
    <thetext>Has this been fixed in commit 9c90d39b600bd33c7e0600865e6d860d46ce95f3?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9381</commentid>
    <comment_count>5</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-28 12:38:03 +0000</bug_when>
    <thetext>Yes, fixed in commit 9c90d39b600bd33c7e0600865e6d860d46ce95f3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2086</bug_id>
          
          <creation_ts>2019-08-16 00:53:15 +0000</creation_ts>
          <short_desc>Latest FitGen Tool v0.55 does not support Extended FV Headers</short_desc>
          <delta_ts>2020-02-06 22:17:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jorge Hdez">jorge.hernandez.beltran</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>paul.a.lohr</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9025</commentid>
    <comment_count>0</comment_count>
    <who name="Jorge Hdez">jorge.hernandez.beltran</who>
    <bug_when>2019-08-16 00:53:15 +0000</bug_when>
    <thetext>Background:

IFWI building process uses FitGen tool to create and include the FIT table inside the UEFI FW region.

FIT table includes entries for ACM modules, uCode patches, IAFW KM, BPM among others.

FitGen tool processes MICROCODE_FV to obtain the uCode patch offset and size.

Recently IFWI building scripts were updated to add a GUID to the uCode patch inside MICROCODE_FV. As consequence new MICROCODE_FV has now an extended FV header.

Latest FitGen Tool v0.55 is no able to process the new MICROCODE_FV and locate the uCode patch within it.



Requirement(s):

FItGen tool must be capable of processing firmware volumes (FV) with or  without the extended header.



Rationale (Justification):

FitGen is the chosen Intel tool to create and include the FIT table into UEFI FW region for all Intel projects.

Extended FV Header is part of the UEFI specification.

OBB Verification requires FitGen tool to be capable of processing FVs with extended header.



Definitions (terms):

IFWI - Integrated Firmware Image
FIT - Firmware Interface Table
FV - Firmware Volume
ACM - Authenticated Code Module
IAFW - Intel Architecture Firmware
KM - Key Manifest
BPM - Boot Policy Manifest
OBB - Operational Boot Block



Notes:

Currently there are 2 FitGen tool versions in the repository
	1. Intel/BpCommonPkg/Tools/FitGen/FitGen.exe
	2. FDBin/Tools/FitGen/FitGen.exe

Internal IFWI building process (CRB) uses FitGen tool from location 2 while external IFWI building process (IPC) uses FitGen toll from location 1

Internal FitGen tool (location 2) already supports the extended FV header and the change can be ported into official releasable FitGen tool (location 1)

For reference see:

	1. Change ID, SHA-1: 06f63bb505387237178e45d2c72cc82eb3e6c89c
	2. Code Review at https://git-amr-7.devtools.intel.com/gerrit/#/c/48669/
	3. server_bios.bugeco https://hsdes.intel.com/appstore/article/#/2007820059</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9187</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-22 20:35:50 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10367</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-08 01:53:36 +0000</bug_when>
    <thetext>This is an issue in FitGen tool to support FV with the extension header.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10918</commentid>
    <comment_count>3</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-01-16 08:21:14 +0000</bug_when>
    <thetext>How are we doing on this?  We are trying to check in all changes to reduce our usage to a single tool.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10927</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-16 19:41:30 +0000</bug_when>
    <thetext>I plan to fix it in 2020 Q1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10947</commentid>
    <comment_count>5</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-01-17 15:39:43 +0000</bug_when>
    <thetext>Hi - we want this checked in by 2020-002 EDK2 Stable Tag.  Please confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11154</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 22:17:07 +0000</bug_when>
    <thetext>Fixed at edk2-platform 2253a252a61bdc3118719b834106fda372180030. FitGen version 0.58.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2109</bug_id>
          
          <creation_ts>2019-08-22 01:00:04 +0000</creation_ts>
          <short_desc>Fix KabylakeOpenBoardPkg GCC Build Error</short_desc>
          <delta_ts>2019-08-23 19:11:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9144</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 01:00:04 +0000</bug_when>
    <thetext>The KabylakeOpenBoardPkg currently does not build successfully against GCC5 on Ubuntu 16.04 &amp; 18.04 LTS due to the following error:

/edk2-platforms/Platform/Intel/KabylakeOpenBoardPkg/FspWrapper/Library/SecFspWrapperPlatformSecLib/FspWrapperPlatformSecLib.c: In function ‘SecPlatformMain’:
/edk2-platforms/Platform/Intel/KabylakeOpenBoardPkg/FspWrapper/Library/SecFspWrapperPlatformSecLib/FspWrapperPlatformSecLib.c:177:38: error: lvalue required as left operand of assignment
     (UINT8 *) CopyDestinationPointer += sizeof(mPeiCoreFvLocationPpiList);


Furthermore, there&apos;s an error due to unused EFI_STATUS local variables in edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\Library\BaseGpioExpanderLib\BaseGpioExpanderLib.c.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9145</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 01:00:39 +0000</bug_when>
    <thetext>Fixes are work in progress.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9225</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-23 19:11:39 +0000</bug_when>
    <thetext>Changes submitted in the following commit - https://github.com/tianocore/edk2-platforms/commit/ea402cccfb57e0bd7821cff4777dabdb214e09a7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2110</bug_id>
          
          <creation_ts>2019-08-22 01:04:14 +0000</creation_ts>
          <short_desc>Fix WhiskeylakeOpenBoardPkg GCC Build Errors</short_desc>
          <delta_ts>2019-08-29 01:23:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9146</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 01:04:14 +0000</bug_when>
    <thetext>The WhiskeylakeOpenBoardPkg currently does not build successfully against GCC5 on Ubuntu 16.04 &amp; 18.04 LTS due to multiple errors. All build failures must be resolved such that the code builds successfully.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9147</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 01:04:29 +0000</bug_when>
    <thetext>Fixes are work in progress.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9260</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-26 21:39:52 +0000</bug_when>
    <thetext>Patch sent for review - https://edk2.groups.io/g/devel/message/46370</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9388</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-29 01:23:55 +0000</bug_when>
    <thetext>Fixed in commit https://github.com/tianocore/edk2-platforms/commit/4bbedf4fc994f2379c20db15e66adeeec98ffa59</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2906</bug_id>
          
          <creation_ts>2020-08-20 01:48:58 +0000</creation_ts>
          <short_desc>Implementation of UEFI spec 31.1 Redfish Discover Protocol</short_desc>
          <delta_ts>2021-04-12 03:30:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13470</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 01:48:58 +0000</bug_when>
    <thetext>- Create a new package under edk2 master, named &quot;RedfishPkg&quot;.
- Implement EFI Redfish Discover Protocol for UEFI spec 31.1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13529</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 22:19:15 +0000</bug_when>
    <thetext>Abner: will send RFC first to add new RedfishPkg, and specify what contents will be added into this package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15540</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-07 02:47:37 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15590</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-12 03:30:54 +0000</bug_when>
    <thetext>At Commit7e7b729f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2907</bug_id>
          
          <creation_ts>2020-08-20 01:51:55 +0000</creation_ts>
          <short_desc>Implementation of UEFI spec 29.7.3 EFI_REST_JSON_STRUCTURE_PROTOCOL</short_desc>
          <delta_ts>2020-11-08 20:35:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13471</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 01:51:55 +0000</bug_when>
    <thetext>Implement EFI Redfish JSON Structure Converter protocol for UEFI spec 31.2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13472</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 02:05:14 +0000</bug_when>
    <thetext>type it is EFI_REST_JSON_STRUCTURE_PROTOCOL in UEFI spec 29.7.3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13528</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 22:16:12 +0000</bug_when>
    <thetext>Abner: will work on it to support new spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14243</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-05 20:22:43 +0000</bug_when>
    <thetext>Fix it at edk2 5692db78a89eaa4780aa01321226899283d68199</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14270</commentid>
    <comment_count>4</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-11-08 20:12:23 +0000</bug_when>
    <thetext>ed038688
5692db78
4f808c62</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14273</commentid>
    <comment_count>5</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-11-08 20:35:00 +0000</bug_when>
    <thetext>Fix at below commits,
ed038688
5692db78
4f808c62</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2908</bug_id>
          
          <creation_ts>2020-08-20 02:07:01 +0000</creation_ts>
          <short_desc>Implementation of UEFI spec 29.7.2 EFI_REST_EX_PROTOCOL</short_desc>
          <delta_ts>2020-12-10 01:07:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13473</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 02:07:01 +0000</bug_when>
    <thetext>Implement EFI_REST_EX_PROTOCOL (HTTP instance) for UEFI spec 29.7.2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13530</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 22:19:54 +0000</bug_when>
    <thetext>Abner will work the patch for this support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14544</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-10 01:07:52 +0000</bug_when>
    <thetext>Fix at commit 5f1250b2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2583</bug_id>
          
          <creation_ts>2020-03-09 02:56:46 +0000</creation_ts>
          <short_desc>Abstract DxeIpl from processor architecture</short_desc>
          <delta_ts>2020-06-01 22:48:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>dandan.bi</cc>
    
    <cc>daniel.schaefer</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11627</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-03-09 02:56:46 +0000</bug_when>
    <thetext>Currently, DxeIpl has bindings for different architectures, this results in MdeModulePkg has the dependence with architecture packages such as ArmPkg or RiscVPkg. This also leads to CI testing error when package dependency check. Provide a default DxeIplHandoff library to abstract architecture from DxeIpl and provide the library instance for architecture-specific implementation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11628</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-03-09 03:00:14 +0000</bug_when>
    <thetext>will send patches for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12766</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-06-01 22:48:28 +0000</bug_when>
    <thetext>Dropped and replaced by another approach.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2909</bug_id>
          
          <creation_ts>2020-08-20 08:46:52 +0000</creation_ts>
          <short_desc>TlsChildHandle is not cleared to NULL when HTTP EFI instance is reset</short_desc>
          <delta_ts>2020-12-02 05:56:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>nickle.wang</cc>
    
    <cc>pbrobinson</cc>
    
    <cc>rebecca</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13474</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 08:46:52 +0000</bug_when>
    <thetext>When Http-&gt;Configure() is invoked with HttpConfigData set to NULL to reset the EFI HTTP instance, TLS child insatnce is destoryed but
HttpInstance-&gt;TlsChildHandle is not set to NULL.
After reconfiguring HTTP through Http-&gt;Configure() and sending the HTTP request to HTTPS URL, Tls child insatnce is not re-created becasue HttpInstance-&gt;TlsChildHandle is not NULL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13520</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 21:43:47 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13924</commentid>
    <comment_count>2</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-10-09 05:43:14 +0000</bug_when>
    <thetext>Patch for issue merged:
https://edk2.groups.io/g/devel/message/66059
https://github.com/tianocore/edk2/commit/5df413119ec80cb462bf9c888ef5574f8ce8ae2e
https://github.com/tianocore/edk2/pull/995</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13925</commentid>
    <comment_count>3</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-10-09 05:50:45 +0000</bug_when>
    <thetext>Fixed. Closing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13927</commentid>
    <comment_count>4</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-10-09 05:56:01 +0000</bug_when>
    <thetext>*** Bug 1917 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14271</commentid>
    <comment_count>5</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-11-08 20:14:09 +0000</bug_when>
    <thetext>5df41311</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2986</bug_id>
          
          <creation_ts>2020-09-24 15:54:19 +0000</creation_ts>
          <short_desc>EccCheck should not revert staged and local changes</short_desc>
          <delta_ts>2022-01-14 20:31:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3746</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>macarl</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13783</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-09-24 15:54:19 +0000</bug_when>
    <thetext>Right now EccCheck is destructive when it calculates a diff. EccCheck should either not be destructive, or fail to run in a dirty environment. Its current behavior may destroy work also makes it difficult to incrementally solve ECC errors.

Ideally, the &quot;what files have changed since X&quot; would be generalized and added to Edk2ToolLib or Edk2ToolExt, since a number of CI and PR gate checks implement their own versions of this functionality.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13843</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-29 21:44:05 +0000</bug_when>
    <thetext>Agree this issue. Bret: have you any proposal to fix this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13848</commentid>
    <comment_count>2</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-09-30 00:19:06 +0000</bug_when>
    <thetext>I suppose my first question would be:
Why does it do that now? Is it a bug, or intentional?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13849</commentid>
    <comment_count>3</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-09-30 00:35:51 +0000</bug_when>
    <thetext>I can definitely agree that this is a pretty painful experience as a local developer. I ran CI to validate my changes and had all my changes wiped out.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13850</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-30 02:07:21 +0000</bug_when>
    <thetext>This is the implementation limitation. In open CI, ECC supports to skip some source files or directories to be scanned. Current implementation checkouts the code, then remove the skipped source files and directories, next run ECC checker to get ECC scan result, last type &quot;git reset --hard&quot; to restore all files. To avoid the issue to run open CI in the local environment, the developer needs to do the local commit message, then run open CI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17797</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-22 17:00:14 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17798</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-11-22 19:10:11 +0000</bug_when>
    <thetext>There are a number of functional and performance issues with EccCheck

1) For the git state corruption issue, a design change is required.
   Instead of modifying the local git source tree to implement
   the IgnoredFiles feature, the package that will be checked with
   ECC should be copied to a temporary directory and the IgnoredFiles
   should be removed from the temporary directory.

   a) Python supports a tempfile module that can return a temporary
      directory.  This module works well when used locally, but does
      not seem to work when used with azure pipelines windows agents.
      This may be related to the use of drive letters and the drive
      letter for the sources are D: and the temporary directory
      created is on C:
   b) Instead of using python tempfile module, create a temporary
      directory in the Build output directory called ecctemp.

2) The ECC configuration file called exception.xml in 
   BaseTools/Source/Python/Ecc is updated in place with additional
   exceptions from the EccCheck tool and from the IgnoreErrors
   section of the package YAML file.  This shows up as a modified
   file by git.  Instead, make a copy of exception.xml into the
   temporary directory and update that copy with the additional
   exceptions leaving the BaseTools directory unmodified.

3) Performance issues and log size issues running the git diff
   commands.

   The git diff command is used to determine the set of modified
   directories in a package and the set of modified lines to 
   include in the scan results.  The current implementation
   redirects the git diff output to stdout, which for large
   patch sets is slow and generates a large build log file.

   The recommended solution is to use the --output of git diff
   to generate the git diff output into a file in the temporary
   directory.

4) When the ECC command line tool is run, it creates some temporary
   output files in the current working directory.  If the current 
   working directory is in one of the git repo local directories
   these temp files will show up as untracked files.

   In order to prevent the creation of untracked files, the 
   working directory when ECC is run should be set to the ecctemp
   directory in the Build output directory.  The Build output
   directory is already ignored by .gitignore.

5) Managing the temporary directory
   a) If Build/ecctemp is present when EccCheck is started, then
      remove the existing temporary directory
   b) When EccCheck exits, always remove the temporary directory.
   c) Add try/except to RunPlugin to guarantee that normal exits,
      exceptions from Keyboard Interrupt, and all unexpected exceptions
      are caught and the temp directory is removed.

6) Remove duplicate scans of same folders in GetModifyDir().
   If a lib/module has multiple directory levels and there are
   source file changes al multiple levels, then ECC will be
   invoked multiple times and will scan the same source files
   more than once.  Update GetModifyDir() to filter out these
   the redundant set of modified directories.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18159</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:31:14 +0000</bug_when>
    <thetext>GitHub PR Merged:
    https://github.com/tianocore/edk2/pull/2216

Commits:
    https://github.com/tianocore/edk2/pull/2216/commits/db62ddb8c34e176d51909a1214f7669705a79a0a
    https://github.com/tianocore/edk2/pull/2216/commits/53d0df7942a604a2bc966e50117cbfa502d211af
    https://github.com/tianocore/edk2/pull/2216/commits/0603fd28a58f93d9e1d12b0d456c067f9d87af2b

Email code review V2:
    https://edk2.groups.io/g/devel/message/83952

Email code review V1:
    https://edk2.groups.io/g/devel/message/83924</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2910</bug_id>
          
          <creation_ts>2020-08-20 10:47:57 +0000</creation_ts>
          <short_desc>EDKII Redfish Credential Protocol (changed from EFI Redfish Credential Protocol)</short_desc>
          <delta_ts>2020-12-16 10:15:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Reference Implementation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13475</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 10:47:57 +0000</bug_when>
    <thetext>This protocol is desgined to prvide interfacs to EFI Redfish Configration Handler procotol or EFI Redfish clients to acquire crendential for connecting to Redfish service.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13531</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 22:21:44 +0000</bug_when>
    <thetext>This one has passed code review in Tiano Design meeting. The code has been ready in edk2 staging. Abner will check the code first process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14500</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-08 02:44:22 +0000</bug_when>
    <thetext>Change to EDKII Redfish Credential Protocol from EFI Redfish Credential Protocol.

Scops this protocol as the edk2 protocol because the consumers of this protocol are edk2 Redfish feature drivers which are edk2-specific implementation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14601</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-16 10:15:12 +0000</bug_when>
    <thetext>Commit 2255a2b1-e6ae24e1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2142</bug_id>
          
          <creation_ts>2019-08-29 20:50:47 +0000</creation_ts>
          <short_desc>ECC tool will report error and hang when scan code in AdvancedFeaturePkg.dec</short_desc>
          <delta_ts>2020-02-13 20:33:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9405</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-08-29 20:50:47 +0000</bug_when>
    <thetext>Code in AdvancedFeaturePkg.dec:
gAdvancedFeaturePkgTokenSpaceGuid.PcdSmbiosType0BiosInformation|{0x0}|SMBIOS_TABLE_TYPE0|0x80010000 {
    &lt;HeaderFiles&gt;
      IndustryStandard/SmBios.h
    &lt;Packages&gt;
      MdePkg/MdePkg.dec
      AdvancedFeaturePkg/AdvancedFeaturePkg.dec
  }

ECC tool report error and hang:
 EccMain.py...
 C:\Work\Edk2ECC\AdvancedFeaturePkg\AdvancedFeaturePkg.dec(33): error 3000: No token space GUID or PCD name specified
            &lt;HeaderFiles&gt; (&lt;TokenSpaceGuidCName&gt;.&lt;PcdCName&gt;|&lt;DefaultValue&gt;|&lt;DatumType&gt;|&lt;Token&gt;)
 
 
 EccMain.py...
 C:\Work\Edk2ECC\AdvancedFeaturePkg\AdvancedFeaturePkg.dec(33): error 3000: No PCD Datum information given
            &lt;HeaderFiles&gt; (&lt;TokenSpaceGuidCName&gt;.&lt;PcdCName&gt;|&lt;DefaultValue&gt;|&lt;DatumType&gt;|&lt;Token&gt;)
 Traceback (most recent call last):
   File &quot;C:\Python27\lib\runpy.py&quot;, line 174, in _run_module_as_main
     &quot;__main__&quot;, fname, loader, pkg_name)
   File &quot;C:\Python27\lib\runpy.py&quot;, line 72, in _run_code
     exec code in run_globals
   File &quot;C:\Work\Edk2\BaseTools\Source\Python\Ecc\EccMain.py&quot;, line 410, in &lt;module&gt;
     Ecc = Ecc()
   File &quot;C:\Work\Edk2\BaseTools\Source\Python\Ecc\EccMain.py&quot;, line 94, in __init__
     self.DetectOnlyScanDirs()
   File &quot;C:\Work\Edk2\BaseTools\Source\Python\Ecc\EccMain.py&quot;, line 130, in DetectOnlyScanDirs
     self.BuildDatabase()
   File &quot;C:\Work\Edk2\BaseTools\Source\Python\Ecc\EccMain.py&quot;, line 146, in BuildDatabase
     self.BuildMetaDataFileDatabase(SpeciDirs)
   File &quot;C:\Work\Edk2\BaseTools\Source\Python\Ecc\EccMain.py&quot;, line 198, in BuildMetaDataFileDatabase
     self.MetaFile.Start()
   File &quot;C:\Work\Edk2\BaseTools\Source\Python\Ecc\MetaFileWorkspace\MetaFileParser.py&quot;, line 1542, in Start
     self._SectionParser[self._SectionType[0]](self)
   File &quot;C:\Work\Edk2\BaseTools\Source\Python\Ecc\MetaFileWorkspace\MetaFileParser.py&quot;, line 40, in MacroParser
     Parser(self)
   File &quot;C:\Work\Edk2\BaseTools\Source\Python\Ecc\MetaFileWorkspace\MetaFileParser.py&quot;, line 1722, in _PcdParser
     PtrValue = ValueRe.findall(TokenList[1])
 IndexError: list index out of range
 Process exited with code 1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9433</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-02 20:30:38 +0000</bug_when>
    <thetext>Zhiju takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10838</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-01-09 23:48:40 +0000</bug_when>
    <thetext>patch in fe20f46795125812cc18476d2ece5f8f8724b1d1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11222</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-02-11 22:06:14 +0000</bug_when>
    <thetext>patch link in https://edk2.groups.io/g/devel/message/53338</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11255</commentid>
    <comment_count>4</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-02-13 20:33:25 +0000</bug_when>
    <thetext>fixed it in 82af1cbf0d54bb197a4381e7d7ff1c120e4a9645</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2232</bug_id>
          
          <creation_ts>2019-10-01 18:54:11 +0000</creation_ts>
          <short_desc>Multi-workspace failure in GenMake</short_desc>
          <delta_ts>2019-10-04 12:08:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9900</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-01 18:54:11 +0000</bug_when>
    <thetext>Commit 0075ab2cec introduced an issue that causes an exception
when multiple workspace packages paths are specified. For example,
if edk2-platforms is used, the root directory will contain an edk
and edk2-platforms directory representing the respective
repositories. 

In GenMake, the path to the package DEC file for a module is
discovered by getting the relative path of the INF to the
workspace root directory. Each directory in the relative path
is incrementally joined to the WORKSPACE directory. The file
list in the joined path is searched for a DEC file.

As an example, if the build command is used on a package outside
the edk2 repository, the INF file path is relative to the
edk2-platforms directory not edk2. This causes directory paths
to be built that do not exist. Commit 0075ab2cec replaced the
os.path.exists() call with a try except block that always fails
when os.listdir() is invoked to enumerate the list of files in
the built directory path on packages outside edk2.

Based on my understanding, the original conditional statement
should be restored to prevent calling os.listdir() with an
invalid directory path.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9903</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-01 20:42:26 +0000</bug_when>
    <thetext>Patch sent to mailing list for review - https://edk2.groups.io/g/devel/message/48357.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9904</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-01 20:43:02 +0000</bug_when>
    <thetext>Waiting for review feedback.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9921</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-04 12:08:47 +0000</bug_when>
    <thetext>Change pushed to edk2 - https://github.com/tianocore/edk2/commit/61af5f249495b18f45ca164376c871081448c0e4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2144</bug_id>
          
          <creation_ts>2019-09-01 23:56:33 +0000</creation_ts>
          <short_desc>Update FILE GUID to avoid the duplicated module GUIDs</short_desc>
          <delta_ts>2019-09-17 01:18:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9415</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-01 23:56:33 +0000</bug_when>
    <thetext>FILE GUID in MdeModulePkg\Universal\SerialDxe\SerialDxe.inf is same to the one 
gEdkiiSerialPortLibVendorGuid. Its FILE GUID should be updated to another value.

FILE GUID in EmulatorPkg\Library\PeiEmuSerialPortLib\PeiEmuSerialPortLib.inf is same to MdePkg\Library\BaseSerialPortLibNull\BaseSerialPortLibNull.inf. PeiEmuSerialPortLib.inf FILE_GUID should be updated. 

FILE_GUID in MdePkg\Library\BaseBinSecurityLibNull\BaseBinSecurityLibNull.inf is same to MdePkg\Library\BaseBinSecurityLibRng\BaseBinSecurityLibRng.inf. BaseBinSecurityLibRng.inf FILE_GUID should be updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9416</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-01 23:57:28 +0000</bug_when>
    <thetext>Shenglei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9470</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-09-05 02:36:42 +0000</bug_when>
    <thetext>MdePkg\Library\BaseBinSecurityLibNull\BaseBinSecurityLibNull.inf does not exist.
MdePkg\Library\BaseBinSecurityLibRng\BaseBinSecurityLibRng.inf does not exist.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9694</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-09-17 01:18:40 +0000</bug_when>
    <thetext>Fixed at edk2/master:
0d85e67714e31e0dbe4241ab2ebb7c423aba174d
e0e388a427448d096b1677391870aabc40b494c5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2409</bug_id>
          
          <creation_ts>2019-12-09 18:21:01 +0000</creation_ts>
          <short_desc>WhiskeylakeURvp Boot Fails with Latest FSP Binary</short_desc>
          <delta_ts>2020-01-15 18:20:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10642</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-12-09 18:21:01 +0000</bug_when>
    <thetext>The WhiskeylakeOpenBoardPkg/WhiskeylakeURvp board fails to boot with the latest Coffee Lake (CFL) binary (v 7.0.68.41) posted on the master branch of the IntelFsp repository - https://github.com/IntelFsp/FSP/commits/master/CoffeeLakeFspBinPkg.

The last known binary to boot successfully was 7.0.64.40.

This should be triaged and fixed so that CFL FSP v 7.0.68.41 boots successfully.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10687</commentid>
    <comment_count>1</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-12-12 12:17:29 +0000</bug_when>
    <thetext>A patch for this issue has been submit to the edk2 mailing list</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10903</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-15 18:20:00 +0000</bug_when>
    <thetext>Patch submitted - https://github.com/tianocore/edk2-platforms/commit/8187c6f35035aa1b1993c26278a6c838ac39d250</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2337</bug_id>
          
          <creation_ts>2019-11-12 02:38:53 +0000</creation_ts>
          <short_desc>UEFI Redfish POC code re-architecture</short_desc>
          <delta_ts>2022-03-03 22:19:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>fan.wang</cc>
    
    <cc>jason.spottswood</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nickle.wang</cc>
    
    <cc>siyuan.fu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch>https://github.com/tianocore/edk2-staging/tree/UEFI_Redfish</cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10401</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2019-11-12 02:38:53 +0000</bug_when>
    <thetext>UEFI Redfish POC code re-architecture, refer to &quot;EDK2 Redfish POC Code re-architecture Project&quot; section in https://github.com/tianocore/edk2-staging/blob/UEFI_Redfish/Readme.md. The goal of this project is to make edk2 Redfish support more flexible and easier to be integrated to OEM edk2 code base. The UEFI Redfish POC code re-architecture is working in progress.

The UEFI Redfish POC code re-architecture proposal was proposed in TianoCore design meeting and the slide deck is on below link,
https://github.com/tianocore/edk2-staging/blob/UEFI_Redfish/Intel%20Redfish%20POC%20Code%20Rearchitecture.pdf

The final solution of UEFI Redfish support is mentioned in &quot;EDK2 Redfish POC Code re-architecture Project&quot; section in https://github.com/tianocore/edk2-staging/blob/UEFI_Redfish/Readme.md.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10402</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2019-11-12 02:46:07 +0000</bug_when>
    <thetext>Change status to WIP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13486</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-21 03:06:06 +0000</bug_when>
    <thetext>This bZ has dependences with below BZs,

https://bugzilla.tianocore.org/show_bug.cgi?id=2906
https://bugzilla.tianocore.org/show_bug.cgi?id=2907
https://bugzilla.tianocore.org/show_bug.cgi?id=2908
https://bugzilla.tianocore.org/show_bug.cgi?id=2909
https://bugzilla.tianocore.org/show_bug.cgi?id=2910
https://bugzilla.tianocore.org/show_bug.cgi?id=2911
https://bugzilla.tianocore.org/show_bug.cgi?id=2912
https://bugzilla.tianocore.org/show_bug.cgi?id=2913
https://bugzilla.tianocore.org/show_bug.cgi?id=2914
https://bugzilla.tianocore.org/show_bug.cgi?id=2915
https://bugzilla.tianocore.org/show_bug.cgi?id=2916
https://bugzilla.tianocore.org/show_bug.cgi?id=2917
https://bugzilla.tianocore.org/show_bug.cgi?id=2918
https://bugzilla.tianocore.org/show_bug.cgi?id=2919</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14768</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-10 21:52:23 +0000</bug_when>
    <thetext>The commit until now,

RedfishPkg: Initial commit of RedfishPkg.
c63e1305

edk2: Add maintainers to RedfishPkg
69e95b9e

Bug 2909 - TlsChildHandle is not cleared to NULL when HTTP EFI instance is reset
5df41311

MdePkg/Include: Definitions of EFI REST EX Protocol 
f77e3faa

RedfishPkg/Include: PCD definitions of Host Interface EFI device path
b9b7406c

.pytool: Add CI on RedfishPkg 
c4add64f
.azurepipelines/templates: Add RedfishPkg to target build
19c87b7d

Bug 2915 - Add definitions for HTTP Chunked Transfer
a7d97704
3b87d728

Bug 2907 - Implementation of UEFI spec 29.7.3 EFI_REST_JSON_STRUCTURE_PROTOCOL
ed038688
5692db78	
4f808c62

RedfishHostInterface/NULL lib
dc7e206a - 1946bee2

RedfishPkg/Include: EFI Redfish Discover Protocol header file (under RedfishPkg)
ffddac3e

REST_STYLE support
5ec3033 - 36c50bd

RedfishPkg: Add PCD definition to RedfishPkg
a4d2ddb

RedfishPkg: DSC and FDF include files for enabling EFI Redfish support
1c48866

RedfishPkg: Use DSC include file
b470520

EmulatorPkg:Redfish Hostinterface
cc5faa78-484e869d

NetworkPkg: Add NETWORK_HTTP_ENABLE macro
126115a9

NetworkPkg: Implement HTTP IO Helper Library
71a40415-97e2b622

EmulatorPkg: Define default value of NETWORK_HTTP_ENABLE
4b69fab6

RedfishPkg: RedfishRestExDxe  (Bug 2908)
4b69fab6

RedfishPkg: RedfishCredentialDxe  (Bug 2911)
2255a2b1-e6ae24e1

RedfishPkg: JsonLib 
805b8b88- acabf1b0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14769</commentid>
    <comment_count>4</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-10 21:58:09 +0000</bug_when>
    <thetext>Correcions,

RedfishPkg: Initial commit of RedfishPkg.
c63e1305

edk2: Add maintainers to RedfishPkg
69e95b9e

Bug 2909 - TlsChildHandle is not cleared to NULL when HTTP EFI instance is reset
5df41311

MdePkg/Include: Definitions of EFI REST EX Protocol 
f77e3faa

RedfishPkg/Include: PCD definitions of Host Interface EFI device path
b9b7406c

.pytool: Add CI on RedfishPkg 
c4add64f
.azurepipelines/templates: Add RedfishPkg to target build
19c87b7d

Bug 2915 - Add definitions for HTTP Chunked Transfer
a7d97704
3b87d728

Bug 2907 - Implementation of UEFI spec 29.7.3 EFI_REST_JSON_STRUCTURE_PROTOCOL
ed038688
5692db78	
4f808c62

RedfishHostInterface/NULL lib
dc7e206a - 1946bee2

RedfishPkg/Include: EFI Redfish Discover Protocol header file (under RedfishPkg)
ffddac3e

REST_STYLE support
5ec3033 - 36c50bd

RedfishPkg: Add PCD definition to RedfishPkg
a4d2ddb

RedfishPkg: DSC and FDF include files for enabling EFI Redfish support
1c48866

RedfishPkg: Use DSC include file
b470520

EmulatorPkg:Redfish Hostinterface
cc5faa78-484e869d

NetworkPkg: Add NETWORK_HTTP_ENABLE macro
126115a9

NetworkPkg: Implement HTTP IO Helper Library
71a40415-97e2b622

EmulatorPkg: Define default value of NETWORK_HTTP_ENABLE
4b69fab6

RedfishPkg: RedfishRestExDxe  (Bug 2908)
4b69fab6

RedfishPkg: RedfishCredentialDxe  (Bug 2910)
2255a2b1-e6ae24e1

RedfishPkg: JsonLib 
805b8b88- acabf1b0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14828</commentid>
    <comment_count>5</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-17 22:13:53 +0000</bug_when>
    <thetext>Update on 1/18

RedfishPkg: Initial commit of RedfishPkg.
c63e1305

edk2: Add maintainers to RedfishPkg
69e95b9e

Bug 2909 - TlsChildHandle is not cleared to NULL when HTTP EFI instance is reset
5df41311

MdePkg/Include: Definitions of EFI REST EX Protocol 
f77e3faa

RedfishPkg/Include: PCD definitions of Host Interface EFI device path
b9b7406c

.pytool: Add CI on RedfishPkg 
c4add64f
.azurepipelines/templates: Add RedfishPkg to target build
19c87b7d

Bug 2915 - Add definitions for HTTP Chunked Transfer
a7d97704
3b87d728

Bug 2907 - Implementation of UEFI spec 29.7.3 EFI_REST_JSON_STRUCTURE_PROTOCOL
ed038688
5692db78	
4f808c62

RedfishHostInterface/NULL lib
dc7e206a - 1946bee2

RedfishPkg/Include: EFI Redfish Discover Protocol header file (under RedfishPkg)
ffddac3e

REST_STYLE support
5ec3033 - 36c50bd

RedfishPkg: Add PCD definition to RedfishPkg
a4d2ddb

RedfishPkg: DSC and FDF include files for enabling EFI Redfish support
1c48866

RedfishPkg: Use DSC include file
b470520

EmulatorPkg:Redfish Hostinterface
cc5faa78-484e869d

NetworkPkg: Add NETWORK_HTTP_ENABLE macro
126115a9

NetworkPkg: Implement HTTP IO Helper Library
71a40415-97e2b622

EmulatorPkg: Define default value of NETWORK_HTTP_ENABLE
4b69fab6

RedfishPkg: RedfishRestExDxe  (Bug 2908)
4b69fab6

RedfishPkg: RedfishCredentialDxe  (Bug 2910)
2255a2b1-e6ae24e1

RedfishPkg: JsonLib (Bug 3163)  
805b8b88- acabf1b0

NetworkPkg/DxeHttpLib: Migrate HTTP header manipulation APIs(Bug 3172)
40c4cd54

EmulatorPkg/library: RedfishPlatformCredentialLib (Bug 3173)
c88736f8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15038</commentid>
    <comment_count>6</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-02-07 22:47:04 +0000</bug_when>
    <thetext>Update on 2/9

RedfishPkg: Initial commit of RedfishPkg.
c63e1305

edk2: Add maintainers to RedfishPkg
69e95b9e

Bug 2909 - TlsChildHandle is not cleared to NULL when HTTP EFI instance is reset
5df41311

MdePkg/Include: Definitions of EFI REST EX Protocol 
f77e3faa

RedfishPkg/Include: PCD definitions of Host Interface EFI device path
b9b7406c

.pytool: Add CI on RedfishPkg 
c4add64f
.azurepipelines/templates: Add RedfishPkg to target build
19c87b7d

Bug 2915 - Add definitions for HTTP Chunked Transfer
a7d97704
3b87d728

Bug 2907 - Implementation of UEFI spec 29.7.3 EFI_REST_JSON_STRUCTURE_PROTOCOL
ed038688
5692db78	
4f808c62

RedfishHostInterface/NULL lib
dc7e206a - 1946bee2

RedfishPkg/Include: EFI Redfish Discover Protocol header file (under RedfishPkg)
ffddac3e

REST_STYLE support
5ec3033 - 36c50bd

RedfishPkg: Add PCD definition to RedfishPkg
a4d2ddb

RedfishPkg: DSC and FDF include files for enabling EFI Redfish support
1c48866

RedfishPkg: Use DSC include file
b470520

EmulatorPkg:Redfish Hostinterface
cc5faa78-484e869d

NetworkPkg: Add NETWORK_HTTP_ENABLE macro
126115a9

NetworkPkg: Implement HTTP IO Helper Library
71a40415-97e2b622

EmulatorPkg: Define default value of NETWORK_HTTP_ENABLE
4b69fab6

RedfishPkg: RedfishRestExDxe  (Bug 2908)
4b69fab6

RedfishPkg: RedfishCredentialDxe  (Bug 2910)
2255a2b1-e6ae24e1

RedfishPkg: JsonLib (Bug 3163)  
805b8b88- acabf1b0

NetworkPkg/DxeHttpLib: Migrate HTTP header manipulation APIs(Bug 3172)
40c4cd54

EmulatorPkg/library: RedfishPlatformCredentialLib (Bug 3173)
c88736f8

RedfishPkg/DxeRestExLib: DxeRestExLib
140674a4

MdeModulePkg/Library: Add HiiGetStringEx to UefiHiiLib for EDK2 Redfish
0d96664d (No bugzilla)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15130</commentid>
    <comment_count>7</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-02-24 06:59:52 +0000</bug_when>
    <thetext>Update

RedfishPkg: Initial commit of RedfishPkg.
c63e1305

edk2: Add maintainers to RedfishPkg
69e95b9e

Bug 2909 - TlsChildHandle is not cleared to NULL when HTTP EFI instance is reset
5df41311

MdePkg/Include: Definitions of EFI REST EX Protocol 
f77e3faa

RedfishPkg/Include: PCD definitions of Host Interface EFI device path
b9b7406c

.pytool: Add CI on RedfishPkg 
c4add64f
.azurepipelines/templates: Add RedfishPkg to target build
19c87b7d

Bug 2915 - Add definitions for HTTP Chunked Transfer
a7d97704
3b87d728

Bug 2907 - Implementation of UEFI spec 29.7.3 EFI_REST_JSON_STRUCTURE_PROTOCOL
ed038688
5692db78	
4f808c62

RedfishHostInterface/NULL lib
dc7e206a - 1946bee2

RedfishPkg/Include: EFI Redfish Discover Protocol header file (under RedfishPkg)
ffddac3e

REST_STYLE support
5ec3033 - 36c50bd

RedfishPkg: Add PCD definition to RedfishPkg
a4d2ddb

RedfishPkg: DSC and FDF include files for enabling EFI Redfish support
1c48866

RedfishPkg: Use DSC include file
b470520

EmulatorPkg:Redfish Hostinterface
cc5faa78-484e869d

NetworkPkg: Add NETWORK_HTTP_ENABLE macro
126115a9

NetworkPkg: Implement HTTP IO Helper Library
71a40415-97e2b622

EmulatorPkg: Define default value of NETWORK_HTTP_ENABLE
4b69fab6

RedfishPkg: RedfishRestExDxe  (Bug 2908)
4b69fab6

RedfishPkg: RedfishCredentialDxe  (Bug 2911)
2255a2b1-e6ae24e1

RedfishPkg: JsonLib (Bug 3163)
805b8b88- acabf1b0

NetworkPkg/DxeHttpLib: Migrate HTTP header manipulation APIs Bug 3172
40c4cd54

EmulatorPkg/library: RedfishPlatformCredentialLib Bug 3173 -
c88736f8

MdeModulePkg/Library: Add HiiGetStringEx to UefiHiiLib for EDK2 Redfish
0d96664d

RedfishPkg/RedfishCrtLib: Add more CRT functions
739a506b

RedfishPkg/JsonLib: Add JsonLoadString function
5d7b5cd1

RedfishPkg/JsonLib: Fix the mistake of removing code by a accident
bd158441

RedfishPkg/JsonLib: Ignore the build error of conditional expression.
0cf260fa

RedfishPkg/Include: EDKII Redfish Config Handler Protocol header file BZ:2911
69637f91 

RedfishPkg/RedfishContentCodingLib: EDKII Redfish En/Decode library BZ#:3174
35f87da8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15351</commentid>
    <comment_count>8</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-03-17 21:44:46 +0000</bug_when>
    <thetext>Update

RedfishPkg: Initial commit of RedfishPkg.
c63e1305

edk2: Add maintainers to RedfishPkg
69e95b9e

Bug 2909 - TlsChildHandle is not cleared to NULL when HTTP EFI instance is reset
5df41311

MdePkg/Include: Definitions of EFI REST EX Protocol 
f77e3faa

RedfishPkg/Include: PCD definitions of Host Interface EFI device path
b9b7406c

.pytool: Add CI on RedfishPkg 
c4add64f
.azurepipelines/templates: Add RedfishPkg to target build
19c87b7d

Bug 2915 - Add definitions for HTTP Chunked Transfer
a7d97704
3b87d728

Bug 2907 - Implementation of UEFI spec 29.7.3 EFI_REST_JSON_STRUCTURE_PROTOCOL
ed038688
5692db78	
4f808c62

RedfishHostInterface/NULL lib
dc7e206a - 1946bee2

RedfishPkg/Include: EFI Redfish Discover Protocol header file (under RedfishPkg)
ffddac3e

REST_STYLE support
5ec3033 - 36c50bd

RedfishPkg: Add PCD definition to RedfishPkg
a4d2ddb

RedfishPkg: DSC and FDF include files for enabling EFI Redfish support
1c48866

RedfishPkg: Use DSC include file
b470520

EmulatorPkg:Redfish Hostinterface
cc5faa78-484e869d

NetworkPkg: Add NETWORK_HTTP_ENABLE macro
126115a9

NetworkPkg: Implement HTTP IO Helper Library
71a40415-97e2b622

EmulatorPkg: Define default value of NETWORK_HTTP_ENABLE
4b69fab6

RedfishPkg: RedfishRestExDxe  (Bug 2908)
4b69fab6

RedfishPkg: RedfishCredentialDxe  (Bug 2911)
2255a2b1-e6ae24e1

RedfishPkg: JsonLib (Bug 3163)
805b8b88- acabf1b0

NetworkPkg/DxeHttpLib: Migrate HTTP header manipulation APIs Bug 3172
40c4cd54

EmulatorPkg/library: RedfishPlatformCredentialLib Bug 3173 -
c88736f8

MdeModulePkg/Library: Add HiiGetStringEx to UefiHiiLib for EDK2 Redfish
0d96664d

RedfishPkg/RedfishCrtLib: Add more CRT functions
739a506b

RedfishPkg/JsonLib: Add JsonLoadString function
5d7b5cd1

RedfishPkg/JsonLib: Fix the mistake of removing code by a accident
bd158441

RedfishPkg/JsonLib: Ignore the build error of conditional expression.
0cf260fa

RedfishPkg/Include: EDKII Redfish Config Handler Protocol header file BZ:2911
69637f91 

RedfishPkg/RedfishContentCodingLib: EDKII Redfish En/Decode library BZ#:3174
35f87da8

RedfishPkg/Library: RedfishLib
4751a48a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15592</commentid>
    <comment_count>9</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-12 04:30:28 +0000</bug_when>
    <thetext>Update

RedfishPkg: Initial commit of RedfishPkg.
c63e1305

edk2: Add maintainers to RedfishPkg
69e95b9e

Bug 2909 - TlsChildHandle is not cleared to NULL when HTTP EFI instance is reset
5df41311

MdePkg/Include: Definitions of EFI REST EX Protocol 
f77e3faa

RedfishPkg/Include: PCD definitions of Host Interface EFI device path
b9b7406c

.pytool: Add CI on RedfishPkg 
c4add64f
.azurepipelines/templates: Add RedfishPkg to target build
19c87b7d

Bug 2915 - Add definitions for HTTP Chunked Transfer
a7d97704
3b87d728

Bug 2907 - Implementation of UEFI spec 29.7.3 EFI_REST_JSON_STRUCTURE_PROTOCOL
ed038688
5692db78	
4f808c62

RedfishHostInterface/NULL lib
dc7e206a - 1946bee2

RedfishPkg/Include: EFI Redfish Discover Protocol header file (under RedfishPkg)
ffddac3e

REST_STYLE support
5ec3033 - 36c50bd

RedfishPkg: Add PCD definition to RedfishPkg
a4d2ddb

RedfishPkg: DSC and FDF include files for enabling EFI Redfish support
1c48866

RedfishPkg: Use DSC include file
b470520

EmulatorPkg:Redfish Hostinterface
cc5faa78-484e869d

NetworkPkg: Add NETWORK_HTTP_ENABLE macro
126115a9

NetworkPkg: Implement HTTP IO Helper Library
71a40415-97e2b622

EmulatorPkg: Define default value of NETWORK_HTTP_ENABLE
4b69fab6

RedfishPkg: RedfishRestExDxe  (Bug 2908)
4b69fab6

RedfishPkg: RedfishCredentialDxe  (Bug 2911)
2255a2b1-e6ae24e1

RedfishPkg: JsonLib (Bug 3163)
805b8b88- acabf1b0

NetworkPkg/DxeHttpLib: Migrate HTTP header manipulation APIs Bug 3172
40c4cd54

EmulatorPkg/library: RedfishPlatformCredentialLib Bug 3173 -
c88736f8

MdeModulePkg/Library: Add HiiGetStringEx to UefiHiiLib for EDK2 Redfish
0d96664d

RedfishPkg/RedfishCrtLib: Add more CRT functions
739a506b

RedfishPkg/JsonLib: Add JsonLoadString function
5d7b5cd1

RedfishPkg/JsonLib: Fix the mistake of removing code by a accident
bd158441

RedfishPkg/JsonLib: Ignore the build error of conditional expression.
0cf260fa

RedfishPkg/Include: EDKII Redfish Config Handler Protocol header file BZ:2911
69637f91 

RedfishPkg/RedfishContentCodingLib: EDKII Redfish En/Decode library BZ#:3174
35f87da8

RedfishPkg/Library: RedfishLib
4751a48a

MdePkg/Include: EFI Redfish Discover protocol
fe662888

ShellPkg/UefiHandleParsingLib: Support EFI Redfish protocols
b33cf5bf

RedfishPkg/RedfishDiscoverDxe: EFI Redfish Discover Protocol
7e7b729f

RedfishPkg/RedfishConfigHandler: EDKII RedfishConfigHandler Protocol
2072c22a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15698</commentid>
    <comment_count>10</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-15 03:50:27 +0000</bug_when>
    <thetext>Update

RedfishPkg: Initial commit of RedfishPkg.
c63e1305

edk2: Add maintainers to RedfishPkg
69e95b9e

Bug 2909 - TlsChildHandle is not cleared to NULL when HTTP EFI instance is reset
5df41311

MdePkg/Include: Definitions of EFI REST EX Protocol 
f77e3faa

RedfishPkg/Include: PCD definitions of Host Interface EFI device path
b9b7406c

.pytool: Add CI on RedfishPkg 
c4add64f
.azurepipelines/templates: Add RedfishPkg to target build
19c87b7d

Bug 2915 - Add definitions for HTTP Chunked Transfer
a7d97704
3b87d728

Bug 2907 - Implementation of UEFI spec 29.7.3 EFI_REST_JSON_STRUCTURE_PROTOCOL
ed038688
5692db78	
4f808c62

RedfishHostInterface/NULL lib
dc7e206a - 1946bee2

RedfishPkg/Include: EFI Redfish Discover Protocol header file (under RedfishPkg)
ffddac3e

REST_STYLE support
5ec3033 - 36c50bd

RedfishPkg: Add PCD definition to RedfishPkg
a4d2ddb

RedfishPkg: DSC and FDF include files for enabling EFI Redfish support
1c48866

RedfishPkg: Use DSC include file
b470520

EmulatorPkg:Redfish Hostinterface
cc5faa78-484e869d

NetworkPkg: Add NETWORK_HTTP_ENABLE macro
126115a9

NetworkPkg: Implement HTTP IO Helper Library
71a40415-97e2b622

EmulatorPkg: Define default value of NETWORK_HTTP_ENABLE
4b69fab6

RedfishPkg: RedfishRestExDxe  (Bug 2908)
4b69fab6

RedfishPkg: RedfishCredentialDxe  (Bug 2911)
2255a2b1-e6ae24e1

RedfishPkg: JsonLib (Bug 3163)
805b8b88- acabf1b0

NetworkPkg/DxeHttpLib: Migrate HTTP header manipulation APIs Bug 3172
40c4cd54

EmulatorPkg/library: RedfishPlatformCredentialLib Bug 3173 -
c88736f8

MdeModulePkg/Library: Add HiiGetStringEx to UefiHiiLib for EDK2 Redfish
0d96664d

RedfishPkg/RedfishCrtLib: Add more CRT functions
739a506b

RedfishPkg/JsonLib: Add JsonLoadString function
5d7b5cd1

RedfishPkg/JsonLib: Fix the mistake of removing code by a accident
bd158441

RedfishPkg/JsonLib: Ignore the build error of conditional expression.
0cf260fa

RedfishPkg/Include: EDKII Redfish Config Handler Protocol header file BZ:2911
69637f91 

RedfishPkg/RedfishContentCodingLib: EDKII Redfish En/Decode library BZ#:3174
35f87da8

RedfishPkg/Library: RedfishLib
4751a48a

MdePkg/Include: EFI Redfish Discover protocol
fe662888

ShellPkg/UefiHandleParsingLib: Support EFI Redfish protocols
b33cf5bf

RedfishPkg/RedfishDiscoverDxe: EFI Redfish Discover Protocol
7e7b729f

RedfishPkg/RedfishConfigHandler: EDKII RedfishConfigHandler Protocol
2072c22a

RedfishPkg/RestJsonStructureDxe: Fix typo in function header
7cc8cd7b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18550</commentid>
    <comment_count>11</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-03 22:19:27 +0000</bug_when>
    <thetext>The EDK2 Redfish solution is all upstream to edk2 RedfishPkg.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2145</bug_id>
          
          <creation_ts>2019-09-01 23:58:53 +0000</creation_ts>
          <short_desc>Remove gEfiFormBrowserExProtocolGuid protocol guid</short_desc>
          <delta_ts>2020-03-30 03:41:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9417</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-01 23:58:53 +0000</bug_when>
    <thetext>The module should consume gEdkiiFormBrowserExProtocolGuid. So, original one gEfiFormBrowserExProtocolGuid can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9418</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-01 23:59:19 +0000</bug_when>
    <thetext>Dandan will check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11339</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 10:00:18 +0000</bug_when>
    <thetext>Please check</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11550</commentid>
    <comment_count>3</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-05 00:35:56 +0000</bug_when>
    <thetext>Have comment at https://edk2.groups.io/g/devel/message/54708, waiting for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11903</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-30 03:41:43 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/d4e2909bfc34027ab1dc678c5361856688b03dfe</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2654</bug_id>
          
          <creation_ts>2020-04-01 03:20:40 +0000</creation_ts>
          <short_desc>BaseTools: Add the spare space FV image size checker</short_desc>
          <delta_ts>2020-04-23 06:42:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>zhijux.fan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11980</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-01 03:20:40 +0000</bug_when>
    <thetext>If FV is placed in FD region, its FV image size is fixed. When FV image size exceeds it, it will trig the build break. To alert the developer to adjust FV image size earlier, I request to add new checker for the the spare FV space. When the spare FV space is less than the specified threshold, build tool will report the error. This checker is the optional. It can be enabled by -D FV_SPARE_SPACE_THRESHOLD=10000. Macro is the value of the spare space threshold size. It can be decimal or hex format. If it is enabled, BaseTools will check every FV with the fixed size. If FV doesn&apos;t meet with the size requirement, Build tool will report error message to say there is no enough spare space.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11981</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-01 03:21:16 +0000</bug_when>
    <thetext>Zhiju: please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12183</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-10 11:19:50 +0000</bug_when>
    <thetext>The patch is under review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12301</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-04-23 06:42:14 +0000</bug_when>
    <thetext>patch fixed in 3a3a3af4a29ee36b1db11842d40b74f2de892a35</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2320</bug_id>
          
          <creation_ts>2019-11-01 02:16:59 +0000</creation_ts>
          <short_desc>Need to support map file parsing for CLANG9 tool chain.</short_desc>
          <delta_ts>2019-11-10 21:25:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10255</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-11-01 02:16:59 +0000</bug_when>
    <thetext>CLANG9 tool chains has been added, but the map files generated by clang have different format compared to other compilers.
So supporting map file parsing for CLANG9 tool chain are needed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10294</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-03 21:16:29 +0000</bug_when>
    <thetext>Zhiguang is working on the change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10381</commentid>
    <comment_count>2</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-11-10 21:25:54 +0000</bug_when>
    <thetext>Fixed by 0cecb1f99e6c4ba7408272074541bab98c98a116 and 5cef92771fb966b6ebe5eccbd97c2127c091b4e9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2338</bug_id>
          
          <creation_ts>2019-11-12 03:42:14 +0000</creation_ts>
          <short_desc>Unify the definitions of size_t</short_desc>
          <delta_ts>2019-12-01 20:13:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10403</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-11-12 03:42:14 +0000</bug_when>
    <thetext>I notice there are two types of definition of size_t in MdeModulePkg, which is a little complecated.

Edk2\MdeModulePkg\Library\LzmaCustomDecompressLib\UefiLzma.h
typedef unsigned int size_t 

Edk2\MdeModulePkg\Universal\RegularExpressionDxe\Oniguruma\OnigurumaUefiPort.h
typedef UINTN size_t;

I think it is better to unify the definitions of size_t.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10434</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 19:49:30 +0000</bug_when>
    <thetext>Zhiguang sends the patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10465</commentid>
    <comment_count>2</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-11-17 19:42:47 +0000</bug_when>
    <thetext>Fixed on 9639c1f3e7f4f0d2df4072a60f754a9c43f2d784</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10488</commentid>
    <comment_count>3</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-11-20 00:50:51 +0000</bug_when>
    <thetext>The change causes EBC build failure. I will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10585</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-29 01:49:02 +0000</bug_when>
    <thetext>Fix at 9639c1f3e7f4f0d2df4072a60f754a9c43f2d784</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10590</commentid>
    <comment_count>5</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-11-29 06:43:11 +0000</bug_when>
    <thetext>Two things:

1) Zhiguang&apos;s comment on 2019-11-20 says this fix breaks EBC, and this stands completely unresolved. If this was fixed by a separate patch, that should be noted in the comments.

2) This patch also modifies MdeModulePkg/Library/BrotliCustomDecompressLib/, but this is not mentioned in this bug at all. Nor is *anything* mentioned in the commit message about which modules are affected.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10595</commentid>
    <comment_count>6</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-12-01 20:13:43 +0000</bug_when>
    <thetext>Hi Leif,
Thanks for the comment.

For the first problem, I open a new bugzilla to track it, as below.
https://bugzilla.tianocore.org/show_bug.cgi?id=2398

For the second one, I miss the description about BrotliCustomDecompressLib. Actually, there are two positions to define the size_t as unsigned int, in LzmaCustomDecompressLib/UefiLzma.h and BrotliCustomDecompressLib/brotli/types.h. To unify the definition, I change both the two positions. And any module which are include these two .h files will be affected. (In reply to Leif Lindholm from comment #5)
&gt; Two things:
&gt; 
&gt; 1) Zhiguang&apos;s comment on 2019-11-20 says this fix breaks EBC, and this
&gt; stands completely unresolved. If this was fixed by a separate patch, that
&gt; should be noted in the comments.
&gt; 
&gt; 2) This patch also modifies MdeModulePkg/Library/BrotliCustomDecompressLib/,
&gt; but this is not mentioned in this bug at all. Nor is *anything* mentioned in
&gt; the commit message about which modules are affected.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2694</bug_id>
          
          <creation_ts>2020-04-24 06:40:44 +0000</creation_ts>
          <short_desc>Xhci Assert when Reset Device purposely</short_desc>
          <delta_ts>2022-02-14 01:53:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>guomin.jiang</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12309</commentid>
    <comment_count>0</comment_count>
      <attachid>508</attachid>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-24 06:40:44 +0000</bug_when>
    <thetext>Created attachment 508
XHCI Assert with the change

Add code change as attachment, and use OvmfPkg to verify the XHCI, it will assert at ASSERT c:\users\guominji\dcg10nm\edk2\MdeModulePkg\Bus\Pci\XhciDxe\XhciSched.c(1909): TrsRing != ((void *) 0).

It is meaningful usercase, because USB will work unexpected and result the error, it Reset Device should work normally.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12310</commentid>
    <comment_count>1</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-24 06:42:38 +0000</bug_when>
    <thetext>The TransferRing haven&apos;t been set correctly after reset device, i am figuring out the reason.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12314</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-24 21:39:07 +0000</bug_when>
    <thetext>Post PATCH at https://edk2.groups.io/g/devel/message/58125 for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12410</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-05-05 23:21:55 +0000</bug_when>
    <thetext>Test fail in real platform.
Figure out the reason and optimize patch meanwhile.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18354</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-02-14 01:53:32 +0000</bug_when>
    <thetext>Invalid</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>508</attachid>
            <date>2020-04-24 06:40:44 +0000</date>
            <delta_ts>2020-04-24 06:40:44 +0000</delta_ts>
            <desc>XHCI Assert with the change</desc>
            <filename>XhciAssert.patch</filename>
            <type>application/octet-stream</type>
            <size>882</size>
            <attacher>guomin.jiang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2146</bug_id>
          
          <creation_ts>2019-09-02 00:02:08 +0000</creation_ts>
          <short_desc>Library Class Header file is not specified correctly in Package.dec file</short_desc>
          <delta_ts>2019-10-22 13:51:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9419</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-02 00:02:08 +0000</bug_when>
    <thetext>MdePkg/MdePkg.dec, S3PciSegmentLib library class header file should be Include/Library/S3PciSegmentLib.h instead of Include/Library/PciSegmentLib.h. 

SecurityPkg/SecurityPkg.dec, Tcg2PpVendorLib library class header should be Include/Library/Tcg2PpVendorLib.h instead of Include/Library/TcgPpVendorLib.h.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9420</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-02 00:02:38 +0000</bug_when>
    <thetext>Shenglei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9695</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-09-17 01:19:28 +0000</bug_when>
    <thetext>Fixed at edk2/master:
0d4f7b4b3814fcc4827554ca5cfa56128c285501
49a2f8ceee7cb6ffdb475b9e410f5e21f255bead</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10168</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 13:51:32 +0000</bug_when>
    <thetext>*** Bug 2256 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2195</bug_id>
          
          <creation_ts>2019-09-16 22:29:29 +0000</creation_ts>
          <short_desc>PcdTftpBlockSize should be moved from MdeModulePkg into NetworkPkg</short_desc>
          <delta_ts>2019-10-17 21:27:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9685</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-16 22:29:29 +0000</bug_when>
    <thetext>Network modules have been moved to NetworkPkg. So, its related PCD should be moved from MdeModulePkg into NetworkPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9686</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-16 22:29:54 +0000</bug_when>
    <thetext>Liming takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10090</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-17 21:27:39 +0000</bug_when>
    <thetext>Fixed at c7471e2a010236277250ad6a35aa78db8b9657de</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2341</bug_id>
          
          <creation_ts>2019-11-14 02:58:32 +0000</creation_ts>
          <short_desc>Rename tool chain CLANG9 to CLANGPDB</short_desc>
          <delta_ts>2019-11-29 01:48:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10421</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 02:58:32 +0000</bug_when>
    <thetext>Based on feedback from https://edk2.groups.io/g/devel/message/50466,
CLANGPDB is the most acceptable tool chain name,
because this tool chain generates PE/COFF image with PDB debug symbol.

The feedback includes two changes. 
1. This tool chain can work with LLVM9 or above. So, its name should remove version info. 
2. This tool chain generates PDB debug format symbol. So, its name should be specific with this info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10422</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 02:59:04 +0000</bug_when>
    <thetext>Liming takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10584</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-29 01:48:31 +0000</bug_when>
    <thetext>Fix at 9639c1f3e7f4f0d2df4072a60f754a9c43f2d784..0b9ad0bc030bbd79073a26fc9b3527ff9128b9da</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2696</bug_id>
          
          <creation_ts>2020-04-27 12:30:04 +0000</creation_ts>
          <short_desc>FmpDxe: Implement Fmp Capsule Dependency feature in library</short_desc>
          <delta_ts>2020-05-27 04:29:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>wei6.xu</reporter>
          <assigned_to>wei6.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12324</commentid>
    <comment_count>0</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2020-04-27 12:30:04 +0000</bug_when>
    <thetext>In current solution, the Fmp capsule dependency feature is hardcode enabled in FmpDxe.
There must be a method for platform to choose whether to support capsule dependency or not, as well as to perform the dependency check in platform specific manner.

The current dependency related implement could be broken down into two library classes:
One is a base library to provide generic capsule dependency APIs.
The other is a platform library to provide dependency check functions called during firmware update. Platform can implement its own version of this library class to perform platform specific dependency check.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12332</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-28 21:41:09 +0000</bug_when>
    <thetext>Wei: please take it. 

Generic test are placed into UnitTestPkg.

Where is to place System test? Need proposal. 

Test case for module is placed into module source directory with Test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12514</commentid>
    <comment_count>2</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2020-05-18 02:59:39 +0000</bug_when>
    <thetext>The patch is submitted: 
https://github.com/tianocore/edk2/pull/624/commits


The original implement of capsule dependency removed from FmpDxe driver.
Three new library classes are added to handle capsule dependency routines:
1. FmpDependencyLib provides generic services to support pure algorithm of capsule dependency expression evaluation.
2. FmpDependnecyCheckLib provides platform specific service to support dependency check during firmware update. NULL instance is also provided as an option to disable dependency check.
3. FmpDependencyDeviceLib provides firmware device specific services to support saving dependency to firmware device and getting dependency from firmware device. NULL instance is also provided an option to disable dependency storage feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2196</bug_id>
          
          <creation_ts>2019-09-16 22:34:48 +0000</creation_ts>
          <short_desc>Network related header files should be moved from MdeModulePkg to NetworkPkg</short_desc>
          <delta_ts>2019-10-17 21:26:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9687</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-16 22:34:48 +0000</bug_when>
    <thetext>Below header files are Network related ones. They should be moved to NetworkPkg.

MdeModulePkg\Include\Guid\Ip4Config2Hii.h
MdeModulePkg\Include\Guid\Ip4IScsiConfigHii.h
MdeModulePkg\Include\Guid\VlanConfigHii.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9688</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-16 22:35:15 +0000</bug_when>
    <thetext>Liming takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10089</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-17 21:26:55 +0000</bug_when>
    <thetext>Fixed at 281161f10925ab4ee0b1d37e5883bfad9ab7c623</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2178</bug_id>
          
          <creation_ts>2019-09-09 10:54:52 +0000</creation_ts>
          <short_desc>Remove the workaround definition in SecurityPkg/Tcg/Tcg2Config/Tcg2ConfigNvData.h</short_desc>
          <delta_ts>2019-09-28 20:54:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9554</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-09 10:54:52 +0000</bug_when>
    <thetext>SecurityPkg/Tcg/Tcg2Config/Tcg2ConfigNvData.h has some definitions like below
BUGBUG: In order to pass VfrCompiler, we have to redefine below MACRO, which already in &lt;Protocol/Tcg2Protocol.h&gt;.

Those definitions are not consumed by VFR file. They should be moved to another shared header file. If so, don&apos;t need to pass VfrCompiler.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9555</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-09 10:55:20 +0000</bug_when>
    <thetext>Liming takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9852</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 20:54:54 +0000</bug_when>
    <thetext>Fix at 26fc074a5f0e58e0963fda9cee65f4c82731c5ac</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2904</bug_id>
          
          <creation_ts>2020-08-18 09:04:11 +0000</creation_ts>
          <short_desc>False positive issue reported by ECC under Linux OS</short_desc>
          <delta_ts>2020-09-02 13:17:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2951</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13427</commentid>
    <comment_count>0</comment_count>
      <attachid>545</attachid>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-08-18 09:04:11 +0000</bug_when>
    <thetext>Created attachment 545
The patch to reproduce ecc issue

Ecc tool reports a false positive issues under Linux OS. It causes failure on edk2 open ci and will block patch merging.

The patch is attached and the issues is listed below.
ERROR - EFI coding style error
ERROR - *Error code: 10014
ERROR - *No used module files found
ERROR - *file: SecurityPkg/Library/TcgEventLogRecordLib/TcgEventLogRecordLib.c
ERROR - *Line number: 1
ERROR - *The source file [SecurityPkg/Library/TcgEventLogRecordLib/TcgEventLogRecordLib.c] is existing in module directory but it is not described in INF file.
ERROR -</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13434</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-18 21:42:00 +0000</bug_when>
    <thetext>Bob, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13490</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-21 08:49:42 +0000</bug_when>
    <thetext>*** Bug 2920 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13586</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-09-01 06:31:25 +0000</bug_when>
    <thetext>code review: https://edk2.groups.io/g/devel/message/64887</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13594</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-01 14:03:36 +0000</bug_when>
    <thetext>(In reply to Bob Feng from comment #3)
&gt; code review: https://edk2.groups.io/g/devel/message/64887

Merged in commit 751355992635, via &lt;https://github.com/tianocore/edk2/pull/910&gt;.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>545</attachid>
            <date>2020-08-18 09:04:11 +0000</date>
            <delta_ts>2020-08-18 09:04:11 +0000</delta_ts>
            <desc>The patch to reproduce ecc issue</desc>
            <filename>0001-SecurityPkg-FvEventLogRecordLib-add-new-lib-for-firm.patch</filename>
            <type>application/octet-stream</type>
            <size>14145</size>
            <attacher>shenglei.zhang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2308</bug_id>
          
          <creation_ts>2019-10-23 14:55:32 +0000</creation_ts>
          <short_desc>Add architecture modifier to DSC [Components] section tag</short_desc>
          <delta_ts>2019-11-12 22:52:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10197</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-23 14:55:32 +0000</bug_when>
    <thetext>Currently the following [Components] section definitions are allowed in a DSC file:

* [Components]
* [Components.IA32]
* [Components.X64]
* [Components.IPF]
* [Components.EBC]
* [Components.common]

This request is to add the architecture modifier as a parameter to the [Components] tag so the following is allowed:

  [Components.$(PEI_ARCH)]

In the example above, the PEI_ARCH macro is defined in the DSC [Defines] section as follows:

  [Defines]
  DEFINE PEI_ARCH = IA32

From a use case standpoint, this is very important to allow DSC files to be included from other packages (e.g. !include AdvancedFeaturePkg/Include/AdvancedFeatures.dsc) and the architecture type for modules built in that file (PEI modules to be built as IA32 or X64, DXE modules to be built as IA32 or X64) to comply with the package being built.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10261</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:29:30 +0000</bug_when>
    <thetext>Bob will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10413</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-11-12 22:52:56 +0000</bug_when>
    <thetext>pushed d847ac1f27cca3e78698559a7c96f5f5d115bc8b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2822</bug_id>
          
          <creation_ts>2020-06-22 03:20:20 +0000</creation_ts>
          <short_desc>duplicate symbol _mRscHandlerProtocol when use Xcode</short_desc>
          <delta_ts>2020-06-28 02:56:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>DebugFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>ming.tan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12930</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-22 03:20:20 +0000</bug_when>
    <thetext>If use Xcode, then it will report following:
duplicate symbol _mRscHandlerProtocol in:
    XXX/DEBUG_XCODE5/X64/PostCodeDebugFeaturePkg/Library/PostCodeStatusCodeHandlerLib/RuntimeDxePostCodeStatusCodeHandlerLib/OUTPUT/RuntimeDxePostCodeStatusCodeHandlerLib.lib(RuntimeDxePostCodeStatusCodeHandlerLib.obj)
    XXX/DEBUG_XCODE5/X64/MdeModulePkg/Universal/StatusCodeHandler/RuntimeDxe/StatusCodeHandlerRuntimeDxe/OUTPUT/StatusCodeHandlerRuntimeDxe.lib(StatusCodeHandlerRuntimeDxe.obj)

If use VS or GCC, then has not such error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12931</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-22 03:21:09 +0000</bug_when>
    <thetext>I will submit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12958</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-28 02:56:47 +0000</bug_when>
    <thetext>The patch was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2447</bug_id>
          
          <creation_ts>2020-01-03 23:02:39 +0000</creation_ts>
          <short_desc>Linux kernel 5.4-5.5 can&apos;t load wifi for Wireless-AC 9560</short_desc>
          <delta_ts>2022-02-15 21:23:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>UserInterfaceFeaturePkg</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>coder-ingramyang</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10783</commentid>
    <comment_count>0</comment_count>
    <who name="">coder-ingramyang</who>
    <bug_when>2020-01-03 23:02:39 +0000</bug_when>
    <thetext>When using Linux kernel versions 5.4 and 5.5, the operating system is unable to successfully enable WIFI, but bluetooth and cable work fine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10787</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-06 04:18:01 +0000</bug_when>
    <thetext>(In reply to coder-ingramyang from comment #0)
&gt; When using Linux kernel versions 5.4 and 5.5, the operating system is unable
&gt; to successfully enable WIFI, but bluetooth and cable work fine.

How is this problem related to the edk2-platforms project, and specifically &quot;UserInterfaceFeaturePkg&quot;?

In fact, how is this problem related to firmware at all?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18377</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-02-15 21:23:47 +0000</bug_when>
    <thetext>I agree that this does not appear to be related to firmware and not additional data have been provided.  Closing.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2221</bug_id>
          
          <creation_ts>2019-09-26 10:45:49 +0000</creation_ts>
          <short_desc>BaseTools Makefile should be generated based on OS instead of tool chain family</short_desc>
          <delta_ts>2019-10-13 21:09:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9832</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-26 10:45:49 +0000</bug_when>
    <thetext>Makefile in Windows OS will be called by nmake even if the tool chain is GCC or CLANG. So, Makefile style should conform to OS instead of tool chain. edk2\BaseTools\Source\Python\GenFds\GenFdsGlobalVariable.py line 490 has the issue to generate Makefile base on MSFT tool chain family. This behavior will break CLANG build on windows OS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9833</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-26 10:46:46 +0000</bug_when>
    <thetext>Bob will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9837</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-09-26 21:11:48 +0000</bug_when>
    <thetext>Liming,
Makefile should conform to the &quot;tool that parses the makefile&quot; (&quot;nmake&quot; or &quot;make&quot;).
That&apos;s why there are two makefiles generated no matter for Windows or for Linux.
If we only generate makefile conforming to &quot;nmake&quot; in Windows, what if someone is using &quot;make&quot; in Windows?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9859</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 21:13:34 +0000</bug_when>
    <thetext>Yes. BaseTools should know make or nmake be used. BaseTools should generate Makefile base on make command.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9880</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-30 10:27:37 +0000</bug_when>
    <thetext>This case uses the different command in Makefile. The command test depends on batch environment. It is only available in bash, not in ms-dos. For it, the check condition should be OS instead of make command. 

Cmd = [&apos;-test&apos;, &apos;-e&apos;, Input[0], &quot;&amp;&amp;&quot;] + Cmd or Cmd = [&apos;if&apos;, &apos;exist&apos;, Input[0]] + Cmd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10007</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-10-13 21:09:13 +0000</bug_when>
    <thetext>pushed at a1f94045ffe9218ec438c4d23980de4243d21cd0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2066</bug_id>
          
          <creation_ts>2019-08-08 08:33:18 +0000</creation_ts>
          <short_desc>RegularExpressionDxe: Update Oniguruma to the latest Release 6.9.3 (security fix release)</short_desc>
          <delta_ts>2023-11-07 07:03:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=4592</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8862</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-08 08:33:18 +0000</bug_when>
    <thetext>https://github.com/kkos/oniguruma/releases/tag/v6.9.3 is just released. 
This release is the security fix release. It includes the changes: 
Fixed CVE-2019-13224
Fixed CVE-2019-13225
Fixed many problems (found by libfuzzer programs)

So, I request to update Edk2 MdeModulePkg RegularExpressionDxe with the latest change release 6.9.3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8863</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-08 08:33:40 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8928</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-11 22:14:17 +0000</bug_when>
    <thetext>There is no objection to add this feature to 201908 stable tag. 

https://edk2.groups.io/g/devel/message/45225
https://edk2.groups.io/g/devel/message/45196</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8929</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-11 22:15:15 +0000</bug_when>
    <thetext>Further request to support submodule is 
https://bugzilla.tianocore.org/show_bug.cgi?id=2073. This can be taken for next release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9083</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-20 00:57:33 +0000</bug_when>
    <thetext>Fix at b26691c47188ce255b8a4d920bf07ddf1431e2cd.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9094</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-20 11:05:09 +0000</bug_when>
    <thetext>This has been fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2111</bug_id>
          
          <creation_ts>2019-08-22 02:10:47 +0000</creation_ts>
          <short_desc>Add build option &quot;/D DISABLE_NEW_DEPRECATED_INTERFACES&quot; in package DSC files</short_desc>
          <delta_ts>2019-09-03 01:35:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9148</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-22 02:10:47 +0000</bug_when>
    <thetext>We are planning to add the following build option in package DSC files:
[BuildOptions]
  *_*_*_CC_FLAGS = /D DISABLE_NEW_DEPRECATED_INTERFACES

Below is the target packages:
AdvancedFeaturePkg, DebugFeaturePkg, MinPlatformPkg and UserInterfaceFeaturePkg

The goal is to make sure the deprecated APIs are not used in our code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9149</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-22 02:12:00 +0000</bug_when>
    <thetext>Assign it to Shenglei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9435</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-03 01:13:06 +0000</bug_when>
    <thetext>Shenglei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9437</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-09-03 01:35:23 +0000</bug_when>
    <thetext>Fixed at edk2-platforms/master:

b3c88284307f7fb20e94ca3728590059015e9514
~
a36f0d9b7632fe26dd00895a8e83f6fd57346d12</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2824</bug_id>
          
          <creation_ts>2020-06-25 21:47:31 +0000</creation_ts>
          <short_desc>IntelSiliconPkg.dsc does not build DxeAslUpdateLib</short_desc>
          <delta_ts>2020-07-30 18:52:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12945</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-06-25 21:47:31 +0000</bug_when>
    <thetext>The DxeAslUpdateLib instance is not built in the IntelSiliconPkg build. The library build should be performed during the package build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12946</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-06-25 21:48:04 +0000</bug_when>
    <thetext>The change is simple, I&apos;ll send a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12986</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-30 21:59:50 +0000</bug_when>
    <thetext>Kubacki: please works it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13015</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-07-01 13:51:46 +0000</bug_when>
    <thetext>Patch submitted to the list: https://edk2.groups.io/g/devel/message/61920</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13245</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-07-30 18:52:38 +0000</bug_when>
    <thetext>Patch was submitted to edk2-platforms in the following commit: https://github.com/tianocore/edk2-platforms/commit/870a84d6114a0efbb28f97def1f1f9e2594a8301</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2520</bug_id>
          
          <creation_ts>2020-02-11 04:28:01 +0000</creation_ts>
          <short_desc>Incremental build failure in CLANGPDB tool chain on Windows host</short_desc>
          <delta_ts>2020-02-13 20:29:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>zhijux.fan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11200</commentid>
    <comment_count>0</comment_count>
      <attachid>459</attachid>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-11 04:28:01 +0000</bug_when>
    <thetext>Created attachment 459
the generated deps_target

The build failure is like below when do incremental build. The root cause is in generated deps_target file. It has one line &quot;:&quot;. 

d:\allpkg\edk2\Build\OvmfX64\DEBUG_CLANGPDB\X64\UefiCpuPkg\Library\MpInitLib\DxeMpInitLib\deps_target(1) : fatal error U1033: syntax error : &apos;:&apos; unexpected</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11201</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-11 04:28:38 +0000</bug_when>
    <thetext>Bob will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11253</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-02-13 20:29:10 +0000</bug_when>
    <thetext>fixed it in 422bf2725bca08fb13bbd264a4eb2d1a79695250</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>459</attachid>
            <date>2020-02-11 04:28:01 +0000</date>
            <delta_ts>2020-02-11 04:28:01 +0000</delta_ts>
            <desc>the generated deps_target</desc>
            <filename>deps_target</filename>
            <type>application/octet-stream</type>
            <size>3760</size>
            <attacher name="nobody">nobody</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2403</bug_id>
          
          <creation_ts>2019-12-06 00:28:49 +0000</creation_ts>
          <short_desc>CLANG9 TOOLS build OVMF failed with -D SECURE_BOOT_ENABLE=TRUE</short_desc>
          <delta_ts>2020-03-30 01:17:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Xiaoyu Lu">xiaoyux.lu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>steven.shi</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10622</commentid>
    <comment_count>0</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-12-06 00:28:49 +0000</bug_when>
    <thetext>REF: https://github.com/tianocore/tianocore.github.io/wiki/CLANG9-Tools-Chain

TAG: EDK2-stable201911 
OS: windows 10
LLVM: llvm 9.0.0

According to steps in CLANG9-Tools-Chain.

The blow command with -D SECURE_BOOT_ENABLE=TRUE will failed.

 build -p OvmfPkg/OvmfPkgIa32X64.dsc -a X64 -a IA32 -t CLANGPDB -b RELEASE -D SECURE_BOOT_ENABLE=TRUE

Error message:

lld-link: error: undefined symbol: strerror_s
&gt;&gt;&gt; referenced by c:\work\edk2\CryptoPkg\Library\OpensslLib\openssl\crypto\o_str.c
&gt;&gt;&gt;               OpensslLibCrypto.lib(o_str.obj)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10623</commentid>
    <comment_count>1</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-12-06 01:14:37 +0000</bug_when>
    <thetext>Sorry. My clang version is wrong. the right version is 10.0.0
download link: https://prereleases.llvm.org/win-snapshots/LLVM-10.0.0-e20a1e486e1-win64.exe.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10624</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-12-06 01:28:52 +0000</bug_when>
    <thetext>Assign it to Zhiguang.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11901</commentid>
    <comment_count>3</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-03-30 01:17:27 +0000</bug_when>
    <thetext>LLVM 10.0.0 is released recently.
No error is reported using the below command. Maybe LLVM has fixed this issue.

build -p OvmfPkg/OvmfPkgIa32X64.dsc -a X64 -a IA32 -t CLANGPDB -b RELEASE -D SECURE_BOOT_ENABLE=TRUE</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2311</bug_id>
          
          <creation_ts>2019-10-25 05:39:25 +0000</creation_ts>
          <short_desc>Basetool: Current GetFileDependency method to get source code&apos;s dependency is slow.</short_desc>
          <delta_ts>2019-12-18 03:44:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10218</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-10-25 05:39:25 +0000</bug_when>
    <thetext>Current GetFileDependency method to get source code&apos;s dependency is slow.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10259</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:28:36 +0000</bug_when>
    <thetext>Bob will work out the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10643</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-12-09 20:56:47 +0000</bug_when>
    <thetext>Pushed at 13c5e34a ~ 0c3e8e99

Incremental build reduces the build time by only building the module that need to update. Edk2 Build system is a Makefile based build system. The incrememtal build ability is provided by the Make program. But Edk2 build tool need to generate correct makefile to have Make program do incremental build correctly.

The current solution in build tool to support incremental build is that build tool find out the include file list for each source file of a module, and in module&apos;s makefile, build tool add the include file list as the source file&apos;s dependency. 
In this way Make program can decide if it need to rebuild a source code by checking its dependency. This solution has 2 shortcommings, one is the process of finding include list is slow, the other is this method can&apos;t handle case that a MACRO in #include statement so the related source file is always built. 

This patch provides another method to support incremental build. That is to use c preprocessor and trim tool to generate dependency files for the source file.
This method will save much time in AutoGen phase and handle MACRO in #include correctly.

For C files:
    1. MSVS.
        cl.exe has a build option /showIncludes to display include files on stdout. Build tool captures
        that messages and generate dependency files, .deps files.
    2. CLANG and GCC
        -MMD -MF build option are used to generate dependency files by preprocessor. Build tool updates the
       .deps files.

For ASL files:
    1. Trim find out all the included files, which are asl specific include format, and generate .trim.deps file.
    2. ASL PP use c preprocessor to find out all included files with #include format and generate a .deps file
    3. build tool updates the .deps file

For ASM files (.asm, .s or .nasm):
    1. Trim find out all the included files, which are asm specific include format, and generate .trim.deps file.
    2. ASM PP use c preprocessor to find out all included files with #include format and generate a deps file
    3. build tool updates the .deps file

Build tool add &quot;include&quot; instruction for those deps files in the Makefile.

This patch does not support RVCT tool chain for the BZ https://bugzilla.tianocore.org/show_bug.cgi?id=1750</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10726</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-12-18 03:44:33 +0000</bug_when>
    <thetext>A fix for incremental build:
SHA-1: 01b6090b75922bc72604c334bd3dc331490af3bb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2008</bug_id>
          
          <creation_ts>2019-07-22 04:13:42 +0000</creation_ts>
          <short_desc>Enable 5-level paging in DXE long mode</short_desc>
          <delta_ts>2019-08-21 16:16:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=847</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8536</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-07-22 04:13:42 +0000</bug_when>
    <thetext>This tracks the effort of enabling 5-level paging in DXE long mode when CPU supports it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8537</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-07-22 04:14:19 +0000</bug_when>
    <thetext>Tech doc is published at https://software.intel.com/en-us/download/5-level-paging-and-5-level-ept-white-paper</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8551</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-23 15:37:19 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH 0/4] Support 5-level paging in DXE long mode
http://mid.mail-archive.com/20190722081547.56100-1-ray.ni@intel.com
https://edk2.groups.io/g/devel/message/44114</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8946</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-12 04:37:47 +0000</bug_when>
    <thetext>This is a feature change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9129</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-08-21 16:16:57 +0000</bug_when>
    <thetext>Thanks to Eric.

Pushed @ 1ab7d72651bb254fa9bcb20fd3da2685fc142ea1..01acb06c4f1e1af07c05ea4e3ca437ce7f261a83.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2158</bug_id>
          
          <creation_ts>2019-09-06 01:15:15 +0000</creation_ts>
          <short_desc>OS complains memory &lt; 1MB changes across S3</short_desc>
          <delta_ts>2019-09-06 01:18:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9480</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-06 01:15:15 +0000</bug_when>
    <thetext>Root cause is a racing condition in MpInitLib:
1. BSP: WakeUpByInitSipiSipi is set by NotifyOnS3SmmInitDonePpi()
2. BSP: WakeUpAP() wakes all APs to run certain procedure.
  2.1. AllocateResetVector() uses &lt;1MB memory for wake up vector.
  2.1. FillExchangeInfoData() resets NumApsExecuting to 0.
  2.2. WaitApWakeup() waits AP to clear WAKEUP_AP_SIGNAL.
3. AP: ApWakeupFunction() clears WAKEUP_AP_SIGNAL to inform BSP.
5. BSP: FreeResetVector() restores the &lt;1MB memory
4. AP: ApWakeupFunction() calls the certain procedure.
  4.1. NumApsExecuting is decreased.

#4.1 happens after the 1MB memory is restored so the result is
memory below 1MB is changed by #4.1
It happens only when the AP executes procedure a bit longer.
AP returns back to ApWakeupFunction() from procedure after
BSP restores the &lt;1MB memory.

Since NumApsExecuting is only used when InitFlag == ApInitConfig
for counting the processor count.

The change should moves the NumApsExecuting decrease to the path when
InitFlag == ApInitConfig.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9481</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-06 01:16:12 +0000</bug_when>
    <thetext>This issue has been fixed in Edk2 in 201908 stable tag. BZ is created to record this fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9482</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-06 01:18:19 +0000</bug_when>
    <thetext>Fix at edk2 commit

f0718d1d6b47745a4249f4006807a45f2245dba1..9fc1b85fd16b1740de66e99a406a08471eeafa61</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2451</bug_id>
          
          <creation_ts>2020-01-09 00:38:25 +0000</creation_ts>
          <short_desc>Incremental Build Issue for the header file deletion</short_desc>
          <delta_ts>2020-01-19 03:10:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>steven.shi</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10814</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-09 00:38:25 +0000</bug_when>
    <thetext>First, I do clean build. Then, I delete the included header file and its reference in C source file. Last, I trig build again. Build will failure, because it still finds the original header file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10815</commentid>
    <comment_count>1</comment_count>
      <attachid>447</attachid>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-09 00:39:29 +0000</bug_when>
    <thetext>Created attachment 447
TestCase1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10816</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-09 00:41:21 +0000</bug_when>
    <thetext>The reproduced steps are below. 
1. Apply the test case patch, build HelloWorld.inf.  
2. Revert the test case patch, build HelloWorld.inf, then failure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10817</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-09 00:42:12 +0000</bug_when>
    <thetext>Bob will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10938</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-01-17 00:53:53 +0000</bug_when>
    <thetext>patch is under review.
https://edk2.groups.io/g/devel/message/53340</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10950</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-01-19 03:10:03 +0000</bug_when>
    <thetext>Fixed at SHA-1: 5cd3d4bc43e543caf5f78baaacced8aaf04c1d91</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>447</attachid>
            <date>2020-01-09 00:39:29 +0000</date>
            <delta_ts>2020-01-09 00:39:29 +0000</delta_ts>
            <desc>TestCase1</desc>
            <filename>0001-TestCase-for-the-incremental-build.patch</filename>
            <type>application/octet-stream</type>
            <size>1092</size>
            <attacher name="nobody">nobody</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2010</bug_id>
          
          <creation_ts>2019-07-22 23:49:33 +0000</creation_ts>
          <short_desc>KabylakeSiliconPkg: Possible out-of-bounds memory writes</short_desc>
          <delta_ts>2019-07-22 23:55:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nathaniel L DeSimone">nathaniel.l.desimone</reporter>
          <assigned_to name="Nathaniel L DeSimone">nathaniel.l.desimone</assigned_to>
          <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8543</commentid>
    <comment_count>0</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2019-07-22 23:49:33 +0000</bug_when>
    <thetext>Logic error in the boundary check for a for loop.  Could potentially lead to out-of-bounds memory writes.  These should use &quot;&lt;&quot; instead of &quot;&lt;=&quot;.

Silicon/Intel/KabylakeSiliconPkg/Library/DxeAslUpdateLib/DxeAslUpdateLib.c

line 106:
for (DsdtPointer = CurrPtr; DsdtPointer &lt;= (CurrPtr + ((EFI_ACPI_COMMON_HEADER *) CurrPtr)-&gt;Length); DsdtPointer++) {

Also, missing a NULL pointer check for the CurrPt variable before de-referencing. The following NULL check needs to be added on line 102:

if (CurrPtr == NULL) {
  return EFI_NOT_FOUND;
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8544</commentid>
    <comment_count>1</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2019-07-22 23:51:25 +0000</bug_when>
    <thetext>Confirming issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8545</commentid>
    <comment_count>2</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2019-07-22 23:51:48 +0000</bug_when>
    <thetext>Patch sent to mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8546</commentid>
    <comment_count>3</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2019-07-22 23:55:24 +0000</bug_when>
    <thetext>Fix Committed: https://github.com/tianocore/edk2-platforms/commit/688ba473560b57d01a84438a0431d4ac9271805b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2137</bug_id>
          
          <creation_ts>2019-08-28 03:47:31 +0000</creation_ts>
          <short_desc>Basetool: Changing source file does not trigger rebuild</short_desc>
          <delta_ts>2019-08-28 23:16:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9372</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-28 03:47:31 +0000</bug_when>
    <thetext>This is a regression issue of incremental build. That is introduced by commit 94459080c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9377</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-28 12:03:24 +0000</bug_when>
    <thetext>Now, the change in INF file will not trig rebuild. For example:

1st build:
build -p MdeModulePkg\MdeModulePkg.dsc -a IA32 -m MdeModulePkg\Application\HelloWorld\HelloWorld.inf

2st build with below change.
update MdeModulePkg\Application\HelloWorld\HelloWorld.inf
and remove MdeModulePkg/MdeModulePkg.dec from [Packages] section

build -p MdeModulePkg\MdeModulePkg.dsc -a IA32 -m MdeModulePkg\Application\HelloWorld\HelloWorld.inf

2st build should update Makefile and trig build. But now, there is no build trig. 

So, this is the critical incremental build issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9385</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-28 23:16:42 +0000</bug_when>
    <thetext>Fixed at df43ea6c08100487776bb0962c657d214e345ae7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2630</bug_id>
          
          <creation_ts>2020-03-25 03:25:25 +0000</creation_ts>
          <short_desc>Build fail with GCC48 and GCC49 in OvmfPkg</short_desc>
          <delta_ts>2020-03-28 13:35:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11832</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-03-25 03:25:25 +0000</bug_when>
    <thetext>Edk2/OvmfPkg/Library/X86QemuLoadImageLib/X86QemuLoadImageLib.c: In function ‘QemuLoadKernelImage’:
Edk2/OvmfPkg/Library/X86QemuLoadImageLib/X86QemuLoadImageLib.c:416:30: error: ‘CommandLine’ may be used uninitialized in this function [-Werror=maybe-uninitialized]
      UnicodeSPrintAsciiFormat (
      cc1: all warnings being treated as errors


Above is error message.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11833</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-03-25 03:26:55 +0000</bug_when>
    <thetext>Assigned to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11835</commentid>
    <comment_count>2</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-25 05:13:26 +0000</bug_when>
    <thetext>Patch sent

Message-Id: &lt;20200325091238.24048-1-ard.biesheuvel@linaro.org&gt;
[PATCH] OvmfPkg/X86QemuLoadImageLib: add dummy assignment to work around GCC</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11881</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-28 13:35:21 +0000</bug_when>
    <thetext>Fixed in commit 92a1ac40809e (&quot;OvmfPkg/X86QemuLoadImageLib: add dummy assignment to work around GCC&quot;, 2020-03-26)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2981</bug_id>
          
          <creation_ts>2020-09-22 01:43:01 +0000</creation_ts>
          <short_desc>Add extra parameter to the Fit Gen Tool to input the Higher Address which will be consumed for &quot;File to Flash address Conversions&quot; &amp; vise versa</short_desc>
          <delta_ts>2022-05-06 00:09:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="cbduggap">chinni.b.duggapu</reporter>
          <assigned_to name="cbduggap">chinni.b.duggapu</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>chinni.b.duggapu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13729</commentid>
    <comment_count>0</comment_count>
    <who name="cbduggap">chinni.b.duggapu</who>
    <bug_when>2020-09-22 01:43:01 +0000</bug_when>
    <thetext>Background: 
Typically Flash Higher address is assumed as 4GB in native SPI Boot as pre-boot Objects like FIT table will be part of  the initial address space starting from 4GB, and tools like FitGen assume 4GB as higher address in any “File address” to “Flash Address” Conversions.

Enhancement:  
we want to remove such assumptions for “Boot from Block Storage” Feature where the Flash higher address depends on several other factors. 

Code Change Details:
So, we want to add extra parameter to the Fit Gen Tool to input the Higher Address.
Default Address should be 4GB and if some one inputs new address, tool must consume that address instead of Default address (4GB).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13730</commentid>
    <comment_count>1</comment_count>
    <who name="cbduggap">chinni.b.duggapu</who>
    <bug_when>2020-09-22 01:46:18 +0000</bug_when>
    <thetext>Changing the Status of the bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13827</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-09-29 03:55:24 +0000</bug_when>
    <thetext>The code review message is https://edk2.groups.io/g/devel/message/65701</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13949</commentid>
    <comment_count>3</comment_count>
    <who name="cbduggap">chinni.b.duggapu</who>
    <bug_when>2020-10-13 04:53:18 +0000</bug_when>
    <thetext>Bug fix for GCC Build issue : https://git-amr-7.devtools.intel.com/gerrit/#/c/106784/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18939</commentid>
    <comment_count>4</comment_count>
    <who name="cbduggap">chinni.b.duggapu</who>
    <bug_when>2022-05-06 00:09:35 +0000</bug_when>
    <thetext>Submitted changes long back.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2661</bug_id>
          
          <creation_ts>2020-04-03 21:08:59 +0000</creation_ts>
          <short_desc>OvmfPkg with numerous defines turned on runs out of space on NOOPT build with VS2019</short_desc>
          <delta_ts>2020-04-08 06:23:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12060</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-03 21:08:59 +0000</bug_when>
    <thetext>See the failed build here:
https://dev.azure.com/tianocore/edk2-ci-play/_build/results?buildId=5333&amp;view=results



Build Cmd: 

build -p OvmfPkg/OvmfPkgIa32X64.dsc -b NOOPT -t VS2019 -a IA32 -a X64 -D SECURE_BOOT_ENABLE=1 -D SMM_REQUIRE=1 -D TPM_ENABLE=1 -D TPM_CONFIG_ENABLE=1 -D NETWORK_TLS_ENABLE=1 -D NETWORK_IP6_ENABLE=1 -D NETWORK_HTTP_BOOT_ENABLE=1
2020-04-04T00:47:01.3747499Z INFO - ------------------------------------------------
2020-04-04T00:47:01.3749641Z INFO - --------------Cmd Output Starting---------------
2020-04-04T00:47:01.3750289Z INFO - ------------------------------------------------
2020-04-04T00:47:02.1051326Z INFO - Build environment: Windows-10-10.0.17763-SP0
2020-04-04T00:47:02.1051950Z INFO - Build start time: 00:47:02, Apr.04 2020
2020-04-04T00:47:02.1052267Z INFO - 
2020-04-04T00:47:02.2532504Z INFO - WORKSPACE        = d:\a\1\s
2020-04-04T00:47:02.2541701Z INFO - EDK_TOOLS_PATH   = d:\a\1\s\basetools
2020-04-04T00:47:02.2547510Z INFO - EDK_TOOLS_BIN    = d:\a\1\s\basetools\bin\win32
2020-04-04T00:47:02.2548049Z INFO - CONF_PATH        = D:\a\1\s\Conf
2020-04-04T00:47:02.2548486Z INFO - PYTHON_COMMAND   = c:\hostedtoolcache\windows\python\3.8.2\x64\python.exe
2020-04-04T00:47:02.3146227Z INFO - 
2020-04-04T00:47:02.3465345Z INFO - 
2020-04-04T00:47:02.3479420Z INFO - Processing meta-data .
2020-04-04T00:47:02.3480081Z INFO - Architecture(s)  = IA32 X64
2020-04-04T00:47:02.3480516Z INFO - Build target     = NOOPT
2020-04-04T00:47:02.3481030Z INFO - Toolchain        = VS2019
2020-04-04T00:47:02.3481425Z INFO - 
2020-04-04T00:47:02.3481879Z INFO - Active Platform          = d:\a\1\s\OvmfPkg\OvmfPkgIa32X64.dsc


Error:

2020-04-04T00:50:01.8443441Z INFO - Generating DXEFV FV
2020-04-04T00:50:02.2653612Z INFO - ###### [&apos;GenFv&apos;, &apos;-F&apos;, &apos;FALSE&apos;, &apos;-a&apos;, &apos;d:\\a\\1\\s\\Build\\Ovmf3264\\NOOPT_VS2019\\FV\\Ffs\\DXEFV.inf&apos;, &apos;-o&apos;, &apos;d:\\a\\1\\s\\Build\\Ovmf3264\\NOOPT_VS2019\\FV\\DXEFV.Fv&apos;, &apos;-i&apos;, &apos;d:\\a\\1\\s\\Build\\Ovmf3264\\NOOPT_VS2019\\FV\\DXEFV.inf&apos;]
2020-04-04T00:50:02.2655234Z INFO - Return Value = 2
2020-04-04T00:50:02.2657999Z INFO - GenFv: ERROR 3000: Invalid
2020-04-04T00:50:02.2658633Z INFO -   the required fv image size 0xcf3300 exceeds the set fv image size 0xc00000
2020-04-04T00:50:02.2659036Z INFO - 
2020-04-04T00:50:02.2659293Z INFO - 
2020-04-04T00:50:02.2659520Z INFO - 
2020-04-04T00:50:02.2659763Z INFO - 
2020-04-04T00:50:02.2660006Z INFO - build.py...
2020-04-04T00:50:02.2660341Z INFO -  : error 7000: Failed to generate FV
2020-04-04T00:50:02.2660848Z INFO - 
2020-04-04T00:50:02.2661154Z INFO - 
2020-04-04T00:50:02.2661380Z INFO - 
2020-04-04T00:50:02.2661646Z INFO - build.py...
2020-04-04T00:50:02.2661964Z INFO -  : error 7000: Failed to execute command
2020-04-04T00:50:02.2662283Z INFO - 
2020-04-04T00:50:02.2662503Z INFO - 
2020-04-04T00:50:02.2662768Z INFO - - Failed -
2020-04-04T00:50:02.2663078Z INFO - Build end time: 00:50:02, Apr.04 2020
2020-04-04T00:50:02.2663453Z INFO - Build total time: 00:03:00</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12061</commentid>
    <comment_count>1</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-03 21:09:55 +0000</bug_when>
    <thetext>Marking as a blocker as this is going to block Platform CI efforts.  :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12082</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-07 06:29:25 +0000</bug_when>
    <thetext>In OvmfPkg we tend to bump the DXEFV size by 1 MB once per 1.5 years (18 months), on average. Most recently we&apos;ve done that less than 1 month ago.

- da78c88f4535 (&quot;OvmfPkg: raise DXEFV size to 8 MB&quot;, 2014-03-05)

- 08df58ec3043 (&quot;OvmfPkg: raise DXEFV size to 9 MB&quot;, 2015-10-07)

- 2f7b34b20842 (&quot;OvmfPkg: raise DXEFV size to 10 MB&quot;, 2016-05-31)

- d272449d9e1e (&quot;OvmfPkg: raise DXEFV size to 11 MB&quot;, 2018-05-29)

- 5e75c4d1fe4f (&quot;OvmfPkg: raise DXEFV size to 12 MB&quot;, 2020-03-11)

I&apos;m surprised that the first full-featured NOOPT build attempt with VS2019 has run out of DXEFV, especially that (a) the latest bump (to 12 MB) is just 1 month old, (b) the amount by which VS2019 exceeds the current (12 MB) DXEFV size is huge: almost a full MB (~ 972 KB).

This means that, in order to maintain the traditional pattern (i.e., that every bump makes some comfortable headroom for the next 1.5 years), we&apos;d have to bump DXEFV to *fourteen* megs for VS2019&apos;s sake. Given that the last topical commit (5e75c4d1fe4f) was just 1 month ago, we could conceptually consider those together a single bump of 3 MB, from 11 MB to 14 MB.

That makes me *really* uncomfortable. To the point where I&apos;d rather opt for disabling NOOPT builds with VS2019 in CI.

Or else, can we trim the amount of... &quot;stuff&quot; that VS2019 places in object files, for NOOPT builds? Can we perhaps extend the [BuildOptions] sections in the OVMF DSC files with some

  MSFT:NOOPT_VS2019_*_CC_FLAGS = ...

flags?

Looking at &quot;BaseTools/Conf/tools_def.template&quot;, the difference between:

- DEBUG_VS2019_X64_CC_FLAGS
- NOOPT_VS2019_X64_CC_FLAGS 

appears that NOOPT removes the &quot;/O1b2s /GL /Gw&quot; flags, and adds &quot;/Od&quot;.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12084</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-07 14:15:10 +0000</bug_when>
    <thetext>I can remove it from the VS2019 build for now and list it as a limitation.  Personally I don&apos;t use full noopt builds because the size is often way to large to fit in our flash parts.  We do use /Od for a given module we want to debug but contain it to the module and that is usually a one off operation.  If you decide later to add this for your platform it is an easy change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12088</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 21:34:16 +0000</bug_when>
    <thetext>Don&apos;t need to fix it, agree to close it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12143</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-08 06:23:18 +0000</bug_when>
    <thetext>Thank you for the feedback, Sean and Liming! It didn&apos;t occur to me that we can pass /Od in a module INF file too -- that&apos;s a very useful tool, thanks for letting me know. (I didn&apos;t realize this despite &quot;prior art&quot; in edk2, such as [BuildOptions] in the OpenSSL INF files.) Very helpful reminder!

I agree with closing this BZ for now, without source code changes. Accordingly, I&apos;m flipping the resolution to WONTFIX for now (from the current FIXED): the initial report does describe a potential / valid improvement (there *is* stuff we could implement), we&apos;re just choosing not to, for the time being.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2572</bug_id>
          
          <creation_ts>2020-03-05 22:26:48 +0000</creation_ts>
          <short_desc>ovmf build fail on Redhat 8.1, gcc 8.3.1</short_desc>
          <delta_ts>2020-03-09 21:35:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Normal</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>farrah.chen</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11586</commentid>
    <comment_count>0</comment_count>
      <attachid>466</attachid>
    <who name="">farrah.chen</who>
    <bug_when>2020-03-05 22:26:48 +0000</bug_when>
    <thetext>Created attachment 466
build log

ovmf build fail on Redhat 8.1, we found the first bad commit as below via &quot;git bisect&quot;:
commit 859b55443a4253bad8bb618d04a51b2ded67f24b
Author: Ard Biesheuvel &lt;ard.biesheuvel@linaro.org&gt;
Date:   Sat Feb 29 10:33:21 2020 +0100

    OvmfPkg/PlatformBootManagerLib: switch to QemuLoadImageLib

Reproduce steps:
git clone https://github.com/tianocore/edk2.git
cd edk2
git submodule init
git submodule update --recursive
OvmfPkg/build.sh -a X64

Error log:
......
Building ... /home/build/kvm_build/nightly/kvm_qemu/kvm-next-20200306063625-a93236fc-ef9f8fcb/kvm/edk2/OvmfPkg/Library/XenHypercallLib/XenHypercallLib.inf [X64]
&quot;gcc-ar&quot; cr /home/build/kvm_build/nightly/kvm_qemu/kvm-next-20200306063625-a93236fc-ef9f8fcb/kvm/edk2/Build/OvmfX64/DEBUG_GCC5/X64/OvmfPkg/Library/PlatformBootManagerLib/PlatformBootManagerLib/OUTPUT/PlatformBootManagerLib.lib  @/home/build/kvm_build/nightly/kvm_qemu/kvm-next-20200306063625-a93236fc-ef9f8fcb/kvm/edk2/Build/OvmfX64/DEBUG_GCC5/X64/OvmfPkg/Library/PlatformBootManagerLib/PlatformBootManagerLib/OUTPUT/object_files.lst
make: Nothing to be done for &apos;tbuild&apos;.
cc1: all warnings being treated as errors
make: *** [GNUmakefile:303: /home/build/kvm_build/nightly/kvm_qemu/kvm-next-20200306063625-a93236fc-ef9f8fcb/kvm/edk2/Build/OvmfX64/DEBUG_GCC5/X64/OvmfPkg/Library/X86QemuLoadImageLib/X86QemuLoadImageLib/OUTPUT/X86QemuLoadImageLib.obj] Error 1


build.py...
 : error 7000: Failed to execute command
        make tbuild [/home/build/kvm_build/nightly/kvm_qemu/kvm-next-20200306063625-a93236fc-ef9f8fcb/kvm/edk2/Build/OvmfX64/DEBUG_GCC5/X64/OvmfPkg/Library/X86QemuLoadImageLib/X86QemuLoadImageLib]


build.py...
 : error F002: Failed to build module
        /home/build/kvm_build/nightly/kvm_qemu/kvm-next-20200306063625-a93236fc-ef9f8fcb/kvm/edk2/OvmfPkg/Library/X86QemuLoadImageLib/X86QemuLoadImageLib.inf [X64, GCC5, DEBUG]

- Failed 

Environment:
OS: Red Hat Enterprise Linux 8.1
GCC: gcc version 8.3.1 20190507 (Red Hat 8.3.1-4) (GCC)
Kernel: Linux-4.18.0-147.el8.x86_64-x86_64-with-redhat-8.1-Ootpa</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11588</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-06 11:38:02 +0000</bug_when>
    <thetext>Farrah,

the bug report in comment#0 doesn&apos;t contain any actual compiler error message. Can you paste more information please?

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11593</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-06 14:31:13 +0000</bug_when>
    <thetext>Apologies, I missed that there was an attachment too. The attachment
does show the problem:

&gt;| OvmfPkg/Library/X86QemuLoadImageLib/X86QemuLoadImageLib.c: In function &apos;QemuStartKernelImage&apos;:
&gt;| OvmfPkg/Library/X86QemuLoadImageLib/X86QemuLoadImageLib.c:463:33: error: unused variable &apos;KernelImageHandle&apos; [-Werror=unused-variable]
&gt;|    EFI_HANDLE                    KernelImageHandle;
&gt;|                                  ^~~~~~~~~~~~~~~~~

And, as of commit 80681884319d (&quot;OvmfPkg/OvmfXen: fix build by providing
QemuLoadImageLib resolution&quot;, 2020-03-06), the issue reproduces for me,
on (a development, unreleased version of) RHEL-8.2.0, using
gcc-8.3.1-5.el8.x86_64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11594</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-06 14:58:19 +0000</bug_when>
    <thetext>I&apos;ll try to submit a patch soon, unless Ard beats me to it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11601</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-06 18:06:00 +0000</bug_when>
    <thetext>Posted:

* [edk2-devel] [PATCH]
  OvmfPkg/X86QemuLoadImageLib: fix &quot;unused variable&quot; error in X64 DXE builds

https://edk2.groups.io/g/devel/message/55622
http://mid.mail-archive.com/20200306230442.24100-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11634</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-09 19:18:28 +0000</bug_when>
    <thetext>Fixed in commit a3e25cc8a1dd.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11637</commentid>
    <comment_count>6</comment_count>
    <who name="">farrah.chen</who>
    <bug_when>2020-03-09 21:35:30 +0000</bug_when>
    <thetext>Thank you for greate help!</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>466</attachid>
            <date>2020-03-05 22:26:48 +0000</date>
            <delta_ts>2020-03-05 22:26:48 +0000</delta_ts>
            <desc>build log</desc>
            <filename>build_ovmf.log</filename>
            <type>application/octet-stream</type>
            <size>218317</size>
            <attacher>farrah.chen</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2864</bug_id>
          
          <creation_ts>2020-07-24 09:16:55 +0000</creation_ts>
          <short_desc>GCC build fails due variable self assignment</short_desc>
          <delta_ts>2020-08-20 01:09:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Aamir Bohra">aamir.bohra</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable201911</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13172</commentid>
    <comment_count>0</comment_count>
    <who name="Aamir Bohra">aamir.bohra</who>
    <bug_when>2020-07-24 09:16:55 +0000</bug_when>
    <thetext>make -C &quot;Edk2/BaseTools&quot; command fails:



BaseTools/Source/C/Common/PeCoffLoaderEx.c:133:12: error: explicitly assigning value of variable of type &apos;UINT32&apos; (aka &apos;unsigned int&apos;) to itself [-Werror,-Wself-assign]

  OrgValue = OrgValue;

  ~~~~~~~~ ^ ~~~~~~~~


after reverting following commit build works fine. 
4eb698ff5c2aea427718a6d9c0c3befd927bff20 : BaseTools: BaseTools changes for RISC-V platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13175</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-27 10:57:12 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13176</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-07-27 11:04:24 +0000</bug_when>
    <thetext>Patch was sent.
Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13468</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 01:09:12 +0000</bug_when>
    <thetext>At edk2 commit ID e848b58d7c85293cd4121287abcea2d22a4f0620</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2807</bug_id>
          
          <creation_ts>2020-06-15 14:40:37 +0000</creation_ts>
          <short_desc>Build intermittently breaks with &quot;make: *** No rule to make target &apos;tbuild&apos;.  Stop.&quot;</short_desc>
          <delta_ts>2020-08-07 00:28:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Lucy Yan">lucyyan</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>lucyyan</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12880</commentid>
    <comment_count>0</comment_count>
    <who name="Lucy Yan">lucyyan</who>
    <bug_when>2020-06-15 14:40:37 +0000</bug_when>
    <thetext>In this file
BaseTools/Source/Python/AutoGen/AutoGenWorker.py
When generating makefiles for modules, the worker threads sometimes prematurely exits without creating all the makefiles.  This may due to unreliable python (2.7) call to q.empty(), and also q.get_nowait() sometimes throws Empty exception when the queue is not really empty.
The problem is more pronounced with a larger module list and more worker threads.

150 class AutoGenWorkerInProcess(mp.Process):
   ...

229             while True:
230                 if self.module_queue.empty():
231                     break  &lt;--  Hit this because q.empty() incorrectly returns true 
232                 if self.error_event.is_set():
233                     break
  ...
235 module_file,module_root,module_path,module_basename,module_originalpath,module_arch,IsLib = self.module_queue.get_nowait()
 ...
283         except Empty:
284             pass &lt;-- Hit this exception when queue is not empty.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12928</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-06-20 05:40:49 +0000</bug_when>
    <thetext>what is the python version? 2.7.?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12929</commentid>
    <comment_count>2</comment_count>
    <who name="Lucy Yan">lucyyan</who>
    <bug_when>2020-06-20 21:23:01 +0000</bug_when>
    <thetext>Yes, python 2.7.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12932</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-06-22 03:26:26 +0000</bug_when>
    <thetext>please show me the 3 digits version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12934</commentid>
    <comment_count>4</comment_count>
    <who name="Lucy Yan">lucyyan</who>
    <bug_when>2020-06-22 12:39:38 +0000</bug_when>
    <thetext>2.7.18</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12988</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-30 22:06:11 +0000</bug_when>
    <thetext>recommend to move to Python3.x. Python3.7 or higher is the supported python version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13021</commentid>
    <comment_count>6</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-07-01 19:44:26 +0000</bug_when>
    <thetext>take ownership.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13022</commentid>
    <comment_count>7</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-07-01 19:45:04 +0000</bug_when>
    <thetext>Python3 fixed this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13299</commentid>
    <comment_count>8</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-08-02 21:35:43 +0000</bug_when>
    <thetext>The problem is not fixed by python3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13300</commentid>
    <comment_count>9</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-08-02 22:05:34 +0000</bug_when>
    <thetext>Provide a patch to improve the method of checking queue empty. https://edk2.groups.io/g/devel/message/63641

The Queue.empty() method is not reliable in multiple process runtime environment.

The case in this BZ is that all the autogen worker exit because of the incorrect return value of q.empty(), but there are still modules left in the queue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13335</commentid>
    <comment_count>10</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-08-07 00:28:08 +0000</bug_when>
    <thetext>fixed at bfe36cb4efe577405aa4116a95e22a646fc8ee0c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2915</bug_id>
          
          <creation_ts>2020-08-21 01:04:43 +0000</creation_ts>
          <short_desc>Add definitions for HTTP Chunked Transfer</short_desc>
          <delta_ts>2020-11-08 20:31:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13481</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-21 01:04:43 +0000</bug_when>
    <thetext>Add below definitions in http1.1.h for HTTP Chunked Transfer

#define HTTP_HEADER_TRANSFER_ENCODING_CHUNKED &quot;chunked&quot;
#define CHUNKED_TRNASFER_CODING_CR &apos;\r&apos;
#define CHUNKED_TRNASFER_CODING_LF &apos;\n&apos;
#define CHUNKED_TRNASFER_CODING_LAST_CHUNK &apos;0&apos;
#define CHUNKED_TRNASFER_CODING_EXTENSION_SAPERATOR &apos;;&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13525</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 22:05:30 +0000</bug_when>
    <thetext>Abner, please clarify the reason to add those definitions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13582</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-09-01 02:23:52 +0000</bug_when>
    <thetext>These definitions are introduced to http1.1.h for the HTTP chunked transfer if HTTP_STATUS_413_REQUEST_ENTITY_TOO_LARGE is returned due to the host can&apos;t accept large payload. 
Current HTTP-&gt;Response() has the chunk capability for the case if the caller has a limited size of buffer, however this is for the high level usage when caller invokes HTTP-&gt;Response(). HTTP chunked transfer is the underlying mechanism of HTTP protocol, this capability could be transparent to the caller.
Based on the above, the scope of this BZ could be limited to edk2 implementation but not in the scope of the UEFI system. So we don&apos;t have to submit ECR for UEFI spec, just introduce the definitions of HTTP chunked transfer in edk2 Http header file is enough.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13639</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-07 21:31:37 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14216</commentid>
    <comment_count>4</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-11-04 01:06:55 +0000</bug_when>
    <thetext>Fixed at commit 3b87d728</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14272</commentid>
    <comment_count>5</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-11-08 20:31:48 +0000</bug_when>
    <thetext>Fix at
a7d97704
3b87d728</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2216</bug_id>
          
          <creation_ts>2019-09-24 08:47:08 +0000</creation_ts>
          <short_desc>ArmVirtPkg fails to build &quot;source object (many) has EABI version 5, but target LogoDxe.dll has EABI version 0&quot;</short_desc>
          <delta_ts>2019-11-12 04:02:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1875</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dann frazier">dannf</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>dannf</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9779</commentid>
    <comment_count>0</comment_count>
    <who name="dann frazier">dannf</who>
    <bug_when>2019-09-24 08:47:08 +0000</bug_when>
    <thetext>ArmVirtPkg for ARM fails to build for me in master. I bisected this down to the following commit:

673d09a2dd BaseTools: Enable Multiple Process AutoGen

The build failures when building LogoDxe.dll with an error like the following for many source objects:

/usr/lib/gcc-cross/arm-linux-gnueabihf/9/../../../../arm-linux-gnueabihf/bin/ld: error: source object /home/dannf/git/edk2.debug/Build/ArmVirtQemu-ARM/DEBUG_GCC49/ARM/MdePkg/Library/UefiDriverEntryPoint/UefiDriverEntryPoint/OUTPUT/UefiDriverEntryPoint.lib(DriverEntryPoint.obj) has EABI version 5, but target /home/dannf/git/edk2.debug/Build/ArmVirtQemu-ARM/DEBUG_GCC49/ARM/MdeModulePkg/Logo/LogoDxe/DEBUG/LogoDxe.dll has EABI version 0

A &quot;what&apos;s different&quot; investigation turned up a difference in static_library_files.lst - specifically, the order of this file appears to be significant. Previous to the above commit, LogoDxehii.lib would appear near the end of the file - now it is near the beginning. Moving it back to the end of the file allows the linking to continue. LogoDxehii.lib seems to be unique in that it is not an ar archive, and file reports that it is an &quot;ELF 32-bit LSB relocatable, ARM, version 1 (ARM), not stripped&quot; - while other objects would report &quot;EABI version 5&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9780</commentid>
    <comment_count>1</comment_count>
      <attachid>406</attachid>
    <who name="dann frazier">dannf</who>
    <bug_when>2019-09-24 08:52:29 +0000</bug_when>
    <thetext>Created attachment 406
static_library_files.lst from a failing build (@673d09a2)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9781</commentid>
    <comment_count>2</comment_count>
      <attachid>407</attachid>
    <who name="dann frazier">dannf</who>
    <bug_when>2019-09-24 08:53:51 +0000</bug_when>
    <thetext>Created attachment 407
static_library_files.lst from a working build (@197ca7fe)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9782</commentid>
    <comment_count>3</comment_count>
      <attachid>408</attachid>
    <who name="dann frazier">dannf</who>
    <bug_when>2019-09-24 08:55:24 +0000</bug_when>
    <thetext>Created attachment 408
failing build log (@673d09a2)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9783</commentid>
    <comment_count>4</comment_count>
      <attachid>409</attachid>
    <who name="dann frazier">dannf</who>
    <bug_when>2019-09-24 08:55:57 +0000</bug_when>
    <thetext>Created attachment 409
working build log (@197ca7fe)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9849</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 20:51:00 +0000</bug_when>
    <thetext>LogoDxehii.lib is generated from objcopy. It includes the binary HII data. It is not the normal library format. Seemly, ARM GCC linker uses the first input library EABI version as the final EABI version. If so, when LogoDxehii.lib is specified as the first one, it will cause the above linker issue. The quick fix is to update BaseTools keep original library list order. The long term fix should investigate how to generate the same EABI version in LogoDxehii.lib with objcopy tool.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9850</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 20:51:29 +0000</bug_when>
    <thetext>Bob works the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9868</commentid>
    <comment_count>7</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-29 00:02:59 +0000</bug_when>
    <thetext>BaseTools patch was committed.
SHA-1: 1f5e4d91284c918dc048b8b6f96f3cc97fcd6dfe</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10404</commentid>
    <comment_count>8</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-11-12 04:02:06 +0000</bug_when>
    <thetext>BaseTools patch was committed.
SHA-1: 1f5e4d91284c918dc048b8b6f96f3cc97fcd6dfe</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>406</attachid>
            <date>2019-09-24 08:52:29 +0000</date>
            <delta_ts>2019-09-24 08:52:29 +0000</delta_ts>
            <desc>static_library_files.lst from a failing build (@673d09a2)</desc>
            <filename>static_library_files.lst</filename>
            <type>application/octet-stream</type>
            <size>2303</size>
            <attacher name="dann frazier">dannf</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>407</attachid>
            <date>2019-09-24 08:53:51 +0000</date>
            <delta_ts>2019-09-24 08:53:51 +0000</delta_ts>
            <desc>static_library_files.lst from a working build (@197ca7fe)</desc>
            <filename>static_library_files.lst</filename>
            <type>application/octet-stream</type>
            <size>2303</size>
            <attacher name="dann frazier">dannf</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>408</attachid>
            <date>2019-09-24 08:55:24 +0000</date>
            <delta_ts>2019-09-24 08:55:24 +0000</delta_ts>
            <desc>failing build log (@673d09a2)</desc>
            <filename>edk2.bad.buildlog.gz</filename>
            <type>application/gzip</type>
            <size>35526</size>
            <attacher name="dann frazier">dannf</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>409</attachid>
            <date>2019-09-24 08:55:57 +0000</date>
            <delta_ts>2019-09-24 08:55:57 +0000</delta_ts>
            <desc>working build log (@197ca7fe)</desc>
            <filename>edk2.good.buildlog.gz</filename>
            <type>application/gzip</type>
            <size>54409</size>
            <attacher name="dann frazier">dannf</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2916</bug_id>
          
          <creation_ts>2020-08-21 01:15:30 +0000</creation_ts>
          <short_desc>Support Rest style in HII options in VFR compiler</short_desc>
          <delta_ts>2020-12-03 01:06:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13482</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-21 01:15:30 +0000</bug_when>
    <thetext>VFR compiler has to be updated to support REST_STYLE flag  against to HII options.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13523</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 21:58:32 +0000</bug_when>
    <thetext>The opcode has been defined in UEFI spec. So, this request the support in edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13524</commentid>
    <comment_count>2</comment_count>
    <who name="Nickle Wang">nickle.wang</who>
    <bug_when>2020-08-25 22:04:50 +0000</bug_when>
    <thetext>REST_STYLE flag is defined in section 33.3.8.2.2 EFI_IFR_QUESTION_HEADER of UEFI 2.8:

//****************************************************
// Flags values
//****************************************************
#define EFI_IFR_FLAG_READ_ONLY 0x01
#define EFI_IFR_FLAG_CALLBACK 0x04
#define EFI_IFR_FLAG_RESET_REQUIRED 0x10
#define EFI_IFR_FLAG_REST_STYLE 0x20
#define EFI_IFR_FLAG_RECONNECT_REQUIRED 0x40
#define EFI_IFR_FLAG_OPTIONS_ONLY 0x80</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14467</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-03 01:06:59 +0000</bug_when>
    <thetext>Commits 5ec30331-2cfec1d8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2815</bug_id>
          
          <creation_ts>2020-06-17 21:06:00 +0000</creation_ts>
          <short_desc>Triple fault in Ovmf caused by interrupt stack overflow under heavy load</short_desc>
          <delta_ts>2022-11-22 05:18:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=4162</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Igor Druzhinin">igor.druzhinin</reporter>
          <assigned_to name="Igor Druzhinin">igor.druzhinin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vanjeff_919</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12904</commentid>
    <comment_count>0</comment_count>
    <who name="Igor Druzhinin">igor.druzhinin</who>
    <bug_when>2020-06-17 21:06:00 +0000</bug_when>
    <thetext>Description:

RestoreTPL called while at TPL_HIGH_LEVEL unconditionally enables interrupts even if called in interrupt handler. That opens a window while interrupt is not completely handled but another interrupt could be accepted.

If a VM starts on a heavily loaded host hundreds of periodic timer interrupts might be queued while vCPU is descheduled (the behavior is typical for a Xen host). The next time vCPU is scheduled again all of them get delivered back to back causing OVMF to accept each one without finishing a previous one and cleaning up the stack. That quickly results in stack overflow and a triple fault.

Proposed solution:

Postpone sending EOI until we finished processing the current tick giving interrupt handler opportunity to clean up the stack before accepting the next tick.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12909</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-18 04:46:32 +0000</bug_when>
    <thetext>Patch on the list from Igor:

* [edk2-devel] [PATCH]
  OvmfPkg: End timer interrupt later to avoid stack overflow under load

https://edk2.groups.io/g/devel/message/61329
http://mid.mail-archive.com/1592275782-9369-1-git-send-email-igor.druzhinin@citrix.com

Moving to IN_PROGRESS accordingly, plus reassigning to Igor (since he&apos;s fixing the bZ with the patch).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12910</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-18 08:11:26 +0000</bug_when>
    <thetext>Merged via &lt;https://github.com/tianocore/edk2/pull/709&gt; as commit
239b50a86370, with the following updates:

[lersek@redhat.com: add BZ ref; rewrap msg to silence PatchCheck.py]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12919</commentid>
    <comment_count>3</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2020-06-19 05:24:58 +0000</bug_when>
    <thetext>Per Laszlo&apos;s suggestion, I post the comments as blew:

1, I remembered interrupt handler was not allowed to invoke any boot service.  If I missed some historys, please correct me. So, i cannot understand why restoring TPL was happened in interrupt handler.

2, The patch sends EOI to allow the next interrupt generated. But which code to open system interrupt(sti) and let CPU response the interface.

Jeff</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12920</commentid>
    <comment_count>4</comment_count>
    <who name="Igor Druzhinin">igor.druzhinin</who>
    <bug_when>2020-06-19 06:20:35 +0000</bug_when>
    <thetext>1. Sorry, I don&apos;t see a connection between TPL and boot services. It&apos;s per documentation that timer notification function has to be called with TPL_HIGH_LEVEL and that&apos;s why TPL is raised (and restored back) in interrupt handled.

2. It&apos;s right inside RestoreTPL function - it enables interrupts unconditionally while switching from TPL_HIGH_LEVEL to level below TPL_HIGH_LEVEL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12921</commentid>
    <comment_count>5</comment_count>
    <who name="Igor Druzhinin">igor.druzhinin</who>
    <bug_when>2020-06-19 06:39:24 +0000</bug_when>
    <thetext>If you imply that RaiseTPL cannot be called in interrupt handler at all (which I also thought might be the case looking at HpetTimer implementation), could you give some references?

I found a mail thread [1] with a reply from Andrew Fish which contains the following that gives idea that was intentional:
&quot;The confusing bit is the EFI Timer handler in the Timer AP driver will gBS-&gt;RaiseTPL to TPL_HIGH_LEVEL and call the DXE Core where the Tick handler will queue up and pending timer events. The 1st chance for these events to get dispatched is back in the Timer AP when it does the gBS-&gt;RestoreTPL().&quot;

[1] https://edk2-devel.narkive.com/7o0r3O7E/how-timer-and-interrupt-works-in-uefi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12922</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-19 06:51:20 +0000</bug_when>
    <thetext>(In reply to Jeff Fan from comment #3)
&gt; Per Laszlo&apos;s suggestion, I post the comments as blew:

Thank you for adding your comments here!

&gt; 1, I remembered interrupt handler was not allowed to invoke any boot
&gt; service.  If I missed some historys, please correct me. So, i cannot
&gt; understand why restoring TPL was happened in interrupt handler.

Unfortunately, the git history is not helpful here.

The 8254TimerDxe driver was removed from PcAtChipsetPkg in commit c78008b4b295, for bug 1844.

So I&apos;ve now run the following git command, to find out where the gBS-&gt;RaiseTPL() and gBS-&gt;RestoreTPL() calls had come from originally, in TimerInterruptHandler():

git blame c78008b4b295^ -- PcAtChipsetPkg/8254TimerDxe/Timer.c

Alas, the output is not helpful -- it only identifies commit eb16e24041d7 (&quot;Add 8254 module and fix the hob operation for R9 library.&quot;, 2008-04-29), which introduced the whole TimerInterruptHandler() function with the boot service calls already included:

+{
+  EFI_TPL OriginalTPL;
+
+  OriginalTPL = gBS-&gt;RaiseTPL (TPL_HIGH_LEVEL);
+
+  mLegacy8259-&gt;EndOfInterrupt (mLegacy8259, Efi8259Irq0);
+
+  if (mTimerNotifyFunction) {
+    //
+    // BUGBUG : This does not handle missed timer interrupts
+    //
+    mTimerNotifyFunction (mTimerPeriod);
+  }
+
+  gBS-&gt;RestoreTPL (OriginalTPL);
+}

&gt; 
&gt; 2, The patch sends EOI to allow the next interrupt generated. But which code
&gt; to open system interrupt(sti) and let CPU response the interface.

If I understand the question, this is the same thing that I asked (and Igor answered) on the list:

https://edk2.groups.io/g/devel/message/61376

- &quot;why is it safe to leave the function with interrupts disabled? Before
the patch, that didn&apos;t use to be the case.&quot;

- &quot;Quickly looking through the code it appears to me the first thing that
caller does after interrupt handler - it clears interrupt flag to make
sure those disabled. So I don&apos;t see any assumption that interrupts should
be enabled on exiting&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12933</commentid>
    <comment_count>7</comment_count>
    <who name="Jeff Fan">vanjeff_919</who>
    <bug_when>2020-06-22 06:33:04 +0000</bug_when>
    <thetext>Igor,

For my first comment, sorry, i may have a wrong memory about boot service in timer interrupt. Please ignore it.

For my second comment, your patch disabled CPU interrupt when existing, but orignal code exiting with CPU interrupt enabled (when do RestoreTPL)

Actually, timer interrupt handler will return back to IDT entry ASM code to do IRET instruction which will restore the saved EFLAGs from stack.

So, your patch is good.  

Thank Laszlo to blame the git history and provide the information.

Jeff</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20072</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2022-11-22 05:18:13 +0000</bug_when>
    <thetext>Note that this patch caused a regression, see bug 4162.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2129</bug_id>
          
          <creation_ts>2019-08-26 01:19:30 +0000</creation_ts>
          <short_desc>[DxeImageVerificationLib] DxeImageVerificationHandler() is not handling correctly for policy &quot;DENY_EXECUTE_ON_SECURITY_VIOLATION&quot;</short_desc>
          <delta_ts>2020-01-31 05:03:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1997</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1998</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1992</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2000</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9235</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-08-26 01:19:30 +0000</bug_when>
    <thetext>During the investigation of BZ-1997:
https://bugzilla.tianocore.org/show_bug.cgi?id=1997#c13

It is found that in SecurityPkg/Library/DxeImageVerificationLib, the security
handler function DxeImageVerificationHandler() is not handling properly for
policy &quot;DENY_EXECUTE_ON_SECURITY_VIOLATION&quot;.

More specifically, the below 3 PCDs within SecurityPkg.dec:

PcdRemovableMediaImageVerificationPolicy
PcdFixedMediaImageVerificationPolicy
PcdOptionRomImageVerificationPolicy

can be configured to deny the execution of certain type of the image when there
is a security violation during image verification. For such case, the
authorization policy will be &quot;DENY_EXECUTE_ON_SECURITY_VIOLATION&quot;. Meanwhile,
according to the description of SECURITY2_FILE_AUTHENTICATION_HANDLER:

@retval EFI_SECURITY_VIOLATION  The file specified by DevicePath and FileBuffer
                                did not authenticate, and the platform policy
                                dictates that the file should be placed in the
                                untrusted state. The image has been added to
                                the file execution table.
@retval EFI_ACCESS_DENIED       The file specified by File and FileBuffer did
                                not authenticate, and the platform policy
                                dictates that the DXE Foundation may not use
                                File.

&quot;EFI_ACCESS_DENIED&quot; should be the proper return status if the authorization
policy is &quot;DENY_EXECUTE_ON_SECURITY_VIOLATION&quot;. But the current implementation
of DxeImageVerificationHandler() will return &quot;EFI_SECURITY_VIOLATION&quot; for such
case instead, which is not correct according to the descriptions above.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9243</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-26 10:04:05 +0000</bug_when>
    <thetext>Confirmed (bug 1997 comment 12).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9268</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 07:19:54 +0000</bug_when>
    <thetext>Here&apos;s why this bug is important *in practice*.

If a platform sets DENY_EXECUTE_ON_SECURITY_VIOLATION, but DxeImageVerificationLib incorrectly handles it as DEFER_EXECUTE_ON_SECURITY_VIOLATION, then gBS-&gt;LoadImage() will return EFI_SECURITY_VIOLATION rather than EFI_ACCESS_DENIED, for images that do not pass Secure Boot verification. This will have the following consequences, in practice:

- The ImageHandle produced by gBS-&gt;LoadImage() may be leaked, and the executable
  code may remain present in memory (discussed in bug 1992, bug 1997).

- Fixed mappings may remain in place (discussed in bug 1998).

- HII content may remain loaded (discussed in bug 2000).

None of the above are *necessarily* issues in their own right, it&apos;s just that they should never occur on a platform that sets DENY_EXECUTE_ON_SECURITY_VIOLATION for a particular image type policy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10922</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-16 14:11:46 +0000</bug_when>
    <thetext>Posted:
* [edk2-devel] [PATCH 00/11]
  SecurityPkg/DxeImageVerificationHandler: fix retval for &quot;deny&quot; policy

  https://edk2.groups.io/g/devel/message/53314
  http://mid.mail-archive.com/20200116190705.18816-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11032</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-31 04:30:34 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Posted:
&gt; * [edk2-devel] [PATCH 00/11]
&gt;   SecurityPkg/DxeImageVerificationHandler: fix retval for &quot;deny&quot; policy
&gt; 
&gt;   https://edk2.groups.io/g/devel/message/53314
&gt;   http://mid.mail-archive.com/20200116190705.18816-1-lersek@redhat.com

Merge in progress via &lt;https://github.com/tianocore/edk2/pull/324&gt;, but the GitHub.com PR seems to stuck (all checks have passed, twice, but the mergify bot is not merging the branch).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11033</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-31 05:03:39 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #4)
&gt; (In reply to Laszlo Ersek from comment #3)
&gt; &gt; Posted:
&gt; &gt; * [edk2-devel] [PATCH 00/11]
&gt; &gt;   SecurityPkg/DxeImageVerificationHandler: fix retval for &quot;deny&quot; policy
&gt; &gt; 
&gt; &gt;   https://edk2.groups.io/g/devel/message/53314
&gt; &gt;   http://mid.mail-archive.com/20200116190705.18816-1-lersek@redhat.com
&gt; 
&gt; Merge in progress via &lt;https://github.com/tianocore/edk2/pull/324&gt;, but the
&gt; GitHub.com PR seems to stuck (all checks have passed, twice, but the mergify
&gt; bot is not merging the branch).

Now merged (same PR), commit range 83357313dd67..8b0932c19f31.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2918</bug_id>
          
          <creation_ts>2020-08-21 02:35:38 +0000</creation_ts>
          <short_desc>Reference implement of EFI Redfish BIOS resource provisioning payload generator protocol</short_desc>
          <delta_ts>2022-03-03 22:21:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Reference Implementation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13484</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-21 02:35:38 +0000</bug_when>
    <thetext>According to the current discussions is happening in Redfish Host Interface meeting, the format of Redfish BIOS resource provisioning payload may be different from the normal BIOS Redfish resource provisioning payload using HTTP protocol with JSON as the content type. Furthermore, other system firmware solutions may have their own provisioning formats such as EDK2 with LinuxBoot or OpenBMC. This protocol is designed to flexibly support different formats depends on the platform implementation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13522</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 21:55:47 +0000</bug_when>
    <thetext>Start the reference implemenation in Edk2. Plan to design review in TianoCore. 
100% disucssion and implemenation in Edk2 community first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18552</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-03 22:21:59 +0000</bug_when>
    <thetext>The EDK2 Redfish solution is all upstream to edk2 RedfishPkg. This issue is no longer valid because the implementation was changed and moved to RedfishClientPkg.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2401</bug_id>
          
          <creation_ts>2019-12-03 16:09:11 +0000</creation_ts>
          <short_desc>IOMMU support</short_desc>
          <delta_ts>2020-08-09 23:26:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Lorena de Leon">lorena.r.de.leon.vazquez</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>lorena.r.de.leon.vazquez</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10602</commentid>
    <comment_count>0</comment_count>
    <who name="Lorena de Leon">lorena.r.de.leon.vazquez</who>
    <bug_when>2019-12-03 16:09:11 +0000</bug_when>
    <thetext>find that the code has a generic bug related to IOMMU in edk2platforms\Silicon\Intel\IntelSiliconPkg\Feature\VTd\IntelVTdDxe\TranslationTableEx.c &amp; edk2platforms\Silicon\Intel\IntelSiliconPkg\Feature\VTd\IntelVTdDxe\TranslationTable.c

switch (mVtdUnitInformation[VtdIndex].CapReg.Bits.SAGAW) {
        
        case BIT1: 
          ContextEntry-&gt;Bits.AddressWidth = 0x1;
          break;
        case BIT2:
          ContextEntry-&gt;Bits.AddressWidth = 0x2;
          break;
    }
 
Modification needs to be as below,
 
// Looks like Addresswidth is BIT wise values. Right now these values are not used any
 
    if(mVtdUnitInformation[VtdIndex].CapReg.Bits.SAGAW &amp; BIT1 ) {
        ContextEntry-&gt;Bits.AddressWidth = 0x1;
    } else if (mVtdUnitInformation[VtdIndex].CapReg.Bits.SAGAW &amp; BIT2 ) {
        ContextEntry-&gt;Bits.AddressWidth = 0x2;
    } else if (mVtdUnitInformation[VtdIndex].CapReg.Bits.SAGAW &amp; BIT3 ) {
        ContextEntry-&gt;Bits.AddressWidth = 0x3;
    } else if (mVtdUnitInformation[VtdIndex].CapReg.Bits.SAGAW &amp; BIT4 ) {
        ContextEntry-&gt;Bits.AddressWidth = 0x4;
    }

another suggestion could be

if ((mVtdUnitInformation[VtdIndex].CapReg.Bits.SAGAW &amp; BIT2) == 0) {
  DEBUG((DEBUG_ERROR, &quot;!!!! 4-level page-table is not supported on VTD %d !!!!\n&quot;, VtdIndex));
  return error;
}
ContextEntry-&gt;Bits.AddressWidth = 0x2;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11130</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-02-06 18:49:33 +0000</bug_when>
    <thetext>Agree.

Please submit the patch to EDKII mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13347</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-09 23:26:41 +0000</bug_when>
    <thetext>Fix it in edk2-platform @e28ea561e07bfa396825d1a5abf968b0b0f5d579</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2068</bug_id>
          
          <creation_ts>2019-08-08 14:18:27 +0000</creation_ts>
          <short_desc>Mouse/Trackpad/Keyboard Must be Functional in OS for the KabylakeOpenBoardPkg GalagoPro3 Board</short_desc>
          <delta_ts>2019-09-30 17:02:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>prince.agyeman</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8872</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-08 14:18:27 +0000</bug_when>
    <thetext>The System 76 Galago Pro 3 KBL (Clevo N1xxWU board code) can boot to Windows 10. However, the mouse, trackpad, and keyboard are not functional. These should be made functional.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8883</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:10:07 +0000</bug_when>
    <thetext>Bug Triage: set to confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9725</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-19 12:33:02 +0000</bug_when>
    <thetext>This is broken into 3 distinct changes:

 1. Enable PCH support for PS/2 keyboard and mouse in OS
    - Done here: https://edk2.groups.io/g/devel/message/47530
 2. Enable UEFI boot environment support for PS/2 keyboard and mouse
    - Prince will add the SIO driver and update ConIn/ConInDev
 3. Add the ACPI device for the Synaptics trackpad for trackpad support in OS
    - Ankit will send the change</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9815</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-25 18:34:56 +0000</bug_when>
    <thetext>Of the 3 changes identified in the last post, the following two are now committed to master:

#1 - https://github.com/tianocore/edk2-platforms/commit/a4098e87bf0f219d23519f0f0f3f456a45635c74

#3 - https://github.com/tianocore/edk2-platforms/commit/423ec225736fb4882f65770dee37f29fc2ba4d59

#2 is WIP by Prince</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9890</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-30 16:56:59 +0000</bug_when>
    <thetext>Updated &quot;Component&quot; to KabylakeOpenBoardPkg from ClevoOpenBoardPkg since ClevoOpenBoardPkg was removed and the N1xxWU board contents were moved to KabylakeOpenBoardPkg as GalagoPro3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9892</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-30 17:02:22 +0000</bug_when>
    <thetext>Since the OS work is completed and verified and the UEFI boot enviornment work (#2) is mutually exclusive, the UEFI boot environment enabling task has been moved to a dedicated BZ - https://bugzilla.tianocore.org/show_bug.cgi?id=2228.

With that change, this BZ will be closed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2562</bug_id>
          
          <creation_ts>2020-02-27 01:12:56 +0000</creation_ts>
          <short_desc>EDK2 CI for RISC-V architecture</short_desc>
          <delta_ts>2020-04-08 05:25:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>daniel.schaefer</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11447</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-02-27 01:12:56 +0000</bug_when>
    <thetext>Enable EDK2 CI infrastructure for RISC-V architecture.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11567</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-05 20:09:46 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11608</commentid>
    <comment_count>2</comment_count>
      <attachid>472</attachid>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-03-06 22:24:20 +0000</bug_when>
    <thetext>Created attachment 472
Enable RISC-V CI patches mail</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11609</commentid>
    <comment_count>3</comment_count>
      <attachid>473</attachid>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-03-06 22:25:33 +0000</bug_when>
    <thetext>Created attachment 473
EDK2 code change for RISC-V CI testing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12141</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-08 05:25:22 +0000</bug_when>
    <thetext>Fixed in commit range f73c9adfc68c..ef5dcba975ee.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>472</attachid>
            <date>2020-03-06 22:24:20 +0000</date>
            <delta_ts>2020-03-06 22:24:20 +0000</delta_ts>
            <desc>Enable RISC-V CI patches mail</desc>
            <filename>edk2-devel   edk2 master PATCH RISC-V CI v1 0 6  RISC-V EDK2 CI configuration files .msg</filename>
            <type>application/octet-stream</type>
            <size>230912</size>
            <attacher name="Chang, Abner">abner.chang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>473</attachid>
            <date>2020-03-06 22:25:33 +0000</date>
            <delta_ts>2020-03-06 22:25:33 +0000</delta_ts>
            <desc>EDK2 code change for RISC-V CI testing</desc>
            <filename>edk2-devel   edk2 master PATCH RISC-V CI Code Changes v1 00 11  Necessary code changes for RISCV64 CI testing .msg</filename>
            <type>application/octet-stream</type>
            <size>257536</size>
            <attacher name="Chang, Abner">abner.chang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2501</bug_id>
          
          <creation_ts>2020-02-03 21:16:39 +0000</creation_ts>
          <short_desc>UpdateCapsule rejects all non-reset capsule image at runtime</short_desc>
          <delta_ts>2020-02-07 21:48:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="sfu5">siyuan.fu</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11061</commentid>
    <comment_count>0</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2020-02-03 21:16:39 +0000</bug_when>
    <thetext>Below code in MdeModulePkg\Universal\CapsuleRuntimeDxe\CapsuleService.c will reject all the non-reset capsule image and return EFI_OUT_OF_RESOURCES if it&apos;s running at runtime. This blocks a platform implementation of ProcessCapsuleImage() to support a runtime capsule image processing.

    //
    // Here should be in the boot-time for non-reset capsule image
    // Platform specific update for the non-reset capsule image.
    //
    if ((CapsuleHeader-&gt;Flags &amp; CAPSULE_FLAGS_PERSIST_ACROSS_RESET) == 0) {
      if (EfiAtRuntime ()) {
        Status = EFI_OUT_OF_RESOURCES;
      } else {
        Status = ProcessCapsuleImage(CapsuleHeader);
      }
      if (EFI_ERROR(Status)) {
        return Status;
      }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11136</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 20:18:03 +0000</bug_when>
    <thetext>Provide the usage case to update capsule at runtime, then justify to introduce PCD control the behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11147</commentid>
    <comment_count>2</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2020-02-06 21:20:48 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #1)
&gt; Provide the usage case to update capsule at runtime, then justify to
&gt; introduce PCD control the behavior.

A possible use case it to complete the firmware update at runtime without platform reset, this is useful for the datacenter platform which have high servicability requirement to reduce the shutdown time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11150</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 21:45:18 +0000</bug_when>
    <thetext>Siyuan is taking this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11151</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 21:45:57 +0000</bug_when>
    <thetext>Siyuan is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11171</commentid>
    <comment_count>5</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2020-02-07 21:48:27 +0000</bug_when>
    <thetext>Commit patch to edk2 1333d8c8d37ab8a8055c8da0d9ab79005225536b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2333</bug_id>
          
          <creation_ts>2019-11-10 23:58:32 +0000</creation_ts>
          <short_desc>Fix variable runtime cache update logic</short_desc>
          <delta_ts>2019-11-14 20:27:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2220</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch>https://github.com/tianocore/edk2/pull/173</cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10383</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-10 23:58:32 +0000</bug_when>
    <thetext>The following BZ introduced the UEFI variable runtime cache feature - https://bugzilla.tianocore.org/show_bug.cgi?id=2220

During the SetVariable () flow, either the volatile or non-volatile variable runtime cache must be updated. The original implementation used the following logic at the end of UpdateVariable () to determine which runtime cache buffer to update:

.  .  .
Done:
  if (!EFI_ERROR (Status)) {
    if (Variable-&gt;Volatile) {
      VolatileCacheInstance = &amp;(mVariableModuleGlobal-&gt;VariableGlobal.VariableRuntimeCacheContext.VariableRuntimeVolatileCache);
    } else {
      VolatileCacheInstance = &amp;(mVariableModuleGlobal-&gt;VariableGlobal.VariableRuntimeCacheContext.VariableRuntimeNvCache);
    }
.  .  .

In the pre-existing driver code, Variable-&gt;Volatile is set based on the variable cache buffer the variable that contains the UEFI variable. Variable-&gt;Volatile defaults to FALSE. If the variable is discovered as valid in the volatile variable store, the Volatile field is set to TRUE. In the case a new volatile variable is written, the value of Variable-&gt;Volatile throughout the entire flow in UpdateVariable () is FALSE as the variable was not found in the volatile variable store (memory buffer). In this case, the Attributes field reflects whether EFI_VARIABLE_NON_VOLATILE is set to indicate if the variable is non-volatile.

The logic to determine which runtime cache to update should take this into account:

.  .  .
Done:
  if (!EFI_ERROR (Status)) {
    VolatileCacheInstance = &amp;(mVariableModuleGlobal-&gt;VariableGlobal.VariableRuntimeCacheContext.VariableRuntimeVolatileCache);
    if ((Variable-&gt;CurrPtr != NULL &amp;&amp; !Variable-&gt;Volatile) || (Attributes &amp; EFI_VARIABLE_NON_VOLATILE) != 0) {
      VolatileCacheInstance = &amp;(mVariableModuleGlobal-&gt;VariableGlobal.VariableRuntimeCacheContext.VariableRuntimeNvCache);
    }
.  .  .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10384</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-10 23:58:54 +0000</bug_when>
    <thetext>Change is work in progress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10414</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-13 03:43:55 +0000</bug_when>
    <thetext>Versions of the patch on the list:

[edk2-devel] [PATCH V1 1/1]
MdeModulePkg/Variable: Fix volatile variable RT cache update logic
https://edk2.groups.io/g/devel/message/50321
http://mid.mail-archive.com/20191111051620.37748-1-michael.a.kubacki@intel.com

[edk2-devel] [PATCH V2 1/1
MdeModulePkg/Variable: Fix volatile variable RT cache update logic
https://edk2.groups.io/g/devel/message/50472
http://mid.mail-archive.com/20191112234038.23092-1-michael.a.kubacki@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10433</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-14 19:33:41 +0000</bug_when>
    <thetext>Pull Request: https://github.com/tianocore/edk2/pull/173</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10435</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-14 20:05:21 +0000</bug_when>
    <thetext>Pull Request: https://github.com/tianocore/edk2/pull/174</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10443</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-14 20:27:49 +0000</bug_when>
    <thetext>Commit: https://github.com/tianocore/edk2/commit/6fe77f347ed820c5924f2ac6ddc43aa869cdbd5e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2074</bug_id>
          
          <creation_ts>2019-08-12 06:17:18 +0000</creation_ts>
          <short_desc>FMMT tool should support export ffs files of a specific FV</short_desc>
          <delta_ts>2020-10-10 01:27:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pu Hongtao">hongtao.pu</reporter>
          <assigned_to name="yunhua feng">fengyunhua</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>fengyunhua</cc>
    
    <cc>hongtao.pu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8952</commentid>
    <comment_count>0</comment_count>
    <who name="Pu Hongtao">hongtao.pu</who>
    <bug_when>2019-08-12 06:17:18 +0000</bug_when>
    <thetext>FMMT tool should support export FFS files of a specific FV. These FFS files can replaced other corresponding FFS files in another image via FMMT tool.Then user get a new image including FFS files that were exported from specific image.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8953</commentid>
    <comment_count>1</comment_count>
    <who name="Pu Hongtao">hongtao.pu</who>
    <bug_when>2019-08-12 06:23:28 +0000</bug_when>
    <thetext>For example: export all FV9 FFS files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9189</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-22 20:38:29 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9195</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-22 21:15:26 +0000</bug_when>
    <thetext>Yunhua is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13933</commentid>
    <comment_count>4</comment_count>
    <who name="yunhua feng">fengyunhua</who>
    <bug_when>2020-10-10 01:27:20 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2-staging/tree/FceFmmt 
 950333853b5fe2b73a7b5148501458cc97a01481</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2013</bug_id>
          
          <creation_ts>2019-07-24 05:55:49 +0000</creation_ts>
          <short_desc>replace the chinese quotation mark with  unicode &quot;</short_desc>
          <delta_ts>2019-08-01 04:47:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8557</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-07-24 05:55:49 +0000</bug_when>
    <thetext>In file named BaseTools/Source/Python/Pkcs7Sign/Readme.md,chinese quotation mark &quot;“&quot; have been found.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8577</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:14:07 +0000</bug_when>
    <thetext>Bug Triage: Patch submitted:

https://edk2.groups.io/g/devel/message/44379?p=,,,20,0,0,0::Created,,chinese,20,2,0,32594579</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8679</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-08-01 04:47:35 +0000</bug_when>
    <thetext>fix it in SHA-1: 76912197fabec2603f6c206f087a84265f451b32</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2483</bug_id>
          
          <creation_ts>2020-01-23 12:11:59 +0000</creation_ts>
          <short_desc>Add FIT BIOS Specification version FITGEN tool is aligned to in help section.</short_desc>
          <delta_ts>2020-02-19 10:42:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Paul Lohr">paul.a.lohr</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>paul.a.lohr</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10971</commentid>
    <comment_count>0</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-01-23 12:11:59 +0000</bug_when>
    <thetext>As we are updating the FITGEN tool, we are also updating the BIOS Specification that the tool implements.  There is a version for the tool, but the header does not contain any information about the version of the Spec the tool aligns to.  So I am simply asking that it be added.

FYI - FIT BIOS Specification 1.1 is being release by EOWW0.4.5.  When FuSA support is added, this BZ should be implemented and set to 1.1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11055</commentid>
    <comment_count>1</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-02-03 15:24:06 +0000</bug_when>
    <thetext>FIT BIOS Spec 1.1 has been publicly released.  Below link may require using &quot;incongnito mode&quot; in chrome.

https://www.intel.com/content/www/us/en/products/docs/firmware-interface-table/fit-bios-specification.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11142</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 20:26:01 +0000</bug_when>
    <thetext>Liming takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11248</commentid>
    <comment_count>3</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-02-13 16:56:06 +0000</bug_when>
    <thetext>Hi - will this be part of 2020.02 Stable Tag?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11297</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 00:26:15 +0000</bug_when>
    <thetext>Fixed at edk2-platform b23dc12c0e2ac9aa626937e25b068dce8e31e9f3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11303</commentid>
    <comment_count>5</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-02-19 10:42:36 +0000</bug_when>
    <thetext>I don&apos;t like the way it&apos;s hard-coded, but it&apos;s good enough for now.  I will revisit  this to get an enhanced versioning if/when the a future Spec Update is offered.  Thanks!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2832</bug_id>
          
          <creation_ts>2020-06-30 21:52:01 +0000</creation_ts>
          <short_desc>Remove PEI/DXE instances of CpuTimerLib in UefiCpuPkg</short_desc>
          <delta_ts>2021-04-12 03:29:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Jason">yun.lou</assigned_to>
          <cc>donald.kuo</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yun.lou</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12983</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-06-30 21:52:01 +0000</bug_when>
    <thetext>CpuTimerLib uses TSC and the TSC frequency to calculate the time. TSC frequency is got from CPUID (TIME_STAMP).
The PEI/DXE instances of CpuTimerLib were added to avoid wasting time to call CPUID (TIME_STAMP). It does so by caching the TSC frequency in HOB (PEI phase) or C global variable (DXE phase).

But my experiment as below shows that:

The 1000 times of CPUID spend less time (a half) than 1000 times of GetFirstGuidHob().

1000 * CPUID (TimeStamp): 1,498,028 ticks
1000 * GetFirstGuidHob: 3,003,446 ticks

-------------------------- Code ---------------------
  Tsc = AsmReadTsc ();
  for (Index = 0; Index &lt; 1000; Index++) {
    AsmCpuid (CPUID_TIME_STAMP_COUNTER, &amp;Eax, &amp;Ebx, &amp;Ecx, NULL);
    TscFrequency = DivU64x32 (MultU64x32 (Ecx, Ebx) + (UINT64)(Eax &gt;&gt; 1), Eax);
  }
  Print (L&quot;1000 * CPUID (TimeStamp): %ld\n&quot;, AsmReadTsc () - Tsc);

  Tsc = AsmReadTsc ();
  for (Index = 0; Index &lt; 1000; Index++) { 
    GetFirstGuidHob (&amp;ZeroGuid);
  }
  Print (L&quot;1000 * GetFirstGuidHob: %ld\n&quot;, AsmReadTsc () - Tsc);
------------------------- End of Code ----------------------

With such data, I recommend removing the PEI/DXE instances of CpuTimerLib so platform developer doesn&apos;t need to specify different instances of CpuTimerLib for different types of modules.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12997</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-30 22:20:00 +0000</bug_when>
    <thetext>For old generation, there is no CPUID to get TSC frequency. So, how support them. For new generation, they can always Base version to get TSC frequency from CPUID.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13211</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-28 22:20:35 +0000</bug_when>
    <thetext>Ray: can you give the response?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13764</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-09-23 02:29:24 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #1)
&gt; For old generation, there is no CPUID to get TSC frequency. So, how support
&gt; them. For new generation, they can always Base version to get TSC frequency
&gt; from CPUID.

Liming,
Sorry I replied this so late, late enough that after you left Intel to Bio-soft:)
My bad.

Back to the question. Yes it&apos;s a new CPUID so the platform which uses it should make sure that the processors support this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15555</commentid>
    <comment_count>4</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-08 02:00:43 +0000</bug_when>
    <thetext>Have sent out the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15570</commentid>
    <comment_count>5</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-08 22:14:40 +0000</bug_when>
    <thetext>Have merged the code change into master, close this bug.

SHA-1: 19d5bccc7663399c0726aac800ddd4591be0176a

* UefiCpuPkg: Remove PEI/DXE instances of CpuTimerLib.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2832

1. Remove PEI instance(PeiCpuTimerLib).
PeiCpuTimerLib is currently designed to save time by getting CPU TSC
frequency from Hob. BaseCpuTimerLib is designed to calculate TSC frequency
by using CPUID[15h] each time.
The time it takes to find CpuCrystalFrequencyHob (about 2000ns) is much
longer than it takes to calculate TSC frequency with CPUID[15h] (about
450ns), which means using BaseCpuTimerLib to trigger a delay is more
accurate than using PeiCpuTimerLib, recommend using BaseCpuTimerLib
instead of PeiCpuTimerLib.

2. Remove DXE instance(DxeCpuTimerLib).
DxeCpuTimerLib is designed to calculate TSC frequency with CPUID[15h] in
its constructor function, then save it in a global variable. For this
design, once the driver containing this instance is running, this
constructor function is called, it will take extra time to calculate TSC
frequency.
The time it takes to get TSC frequency from global variable is shorter
than it takes to calculate TSC frequency with CPUID[15h], but 450ns is a
short time, the impact on the platform is very limited.
In addition, in order to simplify the code, recommend using
BaseCpuTimerLib instead of DxeCpuTimerLib.

I did some experiments on one server platform and collected following data:
1. Average time required to find CpuCrystalFrequencyHob: about 2000 ns.
2. Average time required to find the last Hob: about 2700 ns.
2. Average time required to calculate TSC frequency: about 450 ns.

Reference code:
    //
    // Calculate average time required to find Hob.
    //
    DEBUG((DEBUG_ERROR, &quot;[PeiCpuTimerLib] GetPerformanceCounterFrequency - GetFirstGuidHob (1000 cycles)\n&quot;));
    Ticks1 = AsmReadTsc();
    for (i = 0; i &lt; 1000; i++) {
      GuidHob = GetFirstGuidHob (&amp;mCpuCrystalFrequencyHobGuid);
    }
    Ticks2 = AsmReadTsc();

    if (GuidHob == NULL) {
      DEBUG((DEBUG_ERROR, &quot;[PeiCpuTimerLib]  - CpuCrystalFrequencyHob can not be found!\n&quot;));
    } else {
      DEBUG((DEBUG_ERROR, &quot;[PeiCpuTimerLib]  - Average time required to find Hob = %d ns\n&quot;, \
          DivU64x32(DivU64x64Remainder(MultU64x32((Ticks2 - Ticks1), 1000000000), *CpuCrystalCounterFrequency, NULL), 1000)));
    }

    //
    // Calculate average time required to calculate CPU frequency.
    //
    DEBUG((DEBUG_ERROR, &quot;[PeiCpuTimerLib] GetPerformanceCounterFrequency - CpuidCoreClockCalculateTscFrequency (1000 cycles)\n&quot;));
    Ticks1 = AsmReadTsc();
    for (i = 0; i &lt; 1000; i++) {
      Freq = CpuidCoreClockCalculateTscFrequency ();
    }
    Ticks2 = AsmReadTsc();
    DEBUG((DEBUG_ERROR, &quot;[PeiCpuTimerLib]  - Average time required to calculate TSC frequency = %d ns\n&quot;, \
        DivU64x32(DivU64x64Remainder(MultU64x32((Ticks2 - Ticks1), 1000000000), *CpuCrystalCounterFrequency, NULL), 1000)));</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15589</commentid>
    <comment_count>6</comment_count>
    <who name="Jason">yun.lou</who>
    <bug_when>2021-04-12 03:29:05 +0000</bug_when>
    <thetext>Merged another code change.

(2)
SHA-1: 5eb2de2d98e8d9deed2d9482a0dcbb67ab369287

* UefiCpuPkg/CpuTimerLib: Update LIBRARY_CLASS of Base instance.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2832

Update LIBRARY_CLASS of BaseCpuTimerLib to remove the usage limitation,
otherwise the Base instance cannot be used in some types of modules.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2252</bug_id>
          
          <creation_ts>2019-10-09 05:10:27 +0000</creation_ts>
          <short_desc>SignedCapsulePkg build failure (DEBUG / AARCH64 / GCC5)</short_desc>
          <delta_ts>2019-10-18 07:58:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Leif Lindholm">quic_llindhol</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>chao.b.zhang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SignedCapsulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9975</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-09 05:10:27 +0000</bug_when>
    <thetext>At commit 2de1f611be06, the following command fails (using gcc-6.1.1):

$ build -b DEBUG -p SignedCapsulePkg/SignedCapsulePkg.dsc \
    -a AARCH64 -t GCC5

Both of the following link-editing commands fail:

(1)

&gt;| &quot;aarch64-linux-gnu-gcc&quot; \
&gt;|   -o edk2/Build/SignedCapsulePkg/DEBUG_GCC5/AARCH64/SignedCapsulePkg/Universal/SystemFirmwareUpdate/SystemFirmwareReportDxe/DEBUG/SystemFirmwareReportDxe.dll \
&gt;|   -Wl,--emit-relocs \
&gt;|   -nostdlib \
&gt;|   -Wl,--gc-sections \
&gt;|   -u _ModuleEntryPoint \
&gt;|   -Wl,-e,_ModuleEntryPoint,-Map,edk2/Build/SignedCapsulePkg/DEBUG_GCC5/AARCH64/SignedCapsulePkg/Universal/SystemFirmwareUpdate/SystemFirmwareReportDxe/DEBUG/SystemFirmwareReportDxe.map \
&gt;|   -z common-page-size=0x20 \
&gt;|   -z common-page-size=0x1000 \
&gt;|   -flto \
&gt;|   -Os \
&gt;|   -Ledk2/ArmPkg/Library/GccLto \
&gt;|   -llto-aarch64 \
&gt;|   -Wl,-plugin-opt=-pass-through=-llto-aarch64 \
&gt;|   -Wno-lto-type-mismatch \
&gt;|   -Wl,--start-group,@edk2/Build/SignedCapsulePkg/DEBUG_GCC5/AARCH64/SignedCapsulePkg/Universal/SystemFirmwareUpdate/SystemFirmwareReportDxe/OUTPUT/static_library_files.lst,--end-group   \
&gt;|   -g \
&gt;|   -fshort-wchar \
&gt;|   -fno-builtin \
&gt;|   -fno-strict-aliasing \
&gt;|   -Wall \
&gt;|   -Werror \
&gt;|   -Wno-array-bounds \
&gt;|   -ffunction-sections \
&gt;|   -fdata-sections \
&gt;|   -include AutoGen.h \
&gt;|   -fno-common \
&gt;|   -DSTRING_ARRAY_NAME=SystemFirmwareReportDxeStrings \
&gt;|   -g \
&gt;|   -Os \
&gt;|   -fshort-wchar \
&gt;|   -fno-builtin \
&gt;|   -fno-strict-aliasing \
&gt;|   -Wall \
&gt;|   -Werror \
&gt;|   -Wno-array-bounds \
&gt;|   -include AutoGen.h \
&gt;|   -fno-common \
&gt;|   -mlittle-endian \
&gt;|   -fno-short-enums \
&gt;|   -fverbose-asm \
&gt;|   -funsigned-char \
&gt;|   -ffunction-sections \
&gt;|   -fdata-sections \
&gt;|   -Wno-address \
&gt;|   -fno-asynchronous-unwind-tables \
&gt;|   -fno-unwind-tables \
&gt;|   -fno-pic \
&gt;|   -fno-pie \
&gt;|   -ffixed-x18 \
&gt;|   -mcmodel=small \
&gt;|   -flto \
&gt;|   -Wno-unused-but-set-variable \
&gt;|   -Wno-unused-const-variable \
&gt;|   -D DISABLE_NEW_DEPRECATED_INTERFACES \
&gt;|   -Wl,--script=edk2/BaseTools/Scripts/GccBase.lds \
&gt;|   -Wl,--defsym=PECOFF_HEADER_SIZE=0x228 \
&gt;|   -Wno-error

(2)

&gt;| &quot;aarch64-linux-gnu-gcc&quot; \
&gt;|   -o edk2/Build/SignedCapsulePkg/DEBUG_GCC5/AARCH64/SignedCapsulePkg/Universal/SystemFirmwareUpdate/SystemFirmwareUpdateDxe/DEBUG/SystemFirmwareUpdateDxe.dll \
&gt;|   -Wl,--emit-relocs \
&gt;|   -nostdlib \
&gt;|   -Wl,--gc-sections \
&gt;|   -u _ModuleEntryPoint \
&gt;|   -Wl,-e,_ModuleEntryPoint,-Map,edk2/Build/SignedCapsulePkg/DEBUG_GCC5/AARCH64/SignedCapsulePkg/Universal/SystemFirmwareUpdate/SystemFirmwareUpdateDxe/DEBUG/SystemFirmwareUpdateDxe.map \
&gt;|   -z common-page-size=0x20 \
&gt;|   -z common-page-size=0x1000 \
&gt;|   -flto \
&gt;|   -Os \
&gt;|   -Ledk2/ArmPkg/Library/GccLto \
&gt;|   -llto-aarch64 \
&gt;|   -Wl,-plugin-opt=-pass-through=-llto-aarch64 \
&gt;|   -Wno-lto-type-mismatch \
&gt;|   -Wl,--start-group,@edk2/Build/SignedCapsulePkg/DEBUG_GCC5/AARCH64/SignedCapsulePkg/Universal/SystemFirmwareUpdate/SystemFirmwareUpdateDxe/OUTPUT/static_library_files.lst,--end-group   \
&gt;|   -g \
&gt;|   -fshort-wchar \
&gt;|   -fno-builtin \
&gt;|   -fno-strict-aliasing \
&gt;|   -Wall \
&gt;|   -Werror \
&gt;|   -Wno-array-bounds \
&gt;|   -ffunction-sections \
&gt;|   -fdata-sections \
&gt;|   -include AutoGen.h \
&gt;|   -fno-common \
&gt;|   -DSTRING_ARRAY_NAME=SystemFirmwareUpdateDxeStrings \
&gt;|   -g \
&gt;|   -Os \
&gt;|   -fshort-wchar \
&gt;|   -fno-builtin \
&gt;|   -fno-strict-aliasing \
&gt;|   -Wall \
&gt;|   -Werror \
&gt;|   -Wno-array-bounds \
&gt;|   -include AutoGen.h \
&gt;|   -fno-common \
&gt;|   -mlittle-endian \
&gt;|   -fno-short-enums \
&gt;|   -fverbose-asm \
&gt;|   -funsigned-char \
&gt;|   -ffunction-sections \
&gt;|   -fdata-sections \
&gt;|   -Wno-address \
&gt;|   -fno-asynchronous-unwind-tables \
&gt;|   -fno-unwind-tables \
&gt;|   -fno-pic \
&gt;|   -fno-pie \
&gt;|   -ffixed-x18 \
&gt;|   -mcmodel=small \
&gt;|   -flto \
&gt;|   -Wno-unused-but-set-variable \
&gt;|   -Wno-unused-const-variable \
&gt;|   -D DISABLE_NEW_DEPRECATED_INTERFACES \
&gt;|   -Wl,--script=edk2/BaseTools/Scripts/GccBase.lds \
&gt;|   -Wl,--defsym=PECOFF_HEADER_SIZE=0x228 \
&gt;|   -Wno-error

The error message is (in both cases):

&gt;| /tmp/ccgsrmK7.ltrans8.ltrans.o: In function `asn1_time_to_tm&apos;:
&gt;| edk2/CryptoPkg/Library/OpensslLib/openssl/crypto/asn1/a_time.c:254: undefined reference to `memcpy&apos;

The package builds fine for ARM.

The package also builds fine for IA32 and X64 (using GCC48).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10072</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:29:03 +0000</bug_when>
    <thetext>Please investigate to confirm this is an issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10092</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-17 21:48:40 +0000</bug_when>
    <thetext>Seemly, this issue is in CryptoPkg openssl on AARCH64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10099</commentid>
    <comment_count>3</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-10-18 05:32:19 +0000</bug_when>
    <thetext>This was remarked on in https://edk2.groups.io/g/devel/message/46489, but a fix was postponed until after stable tag (and ball resoundingly dropped).

I&apos;ll send the patch out.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10106</commentid>
    <comment_count>4</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-10-18 07:58:22 +0000</bug_when>
    <thetext>Resolved by commit 0f28c513d392 - https://edk2.groups.io/g/devel/message/49227.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2969</bug_id>
          
          <creation_ts>2020-09-16 14:39:58 +0000</creation_ts>
          <short_desc>Request to Place PLATFORM_GUID Macro in AutoGen.h</short_desc>
          <delta_ts>2020-10-12 22:36:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="yunhua feng">fengyunhua</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13698</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-16 14:39:58 +0000</bug_when>
    <thetext>Currently there is special handling BaseTools/Source/Python/AutoGen/GenC.py to place the EFI_CALLER_ID_GUID as a macro into a module&apos;s AutoGen.h (last line of below snippet):

    if &apos;PcdLib&apos; in Info.Module.LibraryClasses or Info.Module.Pcds:
        AutoGenH.Append(&quot;#include &lt;Library/PcdLib.h&gt;\n&quot;)

    AutoGenH.Append(&apos;\nextern GUID  gEfiCallerIdGuid;&apos;)
    AutoGenH.Append(&apos;\nextern CHAR8 *gEfiCallerBaseName;\n\n&apos;)

    if Info.IsLibrary:
        return

    AutoGenH.Append(&quot;#define EFI_CALLER_ID_GUID \\\n  %s\n&quot; % GuidStringToGuidStructureString(Info.Guid))

We are working on a feature called Platform Runtime Mechanism (PRM) [https://github.com/tianocore/edk2-staging/tree/PlatformRuntimeMechanism] where we need to have the PLATFORM_GUID available as a pre-compile time value so it can be statically placed into a data structure (the value like above, not a pointer to the value).

So I&apos;d like to request this support as it would efficiently give the PLATFORM_GUID value at pre-compile time and fit naturally into the pre-existing infrastructure. I don&apos;t foresee this impacting existing functionality in any way.
Add Comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13728</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-22 01:18:49 +0000</bug_when>
    <thetext>Hi Bob,

This is an important request for our work. Can you please let us know the feasibility and potential timeline?

Thanks,
Michael</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13744</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 21:41:58 +0000</bug_when>
    <thetext>how about name this guid as EDKII_DSC_PLATFORM_GUID?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13746</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 21:44:11 +0000</bug_when>
    <thetext>Confirm. Bob, can you check it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13776</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-23 17:54:23 +0000</bug_when>
    <thetext>I like EDKII_DSC_PLATFORM_GUID. It is clear that this is the PLATFORM_GUID value from the DSC file currently being built.

I&apos;d like to note that there was consensus in the 9/22/2020 TianoCore Bug Triage that this request can be implemented and it should be relatively trivial to do so.

Bob, for our development/testing planning, can you please provide an ETA when possible?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13863</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-01 20:23:14 +0000</bug_when>
    <thetext>Hi Bob, have you looked at this BZ at all?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13930</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-09 23:29:07 +0000</bug_when>
    <thetext>Patch has been sent in mail list https://edk2.groups.io/g/devel/message/66095</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13931</commentid>
    <comment_count>7</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-09 23:29:32 +0000</bug_when>
    <thetext>Yunhua is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13944</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-12 22:36:09 +0000</bug_when>
    <thetext>Merge https://github.com/tianocore/edk2/pull/1006</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2854</bug_id>
          
          <creation_ts>2020-07-17 01:23:33 +0000</creation_ts>
          <short_desc>&quot;build clean&quot; fails for OVMF: &quot;ResetVector: Is a directory&quot;</short_desc>
          <delta_ts>2023-05-10 18:11:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13121</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2020-07-17 01:23:33 +0000</bug_when>
    <thetext>Running a &quot;clean&quot; command for OvmfPkg on Linux fails (I&apos;ve tried both OvmfPkgX64.dsc and OvmfPkgIa32.dsc):

bcran@photon:~/src/uefi/edk2-master$ build -p OvmfPkg/OvmfPkgX64.dsc -a X64 -t GCC5 -b RELEASE clean
Build environment: Linux-5.4.0-28-generic-x86_64-with-glibc2.29
Build start time: 23:18:11, Jul.16 2020

WORKSPACE        = /home/bcran/src/uefi/edk2-master
EDK_TOOLS_PATH   = /home/bcran/src/uefi/edk2-master/BaseTools
CONF_PATH        = /home/bcran/src/uefi/edk2-master/Conf
PYTHON_COMMAND   = /usr/bin/python3.8


Processing meta-data 
.Architecture(s)  = X64
Build target     = RELEASE
Toolchain        = GCC5

Active Platform          = /home/bcran/src/uefi/edk2-master/OvmfPkg/OvmfPkgX64.dsc
.. done!
make: *** /home/bcran/src/uefi/edk2-master/Build/OvmfX64/RELEASE_GCC5/X64/OvmfPkg/ResetVector/ResetVector: Is a directory.  Stop.


build.py...
 : error 7000: Failed to execute command
        make -f /home/bcran/src/uefi/edk2-master/Build/OvmfX64/RELEASE_GCC5/X64/OvmfPkg/ResetVector/ResetVector cleanall [/home/bcran/src/uefi/edk2-master/Build/OvmfX64/RELEASE_GCC5/X64]

- Failed -
Build end time: 23:18:15, Jul.16 2020
Build total time: 00:00:04</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13122</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-17 12:40:11 +0000</bug_when>
    <thetext>Hi Rebecca,

unfortunately I don&apos;t have the slightest clue. Unless we can demonstrate that the OvmfPkg DSC files do something wrong around &quot;OvmfPkg/ResetVector/ResetVector.inf&quot;, I suggest that we move this over to BaseTools.

Personally I never use &quot;build [...] clean&quot;; I use &quot;git clean -ffdx&quot;.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13202</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-28 22:02:05 +0000</bug_when>
    <thetext>Yuwei: please check this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18414</commentid>
    <comment_count>3</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2022-02-20 19:17:36 +0000</bug_when>
    <thetext>change to unassigned</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18432</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-02-22 21:42:50 +0000</bug_when>
    <thetext>Yuwei: please clarify clean and cleanall build target.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21555</commentid>
    <comment_count>5</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2023-05-10 18:11:23 +0000</bug_when>
    <thetext>I just tried running this again and it works fine. So I&apos;ll close this ticket.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2631</bug_id>
          
          <creation_ts>2020-03-25 03:36:32 +0000</creation_ts>
          <short_desc>Build failure with VS2012 in SdMmcPciHcDxe\SdMmcPciHcDxe.c</short_desc>
          <delta_ts>2020-04-08 07:30:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11834</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-03-25 03:36:32 +0000</bug_when>
    <thetext>Below is error message

edk2\mdemodulepkg\bus\pci\sdmmcpcihcdxe\sdmmcpcihcdxe.c(1011) : error C2220: warning treated as error - no &apos;executable&apos; file generated
edk2\mdemodulepkg\bus\pci\sdmmcpcihcdxe\sdmmcpcihcdxe.c(1011) : warning C4701: potentially uninitialized local variable &apos;Status&apos; used</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11970</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 22:13:41 +0000</bug_when>
    <thetext>go through open source forum to discuss the unsupported tool chain</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11993</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-01 09:48:46 +0000</bug_when>
    <thetext>Shenglei: please collect the feedback on VS2012 in edk2 mail list. If no one uses it, we don&apos;t need to fix this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12104</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:05:20 +0000</bug_when>
    <thetext>This can be closed if no one cares it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12108</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-07 22:12:28 +0000</bug_when>
    <thetext>Nobody cares VS2012, so this issue can be closed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12144</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-08 07:30:28 +0000</bug_when>
    <thetext>RESOLVED|FIXED is appropriate if we have changed the code to address a valid bug report or feature request.

RESOLVED|WONTFIX is appropriate when the bug report / feature request has merit per se, but we decide nonetheless to keep the code unchanged.

RESOLVED|WORKSFORME applies when the requested feature already works, or the reported bug does not reproduce, and we cannot figure out what differences between the reporter&apos;s and the assignee&apos;s environment cause the different behavior.

RESOLVED|DUPLICATE applies when the same report (essentially) already exists in the bugzilla database.

RESOLVED|INVALID applies when the requested feature conflicts with existent design, or with project direction/goals. Or else, when the symptom reported as a bug is not actually bug, but by-design (intended) behavior.

In the present case, VS2012 is still a supported toolchain (according to &quot;BaseTools/Conf/tools_def.template&quot;). Therefore the bug report has merit. We can still decide that we won&apos;t spend resources on fixing this issue, but then the right resolution is WONTFIX, not FIXED. I&apos;m updating the resolution field.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2054</bug_id>
          
          <creation_ts>2019-08-06 13:47:48 +0000</creation_ts>
          <short_desc>Assertion abuse in BaseLib SafeString</short_desc>
          <delta_ts>2020-05-27 04:29:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8801</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-08-06 13:47:48 +0000</bug_when>
    <thetext>There are many places where SafeString abuses the meaning of ASSERT. A couple of examples:

- AsciiStrToGuid will ASSERT when the length of the passed string is odd
- AsciiStrCatS will ASSERT when the appended string does not fit the buffer

This is absolutely ridiculous and defeats the purpose of these functions. We cannot pass untrusted data to them in DEBUG builds, as they will ASSERT and halt the CPU. This means that the caller must reimplement half of SafeString to be able to use it, which is simply not worth the effort. Clearly the designers missed something here, as ASSERT is an invariant that implies misuse of the function. It is not a way to perform error checking, this is what e.g. function return code is for.

Given how long-standing the problem is and the apparent release of next EDK II stable tag I request this to be addressed in the nearest future.

Disabling ASSERT&apos;ions entirely in SAFE_STRING_CONSTRAINT_CHECK calls may cease some use case of other teams. For this reason we suggest to make an enabled by default compile-time PCD that will enable ASSERTIONS. Sample implementation follows:

#define SAFE_STRING_CONSTRAINT_CHECK(Expression, Status)  \
  do { \
    if (PcdGetBool (PcdAssertOnSafeStringConstraints)) { \
      ASSERT (Expression); \
    } \
    if (!(Expression)) { \
      return Status; \
    } \
  } while (FALSE)

If there are no objections we can submit a patch if necessary, although it may be faster for someone from the core team to make this simple change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8887</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:17:06 +0000</bug_when>
    <thetext>Bug Triage: Jiewen, please have a look and discuss this with the submitter to provide direction for the person who will work on this bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10132</commentid>
    <comment_count>2</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-20 09:07:41 +0000</bug_when>
    <thetext>Patch submitted:
https://edk2.groups.io/g/devel/message/49255

Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10155</commentid>
    <comment_count>3</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-22 03:14:44 +0000</bug_when>
    <thetext>V2 patch submitted changing the defaults to TRUE to preserve the original behaviour:
https://edk2.groups.io/g/devel/message/49327</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10156</commentid>
    <comment_count>4</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-22 03:21:28 +0000</bug_when>
    <thetext>Actually had some unprintable symbols in the reference link, fixed in V3:
https://edk2.groups.io/g/devel/message/49330</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10157</commentid>
    <comment_count>5</comment_count>
      <attachid>421</attachid>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-22 03:26:39 +0000</bug_when>
    <thetext>Created attachment 421
V3 patch

Hrm, the patch is clean, but for some reason mail server (or devel.io) adds &quot;3D&quot; to the link. Attached the raw V3 file to this message just in case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10805</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-01-08 19:24:16 +0000</bug_when>
    <thetext>change owner to vit9696@protonmail.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12508</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-15 07:34:30 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH V4 00/27]
  Disabling safe string constraint assertions

  http://mid.mail-archive.com/20200511154121.3878-1-cheptsov@ispras.ru
  https://edk2.groups.io/g/devel/message/59101

* [edk2-devel] [PATCH V5 00/27]
  Disabling safe string constraint assertions

  http://mid.mail-archive.com/20200512170237.19796-1-cheptsov@ispras.ru
  https://edk2.groups.io/g/devel/message/59310

* [edk2-devel] [PATCH V6 0/1]
  Disable safe string constraint assertions

  http://mid.mail-archive.com/20200514092537.29609-1-cheptsov@ispras.ru
  https://edk2.groups.io/g/devel/message/59524

* [edk2-devel] [PATCH V7 0/1]
  Disable safe string constraint assertions

  http://mid.mail-archive.com/20200514173131.38072-1-cheptsov@ispras.ru
  https://edk2.groups.io/g/devel/message/59578</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12660</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-05-21 19:00:17 +0000</bug_when>
    <thetext>* [Patch v8 0/2] Disable safe string constraint assertions

  https://edk2.groups.io/g/devel/message/59916

* [Patch v9 0/2] Disable safe string constraint assertions

  https://edk2.groups.io/g/devel/message/59993</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12661</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-05-21 19:04:16 +0000</bug_when>
    <thetext>Final design removes ASSERT() from the SAFE_STRING_CONSTRAINT_CHECK()
without a PCD to enable/disable the ASSERT() condition.

A DEBUG_VERBOSE message is added if a SAFE_STRING_CONSTRAINT_CHECK()
fails.

In addition, a unit test is added to verify that no ASSERT()s are
triggered when bad inputs are present in a safe string function and
that the expected DEBUG_VERBOSE message is generated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12663</commentid>
    <comment_count>10</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-05-21 20:11:43 +0000</bug_when>
    <thetext>Pull Request:

https://github.com/tianocore/edk2/pull/643

Commits:

https://github.com/tianocore/edk2/commit/1c877c716038a862e876cac8f0929bab4a96e849
https://github.com/tianocore/edk2/commit/09fe015af9c5d26b99c9f2e775decdf5489b1037</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>421</attachid>
            <date>2019-10-22 03:26:39 +0000</date>
            <delta_ts>2019-10-22 03:26:39 +0000</delta_ts>
            <desc>V3 patch</desc>
            <filename>0001-MdePkg-Add-PCD-to-disable-safe-string-constraint-ass.patch</filename>
            <type>text/plain</type>
            <size>4895</size>
            <attacher name="Vitaly Cheptsov">vit9696</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2408</bug_id>
          
          <creation_ts>2019-12-09 17:37:31 +0000</creation_ts>
          <short_desc>WhiskeylakeURvp VS2017 Build Fails</short_desc>
          <delta_ts>2020-03-02 17:47:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>mircea.gherzan</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10641</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-12-09 17:37:31 +0000</bug_when>
    <thetext>The WhiskeylakeURvp board build in WhiskeylakeOpenBoardPkg has a linker error when first built due to the following error:

        &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x64\cl.exe&quot; /nologo /E /TC /FIAutoGen.h -DBDAT_SUPPORT=1 -DSG_SUPPORT=1  -DCPU_CFL  /Id:\source\git\workspace\edk2\MdePkg\Library\BaseLib\X64  /Id:\source\git\workspace\edk2\MdePkg\Library\BaseLib  /Id:\source\git\workspace\Build\WhiskeylakeOpenBoardPkg\WhiskeylakeURvp\DEBUG_VS2017\X64\MdePkg\Library\BaseLib\BaseLib\DEBUG  /Id:\source\git\workspace\edk2\MdePkg  /Id:\source\git\submit-workspace\edk2\MdePkg\Include  /Id:\source\git\workspace\edk2\MdePkg\Include\X64 d:\source\git\workspace\edk2\MdePkg\Library\BaseLib\X64\Wbinvd.nasm &gt; d:\source\git\workspace\Build\WhiskeylakeOpenBoardPkg\WhiskeylakeURvp\DEBUG_VS2017\X64\MdePkg\Library\BaseLib\BaseLib\OUTPUT\X64\Wbinvd.i
Wbinvd.nasm
        Trim --trim-long --source-code -o d:\source\git\workspace\Build\WhiskeylakeOpenBoardPkg\WhiskeylakeURvp\DEBUG_VS2017\X64\MdePkg\Library\BaseLib\BaseLib\OUTPUT\X64\Wbinvd.iii d:\source\git\workspace\Build\WhiskeylakeOpenBoardPkg\WhiskeylakeURvp\DEBUG_VS2017\X64\MdePkg\Library\BaseLib\BaseLib\OUTPUT\X64\Wbinvd.i
PeiPolicyUpdateLib.lib(PeiSaPolicyUpdatePreMem.obj) : error LNK2001: unresolved external symbol _gEfiMemoryTypeInformationGuid
d:\source\git\workspace\Build\WhiskeylakeOpenBoardPkg\WhiskeylakeURvp\DEBUG_VS2017\IA32\MinPlatformPkg\PlatformInit\PlatformInitPei\PlatformInitPostMem\DEBUG\PlatformInitPostMem.dll : fatal error LNK1120: 1 unresolved externals
Generating code
NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\link.exe&quot;&apos; : return code &apos;0x460&apos;
Stop.

After that failure is resolved, there is at least one more failure due to unresolved external symbols in PchInitSmm:

PchInitSmm.lib(PchLanSxSmm.obj) : error LNK2001: unresolved external symbol GbeMdiSetPage
PchInitSmm.lib(PchLanSxSmm.obj) : error LNK2001: unresolved external symbol GbeMdiSetRegister
PchInitSmm.lib(PchLanSxSmm.obj) : error LNK2001: unresolved external symbol GbeMdiReleaseMdio
PchInitSmm.lib(PchLanSxSmm.obj) : error LNK2001: unresolved external symbol GbeMdiWrite
PchInitSmm.lib(PchLanSxSmm.obj) : error LNK2001: unresolved external symbol GbeMdiAcquireMdio
PchInitSmm.lib(PchLanSxSmm.obj) : error LNK2001: unresolved external symbol GbeMdiRead
d:\source\git\workspace\Build\WhiskeylakeOpenBoardPkg\WhiskeylakeURvp\DEBUG_VS2017\X64\CoffeelakeSiliconPkg\Pch\PchInit\Smm\PchInitSmm\DEBUG\PchInitSmm.dll : fatal error LNK1120: 6 unresolved externals

The build can be reproduced with the build command for the WhiskeylakeURvp board. On Windows, &quot;py -3 build_bios.py -p WhiskeylakeURvp&quot;.

All failures should be fixed so the build command executes successfully for VS2017. These issues do not reproduce in VS2015 which has been the standard build tool chain for WhiskeylakeOpenBoardPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10696</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-12-12 20:28:09 +0000</bug_when>
    <thetext>Mark as confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11486</commentid>
    <comment_count>2</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2020-03-02 17:37:07 +0000</bug_when>
    <thetext>The fix for this issue also fixes a related issue where gEfiMemoryTypeInformationGuid was missing from PeiPolicyUpdateLib.inf.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11489</commentid>
    <comment_count>3</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2020-03-02 17:47:20 +0000</bug_when>
    <thetext>The fix for this bug has been pushed as 852b889b~..068c6c48.

Marking as fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2883</bug_id>
          
          <creation_ts>2020-08-09 23:00:34 +0000</creation_ts>
          <short_desc>UefiCpuPkg: MpServices2Ppi and MpServicesPpi compatibility support.</short_desc>
          <delta_ts>2020-09-14 09:40:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13346</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-08-09 23:00:34 +0000</bug_when>
    <thetext>Background:
Some platforms may not align with new MpServices2Ppi and still only produce MpServicesPpi. The other platforms may want to produce MpServices2Ppi because it has included all version 1 functions. I believe no platforms wanted to produce both version 1 and version 2 PPIs.

The request is to provide flexibility for platforms to choose either version 1 or version 2 but not both of them, to achieve this we need at least below 2 changes in UefiCpuPkg:

1. UefiCpuPkg: PeiRegisterCpuFeaturesLib.c: CpuFeaturesInitialize ():
This function always call StartupAllCPUsWorker () which is MpServices2Ppi function, it can extend support to MpServicesPpi.

2. UefiCpuPkg: CpuFeaturesInitialize.c: CpuInitDataInitialize ():
   CpuFeaturesData-&gt;MpService = GetMpService ();
GetMpService () only support MpServicesPpi, it can extend support to MpServices2Ppi.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13444</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-18 22:06:36 +0000</bug_when>
    <thetext>The request is reasonable. Chasel, can you share the design for this change?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13446</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-08-18 22:07:57 +0000</bug_when>
    <thetext>Would there be any issues if both PPIs are always produced?
That would maximize compatibility.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13458</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-08-18 22:29:53 +0000</bug_when>
    <thetext>(In reply to Michael Kinney from comment #2)
&gt; Would there be any issues if both PPIs are always produced?
&gt; That would maximize compatibility.

Technically we can install both PPIs always with exactly same function stacks but I do not know any real usage model that must need both when version2 PPI can be a replacement of version1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13460</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-08-18 23:06:03 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #1)
&gt; The request is reasonable. Chasel, can you share the design for this change?

My idea for the changes are as below:

1. UefiCpuPkg: PeiRegisterCpuFeaturesLib.c: CpuFeaturesInitialize ():
This function always call StartupAllCPUsWorker () which is MpServices2Ppi function, it can do like this:
if MpService2Ppi present:
  call MpServices2Ppi to do the job
else if MpServicesPpi present:
  call MpServicesPpi to do the job
else
  ASSERT

2. UefiCpuPkg: CpuFeaturesInitialize.c: CpuInitDataInitialize ():
   CpuFeaturesData-&gt;MpService = GetMpService ();
GetMpService () only support MpServicesPpi, it can extend support to MpServices2Ppi as below:

if MpServices2Ppi present:
  return MpServices2Ppi pointer
else if MpServicesPpi present:
  return MpServicesPpi pointer
else
  ASSERT
  return NULL</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13670</commentid>
    <comment_count>5</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-09-14 09:40:17 +0000</bug_when>
    <thetext>commit 1b461403ee723dab01d5828714cca0b9396a6b3c (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue Sep 8 16:38:11 2020 +0800

    UefiCpuPkg/RegisterCpuFeaturesLib: Support MpServices2 only case.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2883

    MpServices Ppi can be replaced by MpServices2 Ppi and MpServices2
    Ppi is mandatory for RegisterCpuFeaturesLib functionality,
    basing on this we can drop MpServices Ppi usage from the library
    and the constraint that both Ppis must be installed.

    Cc: Eric Dong &lt;eric.dong@intel.com&gt;
    Cc: Ray Ni &lt;ray.ni@intel.com&gt;
    Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
    Cc: Rahul Kumar &lt;rahul1.kumar@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Eric Dong &lt;eric.dong@intel.com&gt;
    Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2295</bug_id>
          
          <creation_ts>2019-10-20 05:29:34 +0000</creation_ts>
          <short_desc>UefiFileHandleLib mishandles root directory on many drivers</short_desc>
          <delta_ts>2020-12-11 12:22:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3119</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Marvin Häuser">mhaeuser</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10123</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-20 05:29:34 +0000</bug_when>
    <thetext>The current implementation of the FileHandleGetFileName() function assumes that the Root directory always has the FileName &apos;\0&apos;. However, the only requirement the UEFI specification defines is that a prepended &apos;\\&apos; must be supported to access files and folders relative to the Root directory.

In practice, select File System drivers report &apos;\\&apos; as the FileName of the Root directory, which currently is both generating an invalid path (&quot;\\\\&quot;) and resulting in an EFI_NOT_FOUND result from the CurrentHandle-&gt;Open() call.

Original patch sent here: 
https://edk2.groups.io/g/devel/message/27399

Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10139</commentid>
    <comment_count>1</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2019-10-20 13:31:20 +0000</bug_when>
    <thetext>Patch submitted: https://edk2.groups.io/g/devel/message/49258
Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10300</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-03 21:47:13 +0000</bug_when>
    <thetext>Fix at 6407186db9505f101ece4e1571eceed69b9fbdbe</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14566</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-12-11 12:22:02 +0000</bug_when>
    <thetext>(In reply to Vitaly Cheptsov from comment #0)
&gt; The current implementation of the FileHandleGetFileName() function
&gt; assumes that the Root directory always has the FileName &apos;\0&apos;. However,
&gt; the only requirement the UEFI specification defines is that a
&gt; prepended &apos;\\&apos; must be supported to access files and folders relative
&gt; to the Root directory.

This is incorrect. The UEFI spec (at least v2.8B) states under 13.5 File
Protocol, EFI_FILE_INFO:

  FileName   The Null-terminated name of the file. For a root directory,
             the name is an empty string.

Anyway, that&apos;s not my main point here -- it&apos;s OK to make functions more
robust, to deal with broken drivers.

The issue is that commit 6407186db950 introduced an EFI_FILE_PROTOCOL
leak. Please refer to bug 3119. I&apos;ll send the patch later.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2762</bug_id>
          
          <creation_ts>2020-05-22 01:39:09 +0000</creation_ts>
          <short_desc>Adding Guid name support in GenFfs to prevent hard coding GUID vaule on fdf file</short_desc>
          <delta_ts>2020-07-21 01:15:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>amy.chan</reporter>
          <assigned_to name="Chen Yuwei">yuwei.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12664</commentid>
    <comment_count>0</comment_count>
    <who name="">amy.chan</who>
    <bug_when>2020-05-22 01:39:09 +0000</bug_when>
    <thetext>We meet below error message when we try to use FileGuid name on fdf file, please help to add the Guid name support in GenFfs, that way we can prevent hard coding GUID value on fdf file, we won&apos;t need to update the value if FileGuid value change again in the future.

Generating FVUEFIBOOTUNCOMPACT FV
##### [&apos;GenFfs&apos;, &apos;-t&apos;, &apos;EFI_FV_FILETYPE_APPLICATION&apos;, &apos;-g&apos;, &apos;gUefiShellFileGuid&apos;, &apos;-o&apos;,
GenFfs: ERROR 1003: Invalid option value
  Incorrect GUID &quot;gUefiShellFileGuid&quot;
  Correct Format &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;
GenFfs: ERROR 1003: Invalid option value
  -g = gUefiShellFileGuid</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12716</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-26 21:50:38 +0000</bug_when>
    <thetext>This should be supported by design.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12774</commentid>
    <comment_count>2</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-06-02 21:53:44 +0000</bug_when>
    <thetext>Hi Amy, can you show me some examples of the hard Coding GUID Value in fdf file in details to help me checking my code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12783</commentid>
    <comment_count>3</comment_count>
    <who name="">amy.chan</who>
    <bug_when>2020-06-03 11:12:07 +0000</bug_when>
    <thetext># Note : gUefiShellFileGuid (7C04A583-9E3E-4f1c-AD65-E05268D0B4D1) is FILE GUID for ShellPkg/Application/Shell/Shell.inf
#
!if gBoardModuleTokenSpaceGuid.PcdUefiShellEnable == TRUE
    FILE APPLICATION = 7C04A583-9E3E-4f1c-AD65-E05268D0B4D1 {
      SECTION PE32 = $(OUTPUT_DIRECTORY)/$(TARGET)_$(TOOL_CHAIN_TAG)/X64/ShellPkg/Application/Shell/Shell/OUTPUT/Shell.efi
      SECTION UI = &quot;UefiShell&quot;
    }
!endif #PcdUefiShellEnable == TRUE</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13141</commentid>
    <comment_count>4</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-07-21 01:15:57 +0000</bug_when>
    <thetext>fix at d35773d5c05b078f53d9475bc50ac9dee91b32c5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2077</bug_id>
          
          <creation_ts>2019-08-12 21:41:01 +0000</creation_ts>
          <short_desc>LzmaCompress need support switches to set compression mode and dictionary size</short_desc>
          <delta_ts>2019-09-25 03:40:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>yun.y.liu</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8965</commentid>
    <comment_count>0</comment_count>
    <who name="">yun.y.liu</who>
    <bug_when>2019-08-12 21:41:01 +0000</bug_when>
    <thetext>Our project need to compress two similar FVs to one. 
But with default compression mode and default dictionary size in LzmaCompress cannot save the final FV size for us. 
Need your help to give more switches to set compression mode and dictionary size, so we can save more size for FV compact.

Thanks
Ly</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9084</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-20 00:58:30 +0000</bug_when>
    <thetext>Shenglei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9436</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-03 01:15:29 +0000</bug_when>
    <thetext>This request is to support compression mode and dictionary size. Below are these two options. 


LZMA 19.00 (x86) : Igor Pavlov : Public domain : 2019-02-21
Usage:  lzma &lt;command&gt; [inputFile] [outputFile] [&lt;switches&gt;...]
&lt;switches&gt;
  -a{N}  : set compression mode : [0, 1] : default = 1 (max)
  -d{N}  : set dictionary size : [12, 30] : default = 24 (16 MiB)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9805</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-09-25 03:40:19 +0000</bug_when>
    <thetext>Fixed at edk2/master:
6b80310f34199d1f62e45e40fa902734735091fa</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2547</bug_id>
          
          <creation_ts>2020-02-22 09:13:09 +0000</creation_ts>
          <short_desc>DeviceManagerUiLib: Assigning GUID causes memcpy link issue</short_desc>
          <delta_ts>2020-03-11 23:10:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Daniel Schaefer">daniel.schaefer</reporter>
          <assigned_to name="Daniel Schaefer">daniel.schaefer</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11396</commentid>
    <comment_count>0</comment_count>
    <who name="Daniel Schaefer">daniel.schaefer</who>
    <bug_when>2020-02-22 09:13:09 +0000</bug_when>
    <thetext>The file MdeModulePkg/Library/DeviceManagerUiLib/DeviceManager.c assigns an EFI_GUID, rather than copying the bytes. The compiler translates this into a memcpy, which EDKII doesn&apos;t provide. Therefore the linking stage fails like:

/riscv64-unknown-elf/bin/ld: /Build/MdeModule/DEBUG_GCC5/RISCV64/MdeModulePkg/Library/DeviceManagerUiLib/DeviceManagerUiLib/OUTPUT/DeviceManagerUiLib.lib(DeviceManager.obj): in function `CreateDeviceManagerForm&apos;:
/edk2/MdeModulePkg/Library/DeviceManagerUiLib/DeviceManager.c:622: undefined reference to `memcpy&apos;
collect2: error: ld returned 1 exit status

Replacing the assignment with CopyGuid fixes this issues.
I&apos;ll post a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11571</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-05 20:15:52 +0000</bug_when>
    <thetext>please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11671</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-03-11 23:10:48 +0000</bug_when>
    <thetext>Pushed at 64a228f5f89320fd632bb6c55e154961f2410680
Reviewed at https://edk2.groups.io/g/devel/message/55463</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2316</bug_id>
          
          <creation_ts>2019-10-30 07:15:54 +0000</creation_ts>
          <short_desc>Mouse and keyboard not working on qemu with UefiPayloadPkg</short_desc>
          <delta_ts>2020-06-03 16:26:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>u14935</reporter>
          <assigned_to name="dong_guo@126.com">guo.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guo.dong</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10239</commentid>
    <comment_count>0</comment_count>
    <who name="">u14935</who>
    <bug_when>2019-10-30 07:15:54 +0000</bug_when>
    <thetext>When I try to build coreboot with UefiPayloadPkg as coreboot payload and test on qemu the mouse and keyboard will not function. The settings in coreboot are all default except qemu system is q35 and it is configured for linear framebuffer.

How I start qemu: qemu-system-x86_64 -M q35 -bios build/coreboot.rom -hda fat:rw:hda-contents -serial stdio

The payload is configured to be incorporated into coreboot.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10258</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:27:42 +0000</bug_when>
    <thetext>Include UefiPayloadPkg Maintainer Dong, Guo for more discussion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12791</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-03 16:26:18 +0000</bug_when>
    <thetext>Apparently fixed in commit 33a32936510e (&quot;UefiPayloadPkg/BootManager: Add PS2 keyboard support&quot;, 2020-01-02).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2927</bug_id>
          
          <creation_ts>2020-08-24 22:21:08 +0000</creation_ts>
          <short_desc>Add strncmp macro to use AsciiStrnCmp</short_desc>
          <delta_ts>2020-08-24 22:25:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>daniel.schaefer</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmbeddedPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13512</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-24 22:21:08 +0000</bug_when>
    <thetext>For the implementation which utilizes libfdt provided in EmbeddedPkg
however, it uses strncmp function in the libfdt helper library,
libfdt_env.h should provide the macro implied with edk2 strncmp
implementation.

RISC-V OpenSBI library is the use case. edk2 RISC-V port uses OpenSBI
library and incorporate with edk2 libfdt. edk2 libfdt_env.h provides
the necessary macros to build OpenSBI which uses fdt functions in edk2
environment. However, OpenSBI also has libfdt helper library that uses
strncmp function which is not defined in edk2 libfdt_env.h. This commit
addresses the build issue caused by missing strncmp macro in
libfdt_env.h.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13513</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-24 22:21:45 +0000</bug_when>
    <thetext>changed to CONFIRMED</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13514</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-24 22:25:29 +0000</bug_when>
    <thetext>Resolved at edk2 master branch,
Commit ID: 019f513a19f8530a3057b9ba15c82d9619399715</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2336</bug_id>
          
          <creation_ts>2019-11-11 17:00:32 +0000</creation_ts>
          <short_desc>Add EDK II Minimum Platform BDS Hook Points in MinPlatformPkg</short_desc>
          <delta_ts>2020-04-30 14:32:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10396</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-11 17:00:32 +0000</bug_when>
    <thetext>The EDK II Minimum Platform specification describes &quot;BDS Hook Points&quot;. In conjunction with pre-existing notification events during BDS, these hook points provide a mechanism for board code to register callback functions that will be invoked at a specific point during the BDS execution sequence.

The BDS hook points defined in the specification were carefully chosen after analyzing platform-specific actions typically performed during BDS across a number of client and server firmware implementations.

The hook points are defined in the following location in the following section of the specification: https://edk2-docs.gitbooks.io/edk-ii-minimum-platform-specification/appendix_a_full_maps/a3_bds_hook_points.html.

This task is to implement the hook points in MinPlatformPkg. This change should be backward-compatible with existing MinPlatformPkg users.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10397</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-11 17:02:12 +0000</bug_when>
    <thetext>Assigned to Prince</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10496</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-20 18:37:11 +0000</bug_when>
    <thetext>Prince is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10498</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-20 19:31:39 +0000</bug_when>
    <thetext>To elaborate further on the initial request. The goal is to not impact the capabilities provided to board packages in this change. Future changes could optimize the activities performed in the default implementation used in board packages.

The main BDS control flow is defined in BdsEntry () in MdeModulePkg/Universal/BdsDxe/BdsEntry.c. The hook points in this module are implemented in MinPlatformPkg in its instance of PlatformBootManagerLib. Since the BDS hook points are defined in the Minimum Platform specification, the event groups that are signaled should be done so in the appropriate location in the MinPlatformPkg PlatformBootManagerLib implementation. Actions currently performed in the current PlatformBootManagerLib implementation should be reviewed to be moved elsewhere as described below.

In order to provide a common module that implements board BDS functionality, a new module should be added to BoardModulePkg (e.g. &quot;BoardBdsDxe&quot;). To provide a fundamental set of standard functionality used in most BDS implementations, a new library class should be consumed by BoardBdsDxe (e.g. &quot;BoardBdsLib&quot;). The default library class instance in BoardModulePkg should register event notification functions for the BDS hook points added. The current content in the MinPlatformPkg PlatformBootManagerLib implementation should be moved to these notification functions leaving the PlatformBootManagerLib in MinPlatformPkg with a relatively clean and obvious flow.

The interface of BoardBdsLib could provide a function for each BDS hook point. The BdsBoardDxe module could call each function in order and the function implementation could register the appropriate event notification handler. This allows some flexibility for the library implementation to perform other logic before/after registering the event notification. If a board package needs more complex functionality it can use its own instance of BoardBdsLib. It could also use a NULL class library (linked in the library class override section of the BoardBdsDxe module).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10571</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-27 12:49:55 +0000</bug_when>
    <thetext>Some functions exist in PlatformBootManagerLib such as PlatformBootManagerWaitCallback () and PlatformBootManagerUnableToBoot () that will not have events signaled in the MinPlatformPkg library instance for boards to take action. An option is that a new library class called &quot;BoardBootManagerLib&quot; be introduced in MinPlatformPkg (library class .h file defined in MinPlatformPkg and NULL/default library instance added to MinPlatformPkg) that defines these functions. The PlatformBootManagerLib instance in MinPlatformPkg can simply forward calls to the BoardBootManagerLib API.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10904</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-15 18:22:11 +0000</bug_when>
    <thetext>The initial patch series was sent to the mailing list - https://edk2.groups.io/g/devel/message/52222.

Some code review feedback is still pending.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12358</commentid>
    <comment_count>6</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2020-04-30 14:32:05 +0000</bug_when>
    <thetext>Patch series is pushed, and the follow on patch series is pushed:

1. 765cbda6~..5a60c2de
2. 3a2d7bb0~..6e4ebde9

Implementation complete.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2014</bug_id>
          
          <creation_ts>2019-07-24 06:45:37 +0000</creation_ts>
          <short_desc>Add extra debugging to improve error identification.</short_desc>
          <delta_ts>2019-08-01 04:48:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8558</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-07-24 06:45:37 +0000</bug_when>
    <thetext>Some error messages in AutoGen/StrGather.Py and Trim/Trim.py are ambiguous.
in AutoGen/StrGather.Py,Error while processing file if the file is read incorrectly
Add extra debugging to improve error identification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8576</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:13:09 +0000</bug_when>
    <thetext>Bug Triage: patch submitted to the list:

https://edk2.groups.io/g/devel/message/44374?p=,,,20,0,0,0::Created,,debugging,20,2,0,32594584</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8680</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-08-01 04:48:08 +0000</bug_when>
    <thetext>fix it in SHA-1: 307e1650be267b67db7be1089e0979ace460d830</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2608</bug_id>
          
          <creation_ts>2020-03-19 14:40:22 +0000</creation_ts>
          <short_desc>Translate title from Ascii to Unicode caused page fault in unit test framework initialization</short_desc>
          <delta_ts>2020-04-25 22:39:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11741</commentid>
    <comment_count>0</comment_count>
      <attachid>489</attachid>
    <who name="">kun.qin</who>
    <bug_when>2020-03-19 14:40:22 +0000</bug_when>
    <thetext>Created attachment 489
Proposed fix for page fault

Translate title from Ascii to Unicode caused page fault in unit test framework initialization:

In this case, allocated buffer size for Unicode string is the same as ascii string. Thus when calling AsciiStrToUnicodeStrS in the next line, system will run out of boundary and trip on Page Fault.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11743</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-03-19 15:04:36 +0000</bug_when>
    <thetext>Fix checked into github here: https://github.com/microsoft/mu_basecore/commit/ba76de7f591d43d9f4f3df259b8c08a9abb65156</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11823</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-24 22:08:36 +0000</bug_when>
    <thetext>Guomin: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11935</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-30 23:11:15 +0000</bug_when>
    <thetext>Post patch at message https://edk2.groups.io/g/devel/message/56714.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12110</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:13:17 +0000</bug_when>
    <thetext>Is the patch reviewed or not?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12318</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-25 22:39:34 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/63d425002a7d513759be6f216e5bacb9157a5ded</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>489</attachid>
            <date>2020-03-19 14:40:22 +0000</date>
            <delta_ts>2020-03-19 14:40:22 +0000</delta_ts>
            <desc>Proposed fix for page fault</desc>
            <filename>0001-Fix-a-page-fault-in-unit-test-framework-initializati.patch</filename>
            <type>application/octet-stream</type>
            <size>1333</size>
            <attacher>kun.qin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2033</bug_id>
          
          <creation_ts>2019-07-30 01:28:49 +0000</creation_ts>
          <short_desc>Comments need to be improved in UefiCpuPkg/Cpuid.c</short_desc>
          <delta_ts>2019-08-07 02:18:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2052</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8636</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-07-30 01:28:49 +0000</bug_when>
    <thetext>In Cpuid.c line 709
  /**
    Display CPUID_EXTENDED_TOPOLOGY leafs for all supported levels.
  
  **/
  VOID
  CpuidExtendedTopology (
    UINT32                       LeafFunction
    )

The description of the added agreement &quot;LeafFunction&quot; is needed in comments</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8637</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-07-30 01:29:48 +0000</bug_when>
    <thetext>Assigned to Ray</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8638</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-07-30 01:39:38 +0000</bug_when>
    <thetext>(In reply to shenglei.zhang from comment #0)
&gt; In Cpuid.c line 709
&gt;   /**
&gt;     Display CPUID_EXTENDED_TOPOLOGY leafs for all supported levels.
&gt;   
&gt;   **/
&gt;   VOID
&gt;   CpuidExtendedTopology (
&gt;     UINT32                       LeafFunction
&gt;     )
&gt; 
&gt; The description of the added agreement &quot;LeafFunction&quot; is needed in comments

The description of the added parameter &quot;LeafFunction&quot; is needed in comments</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8813</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-07 02:18:16 +0000</bug_when>
    <thetext>This is a duplicated bug of BZ 2052.

*** This bug has been marked as a duplicate of bug 2052 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2971</bug_id>
          
          <creation_ts>2020-09-17 01:05:31 +0000</creation_ts>
          <short_desc>FitGen should support more microcode alignment value.</short_desc>
          <delta_ts>2020-09-22 21:42:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Aaron Li">aaron.li</reporter>
          <assigned_to name="Aaron Li">aaron.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13703</commentid>
    <comment_count>0</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-09-17 01:05:31 +0000</bug_when>
    <thetext>The description of FitGen [-A &lt;MicrocodeAlignment&gt;] 
    &quot;MicrocodeAlignment     - HEX value of Microcode alignment. Ignored if \&quot;-NA\&quot; is specified. Default value is 0x800.&quot;
indicate that any value of MicrocodeAlignment is supported.
However, the current code only support 2^n byte alignment, for example:
FitGen.exe -A 0x800    (is supported)
FitGen.exe -A 0xC00    (is not supported)

In FitGen.c, line 1179:
MicrocodeSize = (*(UINT32 *)(MicrocodeBuffer + 32) + (gFitTableContext.MicrocodeAlignValue - 1)) &amp; ~(gFitTableContext.MicrocodeAlignValue - 1);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13704</commentid>
    <comment_count>1</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-09-17 01:06:40 +0000</bug_when>
    <thetext>take owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13745</commentid>
    <comment_count>2</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-09-22 21:42:26 +0000</bug_when>
    <thetext>Fixed @ 4efd9ab2cfabdcbd6ca410f870bc889e76f18d85</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2270</bug_id>
          
          <creation_ts>2019-10-14 16:46:34 +0000</creation_ts>
          <short_desc>Allow PCDs to be used in conditional statements if not referenced in an INF</short_desc>
          <delta_ts>2019-11-21 02:56:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10014</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-14 16:46:34 +0000</bug_when>
    <thetext>Currently a PCD (e.g. FeaturePCD) cannot be used in a conditional statement in a DSC/FDF file without a module in the build referencing the PCD package DEC file. The request is to allow a PCD to be referenced in DSC/FDF files to make decisions regardless of whether a module INF file references the DEC file in which the PCD is declared.

An example implementation that to support this is to allow a [Packages] section in the DSC file to list additional package dependencies for PCD references in the package DSC/FDF files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10016</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-14 20:31:54 +0000</bug_when>
    <thetext>Bob, please help work on it, and also update need to DSC spec for this support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10452</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 22:18:41 +0000</bug_when>
    <thetext>New support in DSC. This is a feature request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10506</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-11-21 02:56:01 +0000</bug_when>
    <thetext>commit at bf1ea933ec1c6447c4168c34cc1b7ea4ac8f3e4d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2737</bug_id>
          
          <creation_ts>2020-05-20 22:13:18 +0000</creation_ts>
          <short_desc>BoardModulePkg: Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-06-26 09:56:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>BoardModulePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12586</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:13:18 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12617</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 05:37:00 +0000</bug_when>
    <thetext>Assigning to package maintainer/reviewer based on &quot;GetMaintainer.py&quot; output.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12731</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-26 22:02:31 +0000</bug_when>
    <thetext>BoardModulePkg is not the platform package. It should not be impacted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12948</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-26 09:56:48 +0000</bug_when>
    <thetext>BoardModulePkg is not the platform package, no need to change it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2632</bug_id>
          
          <creation_ts>2020-03-25 20:44:22 +0000</creation_ts>
          <short_desc>[UefiCpuPkg/MpInitLib] Both PEI &amp; DXE instances are missing the PcdLib dependency</short_desc>
          <delta_ts>2020-04-23 04:51:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11852</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-03-25 20:44:22 +0000</bug_when>
    <thetext>As discovered by Laszlo (https://edk2.groups.io/g/devel/message/56339), both
the PEI and DXE instances of the MpInitLib are using PcdLib APIs, but none of
them list the dependency of the PcdLib in INF &amp; header files.

Though there seems to be no build issue at this moment (relying on the inherit
reference of the PcdLib by the module that includes MpInitLib), it would be the
best to list such dependency in MpInitLib to avoid potential build failure
risks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11969</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 22:10:59 +0000</bug_when>
    <thetext>Hao, can you send the patch for this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12270</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-04-22 02:56:56 +0000</bug_when>
    <thetext>V1 patch proposed at:
https://edk2.groups.io/g/devel/message/57779</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12298</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-04-23 04:51:12 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/d5339c04d7cd47c061ec146a7b062052e3dc56ca</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2887</bug_id>
          
          <creation_ts>2020-08-10 23:26:24 +0000</creation_ts>
          <short_desc>CLANGPDB tool chain build failure in FmpDxe</short_desc>
          <delta_ts>2020-08-13 23:23:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13362</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-10 23:26:24 +0000</bug_when>
    <thetext>Those failures are introduced by the recent changes.

/Edk2/FmpDevicePkg/FmpDxe/FmpDxe.c:1061:7: error: variable &apos;Private&apos; is used uninitialized whenever &apos;if&apos; condition is true [-Werror,-Wsometimes-uninitialized]
  if (This == NULL) {
      ^~~~~~~~~~~~
/Edk2/FmpDevicePkg/FmpDxe/FmpDxe.c:1296:35: note: uninitialized use occurs here
  SetLastAttemptStatusInVariable (Private, LastAttemptStatus);
                                  ^~~~~~~
/Edk2/FmpDevicePkg/FmpDxe/FmpDxe.c:1061:3: note: remove the &apos;if&apos; if its condition is always false
  if (This == NULL) {
  ^~~~~~~~~~~~~~~~~~~
/Edk2/FmpDevicePkg/FmpDxe/FmpDxe.c:1031:45: note: initialize the variable &apos;Private&apos; to silence this warning
  FIRMWARE_MANAGEMENT_PRIVATE_DATA  *Private;
                                            ^
                                             = NULL</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13363</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-10 23:27:11 +0000</bug_when>
    <thetext>Michael, please check this regression issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13372</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-08-11 13:50:39 +0000</bug_when>
    <thetext>I will update it. Why is this not checked by CI?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13373</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-08-11 20:29:58 +0000</bug_when>
    <thetext>V1 patch on the list - https://edk2.groups.io/g/devel/message/64017</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13393</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-08-13 23:23:03 +0000</bug_when>
    <thetext>Patch merged to edk2/master in commit https://github.com/tianocore/edk2/commit/3633d5309f67550e2369776b37220674ad1b623c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2296</bug_id>
          
          <creation_ts>2019-10-20 05:35:03 +0000</creation_ts>
          <short_desc>ls is broken on empty directory</short_desc>
          <delta_ts>2019-11-03 21:54:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Marvin Häuser">mhaeuser</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10124</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-20 05:35:03 +0000</bug_when>
    <thetext>Currently, when &apos;ls&apos; is run on an entirely empty directory (this includes not having &apos;.&apos; and &apos;..&apos;), the output is always &apos;File not found&apos;.

Original patch sent here:
https://edk2.groups.io/g/devel/message/24549

Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10140</commentid>
    <comment_count>1</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2019-10-20 13:31:45 +0000</bug_when>
    <thetext>Patch submitted: https://edk2.groups.io/g/devel/message/49259
Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10301</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-03 21:54:31 +0000</bug_when>
    <thetext>Fix at 8d3f428109623096cb8845779cdf9dc44949b8e9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2653</bug_id>
          
          <creation_ts>2020-04-01 01:41:36 +0000</creation_ts>
          <short_desc>Improper order of open CI build</short_desc>
          <delta_ts>2020-05-11 21:25:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11974</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-01 01:41:36 +0000</bug_when>
    <thetext>There is pull request failure, which is a submodule related patch.
https://github.com/tianocore/edk2/pull/483

And take &apos;Build_GCC5 TARGET_MDEMODULE_DEBUG&apos; as a example. Below is the link.
https://dev.azure.com/tianocore/edk2-ci/_build/results?buildId=5033&amp;view=logs&amp;j=496709c3-d8b1-5700-73d8-a4c15f6a19f7

The step &apos;Build Base Tools from source&apos; occurs before the step &apos;Setup MdeModulePkg IA32,X64,ARM,AARCH64&apos;, which means the submoule is not cloned when building BaseTools. So errors happen if the submodule is introduced into edk2/BaseTools.

I think we should sync the submodules before building basetools.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11975</commentid>
    <comment_count>1</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-01 01:52:13 +0000</bug_when>
    <thetext>Interesting.   Adding a submodule to basetools c source was not expected. I agree that to resolve this we should run setup and update first.  

I also looked at your PR and noticed the gitmodule file change was not correct.  Please check that as the URL was added twice.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11976</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-01 02:14:52 +0000</bug_when>
    <thetext>(In reply to Sean Brogan from comment #1)
&gt; Interesting.   Adding a submodule to basetools c source was not expected. I
&gt; agree that to resolve this we should run setup and update first.  
&gt; 
&gt; I also looked at your PR and noticed the gitmodule file change was not
&gt; correct.  Please check that as the URL was added twice.

I have updated the gitmodule file in my github. Maybe you can use my patch to test your step change.
https://github.com/shenglei10/edk2/commits/brotli_BaseTools</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11979</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-01 03:19:55 +0000</bug_when>
    <thetext>Patch here:
https://github.com/spbrogan/edk2/tree/UpdateCiToSupportBasetoolsWithSubmodule

PR here:
https://github.com/tianocore/edk2/pull/488</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11982</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-01 03:52:55 +0000</bug_when>
    <thetext>(In reply to Sean Brogan from comment #3)
&gt; Patch here:
&gt; https://github.com/spbrogan/edk2/tree/UpdateCiToSupportBasetoolsWithSubmodule
&gt; 
&gt; PR here:
&gt; https://github.com/tianocore/edk2/pull/488

Can I send this patch to community for review process?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11983</commentid>
    <comment_count>5</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-01 03:54:03 +0000</bug_when>
    <thetext>yes</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12078</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-06 11:07:42 +0000</bug_when>
    <thetext>Shenglei: please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12094</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 21:49:04 +0000</bug_when>
    <thetext>it has been merged. So, it can be closed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12197</commentid>
    <comment_count>8</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-13 02:51:04 +0000</bug_when>
    <thetext>Fixed at e1fbff3ded87704fb0086f9b5fb368080eb4db51</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12478</commentid>
    <comment_count>9</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-05-11 21:25:23 +0000</bug_when>
    <thetext>change status to fixed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2786</bug_id>
          
          <creation_ts>2020-06-08 04:45:37 +0000</creation_ts>
          <short_desc>MdeModulePkg.dec: Change PCDs for status code.</short_desc>
          <delta_ts>2020-06-28 02:57:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>ming.tan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12808</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-08 04:45:37 +0000</bug_when>
    <thetext>In order to support enable/disable report status code through
memory and serial dynamic, change the following PCDs from
PcdsFeatureFlag to PcdsDynamic:
  PcdStatusCodeUseSerial
  PcdStatusCodeUseMemory</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12809</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-08 04:46:58 +0000</bug_when>
    <thetext>I will summit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12842</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-10 02:36:09 +0000</bug_when>
    <thetext>4 patchs are submitted for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12960</commentid>
    <comment_count>3</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-28 02:57:37 +0000</bug_when>
    <thetext>The patch was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2672</bug_id>
          
          <creation_ts>2020-04-09 21:22:04 +0000</creation_ts>
          <short_desc>RISC-V architecture on EDK2</short_desc>
          <delta_ts>2020-05-27 04:28:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12179</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-04-09 21:22:04 +0000</bug_when>
    <thetext>EDK2 foundation, packages, module, base tool changes to accommodate RISC-V architecture.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12210</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-14 21:34:16 +0000</bug_when>
    <thetext>Patches are all sent to edk2 mail list for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12526</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-05-19 11:27:45 +0000</bug_when>
    <thetext>Already pushed to edk2 master.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12528</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-19 13:30:51 +0000</bug_when>
    <thetext>(In reply to Chang, Abner from comment #2)
&gt; Already pushed to edk2 master.

Can you state the commit range please? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12530</commentid>
    <comment_count>4</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-05-19 21:15:31 +0000</bug_when>
    <thetext>There are three sets of commits, 

683df865a7b00b6bb0fe2d87ebc8ae5aa806dec8 to ef5dcba975ee3b4c29b19ad0b23d371a2cd9d60a, 

ad1db975c0cac816abd2a23237604fed91e43d58 to f60d5ca97f25121de20d057c0e8618700905e4e0 and 

ea56fa3d4706dae4e662e01fddb24a2826abfcbd to 8293e6766a884918a6b608c64543caab49870597</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2015</bug_id>
          
          <creation_ts>2019-07-24 06:55:45 +0000</creation_ts>
          <short_desc>Updata the output encoding of the Popen  function</short_desc>
          <delta_ts>2019-08-01 04:48:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8559</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-07-24 06:55:45 +0000</bug_when>
    <thetext>Not all output works in utf-8, so change the encoding to the default
out = out.decode() replace out = out.decode(encoding=&apos;utf-8&apos;, errors=&apos;ignore&apos;)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8575</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:11:41 +0000</bug_when>
    <thetext>Bug Triage: Bob, we&apos;re assigning this to you because we assume you&apos;re working on it. If not, please reassign this to the correct person.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8681</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-08-01 04:48:10 +0000</bug_when>
    <thetext>fix it in SHA-1: 8ddec24dea74a7e172cb67d5bcaf6c74db3ac6f9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2946</bug_id>
          
          <creation_ts>2020-08-31 21:28:13 +0000</creation_ts>
          <short_desc>BrotliCustomDecompressLib : Destination size and Scratch size are claimed too large</short_desc>
          <delta_ts>2021-05-28 02:12:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Miki Shindo">miki.shindo</reporter>
          <assigned_to name="Chen Yuwei">yuwei.chen</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>miki.shindo</cc>
    
    <cc>rangasai.v.chaganty</cc>
    
    <cc>yunhuax.feng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13581</commentid>
    <comment_count>0</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-08-31 21:28:13 +0000</bug_when>
    <thetext>Brotli uncompressed buffer size is retrieved through BrotliUefiDecompressGetInfo. &quot;DestinationSize&quot; and &quot;ScratchSize&quot; which are the output of BrotliUefiDecompressGetInfo are claimed too way larger than theoretically possible for platform code to secure as PEI memory.

The issue was observed on client sku platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13641</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-08 03:01:55 +0000</bug_when>
    <thetext>This is the regression issue in BaseTools BrotliCompression after Brotli is changed to submodule. BrotliCompression should store the source size and scratch buffer size into the header of the compressed binary data. But now, BrotliCompression doesn&apos;t store them. So, BrotliDecompression can&apos;t work.

To fix this issue, BrotliCompression tool main() function should be provided. It needs to support the options of -e, -d, -o file, -g gap, -q level.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13650</commentid>
    <comment_count>2</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-09-09 04:27:53 +0000</bug_when>
    <thetext>Thanks Liming. 
How should I provide the main()? I believe you refer to brotli.c under Basetools/Source/C/BrotliCompress/brotli/c/tools.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13672</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-14 20:59:53 +0000</bug_when>
    <thetext>Yes. Need to refer to previous BrotliCompression implemementation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13693</commentid>
    <comment_count>4</comment_count>
      <attachid>553</attachid>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-09-16 08:17:50 +0000</bug_when>
    <thetext>Created attachment 553
New version of the tools</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13694</commentid>
    <comment_count>5</comment_count>
      <attachid>554</attachid>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-09-16 08:19:05 +0000</bug_when>
    <thetext>Created attachment 554
Old version of the tools</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13695</commentid>
    <comment_count>6</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-09-16 08:20:15 +0000</bug_when>
    <thetext>I uploaded the file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13715</commentid>
    <comment_count>7</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-20 21:34:47 +0000</bug_when>
    <thetext>Yunhua:
  Can you help check this issue? BrotliCompression main function is required to be implemented to align to the old version tool. Old version tool can be found in the attachment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13716</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-20 21:37:15 +0000</bug_when>
    <thetext>Below compression logic is required. 


    case COMMAND_COMPRESS:
      memcpy (&amp;context_dec, &amp;context, sizeof (context));
      is_ok = CompressFiles(&amp;context);
      if (!is_ok) {
        break;
      }
      context_dec.decompress  = BROTLI_TRUE;
      context_dec.input_count = 1;
      context_dec.current_input_path = context_dec.output_path;
      context_dec.fout = tmpfile ();
      is_ok = DecompressFiles(&amp;context_dec);
      if (!is_ok) {
        break;
      }
      //
      // fill decoder header
      //
      context_dec.fout = fopen(context_dec.output_path, &quot;rb+&quot;);  /* open output_path file and add in head info */
      fwrite(&amp;input_file_length, 1, sizeof(int64_t), context_dec.fout);
      scratch_buffer_size += context.gmem * GAP_MEM_BLOCK;  /* there is a memory gap between IA32 and X64 environment*/
      scratch_buffer_size += kFileBufferSize * 2;
      fwrite(&amp;scratch_buffer_size, 1, sizeof(int64_t), context_dec.fout);
      if (fclose(context_dec.fout) != 0) {
        fprintf(stderr, &quot;failed to update ouptut file: %s\n&quot;, context_dec.output_path);
        is_ok = 0;
      }
      break;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13731</commentid>
    <comment_count>9</comment_count>
      <attachid>558</attachid>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 02:58:29 +0000</bug_when>
    <thetext>Created attachment 558
Patch to verify Brotli in Emulator</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13748</commentid>
    <comment_count>10</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 21:47:47 +0000</bug_when>
    <thetext>Yunhua, will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13763</commentid>
    <comment_count>11</comment_count>
      <attachid>559</attachid>
    <who name="">yunhuax.feng</who>
    <bug_when>2020-09-23 02:05:24 +0000</bug_when>
    <thetext>Created attachment 559
Revert Brotli compress code fix regression issue

I have tried the attached patch, can fix the Brotli compress issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13777</commentid>
    <comment_count>12</comment_count>
      <attachid>561</attachid>
    <who name="">yunhuax.feng</who>
    <bug_when>2020-09-23 21:23:07 +0000</bug_when>
    <thetext>Created attachment 561
Add BrotliCompress.c file

update patch because of we can&apos;t modify the submodule files</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13779</commentid>
    <comment_count>13</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-23 21:31:24 +0000</bug_when>
    <thetext>Yunhua: we need to write new BrotliCompress.c. We can&apos;t base on Brotli.c. New file license should be SPDX-License-Identifier: BSD-2-Clause-Patent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13978</commentid>
    <comment_count>14</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-10-15 03:23:47 +0000</bug_when>
    <thetext>Yunhua, could I ask the current status?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14678</commentid>
    <comment_count>15</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-12-28 20:38:20 +0000</bug_when>
    <thetext>Hi Yunhua,

When I verified your patch, I forgot to remove &quot;Brotli&quot; binary from BaseTool Bin folder and I’ve just figured the old “Brotli” binary was invoked instead of BrotliCompress binary at that time. I didn’t notice the binary name was changed by the patch. I am sorry about that miss.
I am facing build error actually.
Looks like the temp file AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.tmp is not generated. Could you have a look? 


Generating FVADVANCEDUNCOMPACT FV
########################################
########## [&apos;GenSec&apos;, &apos;-s&apos;, &apos;EFI_SECTION_GUID_DEFINED&apos;, &apos;-g&apos;, &apos;3D532050-5CDA-4FD0-879E-0F7F630D5AFB&apos;, &apos;-r&apos;, &apos;PROCESSING_REQUIRED&apos;, &apos;-o&apos;, &apos;s:\\Build\\AlderLakeBoardPkg\\DEBUG_VS2015x86\\FV\\Ffs\\AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.guided&apos;, &apos;s:\\Build\\AlderLakeBoardPkg\\DEBUG_VS2015x86\\FV\\Ffs\\AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.tmp&apos;]
Return Value = 2
GenSec: ERROR 0001: Error opening file
  s:\Build\AlderLakeBoardPkg\DEBUG_VS2015x86\FV\Ffs\AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.tmp
GenSec: ERROR 0001: Error opening file for reading
  s:\Build\AlderLakeBoardPkg\DEBUG_VS2015x86\FV\Ffs\AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.tmp
GenSec: ERROR 2000: Status is not successful
  Status value is 0x80000015




build.py...
 : error 7000: Failed to generate section</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14679</commentid>
    <comment_count>16</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-12-28 21:14:59 +0000</bug_when>
    <thetext>BrotliCompress is specified in tools_def.txt. It is used in build process. Original way is to use BrotliCompress.bat, new way is to use BrotliCompress.exe. So, there is no change here. You can call build with -v options to print more debug message.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14680</commentid>
    <comment_count>17</comment_count>
      <attachid>630</attachid>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-12-28 22:11:01 +0000</bug_when>
    <thetext>Created attachment 630
Build error</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14681</commentid>
    <comment_count>18</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-12-28 22:13:12 +0000</bug_when>
    <thetext>I attached the build error text file in this ticket. 

The command &quot;BrotliCompressPlatform&quot; is my batch file which just runs BrotliCompress with &quot;-q 11&quot;, but does nothing else.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15813</commentid>
    <comment_count>19</comment_count>
    <who name="Sai Chaganty">rangasai.v.chaganty</who>
    <bug_when>2021-04-28 11:47:52 +0000</bug_when>
    <thetext>Hi Yunhua/Liming, 
Has there been any update on incorporating the patch to fix the size info?

Thanks,
Sai</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15817</commentid>
    <comment_count>20</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-04-28 21:26:31 +0000</bug_when>
    <thetext>This issue has been fixed in Edk2 BaseTools. 

Your log shows BrotliCompressPlatform runs successfully. But, the compressed image is not generated. Can you manually run this tool and see what&apos;s issue here?

[&apos;BrotliCompressPlatform&apos;, &apos;-e&apos;, &apos;-o&apos;, &apos;s:\\Build\\AlderLakeBoardPkg\\DEBUG_VS2015x86\\FV\\Ffs\\AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.tmp&apos;, &apos;s:\\Build\\AlderLakeBoardPkg\\DEBUG_VS2015x86\\FV\\Ffs\\AD198BA5-C330-41CD-B097-16488328B798FVADVANCED\\AD198BA5-C330-41CD-B097-16488328B798SEC1.1.guided.dummy&apos;, &apos;-v&apos;]
Return Value = 0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16059</commentid>
    <comment_count>21</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-05-14 02:16:36 +0000</bug_when>
    <thetext>Yuwei will work on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16060</commentid>
    <comment_count>22</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-05-14 04:43:02 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/75105</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16200</commentid>
    <comment_count>23</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-28 02:12:37 +0000</bug_when>
    <thetext>Fix in edk2 9cd854e19de230cdbf5b3781d3b686861cf0bc2f</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>553</attachid>
            <date>2020-09-16 08:17:50 +0000</date>
            <delta_ts>2020-09-16 08:17:50 +0000</delta_ts>
            <desc>New version of the tools</desc>
            <filename>Newtools.7z</filename>
            <type>text/plain</type>
            <size>25904</size>
            <attacher name="Miki Shindo">miki.shindo</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>554</attachid>
            <date>2020-09-16 08:19:05 +0000</date>
            <delta_ts>2020-09-16 08:19:05 +0000</delta_ts>
            <desc>Old version of the tools</desc>
            <filename>Oldtools.7z</filename>
            <type>text/plain</type>
            <size>26202</size>
            <attacher name="Miki Shindo">miki.shindo</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>558</attachid>
            <date>2020-09-22 02:58:29 +0000</date>
            <delta_ts>2020-09-22 02:58:29 +0000</delta_ts>
            <desc>Patch to verify Brotli in Emulator</desc>
            <filename>0001-EmulatorPkg-Add-the-test-for-BrotliCompression-usage.patch</filename>
            <type>text/plain</type>
            <size>2956</size>
            <attacher>gaoliming</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>559</attachid>
            <date>2020-09-23 02:05:24 +0000</date>
            <delta_ts>2020-09-23 02:05:24 +0000</delta_ts>
            <desc>Revert Brotli compress code fix regression issue</desc>
            <filename>0001-BaseTools-Brotli-Fix-Brotli-uncompress-regression-is.patch</filename>
            <type>text/plain</type>
            <size>9833</size>
            <attacher>yunhuax.feng</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>561</attachid>
            <date>2020-09-23 21:23:07 +0000</date>
            <delta_ts>2020-09-23 21:23:07 +0000</delta_ts>
            <desc>Add BrotliCompress.c file</desc>
            <filename>0001-BaseTools-BrotliCompress-Fix-BrotliCompress-regressi.patch</filename>
            <type>text/plain</type>
            <size>42725</size>
            <attacher>yunhuax.feng</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>630</attachid>
            <date>2020-12-28 22:11:01 +0000</date>
            <delta_ts>2020-12-28 22:11:01 +0000</delta_ts>
            <desc>Build error</desc>
            <filename>BrotliBuildError.txt</filename>
            <type>text/plain</type>
            <size>53569</size>
            <attacher name="Miki Shindo">miki.shindo</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2716</bug_id>
          
          <creation_ts>2020-05-13 12:30:20 +0000</creation_ts>
          <short_desc>MdePkg/Include/Protocol/DevicePath.h lacks definitions for ACPI NVDIMM Device Path</short_desc>
          <delta_ts>2020-05-22 04:03:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="MacKevin Fey">mackevin.fey</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12495</commentid>
    <comment_count>0</comment_count>
    <who name="MacKevin Fey">mackevin.fey</who>
    <bug_when>2020-05-13 12:30:20 +0000</bug_when>
    <thetext>MdePkg/Include/Protocol/DevicePath.h lacks definitions for ACPI NVDIMM Device Path.

Patch code below:

From c915b4b352a7e56f0889941d5a476ce789970f40 Mon Sep 17 00:00:00 2001
From: James Anandraj &lt;james.sushanth.anandraj@intel.com&gt;
Date: Thu, 15 Aug 2019 16:23:26 -0700
Subject: [PATCH] Add ACPI NVDIMM Device

---
 MdePkg/Include/Protocol/DevicePath.h | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

diff --git a/MdePkg/Include/Protocol/DevicePath.h b/MdePkg/Include/Protocol/DevicePath.h
index 1779c35..9d035ad 100644
--- a/MdePkg/Include/Protocol/DevicePath.h
+++ b/MdePkg/Include/Protocol/DevicePath.h
@@ -297,6 +297,21 @@ typedef struct {
                       (((_Type)                   &amp; 0xf) &lt;&lt; 8)  |  \
                       (((_Port)                   &amp; 0xf) &lt;&lt; 4)  |  \
                        ((_Index)                  &amp; 0xf) ))
+///
+/// ACPI NVDIMM Device Path SubType.
+///
+#define ACPI_NVDIMM_DP               0x04
+
+///
+///
+typedef struct {
+  EFI_DEVICE_PATH_PROTOCOL        Header;
+  ///
+  /// NFIT Device Handle, the _ADR of the NVDIMM device.
+  /// The value of this field comes from Section 9.20.3 of the ACPI 6.2A specification.
+  ///
+  UINT32                          NFITDeviceHandle;
+} ACPI_NVDIMM_DEVICE_PATH;
 
 ///
 /// Messaging Device Paths.
--
2.21.0.windows.1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12541</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 21:54:55 +0000</bug_when>
    <thetext>Check UEFI spec, and check the latest edk2 with new spec change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12544</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 22:07:33 +0000</bug_when>
    <thetext>Check whether it has been fixed in the latest edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12549</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 23:03:10 +0000</bug_when>
    <thetext>Zhiguang: can you help check this definition? If yes, please help send the patch to edk2 mail list?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12665</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-22 04:03:05 +0000</bug_when>
    <thetext>Fix it at 8f39da712fd1760f5e526d8d2637bbdf1a14ea93</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2609</bug_id>
          
          <creation_ts>2020-03-19 18:40:14 +0000</creation_ts>
          <short_desc>SavedState is not sticky in UnitTestFrameworkPkg</short_desc>
          <delta_ts>2020-04-25 22:40:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11745</commentid>
    <comment_count>0</comment_count>
      <attachid>490</attachid>
    <who name="">kun.qin</who>
    <bug_when>2020-03-19 18:40:14 +0000</bug_when>
    <thetext>Created attachment 490
Proposed change to fix this issue

SavedState is not sticky in UnitTestFrameworkPkg:
The copied pointer (SavedState) will be updated by LoadUnitTestCache call. But the change of SavedState will not update source pointer, which is NewFramework-&gt;SavedState in this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11822</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-24 22:04:46 +0000</bug_when>
    <thetext>The issue is in Shell base unit. Guomin: please check this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11936</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-31 02:52:17 +0000</bug_when>
    <thetext>Post patch at message https://edk2.groups.io/g/devel/message/56724.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12109</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:12:54 +0000</bug_when>
    <thetext>Is the patch reviewed or not?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12163</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-08 21:32:10 +0000</bug_when>
    <thetext>Hi liming,

The review is on going.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12319</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-25 22:40:42 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/c5c5c980dbaadf32193ac5e4ed2a35b665e0c76e</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>490</attachid>
            <date>2020-03-19 18:40:14 +0000</date>
            <delta_ts>2020-03-19 18:40:14 +0000</delta_ts>
            <desc>Proposed change to fix this issue</desc>
            <filename>0001-SavedState-is-not-sticky-copied-pointer-update-will-.patch</filename>
            <type>application/octet-stream</type>
            <size>1785</size>
            <attacher>kun.qin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2035</bug_id>
          
          <creation_ts>2019-07-30 23:16:38 +0000</creation_ts>
          <short_desc>Remove pkgs that are already deleted from Bugzilla:Package list</short_desc>
          <delta_ts>2019-08-08 20:45:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Web Content</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8647</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-07-30 23:16:38 +0000</bug_when>
    <thetext>Some packages were removed in the first half of 2019, we could refresh the package list (shown in the Package list when submitting the Bugzilla) to reflect the latest package status.

Below packages can be removed from the list:
CorebootModulePkg
CorebootPayloadPkg
DuetPkg
EdkCompatibilityPkg
EdkShellBinPkg
EdkShellPkg
FatBinPkg
IntelFrameworkModulePkg
IntelFrameworkPkg
IntelFspPkg
IntelFspWrapperPkg
Nt32Pkg
UnixPkg

UefiPayloadPkg was added and it has been already in the package list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8894</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:34:56 +0000</bug_when>
    <thetext>Bug Triage: Mike is working on this. We won&apos;t &apos;delete&apos; as we want historical records, but hiding is probably possible.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8901</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-08 20:45:26 +0000</bug_when>
    <thetext>Set Package fields attribute &quot;Enabled for bugs&quot; to No for these fields.

Also did ShellBinPkg that is no longer in edk2 repo.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2972</bug_id>
          
          <creation_ts>2020-09-17 01:47:20 +0000</creation_ts>
          <short_desc>Incremental build issue for included ASI file&apos;s deletion</short_desc>
          <delta_ts>2020-11-10 00:54:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3052</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Chen Yuwei">yuwei.chen</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>Mingyuex.Liang</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13705</commentid>
    <comment_count>0</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-09-17 01:47:20 +0000</bug_when>
    <thetext>When using incremental build to delete an included xxx.asi file from the ASL file, the xxx.asl.trim.deps file generated by previous build process will not be deleted from the OUTPUT directory, which caused the dependency file still include the xxx.asl.trim.deps file as it shown &quot;
!IF EXIST(xxx.asl.trim.deps)
!INCLUDE xxx.asl.trim.deps
!ENDIF&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13755</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 22:12:06 +0000</bug_when>
    <thetext>Bob: please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14023</commentid>
    <comment_count>2</comment_count>
    <who name="MingYue Liang">Mingyuex.Liang</who>
    <bug_when>2020-10-19 03:50:48 +0000</bug_when>
    <thetext>Mingyue will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14251</commentid>
    <comment_count>3</comment_count>
    <who name="MingYue Liang">Mingyuex.Liang</who>
    <bug_when>2020-11-06 01:17:46 +0000</bug_when>
    <thetext>patch link in https://edk2.groups.io/g/devel/message/67077</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14275</commentid>
    <comment_count>4</comment_count>
    <who name="MingYue Liang">Mingyuex.Liang</who>
    <bug_when>2020-11-08 21:31:47 +0000</bug_when>
    <thetext>Latest patch link in https://edk2.groups.io/g/devel/message/67133</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14289</commentid>
    <comment_count>5</comment_count>
    <who name="MingYue Liang">Mingyuex.Liang</who>
    <bug_when>2020-11-10 00:54:03 +0000</bug_when>
    <thetext>commit-ID:09af9bd9be2d3e31bba979f8cf6446017b0b863e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2857</bug_id>
          
          <creation_ts>2020-07-20 16:49:17 +0000</creation_ts>
          <short_desc>OvmfPkg, ArmVirtPkg: enable HttpDynamicCommand</short_desc>
          <delta_ts>2020-10-01 07:46:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>2860</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="Vladimir Olovyannikov">vladimir.olovyannikov</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13132</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2020-07-20 16:49:17 +0000</bug_when>
    <thetext>Based on comments received from edk2 platform maintainers and reviewers,
it seems it makes sense to include HttpDynamicCommand (http Shell command) into a future EDK2 release.
HttpDynamicCommand implements an http/https client to download files from an http/https server using http UEFI Shell command (or UEFI http app). By Laszlo advice, this is going to be included in ArmVirtPkg and OvmfPkg packages.
This will be done after approval of HttpDynamicCommand by Network and Shell maintainers.
HttpDynamicCommand code is under review. The history page is here:

https://www.mail-archive.com/devel@edk2.groups.io/msg23163.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13158</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-22 15:33:41 +0000</bug_when>
    <thetext>This BZ should track the inclusion of the new dynamic command in the ArmVirtPkg and OvmfPkg platforms. Therefore this BZ depends on the main feature, tracked by bug 2860.

Patches on the list, from Vladimir:

* [edk2-devel] [PATCH 0/2]
  Enable HttpDynamicCommand for ArmVirtPkg and OvmfPkg

  https://edk2.groups.io/g/devel/message/62986
  http://mid.mail-archive.com/20200721172305.9011-1-vladimir.olovyannikov@broadcom.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13165</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-23 09:02:36 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v2 0/2] Enable HttpDynamicCommand for ArmVirtPkg and OvmfPkg

https://edk2.groups.io/g/devel/message/63148
http://mid.mail-archive.com/20200722205434.4348-1-vladimir.olovyannikov@broadcom.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13859</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-01 07:46:03 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; [edk2-devel] [PATCH v2 0/2] Enable HttpDynamicCommand for ArmVirtPkg and
&gt; OvmfPkg
&gt; 
&gt; https://edk2.groups.io/g/devel/message/63148
&gt; http://mid.mail-archive.com/20200722205434.4348-1-vladimir.
&gt; olovyannikov@broadcom.com

Merged in commit range d8ab884fe9b4..2d8ca4f90eae, via &lt;https://github.com/tianocore/edk2/pull/980/&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2738</bug_id>
          
          <creation_ts>2020-05-20 22:14:08 +0000</creation_ts>
          <short_desc>CoffeelakeSiliconPkg: Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2021-03-03 00:39:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>CoffelakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12587</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:14:08 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12618</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 05:38:34 +0000</bug_when>
    <thetext>Assigning to package maintainer/reviewer based on &quot;GetMaintainer.py&quot; output.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12730</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-26 22:02:07 +0000</bug_when>
    <thetext>CoffeelakeSiliconPkg is not the platform package. It should not be impacted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15181</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-03-03 00:39:58 +0000</bug_when>
    <thetext>SiliconPkg does not involve variable access so not related.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2527</bug_id>
          
          <creation_ts>2020-02-13 20:36:43 +0000</creation_ts>
          <short_desc>FCE tool doesn&apos;t find the last FV with SEC module as BFV image</short_desc>
          <delta_ts>2020-10-10 01:41:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="yunhua feng">fengyunhua</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>fengyunhua</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11256</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-13 20:36:43 +0000</bug_when>
    <thetext>Here is FCE tool https://github.com/tianocore/edk2-staging/tree/FceFmmt. One BIOS image may have more than FVs with SEC module. FCE tool should find the latest FV with SEC module as BFV image.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11257</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-13 20:37:16 +0000</bug_when>
    <thetext>Yunhua will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13935</commentid>
    <comment_count>2</comment_count>
    <who name="yunhua feng">fengyunhua</who>
    <bug_when>2020-10-10 01:41:30 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2-staging/tree/FceFmmt 
SHA-1: 37a19527ced332176e0b009b73e540ab39940bfc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2996</bug_id>
          
          <creation_ts>2020-10-06 00:25:55 +0000</creation_ts>
          <short_desc>EccCheck plugin should not calculate BaseTools path from workspace</short_desc>
          <delta_ts>2021-11-22 19:59:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13878</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-10-06 00:25:55 +0000</bug_when>
    <thetext>Right now the plugin is attempting to locate config files by looking in BaseTools, but to get to BaseTools it is calculating &quot;workspace + / + BaseTools&quot;.

This is not a valid assumption in the plugin.

The environment dictionary should already have a path to BaseTools set in the EDK_TOOLS_PATH variable.

Also, BaseTools/Source/Python should already be on the PyPath as generated by the Stuart CI environment.

Not sure about the other references to edk2_path and whether they are valid.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13962</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-13 21:54:29 +0000</bug_when>
    <thetext>Bob: can you check it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17799</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-11-22 19:59:07 +0000</bug_when>
    <thetext>This issue was fixed by Pierre Gondois &lt;Pierre.Gondois@arm.com&gt; on this commit
https://github.com/tianocore/edk2/commit/22fe311bd20f660186a032ffa8a655a840ab85dd#diff-e964866161b4281a4963987a8647a6d0e8931df2f4833ab4db7589b1d29549c3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2410</bug_id>
          
          <creation_ts>2019-12-10 01:49:31 +0000</creation_ts>
          <short_desc>FvFspT Should Be Installed in PeiReportFvLib</short_desc>
          <delta_ts>2022-07-19 14:47:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Miki Shindo">miki.shindo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10646</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-12-10 01:49:31 +0000</bug_when>
    <thetext>TPM measurements in PEI are performed at two points by Tcg2Pei.

 1. In the module shadow (post-memory) for the BFV
 2. In a FV Info PPI notification function

Currently, FvpFspT is not installed so it is not measured. However, since this code is executed it should be measured. This should be resolved in PeiReportFvLib.

Note that while an issue, measured boot is currently not supported in any Intel open source board packages.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10654</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-12-10 13:11:50 +0000</bug_when>
    <thetext>Assigned to Miki</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10899</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-15 18:15:12 +0000</bug_when>
    <thetext>Miki, please give an update</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19268</commentid>
    <comment_count>3</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-07-19 14:39:58 +0000</bug_when>
    <thetext>I left this ticket open long though I merged the patch to PeiReportFvLib. 
Mark this as &quot;RESOLVED&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19269</commentid>
    <comment_count>4</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-07-19 14:47:01 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2-platforms/commit/974ddebcf191e32c5eb2f52e5ef85423f4de9819</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2891</bug_id>
          
          <creation_ts>2020-08-12 01:02:18 +0000</creation_ts>
          <short_desc>Add support for shadowing all microcode patch to memory.</short_desc>
          <delta_ts>2020-10-27 22:03:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Aaron Li">aaron.li</reporter>
          <assigned_to name="Aaron Li">aaron.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13379</commentid>
    <comment_count>0</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-08-12 01:02:18 +0000</bug_when>
    <thetext>Current solution of shadowing microcode patch to memory would check the microcode with IsMicrocodePatchNeedLoad() in Silicon\Intel\IntelSiliconPkg\Feature\ShadowMicrocode\ShadowMicrocodePei.c:

&gt;  Check the &apos;ProcessorSignature&apos; and &apos;ProcessorFlags&apos; of the microcode
&gt;  patch header with the CPUID and PlatformID of the processors within
&gt;  system to decide if it will be copied into memory.

In a scenario that all microcode patch should be shadowed into memory, there should be a switch to ignore the check.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13441</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-18 21:57:10 +0000</bug_when>
    <thetext>Aaron, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14128</commentid>
    <comment_count>2</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-10-27 22:03:20 +0000</bug_when>
    <thetext>fixed @ f406a036cfc7c80be0335a20ff94303dd4a3e7ae</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2768</bug_id>
          
          <creation_ts>2020-05-27 10:07:05 +0000</creation_ts>
          <short_desc>Add UEFI 2.8/2.8A definition in MdePkg</short_desc>
          <delta_ts>2020-05-27 10:09:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12745</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-27 10:07:05 +0000</bug_when>
    <thetext>UEFI2.8/UEFI2.8A has been published. This track requests to add UEFI2.8/2.8A definition in MdePkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12746</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-27 10:08:00 +0000</bug_when>
    <thetext>AMI contributes the patch for this request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12747</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-27 10:09:03 +0000</bug_when>
    <thetext>Fix this issue in 
https://github.com/tianocore/edk2/pull/621
https://github.com/tianocore/edk2/pull/635</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2079</bug_id>
          
          <creation_ts>2019-08-13 00:06:47 +0000</creation_ts>
          <short_desc>AutoGen file saving and copying report IOError occasionally if work with multi-process</short_desc>
          <delta_ts>2019-08-29 15:18:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>steven.shi</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8970</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-13 00:06:47 +0000</bug_when>
    <thetext>We see several times that the CopyFileOnChange() and SaveFileOnChange() functions of BaseTools\Source\Python\Common\Misc.py raise the IOError when build in multi-process, especially enable the build cache with multi-process together. 
The CopyFileOnChange() and SaveFileOnChange() might be invoked in multiple sub-processes simultaneously, and it&apos;s better to add a global lock to sync these file access functions invoking.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8971</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-13 00:08:34 +0000</bug_when>
    <thetext>Confirm and take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8973</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-13 01:45:02 +0000</bug_when>
    <thetext>This issue is only seen in windows build</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9276</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 17:46:30 +0000</bug_when>
    <thetext>Fixed at 94459080c118049aba927ec0444ba5b750b7d2c9?

Take care of your assigned bugs, please!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9332</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:31:31 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Fixed at 94459080c118049aba927ec0444ba5b750b7d2c9?

To clarify, the question is for Steven. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9352</commentid>
    <comment_count>5</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-27 21:17:45 +0000</bug_when>
    <thetext>Yes. This issue is fixed at 94459080c118049aba927ec0444ba5b750b7d2c9.

Laszlo, Thank you to notify.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2787</bug_id>
          
          <creation_ts>2020-06-08 04:57:46 +0000</creation_ts>
          <short_desc>MdeModulePkg/Universal/StatusCodeHandler: do not output \n\r for string data</short_desc>
          <delta_ts>2020-06-28 02:57:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12813</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-08 04:57:46 +0000</bug_when>
    <thetext>When output string data through serial port, will not ouput \n\r now.
Caller can output several data in one line, and output \n\r when needed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12814</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-08 04:58:33 +0000</bug_when>
    <thetext>I will summit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12841</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-10 02:35:31 +0000</bug_when>
    <thetext>A patch is already submitted for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12961</commentid>
    <comment_count>3</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-28 02:57:52 +0000</bug_when>
    <thetext>The patch was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2568</bug_id>
          
          <creation_ts>2020-03-04 21:05:58 +0000</creation_ts>
          <short_desc>PcdValueInit generation should copy the common PcdValueCommon.c in its output directory</short_desc>
          <delta_ts>2020-03-11 22:23:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11538</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-04 21:05:58 +0000</bug_when>
    <thetext>PcdValueInit shares the same Edk2\BaseTools\Source\C\PcdValueCommon.c. To avoid the conflict, it should copy this source file to its output directory, then compile it. If so, PcdValueCommon.obj file will be private for PcdValueInit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11539</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-04 21:06:27 +0000</bug_when>
    <thetext>Bob takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11616</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-08 22:51:47 +0000</bug_when>
    <thetext>Assign Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11629</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-03-09 03:18:10 +0000</bug_when>
    <thetext>Patch link is https://edk2.groups.io/g/devel/message/55677</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11669</commentid>
    <comment_count>4</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-03-11 22:23:59 +0000</bug_when>
    <thetext>fixed it in 484b1534ed8fbee17cab958627e3707554843770</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2459</bug_id>
          
          <creation_ts>2020-01-11 03:20:27 +0000</creation_ts>
          <short_desc>Buffer double free caused use-after-free assert</short_desc>
          <delta_ts>2020-11-25 22:39:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to>kun.qin</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>glin</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>macarl</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10856</commentid>
    <comment_count>0</comment_count>
      <attachid>448</attachid>
    <who name="">kun.qin</who>
    <bug_when>2020-01-11 03:20:27 +0000</bug_when>
    <thetext>Created attachment 448
Proposed patch

The issue is in VerifyEKUsInPkcs7Signature routine of CryptoPkg/Library/BaseCryptLib/Pk/CryptPkcs7VerifyEku.c:

At the &quot;Exit&quot; portion of this routine, it is using OpenSLL functions to free both SignerCert and Pkcs7 after verification (when applicable). But SignerCert is part of Pkcs7 instance, if both have valid content. Thus this function call will cause page fault if use-after-free guard is enabled.

The proposed fix is to free Pkcs7 only when it comes to the exit of this routine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13887</commentid>
    <comment_count>1</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-06 23:59:28 +0000</bug_when>
    <thetext>What&apos;s the status on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13959</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-13 21:48:28 +0000</bug_when>
    <thetext>Kun: please send the patch to edk2 mail list for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14063</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-21 09:31:35 +0000</bug_when>
    <thetext>Is this a security issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14064</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-21 09:40:35 +0000</bug_when>
    <thetext>Series on the list:

[edk2-devel] [PATCH v1 0/1] CryptoPkg: BaseCryptLib: Fix buffer double free in CryptPkcs7VerifyEku
[edk2-devel] [PATCH v1 1/1] CryptoPkg: BaseCryptLib: Fix buffer double free in CryptPkcs7VerifyEku


https://edk2.groups.io/g/devel/message/66468
https://edk2.groups.io/g/devel/message/66469

msgids:
&lt;MWHPR06MB31028BF719295103D1C4C73BF31C0@MWHPR06MB3102.namprd06.prod.outlook.com&gt;
&lt;MWHPR06MB31028D4F9BFDDCFC15F4A5DAF31C0@MWHPR06MB3102.namprd06.prod.outlook.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14065</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-21 09:46:03 +0000</bug_when>
    <thetext>Does this issue come from commit 23c3178c4d45 (&quot;CryptoPkg/BaseCryptLib: Add new API VerifyEKUsInPkcs7Signature&quot;, 2019-04-18) / bug 1402?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14066</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-21 09:50:05 +0000</bug_when>
    <thetext>Per Gary&apos;s message here:

  [edk2-devel] Any plan to enforce the x509 EKU check?

  https://edk2.groups.io/g/devel/message/65716
  http://mid.mail-archive.com/20200929084328.GR8874@GaryWorkstation

does this bug have a practical impact? Is the impact platform-dependent?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14067</commentid>
    <comment_count>7</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-10-21 14:34:30 +0000</bug_when>
    <thetext>The issue indeed comes from commit 23c3178c4d45.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14068</commentid>
    <comment_count>8</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-10-21 14:42:08 +0000</bug_when>
    <thetext>The bug could result in potential memory corruption, so the impact would be platform-dependent.

When OpenSSL conducts PKCS7_free, it will erase the content for security reason. If the freed SignerCert memory is somehow assigned to other components to use before &quot;PKCS7_free (Pkcs7);&quot;, that memory will be tampered and possibly zeroed during the following PKCS7_free call.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14343</commentid>
    <comment_count>9</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-11-12 18:23:14 +0000</bug_when>
    <thetext>Are there any other feedbacks other than patch style check (line end, etc.)?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14348</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-13 14:54:57 +0000</bug_when>
    <thetext>Hello Kun Qin,

please ping the CryptoPkg maintainers on the list, in the patch thread.

(I agree 100% that it&apos;s unacceptable for maintainers to take so long to provide feedback, it&apos;s just that they should be pinged on the list, in the patch thread, not in the bugzilla ticket.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14427</commentid>
    <comment_count>11</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-11-25 22:24:49 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/1147

githash: 21f984cedec1c613218480bc3eb5e92349a7a812</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14428</commentid>
    <comment_count>12</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-11-25 22:39:42 +0000</bug_when>
    <thetext>merged</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>448</attachid>
            <date>2020-01-11 03:20:27 +0000</date>
            <delta_ts>2020-01-11 03:20:27 +0000</delta_ts>
            <desc>Proposed patch</desc>
            <filename>0001-Remove-double-free-caused-use-after-free-assert.patch</filename>
            <type>text/plain</type>
            <size>992</size>
            <attacher>kun.qin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2340</bug_id>
          
          <creation_ts>2019-11-13 16:38:30 +0000</creation_ts>
          <short_desc>In-place binary patching of flash performed during SEC phase</short_desc>
          <delta_ts>2020-05-11 16:07:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=849</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2198</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter>thomas.lendacky</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10417</commentid>
    <comment_count>0</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2019-11-13 16:38:30 +0000</bug_when>
    <thetext>Commit 2db0ccc2d7fe (&quot;UefiCpuPkg: Update CpuExceptionHandlerLib pass XCODE5 tool chain&quot;) introduced binary patching into AsmGetTemplateAddressMap() that is performed when InitializeCpuExceptionHandlers() is called.

CPU exception handling is allowed during SEC and this results in attempted binary patching of flash.

The proposed Ovmf SEV-ES support requires CPU exception handling during SEC, but cannot support the modification of flash.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10438</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 20:17:37 +0000</bug_when>
    <thetext>Quick solution is to create two version nasm files. One is for common one, another is for XCODE5 tool chain. 

Request new BZ to remove duplication code logic</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12279</commentid>
    <comment_count>2</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-04-22 11:36:20 +0000</bug_when>
    <thetext>I haven&apos;t seen any work on this and it will be needed before the SEV-ES support can be merged.

I&apos;d be glad to do this, but I&apos;m unsure of the method to use to select one file over another within an .inf file based on the XCODE5 tool chain. I&apos;d like to avoid creating new .inf files if possible.

Thoughts?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12308</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-24 05:06:00 +0000</bug_when>
    <thetext>Hi Tom,

I had written up my proposal here:

http://mid.mail-archive.com/43b303eb-fd74-7480-aa6d-6907300af3e0@redhat.com

(Alternative link to the same: &lt;https://edk2.groups.io/g/devel/message/48808&gt;.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12323</commentid>
    <comment_count>4</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-04-27 10:09:15 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Hi Tom,
&gt; 
&gt; I had written up my proposal here:
&gt; 
&gt; http://mid.mail-archive.com/43b303eb-fd74-7480-aa6d-6907300af3e0@redhat.com
&gt; 
&gt; (Alternative link to the same:
&gt; &lt;https://edk2.groups.io/g/devel/message/48808&gt;.)

Thanks Laszlo, I remember that. Liming didn&apos;t seem like he was happy with that solution, though, so I&apos;m wondering what the best course of action is.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12326</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-28 09:18:19 +0000</bug_when>
    <thetext>(In reply to thomas.lendacky from comment #4)
&gt; (In reply to Laszlo Ersek from comment #3)
&gt; &gt; Hi Tom,
&gt; &gt; 
&gt; &gt; I had written up my proposal here:
&gt; &gt; 
&gt; &gt; http://mid.mail-archive.com/43b303eb-fd74-7480-aa6d-6907300af3e0@redhat.com
&gt; &gt; 
&gt; &gt; (Alternative link to the same:
&gt; &gt; &lt;https://edk2.groups.io/g/devel/message/48808&gt;.)
&gt; 
&gt; Thanks Laszlo, I remember that. Liming didn&apos;t seem like he was happy with
&gt; that solution, though,

That&apos;s how I remember it too. But:

&gt; so I&apos;m wondering what the best course of action is.

I don&apos;t really accept that &quot;we can&apos;t fix &lt;foo&gt;, so we shouldn&apos;t fix &lt;bar&gt; either, in spite of &lt;bar&gt; being used a lot more frequently&quot;.

I wouldn&apos;t let &quot;perfect&quot; get in the way of &quot;good&quot;. OVMF already loses a bit of functionality when it is built with XCODE (see &quot;TftpDynamicCommand&quot; in the DSC files). If you have the time, perhaps you can propose a short patch set (in isolation from SEV-ES) for this BZ to the mailing list, and then we can discuss this problem again, with better visibility (on the list) than in this BZ.

Yes, this might easily turn into wasted work. Sorry, I can&apos;t propose anything better. Sometimes patches need to be posted so that reviewers can understand a &quot;what if&quot; situation better. Your comment#2 here is from 6 days ago, and it&apos;s still only me providing feedback. :/

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12354</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-29 12:36:38 +0000</bug_when>
    <thetext>I think to add more INF files is the simple way. The different INF files have the different sources for the different purpose. It is fully supported in EDKII.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12374</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 18:17:31 +0000</bug_when>
    <thetext>V1 series on the list, from Tom:

[edk2-devel] [PATCH 0/4] XCODE5 toolchain binary patching fix
http://mid.mail-archive.com/cover.1588364261.git.thomas.lendacky@amd.com
https://edk2.groups.io/g/devel/message/58520</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12436</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-06 14:40:56 +0000</bug_when>
    <thetext>v2:

[edk2-devel] [PATCH v2 0/3] XCODE5 toolchain binary patching fix
http://mid.mail-archive.com/cover.1588782781.git.thomas.lendacky@amd.com
https://edk2.groups.io/g/devel/message/58719</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12446</commentid>
    <comment_count>9</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-05-08 00:31:18 +0000</bug_when>
    <thetext>v3:

[edk2-devel] [PATCH v3 0/3] XCODE5 toolchain binary patching fix
https://www.mail-archive.com/devel@edk2.groups.io/msg19547.html
https://edk2.groups.io/g/devel/message/58786</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12474</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-11 16:07:20 +0000</bug_when>
    <thetext>(In reply to thomas.lendacky from comment #9)
&gt; v3:
&gt; 
&gt; [edk2-devel] [PATCH v3 0/3] XCODE5 toolchain binary patching fix
&gt; https://www.mail-archive.com/devel@edk2.groups.io/msg19547.html
&gt; https://edk2.groups.io/g/devel/message/58786

Merged via &lt;https://github.com/tianocore/edk2/pull/602&gt;; commit range c8543b8d830d..9378310dd877.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2016</bug_id>
          
          <creation_ts>2019-07-24 07:01:44 +0000</creation_ts>
          <short_desc>Added arch output to build report</short_desc>
          <delta_ts>2019-08-01 04:48:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8560</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-07-24 07:01:44 +0000</bug_when>
    <thetext>Added arch output to build report so it&apos;s easy to tell
which arch is being generated. Useful when multiple versions
of a single module is being emitted for multiple archs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8574</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:10:50 +0000</bug_when>
    <thetext>Bug Triage: Code change submitted to list:
https://edk2.groups.io/g/devel/message/44372?p=,,,20,0,0,0::Created,,arch,20,2,0,32594597</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8682</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-08-01 04:48:14 +0000</bug_when>
    <thetext>fix it in SHA-1: 101dc9e257d6a481c47b1662de8567bf6b818b9c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2947</bug_id>
          
          <creation_ts>2020-09-01 05:26:02 +0000</creation_ts>
          <short_desc>overflow happens when calculating memory size</short_desc>
          <delta_ts>2020-09-24 04:04:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wenyi, Xie">xiewenyi0201</reporter>
          <assigned_to name="Wenyi, Xie">xiewenyi0201</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13585</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2020-09-01 05:26:02 +0000</bug_when>
    <thetext>When calculating memory regions and store the information in the gSystemMemory in file WinHost.c, the code below will cause overflow, because _wtoi (MemorySizeStr) return an int value and SIZE_1MB is also an int value, if MemorySizeStr is lager for example 2048, then result of multiplication will overflow.

for (Index = 0, Done = FALSE; !Done; Index++) {
    //
    // Save the size of the memory and make a Unicode filename SystemMemory00, ...
    //
    gSystemMemory[Index].Size = _wtoi (MemorySizeStr) * SIZE_1MB;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13616</commentid>
    <comment_count>1</comment_count>
      <attachid>547</attachid>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2020-09-03 22:29:11 +0000</bug_when>
    <thetext>Created attachment 547
v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13640</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-07 21:33:38 +0000</bug_when>
    <thetext>The patch has been sent https://edk2.groups.io/g/devel/message/64889</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13782</commentid>
    <comment_count>3</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2020-09-24 04:04:35 +0000</bug_when>
    <thetext>Pushed dd5c7e3c5282b084daa5bbf0ec229cec699b2c17</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>547</attachid>
            <date>2020-09-03 22:29:11 +0000</date>
            <delta_ts>2020-09-03 22:29:43 +0000</delta_ts>
            <desc>v1</desc>
            <filename>v1.rar</filename>
            <type>text/plain</type>
            <size>1311</size>
            <attacher name="Wenyi, Xie">xiewenyi0201</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2836</bug_id>
          
          <creation_ts>2020-07-03 11:00:59 +0000</creation_ts>
          <short_desc>Enhance PatchChecker to skip Tag line in the commit message</short_desc>
          <delta_ts>2020-09-06 20:45:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13037</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-03 11:00:59 +0000</bug_when>
    <thetext>If user name is too long, Signed-off-by line is too long and exceeds 80 characters requirement. But, it is valid. For example: Signed-off-by: KrishnadasX Veliyathuparambil Prakashan &lt;krishnadasx.veliyathuparambil.prakashan@intel.com&gt;


So, I suggest to enhance PatchCheck.py and skip the check for the lines with Signed-off-by, Acked-by:, Reviewed-by:, Tested-By:, and Cc:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13038</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-03 11:02:02 +0000</bug_when>
    <thetext>Shenglei takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13144</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-07-21 02:38:01 +0000</bug_when>
    <thetext>code review link: https://edk2.groups.io/g/devel/message/62647</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13623</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-06 20:45:27 +0000</bug_when>
    <thetext>Merge @3d9d66ad760b67bfdfb5b4b8e9b34f6af6c45935</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2717</bug_id>
          
          <creation_ts>2020-05-13 16:45:51 +0000</creation_ts>
          <short_desc>MdePkg/Include/Protocol/DevicePath.h lacks definitions for NVDIMM Namespace Device Path</short_desc>
          <delta_ts>2020-05-19 23:01:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="MacKevin Fey">mackevin.fey</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12496</commentid>
    <comment_count>0</comment_count>
    <who name="MacKevin Fey">mackevin.fey</who>
    <bug_when>2020-05-13 16:45:51 +0000</bug_when>
    <thetext>MdePkg/Include/Protocol/DevicePath.h lacks definitions for NVDIMM Namespace Device Path.

Patch code below: 

From ec9d87fa773f5031b114654d9abc8cd4b2a6368e Mon Sep 17 00:00:00 2001
From: James Anandraj &lt;james.sushanth.anandraj@intel.com&gt;
Date: Thu, 15 Aug 2019 16:16:26 -0700
Subject: [PATCH] Add NVDIMM namespace device patch

---
 MdePkg/Include/Protocol/DevicePath.h | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/MdePkg/Include/Protocol/DevicePath.h b/MdePkg/Include/Protocol/DevicePath.h
index aaec0a6..1779c35 100644
--- a/MdePkg/Include/Protocol/DevicePath.h
+++ b/MdePkg/Include/Protocol/DevicePath.h
@@ -947,7 +947,17 @@ typedef struct {
   ///
   UINT8                           SSId[32];
 } WIFI_DEVICE_PATH;
-
+///
+/// NVDIMM Namespace Device Path SubType.
+///
+#define MSG_NVDIMM_NAMESPACE_DP   0x20
+typedef struct {
+  EFI_DEVICE_PATH_PROTOCOL        Header;
+  ///
+  /// Namespace unique label identifier GUID
+  ///
+  EFI_GUID                        Guid;
+} NVDIMM_NAMESPACE_DEVICE_PATH;
 ///
 /// Bluetooth LE Device Path SubType.
 ///
--
2.21.0.windows.1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12540</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 21:53:23 +0000</bug_when>
    <thetext>Double check UEFI spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12547</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 23:01:27 +0000</bug_when>
    <thetext>Fix it at edk2 f8edb7e998695b2bfc57f35184d9a8f1a882b0fa</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2036</bug_id>
          
          <creation_ts>2019-07-31 02:23:35 +0000</creation_ts>
          <short_desc>Fix warning: Module MetaFile [Sources] is missing local header!</short_desc>
          <delta_ts>2019-08-18 22:48:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8649</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-07-31 02:23:35 +0000</bug_when>
    <thetext>BZ 1804 adds a checking for Sources section in INF file. It reports the warning for the missing source files in module INF file. I think they should be fixed for those packages if any warnings are found. 

CryptoPkg, FatPkg, FmpDevicePkg, MdeModulePkg, MdePkg, PcAtChipsetPkg, SecurityPkg, SignedCapsulePkg, SourceLevelDebugPkg, UefiCpuPkg, NetworkPkg, ShellPkg, IntelFsp2Pkg, IntelFsp2WrapperPkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8650</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-07-31 02:26:14 +0000</bug_when>
    <thetext>Shenglei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9023</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-08-16 00:48:18 +0000</bug_when>
    <thetext>Pushed@8906f076de35b222a7d62bcf6ed1a4a2498a5791
Reviewed@https://edk2.groups.io/g/devel/message/45704</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9024</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-08-16 00:50:56 +0000</bug_when>
    <thetext>Commit 8906f076de35b222a7d62bcf6ed1a4a2498a5791 is for CyptoPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9049</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-18 22:48:37 +0000</bug_when>
    <thetext>Others fixed at edk2/master:
61ca3b92365b30a94eced2d297fe1ddc1451bf7c
ed23ab5fc77383856d4405d27561c440c227288a
c3eefcb152762cf8cca0b5a5d9938f03d4ea8e69</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2507</bug_id>
          
          <creation_ts>2020-02-07 18:18:34 +0000</creation_ts>
          <short_desc>Support architecture-specific openssl acceleration</short_desc>
          <delta_ts>2022-11-11 15:04:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Eugene Cohen">eugene</reporter>
          <assigned_to>sunguk-bin</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>christopher.j.zurcher</cc>
    
    <cc>christopher.zurcher</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>sunguk-bin</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11170</commentid>
    <comment_count>0</comment_count>
    <who name="Eugene Cohen">eugene</who>
    <bug_when>2020-02-07 18:18:34 +0000</bug_when>
    <thetext>OpenSSL supports accelerating certain operations like SHA and AES using processor architecture specific mechanisms.  This can be selected in the OpenSSL configuration process with configurations that inherit from architecture specific configs like asm(&quot;aarch64_asm&quot;) or asm(&quot;x86_64_asm&quot;).  We will likely need to update the UEFI config to add these configs like:

  inherit_from     =&gt; [ &quot;BASE_unix&quot;, asm(&quot;x86_64_asm&quot;), , asm(&quot;aarch64_asm&quot;) ],

To further complicate things the assembly language implementation in openssl requires a perl script to generate the appropriate assembly syntax for the requested toolchain, e.g.:

  perl crypto/aes/asm/aesv8-armx.pl linux64 crypto/aes/aesv8-armx.S

The perl assembly generation will need to occur before the build - perhaps from the process_files.pl which resides in the OpensslLib directory.

Lastly some changes will likely be required to get the build working for UEFI - hopefully these can be upstreamed to openssl.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11392</commentid>
    <comment_count>1</comment_count>
    <who name="Christopher Zurcher">christopher.j.zurcher</who>
    <bug_when>2020-02-21 19:34:04 +0000</bug_when>
    <thetext>I have already implemented the necessary changes, and will be sending a review soon. The current plan is to check in the generated assembly files just as we check in the generated header files.
The initial OpenSSL changes are committed here but do not include aarch64:
https://github.com/openssl/openssl/commit/1b72105076bb2e73f3c8461f9c0ca5ecefe007c8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11395</commentid>
    <comment_count>2</comment_count>
    <who name="Eugene Cohen">eugene</who>
    <bug_when>2020-02-21 23:32:28 +0000</bug_when>
    <thetext>Thanks Chris, I added Ard in hopes of getting AArch64 support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14118</commentid>
    <comment_count>3</comment_count>
    <who name="">sunguk-bin</who>
    <bug_when>2020-10-27 21:53:04 +0000</bug_when>
    <thetext>There is another problem to use HW acceleration. CryptLib is not using EVP and it should be changed to use EVP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14126</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 22:01:02 +0000</bug_when>
    <thetext>Eugene Cohen: can you work on it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14130</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-27 22:11:47 +0000</bug_when>
    <thetext>Sung takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16401</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-06-20 21:15:01 +0000</bug_when>
    <thetext>this is a new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16729</commentid>
    <comment_count>7</comment_count>
    <who name="Christopher Zurcher">christopher.zurcher</who>
    <bug_when>2021-07-30 18:18:56 +0000</bug_when>
    <thetext>This has been partially resolved with these commits:

878a92a887ef4ca879d336f323e91b13cc767a59
147f34b56ce0e2e18285ef7d0695753ac0aa5085

Acceleration of SHA variants is now possible. The current AES implementation in OpensslLib does not use the correct API to access the accelerated code in OpenSSL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16774</commentid>
    <comment_count>8</comment_count>
    <who name="">sunguk-bin</who>
    <bug_when>2021-08-04 04:46:03 +0000</bug_when>
    <thetext>I was able to use ARM crypto extension for openssl with some patches that Chris provided.
https://edk2.groups.io/g/devel/message/66701
https://edk2.groups.io/g/devel/message/66704?p=,,,20,0,0,0::recentpostdate%252Fsticky,,Add+EVP+implementation,20,2,0,77870226

There was a problem building openssl/crypto/armcap.c. This is because armcap.c is using some signal related functions like sigsetjmp, siglongjmp, etc. These functions are used to check if crypto instructions are supported. Since I already knew the capabilities of our system, I changed armcap.c and forced OPENSSL_armcap_P to a specific value.

To support arm crypto extension fully in UEFI, I think that openssl code(armcap.c) should be updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16779</commentid>
    <comment_count>9</comment_count>
    <who name="Christopher Zurcher">christopher.zurcher</who>
    <bug_when>2021-08-04 18:40:06 +0000</bug_when>
    <thetext>From the EDK2 side, we cannot change the OpenSSL code, since it&apos;s pulled in as a submodule directly from OpenSSL. You might be able to add functionality to the getenv() function in CrtWrapper.c, and pre-populate the &quot;OPENSSL_armcap&quot; value somehow.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20005</commentid>
    <comment_count>10</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-11-11 15:04:24 +0000</bug_when>
    <thetext>The following commits add IA32/X64 optimized versions

https://github.com/tianocore/edk2/commit/a8e8c43a0ef25af133dc5ef1021befd897f71b12
https://github.com/tianocore/edk2/commit/4102950a21dc726239505b8f7b8e017b6e9175ec
https://github.com/tianocore/edk2/commit/03f708090b9da25909935e556c351a4d9445fd3f

And the following commit combines the optimized INFs

https://github.com/tianocore/edk2/commit/ea6d859b50b692577c4ccbeac0fb8686fad83a6e

With these changes, this feature can be closed as Resolved/Fixed.

If optimization work is required for more openssl APIs or for other CPU atchs, then those can be entered as new feature requests.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2973</bug_id>
          
          <creation_ts>2020-09-17 04:51:11 +0000</creation_ts>
          <short_desc>Incremental build issue for previous created files&apos; deletion</short_desc>
          <delta_ts>2020-11-13 02:47:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chen Yuwei">yuwei.chen</reporter>
          <assigned_to name="Chen Yuwei">yuwei.chen</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13707</commentid>
    <comment_count>0</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-09-17 04:51:11 +0000</bug_when>
    <thetext>When using incremental build to execute deletion operation, such as delete a driver or library from DSC file, the previous generated files related to the deleted module or file will not be delete, which causes the output Build directory is not exactly same with previous one.
This issue will not influence the incremental build function, but can be improved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13753</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 22:07:21 +0000</bug_when>
    <thetext>Yuwei, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14189</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-03 19:51:19 +0000</bug_when>
    <thetext>The build tool is not able to track the unused source files. So I think we will not fix this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14190</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-03 19:51:57 +0000</bug_when>
    <thetext>change the status by mistake. change it back.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14191</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-03 19:53:17 +0000</bug_when>
    <thetext>@liming, do you agree to close this bug with WONTFIX status?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14293</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-10 05:45:49 +0000</bug_when>
    <thetext>@Yuwei, do you agree to close this bug with WONTFIX status?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14344</commentid>
    <comment_count>6</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-11-13 02:47:28 +0000</bug_when>
    <thetext>Agree to close this bug with WONTFIX status.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2858</bug_id>
          
          <creation_ts>2020-07-20 17:29:21 +0000</creation_ts>
          <short_desc>Debug code to audit BIOS TPM extend operations.</short_desc>
          <delta_ts>2022-10-26 13:51:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13133</commentid>
    <comment_count>0</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2020-07-20 17:29:21 +0000</bug_when>
    <thetext>SecurityPkg: Debug code to audit BIOS TPM extend operations.

Add debug functionality to examine TPM extend operations
performed by BIOS and inspect the PCR 00 value prior to
any BIOS measurements.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13200</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-28 22:00:15 +0000</bug_when>
    <thetext>Jiewen: can you help evaluate this feature request is reasonable? And, give your design proposal for it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18023</commentid>
    <comment_count>2</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2021-12-17 13:49:11 +0000</bug_when>
    <thetext>Proposed design defines a function to read any PCR from the current active PCR banks: Tpm2PcrReadForActiveBank().

Additionally we add a checkpoint in which BIOS peeks at the PCR00 value prior to any extend operation issued by BIOS; this is helpful to debug configurations in which BIOS is not the S-CRTM.

Patch submitted https://edk2.groups.io/g/devel/message/85038</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19848</commentid>
    <comment_count>3</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2022-10-26 13:51:30 +0000</bug_when>
    <thetext>Merged https://github.com/tianocore/edk2/commit/8ed8568922be9b5f7111fc1297317106aba7ab52</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2741</bug_id>
          
          <creation_ts>2020-05-20 22:14:10 +0000</creation_ts>
          <short_desc>KabylakeOpenBoardPkg: Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2021-03-03 00:41:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12590</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:14:10 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12621</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 05:43:11 +0000</bug_when>
    <thetext>Assigning to package maintainer/reviewer based on &quot;GetMaintainer.py&quot; output.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12727</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-26 22:00:52 +0000</bug_when>
    <thetext>Chasel: can you give the fix plan?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15182</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-03-03 00:41:12 +0000</bug_when>
    <thetext>implemented by below commit:
SHA-1: d3cba2c7ea69b075944b6cd5ad9eb3f70af09694

* Platform\Intel\MinPlatformPkg: Add Variable Policy library

Makes the changes because of the new added library instances: VariablePolicyLib
and VariablePolicyHelperLib

Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Signed-off-by: Zhiguang Liu &lt;zhiguang.liu@intel.com&gt;
Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;
Reviewed-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2167</bug_id>
          <alias>CVE-2019-14560</alias>
          <creation_ts>2019-09-09 02:12:16 +0000</creation_ts>
          <short_desc>GetEfiGlobalVariable2() return value not checked</short_desc>
          <delta_ts>2024-02-10 14:38:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>dannf</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>glin</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>jlee</cc>
    
    <cc>jmaloy</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kevinj</cc>
    
    <cc>kimolsun2020</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>vincent.zimmer</cc>
    
    <cc>xiewenyi0201</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9506</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-09 02:12:16 +0000</bug_when>
    <thetext>GetEfiGlobalVariable2() is used in some instances when looking up the SecureBoot UEFI variable. The API can fail in certain circumstances, for example, if AllocatePool() fails or if gRT-&gt;GetVariable() fails. In the case of secure boot checks, it is critical that this return value is checked. if an attacker
can cause the API to fail, it would currently constitute a secure boot bypass. This return value check is missing in the following places:
- DxeImageVerificationHandler</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9507</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-09 02:13:24 +0000</bug_when>
    <thetext>CVSS Medium: 6.1 https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:H/PR:H/UI:N/S:C/C:N/I:H/A:L</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9508</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-09 02:19:26 +0000</bug_when>
    <thetext>In DxeImageVerificationHandler(), return value is not checked. There&apos;s chance EFI_OUT_OF_RESOURCE returned. Checking SecureBoot only is not enough.


  GetEfiGlobalVariable2 (EFI_SECURE_BOOT_MODE_NAME, (VOID**)&amp;SecureBoot, NULL);
  //
  // Skip verification if SecureBoot variable doesn&apos;t exist.
  //
  if (SecureBoot == NULL) {
    return EFI_SUCCESS;
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9764</commentid>
    <comment_count>3</comment_count>
      <attachid>405</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-24 03:26:25 +0000</bug_when>
    <thetext>Created attachment 405
v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11084</commentid>
    <comment_count>4</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:52:46 +0000</bug_when>
    <thetext>infosec 2/5/2020 - have a patch and 3 mo. hang-time but would like to give folks a final oppty to review so revisit next meeting w/ an eye toward un-embargoing then (sans any feedback to contrary)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13002</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-06-30 23:36:28 +0000</bug_when>
    <thetext>Un-embargo. Proceed to public patch review process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13003</commentid>
    <comment_count>6</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-01 12:06:24 +0000</bug_when>
    <thetext>Decision to make this public, per 7/1 Infosec mtg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13114</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-07-15 23:10:30 +0000</bug_when>
    <thetext>Jian, I didn&apos;t see the patch on the list yet. Is that correct? If so, can you please give an ETA and post a link to the patch series here when it is posted?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13117</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-16 14:36:10 +0000</bug_when>
    <thetext>Hi Jian, I have some comments on the patch in comment 3, but I&apos;d like to make them on the list, during review. Please CC me on the patch when you post it. Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13310</commentid>
    <comment_count>9</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2020-08-05 02:31:57 +0000</bug_when>
    <thetext>So... what&apos;s the status now? This bug is public now and it seems that no patch was reviewed or merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13322</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-05 20:02:19 +0000</bug_when>
    <thetext>Yes, that&apos;s exactly the status, AIUI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13856</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-01 04:21:36 +0000</bug_when>
    <thetext>Jian, would you like to reassign this bug to someone else? Your patch doesn&apos;t seem to be large, so the remaining task for the new assigne may not be more than just taking your patch and upstreaming it to edk2. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13857</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-01 04:21:55 +0000</bug_when>
    <thetext>IN_PROGRESS since code has been written.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16576</commentid>
    <comment_count>13</comment_count>
      <attachid>759</attachid>
    <who name="">kevinj</who>
    <bug_when>2021-07-07 10:34:30 +0000</bug_when>
    <thetext>Created attachment 759
v1 MITRE .json file

I have attached the .json file for CVE classification. Please review and provide feedback. Please assign a release this issue is observed in, so I can update the .json file. Also note, John Matthews has instructed me to request a new CVE-ID from MITRE for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17128</commentid>
    <comment_count>14</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-09-01 13:11:57 +0000</bug_when>
    <thetext>I have attached the .json file for CVE classification. Please review and provide feedback and assign a release this issue is observed in, so I can update the .json file and submit it back to MITRE. Also note, John Matthews has instructed me to request a new CVE-ID from MITRE for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17356</commentid>
    <comment_count>15</comment_count>
    <who name="Kim Olsun">kimolsun2020</who>
    <bug_when>2021-09-22 15:46:29 +0000</bug_when>
    <thetext>http://connstr.net/	http://embermanchester.uk/	http://www.slipstone.co.uk/	http://www.logoarts.co.uk/	http://www.acpirateradio.co.uk/	https://waytowhatsnext.com/	http://webb-dev.co.uk/	http://www.iu-bloomington.com/	http://www-look-4.com/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17870</commentid>
    <comment_count>16</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2021-11-30 07:28:21 +0000</bug_when>
    <thetext>May I ask what&apos;s the status of this issue. Can I help doing something for this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19531</commentid>
    <comment_count>17</comment_count>
    <who name="Joey Lee">jlee</who>
    <bug_when>2022-09-07 22:47:09 +0000</bug_when>
    <thetext>This patch is still not merged to edk2 mainline. Does anyone know what&apos;s the status?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19967</commentid>
    <comment_count>18</comment_count>
    <who name="Jon Maloy">jmaloy</who>
    <bug_when>2022-11-08 10:54:45 +0000</bug_when>
    <thetext>Same question here. I Wang Jian still active at all? If nobody confirms, and there are no objections, I will take over and try to move this forward.

Jon Maloy
Redhat</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20011</commentid>
    <comment_count>19</comment_count>
    <who name="Joey Lee">jlee</who>
    <bug_when>2022-11-14 00:53:53 +0000</bug_when>
    <thetext>(In reply to Jon Maloy from comment #18)
&gt; Same question here. I Wang Jian still active at all? If nobody confirms, and
&gt; there are no objections, I will take over and try to move this forward.
&gt; 
&gt; Jon Maloy
&gt; Redhat

I am happy for anyone can push this patch to continue to be merged to mainline.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21213</commentid>
    <comment_count>20</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2023-03-21 02:24:40 +0000</bug_when>
    <thetext>merged https://github.com/tianocore/edk2/pull/4155</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22560</commentid>
    <comment_count>21</comment_count>
    <who name="dann frazier">dannf</who>
    <bug_when>2024-02-10 14:38:16 +0000</bug_when>
    <thetext>Mitre reject this CVE:
   https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-14560

Kevin mentioned requesting a new one in Comment #14. Was that done?</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>405</attachid>
            <date>2019-09-24 03:26:25 +0000</date>
            <delta_ts>2019-09-24 03:26:25 +0000</delta_ts>
            <desc>v1</desc>
            <filename>0001-SecurityPkg-DxeImageVerificationLib-Check-result-of-.patch</filename>
            <type>text/plain</type>
            <size>2656</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>759</attachid>
            <date>2021-07-07 10:34:30 +0000</date>
            <delta_ts>2021-07-07 10:34:30 +0000</delta_ts>
            <desc>v1 MITRE .json file</desc>
            <filename>2167.json</filename>
            <type>application/json</type>
            <size>1914</size>
            <attacher>kevinj</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2635</bug_id>
          
          <creation_ts>2020-03-26 08:50:27 +0000</creation_ts>
          <short_desc>TlsAuthConfigAccessCallback() use console library to popup error message.</short_desc>
          <delta_ts>2020-05-04 02:01:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Keysound Chang">keysound</reporter>
          <assigned_to name="Keysound Chang">keysound_chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>keysound_chang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11862</commentid>
    <comment_count>0</comment_count>
      <attachid>498</attachid>
    <who name="Keysound Chang">keysound</who>
    <bug_when>2020-03-26 08:50:27 +0000</bug_when>
    <thetext>Created attachment 498
Solution

According to EDK2 Driver Writer&apos;s Guide For UEFI 2.3.1, 4.2.18 Offer alternatives to function keys. Configuration of drivers should be accomplished via HII and via OS-present interfaces. For now, TlsAuthConfigAccessCallback() should use HiiPopUp-&gt;CreatePopup() instead of CreatePopUp(). I made a change and attached a package of modified files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11967</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 22:08:06 +0000</bug_when>
    <thetext>Keysound: please send your patch to edk2 mail list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12168</commentid>
    <comment_count>2</comment_count>
    <who name="Keysound Chang">keysound_chang</who>
    <bug_when>2020-04-09 02:34:25 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #1)
&gt; Keysound: please send your patch to edk2 mail list.

Liming,

I send the patch to EDK2-devel but looks like not shown.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12170</commentid>
    <comment_count>3</comment_count>
    <who name="Keysound Chang">keysound_chang</who>
    <bug_when>2020-04-09 05:32:39 +0000</bug_when>
    <thetext>Patch submitted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12213</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-14 21:39:30 +0000</bug_when>
    <thetext>Keysound Chang has sent the patch. Please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12219</commentid>
    <comment_count>5</comment_count>
    <who name="Keysound Chang">keysound_chang</who>
    <bug_when>2020-04-15 12:01:22 +0000</bug_when>
    <thetext>Changed assignee to my business email.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12366</commentid>
    <comment_count>6</comment_count>
    <who name="Keysound Chang">keysound_chang</who>
    <bug_when>2020-05-04 02:01:44 +0000</bug_when>
    <thetext>Patch committed.

https://github.com/tianocore/edk2/commit/ddfb0ab1bb98161e4684572d1194328ed9d824cb</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>498</attachid>
            <date>2020-03-26 08:50:27 +0000</date>
            <delta_ts>2020-03-26 08:50:27 +0000</delta_ts>
            <desc>Solution</desc>
            <filename>TlsAuthConfig.7z</filename>
            <type>application/octet-stream</type>
            <size>11408</size>
            <attacher name="Keysound Chang">keysound</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2057</bug_id>
          
          <creation_ts>2019-08-07 03:19:44 +0000</creation_ts>
          <short_desc>Ecc needs to handle another copyright format</short_desc>
          <delta_ts>2019-10-15 01:08:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>zhijux.fan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8815</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-07 03:19:44 +0000</bug_when>
    <thetext>Ecc can not handle the copyright format like 

  (C) Copyright 2015-2016 Hewlett Packard Enterprise Development LP&lt;BR&gt;

This will cause Ecc to report wrong information.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8816</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-07 03:20:44 +0000</bug_when>
    <thetext>Assign this to Bob.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10020</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-10-15 01:08:38 +0000</bug_when>
    <thetext>fixed in 03ad3d889c64978c31a8ccd70f1862558bdb0a2d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2528</bug_id>
          
          <creation_ts>2020-02-17 04:16:39 +0000</creation_ts>
          <short_desc>BaseTools: Python tool will cause MSVC &quot;expanded command line too long&quot; build error</short_desc>
          <delta_ts>2020-11-10 01:43:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shih.haox.liu</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>atul.vaish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>Mingyuex.Liang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11273</commentid>
    <comment_count>0</comment_count>
    <who name="">shih.haox.liu</who>
    <bug_when>2020-02-17 04:16:39 +0000</bug_when>
    <thetext>ID1672 - Enable multiple thread for MSVC compiler
ID1672 will cause CometLake catalog build error as follow:
NMAKE : fatal error U1095: exapnded command line too long

Catalog build command: prep catalog &amp;&amp; bld</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11361</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:18:37 +0000</bug_when>
    <thetext>Please provide more detail error message and steps to reproduce this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11384</commentid>
    <comment_count>2</comment_count>
    <who name="">shih.haox.liu</who>
    <bug_when>2020-02-21 04:02:51 +0000</bug_when>
    <thetext>[How to reproduce]
  1. download CometLake
  2. build command: prep catalog &amp;&amp; bld
  3. will see build error:
     &quot;NMAKE : fatal error U1095: exapnded command line ... too long&quot;

I found that below code change will cause this issue:
https://bugzilla.tianocore.org/show_bug.cgi?id=1672
SHA-1: 05217d210e8da37b47d0be58ec363f7af2fa1c18
This change can reduce MSVC compiler build time.
But it will meet MSVC command line string limitation in some case and cause build error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11578</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-05 20:25:27 +0000</bug_when>
    <thetext>Please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11615</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-08 22:48:43 +0000</bug_when>
    <thetext>Assign Zhiju.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11804</commentid>
    <comment_count>5</comment_count>
    <who name="">shih.haox.liu</who>
    <bug_when>2020-03-24 06:49:06 +0000</bug_when>
    <thetext>Any update ??</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12074</commentid>
    <comment_count>6</comment_count>
    <who name="">shih.haox.liu</who>
    <bug_when>2020-04-06 03:09:05 +0000</bug_when>
    <thetext>Any update ??</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12096</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 21:54:34 +0000</bug_when>
    <thetext>Zhiju: please check it this week.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12228</commentid>
    <comment_count>8</comment_count>
    <who name="">shih.haox.liu</who>
    <bug_when>2020-04-17 04:39:00 +0000</bug_when>
    <thetext>Hi Zhiju, please update this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12350</commentid>
    <comment_count>9</comment_count>
    <who name="">shih.haox.liu</who>
    <bug_when>2020-04-29 06:21:09 +0000</bug_when>
    <thetext>Hi Zhiju, please update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12697</commentid>
    <comment_count>10</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-05-25 01:18:55 +0000</bug_when>
    <thetext>change owner to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13558</commentid>
    <comment_count>11</comment_count>
    <who name="Atul Vaish">atul.vaish</who>
    <bug_when>2020-08-27 23:35:08 +0000</bug_when>
    <thetext>we have the same issue with Alderlake. Could you get an update please ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13974</commentid>
    <comment_count>12</comment_count>
    <who name="MingYue Liang">Mingyuex.Liang</who>
    <bug_when>2020-10-15 02:38:11 +0000</bug_when>
    <thetext>checking.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14011</commentid>
    <comment_count>13</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-10-16 02:32:42 +0000</bug_when>
    <thetext>I have created a workable patch. Atul verified it. But since that patch has a bug for incremental build, I will sent it out for review once that bug is fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14235</commentid>
    <comment_count>14</comment_count>
    <who name="MingYue Liang">Mingyuex.Liang</who>
    <bug_when>2020-11-05 01:05:52 +0000</bug_when>
    <thetext>patch link in https://edk2.groups.io/g/devel/message/66995</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14291</commentid>
    <comment_count>15</comment_count>
    <who name="MingYue Liang">Mingyuex.Liang</who>
    <bug_when>2020-11-10 01:43:48 +0000</bug_when>
    <thetext>commit-ID:8c610e6075f2a200400970698a810a57ad49220e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2998</bug_id>
          
          <creation_ts>2020-10-06 23:24:48 +0000</creation_ts>
          <short_desc>ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/FileBuffer.c should initialize CutLine to null</short_desc>
          <delta_ts>2020-11-05 20:12:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>zhuenze</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13884</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-06 23:24:48 +0000</bug_when>
    <thetext>In the function FileBufferCutLine, we don&apos;t set the CutLine pointer to null. The function header specifies that the pointer is only valid on a successful return code. But this might be good coding practice.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13960</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-13 21:49:58 +0000</bug_when>
    <thetext>Zhichao: can you do it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14072</commentid>
    <comment_count>2</comment_count>
      <attachid>584</attachid>
    <who name="">zhuenze</who>
    <bug_when>2020-10-23 02:44:49 +0000</bug_when>
    <thetext>Created attachment 584
fix the bug:initialize CutLine to null</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14074</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-10-23 04:19:40 +0000</bug_when>
    <thetext>(In reply to zhuenze from comment #2)
&gt; Created attachment 584 [details]
&gt; fix the bug:initialize CutLine to null

Can you send the patch to the community base on https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process.
And I think it should be &apos;*CutLine&apos; instead of &apos;CutLine&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14086</commentid>
    <comment_count>4</comment_count>
      <attachid>587</attachid>
    <who name="">zhuenze</who>
    <bug_when>2020-10-26 04:43:52 +0000</bug_when>
    <thetext>Created attachment 587
fix the bug:initialize CutLine to null</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14087</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-26 04:44:59 +0000</bug_when>
    <thetext>The patch has been sent https://edk2.groups.io/g/devel/message/66594 for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14241</commentid>
    <comment_count>6</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-05 20:12:03 +0000</bug_when>
    <thetext>PR https://github.com/tianocore/edk2/pull/1089</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>584</attachid>
            <date>2020-10-23 02:44:49 +0000</date>
            <delta_ts>2020-10-26 04:43:52 +0000</delta_ts>
            <desc>fix the bug:initialize CutLine to null</desc>
            <filename>0001-ShellPkg-Fix-bug-in-FileBuffer.c.patch</filename>
            <type>text/plain</type>
            <size>1165</size>
            <attacher>zhuenze</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>587</attachid>
            <date>2020-10-26 04:43:52 +0000</date>
            <delta_ts>2020-10-26 04:43:52 +0000</delta_ts>
            <desc>fix the bug:initialize CutLine to null</desc>
            <filename>0001-ShellPkg-Fix-bug-in-FileBuffer.c.patch</filename>
            <type>text/plain</type>
            <size>1258</size>
            <attacher>zhuenze</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2769</bug_id>
          
          <creation_ts>2020-05-27 10:11:03 +0000</creation_ts>
          <short_desc>Add PI1.7/PI1.7a definition into MdePkg</short_desc>
          <delta_ts>2020-05-27 10:12:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12748</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-27 10:11:03 +0000</bug_when>
    <thetext>PI 1.7/1.7a has been published. This tracker requests to add PI1.7/1.7a definitions in MdePkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12749</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-27 10:11:46 +0000</bug_when>
    <thetext>AMI contributes the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12750</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-27 10:12:23 +0000</bug_when>
    <thetext>The change has been merged in 
https://github.com/tianocore/edk2/pull/625</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2570</bug_id>
          
          <creation_ts>2020-03-05 20:58:28 +0000</creation_ts>
          <short_desc>Add Open CI build test for Ovmf and Emulator</short_desc>
          <delta_ts>2020-04-28 22:36:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Sean Brogan">sean.brogan</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11582</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-05 20:58:28 +0000</bug_when>
    <thetext>Ovmf and Emulator is mostly used by the developer. I request to add the build for them in Open CI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11589</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-06 11:39:58 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #0)
&gt; Ovmf and Emulator is mostly used by the developer. I request to add the
&gt; build for them in Open CI.

I support this request very much. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11727</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-17 22:20:23 +0000</bug_when>
    <thetext>Shenglei, please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12085</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-07 19:39:27 +0000</bug_when>
    <thetext>Liming and Shenglei, Are you ok if I take this item?  I have patches ready for the list?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12093</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 21:44:04 +0000</bug_when>
    <thetext>Sean: please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12198</commentid>
    <comment_count>5</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-13 13:06:42 +0000</bug_when>
    <thetext>V1 patchset out for review. 

https://edk2.groups.io/g/devel/message/57076</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12327</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-28 14:04:47 +0000</bug_when>
    <thetext>V2 - https://edk2.groups.io/g/devel/message/57654</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12328</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-28 14:05:25 +0000</bug_when>
    <thetext>V3 - https://edk2.groups.io/g/devel/message/58114</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12329</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-28 14:13:15 +0000</bug_when>
    <thetext>Initial 6 patches of v3 merged to master in PR https://github.com/tianocore/edk2/pull/553.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12345</commentid>
    <comment_count>9</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-28 22:36:25 +0000</bug_when>
    <thetext>Patch 7 was committed as https://github.com/tianocore/edk2/pull/555</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2461</bug_id>
          
          <creation_ts>2020-01-13 00:15:41 +0000</creation_ts>
          <short_desc>Add library to do some action when post some debug value</short_desc>
          <delta_ts>2020-06-28 02:57:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>DebugFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10859</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-01-13 00:15:41 +0000</bug_when>
    <thetext>User can preset some debug value in some place (such as CMOS), and do some action when post the same debug value, such as call CpuDeadLoop().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10860</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-01-13 00:35:52 +0000</bug_when>
    <thetext>I will summit a patch for this feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10868</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-13 13:31:22 +0000</bug_when>
    <thetext>Please elaborate on the use case. The expression &quot;post the same debug value&quot; is vague.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10880</commentid>
    <comment_count>3</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-01-13 19:09:25 +0000</bug_when>
    <thetext>One use case for use CMOS:
1. There are many post code when booting.
2. Developer want to let the CPU dead loop when post code is equal some value, then he can use some debug tools to check the status.
3. Developer can set different value in CMOS as needed.

In order to do it:
1. In the function of output some post code, such as function PostCode(), call a function DebugPropertyAction(), parameter is the post code.
2. In DebugPropertyAction(), compare the input post code with a preset value in CMOS, if same, then call CpuDeadLoop().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12959</commentid>
    <comment_count>4</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-28 02:57:16 +0000</bug_when>
    <thetext>No plan to support it now.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2122</bug_id>
          
          <creation_ts>2019-08-23 08:32:48 +0000</creation_ts>
          <short_desc>remove Xen support from OvmfPkg/OvmfPkg*.dsc platforms, in favor of OvmfXen.dsc</short_desc>
          <delta_ts>2021-06-04 12:04:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1689</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>anthony</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>kaaira7319</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9205</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 08:32:48 +0000</bug_when>
    <thetext>With bug 1689 (&quot;New OvmfXen platform with Xen PVH support&quot;) fixed, the
current hypervisor support status is:

- OvmfXen:
  - runs in Xen HVM guests
  - runs in Xen PVH guests

- traditional OVMF
  - runs in Xen HVM guests
  - runs in QEMU/KVM guests

The desired (and agreed upon) end-status is the following:

- OvmfXen:
  - runs in Xen HVM guests
  - runs in Xen PVH guests

- traditional OVMF
  - runs in QEMU/KVM guests

Linked from bug 1689 comment 6, in message [1] (alternative link: [2]),
Anthony wrote,

&gt; After this patch series, I&apos;d like to wait a bit before removing Xen
&gt; support from the OvmfPkg*.dsc, to allow time to switch to the new Xen
&gt; only platform, maybe 1 year.

[1] http://mid.mail-archive.com/20190813113119.14804-1-anthony.perard@citrix.com
[2] https://edk2.groups.io/g/devel/message/45526</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9206</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 08:35:14 +0000</bug_when>
    <thetext>Confirming, based on earlier mailing list discussions, especially:

http://mid.mail-archive.com/155492143006.23894.8253130602441997952@jljusten-skl
https://edk2.groups.io/g/devel/message/38833</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16128</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-24 04:45:57 +0000</bug_when>
    <thetext>* [edk2-devel]
  deprecation notice: *dynamic* multi-VMM (QEMU vs. Xen) support in OvmfPkg

msgid: &lt;acf6161a-44f0-56cb-04de-8a81c1e4d93b@redhat.com&gt;
https://edk2.groups.io/g/devel/message/75498
https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00814.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16178</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-05-26 16:16:08 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH 00/43]
  OvmfPkg: remove Xen support from OvmfPkg*.dsc, in favor of OvmfXen.dsc

Message-Id: &lt;20210526201446.12554-1-lersek@redhat.com&gt;
https://edk2.groups.io/g/devel/message/75669
https://listman.redhat.com/archives/edk2-devel-archive/2021-May/msg00962.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16267</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-06-04 12:04:59 +0000</bug_when>
    <thetext>Merged as commit range 924c2b847f0b..51adb689e1db, via &lt;https://github.com/tianocore/edk2/pull/1689&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2718</bug_id>
          
          <creation_ts>2020-05-13 16:53:08 +0000</creation_ts>
          <short_desc>MdePkg/Include/IndustryStandard/SmBios.h and ShellPkg/Library/UefiShellDebug1CommandsLib/SmbiosView/PrintInfo.c misspell FirmwareVersion</short_desc>
          <delta_ts>2022-02-15 01:07:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="MacKevin Fey">mackevin.fey</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>macarl</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12497</commentid>
    <comment_count>0</comment_count>
    <who name="MacKevin Fey">mackevin.fey</who>
    <bug_when>2020-05-13 16:53:08 +0000</bug_when>
    <thetext>MdePkg/Include/IndustryStandard/SmBios.h and ShellPkg/Library/UefiShellDebug1CommandsLib/SmbiosView/PrintInfo.c contain spelling errors FirwareVersion -- should be FirmwareVersion.

Patch code below:

From 1353f707116440aba1da6b07318d66e2b651001f Mon Sep 17 00:00:00 2001
From: James Anandraj &lt;james.sushanth.anandraj@intel.com&gt;
Date: Thu, 15 Aug 2019 16:30:51 -0700
Subject: [PATCH] Correct spelling for firmware

---
 MdePkg/Include/IndustryStandard/SmBios.h                        | 2 +-
 .../Library/UefiShellDebug1CommandsLib/SmbiosView/PrintInfo.c   | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/MdePkg/Include/IndustryStandard/SmBios.h b/MdePkg/Include/IndustryStandard/SmBios.h
index f3b6f18..92dc6c9 100644
--- a/MdePkg/Include/IndustryStandard/SmBios.h
+++ b/MdePkg/Include/IndustryStandard/SmBios.h
@@ -1801,7 +1801,7 @@ typedef struct {
   //
   UINT8                                     MemoryTechnology;   ///&lt; The enumeration value from MEMORY_DEVICE_TECHNOLOGY
   MEMORY_DEVICE_OPERATING_MODE_CAPABILITY   MemoryOperatingModeCapability;
-  SMBIOS_TABLE_STRING                       FirwareVersion;
+  SMBIOS_TABLE_STRING                       FirmwareVersion;
   UINT16                                    ModuleManufacturerID;
   UINT16                                    ModuleProductID;
   UINT16                                    MemorySubsystemControllerManufacturerID;
diff --git a/ShellPkg/Library/UefiShellDebug1CommandsLib/SmbiosView/PrintInfo.c b/ShellPkg/Library/UefiShellDebug1CommandsLib/SmbiosView/PrintInfo.c
index cfd7a2b..eceff5e 100644
--- a/ShellPkg/Library/UefiShellDebug1CommandsLib/SmbiosView/PrintInfo.c
+++ b/ShellPkg/Library/UefiShellDebug1CommandsLib/SmbiosView/PrintInfo.c
@@ -776,7 +776,7 @@ SmbiosPrintStructure (
       if (Struct-&gt;Hdr-&gt;Length &gt; 0x28) {
         DisplayMemoryDeviceMemoryTechnology (Struct-&gt;Type17-&gt;MemoryTechnology, Option);
         DisplayMemoryDeviceMemoryOperatingModeCapability (Struct-&gt;Type17-&gt;MemoryOperatingModeCapability.Uint16, Option);
-        PRINT_PENDING_STRING (Struct, Type17, FirwareVersion);
+        PRINT_PENDING_STRING (Struct, Type17, FirmwareVersion);
         PRINT_STRUCT_VALUE_H (Struct, Type17, ModuleManufacturerID);
         PRINT_STRUCT_VALUE_H (Struct, Type17, ModuleProductID);
         PRINT_STRUCT_VALUE_H (Struct, Type17, MemorySubsystemControllerManufacturerID);
--
2.21.0.windows.1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12538</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 21:50:49 +0000</bug_when>
    <thetext>*** Bug 2422 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12539</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 21:51:54 +0000</bug_when>
    <thetext>Agree this is a typo. Need to check its impact.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12548</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 23:02:06 +0000</bug_when>
    <thetext>Zhiguang: can you help send this patch to edk2 mail list?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12550</commentid>
    <comment_count>4</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-05-19 23:05:10 +0000</bug_when>
    <thetext>sure</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12707</commentid>
    <comment_count>5</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-05-26 04:57:50 +0000</bug_when>
    <thetext>Hi, MacKevin
This typo is in a struct filed and is used in Intel internal platform code.
Correcting it will be very complicated.
Thanks
Zhiguang</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12710</commentid>
    <comment_count>6</comment_count>
    <who name="MacKevin Fey">mackevin.fey</who>
    <bug_when>2020-05-26 10:49:11 +0000</bug_when>
    <thetext>Is the correction very complicated, or is it very time-consuming and not worth the effort?

In any case, I think it is easier for us to change on our end.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13901</commentid>
    <comment_count>7</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-07 14:06:50 +0000</bug_when>
    <thetext>What&apos;s the status on this bug? We&apos;ve fixed in in Project MU and the Intel reference code we use.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18363</commentid>
    <comment_count>8</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2022-02-15 01:07:46 +0000</bug_when>
    <thetext>fix at 0db89a661f38b10012ff4f62e1853bfc48efd462</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2147</bug_id>
          
          <creation_ts>2019-09-02 03:00:08 +0000</creation_ts>
          <short_desc>AutoGen need generate same AutoGen.h and AutoGen.c for same module across different OS</short_desc>
          <delta_ts>2019-11-14 22:14:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>steven.shi</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9421</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-09-02 03:00:08 +0000</bug_when>
    <thetext>Background:
We are working on the across-host reproducible build (https://reproducible-builds.org) toolchain enabling which is based on LLVM9 clang + lld. This means to use single toolchain (e.g. LLVM9) can generate exactly same self-contained firmware binary from same source code in different OS (e.g. windows and Linux). There is very big value behind this capablity for firmware. You only need build once then get exactly same bianry for all OS platforms. And the binary itself can be the fingerprint of your toolchain + source code, which is very useful for security and bug reproducing.

Problem:
But current edk2 AutoGen does not support it. The AutoGen.h and AutoGen.c are generated differently for same module in windows and linux. This problem is common for all toolchains actually, and you can even reproduce this issue through VS2015x86 and GCC5 toolchain. E.g. build the OvmfPkgIA32 with VS2015x86 and GCC5 as below, then compare the AutoGen.h and AutoGen.c as below. This is a AutoGen common issue, and I will submit a BZ to require enhance it.

•	Build in windows and linux:
&gt; build -p OvmfPkg/OvmfPkgIA32.dsc -a IA32 -t VS2015x86 -DDEBUG_ON_SERIAL_PORT -b RELEASE
$ build -p OvmfPkg/OvmfPkgIA32.dsc -a IA32 -t GCC5 -DDEBUG_ON_SERIAL_PORT -b RELEASE

•	Then compare
Build\OvmfIa32\RELEASE_VS2015x86\IA32\MdeModulePkg\Universal\BdsDxe\BdsDxe\DEBUG\AutoGen.h and AutoGen.c
Build\OvmfIa32\RELEASE_GCC5\IA32\MdeModulePkg\Universal\BdsDxe\BdsDxe\DEBUG\AutoGen.h and AutoGen.c

In Windows:
#define _PCD_TOKEN_PcdPlatformBootTimeOut  27U
#define _PCD_TOKEN_PcdOvmfHostBridgePciDevId  2U

In Linux:
#define _PCD_TOKEN_PcdPlatformBootTimeOut  31U
#define _PCD_TOKEN_PcdOvmfHostBridgePciDevId  9U

Requirement:
Need to enhance AutoGen to generate same AutoGen.h and AutoGen.c for same module across different OSes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9422</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-09-02 03:02:25 +0000</bug_when>
    <thetext>Confirm and assign to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9502</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-08 22:29:06 +0000</bug_when>
    <thetext>code review at:
https://edk2.groups.io/g/devel/message/46759</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9563</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-09 21:59:13 +0000</bug_when>
    <thetext>pushed at 000ab98574793b685e7a0f6a6e5032523d5c37c4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10447</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 22:14:26 +0000</bug_when>
    <thetext>This is a bug, not feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2037</bug_id>
          
          <creation_ts>2019-07-31 02:46:12 +0000</creation_ts>
          <short_desc>Fix warning: Module MetaFile [Sources] is missing local header!</short_desc>
          <delta_ts>2019-09-03 23:20:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8651</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-07-31 02:46:12 +0000</bug_when>
    <thetext>BZ 1804 adds a checking for Sources section in INF file. It reports the warning for the missing source files in module INF file. I think they should be fixed for those packages if any warnings are found. 

Silicon\Intel\IntelSiliconPkg
Platform\Intel\AdvancedFeaturePkg
Platform\Intel\BoardModulePkg
Platform\Intel\DebugFeaturePkg
Platform\Intel\MinPlatformPkg
Platform\Intel\UserInterfaceFeaturePkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8652</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-07-31 02:46:35 +0000</bug_when>
    <thetext>Shenglei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9453</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-09-03 23:20:39 +0000</bug_when>
    <thetext>Fixed at edk2-platforms:
4b0c608f1a515235e1ad98a4448efca7e43f9844
978d74d851916aa2c51d66d4948805c563fd4ba7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2860</bug_id>
          
          <creation_ts>2020-07-22 15:29:08 +0000</creation_ts>
          <short_desc>ShellPkg: add HttpDynamicCommand</short_desc>
          <delta_ts>2020-09-29 21:39:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2857</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Vladimir Olovyannikov">vladimir.olovyannikov</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13156</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-22 15:29:08 +0000</bug_when>
    <thetext>Introduce an http client utilizing EDK2 HTTP protocol, to allow fast
image downloading from http/https servers. HTTP download speed is
usually faster than tftp.

The client is based on the same approach as tftp dynamic command, and
uses the same UEFI Shell command line parameters. This makes it easy
integrating http into existing UEFI Shell scripts.

Note that to enable HTTP download, feature Pcd
gEfiNetworkPkgTokenSpaceGuid.PcdAllowHttpConnections must be set to
TRUE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13157</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-22 15:29:40 +0000</bug_when>
    <thetext>Patches on the list, from Vladimir:

* [edk2-devel] [PATCH 1/1]
  ShellPkg/DynamicCommand: add HttpDynamicCommand

  https://edk2.groups.io/g/devel/message/53483
  http://mid.mail-archive.com/20200125005718.8931-1-vladimir.olovyannikov@broadcom.com

* [edk2-devel] [PATCH v2 1/1]
  ShellPkg/DynamicCommand: add HttpDynamicCommand

  https://edk2.groups.io/g/devel/message/59160
  http://mid.mail-archive.com/20200511180310.30964-1-vladimir.olovyannikov@broadcom.com

* [edk2-devel] [PATCH v3 1/1]
  ShellPkg/DynamicCommand: add HttpDynamicCommand

  https://edk2.groups.io/g/devel/message/62452
  http://mid.mail-archive.com/20200713183137.9825-1-vladimir.olovyannikov@broadcom.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13174</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-27 04:00:24 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v4 0/1]
  ShellPkg/DynamicCommand: add HttpDynamicCommand

https://edk2.groups.io/g/devel/message/63216
http://mid.mail-archive.com/20200723205052.22500-1-vladimir.olovyannikov@broadcom.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13187</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-27 18:09:10 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v5 0/1]
  ShellPkg/DynamicCommand: add HttpDynamicCommand

https://edk2.groups.io/g/devel/message/63347
http://mid.mail-archive.com/20200727164830.25829-1-vladimir.olovyannikov@broadcom.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13820</commentid>
    <comment_count>4</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2020-09-28 17:29:56 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v13 0/1]
  ShellPkg/DynamicCommand: add HttpDynamicCommand

https://edk2.groups.io/g/devel/message/65574
http://www.mail-archive.com/devel@edk2.groups.io/msg26220.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13841</commentid>
    <comment_count>5</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-09-29 21:39:51 +0000</bug_when>
    <thetext>Merged at d8ab884fe9b4dd148980bf0d8673187f8fb25887.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2742</bug_id>
          
          <creation_ts>2020-05-20 22:14:11 +0000</creation_ts>
          <short_desc>KabylakeSiliconPkg: Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2021-03-03 00:42:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12591</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:14:11 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12622</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 05:44:11 +0000</bug_when>
    <thetext>Assigning to package maintainer/reviewer based on &quot;GetMaintainer.py&quot; output.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12726</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-26 22:00:35 +0000</bug_when>
    <thetext>KabylakeSiliconPkg is not platform package. It should not be impacted by VariableLock change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15183</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-03-03 00:42:17 +0000</bug_when>
    <thetext>SiliconPkg does not access variable so it is not related.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2058</bug_id>
          
          <creation_ts>2019-08-07 03:53:36 +0000</creation_ts>
          <short_desc>Failure caused by python tool occurs when building ShellPkg</short_desc>
          <delta_ts>2019-08-13 23:12:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8818</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-07 03:53:36 +0000</bug_when>
    <thetext>Failure occurs at version:7c662c9e73161d53cfd5bc8cda8a06ad2241ef00.
And only when the arch is EBC will this failure happen.

Build command: c:\....\edk2\build -p ShellPkg\ShellPkg.dsc -a EBC

Error log:
File &quot;C:\TCWork\ecba2b92d115f652\Edk2\BaseTools\Source\Python\build\build.py&quot;, line 2483, in Main
File &quot;C:\TCWork\ecba2b92d115f652\Edk2\BaseTools\Source\Python\build\build.py&quot;, line 2222, in Launch
self._MultiThreadBuildPlatform()
File &quot;C:\TCWork\ecba2b92d115f652\Edk2\BaseTools\Source\Python\build\build.py&quot;, line 2089, in _MultiThreadBuildPlatform
self.CreateAsBuiltInf()
File &quot;C:\TCWork\ecba2b92d115f652\Edk2\BaseTools\Source\Python\build\build.py&quot;, line 2233, in CreateAsBuiltInf
Module.CreateAsBuiltInf()
File &quot;C:\TCWork\ecba2b92d115f652\Edk2\BaseTools\Source\Python\AutoGen\AutoGen.py&quot;, line 3761, in CreateAsBuiltInf
Bin = self._GenOffsetBin()
File &quot;C:\TCWork\ecba2b92d115f652\Edk2\BaseTools\Source\Python\AutoGen\AutoGen.py&quot;, line 3539, in _GenOffsetBin
VfrUniOffsetList = GetVariableOffset(MapFileName, EfiFileName, list(VfrUniBaseName.values()))
File &quot;C:\TCWork\ecba2b92d115f652\Edk2\BaseTools\Source\Python\Common\Misc.py&quot;, line 87, in GetVariableOffset
return _parseGeneral(lines, efifilepath, varnames)
File &quot;C:\TCWork\ecba2b92d115f652\Edk2\BaseTools\Source\Python\Common\Misc.py&quot;, line 188, in _parseGeneral
assert m is not None, &quot;Fail to parse the symbol in map file, line is %s&quot; % line
AssertionError: Fail to parse the symbol in map file, line is 0002:00000000</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8819</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-07 03:54:19 +0000</bug_when>
    <thetext>Assign this to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8995</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-13 23:12:09 +0000</bug_when>
    <thetext>Fixed at SHA-1: 2b4c07bc22af6caec94645e1f7e2a23646dc1333</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2412</bug_id>
          
          <creation_ts>2019-12-10 02:20:26 +0000</creation_ts>
          <short_desc>GenerateCapsule: Support capsule dependency</short_desc>
          <delta_ts>2020-03-03 20:51:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Aaron Li">aaron.li</reporter>
          <assigned_to name="Aaron Li">aaron.li</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10648</commentid>
    <comment_count>0</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2019-12-10 02:20:26 +0000</bug_when>
    <thetext>Capsule dependency is defined in UEFI sepc v2.8 chap. 23.2. This feature should be supported by capsule generate tool:

1. Capsule generate tool should support encode dependencies through &apos;-j&apos; command, for example:
  GenerateCapsule.py -e -j Example.json -o Example.cap

  To enable dependency feature, a &quot;Dependencies&quot; field in JSON file is required.
  We suggest to use C style infix notation expression as input value of &quot;Dependencies&quot; field.

2. Capsule dependency tool should also support decodes dependencies, for example:  
  GenerateCapsule.py -d Example.cap -o Example

  All Decoded dependency expressions would be written to &quot;Dependencies&quot; field in Example.json for each payload.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10649</commentid>
    <comment_count>1</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2019-12-10 02:21:16 +0000</bug_when>
    <thetext>Take owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10694</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-12-12 20:25:26 +0000</bug_when>
    <thetext>Add BaseTools maintainers to CC</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11507</commentid>
    <comment_count>3</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2020-03-03 20:51:38 +0000</bug_when>
    <thetext>fixed at: f6f66e0c301bb2b75774060ba0a76246fbe8d924</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2898</bug_id>
          
          <creation_ts>2020-08-13 23:55:24 +0000</creation_ts>
          <short_desc>Update openssl version to latest stable version 1.1.1g</short_desc>
          <delta_ts>2020-08-13 23:56:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13395</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-13 23:55:24 +0000</bug_when>
    <thetext>The current openssl release is 1.1.1d with a cherry pick with a couple of commits which falls behind the latest stable release 1.1.1g (https://www.openssl.org/source/)

Request to upgrade to latest stable openssl version 1.1.1g to address the latest security vulnerabilities.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13396</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-13 23:56:11 +0000</bug_when>
    <thetext>Fix at 8c30327debb28c0b6cfa2106b736774e0b20daac.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2302</bug_id>
          
          <creation_ts>2019-10-20 07:58:14 +0000</creation_ts>
          <short_desc>DebugPrintMarker implementations may preliminary cut message data</short_desc>
          <delta_ts>2019-11-03 21:28:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10131</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-20 07:58:14 +0000</bug_when>
    <thetext>The second argument of &quot;UnicodeVSPrintAsciiFormat&quot; is &quot;BufferSize&quot;, which takes the size of the buffer in bytes. Currently MAX_DEBUG_MESSAGE_LENGTH is a value for &quot;BufferSize&quot;, which is the buffer&apos;s length in characters rather than size in bytes.

The issue affects UefiDebugLibStdErr and UefiDebugLibConOut.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10265</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:50:22 +0000</bug_when>
    <thetext>The patch has passed code review. I will push them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10298</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-03 21:28:13 +0000</bug_when>
    <thetext>Fix them in edk2 5ae6c993ab75c694831547b7436543a41d60458a and 787c4baace1c0c49fa1628990402be8997294d17.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2551</bug_id>
          
          <creation_ts>2020-02-23 20:42:47 +0000</creation_ts>
          <short_desc>Add CPU V2 Extended Topology support in PI spec</short_desc>
          <delta_ts>2020-05-24 22:04:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11408</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-02-23 20:42:47 +0000</bug_when>
    <thetext>Intel ® 64 and IA-32 Architectures Software Developer’s Manual introduces 6-level CPU topology information which can be reported through CPUID instruction: Package, Die, Tile, Module, Core and SMT. This is to support the new hardware topology in new CPUs. There are only 3 levels CPU topology before that. The ECR changes EFI_MP_SERVICES_PPI.GetProcessorInfo() and EFI_MP_SERVICE_PROTOCOL.GetProcessorInfo() to support returning the CPU 6-level topology information when caller requests.


AMD’s Architecture Programmer’s Manual also has the concept of “DIE”.
Per &quot;E.4.16 Function 8000_001Eh—Processor Topology Information“ in AMD64 Architecture Programmer’s Manual Volume 3: General Purpose and System Instructions (http://support.amd.com/TechDocs/24594.pdf), CPUID returns NodesPerProcessor information in ECX of CPUID[0x8000_001E]. “Node in this context corresponds to a processor die”.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11409</commentid>
    <comment_count>1</comment_count>
      <attachid>464</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-02-23 20:43:59 +0000</bug_when>
    <thetext>Created attachment 464
PI spec change</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11570</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-05 20:14:41 +0000</bug_when>
    <thetext>is this related to code first process?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11697</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-03-15 22:42:56 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #2)
&gt; is this related to code first process?

I believe so:)
My understanding to code first process:
1. Is the ECR published in open source community? (YES, attached in this BZ)
2. Are the feedback to this ECR from PIWG sent to open source community? (No feedback yet.)

So it depends on whether the further feedback communication will be processed in open source community.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11742</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-03-19 14:52:41 +0000</bug_when>
    <thetext>Feedback from Arm: The concepts apply to Arm64 SoCs, and we see no issue with the proposal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11863</commentid>
    <comment_count>5</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-03-26 16:50:54 +0000</bug_when>
    <thetext>approved as errata for upcoming pi1.7a specification (ETA 2-3 weeks).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12685</commentid>
    <comment_count>6</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-05-24 22:04:19 +0000</bug_when>
    <thetext>PI 1.7a was published and the ECR content is already in the spec.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>464</attachid>
            <date>2020-02-23 20:43:59 +0000</date>
            <delta_ts>2020-02-23 20:43:59 +0000</delta_ts>
            <desc>PI spec change</desc>
            <filename>UEFI_PIWG_CPU_V2_EXTENDED_TOPOLOGY-ECR.doc</filename>
            <type>application/msword</type>
            <size>89088</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2674</bug_id>
          
          <creation_ts>2020-04-14 07:00:49 +0000</creation_ts>
          <short_desc>Create an Library ReportCpuHobLib instance</short_desc>
          <delta_ts>2020-09-23 04:54:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>chandana.c.kumar</reporter>
          <assigned_to>chandana.c.kumar</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gua.guo</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12201</commentid>
    <comment_count>0</comment_count>
    <who name="">chandana.c.kumar</who>
    <bug_when>2020-04-14 07:00:49 +0000</bug_when>
    <thetext>In some platforms we need to override the Physical Address bits reported from CPUID. In case of min platform, this is reported in PlatformInitPei driver.

This ticket is to create an Library instance of ReportCpuHobLib. So that other drivers can override it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12211</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-14 21:35:41 +0000</bug_when>
    <thetext>chandana.c.kumar@intel.com has worked on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13149</commentid>
    <comment_count>2</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2020-07-21 21:38:03 +0000</bug_when>
    <thetext>Hi Chandana and Liming

I think the bug can be closed. It&apos;s done on below sha-id. Can we change status from &quot;CONFIRMED&quot; to &quot;RESOLVED&quot;.

47e2d81920052666c4139d43b08b550863c52f17 Platform/Intel/MinPlatformPkg: Fix build error
9f34aba39b3c73ee4be165aaa6db6c2bfa819621 Platform/Intel/CometlakeOpenBoardPkg: Add ReportCpuHobLib
ff76f0f3f6e91376a0d327ba2344299cee4c6c6a Platform/Intel/KabylakeOpenBoardPkg: Add ReportCpuHobLib
92405a48b4264c3275f55a89d58c6a2f2ba68303 Platform/Intel/SimicsOpenBoardPkg: Add ReportCpuHobLib 
ed64df21176821e9b27ed0fd0082d1f677ebdc5c Platform/Intel/WhiskeylakeOpenBoardPkg: Add ReportCpuHobLib
b972f17b329a85e6aa4d69f240d459839ba8b47c Platform/Intel/MinPlatformPkg: Add ReportCpuHobLib 

Thanks,
Ian Kuo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13767</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-09-23 04:52:24 +0000</bug_when>
    <thetext>Chandana, Ian,
To change the bugzilla state to resolved, I suggest the following changes to be added:
1. Add the missing function header comments in MinPlatformPkg/Include/Library/ReportCpuHobLib.h and accordingly C files.
2. Add the missing EFIAPI in MinPlatformPkg/Include/Library/ReportCpuHobLib.h and accordingly C files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13768</commentid>
    <comment_count>4</comment_count>
    <who name="Gua Guo">gua.guo</who>
    <bug_when>2020-09-23 04:54:25 +0000</bug_when>
    <thetext>1. Add the missing function header comments in MinPlatformPkg/Include/Library/ReportCpuHobLib.h and accordingly C files.
2. Add the missing EFIAPI in MinPlatformPkg/Include/Library/ReportCpuHobLib.h and accordingly C files.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2571</bug_id>
          
          <creation_ts>2020-03-05 21:54:47 +0000</creation_ts>
          <short_desc>Add header file to define the board type</short_desc>
          <delta_ts>2020-06-08 04:49:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>BoardModulePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11584</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-03-05 21:54:47 +0000</bug_when>
    <thetext>Add a header file to BoardModulePkg, to define the different board type, such as the RVP, SDS etc.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11585</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-03-05 21:55:10 +0000</bug_when>
    <thetext>I will summit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12810</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-08 04:49:16 +0000</bug_when>
    <thetext>Will not add such header file now.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2463</bug_id>
          
          <creation_ts>2020-01-14 03:13:24 +0000</creation_ts>
          <short_desc>Perform Data and Address line test only if not ignore memory test.</short_desc>
          <delta_ts>2020-03-03 20:43:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>amy.chan</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10888</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-01-14 03:13:24 +0000</bug_when>
    <thetext>In source MdeModulePkg\Universal\MemoryTest\GenericMemoryTestDxe\LightMemoryTest.c, when platform initialize the generic memory test with parameter &quot;level=IGNORE&quot;, memory test will be skipped at function GenPerformMemoryTest:
    if (!TestAbort &amp;&amp; Private-&gt;CoverLevel != IGNORE) {
      //....
      //
      // The software memory test (R/W/V) perform here. It will detect the
      // memory mis-compare error.
      //
      WriteMemory (Private, mCurrentAddress, BlockBoundary);

      Status = VerifyMemory (Private, mCurrentAddress, BlockBoundary);
      if (EFI_ERROR (Status)) {
        //
        // If perform here, means there is mis-compare error, and no agent can
        // handle it, so we return to BDS EFI_DEVICE_ERROR.
        //
        *ErrorOut = TRUE;
        return EFI_DEVICE_ERROR;
      }
    }

But at function GenMemoryTestFinished, &quot;Data and Address line test&quot; is always performed even if &quot;Private-&gt;CoverLevel == IGNORE&quot;:
  //
  // Perform Data and Address line test
  //
  Status = PerformAddressDataLineTest (Private);
  ASSERT_EFI_ERROR (Status);

I think we should perform Data and Address line test only if not ignore memory test:
  //
  // Perform Data and Address line test only if not ignore memory test
  //
  if (Private-&gt;CoverLevel != IGNORE) {
    Status = PerformAddressDataLineTest (Private);
    ASSERT_EFI_ERROR (Status);
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10890</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-01-14 03:16:34 +0000</bug_when>
    <thetext>confirmed with Ray Ni</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10891</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-01-14 03:23:53 +0000</bug_when>
    <thetext>Assign to me, I will send the patch to EDKII mailing list for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10892</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-14 08:12:07 +0000</bug_when>
    <thetext>Patch on the list:

[edk2-devel] [PATCH] MdeModulePkg: Perform test only if not ignore memory test
https://edk2.groups.io/g/devel/message/53222
http://mid.mail-archive.com/20200114085412.2060-1-heng.luo@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11505</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-03 20:43:03 +0000</bug_when>
    <thetext>Fix at f469c7028174281ec63fca1057961dda0f742340</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2931</bug_id>
          
          <creation_ts>2020-08-26 22:47:40 +0000</creation_ts>
          <short_desc>UEFI spec update of UEFI Redfish Host Interface Protocol</short_desc>
          <delta_ts>2020-09-25 23:44:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13547</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-26 22:47:40 +0000</bug_when>
    <thetext>Refer to BZ:https://bugzilla.tianocore.org/show_bug.cgi?id=2912</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13637</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-07 21:28:00 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13809</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-09-25 23:44:21 +0000</bug_when>
    <thetext>EFI Redfish Host Interface Driver doesn&apos;t require UEFI spec change to add a new EFI protocol.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2019</bug_id>
          
          <creation_ts>2019-07-25 21:19:11 +0000</creation_ts>
          <short_desc>Change &quot;EDK II Trunk&quot; in Bugzilla&apos;s `Release(s) the issue is observed` to &quot;EDK II Master&quot;</short_desc>
          <delta_ts>2019-08-19 17:28:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephano Cetola">stephano</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>rebecca</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8594</commentid>
    <comment_count>0</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 21:19:11 +0000</bug_when>
    <thetext>The idea of a Trunk is more SVN than Git.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8595</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 21:19:45 +0000</bug_when>
    <thetext>Bug Triage: confirmed, please change when you have a moment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9068</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:28:07 +0000</bug_when>
    <thetext>Changed &quot;Field Value&quot; from &quot;EDK II Trunk&quot; to &quot;EDK II Master&quot;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2951</bug_id>
          
          <creation_ts>2020-09-02 10:57:28 +0000</creation_ts>
          <short_desc>Enable ECC error code 10014 in open CI</short_desc>
          <delta_ts>2020-09-03 11:33:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>2904</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13605</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-02 10:57:28 +0000</bug_when>
    <thetext>ECC fixes the false report of error code 10014. So, this error code can be enabled in open CI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13606</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-02 10:58:20 +0000</bug_when>
    <thetext>It depends on BZ https://bugzilla.tianocore.org/show_bug.cgi?id=2904.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13610</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-03 04:05:47 +0000</bug_when>
    <thetext>Patch on the list from Shenglei Zhang:

* [edk2-devel] [PATCH]
  Revert &quot;.pytool/EccCheck: Disable Ecc error code 10014 for open CI&quot;

https://edk2.groups.io/g/devel/message/64996
http://mid.mail-archive.com/20200903065608.110000-1-shenglei.zhang@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13614</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-03 11:33:43 +0000</bug_when>
    <thetext>Merge @06dc822d045c2bb42e497487935485302486e151</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2612</bug_id>
          
          <creation_ts>2020-03-20 17:22:34 +0000</creation_ts>
          <short_desc>SaveFrameworkState in UnitTestLib still requires FrameworkHandle</short_desc>
          <delta_ts>2020-06-15 13:20:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11757</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-20 17:22:34 +0000</bug_when>
    <thetext>All other interfaces abstract FwHandle behind the infrastructure.

Will post a patch shortly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11758</commentid>
    <comment_count>1</comment_count>
      <attachid>493</attachid>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-20 17:55:20 +0000</bug_when>
    <thetext>Created attachment 493
Sample patch. Probably needs CRs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11820</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-24 22:03:10 +0000</bug_when>
    <thetext>Guomin: please check the fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12119</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:23:59 +0000</bug_when>
    <thetext>Guomin: please give the update for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12245</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 18:57:16 +0000</bug_when>
    <thetext>I&apos;ll take ownership to help close this sooner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12267</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-21 14:36:24 +0000</bug_when>
    <thetext>V1 patch series on the mailing list - https://edk2.groups.io/g/devel/message/57758</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12866</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-06-12 22:54:13 +0000</bug_when>
    <thetext>The series is on this branch: https://github.com/makubacki/edk2/commits/bz2612_update_saveframeworkstate_signature

It is rebased on the current tip of edk2 with the reviewed-bys included. It is ready to be merged in a PR.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12879</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-06-15 13:20:31 +0000</bug_when>
    <thetext>Series submitted.

PR: https://github.com/tianocore/edk2/pull/693
Patch #1: https://github.com/tianocore/edk2/commit/4260c478671537e2122ed6c5485a188c2f0449f9
Patch #2: https://github.com/tianocore/edk2/commit/b90beadfae8f1153697fbb87f923cfa14578ee3e</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>493</attachid>
            <date>2020-03-20 17:55:20 +0000</date>
            <delta_ts>2020-03-20 17:55:20 +0000</delta_ts>
            <desc>Sample patch. Probably needs CRs.</desc>
            <filename>0001-Remove-the-FrameworkHandle-parameter-from-the-SaveFr.patch</filename>
            <type>application/octet-stream</type>
            <size>3959</size>
            <attacher name="Bret Barkelew">bret.barkelew</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2038</bug_id>
          
          <creation_ts>2019-07-31 05:13:03 +0000</creation_ts>
          <short_desc>GenFds multithread generate wrong SectionAlign option for GenFfs command in makefile</short_desc>
          <delta_ts>2022-02-11 10:04:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>steven.shi</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8655</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-07-31 05:13:03 +0000</bug_when>
    <thetext>I find that the build tool will generate ffs build rules in makefile if enable the --genfds-multi-thread option. But all the GenFfs SectionAlign option &apos;-n&apos; is 0, which might be wrong for some modules. Below is a PeiMain example.

In the edk2\Build\OvmfIa32\NOOPT_VS2015x86\IA32\MdeModulePkg\Core\Pei\PeiMain\Makefile, the GenFfs build rule is in below and its &apos;-n&apos; option value is 0.
GenFfs -t EFI_FV_FILETYPE_PEI_CORE -g $(MODULE_GUID) -o $(FFS_OUTPUT_DIR)\$(MODULE_GUID).ffs -oi $(FFS_OUTPUT_DIR)\$(MODULE_GUID)SEC1.1.pe32 -n 0 -oi $(FFS_OUTPUT_DIR)\$(MODULE_GUID)SEC2.ui -oi $(FFS_OUTPUT_DIR)\$(MODULE_GUID)SEC3.ver

But with below build steps, you will see the &apos;-n&apos; option should be 32 in windows.
1. Clean build the Ovmf with --genfds-multi-thread:
build -p OvmfPkg/OvmfPkgIa32.dsc -a IA32 -b NOOPT -t VS2015x86 --genfds-multi-thread
2. change the name of edk2\Build\OvmfIa32\NOOPT_VS2015x86\IA32\MdeModulePkg\Core\Pei\PeiMain\Makefile to Makefile1
3. remove the edk2\Build\OvmfIa32\NOOPT_VS2015x86\IA32\MdeModulePkg\Core\Pei\PeiMain\AutoGenTimeStamp and increamental build the same Ovmf with --genfds-multi-thread again:
build -p OvmfPkg/OvmfPkgIa32.dsc -a IA32 -b NOOPT -t VS2015x86 --genfds-multi-thread

The step3 will generate a new makefile, and rename is as makefile2. You will the GenFfs &apos;-n&apos; option value in makefile2 is 32, not 0.

You can add print in the GenFdsGlobalVariable.py GenerateFfs() method to show the SectionAlign generation in a clean build. And it looks the GenerateFfs() will be invoked twice, the SectionAlign value is 0 in first invokcation, but change to 32 in the second invokcation.

diff --git a/BaseTools/Source/Python/GenFds/GenFdsGlobalVariable.py
@@ -537,6 +537,8 @@ class GenFdsGlobalVariable:
                 Cmd += (&quot;-i&quot;, Input[I])
             if SectionAlign and SectionAlign[I]:
                 Cmd += (&quot;-n&quot;, SectionAlign[I])
+                print (&quot;Input[I] = &quot;, Input[I])
+                print(&quot;SectionAlign[I]= &quot;, SectionAlign[I])</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8656</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-07-31 05:14:30 +0000</bug_when>
    <thetext>Confirm and assign to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18336</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-11 10:04:46 +0000</bug_when>
    <thetext>fixed at SHA-1: d8be01079b3c7b554ac8126e97e73fba8894e519</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2280</bug_id>
          
          <creation_ts>2019-10-16 15:07:14 +0000</creation_ts>
          <short_desc>Add platform code for Intel Comet Lake</short_desc>
          <delta_ts>2020-02-21 00:13:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Kathappan">kathappan.esakkithevar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10047</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 15:07:14 +0000</bug_when>
    <thetext>Platform code should be made available in edk2-platforms that can be used to support open source platforms based on Intel Comet Lake U products (https://ark.intel.com/content/www/us/en/ark/products/codename/90354/comet-lake.html).

This code should follow the EDK II Minimum Platform specification (https://edk2-docs.gitbooks.io/edk-ii-minimum-platform-specification). Consequentially, the code must use the MinPlatformPkg (https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/MinPlatformPkg).

Similar to the code currently in KabylakeOpenBoardPkg (https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/KabylakeOpenBoardPkg), the support necessary to boot a Comet Lake U Reference Validation Platform (RVP) to boot stage IV as defined in the EDK II Minimum Platform specification should be provided. This will allow other board&apos;s sample code to quickly enable Comet Lake board support.

The package for Comet Lake should be called CometlakeOpenBoardPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10250</commentid>
    <comment_count>1</comment_count>
    <who name="Sai Chaganty">rangasai.v.chaganty</who>
    <bug_when>2019-10-31 03:16:38 +0000</bug_when>
    <thetext>Acknowledged. Transferring ownership to Deepika.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10558</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-26 23:50:38 +0000</bug_when>
    <thetext>This is still work-in-progress by Deepika. The current target is to have Comet Lake support in edk2-platforms for the CML LP3 RVP before the end of the year.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11163</commentid>
    <comment_count>3</comment_count>
    <who name="Deepika">deepika.kethi.reddy</who>
    <bug_when>2020-02-07 04:57:04 +0000</bug_when>
    <thetext>This is working in progress by Kathappan and code review will be sent in this week. CometlakeOpenBoardPkg is verified to be working on Cometlake LP3 board.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11260</commentid>
    <comment_count>4</comment_count>
    <who name="Kathappan">kathappan.esakkithevar</who>
    <bug_when>2020-02-14 01:30:48 +0000</bug_when>
    <thetext>First level of code is completed to Add CometlakeOpenBoardPkg support.
	1. CometlakeOpenBoardPkg: Add package and headers
	SHA-Id : 6f00e4731afb1264b312a712e904111363c93b69
	2. CometlakeOpenBoardPkg/CometlakeURvp: Add headers
	SHA-Id : d03252476c42fad8afaade34373a852bc340d9f4
	3. CometlakeOpenBoardPkg: Add library instances
	SHA-Id : 852554068be38a0cd2ec263ff004ee8b51553395
	4. CometlakeOpenBoardPkg/CometlakeURvp: Add library instances
	SHA-Id : 6bf26071f1c244dc897fe1f548caaeff652c4efc
	5. CometlakeOpenBoardPkg: Add modules
	SHA-Id : 65ca075e9d1c717fab63e57473f6a5060f651f4f
	6. CometlakeOpenBoardPkg/CometlakeURvp: Add DSC and build files
	SHA-Id : ec77c4d0409aeb560265d339b3c8ef2fb61b7403
	7. Update Maintainers.txt for CometlakeOpenBoardPkg
	SHA-Id : 2f1cb7447690af36582c6cfbc8fac1a8c128ee36
Second level of code to add Cometlake support in Silicon package and enable global build is in progress.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11380</commentid>
    <comment_count>5</comment_count>
    <who name="Kathappan">kathappan.esakkithevar</who>
    <bug_when>2020-02-21 00:13:56 +0000</bug_when>
    <thetext>Second level of code to add Cometlake support in Silicon package and enable global build has been submitted.

CoffeeLakeSiliconPkg: Add Cometlake U Silicon support
SHA-Id : bb30e3f75babe1a23dd759eddafd208db17d72fc

Enable build for CometlakeOpenBoardPkg
SHA-ID : c07d4b801f2a68ad3e749c091ec48f0b71221a17</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2746</bug_id>
          
          <creation_ts>2020-05-20 22:14:14 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-21 14:38:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12595</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:14:14 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12615</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 05:27:13 +0000</bug_when>
    <thetext>Hi Bret,

the Component field on this ticket has value Placeholder. Can you please clarify what edk2-platforms platform is affected? (Setting the &quot;need_info&quot; keyword.)

If you used a script to file an instance of this BZ for every possible value of the Component field, then we should close this particular instance.

Thanks,
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12641</commentid>
    <comment_count>2</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:38:23 +0000</bug_when>
    <thetext>Agreed. Closing (and will tweak the script to not file against &quot;Placeholder&quot;).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2637</bug_id>
          
          <creation_ts>2020-03-27 22:30:44 +0000</creation_ts>
          <short_desc>EmulatorPkg WinHost Fails to compile with VS2019</short_desc>
          <delta_ts>2020-04-13 01:48:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11879</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-27 22:30:44 +0000</bug_when>
    <thetext>VS2019 can&apos;t compile EmulatorPkg due to missing build options for WinHost

Fix here. https://github.com/spbrogan/edk2/commit/d064488e523edb95824587cd025a332504861de5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11966</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 22:06:16 +0000</bug_when>
    <thetext>guomin: please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11978</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-01 03:15:14 +0000</bug_when>
    <thetext>Same with https://bugzilla.tianocore.org/show_bug.cgi?id=2604, waiting for reviewing changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12006</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-01 10:20:35 +0000</bug_when>
    <thetext>*** Bug 2604 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12191</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-13 01:48:19 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/998d4c98b7c6cef1d47273b400630278d639e881</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2059</bug_id>
          
          <creation_ts>2019-08-07 04:19:57 +0000</creation_ts>
          <short_desc>AdvancedFeaturePkg build failure with GCC Clang and XOCIDE tool chain</short_desc>
          <delta_ts>2019-09-13 12:34:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8820</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-08-07 04:19:57 +0000</bug_when>
    <thetext>GCC5 failure log:

/opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c: In function ‘BmcAcpiEntryPoint’:
/opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:205:69: error: passing argument 2 of ‘LocateSupportProtocol’ from incompatible pointer type [-Werror=incompatible-pointer-types]
   Status = LocateSupportProtocol (&amp;gEfiFirmwareVolume2ProtocolGuid, &amp;FwVol, 1);
                                                                     ^
/opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:50:1: note: expected ‘void **’ but argument is of type ‘EFI_FIRMWARE_VOLUME2_PROTOCOL ** {aka struct _EFI_FIRMWARE_VOLUME2_PROTOCOL **}’
 LocateSupportProtocol (
 ^
/opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:219:87: error: passing argument 5 of ‘FwVol-&gt;ReadSection’ from incompatible pointer type [-Werror=incompatible-pointer-types]
     Status = FwVol-&gt;ReadSection (FwVol, &amp;gEfiCallerIdGuid, EFI_SECTION_RAW, Instance, &amp;CurrentTable, (UINTN *) &amp;Size, &amp;FvStatus);
                                                                                       ^
/opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:219:87: note: expected ‘void **’ but argument is of type ‘EFI_ACPI_COMMON_HEADER ** {aka struct &lt;anonymous&gt; **}’
cc1: all warnings being treated as errors
make: *** [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/IA32/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi/OUTPUT/BmcAcpi.obj] Error 1
GNUmakefile:407: recipe for target &apos;/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/IA32/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi/OUTPUT/BmcAcpi.obj&apos; failed


build.py...
 : error 7000: Failed to execute command
        make tbuild [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/IA32/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi]


build.py...
 : error 7000: Failed to execute command
        make tbuild [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/BmcElog/BmcElog]


build.py...
 : error 7000: Failed to execute command
        make tbuild [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi]


build.py...
 : error 7000: Failed to execute command
        make tbuild [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/IA32/AdvancedFeaturePkg/Smbios/SmbiosBasicDxe/SmbiosBasicDxe]


build.py...
 : error 7000: Failed to execute command
        make tbuild [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/IpmiFru/IpmiFru]


build.py...
 : error F002: Failed to build module
        /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.inf [IA32, GCC5, DEBUG]

- Failed -
Build end time: 01:10:15, Aug.07 2019
Build total time: 00:00:03

GCC49 failure log:

/opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:205:69: error: passing argument 2 of ‘LocateSupportProtocol’ from incompatible pointer type [-Werror]
   Status = LocateSupportProtocol (&amp;gEfiFirmwareVolume2ProtocolGuid, &amp;FwVol, 1);
/opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt.c: In function ‘DriverInit’:
/opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt.c:100:34: error: variable ‘Status’ set but not used [-Werror=unused-but-set-variable]
   EFI_STATUS                     Status;
GNUmakefile:387: recipe for target &apos;/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC49/IA32/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt/OUTPUT/OsWdt.obj&apos; failed
                                  ^
cc1: all warnings being treated as errors
make: *** [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC49/IA32/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt/OUTPUT/OsWdt.obj] Error 1
                                                                     ^


build.py...
 : error 7000: Failed to execute command
        make tbuild [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC49/IA32/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt]
/opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:50:1: note: expected ‘void **’ but argument is of type ‘struct EFI_FIRMWARE_VOLUME2_PROTOCOL **’


build.py...
 : error 7000: Failed to execute command
        make tbuild [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC49/IA32/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi]


build.py...
 : error 7000: Failed to execute command
        make tbuild [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC49/IA32/AdvancedFeaturePkg/Ipmi/SolStatus/SolStatus]


build.py...
 : error F002: Failed to build module
        /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt.inf [IA32, GCC49, DEBUG]

- Failed -
Build end time: 01:12:04, Aug.07 2019
Build total time: 00:00:16</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8886</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:15:17 +0000</bug_when>
    <thetext>Bug Triage: Confirmed. Please have a look.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9384</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-08-28 22:44:08 +0000</bug_when>
    <thetext>(In reply to dandanbi from comment #0)
&gt; GCC5 failure log:
&gt; 
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/
&gt; BmcAcpi.c: In function ‘BmcAcpiEntryPoint’:
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/
&gt; BmcAcpi.c:205:69: error: passing argument 2 of ‘LocateSupportProtocol’ from
&gt; incompatible pointer type [-Werror=incompatible-pointer-types]
&gt;    Status = LocateSupportProtocol (&amp;gEfiFirmwareVolume2ProtocolGuid, &amp;FwVol,
&gt; 1);
&gt;                                                                      ^
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/
&gt; BmcAcpi.c:50:1: note: expected ‘void **’ but argument is of type
&gt; ‘EFI_FIRMWARE_VOLUME2_PROTOCOL ** {aka struct _EFI_FIRMWARE_VOLUME2_PROTOCOL
&gt; **}’
&gt;  LocateSupportProtocol (
&gt;  ^
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/
&gt; BmcAcpi.c:219:87: error: passing argument 5 of ‘FwVol-&gt;ReadSection’ from
&gt; incompatible pointer type [-Werror=incompatible-pointer-types]
&gt;      Status = FwVol-&gt;ReadSection (FwVol, &amp;gEfiCallerIdGuid, EFI_SECTION_RAW,
&gt; Instance, &amp;CurrentTable, (UINTN *) &amp;Size, &amp;FvStatus);
&gt;                                                                             
&gt; ^
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/
&gt; BmcAcpi.c:219:87: note: expected ‘void **’ but argument is of type
&gt; ‘EFI_ACPI_COMMON_HEADER ** {aka struct &lt;anonymous&gt; **}’
&gt; cc1: all warnings being treated as errors
&gt; make: ***
&gt; [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/IA32/AdvancedFeaturePkg/Ipmi/
&gt; BmcAcpi/BmcAcpi/OUTPUT/BmcAcpi.obj] Error 1
&gt; GNUmakefile:407: recipe for target
&gt; &apos;/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/IA32/AdvancedFeaturePkg/Ipmi/
&gt; BmcAcpi/BmcAcpi/OUTPUT/BmcAcpi.obj&apos; failed
&gt; 
&gt; 
&gt; build.py...
&gt;  : error 7000: Failed to execute command
&gt;         make tbuild
&gt; [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/IA32/AdvancedFeaturePkg/Ipmi/
&gt; BmcAcpi/BmcAcpi]
&gt; 
&gt; 
&gt; build.py...
&gt;  : error 7000: Failed to execute command
&gt;         make tbuild
&gt; [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/
&gt; BmcElog/BmcElog]
&gt; 
&gt; 
&gt; build.py...
&gt;  : error 7000: Failed to execute command
&gt;         make tbuild
&gt; [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/
&gt; BmcAcpi/BmcAcpi]
&gt; 
&gt; 
&gt; build.py...
&gt;  : error 7000: Failed to execute command
&gt;         make tbuild
&gt; [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/IA32/AdvancedFeaturePkg/
&gt; Smbios/SmbiosBasicDxe/SmbiosBasicDxe]
&gt; 
&gt; 
&gt; build.py...
&gt;  : error 7000: Failed to execute command
&gt;         make tbuild
&gt; [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/
&gt; IpmiFru/IpmiFru]
&gt; 
&gt; 
&gt; build.py...
&gt;  : error F002: Failed to build module
&gt;        
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/
&gt; BmcAcpi.inf [IA32, GCC5, DEBUG]
&gt; 
&gt; - Failed -
&gt; Build end time: 01:10:15, Aug.07 2019
&gt; Build total time: 00:00:03
&gt; 
&gt; GCC49 failure log:
&gt; 
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/
&gt; BmcAcpi.c:205:69: error: passing argument 2 of ‘LocateSupportProtocol’ from
&gt; incompatible pointer type [-Werror]
&gt;    Status = LocateSupportProtocol (&amp;gEfiFirmwareVolume2ProtocolGuid, &amp;FwVol,
&gt; 1);
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt.c:
&gt; In function ‘DriverInit’:
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt.c:
&gt; 100:34: error: variable ‘Status’ set but not used
&gt; [-Werror=unused-but-set-variable]
&gt;    EFI_STATUS                     Status;
&gt; GNUmakefile:387: recipe for target
&gt; &apos;/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC49/IA32/AdvancedFeaturePkg/Ipmi/
&gt; OsWdt/OsWdt/OUTPUT/OsWdt.obj&apos; failed
&gt;                                   ^
&gt; cc1: all warnings being treated as errors
&gt; make: ***
&gt; [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC49/IA32/AdvancedFeaturePkg/Ipmi/
&gt; OsWdt/OsWdt/OUTPUT/OsWdt.obj] Error 1
&gt;                                                                      ^
&gt; 
&gt; 
&gt; build.py...
&gt;  : error 7000: Failed to execute command
&gt;         make tbuild
&gt; [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC49/IA32/AdvancedFeaturePkg/Ipmi/
&gt; OsWdt/OsWdt]
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/
&gt; BmcAcpi.c:50:1: note: expected ‘void **’ but argument is of type ‘struct
&gt; EFI_FIRMWARE_VOLUME2_PROTOCOL **’
&gt; 
&gt; 
&gt; build.py...
&gt;  : error 7000: Failed to execute command
&gt;         make tbuild
&gt; [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC49/IA32/AdvancedFeaturePkg/Ipmi/
&gt; BmcAcpi/BmcAcpi]
&gt; 
&gt; 
&gt; build.py...
&gt;  : error 7000: Failed to execute command
&gt;         make tbuild
&gt; [/opt/work/Build/AdvancedFeaturePkg/DEBUG_GCC49/IA32/AdvancedFeaturePkg/Ipmi/
&gt; SolStatus/SolStatus]
&gt; 
&gt; 
&gt; build.py...
&gt;  : error F002: Failed to build module
&gt;        
&gt; /opt/work/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt.
&gt; inf [IA32, GCC49, DEBUG]
&gt; 
&gt; - Failed -
&gt; Build end time: 01:12:04, Aug.07 2019
&gt; Build total time: 00:00:16

New failure log now:
/work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/Frb/FrbPei.c:54:1: error: conflicting types for â€˜InitializeFrbPeiâ€™
 InitializeFrbPei (
 ^
In file included from &lt;command-line&gt;:0:0:
/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/Frb/FrbPei/DEBUG/AutoGen.h:63:1: note: previous declaration of â€˜InitializeFrbPeiâ€™ was here
 InitializeFrbPei (
 ^
GNUmakefile:381: recipe for target &apos;/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/Frb/FrbPei/OUTPUT/FrbPei.obj&apos; failed
make: *** [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/Frb/FrbPei/OUTPUT/FrbPei.obj] Error 1


build.py...
 : error 7000: Failed to execute command
	make tbuild [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/Frb/FrbPei]


build.py...
 : error 7000: Failed to execute command
	make tbuild [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/BmcElog/BmcElog]


build.py...
 : error 7000: Failed to execute command
	make tbuild [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi]


build.py...
 : error 7000: Failed to execute command
	make tbuild [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/IpmiInit/PeiIpmiInit]


build.py...
 : error F002: Failed to build module
	/work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/Frb/FrbPei.inf [X64, GCC5, DEBUG]

- Failed -</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9458</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-09-04 21:28:05 +0000</bug_when>
    <thetext>Clang38 build failure:
 /work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:205:69: error: incompatible pointer types passing &apos;EFI_FIRMWARE_VOLUME2_PROTOCOL **&apos; (aka &apos;struct _EFI_FIRMWARE_VOLUME2_PROTOCOL **&apos;) to parameter of type &apos;void **&apos; [-Werror,-Wincompatible-pointer-types]
   Status = LocateSupportProtocol (&amp;gEfiFirmwareVolume2ProtocolGuid, &amp;FwVol, 1);
                                                                     ^~~~~~
 /work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:52:25: note: passing argument to parameter &apos;Instance&apos; here
   OUT  VOID           **Instance,
                         ^
 /work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:219:87: error: incompatible pointer types passing &apos;EFI_ACPI_COMMON_HEADER **&apos; to parameter of type &apos;void **&apos; [-Werror,-Wincompatible-pointer-types]
     Status = FwVol-&gt;ReadSection (FwVol, &amp;gEfiCallerIdGuid, EFI_SECTION_RAW, Instance, &amp;CurrentTable, (UINTN *) &amp;Size, &amp;FvStatus);
                                                                                       ^~~~~~~~~~~~~
 2 errors generated.
 make: *** [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_CLANG38/X64/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi/OUTPUT/BmcAcpi.obj] Error 1
 
 
 build.py...
  : error 7000: Failed to execute command
 	make tbuild [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_CLANG38/X64/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi]
 GNUmakefile:437: recipe for target &apos;/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_CLANG38/X64/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi/OUTPUT/BmcAcpi.obj&apos; failed
 
 
 build.py...
  : error F002: Failed to build module
 	/work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.inf [X64, CLANG38, DEBUG]
 
 - Failed -
 Build end time: 10:42:38, Sep.04 2019
 Build total time: 00:00:13
 

XCODE build failure:
/work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:205:69: error: incompatible pointer types passing &apos;EFI_FIRMWARE_VOLUME2_PROTOCOL **&apos; (aka &apos;struct _EFI_FIRMWARE_VOLUME2_PROTOCOL **&apos;) to parameter of type &apos;void **&apos; [-Werror,-Wincompatible-pointer-types]
   Status = LocateSupportProtocol (&amp;gEfiFirmwareVolume2ProtocolGuid, &amp;FwVol, 1);
                                                                     ^~~~~~
 /work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:52:25: note: passing argument to parameter &apos;Instance&apos; here
   OUT  VOID           **Instance,
                         ^
 /work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.c:219:87: error: incompatible pointer types passing &apos;EFI_ACPI_COMMON_HEADER **&apos; to parameter of type &apos;void **&apos; [-Werror,-Wincompatible-pointer-types]
     Status = FwVol-&gt;ReadSection (FwVol, &amp;gEfiCallerIdGuid, EFI_SECTION_RAW, Instance, &amp;CurrentTable, (UINTN *) &amp;Size, &amp;FvStatus);
                                                                                       ^~~~~~~~~~~~~
 2 errors generated.
 make: *** [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_XCODE5/X64/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi/OUTPUT/BmcAcpi.obj] Error 1
 
 
 build.py...
  : error 7000: Failed to execute command
 	make tbuild [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_XCODE5/X64/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi]
 
 
 build.py...
  : error 7000: Failed to execute command
 	make tbuild [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_XCODE5/X64/AdvancedFeaturePkg/Smbios/SmbiosBasicDxe/SmbiosBasicDxe]
 
 
 build.py...
  : error F002: Failed to build module
 	/work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcAcpi/BmcAcpi.inf [X64, XCODE5, DEBUG]
 
 - Failed -
 Build end time: 10:17:12, Sep.04 2019
 Build total time: 00:00:24</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9635</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-12 02:13:12 +0000</bug_when>
    <thetext>Patch sent to mailing list - GCC5 build is successful
https://edk2.groups.io/g/devel/message/47172</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9658</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-13 12:34:22 +0000</bug_when>
    <thetext>Change submitted. Instructions used to build AdvancedFeaturePkg are described in the commit message.

https://github.com/tianocore/edk2-platforms/commit/4888c1f1725efcee5d6fbd5153e766d889423412</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2530</bug_id>
          
          <creation_ts>2020-02-17 05:31:44 +0000</creation_ts>
          <short_desc>UnitTestFrameworkPkg: Suspicious dereference of pointer Suite  before null check</short_desc>
          <delta_ts>2020-06-03 16:38:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>newexplorerj</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11276</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-17 05:31:44 +0000</bug_when>
    <thetext>UnitTestFrameworkPkg\Library\UnitTestLib\RunTests.c    line 37
Suspicious dereference of pointer &apos;Suite&apos; before NULL check at line 39

UnitTestFrameworkPkg\Library\UnitTestLib\RunTestsCmocka.c   line 439
Suspicious dereference of pointer &apos;Suite&apos; before NULL check at line 444</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11277</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-17 05:32:45 +0000</bug_when>
    <thetext>Assigned to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11286</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-17 20:14:06 +0000</bug_when>
    <thetext>Guomin will check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11520</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-03-04 02:54:04 +0000</bug_when>
    <thetext>(In reply to shenglei.zhang from comment #0)
&gt; UnitTestFrameworkPkg\Library\UnitTestLib\RunTests.c    line 37
&gt; Suspicious dereference of pointer &apos;Suite&apos; before NULL check at line 39
&gt; 
&gt; UnitTestFrameworkPkg\Library\UnitTestLib\RunTestsCmocka.c   line 439
&gt; Suspicious dereference of pointer &apos;Suite&apos; before NULL check at line 444

RunTestsCmocka.c should be UnitTestLib.c.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11524</commentid>
    <comment_count>4</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 05:30:46 +0000</bug_when>
    <thetext>UnitTestLib.c seem ok in the newest master, could you double check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11546</commentid>
    <comment_count>5</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-03-04 22:18:36 +0000</bug_when>
    <thetext>(In reply to newexplorerj from comment #4)
&gt; UnitTestLib.c seem ok in the newest master, could you double check it.

I think the issue still exists.
We can fix this issue through below change.

  if ((Suite == NULL) || (Description == NULL) || (Name == NULL) || (Function 
  == NULL)) {
    return EFI_INVALID_PARAMETER;
  }

  ParentFramework = (UNIT_TEST_FRAMEWORK *)Suite-&gt;ParentFramework;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11553</commentid>
    <comment_count>6</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-05 01:21:42 +0000</bug_when>
    <thetext>Change subject and add missing change, post patch v2 at https://edk2.groups.io/g/devel/message/55476.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11871</commentid>
    <comment_count>7</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-27 01:42:14 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/5bc09cf05a98784d483d9bb9d95a65f14eadb5f6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2899</bug_id>
          
          <creation_ts>2020-08-14 02:01:48 +0000</creation_ts>
          <short_desc>Add LSI 53C895A SCSI controller support to OVMF</short_desc>
          <delta_ts>2020-08-14 02:08:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Gary Lin">glin</reporter>
          <assigned_to name="Gary Lin">glin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13403</commentid>
    <comment_count>0</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2020-08-14 02:01:48 +0000</bug_when>
    <thetext>The LsiScsi driver was proposed(*) and merged in commit range 6ff53d2a1374..3d8327496762. Open this bug entry to record the creation of the driver for stable202008.

(*) https://edk2.groups.io/g/devel/topic/75607028</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13404</commentid>
    <comment_count>1</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2020-08-14 02:02:33 +0000</bug_when>
    <thetext>Closing this bug since the patches are already merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2303</bug_id>
          
          <creation_ts>2019-10-20 10:52:17 +0000</creation_ts>
          <short_desc>Add SPDM device security support</short_desc>
          <delta_ts>2019-11-29 01:37:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10133</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-10-20 10:52:17 +0000</bug_when>
    <thetext>DMTF added SPDM support (https://www.dmtf.org/sites/default/files/standards/documents/DSP0274_0.95a.zip)
for device measurement and authentication.

This bugzilla is to add PCI device measurement and authentication support.

We have discussed the design in EDKII community meeting -  https://edk2.groups.io/g/devel/files/Designs/2019/1018/EDKII-Device%20Firmware%20Security.pdf, with some minor feedback to adjust the interface.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10134</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-10-20 10:58:33 +0000</bug_when>
    <thetext>Scope:
This bugzilla only need:
1) Add SPDM definition.
2) Add the device security protocol.
3) Add device security support in PciBusDxe (consumer of device security protocol).
4) The implementation device security protocol for Intel PCIe device measurement (https://www.intel.com/content/www/us/en/io/pci-express/pcie-device-security-enhancements-spec.html) will be in EDK2-platform repo IntelSiliconPkg. (producer of device security protocol)

Out of scope:
1) The other device security support (such is USB, ATA) is out of scope. It can be resolved later.

2) The detail of other device measurement and device authentication will be done in a separate driver. It can be added later.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10135</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-10-20 10:59:02 +0000</bug_when>
    <thetext>Scope:
This bugzilla only need:
1) Add SPDM definition.
2) Add the device security protocol.
3) Add device security support in PciBusDxe (consumer of device security protocol).
4) The implementation device security protocol for Intel PCIe device measurement (https://www.intel.com/content/www/us/en/io/pci-express/pcie-device-security-enhancements-spec.html) will be in EDK2-platform repo IntelSiliconPkg. (producer of device security protocol)

Out of scope:
1) The other device security support (such is USB, ATA) is out of scope. It can be resolved later.

2) The detail of other device measurement and device authentication will be done in a separate driver. It can be added later.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10253</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-10-31 05:37:12 +0000</bug_when>
    <thetext>the design review is done at 18 Oct, 2019.
https://edk2.groups.io/g/devel/files/Designs/2019/1018

Address the feedback fromt he meeting. Update at:
https://edk2.groups.io/g/devel/files/Designs/2019/1018/EDKII-Device%20Firmware%20Security%20v2.pdf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10264</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:39:13 +0000</bug_when>
    <thetext>Jiewen takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10453</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 22:19:17 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10580</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-29 01:37:54 +0000</bug_when>
    <thetext>Fix at fb92fe9e1817a53ca0fc985447f3c534201a62fa..995d8b8568fe67afffdaac3012d7b990e7314d0b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2658</bug_id>
          
          <creation_ts>2020-04-02 14:18:26 +0000</creation_ts>
          <short_desc>Add bhyve hypervisor support to EDK2</short_desc>
          <delta_ts>2020-08-16 12:26:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="Rebecca Cran">rebecca</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12041</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2020-04-02 14:18:26 +0000</bug_when>
    <thetext>bhyve is the &quot;BSD Hypervisor&quot;. From https://bhyve.org/ :

&quot;bhyve, the &quot;BSD hypervisor&quot;, pronounced &quot;beehive&quot; is a hypervisor/virtual machine manager available on FreeBSD, macOS, and Illumos. The Agenda and Minutes from the by-weekly bhyve conference calls are available online and organizers are pleased to report that several stalled bhyve developement efforts have been resumed.&quot;

It&apos;s currently maintained in a separate repo, which is a copy of edk2 located at https://github.com/freebsd/uefi-edk2.git . However, I&apos;ve been working on minimizing the differences between it and upstream EDK2 in order to work towards potentially pushing bhyve support upstream into the mainline edk2 tree.

If possible, I&apos;d like to get the work finished before the end of April, and get it into the edk2-stable202005 Q2 release.

The current tree is a modification of OvmfPkg to generate a firmware that runs under bhyve instead, but my current plan is to split out the major differences into a new BhyvePkg package, while adding minor changes into OvmfPkg with the approval of Laszlo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12050</commentid>
    <comment_count>1</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-03 00:20:28 +0000</bug_when>
    <thetext>Nothing against Bhyve but I am opposed to adding more platforms to edk2 repo.  I understand this platform enables another OS and I think that is great but I would much rather see a new repo stood up with tianocore/edk2-bhyve than adding this into edk2 core.  Don&apos;t need to rehash the discussion see https://edk2.groups.io/g/devel/message/55739 for a fun chat with different perspectives.  

I would also be happy to help enable Platform CI on Bhyve as a signal into the Edk2 review process so that Edk2 devs making changes can know if they break this platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12056</commentid>
    <comment_count>2</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2020-04-03 11:58:19 +0000</bug_when>
    <thetext>Sean: it seems other people disagree, so I&apos;ll plan to have it in the main edk2 repo for now, especially since bhyve is so similar to ovmf.

That would be really useful if you could help with the CI work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12091</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 21:38:16 +0000</bug_when>
    <thetext>Continue to community discussion for this feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12124</commentid>
    <comment_count>4</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2020-04-07 23:16:44 +0000</bug_when>
    <thetext>Liming: I&apos;m not sure there&apos;s anything to discuss, given there&apos;s such a tight coupling between OvmfPkg and BhyvePkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13409</commentid>
    <comment_count>5</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2020-08-15 01:05:08 +0000</bug_when>
    <thetext>Bhyve has now been committed under OvmfPkg/Bhyve .
Mike, could you update the status etc. please? I&apos;m not sure I have the authority to change it to confirmed, or set the target release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13411</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-16 11:56:40 +0000</bug_when>
    <thetext>Rebecca Cran fixes it. Rebecca, can you specify the fix version?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13412</commentid>
    <comment_count>7</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2020-08-16 12:26:42 +0000</bug_when>
    <thetext>The fix was committed in 656419f922c047a3c48bd3f4ecea7d8e87d0b761 (https://github.com/tianocore/edk2/commit/656419f922c047a3c48bd3f4ecea7d8e87d0b761#diff-9db63d7c9c3a83da8111bb9abaec6b2a).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2552</bug_id>
          
          <creation_ts>2020-02-23 22:08:40 +0000</creation_ts>
          <short_desc>Issues reported by ECC in edk2/CryptoPkg</short_desc>
          <delta_ts>2020-04-08 02:12:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11411</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-23 22:08:40 +0000</bug_when>
    <thetext>CryptoPkg\Library\BaseCryptLibOnProtocolPpi\DxeCryptLib.c  line 35
Function [DxeCryptLibConstructor] has NO comment immediately preceding it.

CryptoPkg\CryptoPkg.dsc    line 61
The Library Class [HashApiLib] is not specified in &apos;CryptoPkg/Library/BaseHashApiLib/BaseHashApiLib.inf&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11412</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-23 22:09:14 +0000</bug_when>
    <thetext>Assigned to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11416</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-24 00:07:20 +0000</bug_when>
    <thetext>Please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11527</commentid>
    <comment_count>3</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 06:53:28 +0000</bug_when>
    <thetext>Hi shenglei,

according to https://edk2.groups.io/g/devel/message/55371, i should add the keywords, but there are related with two library in one package, so i need list them all?

Consider the below case:
I have use ECC to test the code and it report many issue in CryptoPkg, and affect
many files, the logic in those files is ok, the only absence is that lose some comment or copyright.
In the case, i think it is ok that only list the package and i think that the rule can be applied for the bugs.

Could you share some your ideas?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11536</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-03-04 20:44:45 +0000</bug_when>
    <thetext>(In reply to newexplorerj from comment #3)
&gt; Hi shenglei,
&gt; 
&gt; according to https://edk2.groups.io/g/devel/message/55371, i should add the
&gt; keywords, but there are related with two library in one package, so i need
&gt; list them all?

It&apos;s better to handle this case by separating this change into two commits.
Because they are two different kinds of issues. You can send these two patches
to community in one patch series with the cover letter subject like &quot;XXXPkg: Fix ECC issues&quot;

&gt; 
&gt; Consider the below case:
&gt; I have use ECC to test the code and it report many issue in CryptoPkg, and
&gt; affect
&gt; many files, the logic in those files is ok, the only absence is that lose
&gt; some comment or copyright.
&gt; In the case, i think it is ok that only list the package and i think that
&gt; the rule can be applied for the bugs.
&gt; 
&gt; Could you share some your ideas?

For this case, I think it&apos;s ok to only list the package name.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11554</commentid>
    <comment_count>5</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-05 01:46:19 +0000</bug_when>
    <thetext>Separate patch into two subpatch, post patch v2 at https://edk2.groups.io/g/devel/message/55477 and https://edk2.groups.io/g/devel/message/55478.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12135</commentid>
    <comment_count>6</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-08 02:12:11 +0000</bug_when>
    <thetext>Fixed in 9bb1f080c45f7253f9270662d55865a8718cebc8...3ab0dadd6618b7808a27e65d83aa3668462afcf2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2791</bug_id>
          
          <creation_ts>2020-06-09 04:28:54 +0000</creation_ts>
          <short_desc>Platform/Intel: Change type of PcdStatusCodeUseSerial and PcdStatusCodeUseMemory</short_desc>
          <delta_ts>2020-06-28 02:58:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>ming.tan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12821</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-09 04:28:54 +0000</bug_when>
    <thetext>Since the type of PcdStatusCodeUseSerial and PcdStatusCodeUseMemory
in MdeModulePkg.dec are changed, so change them from
PcdsFeatureFlag to PcdsFixedAtBuild in dsc files.

Refer to https://bugzilla.tianocore.org/show_bug.cgi?id=2786 for the change of MdeModulePkg.dec</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12822</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-09 04:29:47 +0000</bug_when>
    <thetext>I will summit patchs for different patforms.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12962</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-28 02:58:13 +0000</bug_when>
    <thetext>The patch was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2465</bug_id>
          
          <creation_ts>2020-01-15 20:24:14 +0000</creation_ts>
          <short_desc>Backward incompatible CPU_MP_DATA struct change breaks FSP boot</short_desc>
          <delta_ts>2020-02-11 00:03:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10909</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-15 20:24:14 +0000</bug_when>
    <thetext>bug 2354 requested that the fields in CPU_MP_DATA (defined in UefiCpuPkg\Library\MpInitLib\MpLib.h) that are accessed in DXE be placed before UINTN struct members since the size will vary depending upon the CPU mode in PEI (e.g. 32-bit) and DXE (e.g. 64-bit).

This change was pushed to edk2 in commit 88bd0661661. Because the fields were moved in a backward incompatible manner, pre-existing binaries such as FSP images hosted on https://github.com/IntelFsp/FSP are incompatible with this change. This causes a GP exception on platforms that use those images.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10910</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-15 20:43:11 +0000</bug_when>
    <thetext>CPU_MP_DATA can be found by HOB in DXE and relative to the IDT offset.

A potential solution to solve this is to revert commit 88bd0661661 and instead pass a new structure to DXE such that the DXE code can fill in the fields of CPU_MP_DATA. If the new structure is not found the default microcode field values can be used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10926</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-16 16:53:02 +0000</bug_when>
    <thetext>The user visible issue with this commit is it causes a CPU exception. This is currently breaking the KabylakeOpenBoardPkg and WhiskeylakeOpenBoardPkg boots.

!!!! X64 Exception Type - 0D(#GP - General Protection)  CPU Apic ID - 00000000 !!!!
ExceptionData - 0000000000000000
RIP  - 000000008A71FBF9, CS  - 0000000000000038, RFLAGS - 0000000000010246
RAX  - 0000000000000007, RCX - 0000000000000001, RDX - 000000008A2DF708
RBX  - 00000000000806E9, RSP - 000000008ADDAA60, RBP - 0000000000000000
RSI  - 8AF0700000000001, RDI - 0000000000000007
R8   - 000000008ADDAA07, R9  - 0000000000000000, R10 - 000000008ADDAA00
R11  - 000000008ADDAA30, R12 - 0000000000000060, R13 - 0000000000000000
R14  - 000000008A2DF340, R15 - 0000000000000000
DS   - 0000000000000030, ES  - 0000000000000030, FS  - 0000000000000030
GS   - 0000000000000030, SS  - 0000000000000030
CR0  - 0000000080010013, CR2 - 0000000000000000, CR3 - 000000008A801000
CR4  - 0000000000000668, CR8 - 0000000000000000
DR0  - 0000000000000000, DR1 - 0000000000000000, DR2 - 0000000000000000
DR3  - 0000000000000000, DR6 - 00000000FFFF0FF0, DR7 - 0000000000000400
GDTR - 000000008B5DDF98 0000000000000047, LDTR - 0000000000000000
IDTR - 000000008A764018 0000000000000FFF,   TR - 0000000000000000
FXSAVE_STATE - 000000008ADDA6C0
!!!! Find image based on IP(0x8A71FBF9) d:\source\git\workspace\Build\KabylakeOpenBoardPkg\KabylakeRvp3\DEBUG_VS2015\X64\UefiCpuPkg\CpuDxe\CpuDxe\DEBUG\CpuDxe.pdb (ImageBase=000000008A715000, EntryPoint=000000008A715EB4) !!!!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11120</commentid>
    <comment_count>3</comment_count>
      <attachid>455</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-06 01:27:11 +0000</bug_when>
    <thetext>Created attachment 455
Patch series

Hello Michael,

Could you help to test if the patches in the attachment can resolve the issue?
Thanks in advance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11121</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-06 01:28:20 +0000</bug_when>
    <thetext>V1 series has been proposed at:
https://edk2.groups.io/g/devel/message/53839</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11196</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-11 00:03:04 +0000</bug_when>
    <thetext>Resolved via commits:
https://github.com/tianocore/edk2/commit/d148a178c14babba30f8cfaa724ffc50da258c0a
https://github.com/tianocore/edk2/commit/348a34d984d5265ae91a6a56f0ccbc613210238d</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>455</attachid>
            <date>2020-02-06 01:27:11 +0000</date>
            <delta_ts>2020-02-06 01:27:11 +0000</delta_ts>
            <desc>Patch series</desc>
            <filename>PatchSeries.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>4588</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2932</bug_id>
          
          <creation_ts>2020-08-26 22:52:37 +0000</creation_ts>
          <short_desc>UEFI spec update for EFI Redfish Config Handler Protocol</short_desc>
          <delta_ts>2021-01-17 21:58:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13548</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-26 22:52:37 +0000</bug_when>
    <thetext>Refer to BZ:https://bugzilla.tianocore.org/show_bug.cgi?id=2911</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13635</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-07 21:27:47 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14822</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-17 21:58:39 +0000</bug_when>
    <thetext>Move this protocol to edk2, don&apos;t have to define spec on UEFI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14823</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-17 21:58:54 +0000</bug_when>
    <thetext>Move this protocol to edk2, don&apos;t have to define spec on UEFI.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2933</bug_id>
          
          <creation_ts>2020-08-26 22:53:59 +0000</creation_ts>
          <short_desc>UEFI spec update of EFI Redfish Credential Protocol</short_desc>
          <delta_ts>2020-12-08 02:41:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13549</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-26 22:53:59 +0000</bug_when>
    <thetext>Refer to BZ:https://bugzilla.tianocore.org/show_bug.cgi?id=2910</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13634</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-07 21:27:39 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14499</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-12-08 02:41:48 +0000</bug_when>
    <thetext>Don&apos;t need to standardize Redfish credential protocol for UEFI system. Because the only consumer of this protocol is edk2 Redfish feature drivers, the Redfish feature drivers are edk2-specific implementation.

This will be implemented as edk2 protocol.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2020</bug_id>
          
          <creation_ts>2019-07-25 21:20:32 +0000</creation_ts>
          <short_desc>EFI_SMRAM_HOB_DESCRIPTOR_BLOCK isn&apos;t defined in MdePkg though it&apos;s in PI spec 1.5</short_desc>
          <delta_ts>2019-08-15 01:22:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Marc Chen">marc.w.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>marc.w.chen</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8596</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-07-25 21:20:32 +0000</bug_when>
    <thetext>PI 1.5 introduces standalone MM infra and also introduces the HOB type EFI_SMRAM_HOB_DESCRIPTOR_BLOCK.
But the definition of this data structure is missing in MdePkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8599</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-07-25 21:28:08 +0000</bug_when>
    <thetext>MinPlatformPkg\Include\Guid\ contains the definition of this HOB type, however.
One option is to directly delete this file in MinPlatformPkg and change all dependent platforms.
The other option is to keep this file as is and change its content to include &lt;Pi/PiHob.h&gt; after the structure is added to PiHob.h.
I prefer the first option.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8899</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:40:04 +0000</bug_when>
    <thetext>Bug Triage: confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9008</commentid>
    <comment_count>3</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-08-15 01:21:22 +0000</bug_when>
    <thetext>Push@d21e5dbbbf11589113d39619b3e01eb1e8966819</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9010</commentid>
    <comment_count>4</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-08-15 01:22:59 +0000</bug_when>
    <thetext>Push@d21e5dbbbf11589113d39619b3e01eb1e8966819</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2721</bug_id>
          
          <creation_ts>2020-05-14 17:18:33 +0000</creation_ts>
          <short_desc>Both ResultReportLibs use wrong bounded StrCpy function.</short_desc>
          <delta_ts>2020-05-27 01:30:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12507</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-14 17:18:33 +0000</bug_when>
    <thetext>Currently both ReportOutput() implementations use AsciiStrCpyS() to copy from the log string to the intermediate output buffer. However, while this function is Safe, it ASSERTs when there&apos;s an error, which actually is not what is desired from the way the loop is wrapped.

Needs to change to AsciiStrnCpyS().

Will post a patch to Mu Basecore.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12529</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-19 16:21:25 +0000</bug_when>
    <thetext>Easy (2-line) patch is available in this commit:
https://github.com/microsoft/mu_basecore/commit/c2e5d8a57219cf5af2fda148452ab061d6fb9670</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12531</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 21:38:48 +0000</bug_when>
    <thetext>Michael: please send this patch before Friday.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12579</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-05-20 21:29:56 +0000</bug_when>
    <thetext>V1 patch on edk2 mailing list: https://edk2.groups.io/g/devel/message/60007</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12737</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-27 01:30:25 +0000</bug_when>
    <thetext>Merge at https://github.com/tianocore/edk2/pull/644</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2613</bug_id>
          
          <creation_ts>2020-03-21 03:53:20 +0000</creation_ts>
          <short_desc>&quot;PATH&quot; variable overloaded that could fail .bat run due to command line too long</short_desc>
          <delta_ts>2020-04-28 22:34:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11759</commentid>
    <comment_count>0</comment_count>
      <attachid>494</attachid>
    <who name="">kun.qin</who>
    <bug_when>2020-03-21 03:53:20 +0000</bug_when>
    <thetext>Created attachment 494
Proposed change to fix this issue

Current implementation would cause overloaded &quot;PATH&quot; variable that could fail .bat run due to command line too long.

The path was passed in as an entire block instead of expected element, thus this call could overload &quot;PATH&quot; variable and fail to run subsequent .bat scripts when the workspace is too deep.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11760</commentid>
    <comment_count>1</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-03-21 17:09:36 +0000</bug_when>
    <thetext>Updated check-in here:
https://github.com/microsoft/mu_basecore/commit/ca2635ea1a4d8505ed20014383972bfc91f08791</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11819</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-24 22:00:56 +0000</bug_when>
    <thetext>Zhiju: please check this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12344</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-28 22:34:45 +0000</bug_when>
    <thetext>This has been resolved in a different patch 
https://github.com/tianocore/edk2/commit/776ec4ea3cbf027d258904a1d0a5b9821d07f2ef

and bugzilla Bug 2659</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>494</attachid>
            <date>2020-03-21 03:53:20 +0000</date>
            <delta_ts>2020-03-21 03:53:20 +0000</delta_ts>
            <desc>Proposed change to fix this issue</desc>
            <filename>0001-Fix-an-issue-could-fail-.bat-run.patch</filename>
            <type>application/octet-stream</type>
            <size>1711</size>
            <attacher>kun.qin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2977</bug_id>
          
          <creation_ts>2020-09-18 14:54:15 +0000</creation_ts>
          <short_desc>Image type in the .map file</short_desc>
          <delta_ts>2020-11-15 20:25:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mircea Gherzan">mircea.gherzan</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>fengyunhua</cc>
    
    <cc>gaoliming</cc>
    
    <cc>isaac.w.oram</cc>
    
    <cc>nathaniel.l.desimone</cc>
    
    <cc>sergey.kiselev</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13713</commentid>
    <comment_count>0</comment_count>
    <who name="Mircea Gherzan">mircea.gherzan</who>
    <bug_when>2020-09-18 14:54:15 +0000</bug_when>
    <thetext>For a source-level BIOS debugger the .map files are quite useful with one major shortcoming: the debugger cannot know, solely from the .map file, the format (PE/COFF vs. TE) of the image included in the final BIOS ROM.

So please add a new field to the map, smth like:

FspSecCoreM (Fixed Flash Address, BaseAddress=0x00ffeb4138, EntryPoint=0x00ffeb42c3, Type=TE)

or 

(GUID=C2F9AE46-3437-4FEF-9CB1-9A568B282FEE .textbaseaddress=0x00ffeb4230 .databaseaddress=0x00ffebc190 type=PE)

or even a new line after the (IMAGE=....) line like

(TYPE=TE)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13751</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 21:58:56 +0000</bug_when>
    <thetext>Agree this request.

Mircea: can you contribute the patch for it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13864</commentid>
    <comment_count>2</comment_count>
    <who name="Mircea Gherzan">mircea.gherzan</who>
    <bug_when>2020-10-02 03:21:25 +0000</bug_when>
    <thetext>Sorry, I have neither the bandwidth nor the technical insights in the EDK2 build tools to submit such a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14135</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-28 01:37:31 +0000</bug_when>
    <thetext>Yunhua has sent the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14355</commentid>
    <comment_count>4</comment_count>
    <who name="yunhua feng">fengyunhua</who>
    <bug_when>2020-11-15 20:25:21 +0000</bug_when>
    <thetext>Fixed at 76e8aac158b0717fa27f12e4d008f79161ddb050</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2751</bug_id>
          
          <creation_ts>2020-05-20 22:14:18 +0000</creation_ts>
          <short_desc>WhiskeylakeOpenBoardPkg: Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2021-03-03 00:42:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12600</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:14:18 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12630</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 05:55:53 +0000</bug_when>
    <thetext>Assigning to package maintainer/reviewer based on &quot;GetMaintainer.py&quot; output.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12718</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-26 21:55:51 +0000</bug_when>
    <thetext>Chasel: can you give the fix plan?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15184</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2021-03-03 00:42:50 +0000</bug_when>
    <thetext>fixed by below commit:
SHA-1: d3cba2c7ea69b075944b6cd5ad9eb3f70af09694

* Platform\Intel\MinPlatformPkg: Add Variable Policy library

Makes the changes because of the new added library instances: VariablePolicyLib
and VariablePolicyHelperLib

Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Signed-off-by: Zhiguang Liu &lt;zhiguang.liu@intel.com&gt;
Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;
Reviewed-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2638</bug_id>
          
          <creation_ts>2020-03-27 22:37:25 +0000</creation_ts>
          <short_desc>EmulatorPkg fails to build IA32 with GCC5</short_desc>
          <delta_ts>2020-04-08 12:21:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2668</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11880</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-27 22:37:25 +0000</bug_when>
    <thetext>When building for IA32 it fails.  

Here is how i build on GCC5.  You can see failure and look at logs here: https://dev.azure.com/tianocore/edk2-ci-play/_build/results?buildId=4917&amp;view=results

Cmd to run is: build -p EmulatorPkg/EmulatorPkg.dsc -b DEBUG -t GCC5 -a IA32 -D ARCH=IA32
2020-03-28T01:15:50.8725274Z INFO - ------------------------------------------------
2020-03-28T01:15:50.8726008Z INFO - --------------Cmd Output Starting---------------
2020-03-28T01:15:50.8726697Z INFO - ------------------------------------------------
2020-03-28T01:15:51.0369159Z INFO - Build environment: Linux-5.0.0-1032-azure-x86_64-with-glibc2.2.5
2020-03-28T01:15:51.0370202Z INFO - Build start time: 01:15:51, Mar.28 2020
2020-03-28T01:15:51.0370816Z INFO - 
2020-03-28T01:15:51.1415396Z INFO - WORKSPACE        = /home/vsts/work/1/s
2020-03-28T01:15:51.1416962Z INFO - PACKAGES_PATH    = .
2020-03-28T01:15:51.1418141Z INFO - EDK_TOOLS_PATH   = /home/vsts/work/1/s/BaseTools
2020-03-28T01:15:51.1419436Z INFO - EDK_TOOLS_BIN    = /home/vsts/work/1/s/BaseTools/Source/C/bin
2020-03-28T01:15:51.1420645Z INFO - CONF_PATH        = /home/vsts/work/1/s/Conf
2020-03-28T01:15:51.1426035Z INFO - PYTHON_COMMAND   = /opt/hostedtoolcache/Python/3.8.2/x64/bin/python
2020-03-28T01:15:51.1688976Z INFO - 
2020-03-28T01:15:51.1827709Z INFO - 
2020-03-28T01:15:51.1828198Z INFO - Architecture(s)  = IA32
2020-03-28T01:15:51.1828730Z INFO - Build target     = DEBUG
2020-03-28T01:15:51.1829153Z INFO - Toolchain        = GCC5
2020-03-28T01:15:51.1829521Z INFO - 
2020-03-28T01:15:51.1830046Z INFO - Active Platform          = /home/vsts/work/1/s/EmulatorPkg/EmulatorPkg.dsc

Here is failure:

2020-03-28T01:16:12.4699045Z INFO - In file included from /home/vsts/work/1/s/EmulatorPkg/Unix/Host/Host.h:24:0,
2020-03-28T01:16:12.4705133Z INFO -                  from /home/vsts/work/1/s/EmulatorPkg/Unix/Host/BerkeleyPacketFilter.c:15:
2020-03-28T01:16:12.4705943Z INFO - /usr/include/stdio.h:27:10: fatal error: bits/libc-header-start.h: No such file or directory
2020-03-28T01:16:12.4706471Z INFO -  #include &lt;bits/libc-header-start.h&gt;
2020-03-28T01:16:12.4709859Z INFO -           ^~~~~~~~~~~~~~~~~~~~~~~~~~
2020-03-28T01:16:12.4710365Z INFO - compilation terminated.
2020-03-28T01:16:12.4745981Z INFO - GNUmakefile:384: recipe for target &apos;/home/vsts/work/1/s/Build/EmulatorIA32/DEBUG_GCC5/IA32/EmulatorPkg/Unix/Host/Host/OUTPUT/BerkeleyPacketFilter.obj&apos; failed
2020-03-28T01:16:12.4747130Z INFO - make: *** [/home/vsts/work/1/s/Build/EmulatorIA32/DEBUG_GCC5/IA32/EmulatorPkg/Unix/Host/Host/OUTPUT/BerkeleyPacketFilter.obj] Error 1

Here is how i build on Windows:

Cmd to run is: build -p EmulatorPkg/EmulatorPkg.dsc -b DEBUG -t VS2019 -a IA32 -D ARCH=IA32 -D WIN_HOST_BUILD=TRUE
INFO - ------------------------------------------------
INFO - --------------Cmd Output Starting---------------
INFO - ------------------------------------------------
INFO - Build environment: Windows-10-10.0.19594-SP0
INFO - Build start time: 19:33:55, Mar.27 2020
INFO - 
INFO - WORKSPACE        = c:\src_2020_q1\edk2-ci-plats\edk2
INFO - EDK_TOOLS_PATH   = c:\src_2020_q1\edk2-ci-plats\edk2\basetools
INFO - EDK_TOOLS_BIN    = c:\src_2020_q1\edk2-ci-plats\edk2\basetools\bin\win32
INFO - CONF_PATH        = C:\src_2020_Q1\edk2-ci-plats\edk2\Conf
INFO - PYTHON_COMMAND   = c:\src_2020_q1\edk2-ci-plats\venv\scripts\python.exe
INFO - 
INFO - 
INFO - Processing meta-data .
INFO - Architecture(s)  = IA32
INFO - Build target     = DEBUG
INFO - Toolchain        = VS2019
INFO - 
INFO - Active Platform          = c:\src_2020_q1\edk2-ci-plats\edk2\EmulatorPkg\EmulatorPkg.dsc

And the failure:
INFO -    Creating library c:\src_2020_q1\edk2-ci-plats\edk2\Build\EmulatorIA32\DEBUG_VS2019\IA32\WinHost.lib and object c:\src_2020_q1\edk2-ci-plats\edk2\Build\EmulatorIA32\DEBUG_VS2019\IA32\WinHost.exp
INFO - Building ... c:\src_2020_q1\edk2-ci-plats\edk2\MdeModulePkg\Universal\Metronome\Metronome.inf [IA32]
INFO - MSVCRTD.lib(gs_support.obj) : error LNK2001: unresolved external symbol __imp__QueryPerformanceCounter@4
INFO - MSVCRTD.lib(gs_support.obj) : error LNK2001: unresolved external symbol __imp__GetCurrentProcessId@0
INFO - MSVCRTD.lib(gs_support.obj) : error LNK2001: unresolved external symbol __imp__GetCurrentThreadId@0
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__GetCurrentThreadId@0
INFO - MSVCRTD.lib(gs_support.obj) : error LNK2001: unresolved external symbol __imp__GetSystemTimeAsFileTime@4
INFO - MSVCRTD.lib(tncleanup.obj) : error LNK2001: unresolved external symbol __imp__InitializeSListHead@4
INFO - MSVCRTD.lib(utility_desktop.obj) : error LNK2001: unresolved external symbol __imp__IsDebuggerPresent@0
INFO - MSVCRTD.lib(utility_desktop.obj) : error LNK2001: unresolved external symbol __imp__UnhandledExceptionFilter@4
INFO - MSVCRTD.lib(gs_report.obj) : error LNK2001: unresolved external symbol __imp__UnhandledExceptionFilter@4
INFO - MSVCRTD.lib(utility_desktop.obj) : error LNK2001: unresolved external symbol __imp__SetUnhandledExceptionFilter@4
INFO - MSVCRTD.lib(gs_report.obj) : error LNK2001: unresolved external symbol __imp__SetUnhandledExceptionFilter@4
INFO - MSVCRTD.lib(utility_desktop.obj) : error LNK2001: unresolved external symbol __imp__GetStartupInfoW@4
INFO - MSVCRTD.lib(utility_desktop.obj) : error LNK2001: unresolved external symbol _IsProcessorFeaturePresent@4
INFO - MSVCRTD.lib(cpu_disp.obj) : error LNK2001: unresolved external symbol _IsProcessorFeaturePresent@4
INFO - MSVCRTD.lib(gs_report.obj) : error LNK2001: unresolved external symbol _IsProcessorFeaturePresent@4
INFO - MSVCRTD.lib(utility_desktop.obj) : error LNK2001: unresolved external symbol __imp__GetModuleHandleW@4
INFO - MSVCRTD.lib(gs_report.obj) : error LNK2001: unresolved external symbol __imp__GetCurrentProcess@0
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__GetCurrentProcess@0
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__GetCurrentProcess@0
INFO - MSVCRTD.lib(gs_report.obj) : error LNK2001: unresolved external symbol __imp__TerminateProcess@8
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__GetStdHandle@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__GetStdHandle@4
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__CreateFileW@28
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__CreateFileW@28
INFO - WinHost.lib(WinBlockIo.obj) : error LNK2001: unresolved external symbol __imp__CreateFileW@28
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__SetFilePointer@16
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__SetFilePointer@16
INFO - WinHost.lib(WinBlockIo.obj) : error LNK2001: unresolved external symbol __imp__SetFilePointer@16
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__WriteFile@20
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__WriteFile@20
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__WriteFile@20
INFO - WinHost.lib(WinBlockIo.obj) : error LNK2001: unresolved external symbol __imp__WriteFile@20
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__HeapAlloc@12
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__HeapAlloc@12
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__HeapFree@12
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__HeapFree@12
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__GetProcessHeap@0
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__GetProcessHeap@0
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__GetCurrentThread@0
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__GetCurrentThread@0
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__SetThreadPriority@8
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__SetThreadPriority@8
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__OpenProcessToken@12
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__SetPriorityClass@8
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__VirtualAlloc@16
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__CreateFileMappingW@24
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__MapViewOfFileEx@24
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__FreeLibrary@4
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__GetProcAddress@8
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__LoadLibraryExW@12
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__AdjustTokenPrivileges@24
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__GetProcessAffinityMask@12
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__SetProcessAffinityMask@8
INFO - WinHost.lib(WinHost.obj) : error LNK2001: unresolved external symbol __imp__LookupPrivilegeValueW@12
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__DuplicateHandle@28
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__InitializeCriticalSection@4
INFO - WinHost.lib(WinGopInput.obj) : error LNK2001: unresolved external symbol __imp__InitializeCriticalSection@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__EnterCriticalSection@4
INFO - WinHost.lib(WinGopInput.obj) : error LNK2001: unresolved external symbol __imp__EnterCriticalSection@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__LeaveCriticalSection@4
INFO - WinHost.lib(WinGopInput.obj) : error LNK2001: unresolved external symbol __imp__LeaveCriticalSection@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__Sleep@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__SuspendThread@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__ResumeThread@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__GetLocalTime@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__SetLocalTime@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__GetTickCount@0
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__GetTimeZoneInformation@4
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__GetTimeZoneInformation@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__SetTimeZoneInformation@4
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__GetConsoleMode@8
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__SetConsoleMode@8
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__GetNumberOfConsoleInputEvents@8
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__ReadConsoleInputW@16
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__PeekConsoleInputW@16
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__timeSetEvent@20
INFO - WinHost.lib(WinThunk.obj) : error LNK2001: unresolved external symbol __imp__timeKillEvent@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__CloseHandle@4
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__CloseHandle@4
INFO - WinHost.lib(WinBlockIo.obj) : error LNK2001: unresolved external symbol __imp__CloseHandle@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__ReleaseSemaphore@12
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__WaitForSingleObject@8
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__CreateSemaphoreW@16
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__CreateThread@24
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__ExitThread@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__TlsAlloc@0
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__TlsGetValue@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__TlsSetValue@8
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__TlsFree@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__SetDIBitsToDevice@48
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__GetMessageW@16
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__TranslateMessage@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__DispatchMessageW@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__SendMessageW@16
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__DefWindowProcW@16
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__PostQuitMessage@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__UnregisterClassW@8
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__RegisterClassExW@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__CreateWindowExW@48
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__DestroyWindow@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__ShowWindow@8
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__MoveWindow@24
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__UpdateWindow@4
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__BeginPaint@8
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__EndPaint@8
INFO - Building ... c:\src_2020_q1\edk2-ci-plats\edk2\NetworkPkg\TcpDxe\TcpDxe.inf [IA32]
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__InvalidateRect@12
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__GetWindowRect@8
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__AdjustWindowRect@12
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__LoadCursorW@8
INFO - WinHost.lib(WinGopScreen.obj) : error LNK2001: unresolved external symbol __imp__LoadIconW@8
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__CreateDirectoryW@8
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__DeleteFileW@4
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__FileTimeToLocalFileTime@8
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__FindClose@4
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__FindFirstFileW@8
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__FindNextFileW@8
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__FlushFileBuffers@4
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__GetDiskFreeSpaceW@20
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__GetDiskFreeSpaceExW@16
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__GetFileAttributesW@4
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__GetFileInformationByHandle@8
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__LocalFileTimeToFileTime@8
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__ReadFile@20
INFO - WinHost.lib(WinBlockIo.obj) : error LNK2001: unresolved external symbol __imp__ReadFile@20
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__RemoveDirectoryW@4
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__SetEndOfFile@4
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__SetFileAttributesW@8
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__SetFileTime@16
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__GetLastError@0
INFO - WinHost.lib(WinBlockIo.obj) : error LNK2001: unresolved external symbol __imp__GetLastError@0
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__MoveFileW@8
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__FileTimeToSystemTime@8
INFO - WinHost.lib(WinFileSystem.obj) : error LNK2001: unresolved external symbol __imp__SystemTimeToFileTime@8
INFO - WinHost.lib(WinGopInput.obj) : error LNK2001: unresolved external symbol __imp__DeleteCriticalSection@4
INFO - c:\src_2020_q1\edk2-ci-plats\edk2\Build\EmulatorIA32\DEBUG_VS2019\IA32\WinHost.exe : fatal error LNK1120: 106 unresolved externals
INFO - Sec.c
INFO - Service.c
INFO - NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\VC\Tools\MSVC\14.24.28314\bin\Hostx86\x86\link.exe&quot;&apos; : return code &apos;0x460&apos;
INFO - Stop.
INFO - 
INFO - 
INFO - build.py...
INFO -  : error 7000: Failed to execute command
INFO - 	C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\VC\Tools\MSVC\14.24.28314\bin\Hostx86\x86\nmake.exe /nologo tbuild [c:\src_2020_q1\edk2-ci-plats\edk2\Build\EmulatorIA32\DEBUG_VS2019\IA32\EmulatorPkg\Win\Host\WinHost]
INFO - 
INFO - 
INFO - build.py...
INFO -  : error F002: Failed to build module
INFO - 	c:\src_2020_q1\edk2-ci-plats\edk2\EmulatorPkg\Win\Host\WinHost.inf [IA32, VS2019, DEBUG]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11965</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 22:05:24 +0000</bug_when>
    <thetext>Guomin: please take it. Platform CI build can use it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11977</commentid>
    <comment_count>2</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-01 02:42:13 +0000</bug_when>
    <thetext>I have resolved the Windows IA32 build. 
You can see change here: https://github.com/spbrogan/edk2/pull/18

For GCC5 IA32 I need more help.  I am not sure I totally follow the build.sh file for running on an x64 version of Linux but building IA32 version of emulator.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12037</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-02 13:08:44 +0000</bug_when>
    <thetext>Hi Sean,

I have seen the same symptom with GCC5 in Ubuntu amd64 machine.

I execute below command before build and the issue disappear:
`sudo apt install -y libc6-dev:i386 libx11-dev:amd64 libxext-dev:amd64 libx11-dev:i386 libxext-dev:i386`

You can tried it.

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12040</commentid>
    <comment_count>4</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-02 14:09:50 +0000</bug_when>
    <thetext>When i run that it fails.

Reading state information... Done
E: Unable to locate package libc6-dev:i386
E: Unable to locate package libx11-dev:i386
E: Unable to locate package libxext-dev:i386

If I do  successfully add the X64 versions and build the emulator for x64 it still segfaults.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12043</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-02 22:05:11 +0000</bug_when>
    <thetext>(In reply to Sean Brogan from comment #4)
&gt; When i run that it fails.
&gt; 
&gt; Reading state information... Done
&gt; E: Unable to locate package libc6-dev:i386
&gt; E: Unable to locate package libx11-dev:i386
&gt; E: Unable to locate package libxext-dev:i386
&gt; 
&gt; If I do  successfully add the X64 versions and build the emulator for x64 it
&gt; still segfaults.
I haven&apos;t encountered the error, but you can add i386 support by running command `dpkg --add-architecture i386` and then try again.

If still fail, i may need the ubuntu version information. you can run command `cat /etc/lsb-release` or `cat /etc/issue`.

You can refer https://bugzilla.tianocore.org/show_bug.cgi?id=403 for X64 issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12045</commentid>
    <comment_count>6</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-02 22:18:53 +0000</bug_when>
    <thetext>adding i386 didn&apos;t change anything. 

DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=18.04
DISTRIB_CODENAME=bionic
DISTRIB_DESCRIPTION=&quot;Ubuntu 18.04.3 LTS&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12066</commentid>
    <comment_count>7</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-04 08:34:26 +0000</bug_when>
    <thetext>(In reply to Sean Brogan from comment #6)
&gt; adding i386 didn&apos;t change anything. 
&gt; 
&gt; DISTRIB_ID=Ubuntu
&gt; DISTRIB_RELEASE=18.04
&gt; DISTRIB_CODENAME=bionic
&gt; DISTRIB_DESCRIPTION=&quot;Ubuntu 18.04.3 LTS&quot;

Thanks, i use the same system version.

You can try the below command sequence.
```
sudo dpkg --add-architecture i386
sudo apt-get update
sudo apt-get install libc6-dev:i386 libx11-dev:i386 libxext-dev:i386
```

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12097</commentid>
    <comment_count>8</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 21:57:52 +0000</bug_when>
    <thetext>Sean will provide the online link to provide more information.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12136</commentid>
    <comment_count>9</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-08 03:02:41 +0000</bug_when>
    <thetext>Ok.  I get different results when using actual VM instead of docker container.  

On the Azure VM i still get an error.  

Can you look at the log here. 

https://dev.azure.com/tianocore/edk2-ci-play/_build/results?buildId=5553&amp;view=logs&amp;j=4d6e86f0-1563-59a3-88e9-1dbdbedf5502&amp;t=fcdd176f-4f20-54fe-1e0c-0870128834f0

In case you cant see the link here is the error.

NFO - &quot;gcc&quot; -o /home/vsts/work/1/s/Build/EmulatorIA32/NOOPT_GCC5/IA32/Host -m32 -L/usr/X11R6/lib -Wl,--start-group,@/home/vsts/work/1/s/Build/EmulatorIA32/NOOPT_GCC5/IA32/EmulatorPkg/Unix/Host/Host/OUTPUT/static_library_files.lst,--end-group -lpthread -ldl -lXext -lX11
INFO - &quot;gcc&quot; -MMD -MF /home/vsts/work/1/s/Build/EmulatorIA32/NOOPT_GCC5/IA32/NetworkPkg/MnpDxe/MnpDxe/OUTPUT/MnpDriver.obj.deps -g -fshort-wchar -fno-builtin -fno-strict-aliasing -Wall -Werror -Wno-array-bounds -ffunction-sections -fdata-sections -include AutoGen.h -fno-common -DSTRING_ARRAY_NAME=MnpDxeStrings -m32 -march=i586 -malign-double -fno-stack-protector -D EFI32 -fno-asynchronous-unwind-tables -Wno-address -fno-pic -fno-pie -O0 -D DISABLE_NEW_DEPRECATED_INTERFACES -c -o /home/vsts/work/1/s/Build/EmulatorIA32/NOOPT_GCC5/IA32/NetworkPkg/MnpDxe/MnpDxe/OUTPUT/./MnpDriver.obj -I/home/vsts/work/1/s/NetworkPkg/MnpDxe -I/home/vsts/work/1/s/Build/EmulatorIA32/NOOPT_GCC5/IA32/NetworkPkg/MnpDxe/MnpDxe/DEBUG -I/home/vsts/work/1/s/MdePkg -I/home/vsts/work/1/s/MdePkg/Include -I/home/vsts/work/1/s/MdePkg/Include/Ia32 -I/home/vsts/work/1/s/NetworkPkg -I/home/vsts/work/1/s/NetworkPkg/Include /home/vsts/work/1/s/NetworkPkg/MnpDxe/MnpDriver.c
INFO - /usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/7/libgcc.a when searching for -lgcc
INFO - /usr/bin/ld: cannot find -lgcc
INFO - /usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/7/libgcc.a when searching for -lgcc
INFO - /usr/bin/ld: cannot find -lgcc
INFO - collect2: error: ld returned 1 exit status
INFO - GNUmakefile:419: recipe for target &apos;/home/vsts/work/1/s/Build/EmulatorIA32/NOOPT_GCC5/IA32/EmulatorPkg/Unix/Host/Host/DEBUG/Host&apos; failed
INFO - make: *** [/home/vsts/work/1/s/Build/EmulatorIA32/NOOPT_GCC5/IA32/EmulatorPkg/Unix/Host/Host/DEBUG/Host] Error 1
INFO -</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12138</commentid>
    <comment_count>10</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-08 04:17:35 +0000</bug_when>
    <thetext>Have confirmed with Sean,

After run below command, the issue disappear. 
```
sudo dpkg --add-architecture i386
sudo apt-get update
sudo apt-get install libc6-dev:i386 libx11-dev:i386 libxext-dev:i386
sudo apt-get install lib32gcc-7-dev
```

Note: the test platform is &apos;Ubuntu 18.04.3 LTS&apos;, the command may be different from other platform.

Hi Sean,
If no any other question, i will close this bug.

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12149</commentid>
    <comment_count>11</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-08 12:13:37 +0000</bug_when>
    <thetext>Closing this as it was just OS dependency issue.  A lot could be done to try to improve the documentation.  Also note that the steps to resolve don&apos;t seem to work on docker ubuntu 18.04 images.

The emulator build still can not boot to shell.  It segfaults in late DXE.  Will open a new bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2531</bug_id>
          
          <creation_ts>2020-02-17 05:35:59 +0000</creation_ts>
          <short_desc>Pointer BinData needs to be checked before used</short_desc>
          <delta_ts>2020-03-27 01:43:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11278</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-17 05:35:59 +0000</bug_when>
    <thetext>MdePkg\Test\UnitTest\Library\BaseLib\Base64UnitTest.c
Pointer &apos;BinData&apos; returned from call to function &apos;AllocatePool&apos; at line 254 may be NULL and may be dereferenced at line 278.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11279</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-17 05:36:42 +0000</bug_when>
    <thetext>Assigned to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11285</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-17 20:13:40 +0000</bug_when>
    <thetext>Guomin will check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11548</commentid>
    <comment_count>3</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 22:50:05 +0000</bug_when>
    <thetext>Have comment at https://edk2.groups.io/g/devel/message/55468, waiting for reviewing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11552</commentid>
    <comment_count>4</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-05 01:02:17 +0000</bug_when>
    <thetext>Update subject and post patch v3 at https://edk2.groups.io/g/devel/message/55475.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11786</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-23 22:01:15 +0000</bug_when>
    <thetext>Provide PATCHv4 at https://edk2.groups.io/g/devel/message/56125.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11872</commentid>
    <comment_count>6</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-27 01:43:15 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/090e267b5bb594d9f2dbe38b2b3562347773826a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2416</bug_id>
          
          <creation_ts>2019-12-11 20:30:46 +0000</creation_ts>
          <short_desc>SMI generation IO port number is unsupported on AMD systems</short_desc>
          <delta_ts>2020-04-21 00:10:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10681</commentid>
    <comment_count>0</comment_count>
      <attachid>442</attachid>
    <who name="">kun.qin</who>
    <bug_when>2019-12-11 20:30:46 +0000</bug_when>
    <thetext>Created attachment 442
Proposed change to fix this issue

The SMI generation io port used in the Tpm.asl to support the Physical Presence interface is 0xB0 for AMD systems. Currently Tpm.asl has this field hardcoded as 0xB2 which would make the AMD systems fail Physical Presence HLK tests.

The proposed solution is to change this field to a fixed Pcd with default value as 0xB2 (to keep it backward compatible). So that AMD systems can use 0xB0 at platform level to proceed with this feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10690</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-12-12 20:14:06 +0000</bug_when>
    <thetext>The request is reasonable. Maintain will check it first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10697</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-12-12 20:29:33 +0000</bug_when>
    <thetext>Agree</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11840</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-25 13:16:11 +0000</bug_when>
    <thetext>Mike, others:

I&apos;d be happy to pick this up and get a patch on the mailing list for review. Please let me know if you&apos;d like to transfer ownership.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12002</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-01 10:03:44 +0000</bug_when>
    <thetext>Michael: please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12042</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-02 20:37:05 +0000</bug_when>
    <thetext>Jiewen, Liming: Any concern with using FixedPcdGetx() in the .asl file?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12079</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-06 14:44:22 +0000</bug_when>
    <thetext>V1 change on the list - https://edk2.groups.io/g/devel/message/56993</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12160</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 18:13:50 +0000</bug_when>
    <thetext>Mailiing list fedback received on v1 patch series - no changes planned. Waiting for maintainer to push the patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12241</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 14:31:34 +0000</bug_when>
    <thetext>Fork with R-bs: https://github.com/makubacki/edk2/pull/new/bz2416_add_smi_io_port_pcd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12264</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-21 00:10:13 +0000</bug_when>
    <thetext>Sumbitted to edk2 in the following two commits (patch series):

https://github.com/tianocore/edk2/commit/cda6f9455c87fc8d69283ea83b6ce55a649b28d0
https://github.com/tianocore/edk2/commit/6e3c834ae47d1201c4ddcc6a6adc5e44718c7617</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>442</attachid>
            <date>2019-12-11 20:30:46 +0000</date>
            <delta_ts>2019-12-11 20:30:46 +0000</delta_ts>
            <desc>Proposed change to fix this issue</desc>
            <filename>0001-Abstract-SMI-generation-io-port-number-to-a-fixed-Pc.patch</filename>
            <type>text/plain</type>
            <size>3996</size>
            <attacher>kun.qin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2304</bug_id>
          
          <creation_ts>2019-10-20 22:38:14 +0000</creation_ts>
          <short_desc>Build.py warning using python 3.8</short_desc>
          <delta_ts>2020-02-13 20:31:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>zhijux.fan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10142</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-10-20 22:38:14 +0000</bug_when>
    <thetext>E:\Work\edk2-platforms\Silicon\Intel&gt;py -3 --version
Python 3.8.0



E:\Work\edk2-platforms\Silicon\Intel&gt;build -p IntelSiliconPkg\IntelSiliconPkg.dsc -a IA32 -a X64 -m IntelSiliconPkg\Feature\VTd\IntelVTdPmrPei\IntelVTdPmrPei.inf -t VS2017
E:\Work\edk2\BaseTools\Source\Python\build\build.py:2067: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  if str(FdRegion.RegionType) is &apos;FILE&apos; and self.Platform.VpdToolGuid in str(FdRegion.RegionDataList):
Build environment: Windows-10-10.0.17134-SP0
Build start time: 09:52:39, Oct.21 2019



build.py...
: error 000E: One Path in PACKAGES_PATH doesn&apos;t exist
        e:\work\R9

- Failed -
Build end time: 09:52:39, Oct.21 2019
Build total time: 00:00:00</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10263</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:36:36 +0000</bug_when>
    <thetext>Zhiju: please fix the issue for higher version python.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10400</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-11-12 01:53:26 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11254</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-02-13 20:31:26 +0000</bug_when>
    <thetext>fixed it in 49fb9f7e06b92aa2f08cc7a24370a06a01b18f85</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2659</bug_id>
          
          <creation_ts>2020-04-02 23:18:46 +0000</creation_ts>
          <short_desc>VS2019 and VS2017 toolchain plugin does not allow caller to request Platform libs and headers for any architecture other than X64</short_desc>
          <delta_ts>2020-04-13 02:47:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12046</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-02 23:18:46 +0000</bug_when>
    <thetext>In the plugin it will find the platform libs and headers.  These are used for Structured Pcd application builds, host based unit tests, and the Emulator Pkg build.  

Currently plugin is hardcoded to use AMD64.

This breaks IA32 builds on emulatorpkg and forces host based tests to be only X64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12047</commentid>
    <comment_count>1</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-02 23:19:42 +0000</bug_when>
    <thetext>Without changing Platform CI can not be easily enabled for EmulatorPkg with VS2019/2017.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12051</commentid>
    <comment_count>2</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-03 00:23:23 +0000</bug_when>
    <thetext>Patch:
https://github.com/spbrogan/edk2/commit/b818c95ffb6176bfd6df5280101c4f1223ab853b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12076</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-06 11:06:15 +0000</bug_when>
    <thetext>Shenglei: please help send this patch to edk2 community for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12196</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-13 02:47:25 +0000</bug_when>
    <thetext>Fixed at 776ec4ea3cbf027d258904a1d0a5b9821d07f2ef</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2553</bug_id>
          
          <creation_ts>2020-02-23 22:29:30 +0000</creation_ts>
          <short_desc>ECC issues in edk2/UefiCpuPkg</short_desc>
          <delta_ts>2020-03-27 01:40:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11413</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-23 22:29:30 +0000</bug_when>
    <thetext>UefiCpuPkg\Library\MpInitLib\PeiMpLib.c   line 643
in Comment, &lt;@param[in] CpuMpData&gt; does NOT have [in, out] 

UefiCpuPkg\Library\MpInitLib\MpLib.h      line 657
in Comment, &lt;@param[in] CpuMpData&gt; does NOT have [in, out] 

UefiCpuPkg\Library\MpInitLib\DxeMpLib.c   line 820
in Comment, &lt;@param[in] CpuMpData&gt; does NOT have [in, out]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11414</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-23 22:30:11 +0000</bug_when>
    <thetext>Assigned to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11415</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-24 00:06:33 +0000</bug_when>
    <thetext>Please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11526</commentid>
    <comment_count>3</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 06:41:56 +0000</bug_when>
    <thetext>Have comment at https://edk2.groups.io/g/devel/message/55398, waiting for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11869</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-27 01:40:03 +0000</bug_when>
    <thetext>Fixed in  https://github.com/tianocore/edk2/commit/4ac82ea1e11ed037468b01655200a425504f2c86</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2792</bug_id>
          
          <creation_ts>2020-06-10 07:32:22 +0000</creation_ts>
          <short_desc>Add Features/Intel/BeepDebugFeaturePkg</short_desc>
          <delta_ts>2020-06-28 02:58:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>DebugFeaturePkg</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>ming.tan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12843</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-10 07:32:22 +0000</bug_when>
    <thetext>In Features/Intel/Debugging, add a new pkg BeepDebugFeaturePkg, used for Beep debug feature.
It should provide a library BeepStatusCodeHandlerLib, used by StatusCodeHandler.efi, to get beep value from status code and beep.
A library BeepMapLib is also needed to map the status code to beep value.
A Null library BeepLib is needed to do the beep.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12844</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-10 07:34:39 +0000</bug_when>
    <thetext>A patch is already submitted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12963</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-28 02:58:29 +0000</bug_when>
    <thetext>The patch was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2676</bug_id>
          
          <creation_ts>2020-04-17 05:12:43 +0000</creation_ts>
          <short_desc>ECC needs to update the contents of CParser4</short_desc>
          <delta_ts>2022-03-01 20:26:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3201</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3206</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12231</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-04-17 05:12:43 +0000</bug_when>
    <thetext>Because Ecc relies on the antlr extension package,
When the antlr version is updated, we need to change the code in it.

Currently, if you use the latest version 4.8, Ecc will fail:
(None if localctx.e is None else self._input.getText((localctx.e.start,localctx.e.stop))))
  File &quot;C:\Python37\lib\site-packages\antlr4\BufferedTokenStream.py&quot;, line 286, in getText
    if start &lt; 0 or stop &lt; 0 or stop &lt; start:
TypeError: &apos;&lt;&apos; not supported between instances of &apos;tuple&apos; and &apos;int&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12340</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-28 21:56:34 +0000</bug_when>
    <thetext>Zhiju: please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12691</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-05-25 01:17:08 +0000</bug_when>
    <thetext>change owner to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18479</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-03-01 20:26:11 +0000</bug_when>
    <thetext>will be fixed in https://bugzilla.tianocore.org/show_bug.cgi?id=3201

*** This bug has been marked as a duplicate of bug 3201 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2466</bug_id>
          
          <creation_ts>2020-01-16 07:05:36 +0000</creation_ts>
          <short_desc>FitGen tool doesn&apos;t handle the above 4G allocated memory address</short_desc>
          <delta_ts>2020-02-06 22:11:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>paul.a.lohr</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10912</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-16 07:05:36 +0000</bug_when>
    <thetext>FitGen tool may run in X64 Linux OS. Memory allocation (malloc) may return the buffer address be above 4G. Current logic always converts the memory address to UINT32. It will cause memory read and free corrupt. FitGen tool should consider this case and use pointer to store the allocated memory address.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10913</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-16 07:06:24 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10946</commentid>
    <comment_count>2</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-01-17 15:38:39 +0000</bug_when>
    <thetext>Hi - we want this checked in by 2020-002 EDK2 Stable Tag.  Please confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11153</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 22:11:53 +0000</bug_when>
    <thetext>Fix at 7fd77ac5ebae1e128b1a1a8b5619185e40d18760 in edk2-platforms</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2934</bug_id>
          
          <creation_ts>2020-08-26 22:57:22 +0000</creation_ts>
          <short_desc>UEFI spec update of EFI Redfish BIOS resource provisioning payload generator protocol</short_desc>
          <delta_ts>2021-04-15 03:38:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13550</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-26 22:57:22 +0000</bug_when>
    <thetext>Refer to BZ:https://bugzilla.tianocore.org/show_bug.cgi?id=2919</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13551</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-26 22:58:51 +0000</bug_when>
    <thetext>(In reply to Chang, Abner from comment #0)
&gt; Refer to BZ:https://bugzilla.tianocore.org/show_bug.cgi?id=2919

Correction:
BZ:https://bugzilla.tianocore.org/show_bug.cgi?id=2918</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13633</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-07 21:27:32 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15696</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-15 03:38:11 +0000</bug_when>
    <thetext>This will be EDKII only protocol.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2021</bug_id>
          
          <creation_ts>2019-07-25 21:21:44 +0000</creation_ts>
          <short_desc>Change from 01.org bug emails to Groups.io</short_desc>
          <delta_ts>2019-10-18 15:37:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephano Cetola">stephano</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8597</commentid>
    <comment_count>0</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 21:21:44 +0000</bug_when>
    <thetext>We currently email edk2-bugs@lists.01.org instead of bugs@edk2.groups.io. This needs to be updated, then 01.org can be notified that we need to move our archive over to Groups.io as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8598</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 21:22:15 +0000</bug_when>
    <thetext>Bug Triage: confirmed. Stephano will handle moving the archive once the email is updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10117</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-18 15:37:35 +0000</bug_when>
    <thetext>Bugzilla configuration updated to send email notifications of bug state changes to bugs@edk2.groups.io

Email archive from lists.01 imported into groups.io</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2364</bug_id>
          
          <creation_ts>2019-11-20 00:29:59 +0000</creation_ts>
          <short_desc>VS2012 Build Warning in VariableParsing.c</short_desc>
          <delta_ts>2019-11-27 00:14:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2220</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10487</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-20 00:29:59 +0000</bug_when>
    <thetext>The variable &quot;Variable&quot; in VariableServiceGetNextVariableInternal () in VariableParsing.c may not be initialized. This is a build warning reported by VS2012.

\edk2\mdemodulepkg\universal\variable\runtimedxe\variableparsing.c(570) : error C2220: warning treated as error - no &apos;executable&apos; file generated

\edk2\mdemodulepkg\universal\variable\runtimedxe\variableparsing.c(570) : warning C4701: potentially uninitialized local variable &apos;Variable&apos; used</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10499</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-20 19:32:51 +0000</bug_when>
    <thetext>The change is work in progress.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10500</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-20 22:25:03 +0000</bug_when>
    <thetext>V1 patch on the mailing list: https://edk2.groups.io/g/devel/message/50990</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10559</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-27 00:14:26 +0000</bug_when>
    <thetext>This change was pushed to edk2/master in the following two commits:
 1. https://github.com/tianocore/edk2/commit/bd85bf54c268204c7a698a96f3ccd96cd77952cd
 2. https://github.com/tianocore/edk2/commit/bbb5b0d648d918c83f2f99b02e3446787dbe474f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2978</bug_id>
          
          <creation_ts>2020-09-20 22:12:26 +0000</creation_ts>
          <short_desc>Incremental build issue as PCD_TOKEN value not change in AutoGen.c and AutoGen.h</short_desc>
          <delta_ts>2021-05-06 05:03:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3052</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Chen Yuwei">yuwei.chen</reporter>
          <assigned_to name="Chen Yuwei">yuwei.chen</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>daniel.schaefer</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13717</commentid>
    <comment_count>0</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-09-20 22:12:26 +0000</bug_when>
    <thetext>When using incremental build to add a new Pcd in INF file [Pcd] section. The PCD_TOKEN value in AutoGen.c &amp; AutoGen.h file will not be changed with the incremental build operation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13750</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 21:53:15 +0000</bug_when>
    <thetext>Yuwei, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13801</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-09-25 11:17:54 +0000</bug_when>
    <thetext>fixed at SHA-1: 3a7a6761143a4840faea0bd84daada3ac0f1bd22</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15931</commentid>
    <comment_count>3</comment_count>
    <who name="Daniel Schaefer">daniel.schaefer</who>
    <bug_when>2021-05-06 05:03:04 +0000</bug_when>
    <thetext>Hmm but this is really just a workaround.
It will make the build slower again.
Is there a plan to make CanSkip work properly with PCDs?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2865</bug_id>
          
          <creation_ts>2020-07-27 13:36:19 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: EFI_SUCCESS not accepted for QueryVariableInfo</short_desc>
          <delta_ts>2020-09-16 01:39:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>nobody</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13178</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-07-27 13:36:19 +0000</bug_when>
    <thetext>In AuthVariableServicesBBTestConformance.c QueryVariableInfo() is called with a legal value of Attributes. Only EFI_UNSUPPORTED is accepted as correct return value.

The correct behavior is to accept both EFI_SUCCESS and EFI_UNSUPPORTED.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13179</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-07-27 13:57:34 +0000</bug_when>
    <thetext>Patch:
https://edk2.groups.io/g/devel/message/63354</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13192</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-28 21:40:28 +0000</bug_when>
    <thetext>The patch is sent for review, and wait for the package maintainer to review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13688</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-09-16 01:39:33 +0000</bug_when>
    <thetext>Patch merged

uefi-sct/SctPkg: fix variable services conformance test
https://github.com/tianocore/edk2-test/commit/891aed7c4fee9c831812fb2d6fc2aeeac6661884</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2640</bug_id>
          
          <creation_ts>2020-03-28 16:22:10 +0000</creation_ts>
          <short_desc>Update  BaseTools/Edk2ToolsBuild.py to use multiple thread on Linux</short_desc>
          <delta_ts>2020-04-07 22:03:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11887</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-28 16:22:10 +0000</bug_when>
    <thetext>Since Azure Pipeline agents have 2 threads we can cut our edk2 base tools build time in half.  ~45 to ~25 seconds.  Obviously on custom agents this would speed things up more.  


See this commit. 
https://github.com/spbrogan/edk2/commit/27af95f9c336787f4a676e469122413995f2b0c9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11963</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 21:54:47 +0000</bug_when>
    <thetext>Michael will help send the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11996</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-01 09:53:55 +0000</bug_when>
    <thetext>Michael: can you help send the patch to edk2 mail list?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12036</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-02 13:06:05 +0000</bug_when>
    <thetext>On the list - https://edk2.groups.io/g/devel/message/56907</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12098</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 21:58:36 +0000</bug_when>
    <thetext>Check whether patch is reviewed or not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12101</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-07 22:03:02 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #4)
&gt; Check whether patch is reviewed or not.

Change was reviewed by Bob and committed to edk2/master: https://github.com/tianocore/edk2/commit/48f0e94921d83b8204f1025412e071b000394f04</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2061</bug_id>
          
          <creation_ts>2019-08-07 14:50:17 +0000</creation_ts>
          <short_desc>BBTestGetStatusFunctionTest() ignores MediaPresentSupported flag</short_desc>
          <delta_ts>2019-10-08 05:50:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="eric.jin">eric.jin</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>stephano</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8836</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-08-07 14:50:17 +0000</bug_when>
    <thetext>BBTestGetStatusFunctionTest() in SctPkg/TestCase/UEFI/EFI/Protocol/SimpleNetwork/BlackBoxTest/SimpleNetworkBBTestFunction.c makes an assertion based in dependence MediaPresent flag of the simple network base protocol.

If the MediaPresentSupported flag is not set on the simple network protocol the presence of the medium cannot be inferred from the MediaPresent flag. Instead it should be assumed that the medium is present.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8885</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:14:21 +0000</bug_when>
    <thetext>Bug Triage: Please confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9885</commentid>
    <comment_count>2</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-09-30 12:54:13 +0000</bug_when>
    <thetext>I believe this was fixed by XianhuiX Liu and Eric.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9907</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-10-02 02:04:37 +0000</bug_when>
    <thetext>commit 9ca84f7ec62d04a43648858c8cd5fadaf2b5f1fa
uefi-sct/SctPkg: Add MediaPresentSupported check

fixes the IHV test.

But what happened to:

https://edk2.groups.io/g/devel/message/47783
[edk2-test][Patch] uefi-sct/SctPkg: Add MediaPresentSupported check

That is the patch meant to fix the reported problem in the EFI test.

It is a bit unfortunate that both patches have the same title.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9934</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-10-07 22:48:20 +0000</bug_when>
    <thetext>(In reply to Heinrich Schuchardt from comment #3)
&gt; commit 9ca84f7ec62d04a43648858c8cd5fadaf2b5f1fa
&gt; uefi-sct/SctPkg: Add MediaPresentSupported check
&gt; 
&gt; fixes the IHV test.
&gt; 
&gt; But what happened to:
&gt; 
&gt; https://edk2.groups.io/g/devel/message/47783
&gt; [edk2-test][Patch] uefi-sct/SctPkg: Add MediaPresentSupported check
&gt; 
&gt; That is the patch meant to fix the reported problem in the EFI test.
&gt; 
&gt; It is a bit unfortunate that both patches have the same title.
&gt; 
&gt; Best regards
&gt; 
&gt; Heinrich

Oh, thank you for the comment, and make me realize the fix in the EFI test is missed.
How about &quot;uefi-sct/SctPkg: Add MediaPresentSupported check in EFI&quot; when we commit this patch?

Best Regards
Eric</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9936</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-10-08 05:50:16 +0000</bug_when>
    <thetext>Patch was merged:

uefi-sct/SctPkg: SNP ReceiveFilters may be unsupported
uefi-sct/SctPkg: Add MediaPresentSupported check in EFI</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2901</bug_id>
          
          <creation_ts>2020-08-17 21:13:26 +0000</creation_ts>
          <short_desc>MpInitLib build failure on CLANGPDB</short_desc>
          <delta_ts>2020-08-24 15:13:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13418</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-17 21:13:26 +0000</bug_when>
    <thetext>This is the regression issue. CLANG reports this error. 

/Edk2/UefiCpuPkg/Library/MpInitLib/MpLib.c:888:15: error: variable &apos;DoDecrement&apos; is used uninitialized whenever &apos;if&apos; condition is false [-Werror,-Wsometimes-uninitialized]
          if (CpuMpData-&gt;InitFlag == ApInitConfig) {
              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Edk2/UefiCpuPkg/Library/MpInitLib/MpLib.c:898:17: note: uninitialized use occurs here
            if (DoDecrement) {
                ^~~~~~~~~~~
/Edk2/UefiCpuPkg/Library/MpInitLib/MpLib.c:888:11: note: remove the &apos;if&apos; if its condition is always true
          if (CpuMpData-&gt;InitFlag == ApInitConfig) {
          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Edk2/UefiCpuPkg/Library/MpInitLib/MpLib.c:886:48: note: initialize the variable &apos;DoDecrement&apos; to silence this warning
          BOOLEAN                   DoDecrement;
                                               ^
                                                = &apos;\0&apos;
1 error generated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13419</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-17 21:14:32 +0000</bug_when>
    <thetext>Tom: please fix it for this stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13428</commentid>
    <comment_count>2</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-08-18 09:12:59 +0000</bug_when>
    <thetext>Fix sent:
  https://edk2.groups.io/g/devel/message/64383</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13476</commentid>
    <comment_count>3</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-08-20 10:54:45 +0000</bug_when>
    <thetext>v2:
  https://edk2.groups.io/g/devel/message/64507</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13508</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-24 15:13:09 +0000</bug_when>
    <thetext>(In reply to thomas.lendacky from comment #3)
&gt; v2:
&gt;   https://edk2.groups.io/g/devel/message/64507

Merged as commit 48a83481d2a2, via &lt;https://github.com/tianocore/edk2/pull/900&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2440</bug_id>
          
          <creation_ts>2019-12-31 04:39:02 +0000</creation_ts>
          <short_desc>An uesless if statement</short_desc>
          <delta_ts>2020-01-10 07:22:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wenyi, Xie">xiewenyi0201</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>newexplorerj</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10766</commentid>
    <comment_count>0</comment_count>
      <attachid>444</attachid>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2019-12-31 04:39:02 +0000</bug_when>
    <thetext>Created attachment 444
the issue snap

I find an if statement is useless in function CheckAuthenticationOperation in file 
edk2\MdeModulePkg\Library\DxeSecurityManagementLib\DxeSecurityManagementLib.c
There are two if statement in the function and if the outside one is true, the inside one will always be true, too.So I feel confused why need the inside if statement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10826</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-09 20:26:13 +0000</bug_when>
    <thetext>will confirm this issue by checking the code</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10835</commentid>
    <comment_count>2</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-01-09 23:16:49 +0000</bug_when>
    <thetext>It seem ok about the below code.
-----
  //
  // When current operation includes measure image operation,
  // only another measure image operation or none operation will be allowed.
  //
  if ((CurrentAuthOperation &amp; EFI_AUTH_OPERATION_MEASURE_IMAGE) == EFI_AUTH_OPERATION_MEASURE_IMAGE) {
    if (((CheckAuthOperation &amp; EFI_AUTH_OPERATION_MEASURE_IMAGE) == EFI_AUTH_OPERATION_MEASURE_IMAGE) ||
        ((CheckAuthOperation &amp; EFI_AUTH_IMAGE_OPERATION_MASK) == EFI_AUTH_OPERATION_NONE)) {
      return TRUE;
    } else {
      return FALSE;
    }
  }
---
CurrentAuthOperation is the first input parameter and when it include EFI_AUTH_OPERATION_MEASURE_IMAGE, should check if the second input parameter CheckAuthOperation include EFI_AUTH_OPERATION_MEASURE_IMAGE or NONE.
Only when condition is meet, it should return TRUE.

The routine is invoked by RegisterSecurityHandler routine, it is replaced by RegisterSecurity2Handler routine, and seem that not used any more. it may be reserved for compatible.

The RegisterSecurity2Handler is invokde by DxeTpmMeasureBootLibConstructor, DxeTpm2MeasureBootLibConstructor, DxeImageVerificationLibConstructor, DxeImageAuthenticationStatusLibConstructor routine.

Consider that some routine will CheckAuthenticationOperation or CheckAuthentication2Operation, the if statement can limit the input.

Currently, the CurrentAuthOperation parameter is always 0, so if statement always not jump in and no any probloem.

In a word, it seem ok and it is meaningful code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10843</commentid>
    <comment_count>3</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2020-01-10 00:49:20 +0000</bug_when>
    <thetext>Ok, I got it, thang you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10846</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-10 07:22:38 +0000</bug_when>
    <thetext>So, if I understand the discussion correctly, the code is good as-is and needs no change. Closing the report therefore.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>444</attachid>
            <date>2019-12-31 04:39:02 +0000</date>
            <delta_ts>2019-12-31 04:39:02 +0000</delta_ts>
            <desc>the issue snap</desc>
            <filename>截图.PNG</filename>
            <type>image/png</type>
            <size>45960</size>
            <attacher name="Wenyi, Xie">xiewenyi0201</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2467</bug_id>
          
          <creation_ts>2020-01-16 07:24:50 +0000</creation_ts>
          <short_desc>DxeHstiLib: uninitialized local variable used in if statement</short_desc>
          <delta_ts>2020-05-06 21:33:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Wenyi, Xie">xiewenyi0201</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10914</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2020-01-16 07:24:50 +0000</bug_when>
    <thetext>function InternalHstiFindAip() in file edk2\MdePkg\Library\DxeHstiLib\HstiDxe.c has an issue, an uninitialized local var InfoTypesBufferCount is used in if statement like below:

Status = Aip-&gt;GetSupportedTypes (
                    Aip,
                    &amp;InfoTypesBuffer,
                    &amp;InfoTypesBufferCount
                    );
if (EFI_ERROR (Status) || (InfoTypesBuffer == NULL) || (InfoTypesBufferCount == 0)) {
  continue;
}


the point of InfoTypesBufferCount is passed to Aip-&gt;GetSupportedTypes,and if Aip-&gt;GetSupportedTypes meet any fail and return,the InfoTypesBufferCount is still uninitilized, it should not be compared with 0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12439</commentid>
    <comment_count>1</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2020-05-06 21:33:55 +0000</bug_when>
    <thetext>I made a mistake，it&apos;s not a issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2935</bug_id>
          
          <creation_ts>2020-08-26 23:02:07 +0000</creation_ts>
          <short_desc>UEFI spec update of EFI SOURCE CODING PROTOCOL</short_desc>
          <delta_ts>2021-01-10 21:59:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13552</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-26 23:02:07 +0000</bug_when>
    <thetext>Refer to https://bugzilla.tianocore.org/show_bug.cgi?id=2914</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13632</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-07 21:27:25 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14771</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-01-10 21:59:30 +0000</bug_when>
    <thetext>Use library instance for now</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2817</bug_id>
          
          <creation_ts>2020-06-18 09:08:47 +0000</creation_ts>
          <short_desc>Avoid using MAX_STRING_SIZE in AsciiStrCpyS()</short_desc>
          <delta_ts>2024-07-01 01:05:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>prarthanasv</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.mathews</cc>
    
    <cc>mcb30</cc>
    
    <cc>prarthanasv</cc>
    
    <cc>vasudevans</cc>
    
    <cc>yi1.li</cc>
          <deadline>2020-06-25</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202002</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12911</commentid>
    <comment_count>0</comment_count>
    <who name="">prarthanasv</who>
    <bug_when>2020-06-18 09:08:47 +0000</bug_when>
    <thetext>In CrtLibSupport.h, AsciiStrCpyS() is sending MAX_STRING_SIZE(1000) as input regardless of the size of string. This will cause overlap assert, if the memory address allocated for Source string lies within (Destination + 1000) address.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12924</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-19 11:57:46 +0000</bug_when>
    <thetext>This comes originally from commit 5c4a3795a54d (&quot;CryptoPkg: Replace string wrapper functions with safe string functions&quot;, 2015-09-02).

I can&apos;t even express how wrong that commit is. One cannot render an &quot;unsafe&quot; strcpy() call site in OpenSSL magically &quot;safe&quot; by hooking AsciiStrCpyS() into it. Trivially, if the destination array provided by OpenSSL is 3 bytes long, and the source string is 6 bytes long, then MAX_STRING_SIZE (0x1000) does precious little to prevent the buffer overflow. This is total security theater. The right solution is to contribute patches to OpenSSL to eliminate strcpy() calls and such.

The primary security problem is not the overlap assert, but the fact that commit 5c4a3795a54d introduced a false sense of security.

(Or was the intent to at least &quot;limit&quot; buffer overflows to the containing page, and maybe the subsequent page?...)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13010</commentid>
    <comment_count>2</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-01 12:36:52 +0000</bug_when>
    <thetext>7/1 infosec mtg:  Agreement with Laszlo this is a valid issue. If openssl resolved the issue on their side w/ string functions, would any changes be required in our wrapper?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13031</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-02 09:25:33 +0000</bug_when>
    <thetext>Hi John,

we should probably delete or replace the strcpy() wrapper macro then, with something else. The exact new macro (or purely a macro deletion) would depend on the solution chosen by OpenSSL.

For example, if OpenSSL replaced strcpy() with proper bounds tracking plus memcpy() invocations, then our existent macro

#define memcpy(dest,source,count) CopyMem(dest,source,(UINTN)(count))

would do the job at once.

Thanks
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13183</commentid>
    <comment_count>4</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-27 14:55:02 +0000</bug_when>
    <thetext>We will do CVSS grading in next Infosec mtg 8/5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13802</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-25 11:18:11 +0000</bug_when>
    <thetext>This is not a security bug, in my opinion.

* Commit 5c4a3795a54d does not introduce a *security* bug where an OpenSSL-native strcpy() call does not already have one.

* Commit 5c4a3795a54d also did not fix any security issues in OpenSSL-native strcpy() calls, in the general case -- therefore, if we determine that commit 5c4a3795a54d was lacking, it does *not* boil down to a *security* problem we thought to have fixed, but failed to fix, with 5c4a3795a54d.

Therefore, the issue (= regression) reported in this ticket is a functional one. It should be fixed alright (possibly by reverting commit 5c4a3795a54d, or by removing strcpy() calls from OpenSSL), but I don&apos;t think it has security impact.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14231</commentid>
    <comment_count>6</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-11-04 13:28:57 +0000</bug_when>
    <thetext>Per discussion in 11/4 Infosec mtg, there is general agreement with Laszlo to open this up &amp; treat as a functional issue.  

If no community concerns are raised by December 2nd Infosec mtg, we will open this to public BZ and treat as normal bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15004</commentid>
    <comment_count>7</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-02-03 13:48:28 +0000</bug_when>
    <thetext>Making this a public BZ per comment 6.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19351</commentid>
    <comment_count>8</comment_count>
    <who name="">prarthanasv</who>
    <bug_when>2022-08-02 13:00:30 +0000</bug_when>
    <thetext>Please update if there are any further updates on fixing this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23088</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Brown">mcb30</who>
    <bug_when>2024-06-04 03:45:12 +0000</bug_when>
    <thetext>Based on the patch provided at https://edk2.groups.io/g/devel/message/119443, it looks as though the current code will cause strcpy() to occasionally and semi-unpredictably become a no-op, and this bug has been present for almost ten years.

I imagine there should be a way to exploit this to achieve a Secure Boot exploit, though I&apos;m not going to put in the effort to figure out how.

Michael</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23165</commentid>
    <comment_count>10</comment_count>
    <who name="yi1.li@intel.com">yi1.li</who>
    <bug_when>2024-07-01 01:05:09 +0000</bug_when>
    <thetext>pushed: https://github.com/tianocore/edk2/commit/df8c61e4c071d1c6ab04e3ebeeb07cf97fc893e0
https://github.com/tianocore/edk2/commit/948f23417010309a5557d46195eae258f6105025
https://github.com/tianocore/edk2/commit/a7dbd2ac7b359644b4961b027d711893132cdb00</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2701</bug_id>
          
          <creation_ts>2020-05-04 03:50:57 +0000</creation_ts>
          <short_desc>System can not go to right page if reconnect flag is enabled.</short_desc>
          <delta_ts>2020-06-11 04:49:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Walon Li">walon.li</reporter>
          <assigned_to name="Walon Li">walon.li</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12367</commentid>
    <comment_count>0</comment_count>
      <attachid>509</attachid>
    <who name="Walon Li">walon.li</who>
    <bug_when>2020-05-04 03:50:57 +0000</bug_when>
    <thetext>Created attachment 509
HiiFormTestDxe_0406.zip

This issue may related with edk2-formbrowser.
According to UEFI 2.8 spec p.1858, system reconnects controller when EFI_IFR_FLAG_RESET_REQUIRED is set. The timing of reconnecting is exiting formset which would happen with moving to different driver page normally.
However, it may happen with form-callback, some driver&apos;s callback would update form inside. It sets UI_ACTION_REFRESH_FORMSET and driver will be reconnected as above mention. After reconnecting driver, this is a new driver for BIOS so system can&apos;t back to original destination page (Dynamic Form) and then back to its parent page (Device Manager).
This issue is reproducible on edk2-emulater as well but I&apos;m not sure that is valid coding convention or edk2 implementation bug. Could you check my demo code (HiiFormTestDxe_0406.zip) for helping?

Reproducible step.
1. Press F2 to enter Setup.
2. Go to Device Manager =&gt; Form Test Formset
3-1. Go to Dynamic Form, can see &quot;Dynamic Item1&quot; =&gt; PASS
3-2. Change &quot;Item 1 - RECONNECT&quot; to &quot;Option 2&quot;. Press F10 for save. Go to Dynamic Form, system will return to Device Manager =&gt; FAIL</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12368</commentid>
    <comment_count>1</comment_count>
      <attachid>510</attachid>
    <who name="Walon Li">walon.li</who>
    <bug_when>2020-05-04 03:52:30 +0000</bug_when>
    <thetext>Created attachment 510
Demo GIF</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12399</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-05 21:49:24 +0000</bug_when>
    <thetext>The patch has been sent for review. Dandan: please review the change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12404</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-05 22:28:54 +0000</bug_when>
    <thetext>The patch is not ready. The proposal is clear.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12759</commentid>
    <comment_count>4</comment_count>
    <who name="Walon Li">walon.li</who>
    <bug_when>2020-05-31 10:59:00 +0000</bug_when>
    <thetext>Propose the solution: https://edk2.groups.io/g/devel/message/59944?p=,,,20,0,0,0::Created,,reconnect,20,2,0,74345701
Have any schedule to pull in solution?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12848</commentid>
    <comment_count>5</comment_count>
    <who name="Walon Li">walon.li</who>
    <bug_when>2020-06-11 04:49:07 +0000</bug_when>
    <thetext>Thank you, Liming and DanDan! I saw the solution be included with edk2-master.
https://github.com/tianocore/edk2/commit/365fdb0f939cf00b26d37f27adbf579aa984221b</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>509</attachid>
            <date>2020-05-04 03:50:57 +0000</date>
            <delta_ts>2020-05-04 03:50:57 +0000</delta_ts>
            <desc>HiiFormTestDxe_0406.zip</desc>
            <filename>HiiFormTestDxe_0406.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>5791</size>
            <attacher name="Walon Li">walon.li</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>510</attachid>
            <date>2020-05-04 03:52:30 +0000</date>
            <delta_ts>2020-05-04 03:52:30 +0000</delta_ts>
            <desc>Demo GIF</desc>
            <filename>demo.gif</filename>
            <type>image/gif</type>
            <size>278821</size>
            <attacher name="Walon Li">walon.li</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2843</bug_id>
          
          <creation_ts>2020-07-08 00:58:43 +0000</creation_ts>
          <short_desc>Partition child handler calculate the start and end LBA with incorrect blocksize</short_desc>
          <delta_ts>2020-10-18 23:22:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13063</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-07-08 00:58:43 +0000</bug_when>
    <thetext>The parameter of PartitionInstallChildHandle Start and End are the start and End LBA of the child handler. But the function uses the parent&apos;s block io&apos;s media block size to calculate the start and end. And calculate the incorrect LastBlock.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13064</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-07-08 00:59:41 +0000</bug_when>
    <thetext>take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13065</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-07-08 01:05:11 +0000</bug_when>
    <thetext>&apos;&apos;&apos;
      HdDev.PartitionNumber = Index + 1;
      HdDev.PartitionStart  = UNPACK_UINT32 (Mbr-&gt;Partition[Index].StartingLBA);
      HdDev.PartitionSize   = UNPACK_UINT32 (Mbr-&gt;Partition[Index].SizeInLBA);
      CopyMem (HdDev.Signature, &amp;(Mbr-&gt;UniqueMbrSignature[0]), sizeof (Mbr-&gt;UniqueMbrSignature));

      ZeroMem (&amp;PartitionInfo, sizeof (EFI_PARTITION_INFO_PROTOCOL));
      PartitionInfo.Revision = EFI_PARTITION_INFO_PROTOCOL_REVISION;
      PartitionInfo.Type     = PARTITION_TYPE_MBR;
      if (Mbr-&gt;Partition[Index].OSIndicator == EFI_PARTITION) {
        PartitionInfo.System = 1;
      }
      CopyMem (&amp;PartitionInfo.Info.Mbr, &amp;Mbr-&gt;Partition[Index], sizeof (MBR_PARTITION_RECORD));

      Status = PartitionInstallChildHandle (
                This,
                Handle,
                DiskIo,
                DiskIo2,
                BlockIo,
                BlockIo2,
                DevicePath,
                (EFI_DEVICE_PATH_PROTOCOL *) &amp;HdDev,
                &amp;PartitionInfo,
                HdDev.PartitionStart,
                HdDev.PartitionStart + HdDev.PartitionSize - 1,
                MBR_SIZE,
                ((Mbr-&gt;Partition[Index].OSIndicator == EFI_PARTITION) ? &amp;gEfiPartTypeSystemPartGuid: NULL)
                );
&apos;&apos;&apos;&apos;
In the above section, the start and end are using the LBA info in the MBR table which are using the sector size, i.e. MBR_SIZE (512 Bytes). But in the ChildHandle function:
&apos;&apos;&apos;.
  Private-&gt;Start            = MultU64x32 (Start, ParentBlockIo-&gt;Media-&gt;BlockSize);
  Private-&gt;End              = MultU64x32 (End + 1, ParentBlockIo-&gt;Media-&gt;BlockSize);
...
  Private-&gt;Media.LastBlock = DivU64x32 (
                               MultU64x32 (
                                 End - Start + 1,
                                 ParentBlockIo-&gt;Media-&gt;BlockSize
                                 ),
                                BlockSize
                               ) - 1;
&apos;&apos;&apos;
It uses the ParentBlockIo-&gt;Media-&gt;BlockSize to calculate the physical address.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13099</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-14 12:04:06 +0000</bug_when>
    <thetext>Zhichao takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13119</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-07-16 23:36:13 +0000</bug_when>
    <thetext>Zhichao,
The code logic is harmless when the device block size equals to 512, such as for harddrive.

But when the physical block size is 2K such as CDROM, the code logic will create child block devices covering wrong range of the block data.

My question is: Is it a regression? Why is this issue found so late?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13351</commentid>
    <comment_count>5</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-08-10 04:35:48 +0000</bug_when>
    <thetext>(In reply to Ray Ni from comment #4)
&gt; Zhichao,
&gt; The code logic is harmless when the device block size equals to 512, such as
&gt; for harddrive.
&gt; 
&gt; But when the physical block size is 2K such as CDROM, the code logic will
&gt; create child block devices covering wrong range of the block data.
&gt; 
&gt; My question is: Is it a regression? Why is this issue found so late?

No, it isn&apos;t a regression. It is incorrect since it implemented.
The issue is only happen on the block device with block size larger than 512, such as CD. But the issue cause the MBR FAT not found which is an expect behavior. The other issue that makes multi partition into one block device make the CD FAT visible. These two issue make the boot behavior not affact. I think that is why the issue wasn&apos;t be found for a long time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13467</commentid>
    <comment_count>6</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-08-20 00:55:43 +0000</bug_when>
    <thetext>fixed at e0eacd7daa6f2e59de2b35a5dfe8bb4c38821e31</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13937</commentid>
    <comment_count>7</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-10-11 21:22:32 +0000</bug_when>
    <thetext>Reopen the BZ, as the code change would cause a capability issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13938</commentid>
    <comment_count>8</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-10-11 21:36:17 +0000</bug_when>
    <thetext>The issue is only found in CD&apos;s (ISO 9660) MBR table. And the CD image would be handled by UDF (Eltorito capbility) handler before check the MBR. That means the MBR table would be ignored.
For Eltorito logic:
&apos;&apos;&apos;
      SubBlockSize  = 512;
      SectorCount   = Catalog-&gt;Boot.SectorCount;

      switch (Catalog-&gt;Boot.MediaType) {

      case ELTORITO_NO_EMULATION:
        SubBlockSize = Media-&gt;BlockSize;
        break;

      case ELTORITO_HARD_DISK:
        break;

      case ELTORITO_12_DISKETTE:
        SectorCount = 0x50 * 0x02 * 0x0F;
        break;

      case ELTORITO_14_DISKETTE:
        SectorCount = 0x50 * 0x02 * 0x12;
        break;

      case ELTORITO_28_DISKETTE:
        SectorCount = 0x50 * 0x02 * 0x24;
        break;

      default:
        DEBUG ((EFI_D_INIT, &quot;EltCheckDevice: unsupported El Torito boot media type %x\n&quot;, Catalog-&gt;Boot.MediaType));
        SectorCount   = 0;
        SubBlockSize  = Media-&gt;BlockSize;
        break;
      }
...
      CdDev.PartitionStart = Catalog-&gt;Boot.Lba * (SIZE_2KB / Media-&gt;BlockSize);
      if (SectorCount &lt; 2) {
        //
        // When the SectorCount &lt; 2, set the Partition as the whole CD.
        //
        if (VolSpaceSize * (SIZE_2KB / Media-&gt;BlockSize) &gt; (Media-&gt;LastBlock + 1)) {
          CdDev.PartitionSize = (UINT32)(Media-&gt;LastBlock - Catalog-&gt;Boot.Lba * (SIZE_2KB / Media-&gt;BlockSize) + 1);
        } else {
          CdDev.PartitionSize = (UINT32)(VolSpaceSize - Catalog-&gt;Boot.Lba) * (SIZE_2KB / Media-&gt;BlockSize);
        }
      } else {
        CdDev.PartitionSize = DivU64x32 (
                                MultU64x32 (
                                  SectorCount * (SIZE_2KB / Media-&gt;BlockSize),
                                  SubBlockSize
                                  ) + Media-&gt;BlockSize - 1,
                                Media-&gt;BlockSize
                                );
      }

      ZeroMem (&amp;PartitionInfo, sizeof (EFI_PARTITION_INFO_PROTOCOL));
      PartitionInfo.Revision = EFI_PARTITION_INFO_PROTOCOL_REVISION;
      PartitionInfo.Type     = PARTITION_TYPE_OTHER;

      Status = PartitionInstallChildHandle (
                This,
                Handle,
                DiskIo,
                DiskIo2,
                BlockIo,
                BlockIo2,
                DevicePath,
                (EFI_DEVICE_PATH_PROTOCOL *) &amp;CdDev,
                &amp;PartitionInfo,
                Catalog-&gt;Boot.Lba * (SIZE_2KB / Media-&gt;BlockSize),
                Catalog-&gt;Boot.Lba * (SIZE_2KB / Media-&gt;BlockSize) + CdDev.PartitionSize - 1,
                SubBlockSize,
                NULL
                );
&apos;&apos;&apos;
The start and end LBA are counted by the parent&apos;s BlockSize. That means the patch e0eacd7daa6f2e59de2b35a5dfe8bb4c38821e31 would make the ELTORITO_HARD_DISK type not be found.

It is a big capability issue. So I suggest to revert the change first as it doesn&apos;t fix any specific issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13953</commentid>
    <comment_count>9</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-13 21:35:25 +0000</bug_when>
    <thetext>Zhichao, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14021</commentid>
    <comment_count>10</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-10-18 23:22:54 +0000</bug_when>
    <thetext>It is incorrect to do a revert with same BZ. I have open a new BZ for the reverting https://bugzilla.tianocore.org/show_bug.cgi?id=3012. Make this BZ as its previous status.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2616</bug_id>
          
          <creation_ts>2020-03-23 12:49:46 +0000</creation_ts>
          <short_desc>Update edk2-pytool-extensions to 0.13.x</short_desc>
          <delta_ts>2020-04-13 02:45:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11772</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-23 12:49:46 +0000</bug_when>
    <thetext>Need to keep CI current.  
Pytool extensions are locked on 0.12.x but extensions has moved to 0.13.x

0.13.0 was a breaking change so might require .pytool/CISettings.py</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11773</commentid>
    <comment_count>1</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-23 12:53:26 +0000</bug_when>
    <thetext>0.13.0 - 0.13.2 are broken for stuart_pr_eval

Fix here in extensions.
https://github.com/tianocore/edk2-pytool-extensions/pull/164

Fixed Version will be 0.13.3

Example of how to fix in edk2 here: https://github.com/microsoft/mu_basecore/pull/54</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11817</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-24 21:57:23 +0000</bug_when>
    <thetext>Shenglei send the patch .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12120</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:26:36 +0000</bug_when>
    <thetext>Shenglei has sent the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12194</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-13 02:45:57 +0000</bug_when>
    <thetext>Fixed at 6fedaa1c04cb155cea5b98b9f5967ba02a320dcf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2515</bug_id>
          
          <creation_ts>2020-02-10 21:16:05 +0000</creation_ts>
          <short_desc>Issues reported by ECC in edk2</short_desc>
          <delta_ts>2020-02-14 02:32:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>newexplorerj</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11190</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-10 21:16:05 +0000</bug_when>
    <thetext>MdeModulePkg\MdeModulePkg.uni
STR_gEfiMdeModulePkgTokenSpaceGuid_PcdTcgPfpMeasurementRevision_PROMPT is missing in the MdeModulePkg.uni file.
STR_gEfiMdeModulePkgTokenSpaceGuid_PcdTcgPfpMeasurementRevision_HELP is missing in the MdeModulePkg.uni file.

MdeModulePkg\Library\UefiBootManagerLib\BmBoot.c     line 2287
The close brace should be at the very beginning of a line for the function [EfiBootManagerRefreshAllBootOption]. 

MdePkg\Include\IndustryStandard\FirmwareInterfaceTable.h
The file name for [MdePkg\Include\IndustryStandard\FirmwareInterfaceTable.h] is duplicate

SecurityPkg\Tcg\Tcg2Pei\Tcg2Dxe.c   line 775
Comment does NOT have prefix /** 
Comment does NOT have tail **/ 

SecurityPkg\Tcg\Tcg2Pei\Tcg2Pei.c   line 463
Comment does NOT have prefix /** 
Comment does NOT have tail **/ 

MdeModulePkg\Bus\Pci\SdMmcPciHcDxe\SdMmcPciHci.c  line 2197
in Comment, &lt;@param[in] Trb&gt; does NOT consistent with parameter name Slot

MdeModulePkg\Bus\Pci\PciBusDxe\PciEnumeratorSupport.c  line 2074
Comment does NOT have prefix /** 
Comment does NOT have tail **/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11194</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-10 22:00:59 +0000</bug_when>
    <thetext>FmpDevicePkg\FmpDxe\FmpDxe.c   line 416
Predicate Expression: IsDepexValid == TRUE


FmpDevicePkg\FmpDxe\Dependency.h   line 41
in Comment, &lt;@param[in] DepexSize&gt; does NOT consistent with parameter name DependenciesSize 

FmpDevicePkg\FmpDxe\Dependency.c   line 163
in Comment, &lt;@param[in] Value&gt; does NOT have [out]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11240</commentid>
    <comment_count>2</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-02-13 02:34:12 +0000</bug_when>
    <thetext>Hi shenglei,

I create pull request for this issue.

Please refer https://github.com/tianocore/edk2/pull/376.

Please feedback if have any suggestions or questions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11241</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-13 02:54:10 +0000</bug_when>
    <thetext>Please follow https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process to send the patches to edk2 mail list devel@edk2.groups.io for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11261</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-14 02:32:21 +0000</bug_when>
    <thetext>Fixed at 5b45b44e6f303dd421110a109ff5cfc2ae8f7555..f9713abe950b3d3e0e27bf87a03b5fa2bc69735f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2285</bug_id>
          
          <creation_ts>2019-10-18 05:12:17 +0000</creation_ts>
          <short_desc>bad pointer operation in UiCustomizeFrontPageBanner</short_desc>
          <delta_ts>2020-03-25 22:52:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10097</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-10-18 05:12:17 +0000</bug_when>
    <thetext>In source MdeModulePkg/Application/UiApp/FrontPageCustomizedUi.c, function UiCustomizeFrontPageBanner() there is the following hunk of code:


129  if ((LineIndex == 5) &amp;&amp; LeftOrRight) {
130    // Update STR_CUSTOMIZE_BANNER_LINE5_LEFT
131    if (PcdGetBool(PcdTestKeyUsed)) {
132      if (BannerStr != NULL) {
133        FreePool(*BannerStr);
134      }
135      *BannerStr = HiiGetString(gFrontPagePrivate.HiiHandle, STRING_TOKEN(STR_TEST_KEY_USED), NULL);
136    }
137  }

The null check on BannerStr looks incorrect. I believe it should be:

     if (*BannerStr != NULL)

If it isn&apos;t, and one really *is* checking that BannerStr is not NULL then this implies BannerStr could be null, in which case one will have a null pointer deference on line 135 with the assignment to *BannerStr.  Either way, this code looks wrong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10275</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:57:54 +0000</bug_when>
    <thetext>Shenglei: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11324</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-19 22:05:29 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11326</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 23:13:15 +0000</bug_when>
    <thetext>please check</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11329</commentid>
    <comment_count>4</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-02-20 03:40:48 +0000</bug_when>
    <thetext>The UiCustomizeFrontPageBanner routine will work only for line 5, the current caller is UpdateFrontPageBannerStrings routine.

When UiCustomizeFrontPageBanner is invoked, the HiiGetString routine will be invoked first, HiiGetString will use STRING_TOKEN.

In current implementation, the AutoGen.StrGather require that the STRING_TOKEN must be present, it mean that the STRING_TOKEN(STR_CUSTOMIZE_BANNER_LINE5_LEFT) will always be present, otherwise build error will happened.

So BannerStr of UiCustomizeFrontPageBanner will not be NULL and *BannerStr will not be NULL as well.

I think condition (BannerStr != NULL) of UiCustomizeFrontPageBanner will always be TRUE and FreePool(*BannerStr) will always be run. it is correct, because UiCustomizeFrontPageBanner will get new string immediately so it need free old unnecessary allocated pool.

So in my opinion, the code is ok.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11549</commentid>
    <comment_count>5</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-05 00:30:36 +0000</bug_when>
    <thetext>Update status</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11805</commentid>
    <comment_count>6</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-24 09:16:00 +0000</bug_when>
    <thetext>Hi Colin,

Can you help update the status?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11806</commentid>
    <comment_count>7</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2020-03-24 09:45:35 +0000</bug_when>
    <thetext>Maybe I didn&apos;t explain my point clearly enough.

132      if (BannerStr != NULL) {
133        FreePool(*BannerStr);
134      }

When BannerStr is not-null, the FreePool() call is referencing *BannerStr.  I was supposing *BannerStr is an address, so what happens if that address is null, e.g. when:

BannerStr is not-null
*BannerStr is null
so what does FreePool(NULL) do?

Colin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11837</commentid>
    <comment_count>8</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-25 11:10:54 +0000</bug_when>
    <thetext>Colin,

If you only focus on the function rather than context, it seem like a issue.

But when you pay attention to the context, you will see UpdateFrontPageBannerStrings() -&gt; UiCustomizeFrontPageBanner() and the *BannerStr will always not be NULL.

You may consider any other body will use it directly, but UiCustomizeFrontPageBanner is not common API, and i think it is meaningless that just use it but no care context.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11838</commentid>
    <comment_count>9</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2020-03-25 11:32:34 +0000</bug_when>
    <thetext>OK, lets close this issue then. Thanks for your time in investigating this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11853</commentid>
    <comment_count>10</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-25 22:52:17 +0000</bug_when>
    <thetext>It is specific internal routine for specific module, and the case won&apos;t happen in this case.

it may make sense that open a topic about common interface and provide a specification or guide, i think it can refer stdlib design.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2754</bug_id>
          
          <creation_ts>2020-05-21 14:54:22 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-21 14:56:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12642</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:54:22 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12657</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:56:53 +0000</bug_when>
    <thetext>Bad, script! Bad!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2179</bug_id>
          
          <creation_ts>2019-09-09 13:40:02 +0000</creation_ts>
          <short_desc>Thunk16 related APIs can be removed from BaseLib</short_desc>
          <delta_ts>2020-02-16 20:39:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>dwmw2</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9556</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-09-09 13:40:02 +0000</bug_when>
    <thetext>Since CSM support is removed from EDKII, below APIs and accordingly implementations can be dropped from BaseLib:
  AsmPrepareThunk16
  AsmThunk16
  AsmPrepareAndThunk16</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9622</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-11 14:04:39 +0000</bug_when>
    <thetext>Hi Ray,

CSM support has not been removed from edk2; it has been moved to OvmfPkg instead.

Minimally, AsmThunk16() and AsmPrepareThunk16() are called from &quot;OvmfPkg/Csm/LegacyBiosDxe/Thunk.c&quot;.

Rather than deleting these functions from BaseLib, please move them under OvmfPkg/Csm/ (and please CC David on the patches). If the functions are called from one module only, I think they can be made module-internal. Otherwise, a new library class + instance could become necessary under OvmfPkg, so that the code moved from BaseLib can be reused by all client modules.

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9625</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-09-11 16:27:37 +0000</bug_when>
    <thetext>Laszlo,
Thanks for the reminding. I prefer to move them to module-internal if there is only one module that uses them. More library classes confuse developers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9735</commentid>
    <comment_count>3</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-09-19 20:17:56 +0000</bug_when>
    <thetext>Ray will work with Laszlo on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11264</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-02-16 20:39:57 +0000</bug_when>
    <thetext>Per Mike&apos;s comments, Thunk16 implementation is preferred to leave in BaseLib. There might be some cases that need to invoke 16bit code.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2062</bug_id>
          
          <creation_ts>2019-08-07 14:53:09 +0000</creation_ts>
          <short_desc>GetVariable not returning attributes on EFI_BUFFER_TOO_SMALL</short_desc>
          <delta_ts>2020-04-07 10:24:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1090</see_also>
    
    <see_also>https://mantis.uefi.org/mantis/view.php?id=1954</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable201905</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8837</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-08-07 14:53:09 +0000</bug_when>
    <thetext>According to UEFI Spec 2.8, section 8.2:GetVariable, Attributes should be returned even if the call is returning EFI_BUFFER_TOO_SMALL.

However, the implementation in MdeModulePkg\Universal\Variable\RuntimeDxe\Variable.c currently doesn&apos;t seem to do that. I think this can be solved by moving the Attribute set outside of the if(*DataSize&gt;=VarDataSize) in VariableServiceGetVariable().

Will link to the PR/patch after I get it staged for Mu.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8841</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-08-07 17:21:40 +0000</bug_when>
    <thetext>PR with patch can be found here:
https://github.com/microsoft/mu_basecore/pull/36</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8878</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-08 17:07:06 +0000</bug_when>
    <thetext>Background: bug 1090.

Mantis ticket: &lt;https://mantis.uefi.org/mantis/view.php?id=1954&gt;.

Once this patch is fixed, edk2 commit 6896efdec270 should be reverted.

Please consider including the revert patch for commit 6896efdec270 when posting the series for the present BZ. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8881</commentid>
    <comment_count>3</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:06:54 +0000</bug_when>
    <thetext>Bug Triage: please have a look at Bret&apos;s PR and see if that makes sense.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10979</commentid>
    <comment_count>4</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-01-27 13:36:08 +0000</bug_when>
    <thetext>Any update here?

This is pretty old and it&apos;s a cut-and-dry fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11575</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-03-05 20:19:56 +0000</bug_when>
    <thetext>Hao, please let me know if you have started work on this. If not, I&apos;d be happy to make the change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11580</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-03-05 20:28:18 +0000</bug_when>
    <thetext>(In reply to michael.kubacki from comment #5)
&gt; Hao, please let me know if you have started work on this. If not, I&apos;d be
&gt; happy to make the change.

Hello Michael,

No, I have not started working on this.
Appreciate if you can help on it. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11583</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-03-05 21:28:41 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #6)
&gt; (In reply to michael.kubacki from comment #5)
&gt; &gt; Hao, please let me know if you have started work on this. If not, I&apos;d be
&gt; &gt; happy to make the change.
&gt; 
&gt; Hello Michael,
&gt; 
&gt; No, I have not started working on this.
&gt; Appreciate if you can help on it. Thanks.

I took it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11651</commentid>
    <comment_count>8</comment_count>
      <attachid>476</attachid>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-10 17:19:52 +0000</bug_when>
    <thetext>Created attachment 476
patch_v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11652</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-10 17:21:07 +0000</bug_when>
    <thetext>I&apos;m just waiting on an internal SMTP access approval and then I&apos;ll send the attached patch to the list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11810</commentid>
    <comment_count>10</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-24 18:22:17 +0000</bug_when>
    <thetext>V1 patch is on the mailing list: https://edk2.groups.io/g/devel/message/56221</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11821</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-24 22:03:54 +0000</bug_when>
    <thetext>IN_PROGRESS per comment 10.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11850</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-25 14:52:54 +0000</bug_when>
    <thetext>v2 on the list (unfortunately posted without (shallow) threading):

[edk2-devel] [PATCH v2 0/2] Return GetVariable() attr if EFI_BUFFER_TOO_SMALL
[edk2-devel] [PATCH v2 1/2] MdeModulePkg/Variable: Return GetVariable() attr if EFI_BUFFER_TOO_SMALL
[edk2-devel] [PATCH v2 2/2] Revert &quot;NetworkPkg/TlsAuthConfigDxe: fix TlsCaCertificate attributes retrieval&quot;

https://edk2.groups.io/g/devel/message/56239
https://edk2.groups.io/g/devel/message/56240
https://edk2.groups.io/g/devel/message/56241

http://mid.mail-archive.com/MWHPR07MB3440948AAFF7E44A3062784FE9CE0@MWHPR07MB3440.namprd07.prod.outlook.com
http://mid.mail-archive.com/MWHPR07MB34404E9F6AB4FDA4499153E9E9CE0@MWHPR07MB3440.namprd07.prod.outlook.com
http://mid.mail-archive.com/MWHPR07MB34409185438E83EADD0AB911E9CE0@MWHPR07MB3440.namprd07.prod.outlook.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11922</commentid>
    <comment_count>13</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-30 13:44:59 +0000</bug_when>
    <thetext>v3 on the list.

[PATCH v3 0/3] Return GetVariable() attr if EFI_BUFFER_TOO_SMALL
https://edk2.groups.io/g/devel/message/56512

[PATCH v3 1/3] MdeModulePkg Variable: Return GetVariable() attr if EFI_BUFFER_TOO_SMALL
https://edk2.groups.io/g/devel/message/56513

[PATCH v3 2/3] MdeModulePkg VariablePei: Return GetVariable() attr if EFI_BUFFER_TOO_SMALL
https://edk2.groups.io/g/devel/message/56514

[PATCH v3 3/3] Revert &quot;NetworkPkg/TlsAuthConfigDxe: fix TlsCaCertificate attributes retrieval&quot;
https://edk2.groups.io/g/devel/message/56515</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12083</commentid>
    <comment_count>14</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-04-07 10:24:44 +0000</bug_when>
    <thetext>Pushed @ edf88807f7..9bb1f080c4</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>476</attachid>
            <date>2020-03-10 17:19:52 +0000</date>
            <delta_ts>2020-03-10 17:19:52 +0000</delta_ts>
            <desc>patch_v1</desc>
            <filename>0001-MdeModulePkg-Variable-Return-GetVariable-attr-if-EFI.patch</filename>
            <type>text/plain</type>
            <size>4094</size>
            <attacher name="Michael Kubacki">michael.kubacki</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2902</bug_id>
          
          <creation_ts>2020-08-17 22:48:21 +0000</creation_ts>
          <short_desc>Platform/ARM/SgiPkg: some files still use BSD license</short_desc>
          <delta_ts>2021-04-30 13:38:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13420</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-17 22:48:21 +0000</bug_when>
    <thetext>Below source files still use BSD license. They should use SPDX-License-Identifier: BSD-2-Clause-Patent.

g:\Edk2-Open-Source\edk2-platforms\Platform\ARM\SgiPkg\AcpiTables\RdDanielCfgMAcpiTables.inf
g:\Edk2-Open-Source\edk2-platforms\Platform\ARM\SgiPkg\AcpiTables\RdDanielCfgXlrAcpiTables.inf
g:\Edk2-Open-Source\edk2-platforms\Platform\ARM\SgiPkg\AcpiTables\SsdtRos.asl
g:\Edk2-Open-Source\edk2-platforms\Platform\ARM\SgiPkg\AcpiTables\RdDanielCfgM\Dsdt.asl
g:\Edk2-Open-Source\edk2-platforms\Platform\ARM\SgiPkg\AcpiTables\RdDanielCfgM\Madt.aslc
g:\Edk2-Open-Source\edk2-platforms\Platform\ARM\SgiPkg\AcpiTables\RdDanielCfgXlr\Dsdt.asl
g:\Edk2-Open-Source\edk2-platforms\Platform\ARM\SgiPkg\AcpiTables\RdDanielCfgXlr\Madt.aslc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13421</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-17 22:49:39 +0000</bug_when>
    <thetext>@Ard, can you help follow up?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13429</commentid>
    <comment_count>2</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-08-18 10:18:18 +0000</bug_when>
    <thetext>Patch to fix this has been posted at https://edk2.groups.io/g/devel/message/64386</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13433</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-18 21:19:23 +0000</bug_when>
    <thetext>Sami is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15851</commentid>
    <comment_count>4</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2021-04-30 13:38:15 +0000</bug_when>
    <thetext>This has been fixed in edk2-platforms master at https://github.com/tianocore/edk2-platforms/commit/e3461bfe3d3fcab6250758bb87f68a6394207c33</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2200</bug_id>
          
          <creation_ts>2019-09-18 01:24:49 +0000</creation_ts>
          <short_desc>Add support for FuSa ACM</short_desc>
          <delta_ts>2020-04-22 08:40:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2687</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Sachin Agrawal">sachin.agrawal</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>nobody</cc>
    
    <cc>paul.a.lohr</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9703</commentid>
    <comment_count>0</comment_count>
    <who name="Sachin Agrawal">sachin.agrawal</who>
    <bug_when>2019-09-18 01:24:49 +0000</bug_when>
    <thetext>FitGen Tool is responsible for creating FIT table in BIOS. One of the platforms is introducing a ACM for Functional Safety feature. A new FIT entry type (FIT Type 0x3) has been allocated for this FuSa ACM.

FitGen tool needs to be updated to add support for this FuSa ACM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10083</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:45:38 +0000</bug_when>
    <thetext>Please follow up with a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10916</commentid>
    <comment_count>2</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-01-16 08:13:06 +0000</bug_when>
    <thetext>Spec update is finished.  Publish is WIP, likely by WW03.5&apos;20.  Ok to submit this change for FitGen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10945</commentid>
    <comment_count>3</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-01-17 15:38:23 +0000</bug_when>
    <thetext>Hi - we want this checked in by 2020-002 EDK2 Stable Tag.  Please confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10967</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-22 20:19:54 +0000</bug_when>
    <thetext>Hi Mike, this should in the IntelSiliconPkg Component but it does not exist. I&apos;ve assigned it to you to create the Component and move ownership to the package owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10972</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-23 14:44:56 +0000</bug_when>
    <thetext>(In reply to michael.a.kubacki from comment #4)
&gt; Hi Mike, this should in the IntelSiliconPkg Component but it does not exist.
&gt; I&apos;ve assigned it to you to create the Component and move ownership to the
&gt; package owner.

I meant The Intel/Tools directory not IntelSiliconPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11056</commentid>
    <comment_count>6</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-02-03 15:24:55 +0000</bug_when>
    <thetext>FIT BIOS Spec 1.1 has been publicly released, with FuSa support.  Below link may require using &quot;incongnito mode&quot; in chrome.

https://www.intel.com/content/www/us/en/products/docs/firmware-interface-table/fit-bios-specification.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11125</commentid>
    <comment_count>7</comment_count>
    <who name="Sachin Agrawal">sachin.agrawal</who>
    <bug_when>2020-02-06 13:13:37 +0000</bug_when>
    <thetext>The updated FIT spec has been published and the  patch with the changes have also been send for review.
Can we have this feature added for edk2-stable202002 ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11247</commentid>
    <comment_count>8</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-02-13 16:55:32 +0000</bug_when>
    <thetext>Hi - can we get this into 2020.02?  We have the code changes ready.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11252</commentid>
    <comment_count>9</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-13 20:07:21 +0000</bug_when>
    <thetext>This has been fixed at edk2-platform 8864a1ad2f090e8f71bb4a5da873baf903f5e053</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2108</bug_id>
          
          <creation_ts>2019-08-21 23:31:02 +0000</creation_ts>
          <short_desc>Duplicated header files are found in Edk2Platforms</short_desc>
          <delta_ts>2019-09-11 17:38:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Marc Chen">marc.w.chen</assigned_to>
          <cc>nathaniel.l.desimone</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9142</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-21 23:31:02 +0000</bug_when>
    <thetext>SmramMemoryReserve.h has been added into Edk2\MdePkg\Include\Guid\SmramMemoryReserve.h.

The following duplicated header file can be clean up. 
Edk2Platforms\Platform\Intel\MinPlatformPkg\Include\Guid\SmramMemoryReserve.h
Edk2Platforms\Silicon\Intel\KabylakeSiliconPkg\SampleCode\IntelFrameworkPkg\Include\Guid\SmramMemoryReserve.h
Edk2Platforms\Silicon\Intel\PurleySktPkg\Include\Guid\SmramMemoryReserve.h
Edk2Platforms\Silicon\Intel\QuarkSocPkg\QuarkNorthCluster\Include\Guid\SmramMemoryReserve.h
Edk2Platforms\Silicon\Intel\CoffeelakeSiliconPkg\SampleCode\IntelFrameworkPkg\Include\Guid\SmramMemoryReserve.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9143</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-21 23:31:35 +0000</bug_when>
    <thetext>Confirm this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9627</commentid>
    <comment_count>2</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2019-09-11 17:38:36 +0000</bug_when>
    <thetext>The patch series has been pushed as de0fb79a14..8bda7e434b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2936</bug_id>
          
          <creation_ts>2020-08-26 23:04:43 +0000</creation_ts>
          <short_desc>UEFI spec update of EFI_REDFISH_PLATFORM_BIOS_RESOURCE_PROTOCOL</short_desc>
          <delta_ts>2021-04-15 03:38:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13553</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-26 23:04:43 +0000</bug_when>
    <thetext>Refer to BZ:https://bugzilla.tianocore.org/show_bug.cgi?id=2913</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13631</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-07 21:27:09 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15697</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-15 03:38:37 +0000</bug_when>
    <thetext>This will be EDKII only protocol.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2818</bug_id>
          
          <creation_ts>2020-06-18 22:04:03 +0000</creation_ts>
          <short_desc>Upon BootOption failure, Destroy RamDisk memory before reporting StatusCode.</short_desc>
          <delta_ts>2020-07-21 02:25:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="KrishnadasX Veliyathuparambil Prakashan">KrishnadasX.Veliyathuparambil.Prakashan</reporter>
          <assigned_to name="KrishnadasX Veliyathuparambil Prakashan">KrishnadasX.Veliyathuparambil.Prakashan</assigned_to>
          <cc>amy.chan</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>KrishnadasX.Veliyathuparambil.Prakashan</cc>
    
    <cc>ray.ni</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12914</commentid>
    <comment_count>0</comment_count>
    <who name="KrishnadasX Veliyathuparambil Prakashan">KrishnadasX.Veliyathuparambil.Prakashan</who>
    <bug_when>2020-06-18 22:04:03 +0000</bug_when>
    <thetext>For better memory management, re-ordered the DestroyRamDisk and ReportStatusCode calls inside the EfiBootManagerBoot() function.

This will help to clean the unused memory before reporting the failure status, so that OEMs can use RSC Listener to launch custom boot option or application for recovering the failed hard drive.

This change will help to ensure that the allocated pool of memory for the failed boot option is freed before executing OEM&apos;s RSC listener callback to handle every boot option failure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12916</commentid>
    <comment_count>1</comment_count>
      <attachid>525</attachid>
    <who name="KrishnadasX Veliyathuparambil Prakashan">KrishnadasX.Veliyathuparambil.Prakashan</who>
    <bug_when>2020-06-18 22:44:00 +0000</bug_when>
    <thetext>Created attachment 525
PatchFile_01</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12917</commentid>
    <comment_count>2</comment_count>
    <who name="KrishnadasX Veliyathuparambil Prakashan">KrishnadasX.Veliyathuparambil.Prakashan</who>
    <bug_when>2020-06-18 23:04:50 +0000</bug_when>
    <thetext>Attached the Patch file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13143</commentid>
    <comment_count>3</comment_count>
    <who name="KrishnadasX Veliyathuparambil Prakashan">KrishnadasX.Veliyathuparambil.Prakashan</who>
    <bug_when>2020-07-21 02:25:23 +0000</bug_when>
    <thetext>Thank you Liming. (Gao, Liming &lt;liming.gao@intel.com&gt;) for merging this patch.
Merged @ cb38ace647231076acfc0c5bdd21d3aff43e4f83</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>525</attachid>
            <date>2020-06-18 22:44:00 +0000</date>
            <delta_ts>2020-06-18 22:44:00 +0000</delta_ts>
            <desc>PatchFile_01</desc>
            <filename>0001-MdeModulePkg-Upon-BootOption-failure-Destroy-RamDisk.patch</filename>
            <type>text/plain</type>
            <size>3808</size>
            <attacher name="KrishnadasX Veliyathuparambil Prakashan">KrishnadasX.Veliyathuparambil.Prakashan</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2130</bug_id>
          
          <creation_ts>2019-08-26 04:20:30 +0000</creation_ts>
          <short_desc>IPv4 PXE Boot: ProxyRequests sent although IP and Bootfile in DHCP Offer</short_desc>
          <delta_ts>2019-08-27 07:02:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="shrank">info</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9238</commentid>
    <comment_count>0</comment_count>
      <attachid>387</attachid>
    <who name="shrank">info</who>
    <bug_when>2019-08-26 04:20:30 +0000</bug_when>
    <thetext>Created attachment 387
Capture from DHCP Server

I&apos;m trying to boot the ovmf-x64 firmware on KVM using PXE.

Firmware source https://www.kraxel.org/repos/firmware.repo

DHCP server is dnsmasq

The server sends an offer including IPv4 and bootfile options. The client accepts the IP-address but starts to send PXE-Proxy-Requests instead of downloading the bootfile. (see attached capture)

I had a quick look into the code but all the necessary options seem to match.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9241</commentid>
    <comment_count>1</comment_count>
    <who name="shrank">info</who>
    <bug_when>2019-08-26 09:40:45 +0000</bug_when>
    <thetext>Looks like I was a little too hasty. 

The sequence off messages seems alright. I captured a working legacy client that uses the same sequence of packets and boots successfully.

The only difference is the source port. The legacy bios client uses port 68 as source port for all packets. ovmf uses source-port 68 in proxy mode, but source-port 4011 in normal DHCP mode.

I could not find the exact lines where they check the source port in dnsmasq, but since the use the same function to handle both kind of requests, it seems possible that source 4011 is dropped.

I unable to find the rfc that specifies port 4011 for ether server or client. If anyone knows that one, we can sort that out quickly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9250</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-26 12:54:02 +0000</bug_when>
    <thetext>This could be a problem with your dnsmasq config. I can successfully PXE
boot on virbr0 (managed by libvirtd). Libvirtd configures dnsmasq on
virbr0 for offering DHCP + TFTP.

Comparing the &quot;DHCP Offer&quot; sent by your dnsmasq against the one sent in
my environment, your DHCP Offer lacks a boot file name. Wireshark says,
&quot;Boot file name not given&quot;, whereas in my case, &quot;Boot file name:
shim.efi&quot;. Note, I&apos;m not referring to option 67, but the named field in
the DHCP offer.

There could be other differences. For example, your DHCPOFFER packet
contains option 66 (TFTP Server Name), which could trigger unicast (as
opposed to broadcast) in the edk2 client.

Here&apos;s the dnsmasq config file (under &quot;/var/lib/libvirt/dnsmasq&quot;),
generated by libvirtd:

&gt; ##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
&gt; ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
&gt; ##    virsh net-edit default
&gt; ## or other application using the libvirt API.
&gt; ##
&gt; ## dnsmasq conf file created by libvirt
&gt; strict-order
&gt; pid-file=/var/run/libvirt/network/default.pid
&gt; except-interface=lo
&gt; bind-dynamic
&gt; interface=virbr0
&gt; dhcp-range=192.168.122.2,192.168.122.254
&gt; dhcp-no-override
&gt; dhcp-authoritative
&gt; enable-tftp
&gt; tftp-root=/var/lib/dnsmasq
&gt; dhcp-boot=shim.efi
&gt; dhcp-lease-max=253
&gt; dhcp-hostsfile=/var/lib/libvirt/dnsmasq/default.hostsfile
&gt; addn-hosts=/var/lib/libvirt/dnsmasq/default.addnhosts

Anyway I&apos;ll leave this to the NetworkPkg maintainers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9251</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-26 12:56:10 +0000</bug_when>
    <thetext>... and unicast vs. broadcast is relevant because [NetworkPkg/UefiPxeBcDxe/PxeBcDhcp4.c], PxeBcDhcp4Discover():

  //
  // Use broadcast if destination address not specified.
  //
  if (DestIp == NULL) {
    Sport   = PXEBC_DHCP4_S_PORT;
    IsBCast = TRUE;
  } else {
    Sport   = PXEBC_BS_DISCOVER_PORT;
    IsBCast = FALSE;
  }

And &quot;DestIp&quot; is set to (non-)NULL higher up the stack dependent on unicast/broadcast checks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9253</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-26 14:16:17 +0000</bug_when>
    <thetext>BTW I also don&apos;t see a reason for #defining PXEBC_BS_DISCOVER_PORT as
4011. It comes from ancient commit a3bcde70e6dc (&quot;Add NetworkPkg
(P.UDK2010.UP3.Network.P1)&quot;, 2010-11-01), with no explanation.

... Ah, wait, I&apos;ve found something. Port 4011 is apparently a port that
&quot;Windows Deployment Services&quot; listens on, for offering the proprietary
BINL (&quot;Boot Information Negotiation Layer&quot;) service. :/

References:

[1] http://techgenix.com/troubleshootingpxebootforwindowsdeploymentservices/
[2] https://www.youtube.com/watch?v=TXLWHUpWL3k
[3] https://en.wikipedia.org/wiki/Preboot_Execution_Environment#Descendant_environments

In particular, [3] writes,

&gt; Microsoft created a non-overlapping extension of the PXE environment
&gt; with their Boot Information Negotiation Layer (BINL). BINL is
&gt; implemented as a server service and it is a key component of their
&gt; Remote Installation Services (RIS) and Windows Deployment Services
&gt; (WDS) strategies. It includes certain preparation processes and a
&gt; network protocol that could be somehow considered a Microsoft-crafted
&gt; DHCP extension. BINL is a Microsoft proprietary technology that uses
&gt; PXE standard client firmware. Currently there is not a publicly
&gt; available BINL specification.

:/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9254</commentid>
    <comment_count>5</comment_count>
    <who name="shrank">info</who>
    <bug_when>2019-08-26 15:28:13 +0000</bug_when>
    <thetext>Thanks for the dnsmasq configuration, I was pretty surprised when I saw it actually works.

The problem is this line of configuration:
pxe-service=X86-64_EFI, &quot;Netboot&quot;, ipxe/ipxe-x86-64.efi

It is supposed to set the correct bootfile for dhcp proxy mode. For some reason it removes the option 43 from the DHCP offer(below). That changes the behavior of the PXE Client. 

You need to set the pxe-service command once to enable proxy mode. But as it turns out you dont need the EFI entry above. If I enable pxe-service for legacy bios, dnsmasq automatically chooses the correct image from the dhcp configuration part.

Btw. I can also set the options manually to make it work with the pxe-service command above:
dhcp-option=vendor:PXEClient,6,8
dhcp-option=vendor:PXEClient,10,00:50:58:45

I can&apos;t tell if the behavior of the PXE client is correct. But it looks like the problem(or the resolution) is my dnsmasq configuration. Thanks for your help.


here is option 43, for reference:

    Option: (43) Vendor-Specific Information (PXEClient)
        Length: 10
        Option 43 Suboption: (6) PXE discovery control
            Length: 1
            discovery control: 0x08
        Option 43 Suboption: (10) PXE menu prompt
            Length: 4
            menu prompt: 00505845
        PXE Client End: 255</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9267</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 07:02:57 +0000</bug_when>
    <thetext>Thanks for mentioning option 43 tag 6 (PXE discovery control), it
explains the difference in behavior.

In the working case, PXE_DISCOVERY_CONTROL is present, and has bit#3 set
(value 8), in the initial DHCPOFFER. This eliminates both actions listed
below:

(1) Asking a Proxy DHCP server for PXE details (option 43) -- because
    the initial DHCPOFFER already has option 43. Reference: [a].

(2) Discovering a Boot Server -- due to bit#3 being set in option 43 tag
    6, in the initial DHCPOFFER. References: [b] [c].

[a] PXE v2.1, section &quot;2.2.3 Proxy DHCP&quot;
[b] PXE v2.1, section &quot;2.2.1 PXE Boot&quot;, Step 5 and Step 6
[c] PXE v2.1, section &quot;2.3 DHCP Tags used for PXE Protocol&quot;,
    PXE_DISCOVERY_CONTROL

In addition, the PXE v2.1 spec does describe port 4011 (I missed that
previously, sorry). Port 4011 is used precisely in the two actions
listed above (which are omitted if the initial DHCPOFFER carries option
43 tag 6 with bit#3 set).

Based on the above, I think the edk2 PXE Client conforms to the spec,
and the issue was on the server (dnsmasq) end. Thanks!</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>387</attachid>
            <date>2019-08-26 04:20:30 +0000</date>
            <delta_ts>2019-08-26 04:20:30 +0000</delta_ts>
            <desc>Capture from DHCP Server</desc>
            <filename>PXE-UEFI.pcapng</filename>
            <type>application/x-pcapng</type>
            <size>3660</size>
            <attacher name="shrank">info</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2023</bug_id>
          
          <creation_ts>2019-07-26 03:37:04 +0000</creation_ts>
          <short_desc>Move MmAccess &amp; MmControl PPI from MdeModulePkg to MdePkg</short_desc>
          <delta_ts>2019-08-15 01:22:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Marc Chen">marc.w.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>marc.w.chen</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8605</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-07-26 03:37:04 +0000</bug_when>
    <thetext>MmAccess and MmControl PPI are previously not defined in PI spec so their definitions are in MdeModulePkg.
But since now they are already in PI spec, we could move them from MdeModulePkg to MdePkg. This follows the MdePkg&apos;s rule that it contains all spec defined interfaces, but also benefit some modules that can only depend on MdePkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8900</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:40:28 +0000</bug_when>
    <thetext>Bug Triage: Confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9009</commentid>
    <comment_count>2</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-08-15 01:22:40 +0000</bug_when>
    <thetext>Push @6f33f7a262314af35e2b99c849e08928ea49aa55</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2371</bug_id>
          
          <creation_ts>2019-11-21 07:33:53 +0000</creation_ts>
          <short_desc>Build failures with multiple -b options</short_desc>
          <delta_ts>2019-12-17 20:21:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Leif Lindholm">quic_llindhol</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10508</commentid>
    <comment_count>0</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-11-21 07:33:53 +0000</bug_when>
    <thetext>I just observed some strange behaviour when building with
-b DEBUG -b NOOPT -b RELEASE

For example:
build -a AARCH64 -p MdeModulePkg/MdeModulePkg.dsc -t GCC5 -b DEBUG -b \
  RELEASE -b NOOPT -m MdeModulePkg/Application/HelloWorld/HelloWorld.inf

results in successfully building DEBUG, but then RELEASE fails with:

Processing meta-data
.Architecture(s)  = AARCH64
Build target     = RELEASE
Toolchain        = GCC5

Active Platform          = /work/git/edk2/MdeModulePkg/MdeModulePkg.dsc
Active Module            = /work/git/edk2/MdeModulePkg/Application/HelloWorld/HelloWorld.inf
. done!
Generating code . done!
Generating makefile . done!
Building ... /work/git/edk2/MdePkg/Library/BaseStackCheckLib/BaseStackCheckLib.inf [AARCH64]
Building ... /work/git/edk2/ArmPkg/Library/CompilerIntrinsicsLib/CompilerIntrinsicsLib.inf [AARCH64]
make: *** No rule to make target &apos;tbuild&apos;.  Stop.

Then if I run the same command line again, build quickly breezes
through DEBUG, then builds RELEASE successfully and fails on NOOPT with:

Processing meta-data .
Architecture(s)  = AARCH64
Build target     = NOOPT
Toolchain        = GCC5

Active Platform          = /work/git/edk2/MdeModulePkg/MdeModulePkg.dsc
Active Module            = /work/git/edk2/MdeModulePkg/Application/HelloWorld/HelloWorld.inf
. done!
Generating code . done!
Generating makefile . done!
Building ... /work/git/edk2/MdePkg/Library/BaseStackCheckLib/BaseStackCheckLib.inf [AARCH64]
Building ... /work/git/edk2/ArmPkg/Library/CompilerIntrinsicsLib/CompilerIntrinsicsLib.inf [AARCH64]
make: *** No rule to make target &apos;tbuild&apos;.  Stop.

Run the same command again, and NOOPT builds successfully (after build
breezes through DEBUG and RELEASE).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10512</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-21 20:06:25 +0000</bug_when>
    <thetext>Bob:
  Can you help check this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10652</commentid>
    <comment_count>2</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-12-10 05:26:10 +0000</bug_when>
    <thetext>I have narrowed down the failure to the following commit:

commit 0e7e7a264cd80ab71ea0f9e9da2d0617d4b539c4
Author: Shi, Steven &lt;steven.shi@intel.com&gt;
Date:   Thu Aug 15 22:26:17 2019 +0800

    BaseTools: Improve the cache hit in the edk2 build cache
    
    BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=1927
    
    Current cache hash algorithm does not parse and generate
    the makefile to get the accurate dependency files for a
    module. It instead use the platform and package meta files
    to get the module depenedency in a quick but over approximate
    way. These meta files are monolithic and involve many redundant
    dependency for the module, which cause the module build
    cache miss easily.
    This patch introduces one more cache checkpoint and a new
    hash algorithm besides the current quick one. The new hash
    algorithm leverages the module makefile to achieve more
    accurate and precise dependency info for a module. When
    the build cache miss with the first quick hash, the
    Basetool will caculate new one after makefile is generated
    and then check again.
    
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Cc: Bob Feng &lt;bob.c.feng@intel.com&gt;
    Signed-off-by: Steven Shi &lt;steven.shi@intel.com&gt;
    Reviewed-by: Bob Feng &lt;bob.c.feng@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10653</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-12-10 08:02:11 +0000</bug_when>
    <thetext>In a &quot;build&quot; invocation with multiple &quot;-b&quot; options, BuildTargetList carries
the build targets, and BuildTarget iterates over the elements of that list.

I speculate that commit 0e7e7a264cd8 could fail because, in the 2nd, 3rd etc
build rounds, i.e. when BuildTarget is no longer the initial value, the new
code might attempt to rely on a cache that doesn&apos;t exist.

Just run &quot;git show 0e7e7a264cd8&quot; and see how many BuildTarget references
there are. If you display a bit larger context with -U50 or so, then one of
these loops becomes visible in the context:

&gt;|      ## Build active module for different build targets, different tool chains and different archs
&gt;|      #
&gt;|      def _BuildModule(self):
&gt;|          for BuildTarget in self.BuildTargetList:

inside of which we have

&gt;| +                # Add Platform and Package level hash in share_data for module hash calculation later
&gt;| +                if GlobalData.gBinCacheSource or GlobalData.gBinCacheDest:
&gt;| +                    GlobalData.gCacheIR[(&apos;PlatformHash&apos;)] = GlobalData.gPlatformHash
&gt;| +                    for PkgName in GlobalData.gPackageHash.keys():
&gt;| +                        GlobalData.gCacheIR[(PkgName, &apos;PackageHash&apos;)] = GlobalData.gPackageHash[PkgName]
&gt;| +                GlobalData.file_lock = mp.Lock()
&gt;| +                GlobalData.FfsCmd = CmdListDict

It&apos;s not obvious to me where the current &quot;BuildTarget&quot; is treated as a part of the key(s) that point into these hashes / dictionaries.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10702</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-12-13 05:15:57 +0000</bug_when>
    <thetext>Patch for review.
https://edk2.groups.io/g/devel/message/52128</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10718</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-12-17 20:21:26 +0000</bug_when>
    <thetext>pushed at SHA-1: 78fb6b0e022f2e0835ca6d075f4a7a36e36d0f23</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2617</bug_id>
          
          <creation_ts>2020-03-23 12:56:39 +0000</creation_ts>
          <short_desc>Update edk2 build and test ci to use Python 3.8.x</short_desc>
          <delta_ts>2020-04-13 02:46:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11774</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-23 12:56:39 +0000</bug_when>
    <thetext>Update to 3.8.x for CI to keep current

example change here: https://github.com/microsoft/mu_basecore/pull/55

The above change does not update PatchCheck CI</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11816</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-24 21:55:04 +0000</bug_when>
    <thetext>This change doesn&apos;t cover PatchChecker.py. 

Shenglei, please send the patch for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12121</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:27:46 +0000</bug_when>
    <thetext>Shenglei has sent the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12195</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-13 02:46:42 +0000</bug_when>
    <thetext>Fixed at 60f6a2774ef237961bd1a7af3098eb660ab9de75</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2286</bug_id>
          
          <creation_ts>2019-10-18 05:19:44 +0000</creation_ts>
          <short_desc>Potential null pointer dereference on pointer Token</short_desc>
          <delta_ts>2020-03-26 21:58:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10098</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-10-18 05:19:44 +0000</bug_when>
    <thetext>In source MdeModulePkg/Bus/Sd/SdDxe/SdBlockIo.c, function SdEraseBlocks there is a potential null pointer dereference on pointer Token:

The following code checks if Token is potentially null, implying that it could possibly be null:

1349  if ((Token != NULL) &amp;&amp; (Token-&gt;Event != NULL)) {
1350    Token-&gt;TransactionStatus = EFI_SUCCESS;
1351  } 

and later, the potentially null Token pointer is being dereferenced:

1370  DEBUG ((EFI_D_ERROR, &quot;SdEraseBlocks(): Lba 0x%x BlkNo 0x%x Event %p with %r\n&quot;, Lba, BlockNum, Token-&gt;Event, Status));

Either Token can never be NULL and the sanity check on line 1349 is not required, or Token can potentially be NULL in which case a null pointer dereference occurs when accessing Token-&gt;Event.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10274</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:57:43 +0000</bug_when>
    <thetext>Shenglei: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11325</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-19 22:23:03 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11336</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 09:35:27 +0000</bug_when>
    <thetext>Guomin will check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11523</commentid>
    <comment_count>4</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 04:57:29 +0000</bug_when>
    <thetext>Have comment at https://edk2.groups.io/g/devel/message/55377, waiting for reviewing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11868</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-26 21:58:58 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/695d90b9b156573d0dafb20afecea09dc9a914f4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2755</bug_id>
          
          <creation_ts>2020-05-21 14:54:24 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-21 14:56:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>BoardModulePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12643</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:54:24 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12656</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:56:45 +0000</bug_when>
    <thetext>Bad, script! Bad!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2181</bug_id>
          
          <creation_ts>2019-09-09 21:18:20 +0000</creation_ts>
          <short_desc>Add NULL CryptoLib instance</short_desc>
          <delta_ts>2020-01-29 19:02:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2257</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9559</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-09-09 21:18:20 +0000</bug_when>
    <thetext>The openssl build is very slow. If we just need test build with BaseCryptLib dependency, we don’t want to build the openssl. Having a NULL BaseCrytoLib can save the build time.

Suggest add ASSERT() for all function to avoid use by mistake.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9738</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-09-19 20:22:49 +0000</bug_when>
    <thetext>Liming will work with MSFT to see if they will contribute their patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11009</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 19:02:34 +0000</bug_when>
    <thetext>Duplicate of 2257 that is already implemented and closed

*** This bug has been marked as a duplicate of bug 2257 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2534</bug_id>
          
          <creation_ts>2020-02-17 10:36:54 +0000</creation_ts>
          <short_desc>acpiview enters infinite loop if ACPI structure length is 0</short_desc>
          <delta_ts>2020-03-03 20:23:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Krzysztof Koch">krzysztof.koch</reporter>
          <assigned_to name="Krzysztof Koch">krzysztof.koch</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11282</commentid>
    <comment_count>0</comment_count>
    <who name="Krzysztof Koch">krzysztof.koch</who>
    <bug_when>2020-02-17 10:36:54 +0000</bug_when>
    <thetext>Some ACPI tables define internal structures of variable size. The &apos;Length&apos; field inside the substructure is used to update a pointer used for table traversal. If the byte-length of the structure is equal to 0, acpiview can enter an infinite loop. This condition can occur if, for example, the zero-allocated ACPI table buffer is not fully populated. This is typically a bug on the ACPI table writer side.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11332</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 09:02:38 +0000</bug_when>
    <thetext>Patch is ready.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11333</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 09:03:08 +0000</bug_when>
    <thetext>Fix at b85048261aa5dc0b8fd98ddc4431d8c2a6389b25</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11335</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 09:07:26 +0000</bug_when>
    <thetext>Fix it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11501</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-03 20:23:13 +0000</bug_when>
    <thetext>It has been fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2777</bug_id>
          
          <creation_ts>2020-06-01 23:08:57 +0000</creation_ts>
          <short_desc>Remove DEPRECATED code wrapped by new macro DISABLE_NEW_DEPRECATED_INTERFACES</short_desc>
          <delta_ts>2020-11-03 21:21:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12767</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-01 23:08:57 +0000</bug_when>
    <thetext>Those deprecated code can be removed. 

MdePkg\Include\Library\BaseLib.h:965:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\BaseLib.h:1039:#endif // !defined (DISABLE_NEW_DEPRECATED_INTERFACES)
MdePkg\Include\Library\BaseLib.h:1167:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\BaseLib.h:1258:#endif // !defined (DISABLE_NEW_DEPRECATED_INTERFACES)
MdePkg\Include\Library\BaseLib.h:1658:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\BaseLib.h:1702:#endif // !defined (DISABLE_NEW_DEPRECATED_INTERFACES)
MdePkg\Include\Library\BaseLib.h:1805:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\BaseLib.h:1874:#endif // !defined (DISABLE_NEW_DEPRECATED_INTERFACES)
MdePkg\Include\Library\BaseLib.h:2034:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\BaseLib.h:2118:#endif // !defined (DISABLE_NEW_DEPRECATED_INTERFACES)
MdePkg\Include\Library\BaseLib.h:2499:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\BaseLib.h:2537:#endif // !defined (DISABLE_NEW_DEPRECATED_INTERFACES)
MdePkg\Include\Library\PcdLib.h:484:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\PcdLib.h:809:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\PcdLib.h:1351:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\PrintLib.h:488:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\PrintLib.h:885:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Include\Library\UefiLib.h:683:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\BaseLib\String.c:11:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\BaseLib\String.c:323:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\BaseLib\String.c:848:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\BaseLib\String.c:1332:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\BaseLib\String.c:1687:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\BasePcdLibNull\PcdLib.c:390:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\BasePrintLib\PrintLib.c:346:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\BasePrintLib\PrintLib.c:784:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\DxePcdLib\DxePcdLib.c:478:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\PeiPcdLib\PeiPcdLib.c:478:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdePkg\Library\UefiLib\UefiLib.c:1288:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12772</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-02 21:43:45 +0000</bug_when>
    <thetext>It&apos;s a good clean up to do, but we make sure all platforms and packages need to enable this macro before we can remove it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13219</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-29 03:53:11 +0000</bug_when>
    <thetext>Shenglei is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13220</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-29 03:57:44 +0000</bug_when>
    <thetext>Please also clean up the one in MdeModulePkg

MdeModulePkg\Library\DxePrintLibPrint2Protocol\PrintLib.c:595:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdeModulePkg\Library\DxePrintLibPrint2Protocol\PrintLib.c:1074:#ifndef DISABLE_NEW_DEPRECATED_INTERFACES
MdeModulePkg\Universal\PrintDxe\Print.c:20:  If the macro DISABLE_NEW_DEPRECATED_INTERFACES is defined, then ASSERT().
MdeModulePkg\Universal\PrintDxe\Print.c:30:  @return If the macro DISABLE_NEW_DEPRECATED_INTERFACES is defined, return 0
.
MdeModulePkg\Universal\PrintDxe\Print.c:44:#ifdef DISABLE_NEW_DEPRECATED_INTERFACES
MdeModulePkg\Universal\PrintDxe\Print.c:46:  // If the macro DISABLE_NEW_DEPRECATED_INTERFACES is defined, then the
MdeModulePkg\Universal\PrintDxe\Print.c:64:  If the macro DISABLE_NEW_DEPRECATED_INTERFACES is defined, then ASSERT().
MdeModulePkg\Universal\PrintDxe\Print.c:74:  @return If the macro DISABLE_NEW_DEPRECATED_INTERFACES is defined, return 0
.
MdeModulePkg\Universal\PrintDxe\Print.c:88:#ifdef DISABLE_NEW_DEPRECATED_INTERFACES
MdeModulePkg\Universal\PrintDxe\Print.c:90:  // If the macro DISABLE_NEW_DEPRECATED_INTERFACES is defined, then the</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13221</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-29 03:58:17 +0000</bug_when>
    <thetext>Shenglei is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13943</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-12 21:58:31 +0000</bug_when>
    <thetext>Merge https://github.com/tianocore/edk2/pull/1002</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2557</bug_id>
          
          <creation_ts>2020-02-25 04:59:05 +0000</creation_ts>
          <short_desc>New SPI Serial bus resource descriptor</short_desc>
          <delta_ts>2022-03-08 22:01:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="John Garry">john.garry</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11426</commentid>
    <comment_count>0</comment_count>
    <who name="John Garry">john.garry</who>
    <bug_when>2020-02-25 04:59:05 +0000</bug_when>
    <thetext>The ACPI 6.3 spec defines SPISerialBusV2 resource descriptor. In this descriptor, there is no argument to define the serial bus data width. As such, we cannot declare whether the bus is for standard, dual, or quad SPI mode.

This feature request is for a new resource descriptor to satisfy the requirement for a data bus width argument.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11569</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-05 20:12:40 +0000</bug_when>
    <thetext>Is ACPI spec issue or edk2 code issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11630</commentid>
    <comment_count>2</comment_count>
    <who name="John Garry">john.garry</who>
    <bug_when>2020-03-09 11:21:17 +0000</bug_when>
    <thetext>This is an ACPI spec issue, in the the SPISerialBusV2 resource descriptor in the spec does not have a buswidth property.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14781</commentid>
    <comment_count>3</comment_count>
    <who name="John Garry">john.garry</who>
    <bug_when>2021-01-11 08:05:15 +0000</bug_when>
    <thetext>Hello, Is there any further comment on this feature request? Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14852</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-01-19 21:55:41 +0000</bug_when>
    <thetext>John: this is spec issue. Please raise it to uefi.org.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18573</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-08 22:01:06 +0000</bug_when>
    <thetext>this is spec issue, not code issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2446</bug_id>
          
          <creation_ts>2020-01-03 12:57:42 +0000</creation_ts>
          <short_desc>Avoid using CreateEventEx unless required</short_desc>
          <delta_ts>2020-01-13 07:26:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Vitaly Cheptsov">vit9696</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10776</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-01-03 12:57:42 +0000</bug_when>
    <thetext>In general EDK II takes care of verifying EFI System Table version before using CreateEventEx[1], however, it is not the case with recent additions to most debug libs[2].

There are still many firmwares in the wild not supporting CreateEventEx, including MacBooks released in 2015. We believe CreateEventEx should not be used unless strictly required, and thus be optional.

[1] https://github.com/tianocore/edk2/blob/3806e1fd139775610d8f2e7541a916c3a91ad989/MdePkg/Library/UefiLib/UefiNotTiano.c#L82

[2] https://github.com/tianocore/edk2/commit/452702d0bc51b608491a96b3634ded7a57727455#diff-6f1a6543f937384e4dd205d0416b9c8c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10779</commentid>
    <comment_count>1</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-01-03 13:04:17 +0000</bug_when>
    <thetext>Patch submitted: https://edk2.groups.io/g/devel/message/52841. Requesting for merge in edk2-stable202002.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10832</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-09 21:38:39 +0000</bug_when>
    <thetext>Vitaly takes it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10863</commentid>
    <comment_count>3</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-01-13 07:26:05 +0000</bug_when>
    <thetext>Merged in master[1], closing as fixed.

[1] https://github.com/tianocore/edk2/commit/df851da3ceff5b6bcf5e12616f6af60812aab483</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2328</bug_id>
          
          <creation_ts>2019-11-04 21:30:42 +0000</creation_ts>
          <short_desc>Add structure definition of host interface protocol type in SMBIOS header file</short_desc>
          <delta_ts>2020-08-24 22:27:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10321</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2019-11-04 21:30:42 +0000</bug_when>
    <thetext>Add structure of Host interface protocol record for SMBIOS type 42 in SmBios.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10322</commentid>
    <comment_count>1</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2019-11-04 21:41:59 +0000</bug_when>
    <thetext>Add structure definitions of SMBIOS spec Table 122 – Protocol Record Data Format in SmBios.h.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10335</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2019-11-05 20:12:03 +0000</bug_when>
    <thetext>Start working on this</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13515</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-24 22:27:30 +0000</bug_when>
    <thetext>FIx @78ab44cb96808bd3ff0edf312599f94a6a92172a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2220</bug_id>
          
          <creation_ts>2019-09-26 00:35:15 +0000</creation_ts>
          <short_desc>UEFI Variable SMI Reduction</short_desc>
          <delta_ts>2020-06-03 16:10:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2333</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2364</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9828</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-26 00:35:15 +0000</bug_when>
    <thetext>This is an enhancement to the EDK II UEFI variable driver to reduce overall
system SMM usage when using SMM UEFI variables.

Overview
---------
SMM usage can be eliminated for runtime service GetVariable () and
GetNextVariableName () invocations. Most UEFI variable usage in typical
systems after the variable store is initialized (e.g. manufacturing boots)
is due to GetVariable ( ) and GetNextVariableName () not SetVariable ().
GetVariable () calls can regularly exceed 100 per boot while SetVariable ()
calls typically remain less than 10 per boot. By focusing on the common case,
the majority of overhead associated with SMM can be avoided while still using
existing and proven code for operations such as variable authentication that
require an isolated execution environment.

 * Advantage: Reduces overall system SMM usage
 * Disadvantage: Requires more Runtime data memory usage

Initial Performance Observations
---------------------------------
 * With these proposed changes, an Intel Atom based SoC saw GetVariable ( )
   time for an existing variable reduce from ~220us to ~5us.

Major Changes
--------------
 1. Two UEFI variable caches will be maintained.
     a. &quot;Runtime Cache&quot; - Maintained in VariableSmmRuntimeDxe. Used to serve
         runtime service GetVariable () and GetNextVariableName () callers.
     b. “SMM cache” - Maintained in VariableSmm to service SMM GetVariable ()
         and GetNextVariableName () callers.
         i. A cache in SMRAM is retained so SMM modules do not operate on data
            outside SMRAM.
 2. A new UEFI variable read and write flow will be used as described below.

At any given time, the two caches would be coherent. On a variable write, the
runtime cache is only updated after validation in SMM and, in the case of a
non-volatile UEFI variable, the variable must also be successfully written to
non-volatile storage.

Prior RFC Feedback Addressed
-----------------------------
RFC sent Sept. 5, 2019: https://edk2.groups.io/g/devel/message/46939

1. UEFI variable data retrieval from a ring 0 buffer

   A common concern with this proposed set of changes is the potential security
   threat presented by serving runtime services callers from a ring 0 memory
   buffer of EfiRuntimeServicesData type. This conclusion was that this change
   does not fundamentally alter the attack surface. The UEFI variable Runtime
   Services are invoked from ring 0 and the data already travels through ring
   0 buffers (such as the SMM communicate buffer) to reach the caller. Even
   today if ring 0 is assumed to be malicious, the malicious code may keep one
   AP in a loop to monitor the communication data, when the BSP gets an
   (authenticated) variable. When the communication buffer is updated and the
   status is set to EFI_SUCCESS, the AP may modify the communication buffer
   contents such the tampered data is returned to the BSP caller. Or an
   interrupt handler on the BSP may alter the communication buffer contents
   before the data is returned to the caller. In summary, this was not found to
   introduce any attack not possible today.

2. VarCheckLib impact

   VarCheckLib plays a role in SetVariable () calls. This patch series only
   changes GetVariable () behavior. Therefore, VarCheckLib is expected to
   have no impact due to these changes.

Testing Performed
------------------
This code was tested with the master branch of edk2 on an Intel Kaby Lake U
Intel Whiskey Lake U reference validation platform. The set of tests performed
included:

1. Boot from S5 to Windows 10 OS with SMM variables enabled.
2. Boot from S5 to Ubuntu 18.04.1 LTS with SMM variable enabled.
3. Boot from S5 to Windows 10 OS with DXE variables enabled.
4. Dump UEFI variable store at shell with dmpstore to verify contents.
5. Dump NvStorage FV from SPI flash after boot to verify contents written.
6. Dump UEFI variable statistics with VariableInfo at shell.
6. Cycles of adding and deleting a UEFI variable to verify cache results.
7. Set OsIndications to stop at FW UI to verify cache load of non-volatile
   contents.

Why Keep SMM on Variable Writes
--------------------------------
 * SMM provides a ubiquitous isolated execution environment in x86 for
   authenticated UEFI variables.
 * BIOS region SPI flash write restrictions to SMM in platforms today can
   be retained.

Today&apos;s UEFI Variable Cache (for reference)
--------------------------------------------
 * Maintained in SMRAM via VariableSmm.
 * A &quot;write-through&quot; cache of variable data in the form of a UEFI variable
   store.
 * Non-volatile and volatile variables are maintained in separate buffers
  (variable stores).

Runtime &amp; SMM Cache Coherency
------------------------------
The non-volatile cache should always accurately reflect non-volatile storage
contents (done today) and the &quot;SMM cache&quot; and &quot;Runtime cache&quot; should always be
coherent on access. The runtime cache is updated by VariableSmm.

Updating both caches from within a SMM SetVariable () operation is fairly
straightforward but a race condition can occur if an SMI occurs during the
execution of runtime code reading from the runtime cache. To handle this case,
a runtime cache read lock is introduced that explicitly moves pending updates
from SMM to the runtime cache if an SMM update occurs while the runtime cache
is locked. Note that it is not expected a Runtime services call will interrupt
SMM processing since all CPU cores rendezvous in SMM.

New Key Elements for Coherence
-------------------------------
Runtime DXE (VariableSmmRuntimeDxe)
 1. RuntimeCacheReadLock - A global lock used to lock read access to the
                           runtime cache.
 2. RuntimeCachePendingUpdate - A global flag used to notify runtime code of a
                                pending cache update in SMM.

SMM (VariableSmm)
 1. FlushRuntimeCachePendingUpdate SMI - A SW SMI handler that synchronizes
                                         the runtime cache buffer with the SMM
                                         cache buffer.

Proposed Runtime DXE Read Flow
-------------------------------
 1. Wait for RuntimeCacheReadLock to be free
 2. Acquire RuntimeCacheReadLock
 3. If RuntimeCachePendingUpdate flag (rare) is set then:
     3.a. Trigger FlushRuntimeCachePendingUpdate SMI
     3.b. Verify RuntimeCachePendingUpdate flag is cleared
 4. Perform read from RuntimeCache
 5. Release RuntimeCacheReadLock

Proposed FlushRuntimeCachePendingUpdate SMI
--------------------------------------------
 1. If RuntimeCachePendingUpdate flag is not set:
     1.a. Return
 2. Copy the data at RuntimeCachePendingOffset of RuntimeCachePendingLength to
    RuntimeCache
 3. Clear the RuntimeCachePendingUpdate flag

Proposed SMM Write Flow
------------------------
 1. Perform variable authentication and non-volatile write. If either fail,
    return an error to the caller.
 2. If RuntimeCacheReadLock is set then:
     2.a. Set RuntimeCachePendingUpdate flag
     2.b. Update RuntimeCachePendingOffset and RuntimeCachePendingLength to
          cover the a superset of the pending chunk (for simplicity, the
          entire variable store is currently synchronized).
3. Else:
     3.a. Update RuntimeCache
4. Update SmmCache
     - Note: RT read cannot occur during SMI processing since all cores are
             locked in SMM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9836</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-26 18:48:55 +0000</bug_when>
    <thetext>Change is in review on the mailing list - https://edk2.groups.io/g/devel/message/48070</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9906</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-01 20:46:39 +0000</bug_when>
    <thetext>Patch V2 sent to address feedback to break patch #1 into a smaller set of patches.
https://edk2.groups.io/g/devel/message/48235</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10333</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-05 16:35:53 +0000</bug_when>
    <thetext>The final expected patch has been sent to the mailing list - https://edk2.groups.io/g/devel/message/49820. The change is ready to be pushed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10336</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-06 01:17:35 +0000</bug_when>
    <thetext>This change is completed and the following patch series has been pushed to edk2 - https://edk2.groups.io/g/devel/message/49820.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10449</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 22:16:55 +0000</bug_when>
    <thetext>This is new feature, not bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10572</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-27 19:23:49 +0000</bug_when>
    <thetext>Wiki page https://github.com/tianocore/tianocore.github.io/wiki/UEFI-Variable-Runtime-Cache</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12790</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-03 16:10:38 +0000</bug_when>
    <thetext>Commits:
 1  20a27a641b8d MdeModulePkg/Variable: Consolidate common parsing
                 functions
 2  f8ff4cca7c57 MdeModulePkg/Variable: Parameterize
                 GetNextVariableInternal () stores
 3  8d53adbee946 MdeModulePkg/Variable: Parameterize VARIABLE_INFO_ENTRY
                 buffer
 4  044010234e48 MdeModulePkg/Variable: Parameterize auth status in
                 VariableParsing
 5  6b0d7b013e5e MdeModulePkg/Variable: Add a file for NV variable
                 functions
 6  1747ab6c1c27 MdeModulePkg VariableInfo: Always consider RT DXE and
                 SMM stats
 7  aab3b9b9a1e5 MdeModulePkg/Variable: Add RT GetVariable() cache
                 support
 8  6f9838f32ff4 MdeModulePkg/Variable: Add RT GetNextVariableName()
                 cache support
 9  d511d6e0e7a9 OvmfPkg: Disable variable runtime cache
10  e07b7d024ac9 MdeModulePkg: Enable variable runtime cache by default</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2001</bug_id>
          <alias>CVE-2019-14563</alias>
          <creation_ts>2019-07-19 05:13:51 +0000</creation_ts>
          <short_desc>Integer truncation issues in S3BootScript[Save]*() API</short_desc>
          <delta_ts>2021-09-22 15:47:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kimolsun2020</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>rschiron</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8514</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 05:13:51 +0000</bug_when>
    <thetext>These APIs all take variable length data as input, and write it to the boot script. The data coming from the callers can vary, it&apos;s not inconceivable that some of it could be attacker controlled (e.g. a compromised device). The documentation says the following about the library these APIs belong to: 
&quot;The silicon code or platform code may use the Save State protocol, or Smm Save State protocol,
or S3BootScriptLib to record boot script. No matter which interface is used, the boot script data
will be saved into one common table finally.&quot;
All these APIs calculate a size needed (add size of a header) and store it in a length field of type UINT8. Given that a UINT8 can only hold values 0-255, its possible integer truncation can occur if the input data is too large. This integer truncation will trigger an length check/allocation that is too small, which will lead to memory corruption.
the affected functions are:
- S3BootScriptSaveIoWrite
- S3BootScriptSaveMemWrite
- S3BootScriptSavePciCfgWrite
- S3BootScriptSavePciCfg2Write
- S3BootScriptSaveInformation
- S3BootScriptLabelInternal
It looks like there is nothing currently in edkII or the platform code that would allow triggering these truncation issues. However, there might be IBV/ODM/OEM additions that would allow to trigger them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8515</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 05:14:34 +0000</bug_when>
    <thetext>CVSS score: 6.4 https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:H/PR:L/UI:N/S:C/C:N/I:H/A:L</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8664</commentid>
    <comment_count>2</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-07-31 12:56:09 +0000</bug_when>
    <thetext>7.31.19 eric - follow-up w. wilkins on our methodology for grading. anything new from FIRST, etc, to provide a lens here into our work?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8666</commentid>
    <comment_count>3</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-07-31 12:58:48 +0000</bug_when>
    <thetext>api only exposed to PI code.  In bios tcb (pre end of dxe).  so is really that severe?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8718</commentid>
    <comment_count>4</comment_count>
      <attachid>373</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-08-01 22:28:36 +0000</bug_when>
    <thetext>Created attachment 373
V1 Patch

Upload V1 patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8720</commentid>
    <comment_count>5</comment_count>
      <attachid>374</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-08-01 22:35:06 +0000</bug_when>
    <thetext>Created attachment 374
Uni-test case

Add uni-test case.

Steps:
1.  Build an image with the attached uni-test DXE driver included.
2.  Boot the built image.
3a. If proposed patch is applied, during the boot process there will be a debug log message that shows &quot;Test PASSED!&quot;.
3b. If proposed patch is NOT applied, during the boot process there will be either a hang happens or a debug log message that shows &quot;Test FAILED!&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8721</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-08-01 22:38:18 +0000</bug_when>
    <thetext>(In reply to Vincent Zimmer from comment #3)
&gt; api only exposed to PI code.  In bios tcb (pre end of dxe).  so is really
&gt; that severe?

I also think that the issue is not as critical as the current CVSS grade shows.

The implementation of the PiDxeS3BootScriptLib only allows setting boot script via:
a. All requests before EndOfDxe
b. After EndOfDxe, only requests from SMM drivers are allowed.

The codes being run for the above 2 cases can be trusted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8769</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 10:16:41 +0000</bug_when>
    <thetext>Hao,

I think in your v1 patch the (WidthInByte * Count) multiplications are a risk. Can we use SafeIntLib?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8770</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 10:24:56 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/infosec/message/6 -- the boot script is locked down in response to BDS installing gEfiDxeSmmReadyToLockProtocolGuid, not when End-of-DXE is signaled (also by BDS). But those actions happen very closely to each other, and the difference is expected to be invisible to 3rd party modules.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8771</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 10:45:30 +0000</bug_when>
    <thetext>... On the other hand, what if some platform driver, or UEFI driver included in the platform firmware, lets the user input some configuration via HII, and that affects what the driver attempts to save in some opcode?

Admittedly this is a somewhat forced example, but this is one of those cases where I feel our imagination is the bottleneck for impact assessment. If the CopyMem() -- copying (WidthInByte * Count) bytes -- overflows the allocated opcode (which has truncated size) in the script, could the overflow corrupt other opcodes, potentially saved by other drivers? (I don&apos;t know the internal structure of the boot script table -- does it grow top-down or bottom-up?)

Not sure about the CVSS specifically, but I&apos;d feel more comfortable if we kept this under embargo, and requested a CVE ID.

It&apos;s difficult to determine if any given platform is unaffected -- all drivers that consume either the library (directly), or the [Smm] Save State protocol, would have to be identified, and their opcode-generating actions would have to be audited. The fix doesn&apos;t look too large or complicated; I think it&apos;s safer to backport to products, just in case. Callers are expected to check return codes already, they should not need logic changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8772</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 10:58:08 +0000</bug_when>
    <thetext>ArmVirtPkg platforms are unaffected as they don&apos;t consume

  MdeModulePkg/Library/PiDxeS3BootScriptLib/DxeS3BootScriptLib.inf

OvmfPkg platforms are potentially affected as multiple modules in them produce S3 boot script opcodes -- therefore the underlying infrastructure (with the vulnerability) is in place, at the minimum. While I don&apos;t think OvmfPkg&apos;s own drivers could be influenced via HII or otherwise to produce oversized opcodes, tracking the same down for other edk2 drivers that are included in the OVMF binaries seems uncomfortable. Better safe than sorry.

In OVMF, &quot;PcdAcpiS3Enable&quot; is dynamically controllable from the QEMU command line. If S3 support is disabled, S3SaveStateDxe exits early, without producing the S3 Save State protocol. I feel that&apos;s only a partial protection.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8796</commentid>
    <comment_count>11</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-08-06 02:52:20 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #7)
&gt; Hao,
&gt; 
&gt; I think in your v1 patch the (WidthInByte * Count) multiplications are a
&gt; risk. Can we use SafeIntLib?

Hello Laszlo,

Yes, I agree with you that (WidthInByte * Count) multiplications may be potential risks.

In my opinion, using the SafeIntLib here might be a little overshot. What do you think of the below check:

  if ((Count &gt; MAX_UINT8) ||
      (WidthInByte * Count &gt; MAX_UINT8 - sizeof (EFI_BOOT_SCRIPT_IO_WRITE))) {
    return RETURN_OUT_OF_RESOURCES;
  }

The reason I do not use &apos;Count &gt; MAX_UINTN / WidthInByte&apos; is that the above check can avoid introducing a divide (can be optimized to a right-shift) operation in the check.

What is your opinion on this proposal?

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8829</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-07 09:35:08 +0000</bug_when>
    <thetext>Yes, this one looks good as well. We can definitely not handle -- i.e., save -- opcodes with Count values larger than MAX_UINT8. Thus returning an error in that case, early, is fine.

And if (Count &lt;= MAX_UINT8), then the multiplication in the subsequent check is safe (the product will be at most 8 * 255 = 2040, which is in range for MAX_UINTN).

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8856</commentid>
    <comment_count>13</comment_count>
      <attachid>378</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-08-08 02:46:13 +0000</bug_when>
    <thetext>Created attachment 378
V2 Patch

Upload V2 patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8857</commentid>
    <comment_count>14</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-08-08 02:46:49 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #12)
&gt; Yes, this one looks good as well. We can definitely not handle -- i.e., save
&gt; -- opcodes with Count values larger than MAX_UINT8. Thus returning an error
&gt; in that case, early, is fine.
&gt; 
&gt; And if (Count &lt;= MAX_UINT8), then the multiplication in the subsequent check
&gt; is safe (the product will be at most 8 * 255 = 2040, which is in range for
&gt; MAX_UINTN).
&gt; 
&gt; Thanks.

Thanks Laszlo,

V2 patch applied.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8877</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-08 16:12:45 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #13)
&gt; Created attachment 378 [details]
&gt; V2 Patch
&gt; 
&gt; Upload V2 patch.

Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11089</commentid>
    <comment_count>16</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:58:43 +0000</bug_when>
    <thetext>infosec 2/5/2020 - patch since august.  cve assigned.  open up.  follow-up w/ TA entry</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11115</commentid>
    <comment_count>17</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-05 15:38:45 +0000</bug_when>
    <thetext>Do we have a patch indeed? I reviewed it, yes, but it hasn&apos;t been approved by MdeModulePkg maintainers.

Jian or Hao, please post the patch to edk2-devel immediately, for maintainer approval, and integration into edk2 master.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11117</commentid>
    <comment_count>18</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-05 20:45:16 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #17)
&gt; Do we have a patch indeed? I reviewed it, yes, but it hasn&apos;t been approved
&gt; by MdeModulePkg maintainers.
&gt; 
&gt; Jian or Hao, please post the patch to edk2-devel immediately, for maintainer
&gt; approval, and integration into edk2 master.

Patch has been proposed at:
https://edk2.groups.io/g/devel/message/53837</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11162</commentid>
    <comment_count>19</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-07 03:00:16 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/322ac05f8bbc1bce066af1dabd1b70ccdbe28891</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17360</commentid>
    <comment_count>20</comment_count>
    <who name="Kim Olsun">kimolsun2020</who>
    <bug_when>2021-09-22 15:47:10 +0000</bug_when>
    <thetext>http://www.compilatori.com/category/health/	http://www.wearelondonmade.com/category/health/	http://www.jopspeech.com/category/health/	http://joerg.li/category/health/	http://connstr.net/category/health/	http://embermanchester.uk/category/health/	http://www.slipstone.co.uk/category/health/	http://www.logoarts.co.uk/category/health/	http://www.acpirateradio.co.uk/category/health/	https://waytowhatsnext.com/category/health/	https://www.webb-dev.co.uk/category/health/	http://www.iu-bloomington.com/category/health/	http://www-look-4.com/category/health/</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>373</attachid>
            <date>2019-08-01 22:28:36 +0000</date>
            <delta_ts>2019-08-08 02:46:13 +0000</delta_ts>
            <desc>V1 Patch</desc>
            <filename>0001-MdeModulePkg-PiDxeS3BootScriptLib-Fix-potential-nume.patch</filename>
            <type>text/plain</type>
            <size>5159</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>374</attachid>
            <date>2019-08-01 22:35:06 +0000</date>
            <delta_ts>2019-08-01 22:35:06 +0000</delta_ts>
            <desc>Uni-test case</desc>
            <filename>Unitest.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>1759</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>378</attachid>
            <date>2019-08-08 02:46:13 +0000</date>
            <delta_ts>2019-08-08 02:46:13 +0000</delta_ts>
            <desc>V2 Patch</desc>
            <filename>0001-MdeModulePkg-PiDxeS3BootScriptLib-Fix-potential-nume.patch</filename>
            <type>text/plain</type>
            <size>5291</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2937</bug_id>
          
          <creation_ts>2020-08-26 23:32:42 +0000</creation_ts>
          <short_desc>In Acpi10.h, EFI_ACPI_DMA_TRANSFER_TYPE_16_BIT is defined with the wrong value.</short_desc>
          <delta_ts>2020-09-03 10:40:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Paul G">paul.grimes</reporter>
          <assigned_to name="Paul G">paul.grimes</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13554</commentid>
    <comment_count>0</comment_count>
    <who name="Paul G">paul.grimes</who>
    <bug_when>2020-08-26 23:32:42 +0000</bug_when>
    <thetext>In file &apos;edk2\MdePkg\Include\IndustryStandard\Acpi10.h&apos;, 
&apos;#define EFI_ACPI_DMA_TRANSFER_TYPE_16_BIT 0x10&apos; should be defined as 0x02, not 0x10, according to the ACPI Specification.

From the ACPI Specification (https://uefi.org/sites/default/files/resources/ACPI_6_3_May16.pdf):

19.6.32 DMA (DMA Resource Descriptor Macro)
&quot;DmaTransferSize specifies the size of DMA cycles the device is capable of generating: 8-bit (Transfer8),
16-bit (Transfer16) or both 8 and 16-bit (Transfer8_16). The 2-bit field DescriptorName._SIZ is
automatically created to refer to this portion of the resource descriptor, where ‘0’ is Transfer8, ‘1’ is
Transfer8_16 and ‘2’ is Transfer16.&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13556</commentid>
    <comment_count>1</comment_count>
    <who name="Paul G">paul.grimes</who>
    <bug_when>2020-08-27 14:53:17 +0000</bug_when>
    <thetext>I plan to submit a patch for this issue soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13563</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-28 02:09:55 +0000</bug_when>
    <thetext>Paul takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13613</commentid>
    <comment_count>3</comment_count>
    <who name="Paul G">paul.grimes</who>
    <bug_when>2020-09-03 10:40:11 +0000</bug_when>
    <thetext>Fixed in edk2 master with commit: 5ffcbc46908a2037ae3260d3cfcc103e4a6a48c0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2704</bug_id>
          
          <creation_ts>2020-05-07 08:13:53 +0000</creation_ts>
          <short_desc>[DevicePathProcotols\DevicePathFromTextProcotolTest] Lun number of iSCSI node is 64 bit</short_desc>
          <delta_ts>2021-11-11 09:36:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Keerthivasan">keerthivasanx.elangovan</reporter>
          <assigned_to name="Sunny Wang">Sunny.Wang</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>keerthivasanx.elangovan</cc>
    
    <cc>nobody</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12442</commentid>
    <comment_count>0</comment_count>
    <who name="Keerthivasan">keerthivasanx.elangovan</who>
    <bug_when>2020-05-07 08:13:53 +0000</bug_when>
    <thetext>In DevicePathProcotols\DevicePathFromTextProcotolTest  iSCSI test case:
LUN of iSCSI node was wrongly defined as 8 bit. It should be changed to 64 bit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12489</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-12 22:10:58 +0000</bug_when>
    <thetext>Please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15867</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 04:13:27 +0000</bug_when>
    <thetext>@Keerthivasan:
Please, indicate exactly which code position you deem wrong. Could you provide a patch, please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17454</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-10-07 10:43:22 +0000</bug_when>
    <thetext>Sunny to analyse.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17708</commentid>
    <comment_count>4</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-11-09 17:47:01 +0000</bug_when>
    <thetext>I can&apos;t find the issue that Keerthivasan reported.
It looks like we correctly defined the LUN of the iSCSI device path node. It is already UINT64. The BuildiSCSIDeviceNode() also declares variables (TempLunNum and LunNum) with correct size (UINT64). I also checked the whole source code by using the keyword &quot;iSCSI&quot; and didn&apos;t find anything wrong either.  

typedef struct {
  EFI_DEVICE_PATH_PROTOCOL  Header;
  UINT16                    NetworkProtocol;
  UINT16                    LoginOption;
  UINT64                    Lun;
  UINT16                    TargetPortalGroupTag;
  CHAR8                     iSCSITargetName[1];
} ISCSI_DEVICE_PATH_WITH_NAME;

https://github.com/tianocore/edk2-test/blob/dc6efa23c099a04702854d36e518939b50aeea7f/uefi-sct/SctPkg/UEFI/Protocol/DevicePath.h#L912 


I also sent email to Keerthivasa, but the email address is not deliverable. 

Therefore, I think we can close this issue now. Then, if Keerthivasa gets time to check this, he can re-open this issue for further discussion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17729</commentid>
    <comment_count>5</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-11-11 09:36:16 +0000</bug_when>
    <thetext>This may be an invalid issue.
Closing after verification by Sunny.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2024</bug_id>
          
          <creation_ts>2019-07-26 04:41:42 +0000</creation_ts>
          <short_desc>Should add build option &quot;-fno-omit-frame-pointer&quot; in SecMain.inf</short_desc>
          <delta_ts>2020-02-27 12:59:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
    
    <cc>stephano</cc>
    
    <cc>steven.shi</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8606</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-07-26 04:41:42 +0000</bug_when>
    <thetext>In OvmfPkg\Sec\SecMain.c, the following code has a assumption that Esp or Rsp is used as a frame pointer. 

#if defined (MDE_CPU_IA32)
    JumpBuffer.Esp = JumpBuffer.Esp + DebugAgentContext.StackMigrateOffset;
    JumpBuffer.Ebp = JumpBuffer.Ebp + DebugAgentContext.StackMigrateOffset;
#endif    
#if defined (MDE_CPU_X64)
    JumpBuffer.Rsp = JumpBuffer.Rsp + DebugAgentContext.StackMigrateOffset;
    JumpBuffer.Rbp = JumpBuffer.Rbp + DebugAgentContext.StackMigrateOffset;
#endif 

However, some compiler like Clang 9 use Esp or Rsp as a normal-purpose register, which will break this assumption, as the following assembly code. 

PeiCheckAndSwitchStack in Peicore:
  00000000000055D1: FF 10              call        qword ptr [rax]       
it calls TemporaryRamMigration in secmain.c, where the rbp was changed
  00000000000055D3: 48 89 E9           mov         rcx,rbp
  00000000000055D6: B2 01              mov         dl,1
  00000000000055D8: E8 7A F1 FF FF     call        0000000000004757
  00000000000055DD: 4C 89 F1           mov         rcx,r14
  00000000000055E0: 31 D2              xor         edx,edx
  00000000000055E2: 49 89 E8           mov         r8,rbp            
it use rbp as a normal register, without knowing it has been changed
  00000000000055E5: E8 F5 BB FF FF     call        00000000000011DF     
the changed value passed to next function, which causes error

So, build option &quot;-fno-omit-frame-pointer&quot; should be added in SecMain.inf to explicitly tell the compiler to use Esp or Rsp as a frame pointer, like:

GCC:*_*_*_CC_FLAGS                   =-fno-omit-frame-pointer</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8607</commentid>
    <comment_count>1</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-07-26 04:47:48 +0000</bug_when>
    <thetext>Sorry, there are some typo. Misuse esp and ebp. Please see this comment.

In OvmfPkg\Sec\SecMain.c, the following code has a assumption that Ebp or Rbp is used as a frame pointer. 

#if defined (MDE_CPU_IA32)
    JumpBuffer.Esp = JumpBuffer.Esp + DebugAgentContext.StackMigrateOffset;
    JumpBuffer.Ebp = JumpBuffer.Ebp + DebugAgentContext.StackMigrateOffset;
#endif    
#if defined (MDE_CPU_X64)
    JumpBuffer.Rsp = JumpBuffer.Rsp + DebugAgentContext.StackMigrateOffset;
    JumpBuffer.Rbp = JumpBuffer.Rbp + DebugAgentContext.StackMigrateOffset;
#endif 

However, some compiler like Clang 9 use Ebp or Rbp as a normal-purpose register, which will break this assumption, as the following assembly code. 

PeiCheckAndSwitchStack in Peicore:
  00000000000055D1: FF 10              call        qword ptr [rax]       
it calls TemporaryRamMigration in secmain.c, where the rbp was changed
  00000000000055D3: 48 89 E9           mov         rcx,rbp
  00000000000055D6: B2 01              mov         dl,1
  00000000000055D8: E8 7A F1 FF FF     call        0000000000004757
  00000000000055DD: 4C 89 F1           mov         rcx,r14
  00000000000055E0: 31 D2              xor         edx,edx
  00000000000055E2: 49 89 E8           mov         r8,rbp            
it use rbp as a normal register, without knowing it has been changed
  00000000000055E5: E8 F5 BB FF FF     call        00000000000011DF     
the changed value passed to next function, which causes error

So, build option &quot;-fno-omit-frame-pointer&quot; should be added in SecMain.inf to explicitly tell the compiler to use Ebp or Rbp as a frame pointer, like:

GCC:*_*_*_CC_FLAGS                   =-fno-omit-frame-pointer</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8608</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-26 08:16:38 +0000</bug_when>
    <thetext>If I remember correctly, Jordan investigated this question very deeply.
It is actually tied to a design problem with the PEI Core. Please see
the discussion in the following threads:

* [edk2] EmulatorPkg Unix Host Segmentation fault.
  http://mid.mail-archive.com/TY2PR02MB28317A7BB9ADD94DB5B385A98FDF0@TY2PR02MB2831.apcprd02.prod.outlook.com
  https://lists.01.org/pipermail/edk2-devel/2018-November/032577.html

* [edk2] [PATCH 00/10] Fix PEI Core issue during TemporaryRamMigration
  http://mid.mail-archive.com/20190218041141.21363-1-jordan.l.justen@intel.com
  https://lists.01.org/pipermail/edk2-devel/2019-February/036797.html

* [edk2-devel] [PATCH v2 0/6] Fix PEI Core issue during TemporaryRamMigration
  http://mid.mail-archive.com/20190410084000.19660-1-jordan.l.justen@intel.com
  https://edk2.groups.io/g/devel/message/38785

* [edk2-devel] [RFC] Remove PI spec TemporaryRamSupport PPI from PEI Core
  http://mid.mail-archive.com/155609227739.7682.10069568985394331160@jljusten-skl
  https://edk2.groups.io/g/devel/message/39471

(CC&apos;ing Jordan.)

Personally, I think that tweaking the build flags is inferior to fixing
the problem at the design level.

And even if we decided to tweak some build flags, I&apos;d insist that those
tweaks be restricted to the CLANG toolchains that actually expose a
problem. For example, we have several XCODE5-specific tweaks in the OVMF
DSC/FDF files already. (Run &quot;git blame&quot; to learn more about those.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8609</commentid>
    <comment_count>3</comment_count>
    <who name="Jordan Justen">jordan.l.justen</who>
    <bug_when>2019-07-26 14:20:52 +0000</bug_when>
    <thetext>I guess you&apos;d want to refer to my 6 patch series
&quot;Fix PEI Core issue during TemporaryRamMigration&quot; from
April 10.

Ray has pushed back, preferring to try to deprecate the
support of TemporaryRamMigration instead. Deprecating support
for TemporaryRamMigration was also pushed back on because
apparently the FSP infrastructure uses it. And therefore the
bug persists...

Regarding the frame pointer situation, I have another
patch that adds code like this to the .c around
TemporaryRamMigration, instead of changing the build
flags for the entire file:

#ifdef __GNUC__
#pragma GCC push_options
#pragma GCC optimize (&quot;no-omit-frame-pointer&quot;)                                                                                                                                                                      
#else
#pragma optimize (&quot;y&quot;, off)                                                                                                                                                                                         
#endif

...

#ifdef __GNUC__                                                                                                                                                                                                     
#pragma GCC pop_options                                                                                                                                                                                             
#else                                                                                                                                                                                                               
#pragma optimize (&quot;&quot;, on)                                                                                                                                                                                           
#endif</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8619</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-29 07:03:46 +0000</bug_when>
    <thetext>(In reply to Jordan Justen from comment #3)
&gt; I guess you&apos;d want to refer to my 6 patch series &quot;Fix PEI Core issue
&gt; during TemporaryRamMigration&quot; from April 10.

Yes, that&apos;s what I linked in comment 2 as third reference :)

&gt; Ray has pushed back, preferring to try to deprecate the support of
&gt; TemporaryRamMigration instead. Deprecating support for
&gt; TemporaryRamMigration was also pushed back on because apparently the
&gt; FSP infrastructure uses it.

Indeed, Nate made that comment (in the thread referenced as fourth in
comment 2).

&gt; And therefore the bug persists...
&gt;
&gt; Regarding the frame pointer situation, I have another patch that adds
&gt; code like this to the .c around TemporaryRamMigration, instead of
&gt; changing the build flags for the entire file:
&gt;
&gt; #ifdef __GNUC__
&gt; #pragma GCC push_options
&gt; #pragma GCC optimize (&quot;no-omit-frame-pointer&quot;)
&gt; #else
&gt; #pragma optimize (&quot;y&quot;, off)
&gt; #endif
&gt;
&gt; ...
&gt;
&gt; #ifdef __GNUC__
&gt; #pragma GCC pop_options
&gt; #else
&gt; #pragma optimize (&quot;&quot;, on)
&gt; #endif

I like that this tightens the scope of the workaround, relative to a
[BuildOptions] section in the INF file. Also, the problem is obscure
already, and this approach doesn&apos;t make it worse. I guess this is the
second best approach (running up to v2 of &quot;Fix PEI Core issue during
TemporaryRamMigration&quot;).

The oldest GCC toolchain edk2 supports at the moment is GCC48; I still
use it day-to-day, so I could help with testing the pragmas against
GCC48. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8897</commentid>
    <comment_count>5</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:38:16 +0000</bug_when>
    <thetext>Bug Triage: confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9841</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-27 02:49:17 +0000</bug_when>
    <thetext>This issue is only found in CLANG9 X64 arch. So, I prefer to add the specific build option for CLANG9 X64 arch only. 

[BuildOptions]
  GCC:*_CLANG9_X64_CC_FLAGS = -fno-omit-frame-pointer</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9844</commentid>
    <comment_count>7</comment_count>
    <who name="Jordan Justen">jordan.l.justen</who>
    <bug_when>2019-09-27 14:12:13 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #6)
&gt; This issue is only found in CLANG9 X64 arch. So, I prefer to add the
&gt; specific build option for CLANG9 X64 arch only. 
&gt; 
&gt; [BuildOptions]
&gt;   GCC:*_CLANG9_X64_CC_FLAGS = -fno-omit-frame-pointer

I disagree on two points.

1. I think we should use the pragma to limit the scope of code
affected by the flag.

2. I don&apos;t think we should assume that only CLANG9 is affected.

As mentioned previously, we still continue to ignore my
related &quot;Fix PEI Core issue during TemporaryRamMigration&quot;
series from April.

Because some did not like assembly code in PEI Core, that
important fix has remained unfixed for many month, preferring
instead to try for a unrealistic approach of deviating from
the PI industry spec. After that approach failed, my fix has
continued to be ignored, along with the bug.

That is also similar to this latest comment. Apparently this
issue is now affecting Liming on CLANG9, so somehow the
conclusion becomes that it must be an issue specific to CLANG9.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9870</commentid>
    <comment_count>8</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-29 02:24:41 +0000</bug_when>
    <thetext>I add #pragma GCC optimize (&quot;no-omit-frame-pointer&quot;) in SecMain.c to wrap TemporaryRamMigration() API. It doesn&apos;t work for CLANG9. 

I find this issue only in CLANG9 on X64 arch for Ovmf platform. I don&apos;t meet with such issue in CLANG9 on X64 arch for Emulator platform. In fact, there is no real platform to use X64 SecMain. So, I think this issue impact is not big. I don&apos;t want to let it depend on PeiCore change. I suggest to handle it in Ovmf SecMain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11465</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 12:59:03 +0000</bug_when>
    <thetext>We&apos;ve been unable to agree on the right approach here. It&apos;s no use to keep this BZ open forever. Closing as WONTFIX.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2845</bug_id>
          
          <creation_ts>2020-07-09 23:04:39 +0000</creation_ts>
          <short_desc>To enable X2Apic by default</short_desc>
          <delta_ts>2020-07-29 06:10:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>ji-yunx.lu</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13081</commentid>
    <comment_count>0</comment_count>
    <who name="">ji-yunx.lu</who>
    <bug_when>2020-07-09 23:04:39 +0000</bug_when>
    <thetext>Platform shall enable X2APIC by default to meet requirements for interrupt steering policy on Windows OS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13208</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-28 22:16:36 +0000</bug_when>
    <thetext>Ray: can you response this topic in the mail list?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13222</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-29 06:00:31 +0000</bug_when>
    <thetext>A patch was posted earlier:

[edk2-devel] [edk2: PATCH] UefiCpuPkg: To enable X2Apic by default
https://edk2.groups.io/g/devel/message/62342
http://mid.mail-archive.com/20200710033123.2236-1-ji-yunx.lu@intel.com

(see my comments in the review thread, on the list)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13223</commentid>
    <comment_count>3</comment_count>
    <who name="">ji-yunx.lu</who>
    <bug_when>2020-07-29 06:10:21 +0000</bug_when>
    <thetext>Sorry for late replying.
We&apos;re discussing to implement through another way, I think we can close this issue for now, and would create a new issue once required.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2618</bug_id>
          
          <creation_ts>2020-03-23 13:00:04 +0000</creation_ts>
          <short_desc>Update edk2 CI to nodejs version 12.x (LTS)</short_desc>
          <delta_ts>2021-08-20 00:26:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11775</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-23 13:00:04 +0000</bug_when>
    <thetext>Keep nodejs on LTS version which is 12.x

Have noticed a couple of cpsell differences in node 12 mostly around file paths reported for errors. 

example fix:
https://github.com/microsoft/mu_basecore/pull/56</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11815</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-24 21:53:26 +0000</bug_when>
    <thetext>Shenglei, please send the patch for the review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12122</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:28:25 +0000</bug_when>
    <thetext>Shenglei has sent the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14015</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-10-17 04:28:16 +0000</bug_when>
    <thetext>Should update to this 14.x now

https://github.com/microsoft/mu_basecore/commit/bea18157179418a768488cfc4e5a48c13cccb2d6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16350</commentid>
    <comment_count>4</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-06-11 20:08:58 +0000</bug_when>
    <thetext>This is now breaking the CI process.  cspell requires at least version 12.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16998</commentid>
    <comment_count>5</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2021-08-20 00:26:52 +0000</bug_when>
    <thetext>done as this commit 
https://github.com/tianocore/edk2/commit/18b2272e4d6cc0856f3011a97ce8a45055cdffa7#diff-5df5e85741d195d343dfac05bdd7a7f8da775b6e0f0bcfb3239f79e0e6186248</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2287</bug_id>
          
          <creation_ts>2019-10-18 05:32:40 +0000</creation_ts>
          <short_desc>Overflowed array index on array mSxTypeString</short_desc>
          <delta_ts>2020-04-08 02:04:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10100</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-10-18 05:32:40 +0000</bug_when>
    <thetext>In source MdeModulePkg/Application/SmiHandlerProfileInfo/SmiHandlerProfileInfo.c, function SxTypeToString() we have:

385  if (Type &gt;= 0 &amp;&amp; Type &lt;= ARRAY_SIZE(mSxTypeString)) {
386    return mSxTypeString[Type];
387  } else {

I believe the comparison is off-by one on the upper limit, it should be:

 if (Type &gt;= 0 &amp;&amp; Type &lt; ARRAY_SIZE(mSxTypeString)) {</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10273</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:57:31 +0000</bug_when>
    <thetext>Shenglei: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11318</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-19 21:15:11 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11320</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 21:16:37 +0000</bug_when>
    <thetext>Please check.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11544</commentid>
    <comment_count>4</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 22:02:27 +0000</bug_when>
    <thetext>Similar issue with BZ2272, please review https://bugzilla.tianocore.org/show_bug.cgi?id=2272 for status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12131</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-08 02:04:13 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/d6f99b2ac4296662720db76d7c23d224f5288df3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2756</bug_id>
          
          <creation_ts>2020-05-21 14:54:25 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-21 14:56:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>CoffelakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12644</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:54:25 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12655</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:56:36 +0000</bug_when>
    <thetext>Bad, script! Bad!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2535</bug_id>
          
          <creation_ts>2020-02-17 23:29:59 +0000</creation_ts>
          <short_desc>UnitTestFrameworkPkg: Invalid index may be used in array</short_desc>
          <delta_ts>2020-06-03 16:39:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11288</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-17 23:29:59 +0000</bug_when>
    <thetext>Edk2\UnitTestFrameworkPkg\Library\UnitTestResultReportLib\UnitTestResultReportLib.c
line 79
return mStatusStrings[Index].String;

line 102
return mFailureTypeStrings[Index].String;

Index may be out of boundary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11289</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-17 23:30:21 +0000</bug_when>
    <thetext>Assigned to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11298</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 00:38:19 +0000</bug_when>
    <thetext>Please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11525</commentid>
    <comment_count>3</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 06:20:02 +0000</bug_when>
    <thetext>Add comment on https://edk2.groups.io/g/devel/message/54659, waiting for reviewing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11870</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-27 01:41:12 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/381f8ef6a176b41c350a7c50da403c30da70cde7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2309</bug_id>
          
          <creation_ts>2019-10-23 22:12:36 +0000</creation_ts>
          <short_desc>Add UEFI 2.8 new memory attribute definitions</short_desc>
          <delta_ts>2019-11-03 21:29:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="qhuang8">qing.huang</reporter>
          <assigned_to name="qhuang8">qing.huang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10206</commentid>
    <comment_count>0</comment_count>
    <who name="qhuang8">qing.huang</who>
    <bug_when>2019-10-23 22:12:36 +0000</bug_when>
    <thetext>UEFI 2.8 introduce EFI_MEMORY_SP and EFI_MEMORY_CPU_CRYPTO. MdePkg needs to includes their definitions in header file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10260</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:29:14 +0000</bug_when>
    <thetext>Qing patch is ready. After patch is submitted, this BZ can be closed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10299</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-03 21:29:14 +0000</bug_when>
    <thetext>Fix it at c18708d2f002a6ea43ed65d6c76dc4020687005c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2202</bug_id>
          
          <creation_ts>2019-09-18 10:22:38 +0000</creation_ts>
          <short_desc>Add definitions in SmBIos.h to support SMBIOS spec 3.3.0</short_desc>
          <delta_ts>2019-10-24 02:45:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9707</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2019-09-18 10:22:38 +0000</bug_when>
    <thetext>For the upcoming SMBIOS 3.3.0b (already approved to public), add new definitions of SMBIOS record to SmBios.h. RISC-V platforms utilize the new SMBIOS record (Type 44) to describe RISC-V core capabilities.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9863</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 21:24:10 +0000</bug_when>
    <thetext>This change can be submit once SMBIOS 3.3.0b is published.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9920</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2019-10-04 11:16:26 +0000</bug_when>
    <thetext>SMBIOS v3.3.0 is already published, in which the definitions of Type 44 record is included. We don&apos;t have to wait for 3.3.0b.
https://www.dmtf.org/standards/smbios</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10209</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-24 02:45:01 +0000</bug_when>
    <thetext>push b8fc5c03e5b5551b083f7efe91a051faa00c1e27..e797a806a8d090a09a782fe10ba2765154579d4b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2663</bug_id>
          
          <creation_ts>2020-04-04 15:09:35 +0000</creation_ts>
          <short_desc>EmulatorPkg has a public header file in Include/Library that is not declared in EmulatorPkg.dec library class</short_desc>
          <delta_ts>2020-04-13 01:49:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12068</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-04 15:09:35 +0000</bug_when>
    <thetext>This file should either be added to dec as a library class. 

Include/Library/EmuMagicPageLib.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12077</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-06 11:06:59 +0000</bug_when>
    <thetext>Guomin: please fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12095</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 21:49:36 +0000</bug_when>
    <thetext>Guomin has sent the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12192</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-13 01:49:37 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/21276ce09370bd3a6d4eeaab00ea8216c75c9c3e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2558</bug_id>
          
          <creation_ts>2020-02-26 00:58:25 +0000</creation_ts>
          <short_desc>BaseTools: Use submodule way to access brotli</short_desc>
          <delta_ts>2020-11-25 20:40:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2559</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2677</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2692</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2779</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hudson</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11433</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-26 00:58:25 +0000</bug_when>
    <thetext>brotli is a git repo(https://github.com/google/brotli).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11434</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-26 00:59:10 +0000</bug_when>
    <thetext>Assigned to Shenglei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11558</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-03-05 03:13:59 +0000</bug_when>
    <thetext>The patch is too big. So I put the change on my github.
https://github.com/shenglei10/edk2/commit/ec87a5e55b6855795bf822399b347cdbe5fc601f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11560</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-05 03:24:00 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/55135</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11587</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-06 10:20:41 +0000</bug_when>
    <thetext>Use submodule way to access the third party code in Edk2 can make sure there is no additional changes in the third party code. And, when do update, submodule way just needs to change the version to point the submodule code. It will save the effort in the maintenance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12224</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-16 13:15:59 +0000</bug_when>
    <thetext>Fixed in commit 06033f5abad3 (&quot;BaseTools: Make brotli a submodule&quot;, 2020-04-16).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14417</commentid>
    <comment_count>6</comment_count>
    <who name="Trammell Hudson">hudson</who>
    <bug_when>2020-11-25 09:25:43 +0000</bug_when>
    <thetext>This breaks the release archives since the submodule is not included in the tar file edk2-stable202008.tar.gz.  `BaseTools/Source/C/BrotliCompress/brotli/` is an empty directory, so a clean build fails:

```
make -C BaseTools/
make: Entering directory &apos;/home/hudson/heads/safeboot/build/edk2-stable202008/BaseTools&apos;
make -C Source/C
make[1]: Entering directory &apos;/home/hudson/heads/safeboot/build/edk2-stable202008/BaseTools/Source/C&apos;
Attempting to detect HOST_ARCH from &apos;uname -m&apos;: x86_64
Detected HOST_ARCH of X64 using uname.
mkdir -p .
make -C Common
make[2]: Entering directory &apos;/home/hudson/heads/safeboot/build/edk2-stable202008/BaseTools/Source/C/Common&apos;
make[2]: Nothing to be done for &apos;all&apos;.
make[2]: Leaving directory &apos;/home/hudson/heads/safeboot/build/edk2-stable202008/BaseTools/Source/C/Common&apos;
make -C BrotliCompress
make[2]: Entering directory &apos;/home/hudson/heads/safeboot/build/edk2-stable202008/BaseTools/Source/C/BrotliCompress&apos;
gcc -o ../bin/Brotli   brotli/c/tools/brotli.o brotli/c/common/dictionary.o brotli/c/common/transform.o brotli/c/dec/bit_reader.o brotli/c/dec/decode.o brotli/c/dec/huffman.o brotli/c/dec/state.o brotli/c/enc/backward_references.o brotli/c/enc/backward_references_hq.o brotli/c/enc/bit_cost.o brotli/c/enc/block_splitter.o brotli/c/enc/brotli_bit_stream.o brotli/c/enc/cluster.o brotli/c/enc/compress_fragment.o brotli/c/enc/compress_fragment_two_pass.o brotli/c/enc/dictionary_hash.o brotli/c/enc/encode.o brotli/c/enc/encoder_dict.o brotli/c/enc/entropy_encode.o brotli/c/enc/histogram.o brotli/c/enc/literal_cost.o brotli/c/enc/memory.o brotli/c/enc/metablock.o brotli/c/enc/static_dict.o brotli/c/enc/utf8_util.o -L../libs -lm
gcc: error: brotli/c/tools/brotli.o: No such file or directory
gcc: error: brotli/c/common/dictionary.o: No such file or directory
gcc: error: brotli/c/common/transform.o: No such file or directory
gcc: error: brotli/c/dec/bit_reader.o: No such file or directory
gcc: error: brotli/c/dec/decode.o: No such file or directory
gcc: error: brotli/c/dec/huffman.o: No such file or directory
gcc: error: brotli/c/dec/state.o: No such file or directory
gcc: error: brotli/c/enc/backward_references.o: No such file or directory
gcc: error: brotli/c/enc/backward_references_hq.o: No such file or directory
gcc: error: brotli/c/enc/bit_cost.o: No such file or directory
gcc: error: brotli/c/enc/block_splitter.o: No such file or directory
gcc: error: brotli/c/enc/brotli_bit_stream.o: No such file or directory
gcc: error: brotli/c/enc/cluster.o: No such file or directory
gcc: error: brotli/c/enc/compress_fragment.o: No such file or directory
gcc: error: brotli/c/enc/compress_fragment_two_pass.o: No such file or directory
gcc: error: brotli/c/enc/dictionary_hash.o: No such file or directory
gcc: error: brotli/c/enc/encode.o: No such file or directory
gcc: error: brotli/c/enc/encoder_dict.o: No such file or directory
gcc: error: brotli/c/enc/entropy_encode.o: No such file or directory
gcc: error: brotli/c/enc/histogram.o: No such file or directory
gcc: error: brotli/c/enc/literal_cost.o: No such file or directory
gcc: error: brotli/c/enc/memory.o: No such file or directory
gcc: error: brotli/c/enc/metablock.o: No such file or directory
gcc: error: brotli/c/enc/static_dict.o: No such file or directory
gcc: error: brotli/c/enc/utf8_util.o: No such file or directory
../Makefiles/app.makefile:18: recipe for target &apos;../bin/Brotli&apos; failed
make[2]: *** [../bin/Brotli] Error 1
make[2]: Leaving directory &apos;/home/hudson/heads/safeboot/build/edk2-stable202008/BaseTools/Source/C/BrotliCompress&apos;
GNUmakefile:74: recipe for target &apos;BrotliCompress&apos; failed
make[1]: *** [BrotliCompress] Error 2
make[1]: Leaving directory &apos;/home/hudson/heads/safeboot/build/edk2-stable202008/BaseTools/Source/C&apos;
GNUmakefile:19: recipe for target &apos;Source/C&apos; failed
make: *** [Source/C] Error 2
make: Leaving directory &apos;/home/hudson/heads/safeboot/build/edk2-stable202008/BaseTools&apos;
```</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14418</commentid>
    <comment_count>7</comment_count>
    <who name="Trammell Hudson">hudson</who>
    <bug_when>2020-11-25 09:40:10 +0000</bug_when>
    <thetext>This also affects the release 2020005, although older tar files are also not buildable due to gitmodules not being recursively included in the release.  202002 can&apos;t be built due to missing openssl https://github.com/tianocore/edk2/commit/0c1ffb9504c398a2d655934c0c871222f72a7d63</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14421</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-25 12:09:18 +0000</bug_when>
    <thetext>Hello Trammel (also updating Liming&apos;s email address on the CC list),

thanks for the report. First, we should have a separate BZ about this; please consider filing one.

Second, according to at least the following links:

https://stackoverflow.com/questions/34719785/how-to-add-submodule-files-to-a-github-release
https://github.community/t/create-release-that-contains-submodule/1329

github doesn&apos;t support automatically flattening submodule trees into tarball(s) of the superproject&apos;s release.

As far as I can see, github does support adding binary files to releases manually. So when we create a release, we should be able to fetch ZIP files or tarballs from the submodule projects (at the commits where we consume them in edk2), and attach those ZIPs/tarballs manually to the edk2 release. The ZIP or tarball for each project could either be fetched via the github WebUI -- if the given submodule lives on github.com --, or even generated locally, with the following commands:

$ git submodule deinit --force --all
$ git submodule update --force --init
$ git submodule foreach &apos;
    set -e -u -C
    archive=submodule-$(tr &apos;/&apos; &apos;-&apos; &lt;&lt;&lt; &quot;$name&quot;)
    rm -f -- &quot;$toplevel/$archive.zip&quot;
    git archive --format=zip --prefix=&quot;$sm_path/&quot; --output=&quot;$toplevel/$archive.zip&quot; &quot;$sha1&quot;
    &apos;

This will create the following list of files in the project root directory:

  submodule-BaseTools-Source-C-BrotliCompress-brotli.zip
  submodule-CryptoPkg-Library-OpensslLib-openssl.zip
  submodule-MdeModulePkg-Library-BrotliCustomDecompressLib-brotli.zip
  submodule-MdeModulePkg-Universal-RegularExpressionDxe-oniguruma.zip
  submodule-SoftFloat.zip
  submodule-UnitTestFrameworkPkg-Library-CmockaLib-cmocka.zip

On the consumer side, each ZIP file should be expanded while standing in the project root directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14426</commentid>
    <comment_count>9</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-25 20:40:23 +0000</bug_when>
    <thetext>Laszlo: your solution is good. After create stable tag, I will upload those submodule ZIPs into tag, and update the notes to extract them all.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2938</bug_id>
          
          <creation_ts>2020-08-27 15:06:40 +0000</creation_ts>
          <short_desc>Structured PCD for ACPI fixed tables is limited by BaseTools having copies of ACPI header files</short_desc>
          <delta_ts>2020-10-10 02:24:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Garrett Kirkendall">garrett.kirkendall</reporter>
          <assigned_to>gaoliming</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13557</commentid>
    <comment_count>0</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2020-08-27 15:06:40 +0000</bug_when>
    <thetext>BaseTools has the following header files:
./Source/C/Include/IndustryStandard/Acpi.h
./Source/C/Include/IndustryStandard/Acpi1_0.h
./Source/C/Include/IndustryStandard/Acpi2_0.h
./Source/C/Include/IndustryStandard/Acpi3_0.h

having Acpi.h causes problems when trying to create Structured PCDs for fixed ACPI tables when referencing Acpi.h for the structure.  Also, the state of these files are very far behind MdePkg/Include/IndustryStandard/Acpi*.h files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13580</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-31 20:51:35 +0000</bug_when>
    <thetext>Bob: please check.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13638</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-07 21:29:53 +0000</bug_when>
    <thetext>@Garrett, does this request to update BaseTools Acpi.h to align to MdePkg Acpi.h?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13642</commentid>
    <comment_count>3</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2020-09-08 07:28:25 +0000</bug_when>
    <thetext>I want to be able to write ACPI related structured PCDs.  I guess the more interesting solution would not have the BaseTools header files at all, but I assume there is some reason they are there.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13646</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-08 22:51:37 +0000</bug_when>
    <thetext>For the structure PCD, their structures are from source package, such as MdePkg, MdeModulePkg. To compile them, they should get the definitions first from source packages, then from BaseTools. Attach one patch for this change. Please verify it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13647</commentid>
    <comment_count>5</comment_count>
      <attachid>550</attachid>
    <who name="">gaoliming</who>
    <bug_when>2020-09-08 22:52:49 +0000</bug_when>
    <thetext>Created attachment 550
Patch for BaseTools</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13652</commentid>
    <comment_count>6</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2020-09-09 16:18:31 +0000</bug_when>
    <thetext>I created a simple driver package which tries to use Structured PCDs with ACPI fixed table FACS.

https://github.com/gkirkendall-amd/edk2/tree/AcpiPcdStructure

I get a new error now.  Which is a pretty big can of worms of definitions.  I assume it doesn&apos;t understand PACKED which is in Base.h, but including Base.h in Acpi10.h causes more define problems.


### BUILD OUTPUT SNIPPET STAR: USING VS2017###

        cl.exe -c  /wd4200 /wd4034 /wd4101 /nologo /Zi /c /O2 /MT /W4 /WX /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE -Id:\roms\edk2_gkirkendall-amd\MdePkg -Id:\roms\edk2_gkirkendall-amd\MdePkg\Include -Id:\roms\edk2_gkirkendall-amd\MdePkg\Test\UnitTest\Include -I . -I D:\roms\edk2_gkirkendall-amd\BaseTools\Source\C\Include -I D:\roms\edk2_gkirkendall-amd\BaseTools\Source\C\Include\Ia32 -I D:\roms\edk2_gkirkendall-amd\BaseTools\Source\C\Common d:\roms\edk2_gkirkendall-amd\Build\AcpiPcdStructure\DEBUG_VS2017\PcdValueInit\PcdValueInit.c -Fod:\roms\edk2_gkirkendall-amd\Build\AcpiPcdStructure\DEBUG_VS2017\PcdValueInit\PcdValueInit.obj
PcdValueInit.c
d:\roms\edk2_gkirkendall-amd\MdePkg\Include\IndustryStandard/Acpi10.h(115): error C2220: warning treated as error - no &apos;object&apos; file generated
d:\roms\edk2_gkirkendall-amd\MdePkg\Include\IndustryStandard/Acpi10.h(115): warning C4431: missing type specifier - int assumed. Note: C no longer supports default-int
d:\roms\edk2_gkirkendall-amd\MdePkg\Include\IndustryStandard/Acpi10.h(115): error C2054: expected &apos;(&apos; to follow &apos;PACKED&apos;
d:\roms\edk2_gkirkendall-amd\MdePkg\Include\IndustryStandard/Acpi10.h(126): error C2085: &apos;EFI_ACPI_ADDRESS_SPACE_DESCRIPTOR&apos;: not in formal parameter list
d:\roms\edk2_gkirkendall-amd\MdePkg\Include\IndustryStandard/Acpi10.h(128): error C2236: unexpected token &apos;union&apos;. Did you forget a &apos;;&apos;?
d:\roms\edk2_gkirkendall-amd\MdePkg\Include\IndustryStandard/Acpi10.h(130): error C2236: unexpected token &apos;struct&apos;. Did you forget a &apos;;&apos;?
d:\roms\edk2_gkirkendall-amd\MdePkg\Include\IndustryStandard/Acpi10.h(131): error C2057: expected constant expression
d:\roms\edk2_gkirkendall-amd\MdePkg\Include\IndustryStandard/Acpi10.h(131): error C2149: &apos;Length&apos;: named bit field cannot have zero width
d:\roms\edk2_gkirkendall-amd\MdePkg\Include\IndustryStandard/Acpi10.h(132): error C2057: expected constant expression</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13653</commentid>
    <comment_count>7</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2020-09-09 16:19:40 +0000</bug_when>
    <thetext>I had the attached patch applied to my tree as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13655</commentid>
    <comment_count>8</comment_count>
      <attachid>551</attachid>
    <who name="">gaoliming</who>
    <bug_when>2020-09-09 21:20:49 +0000</bug_when>
    <thetext>Created attachment 551
Second patch for BaseTools</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13656</commentid>
    <comment_count>9</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-09 21:21:35 +0000</bug_when>
    <thetext>Add another patch to add the missing definition into BaseTools. With these two patches, AcpiPcdStructure can pass build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13657</commentid>
    <comment_count>10</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2020-09-10 09:26:04 +0000</bug_when>
    <thetext>The two patches fix the build problems.

I added FADT, HPET, and WSMT to my test branch to make sure those also built.

https://github.com/gkirkendall-amd/edk2/tree/AcpiPcdStructure

that should be enough to work for this problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13678</commentid>
    <comment_count>11</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-15 22:11:07 +0000</bug_when>
    <thetext>The patch has been sent for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13683</commentid>
    <comment_count>12</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-15 22:16:39 +0000</bug_when>
    <thetext>Two patches are under code review. 

https://edk2.groups.io/g/devel/message/65296
https://edk2.groups.io/g/devel/message/65297</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13696</commentid>
    <comment_count>13</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2020-09-16 14:11:06 +0000</bug_when>
    <thetext>I somehow missed the emails, but I&apos;ll give my verified by here:

Verified-by: Garrett Kirkendall &lt;garrett.kirkendall@amd.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13932</commentid>
    <comment_count>14</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-10 01:13:40 +0000</bug_when>
    <thetext>Create https://github.com/tianocore/edk2/pull/1000</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13936</commentid>
    <comment_count>15</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-10 02:24:03 +0000</bug_when>
    <thetext>Fix @f1567720b13a578ffa54716119f826df622babcd..151c2708990b83d482beb02a498e20b018341d00</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>550</attachid>
            <date>2020-09-08 22:52:49 +0000</date>
            <delta_ts>2020-09-08 22:52:49 +0000</delta_ts>
            <desc>Patch for BaseTools</desc>
            <filename>0001-BaseTools-Move-C-tool-flags-before-the-common-flags.patch</filename>
            <type>text/plain</type>
            <size>2385</size>
            <attacher>gaoliming</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>551</attachid>
            <date>2020-09-09 21:20:49 +0000</date>
            <delta_ts>2020-09-09 21:20:49 +0000</delta_ts>
            <desc>Second patch for BaseTools</desc>
            <filename>0001-BaseTools-Copy-PACKED-definition-from-MdePkg-Base.h.patch</filename>
            <type>text/plain</type>
            <size>1247</size>
            <attacher>gaoliming</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2352</bug_id>
          
          <creation_ts>2019-11-18 06:22:53 +0000</creation_ts>
          <short_desc>Add DDR5 definitions for SMBIOS 3.4.0</short_desc>
          <delta_ts>2020-11-10 15:48:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sanyo Wang">sanyo.wang</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10466</commentid>
    <comment_count>0</comment_count>
    <who name="Sanyo Wang">sanyo.wang</who>
    <bug_when>2019-11-18 06:22:53 +0000</bug_when>
    <thetext>Add DDR5 definitions for SMBIOS 3.4.0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11338</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 09:54:54 +0000</bug_when>
    <thetext>The change is in edk2-staging https://github.com/tianocore/edk2-staging/tree/Smbios34</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11425</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-25 03:58:55 +0000</bug_when>
    <thetext>Zhichao will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13072</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-07-08 22:25:06 +0000</bug_when>
    <thetext>The patch is already committed into the staging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13923</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-09 05:20:50 +0000</bug_when>
    <thetext>Pull request https://github.com/tianocore/edk2/pull/996 is created to merge this patch to edk2 master.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14305</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-10 15:48:18 +0000</bug_when>
    <thetext>Actually, the related PRs and commits are:

- 244be783ae04 (&quot;MdePkg: SMBIOS 3.4.0 Update &quot;adding DDR5 definitions&quot;.&quot;, 2020-10-10) --&gt; merged via &lt;https://github.com/tianocore/edk2/pull/998&gt;,

- 5d0a827122cc (&quot;ShellPkg/SmbiosView: Add DDR5 support&quot;, 2020-10-14) --&gt; merged via &lt;https://github.com/tianocore/edk2/pull/1011&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2705</bug_id>
          
          <creation_ts>2020-05-07 08:17:53 +0000</creation_ts>
          <short_desc>[DevicePathProcotols\DevicePathFromTextProcotolTest] DebugPort() test case</short_desc>
          <delta_ts>2021-05-01 04:08:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Keerthivasan">keerthivasanx.elangovan</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>nobody</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12443</commentid>
    <comment_count>0</comment_count>
    <who name="Keerthivasan">keerthivasanx.elangovan</who>
    <bug_when>2020-05-07 08:17:53 +0000</bug_when>
    <thetext>CreateDebugPortDeviceNode(text) creates proper device node. But it is checked with L&quot;DebugPort()&quot; which is not a valid device node.

Please help to correct it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12488</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-12 22:10:39 +0000</bug_when>
    <thetext>Please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15866</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 04:08:39 +0000</bug_when>
    <thetext>UEFI spec 2.9, page 348 requires

Type: 3 (Messaging Device Path)SubType: 10 (Vendor)GUID=EFI_DEBUGPORT_PROTOCOL_GUID

to be rendered as &quot;DebugPort()&quot;.

DevicePathFromTextConvertTextToDeviceNodeCoverageTest() tests if DevicePathFromText-&gt;ConvertTextToDeviceNode(L&quot;DebugPort()&quot;) creates the same device path node as function CreateDebugPortDeviceNode(L&quot;&quot;).

I can&apos;t see anything wrong here.

Closing as &quot;resolved - invalid&quot;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2376</bug_id>
          
          <creation_ts>2019-11-22 23:07:09 +0000</creation_ts>
          <short_desc>Need add a FSP binary measurement</short_desc>
          <delta_ts>2020-08-26 20:49:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="qi1.zhang@intel.com">qi1.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>john.mathews</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2WrapperPkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10527</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-11-22 23:07:09 +0000</bug_when>
    <thetext>[Issue Description]

The EDKII BIOS calls FSP API in FSP Wrapper Pkg.
This FSP code need to be measured into TPM.

We need add a generic module in FSP Wrapper Pkg code to measure:
1) FSP-T, FSP-M, FSP-S in API mode.
2) FSP-T in Dispatch-mode. The FSP-M and FSP-S will be reported as standard FV and they will be measured by TCG-PEI.

If Intel Boot Guard is enabled, some of the measurement shall be skipped, because ACM already measured the IBB which may include part of FSP binary.

====================
[CVSS]
Medium 6.8 - CVSS:3.0/AV:P/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H

====================

[Platform Impacted]
Current MinPlatform does not have such code. It is SRTM completeness issue.

If there is no production using MinPlatform code, and the production already has its own code in close source. We can disclosure this issue directly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10610</commentid>
    <comment_count>1</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-12-04 12:26:58 +0000</bug_when>
    <thetext>from 12/4/2019 bug scrub

feels similar to &apos;78 and &apos;77 in that the impact occurs depending upon platform build (e.g.,. non BtG on Intel, non PSP on AMD, non hw verifier on ARM SOC...)

no one in meeting knew of a platform impact, but given the variability of platforms, maybe treat as security and give 3 mo. embargo?  in addition to this tentative ruling, can query folks on the mailing list to assess impact.  If no one objects, can move to a functional bug fix in the open. (at least hear from kevin d and dick w on this point).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13012</commentid>
    <comment_count>2</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-01 12:50:25 +0000</bug_when>
    <thetext>Decision to make this public in 7/1 Infosec mtg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13051</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-07-06 01:34:54 +0000</bug_when>
    <thetext>Sample implementation at https://github.com/jyao1/edk2/tree/FspManifest</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13128</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-07-20 02:55:35 +0000</bug_when>
    <thetext>We need consider the case special cases:
1) The BootGuard ACM may already measured the FSP component, such as FSPT/FSPM.
We need a flag (PCD) to indicate if there is need to do such FSP measurement or NOT.

2) The FSP binary includes FSP code and FSP UPD region. The UPD region is considered as configuration block, and it may be updated by OEM by design.
We need a flag (PCD) to indicate if we need isolate the the UPD region from the FSP code region.

The proposal is to define one PCD: PcdFspMeasurementConfig|UINT32.

BIT0: Need measure FSP. (for FSP1.x) - reserved in FSP2.
BIT1: Need measure FSPT. (for FSP 2.x)
BIT2: Need measure FSPM. (for FSP 2.x)
BIT3: Need measure FSPS. (for FSP 2.x)
BIT4~31: reserved.
BIT32: Need isolate UPD region measurement.
       0: measure FSP[T|M|S] as one binary in one record (PCR0).
       1: measure FSP UPD region in one record (PCR1), the FSP code without UPD in another record (PCR0).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13152</commentid>
    <comment_count>5</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-07-21 22:44:31 +0000</bug_when>
    <thetext>The implemmentation of this requirement is moved from https://bugzilla.tianocore.org/show_bug.cgi?id=2841 to here.

3) Add more API in TpmMeasurementLib, such as MeasureFirmwareBlob, MeasureHandoffTable for TPM PFP rev 105 support - add description for the FirmwareBlob and HandoffTable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13166</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-07-23 19:45:40 +0000</bug_when>
    <thetext>For one binary mode
+-----------+-----+------------------+-------------------+----------------+
| Component | PCR |     EventType    | Event Data (hash) |    Event Log   |
+-----------+-----+------------------+-------------------+----------------+
| FSP Code  | 0   | EV_EFI_PLATFORM_ |    FSP binary     | EFI_PLATFORM_  |
|           |     | FIRMWARE_BLOB2   |                   | FIRMWARE_BLOB2 |
|           |     |                  |                   | structure      |
|           |     |                  |                   | (Descriptor:   |
|           |     |                  |                   | &quot;FSP-[T|M|S]&quot;) |
+-----------+-----+------------------+-------------------+----------------+

For separation mode
+-----------+-----+------------------+-------------------+----------------+
| Component | PCR |     EventType    | Event Data (hash) |    Event Log   |
+-----------+-----+------------------+-------------------+----------------+
| FSP Code  | 0   | EV_EFI_PLATFORM_ | FSP bin before UPD| EFI_PLATFORM_  |
|           |     | FIRMWARE_BLOB2   |        ||         | FIRMWARE_BLOB2 |
|           |     |                  | FSP bin after UPD | structure      |
|           |     |                  |                   | (Descriptor:   |
|           |     |                  |                   | &quot;FSP-[T|M|S]   |
|           |     |                  |                   | component&quot;)    |
+-----------+-----+------------------+-------------------+----------------+
| FSP UPD   | 1   | EV_PLATFORM_     |    UPD region     | &quot;FSP-[T|M|S]   |
|           |     | CONFIG_FLAGS     |                   | configuration=&quot;|
|           |     |                  |                   | &lt;UPD raw data  |
|           |     |                  |                   | binary string&gt; |
+-----------+-----+------------------+-------------------+----------------+</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13323</commentid>
    <comment_count>7</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-05 21:13:22 +0000</bug_when>
    <thetext>v2:
https://edk2.groups.io/g/devel/message/63751</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13534</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-26 11:41:29 +0000</bug_when>
    <thetext>v3:

[edk2-devel] [PATCH v3 0/8] Need add a FSP binary measurement
https://edk2.groups.io/g/devel/message/64274
http://mid.mail-archive.com/20200814063159.2477-1-qi1.zhang@intel.com

v4:

[edk2-devel] [PATCH v4 0/8] Need add a FSP binary measurement
https://edk2.groups.io/g/devel/message/64354
http://mid.mail-archive.com/20200818062618.3698-1-qi1.zhang@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13535</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-26 12:01:05 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #8)

&gt; v4:
&gt; 
&gt; [edk2-devel] [PATCH v4 0/8] Need add a FSP binary measurement
&gt; https://edk2.groups.io/g/devel/message/64354
&gt; http://mid.mail-archive.com/20200818062618.3698-1-qi1.zhang@intel.com

Merged as commit range 78ab44cb9680..63d92674d240, via &lt;https://github.com/tianocore/edk2/pull/904&gt;, with the v3 feedback tags brought forward, as explained here: &lt;https://edk2.groups.io/g/devel/message/64642&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13541</commentid>
    <comment_count>10</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-26 20:49:05 +0000</bug_when>
    <thetext>This belongs to new feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2288</bug_id>
          
          <creation_ts>2019-10-18 05:36:32 +0000</creation_ts>
          <short_desc>Overflowed array index on array mSxPhaseString</short_desc>
          <delta_ts>2020-04-08 02:04:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10101</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-10-18 05:36:32 +0000</bug_when>
    <thetext>In source MdeModulePkg/Application/SmiHandlerProfileInfo/SmiHandlerProfileInfo.c
in function SxPhaseToString we have:

   if (Phase &gt;= 0 &amp;&amp; Phase &lt;= ARRAY_SIZE(mSxPhaseString)) {
       return mSxPhaseString[Phase];
   } else {

The comparison is off-by one on the upper limit, it should be:

 if (Type &gt;= 0 &amp;&amp; Type &lt; ARRAY_SIZE(mSxPhaseString)) {</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10272</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:57:19 +0000</bug_when>
    <thetext>Shenglei: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11316</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-19 21:14:35 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11321</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 21:17:05 +0000</bug_when>
    <thetext>please check</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11545</commentid>
    <comment_count>4</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 22:02:48 +0000</bug_when>
    <thetext>Similar issue with BZ2272, please review https://bugzilla.tianocore.org/show_bug.cgi?id=2272 for status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12132</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-08 02:04:56 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/d6f99b2ac4296662720db76d7c23d224f5288df3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2757</bug_id>
          
          <creation_ts>2020-05-21 14:54:25 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-21 14:56:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>CometlakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12645</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:54:25 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12654</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:56:29 +0000</bug_when>
    <thetext>Bad, script! Bad!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2559</bug_id>
          
          <creation_ts>2020-02-26 01:02:42 +0000</creation_ts>
          <short_desc>BrotliCustomDecompressLib: Use submodule way to access brotli</short_desc>
          <delta_ts>2020-05-27 04:27:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2558</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11435</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-26 01:02:42 +0000</bug_when>
    <thetext>brotli is a git repo(https://github.com/google/brotli).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11436</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-26 01:03:15 +0000</bug_when>
    <thetext>Assigned to Shenglei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11557</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-03-05 03:13:12 +0000</bug_when>
    <thetext>The patch is too big. So I put the change on my github.
https://github.com/shenglei10/edk2/commit/45d29524ccd7c1834f6ef77455d7511618578fa3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12223</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-16 13:15:12 +0000</bug_when>
    <thetext>Fixed in commit 58802e02c41b (&quot;MdeModulePkg/BrotliCustomDecompressLib: Make brotli a submodule&quot;, 2020-04-16).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2706</bug_id>
          
          <creation_ts>2020-05-08 07:47:31 +0000</creation_ts>
          <short_desc>automatic reboot during first boot after deploying OVMF binary containing commit d42fdd6f8384</short_desc>
          <delta_ts>2020-05-18 12:09:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=386</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12454</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-08 07:47:31 +0000</bug_when>
    <thetext>Since commit d42fdd6f8384 (made for bug 386), the SMM_REQUIRE build of
OVMF has a usability regression (not a functional one).

The symptom is that after a fimrware binary update, crossing commit
d42fdd6f8384, the first boot of the firmware will likely include an
automatic reboot (after which it will continue booting the OS normally).
Albeit not a functional issue, it could prove distracting for users.

OVMF now adaptively tracks memory usage during boot.
EfiBootManagerBoot() / BmSetMemoryTypeInformationVariable() check
whether the actual memory usage has exceeded the &quot;bin priming&quot; that was
dictated by the MemoryTypeInformation HOB at the start of the DXE phase.
If so, the MemoryTypeInformation UEFI variable is updated, and the
platform is reset. During next boot, the DXE IPL PEIM populates the HOB
from the MemoryTypeInformation UEFI variable, intending to prime the
bins such that they now fit the actual memory usage.

(The platform reset and the sufficiently large bins in this scenario are
relevant for SMM security, and so they must remain part of the picture.)

- If the upgraded firmware is launched against a logically empty
  variable store, then the first boot will produce a default HOB (in
  OvmfPkg/PlatformPei), which has very low page count defaults for the
  bins. Thereby it will trigger a UEFI variable update and a reboot in
  BDS.

- If the upgraded firmware is launched against a varstore that has a
  MemoryTypeInformation UEFI variable managed by an earlier firmware
  build, then EfiBootManagerBoot() /
  BmSetMemoryTypeInformationVariable() will notice that the (increased)
  memory usage, during the first boot of the upgraded firmware, exceeds
  the &quot;bin priming&quot; dictated by the &quot;old&quot; UEFI variable. Hence, BDS will
  trigger a UEFI variable update &amp; reboot in this case too.

The second case is made yet more inconvenient for users by OVMF&apos;s
tracking of BS Code/Data type memory. OVMF&apos;s default memory type info
HOB has always included such records, which implies that so does any
MemoryTypeInformation UEFI variable. BS Data usage in particular can see
unpredictable spikes, which can trigger the UEFI variable update &amp;
reboot scenario during subsequent boots -- even without firmware binary
updates, and in spite of the fact that tracking BS Data is useless for
SMM security.

(

The following &quot;Tour Beyond BIOS&quot; whitepapers:

- Secure SMM Communication
- Memory Map and Practices in UEFI BIOS

both indicate that BS Code/Data should not be tracked. The same was
confirmed by Jiewen in the following messages:

&gt;| - https://edk2.groups.io/g/devel/message/55741
&gt;|   http://mid.mail-archive.com/74D8A39837DF1E4DA445A8C0B3885C503F97B579@shsmsx102.ccr.corp.intel.com
&gt;| 
&gt;| - https://edk2.groups.io/g/devel/message/55749
&gt;|   http://mid.mail-archive.com/74D8A39837DF1E4DA445A8C0B3885C503F97BDC5@shsmsx102.ccr.corp.intel.com

)

The solution comprises three logical steps:

- Eliminate BS Code/Data from the default memory type info HOB.

- Always produce the memory type info HOB in OvmfPkg/PlatformPei (like
  before), but consume the MemoryTypeInformation UEFI variable for
  hints.

  In other words, move the &quot;UEFI variable -&gt; HOB&quot; translation from the
  DXE IPL PEIM to OvmfPkg/PlatformPei, and in the latter, let the UEFI
  variable influence only those memory types for which PlatformPei would
  include records in the HOB anyway. (Specifically, excluding BS
  Code/Data.)

  Forbid the UEFI variable (which may come from an earlier firmware
  build) from *lowering* page counts from the PlatformPei defaults.

- Perform some boot experiments, and empirically update the default page
  counts, so that during the first boot of the upgraded firmware, the
  &quot;bin priming&quot; from the defaults can *most likely* fit actual memory
  usage until the end of BDS. Thus, EfiBootManagerBoot() /
  BmSetMemoryTypeInformationVariable() are not liable to trigger a
  reboot.

Ceasing to track BS Code/Data leads to increased fragmentation of the
UEFI memmap, but that is cosmetic, and appears harmless in practice.
(Tested with Windows Server 2008 R2, Windows Server 2012 R2, Windows 10,
and Fedora guests.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12455</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-08 08:18:53 +0000</bug_when>
    <thetext>Posted:

* [edk2-devel] [PATCH 0/4]
  OvmfPkg/PlatformPei: rewrite MemTypeInfo HOB production logic

http://mid.mail-archive.com/20200508121651.16045-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/58876</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12516</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-18 12:09:48 +0000</bug_when>
    <thetext>Merged in commit range 9099dcbd61c8..7b6327ff03bb via &lt;https://github.com/tianocore/edk2/pull/629&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2135</bug_id>
          
          <creation_ts>2019-08-27 21:05:19 +0000</creation_ts>
          <short_desc>Missing mws import statement in FvImageSection.py</short_desc>
          <delta_ts>2019-11-03 21:24:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Dmitry Antipov">dmanti</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9349</commentid>
    <comment_count>0</comment_count>
    <who name="Dmitry Antipov">dmanti</who>
    <bug_when>2019-08-27 21:05:19 +0000</bug_when>
    <thetext>Without the mws import statement FvImageSection.py will raise an uncaught exception if an FDF includes a raw section that has a missing file.

Please see Mu Basecore commit for a proposed fix:
https://github.com/microsoft/mu_basecore/commit/7ae18fcd7fc6621b7d604b042d20032035cc3f01</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9861</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 21:22:41 +0000</bug_when>
    <thetext>Bob, can you help check this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10081</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:42:46 +0000</bug_when>
    <thetext>Bob, please confirm and follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10297</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-03 21:24:37 +0000</bug_when>
    <thetext>This issue has been fixed in Edk2 trunk.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2027</bug_id>
          
          <creation_ts>2019-07-29 03:42:47 +0000</creation_ts>
          <short_desc>Comparisons in CryptPkcs7VerifyEku.c should be improved</short_desc>
          <delta_ts>2019-07-30 21:23:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8614</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-07-29 03:42:47 +0000</bug_when>
    <thetext>In CryptPkcs7VerifyEku.c   line 233
  if (ClonedCert) {

Non-Boolean comparisons should use a compare operator (==, !=, &gt;, &lt; &gt;=, &lt;=).
And a comparison of any pointer to zero must be done via the NULL type.

Same issues appear at 
line 237
    if (Eku) {

line 284
    if (Asn1ToFind) {

line 290
    if (!Asn1ToFind) {

line 316
    if (Asn1ToFind) {

line 515
    if (Pkcs7) {</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8615</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-07-29 03:44:44 +0000</bug_when>
    <thetext>Assign this to Zhichao</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8645</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-30 21:23:21 +0000</bug_when>
    <thetext>Pushed at b3d00df69c78fa0e12986a7ff334689a76f4578a
Reviewed at https://edk2.groups.io/g/devel/message/44578</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2497</bug_id>
          
          <creation_ts>2020-01-31 12:10:54 +0000</creation_ts>
          <short_desc>SecurityPkg/DxeImageVerificationHandler: handle undefined and forbidden image verification policies more flexibly</short_desc>
          <delta_ts>2023-01-03 04:00:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>chao.b.zhang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11034</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-31 12:10:54 +0000</bug_when>
    <thetext>(The report is being filed with master @ eafd990f2606.)

In the DxeImageVerificationHandler() function, if the image verification
policy is fetched from one of the following PCDs (according to image
origin):

- PcdOptionRomImageVerificationPolicy,
- PcdRemovableMediaImageVerificationPolicy,
- PcdFixedMediaImageVerificationPolicy,

*and* the subject PCD contains an invalid value, then we handle said
value in one of two ways:

- policies QUERY_USER_ON_SECURITY_VIOLATION and
  ALLOW_EXECUTE_ON_SECURITY_VIOLATION are caught with both an ASSERT()
  and a CpuDeadLoop(),

- policies that are not defined in &quot;SecurityPkg.dec&quot; at all are treated
  implicitly like DENY_EXECUTE_ON_SECURITY_VIOLATION. That is, if the
  image passes verification, we return EFI_SUCCESS, otherwise we return
  EFI_ACCESS_DENIED.

This is inconsistent, and not flexible enough at the same time. Mike
Kinney writes:

&gt; I would also like to see a DEBUG() message or even better
&gt; a REPORT_STATUS_CODE() for an invalid policy PCD setting
&gt; and I would like platform policy to decide if the platform
&gt; should deadloop or continue with EFI_ACCESS_DENIED.  By
&gt; putting the deadloop in this function, it takes away the
&gt; option for the platform to make that decision.

References:

- original issue report by Mike:

https://edk2.groups.io/g/devel/message/53590
http://mid.mail-archive.com/E92EE9817A31E24EB0585FDF735412F5B9E81C62@ORSMSX113.amr.corp.intel.com

- suggestion with REPORT_STATUS_CODE(), and with platform-determined
  action for an invalid verification policy:

http://mid.mail-archive.com/E92EE9817A31E24EB0585FDF735412F5B9E81EB1@ORSMSX113.amr.corp.intel.com
https://edk2.groups.io/g/devel/message/53606</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11138</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 20:19:23 +0000</bug_when>
    <thetext>Require Security package owner to check it and give feedback.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11146</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 20:36:09 +0000</bug_when>
    <thetext>Jian as Security owner will check it first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11160</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-02-07 02:31:56 +0000</bug_when>
    <thetext>Confirmed. It&apos;s ok to add DEBUG message but not sure if it&apos;s a good idea to add REPORT_STATUS_CODE in DxeImageVerificationHandler() for just invalid policy. Maybe it&apos;d be better to add REPORT_STATUS_CODE in caller code to handle any EFI_ACCESS_DENIED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20387</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:00:52 +0000</bug_when>
    <thetext>Still relevant at bbd30066e137, but nobody seems to have cared. Workaround: make sure your platform doesn&apos;t set invalid values in these PCDs.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2048</bug_id>
          
          <creation_ts>2019-08-02 02:38:15 +0000</creation_ts>
          <short_desc>Add STATIC_ASSERT macro</short_desc>
          <delta_ts>2019-09-17 01:31:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="Vitaly Cheptsov">vit9696</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>rebecca</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>stephano</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8737</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-08-02 02:38:15 +0000</bug_when>
    <thetext>C11 supports static_assert ( constant-expression , string-literal ) ;
It provides compiling time assert.

latest MSVC/GCC/LLVM already support this format.

We had better add the EDKII version. It is useful for data structure size check.

I notice some complicated data structure code requires the compiling time assert, and some are using old style zero array to do the work.

C17 supports static_assert ( constant-expression ). But not all compilers support this format.


The proposal is to add below macro:

#define STATIC_ASSERT(B) static_assert(B, #B)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8890</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:26:46 +0000</bug_when>
    <thetext>Bug Triage: If implemented, this would require some documentation for &quot;best known methods&quot; of usage. 

This seems like a good topic for design discussions, an RFC, or simply discuss here, whichever works best for you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8902</commentid>
    <comment_count>2</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2019-08-08 21:02:02 +0000</bug_when>
    <thetext>Since static_assert was added in C11, only versions of Visual Studio 2017 and newer support it. I think GCC has supported a form of static assertions for a long time as an extension, but Visual Studio required code to be built as C++ for its C_ASSERT macro to work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8926</commentid>
    <comment_count>3</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-08-11 18:57:31 +0000</bug_when>
    <thetext>We are also rooting for this to land into EDK II. As we have been supporting static assertions in UEFI for some time already, we believe that perhaps EDK II mainline can take after. Here is the relevant piece of code:

https://github.com/acidanthera/OcSupportPkg/blob/2f7c362/Include/Library/OcGuardLib.h#L22-L59

- C language, starting from C11, defines _Static_asset keyword. This one is supported by both GCC and LLVM. Unlike C++, C language defines static_assert as a macro to _Static_assert in assert.h, so neither GCC nor LLVM provide it in freestanding environment.
- Microsoft Visual Studio 2010 (at least) supports static_assert as a keyword in both C and C++ modes, and it does not support _Static_asset. This is C language spec violation, but it can be lived with.
- Legacy compilers may use various kinds of plain C static assertions, for example, we went with switch.

In our implementation we still have legacy implementation for compatibility reasons, but EDK II mainline can drop it or provide no static assertions for legacy compilers. This will let you have a single macro in function and global scopes.

Hope that helps.

Side note: we also support intrinsic-based overflow arithmetics, UndefinedBehaviorSanitizer, and alignment checking macros, which EDK II mainline may find valuable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8927</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-08-11 21:06:03 +0000</bug_when>
    <thetext>Good reference at https://github.com/acidanthera/OcSupportPkg/blob/2f7c362/Include/Library/OcGuardLib.h#L22-L59.

Thank you vit9696.

Do you want to take this bugzilla and submit patch to EDKII ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8941</commentid>
    <comment_count>5</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-08-12 04:26:07 +0000</bug_when>
    <thetext>Jiewen,

Prior to submitting the patch the following issues are to be resolved:

1. Do we want to provide a message to the static assertion?

2. Do we want to support ancient compilers that have no built-in static assertion-like construction? I do not have Visual Studio here as I use macOS, and we do not know whether Visual Studio prior to 2010 is fine with static_assert, most likely it is not.

3. In case we do, are we ready to have a pair of STATIC_INLINE_ASSERT and STATIC_GLOBAL_ASSERT macros just for this reason?

4. In case we do, do we want to implement static assertions with the help of other constructions for these compilers or actually provide a no-operation?

5. In case we do not, are we ready to mandate C11 requirements for all compilers?

The support for ancient compilers (#2) automatically implies a pair of macros (#3), as you can neither encode a no-operation, nor an actual static assertion (#4) the same way in both function and global scope without language support.

Full implementation can be found here: https://github.com/acidanthera/OcSupportPkg/blob/2f7c362/Include/Library/OcGuardLib.h#L51-L58

No-operation can be encoded as:
- do { } while (0) for inline version
- typedef for a no-operation version (see: https://stackoverflow.com/a/53923785)

My personal opinion is as follows:

1. Providing a message to static assertion is a must, as using the expression as a message is not explanative in most cases.

2. We should use _Static_assert for everything but MSVC, which gets static_assert as a hack. If the compiler does not support this construction, then do not care.

3, 4. We do not, let us drop most of MSVC for the good.

5. Do not mandate all C11 requirements, yet require select constructions from C11 (and C99) to be implemented by the compilers. Static assertions are a good example from C11, flexible array members can be a good example from C99.

Best regards,
Vitaly Cheptsov aka vit9696</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8950</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-08-12 05:19:04 +0000</bug_when>
    <thetext>Hi Vitaly Cheptsov
Agree with your proposal.

Appreciate your contribution.

Thank you



PS: Some info:

I don&apos;t think we are requiring to support ancient compiler. Just to make thing simple.

We sent proposal to EDKII to drop 2008 and 2010, but one people said VS2008 was still used. For us, we don&apos;t have any validation to cover VS2008 and VS2010. So we do not care.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8954</commentid>
    <comment_count>7</comment_count>
      <attachid>379</attachid>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-08-12 07:00:52 +0000</bug_when>
    <thetext>Created attachment 379
STATIC_ASSERT</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8955</commentid>
    <comment_count>8</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-08-12 07:01:17 +0000</bug_when>
    <thetext>Sent an e-mail to edk2-devel, also duplicating here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8981</commentid>
    <comment_count>9</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-08-13 13:35:00 +0000</bug_when>
    <thetext>Just adding my support for the decisions and patch in this BZ.  
Thanks Jiewen and vit9696</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9026</commentid>
    <comment_count>10</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-08-16 01:25:20 +0000</bug_when>
    <thetext>Update owner to vit9696@protonmail.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9518</commentid>
    <comment_count>11</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-09 03:58:25 +0000</bug_when>
    <thetext>Change it to Feature request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9649</commentid>
    <comment_count>12</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-09-12 18:16:27 +0000</bug_when>
    <thetext>Initial support landed as of:
https://github.com/tianocore/edk2/commit/204ae9da230ecbf0910c21acac7aa5d5e8cbb8d0

I request the following patchset to be merged before closing this bugzilla:
https://edk2.groups.io/g/devel/message/45871</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9672</commentid>
    <comment_count>13</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-16 11:55:52 +0000</bug_when>
    <thetext>Plan to push the patch set this week if no other comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696</commentid>
    <comment_count>14</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-09-17 01:31:44 +0000</bug_when>
    <thetext>Patchset has been merged. Thanks to everyone.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>379</attachid>
            <date>2019-08-12 07:00:52 +0000</date>
            <delta_ts>2019-08-12 07:00:52 +0000</delta_ts>
            <desc>STATIC_ASSERT</desc>
            <filename>0001-MdePkg-Add-STATIC_ASSERT-macro.patch</filename>
            <type>text/plain</type>
            <size>1287</size>
            <attacher name="Vitaly Cheptsov">vit9696</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2983</bug_id>
          
          <creation_ts>2020-09-23 00:27:22 +0000</creation_ts>
          <short_desc>edk2-stable202008 Vlv2TbltDevicePkg platforms fails to build</short_desc>
          <delta_ts>2020-11-11 12:16:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kilian Kegel">kilian_kegel</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>kilian_kegel</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13762</commentid>
    <comment_count>0</comment_count>
    <who name="Kilian Kegel">kilian_kegel</who>
    <bug_when>2020-09-23 00:27:22 +0000</bug_when>
    <thetext>Hi,

recently I have updated my CdePkg project from https://github.com/tianocore/edk2-staging.git.

It seems that the ValleyView Package (MinnowBoard) in edk2-platforms/Platform/Intel/Vlv2TbltDevicePkg
needs an update to support latest FmpDevicePkg from edk2-stable202008.

diff --git a/Platform/Intel/Vlv2TbltDevicePkg/FmpBlueSampleDevice.dsc b/Platform/Intel/Vlv2TbltDevicePkg/FmpBlueSampleDevice.dsc
index 3bd9f150b3..1bf943cf0e 100644
--- a/Platform/Intel/Vlv2TbltDevicePkg/FmpBlueSampleDevice.dsc
+++ b/Platform/Intel/Vlv2TbltDevicePkg/FmpBlueSampleDevice.dsc
@@ -52,4 +52,7 @@
       # Device specific library that processes a capsule and updates the FW storage device
       #
       FmpDeviceLib|Vlv2TbltDevicePkg/Feature/Capsule/Library/FmpDeviceLibSample/FmpDeviceLib.inf
+      FmpDependencyLib|FmpDevicePkg\Library\FmpDependencyLib\FmpDependencyLib.inf
+      FmpDependencyCheckLib|FmpDevicePkg\Library\FmpDependencyCheckLibNull\FmpDependencyCheckLibNull.inf
+      FmpDependencyDeviceLib|FmpDevicePkg\Library\FmpDependencyDeviceLibNull\FmpDependencyDeviceLibNull.inf
   }
diff --git a/Platform/Intel/Vlv2TbltDevicePkg/FmpGreenSampleDevice.dsc b/Platform/Intel/Vlv2TbltDevicePkg/FmpGreenSampleDevice.dsc
index 61bdd36a96..0e6c10e23f 100644
--- a/Platform/Intel/Vlv2TbltDevicePkg/FmpGreenSampleDevice.dsc
+++ b/Platform/Intel/Vlv2TbltDevicePkg/FmpGreenSampleDevice.dsc
@@ -52,4 +52,7 @@
       # Device specific library that processes a capsule and updates the FW storage device
       #
       FmpDeviceLib|Vlv2TbltDevicePkg/Feature/Capsule/Library/FmpDeviceLibSample/FmpDeviceLib.inf
+      FmpDependencyLib|FmpDevicePkg\Library\FmpDependencyLib\FmpDependencyLib.inf
+      FmpDependencyCheckLib|FmpDevicePkg\Library\FmpDependencyCheckLibNull\FmpDependencyCheckLibNull.inf
+      FmpDependencyDeviceLib|FmpDevicePkg\Library\FmpDependencyDeviceLibNull\FmpDependencyDeviceLibNull.inf
   }
diff --git a/Platform/Intel/Vlv2TbltDevicePkg/FmpMinnowMaxSystem.dsc b/Platform/Intel/Vlv2TbltDevicePkg/FmpMinnowMaxSystem.dsc
index 304519b294..eea73c0f06 100644
--- a/Platform/Intel/Vlv2TbltDevicePkg/FmpMinnowMaxSystem.dsc
+++ b/Platform/Intel/Vlv2TbltDevicePkg/FmpMinnowMaxSystem.dsc
@@ -56,4 +56,7 @@
       # Device specific library that processes a capsule and updates the FW storage device
       #
       FmpDeviceLib|Vlv2TbltDevicePkg/Feature/Capsule/Library/FmpDeviceLib/FmpDeviceLib.inf
+      FmpDependencyLib|FmpDevicePkg\Library\FmpDependencyLib\FmpDependencyLib.inf
+      FmpDependencyCheckLib|FmpDevicePkg\Library\FmpDependencyCheckLibNull\FmpDependencyCheckLibNull.inf
+      FmpDependencyDeviceLib|FmpDevicePkg\Library\FmpDependencyDeviceLibNull\FmpDependencyDeviceLibNull.inf
   }
diff --git a/Platform/Intel/Vlv2TbltDevicePkg/FmpRedSampleDevice.dsc b/Platform/Intel/Vlv2TbltDevicePkg/FmpRedSampleDevice.dsc
index 59851f2b41..d37974f9d4 100644
--- a/Platform/Intel/Vlv2TbltDevicePkg/FmpRedSampleDevice.dsc
+++ b/Platform/Intel/Vlv2TbltDevicePkg/FmpRedSampleDevice.dsc
@@ -52,4 +52,7 @@
       # Device specific library that processes a capsule and updates the FW storage device
       #
       FmpDeviceLib|Vlv2TbltDevicePkg/Feature/Capsule/Library/FmpDeviceLibSample/FmpDeviceLib.inf
+      FmpDependencyLib|FmpDevicePkg\Library\FmpDependencyLib\FmpDependencyLib.inf
+      FmpDependencyCheckLib|FmpDevicePkg\Library\FmpDependencyCheckLibNull\FmpDependencyCheckLibNull.inf
+      FmpDependencyDeviceLib|FmpDevicePkg\Library\FmpDependencyDeviceLibNull\FmpDependencyDeviceLibNull.inf
   }

Best Reagrds,
Kilian</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13844</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-29 21:44:36 +0000</bug_when>
    <thetext>Mike will check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14331</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-11-11 12:15:36 +0000</bug_when>
    <thetext>Path for review

https://edk2.groups.io/g/devel/message/66717</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14332</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-11-11 12:16:09 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2-platforms/commit/2fcfe4763022c1665be8e6a11f80aa69f0a58dce</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2876</bug_id>
          
          <creation_ts>2020-08-06 02:33:35 +0000</creation_ts>
          <short_desc>SVN#15047</short_desc>
          <delta_ts>2021-05-07 02:55:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Seven D">Seven.ding</reporter>
          <assigned_to name="Maciej Rabeda">maciej.rabeda</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>Seven.ding</cc>
    
    <cc>siyuan.fu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13326</commentid>
    <comment_count>0</comment_count>
    <who name="Seven D">Seven.ding</who>
    <bug_when>2020-08-06 02:33:35 +0000</bug_when>
    <thetext>We found one issue related to EDK2 SVN#15047, may I know if we can revert this changed ? thanks 
EDK2 link : https://svn.code.sf.net/p/edk2/code/trunk/edk2
 
 
Issue : Cannot accept the TFTP server IP ,  but always  accept the ProxyDHCP server IP
 
 
 
How to reproduce
follow below steps to quickly see the issue:
What you need is a any 3 machines that will serve as servers, any network switch, at least 4 ports, some network cables.
 
First of all, set IP addresses as follows. To prevent any side issues, turn off firewall and try pinging the machines when connected to the switch.
 
TFTP
IP 192.168.20.7

 
DHCP
192.168.20.100

 
ProxyDHCP
192.168.20.11</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13330</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-06 07:06:18 +0000</bug_when>
    <thetext>Based on the SVN revision (#15047), this seems to be about git commit ecec42044078 (&quot;Update PXE driver to support PXE forced mode.&quot;, 2014-01-06).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13339</commentid>
    <comment_count>2</comment_count>
    <who name="Seven D">Seven.ding</who>
    <bug_when>2020-08-07 06:44:59 +0000</bug_when>
    <thetext>who can help fix the issue ? @@.
i have modified some codes as following 

  if (Private-&gt;ServerIp.Addr[0] == 0 || !IS_ENABLE_USE_SERVER_LIST (VendorOpt-&gt;DiscoverCtrl)) {  
    //
    // ServerIp.Addr[0] equals zero means we failed to get IP address from boot server list.
    // Try to use next server address field.
    //
    CopyMem (
      &amp;Private-&gt;ServerIp,
      &amp;Cache4-&gt;Packet.Offer.Dhcp4.Header.ServerAddr,
      sizeof (EFI_IPv4_ADDRESS)
      );
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13417</commentid>
    <comment_count>3</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-08-17 14:02:40 +0000</bug_when>
    <thetext>Hello,

From the very short issue description, I assume that you are referring to PXE boot scenario with proxyDHCP. However, I do not understand the issue 100%, especially the part: &quot;cannot accept TFTP server IP&quot;.

In PXE boot scenario with proxyDHCP, we have 3 machines:
- DHCP server (gives IP and subnet)
- proxyDHCP server (gives PXE server IP and PXE-related DHCP options)
- PXE client

Which of the machines you have mentioned fit in the names above?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13424</commentid>
    <comment_count>4</comment_count>
    <who name="Seven D">Seven.ding</who>
    <bug_when>2020-08-18 06:36:20 +0000</bug_when>
    <thetext>1. Prepare three machines for server and a switch with at least 4 LAN ports (you can also use a router instead). The machine will use Windows 10 system
2. Connect all three machines to the switch with a network cable. The switch does not need to be connected to an external network.
3. Turn off the firewalls on each machine
4. Set the static Address of the first machine to 192.168.20.2, extract the TFTP.rAR package and copy it to the root directory of Disk C, click Serva32. exe and wait for 7 seconds, then click &quot;Thanks, not today...&quot; The button
5. Set the second machine static IP 192.168.20.100, extract dhCp.rar and copy it to the root directory of Disk C, and click Serva32.exe
6. Set the third machine static IP 192.168.20.10, extract copy of proxydhcp.rar and proxydhcpworking. Rar to the root directory of Disk C, just click serva32.exe in the proxydhCP folder
7. Ping the machines to make sure they are connected
8. To prepare a fourth machine, connected to the switch.
9. Set UEFI only Mode in the BIOS (the fourth machine ) , Restart the machine press F12 to enter the boot page and select PXE Boot.
you will see the fourth machine cannot download file from TFTP -&gt; problem



even if adding  below W/A, but still failed .it can get pass result when revert #15047
There is an option PXE_BOOT_SERVERS(Vendor specific option 43, Tag 6, bit 2) in DHCP to use the Server list(PXE_BOOT_SERVERS.png). Usually this option bit is enabled by default, but in this case, if this bit is enabled, incorrect server(ProxyDHCP) IP is stored in the BIOS and caused to fail boot image retrieval. 
So for this work around, if this bit is disabled, BIOS does not use Server list and accept the TFTP server IP offered by ProxyDHCP and system boots up using correct boot image from TFTP server. 
 
Original: 
DHCP_Option1=43|0x06010708070a0b01C0A8140A09090a0b064555524F44420a09005058455F424F4F54ff 
Work Around: 
DHCP_Option1=43|0x06010308070a0b01C0A8140A09090a0b064555524F44420a09005058455F424F4F54ff</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13426</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-18 07:58:40 +0000</bug_when>
    <thetext>Maciej,

looking at git commit ecec42044078:

- before the patch, &quot;Private-&gt;ServerIp&quot; would be populated with
&quot;Cache4-&gt;Packet.Offer.Dhcp4.Header.ServerAddr&quot;.

- after the patch, &quot;Private-&gt;ServerIp&quot; is populated with
&quot;Cache4-&gt;Packet.Offer.Dhcp4.Header.ServerAddr&quot; only as a fallback. In
the cases when the fallback is inactive, &quot;Private-&gt;ServerIp&quot; is filled
from VendorOpt-&gt;BootSvr-&gt;IpAddr[0].

Now, per PXEv2.1 spec, PXE_DISCOVERY_CONTROL (= option 43 tag 6) bit#2
means,

  If set, *only* use/accept servers in PXE_BOOT_SERVERS. [emphasis mine]

and

  If PXE_DISCOVERY_CONTROL bit 2 is set, the client may still use
  multicast and broadcast discovery (if it is permitted by bits 0 and
  1); but the client may only accept replies from servers that are
  identified in the PXE_BOOT_SERVERS option.

and PXE_BOOT_SERVERS is explained elsewhere as &quot;Option #43 tag #8&quot;.


Commit ecec42044078 checks the following:

- IS_DISABLE_PROMPT_MENU (VendorOpt-&gt;DiscoverCtrl)
  --&gt; whether bit#3 in option#43 tag#6

- IS_VALID_BOOT_SERVERS (VendorOpt-&gt;BitMap)
  --&gt; whether option#43 tag#8 (=PXE_BOOT_SERVERS) exists

However, the commit doesn&apos;t check bit#2 in option#43 tag#6. That would
be:

  IS_ENABLE_USE_SERVER_LIST (VendorOpt-&gt;DiscoverCtrl)

So I guess the ask is for something like:

&gt;| diff --git a/NetworkPkg/UefiPxeBcDxe/PxeBcBoot.c b/NetworkPkg/UefiPxeBcDxe/PxeBcBoot.c
&gt;| index d062a526077b..75455a6b1169 100644
&gt;| --- a/NetworkPkg/UefiPxeBcDxe/PxeBcBoot.c
&gt;| +++ b/NetworkPkg/UefiPxeBcDxe/PxeBcBoot.c
&gt;| @@ -504,7 +504,9 @@ PxeBcDhcp4BootInfo (
&gt;|    // If all these fields are not available, use option 54 instead.
&gt;|    //
&gt;|    VendorOpt = &amp;Cache4-&gt;VendorOpt;
&gt;| -  if (IS_DISABLE_PROMPT_MENU (VendorOpt-&gt;DiscoverCtrl) &amp;&amp; IS_VALID_BOOT_SERVERS (VendorOpt-&gt;BitMap)) {
&gt;| +  if (IS_DISABLE_PROMPT_MENU (VendorOpt-&gt;DiscoverCtrl) &amp;&amp;
&gt;| +      IS_ENABLE_USE_SERVER_LIST (VendorOpt-&gt;DiscoverCtrl) &amp;&amp;
&gt;| +      IS_VALID_BOOT_SERVERS (VendorOpt-&gt;BitMap)) {
&gt;|      Entry = VendorOpt-&gt;BootSvr;
&gt;|      if (VendorOpt-&gt;BootSvrLen &gt;= sizeof (PXEBC_BOOT_SVR_ENTRY) &amp;&amp; Entry-&gt;IpCnt &gt; 0) {
&gt;|        CopyMem (

(note that the code in comment 2 works similarly).

The client is required to consume PXE_BOOT_SERVERS when bit#2 in option#43 tag#6 is set, but is the inverse true as well?

I.e., must the client *ignore* PXE_BOOT_SERVERS, when bit#2 in option#43 tag#6 is clear?

I&apos;m not convinced. I think the DHCP configuration is wrong. The configuration should not place the ProxyDHCP IP address into PXE_BOOT_SERVERS, regardless of bit#2 in option#43 tag#6. Either place the TFTP server address in PXE_BOOT_SERVERS, or remove PXE_BOOT_SERVERS (Option #43 tag #8) altogether.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13430</commentid>
    <comment_count>6</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-08-18 13:50:50 +0000</bug_when>
    <thetext>Seven D,

Thanks for the description, I now know what is going on.

Laszlo,

Thanks for looking deeper into this, much appreciated.

To me, by saying &quot;only use/accept servers in PXE_BOOT_SERVERS&quot;, PXE spec clearly means that it is made as a limitation of functionality (enabled -&gt; accept only PXE_BOOT_SERVERS list, disabled -&gt; accept all).

PXE_BOOT_SERVERS tag existence does not make sense when that bit is clear.

Bottom line:
1. Patch is required - in the way Laszlo made it is OK.
Basically: utilize server list when ((prompt is disabled) AND (use only PXE_BOOT_SERVERS) AND (PXE_BOOT_SERVERS tag is present)). I will submit it tomorrow.

2. If the PXE_DISCOVERY_CONTROL, bit 2 is set, PXE_BOOT_SERVERS list should contain TFTP server IP address. Is your ProxyDHCP config done in a way that TFTP server should also be running on the same machine?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13431</commentid>
    <comment_count>7</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-08-18 13:52:38 +0000</bug_when>
    <thetext>Moving to &apos;Confirmed&apos; for patching PxeBcDhcp4BootInfo().
Assigning to myself.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13463</commentid>
    <comment_count>8</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-08-19 12:55:12 +0000</bug_when>
    <thetext>Patch in review: https://edk2.groups.io/g/devel/message/64453</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13464</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-19 15:03:39 +0000</bug_when>
    <thetext>IN_PROGRESS per comment 8.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13488</commentid>
    <comment_count>10</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-08-21 07:21:32 +0000</bug_when>
    <thetext>Seven D,

After discussion and careful reconsideration, issue lays in your configuration.
If PXE_DISCOVERY_CONTROL bit 2 is set, it means that ProxyDHCP server wants to limit PXE client&apos;s discovery only to servers in PXE_BOOT_SERVERS tag.

Since PXE_BOOT_SERVERS contains IP of ProxyDHCP server instead of TFTP server, boot discovery is rightfully failing.

Try running ProxyDHCP and TFTP on the same server or modify ProxyDHCP to insert TFTP server IP into PXE_BOOT_SERVERS tag.

Rejecting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15948</commentid>
    <comment_count>11</comment_count>
    <who name="Seven D">Seven.ding</who>
    <bug_when>2021-05-07 02:55:35 +0000</bug_when>
    <thetext>hello, sorry for resume this issue. 

try with following setting, but still not work. if there has a good solution to fix it.
&quot;try running ProxyDHCP and TFTP on the same server or modify ProxyDHCP to insert TFTP server IP into PXE_BOOT_SERVERS tag.&quot;

strangely, the issue cannot be found with legacy PXE boot.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2289</bug_id>
          
          <creation_ts>2019-10-18 05:39:49 +0000</creation_ts>
          <short_desc>Overflowed array index on array mIoTrapTypeString</short_desc>
          <delta_ts>2020-04-08 02:05:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10102</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-10-18 05:39:49 +0000</bug_when>
    <thetext>In source MdeModulePkg/Application/SmiHandlerProfileInfo/SmiHandlerProfileInfo.c function IoTrapTypeToString() we have:

    if (Type &gt;= 0 &amp;&amp; Type &lt;= ARRAY_SIZE(mIoTrapTypeString)) {
        return mIoTrapTypeString[Type];
    } else {

The comparison is off-by one on the upper limit, it should be:

    if (Type &gt;= 0 &amp;&amp; Type &lt; ARRAY_SIZE(mIoTrapTypeString)) {</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10271</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:57:07 +0000</bug_when>
    <thetext>Shenglei: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11315</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-19 21:10:45 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11317</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 21:15:01 +0000</bug_when>
    <thetext>please check</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11542</commentid>
    <comment_count>4</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 22:01:09 +0000</bug_when>
    <thetext>Similar issue with BZ2272, please review https://bugzilla.tianocore.org/show_bug.cgi?id=2272 for status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12133</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-08 02:05:42 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/d6f99b2ac4296662720db76d7c23d224f5288df3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2758</bug_id>
          
          <creation_ts>2020-05-21 14:54:26 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-21 14:55:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>DebugFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12646</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:54:26 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12653</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:55:51 +0000</bug_when>
    <thetext>Bad, script! Bad!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2184</bug_id>
          
          <creation_ts>2019-09-10 06:25:09 +0000</creation_ts>
          <short_desc>Shell ASSERT if PlatformLang is not supported in UnicodeCollation2</short_desc>
          <delta_ts>2019-11-14 05:00:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="JamesWang">jameswang</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>stephano</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>edk2-stable201808</cf_release_observed>
    
    <cf_release_observed>edk2-stable201811</cf_release_observed>
    
    <cf_release_observed>edk2-stable201903</cf_release_observed>
    
    <cf_release_observed>edk2-stable201905</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9571</commentid>
    <comment_count>0</comment_count>
    <who name="JamesWang">jameswang</who>
    <bug_when>2019-09-10 06:25:09 +0000</bug_when>
    <thetext>The debug message is as below:

Shell.Entry(A0EFF3D0)
ASSERT_EFI_ERROR (Status = Device Error)
ASSERT c:\test\Build\MyPlatform\DEBUG_VS2015\X64\ShellPkg\Application\Shell\Shell\DEBUG\AutoGen.c(850): !EFI_ERROR (Status)

To reproduce, set PlatformLang variable to &quot;fr-FR&quot; or any language code that is not supported by UnicodeCollation2 protocol.

The ASSERT happens in CommandInit() of UefiShellCommandLib.c which is the result of GetBestLanguage() failed.

SupportedLanguages of GetBestLanguage() is got from Uc (gEfiUnicodeCollation2ProtocolGuid) and it has only &quot;en&quot; installed by EnglishDxe driver.

When GetBestLanguage() failed, the caller of CommandInit() ShellCommandLibConstructor() returns DEVICE_ERRROR then ASSERT in AutoGen.c.

I think CommandInit() should use the default language at least if the desired language is not found instead of just ASSERT.  Or do we use ASSERT to capture error like this?

This code was added by commit: d65f2cea36d17092302e49c5109ea21f1878ab6f.  The previous UefiShellCommandLib.c will not ASSERT although it only got the first instance of UnicodeCollation2 protocol but it did not call GetBestLanguage().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9736</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-09-19 20:20:00 +0000</bug_when>
    <thetext>Zhichao, please confirm and work with James on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10095</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-10-17 22:29:30 +0000</bug_when>
    <thetext>Sorry for late response. Yes thru the commit d65f2cea36d17092302e49c5109ea21f1878ab6f. We aim to find the matched language. If no matched language found, then return the error status code.
Ray,
What do you think James&apos; suggestion to return the first language found instead of error status? Because the PlatformLang is used in many parts of the edk, such as HII, Driver, shell and so on. As an example, if the user only want to change the language of HII, it would cause the shell not work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10428</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-11-14 05:00:07 +0000</bug_when>
    <thetext>fixed at 9e9f0be353d4e28ccbca8f84fc8b2ab1bbe31d5c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2648</bug_id>
          
          <creation_ts>2020-03-30 14:54:53 +0000</creation_ts>
          <short_desc>Allow FixedAtBuild PCD to be set by phase</short_desc>
          <delta_ts>2020-11-09 19:57:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11925</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-30 14:54:53 +0000</bug_when>
    <thetext>You can currently set FixedAtBuild PCDs to be set by architecture, but they cannot be set by phase. I&apos;d like to be able to define this set of PCDs applies to DXE_RUNTIME_DRIVER and so on.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11959</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 21:40:21 +0000</bug_when>
    <thetext>This is the build request to configure PCD type in the specified module type. 

StructurePcd has limitation to be supported in INF file. To place PCD setting in the global level. This one is about CryptoPkg PCD usage. The real request is to support module level structure PCD.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12105</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:09:29 +0000</bug_when>
    <thetext>Bob: please give the input for the support in StructurePcd.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12300</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-04-23 06:09:34 +0000</bug_when>
    <thetext>Are there module-level structure PCD requirement details?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12342</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-28 22:13:37 +0000</bug_when>
    <thetext>Single DSC, single module is built multiple times with the different PCD settings.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14214</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-03 22:03:12 +0000</bug_when>
    <thetext>The patch is under review. https://edk2.groups.io/g/devel/message/66953</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14286</commentid>
    <comment_count>6</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-11-09 19:57:11 +0000</bug_when>
    <thetext>fixed at 09af9bd9be2d3e31bba979f8cf6446017b0b863e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2538</bug_id>
          
          <creation_ts>2020-02-20 10:48:44 +0000</creation_ts>
          <short_desc>GuidedSectionTools.txt is not generated correctly when tool path is overrided in DSC</short_desc>
          <delta_ts>2020-04-02 23:20:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11341</commentid>
    <comment_count>0</comment_count>
      <attachid>462</attachid>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 10:48:44 +0000</bug_when>
    <thetext>Created attachment 462
TestCase for Emulator

For LzmaCompress or BrotliCompress, the platform may use the different options and add their batch file, such as LzmaCompressPlatform. Then, specify it in platform.dsc [BuildOptions] to override the default one in tools_def.txt. 

*_*_*_LZMA_PATH = LzmaCompressPlatform

This override tool will be used. But, its name is not specified in the generated GuidedSectionTools.txt. This should be BaseTools issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11342</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 10:49:27 +0000</bug_when>
    <thetext>Confirm it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11748</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-03-20 01:22:43 +0000</bug_when>
    <thetext>patch link is https://edk2.groups.io/g/devel/message/55948</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12048</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-04-02 23:20:53 +0000</bug_when>
    <thetext>fixed it in 8c944c938359cffda4c889259b3d2aba69e9ee7b</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>462</attachid>
            <date>2020-02-20 10:48:44 +0000</date>
            <delta_ts>2020-02-20 10:48:44 +0000</delta_ts>
            <desc>TestCase for Emulator</desc>
            <filename>0001-Test-Case-in-EmulatorPkg.dsc.patch</filename>
            <type>application/octet-stream</type>
            <size>806</size>
            <attacher name="nobody">nobody</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2425</bug_id>
          
          <creation_ts>2019-12-17 05:00:19 +0000</creation_ts>
          <short_desc>BaseTools: Add support on C files to consume ASL files</short_desc>
          <delta_ts>2020-08-14 01:48:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="Pierre Gondois">pierre.gondois</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10716</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2019-12-17 05:00:19 +0000</bug_when>
    <thetext>In an &apos;.inf&apos; module, I have a &apos;.c&apos; source file and an &apos;.asl&apos; source file. 
Compiled with the iASL compiler with the &apos;-tc&apos; option, the .asl file produces a &apos;.hex&apos; file. This &apos;.hex&apos; file is then included in the &apos;.c&apos; file.

The &apos;.asl&apos; file must be compiled before the &apos;.c&apos; file to resolve the dependency. There is currently no mean to describe this dependency in edk2.
If one &apos;.inf&apos; module is created for the &apos;c&apos; file, and another for the &apos;.asl&apos; file, there is no mean to describe the dependency between the two modules since these two modules are libraries. There is currently no order in the compilation of libraries in edk2.

Thus, a mean to describe dependencies between source files would be necessary.
A discussion is available on the edk2 mailing list: &quot;BaseTools: Build ASL files before C files&quot;
https://edk2.groups.io/g/devel/topic/patch_v1_1_1_basetools/39786201?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,20,39786201

Regards,
Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11920</commentid>
    <comment_count>1</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2020-03-30 12:24:19 +0000</bug_when>
    <thetext>The following patches have been submitted against this issue:
  - v1: https://edk2.groups.io/g/devel/message/52550
  - v2: https://edk2.groups.io/g/devel/message/53244
  - v3: https://edk2.groups.io/g/devel/message/53735
  - v4: https://edk2.groups.io/g/devel/message/56662

The matching Inf Specification update is available at:
   - Bugzilla ticket: https://bugzilla.tianocore.org/show_bug.cgi?id=2646
   - v1: https://edk2.groups.io/g/devel/message/56658
   - v2: https://edk2.groups.io/g/devel/message/56663

Regards,

Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11999</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-01 09:59:37 +0000</bug_when>
    <thetext>Please see the comments in https://bugzilla.tianocore.org/show_bug.cgi?id=2646</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13400</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-14 01:48:54 +0000</bug_when>
    <thetext>Pierre fixes it at 6511277827fd33023418e2ee72d6ab2b89a925f9..0622a7b1b203ad4ab1675533e958792fc1afc12b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2560</bug_id>
          
          <creation_ts>2020-02-26 05:44:37 +0000</creation_ts>
          <short_desc>implement support for TPM2 measured boot</short_desc>
          <delta_ts>2020-03-04 03:50:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11437</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-02-26 05:44:37 +0000</bug_when>
    <thetext>Implement support for TPM2 based measured boot to ArmVirtQemu, using the same facilities that exist for x86 in QEMU (TPM passthrough or TPM emulation)

Note that other ArmVirtPkg platforms omit the PEI phase, which is a prerequisite for using the existing TPM2 support stack that EDK2 provides, so this ticket affects ArmVirtQemu only.

Two sets of patches implementing this have been posted so far:

* [edk2-devel] [PATCH 0/4]
  ArmVirtPkg: implement measured boot for ArmVirtQemu

  https://edk2.groups.io/g/devel/message/52972
  http://mid.mail-archive.com/20200107094800.4488-1-ard.biesheuvel@linaro.org

* [edk2-devel] [PATCH v2 0/5]
  ArmVirtPkg: implement measured boot for ArmVirtQemu

  https://edk2.groups.io/g/devel/message/54779
  http://mid.mail-archive.com/20200225104449.22453-1-ard.biesheuvel@linaro.org</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11438</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-26 07:33:19 +0000</bug_when>
    <thetext>IN_PROGRESS given v1 &amp; v2 on the list</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11466</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 13:13:09 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v3 0/9]
  ArmVirtPkg: implement measured boot for ArmVirtQemu

  https://edk2.groups.io/g/devel/message/54922
  http://mid.mail-archive.com/20200226190514.31395-1-ard.biesheuvel@linaro.org

* [edk2-devel] [PATCH v4 00/11]
  ArmVirtPkg: implement measured boot for ArmVirtQemu

  https://edk2.groups.io/g/devel/message/55004
  http://mid.mail-archive.com/20200227144056.56988-1-ard.biesheuvel@linaro.org</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11521</commentid>
    <comment_count>3</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-04 03:50:02 +0000</bug_when>
    <thetext>Merged as edk2-stable202002..0980779a9ddc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2449</bug_id>
          
          <creation_ts>2020-01-06 22:33:09 +0000</creation_ts>
          <short_desc>Add platform microcode shadow PPI to UefiCpuPkg</short_desc>
          <delta_ts>2022-02-13 20:43:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="sfu5">siyuan.fu</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10797</commentid>
    <comment_count>0</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2020-01-06 22:33:09 +0000</bug_when>
    <thetext>The existing MpInitLib will shadow the microcode update patches from flash to memory and this is done by searching microcode region specified by PCD PcdCpuMicrocodePatchAddress and PcdCpuMicrocodePatchRegionSize. This brings a limition to platform FW that all the microcode patches must be placed in one continuous flash space.

One possible solution for this problem is shadow the microcode update according to FIT microcode entries, instead of PCD. FIT table is defined in a public spec here: https://www.intel.com/content/dam/www/public/us/en/documents/guides/fit-bios-specification.pdf
And it requires every microcode patch to be pointed by a FIT microcode entry. MpInitLib could use this FIT info to shadow microcode patch.

The shadow logic could fallback to PCD solution for compatible if FIT table is not avaiable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10831</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-09 21:37:31 +0000</bug_when>
    <thetext>Siyuan will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11180</commentid>
    <comment_count>2</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2020-02-10 06:06:12 +0000</bug_when>
    <thetext>Commit c7c964b and dd01704 add header file for FIT table and update MpInitLib to support FIT based microcode shadow operation. But there are comments that FIT is Intel specific specification instead of industry standard, which should not be placed in EDK2 MdePkg and UefiCpuPkg.
So this patch adds a platform PPI for the microcode shadow logic, and 
remove the FIT related code from EDK2.
The FIT based microcode shadow support will be implemented as a new platform PEIM in IntelSiliconPkg in edk2-platforms.

A detailed design doc can be found here:
https://edk2.groups.io/g/devel/files/Designs/2020/0214/Support%20the%202nd%20Microcode%20FV%20Flash%20Region.pdf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11259</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2020-02-14 01:29:46 +0000</bug_when>
    <thetext>Commit c788c2b1a to add EDKII_PEI_SHADOW_MICROCODE_PPI for platform specific microcode shadow method.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18342</commentid>
    <comment_count>4</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2022-02-13 20:43:56 +0000</bug_when>
    <thetext>Patch already committed. Close this one.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2113</bug_id>
          
          <creation_ts>2019-08-22 06:07:06 +0000</creation_ts>
          <short_desc>AdapterInfoProtocolTest SetInformation Func and Conformance fail on EFI_UNSUPPORTED</short_desc>
          <delta_ts>2019-10-02 04:58:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc>https://github.com/TMZhao/edk2-test/tree/add_valid_unsupported_return_adapterinfo_setinfo_v1</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Tom Zhao">tzhao</reporter>
          <assigned_to name="Tom Zhao">tzhao</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>tzhao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9151</commentid>
    <comment_count>0</comment_count>
    <who name="Tom Zhao">tzhao</who>
    <bug_when>2019-08-22 06:07:06 +0000</bug_when>
    <thetext>IHV\DriverModelTest\AdapterInfoProtocolTest SetInformationconformance and SetInformationfunction in 
Protocol\AdapterInfo\BlackBoxTest\AdapterInfoBBTestConformance.c
Protocol\AdapterInfo\BlackBoxTest\AdapterInfoBBTestFunction.c
fail when EFI_UNSUPPORTED is returned (the adapter doesn&apos;t support SetInformation()).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9718</commentid>
    <comment_count>1</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-19 02:15:30 +0000</bug_when>
    <thetext>EFI_UNSUPPORTED The InformationType is not known.
The description is described as above in UEFI Spec.

In this case, the test gets the InformationType from EFI_ADAPTER_GET_INFO(), so the SetInformationfunction return EFI_UNSUPPORTED doesn&apos;t make sense. the reason is not covered by spec at least.

Suggest to do the some basic check or return EFI_DEVICE_ERROR. And the test could add EFI_DEVICE_ERROR into acceptable return code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9739</commentid>
    <comment_count>2</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-19 21:11:44 +0000</bug_when>
    <thetext>(In reply to Tom Zhao from comment #0)
&gt; IHV\DriverModelTest\AdapterInfoProtocolTest SetInformationconformance and
&gt; SetInformationfunction in 
&gt; Protocol\AdapterInfo\BlackBoxTest\AdapterInfoBBTestConformance.c
&gt; Protocol\AdapterInfo\BlackBoxTest\AdapterInfoBBTestFunction.c
&gt; fail when EFI_UNSUPPORTED is returned (the adapter doesn&apos;t support
&gt; SetInformation()).

revisit the test, it gets the InformationType from GetSupportedTypes(), then call SetInformation() with the supported InformationType. In this scenario,  the EFI_UNSUPPORTED doesn&apos;t make sense. If the adapter doesn&apos;t want to support the function SetInformation, EFI_WRITE_PROTECTED may be better.

Copy the spec description as below.
EFI_WRITE_PROTECTED The InformationType cannot be modified using
EFI_ADAPTER_INFO_SET_INFO()
EFI_UNSUPPORTED The InformationType is not known.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9778</commentid>
    <comment_count>3</comment_count>
    <who name="Tom Zhao">tzhao</who>
    <bug_when>2019-09-24 07:44:54 +0000</bug_when>
    <thetext>Thanks for the clarification, reading the spec again I can see this. It&apos;s slightly confusing with the distinction between the adapter supporting the information type and the function supporting the information type.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9872</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-29 04:03:33 +0000</bug_when>
    <thetext>(In reply to Tom Zhao from comment #3)
&gt; Thanks for the clarification, reading the spec again I can see this. It&apos;s
&gt; slightly confusing with the distinction between the adapter supporting the
&gt; information type and the function supporting the information type.

If no objection is received, I would like to close this ticket in next week.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9908</commentid>
    <comment_count>5</comment_count>
    <who name="Tom Zhao">tzhao</who>
    <bug_when>2019-10-02 04:58:23 +0000</bug_when>
    <thetext>Close after clarification of spec</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2028</bug_id>
          
          <creation_ts>2019-07-29 03:55:11 +0000</creation_ts>
          <short_desc>Comparisons in CapsuleOnDisk.c should be improved</short_desc>
          <delta_ts>2019-08-29 15:17:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>wei6.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8616</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-07-29 03:55:11 +0000</bug_when>
    <thetext>In MdeModulePkg\Library\DxeCapsuleLibFmp\CapsuleOnDisk.c  line 130
  for (Cptr = Str; *Cptr; Cptr++) {

In MdeModulePkg\Application\CapsuleApp\CapsuleOnDisk.c  line 747
  if (OsIndicationsSupported &amp; 
EFI_OS_INDICATIONS_FILE_CAPSULE_DELIVERY_SUPPORTED) {

Non-Boolean comparisons should use a compare operator (==, !=, &gt;, &lt; &gt;=, &lt;=).
And a comparison of any pointer to zero must be done via the NULL type.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8617</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-07-29 04:00:24 +0000</bug_when>
    <thetext>Assign this to Wei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9283</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:02:31 +0000</bug_when>
    <thetext>Is this fixed at commit f5892aa8d8bfbe8e6af5c9765faad8cfe877c334?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9336</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:34:35 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; Is this fixed at commit f5892aa8d8bfbe8e6af5c9765faad8cfe877c334?

To clarify: the question is for Wei. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9365</commentid>
    <comment_count>4</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-08-27 22:07:14 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; (In reply to Laszlo Ersek from comment #2)
&gt; &gt; Is this fixed at commit f5892aa8d8bfbe8e6af5c9765faad8cfe877c334?
&gt; 
&gt; To clarify: the question is for Wei. Thanks.

Hi Laszlo,

Thanks for the reminder. I&apos;m sorry for forgetting to modify the status of this bugzilla.
It is fixed at commit:
https://github.com/tianocore/edk2/commit/f5892aa8d8bfbe8e6af5c9765faad8cfe877c334
https://github.com/tianocore/edk2/commit/34651e7d769f5b40527a577e8917f3b1efebbcf4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2965</bug_id>
          
          <creation_ts>2020-09-16 04:53:31 +0000</creation_ts>
          <short_desc>Incremental build issue for FV_IMAGE Section deletion</short_desc>
          <delta_ts>2020-11-04 23:26:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3052</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Chen Yuwei">yuwei.chen</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13689</commentid>
    <comment_count>0</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-09-16 04:53:31 +0000</bug_when>
    <thetext>When using incremental build to delete the &quot;SECTION FV_IMAGE = XXX&quot; of Fv section in FDF file, the deleted content &quot;SECTION FV_IMAGE = XXX&quot; still be kept in Guid.xref.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13758</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 22:15:09 +0000</bug_when>
    <thetext>Bob: please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13803</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-09-25 11:18:53 +0000</bug_when>
    <thetext>fixed at SHA-1: a8c77eba374cc90860172b29a191bf47c735000b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13804</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-09-25 11:19:16 +0000</bug_when>
    <thetext>fixed at SHA-1: a8c77eba374cc90860172b29a191bf47c735000b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2049</bug_id>
          
          <creation_ts>2019-08-02 03:51:56 +0000</creation_ts>
          <short_desc>Pointer Response in ShellPkg needs to be checked</short_desc>
          <delta_ts>2019-08-13 20:37:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8740</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-02 03:51:56 +0000</bug_when>
    <thetext>In ShellPkg\Library\UefiShellLevel2CommandsLib\Cp.c  line 104
    switch (*(SHELL_PROMPT_RESPONSE*)Response) {

Pointer &apos;Response&apos; returned from call to function &apos;ShellPromptForResponseHii&apos; at line 98 may be NULL and will be dereferenced at line 104.


In ShellPkg\Library\UefiShellLevel2CommandsLib\Mv.c  line 640
    switch (*(SHELL_PROMPT_RESPONSE*)Response) {

Pointer &apos;Response&apos; returned from call to function &apos;ShellPromptForResponseHii&apos; at line 638 may be NULL and will be dereferenced at line 640</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8741</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-02 03:52:38 +0000</bug_when>
    <thetext>Assigned to Zhichao</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8987</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-08-13 20:37:06 +0000</bug_when>
    <thetext>fixed at 12dcad5b1ec58eb33c351854ae37942b996ed2e5.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2521</bug_id>
          
          <creation_ts>2020-02-11 08:41:42 +0000</creation_ts>
          <short_desc>Update FMMT to support FFS without UI section</short_desc>
          <delta_ts>2020-10-10 01:29:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="yunhua feng">fengyunhua</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>fengyunhua</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11205</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-11 08:41:42 +0000</bug_when>
    <thetext>If FFS file has no UI section, its FILE_GUID will be used as its name. FMMT tool -d/-a/-r option can be updated to support such FFS file.

Here is FMMT tool https://github.com/tianocore/edk2-staging/tree/FceFmmt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11331</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 09:01:14 +0000</bug_when>
    <thetext>Yunhua takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13934</commentid>
    <comment_count>2</comment_count>
    <who name="yunhua feng">fengyunhua</who>
    <bug_when>2020-10-10 01:29:02 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2-staging/tree/FceFmmt 
SHA-1: aec80acc2ae21f77a99053d07c1512d7a1654907</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2880</bug_id>
          
          <creation_ts>2020-08-07 03:03:05 +0000</creation_ts>
          <short_desc>Incremental build issue as directory macros extended in Makefile</short_desc>
          <delta_ts>2020-11-04 23:26:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3052</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Chen Yuwei">yuwei.chen</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13336</commentid>
    <comment_count>0</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-08-07 03:03:05 +0000</bug_when>
    <thetext>When doing the Incremental build, the directory macros extended to absolute path in output Makefile, which is inconsistent with the output of Clean build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13448</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-18 22:10:25 +0000</bug_when>
    <thetext>Bob, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13798</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-09-25 11:14:35 +0000</bug_when>
    <thetext>fixed at SHA-1: 9641a7f975ff5a18f83a8c899626342e15409c48</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2290</bug_id>
          
          <creation_ts>2019-10-18 05:42:40 +0000</creation_ts>
          <short_desc>Overflowed array index on array mStandbyButtonPhaseString</short_desc>
          <delta_ts>2020-04-08 02:06:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10103</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-10-18 05:42:40 +0000</bug_when>
    <thetext>In source MdeModulePkg/Application/SmiHandlerProfileInfo/SmiHandlerProfileInfo.c function StandbyButtonPhaseToString() we have:

    if (Phase &gt;= 0 &amp;&amp; Phase &lt;= ARRAY_SIZE(mStandbyButtonPhaseString)) {
        return mStandbyButtonPhaseString[Phase];
    } else {

The comparison is off-by one on the upper limit, it should be:

    if (Phase &gt;= 0 &amp;&amp; Phase &lt; ARRAY_SIZE(mStandbyButtonPhaseString)) {</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10108</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-18 10:49:43 +0000</bug_when>
    <thetext>How do you find this issue? Have you used some tool to scan the source code?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10109</commentid>
    <comment_count>2</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-10-18 11:02:15 +0000</bug_when>
    <thetext>eyeballing the code and being guided by Coverity.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10270</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:56:53 +0000</bug_when>
    <thetext>Shenglei: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11314</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-19 21:10:04 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11319</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 21:15:40 +0000</bug_when>
    <thetext>please check</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11543</commentid>
    <comment_count>6</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 22:01:45 +0000</bug_when>
    <thetext>Similar issue with BZ2272, please review https://bugzilla.tianocore.org/show_bug.cgi?id=2272 for status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12134</commentid>
    <comment_count>7</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-08 02:06:33 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/d6f99b2ac4296662720db76d7c23d224f5288df3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2759</bug_id>
          
          <creation_ts>2020-05-21 14:54:27 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-21 14:55:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12647</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:54:27 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12652</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:55:46 +0000</bug_when>
    <thetext>Bad, script! Bad!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2539</bug_id>
          
          <creation_ts>2020-02-20 13:28:01 +0000</creation_ts>
          <short_desc>CryptPkcs7VerifyBase.c: Pkcs7GetAttachedContent() should check type is data and support other OID types</short_desc>
          <delta_ts>2020-10-08 09:54:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeremiah Cox">jerecox</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>jerecox</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11344</commentid>
    <comment_count>0</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2020-02-20 13:28:01 +0000</bug_when>
    <thetext>In CryptoPkg\Library\BaseCryptLib\Pk\CryptPkcs7VerifyBase.c , Pkcs7GetAttachedContent() locates the attached payload assuming the type is &quot;data&quot;:

    // Retrieve the attached content in PKCS7 signedData
    //
    
    OctStr = Pkcs7-&gt;d.sign-&gt;contents-&gt;d.data;

I confirmed with Matt Caswell (matt at openssl dot org) that before doing so it should first check that the type is in fact data.

There is a simple change that addresses this _and_ adds support for attached P7 content of different types.  This is helpful because Microsoft signtool supports creation of attached P7&apos;s with any OID payload via the &quot;/p7co&quot; parameter (which is common practice at Microsoft to differentiate various payload types).

A simple change to accomplish this is as follows:

-    OctStr = Pkcs7-&gt;d.sign-&gt;contents-&gt;d.data;
+    OctStr = PKCS7_get_octet_string(Pkcs7-&gt;d.sign-&gt;contents);

I&apos;ve successfully tested this with non-data OIDs.

But... because PKCS7_get_octet_string() is not public API, we&apos;d need to bring it, or its contents over from OpenSSL&apos;s pk7_doit.c, roughly 2 dozen lines of code, which is how I performed my test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11345</commentid>
    <comment_count>1</comment_count>
      <attachid>463</attachid>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2020-02-20 13:44:36 +0000</bug_when>
    <thetext>Created attachment 463
The patch that I&apos;ve tested successfully

A test will be published to Mu soon</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11348</commentid>
    <comment_count>2</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2020-02-20 19:02:09 +0000</bug_when>
    <thetext>I also filed a feature request to OpenSSL to make the needed functions public so that we don&apos;t have to copy/paste:
https://github.com/openssl/openssl/issues/11139</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11354</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:11:21 +0000</bug_when>
    <thetext>1. Can fix this issue without openssl update. 
2. After openssl update, cryptolibrary can be updated again to use the public APIs. Separate is from this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11378</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 21:37:17 +0000</bug_when>
    <thetext>Guomin: please take the change in BaseCryptLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11547</commentid>
    <comment_count>5</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 22:28:47 +0000</bug_when>
    <thetext>Have comment at https://edk2.groups.io/g/devel/message/54835, waiting for reviewing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11904</commentid>
    <comment_count>6</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-30 03:46:22 +0000</bug_when>
    <thetext>Post Patch v2 for review, the message is https://edk2.groups.io/g/devel/message/56603</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12113</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:15:32 +0000</bug_when>
    <thetext>Does the patch pass review?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12190</commentid>
    <comment_count>8</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-04-13 01:32:13 +0000</bug_when>
    <thetext>The review process is on-going.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12412</commentid>
    <comment_count>9</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-05-06 00:39:38 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/469eb461695b8ff7c19e4b82916240f8d56974f1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13918</commentid>
    <comment_count>10</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2020-10-08 09:54:39 +0000</bug_when>
    <thetext>Just a note that OpenSSL has fixed this is master, but unknown when it may arrive in a 1.1 stable branch...
https://github.com/openssl/openssl/pull/13059</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>463</attachid>
            <date>2020-02-20 13:44:36 +0000</date>
            <delta_ts>2020-02-20 13:44:36 +0000</delta_ts>
            <desc>The patch that I&apos;ve tested successfully</desc>
            <filename>p7fix.dif</filename>
            <type>application/octet-stream</type>
            <size>1729</size>
            <attacher name="Jeremiah Cox">jerecox</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2668</bug_id>
          
          <creation_ts>2020-04-08 12:18:55 +0000</creation_ts>
          <short_desc>EmulatorPkg IA32 Segfault in late Dxe</short_desc>
          <delta_ts>2022-03-03 04:59:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2639</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2638</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>brian.delgado</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12150</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-08 12:18:55 +0000</bug_when>
    <thetext>After getting IA32 to build on Ubuntu 18.04 it now segfaults when trying to run.  It fails in late DXE which is different than https://bugzilla.tianocore.org/show_bug.cgi?id=2639.  

Maybe I am missing some graphics configuration because i am using a headless VM but regardless this should not cause Segmentation fault.


Azure Pipeline run here (build and boot logs as artifacts): https://dev.azure.com/tianocore/edk2-ci-play/_build/results?buildId=5555&amp;view=logs&amp;j=340bd6f2-95b1-514a-e5d4-c88ff61ededb&amp;t=2f930dd8-d4fd-573a-2635-738b56f3c93e


Boot Log ends like

INFO - [BdsDxe] Locate Variable Lock protocol - Success
INFO - [Variable] Lock: 8BE4DF61-93CA-11D2-AA0D-00E098032B8C:PlatformLangCodes Success
INFO - [Variable] Lock: 8BE4DF61-93CA-11D2-AA0D-00E098032B8C:LangCodes Success
INFO - [Variable] Lock: 8BE4DF61-93CA-11D2-AA0D-00E098032B8C:BootOptionSupport Success
INFO - [Variable] Lock: 8BE4DF61-93CA-11D2-AA0D-00E098032B8C:HwErrRecSupport Success
INFO - [Variable] Lock: 8BE4DF61-93CA-11D2-AA0D-00E098032B8C:OsIndicationsSupported Success
INFO - Variable Driver Auto Update Lang, Lang:eng, PlatformLang:en Status: Success
INFO - [Variable] Lock: 8BE4DF61-93CA-11D2-AA0D-00E098032B8C:PlatformRecovery0000 Success
INFO - PROGRESS CODE: V03051005 I0
INFO - [Variable]END_OF_DXE is signaled
INFO - Initialize variable error flag (FF)
INFO - InstallProtocolInterface: 9842073D-95D9-9F49-BD3F-2E29525125DF 4412AB90
INFO - InstallProtocolInterface: 09576E91-6D3F-11D2-8E39-00A0C969723B 4412AA10
INFO - InstallProtocolInterface: 453368F6-7C85-434A-A98A-72D1B7FFA926 4412AD9C
INFO - InstallProtocolInterface: 9042A9DE-23DC-4A38-96FB-7ADED080516A 4411301C
INFO - InstallProtocolInterface: 387477C1-69C7-11D2-8E39-00A0C969723B 4411302C
INFO - InstallProtocolInterface: 31878C87-0B75-11D5-9A4F-0090273FC14D 44113038
INFO - InstallProtocolInterface: DD9E7534-7762-4698-8C14-F58517A625AA 44113490
INFO - uga: cannot connect to X server
INFO - GraphicsConsole video resolution 800 x 600
INFO - Graphics - Mode 0, Column = 80, Row = 25
INFO - Graphics - Mode 1, Column = 0, Row = 0
INFO - Graphics - Mode 2, Column = 100, Row = 31
INFO - Graphics Console Started, Mode: -1
INFO - InstallProtocolInterface: 387477C2-69C7-11D2-8E39-00A0C969723B 44129D9C
INFO - InstallProtocolInterface: D3B36F2C-D551-11D4-9A46-0090273FC14D 0
INFO - InstallProtocolInterface: 9042A9DE-23DC-4A38-96FB-7ADED080516A 441931E8
INFO - InstallProtocolInterface: 982C298B-F4FA-41CB-B838-77AA688FB839 441931CC
INFO - Segmentation fault (core dumped)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12214</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-14 21:40:22 +0000</bug_when>
    <thetext>Guomin: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12408</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-05-05 23:19:30 +0000</bug_when>
    <thetext>Sorry for replying it till now, i will check it this week.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12472</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-05-11 00:46:07 +0000</bug_when>
    <thetext>I am afraid that i have no time for it until August.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13043</commentid>
    <comment_count>4</comment_count>
    <who name="Brian Delgado">brian.delgado</who>
    <bug_when>2020-07-05 11:09:25 +0000</bug_when>
    <thetext>Disabling compiler optimizations worked around this issue for me (although my crash was elsewhere). 

This link mentions the workaround: https://edk2.groups.io/g/discuss/topic/67981202#76

I added -O0 as shown below and it loaded properly. 

------------
!include NetworkPkg/Network.dsc.inc

[BuildOptions]
  #
  # Disable deprecated APIs.
  #
  *_*_*_CC_FLAGS = -D DISABLE_NEW_DEPRECATED_INTERFACES -O0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13283</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-07-31 20:38:28 +0000</bug_when>
    <thetext>(In reply to Brian Delgado from comment #4)
&gt; Disabling compiler optimizations worked around this issue for me (although
&gt; my crash was elsewhere). 
&gt; 
&gt; This link mentions the workaround:
&gt; https://edk2.groups.io/g/discuss/topic/67981202#76
&gt; 
&gt; I added -O0 as shown below and it loaded properly. 
&gt; 
&gt; ------------
&gt; !include NetworkPkg/Network.dsc.inc
&gt; 
&gt; [BuildOptions]
&gt;   #
&gt;   # Disable deprecated APIs.
&gt;   #
&gt;   *_*_*_CC_FLAGS = -D DISABLE_NEW_DEPRECATED_INTERFACES -O0

It is no helpful, but still thank yo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18353</commentid>
    <comment_count>6</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-02-14 01:51:17 +0000</bug_when>
    <thetext>Will check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18421</commentid>
    <comment_count>7</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-02-21 22:42:48 +0000</bug_when>
    <thetext>sent change https://edk2.groups.io/g/devel/message/86842 for review

Thanks
Guomin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18471</commentid>
    <comment_count>8</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-03-01 00:14:51 +0000</bug_when>
    <thetext>Sent change for review:

[edk2-devel] [PATCH 0/2] Avoid Emulator Segmentation fault: https://edk2.groups.io/g/devel/message/86842

[edk2-devel] [PATCH 1/2] MdeModulePkg/GraphicsConsoleDxe: Check status to make sure no error: https://edk2.groups.io/g/devel/message/86843

[edk2-devel] [PATCH 2/2] EmulatorPkg/EmuGopDxe: Set ModeInfo after Open successfully: https://edk2.groups.io/g/devel/message/86844</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18472</commentid>
    <comment_count>9</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-03-01 04:26:01 +0000</bug_when>
    <thetext>Sent V2 change

[edk2-devel] [PATCH v2 0/2] Avoid Emulator Segmentation fault: https://edk2.groups.io/g/devel/message/87138

[edk2-devel] [PATCH v2 1/2] MdeModulePkg/GraphicsConsoleDxe: Check status to make sure no error: https://edk2.groups.io/g/devel/message/87139

[edk2-devel] [PATCH v2 2/2] EmulatorPkg/EmuGopDxe: Set ModeInfo after Open successfully: https://edk2.groups.io/g/devel/message/87140

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18512</commentid>
    <comment_count>10</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-03-02 19:52:51 +0000</bug_when>
    <thetext>Sent V3 change

[edk2-devel] [PATCH v3 0/2] Avoid Emulator Segmentation fault: https://edk2.groups.io/g/devel/message/87190

[edk2-devel] [PATCH v3 1/2] MdeModulePkg/GraphicsConsoleDxe: Check status to make sure no error: https://edk2.groups.io/g/devel/message/87191

[edk2-devel] [PATCH v3 2/2] EmulatorPkg/EmuGopDxe: Set ModeInfo after Open successfully: https://edk2.groups.io/g/devel/message/87192

Thanks
Guomin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18524</commentid>
    <comment_count>11</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-03-03 04:53:17 +0000</bug_when>
    <thetext>Merged 

b422b0fcf92dd4103dfc16d8d5f77fbec2d8c5b9...dc39554d58af4a50b50eca1f57c49415a12b0c98

Guomin
Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18526</commentid>
    <comment_count>12</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-03-03 04:59:23 +0000</bug_when>
    <thetext>*** Bug 2639 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2030</bug_id>
          
          <creation_ts>2019-07-29 20:55:32 +0000</creation_ts>
          <short_desc>tools_def.txt contains hard-coded path to mtoc (*_XCODE5_*_MTOC_PATH)</short_desc>
          <delta_ts>2021-05-10 15:53:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Mac OS</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8626</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2019-07-29 20:55:32 +0000</bug_when>
    <thetext>On macOS, mtoc can be installed through Homebrew or MacPorts. If using MacPorts, programs are installed to /opt/local/bin. However, Conf/tools_def.txt contains a hard-coded path to mtoc of /usr/local/bin/mtoc, which requires an extra step to create a symlink to the real location of /opt/local/bin.

It would be nice if the path could be specified via an ENV() setting instead.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8896</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:37:25 +0000</bug_when>
    <thetext>Bug Triage: confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15983</commentid>
    <comment_count>2</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2021-05-10 15:53:27 +0000</bug_when>
    <thetext>This _is_ still an issue, but since Homebrew now has mtoc and it seems the more popular way of installing such software, I don&apos;t think it&apos;s a problem. For example I set up a new macOS installation recently using Homebrew and it worked fine, so I think this ticket can be closed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2267</bug_id>
          
          <creation_ts>2019-10-11 13:06:34 +0000</creation_ts>
          <short_desc>PlatformBootManagerWaitCallback(0) broke x86 OVMF on QEMU</short_desc>
          <delta_ts>2019-10-14 14:06:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2266</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Artem Nefedov">artem.nefedov</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>artem.nefedov</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>pete</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10002</commentid>
    <comment_count>0</comment_count>
      <attachid>419</attachid>
    <who name="Artem Nefedov">artem.nefedov</who>
    <bug_when>2019-10-11 13:06:34 +0000</bug_when>
    <thetext>Created attachment 419
Issue reproduction script (build &amp; run QEMU)

&quot;qemu-system-i386&quot; crashes immediately after launch with an error:

!!!! IA32 Exception Type - 00(#DE - Divide Error)  CPU Apic ID - 00000000 !!!!
EIP  - 07D4BD13, CS  - 00000010, EFLAGS - 00000246
EAX  - 00000000, ECX - 00000000, EDX - 00000000, EBX - 00000000
ESP  - 07EA1CF4, EBP - 07EA1D5C, ESI - 0702B850, EDI - 00000000
DS   - 00000008, ES  - 00000008, FS  - 00000008, GS  - 00000008, SS - 00000008
CR0  - 40000033, CR2 - 00000000, CR3 - 00000000, CR4 - 00000640
DR0  - 00000000, DR1 - 00000000, DR2 - 00000000, DR3 - 00000000
DR6  - FFFF0FF0, DR7 - 00000400
GDTR - 07E70A90 00000047, IDTR - 07984010 000007FF
LDTR - 00000000, TR - 00000000
FXSAVE_STATE - 07EA1A30
!!!! Find image based on IP(0x7D4BD13) /home/user/git/edk2/Build/OvmfIa32/DEBUG_GCC5/IA32/MdeModulePkg/Universal/BdsDxe/BdsDxe/DEBUG/BdsDxe.dll (ImageBase=0000000007D3A000, EntryPoint=00
00000007D42FC9) !!!!

&quot;git bisect&quot; found that this commit introduced a problem:

Author: Pete Batard &lt;pete@akeo.ie&gt;
Date:   Wed Sep 25 23:50:05 2019 +0800

    MdeModulePkg/BdsDxe: Also call PlatformBootManagerWaitCallback on 0

    The existing loop is set to call PlatformBootManagerWaitCallback every
    second except the last one. We believe this is a mistake as it prevents
    the called code from performing timeout expiration tasks such as, for
    instance, ensuring that the last segment of a progress bar is displayed
    before continuing (which is a current issue for the RPi3 platform).

    Signed-off-by: Pete Batard &lt;pete@akeo.ie&gt;
    Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;
    Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;

diff --git a/MdeModulePkg/Universal/BdsDxe/BdsEntry.c b/MdeModulePkg/Universal/BdsDxe/BdsEntry.c
index f3d5e5ac06..7968a58f34 100644
--- a/MdeModulePkg/Universal/BdsDxe/BdsEntry.c
+++ b/MdeModulePkg/Universal/BdsDxe/BdsEntry.c
@@ -341,6 +341,7 @@ BdsWait (
       TimeoutRemain--;
     }
   }
+  PlatformBootManagerWaitCallback (0);
   DEBUG ((EFI_D_INFO, &quot;[Bds]Exit the waiting!\n&quot;));
 }

My setup:

qemu-system-i386 -version
QEMU emulator version 2.5.0 (Debian 1:2.5+dfsg-5ubuntu10.41), Copyright (c) 2003-2008 Fabrice Bellard

Reproduction script is attached.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10003</commentid>
    <comment_count>1</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2019-10-11 13:20:54 +0000</bug_when>
    <thetext>Duplicate of https://bugzilla.tianocore.org/show_bug.cgi?id=2266</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10004</commentid>
    <comment_count>2</comment_count>
    <who name="Artem Nefedov">artem.nefedov</who>
    <bug_when>2019-10-11 13:25:37 +0000</bug_when>
    <thetext>Hash of commit that introduced the issue:
2de1f611be06ded3a59726a4052a9039be7d459b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10010</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-14 14:06:40 +0000</bug_when>
    <thetext>Closing per comment 1: dupe of bug 2266.

*** This bug has been marked as a duplicate of bug 2266 ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>419</attachid>
            <date>2019-10-11 13:06:34 +0000</date>
            <delta_ts>2019-10-11 13:06:34 +0000</delta_ts>
            <desc>Issue reproduction script (build &amp; run QEMU)</desc>
            <filename>run.sh</filename>
            <type>text/x-sh</type>
            <size>222</size>
            <attacher name="Artem Nefedov">artem.nefedov</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2051</bug_id>
          
          <creation_ts>2019-08-05 02:28:39 +0000</creation_ts>
          <short_desc>A pointer is not safe when dereferenced in DebugCommunicationLibUsb3Dxe.c</short_desc>
          <delta_ts>2019-08-11 22:19:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SourceLevelDebugPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8783</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-05 02:28:39 +0000</bug_when>
    <thetext>In SourceLevelDebugPkg\Library\DebugCommunicationLibUsb3\DebugCommunicationLibUsb3Dxe.c   line 479

    if (mUsb3InstanceAddrPtr != NULL) {		
      *AddrPtr = *mUsb3InstanceAddrPtr;
    }

Pointer &apos;AddrPtr&apos; returned from call to function &apos;EfiGetSystemConfigurationTable&apos; at line 449 may be NULL. So AddrPtr needs be checked before dereferenced.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8784</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-05 02:29:39 +0000</bug_when>
    <thetext>Assign this to Star</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8930</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-08-11 22:19:19 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/4053587347a4c68402c1fc40921b7f1cdaec900e.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2881</bug_id>
          
          <creation_ts>2020-08-07 03:20:08 +0000</creation_ts>
          <short_desc>Incremental build issue as macro value change in Makefile</short_desc>
          <delta_ts>2020-11-04 23:26:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3052</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Chen Yuwei">yuwei.chen</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13337</commentid>
    <comment_count>0</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-08-07 03:20:08 +0000</bug_when>
    <thetext>When doing the Incremental build, GenFfs command macro &quot;-n&quot; in Makefile has different value with Clean build results.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13447</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-18 22:09:58 +0000</bug_when>
    <thetext>Bob, will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13799</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-09-25 11:15:42 +0000</bug_when>
    <thetext>fixed at SHA-1: d8be01079b3c7b554ac8126e97e73fba8894e519</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2293</bug_id>
          
          <creation_ts>2019-10-20 05:19:28 +0000</creation_ts>
          <short_desc>NULL pointer dereference in FileHandleGetInfo</short_desc>
          <delta_ts>2019-11-03 21:20:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Marvin Häuser">mhaeuser</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10121</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-20 05:19:28 +0000</bug_when>
    <thetext>Certain drivers do not like NULL argument to FileHandle-&gt;GetInfo, and I believe it should also be caught by static analysis due to the NULL check below.

Original patch sent here:
https://edk2.groups.io/g/devel/message/24847

Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10137</commentid>
    <comment_count>1</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2019-10-20 13:30:05 +0000</bug_when>
    <thetext>Patch submitted: https://edk2.groups.io/g/devel/message/49256
Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10296</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-03 21:20:58 +0000</bug_when>
    <thetext>Fix at 1009b59b6525c16724fe2684c344a6359af28b55</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2760</bug_id>
          
          <creation_ts>2020-05-21 14:54:28 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-21 14:55:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12648</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:54:28 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12651</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:55:37 +0000</bug_when>
    <thetext>Bad, script! Bad!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2073</bug_id>
          
          <creation_ts>2019-08-10 09:40:46 +0000</creation_ts>
          <short_desc>RegularExpressionDxe: Use submodule way to access Oniguruma</short_desc>
          <delta_ts>2020-04-16 13:17:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8923</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-10 09:40:46 +0000</bug_when>
    <thetext>Oniguruma is git repo https://github.com/kkos/oniguruma. Only few changes are made to use it in Edk2 project. We should consider to contribute edk2 changes to Oniguruma repo, then Oniguruma can be used as submodule in edk2 project.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8925</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-10 09:45:22 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10553</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-26 22:15:11 +0000</bug_when>
    <thetext>Shenglei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11307</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 11:05:15 +0000</bug_when>
    <thetext>This is a feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11559</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-03-05 03:17:14 +0000</bug_when>
    <thetext>Attach the patch link.
https://github.com/shenglei10/edk2/commit/eb68eae09e52b12e862bd902d9a937d42afbb3df</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12225</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-16 13:17:40 +0000</bug_when>
    <thetext>Fixed in commit 48b6c60cc6a2 (&quot;MdeModulePkg/RegularExpressionDxe: Make oniguruma a submodule in edk2.&quot;, 2020-04-13).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2783</bug_id>
          
          <creation_ts>2020-06-04 19:47:19 +0000</creation_ts>
          <short_desc>FileHandleReadLine() overruns a supplied buffer if the buffer is too small</short_desc>
          <delta_ts>2020-08-25 00:14:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="Vladimir Olovyannikov">vladimir.olovyannikov</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12800</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2020-06-04 19:47:19 +0000</bug_when>
    <thetext>FileHandleReadLine() in UefiFileHandleLib.c overruns the supplied buffer if the buffer was not large enough.
Here is an excerpt starting from line 1041 with my comments prepended with &quot;VO&quot;
  //
  // if we ran out of space tell when...
  //
  if ((CountSoFar+1-CrCount)*sizeof(CHAR16) &gt; *Size){
    *Size = (CountSoFar+1-CrCount)*sizeof(CHAR16);
    if (!Truncate) {
      if (Buffer != NULL &amp;&amp; *Size != 0) {
    // VO: we are essentially increasing the size and then ZeroMem 
    // not only the supplied buffer but larger size thus overrunning the buffer!
        ZeroMem(Buffer, *Size);
      }
I suggest fixing this issue like this:
  //
  // if we ran out of space tell when...
  //
  if ((CountSoFar+1-CrCount)*sizeof(CHAR16) &gt; *Size){
    UINTN OldSize;

    OldSize = *Size;
    *Size = (CountSoFar+1-CrCount)*sizeof(CHAR16);
    if (!Truncate) {
      if (Buffer != NULL &amp;&amp; OldSize != 0) {
        ZeroMem(Buffer, OldSize);
      }

Thank you,
Vladimir</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12803</commentid>
    <comment_count>1</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2020-06-05 12:03:46 +0000</bug_when>
    <thetext>The patch fixing the issue has been posted for review
[PATCH v1 1/1] MdePkg : UefiFileHandleLib: fix buffer overrun in FileHandleReadLine().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12834</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-09 21:53:45 +0000</bug_when>
    <thetext>The patch has sent for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13123</commentid>
    <comment_count>3</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2020-07-17 15:31:09 +0000</bug_when>
    <thetext>Can someone please review the patch and merge it into the mainline?
It&apos;s been there for almost a month.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13516</commentid>
    <comment_count>4</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2020-08-25 00:14:20 +0000</bug_when>
    <thetext>Merged as commit 4535fc312b76, via
https://github.com/tianocore/edk2/pull/896.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2012</bug_id>
          
          <creation_ts>2019-07-24 01:05:30 +0000</creation_ts>
          <short_desc>UefiDebugLibStdErr library lacks destructor to close event</short_desc>
          <delta_ts>2019-07-29 01:04:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>wei6.xu</reporter>
          <assigned_to>wei6.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8556</commentid>
    <comment_count>0</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-07-24 01:05:30 +0000</bug_when>
    <thetext>When UEFI application exits or driver is unloaded, the Exit Boot Service callback function is destroy at the same time. This will cause exception when calling the destroyed function at ExitBootServices().
UefiDebugLibStdErr library must have a destructor to close Exit Boot Services Event when driver is unloaded.
Besides MdePkg\Library\UefiDebugLibStdErr,
The following two library instance also have such issue:
MdePkg\Library\UefiDebugLibConOut
MdePkg\Library\UefiDebugLibDebugPortProtocol</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8613</commentid>
    <comment_count>1</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-07-29 01:04:45 +0000</bug_when>
    <thetext>Patches are pushed at:
https://github.com/tianocore/edk2/commit/e92bdcb3ecbf73b3a56378c1f6e054335215d939
https://github.com/tianocore/edk2/commit/0f4b77f5b2efe4de8694c02c1cead7418595f1cb
https://github.com/tianocore/edk2/commit/28bc6992400d56351d36b26f0841fbfcb1ea2fd4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2827</bug_id>
          
          <creation_ts>2020-06-28 02:40:57 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg/Tools/GenCfgOpt.py failed to parse the macro value which contain another macro</short_desc>
          <delta_ts>2020-08-03 21:25:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12956</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-28 02:40:57 +0000</bug_when>
    <thetext>Assume the following dsc file:

[Define]
  DEFINE M1 = V1
  DEFINE M2 = $(M1)/V2

  !include $(M2)/pcd.dsc


Then the IntelFsp2Pkg/Tools/GenCfgOpt.py will failed to parse the value of M2 and cause failed to open file $(M2)/pcd.dsc, and report like following error:

Traceback (most recent call last):
  File &quot;Edk2\IntelFsp2Pkg\Tools\GenCfgOpt.py&quot;, line 1550, in &lt;module&gt;
    sys.exit(Main())
  File &quot;Edk2\IntelFsp2Pkg\Tools\GenCfgOpt.py&quot;, line 1513, in Main
    if GenCfgOpt.ParseDscFile(DscFile, FvDir) != 0:
  File &quot;Edk2\IntelFsp2Pkg\Tools\GenCfgOpt.py&quot;, line 533, in ParseDscFile
    NewDscLines = IncludeDsc.readlines()
ValueError: I/O operation on closed file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12957</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-28 02:41:51 +0000</bug_when>
    <thetext>I will submit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13308</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-08-03 21:25:52 +0000</bug_when>
    <thetext>The patch was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2250</bug_id>
          
          <creation_ts>2019-10-07 17:39:26 +0000</creation_ts>
          <short_desc>Change SimicsOpenBoardPkg build output directory</short_desc>
          <delta_ts>2019-11-06 18:19:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>SimicsOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9931</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-07 17:39:26 +0000</bug_when>
    <thetext>The SimicsOpenBoardPkg build is currently placed in Build/SimicsX58Ia32X64/.

To align with other Intel board packages, the output must be placed in Build/SimicsOpenBoardPkg/BoardX58Ich10/.

This change should be communicated to validation stakeholders.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9958</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:26:12 +0000</bug_when>
    <thetext>Assigned to Prince.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10236</commentid>
    <comment_count>2</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-10-29 16:37:44 +0000</bug_when>
    <thetext>Patch sent to the edk2 mailing list</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10351</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-06 18:19:00 +0000</bug_when>
    <thetext>Fixed in the following commit - https://github.com/tianocore/edk2-platforms/commit/cf562ab580a32f9475320c3927461b9800b8d85d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2031</bug_id>
          
          <creation_ts>2019-07-29 23:21:57 +0000</creation_ts>
          <short_desc>ARP packet receive crash</short_desc>
          <delta_ts>2021-09-22 15:46:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2550</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="nick">nicholas.armour</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kimolsun2020</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>rschiron</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8632</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-29 23:21:57 +0000</bug_when>
    <thetext>A runtime fuzz testing environment was setup to test the UEFI platforms network stack. This environment uses QEMU and the OvmfPkg and SourceLevelDebugPkg packages, along with the Socket examples from AppPkg to exercise various parts of the UEFI network stack. A dumb fuzzing approach is being used, leveraging the scapy tool found at http://scapy.net/ to specifically configured network traffic to the UEFI target. The following crash dump was generated when using the scapy tool to send a flood of ARP packets to the UEFI target with a max plen and ptype values. When the UEFI instance is receiving the ARP packets, it will slow down in it&apos;s run-time and network latency, until ultimately ending up in CpuDeadLoop().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8633</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-29 23:23:07 +0000</bug_when>
    <thetext>5.3 Medium https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:L</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8689</commentid>
    <comment_count>2</comment_count>
      <attachid>372</attachid>
    <who name="nick">nicholas.armour</who>
    <bug_when>2019-08-01 12:34:02 +0000</bug_when>
    <thetext>Created attachment 372
Patch to fix memory leak in ARP driver

Memory leak in ARP driver is caused by the following if-statement in   ArpOnFrameRcvdDpc() . This memory leak can eventually lead to memory exhaustion, which will cause the system to crash, as reported by IOActive.

if (RxData-&gt;DataLength &lt; (sizeof (ARP_HEAD) + 2 * Head-&gt;HwAddrLen + 2 * Head-&gt;ProtoAddrLen)) {
    goto RESTART_RECEIVE;
  }


Sending max len/size packets from scapy via :

sendp(Ether(dst=&apos;6a:81:8c:9e:c6:e8&apos;)/ARP(op=&apos;is-at&apos;,psrc=&apos;192.168.254.15&apos;,plen=255,ptype=255),iface=&quot;virbr0&quot;,count=-1)


Causes the above if-statement to be true. RESTART_RECEIVE simply asks the MNP layer to continue sending us packets, thus the packet we sent via scapy is never freed. This patch simply frees the resources taken by this invalid packet.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8691</commentid>
    <comment_count>3</comment_count>
    <who name="nick">nicholas.armour</who>
    <bug_when>2019-08-01 12:36:39 +0000</bug_when>
    <thetext>I tested this with a minnowboard max. I flashed the default unpatched firmware,
sent bad ARP packets via scapy

sendp(Ether(dst=&apos;6a:81:8c:9e:c6:e8&apos;)/ARP(op=&apos;is-at&apos;,psrc=&apos;192.168.254.15&apos;,plen=255,ptype=255),iface=&quot;virbr0&quot;,count=-1)


With the unpatched firmware, typing &apos;memmap&apos; from the shell shows a memory leak.

After applying the patch and reflashing, the memory leak no longer occurs, and networking appears to still be stable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8767</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 10:06:11 +0000</bug_when>
    <thetext>Will a CVE ID be assigned? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9791</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-25 02:23:09 +0000</bug_when>
    <thetext>CVE-2019-14559</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11083</commentid>
    <comment_count>6</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:51:03 +0000</bug_when>
    <thetext>2/5/2020 infosec - has a patch for &gt; 3 mos. and CVE.  un-embargo and do follow-up like edit the TA</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11113</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-05 15:34:18 +0000</bug_when>
    <thetext>We only have a patch for upstream edk2 if it&apos;s ready for immediate posting, approval, and merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11202</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-11 05:37:06 +0000</bug_when>
    <thetext>Nick, can you please post your patch to edk2-devel for review? edk2 master remains vulnerable at this time. The NetworkPkg maintainers should review and (once approved) merge your patch ASAP. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11207</commentid>
    <comment_count>9</comment_count>
    <who name="nick">nicholas.armour</who>
    <bug_when>2020-02-11 17:58:32 +0000</bug_when>
    <thetext>Hi Laszlo,

Yes I can submit this patch to edk2-devel. Tomorrow I will try and figure out the submission process and post the patch. 

Thanks for the reminder.

-Nick</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11250</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-13 18:23:17 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH 1/1]
  NetworkPkg/ArpDxe: Recycle invalid ARP packets(CVE-2019-14559).

http://mid.mail-archive.com/bcb81b4d2751ce483cb06b4190046f9daa4fcb5e.1581551021.git.nicholas.armour@intel.com
https://edk2.groups.io/g/devel/message/54361</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11399</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-23 03:43:33 +0000</bug_when>
    <thetext>The following BZs share the same CVE number:
- https://bugzilla.tianocore.org/show_bug.cgi?id=1610
- https://bugzilla.tianocore.org/show_bug.cgi?id=2032
- https://bugzilla.tianocore.org/show_bug.cgi?id=2174</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11402</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-23 03:53:15 +0000</bug_when>
    <thetext>Moving the CVE-2019-14559 label to higher-level tracking bug 2550.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11404</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-23 04:05:59 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v2 1/1]
  NetworkPkg/ArpDxe: Recycle invalid ARP packets(CVE-2019-14559).

  https://edk2.groups.io/g/devel/message/54649
  msgid: &lt;30f46ad9ea28b26840f2d9323aaad1871a17d0af.1582152411.git.nicholas.armour@intel.com&gt;

* [edk2-devel] [PATCH v3 1/1]
  NetworkPkg/ArpDxe: Recycle invalid ARP packets (CVE-2019-14559)

  https://edk2.groups.io/g/devel/message/54650
  msgid: &lt;244ba710936eb69240973d9bebda82ff913097c8.1582152777.git.nicholas.armour@intel.com&gt;

* [edk2-devel] [PATCH v4 1/1]
  NetworkPkg/ArpDxe: Recycle invalid ARP packets (CVE-2019-14559)

  https://edk2.groups.io/g/devel/message/54653
  msgid: &lt;6d5b6640161ca9ed7c037960f6fb436ea6a7c893.1582158126.git.nicholas.armour@intel.com&gt;

V4 has been committed (with a fixed commit message) as 1d3215fd24f4 (&quot;NetworkPkg/ArpDxe: Recycle invalid ARP packets (CVE-2019-14559)&quot;, 2020-02-21).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17358</commentid>
    <comment_count>14</comment_count>
    <who name="Kim Olsun">kimolsun2020</who>
    <bug_when>2021-09-22 15:46:56 +0000</bug_when>
    <thetext>http://www.compilatori.com/category/travel/	http://www.wearelondonmade.com/category/travel/	http://www.jopspeech.com/category/travel/	http://joerg.li/category/travel/	http://connstr.net/category/travel/	http://embermanchester.uk/category/travel/	http://www.slipstone.co.uk/category/travel/	http://www.logoarts.co.uk/category/travel/	http://www.acpirateradio.co.uk/category/travel/	https://waytowhatsnext.com/category/technology/	https://www.webb-dev.co.uk/category/technology/	http://www.iu-bloomington.com/category/technology/	http://www-look-4.com/category/travel/</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>372</attachid>
            <date>2019-08-01 12:34:02 +0000</date>
            <delta_ts>2019-08-01 12:34:02 +0000</delta_ts>
            <desc>Patch to fix memory leak in ARP driver</desc>
            <filename>arp.patch</filename>
            <type>text/plain</type>
            <size>445</size>
            <attacher name="nick">nicholas.armour</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2502</bug_id>
          
          <creation_ts>2020-02-03 23:53:06 +0000</creation_ts>
          <short_desc>GCC49 tool chain meets with the build failure when GCC7.4 compiler</short_desc>
          <delta_ts>2020-02-06 22:11:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11062</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-03 23:53:06 +0000</bug_when>
    <thetext>When GCC7.4 is used to build UefiCpuPkg on IA32 arch with GCC49 tool chain, GenFw tool will report ERROR 3000: Invalid unsupported ELF EM_386 relocation 0xa. The root cause is that -fno-pie is missing in GCC49 tool chain. This option is added in the commit c25d3905523ae4961bb039b1aba597983f7e3e4e. But, it is removed from GCC49 in the commit 11d0cd23dd1bc15a6e6a1598250ea2e0c4c36e9a. Now, we need to add it back for the higher version GCC compiler.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11063</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-03 23:53:38 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11152</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 22:11:04 +0000</bug_when>
    <thetext>Fix at edk2 b5808fe960cf07325f6a621c2e8c1f655c65cd64</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2052</bug_id>
          
          <creation_ts>2019-08-05 02:56:56 +0000</creation_ts>
          <short_desc>A parameter needs description in comments</short_desc>
          <delta_ts>2019-08-27 17:54:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>haiyanx.a.li</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8785</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-05 02:56:56 +0000</bug_when>
    <thetext>In UefiCpuPkg\Application\Cpuid\Cpuid.c line 708

/**
  Display CPUID_EXTENDED_TOPOLOGY leafs for all supported levels.

**/
VOID
CpuidExtendedTopology (
  UINT32                       LeafFunction
)

The parameter LeafFunction needs to be described in comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8786</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-05 03:12:16 +0000</bug_when>
    <thetext>Assigned to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8795</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-08-06 01:35:06 +0000</bug_when>
    <thetext>*** Bug 1731 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8814</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-07 02:18:16 +0000</bug_when>
    <thetext>*** Bug 2033 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9281</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 17:54:43 +0000</bug_when>
    <thetext>Fixed in 501de8146d4fda1d423cd935316661746bdb750b.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2882</bug_id>
          
          <creation_ts>2020-08-09 22:24:37 +0000</creation_ts>
          <short_desc>Incremental build error triggered by changing name of source code file</short_desc>
          <delta_ts>2020-11-04 23:26:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3052</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Chen Yuwei">yuwei.chen</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13345</commentid>
    <comment_count>0</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2020-08-09 22:24:37 +0000</bug_when>
    <thetext>In some cases, the source code files name has been changed. When doing the incremental build at this time, the .deps file which records the source code file will not be overridden, and that trigger the build error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13445</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-18 22:07:06 +0000</bug_when>
    <thetext>Bob, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13800</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-09-25 11:16:25 +0000</bug_when>
    <thetext>fixed at SHA-1: aec99d9bc3f7459e457e3346b493e534ccbdee8a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2294</bug_id>
          
          <creation_ts>2019-10-20 05:25:49 +0000</creation_ts>
          <short_desc>Unhandled unspecified Timezone in ls causing garbage output</short_desc>
          <delta_ts>2022-02-14 01:39:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Marvin Häuser">mhaeuser</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10122</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-20 05:25:49 +0000</bug_when>
    <thetext>EFI_RUNTIME_SERVICES.GetTime() might return an unspecified Timezone, such as when SetTime() has not been called after the PC-AT CMOS RTC was cut off power. This case should be considered by not attempting Timezone translations for when it is invalid, as otherwise ls may produce garbage output.

Original patch sent here:
https://edk2.groups.io/g/devel/message/24850

Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10138</commentid>
    <comment_count>1</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2019-10-20 13:31:01 +0000</bug_when>
    <thetext>Patch submitted: https://edk2.groups.io/g/devel/message/49257
Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10302</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-03 21:55:04 +0000</bug_when>
    <thetext>Fix at 106369fe26579c2c97131c3dd9e7c7332a5ec575</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18350</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2022-02-14 01:39:50 +0000</bug_when>
    <thetext>*** Bug 2526 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2761</bug_id>
          
          <creation_ts>2020-05-21 14:54:29 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-21 14:55:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard 3</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12649</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:54:29 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12650</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 14:55:29 +0000</bug_when>
    <thetext>Bad, script! Bad!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2926</bug_id>
          
          <creation_ts>2020-08-24 21:44:51 +0000</creation_ts>
          <short_desc>Add new memory attribute EFI_MEMORY_SP and EFI_MEMORY_CPU_CRYPTO introduced by UEFI2.8</short_desc>
          <delta_ts>2020-08-24 21:47:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to>gaoliming</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13510</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-24 21:44:51 +0000</bug_when>
    <thetext>New memory attributes EFI_MEMORY_SP and EFI_MEMORY_CPU_CRYPTO are introduced in UEFI2.8. Their support has been added in Edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13511</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-24 21:47:23 +0000</bug_when>
    <thetext>The changes have been merged in edk2 by Oleksiy @5d29e2d020e8b0ad70f3f766c38429c3bfad0d41..e77966b341b993291ab2d95718b88a6a0d703d0c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2228</bug_id>
          
          <creation_ts>2019-09-30 17:01:11 +0000</creation_ts>
          <short_desc>PS/2 Keyboard Must be Functional in UEFI Boot Environment</short_desc>
          <delta_ts>2019-11-13 18:17:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9891</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-30 17:01:11 +0000</bug_when>
    <thetext>Applies to GalagoPro3 board.

The laptop PS/2 keyboard is not function in the UEFI boot environment such as UEFI shell. The keyboard must be functional in the UEFI boot environment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9911</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-02 18:15:35 +0000</bug_when>
    <thetext>Assigned to Prince</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10418</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-13 18:17:23 +0000</bug_when>
    <thetext>Completed in the patch series a9b8efa48f83c2432e88918c55cae61b32f7cd5e..3badb2a8e8b56191d8a3f8417c984c497568aee6.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2956</bug_id>
          
          <creation_ts>2020-09-08 12:07:44 +0000</creation_ts>
          <short_desc>Boundary condition bug on SmmSaveState.c function ReadSaveStateRegisterByIndex.</short_desc>
          <delta_ts>2021-11-26 10:16:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mark Wilson">mark.wilson</reporter>
          <assigned_to name="Mark Wilson">mark.wilson</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>mark.wilson</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13643</commentid>
    <comment_count>0</comment_count>
    <who name="Mark Wilson">mark.wilson</who>
    <bug_when>2020-09-08 12:07:44 +0000</bug_when>
    <thetext>Hash: f94345d9eae1b359c01761be975086870a4a9de9
file: SmmSaveState.c
function: ReadSaveStateRegisterByIndex

Input parameter: UINTN Width - The number of bytes to read from the CPU save state.

Lines 317 - 326:
    //
    // Write lower 32-bits of return buffer
    //
    CopyMem(Buffer, (UINT8 *)CpuSaveState + mSmmCpuWidthOffset[RegisterIndex].Offset64Lo, MIN(4, Width));
    if (Width &gt;= 4) {
      //
      // Write upper 32-bits of return buffer
      //
      CopyMem((UINT8 *)Buffer + 4, (UINT8 *)CpuSaveState + mSmmCpuWidthOffset[RegisterIndex].Offset64Hi, Width - 4);
    }

Issue: If Width is 4 for read 32-bits.
Problem: 64-bits will be copied.

It seems that &quot;if (Width &gt;= 4)&quot; should be &quot;if (Width &gt; 4)&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13644</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-08 14:49:59 +0000</bug_when>
    <thetext>Hello Mark,

in the &quot;Write upper 32-bits of return buffer&quot; branch, the last argument of the CopyMem() call -- for parameter &quot;Length&quot; -- is (Width - 4). So if Width equals 4, then the branch is taken (albeit superfluous), but then CopyMem() will copy zero bytes. Do you agree?

... I do agree that the comment &quot;Write upper 32-bits of return buffer&quot; is misleading. It does not reflect that Length equals (Width - 4). So if we want to clean this up, I suggest:

- replace the (Width &gt;= 4) condition (Width &gt; 4), for clarity / simplicity, as you say,

- replace the comment: &quot;write at most 4 of the upper bytes of the return buffer&quot;

- update the other comment too: &quot;write at most 4 of the lower bytes of the return buffer&quot;

NB ReadSaveStateRegisterByIndex() is implemented in two files:
- UefiCpuPkg/PiSmmCpuDxeSmm/SmramSaveState.c
- OvmfPkg/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLib.c

so if you decide to send a patch for the former (for cleaning up the condition and the comments), then please consider sending a patch for the latter too.

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13645</commentid>
    <comment_count>2</comment_count>
    <who name="Mark Wilson">mark.wilson</who>
    <bug_when>2020-09-08 15:05:48 +0000</bug_when>
    <thetext>Lazio,

I agree, but it is better to fix the boundary condition.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13680</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-15 22:12:47 +0000</bug_when>
    <thetext>Mark, will you contribute the fix for this issue? If yes, I will change the owner to you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13742</commentid>
    <comment_count>4</comment_count>
    <who name="Mark Wilson">mark.wilson</who>
    <bug_when>2020-09-22 20:50:16 +0000</bug_when>
    <thetext>You can change the owner to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13747</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 21:45:39 +0000</bug_when>
    <thetext>OK. Mark will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13997</commentid>
    <comment_count>6</comment_count>
    <who name="Mark Wilson">mark.wilson</who>
    <bug_when>2020-10-15 12:34:37 +0000</bug_when>
    <thetext>I sent patch to the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14031</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-19 12:42:32 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v1 0/1] Clean up save state boundary checks and comments in functions ReadSaveStateRegisterByIndex and WriteSaveStateRegister

https://edk2.groups.io/g/devel/message/66283
http://mid.mail-archive.com/20201015163243.364-1-Mark.Wilson@amd.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17857</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-11-26 10:16:48 +0000</bug_when>
    <thetext>Fix at b170806518c1e414939c8b085866544814e1ce8e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2660</bug_id>
          
          <creation_ts>2020-04-03 13:46:02 +0000</creation_ts>
          <short_desc>Remove deprecated Visual Studio compiler option ‘Gm’ for VS2017 and VS2019</short_desc>
          <delta_ts>2020-05-27 04:17:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12057</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-04-03 13:46:02 +0000</bug_when>
    <thetext>The Visual Studio compiler option &apos;Gm&apos; has been deprecated and the VS2017 compiler reports &quot;warning D9035: option &apos;Gm&apos; has been deprecated and will be removed in a future release&quot;

More information about the &apos;Gm&apos; option can be found at https://docs.microsoft.com/en-us/cpp/build/reference/gm-enable-minimal-rebuild?view=vs-2019</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12058</commentid>
    <comment_count>1</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-04-03 14:07:33 +0000</bug_when>
    <thetext>Patch to fix this issue is at https://edk2.groups.io/g/devel/topic/patch_v1_1_1_basetools/72754835?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,72754835</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12090</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 21:36:26 +0000</bug_when>
    <thetext>Sami: please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12738</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-27 04:17:04 +0000</bug_when>
    <thetext>Fix at b1357a40fcbe40ba6bdfa1579f96f8f5c7af35f9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2646</bug_id>
          
          <creation_ts>2020-03-30 09:49:34 +0000</creation_ts>
          <short_desc>INF Spec: Add file dependency to [Sources] syntax</short_desc>
          <delta_ts>2022-02-11 10:37:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11917</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2020-03-30 09:49:34 +0000</bug_when>
    <thetext>When building an edk2 module, a C file was including a .hex file generated by the compilation of an ASL file. To describe this dependency between an ASL file and a C file, the edk2 patch,
 - named &quot;BaseTools: Build ASL files before C files&quot;,
 - discussed at:
  - v1: https://edk2.groups.io/g/devel/message/52550
  - v2: https://edk2.groups.io/g/devel/message/53244
  - v3: https://edk2.groups.io/g/devel/message/53735
has been created. In the V3, Bob Feng asked:&quot;Is there a Bugzilla for this patch? And will you send the patch for INF spec?&quot;
This bugzilla is created accordingly.

The edk2 patch adds the following modification to establish build dependencies in the [Sources] section, between files that are not of the same language.
E.g.:
[Sources]
  FileName1.X
  FileName2.Y : FileName1.X
  FileName3.Z : FileName1.X FileName2.Y

Here:
  * FileName1.X will be built prior to FileName2.Y.
  * FileName1.X and FileName2.Y will be built prior to
    FileName3.Z.

A patch to update the Inf specification will be submitted soon.

Regards,
Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11919</commentid>
    <comment_count>1</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2020-03-30 12:22:08 +0000</bug_when>
    <thetext>The patches have been submitted at &quot;INF Spec: Add file dependency to [Sources] syntax&quot;:
 - v1: https://edk2.groups.io/g/devel/message/56658
 - v2: https://edk2.groups.io/g/devel/message/56663

Regards,
Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11961</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 21:50:14 +0000</bug_when>
    <thetext>Simply will be better

Investigate source file type defined in build rule, and evaluate the solution to resolve the dependency of the source file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11997</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-01 09:55:49 +0000</bug_when>
    <thetext>Another solution is to specify the file type order in the build rule txt. Do we evaluate this solution?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12029</commentid>
    <comment_count>4</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2020-04-02 05:05:52 +0000</bug_when>
    <thetext>Hello Liming,

[Liming] Another solution is to specify the file type order in the build rule txt. Do we evaluate this solution?

The &quot;build_rule.txt&quot; file allows to configure the compilation of files of the same language.
E.g.: the section corresponding to the ASL language is
[Acpi-Source-Language-File]
    &lt;InputFile&gt;
        ?.asl, ?.Asl, ?.ASL
[...]
&lt;Command.GCC&gt;
    Trim --asl-file --asl-deps -o $(OUTPUT_DIR)(+)${s_dir}(+)${s_base}.i -i $(INC_LIST) ${src}
    &quot;$(ASLPP)&quot; $(DEPS_FLAGS) $(ASLPP_FLAGS) $(INC) -I${s_path} $(OUTPUT_DIR)(+)${s_dir}(+)${s_base}.i &gt; $(OUTPUT_DIR)(+)${s_dir}(+)${s_base}.iii
    Trim --source-code -l -o $(OUTPUT_DIR)(+)${s_dir}(+)${s_base}.iiii $(OUTPUT_DIR)(+)${s_dir}(+)${s_base}.iii 
    &quot;$(ASL)&quot; $(ASL_FLAGS) $(ASL_OUTFLAGS)${dst} $(OUTPUT_DIR)(+)${s_dir}(+)${s_base}.iiii
    -AmlToHex $(OUTPUT_DIR)(+)${s_dir}(+)${s_base}.aml

It allows to do pre/postprocessing of ASL files. It is however not possible to specify any relation between files of different languages. In our case, between ASL and C files.


[Michael] We think there may be a simpler way to address this issue without extending the INF syntax. It is our understanding that the ASL files need to be processed before C files when both are present in an INF. This is similar to the requirement that UNI files be processed before C files that is already supported.

The first implementation of this patch was just a small modification making all ASL files being built prior any other file. The first implementation is available at: 
https://edk2.groups.io/g/devel/message/49659

I haven&apos;t looked closely at how .uni files are processed before other files yet. But I think the processing order should not be handled the same way for .uni files (which are build system files) and for source files (like C files, ASL files, ...). Indeed, if tomorrow someone needs to make C files build prior to ASL files (so the opposite of what I want to achieve), it will be impossible. Plus if any other source language A needs to be built before a language B in a specific module, a new hack will be needed. This is I believe what Liming meant with this message:
[Liming] https://edk2.groups.io/g/devel/message/49691 : Can you give the whole solution for this usage model? Does it mean C source file depends on ASL file? This is related to the priority of source file type. Now, there is no method to let user configure them. I suggest to introduce the generic way instead of the specific handle.

I believe making it possible to choose a build order at a module scope gives flexibility, and making ASL files build prior to C files at a larger scope might create issues later.

Regards,
Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12034</commentid>
    <comment_count>5</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2020-04-02 08:45:53 +0000</bug_when>
    <thetext>I think I misunderstood what .uni files were for. I will at it more closely and try to submit a modification based on this.

However, making ASL files build prior to C files using this solution would mean the opposite (building C files prior to ASL files) will not be possible anymore. Would it be ok for you?

Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12171</commentid>
    <comment_count>6</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2020-04-09 06:05:03 +0000</bug_when>
    <thetext>Hello Liming,
I wanted to be sure we agreed before trying to make an implementation. It seems that in edk2 build system, the steps described below are followed (in the same order): 
 1. Autogen.c/h files are generated, using UNI files among other files.
 2. Makefiles are generated by:
   2.1. Probing the files in the module (from the [Sources] section of the &quot;.inf&quot; file).
   2.2. For each file probed, copy/pasting the [Commands] section of the &quot;Conf/build_rule.txt&quot; file relevant for the file extension. This allows to generate the file of the [OutputFile] section. For an ASL file, the list of commands at [Acpi-Source-Language-File].&lt;Command.GCC&gt; will be copy/pasted (if someone uses GCC).

The UNI files are processes in the first step, when generating Autogen.c/h files. As the [Unicode-Text-File].&lt;Command&gt; section is empty, no command needs to be executed for UNI files in the second step. It is possible for the Makefile to reference the Autogen.h file because it has already been created.

Based on how UNI files are handled, we can process ASL files before the Makefile generation step. The build steps would then be:
1. Autogen.c/h files are generated, using UNI files among other files.
2. ASL files are compiled.
3. Makefiles are generated by:
  3.1. Probing the files in the module (from the [Sources] section of the &quot;.inf&quot; file).
  3.2. For each file probed, copy/pasting the [Commands] section of the &quot;Conf/build_rule.txt&quot; file relevant for the file extension. This allows to generate the file of the [OutputFile] section. For an ASL file, the list of commands at [Acpi-Source-Language-File].&lt;Command.GCC&gt; will be copy/pasted (if someone uses GCC).

However, this would imply:
 - Not building ASL files by calling the Makefile. Indeed, if ASL files are built before the Makefile generation, they cannot be built by the Makefile.
 - Having a hard-coded build order for ASL files. They will always be built before other files (excepted form UNI files. We can still choose to build ASL files before or after UNI files)
 - In a module having ASL files, always including the HEX files generated by the compilation of ASL files. Indeed, the build dependency between C and ASL files still needs to be resolved.

Please let me know if you are ok with this solution,

Regards,
Pierre

P.S.:
The options that we have already tried are:
 - Option 1: When listing the build target in the &quot;CODA_TARGET&quot; variable, the AML build target are put first. This was the first implementation available at https://edk2.groups.io/g/devel/message/49659 . The issue for this solution is that there is no explicit dependency between a C file and an AML/HEX file (the C file needs to include the HEX file generated while compiling an ASL file). For a multi-thread build, the build will fail, as you pointed out at https://edk2.groups.io/g/devel/message/50477
 - Option 2: Modifying INF files to describe dependencies between source files of different languages. This allows to handle multi-thread builds, but the INF specification needs to be modified. Patch available at https://edk2.groups.io/g/devel/message/56663</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12254</commentid>
    <comment_count>7</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2020-04-20 14:16:30 +0000</bug_when>
    <thetext>Hello Bob, Michael and Liming,
I don&apos;t have a clear idea on which direction to go in order to enable building ASL files before C files in edk2. I would need an answer to agree on which direction I should continue to investigate. For the record, the matching patch in edk2 is available at https://edk2.groups.io/g/devel/message/56662 and 
BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=2425

Regards,
Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18338</commentid>
    <comment_count>8</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-11 10:37:19 +0000</bug_when>
    <thetext>fixed at SHA-1: 0a4aa20e8d446c2f5dd54f3a0a7ec4d52f0ebdb6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2780</bug_id>
          
          <creation_ts>2020-06-03 22:22:31 +0000</creation_ts>
          <short_desc>Update new timezone of Istanbul, Novosibirsk, Georgetown</short_desc>
          <delta_ts>2020-06-18 03:09:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dorapika Wu">dorapika</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12794</commentid>
    <comment_count>0</comment_count>
    <who name="Dorapika Wu">dorapika</who>
    <bug_when>2020-06-03 22:22:31 +0000</bug_when>
    <thetext>The timezone of following cities should be updated in ShellPkg/Library/UefiShellLevel2CommandsLib/UefiShellLevel2CommandsLib.uni.

Istanbul: UTC+3
Novosibirsk: UTC+7
Georgetown (Guyana): UTC-4


Sources:
https://en.wikipedia.org/wiki/Time_in_Turkey
In 2016, the decision to stay on UTC+03:00 year-round was enacted.
https://www.timeanddate.com/time/zone/turkey/istanbul

https://en.wikipedia.org/wiki/Time_in_Russia
The following time zone change occurred on 24 July 2016.
Novosibirsk Oblast moved forward one hour from UTC+06:00 to UTC+07:00 (from Omsk to Krasnoyarsk time)
https://www.timeanddate.com/time/zone/russia/novosibirsk

https://en.wikipedia.org/wiki/Georgetown,_Guyana
I can&apos;t find Time in Guyana wiki page, but new timezone is mentioned in this wiki page
https://www.timeanddate.com/time/zone/guyana/georgetown</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12837</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-09 21:59:27 +0000</bug_when>
    <thetext>Zhichao: please fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12907</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-06-18 03:09:51 +0000</bug_when>
    <thetext>fixed at https://github.com/tianocore/edk2/commit/3a9f932d809e496be4961a568741175b254099d5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2611</bug_id>
          <alias>CXL_1_1</alias>
          <creation_ts>2020-03-20 07:09:44 +0000</creation_ts>
          <short_desc>CXL 1.1 Base Specification Register definitions</short_desc>
          <delta_ts>2020-08-10 03:12:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc>https://www.computeexpresslink.org/</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashraf Javeed">ashraf.javeed</reporter>
          <assigned_to name="Ashraf Javeed">ashraf.javeed</assigned_to>
          <cc>ashraf.javeed</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11753</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-03-20 07:09:44 +0000</bug_when>
    <thetext>There is new high-speed CPU interconnect technology known as Compute Express Link (CXL), that can be used for platform enhancements and high-speed accelerators; whose Base Specification Revision 1.1 is already released.
official site: https://www.computeexpresslink.org/

The feature request is to import the CXL 1.1 Base Specification Revision 1.1 registers definitions in the MdePkg/IndustryStandard source header file, as it would help to build CXL support in the UEFI drivers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11754</commentid>
    <comment_count>1</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-03-20 07:12:52 +0000</bug_when>
    <thetext>No CXL register set defined in the MdePkg/Include/IndustryStandard folder</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11755</commentid>
    <comment_count>2</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-03-20 07:15:49 +0000</bug_when>
    <thetext>Assigning to self.
Target would be to provide the header file in the MdePkg/IndustryStandard folder, containing the CXL 1.1 Base Specification register definitions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11756</commentid>
    <comment_count>3</comment_count>
      <attachid>492</attachid>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-03-20 09:30:30 +0000</bug_when>
    <thetext>Created attachment 492
CXL 1.1 Register definitions

Patch containing the CXL 1.1 register definitions sent for approval to devel@edk2.groups.io</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11763</commentid>
    <comment_count>4</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-03-23 01:45:10 +0000</bug_when>
    <thetext>As per the code review suggestions; defined the Cxl.h as the main header file in the MdePkg/IndustryStandard to accommodate all versions of CXL register definitions, so that the UEFI modules can use to reference all versions of CXL registers.

The Patch V2 with the Cxl11.h and Cxl.h headers sent for review; these changes are test for builds by directly referencing the CXL 1.1 registers in the test code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13085</commentid>
    <comment_count>5</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-07-11 07:05:57 +0000</bug_when>
    <thetext>Sent new 2 patches to the devel@edk2.groups.io committee review.

Previous V3 patches have to abandoned due to internal source name conflict issue. This new version has resolved the internal source name conflicts as the internal code base is already aligned with these new patches changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13348</commentid>
    <comment_count>6</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-08-10 03:12:22 +0000</bug_when>
    <thetext>The V4 patch sent has completed the - Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;.
This change is merged by Liming - https://github.com/tianocore/edk2/pull/828.

Thanks Liming and Mike, for the valuable input to complete the code change!</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>492</attachid>
            <date>2020-03-20 09:30:30 +0000</date>
            <delta_ts>2020-03-20 09:30:30 +0000</delta_ts>
            <desc>CXL 1.1 Register definitions</desc>
            <filename>0001-MdePkg-IndustryStandard-CXL-1.1-Base-Specification-r.patch</filename>
            <type>text/plain</type>
            <size>30673</size>
            <attacher name="Ashraf Javeed">ashraf.javeed</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2900</bug_id>
          
          <creation_ts>2020-08-14 05:44:49 +0000</creation_ts>
          <short_desc>Dynamic AML: A solution to simplify runtime generation of Definition Block tables</short_desc>
          <delta_ts>2020-08-16 11:51:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Sami Mujawar">sami.mujawar</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>Alexei.Fedorov</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>matteo.carlini</cc>
    
    <cc>nobody</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13405</commentid>
    <comment_count>0</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-08-14 05:44:49 +0000</bug_when>
    <thetext>ACPI tables are categorised as Data tables (e.g. MADT, GTDT, etc.) or Definition Block tables (e.g. DSDT or SSDT). The Dynamic Tables Framework already supports generation of Data tables. Definition Block tables are written in ACPI Source Language (ASL) and compiled to ACPI Machine Language (AML). This AML bytecode is processed by the AML interpreter that runs as part of the Operating System (OS). 

AML has a complex grammar, making runtime modifications of an AML byte stream difficult. Dynamic AML is a solution to simplify the generation of Definition Block tables. 

Dynamic AML introduces an AmlLib library that implements an AML parser that parses the AML bytecode and represent it as a tree data structure. This allows to easily modify the AML code by updating/adding/removing the tree nodes. The modified AML tree is then serialised to a buffer for installing as a Definition block table.

AmlLib library provides a rich set of APIs to
  - parse AML bytecode to generate an AML tree.
  - search, update, traverse and serialise an AML tree.
  - enumerate, add, delete nodes of an AML tree.
  - generate small segments of AML code in the form of
    AML nodes that can be used to form a branch/tree.

Dynamic AML introduces the following techniques:
  * AML Fixup
  * AML Codegen
  * AML Fixup + Codegen

AML Fixup is a technique that involves run-time fixup of sections of an AML template bytecode. An ASL template file is compiled to AML bytecode at build time. At runtime, this AML template bytecode is parsed using the AmlLib library APIs and is represented as an AML tree. The AML tree nodes can be searched to locate a node that needs updating and can be fixed up. The AML tree is then serialised to a buffer representing the Definition Block table.

AML Codegen employs generating small segments of AML code and populating a small AML tree that can be serialised.

AML Fixup + Codegen is a combination of Fixup and Codegen. Here the AML template is parsed to generate an AML Tree. Sections of AML code can be fixed-up as well as new AML nodes/branches can be attached to the AML tree using the AML Codegen APIs.

A SSDT Serial Port generator has also been introduced to generate definition block tables describing the serial ports on a platform.

A SSDT Serial Port Fixup library has been provided to generate description of a serial port in a Definition Block table. This library is shared by SPCR, DBG2 and the SSDT Serial Port generator to describe the respective serial ports.

The SPCR and DBG2 table generators have also been updated to generate the SSDT serial port tables describing the respective serial ports.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13406</commentid>
    <comment_count>1</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-08-14 06:26:16 +0000</bug_when>
    <thetext>The following patches for supporting Dynamic AML feature have been merged in edk2 master:

1. DynamicTablesPkg: Introduction to Dynamic AML (https://github.com/tianocore/edk2/commit/056b0f1b207dd1825f11cfe035bccd14b0281ffc)
2. DynamicTablesPkg: AmlLib definitions (https://github.com/tianocore/edk2/commit/292e5408547767553e838b3e825a49c338224c16)
3. DynamicTablesPkg: AML grammar definition (https://github.com/tianocore/edk2/commit/98f2808115d0635c6bfd6019ccacbe7c1dd5a5f7)
4. DynamicTablesPkg: AML node definitions (https://github.com/tianocore/edk2/commit/bcab901b7cc3b433bca5779a770ba3edbc7153f4)
5. DynamicTablesPkg: AML tree interface (https://github.com/tianocore/edk2/commit/9275bb82caf95c31c2e58a5c14b3feabf46bdf0b)
6. DynamicTablesPkg: AML tree enumerator (https://github.com/tianocore/edk2/commit/5764abda7c64bf0fe0061638e80cd195ebe45279)
7. DynamicTablesPkg: AML tree traversal (https://github.com/tianocore/edk2/commit/f96dd8185d6ba79de57fc6c4f9ccc4d7482b1200)
8. DynamicTablesPkg: AML tree iterator (https://github.com/tianocore/edk2/commit/e2c1104c504024b6bbee7c34a87cc9add59f37d5)
9. DynamicTablesPkg: AML tree/node cloning (https://github.com/tianocore/edk2/commit/0414377c021e624dba9d01314464620db3ec3744)
10. DynamicTablesPkg: AML utility interfaces (https://github.com/tianocore/edk2/commit/667aa7ccbf8311a3bbe6ae541cdb6915711a9f3e)
11. DynamicTablesPkg: AML and ASL string helper (https://github.com/tianocore/edk2/commit/ca04956e1b7790101a4bd774de60642acc15d695)
12. DynamicTablesPkg: AML stream interface (https://github.com/tianocore/edk2/commit/7f293b25d600b673b0bd59c24aec9a887d7a5f4a)
13. DynamicTablesPkg: AML serialise interface (https://github.com/tianocore/edk2/commit/26f5961f3e53c6c8916a51f9b92a525d301b7dd7)
14. DynamicTablesPkg: AML debug logging (https://github.com/tianocore/edk2/commit/340f8f4565c6a9a11992b9ac4a90df948dbd989f)
15. DynamicTablesPkg: AML ACPI Namespace interface (https://github.com/tianocore/edk2/commit/d9800046ea43cdbd16e91ba5abf9742eb075d57f)
16. DynamicTablesPkg: AML Parser (https://github.com/tianocore/edk2/commit/9f2d50f145191733e502667327c2129034a93099)
17. DynamicTablesPkg: AML resource data helper (https://github.com/tianocore/edk2/commit/422e93e1de6f265ff48eaacc8cf7c44d6401062e)
18. DynamicTablesPkg: AML resource data parser (https://github.com/tianocore/edk2/commit/feea6514486f9dbf6a657e25dd32035d997560de)
19. DynamicTablesPkg: AML Method parser (https://github.com/tianocore/edk2/commit/bb4e93925333625cdcd97f6f174f79e7ed48afa7)
20. DynamicTablesPkg: AML Field list parser (https://github.com/tianocore/edk2/commit/e8db4f9c53b1f7a3094a64ea27e92224623a6a3b)
21. DynamicTablesPkg: AML Codegen (https://github.com/tianocore/edk2/commit/3a681567780b5dcbc514b69a4fb8ccc98a5a2711)
22. DynamicTablesPkg: AML Resource Data Codegen (https://github.com/tianocore/edk2/commit/01ea2ad59c26abbf72c7697e61c9e5fc4d757cfd)
23. DynamicTablesPkg: AML Core interface (https://github.com/tianocore/edk2/commit/3196253710a1ed56b4dc04a728d33961ec7542c8)
24. DynamicTablesPkg: AmlLib APIs (https://github.com/tianocore/edk2/commit/c85ac5245c0c47836fb9b599caff0b949066a412)
25. DynamicTablesPkg: Dynamic AML: Add AmlLib library (https://github.com/tianocore/edk2/commit/095db69d4c156eb4f81307d471339a60ca0a9a09)
26. DynamicTablesPkg: Add AsciiFromHex helper function (https://github.com/tianocore/edk2/commit/f2bd39fb606f0c3e5a8f7998fa215ba4d6e25687)
27. DynamicTablesPkg: SSDT Serial Port Fixup library (https://github.com/tianocore/edk2/commit/bade7f423b234fbe67af8a87e23cd2cacb93d6dc)
28. DynamicTablesPkg: SSDT Serial Port generator (https://github.com/tianocore/edk2/commit/5b035defa8b6a0acfa84fb20f34f6a941d5d91a0)
29. DynamicTablesPkg: Add SSDT Serial port for SPCR (https://github.com/tianocore/edk2/commit/c76028a6ffbd8ce86edb0c27288d7e2d24a4c228)
30. DynamicTablesPkg: Add SSDT Serial port for DBG2 (https://github.com/tianocore/edk2/commit/313d2ec991039abe24727eced80d8ece1befbc93)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13410</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-16 11:51:23 +0000</bug_when>
    <thetext>Sami fixes it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2794</bug_id>
          
          <creation_ts>2020-06-11 10:31:52 +0000</creation_ts>
          <short_desc>Add Features/Intel/Debugging/Usb3DebugFeaturePkg/Library/Usb3StatusCodeHandlerLib</short_desc>
          <delta_ts>2023-06-02 05:22:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>DebugFeaturePkg</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>ming.tan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12849</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-11 10:31:52 +0000</bug_when>
    <thetext>In Features/Intel/Debugging/Usb3DebugFeaturePkg, add Library/, add Usb3StatusCodeHandlerLib, used for output status code through USB3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12850</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-11 10:32:52 +0000</bug_when>
    <thetext>I will submit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21633</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2023-06-02 05:22:21 +0000</bug_when>
    <thetext>A patch was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2795</bug_id>
          
          <creation_ts>2020-06-11 22:41:08 +0000</creation_ts>
          <short_desc>Usb3DebugFeaturePkg: Remove the prefix path of Debugging/</short_desc>
          <delta_ts>2020-06-28 02:58:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>DebugFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>ming.tan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12852</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-11 22:41:08 +0000</bug_when>
    <thetext>In Features/Intel/Debugging/Usb3DebugFeaturePkg, remove the prefix path of Debugging/ in the .inf and .dsc files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12853</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-11 22:42:03 +0000</bug_when>
    <thetext>I will submit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12964</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-28 02:58:44 +0000</bug_when>
    <thetext>The patch was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2164</bug_id>
          
          <creation_ts>2019-09-06 22:07:03 +0000</creation_ts>
          <short_desc>Use CmosAccessLib for CMOS access in SimicsOpenBoardPkg</short_desc>
          <delta_ts>2019-11-06 18:14:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>SimicsOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>prince.agyeman</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9492</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-06 22:07:03 +0000</bug_when>
    <thetext>The functionality in the file edk2-platforms\Platform\Intel\SimicsOpenBoardPkg\SimicsPei\Cmos.c should be replaced by CmosAccessLib in BoardModulePkg to remove code duplication.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9494</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-06 22:08:43 +0000</bug_when>
    <thetext>Ownership given to David.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9732</commentid>
    <comment_count>2</comment_count>
    <who name="">david.y.wei</who>
    <bug_when>2019-09-19 17:26:56 +0000</bug_when>
    <thetext>change owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10237</commentid>
    <comment_count>3</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-10-29 18:49:42 +0000</bug_when>
    <thetext>Patch sent to edk2 mailing list</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10347</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-06 18:14:06 +0000</bug_when>
    <thetext>Pushed in this commit - https://github.com/tianocore/edk2-platforms/commit/9f09baf62ba29c4122bfd8a9720e808cb76678f2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2788</bug_id>
          
          <creation_ts>2020-06-08 21:48:48 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg.dsc is missing Fsp22SecCoreS.inf</short_desc>
          <delta_ts>2020-06-18 21:45:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12815</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-06-08 21:48:48 +0000</bug_when>
    <thetext>DSC is incomplete according to the established CI policies (when they are applied).
Fsp22SecCoreS.inf needs to be added to the Components section for completeness.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12833</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-09 21:52:15 +0000</bug_when>
    <thetext>Chasel: can you check it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12913</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-06-18 21:45:04 +0000</bug_when>
    <thetext>SHA-1: 394e8e4bf586b4749620a48a23c816ee19f0e04a

* IntelFsp2Pkg: Add Fsp22SecCoreS.inf to Dsc.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2788

DSC is incomplete according to the established CI policies.
Fsp22SecCoreS.inf needs to be added to the Components section
for completeness.

Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Cc: Star Zeng &lt;star.zeng@intel.com&gt;
Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Sean Brogan &lt;sean.brogan@microsoft.com&gt;
Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2322</bug_id>
          
          <creation_ts>2019-11-01 14:46:10 +0000</creation_ts>
          <short_desc>Remove PurleyOpenBoardPkg</short_desc>
          <delta_ts>2019-11-05 16:33:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>PurleyOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10280</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-01 14:46:10 +0000</bug_when>
    <thetext>There is no plan from the current set of maintainers to maintain PurleyOpenBoardPkg moving forward. Simply leaving the code as unmaintained is undesirable for several reasons including presence of build issues, functional issues, and lack of consistency with other Intel platform/silicon code in design and usage. PurleyOpenBoardPkg will be broken in the short-term with planned changes in dependent packages.

It is suggested to remove the package for the next stable tag due to lack of recent testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10284</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-01 14:51:00 +0000</bug_when>
    <thetext>Work in progress.

No concerns were raised in the RFC sent to the mailing list over a week ago - https://edk2.groups.io/g/devel/message/49360.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10331</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-05 16:33:39 +0000</bug_when>
    <thetext>Change pushed in the following patch series - https://edk2.groups.io/g/devel/message/49843.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2392</bug_id>
          
          <creation_ts>2019-11-28 03:02:06 +0000</creation_ts>
          <short_desc>CpuDxe/MpInitLib wrongly assumes no switch BSP could happen in PEI phase</short_desc>
          <delta_ts>2020-12-24 11:35:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10573</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-11-28 03:02:06 +0000</bug_when>
    <thetext>MpInitLibInitialize() assumes BSP is 0:

  //
  // Don&apos;t pass BSP&apos;s TR to APs to avoid AP init failure.
  //
  VolatileRegisters.Tr = 0;
  CopyMem (&amp;CpuMpData-&gt;CpuData[0].VolatileRegisters, &amp;VolatileRegisters, sizeof (VolatileRegisters));
  //
  // Set BSP basic information
  //
  InitializeApData (CpuMpData, 0, 0, CpuMpData-&gt;Buffer + ApStackSize);


Later it gets the BSP index from PEI through CpuMpData hob:

    CpuMpData-&gt;BspNumber = OldCpuMpData-&gt;BspNumber;


The first piece of code wrongly assumes BSP is 0 when MpInitLibInitialize() is called, which may not be correct.
The second piece of code doesn&apos;t have such an assumption, which is good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10714</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-12-16 22:07:40 +0000</bug_when>
    <thetext>Assign to Eric for investigation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10894</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-01-15 01:11:21 +0000</bug_when>
    <thetext>Send code review https://edk2.groups.io/g/devel/topic/patch/69712223?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,69712223</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14657</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-12-24 11:31:47 +0000</bug_when>
    <thetext>Added below code in CpuMpPei.c to switch BSP from 0 to 1 after the MpServices PPI is installed.

  Status = MpInitLibSwitchBSP (1, TRUE);
  DEBUG ((DEBUG_ERROR, &quot;Switch BSP to 1: %r\n&quot;, Status));
  {
    UINTN My;
    Status = MpInitLibWhoAmI (&amp;My);
    DEBUG ((DEBUG_ERROR, &quot;BSP is: %d, %r\n&quot;, My, Status));
  }
  Status = MpInitLibEnableDisableAP (0, FALSE, NULL);
  DEBUG ((DEBUG_ERROR, &quot;Disable AP 0: %r\n&quot;, Status));
  
  Status = MpInitLibEnableDisableAP (0, TRUE, NULL);
  DEBUG ((DEBUG_ERROR, &quot;Enable AP 0: %r\n&quot;, Status));


However, system booted to shell without any issue.

So I thought more about why CpuMpData-&gt;CpuData[0].VolatileRegisters is used almost everywhere but no malfunction was seen.
VolatileRegisters serves for 2 purposes:
1. setup initial AP volatile registers when waken up first time in PEI or DXE.
   BSP sets up CpuData[0].VolatileRegisters and all APs restore from it.
   There is a corner case when BSP is NOT CPU 0 and CPU 0 (AP) wakes up very fast, CPU 0 saves its volatile registers to CpuData[0].VolatileRegisters. It causes all other APs restore from the value updated by CPU 0.
   However, using CRx, DRx, GDTR, IDTR from CPU 0 (AP) won&apos;t cause any issue.

2. setup initial AP volatile registers when enabled from disabled state.
   When BSP is NOT CPU 0 and EnableDisableAP (3, TRUE) is called, CPU 3 restores from CPU 0&apos;s volatile registers.
   However, using CRx, DRx, GDTR, IDTR from CPU 0 (AP) won&apos;t cause any issue.

2. restore the previous volatile registers when waken up from halt state.
   No issue here because the save/restore both use the CpuMpData-&gt;CpuData[ProcessorNumber].VolatileRegisters

So, the conclusion is the bug exists but have no impact.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14658</commentid>
    <comment_count>4</comment_count>
      <attachid>626</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-12-24 11:33:03 +0000</bug_when>
    <thetext>Created attachment 626
Fix</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14659</commentid>
    <comment_count>5</comment_count>
      <attachid>627</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-12-24 11:34:00 +0000</bug_when>
    <thetext>Created attachment 627
Original</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14660</commentid>
    <comment_count>6</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-12-24 11:35:17 +0000</bug_when>
    <thetext>Comparing attachments &quot;Original&quot; and &quot;Fix&quot; can get the fix.
Put it here in case we figure out fixing the issue is worthy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14661</commentid>
    <comment_count>7</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-12-24 11:35:42 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>626</attachid>
            <date>2020-12-24 11:33:03 +0000</date>
            <delta_ts>2020-12-24 11:33:03 +0000</delta_ts>
            <desc>Fix</desc>
            <filename>MpLib - Fix.c</filename>
            <type>text/plain</type>
            <size>91534</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>627</attachid>
            <date>2020-12-24 11:34:00 +0000</date>
            <delta_ts>2020-12-24 11:34:00 +0000</delta_ts>
            <desc>Original</desc>
            <filename>MpLib.c</filename>
            <type>text/plain</type>
            <size>91415</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2323</bug_id>
          
          <creation_ts>2019-11-01 14:47:15 +0000</creation_ts>
          <short_desc>Remove PurleyRcPkg</short_desc>
          <delta_ts>2019-11-05 16:32:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>PurleyRcPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10281</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-01 14:47:15 +0000</bug_when>
    <thetext>There is no plan from the current set of maintainers to maintain PurleyRcPkg moving forward. Simply leaving the code as unmaintained is undesirable for several reasons including presence of build issues, functional issues, and lack of consistency with other Intel platform/silicon code in design and usage.

It is suggested to remove the package for the next stable tag due to lack of recent testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10285</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-01 14:51:12 +0000</bug_when>
    <thetext>Work in progress.

No concerns were raised in the RFC sent to the mailing list over a week ago - https://edk2.groups.io/g/devel/message/49360.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10330</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-05 16:32:06 +0000</bug_when>
    <thetext>Change pushed in the following commit - https://github.com/tianocore/edk2-platforms/commit/019230e9badeb0f34f92111fc56f4c8bd82a20c6.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2417</bug_id>
          
          <creation_ts>2019-12-12 02:01:34 +0000</creation_ts>
          <short_desc>Add a Performance Impact Section to TemplateFeaturePkg/Readme.md</short_desc>
          <delta_ts>2020-01-31 18:26:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10684</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-12-12 02:01:34 +0000</bug_when>
    <thetext>Note: This is temporarily submitted under the &quot;AdvancedFeaturePkg&quot; component since a component for &quot;TemplateFeaturePkg&quot; does not currently exist.

The TemplateFeaturePkg provides a template to use as a starting point for a new advanced feature. Performance impact is an important consideration when integrating a feature so a section should be added in FeatureTemplatePkg/Readme.md to explain the expected performance impact. The impact is not necessarily meant to be exact but a general expectation should be provided so the feature integrator can factor the impact into their overall boot time and verify the feature roughly meets expectations once enabled.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10685</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-12-12 02:02:27 +0000</bug_when>
    <thetext>Work is in progress to update the template Readme.md.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10988</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-28 02:02:26 +0000</bug_when>
    <thetext>V1 patch sent to the mailing list - https://edk2.groups.io/g/devel/message/53500</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11041</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-31 18:26:51 +0000</bug_when>
    <thetext>Change pushed - https://github.com/tianocore/edk2-platforms/commit/9cc828d9d409b855b57b5d0f94fb1d89c157cc08</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2106</bug_id>
          
          <creation_ts>2019-08-21 22:05:13 +0000</creation_ts>
          <short_desc>Need move tempfile.NamedTemporaryFile() block operation outside of FileLock</short_desc>
          <delta_ts>2022-02-10 21:56:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9136</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-21 22:05:13 +0000</bug_when>
    <thetext>Current CopyFileOnChange() and SaveFileOnChange() in
BaseTools\Source\Python\Common\Misc.py use the FileLock to synchronize the file operations. Within the FileLock, tempfile.NamedTemporaryFile() are used to copy the src to a temp file in the dst same folder firstly, below show these code. We found the temp file copy might fails for some OS reason, e.g. long file path error. And the build will enter deadlock state within the FileLock and hang forever if the temp file copy fail happen. The build deadlock state doesn&apos;t have any error message and confuse user. It might also causes the useless waiting and timeout in CI build system. It&apos;s better to let build immediately stop if failure happen. 
Because the tempfile.NamedTemporaryFile() API can guarantee the temp file name is always unique in one build and the temp file copy operation will not race with other process, so it is safe to not use the FileLock to synchronize the temp file operation. We&apos;d better to move tempfile.NamedTemporaryFile() block code outside of the FileLock.



def SaveFileOnChange(File, Content, IsBinaryFile=True, FileLock=None):
    ...
    if FileLock:
        FileLock.acquire()
        ... 
        with tempfile.NamedTemporaryFile(OpenMode, dir=os.path.dirname(File), delete=False) as tf:
            tf.write(Content)
            tempname = tf.name


def CopyFileOnChange(SrcFile, Dst, FileLock=None):
    ...
    if FileLock:
        FileLock.acquire()
    ...
    with tempfile.NamedTemporaryFile(dir=DirName, delete=False) as tf:
        CopyLong(SrcFile, tf.name)
        tempname = tf.name</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9137</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-21 22:06:15 +0000</bug_when>
    <thetext>Confirm and take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18325</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2022-02-10 21:56:33 +0000</bug_when>
    <thetext>Already fixed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2375</bug_id>
          
          <creation_ts>2019-11-22 18:51:15 +0000</creation_ts>
          <short_desc>GalagoPro3 VS2017 Build is Broken Due to Multiple Definitions for a Symbol</short_desc>
          <delta_ts>2019-12-03 18:03:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jerecox</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10523</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-22 18:51:15 +0000</bug_when>
    <thetext>The GalagoPro3 board build fails on VS2017 due to multiple definitions of a symbol being provided to the linker. In the case provided below, the ResetSystem () function is defined in both KabylakeSiliconPkg/Pch/Library/PeiResetSystemLib/PeiResetSystemLib.inf and KabylakeSiliconPkg/Pch/Library/PeiPchResetLib/PeiPchResetLib.inf. Both of these libraries can potentially be linked against a single module as they are instances of two different library classes - ResetSystemLib and PchResetLib respectively. They are currently both linked against FspmWrapperPeim resulting in the build failure. This issue does not reproduce in VS2015.

Build command to reproduce - execute the following command from edk2-platforms/Platform/Intel: &quot;py -3 build_bios.py -p GalagoPro3 -t VS2017&quot;

Building ... d:\source\git\workspace\edk2-platforms\Platform\Intel\MinPlatformPkg\PlatformInit\SiliconPolicyPei\SiliconPolicyPeiPreMem.inf [IA32]
        &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\link.exe&quot; /OUT:d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\IntelFsp2WrapperPkg\FspmWrapperPeim\FspmWrapperPeim\DEBUG\FspmWrapperPeim.dll /NOLOGO /NODEFAULTLIB /IGNORE:4001 /OPT:REF /OPT:ICF=10 /MAP /ALIGN:32 /SECTION:.xdata,D /SECTION:.pdata,D /MACHINE:X86 /LTCG /DLL /ENTRY:_ModuleEntryPoint /SUBSYSTEM:EFI_BOOT_SERVICE_DRIVER /SAFESEH:NO /BASE:0 /DRIVER /DEBUG /WHOLEARCHIVE  @d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\IntelFsp2WrapperPkg\FspmWrapperPeim\FspmWrapperPeim\OUTPUT\static_library_files.lst
        &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\link.exe&quot; /OUT:d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\IntelFsp2WrapperPkg\FspsWrapperPeim\FspsWrapperPeim\DEBUG\FspsWrapperPeim.dll /NOLOGO /NODEFAULTLIB /IGNORE:4001 /OPT:REF /OPT:ICF=10 /MAP /ALIGN:32 /SECTION:.xdata,D /SECTION:.pdata,D /MACHINE:X86 /LTCG /DLL /ENTRY:_ModuleEntryPoint /SUBSYSTEM:EFI_BOOT_SERVICE_DRIVER /SAFESEH:NO /BASE:0 /DRIVER /DEBUG /WHOLEARCHIVE  @d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\IntelFsp2WrapperPkg\FspsWrapperPeim\FspsWrapperPeim\OUTPUT\static_library_files.lst
        &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\link.exe&quot; /OUT:d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\MinPlatformPkg\PlatformInit\SiliconPolicyPei\SiliconPolicyPeiPostMem\DEBUG\SiliconPolicyPeiPostMem.dll /NOLOGO /NODEFAULTLIB /IGNORE:4001 /OPT:REF /OPT:ICF=10 /MAP /ALIGN:32 /SECTION:.xdata,D /SECTION:.pdata,D /MACHINE:X86 /LTCG /DLL /ENTRY:_ModuleEntryPoint /SUBSYSTEM:EFI_BOOT_SERVICE_DRIVER /SAFESEH:NO /BASE:0 /DRIVER /DEBUG /WHOLEARCHIVE  @d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\MinPlatformPkg\PlatformInit\SiliconPolicyPei\SiliconPolicyPeiPostMem\OUTPUT\static_library_files.lst
        &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\link.exe&quot; /OUT:d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\UefiCpuPkg\SecCore\SecCore\DEBUG\SecCore.dll /NOLOGO /NODEFAULTLIB /IGNORE:4001 /OPT:REF /OPT:ICF=10 /MAP /ALIGN:32 /SECTION:.xdata,D /SECTION:.pdata,D /MACHINE:X86 /LTCG /DLL /ENTRY:_ModuleEntryPoint /SUBSYSTEM:EFI_BOOT_SERVICE_DRIVER /SAFESEH:NO /BASE:0 /DRIVER /DEBUG /WHOLEARCHIVE  @d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\UefiCpuPkg\SecCore\SecCore\OUTPUT\static_library_files.lst
        &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\link.exe&quot; /OUT:d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\MinPlatformPkg\PlatformInit\SiliconPolicyPei\SiliconPolicyPeiPreMem\DEBUG\SiliconPolicyPeiPreMem.dll /NOLOGO /NODEFAULTLIB /IGNORE:4001 /OPT:REF /OPT:ICF=10 /MAP /ALIGN:32 /SECTION:.xdata,D /SECTION:.pdata,D /MACHINE:X86 /LTCG /DLL /ENTRY:_ModuleEntryPoint /SUBSYSTEM:EFI_BOOT_SERVICE_DRIVER /SAFESEH:NO /BASE:0 /DRIVER /DEBUG /WHOLEARCHIVE  @d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\MinPlatformPkg\PlatformInit\SiliconPolicyPei\SiliconPolicyPeiPreMem\OUTPUT\static_library_files.lst
PeiResetSystemLib.lib(PeiResetSystemLib.obj) : error LNK2005: _ResetSystem already defined in PeiResetSystemLib.lib(PeiResetSystemLib.obj)
PeiResetSystemLib.lib(PeiResetSystemLib.obj) : error LNK2005: _ResetSystem already defined in PeiResetSystemLib.lib(PeiResetSystemLib.obj)
PeiResetSystemLib.lib(PeiResetSystemLib.obj) : error LNK2005: _ResetSystem already defined in PeiResetSystemLib.lib(PeiResetSystemLib.obj)
PeiResetSystemLib.lib(PeiResetSystemLib.obj) : error LNK2005: _ResetSystem already defined in PeiResetSystemLib.lib(PeiResetSystemLib.obj)
d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\IntelFsp2WrapperPkg\FspmWrapperPeim\FspmWrapperPeim\DEBUG\FspmWrapperPeim.dll : fatal error LNK1169: one or more multiply defined symbols found
PeiResetSystemLib.lib(PeiResetSystemLib.obj) : error LNK2005: _ResetSystem already defined in PeiResetSystemLib.lib(PeiResetSystemLib.obj)
d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\IntelFsp2WrapperPkg\FspsWrapperPeim\FspsWrapperPeim\DEBUG\FspsWrapperPeim.dll : fatal error LNK1169: one or more multiply defined symbols found
NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\link.exe&quot;&apos; : return code &apos;0x491&apos;
Stop.


build.py...
 : error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\IntelFsp2WrapperPkg\FspmWrapperPeim\FspmWrapperPeim]


build.py...
 : error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\IntelFsp2WrapperPkg\FspsWrapperPeim\FspsWrapperPeim]


build.py...
 : error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\MinPlatformPkg\PlatformInit\SiliconPolicyPei\SiliconPolicyPeiPostMem]


build.py...
 : error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\UefiCpuPkg\SecCore\SecCore]


build.py...
 : error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\source\git\workspace\Build\KabylakeOpenBoardPkg\GalagoPro3\DEBUG_VS2017\IA32\MinPlatformPkg\PlatformInit\SiliconPolicyPei\SiliconPolicyPeiPreMem]


build.py...
 : error F002: Failed to build module
        d:\source\git\workspace\edk2\IntelFsp2WrapperPkg\FspmWrapperPeim\FspmWrapperPeim.inf [IA32, VS2017, DEBUG]

- Failed -
Build end time: 15:02:05, Nov.22 2019
Build total time: 00:00:31

 The EDKII BIOS Build has failed!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10525</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-22 18:53:30 +0000</bug_when>
    <thetext>Issue is confirmed. I expect work to resolve it can begin in the week of Nov. 25th.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10554</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-26 22:35:23 +0000</bug_when>
    <thetext>V1 patch series with fix on the edk2 mailing list: https://edk2.groups.io/g/devel/message/51319</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10597</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-12-02 22:40:40 +0000</bug_when>
    <thetext>Fix pushed in the following commits:
1. 75245eab369d9da20eb96e961bed710ba47fdcf2
2. 4906d9ba4eefe7f3bf0c2cf116e29a7c7270dbdc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10603</commentid>
    <comment_count>4</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2019-12-03 18:03:54 +0000</bug_when>
    <thetext>For me, this fixed support for both VS2017 and VS2019.
Thank you!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2314</bug_id>
          
          <creation_ts>2019-10-29 12:27:30 +0000</creation_ts>
          <short_desc>Move MTRR configuration in MinPlatformPkg to a library class</short_desc>
          <delta_ts>2019-11-12 01:38:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10231</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-29 12:27:30 +0000</bug_when>
    <thetext>The MTRR configuration applied in MinPlatformPkg is currently done in:

\Platform\Intel\MinPlatformPkg\PlatformInit\PlatformInitPei\PlatformInitPreMem.c

MemoryDiscoveredPpiNotifyCallback (
  IN CONST EFI_PEI_SERVICES     **PeiServices,
  IN EFI_PEI_NOTIFY_DESCRIPTOR  *NotifyDescriptor,
  IN VOID                       *Ppi
  )
{
...
  SetCacheMtrr ();
...

-and-

\Platform\Intel\MinPlatformPkg\PlatformInit\PlatformInitPei\PlatformInitPostMem.c

PlatformInitEndOfPei (
  IN CONST EFI_PEI_SERVICES     **PeiServices,
  IN EFI_PEI_NOTIFY_DESCRIPTOR  *NotifyDescriptor,
  IN VOID                       *Ppi
  )
{
...
  Status = SetCacheMtrrAfterEndOfPei ();
  ASSERT_EFI_ERROR (Status);

The MTRRs may be redundantly or incorrectly configured. It is recommended to move this functionality to a library class that with a NULL library by default. The board package may provide its own library implementation. MinPlatformPkg should contain the library class header (API) and the NULL library class instance. If a board package uses Intel FSP, it can likely use the NULL library by default and rely upon FSP MTRR configuration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10232</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-29 12:29:17 +0000</bug_when>
    <thetext>This is considered relatively important to avoid unnecessarily settings MTRRs and introducing performance penalties in doing so.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10340</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-11-06 09:43:35 +0000</bug_when>
    <thetext>
SHA-1: 93d5bd4b90c7844c2e70fcb44ed1ae214dd19d73

* MinPlatformPkg: Add SetCacheMtrrLib library class.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2314

MinPlatformPkg PlatformInit modules to consume
SetCacheMtrrLib.

Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Cc: Liming Gao &lt;liming.gao@intel.com&gt;
Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Reviewed-by: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;



SHA-1: 75148238e18bdeee23562c5ad3cb56b5049d3295

* SimicsOpenBoardPkg/BoardX58Ich10: Add SetCacheMtrrLib library class.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2314

Include SetCacheMtrrLib from MinPlatformPkg.

Cc: Wei David Y &lt;david.y.wei@intel.com&gt;
Cc: Agyeman Prince &lt;prince.agyeman@intel.com&gt;
Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Prince Agyeman &lt;prince.agyeman@intel.com&gt;



SHA-1: 60b462821dd4a3df1ca5d0735b8327eb4a19b57d

* WhiskeylakeOpenBoardPkg: Add SetCacheMtrrLib library class.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2314

Whiskeylake board relying on FSP to configure MTRRs so
it can include SetCacheMtrrLibNull.

Test: internal platform can boot with FSP API modes.

Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Reviewed-by: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;



SHA-1: f29287c8e21401fbfb5018bf8e3333b4bdf0ed25

* KabylakeOpenBoardPkg: Add SetCacheMtrrLib library class.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2314

Kabylake boards are relying on FSP to configure MTRRs so
they can include SetCacheMtrrLibNull.

Test: internal platform can boot with FSP API and Dispatch modes.

Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Cc: Liming Gao &lt;liming.gao@intel.com&gt;
Cc: Jeremy Soller &lt;jeremy@system76.com&gt;
Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Reviewed-by: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;


SHA-1: 4e62a35ebfd50f3b44d4e6e436b104b0102a8f83

* MinPlatformPkg: Add SetCacheMtrrLib library class.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2314

MinPlatformPkg should contain the library class header (API)
and the NULL library class instance.

Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Cc: Liming Gao &lt;liming.gao@intel.com&gt;
Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Reviewed-by: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10379</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-11-10 08:25:57 +0000</bug_when>
    <thetext>another patch to the missing part:
commit 7f6d96b572b5c5c80075a9b8420145335dc87df0 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Nov 8 10:10:11 2019 +0800

    MinPlatformPkg: Add SetCacheMtrrLib class to dsc.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2314

    Added SetCacheMtrrLib class to MinPlatformPkg.dsc.

    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;
    Reviewed-by: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10399</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-11-12 01:38:25 +0000</bug_when>
    <thetext>fixed typo issue in previous patch:

commit 24d5064f962e22a5fd0305fac0336329df5cbd3f (HEAD -&gt; master, origin/master, origin/HEAD, SetCacheLibInMin)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue Nov 12 11:22:29 2019 +0800

    MinPlatformPkg: Add SetCacheMtrrLib class to dsc.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2314

    Fixed typo issue in MinPlatformPkg.dsc caused by previous
    commit.

    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2924</bug_id>
          
          <creation_ts>2020-08-24 08:21:40 +0000</creation_ts>
          <short_desc>HostUnitTestDscCompleteCheck: return value typo under DscPath file check</short_desc>
          <delta_ts>2023-01-03 04:11:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>trivial</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Sean Brogan">sean.brogan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13500</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-24 08:21:40 +0000</bug_when>
    <thetext>In the file

  .pytool/Plugin/HostUnitTestDscCompleteCheck/HostUnitTestDscCompleteCheck.py

we have the following snippet (output from &quot;git blame -s&quot;):

&gt;| 61364ab927745  70)         if abs_dsc_path is None or wsr_dsc_path == &quot;&quot; or not os.path.isfile(abs_dsc_path):
&gt;| 61364ab927745  71)             tc.SetSkipped()
&gt;| 61364ab927745  72)             tc.LogStdError(&quot;Package Host Unit Test Dsc not found&quot;)
&gt;| 61364ab927745  73)             return 0

The return value 0 is a typo; we should be returning (-1).

The consequence is that, while the HostUnitTestDscCompleteCheck plugin
is correctly skipped, the user-visible log does not state that
HostUnitTestDscCompleteCheck was skipped. Instead, the plugin run is
reported as successful.

This affects ArmVirtPkg, DynamicTablesPkg, EmulatorPkg, OvmfPkg -- as of
commit 5a6d764e1d07 --, because the CI YAML files in those packages set
the &quot;HostUnitTestDscCompleteCheck.DscPath&quot; property to the empty string:

&gt;| ArmVirtPkg/ArmVirtPkg.ci.yaml:    &quot;HostUnitTestDscCompleteCheck&quot;: {
&gt;| ArmVirtPkg/ArmVirtPkg.ci.yaml-        &quot;IgnoreInf&quot;: [&quot;&quot;],
&gt;| ArmVirtPkg/ArmVirtPkg.ci.yaml-        &quot;DscPath&quot;: &quot;&quot; # Don&apos;t support this test
&gt;| --
&gt;| DynamicTablesPkg/DynamicTablesPkg.ci.yaml:    &quot;HostUnitTestDscCompleteCheck&quot;: {
&gt;| DynamicTablesPkg/DynamicTablesPkg.ci.yaml-        &quot;IgnoreInf&quot;: [&quot;&quot;],
&gt;| DynamicTablesPkg/DynamicTablesPkg.ci.yaml-        &quot;DscPath&quot;: &quot;&quot; # Don&apos;t support this test
&gt;| --
&gt;| EmulatorPkg/EmulatorPkg.ci.yaml:    &quot;HostUnitTestDscCompleteCheck&quot;: {
&gt;| EmulatorPkg/EmulatorPkg.ci.yaml-        &quot;IgnoreInf&quot;: [&quot;&quot;],
&gt;| EmulatorPkg/EmulatorPkg.ci.yaml-        &quot;DscPath&quot;: &quot;&quot; # Don&apos;t support this test
&gt;| --
&gt;| OvmfPkg/OvmfPkg.ci.yaml:    &quot;HostUnitTestDscCompleteCheck&quot;: {
&gt;| OvmfPkg/OvmfPkg.ci.yaml-        &quot;IgnoreInf&quot;: [&quot;&quot;],
&gt;| OvmfPkg/OvmfPkg.ci.yaml-        &quot;DscPath&quot;: &quot;&quot; # Don&apos;t support this test

Note that &quot;Build/TestSuites.xml&quot; confirms that
&quot;HostUnitTestDscCompleteCheck&quot; was skipped:

&gt;| &lt;testcase
&gt;|  classname=&quot;Edk2CiBuild.Edk2.OvmfPkg.HostUnitTestDscCompleteCheck&quot;
&gt;|  name=&quot;Check the Edk2CiBuild.Edk2.OvmfPkg Host Unit Test DSC for a being complete&quot;
&gt;|  time=&quot;0.00020742416381835938&quot;&gt;
&gt;|     &lt;skipped type=&quot;skipped&quot;/&gt;
&gt;|     &lt;system-out/&gt;
&gt;|     &lt;system-err&gt;Package Host Unit Test Dsc not found&lt;/system-err&gt;
&gt;| &lt;/testcase&gt;

(see the &lt;system-err&gt; element containing the message from line 72), but
the user-visible log (&quot;Build/CI_BUILDLOG.txt&quot;) reports that the plugin
succeeded:

&gt;| PROGRESS - --Running OvmfPkg: Host Unit Test Dsc Complete Check Test NO-TARGET --
&gt;| PROGRESS - ---&gt;Test Success: Host Unit Test Dsc Complete Check Test NO-TARGET</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13501</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-24 08:40:38 +0000</bug_when>
    <thetext>For reference, HostUnitTestCompilerPlugin contains the same check, and when it fails, it returns -1:

$ git blame -s \
    .pytool/Plugin/HostUnitTestCompilerPlugin/HostUnitTestCompilerPlugin.py

&gt;| 61364ab927745 100)         if AP is None or AP_Path is None or not os.path.isfile(APDSC):
&gt;| 61364ab927745 101)             tc.SetSkipped()
&gt;| 61364ab927745 102)             tc.LogStdError(&quot;Package HostBasedUnitTest Dsc not found.&quot;)
&gt;| 61364ab927745 103)             return -1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13518</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 21:39:12 +0000</bug_when>
    <thetext>@Sean, please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20392</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:11:01 +0000</bug_when>
    <thetext>Yep, nobody cared here either.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2457</bug_id>
          
          <creation_ts>2020-01-10 16:26:02 +0000</creation_ts>
          <short_desc>Exception processing SetVariable when variable store is full.</short_desc>
          <delta_ts>2020-01-17 12:25:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.a.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10854</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2020-01-10 16:26:02 +0000</bug_when>
    <thetext>In the runtime cache, when VarStore is full, RecordVarErrorFlag attempt to set an error indicator.  In this code, it calls SynchronizeRuntimeVariableCache.  Parameter 2 is an OFFSET.  However, the call from line 385 passes a full address as the OFFSET.  This causes the two addresses to be added and reference unavailable memory.  This should be trapped by a proper SMM - and in our case, did cause an exception.

Our current patch:
index b8dbf4da01..fe6c082e5a 100644
--- i/MdeModulePkg/Universal/Variable/RuntimeDxe/Variable.c
+++ w/MdeModulePkg/Universal/Variable/RuntimeDxe/Variable.c
@@ -384,7 +384,7 @@ RecordVarErrorFlag (
       *VarErrFlag = TempFlag;
       Status =  SynchronizeRuntimeVariableCache (
                   &amp;mVariableModuleGlobal-&gt;VariableGlobal.VariableRuntimeCacheContext.VariableRuntimeNvCache,
-                  (UINTN) VarErrFlag - (UINTN) mNvVariableCache + (UINTN) mVariableModuleGlobal-&gt;VariableGlobal.NonVolatileVariableBase,
+                  (UINTN) VarErrFlag - (UINTN) mNvVariableCache,     // MU_CHANGE
                   sizeof (TempFlag)
                   );
       ASSERT_EFI_ERROR (Status);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10871</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-13 13:43:10 +0000</bug_when>
    <thetext>The code in question appears to originate from commit aab3b9b9a1e5 (&quot;MdeModulePkg/Variable: Add RT GetVariable() cache support&quot;, 2019-11-05).

Does the symptom affect platforms that inherit the default value of PcdEnableVariableRuntimeCache, namely FALSE?

SynchronizeRuntimeVariableCache() returns EFI_SUCCESS (without doing anything) if:

  (VariableRuntimeCache != NULL) &amp;&amp; (VariableRuntimeCache-&gt;Store == NULL)

I feel that this condition should hold when (PcdEnableVariableRuntimeCache==FALSE), but I&apos;m not 100% certain. The code says:

    // The runtime cache may not be active or allocated yet.
    // In either case, return EFI_SUCCESS instead of EFI_NOT_AVAILABLE_YET.

In this case, the Offset parameter would be still wrong, of course, but it would be ignored.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10873</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-13 13:56:35 +0000</bug_when>
    <thetext>Laszlo, this will not impact the variable driver if PcdEnableVariableRuntimeCache is FALSE. I have also reproduced and confirmed the fix for the issue. I will submit this to the mailing list today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10875</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-13 18:21:19 +0000</bug_when>
    <thetext>V1 patch on mailing list: https://edk2.groups.io/g/devel/message/53203</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10876</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2020-01-13 18:26:39 +0000</bug_when>
    <thetext>If you are changing parameter two to an offset of 0 with a total size, that makes all 5 calls to SynchronizeRuntimeVariableCache to a 0 offset.  Is that parameter necessary then?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10879</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-13 18:53:51 +0000</bug_when>
    <thetext>It was originally provided to allow optimization and flexibility for the memory copy. I think it could be considered for removal in a future change since usage has been trending toward copying the whole store.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10884</commentid>
    <comment_count>6</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-01-14 02:05:14 +0000</bug_when>
    <thetext>I&apos;m not sure sync-ing whole variable cache memory is an efficient operation.
What about using mVariableModuleGlobal-&gt;NonVolatileLastVariableOffset
as Length parameter?

       Status =  SynchronizeRuntimeVariableCache (
                   &amp;mVariableModuleGlobal-&gt;VariableGlobal.VariableRuntimeCacheContext.VariableRuntimeNvCache,
                   0,
                   mVariableModuleGlobal-&gt;NonVolatileLastVariableOffset
                   );

(See also my review comment at https://edk2.groups.io/g/devel/message/53208)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10889</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-14 03:16:12 +0000</bug_when>
    <thetext>(In reply to michael.a.kubacki from comment #2)
&gt; Laszlo, this will not impact the variable driver if
&gt; PcdEnableVariableRuntimeCache is FALSE. I have also reproduced and confirmed
&gt; the fix for the issue. I will submit this to the mailing list today.

Thank you for confirming!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10941</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-17 04:11:40 +0000</bug_when>
    <thetext>Fixed in commit 302eb57b18d9, apparently.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10943</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-17 12:25:53 +0000</bug_when>
    <thetext>The issue is resolved 302eb57b18d9.

Jian and I continued the code review conversation on the mailing list. Specifically, reference https://edk2.groups.io/g/devel/message/53259 and https://edk2.groups.io/g/devel/message/53260 for more info.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2103</bug_id>
          
          <creation_ts>2019-08-21 12:15:00 +0000</creation_ts>
          <short_desc>CopyFileOnChange() and SaveFileOnChange() should support Long FilePath in windows</short_desc>
          <delta_ts>2019-08-29 15:18:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9125</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-21 12:15:00 +0000</bug_when>
    <thetext>Current CopyFileOnChange() and SaveFileOnChange() in BaseTools\Source\Python\Common\Misc.py don&apos;t use the dedicated long file path API to handle the file path strings and cannot support the long file path copy and save in windows. This issue cause the build cache restore cannot work in windows if the root cache folder path is long. Need to enhance the CopyFileOnChange() and SaveFileOnChange() to support the long file path copy and save.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9126</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-21 12:15:23 +0000</bug_when>
    <thetext>Confirm and take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9274</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 17:43:20 +0000</bug_when>
    <thetext>Has this been fixed in commit 6dd9aa40193cc905cda5f97d07e30ffbd5299439?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9331</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:31:04 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; Has this been fixed in commit 6dd9aa40193cc905cda5f97d07e30ffbd5299439?

To clarify, the question is for Steven. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9351</commentid>
    <comment_count>4</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-27 21:14:40 +0000</bug_when>
    <thetext>Yes. This issue is fixed at 6dd9aa40193cc905cda5f97d07e30ffbd5299439.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2809</bug_id>
          
          <creation_ts>2020-06-16 13:18:39 +0000</creation_ts>
          <short_desc>DXE_ASSERT when UEFI Driver creates an event for EVT_SIGNAL_EXIT_BOOT_SERVICES with TPL_NOTIFY</short_desc>
          <delta_ts>2020-07-02 09:28:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Tri Do">tri.m.do</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>raymond.higgs</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>PcAtChipsetPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12892</commentid>
    <comment_count>0</comment_count>
    <who name="Tri Do">tri.m.do</who>
    <bug_when>2020-06-16 13:18:39 +0000</bug_when>
    <thetext>An adapter card made a call gRT-&gt;GetTime which tries to raise TPL to EFI_CALLBACK and then the ASSERT.

The call flow in EDK2 is like below:
PcRtcEfiGetTime (PcAtChipsetPkg/PcatRealTimeClockRuntimeDxe/PcRtcEntry.c)
--&gt; PcRtcGetTime (PcAtChipsetPkg/PcatRealTimeClockRuntimeDxe/PcRtc.c)
--&gt; EfiAcquireLock (MdePkg/Library/UefiLib/UefiLib.c) with &amp;Global-&gt;RtcLock as parameter
  --&gt; gBS-&gt;RaiseTPL (Lock-&gt;Tpl);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12899</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-16 18:55:25 +0000</bug_when>
    <thetext>All events should use the lowest possible TPL level.

Can the Exit Boot Services event use TPL_CALLBACK?

Also, the work performed by a UEFI Driver in an Exit Boot Services event
should be as simple as possible.

The following section of the UEFI Driver Writer&apos;s Guide describes the general guidelines for an Exit Boot Services event.

https://edk2-docs.gitbook.io/edk-ii-uefi-driver-writer-s-guide/7_driver_entry_point/77_adding_the_exit_boot_services_feature

In addition, the following section of the UEFI Driver Writer&apos;s Guide
describes what a Network adapter should do in an Exit Boot Services
event, which should be limited to disabling DMA from the network
controller.

https://edk2-docs.gitbook.io/edk-ii-uefi-driver-writer-s-guide/25_network_driver_design_guidelines/252_nii_protocol_and_undi_implementations/2521_exit_boot_services_event

The use of the UEFI Runtime Service GetTime() that calls PcRtcGetTime()
is not an action that would be expected in an Exit Boot Services event.
A UEFI Driver that needs to disable DMA, typically does a few register
accesses to disable DMA.  Any context needed to disable DMA is collected
in the driver entry point or in the Driver Binding Start() function to
remove the need for the Exit Boot Services event to call complex services.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12912</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Higgs">raymond.higgs</who>
    <bug_when>2020-06-18 16:30:12 +0000</bug_when>
    <thetext>Hi Michael,

I appreciate the documentation links.  However, I do not see a programming restriction for calling GetTime() from an EXIT_BOOT_SERVICES callback in the UEFI spec.  Do you see a restriction in the UEFI spec?  This code works on other BIOS implementations and seems to be a bug in EDK2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12915</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-18 22:38:09 +0000</bug_when>
    <thetext>The UEFI Spec states that time services must be called at &lt;= TPL_CALLBACK.

Section 7.1 Table 23.

So an ExitBootServices event at TPL_NOTIFY can not use GetTime().  An ExitBootServices event at TPL_CALLBACK can use GetTime().

The recommendation is to keep ExitBootServices events as simple as possible, so I would not recommend use of any UEFI Boot Services or Runtime Services from a UEFI Driver&apos;s ExitBootServices event.  The main task that needs to be performed is usually just to disable DMA.

These are recommendations that will maximize the compatibility of a UEFI Driver so it can work on the widest number of UEFI compatible systems.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12923</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Higgs">raymond.higgs</who>
    <bug_when>2020-06-19 11:45:34 +0000</bug_when>
    <thetext>Thanks Michael.  We overlooked that table.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12990</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-30 22:08:23 +0000</bug_when>
    <thetext>Can we close this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13024</commentid>
    <comment_count>6</comment_count>
    <who name="Ray Higgs">raymond.higgs</who>
    <bug_when>2020-07-02 02:16:43 +0000</bug_when>
    <thetext>Yes, this can be closed.  Thanks for the details.  We&apos;re changing our callback.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13032</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-02 09:28:06 +0000</bug_when>
    <thetext>Closing accordingly. Thanks!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2975</bug_id>
          
          <creation_ts>2020-09-18 13:42:01 +0000</creation_ts>
          <short_desc>BootServices\ImageServices Test Failing</short_desc>
          <delta_ts>2020-11-10 20:53:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2650</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Karunakaran sagadevan">karunakaran.sagadevan</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13711</commentid>
    <comment_count>0</comment_count>
    <who name="Karunakaran sagadevan">karunakaran.sagadevan</who>
    <bug_when>2020-09-18 13:42:01 +0000</bug_when>
    <thetext>The fail items guid list as below

gImageBBTestFunctionAssertionGuid007

gImageBBTestFunctionAssertionGuid147





Index               Title

5.1.4.1.10        BS.LoadImage - LoadImage() loads image from memory.

5.1.4.1.23        BS.LoadImage - LoadImage() load invalid Application/BsDriver/RuntimeDriver image from memory, return code should be EFI_UNSUPPORTED

    

Runtime Information

t:\sct_workspace\edk2\SctPkg\TestCase\UEFI\EFI\BootServices\ImageServices\BlackBoxTest\ImageBBTestFunction.c:850:Status - Access Denied, TPL - 4

t:\sct_workspace\edk2\SctPkg\TestCase\UEFI\EFI\BootServices\ImageServices\BlackBoxTest\ImageBBTestFunction.c:2046:Status - Access Denied, TPL - 4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14260</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-07 01:02:13 +0000</bug_when>
    <thetext>@Karunakaran,
please, describe why you think that the observed behavior is a bug in SCT.

Is this duplicate to

Bug 2650 - SCT2.7 &quot;BootServicesTest\ImageServicesTest&quot; Test Fail
https://bugzilla.tianocore.org/show_bug.cgi?id=2650 ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14262</commentid>
    <comment_count>2</comment_count>
    <who name="Karunakaran sagadevan">karunakaran.sagadevan</who>
    <bug_when>2020-11-07 01:06:23 +0000</bug_when>
    <thetext>Observed during Testing.

Yes looks duplicate.agree to close my Ticket.

What is the Proposed fix for Original issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14320</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-10 20:53:52 +0000</bug_when>
    <thetext>Close it.

*** This bug has been marked as a duplicate of bug 2650 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2331</bug_id>
          
          <creation_ts>2019-11-08 05:34:10 +0000</creation_ts>
          <short_desc>MinPlatformPkg: Introduce library for customizing TPM platform configuration</short_desc>
          <delta_ts>2019-11-20 18:38:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</reporter>
          <assigned_to name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.a.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10370</commentid>
    <comment_count>0</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2019-11-08 05:34:10 +0000</bug_when>
    <thetext>MinPlatformPkg: Introduce library for customizing TPM platform configuration

In order to enable some TPM use cases BIOS should enable to customize the
configuration of the TPM platform, provisioning of endorsement, platform and storage hierarchy.

This is implemented through a NULL library that registers a custom callback
during ReadyToLock event to perform the TPM platform configuration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10419</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-13 18:18:17 +0000</bug_when>
    <thetext>WIP by Rodrigo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10497</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-20 18:38:36 +0000</bug_when>
    <thetext>Pushed in the following commits:
1. https://github.com/tianocore/edk2-platforms/commit/b4346451f925272a2af040871241d2ecdead8275

2. https://github.com/tianocore/edk2-platforms/commit/6dfc9b39cc2e2dded96a585eee8e8fbcb1a61dcc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2504</bug_id>
          
          <creation_ts>2020-02-06 14:31:29 +0000</creation_ts>
          <short_desc>UEFI HTTPS Boot Support for HTTP Client Authentication (Basic or Digest)</short_desc>
          <delta_ts>2022-07-19 15:13:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ZNS_2019">zerene.n.sangma</reporter>
          <assigned_to name="Saloni Kasbekar">saloni.kasbekar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>nobody</cc>
    
    <cc>saloni.kasbekar</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11126</commentid>
    <comment_count>0</comment_count>
    <who name="ZNS_2019">zerene.n.sangma</who>
    <bug_when>2020-02-06 14:31:29 +0000</bug_when>
    <thetext>In order to support more secure Image deployment in field, we are requesting to enable Mutual Authentication for TLS Protocol to be used in UEFI HTTP Boot. 

The preferred approach is to have both: basic and digest authentication to support broad/newer use-cases. 
At minimum, we request basic authentication. 

Use-case:
UEFI HTTP Boot for Device Recovery in field using TLS Mutual Authentication for both parties (Server and client to be authenticated).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11134</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 20:10:23 +0000</bug_when>
    <thetext>Is UEFI spec requirement? Or the project requirement?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11137</commentid>
    <comment_count>2</comment_count>
    <who name="ZNS_2019">zerene.n.sangma</who>
    <bug_when>2020-02-06 20:18:44 +0000</bug_when>
    <thetext>Yes, UEFI Spec. 

Per this link below. Currently, the UEFI HTTPS boot feature only support server authentication with an unauthenticated client mode. 
https://github.com/tianocore/tianocore.github.io/wiki/HTTPS-Boot</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12361</commentid>
    <comment_count>3</comment_count>
    <who name="ZNS_2019">zerene.n.sangma</who>
    <bug_when>2020-04-30 17:36:11 +0000</bug_when>
    <thetext>Hello, Just wanted to clarify:
The ask is a project requirement to provide mutual TLS authentication. 
However, it is also mentioned in the spec:
Section 2.6.2: Platform-Specific Elements bullet #22 
and 
Section 28.10.2 under ELI_TLS_VERIFY 

Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12401</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-05 21:55:58 +0000</bug_when>
    <thetext>Include networkpkg maintainer and give comments for this request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12457</commentid>
    <comment_count>5</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-05-08 11:16:17 +0000</bug_when>
    <thetext>I have noticed the feature request. Need to consult on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12561</commentid>
    <comment_count>6</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-05-20 05:41:59 +0000</bug_when>
    <thetext>This is possible (at least for HTTPS Basic Auth).

The reason why only one-way (server-side) authentication was introduced because there is no secure storage for passwords/keys known to the UEFI environment. TLS Mutual Authentication feature brings a requirement to store client&apos;s private key and password. For Basic Auth, we could either prompt the user for password on each boot attempt or find a way to store it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12940</commentid>
    <comment_count>7</comment_count>
    <who name="ZNS_2019">zerene.n.sangma</who>
    <bug_when>2020-06-23 21:10:23 +0000</bug_when>
    <thetext>Hi, thank you for looking into it.
We will be OK to prompt user for password for each attempt.
What about the client certificate? 

Thanks, Zerene</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12943</commentid>
    <comment_count>8</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-06-24 04:39:14 +0000</bug_when>
    <thetext>Hi Zerene,

In this case:
- Server will authenticate itself with a certificate.
- Client will authenticate itself with a password.

See &quot;Figure 32-5 User Name- and Password-Based Mutual Authentication&quot;

https://docs.oracle.com/cd/E17802_01/j2ee/j2ee/1.4/docs/tutorial-update2/doc/Security5.html#wp483607</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12954</commentid>
    <comment_count>9</comment_count>
    <who name="ZNS_2019">zerene.n.sangma</who>
    <bug_when>2020-06-26 20:05:30 +0000</bug_when>
    <thetext>got it, thank you. Will will this be implemented? 
Would you know if HTTP Proxy support is implemented?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12955</commentid>
    <comment_count>10</comment_count>
    <who name="ZNS_2019">zerene.n.sangma</who>
    <bug_when>2020-06-26 20:06:58 +0000</bug_when>
    <thetext>Fixing typo-
got it, thank you. When will it be implemented? 
Also, Would you know if HTTP Proxy support is available?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12985</commentid>
    <comment_count>11</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-30 21:58:57 +0000</bug_when>
    <thetext>@ZNS, can you contribute this feature?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13069</commentid>
    <comment_count>12</comment_count>
    <who name="ZNS_2019">zerene.n.sangma</who>
    <bug_when>2020-07-08 21:21:35 +0000</bug_when>
    <thetext>Hello Liming Gao, I do not have the dev resources to contribute. Can you help provide guidance on the process to contribute so I can check for resources.

PS: Changed summary/title to reflect correct request. 

Thanks, Zerene</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13139</commentid>
    <comment_count>13</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-20 21:59:07 +0000</bug_when>
    <thetext>Here is edk2 dev process https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13207</commentid>
    <comment_count>14</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-28 22:13:40 +0000</bug_when>
    <thetext>Reporter will drive this feature implementation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19093</commentid>
    <comment_count>15</comment_count>
      <attachid>995</attachid>
    <who name="Saloni Kasbekar">saloni.kasbekar</who>
    <bug_when>2022-06-17 16:30:16 +0000</bug_when>
    <thetext>Created attachment 995
Code Review Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19120</commentid>
    <comment_count>16</comment_count>
    <who name="Saloni Kasbekar">saloni.kasbekar</who>
    <bug_when>2022-06-22 13:50:19 +0000</bug_when>
    <thetext>Patch sent for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19272</commentid>
    <comment_count>17</comment_count>
    <who name="Saloni Kasbekar">saloni.kasbekar</who>
    <bug_when>2022-07-19 15:13:18 +0000</bug_when>
    <thetext>Changes have been merged.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>995</attachid>
            <date>2022-06-17 16:30:16 +0000</date>
            <delta_ts>2022-06-17 16:30:16 +0000</delta_ts>
            <desc>Code Review Patch</desc>
            <filename>0001-NetworkPkg-HttpBootDxe-Add-Support-for-HTTP-Boot-Bas.patch</filename>
            <type>text/plain</type>
            <size>10379</size>
            <attacher name="Saloni Kasbekar">saloni.kasbekar</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2235</bug_id>
          
          <creation_ts>2019-10-02 15:53:41 +0000</creation_ts>
          <short_desc>Boot Manager missing entry from second disk</short_desc>
          <delta_ts>2019-10-25 05:06:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Soeren">soeren.busse</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9910</commentid>
    <comment_count>0</comment_count>
      <attachid>416</attachid>
    <who name="Soeren">soeren.busse</who>
    <bug_when>2019-10-02 15:53:41 +0000</bug_when>
    <thetext>Created attachment 416
An archive with the images

Hey there,

my initial purpose was to boot a debian system where the root file system is installed on ZFS. For this I&apos;m using the following script, which doesn&apos;t really matter for this issue, because it isn&apos;t related to ZFS: https://github.com/hn/debian-buster-zfs-root. The goal is to be still able to boot the system even if one of the mirrored drives are crashing. For this I wrote the Grub bootloader to the EFI partition on the first drive and on the second one. This script and this dual EFI partition setup worked fine on different bare metal server in the datacenter. 

For development purposes I now want to have the exact same setup on my virtual machine, so I just downloaded the latest prebuild OVMF file from jenkins and run the install script.

grub-install writes (it&apos;s using the signed .efi files) everything correctly to the \EFI\debian\ directory where I&apos;m able to manually boot the system by entering bootx64.efi on either of the two disks (FS1 or FS2 in my case).

However the BootManager only shows the label of one of the disk (see attachment). I&apos;ve also tried to change the bootloader-id to prevent a label conflict. To exclude the script as a potential error I&apos;ve installed ubuntu 18.04.3 twice. Each ubuntu on a seperate disk with it&apos;s own ESP partition. The error is still the same. Ubuntu is only showed once in the BootManager.
 
So I tried to manually add the second ESP to the NVRAM using the following command:
bcfg boot add 7 FS2:\EFI\ubuntu\shimx64.efi &quot;Ubuntu2&quot;

The result of bcfg boot dump -v shows that this entry was successfully added, but after a restart of the system the newly created entry doesn&apos;t exist anymore. The behaviour is exactly the same when using efibootmgr from the system itself. After a restart the settings are lost.

After removing the FS2 disk to simulate a disk failure the entry &quot;Ubuntu&quot; is completly missing from the BootManager. Even the entry created with bcfg boot add afterwards doesn&apos;t persist until a restart.

It seems that the EFI removes the entries at start why so ever.

I&apos;m able to reproduce this on my computer (Ubuntu 18.10) with QEMU emulator version 2.12.0 and on our Proxmox Host running 5.4-13 with QEMU 3.0.1

I would expect the BootManager to correctly show all EFI entries on all disks. I&apos;ve also tried to start rEFInd which correctly shows both systems.

I hope somebody is able to provide some hints why this happens.

Thank you very much in advance

Kind regards
Soeren

Attachments:
I&apos;ve added the images as a zip, because I can&apos;t upload multiple files:
OVMF-Bug-Map.png: Shows FS1 and FS2 which are ESP drives
OVMF-Bug-Bootmanager.png: There&apos;s only one ubuntu in the list altough two would be expected
OVMF-Boot-Dump.png: Missing entry for the second ESP partition
rEFInd.png: Correctly shows both ESP partitions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10075</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:35:28 +0000</bug_when>
    <thetext>Please have a look at this and see if you can confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10107</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-18 10:42:37 +0000</bug_when>
    <thetext>Hello Soeren,

thanks for the report. To jump right in the middle, I&apos;m thinking that
this behavior is caused by Proxmox.

On &quot;OVMF-Bug-Map.png&quot;, we can see both ESPs:

- FS1 is the UEFI Shell mapping for the GPT partition with UUID
  &quot;BFFE...&quot;

  From the preceding nodes in the device path, it seems like you have a
  PCI Express root port at 00:02.3, and you have a virtio-blk-pci device
  plugged into that.

- FS2 is the UEFI shell mapping for the GPT partition with UUID
  &quot;9E7F...&quot;

  From the preceding nodes in the device path, the containing device
  seems to be another virtio-blk-pci controller, in another PCI Express
  root port (at 00:02.5).

When using OVMF on QEMU, the UEFI boot order in the guest can be
controlled from the host side. This is done by passing &quot;bootindex&quot;
device properties on the QEMU command line, as in:

  -device virtio-blk-pci,[...],bootindex=N

They determine the OpenFirmware (OFW) device path entries that QEMU
places in the &quot;bootorder&quot; fw_cfg (&quot;firmware config&quot;) file.

(1) OVMF downloads said fw_cfg file from QEMU. (&quot;fw_cfg&quot; is a platform
    device that allows QEMU to expose configuration info to the guest
    firmware.)

    Note: if you don&apos;t specify any &quot;bootindex&quot; property on the QEMU
    command line, then OVMF does not touch the UEFI boot order at all.

(2) OVMF translates these OFW entries to UEFI device path *prefixes*.

    OpenFirmware device paths are less expressive than UEFI device
    paths, hence the translation can only produce *prefixes*.

(3) Then OVMF causes UEFI drivers to bind those controllers that are
    identified by the translated prefixes.

(4) OVMF then calls generic edk2 BDS (Boot Device Selection) logic to
    generate UEFI boot options, namely for all such UEFI-bootable
    devices that have been connected in the system thus far, as
    described above.

    The resultant UEFI boot order comprises (a) any preexistent UEFI
    boot options at the front, and (b) the newly generated UEFI boot
    options at the end.

(5) OVMF then *filters* and *reorders* said UEFI boot order, based on
    the &quot;bootorder&quot; fw_cfg file.

    Any given UEFI boot option, regardless of whether it is a
    preexistent one, or it has been freshly generated, is preserved in
    the UEFI &quot;BootOrder&quot; variable, if it matches a translated devpath
    prefix. Such boot options are preserved in the order specified by
    the &quot;bootorder&quot; fw_cfg file.

    If multiple UEFI boot options match a single translated prefix,
    their original relative order is preserved.

    UEFI boot options that are not matched by any translated prefix are
    removed from the UEFI boot order.

Therefore my take is that Proxmox generates a QEMU command line that
specifies the &quot;bootindex&quot; property for *only one* of your two
virtio-blk-pci devices. UEFI boot options referring to the *other*
device, regardless of whether they were created manually (bcfg,
efibootmgr) or programmatically (Ubuntu installer, or step (4) above),
are removed, as a result.

In order to confirm, please run &quot;ps auxww | grep qemu&quot; on the host while
QEMU is running, and then please paste the Proxmox-generated command
line into this ticket. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10217</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-25 05:06:47 +0000</bug_when>
    <thetext>It&apos;s been a week; closing this BZ due to insufficient data (see comment 2). If the requested information becomes available, please feel free to reopen this ticket. The subject functionality works on my end, as long as all necessary bootindex properties are specified. Thanks.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>416</attachid>
            <date>2019-10-02 15:53:41 +0000</date>
            <delta_ts>2019-10-02 15:53:41 +0000</delta_ts>
            <desc>An archive with the images</desc>
            <filename>OVMF-Bug-Images.zip</filename>
            <type>application/zip</type>
            <size>120685</size>
            <attacher name="Soeren">soeren.busse</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2591</bug_id>
          
          <creation_ts>2020-03-11 20:15:50 +0000</creation_ts>
          <short_desc>Tcg2Dxe&apos;s ExitBootServices and ExitBootServicesFailed notifications should be registered at TPL_CALLBACK</short_desc>
          <delta_ts>2020-03-12 03:54:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2590</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Dmitry Antipov">dmanti</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11666</commentid>
    <comment_count>0</comment_count>
    <who name="Dmitry Antipov">dmanti</who>
    <bug_when>2020-03-11 20:15:50 +0000</bug_when>
    <thetext>Currently Tcg2Dxe&apos;s ExitBootServices and ExitBootServicesFailed notifications run at TPL_NOTIFY. In those functions measurements are performed and down the stack data is sent to the TPM typically through a serial transport. Most serial transport implementations raise TPL to TPL_CALLBACK and thus result in the &quot;new TPL lower than old TPL&quot; assert.

To address this issue, Tcg2Dxe&apos;s ExitBootServices and ExitBootServicesFailed notifications should be registered at TPL_CALLBACK.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11675</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-12 03:54:51 +0000</bug_when>
    <thetext>This ticket appears doubly-filed. Closing this instance as a duplicate.

*** This bug has been marked as a duplicate of bug 2590 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2104</bug_id>
          
          <creation_ts>2019-08-21 20:46:14 +0000</creation_ts>
          <short_desc>Exiting a shell application does not correctly unload the DLL under EmulatorPkg causing stability issues</short_desc>
          <delta_ts>2019-09-16 16:26:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tim Lewis">tim.lewis</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9130</commentid>
    <comment_count>0</comment_count>
    <who name="Tim Lewis">tim.lewis</who>
    <bug_when>2019-08-21 20:46:14 +0000</bug_when>
    <thetext>When running a shell app twice, I ran into an interesting problem: global variables that had initializers were not initialized to the defaults specified in the source. Running the same shell app under the old NT32 seems to work. It turns out that the shell app was not being reloaded, but rather being relaunched. I deduced this from the following behavior:
 
1.	The value of the global variables was the same as the last known value from the previous invocation.
2.	The following line in WinHost.c was returning the exact same value for the DLL being loaded
Library = LoadLibraryEx (DllFileName, NULL, DONT_RESOLVE_DLL_REFERENCES); (around line 901)
3.	The corresponding code in Nt32’s PeCoffExtractionLib had the following lines in PeCoffLoaderUnloadImageExtraAction
  VOID *ModHandle;
 
  ASSERT (ImageContext != NULL);
  ModHandle = RemoveModeHandle (ImageContext);
  if (ModHandle != NULL) {
    mWinNt-&gt;FreeLibrary (ModHandle);
  }
 
However, the same function in EmulatorPkg’s WinHost.c has:
 
ASSERT (ImageContext != NULL);
 
So it appears that the DLL is never being unloaded and the subsequent invocation of the shell app uses the same instance of the DLL, leaving the global variables with the previous values. There are two related functions: AddModHandle and RemoveModHandle.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9133</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-21 21:00:46 +0000</bug_when>
    <thetext>*** Bug 2105 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9156</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-22 13:54:55 +0000</bug_when>
    <thetext>Patches for review

https://edk2.groups.io/g/devel/message/46191
https://edk2.groups.io/g/devel/message/46192
https://edk2.groups.io/g/devel/message/46193</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9157</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-22 14:02:30 +0000</bug_when>
    <thetext>I have tested this patch series using 2 scenarios.

The first is running the UEFI Shell from the boot manager.
This first instance of the UEFI Shell is loaded as a DLL
and support source level debug using VS.  I then load another
instance of the UEFI Shell from the UEFI Shell.  This 2nd
instance runs correctly.  The debug log shows that this
2nd UEFI Shell is loaded, but does can not be loaded as a
DLL and does not support source level debug.  I continued
running more instances of the UEFI Shell until there were
5 copies, then I run &apos;exit&apos; commands to exit the UEFI Shell
at each level.  The debug log showed the image being unloaded.
For the 2nd to the 5th instance, the debug log also showed
that the image unloaded did not support source level debug.
The &apos;exit&apos; command is run on the 1st instance and control
is returned to the Boot Manager, and the debug log shows
that the UEFI Shell was unloaded and the DLL was freed.

I did a similar experiment with a UEFI Driver.  I loaded
multiple copies of the Fat.efi driver from the UEFI Shell
using the &apos;load&apos; command. I used the &apos;drivers&apos; command to
see the list of drivers and it shows the handle numbers for
all the instances of the Fat.efi driver.  I used the &apos;unload&apos;
command to unload each Fat.efi driver and verified the debug
log output that only the 1st Fat.efi instance that was loaded
during the boot of the emulator unloaded the DLL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9158</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-22 14:06:30 +0000</bug_when>
    <thetext>A branch with these patches has been built with VS2015, VS2017,
GCC5, and XCODE5 tool chains for IA32/X64 architectures and
the DEBUG/RELEASE/NOOPT build targets.  All builds pass.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9273</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 17:41:51 +0000</bug_when>
    <thetext>Was this fixed in commit 10ccc27c9548ab2550689e68f6f45dc48120bc79?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9330</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:30:37 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #5)
&gt; Was this fixed in commit 10ccc27c9548ab2550689e68f6f45dc48120bc79?

To clarify, this question is for Mike. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9674</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-09-16 16:26:27 +0000</bug_when>
    <thetext>Fixed in commit:

https://github.com/tianocore/edk2/commit/10ccc27c9548ab2550689e68f6f45dc48120bc79


This was part of a series with 2 patches.  The 2nd patch committed at the with the fix above is:

https://github.com/tianocore/edk2/commit/30b4abc6e9141356639207d1cc280058a0229a36</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2532</bug_id>
          
          <creation_ts>2020-02-17 10:15:16 +0000</creation_ts>
          <short_desc>Add RISC-V packages on edk2-platforms</short_desc>
          <delta_ts>2020-08-26 22:31:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>daniel.schaefer</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11280</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-02-17 10:15:16 +0000</bug_when>
    <thetext>Add RiscVPkg and RiscVPlatformPkg on edk2 to support RISC-V platforms.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11360</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:17:40 +0000</bug_when>
    <thetext>Abner, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11376</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-02-20 21:22:47 +0000</bug_when>
    <thetext>Sure. forget to put assignee to me.
thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12396</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-05 21:42:05 +0000</bug_when>
    <thetext>Change it to edk2-platforms.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13545</commentid>
    <comment_count>4</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-26 22:31:24 +0000</bug_when>
    <thetext>At commit 23863e9e9d40a9575abe4f45f521e08a123545a7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2533</bug_id>
          
          <creation_ts>2020-02-17 10:24:22 +0000</creation_ts>
          <short_desc>Add RISC-V platforms on edk2-platforms.</short_desc>
          <delta_ts>2020-08-26 22:31:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>daniel.schaefer</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11281</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-02-17 10:24:22 +0000</bug_when>
    <thetext>Create SiFive RISC-V U500/U540 platforms edk2 port under Platform.
Add SiFive RISC-V core under Silicon to support SiFive E51, U54, U54 MC Coreplex RISC-V core.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11359</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:16:09 +0000</bug_when>
    <thetext>Please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13546</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-26 22:31:44 +0000</bug_when>
    <thetext>At commit 23863e9e9d40a9575abe4f45f521e08a123545a7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2441</bug_id>
          
          <creation_ts>2020-01-02 03:13:04 +0000</creation_ts>
          <short_desc>UEFIPayloadPkg: coreboot on Intel DenvertonNS with UEFIPayload leads to assertion</short_desc>
          <delta_ts>2022-02-15 21:14:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason Wu">cooljason0404</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>benjamin.you</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>kingsumos</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10769</commentid>
    <comment_count>0</comment_count>
      <attachid>445</attachid>
    <who name="Jason Wu">cooljason0404</who>
    <bug_when>2020-01-02 03:13:04 +0000</bug_when>
    <thetext>Created attachment 445
boot log

coreboot + UEFIPayload boot

Hi folks,

I can&apos;t run the UEFIPayloadPkg introduced some time ago with coreboot as payload on Intel DenvertonNS mainboard harcuvar.

However, I can run the CorebootPayloadPkg with coreboot as payload in Intel DenvertonNS, CorebootPayloadPkg from edk2-stable-201903.


See the boot log for more information.

BR, Jason</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10813</commentid>
    <comment_count>1</comment_count>
    <who name="Benjamin You">benjamin.you</who>
    <bug_when>2020-01-08 22:38:51 +0000</bug_when>
    <thetext>In the .dsc file of UefiPayloadPkg, could you please double check if following PCIE base address matches the setting in Coreboot:

DEFINE PCIE_BASE                    = 0xE0000000

if not, please try one of the following:
- Correct PCIE_BASE to the actual address used
- Set PCIE_BASE to 0 so CF8 PCI libraries are used

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10882</commentid>
    <comment_count>2</comment_count>
    <who name="Jason Wu">cooljason0404</who>
    <bug_when>2020-01-13 20:46:36 +0000</bug_when>
    <thetext>Hi folks,

I can setting PCIE_BASE = 0x0, but this payload is error on same issue.

I read my intel denvertonNs register pcie_base is default, 0xE0000000.

Thanks.

BR, Jason</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10893</commentid>
    <comment_count>3</comment_count>
    <who name="Benjamin You">benjamin.you</who>
    <bug_when>2020-01-14 09:37:40 +0000</bug_when>
    <thetext>Hi,

From the log, it appears a PCI Root Bridge&apos;s resource aperture [DF200000, FE100000) conflicts with the PCIE MMIO range [E0000000, F0000000).

The root bridge aperture is acquired through ScanForRootBridges() in UefiPayloadPkg\Library\PciHostBridgeLib\PciHostBridgeSupport.c. It might be the case that the sum of the resources consumed by the PCI devices under a root bridge exceeds the expected range.

The PCI resources are assigned before UEFI Payload (e.g., by Coreboot). Could you trace the flow of ScanForRootBridges() to find out if there are some large MMIO range(s) assigned in certain PCI device(s) that leads to this overflow.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17027</commentid>
    <comment_count>4</comment_count>
    <who name="Sumo">kingsumos</who>
    <bug_when>2021-08-24 12:19:23 +0000</bug_when>
    <thetext>This is already fixed in master:

commit 1e5e58d39bb18a127e978d6e46a7454430799e57
Author: Patrick Rudolph &lt;patrick.rudolph@9elements.com&gt;
Date:   Mon Jun 21 01:09:37 2021 -0700

I think we can close this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18376</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-02-15 21:14:37 +0000</bug_when>
    <thetext>PR:
https://github.com/tianocore/edk2/pull/1740

Commit:
https://github.com/tianocore/edk2/pull/1740/commits/7205414ac80eb6710826185fd832bd5722bfa6e7</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>445</attachid>
            <date>2020-01-02 03:13:04 +0000</date>
            <delta_ts>2020-01-02 03:13:04 +0000</delta_ts>
            <desc>boot log</desc>
            <filename>denverton_uefi_log.txt</filename>
            <type>text/plain</type>
            <size>25331</size>
            <attacher name="Jason Wu">cooljason0404</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2680</bug_id>
          
          <creation_ts>2020-04-20 14:52:48 +0000</creation_ts>
          <short_desc>WhiskeylakeOpenBoardPkg, KabylakeOpenBoardPkg, and SimicsOpenBoardPkg compile fails</short_desc>
          <delta_ts>2020-04-20 21:41:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Nathaniel L DeSimone">nathaniel.l.desimone</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12255</commentid>
    <comment_count>0</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2020-04-20 14:52:48 +0000</bug_when>
    <thetext>All builds fail on PlatformInitPreMem:

= simics =

build.py...
: error 7000: Failed to execute command
        make -s tbuild [/disk2/mp/builds/t830_build_de78d744/tianocore/Build/SimicsOpenBoardPkg/BoardX58Ich10/DEBUG_GCC5/IA32/MinPlatformPkg/PlatformInit/PlatformInitPei/PlatformInitPreMem]

build.py...
: error F002: Failed to build module
        /disk2/mp/builds/t830_build_de78d744/tianocore/edk2-platforms/Platform/Intel/MinPlatformPkg/PlatformInit/PlatformInitPei/PlatformInitPreMem.inf [IA32, GCC5, DEBUG]

= kbl =

build.py...
: error 7000: Failed to execute command
        make -s tbuild [/disk2/mp/builds/t830_build_de78d744/tianocore/Build/KabylakeOpenBoardPkg/KabylakeRvp3/DEBUG_GCC5/IA32/MinPlatformPkg/PlatformInit/PlatformInitPei/PlatformInitPreMem]

build.py...
: error F002: Failed to build module
        /disk2/mp/builds/t830_build_de78d744/tianocore/edk2-platforms/Platform/Intel/MinPlatformPkg/PlatformInit/PlatformInitPei/PlatformInitPreMem.inf [IA32, GCC5, DEBUG]

= whl =

build.py...
: error 7000: Failed to execute command
        make -s tbuild [/disk2/mp/builds/t830_build_de78d744/tianocore/Build/WhiskeylakeOpenBoardPkg/WhiskeylakeURvp/DEBUG_GCC5/IA32/MinPlatformPkg/PlatformInit/PlatformInitPei/PlatformInitPreMem]

build.py...
: error F002: Failed to build module
        /disk2/mp/builds/t830_build_de78d744/tianocore/edk2-platforms/Platform/Intel/MinPlatformPkg/PlatformInit/PlatformInitPei/PlatformInitPreMem.inf [IA32, GCC5, DEBUG]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12258</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-04-20 21:41:33 +0000</bug_when>
    <thetext>This build failure caused by introducing ReportCpuHobLib, we have reverted it and will submit correct patch later.

commit 0217d1e21aa9add5421c957b2acf3a1f1828a03a
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue Apr 21 08:44:14 2020 +0800

    Revert &quot;MinPlatformPkg/PlatformInitPei: ReportCpuHobLib.&quot;

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2680

    The patch broke all OpenBoardPkg build so reverted:
    944af47a8c83115dcd5dae581e5c3770a12a2ed2.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2134</bug_id>
          
          <creation_ts>2019-08-27 08:37:26 +0000</creation_ts>
          <short_desc>MdeModulePkg applications do not build for !x86</short_desc>
          <delta_ts>2019-08-28 23:17:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Leif Lindholm">quic_llindhol</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9271</commentid>
    <comment_count>0</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-08-27 08:37:26 +0000</bug_when>
    <thetext>Commit 4a1f6b85c184 (&quot;MdeModulePkg: add LockBoxNullLib for !IA32/X64 in .dsc&quot;)
added an ARM/AARCH64 resolution for LockBoxLib. However, this failed to address the overrides provided for PEIM, DXE_DRIVER, DXE_RUNTIME_DRIVER, DXE_SMM_DRIVER and UEFI_DRIVER, so any modules of those classes still fails to build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9272</commentid>
    <comment_count>1</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-08-27 08:44:42 +0000</bug_when>
    <thetext>Patch submitted as https://edk2.groups.io/g/devel/topic/patch_1_1_mdemodulepkg_fix/33045351.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9373</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-28 05:19:22 +0000</bug_when>
    <thetext>Basetool patch to fix this issue as
https://edk2.groups.io/g/devel/message/46536</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9386</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-28 23:17:24 +0000</bug_when>
    <thetext>fixed at 37eef91017ad042035090cae46557f9d6e2d5917</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2203</bug_id>
          
          <creation_ts>2019-09-18 22:10:08 +0000</creation_ts>
          <short_desc>build break due to custom makefile with the Basetools update</short_desc>
          <delta_ts>2019-09-23 22:32:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="eric.jin">eric.jin</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9714</commentid>
    <comment_count>0</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-18 22:10:08 +0000</bug_when>
    <thetext>BaseTools is updated in Aug, but it breaks the build when the custom makefile exist.

Active Platform          = c:\gwork\sct\edk2\SctPkg\UEFI\IHV_SCT.dsc
...Traceback (most recent call last):
  File &quot;C:\Gwork\SCT\edk2\BaseTools\Source\Python\AutoGen\AutoGenWorker.py&quot;, line 245, in run
    Ma.CreateMakeFile(False,GenFfsList=FfsCmd.get((Ma.MetaFile.Path, Ma.Arch),[]))
  File &quot;C:\Gwork\SCT\edk2\BaseTools\Source\Python\Common\caching.py&quot;, line 18, in CallMeHere
    Value = self._function(obj, *args,**kwargs)
  File &quot;C:\Gwork\SCT\edk2\BaseTools\Source\Python\AutoGen\ModuleAutoGen.py&quot;, line 1799, in CreateMakeFile
    MewIR.DependencyHeaderFileSet = Makefile.DependencyHeaderFileSet
AttributeError: &apos;CustomMakefile&apos; object has no attribute &apos;DependencyHeaderFileSet&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9715</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-18 22:58:09 +0000</bug_when>
    <thetext>confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9716</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-18 22:58:43 +0000</bug_when>
    <thetext>Patch is under review.
https://edk2.groups.io/g/devel/message/47529</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9756</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-23 22:32:27 +0000</bug_when>
    <thetext>pushed at SHA-1: 4747b92cab69a12595fefea943e09dbb4661fec8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2007</bug_id>
          
          <creation_ts>2019-07-22 01:39:38 +0000</creation_ts>
          <short_desc>[MdePkg/PciExpress21.h]: The existing PCI industry standard registers are not up to date as per PCIe Base Specification 4.0</short_desc>
          <delta_ts>2019-07-31 04:09:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashraf Javeed">ashraf.javeed</reporter>
          <assigned_to name="Ashraf Javeed">ashraf.javeed</assigned_to>
          <cc>ashraf.javeed</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8529</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2019-07-22 01:39:38 +0000</bug_when>
    <thetext>The PCI industry standard header source file, the PciExpress21.h, is not up to date on the existing registers as per the PCI Base Specification 4.0.

(1) The PCIe Device capability register #2 (PCI_REG_PCIE_DEVICE_CAPABILITY2) needs to be upgraded for the PCI features like - LN system CLS, 10b Tag completer/requester register fields, emergency power reduction support and initialization requirement, and FRS support.

(2) The PCIe Device Control register #2 (PCI_REG_PCIE_DEVICE_CONTROL2) needs to be upgraded for the - emergency power reduction request enabling and and also the 10b Extended Tag enabling.

(3) Needs macro definitions for all the ranges of Maximum Payload Sizes and Maximum Read Request Sizes defined

(4) Needs macro definitions for all the ranges of Completion Timeout needs to be defined.

The (3) and (4) above are essentially for extending the PCI Bus driver to support these PCI features in future.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8530</commentid>
    <comment_count>1</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2019-07-22 01:47:22 +0000</bug_when>
    <thetext>Assigning to self.
Plan is to fix the PCI industry standard register definition in its existing source file itself.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8531</commentid>
    <comment_count>2</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2019-07-22 01:48:45 +0000</bug_when>
    <thetext>Assigning to self.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8532</commentid>
    <comment_count>3</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2019-07-22 02:33:34 +0000</bug_when>
    <thetext>Taking over</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8654</commentid>
    <comment_count>4</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2019-07-31 04:09:01 +0000</bug_when>
    <thetext>Date &amp; Time: Monday, July 29, 2019 3:54 PM
Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;

Date &amp; Time: Wednesday 7/31/2019 12:36 PM
Push@95fb75883d2917e985f960969f004ea63ad83adf by Liming Gao &lt;liming.gao@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2266</bug_id>
          
          <creation_ts>2019-10-10 17:28:27 +0000</creation_ts>
          <short_desc>BDS crashes if PcdPlatformBootTimeOut == 0</short_desc>
          <delta_ts>2019-10-16 12:36:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to name="Pete Batard">pete</assigned_to>
          <cc>artem.nefedov</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9995</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2019-10-10 17:28:27 +0000</bug_when>
    <thetext>I pulled from master and built OVMF and it crashes with a divide by zero exception.
  frame  0: 0x07a9cc38 BdsDxe:PlatformBootManagerWaitCallback + 35 at /Volumes/Case/UDK2018/OvmfPkg/Library/PlatformBootManagerLib/BdsPlatform.c:1646:37
  frame  1: 0x07a9e744 BdsDxe:BdsWait + 269 at /Volumes/Case/UDK2018/MdeModulePkg/Universal/BdsDxe/BdsEntry.c:344:3
  frame  2: 0x07a9dff9 BdsDxe:BdsEntry + 2620 at /Volumes/Case/UDK2018/MdeModulePkg/Universal/BdsDxe/BdsEntry.c:1002:5

PlatformBootManagerWaitCallback() does not deal with PcdPlatformBootTimeOut getting set to zero. 

Looks like this change introduced the regression. 
git blame -L344,344  /Volumes/Case/UDK2018/MdeModulePkg/Universal/BdsDxe/BdsEntry.c 
2de1f611be0 (Pete Batard 2019-09-25 23:50:05 +0800 344)   PlatformBootManagerWaitCallback (0);

There is even more info on the mailing list, bit this should be easy to reproduce. 

This fixed my crash:
diff --git a/OvmfPkg/Library/PlatformBootManagerLib/BdsPlatform.c b/OvmfPkg/Library/PlatformBootManagerLib/BdsPlatform.c
index 70df6b841a..d6ae43e900 100644
--- a/OvmfPkg/Library/PlatformBootManagerLib/BdsPlatform.c
+++ b/OvmfPkg/Library/PlatformBootManagerLib/BdsPlatform.c
@@ -1634,6 +1634,11 @@ PlatformBootManagerWaitCallback (
   UINT16                              Timeout;
 
   Timeout = PcdGet16 (PcdPlatformBootTimeOut);
+  if (Timeout ==  0) {
+    Timeout = 100;
+  } else {
+    Timeout = (Timeout - TimeoutRemain) * 100 / Timeout;
+  }
 
   Black.Raw = 0x00000000;
   White.Raw = 0x00FFFFFF;
@@ -1643,7 +1648,7 @@ PlatformBootManagerWaitCallback (
     Black.Pixel,
     L&quot;Start boot option&quot;,
     White.Pixel,
-    (Timeout - TimeoutRemain) * 100 / Timeout,
+    Timeout,
     0
     );
 }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9998</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-11 09:18:50 +0000</bug_when>
    <thetext>On-list discussion:

https://edk2.groups.io/g/devel/message/48753
http://mid.mail-archive.com/E01C126C-AC9B-427C-84E0-AB18C6992D1E@apple.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9999</commentid>
    <comment_count>2</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2019-10-11 09:28:34 +0000</bug_when>
    <thetext>I&apos;ll submit a fix for this as soon as I get chance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10000</commentid>
    <comment_count>3</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2019-10-11 11:26:14 +0000</bug_when>
    <thetext>Fix proposal has been submitted as https://edk2.groups.io/g/devel/message/48839

Please review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10001</commentid>
    <comment_count>4</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2019-10-11 11:47:59 +0000</bug_when>
    <thetext>Note that, independently of the above, I also submitted the more general fix from Laszlo:
https://edk2.groups.io/g/devel/message/48841
https://edk2.groups.io/g/devel/message/48842

My take is that, even if it seems redundant, we want to have both the OVMF and the more general fix applied, but I&apos;ll leave that decision to the maintainers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10011</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-14 14:06:40 +0000</bug_when>
    <thetext>*** Bug 2267 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10021</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-15 03:43:35 +0000</bug_when>
    <thetext>(In reply to Pete Batard from comment #4)
&gt; Note that, independently of the above, I also submitted the more general fix
&gt; from Laszlo:
&gt; https://edk2.groups.io/g/devel/message/48841
&gt; https://edk2.groups.io/g/devel/message/48842
&gt; 
&gt; My take is that, even if it seems redundant, we want to have both the OVMF
&gt; and the more general fix applied, but I&apos;ll leave that decision to the
&gt; maintainers.

This is now commit 4d05a4b709ce (&quot;MdeModulePkg/BdsDxe: Fix calling PlatformBootManagerWaitCallback on 0&quot;, 2019-10-15).


The BZ should remain open until the following set is pushed as well:

  [edk2-devel] [PATCH v2 0/2]
  PlatformBootManagerLib: Don&apos;t update progress if Pcd is 0

  http://mid.mail-archive.com/20191014150311.16740-1-pete@akeo.ie
  https://edk2.groups.io/g/devel/message/48908</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10022</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-15 03:43:57 +0000</bug_when>
    <thetext>(IN_PROGRESS since comment 3)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10033</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-16 12:36:07 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #6)

&gt; The BZ should remain open until the following set is pushed as well:
&gt; 
&gt;   [edk2-devel] [PATCH v2 0/2]
&gt;   PlatformBootManagerLib: Don&apos;t update progress if Pcd is 0
&gt; 
&gt;   http://mid.mail-archive.com/20191014150311.16740-1-pete@akeo.ie
&gt;   https://edk2.groups.io/g/devel/message/48908

Commit range cd70b1a71d30..23ab8df01a2c; closing the BZ.

Thanks for the patches, Pete!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2226</bug_id>
          
          <creation_ts>2019-09-30 01:16:08 +0000</creation_ts>
          <short_desc>Upgrade Openssl to 1.1.1d  due to CVEs in v1.1.1b</short_desc>
          <delta_ts>2019-11-04 21:45:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="SANTOSHKUMAR">santoshkumar.laxminarayan.rai</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9877</commentid>
    <comment_count>0</comment_count>
    <who name="SANTOSHKUMAR">santoshkumar.laxminarayan.rai</who>
    <bug_when>2019-09-30 01:16:08 +0000</bug_when>
    <thetext>Edk2 latest release version: edk2-stable201908

Which uses crypto package library openssl version: 1.1.1b

Openssl v1.1.1b is having vulnerable with CVEs: CVE-2019-1543, CVE-2019-1552 and CVE-2019-1563.

Latest release of openssl v1.1.1d has already fix for above CVEs.

I would like to know when edk2 maintainers going to release edk2 crypto package support with openssl 1.1.1d ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997</commentid>
    <comment_count>1</comment_count>
    <who name="SANTOSHKUMAR">santoshkumar.laxminarayan.rai</who>
    <bug_when>2019-10-11 00:38:40 +0000</bug_when>
    <thetext>Any update, please respond.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10008</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-13 22:35:36 +0000</bug_when>
    <thetext>Disclose this BZ because it&apos;s not a security issue but feature request. And assign owner to Shenglei.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10323</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-04 21:45:17 +0000</bug_when>
    <thetext>Pushed@1bcc65b9a1408cf445b7b3f9499b27d9c235db71
Reviewed@https://edk2.groups.io/g/devel/topic/40404152#49802</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2229</bug_id>
          
          <creation_ts>2019-09-30 20:35:16 +0000</creation_ts>
          <short_desc>Add a silicon library to determine the firmware boot media device</short_desc>
          <delta_ts>2019-10-08 17:28:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9896</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-30 20:35:16 +0000</bug_when>
    <thetext>A standardized API is needed in Intel platforms to determine the firmware boot media device.

 * The API should be defined in IntelSiliconPkg so it is available to all
   Intel board, platform, and silicon packages.

 * The API should make it convenient for consuming code to make decisions
   based upon the current firmware boot media device.

 * The implementation in IntelSiliconPkg must make no assumption about the
   boot media device including accessing hardware to determine the boot media device.

   * All boot media device information must be passed from the platform code via a HOB
     with the GUID gFirmwareBootMediaHobGuid in the HOB producer phase.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9905</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-01 20:44:36 +0000</bug_when>
    <thetext>Initial implementation complete. Patch sent to mailing list for review - https://edk2.groups.io/g/devel/message/48331.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9961</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:28:49 +0000</bug_when>
    <thetext>Changes committed to edk2-platforms.

https://github.com/tianocore/edk2-platforms/commit/97d081b75aaf6217b6b2219112d0bb6062f26669

https://github.com/tianocore/edk2-platforms/commit/30960fb56ee9687afa564825cab9f8f454b5b349

https://github.com/tianocore/edk2-platforms/commit/f02b8a62d47e58f6e70250c76d316fde80e292c6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2691</bug_id>
          
          <creation_ts>2020-04-23 04:29:47 +0000</creation_ts>
          <short_desc>Enable BSD-2-Clause-Patent license checker for new added files in open CI</short_desc>
          <delta_ts>2020-08-17 03:54:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2833</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12295</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-23 04:29:47 +0000</bug_when>
    <thetext>Now there is no non bsd+patent license file to be added in edk2 after edk2 switches to bsd+patent license.
So we need to check license for files to be add to edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12296</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-23 04:31:42 +0000</bug_when>
    <thetext>The patch is under review in community.
https://edk2.groups.io/g/devel/message/57780?p=,,,20,0,0,0::Created,,BaseTools%2FPatchCheck.py%3A+Add+LicenseCheck,20,2,0,73190372</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12343</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-28 22:23:42 +0000</bug_when>
    <thetext>warning message may be enough. No SPDX should be an error. 

Error for the outside license in readme.md. 
Warning for non BSD+patent license. 
No warning or error for BSD + patent license.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13025</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-02 05:15:45 +0000</bug_when>
    <thetext>The feature has been implemented in commit a4cfb842fca9 (&quot;BaseTools/PatchCheck.py: Add LicenseCheck&quot;, 2020-06-12).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13027</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-02 05:25:50 +0000</bug_when>
    <thetext>Said commit regressed the handling of generated files; please refer to bug 2833.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13246</commentid>
    <comment_count>5</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-07-31 00:52:12 +0000</bug_when>
    <thetext>enabled at edk2
SHA-1: eca948f6f3c197387f3b448f868b7ea7aeabae35</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13394</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-13 23:45:48 +0000</bug_when>
    <thetext>this is a feature request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13416</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-17 03:54:58 +0000</bug_when>
    <thetext>License checker is added as open CI plugin. Now, it checks BSD-2-Clause-Patent only. Other license can be added as the exception.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2585</bug_id>
          
          <creation_ts>2020-03-10 13:15:59 +0000</creation_ts>
          <short_desc>OVMF IA32X64 no longer builds in common config after recent feature additions (@ 6b7855209ad8)</short_desc>
          <delta_ts>2020-03-11 09:34:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11647</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-10 13:15:59 +0000</bug_when>
    <thetext>At commit 6b7855209ad8, the following build command fails:

build \
  -a IA32 -a X64 \
  -b NOOPT \
  -p OvmfPkg/OvmfPkgIa32X64.dsc \
  -t GCC48 \
  -D SMM_REQUIRE \
  -D SECURE_BOOT_ENABLE \
  -D NETWORK_IP6_ENABLE \
  -D NETWORK_TLS_ENABLE \
  -D NETWORK_HTTP_BOOT_ENABLE \
  --cmd-len=65536 \
  --genfds-multi-thread

The error message is:

Generating DXEFV FV
###Return Value = 2
### [&apos;GenFv&apos;, &apos;-F&apos;, &apos;FALSE&apos;, &apos;-a&apos;, &apos;Build/Ovmf3264/NOOPT_GCC48/FV/Ffs/DXEFV.inf&apos;, GenFv: ERROR 3000: Invalid
  the required fv image size 0xb4b790 exceeds the set fv image size 0xb00000</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11648</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-10 13:53:46 +0000</bug_when>
    <thetext>Posted:
[edk2-devel] [PATCH] OvmfPkg: raise DXEFV size to 12 MB
http://mid.mail-archive.com/20200310175025.18849-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/55717</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11661</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-11 09:34:31 +0000</bug_when>
    <thetext>Fixed in commit 5e75c4d1fe4f, via &lt;https://github.com/tianocore/edk2/pull/435&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2944</bug_id>
          
          <creation_ts>2020-08-30 21:57:07 +0000</creation_ts>
          <short_desc>add FspMeasurementLib.h to IntelFsp2WrapperPkg/IntelFsp2WrapperPkg.dec</short_desc>
          <delta_ts>2020-09-01 11:42:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="qi1.zhang@intel.com">qi1.zhang</reporter>
          <assigned_to name="qi1.zhang@intel.com">qi1.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2WrapperPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13576</commentid>
    <comment_count>0</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-30 21:57:07 +0000</bug_when>
    <thetext>add FspMeasurementLib.h to IntelFsp2WrapperPkg/IntelFsp2WrapperPkg.dec</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13577</commentid>
    <comment_count>1</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-30 21:57:35 +0000</bug_when>
    <thetext>code change</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13589</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-01 11:31:38 +0000</bug_when>
    <thetext>patch on list from Qi Zhang:

* [edk2-devel] [PATCH]
  IntelFsp2WrapperPkg/IntelFsp2WrapperPkg.dec: add FspMeasurementLib.h

https://edk2.groups.io/g/devel/message/64812
http://mid.mail-archive.com/20200831020721.8967-1-qi1.zhang@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13590</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-01 11:42:27 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; patch on list from Qi Zhang:
&gt; 
&gt; * [edk2-devel] [PATCH]
&gt;   IntelFsp2WrapperPkg/IntelFsp2WrapperPkg.dec: add FspMeasurementLib.h
&gt; 
&gt; https://edk2.groups.io/g/devel/message/64812
&gt; http://mid.mail-archive.com/20200831020721.8967-1-qi1.zhang@intel.com

Merged as commit 0c5c45a1337f, via &lt;https://github.com/tianocore/edk2/pull/908&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2357</bug_id>
          
          <creation_ts>2019-11-19 10:40:00 +0000</creation_ts>
          <short_desc>spelling mistake, &quot;eable&quot; should be &quot;enable&quot;</short_desc>
          <delta_ts>2020-08-03 12:48:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10473</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-19 10:40:00 +0000</bug_when>
    <thetext>spelling mistake, &quot;eable&quot; should be &quot;enable&quot; in 

UefiCpuPkg/Library/CpuCommonFeaturesLib/MachineCheck.c:    

DEBUG ((EFI_D_INFO, &quot;LMCE eanble = %x\n&quot;, (BOOLEAN) (McgCap.Bits.MCG_LMCE_P != 0)));</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13279</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 20:28:00 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13280</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 20:29:32 +0000</bug_when>
    <thetext>Patch review

https://edk2.groups.io/g/devel/message/63605</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13302</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-08-03 12:48:49 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/548c9669df410334363aa8aa1c90182bbefe4285

Pull Request

https://github.com/tianocore/edk2/pull/849</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2713</bug_id>
          
          <creation_ts>2020-05-11 01:42:32 +0000</creation_ts>
          <short_desc>Get default value from same source for TCG2_PHYSICAL_PRESENCE_FLAGS_VARIABLE</short_desc>
          <delta_ts>2020-05-22 04:03:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="Maggie Chu">maggie.chu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12473</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-05-11 01:42:32 +0000</bug_when>
    <thetext>In current code, if TCG2_PHYSICAL_PRESENCE_FLAGS_VARIABLE variable not exist, code will get default value from two places.
Place 1 in Tcg2PhysicalPresenceLibGetManagementFlags ():
  DataSize = sizeof (EFI_TCG2_PHYSICAL_PRESENCE_FLAGS);
  Status = gRT-&gt;GetVariable (
                  TCG2_PHYSICAL_PRESENCE_FLAGS_VARIABLE,
                  &amp;gEfiTcg2PhysicalPresenceGuid,
                  NULL,
                  &amp;DataSize,
                  &amp;PpiFlags
                  );
  if (EFI_ERROR (Status)) {
    PpiFlags.PPFlags = TCG2_BIOS_TPM_MANAGEMENT_FLAG_DEFAULT | TCG2_BIOS_STORAGE_MANAGEMENT_FLAG_DEFAULT;
  }


Place 2 in Tcg2PhysicalPresenceLibProcessRequest ()
  //
  // Initialize physical presence flags.
  //
  DataSize = sizeof (EFI_TCG2_PHYSICAL_PRESENCE_FLAGS);
  Status = gRT-&gt;GetVariable (
                  TCG2_PHYSICAL_PRESENCE_FLAGS_VARIABLE,
                  &amp;gEfiTcg2PhysicalPresenceGuid,
                  NULL,
                  &amp;DataSize,
                  &amp;PpiFlags
                  );
  if (EFI_ERROR (Status)) {
    PpiFlags.PPFlags = PcdGet32(PcdTcg2PhysicalPresenceFlags);
    Status   = gRT-&gt;SetVariable (
                      TCG2_PHYSICAL_PRESENCE_FLAGS_VARIABLE,
                      &amp;gEfiTcg2PhysicalPresenceGuid,
                      EFI_VARIABLE_NON_VOLATILE | EFI_VARIABLE_BOOTSERVICE_ACCESS | EFI_VARIABLE_RUNTIME_ACCESS,
                      sizeof (EFI_TCG2_PHYSICAL_PRESENCE_FLAGS),
                      &amp;PpiFlags
                      );
    if (EFI_ERROR (Status)) {
      DEBUG ((EFI_D_ERROR, &quot;[TPM2] Set physical presence flag failed, Status = %r\n&quot;, Status));
      return ;
    }
    DEBUG((DEBUG_INFO, &quot;[TPM2] Initial physical presence flags value is 0x%x\n&quot;, PpiFlags.PPFlags));
  }


Also, place 2 code is updated in below commit:
SecurityPkg: Tcg2PhysicalPresence: Define TCG2 PP Flags Initial Pcd

Define PcdTcg2PhysicalPresenceFlags to initialize TCG2 PP Flags setting.

Cc: Yao Jiewen &lt;jiewen.yao@intel.com&gt;
Cc: Star Zeng &lt;star.zeng@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.0
Signed-off-by: Chao Zhang &lt;chao.b.zhang@intel.com&gt;
Reviewed-by: Yao Jiewen &lt;jiewen.yao@intel.com&gt;
Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;

Before this change, old code in Place 2 is the same as place 1.

submit this issue to replace place 1 with place two code, make the default value comes from the same source.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12483</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-12 22:03:24 +0000</bug_when>
    <thetext>Still investigate the solution to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12666</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-22 04:03:55 +0000</bug_when>
    <thetext>Fix it at 1a2ad3ba9efdd0db4bf1b6c114eedb59d6c483ca</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2606</bug_id>
          
          <creation_ts>2020-03-19 10:12:21 +0000</creation_ts>
          <short_desc>Run ECC (EFI Code Checker) checker in EDKII CI</short_desc>
          <delta_ts>2020-08-17 03:23:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11737</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-19 10:12:21 +0000</bug_when>
    <thetext>ECC tool detects the coding style issue in the source code. It can be enabled in CI system to check the modified changes in the patch and find the coding style issue early.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11738</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-19 10:13:07 +0000</bug_when>
    <thetext>Shenglei takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12493</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-05-13 04:41:21 +0000</bug_when>
    <thetext>Sea,

I&apos;d like to create a new pipline for Ecc check like how &apos;Ubuntu-PatchCheck.yml&apos; runs on EDKII CI. Maybe the name is &apos;Windows-EccCheck.yml&apos; And the implement  script &quot;EccCheck.py&quot; is put in BaseTools/Scripits. Exceptions can be added in xxxPkg.ci.yml. How do you think my proposal?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12511</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-05-16 00:56:45 +0000</bug_when>
    <thetext>you could do that.  
Since you are not using a Pytool plugin you will need to parse the ***Pkg.ci.yml file yourself.  It is Yaml so it is pretty easy but that will bring a new dependency to your tool.  

Overall i think it is a great idea to have an auto formatter and format checker.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13413</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-17 01:43:07 +0000</bug_when>
    <thetext>Fix 7f0b28415cb464832155d5b3ff6eb63612f58645..98946ef352238ac233dbf8df34510fc4e30d9e02</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2032</bug_id>
          
          <creation_ts>2019-07-29 23:45:10 +0000</creation_ts>
          <short_desc>Ping6OnEchoReplyReceived crash</short_desc>
          <delta_ts>2020-04-01 06:56:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2550</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Maciej Rabeda">maciej.rabeda</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>john.mathews</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>rschiron</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8634</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-29 23:45:10 +0000</bug_when>
    <thetext>A runtime fuzz testing environment was setup to test the UEFI platforms network stack. This environment uses QEMU and the OvmfPkg and SourceLevelDebugPkg packages, along with the Socket examples from AppPkg to exercise various parts of the UEFI network stack. A dumb fuzzing approach is being used, leveraging the ISIC (IP Stack Integrity Checker) tool found at http://isic.sourceforge.net/ to send anomalous network traffic to the UEFI target.  The following crash dump was generated when using the icmpsic tool to send invalid ICMP packets to the UEFI target, while it was sending ping packets over the network. It appears the registers being dereferenced have been corrupted.


Test Environment Used:

-Ubuntu 16.04  

-QEMU-2.5.0  (sudo apt install qemu)

-build OVMF.fd from source (https://github.com/tianocore/edk2commit=373c2c5b888d029d7103206556bb85f33d980569  target=OvmfPkgX64.dsc,Type=DEBUG,Arch=X64,TOOLCHAIN=GCC5)

-ISIC/ICMPSIC https://github.com/dropletzhu/isic-fix


The OVMF guest needs the ability to successfully ping the host machine. I created a tap interface on the host and sent a virtual bridge through it.

Create Tap/Bridge on Host: https://gist.github.com/extremecoders-re/e8fd8a67a515fee0c873dcafc81d811c (For a closed network virtual bridge(virbr0) I used virt-manager.)

Setup networking once in guest UEFI shell:

  $ ifconfig -s eth0 dhcp                    
  $ ifconfig -l     &lt;= Should have ip4 address if bridge/tap setup properly. Host and guest should be able to ping

Boot OVMF guest (may need to press F2 at splash screen to set boot priority to UEFI shell):

  $ qemu-system-x86_64 \
    -pflash OVMF.fd \
    -netdev tap,id=hostnet0,ifname=tap0,script=no,downscript=no \
    -device e1000,netdev=hostnet0,id=net0,mac=6a:81:8c:9e:c6:e8 \
    -global isa-debugcon.iobase=0x402 -debugcon file:ubuntu.ovmf.log \
    -s -boot menu=on

Steps to reproduce the crash:

1. Follow Steps above to boot OVMF guest from host machine with networking properly enabled
2. Continually ping host machine from the guest UEFI shell

  $ ping -n 1000 192.168.254.15

3. $ sudo icmpsic -s 192.168.254.15 -d 192.168.122.81</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8635</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-29 23:46:21 +0000</bug_when>
    <thetext>6.5 Medium. https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:L/A:L</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8766</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 10:04:19 +0000</bug_when>
    <thetext>Jian, the title of the bug suggests IPv6 (Ping6OnEchoReplyReceived), but the repro steps discuss IPv4. Can you clarify please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8768</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 10:06:32 +0000</bug_when>
    <thetext>Will a CVE ID be assigned? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8788</commentid>
    <comment_count>4</comment_count>
    <who name="nick">nicholas.armour</who>
    <bug_when>2019-08-05 13:51:04 +0000</bug_when>
    <thetext>The &quot;Ping6OnEchoReplyReceived&quot; comes from a backtrace reported from the initial bug finder. This was reported using a QEMU/OVMF test setup, using Ip4 networking as you have pointed out. I&apos;ll attach the backtrace.

This bug is a bit odd, I&apos;ve been able to repro the crash with QEMU/OVMF, however I have been unable to repro on an actual piece of hardware, which is making me think that this bug is related to some weird interaction between the virtual QEMU NIC and the edk2 network stack.

Also, I am unable to get a useful backtrace using gdb. The original report used the UDK debugger, so I will try using UDK with OVMF and see if I can repro their exact same backtrace.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8789</commentid>
    <comment_count>5</comment_count>
      <attachid>376</attachid>
    <who name="nick">nicholas.armour</who>
    <bug_when>2019-08-05 13:51:32 +0000</bug_when>
    <thetext>Created attachment 376
backtrace of crash</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8828</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-07 09:17:23 +0000</bug_when>
    <thetext>Nick,

the QEMU command line in comment 0 specifies the e1000 device, not the virtio-net-pci device.

OVMF does not have a built-in driver for the e1000 device model. For driving the e1000, OVMF users have two options (alternatives):

- either build OVMF with -D E1000_ENABLE (which in turn depends on them downloading BootUtil first, and extracting the UEFI driver from it -- please refer to commit 253d81c71f67 for details),

- or else -- which is done much more commonly -- use the e1000 SNP driver that is built from the iPXE project, and is bundled with QEMU, as a PCI option ROM (combined ROM for BIOS and UEFI).

Please refer to OvmfPkg/README:

--------v--------
* When a matching iPXE driver is configured for a NIC as described above, it
  takes priority over other drivers that could possibly drive the card too:

                         | e1000  ne2k_pci  pcnet  rtl8139  virtio-net-pci
    ---------------------+------------------------------------------------
    iPXE                 |   x       x        x       x           x
    VirtioNetDxe         |                                        x
    Intel BootUtil (X64) |   x
--------^--------

In short, the built-in VirtioNetDxe driver could be relevant for this discussion only if *both* of the following conditions held:

- the QEMU command line used the &quot;virtio-net-pci&quot; device model, not the &quot;e1000&quot; model,

- QEMU were prevented from auto-loading the iPXE oprom for virtio-net-pci (which otherwise takes priority over VirtioNetDxe). For that, the necessary QEMU cmdline property is

  -device virtio-net-pci,[...],romfile=&apos;&apos;
                               ^^^^^^^^^^

(IOW, set the &quot;romfile&quot; property to the empty string.)

At the moment I don&apos;t have any better idea than:
- reproduce the issue when using VirtioNetDxe (see both conditions for that above)
- add detailed DEBUG messages to the shell, the MnpDxe driver, and the VirtioNetDxe driver, on the ICMP reply receive branch
- assuming the packet can be received at all, and the crash occurs at a higher level, log a hexdump of the packets received in VirtioNetDxe.
- try to correlate the packet contents with the crash.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9790</commentid>
    <comment_count>7</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-25 02:22:29 +0000</bug_when>
    <thetext>CVE-2019-14559</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9792</commentid>
    <comment_count>8</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-25 02:24:27 +0000</bug_when>
    <thetext>Note this BZ shares the same CVE as BZ2031</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10158</commentid>
    <comment_count>9</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-22 11:01:39 +0000</bug_when>
    <thetext>Per discussion at https://edk2.groups.io/g/infosec/message/29, make this BZ public.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11109</commentid>
    <comment_count>10</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 13:32:09 +0000</bug_when>
    <thetext>infosec 2/5/2020 meeting - move to open.  have patch, cve and have waiting embargo period.  need to update TA</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11203</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-11 05:38:28 +0000</bug_when>
    <thetext>Nick, can you perhaps propose a patch on edk2-devel please? edk2 master remains vulnerable at this time. The NetworkPkg maintainers should review and (once approved) merge a patch for this issue ASAP. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11405</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-23 04:09:11 +0000</bug_when>
    <thetext>Again, no patch has been proposed yet.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11422</commentid>
    <comment_count>13</comment_count>
    <who name="nick">nicholas.armour</who>
    <bug_when>2020-02-24 12:36:50 +0000</bug_when>
    <thetext>Sorry for the delay Laszlo, but I have yet to successfully root cause this bug, so I do not have a patch. 
I will start looking at this again today/tomorrow and get back to you.

-Nick</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11423</commentid>
    <comment_count>14</comment_count>
    <who name="nick">nicholas.armour</who>
    <bug_when>2020-02-24 17:02:04 +0000</bug_when>
    <thetext>The reason for the crash is the following code in  ShellPkg/Library/UefiShellNetwork1CommandsLib/Ping.c

//To your other comment Laszlo, although this is called Ping6, it handles both IPv4 and IPv6 by using the IpChoice field in the PING_PRIVATE_DATA structure


Ping6OnEchoReplyReceived(){ 

ICMPX_ECHO_REQUEST_REPLY    *Reply;
UINT32                      PayLoad;


Reply   = ((EFI_IP4_RECEIVE_DATA*)Private-&gt;RxToken.Packet.RxData)-&gt;FragmentTable[0].FragmentBuffer;
PayLoad = ((EFI_IP4_RECEIVE_DATA*)Private-&gt;RxToken.Packet.RxData)-&gt;DataLength;

if (!IP4_IS_MULTICAST (EFI_IP4(*(EFI_IPv4_ADDRESS*)Private-&gt;DstAddress)) &amp;&amp;
        !EFI_IP4_EQUAL (&amp;((EFI_IP4_RECEIVE_DATA*)Private-&gt;RxToken.Packet.RxData)-&gt;Header-&gt;SourceAddress, (EFI_IPv4_ADDRESS*)&amp;Private-&gt;DstAddress)) {
    goto ON_EXIT;
 }

}


The issue is the received ping reply packet, RxData, is corrupted.
In this case, (EFI_IP4_RECEIVE_DATA*)Private-&gt;RxToken.Packet.RxData)-&gt;Header == 0xAFAFAFAFAFAFAFAF

So when we try to get the SourceAddress to do the EFI_IP4_EQUAL, we crash attempting to de-reference 0xAFAFAFAFAFAFAFAF.

I still need to figure out where the best place to fix this is.



Reproduced with same icmpsic tool and the following QEMU 4.2.0 command line args:

./QEMU -pflash OVMF.fd \
       -netdev tap,id=hostnet0,ifname=tap0,script=no,downscript=no \
       -device virtio-net-pci,netdev=hostnet0,id=net0,mac=62:7a:7b:41:b8:f1,romfile=&apos;&apos; \
       -global isa-debugcon.iobase=0x402 -debugcon file:ovmf.log \
       -s -boot menu=on</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11428</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-25 11:44:42 +0000</bug_when>
    <thetext>Hi Nick,

many thanks for your analysis.

I&apos;d just like to explain my comment#12 -- I definitely didn&apos;t try to push you (or anyone else) to make progress on root-causing, or fixing, this bug. I was just going over a list of bugs, and here I wanted to reinforce the case that the order of operations on this BZ had been incorrect -- we should not have opened this up to the public, without having a patch.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11429</commentid>
    <comment_count>16</comment_count>
    <who name="nick">nicholas.armour</who>
    <bug_when>2020-02-25 13:02:08 +0000</bug_when>
    <thetext>The crash does not appear to be related to the actual contents of the packets being sent. The crash happens because a scenario arises where the packet being sent to the upper layer(the ip4 instance that ping uses), is recycled before it is consumed.


Ip4InstanceDeliverPacket in NetworkPkg/Ip4Dxe/Ip4Input.c seems to be where the packet is delivered to the instance. The packet is wrapped, and sent to the consumer if there is a RxToken with a receive event.

In this case, the receive event is Ping6OnEchoReplyReceived in ShellPkg/Library/UefiShellNetwork1CommandsLib/Ping.c



Ping6OnEchoReplyReceived  RxData-&gt;Header: 6F876A8
Ip4Input.c: RxData-&gt;Header: 6F7C6A8
Ping6OnEchoReplyReceived  RxData-&gt;Header: 6F7C6A8
Ip4Input.c: RxData-&gt;Header: 6F796A8
Ping6OnEchoReplyReceived  RxData-&gt;Header: 6F796A8
Ip4Input.c: RxData-&gt;Header: 6F78028
Ping6OnEchoReplyReceived  RxData-&gt;Header: AFAFAFAFAFAFAFAF</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11430</commentid>
    <comment_count>17</comment_count>
    <who name="nick">nicholas.armour</who>
    <bug_when>2020-02-25 13:07:38 +0000</bug_when>
    <thetext>I added debug prints that show the contents of the packet in Ip4Input.c:Ip4InstanceDeliverPacket are valid after being wrapped, and in the normal case, matches what Ping6OnEchoReplyReceived is reading.

The issue is, between the time Ip4InstanceDeliverPacket triggers the receive token event via gBS-&gt;SignalEvent (Token-&gt;Event);  ,and Ping6OnEchoReplyReceived tries to consume the packet, it has been recycled.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11431</commentid>
    <comment_count>18</comment_count>
    <who name="nick">nicholas.armour</who>
    <bug_when>2020-02-25 13:21:38 +0000</bug_when>
    <thetext>Heres a better debug log that shows what happens when things go wrong.. I copy and pasted wrong the first time...


Ip4Input.c: RxData-&gt;Header: 6FB7028
Ping6OnEchoReplyReceived  RxData-&gt;Header: 6FB7028
Ip4Input.c: RxData-&gt;Header: 6FAE6A8
Ping6OnEchoReplyReceived  RxData-&gt;Header: 6FAE6A8
Ip4Input.c: RxData-&gt;Header: 6F92028
Ping6OnEchoReplyReceived  RxData-&gt;Header: 6F92028
Ip4Input.c: RxData-&gt;Header: 6F89028
Ping6OnEchoReplyReceived  RxData-&gt;Header: 6F89028
Ip4Input.c: RxData-&gt;Header: 6F876A8
Ping6OnEchoReplyReceived  RxData-&gt;Header: 6F876A8
Ip4Input.c: RxData-&gt;Header: 6F7C6A8
Ping6OnEchoReplyReceived  RxData-&gt;Header: 6F7C6A8
Ip4Input.c: RxData-&gt;Header: 6F796A8
Ping6OnEchoReplyReceived  RxData-&gt;Header: 6F796A8
Ip4Input.c: RxData-&gt;Header: 6F78028
Ping6OnEchoReplyReceived  RxData-&gt;Header: AFAFAFAFAFAFAFAF</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11440</commentid>
    <comment_count>19</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-02-26 10:08:25 +0000</bug_when>
    <thetext>I have run the same scenario and observed the issue on OVMF built with the top of master branch. More debugs inprog.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11442</commentid>
    <comment_count>20</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-02-26 10:38:25 +0000</bug_when>
    <thetext>My debugs:
Ip4OnRecyclePacket: RxData: 5ECEED38, closing RecycleSignal event.  &lt;&lt; NATCH
Ip4OnRecyclePacket: Freeing wrap: 5ECEED18
Ip4OnRecyclePacket: Wrap freed: 5ECEED18
Ping6OnEchoReplyReceived: RxToken: 5ECF7658
Ping6OnEchoReplyReceived: RxData: 5ECEED38                          &lt;&lt; MATCH
Ping6OnEchoReplyReceived: RxData-&gt;Header: AFAFAFAFAFAFAFAF
&lt;&lt;&lt; Crash here &gt;&gt;&gt;

Wrap (including RxData) is being freed before the packet gets delivered.
Culprit to be identified.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11450</commentid>
    <comment_count>21</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-02-27 05:18:10 +0000</bug_when>
    <thetext>Oh, this is funny :)

File: ShellPkg/Library/UefiShellNetwork1CommandsLib/Ping.c
Function: Ping6OnEchoReplyReceived()

Bottom line: Ip4-&gt;Receive() is being called before triggering RecycleSignal.
See label ON_EXIT in Ping6OnEchoReplyReceived().

Ip4InstanceDeliverPacket: RxToken: 5ECF7658
Ip4InstanceDeliverPacket: RxData: 5ECF6DB8
Ip4InstanceDeliverPacket: RxData-&gt;Header: 5EF0A028
Ping6OnEchoReplyReceived: Signalling recycle event on RxToken: 5ECF7658, RxData: 5ECF6DB8
Ip4OnRecyclePacket: RxData: 5ECF6DB8, closing RecycleSignal event.
Ip4OnRecyclePacket: Freeing wrap: 5ECF6D98
Ip4OnRecyclePacket: Wrap freed: 5ECF6D98
Ping6OnEchoReplyReceived: RxToken: 5ECF7658
Ping6OnEchoReplyReceived: RxData: 5ECF6DB8
Ping6OnEchoReplyReceived: RxData-&gt;Header: AFAFAFAFAFAFAFAF

Remedy: Move RecycleSignal triggering at the beginning of ON_EXIT label. Verified on my setup that VM does not crash after that fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11452</commentid>
    <comment_count>22</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-02-27 06:07:21 +0000</bug_when>
    <thetext>Patch under review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11456</commentid>
    <comment_count>23</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 08:07:36 +0000</bug_when>
    <thetext>Patch on the list:

[edk2-devel] [PATCH v1] ShellPkg: Fix &apos;ping&apos; command Ip4 receive flow.
https://edk2.groups.io/g/devel/message/54995
http://mid.mail-archive.com/20200227110212.1070-1-maciej.rabeda@linux.intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11457</commentid>
    <comment_count>24</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 08:15:32 +0000</bug_when>
    <thetext>The patch is for ShellPkg, so I&apos;m updating the Package field on this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11985</commentid>
    <comment_count>25</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-04-01 06:56:45 +0000</bug_when>
    <thetext>Fix merged to EDK2.

https://github.com/tianocore/edk2/commit/65c73df44c61235ede84c5aa1d2eab6650844966</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>376</attachid>
            <date>2019-08-05 13:51:32 +0000</date>
            <delta_ts>2019-08-05 13:51:32 +0000</delta_ts>
            <desc>backtrace of crash</desc>
            <filename>bt.txt</filename>
            <type>text/plain</type>
            <size>8474</size>
            <attacher name="nick">nicholas.armour</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2384</bug_id>
          
          <creation_ts>2019-11-25 03:00:36 +0000</creation_ts>
          <short_desc>Tools: Enable GenBiosId to set timestamp as zero</short_desc>
          <delta_ts>2020-03-08 23:01:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10541</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-11-25 03:00:36 +0000</bug_when>
    <thetext>We need eliminate the effect of timestamp to verify the reproducible build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10542</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-11-25 03:00:55 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11620</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-08 22:57:04 +0000</bug_when>
    <thetext>Patch https://edk2.groups.io/g/devel/message/51268</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11621</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-08 22:59:22 +0000</bug_when>
    <thetext>commit to 8b72f720d53e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11622</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-08 23:01:00 +0000</bug_when>
    <thetext>Patch https://edk2.groups.io/g/devel/message/52457 to fix the regression issue 8b72f720d53e introduced by 8b72f720d53e that make GenBiosId failed if -ot is passed to this tool.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11623</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-08 23:01:47 +0000</bug_when>
    <thetext>commit to 8ed5b8c2440c60acc09714d35c6c09501e2a91bb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2269</bug_id>
          
          <creation_ts>2019-10-14 14:17:00 +0000</creation_ts>
          <short_desc>complete ARM support in DynamicTablesPkg</short_desc>
          <delta_ts>2020-10-01 03:07:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Sami Mujawar">sami.mujawar</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10012</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-14 14:17:00 +0000</bug_when>
    <thetext>SUPPORTED_ARCHITECTURES in &quot;DynamicTablesPkg/DynamicTablesPkg.dsc&quot; says
&quot;ARM|AARCH64&quot;. There are two problems with that:

- there are no ACPI bindings for 32-bit ARM, so generating ACPI tables
dynamically on 32-bit ARM is not useful,

- the package does not build for 32-bit ARM. The build error is:

&gt;| &quot;arm-linux-gnu-gcc&quot; \
&gt;|   -o edk2/Build/DynamicTables/DEBUG_GCC5/ARM/DynamicTablesPkg/Drivers/DynamicTableFactoryDxe/DynamicTableFactoryDxe/DEBUG/DynamicTableFactoryDxe.dll \
&gt;|   -Wl,--emit-relocs \
&gt;|   -nostdlib \
&gt;|   -Wl,--gc-sections \
&gt;|   -u _ModuleEntryPoint \
&gt;|   -Wl,-e,_ModuleEntryPoint,-Map,edk2/Build/DynamicTables/DEBUG_GCC5/ARM/DynamicTablesPkg/Drivers/DynamicTableFactoryDxe/DynamicTableFactoryDxe/DEBUG/DynamicTableFactoryDxe.map \
&gt;|   -z common-page-size=0x20 \
&gt;|   -Wl,--pic-veneer \
&gt;|   -Wl,--oformat=elf32-littlearm \
&gt;|   -flto \
&gt;|   -Os \
&gt;|   -Ledk2/ArmPkg/Library/GccLto \
&gt;|   -llto-arm \
&gt;|   -Wl,-plugin-opt=-pass-through=-llto-arm \
&gt;|   -Wl,--start-group,@edk2/Build/DynamicTables/DEBUG_GCC5/ARM/DynamicTablesPkg/Drivers/DynamicTableFactoryDxe/DynamicTableFactoryDxe/OUTPUT/static_library_files.lst,--end-group \
&gt;|   -mthumb \
&gt;|   -march=armv7-a \
&gt;|   -g \
&gt;|   -Os \
&gt;|   -fshort-wchar \
&gt;|   -fno-builtin \
&gt;|   -fno-strict-aliasing \
&gt;|   -Wall \
&gt;|   -Werror \
&gt;|   -Wno-array-bounds \
&gt;|   -include AutoGen.h \
&gt;|   -fno-common \
&gt;|   -mlittle-endian \
&gt;|   -mabi=aapcs \
&gt;|   -fno-short-enums \
&gt;|   -funsigned-char \
&gt;|   -ffunction-sections \
&gt;|   -fdata-sections \
&gt;|   -fomit-frame-pointer \
&gt;|   -Wno-address \
&gt;|   -mthumb \
&gt;|   -mfloat-abi=soft \
&gt;|   -fno-pic \
&gt;|   -fno-pie \
&gt;|   -fstack-protector \
&gt;|   -mword-relocations \
&gt;|   -flto \
&gt;|   -Wno-unused-but-set-variable \
&gt;|   -Wno-unused-const-variable \
&gt;|   -DDISABLE_NEW_DEPRECATED_INTERFACES \
&gt;|   -Wl,--script=edk2/BaseTools/Scripts/GccBase.lds \
&gt;|   -Wl,--defsym=PECOFF_HEADER_SIZE=0x220 \
&gt;|   -Wno-error
&gt;|
&gt;| /tmp/ccaqvBFf.ltrans10.ltrans.o: In function `PL011UartInitializePort&apos;:
&gt;| edk2/ArmPlatformPkg/Library/PL011UartLib/PL011UartLib.c:191: undefined reference to `__aeabi_uldivmod&apos;
&gt;|
&gt;| edk2/Build/DynamicTables/DEBUG_GCC5/ARM/MdePkg/Library/BaseLib/BaseLib/OUTPUT/BaseLib.lib(Math64.obj): In function `InternalMathDivU64x32&apos;:
&gt;| (.text+0x18c): undefined reference to `__udivdi3&apos;
&gt;|
&gt;| edk2/Build/DynamicTables/DEBUG_GCC5/ARM/MdePkg/Library/BaseLib/BaseLib/OUTPUT/BaseLib.lib(Math64.obj): In function `InternalMathModU64x32&apos;:
&gt;| (.text+0x1a0): undefined reference to `__umoddi3&apos;
&gt;|
&gt;| edk2/Build/DynamicTables/DEBUG_GCC5/ARM/MdePkg/Library/BaseLib/BaseLib/OUTPUT/BaseLib.lib(Math64.obj): In function `InternalMathDivRemU64x32&apos;:
&gt;| (.text+0x1d8): undefined reference to `__umoddi3&apos;
&gt;|
&gt;| edk2/Build/DynamicTables/DEBUG_GCC5/ARM/MdePkg/Library/BaseLib/BaseLib/OUTPUT/BaseLib.lib(Math64.obj): In function `L22&apos;:
&gt;| (.text+0x1f0): undefined reference to `__udivdi3&apos;
&gt;|
&gt;| edk2/Build/DynamicTables/DEBUG_GCC5/ARM/MdePkg/Library/BaseLib/BaseLib/OUTPUT/BaseLib.lib(Math64.obj): In function `InternalMathDivRemU64x64&apos;:
&gt;| (.text+0x224): undefined reference to `__umoddi3&apos;
&gt;|
&gt;| edk2/Build/DynamicTables/DEBUG_GCC5/ARM/MdePkg/Library/BaseLib/BaseLib/OUTPUT/BaseLib.lib(Math64.obj): In function `L26&apos;:
&gt;| (.text+0x23c): undefined reference to `__udivdi3&apos;
&gt;|
&gt;| edk2/Build/DynamicTables/DEBUG_GCC5/ARM/MdePkg/Library/BaseLib/BaseLib/OUTPUT/BaseLib.lib(Math64.obj): In function `InternalMathDivRemS64x64&apos;:
&gt;| (.text+0x270): undefined reference to `__moddi3&apos;
&gt;|
&gt;| edk2/Build/DynamicTables/DEBUG_GCC5/ARM/MdePkg/Library/BaseLib/BaseLib/OUTPUT/BaseLib.lib(Math64.obj): In function `L30&apos;:
&gt;| (.text+0x288): undefined reference to `__divdi3&apos;

Please remove ARM from SUPPORTED_ARCHITECTURES. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12394</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:18:50 +0000</bug_when>
    <thetext>Ping Sami -- this issue is still relevant.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12397</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-05 21:45:17 +0000</bug_when>
    <thetext>Assign it to DynamicTablesPkg owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13832</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-29 14:26:12 +0000</bug_when>
    <thetext>Ping Sami -- do you plan to fix this please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13835</commentid>
    <comment_count>4</comment_count>
    <who name="Sami Mujawar">sami.mujawar</who>
    <bug_when>2020-09-29 14:54:56 +0000</bug_when>
    <thetext>This issue has been fixed by patch https://edk2.groups.io/g/devel/topic/34544264#49005

the corresponding changes have been merged in edk2 master at https://github.com/tianocore/edk2/commit/91f98c908627f4cde8f7139c80e8004b79d1d0ba#diff-f672c74a089b51576fb78708d1ff4038</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13852</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-01 03:07:11 +0000</bug_when>
    <thetext>Ah, I see -- so 32-bit ARM support has been implemented. I&apos;m going to update the BZ title now. Thanks!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2735</bug_id>
          
          <creation_ts>2020-05-20 22:09:59 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-20 22:16:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2736</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12584</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:09:59 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12601</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:16:28 +0000</bug_when>
    <thetext>Oops. Too much automation.

*** This bug has been marked as a duplicate of bug 2736 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2525</bug_id>
          
          <creation_ts>2020-02-12 17:41:56 +0000</creation_ts>
          <short_desc>MdePkg/BaseSafeIntLib - Some VS20xx IA32 optimized builds fail with unresolved _allmul symbol</short_desc>
          <delta_ts>2020-03-03 20:37:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11231</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-12 17:41:56 +0000</bug_when>
    <thetext>The BaseSafeIntLib generates linker errors for an unresolved intrinsic
symbol _allmul.  This is from 64-bit multiplication operations in the
SafeIntLib function SafeUint64Mult().

This issue appears when target unit tests for BaseSafeIntLib were added
to the MdePkg.dsc file and VS2012 and VS2013 builds for IA32 were run.

The 64-bit multiply operations in this function guarantee that the
upper 32-bits are always zero, so the BaseLib function MulU64x64()
can be safely used instead of &apos;*&apos; to detect overflow conditions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11232</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-12 17:42:06 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11233</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-12 17:50:13 +0000</bug_when>
    <thetext>Patch email for review
    https://edk2.groups.io/g/devel/message/54309

GitHub branch for review
    https://github.com/mdkinney/edk2/tree/Bug_2525_BaseSafeIntLib_IA32_VS_Compat</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11502</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-03 20:37:36 +0000</bug_when>
    <thetext>Fix at 02b7b861b18afd1744f462878060abda38eccb44</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2989</bug_id>
          
          <creation_ts>2020-09-25 12:21:55 +0000</creation_ts>
          <short_desc>In PciBusDxe\PciOptionRomSupport.c increase the width if the data read during oprom shadow to at least 32bits</short_desc>
          <delta_ts>2022-01-21 20:16:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sumana Venur">sumana.venur</reporter>
          <assigned_to name="Sumana Venur">sumana.venur</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13806</commentid>
    <comment_count>0</comment_count>
    <who name="Sumana Venur">sumana.venur</who>
    <bug_when>2020-09-25 12:21:55 +0000</bug_when>
    <thetext>In a TGL+GFX design customers and internally within Intel we are seeing long times spent on shadowing oprom from GFX SPI chip to TGL system memory. Currently in PciBusDxe\PciOptionRomSupport.c we are using 8 bit read cycles. This needs to be wider, at least 32bit (even 64bit) reads to reduce the time for oprom shadow</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13807</commentid>
    <comment_count>1</comment_count>
    <who name="Sumana Venur">sumana.venur</who>
    <bug_when>2020-09-25 12:39:22 +0000</bug_when>
    <thetext>(In reply to Sumana Venur from comment #0)
&gt; In platform+gfx card pairings, we are seeing long
&gt; times spent on shadowing oprom from GFX SPI chip to TGL system memory.
&gt; Currently in PciBusDxe\PciOptionRomSupport.c we are using 8 bit read cycles.
&gt; This needs to be wider, at least 32bit (even 64bit) reads to reduce the time
&gt; for oprom shadow</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13826</commentid>
    <comment_count>2</comment_count>
    <who name="Sumana Venur">sumana.venur</who>
    <bug_when>2020-09-29 01:26:35 +0000</bug_when>
    <thetext>Confirmed that this change is needed to cater to large oprom shadow scenarios</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14749</commentid>
    <comment_count>3</comment_count>
    <who name="Sumana Venur">sumana.venur</who>
    <bug_when>2021-01-06 19:05:30 +0000</bug_when>
    <thetext>patch sent for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18192</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-21 20:16:36 +0000</bug_when>
    <thetext>Patch Review Email:
    https://edk2.groups.io/g/devel/message/69920

PR:
    https://github.com/tianocore/edk2/pull/1728

Commit:
    https://github.com/tianocore/edk2/pull/1728/commits/d2f3fe3b054300c158290669b3af1c93d4c8959e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2188</bug_id>
          
          <creation_ts>2019-09-12 03:51:50 +0000</creation_ts>
          <short_desc>build single issue:&apos;PlatformInfo&apos; object has no attribute &apos;DynamicPcdList&apos;</short_desc>
          <delta_ts>2019-09-18 21:51:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9641</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-12 03:51:50 +0000</bug_when>
    <thetext>D:\AllPkg\edk2&gt;build -p MdeModulePkg\MdeModulePkg.dsc -m MdeModulePkg\Universal\PCD\Pei\Pcd.inf -a IA32

build.py...
: error C0DE: Unknown fatal error when processing [d:\allpkg\edk2\MdeModulePkg\Universal\PCD\Pei\Pcd.inf]

(Please send email to devel@edk2.groups.io for help, attaching following call stack trace!)

(Python 3.7.0 on win32) Traceback (most recent call last):
  File &quot;D:\AllPkg\edk2\BaseTools\Source\Python\build\build.py&quot;, line 2493, in Main
    MyBuild.Launch()
  File &quot;D:\AllPkg\edk2\BaseTools\Source\Python\build\build.py&quot;, line 2293, in Launch
    self._BuildModule()
  File &quot;D:\AllPkg\edk2\BaseTools\Source\Python\build\build.py&quot;, line 1866, in _BuildModule
    Ma.CreateCodeFile(True)
  File &quot;D:\AllPkg\edk2\BaseTools\Source\Python\AutoGen\ModuleAutoGen.py&quot;, line 1850, in CreateCodeFile
    for File in self.AutoGenFileList:
  File &quot;D:\AllPkg\edk2\BaseTools\Source\Python\Common\caching.py&quot;, line 28, in __get__
    Value = obj.__dict__[self._function.__name__] = self._function(obj)
  File &quot;D:\AllPkg\edk2\BaseTools\Source\Python\AutoGen\ModuleAutoGen.py&quot;, line 963, in AutoGenFileList
    GenC.CreateCode(self, AutoGenC, AutoGenH, StringH, AutoGenUniIdf, UniStringBinBuffer, StringIdf, AutoGenUniIdf, IdfG
enBinBuffer)
  File &quot;D:\AllPkg\edk2\BaseTools\Source\Python\AutoGen\GenC.py&quot;, line 2033, in CreateCode
    CreatePcdCode(Info, AutoGenC, AutoGenH)
  File &quot;D:\AllPkg\edk2\BaseTools\Source\Python\AutoGen\GenC.py&quot;, line 1665, in CreatePcdCode
    CreatePcdDatabaseCode(Info, AutoGenC, AutoGenH)
  File &quot;D:\AllPkg\edk2\BaseTools\Source\Python\AutoGen\GenPcdDb.py&quot;, line 874, in CreatePcdDatabaseCode
    AdditionalAutoGenH, AdditionalAutoGenC, PcdDbBuffer = NewCreatePcdDatabasePhaseSpecificAutoGen (Info.PlatformInfo, &apos;
PEI&apos;)
  File &quot;D:\AllPkg\edk2\BaseTools\Source\Python\AutoGen\GenPcdDb.py&quot;, line 952, in NewCreatePcdDatabasePhaseSpecificAutoG
en
    DynamicPcds = Platform.DynamicPcdList
AttributeError: &apos;PlatformInfo&apos; object has no attribute &apos;DynamicPcdList&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9689</commentid>
    <comment_count>1</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-16 22:46:03 +0000</bug_when>
    <thetext>fix it in b67735a7e8e962b74120bad956d9a0734f784472</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2652</bug_id>
          
          <creation_ts>2020-03-31 21:03:14 +0000</creation_ts>
          <short_desc>Returning at start of function directly will block image execution</short_desc>
          <delta_ts>2020-04-22 05:43:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>guomin.jiang</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11956</commentid>
    <comment_count>0</comment_count>
      <attachid>503</attachid>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-31 21:03:14 +0000</bug_when>
    <thetext>Created attachment 503
MeasureBootHandlerImprovement

I found it will return directly at start of DxeTpm2MeasureBootHandler and DxeTpmMeasureBootHandler.
It will block the execution for memory image, so i suggest to move the judgement after to GetImageInfo.

Attachment is a example.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11957</commentid>
    <comment_count>1</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-31 21:14:23 +0000</bug_when>
    <thetext>Post patch at message https://edk2.groups.io/g/devel/message/56805.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12106</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:10:21 +0000</bug_when>
    <thetext>Is the patch merged or not? Please confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12146</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-08 07:31:41 +0000</bug_when>
    <thetext>Review still on-going.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12226</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-17 00:08:03 +0000</bug_when>
    <thetext>Post PATCHv2 at https://edk2.groups.io/g/devel/message/57454.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12273</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-22 05:43:49 +0000</bug_when>
    <thetext>Fix in c6a60cf4b99069f55325675c7c7e98b510f4b224...b447a20bdfb2ff24ba048bb3026c902c4768a7e9</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>503</attachid>
            <date>2020-03-31 21:03:14 +0000</date>
            <delta_ts>2020-03-31 21:03:14 +0000</delta_ts>
            <desc>MeasureBootHandlerImprovement</desc>
            <filename>0001-SecurityPkg-MeasureBootLib-Return-EFI_ACCESS_DENIED-.patch</filename>
            <type>application/octet-stream</type>
            <size>3006</size>
            <attacher>guomin.jiang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2429</bug_id>
          
          <creation_ts>2019-12-18 21:33:04 +0000</creation_ts>
          <short_desc>[UefiCpuPkg/MpInitLib] Reduce the copy size when loading microcode patches data into memory</short_desc>
          <delta_ts>2020-01-01 22:14:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10730</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-18 21:33:04 +0000</bug_when>
    <thetext>When loading the microcode patches data into memory, the current implementation
of MpInitLib will refer to the PCD pair:

gUefiCpuPkgTokenSpaceGuid.PcdCpuMicrocodePatchAddress
gUefiCpuPkgTokenSpaceGuid.PcdCpuMicrocodePatchRegionSize

to decide the range that will be loaded from flash to memory.

It is found that on many platforms, the microcode patch binary file usually
will not consume the whole range of the region specified by the above PCD pair.
In such case, loading the whole range into memory will include copying many
useless data.

It is also found that some microcode patch binary files may contain multiple
microcode patches that are for processors with various CPUID and Platform ID.
We can collect the information of the processors within the system so that only
microcode patch with certain CPUID and Platform ID combinations will be loaded
into memory.

By reducing the size of microcode patch data being loaded into memory, the boot
performance can be boosted by accessing less data from flash.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10731</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-18 21:33:42 +0000</bug_when>
    <thetext>Take this one and will provide patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10746</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-23 20:40:44 +0000</bug_when>
    <thetext>V1 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/52509</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10751</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-25 20:11:32 +0000</bug_when>
    <thetext>V2 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/52554

V3 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/52566</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10755</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-27 02:33:23 +0000</bug_when>
    <thetext>V4 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/52581</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10763</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-30 19:50:20 +0000</bug_when>
    <thetext>V5 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/52613</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10767</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-01-01 22:14:12 +0000</bug_when>
    <thetext>Resolved via commits:
https://github.com/tianocore/edk2/commit/999463c865d3768a8432a89508096ae6a43873a5
https://github.com/tianocore/edk2/commit/d786a1723203e91c92615c58d217e35b0d894004</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2785</bug_id>
          
          <creation_ts>2020-06-05 19:46:18 +0000</creation_ts>
          <short_desc>OvmfPkg/X86QemuLoadImageLib does not recognize EFI_ACCESS_DENIED from LoadImage()</short_desc>
          <delta_ts>2020-06-09 16:20:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12805</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-05 19:46:18 +0000</bug_when>
    <thetext>When an image fails Secure Boot validation, LoadImage() returns
EFI_SECURITY_VIOLATION if the platform policy is
DEFER_EXECUTE_ON_SECURITY_VIOLATION.

If the platform policy is DENY_EXECUTE_ON_SECURITY_VIOLATION, then
LoadImage() returns EFI_ACCESS_DENIED (and the image does not remain
loaded).

(Before bug 2129, this difference would be masked, as
DxeImageVerificationLib would incorrectly return EFI_SECURITY_VIOLATION
for DENY_EXECUTE_ON_SECURITY_VIOLATION as well.)

As of commit 7191dd3c5990, X86QemuLoadImageLib recognizes
EFI_SECURITY_VIOLATION, and proceeds to the legacy Linux/x86 Boot
Protocol. X86QemuLoadImageLib does not recognize EFI_ACCESS_DENIED,
although the same action should be taken (except for unloading the
image).

I&apos;ll send a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12806</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-05 19:53:49 +0000</bug_when>
    <thetext>Posted

* [edk2-devel] [PATCH]
  OvmfPkg/X86QemuLoadImageLib: handle EFI_ACCESS_DENIED from LoadImage()

http://mid.mail-archive.com/20200605235242.32442-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/60825</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12827</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-09 16:20:19 +0000</bug_when>
    <thetext>Merged as commit dafce295e6f4 via &lt;https://github.com/tianocore/edk2/pull/671&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2209</bug_id>
          
          <creation_ts>2019-09-23 22:18:59 +0000</creation_ts>
          <short_desc>MdeModulePkg: Enable/Disable S3BootScript dynamically.</short_desc>
          <delta_ts>2019-09-24 01:50:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2212</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9753</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-09-23 22:18:59 +0000</bug_when>
    <thetext>Current S3BootScriptLib can only support build time opt-out but in binary model the same binary should support both enabling and disabling S3BootScript.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9760</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-09-24 01:50:22 +0000</bug_when>
    <thetext>This is feature request, not bug, so filed correct ticket and close this one.

*** This bug has been marked as a duplicate of bug 2212 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2566</bug_id>
          
          <creation_ts>2020-03-01 11:07:06 +0000</creation_ts>
          <short_desc>use loadimage/startimage for loading the kernel passed via the QEMU command line</short_desc>
          <delta_ts>2020-03-05 14:50:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>2564</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11481</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-01 11:07:06 +0000</bug_when>
    <thetext>Currently, OVMF uses a special Linux loader library to load the kernel into memory, and execute it by branching into its entry code, without using LoadImage or StartImage at all.

This means that on OVMF builds that enable secure boot or measured boot, the kernel itself does not get authenticated and/or measured. In general, it means that calls to the Exit() boot service from within the Linux EFI stub will seem to originate from the BDS, which may cause unexpected result.

So instead, OVMF should use LoadImage and StartImage where possible, and only fall back to the Linux loader library for cases where it cannot, i.e., images that lack a PE/COFF header, or that were built for X86 and execute on a IA32 platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11484</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-02 08:20:51 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH 00/13]
  Ovmf: use LoadImage/StartImage for loading command line images

https://edk2.groups.io/g/devel/message/55139
http://mid.mail-archive.com/20200302072936.29221-1-ard.biesheuvel@linaro.org</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11533</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-04 12:07:32 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v2 00/14]
  Ovmf: use LoadImage/StartImage for loading command line images

https://edk2.groups.io/g/devel/message/55381
http://mid.mail-archive.com/20200304095233.21046-1-ard.biesheuvel@linaro.org</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11562</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-05 09:43:12 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v3 00/14]
  Ovmf: use LoadImage/StartImage for loading command line images

https://edk2.groups.io/g/devel/message/55523
http://mid.mail-archive.com/20200305134607.20125-1-ard.biesheuvel@linaro.org</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11563</commentid>
    <comment_count>4</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-05 14:50:29 +0000</bug_when>
    <thetext>v3 pushed as 7288ff4095c...ced77332cab626f35
(after applying Laszlo&apos;s R-b to #9 and #10)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2803</bug_id>
          
          <creation_ts>2020-06-14 17:00:06 +0000</creation_ts>
          <short_desc>Increase host based unit test stack size to a minimum of 256KB</short_desc>
          <delta_ts>2020-07-31 18:08:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12870</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-14 17:00:06 +0000</bug_when>
    <thetext>Some host based unit tests run under Windows have generated exceptions
from running out of stack space.

The UEFI Specification defines the minimum stack size before
ExitBootServices() to be 128KB, which means the code under test
could use up to 128 KB.  When running a host based unit test, there
may be also additional stack overhead from the host application
environment and cmocka and mocked interfaces.

Update the build flags to set the size of the stack to a minimum
of 256KB which is double the UEFI Specification requirement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12871</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-14 17:00:25 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13257</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 17:59:32 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13258</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 17:59:54 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13259</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:00:11 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13270</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:08:31 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/5d29e2d020e8b0ad70f3f766c38429c3bfad0d41
https://github.com/tianocore/edk2/commit/9a6c4ac68e3d9590cf17914e07e929a1f0e7c190
https://github.com/tianocore/edk2/commit/133891b712a9ceda0fbdb9649b559773e4cdc6db
https://github.com/tianocore/edk2/commit/75e92c13541672a3af349067a040b9dda3d4452d
https://github.com/tianocore/edk2/commit/26824851b041d9e81921ec7ef97220d2a2576157
https://github.com/tianocore/edk2/commit/425df6923ec00df32bb6f20d1440a2e920f0e1e7
https://github.com/tianocore/edk2/commit/77e42ca4dfbf51918d677f32ab64bb99dd07cc40
https://github.com/tianocore/edk2/commit/813c2b15255406f587484ffcedfd01ca9ab5d056
https://github.com/tianocore/edk2/commit/f08715947ad52ee4fd67358660860ea63a532e15
https://github.com/tianocore/edk2/commit/35f9d7c41b380d67953dabc5994a65e32baa7d39
https://github.com/tianocore/edk2/commit/a0a49eb87c5819a76a0a5fea81d2b51ffdfcb3aa
https://github.com/tianocore/edk2/commit/540fd45f755f1646e019099c90c9f59286604228
https://github.com/tianocore/edk2/commit/d3c9e40abcc839f59d56b7fca7787647533d96fe
https://github.com/tianocore/edk2/commit/0a81a98e900118857395b101f413c1c17b66c073
https://github.com/tianocore/edk2/commit/9af8a299cec10656b757ae30a71c1310260d3c31
https://github.com/tianocore/edk2/commit/5b86bbf891677882a9d097f87cd0128562c12c43

Pull Request:

https://github.com/tianocore/edk2/pull/779</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2692</bug_id>
          
          <creation_ts>2020-04-23 15:37:58 +0000</creation_ts>
          <short_desc>BrotliCompress submodule change for BaseTools causes untracked files in BaseTools after building</short_desc>
          <delta_ts>2020-05-11 21:24:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2558</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12305</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-23 15:37:58 +0000</bug_when>
    <thetext>The obj files are created during build and not ignored.  This is generally not desired.  
Either need to configure the output to move to location that is ignored or add these to the .gitignore.

        c/common/dictionary.obj
        c/common/transform.obj
        c/dec/bit_reader.obj
        c/dec/decode.obj
        c/dec/huffman.obj
        c/dec/state.obj
        c/enc/backward_references.obj
        c/enc/backward_references_hq.obj
        c/enc/bit_cost.obj
        c/enc/block_splitter.obj
        c/enc/brotli_bit_stream.obj
        c/enc/cluster.obj
        c/enc/compress_fragment.obj
        c/enc/compress_fragment_two_pass.obj
        c/enc/dictionary_hash.obj
        c/enc/encode.obj
        c/enc/encoder_dict.obj
        c/enc/entropy_encode.obj
        c/enc/histogram.obj
        c/enc/literal_cost.obj
        c/enc/memory.obj
        c/enc/metablock.obj
        c/enc/static_dict.obj
        c/enc/utf8_util.obj
        c/tools/brotli.obj</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12311</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-24 11:32:07 +0000</bug_when>
    <thetext>Thanks for filing this ticket. I&apos;ve noticed the issue too, just couldn&apos;t get around reporting it. So I&apos;m confirming it now.

(The feature introducing this problem has been tracked under bug 2558, for reference.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12312</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-24 11:33:39 +0000</bug_when>
    <thetext>I&apos;ve marked this as a &quot;regression&quot; because it regresses the behavior of &quot;git status&quot; -- it reports a dirty working tree even if files in the edk2 superproject are pristine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12320</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-26 01:15:07 +0000</bug_when>
    <thetext>I think we can modify .gitmodules like below.

[submodule &quot;BaseTools/Source/C/BrotliCompress/brotli&quot;]
    path = BaseTools/Source/C/BrotliCompress/brotli
    url = https://github.com/google/brotli
 +  ignore = untracked

This solution can ignore the obj files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12321</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-26 07:29:50 +0000</bug_when>
    <thetext>Shenglei: can ignore *.obj and *.o only?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12322</commentid>
    <comment_count>5</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-04-26 20:50:34 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #4)
&gt; Shenglei: can ignore *.obj and *.o only?

Currently I haven&apos;t find a solution. But I think it&apos;s ok to ignore all untracked files in submodule.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12477</commentid>
    <comment_count>6</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-05-11 21:24:56 +0000</bug_when>
    <thetext>Fixed at edk2: b2034179e8feed9c7d3bc8f9d40a18fd236c5b57</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2587</bug_id>
          
          <creation_ts>2020-03-11 00:46:08 +0000</creation_ts>
          <short_desc>SmmAccessLib.h and ConfigBlockLib.h need to be added to IntelSiliconPkg.dec</short_desc>
          <delta_ts>2020-04-13 01:54:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11660</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-11 00:46:08 +0000</bug_when>
    <thetext>Missing LibraryClass declarations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11722</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-17 22:14:01 +0000</bug_when>
    <thetext>Bret: how do you find this issue? 

Guomin: please work the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11728</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-17 23:34:18 +0000</bug_when>
    <thetext>Bret: Could you provide more detail?

Best Regards</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11808</commentid>
    <comment_count>3</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-24 13:46:30 +0000</bug_when>
    <thetext>Sorry, I missed your follow up questions.

I found this issue when I added IntelSiliconPkg to the EDK2 CI. The LibraryClasses validation found it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12123</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:30:46 +0000</bug_when>
    <thetext>Guomin: any update on this one. If it is fixed, can it be closed?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12193</commentid>
    <comment_count>5</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-13 01:54:37 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2-platforms/commit/1b11c8e10ced86bb186f722a44e30cd81079506d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2484</bug_id>
          
          <creation_ts>2020-01-23 17:52:18 +0000</creation_ts>
          <short_desc>PatchCheck: Do not enforce no tabs or CR/LF on file .gitmodules</short_desc>
          <delta_ts>2020-03-03 21:00:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10973</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-23 17:52:18 +0000</bug_when>
    <thetext>The file .gitmodules is update by git when submodules are added or removed.
When a submodule is added, the .gitmodules files has a patch that includes tab characters and LF line endings.

PatchCheck sees these as errors that fail EDK II CI checks.

PatchCheck should be updated to:
* Allow tabs in .gitmodules files
* Allow LF line endings in .gitmodules files</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10974</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-23 17:53:03 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10977</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-23 18:11:44 +0000</bug_when>
    <thetext>Patch for review

https://edk2.groups.io/g/devel/message/53457</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11509</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-03 21:00:26 +0000</bug_when>
    <thetext>Fix at c8b8157e126ae2fb6f65842677251d300ceff104</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2945</bug_id>
          
          <creation_ts>2020-08-31 04:09:42 +0000</creation_ts>
          <short_desc>variable &apos;Status&apos; is used uninitialized</short_desc>
          <delta_ts>2020-09-01 13:13:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13578</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-08-31 04:09:42 +0000</bug_when>
    <thetext>In Tcg2Pei.c, line 459, variable &apos;Status&apos; is used uninitialized when &apos;if&apos; condition ((Flags &amp; EDKII_TCG_PRE_HASH) != 0 || (Flags &amp; EDKII_TCG_PRE_HASH_LOG_ONLY) != 0) is True and ((Flags &amp; EDKII_TCG_PRE_HASH) !=0 ) is false.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13592</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-01 11:58:43 +0000</bug_when>
    <thetext>Patch on the list from Zhiguang:

* [edk2-devel] [PATCH]
  SecurityPkg: Initailize variable Status before it is consumed.

https://edk2.groups.io/g/devel/message/64865
http://mid.mail-archive.com/20200901005505.1722-1-zhiguang.liu@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13593</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-01 13:13:58 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; Patch on the list from Zhiguang:
&gt; 
&gt; * [edk2-devel] [PATCH]
&gt;   SecurityPkg: Initailize variable Status before it is consumed.
&gt; 
&gt; https://edk2.groups.io/g/devel/message/64865
&gt; http://mid.mail-archive.com/20200901005505.1722-1-zhiguang.liu@intel.com

Merged as commit 46db105b7b77, via &lt;https://github.com/tianocore/edk2/pull/909&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2358</bug_id>
          
          <creation_ts>2019-11-19 10:42:45 +0000</creation_ts>
          <short_desc>spelling mistake, &quot;formated&quot; should be &quot;formatted&quot;</short_desc>
          <delta_ts>2020-04-14 08:26:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>maciej.rabeda</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10474</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-19 10:42:45 +0000</bug_when>
    <thetext>Across the entire EDK2 tree, &quot;formated&quot; should be &quot;formatted&quot;:

EmulatorPkg/Include/Library/SmbiosLib.h:/// The SMBIOS_TABLE_STRING types in the formated area must match the
MdeModulePkg/Bus/Usb/UsbBusDxe/UsbDesc.c:      DEBUG (( EFI_D_ERROR, &quot;UsbParseConfigDesc: mal-formated interface descriptor\n&quot;));
NetworkPkg/Dhcp4Dxe/Dhcp4Option.c:  @retval EFI_INVALID_PARAMETER  The DHCP option is mal-formated
NetworkPkg/Dhcp4Dxe/Dhcp4Option.c:  @retval EFI_INVALID_PARAMETER  The options are mal-formated.
NetworkPkg/Dhcp4Dxe/Dhcp4Option.c:  @retval EFI_SUCCESS            The DHCP packet&apos;s options are well formated
NetworkPkg/Dhcp4Dxe/Dhcp4Option.c:  @retval EFI_INVALID_PARAMETER  The DHCP packet&apos;s options are not well formated
NetworkPkg/Dhcp4Dxe/Dhcp4Option.c:  @retval EFI_INVALID_PARAMETER  The options are mal-formated
NetworkPkg/Dhcp4Dxe/Dhcp4Option.c:  @retval EFI_INVALID_PARAMETER  The options are mal-formated
NetworkPkg/Dhcp4Dxe/Dhcp4Option.c:  @retval EFI_INVALID_PARAMETER  The options in SeekPacket are mal-formated
NetworkPkg/Dhcp4Dxe/Dhcp4Option.h:  @retval EFI_SUCCESS            The DHCP packet&apos;s options are well formated
NetworkPkg/Dhcp4Dxe/Dhcp4Option.h:  @retval EFI_INVALID_PARAMETER  The DHCP packet&apos;s options are not well formated
NetworkPkg/Dhcp4Dxe/Dhcp4Option.h:  @retval EFI_INVALID_PARAMETER  The options are mal-formated
NetworkPkg/Dhcp4Dxe/Dhcp4Option.h:  @retval EFI_INVALID_PARAMETER  The options are mal-formated
NetworkPkg/Dhcp4Dxe/Dhcp4Option.h:  @retval EFI_INVALID_PARAMETER  The options in SeekPacket are mal-formated
NetworkPkg/Ip4Dxe/Ip4Icmp.c:  @retval EFI_INVALID_PARAMETER  The packet is malformated.
NetworkPkg/Ip4Dxe/Ip4Icmp.h:  @retval EFI_INVALID_PARAMETER  The packet is malformated.
NetworkPkg/Ip4Dxe/Ip4Igmp.c:  @retval EFI_INVALID_PARAMETER  The IGMP message is malformated.
NetworkPkg/Ip4Dxe/Ip4Igmp.h:  @retval EFI_INVALID_PARAMETER  The IGMP message is malformated.
NetworkPkg/Ip4Dxe/Ip4Impl.c:  // make sure that token is properly formated
NetworkPkg/Ip4Dxe/Ip4Input.c:    // If the packet is properly formated, the last fragment&apos;s End
NetworkPkg/Ip4Dxe/Ip4Option.c:  @retval FALSE    The option is mal-formated
NetworkPkg/Ip4Dxe/Ip4Option.h:  if the option is mal-formated. But this information isn&apos;t used.
NetworkPkg/Ip4Dxe/Ip4Option.h:  @retval FALSE    The option is mal-formated
NetworkPkg/Ip6Dxe/Ip6Icmp.c:  @retval EFI_INVALID_PARAMETER  The packet is malformated.
NetworkPkg/Ip6Dxe/Ip6Icmp.c:  @retval EFI_INVALID_PARAMETER  The packet is malformated.
NetworkPkg/Ip6Dxe/Ip6Icmp.h:  @retval EFI_INVALID_PARAMETER  The packet is malformated.
NetworkPkg/Ip6Dxe/Ip6Icmp.h:  @retval EFI_INVALID_PARAMETER  The packet is malformated.
NetworkPkg/Ip6Dxe/Ip6Input.c:    // If the packet is properly formated, the last fragment&apos;s End
NetworkPkg/Library/DxeNetLib/DxeNetLib.c:  @retval EFI_INVALID_PARAMETER  The string is mal-formated or Ip4Address is NULL.
NetworkPkg/Library/DxeNetLib/DxeNetLib.c:  @retval EFI_INVALID_PARAMETER  The string is mal-formated or Ip6Address is NULL.
NetworkPkg/Library/DxeNetLib/DxeNetLib.c:  @retval EFI_INVALID_PARAMETER  The string is mal-formated or Ip4Address is NULL.
NetworkPkg/Library/DxeNetLib/DxeNetLib.c:  @retval EFI_INVALID_PARAMETER  The string is mal-formated or Ip6Address is NULL.
NetworkPkg/Library/DxeNetLib/DxeNetLib.c:  @retval EFI_INVALID_PARAMETER  The string is mal-formated or Ip6Address is NULL.
NetworkPkg/Library/DxeNetLib/DxeNetLib.c:    // Step 2: Skip over unformated string section.
NetworkPkg/Mtftp4Dxe/Mtftp4Option.c:  @retval EFI_INVALID_PARAMETER  The packet is mal-formated
NetworkPkg/Mtftp4Dxe/Mtftp4Option.c:                                 well-formated OACK packet.
NetworkPkg/Mtftp4Dxe/Mtftp4Option.c:  // The multicast option is formated like &quot;204.0.0.1,1857,1&quot;
NetworkPkg/Mtftp4Dxe/Mtftp4Option.c:  @retval EFI_INVALID_PARAMETER  The option is mal-formated
NetworkPkg/Mtftp4Dxe/Mtftp4Option.c:      // length string, otherwise, it is formated like &quot;204.0.0.1,1857,1\0&quot;
NetworkPkg/Mtftp4Dxe/Mtftp4Option.c:  @retval EFI_INVALID_PARAMETER  The packet option is mal-formated
NetworkPkg/Mtftp4Dxe/Mtftp4Option.h:                                 well-formated OACK packet.
NetworkPkg/Mtftp4Dxe/Mtftp4Option.h:  @retval EFI_INVALID_PARAMETER  The option is mal-formated
NetworkPkg/Mtftp4Dxe/Mtftp4Option.h:  @retval EFI_INVALID_PARAMETER  The packet option is mal-formated
NetworkPkg/Mtftp4Dxe/Mtftp4Rrq.c:        (UINT8 *) &quot;Mal-formated OACK packet&quot;
NetworkPkg/Mtftp4Dxe/Mtftp4Wrq.c:        (UINT8 *) &quot;Mal-formated OACK packet&quot;
NetworkPkg/Mtftp6Dxe/Mtftp6Option.c:  // The multicast option is formated like &quot;addr,port,mc&quot;
NetworkPkg/Mtftp6Dxe/Mtftp6Rrq.c:        (UINT8 *) &quot;Mal-formated OACK packet&quot;
NetworkPkg/Mtftp6Dxe/Mtftp6Wrq.c:        (UINT8 *) &quot;Mal-formated OACK packet&quot;
ShellPkg/Library/UefiShellAcpiViewCommandLib/AcpiParser.c:  formated using the format string if specified.
ShellPkg/Library/UefiShellAcpiViewCommandLib/AcpiParser.c:  formated using the format string if specified.
ShellPkg/Library/UefiShellAcpiViewCommandLib/AcpiParser.c:  formated using the format string if specified.
ShellPkg/Library/UefiShellAcpiViewCommandLib/AcpiParser.c:  formated using the format string if specified.
ShellPkg/Library/UefiShellAcpiViewCommandLib/AcpiParser.h:  formated using the format string if specified.
ShellPkg/Library/UefiShellAcpiViewCommandLib/AcpiParser.h:  formated using the format string if specified.
ShellPkg/Library/UefiShellAcpiViewCommandLib/AcpiParser.h:  formated using the format string if specified.
ShellPkg/Library/UefiShellAcpiViewCommandLib/AcpiParser.h:  formated using the format string if specified.
ShellPkg/Library/UefiShellDebug1CommandsLib/SmbiosView/LibSmbiosView.c:  // Look through unformated section</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10849</commentid>
    <comment_count>1</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-01-10 09:19:52 +0000</bug_when>
    <thetext>NetworkPkg: Already reviewed a patch done by Antoine Coeur and Philippe Mathieu-Daude which addresses this. Waiting for PR to tianocore/edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12204</commentid>
    <comment_count>2</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-04-14 08:26:01 +0000</bug_when>
    <thetext>Patch introduced by Antoine Coeur &amp; Phil Daude, merged by Larszlo Ersek.
https://github.com/tianocore/edk2/pull/357</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2833</bug_id>
          
          <creation_ts>2020-07-02 05:25:10 +0000</creation_ts>
          <short_desc>license check introduced for bug 2691 interferes with generated files</short_desc>
          <delta_ts>2023-01-03 04:09:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3880</dup_id>
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2691</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>rebecca</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13026</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-02 05:25:10 +0000</bug_when>
    <thetext>Commit a4cfb842fca9 (&quot;BaseTools/PatchCheck.py: Add LicenseCheck&quot;, 2020-06-12) introduced a license header check, for bug 2691.

There are two problems with that commit:

(1) the &quot;ReadMe.rst&quot; file in the project root states that &quot;Contributions of code put into the public domain can also be accepted&quot;; but the license check only accepts BSD-2-Clause, BSD-3-Clause, MIT, Python-2.0, Zlib.

(2) the license check prevents the tracking of generated source files (such as &quot;OvmfPkg/QemuVideoDxe/VbeShim.h&quot;). Such generated source files are not supposed to carry a license header or a copyright notice. For example:

&gt; //
&gt; // THIS FILE WAS GENERATED BY &quot;VbeShim.sh&quot;. DO NOT EDIT.
&gt; //

But &quot;PatchCheck.py&quot; now rejects commits that introduce such files.

Discussion on the list:

[edk2-devel] OvmfPkg: Adding support for bhyve as OvmfPkg/Bhyve
https://edk2.groups.io/g/devel/message/61746
http://mid.mail-archive.com/92612908-44f4-30d4-ae3a-3ad595e2141f@bsdio.com


The request here is to invent a new tag (to be used in file-top comments) that will identify the containing file as 100% generated. &quot;PatchCheck.py&quot; should recognize this tag, and skip the license check for such files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13028</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-02 05:32:00 +0000</bug_when>
    <thetext>I suggest recognizing the following string:

  @file: generated

At the time of this writing, there are no matches in either edk2 or edk2-platforms.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13089</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-07-13 00:55:14 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; I suggest recognizing the following string:
&gt; 
&gt;   @file: generated
&gt; 
&gt; At the time of this writing, there are no matches in either edk2 or
&gt; edk2-platforms.
&gt; 
&gt; Thanks.

I agree that generated files should be handled as special case.
But not every generated file starts with &quot;@file: generated&quot;.
So I think we can apply license check as a open ci plugin and add a config section like &quot;Ignorefiles&quot; in xxxpkg.yaml.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13092</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-13 10:42:59 +0000</bug_when>
    <thetext>OK, thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20390</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:09:18 +0000</bug_when>
    <thetext>This has been fixed under bug 3875 and bug 3880.

*** This bug has been marked as a duplicate of bug 3880 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2253</bug_id>
          
          <creation_ts>2019-10-09 05:40:31 +0000</creation_ts>
          <short_desc>StandaloneMmPkg build failure (IA32, X64 / DEBUG / GCC48)</short_desc>
          <delta_ts>2019-11-29 01:46:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Achin Gupta">achin.gupta</assigned_to>
          <cc>achin.gupta</cc>
    
    <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>stephano</cc>
    
    <cc>supreeth.venkatesh</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9977</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-09 05:40:31 +0000</bug_when>
    <thetext>At commit 2de1f611be06, StandaloneMmPkg doesn&apos;t build for either IA32 or
X64, despite StandaloneMmPkg/StandaloneMmPkg.dsc having

  SUPPORTED_ARCHITECTURES        = IA32|X64|AARCH64

The error message is:

&gt;| StandaloneMmPkg/StandaloneMmPkg.dsc(...): error 4000: Instance of library class [CacheMaintenanceLib] is not found
&gt;|         in [StandaloneMmPkg/Core/StandaloneMmCore.inf] [IA32]

This was discussed earlier on the list:

(1) http://mid.mail-archive.com/3c8a28f6-d921-cde2-0195-08efce528701@redhat.com
    https://edk2.groups.io/g/devel/message/47276

(2) http://mid.mail-archive.com/74D8A39837DF1E4DA445A8C0B3885C503F7B0A2F@shsmsx102.ccr.corp.intel.com
    https://edk2.groups.io/g/devel/message/47283

Please remove IA32 and X64 from SUPPORTED_ARCHITECTURES, until support
for the respective arches is merged into StandaloneMmPkg. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10071</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:27:03 +0000</bug_when>
    <thetext>Please remove these arch&apos;s that are not supported.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10509</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-21 11:04:50 +0000</bug_when>
    <thetext>Patch on the list from Sami:

[edk2-devel] [PATCH v1 1/1] StandaloneMmPkg: Fix build failure - Bug 2253
http://mid.mail-archive.com/20191121150631.20096-1-sami.mujawar@arm.com
https://edk2.groups.io/g/devel/message/51066</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10582</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-29 01:46:54 +0000</bug_when>
    <thetext>Fix at 290a485d6043a049b611aab30f450c74b8591f35</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2714</bug_id>
          
          <creation_ts>2020-05-12 11:53:23 +0000</creation_ts>
          <short_desc>Fix build error due to Ddr4MixedUDimm2DpcLimit FSP-M UPD</short_desc>
          <delta_ts>2020-05-13 23:24:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>CometlakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kathappan">kathappan.esakkithevar</reporter>
          <assigned_to name="Kathappan">kathappan.esakkithevar</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>deepika.kethi.reddy</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
    
    <cc>rangasai.v.chaganty</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12481</commentid>
    <comment_count>0</comment_count>
    <who name="Kathappan">kathappan.esakkithevar</who>
    <bug_when>2020-05-12 11:53:23 +0000</bug_when>
    <thetext>Below build error has to be fixed that is due to FSP-M UPD name change in CML.

edk2-platforms\Platform\Intel\CometlakeOpenBoardPkg\FspWrapper\Library\PeiFspPolicyInitLib\PeiFspSaPolicyInitLib.c(347): error C2039: &apos;Ddr4MixedUDimm2DpcLimit&apos;: is not a member of &apos;FSP_M_CONFIG&apos;
FSP\CometLakeFspBinPkg\CometLake1\Include\FspmUpd.h(34): note: see declaration of &apos;FSP_M_CONFIG&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12482</commentid>
    <comment_count>1</comment_count>
    <who name="Kathappan">kathappan.esakkithevar</who>
    <bug_when>2020-05-12 11:54:13 +0000</bug_when>
    <thetext>confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12501</commentid>
    <comment_count>2</comment_count>
    <who name="Kathappan">kathappan.esakkithevar</who>
    <bug_when>2020-05-13 23:24:37 +0000</bug_when>
    <thetext>SHA-ID : c2cb5a4d1b54e8fe79fe1c1132034989597fee10</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2505</bug_id>
          
          <creation_ts>2020-02-06 19:57:52 +0000</creation_ts>
          <short_desc>Add Unit Test Framework to edk2 repository</short_desc>
          <delta_ts>2020-02-07 14:35:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11131</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-06 19:57:52 +0000</bug_when>
    <thetext>Add a unit test framework for low level API based unit tests to edk2 repo.

Define UnitTestLib class to MdePkg.

Add UnitTestFrameworkPkg with library implementations to support 
unit test including support for cmocka.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11132</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-06 19:58:09 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11133</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-06 20:00:24 +0000</bug_when>
    <thetext>Patch email for review

    https://edk2.groups.io/g/devel/message/53458

Branch for review:

    https://github.com/mdkinney/edk2/tree/edk2-host-test_v2_mdk_updates_v4

GitHub Pull Request for review (Personal Build):
  https://github.com/tianocore/edk2/pull/315

Add a Unit Test Framework to the edk2 repository that supports development
of unit tests for interfaces, libraries, and modules.  The unit tests support
being run on target platforms or in a host environment.  Unit tests that are
built for the host environment can be registered to be run as part of the 
EDK II CI pre-commit and post-commit process, to prevent regressions during
maintenance of components that provide unit test coverage.

The Unit Test Framework depends on the cmocka submodule that extends the unit
test environment to support mocking interfaces that the API under test may use
and also provide unit tests results in standard XML JUINT format.

  https://git.cryptomilk.org/projects/cmocka.git
  https://api.cmocka.org/
  https://api.cmocka.org/modules.html

Unit tests use the services of the UnitTestLib defined in the MdePkg.  Unit
tests may optionally use cmocka services.  The UnitTestLib provides the
following features.

* Create a Unit Test Framework
* Add a Unit Test Suite to a Unit Test Framework
  + Support optional step that executes before a Unit
    Test Suite is started.
  + Support optional step that executes after a Unit
    Test Suite is finished.
* Add a Unit Test to a Unit Test Suite
  + Support optional step that executes before a Unit
    Test is started.
  + Support optional step that executes after a Unit
    Test is finished.
* Run all unit tests added to a Unit Test Framework
* Save Unit Test Framework state to persistent storage
* Support assertion checks in a unit test for TRUE, FALSE,
  EQUAL, MEM_EQUAL, NOT_EFI_ERROR, STATUS_EQUAL, and NOT_NULL.
* Support generation of log messages at ERROR, WARN, INFO,
  and VERBOSE levels.

Example unit tests for both host environments and target environments can be 
found in the following locations:

* MdePkg/Test/UnitTest/Library/BaseSafeIntLib
* MdePkg/Test/UnitTest/Library/BaseLib
* MdeModulePkg/Library/DxeResetSystemLib/UnitTest
* UnitTestFrameworkPkg/Test/UnitTest/Sample/SampleUnitTest</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11167</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-07 13:31:19 +0000</bug_when>
    <thetext>New in V2
==========
* Fix spelling error in comments
* [Patch v2 07/11] Add -no-pie to HOST_APPLICATION GCC:*_*_IA32_DLINK_FLAGS
* [Patch v2 07/11] Add -no-pie to HOST_APPLICATION GCC:*_*_X64_DLINK_FLAGS

Patch V2 for review

    https://edk2.groups.io/g/devel/message/54050

Branch for review:

    https://github.com/mdkinney/edk2/tree/edk2-host-test_v2_mdk_updates_v4

GitHub Pull Request for review (Personal Build):

  https://github.com/tianocore/edk2/pull/315

The change to add the -no-pie flag to DLINK_FLAGS for HOST_APPLICATION 
was required for Ubuntu/GCC CI agents in Azure Pipelines.  This flag was
not required for local builds using Fedora/GCC.  Adding this flag did
not change the behavior of local Fedora/GCC builds.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11169</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-07 14:35:13 +0000</bug_when>
    <thetext>Pushed as 61364ab927..7dcf32c1ee

EDK II CI PR: https://github.com/tianocore/edk2/pull/352</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2855</bug_id>
          
          <creation_ts>2020-07-20 15:21:54 +0000</creation_ts>
          <short_desc>Fix GetSupportedAndActivePcrs counter calculation</short_desc>
          <delta_ts>2021-08-08 23:34:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</reporter>
          <assigned_to name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13129</commentid>
    <comment_count>0</comment_count>
    <who name="Rodrigo Gonzalez del Cueto">rodrigo.gonzalez.del.cueto</who>
    <bug_when>2020-07-20 15:21:54 +0000</bug_when>
    <thetext>The Tpm2GetCapabilitySupportedAndActivePcrs function prints a
count number that should reflect the *supported and currently
active* PCR banks, but the implementation in place displays
instead the count of the *supported PCR banks* retrieved
directly from the Tpm2GetCapabilityPcrs()
TPML_PCR_SELECTION output.

The counter should only take into account those PCRs banks
which are active.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16827</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2021-08-08 23:34:15 +0000</bug_when>
    <thetext>Reviewed @ https://edk2.groups.io/g/devel/message/63174
Pushed @ https://github.com/tianocore/edk2/pull/1878/commits/7b43f8de8c08fc713b1fe045941dd3c921b9de89</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2055</bug_id>
          
          <creation_ts>2019-08-06 20:25:04 +0000</creation_ts>
          <short_desc>Remove use of UNIX_SEC_BUILD and WIN_SEC_BUILD defines in EmulatorPkg DSC file</short_desc>
          <delta_ts>2019-08-19 17:15:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8805</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-06 20:25:04 +0000</bug_when>
    <thetext>The EmulatorPkg.dsc file requires either UNIX_SEC_BUILD to be 
use for a POSIX host or WIN_SEC_BUILD to be set for a Windows
host.  This makes CI environment more complex because they have
to pass in different flags for the EmulatorPkg depending on 
the type of host.

Instead, a combination of $(FAMILY) and $(ARCH) can be used to
determine the host type.  If $(FAMILY) is &quot;MSFT&quot; then then host
environment is Windows/VS20xx.  If $(FAMILY) is not &quot;MSFT&quot;
then the host environment is POSIX.  Only IA32 and X64 host
architectures are supported, so do not build an SEC module
if $(ARCH) is not IA32 or X64.  This can support the package
build of the EmulatorPkg for non IA32/X64 architectures, and
additional CPU architectures for host environments can be 
added in the future.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8810</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-07 00:23:41 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8811</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-07 00:24:13 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/44968</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8849</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-07 22:35:17 +0000</bug_when>
    <thetext>Patch email for review V2

https://edk2.groups.io/g/devel/message/45101</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9060</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:14:11 +0000</bug_when>
    <thetext>Patch email V3 for review

https://edk2.groups.io/g/devel/message/45297
https://edk2.groups.io/g/devel/message/45298</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9061</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:14:58 +0000</bug_when>
    <thetext>Patch email V4 for review

https://edk2.groups.io/g/devel/message/45758
https://edk2.groups.io/g/devel/message/45760</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9062</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:15:32 +0000</bug_when>
    <thetext>Patch email V5 for review

https://edk2.groups.io/g/devel/message/45953
https://edk2.groups.io/g/devel/message/45955</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9063</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:15:45 +0000</bug_when>
    <thetext>Pushed 76e12fa334..74c22c59e3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2526</bug_id>
          
          <creation_ts>2020-02-13 00:24:11 +0000</creation_ts>
          <short_desc>FileTimeToLocalTime() ASSERTs if LocalTimeZone == EFI_UNSPECIFIED_TIMEZONE</short_desc>
          <delta_ts>2022-02-14 01:39:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2294</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11239</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2020-02-13 00:24:11 +0000</bug_when>
    <thetext>I booted to the UEFI Shell via OVMF on macOS. 

Shell&gt; time
05:17:52 (LOCAL)

I hit this:
  ASSERT ((LocalTimeZone &gt;= -1440) &amp;&amp; (LocalTimeZone &lt;=1440));

in FileTimeToLocalTime() as LocalTimeZone was set to EFI_UNSPECIFIED_TIMEZONE.

Given EFI_UNSPECIFIED_TIMEZONE.

I fixed the ASSERT by adding a check prior to the ASSERT. 

  if (LocalTimeZone == EFI_UNSPECIFIED_TIMEZONE) {
    return;
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11362</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:19:52 +0000</bug_when>
    <thetext>Zhichao, please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11478</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-02-27 20:29:34 +0000</bug_when>
    <thetext>This issue is fixed with https://bugzilla.tianocore.org/show_bug.cgi?id=2294 and merged at 106369fe26579c2c97131c3dd9e7c7332a5ec575.
Althoug the implement is different, but the result should be same.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11579</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-05 20:26:31 +0000</bug_when>
    <thetext>Andrew: can you confirm whether this has been fixed?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18349</commentid>
    <comment_count>4</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2022-02-14 01:39:50 +0000</bug_when>
    <thetext>See comment 2

*** This bug has been marked as a duplicate of bug 2294 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2766</bug_id>
          
          <creation_ts>2020-05-22 18:26:02 +0000</creation_ts>
          <short_desc>Register SMI handler profile for PiSmmCommunication driver</short_desc>
          <delta_ts>2020-05-22 19:27:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12679</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-05-22 18:26:02 +0000</bug_when>
    <thetext>If gSmiHandlerProfileGuid is available, PiSmmComminucation driver should also register SMI handler profile for its registered SMI handler.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12680</commentid>
    <comment_count>1</comment_count>
      <attachid>517</attachid>
    <who name="">kun.qin</who>
    <bug_when>2020-05-22 18:30:03 +0000</bug_when>
    <thetext>Created attachment 517
Proposed change for handler registration</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12681</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-05-22 19:27:30 +0000</bug_when>
    <thetext>Code change incorrectly applied to non-dispatcher smi handler. Mark as Resolved and Invalid. Sorry for the hassle.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>517</attachid>
            <date>2020-05-22 18:30:03 +0000</date>
            <delta_ts>2020-05-22 18:30:03 +0000</delta_ts>
            <desc>Proposed change for handler registration</desc>
            <filename>0001-Updated-comment.patch</filename>
            <type>text/plain</type>
            <size>3730</size>
            <attacher>kun.qin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2548</bug_id>
          
          <creation_ts>2020-02-22 11:06:36 +0000</creation_ts>
          <short_desc>PcdDxeIplSwitchToLongMode isn&apos;t defined on non-x86</short_desc>
          <delta_ts>2020-03-02 17:44:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Daniel Schaefer">daniel.schaefer</reporter>
          <assigned_to name="Daniel Schaefer">daniel.schaefer</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11397</commentid>
    <comment_count>0</comment_count>
    <who name="Daniel Schaefer">daniel.schaefer</who>
    <bug_when>2020-02-22 11:06:36 +0000</bug_when>
    <thetext>When building on platforms that are not IA32 or X64, the PCD gEfiMdeModulePkgTokenSpaceGuid.PcdDxeIplSwitchToLongMode is not defined.

I&apos;ll send a patch to default to FALSE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11488</commentid>
    <comment_count>1</comment_count>
    <who name="Daniel Schaefer">daniel.schaefer</who>
    <bug_when>2020-03-02 17:44:17 +0000</bug_when>
    <thetext>Not a bug. PcdDxeIplSwitchToLongMode shouldn&apos;t be defined on other platforms.
Using LockBoxNullLib instead of LockBoxLib removes the need for this PCD.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2430</bug_id>
          
          <creation_ts>2019-12-18 21:49:58 +0000</creation_ts>
          <short_desc>[UefiCpuPkg/MpInitLib] Build information for loaded and applied microcode patches</short_desc>
          <delta_ts>2020-01-01 22:14:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10732</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-18 21:49:58 +0000</bug_when>
    <thetext>During PEI phase, CpuMpPei driver will hook MpInitLib to:
1. Load the microcode patches data into memory
2. Detect and apply microcode patch to each processor

Meanwhile, it is found that for some platforms, certain features will require
to apply the microcode patch again during the boot flow (after CpuMpPei-
MpInitLib).

Since CpuMpPei-MpInitLib does not publish any information with regard to the
loaded and applied microcode patch, those feature drivers have to re-load the
microcode patches data into memory (from flash) again and re-perform the
microcode patch detection and application again as well.

For the consideration of better boot performance, MpInitLib can build such
information (in a HOB for example) which contains:
A. Base address and size of the loaded microcode patches data in memory;
B. Applied microcode patch for each processor.

So that if subsequent modules want to re-apply (or re-detect) microcode patch,
they can consume the stored information directly instead of accessing data on
flash.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10733</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-18 21:50:48 +0000</bug_when>
    <thetext>Take this one and will provide patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10747</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-23 20:40:48 +0000</bug_when>
    <thetext>V1 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/52509</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10752</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-25 20:11:34 +0000</bug_when>
    <thetext>V2 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/52554

V3 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/52566</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10756</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-27 02:33:25 +0000</bug_when>
    <thetext>V4 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/52581</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10762</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-12-30 19:50:19 +0000</bug_when>
    <thetext>V5 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/52613</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10768</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-01-01 22:14:46 +0000</bug_when>
    <thetext>Resolved via commits:
https://github.com/tianocore/edk2/commit/253909974a0e2e9c60fa78e57c0c46fef2877332
https://github.com/tianocore/edk2/commit/e1ed55738ec30db364a00d0ddac50dbbf3671795</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2319</bug_id>
          
          <creation_ts>2019-10-31 03:58:55 +0000</creation_ts>
          <short_desc>EmulatorPkg using CpuBreakPoint</short_desc>
          <delta_ts>2020-04-25 09:28:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc>https://edk2.groups.io/g/devel/message/49680?p=,,,20,0,0,0::Created,,__debugbreak%28%29,20,2,0,38879075</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kilian Kegel">kilian_kegel</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10252</commentid>
    <comment_count>0</comment_count>
      <attachid>423</attachid>
    <who name="Kilian Kegel">kilian_kegel</who>
    <bug_when>2019-10-31 03:58:55 +0000</bug_when>
    <thetext>Created attachment 423
source code diff

Hi Liming,
 
I have observed in newer Windows 10 versions, when using __debugbreak()in any
application that Windows just terminates the app, instead offering to debug it.
So in WinHost.exe too.
 
That’s why I usually insert the code snippet appended to run into getchar()
when the program was started with the /debug command line switch.
As long as the App waits for the next keystroke, I can start the debugger (VS2019)
and connect to WinHost.exe process for debugging.
 
Thanks,
Kilian</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10256</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:25:46 +0000</bug_when>
    <thetext>Kilian: can you send the patch to edk2 mail list for code review?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11322</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 21:18:14 +0000</bug_when>
    <thetext>Please check</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11540</commentid>
    <comment_count>3</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 21:50:14 +0000</bug_when>
    <thetext>I have post comment at https://edk2.groups.io/g/devel/message/54778.

In my opinion, it is a new feature.

Kilian,
I am working on it, could you give some comment about the below questions:
1. Have you tried use windbg to debug it.
2. Is is right that you develop in Visual Studio, but you run the WinHost.exe directly without Visual Studio?
3. When you build the WinHost, Have you selected the debug build?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11857</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-26 04:08:38 +0000</bug_when>
    <thetext>Kilian,

If i clear you confusion? or any help i can do for you?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12316</commentid>
    <comment_count>5</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-04-25 09:28:17 +0000</bug_when>
    <thetext>Can use WinDbg to trigger __debugbreak().

Kilian haven&apos;t feedback more than two month and i think not other question for him.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>423</attachid>
            <date>2019-10-31 03:58:55 +0000</date>
            <delta_ts>2019-10-31 03:58:55 +0000</delta_ts>
            <desc>source code diff</desc>
            <filename>WinHostDiff.htm</filename>
            <type>text/html</type>
            <size>20576</size>
            <attacher name="Kilian Kegel">kilian_kegel</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2210</bug_id>
          
          <creation_ts>2019-09-23 22:26:18 +0000</creation_ts>
          <short_desc>Add FIT support using FitGen</short_desc>
          <delta_ts>2019-10-18 13:38:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9754</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-23 22:26:18 +0000</bug_when>
    <thetext>Images built in KabylakeOpenBoardPkg should have a Firmware Interface Table (FIT) placed into the final flash image. This is done by running FitGen with the .fd file produced in the build where the .fd file has a BIOS Info structure in the image. The BIOS Info structure should be placed into the binary image via a source driver called &quot;BiosInfo.inf&quot;. The FILE_GUID for this driver should be passed to FitGen.exe with the &quot;-I&quot; flag so that FitGen may find the BIOS Info structure and parse the relevant objects described in the structure for inclusion into the FIT.

At this time, microcode patches are already included in the BIOS flash file in FV.FvMicrocode. The location of this FV should be given to FitGen by including a FIT type 0x1 entry (microcode) in the BIOS Info table with the FV address in the flash file:

For example:

typedef struct {
  BIOS_INFO_HEADER  Header;
  BIOS_INFO_STRUCT  Entry[1];
} BIOS_INFO;

GLOBAL_REMOVE_IF_UNREFERENCED BIOS_INFO  mBiosInfo = {
  {
    BIOS_INFO_SIGNATURE,
    1,
    0,
  },
  {
    {
      FIT_TYPE_01_MICROCODE,
      BIOS_INFO_STRUCT_ATTRIBUTE_MICROCODE_WHOLE_REGION,
      0x0100,
      FixedPcdGet32 (PcdFlashMicrocodeFvSize),
      FixedPcdGet32 (PcdFlashMicrocodeFvBase)
    }
  }
};

The FIT structure is described in https://github.com/tianocore/edk2-platforms/blob/master/Silicon/Intel/IntelSiliconPkg/Include/IndustryStandard/FirmwareInterfaceTable.h.

The output file should have a FIT with the location of the table given at 4GB - 0x40. A tool such as the UEFITool can be used to verify correctness of the table.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9825</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-25 21:53:39 +0000</bug_when>
    <thetext>Prince is assigned the task</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10110</commentid>
    <comment_count>2</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-10-18 13:38:55 +0000</bug_when>
    <thetext>FIT changes are merged to master
commit id:2540e812a73e3d57af0d95d9a3de97ffde7159e4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2567</bug_id>
          
          <creation_ts>2020-03-04 10:53:44 +0000</creation_ts>
          <short_desc>OVMF: Support booting from VMware PVSCSI controllers</short_desc>
          <delta_ts>2020-04-01 10:56:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2390</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Liran Alon">liran.alon</reporter>
          <assigned_to name="Liran Alon">liran.alon</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>liran.alon</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11531</commentid>
    <comment_count>0</comment_count>
    <who name="Liran Alon">liran.alon</who>
    <bug_when>2020-03-04 10:53:44 +0000</bug_when>
    <thetext>This feature request tracks adding driver support for VMware PVSCSI controller.

This controller is supported by both VMware and QEMU.

This work is part of the more general agenda of enhancing OVMF boot device support to have feature parity with SeaBIOS. (See also: https://bugzilla.tianocore.org/show_bug.cgi?id=2390).

A v1 patch-series have been implemented by myself and is ready for upstream submission. I will soon submit it upstream. Lazlo requested that I will create this BZ before submitting it. I will comment here later with the link to the submitted patch-series.
(I need to first create this BZ ticket in order to reference it from the commit message)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11532</commentid>
    <comment_count>1</comment_count>
    <who name="Liran Alon">liran.alon</who>
    <bug_when>2020-03-04 10:54:17 +0000</bug_when>
    <thetext>Changed ticket status to IN_PROGRESS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11599</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-06 17:29:53 +0000</bug_when>
    <thetext>Liran explained the motivation in detail:

https://edk2.groups.io/g/devel/message/55620
http://mid.mail-archive.com/a96b6b74-c35d-e291-2122-9d77f1d5f89c@oracle.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11703</commentid>
    <comment_count>3</comment_count>
    <who name="Liran Alon">liran.alon</who>
    <bug_when>2020-03-16 12:19:43 +0000</bug_when>
    <thetext>
I have submitted v1 patch-series.
Relevant mailing list topics:

[PATCH 00/17]: OvmfPkg: Support booting from VMware PVSCSI controller
https://edk2.groups.io/g/devel/topic/72001277

[PATCH 01/17] OvmfPkg/PvScsiDxe: Create empty driver
https://edk2.groups.io/g/devel/topic/72001287

[PATCH 02/17] OvmfPkg/PvScsiDxe: Install DriverBinding protocol
https://edk2.groups.io/g/devel/topic/72001282

[PATCH 03/17] OvmfPkg/PvScsiDxe: Report name of driver
https://edk2.groups.io/g/devel/topic/72001288

[PATCH 04/17] OvmfPkg/PvScsiDxe: Probe PCI devices and look for PvScsi
https://edk2.groups.io/g/devel/topic/72001275

[PATCH 05/17] OvmfPkg/PvScsiDxe: Install stubbed EXT_SCSI_PASS_THRU
https://edk2.groups.io/g/devel/topic/72001272

[PATCH 06/17] OvmfPkg/PvScsiDxe: Report the number of targets and LUNs
https://edk2.groups.io/g/devel/topic/72001283

[PATCH 07/17] OvmfPkg/PvScsiDxe: Translate Target &amp; LUN to/from DevicePath
https://edk2.groups.io/g/devel/topic/72001276

[PATCH 08/17] OvmfPkg/PvScsiDxe: Open PciIo protocol for later use
https://edk2.groups.io/g/devel/topic/72001289

[PATCH 09/17] OvmfPkg/PvScsiDxe: Backup/Restore PCI attributes on Init/UnInit
https://edk2.groups.io/g/devel/topic/72001278

[PATCH 10/17] OvmfPkg/PvScsiDxe: Enable IOSpace &amp; Bus-Mastering in PCI attributes
https://edk2.groups.io/g/devel/topic/72001284

[PATCH 11/17] OvmfPkg/PvScsiDxe: Define device interface structures and constants
https://edk2.groups.io/g/devel/topic/72001279

[PATCH 12/17] OvmfPkg/PvScsiDxe: Reset adapter on init
https://edk2.groups.io/g/devel/topic/72001280

[PATCH 13/17] OvmfPkg/PvScsiDxe: Setup requests and completions rings
https://edk2.groups.io/g/devel/topic/72001281

[PATCH 14/17] OvmfPkg/PvScsiDxe: Introduce DMA communication buffer
https://edk2.groups.io/g/devel/topic/72001286

[PATCH 15/17] OvmfPkg/PvScsiDxe: Support sending SCSI request and receive response
https://edk2.groups.io/g/devel/topic/72001285

[PATCH 16/17] OvmfPkg/PvScsiDxe: Reset device on ExitBootServices()
https://edk2.groups.io/g/devel/topic/72001273

[PATCH 17/17] OvmfPkg/PvScsiDxe: Enable device 64-bit DMA addresses
https://edk2.groups.io/g/devel/topic/72001274</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11839</commentid>
    <comment_count>4</comment_count>
    <who name="Liran Alon">liran.alon</who>
    <bug_when>2020-03-25 12:36:36 +0000</bug_when>
    <thetext>Update:
Submitted a v2 patch-series.
See https://edk2.groups.io/g/devel/topic/72544164</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11886</commentid>
    <comment_count>5</comment_count>
    <who name="Liran Alon">liran.alon</who>
    <bug_when>2020-03-28 16:02:58 +0000</bug_when>
    <thetext>Update:
Submitted a v3 patch-series.
See https://edk2.groups.io/g/devel/topic/72617113</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11921</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-30 12:52:32 +0000</bug_when>
    <thetext>Fixed in commit range 6c1fb56802d5..f34c7645bd87, via &lt;https://github.com/tianocore/edk2/pull/474&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11933</commentid>
    <comment_count>7</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-30 18:07:04 +0000</bug_when>
    <thetext>Added bug 2651 as one of these commits fail to build with VS2019</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11934</commentid>
    <comment_count>8</comment_count>
    <who name="Liran Alon">liran.alon</who>
    <bug_when>2020-03-30 18:10:42 +0000</bug_when>
    <thetext>Thanks for reporting the VS build issue.
I will submit a patch to add an explicit cast to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12010</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-01 10:56:03 +0000</bug_when>
    <thetext>Additional commits:

- 98936dc4f44b (&quot;OvmfPkg/PvScsiDxe: Fix VS2019 build error because of implicit cast&quot;, 2020-04-01) [bug 2651]

- e210fc130e5c (&quot;OvmfPkg/PvScsiDxe: Refactor setup of rings to separate function&quot;, 2020-04-01)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2458</bug_id>
          
          <creation_ts>2020-01-10 20:33:14 +0000</creation_ts>
          <short_desc>Multiple misuse of SetMem function</short_desc>
          <delta_ts>2023-02-01 14:24:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>miki.demeter</cc>
    
    <cc>tpilar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10855</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-01-10 20:33:14 +0000</bug_when>
    <thetext>SetMem function is similar to memset, but the argument order for it is different. memset takes Destination, Value, Size, whereas SetMem takes Destination, Size, Value. This nuance resulted in multiple mistakes throughout the codebase. Notable examples:

ArmPkg/Filesystem/SemihostFs/Arm/SemihostFs.c:
567:   SetMem (WriteBuffer, 0, sizeof(WriteBuffer));

CryptoPkg/Library/BaseCryptLib/Pk/CryptTs.c:
158:   SetMem (EfiTime, 0, sizeof (EFI_TIME));

The issues look fairly minor to me, but the trend is unpleasant. It is not the first and is unlikely the last time to misuse SetMem. Despite being an EFI_BOOT_SERVICES interface, we believe its design is a mistake that should be avoided. It is up to EDK II whether to agree or not, but we suggest the following:

- Fixing the actual issues (not sure whether more exist at the moment, but we at least searched).
- Implementing MemSet function with memset-like argument order.
- Replacing SetMem with ZeroMem and MemSet throughout EDK II.
- Deprecating SetMem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10862</commentid>
    <comment_count>1</comment_count>
    <who name="Tomas Pilar">tpilar</who>
    <bug_when>2020-01-13 05:54:08 +0000</bug_when>
    <thetext>This is probably a discussion for the mailing list, but I have certainly tripped on this method at least once.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10867</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-13 13:28:19 +0000</bug_when>
    <thetext>Calling ZeroMem() is generally favorable to calling SetMem() with Value=0, IMO.

However, please note that &quot;MdePkg/Include/Library/BaseMemoryLib.h&quot; declares the following functions too:
- SetMem16()
- SetMem32()
- SetMem64()
- SetMemN()

What&apos;s the plan with those functions?

Asking because the following family of functions:
- MemSet() [the new one]
- SetMem16()
- SetMem32()
- SetMem64()
- SetMemN()

looks quite inconsistent.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10874</commentid>
    <comment_count>3</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-01-13 15:56:23 +0000</bug_when>
    <thetext>Lazslo, these functions are less common, but I easily found their implementations in Linux[1] and FreeBSD[2]. For this reason we believe it is consistent and common sense to apply the same change to these functions as well. So MemSet16/MemSet32/MemSet64/MemSetN should effectively replace their SetMemX equivalents.

[1] https://github.com/torvalds/linux/blob/master/arch/powerpc/include/asm/string.h
[2] https://github.com/freebsd/freebsd/blob/master/sys/contrib/ncsw/inc/etc/memcpy_ext.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10887</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-14 03:04:03 +0000</bug_when>
    <thetext>Regarding the deprecation, please introduce a separate / standalone feature test macro for that. There are quite a few calls in OvmfPkg, and I don&apos;t recall any bugs related to the cited parameter order mixup. I&apos;m unconvinced at this point as to the benefits of this conversion BZ.

Anyway, you&apos;ll have to discuss this first with the BaseMemoryLib class maintainers. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20976</commentid>
    <comment_count>5</comment_count>
    <who name="Miki Demeter">miki.demeter</who>
    <bug_when>2023-02-01 14:24:09 +0000</bug_when>
    <thetext>CryptoPkg has been fixed. moving ArmPkg to https://bugzilla.tianocore.org/show_bug.cgi?id=4205

Closing this report</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2928</bug_id>
          
          <creation_ts>2020-08-26 12:40:37 +0000</creation_ts>
          <short_desc>duplicate &quot;-Os&quot; compiler options</short_desc>
          <delta_ts>2023-01-03 04:13:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Pierre Gondois">pierre.gondois</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>tpilar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13536</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-26 12:40:37 +0000</bug_when>
    <thetext>As a result of commit 17bd834eb5fd (&quot;BaseTools: Factorize GCC flags&quot;,
2020-07-21), GCC48_ALL_CC_FLAGS inherits &quot;-Os&quot;.

While NOOPT_GCC flags override that &quot;-Os&quot; with &quot;-O0&quot;:

&gt;| NOOPT_GCC48_IA32_CC_FLAGS       = DEF(GCC48_IA32_CC_FLAGS) -O0
&gt;| NOOPT_GCC48_X64_CC_FLAGS       = DEF(GCC48_X64_CC_FLAGS) -O0
&gt;| NOOPT_GCC48_ARM_CC_FLAGS       = DEF(GCC48_ARM_CC_FLAGS) -O0
&gt;| NOOPT_GCC48_AARCH64_CC_FLAGS   = DEF(GCC48_AARCH64_CC_FLAGS) -O0
&gt;| NOOPT_GCC49_IA32_CC_FLAGS       = DEF(GCC49_IA32_CC_FLAGS) -O0
&gt;| NOOPT_GCC49_X64_CC_FLAGS       = DEF(GCC49_X64_CC_FLAGS) -O0
&gt;| NOOPT_GCC49_ARM_CC_FLAGS       = DEF(GCC49_ARM_CC_FLAGS) -O0
&gt;| NOOPT_GCC49_AARCH64_CC_FLAGS     = DEF(GCC49_AARCH64_CC_FLAGS) -O0
&gt;| NOOPT_GCC5_IA32_CC_FLAGS       = DEF(GCC5_IA32_CC_FLAGS) -O0
&gt;| NOOPT_GCC5_X64_CC_FLAGS        = DEF(GCC5_X64_CC_FLAGS) -O0
&gt;| NOOPT_GCC5_ARM_CC_FLAGS        = DEF(GCC5_ARM_CC_FLAGS) -O0
&gt;| NOOPT_GCC5_AARCH64_CC_FLAGS    = DEF(GCC5_AARCH64_CC_FLAGS) -O0

the following DEBUG and RELEASE flags now have two &quot;-Os&quot; flags -- one
inherited, one open-coded:

&gt;|   DEBUG_GCC48_IA32_CC_FLAGS       = DEF(GCC48_IA32_CC_FLAGS) -Os
&gt;| RELEASE_GCC48_IA32_CC_FLAGS       = DEF(GCC48_IA32_CC_FLAGS) -Os -Wno-unused-but-set-variable
&gt;|   DEBUG_GCC48_X64_CC_FLAGS       = DEF(GCC48_X64_CC_FLAGS) -Os
&gt;| RELEASE_GCC48_X64_CC_FLAGS       = DEF(GCC48_X64_CC_FLAGS) -Os -Wno-unused-but-set-variable
&gt;|   DEBUG_GCC49_IA32_CC_FLAGS       = DEF(GCC49_IA32_CC_FLAGS) -Os
&gt;| RELEASE_GCC49_IA32_CC_FLAGS       = DEF(GCC49_IA32_CC_FLAGS) -Os -Wno-unused-but-set-variable -Wno-unused-const-variable
&gt;|   DEBUG_GCC49_X64_CC_FLAGS       = DEF(GCC49_X64_CC_FLAGS) -Os
&gt;| RELEASE_GCC49_X64_CC_FLAGS       = DEF(GCC49_X64_CC_FLAGS) -Os -Wno-unused-but-set-variable -Wno-unused-const-variable
&gt;|   DEBUG_GCC5_IA32_CC_FLAGS       = DEF(GCC5_IA32_CC_FLAGS) -flto -Os
&gt;| RELEASE_GCC5_IA32_CC_FLAGS       = DEF(GCC5_IA32_CC_FLAGS) -flto -Os -Wno-unused-but-set-variable -Wno-unused-const-variable
&gt;|   DEBUG_GCC5_X64_CC_FLAGS        = DEF(GCC5_X64_CC_FLAGS) -flto -DUSING_LTO -Os
&gt;| RELEASE_GCC5_X64_CC_FLAGS        = DEF(GCC5_X64_CC_FLAGS) -flto -DUSING_LTO -Os -Wno-unused-but-set-variable -Wno-unused-const-variable

(Reproduced with OVMF DEBUG/RELEASE GCC48, at commit 63d92674d240.)

The open-coded &quot;-Os&quot; should now be removed from the listed DEBUG/RELEASE
flags.

(low priority issue)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13537</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-26 12:41:51 +0000</bug_when>
    <thetext>Original mailing list report:
https://edk2.groups.io/g/devel/message/63108
http://mid.mail-archive.com/879fda8a-37bd-a902-6028-c879ed37fa28@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20393</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:13:04 +0000</bug_when>
    <thetext>Still relevant at commit bbd30066e137, but nobody has cared.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2804</bug_id>
          
          <creation_ts>2020-06-14 17:06:31 +0000</creation_ts>
          <short_desc>Add UNIT_TESTING_DEBUG define to enable source level debugging of host based unit tests</short_desc>
          <delta_ts>2020-08-14 01:54:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12872</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-14 17:06:31 +0000</bug_when>
    <thetext>Add a support for a build scoped define called UNIT_TESTING_DEBUG
that is used to set a define with the same name when building
C sources for a host based unit test.  By default, UNIT_TESTING_DEBUG
is not defined.

By default, Cmocka catches all exceptions and considers an exception
to be a unit test failure.

Developers working on the unit test framework or host based unit tests
may want to use a source level debugger when an exception or break point
occurs to debug the framework or unit test code.  Once the bug is resolved,
the exception handling can be done by Cmocka.  Adding this define
allows a developer to opt-in to source level debug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12873</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-14 17:06:42 +0000</bug_when>
    <thetext>Assign to owned</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13256</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 17:59:16 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13271</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:08:43 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/5d29e2d020e8b0ad70f3f766c38429c3bfad0d41
https://github.com/tianocore/edk2/commit/9a6c4ac68e3d9590cf17914e07e929a1f0e7c190
https://github.com/tianocore/edk2/commit/133891b712a9ceda0fbdb9649b559773e4cdc6db
https://github.com/tianocore/edk2/commit/75e92c13541672a3af349067a040b9dda3d4452d
https://github.com/tianocore/edk2/commit/26824851b041d9e81921ec7ef97220d2a2576157
https://github.com/tianocore/edk2/commit/425df6923ec00df32bb6f20d1440a2e920f0e1e7
https://github.com/tianocore/edk2/commit/77e42ca4dfbf51918d677f32ab64bb99dd07cc40
https://github.com/tianocore/edk2/commit/813c2b15255406f587484ffcedfd01ca9ab5d056
https://github.com/tianocore/edk2/commit/f08715947ad52ee4fd67358660860ea63a532e15
https://github.com/tianocore/edk2/commit/35f9d7c41b380d67953dabc5994a65e32baa7d39
https://github.com/tianocore/edk2/commit/a0a49eb87c5819a76a0a5fea81d2b51ffdfcb3aa
https://github.com/tianocore/edk2/commit/540fd45f755f1646e019099c90c9f59286604228
https://github.com/tianocore/edk2/commit/d3c9e40abcc839f59d56b7fca7787647533d96fe
https://github.com/tianocore/edk2/commit/0a81a98e900118857395b101f413c1c17b66c073
https://github.com/tianocore/edk2/commit/9af8a299cec10656b757ae30a71c1310260d3c31
https://github.com/tianocore/edk2/commit/5b86bbf891677882a9d097f87cd0128562c12c43

Pull Request:

https://github.com/tianocore/edk2/pull/779</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13401</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-14 01:49:25 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2805</bug_id>
          
          <creation_ts>2020-06-14 17:19:08 +0000</creation_ts>
          <short_desc>Move print of unit test log into unit test tear down function CmockaUnitTestTeardownFunctionRunner()</short_desc>
          <delta_ts>2020-07-31 18:08:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12874</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-14 17:19:08 +0000</bug_when>
    <thetext>The printing of the unit test log is currently at the end of the function
CmockaUnitTestTeardownFunctionRunner() that invokes a unit test.

If an exception occurs during the execution of a unit test, then the
CmockaUnitTestTeardownFunctionRunner() function is exited immediately
and the end of the CmockaUnitTestTeardownFunctionRunner() is not
executed and any log messages generated before the exception are not
printed.

The unit test tear down function CmockaUnitTestTeardownFunctionRunner() 
is always called even if CmockaUnitTestTeardownFunctionRunner()
generated an exception.  

The printing of log messages from CmockaUnitTestTeardownFunctionRunner()
will guarantee that the log messages are always printed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12875</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-14 17:19:41 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13076</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-09 00:21:09 +0000</bug_when>
    <thetext>Make sure the log messages are printed after the teardown function is called (if present), so any log messages generated by the teardown function itself is included in the log.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13255</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 17:58:56 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13272</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:08:57 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/5d29e2d020e8b0ad70f3f766c38429c3bfad0d41
https://github.com/tianocore/edk2/commit/9a6c4ac68e3d9590cf17914e07e929a1f0e7c190
https://github.com/tianocore/edk2/commit/133891b712a9ceda0fbdb9649b559773e4cdc6db
https://github.com/tianocore/edk2/commit/75e92c13541672a3af349067a040b9dda3d4452d
https://github.com/tianocore/edk2/commit/26824851b041d9e81921ec7ef97220d2a2576157
https://github.com/tianocore/edk2/commit/425df6923ec00df32bb6f20d1440a2e920f0e1e7
https://github.com/tianocore/edk2/commit/77e42ca4dfbf51918d677f32ab64bb99dd07cc40
https://github.com/tianocore/edk2/commit/813c2b15255406f587484ffcedfd01ca9ab5d056
https://github.com/tianocore/edk2/commit/f08715947ad52ee4fd67358660860ea63a532e15
https://github.com/tianocore/edk2/commit/35f9d7c41b380d67953dabc5994a65e32baa7d39
https://github.com/tianocore/edk2/commit/a0a49eb87c5819a76a0a5fea81d2b51ffdfcb3aa
https://github.com/tianocore/edk2/commit/540fd45f755f1646e019099c90c9f59286604228
https://github.com/tianocore/edk2/commit/d3c9e40abcc839f59d56b7fca7787647533d96fe
https://github.com/tianocore/edk2/commit/0a81a98e900118857395b101f413c1c17b66c073
https://github.com/tianocore/edk2/commit/9af8a299cec10656b757ae30a71c1310260d3c31
https://github.com/tianocore/edk2/commit/5b86bbf891677882a9d097f87cd0128562c12c43

Pull Request:

https://github.com/tianocore/edk2/pull/779</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2234</bug_id>
          
          <creation_ts>2019-10-01 19:20:48 +0000</creation_ts>
          <short_desc>The hierarchy of packages and package dependency rules should be documented</short_desc>
          <delta_ts>2020-09-21 15:47:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Isaac">isaac.w.oram</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>rangasai.v.chaganty</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II Minimum Platform Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9902</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-01 19:20:48 +0000</bug_when>
    <thetext>The EDK II Minimum Platform Specification should better describe the layers of responsibility in a solution adherent to the specification. It should also identify the allowed dependencies between packages with at least a brief description of rationale for these dependencies.

The description must not depend on current implementation details but describe these package relationships in a generic manner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11042</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-31 18:27:48 +0000</bug_when>
    <thetext>Moving ownership to Isaac Oram</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13710</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-18 13:33:42 +0000</bug_when>
    <thetext>Note that two training decks have been added to TianoCore training covering concrete details of the package relationships and dependencies. The primary presentation for understanding the structure and relationships between open source packages today is &quot;EDK II OpenBoard Platform Design&quot;.

TianoCore Training Material:
https://github.com/tianocore-training/Tianocore_Training_Contents/wiki

EDK II OpenBoard Platform Design
https://gitpitch.com/tianocore-training/EDK_II_OpenBoard_Platform/master#/

EDK II OpenBoard Platform Porting
https://gitpitch.com/tianocore-training/EDK_II_OpenBoard_Porting/master#/

At the scope the spec is written it might be best to leave the details provided in Minimum Platform Architecture Specification Section 2.4 Organization as sufficient and use these trainings to understand the practical details of the edk2-platforms implementation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13726</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-21 15:47:39 +0000</bug_when>
    <thetext>Since I submitted this BZ the training referenced in the previous comment was published and should sufficiently cover this topic. I&apos;m going to close this BZ now. Another BZ can be filed if more specific info is needed related to the topic.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2693</bug_id>
          
          <creation_ts>2020-04-23 19:45:45 +0000</creation_ts>
          <short_desc>BaseLib/SafeString.c: invalid integer parse result when subject sequence is empty</short_desc>
          <delta_ts>2023-01-03 04:06:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Vincent Zimmer">vincent.zimmer</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>john.mathews</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12306</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-23 19:45:45 +0000</bug_when>
    <thetext>In &quot;MdePkg/Library/BaseLib/SafeString.c&quot;, the functions

- StrDecimalToUintnS
- StrDecimalToUint64S
- StrHexToUintnS
- StrHexToUint64S
- AsciiStrDecimalToUintnS
- AsciiStrDecimalToUint64S
- AsciiStrHexToUintnS
- AsciiStrHexToUint64S

are specified with the following language in their leading comments:

  If String has no valid [decimal|hexadecimal] digits right after the optional
  pad spaces, the value of String is stored at the location pointed to by
  EndPointer.

However, the functions don&apos;t implement this provision. And that breaks (valid) client code such as:

  Status = AsciiStrDecimalToUint64S (String, &amp;EndPointer, &amp;Uint64);
  if (!RETURN_ERROR (Status) &amp;&amp;           // no range error
      EndPointer != String &amp;&amp;             // *some* conversion took place
      *EndPointer == &apos;\0&apos;                 // no trailing garbage
      ) {
    //
    // consume Uint64 here
    //
  }

Consider the following input: &quot; &quot; (whitespace only -&gt; empty subject sequence). Per the specification, it should be caught by the

  EndPointer != String

sub-condition at the call site.

In reality, it is missed, and the caller is led to believe that value 0 was successfully parsed. That&apos;s because the functions move &quot;String&quot; past the leading whitespace, don&apos;t convert a single character (never enter the &quot;while&quot; loop with the multiplication), and then assign &quot;String&quot; to (*EndPointer), even without having entered the &quot;while&quot; loop.

The &quot;while&quot; loop with the multiplication should set a boolean flag, and only update EndPointer in the end if the flag is set.

Filing this as a security issue because these functions are used for processing untrusted input. The code currently mis-reports the string &quot; &quot; as a valid representation of the zero value.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12432</commentid>
    <comment_count>1</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-05-06 12:28:24 +0000</bug_when>
    <thetext>feedback from 5/6/2020 meeting:

This isn&apos;t a potential memory corruption/stack smash but it could lead to a potential control flow issue.

Since this is a library each instance that consumes the library would have to make a determination of the impact.

Since solution already provided in the ticket, should be easy to consume.

The question raised in the meeting is: do we believe as a community that this is an issue that leaves downstream consumers of EDKII exposed?

Given that this function always returns a fixed value, the exposure is small - really a minor annoyance.

All agree that there are &apos;security implications&apos; from the filer.

Choices are:
1) Treat as security and go through the full process, including CVE assignment and embargo
1b) 1 w/ smaller embargo 
1c) 1b of 3 mos 
1d) 1 w/ immediate un-embargo

2) Open up immediately and treat as functional issue

Group was leaning to #2, but let&apos;s have the issue to sit for a week to see if there are counter-examples or use-cases that would argue for a business impact or exploitation path.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13004</commentid>
    <comment_count>2</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-01 12:10:13 +0000</bug_when>
    <thetext>Decision to make this public, per 7/1 Infosec mtg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13020</commentid>
    <comment_count>3</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-07-01 19:29:34 +0000</bug_when>
    <thetext>@Mike Kinney,

Didn&apos;t you write a UnitTest around SafeString at one point?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13306</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-08-03 17:03:57 +0000</bug_when>
    <thetext>A sets of test assertions were added to test the SAFE_STRING_CONSTRAINT_CHECK
macro using BaseLib StrCpyS() function to verify that one macro.

  // --------------Suite-----------Description--------------Class Name----------Function--------Pre---Post-------------------Context-----------
  AddTestCase (SafeStringTests, &quot;SAFE_STRING_CONSTRAINT_CHECK&quot;, &quot;SafeStringContraintCheckTest&quot;, SafeStringContraintCheckTest, NULL, NULL, NULL);

The full set of unit tests for safe string functions have not been implemented.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20388</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:05:44 +0000</bug_when>
    <thetext>These issues still seem relevant at bbd30066e137.

Too bad the original author (Hao A Wu, from commit d8af3301a648, &quot;MdePkg/BaseLib: Add safe string functions that convert str to value&quot;, 2017-01-09) didn&apos;t care, despite being CC&apos;d on this BZ. Unfortunately there is no substitute for the original code author taking responsibility for issues in their code.

Closing as WONTFIX due to apparent lack of capacity.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20389</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:06:02 +0000</bug_when>
    <thetext>actually closing now</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2118</bug_id>
          
          <creation_ts>2019-08-22 16:39:46 +0000</creation_ts>
          <short_desc>NVMe driver uses wrong queue size when NVMe device doesn&apos;t support size of driver queue</short_desc>
          <delta_ts>2019-11-19 22:18:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9172</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-08-22 16:39:46 +0000</bug_when>
    <thetext>When a new packet is queued the logic to roll over to the front of the queue doesn&apos;t account for actual size of io queue. 

This causes a device to hang due to doorbell being outside of visible queue.  An example would be if a NVMe drive only supported a queue size of 128 while the driver supports 256.  

Please see https://github.com/microsoft/mu_basecore/pull/37</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9180</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-22 20:13:18 +0000</bug_when>
    <thetext>Assign to owner to investigate</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9409</commentid>
    <comment_count>2</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-08-30 00:48:23 +0000</bug_when>
    <thetext>any updates on this?  Does the change look correct and complete?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9410</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-08-30 01:44:59 +0000</bug_when>
    <thetext>(In reply to Sean Brogan from comment #2)
&gt; any updates on this?  Does the change look correct and complete?

Yes, I think the proposed fix is good and complete.

Looks like &apos;Cap.Mqes&apos; was only considered when creating IO queues in
NvmeCreateIoCompletionQueue() and NvmeCreateIoSubmissionQueue(), but got
overlooked in other places.

Maybe storing the sizes of the async queues in the controller private data
structure within NvmeCreateIoCompletionQueue/NvmeCreateIoSubmissionQueue can
help to eliminate the calculations of the actual queue size afterwards.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10416</commentid>
    <comment_count>4</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-11-13 13:43:58 +0000</bug_when>
    <thetext>is there plan for you to fix this? Any update?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10420</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-11-14 00:04:54 +0000</bug_when>
    <thetext>V1 patch has been sent at:
https://edk2.groups.io/g/devel/message/50625</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10482</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-11-19 22:18:35 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/7607174192166dd5d2d6913fc2fdb8ce539cd3c9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2588</bug_id>
          
          <creation_ts>2020-03-11 10:29:23 +0000</creation_ts>
          <short_desc>ASSERT triggered in ArmVirtGicArchLib with mach-virt,virtualization=on under QEMU TCG</short_desc>
          <delta_ts>2020-03-17 11:08:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Leif Lindholm">quic_llindhol</reporter>
          <assigned_to name="Leif Lindholm">quic_llindhol</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11662</commentid>
    <comment_count>0</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2020-03-11 10:29:23 +0000</bug_when>
    <thetext>QEMU behaves differently from actual hardware in that even when emulating AArch64 cpus (Cortex-A53,A57,A72) it presents GICv2 instead of the GICv3 used in the original designs. The GICv2 is described in the device tree generated by QEMU presented as &quot;arm,cortex-a15-gic&quot;.

On the GICv2 path in ArmVirtGicArchLibConstructor(), an ASSERT verifies that the RegSize option of the GIC node is 32 bytes in size. This is the expected size for the physical register set, but there is also a virtual version of that which adds another 32 bytes which is exposed when virtualiztion=on is passed in the &apos;virt&apos; machine option.

The following message is printed:
ASSERT [ArmGicDxe] /work/git/edk2/ArmVirtPkg/Library/ArmVirtGicArchLib/ArmVirtGicArchLib.c(113): RegSize == 32

When this library was created, QEMU lacked support for emulating the virtualization extension. QEMU commit 55ef3233586a (&quot;arm/virt: Add
support for GICv2 virtualization extensions&quot;, 2018-08-14) added this support - before that, this assert was not possible to trigger.

On the GICv3 path, the ASSERT is instead &gt;= 32 - I believe the same test should be used on the GICv2 path.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11663</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-11 11:38:30 +0000</bug_when>
    <thetext>[PATCH 1/1] ArmVirtPkg: fix ASSERT in ArmVirtGicArchLib with virtualization=on
https://edk2.groups.io/g/devel/message/55756
http://mid.mail-archive.com/20200311153217.18253-1-leif@nuviainc.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11709</commentid>
    <comment_count>2</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2020-03-17 11:08:38 +0000</bug_when>
    <thetext>Resolved by commit 01ce872739d2f (&quot;ArmVirtPkg: fix ASSERT in ArmVirtGicArchLib with virtualization=on&quot;), now upstream.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2485</bug_id>
          
          <creation_ts>2020-01-23 18:04:51 +0000</creation_ts>
          <short_desc>PatchCheck: Do not check enforce CR/LF line endings when with adding a submodule directory</short_desc>
          <delta_ts>2020-03-03 21:00:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10975</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-23 18:04:51 +0000</bug_when>
    <thetext>When the git submodule add command used, a new directory is created
and git assigns a file mode of 160000.

The patch lines associated with creating this directory use LF line 
endings.  The following is an example of patch contents when adding
a submodule.

diff --git a/UnitTestFrameworkPkg/Library/CmockaLib/cmocka b/UnitTestFrameworkPkg/Library/CmockaLib/cmocka
new file mode 160000
index 0000000000..1cc9cde344
--- /dev/null
+++ b/UnitTestFrameworkPkg/Library/CmockaLib/cmocka
@@ -0,0 +1 @@
+Subproject commit 1cc9cde3448cdd2e000886a26acf1caac2db7cf1

PatchCheck should be updated to detect if a new directory is being 
added with a file mode of 160000 and not enforce CR/LF line endings
for the patch contents.  The pattern &quot;new file mode 160000&quot; can be
used to detect this type of patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10976</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-23 18:05:28 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10978</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-23 18:12:00 +0000</bug_when>
    <thetext>Patch for review

https://edk2.groups.io/g/devel/message/53457</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11510</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-03 21:00:35 +0000</bug_when>
    <thetext>Fix at c8b8157e126ae2fb6f65842677251d300ceff104</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2359</bug_id>
          
          <creation_ts>2019-11-19 10:46:55 +0000</creation_ts>
          <short_desc>spelling mistake, &quot;infomation&quot; should be &quot;information&quot;</short_desc>
          <delta_ts>2020-04-14 21:52:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10475</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-19 10:46:55 +0000</bug_when>
    <thetext>spelling mistake, &quot;infomation&quot; should be &quot;information&quot; in MdeModulePkg/Application/CapsuleApp/CapsuleDump.c

Print(L&quot;The infomation of the capsules:\n&quot;);

Also the spelling mistake is across the EDK2 code in comments too:

BaseTools/Scripts/ConvertFceToStructurePcd.py:        part = [] #save all infomation for DEFAULT_ID
FatPkg/EnhancedFatDxe/Fat.h:  // The dynamic infomation
MdeModulePkg/Universal/Console/GraphicsOutputDxe/GraphicsOutput.c:    // Use default device infomation when the device info HOB doesn&apos;t exist
MdeModulePkg/Universal/Console/GraphicsOutputDxe/GraphicsOutput.c:      // It&apos;s not a video device, or device infomation doesn&apos;t match.
MdeModulePkg/Universal/Disk/UdfDxe/FileSystemOperations.c:  @param[in, out] BufferSize  Size of the returned file infomation.
MdeModulePkg/Universal/Disk/UdfDxe/Udf.h:  @param[in, out] BufferSize  Size of the returned file infomation.
NetworkPkg/Dhcp6Dxe/Dhcp6Io.c:    // For async, signal the Ia event to inform Ia infomation update.
NetworkPkg/Dhcp6Dxe/Dhcp6Io.c:      // For async, signal the Ia event to inform Ia infomation update.
NetworkPkg/Dhcp6Dxe/Dhcp6Utility.c:  Parse the address option and update the address infomation.
ShellPkg/Include/Protocol/EfiShellEnvironment2.h:  @param[in] DumpInfo           The function pointer to dump infomation function
ShellPkg/Library/UefiShellNetwork1CommandsLib/Ping.c:  receive reply, match and print reply infomation.
ShellPkg/Library/UefiShellNetwork2CommandsLib/Ping6.c:  receive reply, match and print reply infomation.
UefiPayloadPkg/GraphicsOutputDxe/GraphicsOutput.c:    // Use default device infomation when the device info HOB doesn&apos;t exist
UefiPayloadPkg/GraphicsOutputDxe/GraphicsOutput.c:      // It&apos;s not a video device, or device infomation doesn&apos;t match.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10850</commentid>
    <comment_count>1</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-01-10 09:21:08 +0000</bug_when>
    <thetext>NetworkPkg: Already reviewed a patch done by Antoine Coeur and Philippe Mathieu-Daude which addresses this. Waiting for PR to tianocore/edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12206</commentid>
    <comment_count>2</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-04-14 08:29:44 +0000</bug_when>
    <thetext>NetworkPkg typos were addressed by this PR: https://github.com/tianocore/edk2/pull/357</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12217</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-14 21:52:41 +0000</bug_when>
    <thetext>This one has been merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2835</bug_id>
          
          <creation_ts>2020-07-02 18:05:50 +0000</creation_ts>
          <short_desc>Explicitly cast UINT64 to UINT32 in ArmMMU</short_desc>
          <delta_ts>2020-10-28 14:32:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13036</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-07-02 18:05:50 +0000</bug_when>
    <thetext>Possible lost of data in VS2019


ArmMmuLibUpdate.c lines 155 and 291

Will followup with a suggested patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13061</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-07-07 21:53:23 +0000</bug_when>
    <thetext>Confirmed this issue, wait for the patch from Matthew.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13062</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-07 21:54:11 +0000</bug_when>
    <thetext>The full file path is:

ArmPkg/Library/ArmMmuLib/Arm/ArmMmuLibUpdate.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14032</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-19 13:56:34 +0000</bug_when>
    <thetext>Matt and I discussed this issue and I&apos;ll take the BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14037</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-19 18:21:30 +0000</bug_when>
    <thetext>V1 patch on the list: https://edk2.groups.io/g/devel/message/66416</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14140</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-28 14:32:11 +0000</bug_when>
    <thetext>This V1 patch was merged to edk2/master in the following commit:
https://github.com/tianocore/edk2/commit/2bdc90429a149af6c0e88506730123586b6e08ae</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2254</bug_id>
          
          <creation_ts>2019-10-09 19:43:23 +0000</creation_ts>
          <short_desc>CryptoPkg dsc doesn&apos;t include every library and module within the components section thus it isn&apos;t a complete build of everything in the package</short_desc>
          <delta_ts>2019-10-23 13:40:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9979</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 19:43:23 +0000</bug_when>
    <thetext>please add missing module to the components section.  

See https://github.com/spbrogan/edk2/commit/1a21cb1bc78ffa98ff14af420c2f56b0b1a9ff54</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10070</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:25:29 +0000</bug_when>
    <thetext>All these errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10173</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 16:37:16 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/49362</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10196</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-23 13:40:13 +0000</bug_when>
    <thetext>pushed as d6b926e76e..412c963842</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2506</bug_id>
          
          <creation_ts>2020-02-06 21:26:02 +0000</creation_ts>
          <short_desc>When setting a new PK in setup mode, PK should not be required to be self-signed</short_desc>
          <delta_ts>2023-02-04 06:54:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Jan Bobek">jbobek</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jbobek</cc>
    
    <cc>jiewen.yao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11148</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-02-06 21:26:02 +0000</bug_when>
    <thetext>In ProcessVarWithPk in AuthService.c, we check fall into the last else branch if we are in SETUP mode and it is the PK that we&apos;re updating. The PK packet shouldn&apos;t be self-signed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11164</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-07 07:08:28 +0000</bug_when>
    <thetext>Matthew,

The following mailing list thread (a patch posting from 2019) is related:

* [edk2-devel] [PATCH]
  SecurityPkg: Don&apos;t Verify the enrolled PK in setup mode

  http://mid.mail-archive.com/7564.1562045108414671150@groups.io
  https://edk2.groups.io/g/devel/message/43150

The patch there removes the last &quot;else&quot; branch that you mention.

The patch was not been merged; I objected to it in its posted form. A v2 was requested (with a FeaturePCD), but then Derek Lin (the original submitter) decided he liked the in-tree behavior more than a new FeaturePCD.

To summarize my request from back then: I don&apos;t object to the proposed PK enrollment relaxation as an option (even as the default option), I&apos;d just like a FeaturePCD for platforms that prefer keeping the current self-signedness requirement. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11168</commentid>
    <comment_count>2</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-02-07 13:34:25 +0000</bug_when>
    <thetext>Laszlo,

Thanks for commented with those links, it&apos;s very helpful to see more of the history around this issue. I agree- a FeaturePCD is needed here. Should the disabled behavior to be the same as what it currently does now? Since we the spec says that it doesn&apos;t have to be checked for self-signing, should the PCD be opt-in or opt-out?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11181</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-10 07:28:00 +0000</bug_when>
    <thetext>Hi Matthew,

I think a platform should not be required to tweak a PCD (i.e., to diverge from the PCD default inherited from the package DEC file), in order to get spec-conformant behavior.

In other words, the default behavior for the logic in question should be changed (relaxed) so that it match the spec. And then the PCD could be used by platforms to diverge from the spec (i.e., in this particular case, to enforce self-signedness on the PK, which is stricter than what the spec mandates).

So whoever proposed a patch for SecurityPkg, I&apos;d ask them to attach two more patches (one for OvmfPkg and ArmVirtPkg each), for opting into the strict self-signedness check.

Whether the name of the new PCD should be in the negative sense (&quot;disable self-signedness check&quot;) or in the positive sense (&quot;enable self-signedness check&quot;), is an orthogonal question. I&apos;ll defer to the SecurityPkg maintainers on that.

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11182</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-10 07:43:56 +0000</bug_when>
    <thetext>In order to keep bisectability, I&apos;d suggest something like:

- patch#1: introduce &quot;PcdRequireSelfSignedPk&quot; to SecurityPkg (code and PCD), with the PCD default being TRUE

- patch#2: explicitly set PcdRequireSelfSignedPk to TRUE in the OvmfPkg DSC files, when SECURE_BOOT_ENABLE

- patch#3: similarly in ArmVirtPkg

- patch#4: flip the DEC default in SecurityPkg to FALSE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11216</commentid>
    <comment_count>5</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-02-11 19:16:18 +0000</bug_when>
    <thetext>I think we can go ahead with that plan. Perhaps #2 and #3 could be combined, but I can understand the case for them to be seperate.

The fix is public here: https://github.com/microsoft/mu_basecore/commit/0c424a7c0a505bbf81825b617a335cbbf455f091</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11230</commentid>
    <comment_count>6</comment_count>
      <attachid>460</attachid>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-02-12 14:33:25 +0000</bug_when>
    <thetext>Created attachment 460
Potential patch for PK Self-signing spec

A potential patch that lines up with #1 on Lazlo&apos;s suggested patch list</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11235</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-12 20:16:12 +0000</bug_when>
    <thetext>Matthew Carlson: can you share what test has been verified for this change?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11236</commentid>
    <comment_count>8</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-02-12 20:54:54 +0000</bug_when>
    <thetext>Hey Liming, 

I verified this works by clearing the PK and applying a new PK that was not self signed via the EFI shell and an OS call. I then verified that once set, the PK was not able to be set again, self-signed or not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13872</commentid>
    <comment_count>9</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-10-02 19:00:46 +0000</bug_when>
    <thetext>Any update on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13881</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-06 06:58:12 +0000</bug_when>
    <thetext>(1) updating Liming&apos;s adddress on the CC list

(2) I think once Liming confirms that Matthew&apos;s testing described in comment 8 is okay, Matthew should post the series to edk2-devel.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20534</commentid>
    <comment_count>11</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2023-01-06 20:23:26 +0000</bug_when>
    <thetext>Would you please send out the patch set, we can continue the review process?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20740</commentid>
    <comment_count>12</comment_count>
    <who name="Jan Bobek">jbobek</who>
    <bug_when>2023-01-20 18:08:17 +0000</bug_when>
    <thetext>I&apos;ve sent out a patch series to edk2-devel according to Laszlo&apos;s suggestion in comment #4, cover letter here:

https://edk2.groups.io/g/devel/message/98945</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20993</commentid>
    <comment_count>13</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2023-02-04 06:54:22 +0000</bug_when>
    <thetext>Merged https://github.com/tianocore/edk2/pull/3998</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>460</attachid>
            <date>2020-02-12 14:33:25 +0000</date>
            <delta_ts>2020-02-12 14:33:25 +0000</delta_ts>
            <desc>Potential patch for PK Self-signing spec</desc>
            <filename>pk_pcd_patch.txt</filename>
            <type>text/plain</type>
            <size>2704</size>
            <attacher name="Matthew Carlson">macarl</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2388</bug_id>
          
          <creation_ts>2019-11-27 00:49:02 +0000</creation_ts>
          <short_desc>SMM latency increase sharply</short_desc>
          <delta_ts>2020-04-14 07:39:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1937</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10561</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-11-27 00:49:02 +0000</bug_when>
    <thetext>Under SMM, we find SMM latency increases sharply recently. For example, McaErrorHandler latency consumes 685us. Most time is consumed by UefiCpuPkg.StartupThisAp. With MM MP protocol changes, its latency downgrade to 165us.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10562</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-11-27 00:49:42 +0000</bug_when>
    <thetext>Confirmed this is a real issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10574</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-28 08:50:54 +0000</bug_when>
    <thetext>This seems to be a regression from the work done for bug 1937.

Patches on the list:

[PATCH] UefiCpuPkg/PiSmmCpuDxeSmm: Avoid allocate Token every time.
http://mid.mail-archive.com/20191128025814.417-1-eric.dong@intel.com
https://edk2.groups.io/g/devel/message/51437

[PATCH v2] UefiCpuPkg/PiSmmCpuDxeSmm: Avoid allocate Token every time.
http://mid.mail-archive.com/20191128061716.196-1-eric.dong@intel.com
https://edk2.groups.io/g/devel/message/51442</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10644</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-12-09 21:23:18 +0000</bug_when>
    <thetext>SHA-1: 9caaa79dd7e078ebb4012dde3b3d3a5d451df609

* UefiCpuPkg/PiSmmCpuDxeSmm: Avoid allocate Token every time

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2388

Token is new introduced by MM MP Protocol. Current logic allocate Token
every time when need to use it. The logic caused SMI latency raised to
very high. Update logic to allocate Token buffer at driver&apos;s entry point.
Later use the token from the allocated token buffer. Only when all the
buffer have been used, then need to allocate new buffer.

Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Acked-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12181</commentid>
    <comment_count>4</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-04-10 02:52:25 +0000</bug_when>
    <thetext>Find new performance issue in some platform which has many cores. Reopen this bugs to record the fix for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12200</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-14 05:04:47 +0000</bug_when>
    <thetext>Eric, do the following recent commits resolve this BZ?

  1  3fdc47c65bba UefiCpuPkg/PiSmmCpuDxeSmm: Improve the performance of
                  GetFreeToken()
  2  d84f090fd762 UefiCpuPkg/PiSmmCpuDxeSmm: Remove Used parameter.
  3  1cae0d421557 UefiCpuPkg/PiSmmCpuDxeSmm: Remove useless code in
                  ResetTokens.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12202</commentid>
    <comment_count>6</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-04-14 07:39:31 +0000</bug_when>
    <thetext>yes, these changes fix this issue. Thanks Laszlo.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2272</bug_id>
          
          <creation_ts>2019-10-15 05:14:29 +0000</creation_ts>
          <short_desc>Overflowed array index on array mUsbTypeString</short_desc>
          <delta_ts>2020-04-08 02:03:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10027</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-10-15 05:14:29 +0000</bug_when>
    <thetext>In MdeModulePkg/Application/SmiHandlerProfileInfo/SmiHandlerProfileInfo.c, function UsbTypeToString:

 if (Type &gt;= 0 &amp;&amp; Type &lt;= ARRAY_SIZE(mUsbTypeString)) {
    return mUsbTypeString[Type];
 } else


The comparison is off-by one on the upper limit, it should be:

 if (Type &gt;= 0 &amp;&amp; Type &lt; ARRAY_SIZE(mUsbTypeString)) {</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10057</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:19:33 +0000</bug_when>
    <thetext>Please find the correct maintainer for this part of of MdeModulePkg and assign the bug to them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10091</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-17 21:31:37 +0000</bug_when>
    <thetext>Shenglei, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11312</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-19 21:03:36 +0000</bug_when>
    <thetext>Assigned to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11313</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 21:07:54 +0000</bug_when>
    <thetext>Guomin will check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11541</commentid>
    <comment_count>5</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 21:57:57 +0000</bug_when>
    <thetext>Have comment at https://edk2.groups.io/g/devel/message/54723, waiting for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12130</commentid>
    <comment_count>6</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-08 02:03:26 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/d6f99b2ac4296662720db76d7c23d224f5288df3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2166</bug_id>
          
          <creation_ts>2019-09-08 21:08:05 +0000</creation_ts>
          <short_desc>BaseTools: build clean fail</short_desc>
          <delta_ts>2019-09-09 21:56:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9499</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-08 21:08:05 +0000</bug_when>
    <thetext>build clean fail.
This is a regression issue caused by commit 94459080c118049aba927ec0444ba5b750b7d2c9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9500</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-08 21:15:09 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9501</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-08 21:15:51 +0000</bug_when>
    <thetext>Patch for review:
https://edk2.groups.io/g/devel/message/47014</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9561</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-09 21:56:56 +0000</bug_when>
    <thetext>commit at 53e2eaba7a19cda3183b1bb2a2619a2494538e52</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2633</bug_id>
          
          <creation_ts>2020-03-26 04:54:02 +0000</creation_ts>
          <short_desc>remove code to generate the properties table</short_desc>
          <delta_ts>2020-04-08 03:20:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11859</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-26 04:54:02 +0000</bug_when>
    <thetext>The EFI_PROPERTIES_RUNTIME_MEMORY_PROTECTION_NON_EXECUTABLE_PE_DATA feature, indicated by the associated bit in the properties table, was deprecated almost immediately after it was introduced, due to severe compatibility issues with almost every OS. Instead, the memory attributes table was introduced, which achieves the same but without the associated complications.

The memory attributes table is generated by default by DXE core if DXE_RUNTIME_DRIVER modules use a section alignment that is suitable (i.e., &gt;= 4 KiB). The properties table can still be generated as well, by setting gEfiMdeModulePkgTokenSpaceGuid.PcdPropertiesTableEnable to TRUE.

This is causing confusion, and given that the table is deprecated to begin with, we should not keep this code in the EDK2 reference implementation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11876</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-27 09:57:36 +0000</bug_when>
    <thetext>Patch series on the list from Ard:

[edk2-devel] [PATCH 0/4] remove generation of EFI properties table
https://edk2.groups.io/g/devel/message/56387
http://mid.mail-archive.com/20200326102443.748-1-ard.biesheuvel@linaro.org</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12114</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:16:37 +0000</bug_when>
    <thetext>The patch has been merged. This BZ can be closed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12137</commentid>
    <comment_count>3</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-04-08 03:20:45 +0000</bug_when>
    <thetext>Pushed as aab6a9c9aebb1f6614e72e98bdf6b5af93a43527</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2056</bug_id>
          
          <creation_ts>2019-08-07 00:14:42 +0000</creation_ts>
          <short_desc>VS20xx IA32 builds of EmulatorPkg can not boot</short_desc>
          <delta_ts>2019-08-19 17:20:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8807</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-07 00:14:42 +0000</bug_when>
    <thetext>The VS20xx IA32 builds of the EmulatorPkg complete, but they can not boot.

VS2017
======
c:\work\GitHub\tianocore\Build\EmulatorIA32\DEBUG_VS2017\IA32&gt;WinHost.exe

EDK II WIN Host Emulation Environment from http://www.tianocore.org/edk2/
  BootMode 0x00
  OS Emulator passing in 128 KB of temp RAM at 0x00e10000 to SEC
  FD loaded from ../FV/FV_RECOVERY.fd
 contains SEC Core

LoadLibraryEx (c:\work\github\tianocore\Build\EmulatorIA32\DEBUG_VS2017\IA32\EmulatorPkg\Sec\Sec\DEBUG\EmuSec.DLL,
               NULL, DONT_RESOLVE_DLL_REFERENCES)

WinHost.exe crashes with access to an invalid address in 
EmulatorPkg/Sec/Sec.c line 79.

  EMU_MAGIC_PAGE()-&gt;PpiList = PpiList;

VS2015x86
=========
c:\work\GitHub\tianocore\Build\EmulatorIA32\DEBUG_VS2015x86\IA32&gt;WinHost.exe

EDK II WIN Host Emulation Environment from http://www.tianocore.org/edk2/
  BootMode 0x00
  OS Emulator passing in 128 KB of temp RAM at 0x005e0000 to SEC
  FD loaded from ../FV/FV_RECOVERY.fd
 contains SEC Core

LoadLibraryEx (c:\work\github\tianocore\Build\EmulatorIA32\DEBUG_VS2015x86\IA32\EmulatorPkg\Sec\Sec\DEBUG\EmuSec.DLL,
               NULL, DONT_RESOLVE_DLL_REFERENCES)

WinHost.exe crashes with access to an invalid address in 
EmulatorPkg/Sec/Sec.c line 79.

  EMU_MAGIC_PAGE()-&gt;PpiList = PpiList;

The root cause is the default value of PcdPeiServicesTablePage which
is used in the EMU_MAGIC_PAGE() macro is 0x1003000000 which is a safe
value for X64 builds, but is above 4GB for IA32 builds and is truncated
to 0x03000000 and that address is not mapped.

The recommended solution is to use a different value for IA32
VS20xx builds.  The value 0x13000000 works for VS2015x86 and
VS2017 builds.

It would be better if this address was dynamically allocated in
Windows and the allocated address was used.  The current design
uses a FixedAtBuild PCD that because the value is needed in the
SEC phase that does not support dynamic PCDs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8808</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-07 00:23:07 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8809</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-07 00:23:24 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/44967</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8840</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-07 16:58:00 +0000</bug_when>
    <thetext>After rerunning some clean builds, the exception failure mode 
can not be reproduced.

If the address from PcdPeiServicesTablePage can not be mapped,
then the application exits with an error message.

After further testing, the simpler fix is to change the DEC
default value of PcdPeiServicesTablePage to a value that works
for X64 builds on Windows and POSIX host environments and a 
value where the lower 32-bits of PcdPeiServicesTablePage works
on IA32 builds for Windows and POSIX host environments.

The recommended value after this testing is 0x1013000000.
This uses the value of 0x13000000 for IA32 builds.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8848</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-07 22:34:48 +0000</bug_when>
    <thetext>Patch email for review V2

https://edk2.groups.io/g/devel/message/45100</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9064</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:18:26 +0000</bug_when>
    <thetext>Patch email V3 for review

https://edk2.groups.io/g/devel/message/45297
https://edk2.groups.io/g/devel/message/45296</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9065</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:19:29 +0000</bug_when>
    <thetext>Patch email V4 for review

https://edk2.groups.io/g/devel/message/45758
https://edk2.groups.io/g/devel/message/45759

With this version XCODE5 boots for IA32 and X64 have been verified</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9066</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:20:13 +0000</bug_when>
    <thetext>Patch email V5 for review

https://edk2.groups.io/g/devel/message/45953
https://edk2.groups.io/g/devel/message/45954</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9067</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:20:27 +0000</bug_when>
    <thetext>Pushed 76e12fa334..74c22c59e3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2300</bug_id>
          
          <creation_ts>2019-10-20 06:09:48 +0000</creation_ts>
          <short_desc>Handling mixed UnicodeCollation with accordance to PlatformLang</short_desc>
          <delta_ts>2019-11-14 04:59:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10128</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-20 06:09:48 +0000</bug_when>
    <thetext>On some firmwares PlatformLang is set to the local language (e.g. ru-RU), yet these firmwares either do not support unicode collation protocol at all (https://bugzilla.tianocore.org/show_bug.cgi?id=2299) or support it exclusively for en or en-US.

For these firmwares we should try to fallback to en-US when no compatible unicode collation is found based on PlatformLang in CommandInit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10141</commentid>
    <comment_count>1</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2019-10-20 13:32:16 +0000</bug_when>
    <thetext>Patch submitted: https://edk2.groups.io/g/devel/message/49260
Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10326</commentid>
    <comment_count>2</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2019-11-05 08:52:01 +0000</bug_when>
    <thetext>An updated patch has been submited at: https://edk2.groups.io/g/devel/message/49965</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10427</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-11-14 04:59:33 +0000</bug_when>
    <thetext>fixed at 9e9f0be353d4e28ccbca8f84fc8b2ab1bbe31d5c.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2193</bug_id>
          
          <creation_ts>2019-09-15 22:24:57 +0000</creation_ts>
          <short_desc>Need more input parameter checking and error message output for CopyFileOnChange()</short_desc>
          <delta_ts>2019-09-19 00:24:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9664</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-09-15 22:24:57 +0000</bug_when>
    <thetext>The current BaseTools\Source\Python\Common\Misc.pyCopyFileOnChange() method does not accept the input SrcFile parameter as a dir, but the method does not check the SrcFile is dir or not. This will cause the CopyLong(SrcFile, tf.name) fails later if the input SrcFile is a dir path, see below code. And this failure is after the FileLock.acquire() which will cause the dead lock issue in multi-process build.


    if FileLock:
        FileLock.acquire()

    # os.replace and os.rename are the atomic operations in python 3 and 2.
    # we use these two atomic operations to ensure the file copy is atomic:
    # copy the src to a temp file in the dst same folder firstly, then
    # replace or rename the temp file to the destination file.
    with tempfile.NamedTemporaryFile(dir=DirName, delete=False) as tf:
        CopyLong(SrcFile, tf.name)  &lt;--this will fail and return immediately if SrcFile is dir


So, it is better to add more input parameter type checking and error message output for CopyFileOnChange()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9665</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-09-15 22:25:17 +0000</bug_when>
    <thetext>Confirm and take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9717</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-09-19 00:24:23 +0000</bug_when>
    <thetext>Fixed at b0c15fb128c518b9acd8611a2deea213e9e55193</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2549</bug_id>
          
          <creation_ts>2020-02-22 11:09:47 +0000</creation_ts>
          <short_desc>MdeModulePkg: Libraries that depend on SMM depended on non-x86</short_desc>
          <delta_ts>2020-03-02 17:42:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Daniel Schaefer">daniel.schaefer</reporter>
          <assigned_to name="Daniel Schaefer">daniel.schaefer</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11398</commentid>
    <comment_count>0</comment_count>
    <who name="Daniel Schaefer">daniel.schaefer</who>
    <bug_when>2020-02-22 11:09:47 +0000</bug_when>
    <thetext>The modules:                                                                            
                                                                                        
  MdeModulePkg/Bus/Ata/AhciPei/AhciPei.inf                                              
  MdeModulePkg/Bus/Pci/NvmExpressPei/NvmExpressPei.inf                                  
  MdeModulePkg/Universal/Acpi/FirmwarePerformanceDataTableDxe/FirmwarePerformanceDxe.inf
                                                                                        
seem like they are independent of SMM but they actually do requires SMM&apos;s               
LockBoxLib. Because the usage of those is not restricted to IA32 or X64, they prevent building MdeModulePkg on non-x86.       

I&apos;ll send a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11487</commentid>
    <comment_count>1</comment_count>
    <who name="Daniel Schaefer">daniel.schaefer</who>
    <bug_when>2020-03-02 17:42:58 +0000</bug_when>
    <thetext>It&apos;s not a bug - using LockBoxNullLib solves this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2431</bug_id>
          
          <creation_ts>2019-12-20 01:15:44 +0000</creation_ts>
          <short_desc>Microcode revision mismatch between BSP and AP</short_desc>
          <delta_ts>2020-03-03 20:54:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="sfu5">siyuan.fu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10736</commentid>
    <comment_count>0</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2019-12-20 01:15:44 +0000</bug_when>
    <thetext>The microcode loader in UefiCpuPkg always chooses debug microcode for BSP, and skip the APs&apos; microcode load when its current revision is not zero (because of FIT based loading). This will cause a microcode revision mismatch problem in below situation:
1. Two microcode co-exists in flash: one production version and one debug version microcode.
2. FIT loads production microcode to BSP and all AP.
3. UefiCpuPkg loader loads debug microcode to BSP, and skip the loading on AP.
As a result, different microcodes are loaded to BSP and AP, and trigger microcode mismatch error blue screen in Windows OS.

I think UefiCpuPkg should follow same rule to choose microcode for BSP and AP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11508</commentid>
    <comment_count>1</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2020-03-03 20:54:45 +0000</bug_when>
    <thetext>commit 396e791059f37062cbee85696e2b4186ec72a9e3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2913</bug_id>
          
          <creation_ts>2020-08-20 11:53:56 +0000</creation_ts>
          <short_desc>Implement the reference platform driver to provide EFI_REDFISH_PLATFORM_BIOS_RESOURCE_PROTOCOL</short_desc>
          <delta_ts>2022-03-03 22:18:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Reference Implementation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13479</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 11:53:56 +0000</bug_when>
    <thetext>The EFI_REDFISH_PLATFORM_BIOS_RESOURCE_PROTOCOL protocol which allow platform integrator to provide platform OEM Redfish BIOS resource.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13527</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 22:14:13 +0000</bug_when>
    <thetext>The code is ready in edk2-staging repo. How do next step?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18549</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-03 22:18:34 +0000</bug_when>
    <thetext>The EDK2 Redfish solution is all upstream to edk2. This bug is not valid now because the implementation is moved to EDK2 Redfish CLinet Package.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2211</bug_id>
          
          <creation_ts>2019-09-23 22:27:09 +0000</creation_ts>
          <short_desc>Add FIT support using FitGen</short_desc>
          <delta_ts>2019-10-23 18:49:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9755</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-23 22:27:09 +0000</bug_when>
    <thetext>Images built in WhiskeylakeOpenBoardPkg should have a Firmware Interface Table (FIT) placed into the final flash image. This is done by running FitGen with the .fd file produced in the build where the .fd file has a BIOS Info structure in the image. The BIOS Info structure should be placed into the binary image via a source driver called &quot;BiosInfo.inf&quot;. The FILE_GUID for this driver should be passed to FitGen.exe with the &quot;-I&quot; flag so that FitGen may find the BIOS Info structure and parse the relevant objects described in the structure for inclusion into the FIT.

At this time, microcode patches are already included in the BIOS flash file in FV.FvMicrocode. The location of this FV should be given to FitGen by including a FIT type 0x1 entry (microcode) in the BIOS Info table with the FV address in the flash file:

For example:

typedef struct {
  BIOS_INFO_HEADER  Header;
  BIOS_INFO_STRUCT  Entry[1];
} BIOS_INFO;

GLOBAL_REMOVE_IF_UNREFERENCED BIOS_INFO  mBiosInfo = {
  {
    BIOS_INFO_SIGNATURE,
    1,
    0,
  },
  {
    {
      FIT_TYPE_01_MICROCODE,
      BIOS_INFO_STRUCT_ATTRIBUTE_MICROCODE_WHOLE_REGION,
      0x0100,
      FixedPcdGet32 (PcdFlashMicrocodeFvSize),
      FixedPcdGet32 (PcdFlashMicrocodeFvBase)
    }
  }
};

The FIT structure is described in https://github.com/tianocore/edk2-platforms/blob/master/Silicon/Intel/IntelSiliconPkg/Include/IndustryStandard/FirmwareInterfaceTable.h.

The output file should have a FIT with the location of the table given at 4GB - 0x40. A tool such as the UEFITool can be used to verify correctness of the table.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9826</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-25 21:53:57 +0000</bug_when>
    <thetext>Prince is assigned the task</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10111</commentid>
    <comment_count>2</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-10-18 13:40:31 +0000</bug_when>
    <thetext>FIT changes are merged to master
commit id:2540e812a73e3d57af0d95d9a3de97ffde7159e4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10201</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-23 18:48:09 +0000</bug_when>
    <thetext>Committed in the following two patches:

95e16d73c6b9c2c8c798fec015fe863a7823de69
2540e812a73e3d57af0d95d9a3de97ffde7159e4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10202</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-23 18:49:06 +0000</bug_when>
    <thetext>Change is completed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2101</bug_id>
          
          <creation_ts>2019-08-21 10:01:09 +0000</creation_ts>
          <short_desc>BaseTools: remove unnecessary the checking for file existing</short_desc>
          <delta_ts>2019-09-16 22:27:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9121</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-21 10:01:09 +0000</bug_when>
    <thetext>There are some unnecessary file exist checking in build tool. Remove them to make build faster.

For example, in PlatformAutoGen.py line 276 - 281.
if os.path.exists(VpdMapFilePath):
    OrgVpdFile.Read(VpdMapFilePath)
    PcdItems = OrgVpdFile.GetOffset(PcdNvStoreDfBuffer[0])
    NvStoreOffset = list(PcdItems.values())[0].strip() if PcdItems else &apos;0&apos;
else:
    EdkLogger.error(&quot;build&quot;, FILE_READ_FAILURE, &quot;Can not find VPD map file %s to fix up VPD offset.&quot; % VpdMapFilePath)


Can be changed to:
try:
    OrgVpdFile.Read(VpdMapFilePath)
    PcdItems = OrgVpdFile.GetOffset(PcdNvStoreDfBuffer[0])
    NvStoreOffset = list(PcdItems.values())[0].strip() if PcdItems else &apos;0&apos;
except:
    EdkLogger.error(&quot;build&quot;, FILE_READ_FAILURE, &quot;Can not find VPD map file %s to fix up VPD offset.&quot; % VpdMapFilePath)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9122</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-21 10:03:42 +0000</bug_when>
    <thetext>Assign to Fan, Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9612</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-11 07:00:41 +0000</bug_when>
    <thetext>Bob wil work on it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9681</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-16 22:22:21 +0000</bug_when>
    <thetext>pushed at 0075ab2cec500fc679c6b2e4990142b4a2e51050</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9684</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-16 22:27:32 +0000</bug_when>
    <thetext>update status</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2806</bug_id>
          
          <creation_ts>2020-06-14 17:22:53 +0000</creation_ts>
          <short_desc>Use filename instead of function name in target based unit test log messages</short_desc>
          <delta_ts>2020-07-31 18:09:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12876</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-14 17:22:53 +0000</bug_when>
    <thetext>Update the log messages generated in target mode to use
FileName instead of FunctionName.  FunctionName is an empty
string so the log messages generated do not provide enough
information to know the source of a unit test failure.

Using FileName combined with LineNumber provides the
right information to identify the location of a unit test
failure.

This bug applies to all calls to UnitTestLogFailure() and 
UT_LOG_ERROR in UnitTestFrameworkPkg/Library/UnitTest/Assert.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12877</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-14 17:23:06 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13254</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 17:58:30 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13273</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:09:10 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/5d29e2d020e8b0ad70f3f766c38429c3bfad0d41
https://github.com/tianocore/edk2/commit/9a6c4ac68e3d9590cf17914e07e929a1f0e7c190
https://github.com/tianocore/edk2/commit/133891b712a9ceda0fbdb9649b559773e4cdc6db
https://github.com/tianocore/edk2/commit/75e92c13541672a3af349067a040b9dda3d4452d
https://github.com/tianocore/edk2/commit/26824851b041d9e81921ec7ef97220d2a2576157
https://github.com/tianocore/edk2/commit/425df6923ec00df32bb6f20d1440a2e920f0e1e7
https://github.com/tianocore/edk2/commit/77e42ca4dfbf51918d677f32ab64bb99dd07cc40
https://github.com/tianocore/edk2/commit/813c2b15255406f587484ffcedfd01ca9ab5d056
https://github.com/tianocore/edk2/commit/f08715947ad52ee4fd67358660860ea63a532e15
https://github.com/tianocore/edk2/commit/35f9d7c41b380d67953dabc5994a65e32baa7d39
https://github.com/tianocore/edk2/commit/a0a49eb87c5819a76a0a5fea81d2b51ffdfcb3aa
https://github.com/tianocore/edk2/commit/540fd45f755f1646e019099c90c9f59286604228
https://github.com/tianocore/edk2/commit/d3c9e40abcc839f59d56b7fca7787647533d96fe
https://github.com/tianocore/edk2/commit/0a81a98e900118857395b101f413c1c17b66c073
https://github.com/tianocore/edk2/commit/9af8a299cec10656b757ae30a71c1310260d3c31
https://github.com/tianocore/edk2/commit/5b86bbf891677882a9d097f87cd0128562c12c43

Pull Request:

https://github.com/tianocore/edk2/pull/779</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2121</bug_id>
          
          <creation_ts>2019-08-23 06:13:43 +0000</creation_ts>
          <short_desc>Implement SmmAccess in IntelSiliconPkg</short_desc>
          <delta_ts>2019-09-04 23:45:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Marc Chen">marc.w.chen</reporter>
          <assigned_to name="Marc Chen">marc.w.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9204</commentid>
    <comment_count>0</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-08-23 06:13:43 +0000</bug_when>
    <thetext>since the SmmAccess doesn&apos;t have any silicon specific code, the implementation should be put in IntelSiliconPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9463</commentid>
    <comment_count>1</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-09-04 23:45:29 +0000</bug_when>
    <thetext>push fbab48fb133d80fa9376131ebdce079edfa9bea5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2589</bug_id>
          
          <creation_ts>2020-03-11 14:35:04 +0000</creation_ts>
          <short_desc>ASSERT_EFI_ERROR used improperly in RecordPciDeviceInList()</short_desc>
          <delta_ts>2020-03-27 01:56:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11664</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-11 14:35:04 +0000</bug_when>
    <thetext>In file IntelSiliconPkg/Feature/PcieSecurity/IntelPciDeviceSecurityDxe/IntelPciDeviceSecurityDxe.c::RecordPciDeviceInList(), there&apos;s a:
ASSERT_EFI_ERROR(NewPciDevice != NULL);

This should be an ASSERT().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11720</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-17 22:12:24 +0000</bug_when>
    <thetext>guomin: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11735</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-19 00:22:00 +0000</bug_when>
    <thetext>Provide the patch https://edk2.groups.io/g/devel/message/55969 for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11874</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-27 01:56:16 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2-platforms/commit/238fa7124ab6f01cd8d88911a48490e90874c839</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2487</bug_id>
          
          <creation_ts>2020-01-28 00:45:58 +0000</creation_ts>
          <short_desc>Call stack cannot unwind correctly in debuggers for CLANGPDB x64 binary</short_desc>
          <delta_ts>2020-02-07 00:40:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10982</commentid>
    <comment_count>0</comment_count>
      <attachid>451</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2020-01-28 00:45:58 +0000</bug_when>
    <thetext>Created attachment 451
X64 binary call stack

All windows debuggers, e.g. MSVC and Simics, have problem to walk the call stack in the runtime when debug CLANGPDB x64 binary, and can only show the single frame 0 info in the call stack menu. The debuggers cannot unwind x64 call stack correctly for CLANGPDB x64 binary. This issue only happen for X64 binary and IA32 binary call stack unwind is ok.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10983</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2020-01-28 00:47:23 +0000</bug_when>
    <thetext>confirm and take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10984</commentid>
    <comment_count>2</comment_count>
      <attachid>452</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2020-01-28 00:48:28 +0000</bug_when>
    <thetext>Created attachment 452
IA32 binary call stack</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10985</commentid>
    <comment_count>3</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2020-01-28 00:49:35 +0000</bug_when>
    <thetext>Attached pictures show this issue in MSVC call stack menu. The X64 binary can only show the frame 0 in the call stack, but the IA32 can show all the callers&apos; frames.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11141</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 20:23:54 +0000</bug_when>
    <thetext>Steven takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11159</commentid>
    <comment_count>5</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2020-02-07 00:40:45 +0000</bug_when>
    <thetext>Pushed by 77b738b36f5f19b33a77ff74ce822c9c5a050876</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>451</attachid>
            <date>2020-01-28 00:45:58 +0000</date>
            <delta_ts>2020-01-28 00:45:58 +0000</delta_ts>
            <desc>X64 binary call stack</desc>
            <filename>CLANGPDB_X64_CallStack_Assembly.jpg</filename>
            <type>image/jpeg</type>
            <size>292466</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>452</attachid>
            <date>2020-01-28 00:48:28 +0000</date>
            <delta_ts>2020-01-28 00:48:28 +0000</delta_ts>
            <desc>IA32 binary call stack</desc>
            <filename>CLANGPDB_IA32_CallStack_Assembly.jpg</filename>
            <type>image/jpeg</type>
            <size>298788</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2360</bug_id>
          
          <creation_ts>2019-11-19 10:49:06 +0000</creation_ts>
          <short_desc>spelling mistake, &quot;instrcution&quot; should be &quot;instruction&quot;</short_desc>
          <delta_ts>2020-08-03 14:44:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10476</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-19 10:49:06 +0000</bug_when>
    <thetext>spelling mistake, &quot;instrcution&quot; should be &quot;instruction&quot; in MdeModulePkg/Universal/EbcDxe/EbcDebugger/EdbCommand.c:    

            L&quot;  (No Argument) - Show current instrcution branch\n&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13277</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:35:14 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13278</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:35:45 +0000</bug_when>
    <thetext>Patch for review

https://edk2.groups.io/g/devel/message/63603</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13304</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-08-03 14:44:59 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/6a0b48873bfdd38651a34edfd2fe57bf54564103

Pull Request:

https://github.com/tianocore/edk2/pull/851</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2255</bug_id>
          
          <creation_ts>2019-10-09 19:45:24 +0000</creation_ts>
          <short_desc>UefiCpuPkg dsc doesn&apos;t include every library and module within the components section thus it isn&apos;t a complete build of everything in the package</short_desc>
          <delta_ts>2019-10-23 20:51:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9980</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 19:45:24 +0000</bug_when>
    <thetext>please add missing module to the components section.  

https://github.com/spbrogan/edk2/commit/17360f1e43df309ae41f01669bfd3714fcdb10ee</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10069</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:25:21 +0000</bug_when>
    <thetext>All these errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10169</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 14:47:08 +0000</bug_when>
    <thetext>The patch referenced here adds 2 lines

UefiCpuPkg/ResetVector/Vtf0/Bin/ResetVector.inf
UefiCpuPkg/Library/CpuCommonFeaturesLib/CpuCommonFeaturesLib.inf

Adding CpuCommonFeaturesLib looks like a good fix.

Adding ResetVector does not make sense because this module is a
binary INF.  There are no sources to build and this DSC file
does not have an associated FDF file, so there the binaries
from the ResetVector module are not used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10170</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-22 14:50:32 +0000</bug_when>
    <thetext>seems reasonable.  

Then we will want to add it to the ignore list.  
https://github.com/tianocore/edk2-staging/blob/edk2-ci/UefiCpuPkg/UefiCpuPkg.ci.yaml#L31</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10171</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 15:01:34 +0000</bug_when>
    <thetext>There is the possibility that a Binary INF could have errors in it
and processing the Binary INF as part of a package DSC file does make
sense even if there are not output files from the build.

Both lines from the referenced patch will be added</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10172</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 16:14:40 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/49361</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10203</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-23 20:51:19 +0000</bug_when>
    <thetext>pushed as 79cd636f3e..20c082e8d7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2610</bug_id>
          
          <creation_ts>2020-03-19 23:18:04 +0000</creation_ts>
          <short_desc>BaseTools print traceback info issue</short_desc>
          <delta_ts>2020-03-23 22:54:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11746</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-03-19 23:18:04 +0000</bug_when>
    <thetext>The root cause of this is that the DEC file declaring the PCD isn’t included in the INF.

build.py...
  c:\source\oracle\chg\intel\ServerSiliconPkg\SiInit\Pei\SiInitNoMe.inf(-1): error 4000: Value of PPI [gPchPostMemoryConfigurationDonePpiGuid] is not found under [Ppis] section in
  C:\Source\Oracle\chg\Edk2\MdePkg\MdePkg.dec
  c:\source\oracle\chg\intel\ServerSiliconPkg\SiliconPkg.dec
  Traceback (most recent call last):
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\AutoGen\AutoGenWorker.py&quot;, line 268, in run
  Ma.CreateCodeFile(False)
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\AutoGen\ModuleAutoGen.py&quot;, line 1828, in CreateCodeFile
  for File in self.AutoGenFileList:
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\Common\caching.py&quot;, line 28, in __get__
  Value = obj.__dict__[self._function.__name__] = self._function(obj)
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\AutoGen\ModuleAutoGen.py&quot;, line 979, in AutoGenFileList
  GenC.CreateCode(self, AutoGenC, AutoGenH, StringH, AutoGenUniIdf, UniStringBinBuffer, StringIdf, AutoGenUniIdf, IdfGenBinBuffer)
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\AutoGen\GenC.py&quot;, line 2033, in CreateCode
  CreatePpiDefinitionCode(Info, AutoGenC, AutoGenH)
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\AutoGen\GenC.py&quot;, line 1606, in CreatePpiDefinitionCode
  if Info.PpiList:
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\Common\caching.py&quot;, line 28, in __get__
  Value = obj.__dict__[self._function.__name__] = self._function(obj)
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\AutoGen\ModuleAutoGen.py&quot;, line 1103, in PpiList
  RetVal = OrderedDict(self.Module.Ppis)
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\Common\caching.py&quot;, line 28, in __get__
  Value = obj.__dict__[self._function.__name__] = self._function(obj)
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\Workspace\InfBuildData.py&quot;, line 630, in Ppis
  ExtraData=PackageList, File=self.MetaFile, Line=Record[-1])
  File &quot;C:\Source\Oracle\chg\edk2\BaseTools\Source\Python\Common\EdkLogger.py&quot;, line 284, in error
  raise FatalError(ErrorCode)
  FatalError: 16384</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11747</commentid>
    <comment_count>1</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-03-20 01:15:55 +0000</bug_when>
    <thetext>patch link in https://edk2.groups.io/g/devel/message/56047</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11789</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-03-23 22:54:40 +0000</bug_when>
    <thetext>fixed it in 2f524a745e23e1b4c73ea22b058492bfe4af84c2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2389</bug_id>
          
          <creation_ts>2019-11-27 05:00:25 +0000</creation_ts>
          <short_desc>Requesting support for SHA384 &amp; SHA512 (during signing scheme)</short_desc>
          <delta_ts>2020-01-08 04:44:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2151</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Mohamed Haniffa">mohamed.haniffa</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10563</commentid>
    <comment_count>0</comment_count>
    <who name="Mohamed Haniffa">mohamed.haniffa</who>
    <bug_when>2019-11-27 05:00:25 +0000</bug_when>
    <thetext>RSA signing scheme support is available for MD5, SHA-1 or SHA-256 algorithms alone. The request is to extend this support for SHA384 and SHA512 also.

Snippet of existing BIOS code (Edk2\CryptoPkg\Library\BaseCryptLib\Pk\CryptRsaBasic.c):
/**
  Verifies the RSA-SSA signature with EMSA-PKCS1-v1_5 encoding scheme defined in
  RSA PKCS#1.

  If RsaContext is NULL, then return FALSE.
  If MessageHash is NULL, then return FALSE.
  If Signature is NULL, then return FALSE.
  If HashSize is not equal to the size of MD5, SHA-1 or SHA-256 digest, then return FALSE.

  @param[in]  RsaContext   Pointer to RSA context for signature verification.
  @param[in]  MessageHash  Pointer to octet message hash to be checked.
  @param[in]  HashSize     Size of the message hash in bytes.
  @param[in]  Signature    Pointer to RSA PKCS1-v1_5 signature to be verified.
  @param[in]  SigSize      Size of signature in bytes.

  @retval  TRUE   Valid signature encoded in PKCS1-v1_5.
  @retval  FALSE  Invalid signature or invalid RSA context.

**/
BOOLEAN
EFIAPI
RsaPkcs1Verify (
  IN  VOID         *RsaContext,
  IN  CONST UINT8  *MessageHash,
  IN  UINTN        HashSize,
  IN  CONST UINT8  *Signature,
  IN  UINTN        SigSize
  )
{
  INT32    DigestType;
  UINT8    *SigBuf;

  //
  // Check input parameters.
  //
  if (RsaContext == NULL || MessageHash == NULL || Signature == NULL) {
    return FALSE;
  }

  if (SigSize &gt; INT_MAX || SigSize == 0) {
    return FALSE;
  }

  //
  // Determine the message digest algorithm according to digest size.
  //   Only MD5, SHA-1 or SHA-256 algorithm is supported. 
  //
  switch (HashSize) {
  case MD5_DIGEST_SIZE:
    DigestType = NID_md5;
    break;

  case SHA1_DIGEST_SIZE:
    DigestType = NID_sha1;
    break;

  case SHA256_DIGEST_SIZE:
    DigestType = NID_sha256;
    break;

++++++++++++ &lt;MISSING PIECES OF CODE&gt; +++++++++++++++++
  case SHA384_DIGEST_SIZE:
    DigestType = NID_sha384;
    break;

  case SHA512_DIGEST_SIZE:
    DigestType = NID_sha512;
    break;
++++++++++++ &lt;MISSING PIECES OF CODE&gt; +++++++++++++++++

  default:
    return FALSE;
  }

  SigBuf = (UINT8 *) Signature;
  return (BOOLEAN) RSA_verify (
                     DigestType,
                     MessageHash,
                     (UINT32) HashSize,
                     SigBuf,
                     (UINT32) SigSize,
                     (RSA *) RsaContext
                     );
}



Similar support is expected for below:
RsaPkcs1Sign (Edk2\CryptoPkg\Library\BaseCryptLib\Pk\CryptRsaExt.c)

Change comments accordingly in many files:
  If HashLength is not equal to the size of MD5, SHA-1 or SHA-256 digest, return FALSE.
(to)
  If HashLength is not equal to the size of MD5, SHA-1, SHA-256, SHA-384 or SHA-512 digest, return FALSE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10566</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-27 05:44:06 +0000</bug_when>
    <thetext>My understanding is that this feature would include the introduction of functions such as:

  Sha384GetContextSize()
  Sha512GetContextSize()

Because of that, I think this feature should not be implemented before bug 1792 is addressed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10799</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-01-08 02:38:28 +0000</bug_when>
    <thetext>Bz1792 just want to deprecate HmaxXxxGetContextSize. So it&apos;s not relevant. I&apos;ve pushed the patch for this bz at

https://github.com/tianocore/edk2/commit/c9d72628432126cbce58a48b440e4944baa4beab

and reviewed at

https://edk2.groups.io/g/devel/message/52536

Patch for BZ1792 was also sent for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10800</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-08 04:44:45 +0000</bug_when>
    <thetext>If bug 1792 is not related to the present bug (i.e., 2389), then bug 1792 should be removed from the dependency list here. Doing that now.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2273</bug_id>
          
          <creation_ts>2019-10-15 17:58:25 +0000</creation_ts>
          <short_desc>ip6ConfigReadConfigData causes an exception by accessing beyond the end of a read variable</short_desc>
          <delta_ts>2020-04-17 13:47:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10029</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2019-10-15 17:58:25 +0000</bug_when>
    <thetext>When upgrading UEFI from an much older version to a current version, a stale IP6 config variable is incorrectly parsed causing an exception as the code expects a field to be a size, and it was not a size in the old code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10051</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2019-10-16 20:03:59 +0000</bug_when>
    <thetext>A fix to work around the issue:

https://github.com/microsoft/mu_basecore/commit/5aa9134f93565cf52213cca54ea53d78d20df2c6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10055</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:14:24 +0000</bug_when>
    <thetext>Please confirm this issue. Also, please look at the fix and see if it makes sense. We can have MSFT send the patch in to the list if we think it makes sense.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10486</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-11-19 22:27:04 +0000</bug_when>
    <thetext>Any update?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12129</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 01:48:18 +0000</bug_when>
    <thetext>I took ownership and sent a v1 patch to the list - https://edk2.groups.io/g/devel/message/57052.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12161</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 18:14:50 +0000</bug_when>
    <thetext>Waiting for maintainer feedback and the patch to be pushed by maintainer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12236</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 13:47:15 +0000</bug_when>
    <thetext>Pushed to edk2 - https://github.com/tianocore/edk2/commit/1c761011340d830a2bf66128325a686ffff3f5e9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2411</bug_id>
          
          <creation_ts>2019-12-10 02:07:05 +0000</creation_ts>
          <short_desc>heapguard.c faults when Use after free is enabled</short_desc>
          <delta_ts>2024-07-18 12:42:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>kun.qin</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10647</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-12-10 02:07:05 +0000</bug_when>
    <thetext>Freed page guarding should not &quot;level-up&quot; on empty table entries, otherwise it would trip on null pointer page fault.

proposed fix:
https://github.com/microsoft/mu_basecore/commit/b760c70a9f5c3f45baf470d1c191b3bcf5c44696?diff=split</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10695</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-12-12 20:27:18 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23247</commentid>
    <comment_count>2</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2024-07-18 12:42:49 +0000</bug_when>
    <thetext>Merged in https://github.com/tianocore/edk2/pull/5919 as cee9d1b16bdcd7fe8bad6b39fe18af0a15941ca4.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2896</bug_id>
          
          <creation_ts>2020-08-13 02:35:37 +0000</creation_ts>
          <short_desc>VS2017 prefix is wrongly set when VS2017 and VS2019 are both installed.</short_desc>
          <delta_ts>2020-08-17 01:45:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13389</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-13 02:35:37 +0000</bug_when>
    <thetext>When VS2017/VS2019 are both installed. VS prefix setting will
wrongly be set. VS2017_PREFIX is set to the same value of VS2019.

After check https://developercommunity.visualstudio.com/content/problem/375841/vcvars32bat-fails-after-upgrade-to-vs-2017-version.html, it mentions VS2017 vcvars32.bat is related to VSINSTALLDIR env. And in the test, I find VS2017 vcvars32.bat is also related to VCToolsVersion env. After clear these two envs, VS2017 vcvars32.bat can run successfully. 

BaseTools/set_vsprefix_envs.bat should be update to fix this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13415</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-17 01:45:11 +0000</bug_when>
    <thetext>Fix it in edk2 43bec9ea3d56f3662ede78023baa2a791b66acac..7f7f511c5a74676523ed48435350f6e35282b62b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2301</bug_id>
          
          <creation_ts>2019-10-20 06:16:13 +0000</creation_ts>
          <short_desc>Build warning due to calling removed sys.setdefaultencoding in python 3</short_desc>
          <delta_ts>2019-10-23 06:53:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Mac OS</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10129</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-20 06:16:13 +0000</bug_when>
    <thetext>sitecustomize.py calls sys.setdefaultencoding on Darwin (macOS) regardless of the python version used. This attribute was made no-op in early python 3 versions, and then became removed. As a result this currently produces the following warning during build:

Error in sitecustomize; set PYTHONVERBOSE for traceback:
AttributeError: module &apos;sys&apos; has no attribute &apos;setdefaultencoding&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10130</commentid>
    <comment_count>1</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-20 06:27:53 +0000</bug_when>
    <thetext>Patch submitted:
https://edk2.groups.io/g/devel/message/49253

Requesting for merge in edk2-stable2019011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10190</commentid>
    <comment_count>2</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-10-23 06:53:43 +0000</bug_when>
    <thetext>Merged in 5c7006c9de4029afc508e2c43d78de12a0d19cfe.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2080</bug_id>
          
          <creation_ts>2019-08-13 04:25:41 +0000</creation_ts>
          <short_desc>BaseTools: Fixed issue on IgnoreAutoGen build option</short_desc>
          <delta_ts>2019-09-09 21:58:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8974</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-13 04:25:41 +0000</bug_when>
    <thetext>IgnoreAutogen build option can be improved to re-use GlobalVar_&lt;platformguid&gt;_&lt;arch&gt;.bin file which is introduced by multiple-process-autogen feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8975</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-13 04:26:12 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9503</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-08 22:30:56 +0000</bug_when>
    <thetext>patch review at 
https://edk2.groups.io/g/devel/message/46889</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9562</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-09 21:58:32 +0000</bug_when>
    <thetext>pushed at 373298ca0d605b29d6f46f5ba57af53e112f59b3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2550</bug_id>
          <alias>CVE-2019-14559</alias>
          <creation_ts>2020-02-23 03:52:02 +0000</creation_ts>
          <short_desc>NetworkPkg: CVE-2019-14559 tracker</short_desc>
          <delta_ts>2020-04-02 09:23:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1610</dependson>
    
    <dependson>2031</dependson>
    
    <dependson>2032</dependson>
    
    <dependson>2174</dependson>
    
    <dependson>2655</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Maciej Rabeda">maciej.rabeda</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11400</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-23 03:52:02 +0000</bug_when>
    <thetext>There are multiple TianoCore BZs related to CVE-2019-14559; all unembargoed at this point. I&apos;m filing this extra &quot;tracker&quot; BZ to express that none of those BZs block each other, but they all need to be fixed before we can call CVE-2019-14559 fixed.

No code changes are expected for this BZ; once all its blocking BZs have been fixed, it can be moved to RESOLVED|FIXED as well.

Assigning the BZ to Maciej Rabeda (NetworkPkg maintainer).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11401</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-23 03:52:30 +0000</bug_when>
    <thetext>Some of the individual BZs have been fixed already, but not all. Moving status to IN_PROGRESS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11986</commentid>
    <comment_count>2</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-04-01 06:58:50 +0000</bug_when>
    <thetext>All dependencies closed.
I would like to hold closure of this bug until patch for ASSERTs in Ip6Dxe are merged.

https://edk2.groups.io/g/devel/message/56829</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11987</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-01 08:07:03 +0000</bug_when>
    <thetext>(In reply to Maciej Rabeda from comment #2)
&gt; All dependencies closed.
&gt; I would like to hold closure of this bug until patch for ASSERTs in Ip6Dxe
&gt; are merged.
&gt; 
&gt; https://edk2.groups.io/g/devel/message/56829

Yes, good point -- please see my feedback under your ASSERT fixup patch. We should either (a) open a new BZ for that issue (and block this BZ (2550) with that new BZ too), or else (b) reopen bug 2174 for the ASSERT fixes (which in turn will again block this BZ). Your choice :) Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12032</commentid>
    <comment_count>4</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-04-02 05:30:26 +0000</bug_when>
    <thetext>All dependant issues closed. Closing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12035</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-02 09:23:00 +0000</bug_when>
    <thetext>Awesome, thank you!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2434</bug_id>
          
          <creation_ts>2019-12-23 01:34:33 +0000</creation_ts>
          <short_desc>improve the coding style of loops over CPUs in &quot;UefiCpuPkg/PiSmmCpuDxeSmm/MpService.c&quot;</short_desc>
          <delta_ts>2020-01-13 20:45:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10744</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-12-23 01:34:33 +0000</bug_when>
    <thetext>Current driver has below code:
  CpuData = mSmmMpSyncData-&gt;CpuData;
  ProcessorInfo = gSmmCpuPrivate-&gt;ProcessorInfo;
  for (Index = mMaxNumberOfCpus; Index-- &gt; 0;) {
    if (!(*(CpuData[Index].Present)) &amp;&amp; ProcessorInfo[Index].ProcessorId != INVALID_APIC_ID) {
      if (((Exceptions &amp; ARRIVAL_EXCEPTION_DELAYED) != 0) &amp;&amp; SmmCpuFeaturesGetSmmRegister (Index, SmmRegSmmDelayed) != 0) {
        continue;
      }

for above code, if the Index=mMaxNumberOfCpus, it will reference CpuData[Index].Present. But the max size for CpuData array is 0 - mMaxNumberOfCpus -1. So this code will trig buffer overflow.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10745</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-12-23 01:35:03 +0000</bug_when>
    <thetext>Confirmed this is a real issue and will fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10750</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-12-24 23:50:58 +0000</bug_when>
    <thetext>SHA-1: 123b720eeb371e0a31eb727bcf59255b584e355f

* UefiCpuPkg/PiSmmCpuDxeSmm: Fix buffer overflow issue.

The size for the array of mSmmMpSyncData-&gt;CpuData[] is 0 ~
mMaxNumberOfCpus -1. But current code may use
mSmmMpSyncData-&gt;CpuData[mMaxNumberOfCpus].

This patch fixed this issue.

Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10788</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-06 05:56:08 +0000</bug_when>
    <thetext>As discussed on the mailing list, in the following thread:

  [edk2-devel] [PATCH v3 2/2]
  UefiCpuPkg/PiSmmCpuDxeSmm: Fix buffer overflow issue.

  http://mid.mail-archive.com/20191223081037.1565-3-eric.dong@intel.com
  https://edk2.groups.io/g/devel/message/52504

the message on commit 123b720eeb37 is incorrect. The pre-patch code was not buggy, just somewhat hard to read.

Now that we have the patch applied, it is deemed worth keeping, because it improves the style and consistency of the code. Therefore the patch should be first reverted, and then reapplied with the proper commit message. The goal is to both (a) keep the code with the improved style, and (b) let users of &quot;git blame&quot; read a valid explanation, in the commit message.

So moving this back to CONFIRMED status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10789</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-06 05:58:44 +0000</bug_when>
    <thetext>Also updating the title of the bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10877</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-13 18:26:53 +0000</bug_when>
    <thetext>Patches from Eric on the list:

[edk2-devel] [PATCH 0/2] Correct the commit message.
https://edk2.groups.io/g/devel/message/52945
https://www.mail-archive.com/devel@edk2.groups.io/msg13817.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10878</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-13 18:27:05 +0000</bug_when>
    <thetext>IN_PROGRESS per comment 5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10881</commentid>
    <comment_count>7</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-01-13 20:45:06 +0000</bug_when>
    <thetext>SHA-1: 70911f1f4aee0366b6122f2b90d367ec0f066beb

* UefiCpuPkg/PiSmmCpuDxeSmm: improve the coding style

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2434

Current code use below loops to enumerate the CPUs:
  for (Index = mMaxNumberOfCpus; Index-- &gt; 0;) {
it has no issue but not easy for the developers to read the code.

Update above code to below style,
  for (Index = 0; Index &lt; mMaxNumberOfCpus; Index++) {
It make the developers easy to read and consistent with other
similar cases in this driver.

Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;
Cc: Ray Ni &lt;ray.ni@intel.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2212</bug_id>
          
          <creation_ts>2019-09-24 01:49:03 +0000</creation_ts>
          <short_desc>MdeModulePkg: Enable/Disable S3BootScript dynamically.</short_desc>
          <delta_ts>2020-02-11 06:03:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9759</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-09-24 01:49:03 +0000</bug_when>
    <thetext>Current S3BootScriptLib can only support build time opt-out but in binary model the same binary should support both enabling and disabling S3BootScript.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9761</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-09-24 01:50:22 +0000</bug_when>
    <thetext>*** Bug 2209 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9860</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 21:19:46 +0000</bug_when>
    <thetext>Chasel is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9895</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-09-30 20:17:52 +0000</bug_when>
    <thetext>commit ed9db1b91ceba7d3a24743d4d9314c6fbe11c4b3 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Wed Sep 4 08:43:22 2019 +0800

    MdeModulePkg: Enable/Disable S3BootScript dynamically.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2212

    In binary model the same binary may have to support both
    S3 enabled and disabled scenarios, however not all DXE
    drivers linking PiDxeS3BootScriptLib can return error to
    invoke library DESTRUCTOR for releasing resource.

    To support this usage model below PCD is used to skip
    S3BootScript functions when PCD set to FALSE:
      gEfiMdeModulePkgTokenSpaceGuid.PcdAcpiS3Enable

    Test: Verified on internal platform and S3BootScript
          functions can be skipped by PCD during boot time.

    Cc: Hao A Wu &lt;hao.a.wu@intel.com&gt;
    Cc: Eric Dong &lt;eric.dong@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Eric Dong &lt;eric.dong@intel.com&gt;
    Acked-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11204</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-11 06:03:09 +0000</bug_when>
    <thetext>Some elaboration on the use case can be seen here:

&quot; ... have a DXE driver that depends on the PiDxeS3BootScriptLib instance, such that it *cannot* exit from its entry point function with EFI_UNSUPPORTED, when PcdAcpiS3Enable is set to FALSE, then this patch could be justified ...&quot;

https://edk2.groups.io/g/devel/message/47996
http://mid.mail-archive.com/e43e3f56-d2db-7989-b6f1-03e1c810d908@redhat.com</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2673</bug_id>
          
          <creation_ts>2020-04-10 16:41:32 +0000</creation_ts>
          <short_desc>VerifyHashedFv() should not ASSERT</short_desc>
          <delta_ts>2021-11-01 21:01:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="John Mathews">john.mathews</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12186</commentid>
    <comment_count>0</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-04-10 16:41:32 +0000</bug_when>
    <thetext>File:  FvReportPei.c
Function:  VerifyHashedFv()
Line:  155-156

    //
    // FV must be meant for verified boot and/or measured boot.
    //
    ASSERT ((FvInfo[FvIndex].Flag &amp; HASHED_FV_FLAG_VERIFIED_BOOT) != 0 ||
            (FvInfo[FvIndex].Flag &amp; HASHED_FV_FLAG_MEASURED_BOOT) != 0);

The platform code should be able to use FvReportPei to report FVs, even with no measured or verified boot.  The above ASSERT should be removed.  Replace that with logic to skip FV if no measurement or verification, something like this:

    //
    // Not meant for verified boot and/or measured boot?
    //
    if ((FvInfo[FvIndex].Flag &amp; HASHED_FV_FLAG_VERIFIED_BOOT) == 0 &amp;&amp;
        (FvInfo[FvIndex].Flag &amp; HASHED_FV_FLAG_MEASURED_BOOT) == 0) {
      continue;
    }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12212</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-14 21:37:38 +0000</bug_when>
    <thetext>SecurityPkg\FvReportPei.  Zhichao to check this issue first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17558</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-10-15 00:34:21 +0000</bug_when>
    <thetext>Will send patch later</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17559</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-10-15 00:34:41 +0000</bug_when>
    <thetext>Patch Review: https://edk2.groups.io/g/devel/message/82082</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17635</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-11-01 21:01:42 +0000</bug_when>
    <thetext>Merged in https://github.com/tianocore/edk2/commit/c8594a53119c72022f8ff5977b01e4e632ca7a04.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2102</bug_id>
          
          <creation_ts>2019-08-21 10:13:57 +0000</creation_ts>
          <short_desc>BaseTools: pre-process the input string for regular expression findall function</short_desc>
          <delta_ts>2019-09-16 22:21:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9123</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-21 10:13:57 +0000</bug_when>
    <thetext>In GenMake.py line 1710, code try to find the header file from the whole source code: IncludedFileList = gIncludePattern.findall(FileContent). findall function cost much time if the parameter string is big. FileContent can be pre-processed to remove those certain none-#include lines.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9124</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-21 10:14:59 +0000</bug_when>
    <thetext>assign to Fan, Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9611</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-11 06:59:51 +0000</bug_when>
    <thetext>Bob wil work on it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9680</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-16 22:21:58 +0000</bug_when>
    <thetext>pushed at bc9e4194cf3edaf9524c83098ba3f72008c70190</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2930</bug_id>
          
          <creation_ts>2020-08-26 22:30:06 +0000</creation_ts>
          <short_desc>UEFI spec changes for EFI Redfish BIOS resource provisioning transport protocol</short_desc>
          <delta_ts>2021-04-15 03:37:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13544</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-26 22:30:06 +0000</bug_when>
    <thetext>Refer to the BZ 2919: https://bugzilla.tianocore.org/show_bug.cgi?id=2919</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13636</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-07 21:27:54 +0000</bug_when>
    <thetext>Abner will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15695</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2021-04-15 03:37:41 +0000</bug_when>
    <thetext>This will be EDKII only protocol.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2237</bug_id>
          
          <creation_ts>2019-10-03 04:04:05 +0000</creation_ts>
          <short_desc>Possible NULL dereference in InitializeBootServicesDriver1()</short_desc>
          <delta_ts>2021-09-02 10:50:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2238</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Edhay">edhaya.chandran</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>eric.jin</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9914</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-10-03 04:04:05 +0000</bug_when>
    <thetext>In function InitializeBootServicesDriver1() first HandleBuffer is dereferenced

    mPrivateData.OpenHandle = HandleBuffer[0];

and late it is checked it the pointer is NULL

    if (HandleBuffer != NULL &amp;&amp; NoHandles &gt; 0) {


If LocateHandleBuffer() is correctly implemented it will return EFI_NOT_FOUND or EFI_OUT_OF_RESOURCES or correctly allocate HandleBuffer. In this case the check is superfluous.

But as this is a test suite we may not want to rely on LocateHandleBuffer to be correctly implemented. In this case we have to move the check before the dereference and return an error if it is not fulfilled.

The problem was indicated by cppcheck (http://cppcheck.sourceforge.net/).

As there are quite a few problems pointed out by cppcheck I suggest that you run a static code analysis over the whole package and look into all reported problems.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10146</commentid>
    <comment_count>1</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-10-21 12:51:55 +0000</bug_when>
    <thetext>In pipeline for next release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17148</commentid>
    <comment_count>2</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-02 10:50:53 +0000</bug_when>
    <thetext>Will be covered as part of 2238

*** This bug has been marked as a duplicate of bug 2238 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2018</bug_id>
          
          <creation_ts>2019-07-25 10:14:29 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: PeiService pointer not reset to 0 in SecMain</short_desc>
          <delta_ts>2019-07-25 22:19:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8570</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-07-25 10:14:29 +0000</bug_when>
    <thetext>FSP SecMain will copy bootloader IDT configuration if it was already initialized and only SEC_IDT_TABLE.PeiService field will be clear to 0.
However in UEFI bootloader scenario SEC_IDT_TABLE.PeiService is UINT64 which is different size from FSP one - 32bits pointer, this caused the PeiService not fully clear to 0 in FSP SecMain and later GetPeiServicesTablePointer() will return random data from stack.

Solution is to align FSP SEC_IDT_TABLE structure to UefiCpuPkg one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8571</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-07-25 10:14:54 +0000</bug_when>
    <thetext>Working on the patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8602</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-07-25 22:19:21 +0000</bug_when>
    <thetext>commit 520a1e60de4341f55c59cf4680d6d0242a7f929f (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Thu Jul 25 22:22:29 2019 +0800

    IntelFsp2Pkg: PeiService pointer not reset to 0 in SecMain

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2018

    Current FSP SEC_IDT_TABLE structure is not natural aligned:
      typedef struct _SEC_IDT_TABLE {
        EFI_PEI_SERVICES  *PeiService;
        UINT64            IdtTable[];
      } SEC_IDT_TABLE;
    Compiler will insert DWORD padding between 2 elements and
    GetPeiServicesTablePointer() in early phase then always
    returns padding data from stack, which was not reset to 0
    in SecMain.

    Solution is to align FSP SEC_IDT_TABLE structure to UefiCpuPkg
    to have UINT64 as PeiService field and reset it to 0.

    Test: Verified on internal platform and booting successfully
          with FSP API mode.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2488</bug_id>
          
          <creation_ts>2020-01-28 01:55:22 +0000</creation_ts>
          <short_desc>ArmVirtQemu: Variable not being saved</short_desc>
          <delta_ts>2020-01-28 08:27:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Pankaj Bansal">pankaj.bansal</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10987</commentid>
    <comment_count>0</comment_count>
      <attachid>453</attachid>
    <who name="Pankaj Bansal">pankaj.bansal</who>
    <bug_when>2020-01-28 01:55:22 +0000</bug_when>
    <thetext>Created attachment 453
issue reproduction steps

edk2 commit : c8b8157e126ae2fb6f65842677251d300ceff104

Build/Run environment:
-----------------------
4.15.0-74-generic #84-Ubuntu SMP Thu Dec 19 08:06:28 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux

Ubuntu 18.04.2 LTS

$ qemu-system-aarch64 --version
QEMU emulator version 2.11.1(Debian 1:2.11+dfsg-1ubuntu7.20)
Copyright (c) 2003-2017 Fabrice Bellard and the QEMU Project developers

Build steps: 
--------------
1. export PATH=/opt/gcc-linaro-4.9.4-2017.01-x86_64_aarch64-linux-gnu/bin:$PATH
2. export GCC49_AARCH64_PREFIX=aarch64-linux-gnu-
3. . edksetup.sh
4. build -p ArmVirtPkg/ArmVirtQemu.dsc -a AARCH64 -t GCC49 -b DEBUG 

Run steps: 
---------------
1. cat Build/ArmVirtQemu-AARCH64/DEBUG_GCC49/FV/QEMU_EFI.fd /dev/zero | dd iflag=fullblock bs=1M count=64 of=flash0.img
2. cat Build/ArmVirtQemu-AARCH64/DEBUG_GCC49/FV/QEMU_VARS.fd /dev/zero | dd iflag=fullblock bs=1M count=64 of=flash1.img
3. qemu-system-aarch64 -machine virt -m 1024M -cpu cortex-a57 -serial stdio -pflash flash0.img -pflash flash1.img

Issue reproduction: 
--------------------
On UEFI shell
1. Shell&gt; setvar Timeout
8BE4DF61-93CA-11D2-AA0D-00E098032B8C - Timeout - 0002 Bytes
03 00
2. Shell&gt; setvar Timeout =0500
3. Shell&gt; setvar Timeout
8BE4DF61-93CA-11D2-AA0D-00E098032B8C - Timeout - 0002 Bytes
05 00
4. Shell&gt; reset
5. Shell&gt; setvar Timeout
8BE4DF61-93CA-11D2-AA0D-00E098032B8C - Timeout - 0002 Bytes
03 00</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10991</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-28 05:00:58 +0000</bug_when>
    <thetext>Hello Pankaj,

this is not a bug, but a feature.

OVMF and ArmVirtQemu ignore the Timeout UEFI variable, and take the
timeout from the host side instead.

Here&apos;s the relevant call tree:

&gt;|     BdsEntry()                                      [MdeModulePkg/Universal/BdsDxe/BdsEntry.c]
&gt;| [1]   PcdGet16()
&gt;| [2]   BdsDxeSetVariableAndReportStatusCodeOnError()
&gt;| [3]   PlatformBootManagerBeforeConsole()            [ArmVirtPkg/Library/PlatformBootManagerLib/PlatformBm.c]
&gt;| [4]     GetFrontPageTimeoutFromQemu()               [OvmfPkg/Library/QemuBootOrderLib/QemuBootOrderLib.c]
&gt;| [5]     PcdSet16S()

You see the Timeout variable being restored to 3 at every boot because
that is the default value of &quot;PcdPlatformBootTimeOut&quot; in
&quot;ArmVirtQemu.dsc&quot;. BdsDxe fetches the value of this PCD [1], and then
writes it to the Timeout UEFI variable [2] (EFI_TIME_OUT_VARIABLE_NAME),
as one of the early steps in BdsEntry().

Later, BdsEntry() calls the &quot;before console&quot; hook of ArmVirtQemu&apos;s
PlatformBootManagerLib instance [3]. Here we fetch the timeout value
provided on the QEMU command line [4], and assign the PCD that value
[5]. This will determine how long you&apos;re going to see the progress bar
in reality.

The QEMU command line options are explained in the QEMU manual, and more
closely in edk2 commit 9253c14d4134 (&quot;OvmfPkg: QemuBootOrderLib: expose
QEMU&apos;s &quot;-boot menu=on[,splash-time=N]&quot;&quot;, 2015-01-14).

https://github.com/tianocore/edk2/commit/9253c14d4134

When using libvirt, the matching elements and attributes of the domain
XML are:

&gt;| &lt;domain&gt;
&gt;|   &lt;os&gt;
&gt;|     &lt;bootmenu enable=&apos;yes&apos; timeout=&apos;3000&apos;/&gt;
&gt;|   &lt;/os&gt;
&gt;| &lt;/domain&gt;

See &lt;https://libvirt.org/formatdomain.html#elementsOSBIOS&gt;.

The implementation in GetFrontPageTimeoutFromQemu()
[OvmfPkg/Library/QemuBootOrderLib/QemuBootOrderLib.c] has some comments
too.

Hope this helps!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10992</commentid>
    <comment_count>2</comment_count>
    <who name="Pankaj Bansal">pankaj.bansal</who>
    <bug_when>2020-01-28 06:19:17 +0000</bug_when>
    <thetext>Hi Laszlo,

is this a recent issue ? i am not able to change Timeout from &quot;Boot Configuration&quot; in shell

in the past i was able to update this variable.

And this is not just the Timeout variable.
None of the variable can be saved in Qemu in latest edk2 code base.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10993</commentid>
    <comment_count>3</comment_count>
    <who name="Pankaj Bansal">pankaj.bansal</who>
    <bug_when>2020-01-28 08:27:47 +0000</bug_when>
    <thetext>My apologies.

Only Timeout variable is net being saved. other variables are. And as Laszlo pointed, that this is not a bug but feature.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>453</attachid>
            <date>2020-01-28 01:55:22 +0000</date>
            <delta_ts>2020-01-28 01:55:22 +0000</delta_ts>
            <desc>issue reproduction steps</desc>
            <filename>qemu_variable_save_fail.txt</filename>
            <type>text/plain</type>
            <size>227167</size>
            <attacher name="Pankaj Bansal">pankaj.bansal</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2948</bug_id>
          
          <creation_ts>2020-09-01 10:51:05 +0000</creation_ts>
          <short_desc>Timeout loops in XhciDxe take longer than specified</short_desc>
          <delta_ts>2023-10-26 16:51:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>patrick.henz</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13587</commentid>
    <comment_count>0</comment_count>
      <attachid>546</attachid>
    <who name="">patrick.henz</who>
    <bug_when>2020-09-01 10:51:05 +0000</bug_when>
    <thetext>Created attachment 546
Proposed XhciDxe Patch

Timeouts in the XhciDxe driver are taking longer than expected due to the timeout loops not accounting for code execution time. As en example, 5 second timeouts have been observed to take around 36 seconds to complete. These loops are present in MdeModulePkg/Bus/Pci/XhciDxe/XhciReg.c and MdeModulePkg/Bus/Pci/XhciDxe/XhciSched.c. Attached is a proposed patch that fixes this issue. There are also similar timeout loops in the Uhci and Ehci drivers, though the attached patch does not fix those loops.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13588</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-01 11:24:07 +0000</bug_when>
    <thetext>Hello Patrick,

can you please submit the patch to the edk2-devel mailing list for review?

List info:
https://edk2.groups.io/g/devel/

Official workflow description:
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process

An unofficial one:
https://github.com/tianocore/tianocore.github.io/wiki/Laszlo&apos;s-unkempt-git-guide-for-edk2-contributors-and-maintainers

(If you are familiar with git + mailing lists, none of the above will be news for you.)

When you post the patch, please CC the following maintainers / reviewers:

  Jian J Wang &lt;jian.j.wang@intel.com&gt;
  Hao A Wu &lt;hao.a.wu@intel.com&gt;
  Ray Ni &lt;ray.ni@intel.com&gt;

If you can, please describe how the issue can be reproduced (it&apos;s OK if it is tied to a particular platform); here in the BZ or in the commit message.

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13591</commentid>
    <comment_count>2</comment_count>
    <who name="">patrick.henz</who>
    <bug_when>2020-09-01 11:42:53 +0000</bug_when>
    <thetext>Will do, thank you Laszlo!

Patrick Henz</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13595</commentid>
    <comment_count>3</comment_count>
    <who name="">patrick.henz</who>
    <bug_when>2020-09-01 14:58:09 +0000</bug_when>
    <thetext>Forced timeout created using following example:

XhcExecTransfer (
  .
  .
 )
{
  .
  .
  static int do_once = 1;  // test line
  .
  .
  do {
    Finished = XhcCheckUrbResult (Xhc, Urb);
    if (do_once) Finished = 0; // test line
    if (Finished) {
      break;
    }   
    gBS-&gt;Stall (XHC_1_MICROSECOND);
  } while (!EFI_ERROR(TimerStatus) &amp;&amp; EFI_ERROR(gBS-&gt;CheckEvent (TimeoutEvent)));

  do_once = 0; // test line</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13598</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-02 02:47:03 +0000</bug_when>
    <thetext>Patch on the list from Patrick:

[edk2-devel] [PATCH 0/1] Fix XhciDxe Timeouts
https://edk2.groups.io/g/devel/message/64944
http://mid.mail-archive.com/cover.1598978760.git.patrick.henz@hpe.com

Setting IN_PROGRESS status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13778</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-09-23 21:25:58 +0000</bug_when>
    <thetext>V2 patch review sent at:
https://edk2.groups.io/g/devel/message/64984

V3 patch review sent at:
https://edk2.groups.io/g/devel/message/65543</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13822</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-09-28 21:34:24 +0000</bug_when>
    <thetext>Resolved via:
Pull request: https://github.com/tianocore/edk2/pull/968
Commit: https://github.com/tianocore/edk2/commit/71dd80f14f2724ccc99dd7d349b7392adf114019</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22075</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-10-26 16:51:34 +0000</bug_when>
    <thetext>There seems to be another commit that references this issue: 43dcf453fc15 (&quot;MdeModulePkg/XhciDxe: Use Performance Timer for XHCI Timeouts&quot;, 2023-09-25).</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>546</attachid>
            <date>2020-09-01 10:51:05 +0000</date>
            <delta_ts>2020-09-01 10:51:05 +0000</delta_ts>
            <desc>Proposed XhciDxe Patch</desc>
            <filename>0001-MdeModulePkg-XhciDxe-Fix-Broken-Timeouts.patch</filename>
            <type>application/octet-stream</type>
            <size>4332</size>
            <attacher>patrick.henz</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2361</bug_id>
          
          <creation_ts>2019-11-19 10:56:49 +0000</creation_ts>
          <short_desc>spelling mistake, &quot;occured&quot; should be &quot;occurred&quot;</short_desc>
          <delta_ts>2020-08-18 22:41:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10477</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-19 10:56:49 +0000</bug_when>
    <thetext>spelling mistake, &quot;occured&quot; should be &quot;occurred&quot; in MdeModulePkg/Bus/Ata/AhciPei/AhciMode.c: in literal string text:         

&quot;%a: Error occured when waiting for the first D2H register FIS - %r\n&quot;,

Also, this spelling mistake appears across the EDK2 source:

EmulatorPkg/EmuGopDxe/GopScreen.c:  @retval EFI_DEVICE_ERROR      A hardware error occured writting to the video buffer.
EmulatorPkg/TimerDxe/Timer.c:  EFI_DEVICE_ERROR      - A device error occured attempting to initialize the driver.
EmulatorPkg/Unix/Host/Host.c:  EFI_DEVICE_ERROR - An error occured attempting to map the opened file
EmulatorPkg/Win/Host/WinGopScreen.c:  @retval EFI_DEVICE_ERROR       A hardware error occured writting to the video
EmulatorPkg/Win/Host/WinHost.c:  EFI_DEVICE_ERROR - An error occured attempting to map the opened file
MdeModulePkg/Bus/Ata/AhciPei/AhciMode.c:          &quot;%a: Error occured when waiting for the first D2H register FIS - %r\n&quot;,
MdeModulePkg/Bus/Pci/UhciDxe/UhciSched.c:        DEBUG ((EFI_D_VERBOSE, &quot;UhciCheckTdStatus: short packet read occured\n&quot;));
MdeModulePkg/Bus/Pci/UhciDxe/UhciSched.c:    // Transfer is OK or some error occured (TD inactive)
MdeModulePkg/Core/Dxe/FwVol/FwVol.c:  @param  Event                 The event that occured
MdeModulePkg/Core/PiSmmCore/PiSmmCore.c:  // If a legacy boot has occured, then make sure gSmmCorePrivate is not accessed
MdeModulePkg/Core/PiSmmCore/PiSmmCore.c:  // If a legacy boot has occured, then make sure gSmmCorePrivate is not accessed
MdeModulePkg/Include/Protocol/GenericMemoryTest.h:  @param  ErrorOut            TRUE if the memory error occured.
MdeModulePkg/Include/Protocol/GenericMemoryTest.h:  @retval EFI_DEVICE_ERROR    Memory device error occured, and no agent can handle it.
MdeModulePkg/Universal/Acpi/S3SaveStateDxe/S3SaveState.c:  @retval other                 Errors occured.
MdeModulePkg/Universal/Acpi/SmmS3SaveState/SmmS3SaveState.c:  @retval other                 Errors occured.
MdeModulePkg/Universal/Console/ConSplitterDxe/ConSplitter.h:  @retval EFI_DEVICE_ERROR        A hardware error occured writting to the video
MdeModulePkg/Universal/Console/ConSplitterDxe/ConSplitter.h:  @retval EFI_DEVICE_ERROR       A hardware error occured writting to the video buffer.
MdeModulePkg/Universal/Console/ConSplitterDxe/ConSplitterGraphics.c:  @retval EFI_DEVICE_ERROR        A hardware error occured writting to the video
MdeModulePkg/Universal/Console/ConSplitterDxe/ConSplitterGraphics.c:  @retval EFI_DEVICE_ERROR       A hardware error occured writting to the video buffer.
MdeModulePkg/Universal/DebugPortDxe/DebugPort.c:  @retval EFI_DEVICE_ERROR    A hardware failure occured... (from SerialIo)
MdeModulePkg/Universal/DebugPortDxe/DebugPort.h:  @retval EFI_DEVICE_ERROR    A hardware failure occured... (from SerialIo)
MdeModulePkg/Universal/FvSimpleFileSystemDxe/FvSimpleFileSystem.c:  @retval NULL          An error occured.
MdeModulePkg/Universal/LoadFileOnFv2/LoadFileOnFv2.c:  @param  Event                 The event that occured
MdeModulePkg/Universal/MemoryTest/GenericMemoryTestDxe/LightMemoryTest.c:  @param[out] ErrorOut          TRUE if the memory error occured.
MdeModulePkg/Universal/MemoryTest/GenericMemoryTestDxe/LightMemoryTest.c:  @retval EFI_DEVICE_ERROR    Memory device error occured, and no agent can handle it.
MdeModulePkg/Universal/MemoryTest/GenericMemoryTestDxe/LightMemoryTest.h:  @param[out] ErrorOut          TRUE if the memory error occured.
MdeModulePkg/Universal/MemoryTest/GenericMemoryTestDxe/LightMemoryTest.h:  @retval EFI_DEVICE_ERROR    Memory device error occured, and no agent can handle it.
MdePkg/Include/Protocol/UgaDraw.h:    @retval EFI_DEVICE_ERROR      - A hardware error occured writting to the video buffer.
MdePkg/Library/BaseLib/FilePaths.c:  @return       Returns Path, otherwise returns NULL to indicate that an error has occured.
MdePkg/Library/SmmPeriodicSmiLib/SmmPeriodicSmiLib.c:  // Return the amount elapsed time that occured while yielded
NetworkPkg/Dhcp4Dxe/Dhcp4Io.c:  @retval Others                Some error occured.
NetworkPkg/Dhcp4Dxe/Dhcp4Io.c:  @retval Others                Some error occured.
NetworkPkg/Dhcp4Dxe/Dhcp4Io.c:  @retval Others                Some error occured.
NetworkPkg/Dhcp4Dxe/Dhcp4Io.c:  @retval Others                Some error occured.
NetworkPkg/DnsDxe/DnsImpl.c:  @retval FALSE                  Some error occured.
NetworkPkg/DnsDxe/DnsImpl.c:  @retval FALSE                  Some error occured.
NetworkPkg/DnsDxe/DnsImpl.h:  @retval FALSE                  Some error occured.
NetworkPkg/DnsDxe/DnsImpl.h:  @retval FALSE                  Some error occured.
NetworkPkg/Include/Library/HttpLib.h:                                  NULL if any error occured.
NetworkPkg/Library/DxeHttpLib/DxeHttpLib.c:                                  NULL if any error occured.
NetworkPkg/Mtftp4Dxe/Mtftp4Driver.c:  @retval others       some EFI_ERROR occured.
NetworkPkg/Mtftp4Dxe/Mtftp4Impl.c:  @retval FALSE                  Some error occured.
NetworkPkg/Mtftp4Dxe/Mtftp4Wrq.c:  @retval EFI_TFTP_ERROR        Some error occured, and the session reset.
NetworkPkg/TcpDxe/SockImpl.h:  @return Pointer to the newly created socket, return NULL when exception occured.
NetworkPkg/TcpDxe/SockInterface.c:  @return Pointer to the newly created socket. If NULL, an error condition occured.
NetworkPkg/TcpDxe/Socket.h:  @retval other               Some error occured.
NetworkPkg/TcpDxe/Socket.h:  @return Pointer to the newly created socket. If NULL, an error condition occured.
NetworkPkg/TcpDxe/TcpDriver.c:  @retval other               An error occured.
NetworkPkg/TcpDxe/TcpDriver.h:  @retval other               An error occured.
OvmfPkg/Csm/LegacyBiosDxe/Thunk.c:  @param  InterruptType - The type of interrupt that occured
OvmfPkg/Csm/LegacyBiosDxe/Thunk.c:  @param  SystemContext - A pointer to the system context when the interrupt occured
OvmfPkg/Include/Protocol/Legacy8259.h:  @retval EFI_DEVICE_ERROR      A device error occured programming the vector bases.
OvmfPkg/SioBusDxe/SioService.c:  @retval Others               Error occured during the child device creation.
ShellPkg/DynamicCommand/TftpDynamicCommand/Tftp.c:  @return     FALSE     A parsing error occured.
ShellPkg/DynamicCommand/TftpDynamicCommand/Tftp.c:  @return     FALSE     A parsing error occured.
ShellPkg/Include/Library/ShellLib.h:  @retval (UINTN)(-1) An error occured.
ShellPkg/Include/Library/ShellLib.h:  @retval (UINTN)(-1) An error occured.
ShellPkg/Library/UefiShellBcfgCommandLib/UefiShellBcfgCommandLib.c:  @retval other             A error occured.
ShellPkg/Library/UefiShellBcfgCommandLib/UefiShellBcfgCommandLib.c:  @retval other                 A error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/FileBuffer.c:  @retval NULL An error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/FileBuffer.c:  @retval NULL An error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A file access error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A file access error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.h:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.h:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/MainTextEditor.h:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/BufferImage.c:  @retval EFI_LOAD_ERROR    A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/BufferImage.c:  @retval EFI_LOAD_ERROR  A Load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/BufferImage.c:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/BufferImage.c:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/BufferImage.h:  @retval EFI_LOAD_ERROR    A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/BufferImage.h:  @retval EFI_LOAD_ERROR  A Load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/BufferImage.h:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/Clipboard.c:  @param[in] EFI_LOAD_ERROR   A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/Clipboard.c:  @param[in] EFI_LOAD_ERROR   A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/Clipboard.h:  @param[in] EFI_LOAD_ERROR   A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/Clipboard.h:  @param[in] EFI_LOAD_ERROR   A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/DiskImage.c:  @retval EFI_LOAD_ERROR  A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/DiskImage.c:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/DiskImage.c:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/DiskImage.h:  @retval EFI_LOAD_ERROR  A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/DiskImage.h:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/DiskImage.h:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/FileImage.c:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/FileImage.c:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/FileImage.h:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/FileImage.h:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.c:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.h:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.h:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.h:  @retval EFI_OUT_OF_RESOURCES    A memory allocation occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MainHexEditor.h:  @retval EFI_LOAD_ERROR          A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MemImage.c:  @retval EFI_LOAD_ERROR    A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MemImage.c:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MemImage.c:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MemImage.h:  @retval EFI_LOAD_ERROR    A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MemImage.h:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/MemImage.h:  @retval EFI_LOAD_ERROR        A load error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/Misc.c:  @retval NULL An error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/Misc.c:  @retval NULL An error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/Misc.c:  @retval NULL An error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/Misc.c:  @retval NULL An error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/Misc.h:  @retval NULL An error occured.
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/Misc.h:  @retval NULL An error occured.
ShellPkg/Library/UefiShellDriver1CommandsLib/Drivers.c:  @retval NULL    An error occured.
ShellPkg/Library/UefiShellLevel2CommandsLib/Rm.c:  @retval SHELL_DEVICE_ERROR  A device error occured reading this Node.
ShellPkg/Library/UefiShellLevel2CommandsLib/UefiShellLevel2CommandsLib.h:  @retval SHELL_DEVICE_ERROR  A device error occured reading this Node.
ShellPkg/Library/UefiShellLib/UefiShellLib.c:  @retval (UINTN)(-1) An error occured.
ShellPkg/Library/UefiShellLib/UefiShellLib.c:  @retval EFI_DEVICE_ERROR        An overflow occured.
ShellPkg/Library/UefiShellLib/UefiShellLib.c:  @retval EFI_DEVICE_ERROR        An overflow occured.
StandaloneMmPkg/Core/StandaloneMmCore.c:  // If a legacy boot has occured, then make sure gMmCorePrivate is not accessed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10851</commentid>
    <comment_count>1</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-01-10 09:21:38 +0000</bug_when>
    <thetext>NetworkPkg: Already reviewed a patch done by Antoine Coeur and Philippe Mathieu-Daude which addresses this. Waiting for PR to tianocore/edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12205</commentid>
    <comment_count>2</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-04-14 08:28:01 +0000</bug_when>
    <thetext>NetworkPkg typos were addressed by this PR: https://github.com/tianocore/edk2/pull/357</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12218</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-14 21:53:35 +0000</bug_when>
    <thetext>@Colin, Can you confirm the issues have been fixed?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13285</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 20:45:50 +0000</bug_when>
    <thetext>I can confirm that the NetworkPkg issues have been resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13286</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 21:05:51 +0000</bug_when>
    <thetext>Patch series for review

https://edk2.groups.io/g/devel/message/63607</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13459</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-08-18 22:41:14 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/a048af3c9073e4b8108e6cf920bbb35574059639
https://github.com/tianocore/edk2/commit/53b40c9c6d108e8c0e1500a288638623fee92bca
https://github.com/tianocore/edk2/commit/60835c96cdcfc5639e92ca1ac0f8cd9c04ff772d
https://github.com/tianocore/edk2/commit/1371e15fff7a70761a65e2772d12fa1a27408288
https://github.com/tianocore/edk2/commit/d181539b83410898a11328fd3a2b18220976e490
https://github.com/tianocore/edk2/commit/f034c05cc40bf4033b23f4c69285e14d73ed6d1d

PR: https://github.com/tianocore/edk2/pull/892</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2839</bug_id>
          
          <creation_ts>2020-07-05 21:49:21 +0000</creation_ts>
          <short_desc>Use PcdTcgPfpMeasurementRevision to TcgSpecId event</short_desc>
          <delta_ts>2020-07-20 02:48:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13047</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-07-05 21:49:21 +0000</bug_when>
    <thetext>According to latest TCG PFP spec, the TcgEfiSpecIdEventStruct-&gt;specErrata should be filled with PFP spec revision.

Current code is hardcode to TcgEfiSpecIdEventStruct-&gt;specErrata = TCG_EfiSpecIDEventStruct_SPEC_ERRATA_TPM2.

We should use TcgEfiSpecIdEventStruct-&gt;specErrata = (UINT8)PcdGet32(PcdTcgPfpMeasurementRevision);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13057</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-07-07 21:42:44 +0000</bug_when>
    <thetext>Reasonable change request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13126</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-07-20 02:48:28 +0000</bug_when>
    <thetext>Fixed in bceaf6952aaf462b4f6dee2b2cd7fea43b034b56</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2256</bug_id>
          
          <creation_ts>2019-10-09 19:46:57 +0000</creation_ts>
          <short_desc>SecurityPkg.dec invalid library class defined</short_desc>
          <delta_ts>2019-10-22 13:51:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2146</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9981</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 19:46:57 +0000</bug_when>
    <thetext>dec should be updated to 

Tcg2PpVendorLib|Include/Library/Tcg2PpVendorLib.h  # muchange - wrong file name

see https://github.com/spbrogan/edk2/commit/337096d43abf496f6dea560d3542b39af37136ff</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10068</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:25:11 +0000</bug_when>
    <thetext>All these errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10154</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-21 20:41:18 +0000</bug_when>
    <thetext>I do not see a change in the filename in the patch.

Was this already fixed and the only change remaining is a comment?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10167</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 13:51:32 +0000</bug_when>
    <thetext>This appears to be a duplicate of #2146 and was fixed in commit:

https://github.com/tianocore/edk2/commit/49a2f8ceee7cb6ffdb475b9e410f5e21f255bead

*** This bug has been marked as a duplicate of bug 2146 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2511</bug_id>
          
          <creation_ts>2020-02-10 09:45:33 +0000</creation_ts>
          <short_desc>Enhancement to BaseHashApiLib TO align with latest crypto libraries and making PCD PcdsFixedAtBuild</short_desc>
          <delta_ts>2020-02-19 12:33:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Amol Sukerkar">amol.n.sukerkar</reporter>
          <assigned_to name="Amol Sukerkar">amol.n.sukerkar</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>sachin.agrawal</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11183</commentid>
    <comment_count>0</comment_count>
    <who name="Amol Sukerkar">amol.n.sukerkar</who>
    <bug_when>2020-02-10 09:45:33 +0000</bug_when>
    <thetext>Following are the enhancements to be done to the feature implemented in the Bugzilla, https://bugzilla.tianocore.org/show_bug.cgi?id=2151:

1. Remove MD4 and MD5 from BaseHashApiLib as they are deprecated.
2. Align the Hash algorithm enumeration with tpm20h.
3. Change the PCD PcdHashApiPolicy type to PcdsFixedAtBuild.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11208</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-11 18:45:35 +0000</bug_when>
    <thetext>The #defines should be removed from CryptoPkg/Include/Libraty/HashApiLib.h

&lt;IndustryStandard/Tpm20.h&gt; should be included from the lib implementation
in CryptoPkg\Library\BaseHashApiLib and the case statements should 
test PcdHashApiLibPolicy against TPM_ALG_xxxx values.

The algorithm types in Tpm2.0 are type TPM_ALG_ID, which are 
type UINT16.  PcdHashApiLibPolicy in CryptoPkg.dec should be
changed from UINT8 to UINT16.

    typedef UINT16 TPM_ALG_ID;

The default value for PcdHashApiLibPolicy should be changed to 0x000B
which is TPM_ALG_SHA256 in Tpm2.0.h.

The MD4 and MD5 algorithms should fall through to the default:
clauses of the case statements.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11229</commentid>
    <comment_count>2</comment_count>
    <who name="Amol Sukerkar">amol.n.sukerkar</who>
    <bug_when>2020-02-12 12:31:50 +0000</bug_when>
    <thetext>Agree with all except the following,
&quot;The MD4 and MD5 algorithms should fall through to the default:
clauses of the case statements.&quot;.

This are the #defines in Tpm20.h for hash algorithms,

//
// TCG Algorithm Registry
//
#define HASH_ALG_SHA1    0x00000001
#define HASH_ALG_SHA256  0x00000002
#define HASH_ALG_SHA384  0x00000004
#define HASH_ALG_SHA512  0x00000008
#define HASH_ALG_SM3_256 0x00000010

If we let MD4 and MD5 fall through to the default:, we will have to add the #define for MD4 and MD5 (HASH_ALG_MD4, HASH_ALG_MD5) in Tpm20.h.

So, I think we should remove any reference to MD4 and MD5 altogether since they are deprecated. Do you agree?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11234</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-02-12 18:58:22 +0000</bug_when>
    <thetext>Agree. Please remove MD4 and MD5. They are not secure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11263</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-14 11:53:54 +0000</bug_when>
    <thetext>I agree to remove MD4 and MD5 completely.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11294</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-18 15:41:59 +0000</bug_when>
    <thetext>Thread with discussion of these changes:

https://edk2.groups.io/g/devel/topic/70960524#53733</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11308</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-19 12:27:35 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11309</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-19 12:28:35 +0000</bug_when>
    <thetext>Patches for review

https://edk2.groups.io/g/devel/message/54510</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11310</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-19 12:33:42 +0000</bug_when>
    <thetext>Pushed as c70bdf9d4a..70228e101e

EDK II CI PR: https://github.com/tianocore/edk2/pull/397

The PR shows a failure, but it actually passed all checks
when originally submitted.  Mergify did not see the status
and did not do the merge.  The PR was closed and re-opened
and Mergify did the merge, but also triggered Azure Pipelines
that failed because the PR was already merged.  The post
commit CI checks on Azure Pipelines passed, so there are
no issues with the push.

Next time this status issue is seen between Mergify and
Azure Pipelines status, we should try the &apos;refresh&apos;
Mergify command:

    https://doc.mergify.io/commands.html

This is triggered by adding the following comment to the PR:

    @Mergifyio refresh</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2974</bug_id>
          
          <creation_ts>2020-09-17 12:44:32 +0000</creation_ts>
          <short_desc>NVMe SSD is failed to show up in the Advanced menu of system BIOS</short_desc>
          <delta_ts>2020-09-23 05:04:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ricky">ricky.wang26</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>Jinghai.wang</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13709</commentid>
    <comment_count>0</comment_count>
    <who name="Ricky">ricky.wang26</who>
    <bug_when>2020-09-17 12:44:32 +0000</bug_when>
    <thetext>Hi,

I&apos;m working on an issue, i.e NVMe SSD is failed to show up in the Advanced menu of system BIOS even though the Option Rom image was flashed in the drive and executed successfully. And I found Intel P4510 works fine. So I filed this ticket to check if EDK2 Source Code has some issue to pop up SSD info in system bios? Thanks.

 
Following is the detail steps I used to repro
               

1.       Download EDK2 from https://github.com/tianocore/edk2/releases/tag/edk2-stable202008 , then install it in Ubuntu.

2.       Compiled NVMe driver by the name NvmExpressDxe.efi (codes path are at MdeModulePkg\Bus\Pci\NvmExpressDxe), minor changed the IO SQ Size to 1(this is an issue for this code, it was fixed with this minor change),  and then this  codes was compiled successfully

3.       Boot into UEFI Shell, unload all of current NVMe drivers, and then check there is no NVMe drive listed

4.       Load NvmExpressDxe.efi , NVMe SSD was successfully listed up

5.       Convert NvmExpressDxe.efi to NvmExpressDxe.rom by EfiRom tool with command line   

&apos;EfiRom -ec NvmExpressDxe.efi -f xxxx -i xxxx&apos;

6.       Flashed NvmExpressDxe.rom into NVMe SSD, from the PCIe trace,  we observed rom image was loaded successfully and codes were executed as well.

7.       Boot into system BIOS, and check the Advance Menu,  the drive was not listed up

Regards,
Ricky</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13741</commentid>
    <comment_count>1</comment_count>
    <who name="Jinghai wang">Jinghai.wang</who>
    <bug_when>2020-09-22 16:44:21 +0000</bug_when>
    <thetext>Hi,

This issue can be closed.  I figured out one way to show the drive information in the advanced menu of BIOS. 

I&apos;m referring the codes at MdeModulePkg/Universal/HiiResourcesSampleDxe# which answered my query. 

Thanks a lot for team&apos;s support.

Regards,
Jinghai</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13770</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-23 05:04:06 +0000</bug_when>
    <thetext>changing resolution from FIXED to INVALID -- there was nothing to fix in edk2.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2390</bug_id>
          
          <creation_ts>2019-11-27 10:27:36 +0000</creation_ts>
          <short_desc>[OVMF] Support booting from Fusion-MPT SCSI controllers</short_desc>
          <delta_ts>2020-05-05 16:44:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2567</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nikita">nikita.leshchenko</reporter>
          <assigned_to name="Nikita">nikita.leshchenko</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nikita.leshchenko</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10567</commentid>
    <comment_count>0</comment_count>
    <who name="Nikita">nikita.leshchenko</who>
    <bug_when>2019-11-27 10:27:36 +0000</bug_when>
    <thetext>This feature request tracks support for adding driver support for:
- LSI53C1030
- SAS1068
- SAS1068E

These controllers are widely supported by QEMU, VirtualBox and VMWare. This work is part of the more general agenda of enhancing OVMF boot device support to have feature parity with SeaBIOS.

A v1 series was submitted by me earlier this year and reviewed by Laszlo Ersek. He requested that I create this BZ. Relevant mailing list topics:

OvmfPkg: Support booting from Fusion-MPT SCSI controllers
https://edk2.groups.io/g/devel/topic/30917557

[PATCH 01/14] OvmfPkg/MptScsiDxe: Create empty driver
https://edk2.groups.io/g/devel/topic/30917558

[PATCH 02/14] OvmfPkg/MptScsiDxe: Install DriverBinding Protocol
https://edk2.groups.io/g/devel/topic/30917559

[PATCH 03/14] OvmfPkg/MptScsiDxe: Report name of driver 
https://edk2.groups.io/g/devel/topic/30917560

[PATCH 04/14] OvmfPkg/MptScsiDxe: Probe PCI devices and look for MptScsi
https://edk2.groups.io/g/devel/topic/30917562

[PATCH 11/14] OvmfPkg/MptScsiDxe: Initialize hardware
https://edk2.groups.io/g/devel/topic/30917568

[PATCH 12/14] OvmfPkg/MptScsiDxe: Implement the PassThru method 
https://edk2.groups.io/g/devel/topic/30917569</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10568</commentid>
    <comment_count>1</comment_count>
    <who name="Nikita">nikita.leshchenko</who>
    <bug_when>2019-11-27 10:30:25 +0000</bug_when>
    <thetext>Working on v2 with fixes suggested by Laszlo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10569</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-27 11:46:47 +0000</bug_when>
    <thetext>The original (v1) patch series had been posted to the (previous, now defunct) 01.org list:

[edk2] OvmfPkg: Support booting from Fusion-MPT SCSI controllers
http://mid.mail-archive.com/20190131100724.20907-1-nikita.leshchenko@oracle.com
https://lists.01.org/hyperkitty/list/edk2-devel@lists.01.org/thread/53FOFJWFFELTQDEDH3XQSMOZSMSWYJPC/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11444</commentid>
    <comment_count>3</comment_count>
    <who name="Nikita">nikita.leshchenko</who>
    <bug_when>2020-02-26 11:54:50 +0000</bug_when>
    <thetext>I just sent v2 to the mailing list and CCed the maintainers. Also pushed a copy to  https://github.com/nikital/edk2/tree/mptscsi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11534</commentid>
    <comment_count>4</comment_count>
    <who name="Nikita">nikita.leshchenko</who>
    <bug_when>2020-03-04 14:25:22 +0000</bug_when>
    <thetext>v3 submitted

https://edk2.groups.io/g/devel/message/55444

https://github.com/nikital/edk2/tree/mptscsi_v3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11561</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-05 09:36:59 +0000</bug_when>
    <thetext>(In reply to Nikita from comment #4)
&gt; v3 submitted
&gt; 
&gt; https://edk2.groups.io/g/devel/message/55444
&gt; 
&gt; https://github.com/nikital/edk2/tree/mptscsi_v3

* [edk2-devel] [PATCH v3 00/13]
  OvmfPkg: Support booting from Fusion-MPT SCSI controllers 

http://mid.mail-archive.com/20200304192257.96736-1-nikita.leshchenko@oracle.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11598</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-06 17:29:51 +0000</bug_when>
    <thetext>Liran explained the motivation in detail:

https://edk2.groups.io/g/devel/message/55620
http://mid.mail-archive.com/a96b6b74-c35d-e291-2122-9d77f1d5f89c@oracle.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12207</commentid>
    <comment_count>7</comment_count>
    <who name="Nikita">nikita.leshchenko</who>
    <bug_when>2020-04-14 13:41:44 +0000</bug_when>
    <thetext>v4 submitted

* [edk2-devel] [PATCH v4 00/13]
  OvmfPkg: Support booting from Fusion-MPT SCSI controllers

https://www.mail-archive.com/devel@edk2.groups.io/msg18147.html

Code pushed to
https://github.com/nikital/edk2/tree/mptscsi_v4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12313</commentid>
    <comment_count>8</comment_count>
    <who name="Nikita">nikita.leshchenko</who>
    <bug_when>2020-04-24 13:59:43 +0000</bug_when>
    <thetext>v5 submitted

* [edk2-devel] [PATCH v5 00/12]
  OvmfPkg: Support booting from Fusion-MPT SCSI controllers

https://www.mail-archive.com/devel@edk2.groups.io/msg18851.html

Code pushed to
https://github.com/nikital/edk2/tree/mptscsi_v5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12369</commentid>
    <comment_count>9</comment_count>
    <who name="Nikita">nikita.leshchenko</who>
    <bug_when>2020-05-04 17:03:25 +0000</bug_when>
    <thetext>v6 submitted

* [edk2-devel] [PATCH v6 00/12]
  OvmfPkg: Support booting from Fusion-MPT SCSI controllers

https://www.mail-archive.com/devel@edk2.groups.io/msg19333.html

Code pushed to
https://github.com/nikital/edk2/tree/mptscsi_v6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12373</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 16:44:27 +0000</bug_when>
    <thetext>(In reply to Nikita from comment #9)
&gt; * [edk2-devel] [PATCH v6 00/12]
&gt;   OvmfPkg: Support booting from Fusion-MPT SCSI controllers

Github.com pull request:

https://github.com/tianocore/edk2/pull/582

Commit range: f159102a130f..c635a56384bf.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2275</bug_id>
          
          <creation_ts>2019-10-16 14:00:37 +0000</creation_ts>
          <short_desc>Add HDMI Debug Feature</short_desc>
          <delta_ts>2022-09-09 13:56:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>DebugFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Nathaniel L DeSimone">nathaniel.l.desimone</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10034</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 14:00:37 +0000</bug_when>
    <thetext>As Intel open source firmware expands from Intel Reference and Validation Platforms (RVPs) onto closed chassis commercial systems, a potential debug mechanism is to use the I2C interface on HDMI ports for BIOS debug messages. In many cases the system can use an alternative display port such as eDP. Existing alternative technologies such as USB3 debug have been difficult to enable in pre-memory environments. 

This task is to create an infrastructure that can facilitate debug through the HDMI port in as generic a manner as possible to maximize portability to board designs. A part of the work is determining how feasible this task is at various points in the boot flow and its ability to scale across designs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10200</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-23 18:42:47 +0000</bug_when>
    <thetext>Assigned to Nate</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10902</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-15 18:18:51 +0000</bug_when>
    <thetext>Nate posted the Bus Pirate FW here (to make it a I2C slave device): https://github.com/nate-desimone/Bus_Pirate

EDK II UEFI FW changes for edk2-platforms are still WIP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19542</commentid>
    <comment_count>3</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2022-09-09 13:55:32 +0000</bug_when>
    <thetext>Patch series sent: https://edk2.groups.io/g/devel/message/93538</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19543</commentid>
    <comment_count>4</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2022-09-09 13:56:17 +0000</bug_when>
    <thetext>The series has been pushed as 5f9e175~.. 4b2a5f4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19544</commentid>
    <comment_count>5</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2022-09-09 13:56:48 +0000</bug_when>
    <thetext>Marking as done.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2168</bug_id>
          
          <creation_ts>2019-09-09 03:23:28 +0000</creation_ts>
          <short_desc>Out of bound read in Tcg2MeasureGptTable() and TcgMeasureGptTable()</short_desc>
          <delta_ts>2024-04-09 12:17:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gsuckevi</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kevinj</cc>
    
    <cc>kraxel</cc>
    
    <cc>miki.demeter</cc>
    
    <cc>rschiron</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9513</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-09 03:23:28 +0000</bug_when>
    <thetext>Tcg2MeasureGptTable() assumes that a GPT disk partition is large enough to hold a guid. This data should be considered untrusted. A malicious GPT disk partition could say it&apos;s really small, and cause an out of bound read.

This issue also applies to TcgMeasureGptTable(), meaning it affects both TPM 2 and TPM 1.2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9514</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-09 03:24:07 +0000</bug_when>
    <thetext>Medium 5.5 - CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9520</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-09 04:18:06 +0000</bug_when>
    <thetext>There&apos;re other potential out-of-band issues in this function.

The first issue is a result of taking two UINT32 values directly from the untrusted GPT (NumberOfPartitionEntries and SizeOfPartitionEntry), and multiplying them together as part of a memory allocation operation. Although the AllocatePool signature takes a UINTN, the multiplication first happens using the UINT32 operands with the result being upcast to UINTN. As a result of the small memory allocation, it&apos;s possible to trigger out of bounds reads in the subsequent partition entry loop.

The second issue is an integer overflow that can occur when setting the EventSize variable. This is a result of using the user-controlled PrimaryHeader-&gt;SizeOfPartitionEntry variable in an arithmetic operation without range checking. This can result in a small memory allocation for
TPg2Event, and subsequent memory corruption when processing partition entries.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9762</commentid>
    <comment_count>3</comment_count>
      <attachid>403</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-24 03:20:09 +0000</bug_when>
    <thetext>Created attachment 403
v1-1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9763</commentid>
    <comment_count>4</comment_count>
      <attachid>404</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-24 03:20:28 +0000</bug_when>
    <thetext>Created attachment 404
v1-2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9796</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-25 02:32:11 +0000</bug_when>
    <thetext>CVE-2019-14561 (share with BZ1990)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9803</commentid>
    <comment_count>6</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-25 02:42:38 +0000</bug_when>
    <thetext>CVE-2019-14561 (share with BZ1990)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11088</commentid>
    <comment_count>7</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:57:46 +0000</bug_when>
    <thetext>2/5/2020 infosec - track w/ 1990.  double-check that all &apos;1990&apos; issues have same owner or some way to keep coordinated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13184</commentid>
    <comment_count>8</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-27 15:15:35 +0000</bug_when>
    <thetext>Moving the status to &quot;IN_PROGRESS&quot;, since a patch exists.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13792</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-25 10:03:10 +0000</bug_when>
    <thetext>I strongly disagree with the idea that this BZ should share the CVE number with bug 1990. bug 1990 is about PE/COFF section parsing. This bug is about GPT parsing. The only commonality is &quot;parsing&quot;. That&apos;s not enough, by far, to use a common CVE number. Now that TianoCore is a CNA, please assign a new CVE to this issue. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13855</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-01 04:18:10 +0000</bug_when>
    <thetext>Jiewen should please review the patches from Jian, per Maintainers.txt, in comment#3 / comment#4.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16577</commentid>
    <comment_count>11</comment_count>
      <attachid>760</attachid>
    <who name="">kevinj</who>
    <bug_when>2021-07-07 10:39:05 +0000</bug_when>
    <thetext>Created attachment 760
v1 MITRE .json file

I have attached the .json file for CVE classification. Please review and provide feedback. Please assign a release this issue is observed in, so I can update the .json file. Also note, John Matthews has instructed me to request a new CVE-ID from MITRE for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18840</commentid>
    <comment_count>12</comment_count>
    <who name="Miki Demeter">miki.demeter</who>
    <bug_when>2022-04-19 11:47:55 +0000</bug_when>
    <thetext>Is the patch going to be upstreamed? Patch review was requested in 2020 cve updated 7/2021. Can we mark as complete and open to public?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22891</commentid>
    <comment_count>13</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2024-04-09 12:17:39 +0000</bug_when>
    <thetext>This issue has been resolved in main branch by another commit. I have confirmed this with Jian J Wang.
https://github.com/tianocore/edk2/commit/4776a1b39ee08fc45c70c1eab5a0195f325000d3

Opening the bug to public, and closing it.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>403</attachid>
            <date>2019-09-24 03:20:09 +0000</date>
            <delta_ts>2019-09-24 03:20:09 +0000</delta_ts>
            <desc>v1-1</desc>
            <filename>0001-SecurityPkg-DxeTpm2MeasureBootLib-Validate-GPT-table.patch</filename>
            <type>text/plain</type>
            <size>1944</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>404</attachid>
            <date>2019-09-24 03:20:28 +0000</date>
            <delta_ts>2019-09-24 03:20:28 +0000</delta_ts>
            <desc>v1-2</desc>
            <filename>0002-SecurityPkg-DxeTpmMeasureBootLib-Validate-GPT-table-.patch</filename>
            <type>text/plain</type>
            <size>1934</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>760</attachid>
            <date>2021-07-07 10:39:05 +0000</date>
            <delta_ts>2021-07-07 10:39:05 +0000</delta_ts>
            <desc>v1 MITRE .json file</desc>
            <filename>2168.json</filename>
            <type>application/json</type>
            <size>1886</size>
            <attacher>kevinj</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2636</bug_id>
          
          <creation_ts>2020-03-27 22:25:26 +0000</creation_ts>
          <short_desc>OvmfPkg/GenericQemuLoadImageLib: OVMF ia32x64 fails with VS2019</short_desc>
          <delta_ts>2020-06-03 18:25:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2582</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11878</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-27 22:25:26 +0000</bug_when>
    <thetext>Failure when compiling with VS2019 like:

build -p OvmfPkg/OvmfPkgIa32X64.dsc -b DEBUG -t VS2019 -a IA32 -a X64 -D SECURE_BOOT_ENABLE=1 -D SMM_REQUIRE=1 -D TPM_ENABLE=1 -D TPM_CONFIG_ENABLE=1 -D NETWORK_TLS_ENABLE=1 -D NETWORK_IP6_ENABLE=1 -D NETWORK_HTTP_BOOT_ENABLE=1

Link to build: https://dev.azure.com/tianocore/edk2-ci-play/_build/results?buildId=4916&amp;view=results 

The error:

	&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.24.28314\bin\Hostx86\x64\cl.exe&quot; /Fod:\a\1\s\Build\Ovmf3264\DEBUG_VS2019\X64\OvmfPkg\Library\GenericQemuLoadImageLib\GenericQemuLoadImageLib\OUTPUT\.\ /showIncludes /nologo /c /WX /GS- /W4 /Gs32768 /D UNICODE /O1b2s /GL /Gy /FIAutoGen.h /EHs-c- /GR- /GF /Z7 /Gw /D DISABLE_NEW_DEPRECATED_INTERFACES /Id:\a\1\s\OvmfPkg\Library\GenericQemuLoadImageLib  /Id:\a\1\s\Build\Ovmf3264\DEBUG_VS2019\X64\OvmfPkg\Library\GenericQemuLoadImageLib\GenericQemuLoadImageLib\DEBUG  /Id:\a\1\s\MdeModulePkg  /Id:\a\1\s\MdeModulePkg\Include  /Id:\a\1\s\MdePkg  /Id:\a\1\s\MdePkg\Include  /Id:\a\1\s\MdePkg\Include\X64  /Id:\a\1\s\OvmfPkg  /Id:\a\1\s\OvmfPkg\Include  /Id:\a\1\s\OvmfPkg\Csm\Include d:\a\1\s\OvmfPkg\Library\GenericQemuLoadImageLib\GenericQemuLoadImageLib.c
2020-03-27T22:06:57.3739878Z INFO - GenericQemuLoadImageLib.c
2020-03-27T22:06:57.4205755Z INFO - d:\a\1\s\OvmfPkg\Library\GenericQemuLoadImageLib\GenericQemuLoadImageLib.c(154): error C2220: the following warning is treated as an error
2020-03-27T22:06:57.4237010Z INFO - ui_null.c
2020-03-27T22:06:57.4339241Z INFO - d:\a\1\s\OvmfPkg\Library\GenericQemuLoadImageLib\GenericQemuLoadImageLib.c(154): warning C4244: &apos;=&apos;: conversion from &apos;UINTN&apos; to &apos;UINT32&apos;, possible loss of data
2020-03-27T22:06:57.4431627Z INFO - NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.24.28314\bin\Hostx86\x64\cl.exe&quot;&apos; : return code &apos;0x2&apos;
2020-03-27T22:06:57.4433428Z INFO - Stop.
2020-03-27T22:06:57.4472553Z INFO - 
2020-03-27T22:06:57.4473521Z INFO - 
2020-03-27T22:06:57.4478325Z INFO - build.py...
2020-03-27T22:06:57.4479085Z INFO -  : error 7000: Failed to execute command
2020-03-27T22:06:57.4488489Z INFO - 	C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.24.28314\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\a\1\s\Build\Ovmf3264\DEBUG_VS2019\X64\OvmfPkg\Library\GenericQemuLoadImageLib\GenericQemuLoadImageLib]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11883</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-28 13:39:25 +0000</bug_when>
    <thetext>Counterpart of bug 2582 / commit a2c3bf1f2f99 (&quot;OvmfPkg: Fix build failure with VS2015 tool chain&quot;, 2020-03-17).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11894</commentid>
    <comment_count>2</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-29 09:51:34 +0000</bug_when>
    <thetext>Patch sent.

Message-Id: &lt;20200329135104.6560-1-ard.biesheuvel@linaro.org&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11909</commentid>
    <comment_count>3</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-30 08:06:19 +0000</bug_when>
    <thetext>Fix pushed as 3000c2963db319d055f474c394b062af910bbb2f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2770</bug_id>
          
          <creation_ts>2020-05-28 00:38:50 +0000</creation_ts>
          <short_desc>Trim.py giving error when .asl files filtered out by build flags are not present in the folder</short_desc>
          <delta_ts>2020-06-11 21:32:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Parin Chheda">parin.chheda</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12753</commentid>
    <comment_count>0</comment_count>
    <who name="Parin Chheda">parin.chheda</who>
    <bug_when>2020-05-28 00:38:50 +0000</bug_when>
    <thetext>Trim.py gives file open failure in conversion from .asl to .i for .asl files
filtered out by build flag.

Our asl file 

This file has
#ifndef BuildFlag
….include asl
#else
..include asl from another folder
#endif

Our folder has .asl files present in the #ifndef section and the not the ones in #else part as we are only interested in those. This causes trim.py to complain about not finding those files.

Trim.py...
error 0001: File open failure</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12777</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-02 21:58:17 +0000</bug_when>
    <thetext>I see bob already send a patch to the community, assign it to him.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12851</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-06-11 21:32:31 +0000</bug_when>
    <thetext>Fixed at cfd73e0065f523e1d56bb32b5c9d48e162c903f8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2656</bug_id>
          
          <creation_ts>2020-04-02 03:32:09 +0000</creation_ts>
          <short_desc>Add scripts to set PACKAGES_PATH environment</short_desc>
          <delta_ts>2020-04-25 20:24:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12026</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-04-02 03:32:09 +0000</bug_when>
    <thetext>Currently the EDKII Packages are put in several folders, it is helpful if scripts can help to set PACKAGES_PATH environment variable.
The scrips collect all package paths under specified directories and append them to PACKAGES_PATH environment variable. A sub directory is a qualified package path when an EDKII Package can be found under it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12027</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-04-02 03:38:11 +0000</bug_when>
    <thetext>It will submit a patch for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12099</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:01:20 +0000</bug_when>
    <thetext>Under the discussion in edk2 mail list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12178</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-04-09 21:02:37 +0000</bug_when>
    <thetext>After discussion, this tool will be submitted to &quot;EDK2 Platforms&quot; but not &quot;EDK2&quot;
Change Product from EDK2 to EDK2 Platforms</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12317</commentid>
    <comment_count>4</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-04-25 20:24:19 +0000</bug_when>
    <thetext>Patch has been merged:
beecaf5d933bfd49ec0654fe08a473002d27d49c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2081</bug_id>
          
          <creation_ts>2019-08-13 04:53:22 +0000</creation_ts>
          <short_desc>BaseTools: ECC failed with ModuleNotFoundError</short_desc>
          <delta_ts>2019-08-14 01:58:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8976</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-13 04:53:22 +0000</bug_when>
    <thetext>This is a regression issue after multiple-process-autogen feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8977</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-13 04:54:03 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8997</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-14 01:58:23 +0000</bug_when>
    <thetext>fixed at SHA-1: 08a54c9e0a3db85d6a9fa7f418a914ea978fecc7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2436</bug_id>
          
          <creation_ts>2019-12-25 22:28:03 +0000</creation_ts>
          <short_desc>There are some incorrect Doxygen comment in SmmAccess feature</short_desc>
          <delta_ts>2020-01-15 04:14:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Marc Chen">marc.w.chen</reporter>
          <assigned_to name="Marc Chen">marc.w.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10753</commentid>
    <comment_count>0</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-12-25 22:28:03 +0000</bug_when>
    <thetext>There are some incorrect Doxygen comment in SmmAccess feature</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10754</commentid>
    <comment_count>1</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-12-25 22:28:58 +0000</bug_when>
    <thetext>Confirmed there are some incorrect Doxygen comment in SmmAccess feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10896</commentid>
    <comment_count>2</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2020-01-15 04:14:12 +0000</bug_when>
    <thetext>code is push @80b26a87254c446ea3e83cb47bcef5e989cd1242</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2215</bug_id>
          <alias>CVE-2019-14562</alias>
          <creation_ts>2019-09-24 04:09:33 +0000</creation_ts>
          <short_desc>DxeImageVerificationHandler integer overflow leads to endless loop</short_desc>
          <delta_ts>2021-09-22 15:46:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>dannf</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kimolsun2020</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vincent.zimmer</cc>
    
    <cc>xiewenyi0201</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>PcAtChipsetPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9769</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-24 04:09:33 +0000</bug_when>
    <thetext>There is an integer overflow vulnerability in the DxeImageVerificationHandler(..) function when parsing the PE files attribute certificate table. In cases where WinCertificate-&gt;dwLength is sufficiently large, it&apos;s possible to overflow Offset back to 0 causing an endless loop.

There needs to be stricter validation of Offset and the embedded length fields of certificate data before using them to advance the loop.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9770</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-24 04:10:00 +0000</bug_when>
    <thetext>Low 3.6: https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:H/PR:L/UI:N/S:U/C:N/I:L/A:L</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10159</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-22 11:04:06 +0000</bug_when>
    <thetext>Per discussion at https://edk2.groups.io/g/infosec/message/29, make this BZ public.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11079</commentid>
    <comment_count>3</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:40:04 +0000</bug_when>
    <thetext>2/5/2020 - follow-up on request to fix in the open</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12349</commentid>
    <comment_count>4</comment_count>
    <who name="Wenyi, Xie">xiewenyi0201</who>
    <bug_when>2020-04-29 04:21:33 +0000</bug_when>
    <thetext>Hi，may I ask when this issue will be fixed. And will this fix merge into release 202005?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13380</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-12 08:27:36 +0000</bug_when>
    <thetext>patch on the list from Wenyi Xie:

[edk2-devel] [PATCH EDK2 v1 0/1] Enhanced verification of Offset(CVE-2019-14562)
https://edk2.groups.io/g/devel/message/64059
http://mid.mail-archive.com/1597215886-48713-1-git-send-email-xiewenyi2@huawei.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13579</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-31 14:24:55 +0000</bug_when>
    <thetext>Reproducer description from Wenyi Xie:

https://edk2.groups.io/g/devel/message/64828
http://mid.mail-archive.com/3384c396-b397-928b-e09e-11979c90420e@huawei.com

&gt;| I modify the PE file again, this time it can pass the check in
&gt;| PeCoffLib and cause offset overflow.
&gt;|
&gt;| First, create a PE file and sign it(only one signature), then using
&gt;| binary edit tool to modify content of PE file like below,
&gt;|  1.check the value of SecDataDir-&gt;VirtualAddress, in my PE file, it&apos;s
&gt;|    0xE000
&gt;|  2.changing SecDataDir-&gt;Size from 0x5F8 to 0xFFFF1FFC
&gt;|  3.changing WinCertificate-&gt;dwLength from 0x5F1 to 0xFFFF1FFB
&gt;|  4.padding PE file with 0 until the size of the file is 0xFFFFFFFC(it
&gt;|    will make the PE file so large)
&gt;| OffSet + WinCertificate-&gt;dwLength + ALIGN_SIZE (WinCertificate-&gt;dwLength)
&gt;| is 0xE000 + 0xFFFF1FFB + 0x5 = 0x100000000
&gt;|
&gt;| Below is the DEBUG code and log, in second loop the offset overflow
&gt;| and become 0
&gt;|
&gt;| for (OffSet = SecDataDir-&gt;VirtualAddress;
&gt;|      OffSet &lt; (SecDataDir-&gt;VirtualAddress + SecDataDir-&gt;Size);
&gt;|      OffSet += (WinCertificate-&gt;dwLength + ALIGN_SIZE (WinCertificate-&gt;dwLength))) {
&gt;|   WinCertificate = (WIN_CERTIFICATE *) (mImageBase + OffSet);
&gt;|   DEBUG((DEBUG_INFO, &quot;OffSet=0x%x.\n&quot;, OffSet));
&gt;|   if ((SecDataDir-&gt;VirtualAddress + SecDataDir-&gt;Size - OffSet) &lt;= sizeof (WIN_CERTIFICATE) ||
&gt;|       (SecDataDir-&gt;VirtualAddress + SecDataDir-&gt;Size - OffSet) &lt; WinCertificate-&gt;dwLength) {
&gt;|     break;
&gt;|   }
&gt;|   DEBUG((DEBUG_INFO, &quot;WinCertificate-&gt;dwLength=0x%x, &quot;
&gt;|     &quot;ALIGN_SIZE (WinCertificate-&gt;dwLength)=0x%x.\n&quot;,
&gt;|     WinCertificate-&gt;dwLength, ALIGN_SIZE(WinCertificate-&gt;dwLength)));
&gt;|
&gt;|
&gt;| SecDataDir-&gt;VirtualAddress=0xE000, SecDataDir-&gt;Size=0xFFFF1FFC.
&gt;| OffSet=0xE000.
&gt;| WinCertificate-&gt;dwLength=0xFFFF1FFB, ALIGN_SIZE
&gt;| (WinCertificate-&gt;dwLength)=0x5.
&gt;| DxeImageVerificationLib: Image is signed but signature is not allowed
&gt;| by DB and SHA256 hash of image is notOffSet=0x0.
&gt;| WinCertificate-&gt;dwLength=0x5A4D, ALIGN_SIZE
&gt;| (WinCertificate-&gt;dwLength)=0x3.
&gt;| OffSet=0x5A50.
&gt;| WinCertificate-&gt;dwLength=0x9024, ALIGN_SIZE
&gt;| (WinCertificate-&gt;dwLength)=0x4.
&gt;| OffSet=0xEA78.
&gt;| WinCertificate-&gt;dwLength=0x0, ALIGN_SIZE
&gt;| (WinCertificate-&gt;dwLength)=0x0.
&gt;| The image doesn&apos;t pass verification:
&gt;| VenHw(5CF32E0B-8EDF-2E44-9CDA-93205E99EC1C,00000000)/VenHw(964E5B22-6459-11D2-8E39-00A0C969723B,00000000)/\signed_1234_4G.efi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13583</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-01 05:14:50 +0000</bug_when>
    <thetext>v2 from Wenyi Xie:

* [edk2-devel] [PATCH EDK2 v2 0/1]
  SecurityPkg/DxeImageVerificationLib:Enhanced verification of Offset

https://edk2.groups.io/g/devel/message/64160
http://mid.mail-archive.com/1597319741-59646-1-git-send-email-xiewenyi2@huawei.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13584</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-01 05:17:29 +0000</bug_when>
    <thetext>Somewhat different approach from Laszlo (meant to supersede previously
posted patches):

* [edk2-devel] [PATCH 0/3]
  SecurityPkg/DxeImageVerificationLib: catch alignment overflow
  (CVE-2019-14562)

https://edk2.groups.io/g/devel/message/64882
http://mid.mail-archive.com/20200901091221.20948-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13599</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-02 06:32:54 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #8)
&gt; * [edk2-devel] [PATCH 0/3]
&gt;   SecurityPkg/DxeImageVerificationLib: catch alignment overflow
&gt;   (CVE-2019-14562)
&gt; 
&gt; https://edk2.groups.io/g/devel/message/64882
&gt; http://mid.mail-archive.com/20200901091221.20948-1-lersek@redhat.com

Merged in commit range 751355992635..0b143fa43e92, via &lt;https://github.com/tianocore/edk2/pull/911&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17357</commentid>
    <comment_count>10</comment_count>
    <who name="Kim Olsun">kimolsun2020</who>
    <bug_when>2021-09-22 15:46:48 +0000</bug_when>
    <thetext>http://www.compilatori.com/category/computers/	http://www.wearelondonmade.com/category/computers/	http://www.jopspeech.com/category/computers/	http://joerg.li/category/computers/	http://connstr.net/category/computers/	http://embermanchester.uk/category/computers/	http://www.slipstone.co.uk/category/computers/	http://www.logoarts.co.uk/category/computers/	http://www.acpirateradio.co.uk/category/computers/	https://waytowhatsnext.com/category/computers/	https://www.webb-dev.co.uk/category/computers/	http://www.iu-bloomington.com/category/computers/	http://www-look-4.com/category/computers/</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2344</bug_id>
          
          <creation_ts>2019-11-15 09:42:21 +0000</creation_ts>
          <short_desc>spelling mistake, &quot;aquire&quot; should be &quot;acquire&quot;</short_desc>
          <delta_ts>2020-07-31 21:33:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10455</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-15 09:42:21 +0000</bug_when>
    <thetext>Spelling mistake in the following code, aquire should be acquire

MdeModulePkg/Bus/Isa/Ps2KeyboardDxe/Ps2KbdCtrller.c:        L&quot;Some specific value not aquired from 8042 controller!\n\r&quot;
MdeModulePkg/Bus/Isa/Ps2KeyboardDxe/Ps2KbdCtrller.c:      KeyboardError (ConsoleIn, L&quot;Some specific value not aquired from 8042 controller!\n\r&quot;);
MdeModulePkg/Bus/Isa/Ps2KeyboardDxe/Ps2KbdCtrller.c:      KeyboardError (ConsoleIn, L&quot;Some specific value not aquired from 8042 controller!\n\r&quot;);
MdeModulePkg/Bus/Isa/Ps2KeyboardDxe/Ps2KbdCtrller.c:      KeyboardError (ConsoleIn, L&quot;Some specific value not aquired from 8042 controller!\n\r&quot;);
MdeModulePkg/Bus/Isa/Ps2KeyboardDxe/Ps2KbdCtrller.c:    KeyboardError (ConsoleIn, L&quot;Some specific value not aquired from 8042 controller!\n\r&quot;);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13294</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 21:33:38 +0000</bug_when>
    <thetext>Fixed by the following commit

https://github.com/tianocore/edk2/commit/1d031e750b673044ceee72106ba359f58e97854e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2240</bug_id>
          
          <creation_ts>2019-10-03 17:31:37 +0000</creation_ts>
          <short_desc>UefiPayloadPkg does not include NVMe (NvmExpressDxe)</short_desc>
          <delta_ts>2021-09-22 15:47:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Greg V [:myfreeweb]">edk</reporter>
          <assigned_to name="dong_guo@126.com">guo.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>kimolsun2020</cc>
    
    <cc>kingsumos</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9917</commentid>
    <comment_count>0</comment_count>
    <who name="Greg V [:myfreeweb]">edk</who>
    <bug_when>2019-10-03 17:31:37 +0000</bug_when>
    <thetext>A strange little omission. Many Coreboot devices (e.g. the Google Pixelbook) use NVMe drives.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10074</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:32:13 +0000</bug_when>
    <thetext>Please explore possible NVMe enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17069</commentid>
    <comment_count>2</comment_count>
    <who name="Sumo">kingsumos</who>
    <bug_when>2021-08-25 08:01:13 +0000</bug_when>
    <thetext>Already added/fixed since edk2-stable202102:

commit cf4cbe194fbdb454a3ea2505e4504d9f23018869
Author: Guo Dong &lt;guo.dong@intel.com&gt;
Date:   Thu Feb 11 20:55:47 2021 -0700

    UefiPayloadPkg: Enable NVMe support

    Signed-off-by: Tim Crawford &lt;tcrawford@system76.com&gt;
    Signed-off-by: Patrick Rudolph &lt;patrick.rudolph@9elements.com&gt;
    Reviewed-by: Guo Dong &lt;guo.dong@intel.com&gt;

diff --git a/UefiPayloadPkg/UefiPayloadPkg.dsc b/UefiPayloadPkg/UefiPayloadPkg.dsc
index 24dab157f1..23edd163e9 100644
--- a/UefiPayloadPkg/UefiPayloadPkg.dsc
+++ b/UefiPayloadPkg/UefiPayloadPkg.dsc
@@ -456,6 +456,7 @@
   MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AtaAtapiPassThru.inf
   MdeModulePkg/Bus/Scsi/ScsiBusDxe/ScsiBusDxe.inf
   MdeModulePkg/Bus/Scsi/ScsiDiskDxe/ScsiDiskDxe.inf
+  MdeModulePkg/Bus/Pci/NvmExpressDxe/NvmExpressDxe.inf^M

   #
   # SD/eMMC Support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17363</commentid>
    <comment_count>3</comment_count>
    <who name="Kim Olsun">kimolsun2020</who>
    <bug_when>2021-09-22 15:47:35 +0000</bug_when>
    <thetext>http://www.compilatori.com/computers/latest-car-deals/	http://www.wearelondonmade.com/computers/latest-car-deals/	http://www.jopspeech.com/computers/latest-car-deals/	http://joerg.li/computers/latest-car-deals/	http://connstr.net/computers/latest-car-deals/	http://embermanchester.uk/computers/latest-car-deals/	http://www.slipstone.co.uk/computers/latest-car-deals/	http://www.logoarts.co.uk/computers/latest-car-deals/	http://www.acpirateradio.co.uk/travel/good/	https://waytowhatsnext.com/category/shopping/	https://www.webb-dev.co.uk/health/health-and-cannabis/	http://www.iu-bloomington.com/category/shopping/	http://www-look-4.com/health/covid-and-tech/</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2697</bug_id>
          
          <creation_ts>2020-04-27 13:52:50 +0000</creation_ts>
          <short_desc>Incorrect TCG PPI version comparison in SmmTcg2PhysicalPresenceLib</short_desc>
          <delta_ts>2020-10-17 21:18:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Terry Lee">terry.lee</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12325</commentid>
    <comment_count>0</comment_count>
    <who name="Terry Lee">terry.lee</who>
    <bug_when>2020-04-27 13:52:50 +0000</bug_when>
    <thetext>The function Tcg2PhysicalPresenceLibConstructor() in SecurityPkg/Library/SmmTcg2PhysicalPresenceLib/SmmTcg2PhysicalPresenceLib.c contains the following code.

  if (AsciiStrnCmp(PP_INF_VERSION_1_2, (CHAR8 *)PcdGetPtr(PcdTcgPhysicalPresenceInterfaceVer), sizeof(PP_INF_VERSION_1_2) - 1) &lt;= 0) {
    mIsTcg2PPVerLowerThan_1_3 = TRUE;
  }

The arithmetic comparison &quot;&lt;= 0&quot; is incorrect, because PcdTcgPhysicalPresenceInterfaceVer values 1.3 and higher will result in AsciiStrnCmp() returning negative value, erroneously setting mIsTcg2PPVerLowerThan_1_3 to TRUE.  The arithmetic comparison should be changed to &quot;&gt;= 0&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12331</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-28 21:36:15 +0000</bug_when>
    <thetext>Zhichao, please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12793</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-06-03 21:03:11 +0000</bug_when>
    <thetext>Yes. It should be changed to:
 if (AsciiStrnCmp(PP_INF_VERSION_1_2, (CHAR8 *)PcdGetPtr(PcdTcgPhysicalPresenceInterfaceVer), sizeof(PP_INF_VERSION_1_2) - 1) &gt;= 0) {
    mIsTcg2PPVerLowerThan_1_3 = TRUE;
  }

Terry, would you send a patch to fix this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12804</commentid>
    <comment_count>3</comment_count>
      <attachid>522</attachid>
    <who name="Terry Lee">terry.lee</who>
    <bug_when>2020-06-05 19:43:46 +0000</bug_when>
    <thetext>Created attachment 522
Proposed patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13967</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-14 10:57:03 +0000</bug_when>
    <thetext>Lee: please add the commit message in the patch. The commit message format can refer to https://github.com/tianocore/tianocore.github.io/wiki/Commit-Message-Format. Then, send the patch to edk2 mail list devel@edk2.groups.io</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14018</commentid>
    <comment_count>5</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-10-17 21:18:22 +0000</bug_when>
    <thetext>Pushed
https://github.com/tianocore/edk2/pull/1027
git-hash: 709b163940c55604b983400eb49dad144a2aa091</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>522</attachid>
            <date>2020-06-05 19:43:46 +0000</date>
            <delta_ts>2020-06-05 19:43:46 +0000</delta_ts>
            <desc>Proposed patch</desc>
            <filename>PPINF.patch</filename>
            <type>text/plain</type>
            <size>772</size>
            <attacher name="Terry Lee">terry.lee</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2592</bug_id>
          
          <creation_ts>2020-03-11 21:04:52 +0000</creation_ts>
          <short_desc>SMM Dispatcher Memory leakage</short_desc>
          <delta_ts>2022-02-10 06:20:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="chao">chao.b.zhang</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11667</commentid>
    <comment_count>0</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2020-03-11 21:04:52 +0000</bug_when>
    <thetext>Problem:
To record each driver&apos;s dispatch info, SMM Dispatcher allocate a DriverEntry datastructure in SMM memory. After dispatching, these information become useless but driverEntry is not freed. They are persistent 

Impact:
SMM memory leakage.  Estimated total leaked memory size is ~1KB

Solution:
Free DriverEntry after Successfully launch corresponding SMM driver</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11718</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-17 22:09:53 +0000</bug_when>
    <thetext>guomin: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11762</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-23 01:04:08 +0000</bug_when>
    <thetext>Can you provide the more detail information? such as which code you think will result in memory leakage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12348</commentid>
    <comment_count>3</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-29 03:23:25 +0000</bug_when>
    <thetext>I will investigate this bug from August.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18314</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2022-02-10 06:20:02 +0000</bug_when>
    <thetext>I think it is invalid issue

DriverEntry should come from PiSmmCore/Dispatcher.c 1460 DriverEntry = CR (Link, EFI_SMM_DRIVER_ENTRY, Link, EFI_SMM_DRIVER_ENTRY_SIGNATURE);

But from the description of PiSmmCore/Dispatcher.c 1284 SmmDriverDispatchHandler.
The mDiscoveredList is never free&apos;ed and contains variables that define the other states the SMM driver transitions to..

So it is invalid issue.

Please let know if you have any concern.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2490</bug_id>
          
          <creation_ts>2020-01-29 06:51:44 +0000</creation_ts>
          <short_desc>OvmfXen: Set PcdFSBClock at runtime</short_desc>
          <delta_ts>2021-04-13 08:08:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>anthony</reporter>
          <assigned_to>anthony</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10996</commentid>
    <comment_count>0</comment_count>
    <who name="">anthony</who>
    <bug_when>2020-01-29 06:51:44 +0000</bug_when>
    <thetext>OvmfXen uses the APIC timer, but with an hard-coded frequency that may change
as pointed out here:
  https://edk2.groups.io/g/devel/message/45185
  &lt;20190808134423.ybqg3qkpw5ucfzk4@Air-de-Roger&gt;

This series changes that so the frequency is calculated at runtime.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10997</commentid>
    <comment_count>1</comment_count>
    <who name="">anthony</who>
    <bug_when>2020-01-29 07:14:35 +0000</bug_when>
    <thetext>[PATCH 0/5] OvmfXen: Set PcdFSBClock at runtime
https://edk2.groups.io/g/devel/message/53520</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11462</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 12:51:54 +0000</bug_when>
    <thetext>(In reply to anthony.perard from comment #1)
&gt; [PATCH 0/5] OvmfXen: Set PcdFSBClock at runtime
&gt; https://edk2.groups.io/g/devel/message/53520

Setting Assignee to Anthony.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15429</commentid>
    <comment_count>3</comment_count>
    <who name="">anthony</who>
    <bug_when>2021-03-25 11:49:48 +0000</bug_when>
    <thetext>[PATCH v2 0/7] OvmfXen: Set PcdFSBClock at runtime
https://edk2.groups.io/g/devel/message/73271</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15596</commentid>
    <comment_count>4</comment_count>
    <who name="">anthony</who>
    <bug_when>2021-04-12 09:33:39 +0000</bug_when>
    <thetext>[PATCH v3 0/7] OvmfXen: Set PcdFSBClock at runtime
https://edk2.groups.io/g/devel/message/73952</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15627</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-04-13 08:08:32 +0000</bug_when>
    <thetext>(In reply to anthony.perard from comment #4)
&gt; [PATCH v3 0/7] OvmfXen: Set PcdFSBClock at runtime
&gt; https://edk2.groups.io/g/devel/message/73952

Merged in commit range 16136f218d54..71cdb91f3133, via &lt;https://github.com/tianocore/edk2/pull/1560&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2362</bug_id>
          
          <creation_ts>2019-11-19 11:03:16 +0000</creation_ts>
          <short_desc>spelling mistake, &quot;trival&quot; should be &quot;trivial&quot;</short_desc>
          <delta_ts>2020-07-31 18:17:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10478</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-19 11:03:16 +0000</bug_when>
    <thetext>spelling mistake, &quot;trival&quot; should be &quot;trivial&quot;, two occurrances:

BaseTools/Source/C/VfrCompile/Pccts/CHANGES_FROM_133.txt:    This may take a record for the oldest, most trival, lexical

BaseTools/Source/C/VfrCompile/Pccts/antlr/main.c:       fprintf(stderr, &quot;  please pray to the ``bug&apos;&apos; gods that there is a trival fix.]\n&quot;);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13274</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:17:06 +0000</bug_when>
    <thetext>These spelling errors are in PCCTS which is not maintained
by this project.  This spelling error even made it into
published documents for PCCTS:

https://www.antlr2.org/book/pcctsbk.pdf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2840</bug_id>
          
          <creation_ts>2020-07-05 22:06:40 +0000</creation_ts>
          <short_desc>Add missing PcrIndex assignment for Tcg2Pei FvBlock2 event.</short_desc>
          <delta_ts>2020-07-20 02:49:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13048</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-07-05 22:06:40 +0000</bug_when>
    <thetext>It only impacts the EV_EFI_PLATFORM_FIRMWARE_BLOB2 event. No impact to EV_EFI_PLATFORM_FIRMWARE_BLOB event.

Detail below:

     FvBlob2.BlobBase      = FvBase;
     FvBlob2.BlobLength    = FvLength;
+    TcgEventHdr.PCRIndex  = 0;
     TcgEventHdr.EventType = EV_EFI_PLATFORM_FIRMWARE_BLOB2;
     TcgEventHdr.EventSize = sizeof (FvBlob2);
     EventData             = &amp;FvBlob2;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13056</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-07-07 21:41:38 +0000</bug_when>
    <thetext>Reasonable change request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13127</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-07-20 02:49:10 +0000</bug_when>
    <thetext>Fixed in f45e3a4afa65a45ea1a956a7c5e7410ff40190d1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2257</bug_id>
          
          <creation_ts>2019-10-09 19:48:34 +0000</creation_ts>
          <short_desc>Add BaseCryptLibNull so that dependent packages can compile faster in CI environment</short_desc>
          <delta_ts>2020-01-29 19:02:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9982</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 19:48:34 +0000</bug_when>
    <thetext>Code available here
https://github.com/spbrogan/edk2/commit/03966d72af17dbfbff37a0682772c1cfc4cfbbab</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10067</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:25:03 +0000</bug_when>
    <thetext>All these errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10181</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 18:25:49 +0000</bug_when>
    <thetext>The patch provided includes references to OpenSSL and to
syscalls and internal APIs that are only used by an OpenSSL
implementation.

I have removed these artifices from this Null implementation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10182</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 18:31:13 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/49368</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10183</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 18:31:29 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/49368</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10204</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-23 21:40:53 +0000</bug_when>
    <thetext>pushed as 20c082e8d7..d95de082da</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11010</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 19:02:34 +0000</bug_when>
    <thetext>*** Bug 2181 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2719</bug_id>
          
          <creation_ts>2020-05-13 18:17:07 +0000</creation_ts>
          <short_desc>X64 build error for MdePkg: Unable to open include file Nasm.inc</short_desc>
          <delta_ts>2020-05-15 15:28:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="MacKevin Fey">mackevin.fey</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12498</commentid>
    <comment_count>0</comment_count>
    <who name="MacKevin Fey">mackevin.fey</who>
    <bug_when>2020-05-13 18:17:07 +0000</bug_when>
    <thetext>X64 build error for MdePkg: Unable to open include file Nasm.inc when compiling edk2 as a part of ipmctl build. It appears that Nasm.inc file is not in proper directory directory location.

Able to work around using git patching to our internal mirror of edk2. Patch code below: 

diff --git a/patches/0001-BACKPORT-Copy-nasm-to-correct-dir.patch b/patches/0001-BACKPORT-Copy-nasm-to-correct-dir.patch
deleted file mode 100644
index 51b7dd95a..000000000
--- a/patches/0001-BACKPORT-Copy-nasm-to-correct-dir.patch
+++ /dev/null
@@ -1,41 +0,0 @@
-From f75ee4f3d2dfd7c098cf684e5452ecd832c2fca7 Mon Sep 17 00:00:00 2001
-From: James Anandraj &lt;james.sushanth.anandraj@intel.com&gt;
-Date: Thu, 15 Aug 2019 16:35:55 -0700
-Subject: [PATCH] Copy Nasm.inc to correct dir
-
----
- MdePkg/Library/BaseLib/X64/Nasm.inc | 22 ++++++++++++++++++++++
- 1 file changed, 22 insertions(+)
- create mode 100644 MdePkg/Library/BaseLib/X64/Nasm.inc
-
-diff --git a/MdePkg/Library/BaseLib/X64/Nasm.inc b/MdePkg/Library/BaseLib/X64/Nasm.inc
-new file mode 100644
-index 0000000..4241273
---- /dev/null
-+++ b/MdePkg/Library/BaseLib/X64/Nasm.inc
-@@ -0,0 +1,22 @@
-+;------------------------------------------------------------------------------
-+;
-+; Copyright (c) 2019, Intel Corporation. All rights reserved.&lt;BR&gt;
-+; SPDX-License-Identifier: BSD-2-Clause-Patent
-+;
-+; Abstract:
-+;
-+;   This file provides macro definitions for NASM files.
-+;
-+;------------------------------------------------------------------------------
-+
-+%macro SETSSBSY        0
-+    DB 0xF3, 0x0F, 0x01, 0xE8
-+%endmacro
-+
-+%macro READSSP_RAX     0
-+    DB 0xF3, 0x48, 0x0F, 0x1E, 0xC8
-+%endmacro
-+
-+%macro INCSSP_RAX      0
-+    DB 0xF3, 0x48, 0x0F, 0xAE, 0xE8
-+%endmacro
---
-2.21.0.windows.1
-</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12499</commentid>
    <comment_count>1</comment_count>
    <who name="MacKevin Fey">mackevin.fey</who>
    <bug_when>2020-05-13 18:18:09 +0000</bug_when>
    <thetext>Error from build script:

        &quot;C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\x86_amd64\cl.exe&quot; /nologo /E /TC /FIAutoGen.h /Ic:\repos\apss_crsw-cr_uefi\MdePkg\Library\BaseLib\X64  /Ic:\repos\apss_crsw-cr_uefi\MdePkg\Library\BaseLib  /Ic:\repos\apss_crsw-cr_uefi\Build\Dcpm\RELEASE_VS2015x86\X64\MdePkg\Library\BaseLib\BaseLib\DEBUG  /Ic:\repos\apss_crsw-cr_uefi\MdePkg  /Ic:\repos\apss_crsw-cr_uefi\MdePkg\Include  /Ic:\repos\apss_crsw-cr_uefi\MdePkg\Include\X64 c:\repos\apss_crsw-cr_uefi\MdePkg\Library\BaseLib\X64\LongJump.nasm &gt; c:\repos\apss_crsw-cr_uefi\Build\Dcpm\RELEASE_VS2015x86\X64\MdePkg\Library\BaseLib\BaseLib\OUTPUT\X64\LongJump.i
LongJump.nasm
        Trim --trim-long --source-code -o c:\repos\apss_crsw-cr_uefi\Build\Dcpm\RELEASE_VS2015x86\X64\MdePkg\Library\BaseLib\BaseLib\OUTPUT\X64\LongJump.iii c:\repos\apss_crsw-cr_uefi\Build\Dcpm\RELEASE_VS2015x86\X64\MdePkg\Library\BaseLib\BaseLib\OUTPUT\X64\LongJump.i
        &quot;C:\nasm\nasm&quot; -Ic:\repos\apss_crsw-cr_uefi\MdePkg\Library\BaseLib\X64\ -Ox -f win64 -o c:\repos\apss_crsw-cr_uefi\Build\Dcpm\RELEASE_VS2015x86\X64\MdePkg\Library\BaseLib\BaseLib\OUTPUT\X64\LongJump.obj c:\repos\apss_crsw-cr_uefi\Build\Dcpm\RELEASE_VS2015x86\X64\MdePkg\Library\BaseLib\BaseLib\OUTPUT\X64\LongJump.iii
c:\repos\apss_crsw-cr_uefi\Build\Dcpm\RELEASE_VS2015x86\X64\MdePkg\Library\BaseLib\BaseLib\OUTPUT\X64\LongJump.iii:16: fatal: unable to open include file `Nasm.inc&apos;
NMAKE : fatal error U1077: &apos;C:\nasm\nasm.EXE&apos; : return code &apos;0x1&apos;
Stop.


build.py...
 : error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\nmake.exe /nologo tbuild [c:\repos\apss_crsw-cr_uefi\Build\Dcpm\RELEASE_VS2015x86\X64\MdePkg\Library\BaseLib\BaseLib]


build.py...
 : error F002: Failed to build module
        c:\repos\apss_crsw-cr_uefi\MdePkg\Library\BaseLib\BaseLib.inf [X64, VS2015x86, RELEASE]

- Failed -
Build end time: 14:43:52, May.13 2020
Build total time: 00:00:26</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12506</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-14 10:27:19 +0000</bug_when>
    <thetext>How is this related to upstream edk2?

See: &quot;when compiling edk2 as a part of ipmctl build&quot;.

&quot;MdePkg/Include/X64/Nasm.inc&quot; was introduced in commit 68edd7dbad77 (&quot;MdePkg/Include: Add Nasm.inc&quot;, 2019-02-28), for bug 1521. This commit comes after, and depends on, the edk2 feature added in bug 1085.

I don&apos;t know what fork of edk2 you use internally, but it&apos;s probably missing the following patches:

- the series for bug 1085:
  - 7c3a1efd1524 BaseTools: Update nasm file build rule to support $(INC)
  - 073a76e66293 BaseTools: Add $(INC)-like support when compiling .nasm files

- possibly the fixup commit:
  - c44e0a896cac BaseTools: Remove caret in NASM_INC macro

Closing this as INVALID because &quot;MdePkg/Include/X64/Nasm.inc&quot; is located just fine in upstream edk2 and edk2-platforms builds.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12509</commentid>
    <comment_count>3</comment_count>
    <who name="MacKevin Fey">mackevin.fey</who>
    <bug_when>2020-05-15 12:33:52 +0000</bug_when>
    <thetext>I was able to find where the breakdown was occurring for us. We are up-to-date with our internal edk2 mirror and everything was correct, as you mentioned.

The problem was, per the BaseTools/Conf/ReadMe.txt:

&quot;This directory contains the template files for the next generation of the
EDK II Build infrastructure.  These files will be copied into the WORKSPACE&apos;s
Conf directory if and only if the target files do not exist.&quot;

For some reason, we were tracking the copy of the Conf directory in our ipmctl source so we weren&apos;t getting the up-to-date build_rule.template from edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12510</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-15 15:28:52 +0000</bug_when>
    <thetext>Thanks for reporting back! One comment:

(In reply to MacKevin Fey from comment #3)
&gt; For some reason, we were tracking the copy of the Conf directory in our
&gt; ipmctl source so we weren&apos;t getting the up-to-date build_rule.template from
&gt; edk2.

The Conf directory has had a .gitignore file since commit 71bcf79963d1 (&quot;EDK II: Add .gitignore&quot;, 2014-10-14). However, if you had the contents of that directory checked in previously, and then rebased your tree to a more recent edk2 state, then .gitignore (to my knowledge) does not override files that are already tracked.

Thanks!
Laszlo</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2149</bug_id>
          
          <creation_ts>2019-09-02 23:33:02 +0000</creation_ts>
          <short_desc>ClevoOpenBoardPkg build failure with GCC tool chain</short_desc>
          <delta_ts>2019-09-16 12:49:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>ClevoOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9434</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-09-02 23:33:02 +0000</bug_when>
    <thetext>GCC5 build failure log:                      ^
 rm -f /work/b2eadf6bb446d0f1/Build/ClevoOpenBoardPkg/N1xxWU/DEBUG_GCC5/IA32/MdePkg/Library/BasePrintLib/BasePrintLib/OUTPUT/BasePrintLib.lib
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:184:25: note: (near initialization for ‘mGpioTableN1xxWU[161].GpioConfig’)
 &quot;gcc-ar&quot; cr /work/b2eadf6bb446d0f1/Build/ClevoOpenBoardPkg/N1xxWU/DEBUG_GCC5/IA32/MdePkg/Library/BasePrintLib/BasePrintLib/OUTPUT/BasePrintLib.lib  @/work/b2eadf6bb446d0f1/Build/ClevoOpenBoardPkg/N1xxWU/DEBUG_GCC5/IA32/MdePkg/Library/BasePrintLib/BasePrintLib/OUTPUT/object_files.lst
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:184:3: error: missing braces around initializer [-Werror=missing-braces]
    {GPIO_SKL_LP_GPP_E21, {GpioPadModeNative1, GpioHostOwnDefault, GpioDirNone,    GpioOutDefault, GpioIntDis, GpioHostDeepReset, GpioTermNone}}, //DDPC_CTRLDATA
    ^
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:184:3: note: (near initialization for ‘mGpioTableN1xxWU[161]’)
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:185:25: error: missing braces around initializer [-Werror=missing-braces]
    {GPIO_SKL_LP_GPP_E22, {GpioPadModeGpio,    GpioHostOwnGpio,    GpioDirInOut,   GpioOutDefault, GpioIntLevel | GpioIntApic, GpioHostDeepReset, GpioTermNone}}, //DDPD_CTRLCLK
                          ^
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:185:25: note: (near initialization for ‘mGpioTableN1xxWU[162].GpioConfig’)
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:185:3: error: missing braces around initializer [-Werror=missing-braces]
    {GPIO_SKL_LP_GPP_E22, {GpioPadModeGpio,    GpioHostOwnGpio,    GpioDirInOut,   GpioOutDefault, GpioIntLevel | GpioIntApic, GpioHostDeepReset, GpioTermNone}}, //DDPD_CTRLCLK
    ^
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:185:3: note: (near initialization for ‘mGpioTableN1xxWU[162]’)
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:186:25: error: missing braces around initializer [-Werror=missing-braces]
    {GPIO_SKL_LP_GPP_E23, {GpioPadModeGpio,    GpioHostOwnGpio,    GpioDirOut,     GpioOutHigh,    GpioIntDis, GpioHostDeepReset, GpioTermNone}}, //DDPD_CTRLDATA
                          ^
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:186:25: note: (near initialization for ‘mGpioTableN1xxWU[163].GpioConfig’)
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:186:3: error: missing braces around initializer [-Werror=missing-braces]
    {GPIO_SKL_LP_GPP_E23, {GpioPadModeGpio,    GpioHostOwnGpio,    GpioDirOut,     GpioOutHigh,    GpioIntDis, GpioHostDeepReset, GpioTermNone}}, //DDPD_CTRLDATA
    ^
 Building ... /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/MinPlatformPkg/Test/Library/TestPointLib/PeiTestPointLib.inf [IA32]
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:186:3: note: (near initialization for ‘mGpioTableN1xxWU[163]’)
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:187:25: error: missing braces around initializer [-Werror=missing-braces]
    {END_OF_GPIO_TABLE,   {GpioPadModeGpio,    GpioHostOwnGpio,    GpioDirNone,    GpioOutDefault, GpioIntDis, GpioDswReset,  GpioTermNone}},//Marking End of Table
                          ^
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:187:25: note: (near initialization for ‘mGpioTableN1xxWU[164].GpioConfig’)
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:187:3: error: missing braces around initializer [-Werror=missing-braces]
    {END_OF_GPIO_TABLE,   {GpioPadModeGpio,    GpioHostOwnGpio,    GpioDirNone,    GpioOutDefault, GpioIntDis, GpioDswReset,  GpioTermNone}},//Marking End of Table
    ^
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:187:3: note: (near initialization for ‘mGpioTableN1xxWU[164]’)
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:22:1: error: missing braces around initializer [-Werror=missing-braces]
  {
  ^
 /work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/N1xxWUGpioTable.c:22:1: note: (near initialization for ‘mGpioTableN1xxWU’)
 cc1: all warnings being treated as errors
 make: *** [/work/b2eadf6bb446d0f1/Build/ClevoOpenBoardPkg/N1xxWU/DEBUG_GCC5/IA32/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/PeiMultiBoardInitPostMemLib/OUTPUT/N1xxWUGpioTable.obj] Error 1
 
 
 build.py...
  : error 7000: Failed to execute command
 	make tbuild [/work/b2eadf6bb446d0f1/Build/ClevoOpenBoardPkg/N1xxWU/DEBUG_GCC5/IA32/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/PeiMultiBoardInitPostMemLib]
 
 
 build.py...
  : error F002: Failed to build module
 	/work/b2eadf6bb446d0f1/edk2-platforms/Platform/Intel/ClevoOpenBoardPkg/N1xxWU/Library/BoardInitLib/PeiMultiBoardInitPostMemLib.inf [IA32, GCC5, DEBUG]
 
 - Failed -
 Build end time: 10:11:53, Sep.01 2019
 Build total time: 00:00:40</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9673</commentid>
    <comment_count>1</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-09-16 12:49:46 +0000</bug_when>
    <thetext>Issue is fixed. Patches are merged into master branch.

commit 4305746f263e97c9d58bb6fc31722566acc529c1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2512</bug_id>
          
          <creation_ts>2020-02-10 13:40:08 +0000</creation_ts>
          <short_desc>UnitTestFramworkPkg/UnitTest - XCODE5 generates errors for extra parenthesis</short_desc>
          <delta_ts>2020-02-11 18:52:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11185</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-10 13:40:08 +0000</bug_when>
    <thetext>The XCODE5 builds break for errors in the UnitTestLib 
implementation that contains extra sets of parenthesis in a few
statements:

Edk2/UnitTestFrameworkPkg/Library/UnitTestLib/Assert.c:368:15: error: equality comparison with extraneous parentheses [-Werror,-Wparentheses-equality]
  if ((ValueA == ValueB)) {
       ~~~~~~~^~~~~~~~~
Edk2/UnitTestFrameworkPkg/Library/UnitTestLib/Assert.c:368:15: note: remove extraneous parentheses around the comparison to silence this warning
  if ((ValueA == ValueB)) {
      ~       ^        ~
Edk2/UnitTestFrameworkPkg/Library/UnitTestLib/Assert.c:368:15: note: use &apos;=&apos; to turn this equality comparison into an assignment
  if ((ValueA == ValueB)) {
              ^~
              =</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11209</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-11 18:49:37 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11210</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-11 18:51:21 +0000</bug_when>
    <thetext>Patch review email

https://edk2.groups.io/g/devel/message/54157</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11211</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-11 18:52:10 +0000</bug_when>
    <thetext>Pushed as f76d50166b69eefbef4bc3895f370a4501c819d1

EDK II CI PR: https://github.com/tianocore/edk2/pull/364</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2862</bug_id>
          
          <creation_ts>2020-07-23 21:20:29 +0000</creation_ts>
          <short_desc>Read/Write MMX and MemoryFence() missing in UnitTestHostBaseLib</short_desc>
          <delta_ts>2020-07-31 17:50:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13167</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-23 21:20:29 +0000</bug_when>
    <thetext>The UnitTestHostBaseLib library is missing the Read/Write MMX services
and the MemoryFence() service.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13168</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-23 21:21:10 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13251</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 17:49:22 +0000</bug_when>
    <thetext>Patch for review

https://edk2.groups.io/g/devel/message/63218</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13252</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 17:50:38 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/pull/836/commits/9aeda6998b2b7d9728fbdfca38d5dcab369273d0

Pull Request:

https://github.com/tianocore/edk2/pull/836</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2169</bug_id>
          
          <creation_ts>2019-09-09 04:36:28 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: setting key toggle state may be unsupported</short_desc>
          <delta_ts>2019-09-16 01:54:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>stephano</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9522</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-09 04:36:28 +0000</bug_when>
    <thetext>It is allowable that a system does not support
EFI_SIMPLE_TEXT_INPUT_EX_PROTOCOL.SetState(). In this case do not expect
the function to check its arguments. It will typically directly return
EFI_UNSUPPORTED.

SCT creates a false positive in 
/uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/SimpleTextInputEx/BlackBox=
Test/SimpleTextInputExBBTestConformance.c
BBTestSetStateConformanceTestCheckpoint1 ()


Patch provided as
https://edk2.groups.io/g/devel/message/46832</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9523</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-09 04:38:13 +0000</bug_when>
    <thetext>Eric, could you, please, review the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9524</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-09 04:40:05 +0000</bug_when>
    <thetext>set to in progress as patch is already provided</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9606</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-11 04:55:16 +0000</bug_when>
    <thetext>Rework of the patch requested
https://edk2.groups.io/g/devel/message/47094

Hi Heinrich,

It is reasonable to accept the EFI_UNSUPPORTED. I agree.
The patch had better adjust the StandardLib-&gt;RecordMessage to StandardLib-&gt;RecordAssertion, and the AssertionType is EFI_TEST_ASSERTION_WARNING.
It gives SCT user a chance to notice this(not silence it) to judge the issue is reasonable or not.

  if (Status == EFI_UNSUPPORTED) {
    AssertionType = EFI_TEST_ASSERTION_WARNING;
  } else {
    if ( EFI_INVALID_PARAMETER != Status) {
      AssertionType = EFI_TEST_ASSERTION_FAILED;
    } else {
      AssertionType = EFI_TEST_ASSERTION_PASSED;
    }
  }

  StandardLib-&gt;RecordAssertion (
             StandardLib,
             AssertionType,
             gSimpleTextInputExBBTestConformanceAssertionGuid003,
             L&quot;SIMPLE_TEXT_INPUT_EX_PROTOCOL.SetState - SetState() returns EFI_INVALID_PARAMETER with KeyToggleState being NULL.&quot;,
             L&quot;%a:%d: Status - %r&quot;,
             __FILE__,
             (UINTN)__LINE__,
             Status
             );

What is your opinion on this?

Best Regards
Eric</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9607</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-11 05:02:21 +0000</bug_when>
    <thetext>Hello Eric,

thanks for reviewing.

Issuing a warning is fine with me. I will update the patch.

Regard

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9623</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-11 14:47:16 +0000</bug_when>
    <thetext>Revised patch submitted:

https://edk2.groups.io/g/devel/message/47136
[edk2-test] [PATCH v2 1/1] uefi-sct/SctPkg: setting key toggle state may be unsupported</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9667</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-16 01:54:14 +0000</bug_when>
    <thetext>[edk2-test] [PATCH v2 1/1] uefi-sct/SctPkg: setting key toggle state may be unsupported 
https://edk2.groups.io/g/devel/message/47136
was merged as https://edk2.groups.io/g/devel/message/47136

https://edk2.groups.io/g/devel/message/47246</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2415</bug_id>
          
          <creation_ts>2019-12-11 19:38:03 +0000</creation_ts>
          <short_desc>CLANG38 toolchain fails to build in latest edk2</short_desc>
          <delta_ts>2020-02-06 04:14:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10679</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-12-11 19:38:03 +0000</bug_when>
    <thetext>The CLANG38 build failure as below in latest edk2. It is a regression bug and we need to fix it.

$ build -a IA32 -a X64 -p OvmfPkg/OvmfPkgIa32X64.dsc -t CLANG38
/home/jshi19/wksp_efi/edk2-fork3/NetworkPkg/Library/DxeNetLib/DxeNetLib.c:469:3: error: &apos;va_start&apos; used in Win64 ABI function
  VA_START (Marker, Format);
  ^
/home/jshi19/wksp_efi/edk2-fork3/MdePkg/Include/Base.h:659:38: note: expanded from macro &apos;VA_START&apos;
#define VA_START(Marker, Parameter)  __builtin_va_start (Marker, Parameter)
                                     ^
1 error generated.
make: *** [/home/jshi19/wksp_efi/edk2-fork3/Build/Ovmf3264/DEBUG_CLANG38/X64/NetworkPkg/Library/DxeNetLib/DxeNetLib/OUTPUT/DxeNetLib.obj] Error 1
GNUmakefile:306: recipe for target &apos;/home/jshi19/wksp_efi/edk2-fork3/Build/Ovmf3264/DEBUG_CLANG38/X64/NetworkPkg/Library/DxeNetLib/DxeNetLib/OUTPUT/DxeNetLib.obj&apos; failed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10680</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-12-11 19:39:25 +0000</bug_when>
    <thetext>Assign to Zhiguang</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11048</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-03 01:32:05 +0000</bug_when>
    <thetext>The fix solution is to append -DNO_MSABI_VA_FUNCS option in CLANGPDB tool chain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11122</commentid>
    <comment_count>3</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-02-06 04:14:36 +0000</bug_when>
    <thetext>Fixed at 21821933aea284cd3dfea6994bd4b83bd9739fc9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2771</bug_id>
          
          <creation_ts>2020-05-28 02:58:34 +0000</creation_ts>
          <short_desc>Remove deprecated packages in bugzilla Package field for &quot;Edk2&quot; product</short_desc>
          <delta_ts>2020-06-23 18:16:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>StdLibPrivateInternalFiles</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12754</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-05-28 02:58:34 +0000</bug_when>
    <thetext>Edk2 repo has removed some packages and moved some packages to edk2-platform repo. Submit this bugz to request to update Bugzilla system &quot;Package&quot; field for &quot;edk2 bug&quot; page.

Remove below packages:
1. AppPkg
2. BeagleBoardPkg
3. EdkShellPkg
4. IntelSiliconPkg
5. Omap35xxPkg
6. OptionRomPkg
7. PerformancePkg
8. QuarkPlatformPkg
9. QuarkSocPkg
10. StdLib
11. StdLibPrivateInternalFiles
12. Vlv2DeviceRefCodePkg
13. Vlv2TbltDevicePkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12776</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-02 21:57:07 +0000</bug_when>
    <thetext>confirmed this is an issue for the system now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12936</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-23 18:16:25 +0000</bug_when>
    <thetext>Updating Field Values -&gt; Package list and un-checking &quot;Enabled for bugs&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12937</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-23 18:16:46 +0000</bug_when>
    <thetext>All requested packaged disabled for bugs</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2197</bug_id>
          
          <creation_ts>2019-09-17 01:05:14 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: SNP ReceiveFilters may be unsupported</short_desc>
          <delta_ts>2019-10-08 05:49:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>stephano</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9692</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-17 01:05:14 +0000</bug_when>
    <thetext>If EFI_SIMPLE_NETWORK.ReceiveFilters() is not supported, it will return
EFI_UNSUPPORTED. In this case do not expect input parameters to be checked
for conformance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9693</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-17 01:11:54 +0000</bug_when>
    <thetext>Patch suggested:

[PATCH 1/1] uefi-sct/SctPkg: SNP ReceiveFilters may be unsupported
https://edk2.groups.io/g/devel/message/47338</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9871</commentid>
    <comment_count>2</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-29 03:48:00 +0000</bug_when>
    <thetext>(In reply to Heinrich Schuchardt from comment #1)
&gt; Patch suggested:
&gt; 
&gt; [PATCH 1/1] uefi-sct/SctPkg: SNP ReceiveFilters may be unsupported
&gt; https://edk2.groups.io/g/devel/message/47338

Hi Heinrich,

Could you please send this patch to devel@edk2.groups.io for review? Thanks.

Best Regards
Eric</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9874</commentid>
    <comment_count>3</comment_count>
      <attachid>415</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-29 05:58:37 +0000</bug_when>
    <thetext>Created attachment 415
[edk2-devel] [PATCH 1/1] uefi-sct/SctPkg: SNP ReceiveFilters may be unsupported</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9875</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-29 06:01:01 +0000</bug_when>
    <thetext>&gt;&gt; Could you please send this patch to devel@edk2.groups.io for review? Thanks.

That is exactly what I did on September 17th as you can see at 
https://edk2.groups.io/g/devel/message/47338

I have attached the original mail to this incident.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9935</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-10-08 05:49:37 +0000</bug_when>
    <thetext>Patch was merged:

3d98de052fcd47f187190802e6201ac6aaabfda7
uefi-sct/SctPkg: SNP ReceiveFilters may be unsupported</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>415</attachid>
            <date>2019-09-29 05:58:37 +0000</date>
            <delta_ts>2019-09-29 05:58:37 +0000</delta_ts>
            <desc>[edk2-devel] [PATCH 1/1] uefi-sct/SctPkg: SNP ReceiveFilters may be unsupported</desc>
            <filename>[edk2-devel] [PATCH 1_1] uefi-sct_SctPkg: SNP ReceiveFilters may be unsupported.eml</filename>
            <type>text/plain</type>
            <size>18843</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2082</bug_id>
          
          <creation_ts>2019-08-13 21:37:50 +0000</creation_ts>
          <short_desc>Add silicon initialization code for Intel Coffee Lake and Intel Whiskey Lake products</short_desc>
          <delta_ts>2019-08-20 00:08:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8989</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-13 21:37:50 +0000</bug_when>
    <thetext>To implement open source platform code for Intel Coffee Lake and Intel Whiskey Lake products, a silicon support package is needed so that it may be used in conjunction with the Intel FSP in CoffeeLakeFspBinPkg (https://github.com/IntelFsp/FSP/tree/master/CoffeeLakeFspBinPkg) similar to the silicon support provided for Intel Kaby Lake generation products by KabylakeSiliconPkg (https://github.com/tianocore/edk2-platforms/tree/master/Silicon/Intel/KabylakeSiliconPkg).

The name of this package should be CoffeelakeSiliconPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8993</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-13 21:47:43 +0000</bug_when>
    <thetext>Work is in progress to submit this package</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9046</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-16 20:29:57 +0000</bug_when>
    <thetext>CoffeelakeSiliconBinPkg is submitted to edk2-non-osi: https://github.com/tianocore/edk2-non-osi/commit/d118e88cda45add7e653107cb5fb6af3b61b0acd.

The CoffeelakeSiliconPkg patch series has been sent out to the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9082</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-20 00:08:52 +0000</bug_when>
    <thetext>Completed in the following commits:

1. ef64358abda360a3a445263da67404f8fbbab98f
2. b3d46816ca7c308eddcdc73ef6268f6ea4636d57
3. 2efcb3c553f03a0ee168a3e49e40e68e051fdcf7
4. 33b84b04ae0b0ebf2227d071b4e7cabd0f7b64b7
5. 6dcf8d9061f801cbbbf802c9bf10cf2c845ca90b
6. 56f0a6ce0c793327328040499a3fdabb2c7d8ade
7. 8e7609c307269d799c8d3abf5ad1af116486c534
8. bfcee72e3af6c646c52982ef495c05539d2255a5
9. 90acbd7f51b704993f010095add398e27172d2d5
10. 637e7fde8830bbabffe85631c8c871d9a9657ae9
11. 80e456ad655f42540467820487a1a81a67d430d5
12. c0f45de115786b9d9bea6cf15dd1c93a3ab03060
13. a68c80e923e9cd2d8727c3128bd561812a46f998
14. bcd1566526c16accc8b72136b30a9620108a0d18
15. 658a52b89f5082ea51d4e6f8b05a2ea0b27e57e1
16. 65a995c4938dfa731ef8bfe4785eb67b19be2041
17. f8d58504e4b8c595bca80220983f7d6f75bc387c
18. 78a45589c2333c4a58f76b528977f9154715d252
19. 62b3651f45e38b704a027dd81e95257c5d473184
20. 03ccaf8007b46fd11ea89d54c0782e2445788119
21. 144436fb78f4b1ed6c7605097bceed01e77557b3
22. 45c7601cd0d4e7e8d8bcfd45ad0f6b719682cf00
23. 3fa0f2dabc81d61442041237a5f6ad065f9bb2de
24. 17f047154203c73065dcdad8b6a2c59460bf2f53
25. f86ee306187afa68e8cc3f86c992fc11d24abbab
26. 164e5cff093c3dd017b1144e482456172f2488e5
27. 1cb175e76a32bd7b28fd307982fdb0d07e7cfb25
28. ffebc5c27d546e46c2050e62c17aa11edce49aee
29. 5b0b3080fa75d326b1f4e30192e9060e4ec29526</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2438</bug_id>
          
          <creation_ts>2019-12-28 10:26:24 +0000</creation_ts>
          <short_desc>RandomNumberBBTestConformance does not check size &gt; 0</short_desc>
          <delta_ts>2020-09-16 01:38:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Edhay">edhaya.chandran</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10758</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-12-28 10:26:24 +0000</bug_when>
    <thetext>The EFI_RNG_PROTOCOL conformance test checks that the the size returned by GetInfo() is a multiple of 16. This would be fulfilled by size == 0.

The UEFI specification requires that at least one algorithm is implemented. So we should check that size is non-zero too.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10759</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-12-28 10:39:23 +0000</bug_when>
    <thetext>Patch provided:

https://edk2.groups.io/g/devel/message/52599</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13687</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-09-16 01:38:00 +0000</bug_when>
    <thetext>Patch merged:

uefi-sct/SctPkg: EFI_RNG_PROTOCOL.GetInfo check size != 0 
https://github.com/tianocore/edk2-test/commit/fbff897cbb92a2b41579e549d0e5b7794c48cb7a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2675</bug_id>
          
          <creation_ts>2020-04-17 05:04:38 +0000</creation_ts>
          <short_desc>OvmfPkg: clean up Libary/ResetSystemLib</short_desc>
          <delta_ts>2020-04-22 16:36:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>rebecca</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12229</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-17 05:04:38 +0000</bug_when>
    <thetext>As of commit a7947b6366a6, OvmfPkg/Library/ResetSystemLib needs some serious scrubbing, so that it can be *cleanly* extended for bhyve support. However, cleaning up the existent warts is a good thing in its own right. The list of problems is not listed at once in this bug report, because I&apos;ll collect and fix them as I go through the necessary patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12230</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-17 05:05:01 +0000</bug_when>
    <thetext>working on patches</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12233</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-17 11:39:29 +0000</bug_when>
    <thetext>Posted

[edk2-devel] [PATCH 0/6] OvmfPkg/ResetSystemLib: clean up, refactor, fix
https://edk2.groups.io/g/devel/message/57516
http://mid.mail-archive.com/20200417153751.7110-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12282</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-22 15:35:46 +0000</bug_when>
    <thetext>One issue worth mentioning that the series fixes is the PciRead16() call
in AcpiPmControl() [OvmfPkg/Library/ResetSystemLib/ResetSystemLib.c].
This is not safe in a runtime driver, because on q35, PCI config space
is accessed with ECAM, and that would require the firmware to instruct
the OS to runtime-map the MMCONFIG area. But OVMF doesn&apos;t do that.

This is addressed in the last (6th) patch of the series (comment 2).

The bug is not easy to trigger in common setups, because e.g. the Linux
guest cannot easily be convinced to use the EFI runtime service for
poweroff. One way to trigger the bug is to

(a) modify ResetCold() so that it calls ResetShutdown() first (i.e.,
hook AcpiPmControl() -&gt; PciRead16() into ResetCold()),

(b) boot a Linux guest with &quot;reboot=efi&quot;, on q35, and

(c) reboot the guest with the &quot;reboot&quot; command.

Then the guest kernel will log:

&gt;| reboot: Restarting system
&gt;| reboot: machine restart
&gt;| ------------[ cut here ]------------
&gt;| [Firmware Bug]: Page fault caused by firmware at PA: 0xb0000002
&gt;| WARNING: CPU: 0 PID: 1362 at arch/x86/platform/efi/quirks.c:738
&gt;| efi_recover_from_page_fault+0x2a/0xc8
&gt;| Modules linked in: ip_set nfnetlink sunrpc vfat fat intel_rapl_msr
&gt;| intel_rapl_common kvm_intel kvm irqbypass crct10dif_pclmul crc32_pclmul
&gt;| bochs_drm drm_vram_helper ttm ghash_clmulni_intel drm_kms_helper
&gt;| iTCO_wdt iTCO_vendor
&gt;| CPU: 0 PID: 1362 Comm: reboot Not tainted 5.3.6-200.fc30.x86_64 #1
&gt;| Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 0.0.0
&gt;| 02/06/2015
&gt;| RIP: 0010:efi_recover_from_page_fault+0x2a/0xc8
&gt;| Code: 0f 1f 44 00 00 8b 15 35 c2 c1 01 85 d2 74 09 48 81 ff ff 0f 00 00
&gt;| 77 01 c3 53 48 89 fe 48 c7 c7 58 ba 12 aa 50 e8 74 f0 00 00 &lt;0f&gt; 0b 83
&gt;| 3d 0d c2 c1 01 0a 0f 84 8f 00 00 00 48 8b 05 70 c8 4a 01
&gt;| RSP: 0018:ffffaf3a402539d8 EFLAGS: 00010286
&gt;| RAX: 0000000000000000 RBX: ffff8a3c33711f40 RCX: 00000000000003b2
&gt;| RDX: 0000000000000001 RSI: 0000000000000096 RDI: 0000000000000246
&gt;| RBP: ffffaf3a40253a88 R08: 0000000000000000 R09: 00000000000003b2
&gt;| R10: 0000000000000001 R11: ffffffffa9ee3800 R12: 00000000b0000002
&gt;| R13: 0000000000000000 R14: 000000000000000b R15: 0000000000000001
&gt;| FS:  00007fbca9cf8940(0000) GS:ffff8a3c3ae00000(0000)
&gt;| knlGS:0000000000000000
&gt;| CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
&gt;| CR2: fffffffeff8a67a1 CR3: 0000000072868006 CR4: 00000000001606f0
&gt;| Call Trace:
&gt;|  no_context+0x15b/0x380
&gt;|  ? do_user_addr_fault+0x12e/0x440
&gt;|  do_page_fault+0x31/0x110
&gt;|  async_page_fault+0x3e/0x50
&gt;| RIP: 0010:0xfffffffeff8a67a1
&gt;| Code: Bad RIP value.
&gt;| RSP: 0018:ffffaf3a40253b30 EFLAGS: 00010046
&gt;| RAX: 00000000b0000002 RBX: 0000000000000000 RCX: 00000000b0000002
&gt;| RDX: 00000000b0000000 RSI: 0000000000000000 RDI: fffffffeff8a80f0
&gt;| RBP: ffffaf3a40253b60 R08: fffffffeff8aadb8 R09: 0000000000000000
&gt;| R10: ffffffffaa5762c0 R11: ffffffffa9ee3800 R12: 0000000000000000
&gt;| R13: 0000000000000000 R14: 0000000000000046 R15: 0000000000000000
&gt;|  ? efi_call+0x58/0x90
&gt;|  ? virt_efi_reset_system+0x8d/0x100
&gt;|  ? efi_reboot+0x85/0xb8
&gt;|  ? native_machine_emergency_restart+0x9f/0x250
&gt;|  ? native_apic_msr_read+0x16/0x20
&gt;|  ? disconnect_bsp_APIC+0x8c/0xd0
&gt;|  ? __do_sys_reboot+0x1d2/0x210
&gt;|  ? __fput+0x168/0x250
&gt;|  ? do_writev+0x6b/0x110
&gt;|  ? do_syscall_64+0x5f/0x1a0
&gt;|  ? entry_SYSCALL_64_after_hwframe+0x44/0xa9
&gt;| ---[ end trace d5bee708166d198b ]---
&gt;| efi: efi_reset_system() buggy! Reboot through BIOS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12283</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-22 16:36:10 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; Posted
&gt; 
&gt; [edk2-devel] [PATCH 0/6] OvmfPkg/ResetSystemLib: clean up, refactor, fix
&gt; https://edk2.groups.io/g/devel/message/57516
&gt; http://mid.mail-archive.com/20200417153751.7110-1-lersek@redhat.com

Merged as commit range c6a60cf4b990..93f6df5f3b25, via &lt;https://github.com/tianocore/edk2/pull/538&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2345</bug_id>
          
          <creation_ts>2019-11-15 09:47:28 +0000</creation_ts>
          <short_desc>spelling mistake &quot;atttributes&quot; should be &quot;attributes&quot; (too may t&apos;s)</short_desc>
          <delta_ts>2020-08-03 13:29:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10456</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-15 09:47:28 +0000</bug_when>
    <thetext>Spelling mistake in BaseTools/Source/C/GenSec/GenSec.c:

  fprintf (stdout, &quot;  -r GuidAttr, --attributes GuidAttr\n\^M
                        GuidAttr is guid section atttributes, which may be\n\^M

too many t&apos;s in atttributes</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13292</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 21:25:16 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13293</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 21:25:39 +0000</bug_when>
    <thetext>Patch review

https://edk2.groups.io/g/devel/message/63616</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13303</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-08-03 13:29:49 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/c3d92cff58e4978a500e85f466e5c0e055aa33c2

Pull Request

https://github.com/tianocore/edk2/pull/850</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2810</bug_id>
          
          <creation_ts>2020-06-16 14:44:18 +0000</creation_ts>
          <short_desc>Allow OpenSSL config to support elliptic curve algorithms</short_desc>
          <delta_ts>2020-07-14 14:49:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2424</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12898</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-06-16 14:44:18 +0000</bug_when>
    <thetext>To support TLS1.3 we need elliptic curve algorithms in OpenSSl. A tweak to process_files.pl enables this</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12996</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-30 22:14:19 +0000</bug_when>
    <thetext>How about include this request into TLS1.3 support?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13102</commentid>
    <comment_count>2</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-07-14 14:49:54 +0000</bug_when>
    <thetext>I think this is part of https://bugzilla.tianocore.org/show_bug.cgi?id=2424

*** This bug has been marked as a duplicate of bug 2424 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2241</bug_id>
          
          <creation_ts>2019-10-03 17:56:09 +0000</creation_ts>
          <short_desc>UefiPayloadPkg does not support PS/2 keyboard</short_desc>
          <delta_ts>2022-01-14 17:33:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Greg V [:myfreeweb]">edk</reporter>
          <assigned_to name="dong_guo@126.com">guo.dong</assigned_to>
          <cc>crawfxrd</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9918</commentid>
    <comment_count>0</comment_count>
    <who name="Greg V [:myfreeweb]">edk</who>
    <bug_when>2019-10-03 17:56:09 +0000</bug_when>
    <thetext>Many Coreboot devices — especially laptops — (still) use PS/2 keyboards. UefiPayloadPkg does not support PS/2.

With the whole IntelFrameworkModulePkg removal thing, it&apos;s no longer possible to simply add PS/2 support like:

https://github.com/MrChromebox/edk2/commit/26701efc1deecb1a9c4263d8bb4db2765d6dd65b

I&apos;ve tried to revert aa7fc1c11c3d57d82842dbede50d064639671a98 87fc0601fa9a98d5f86a81fc20d2cc8ef936e064 c78008b4b29527f40a98f8da0022e9f55559fdd6 and add these, but that didn&apos;t work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9922</commentid>
    <comment_count>1</comment_count>
    <who name="Greg V [:myfreeweb]">edk</who>
    <bug_when>2019-10-05 13:59:52 +0000</bug_when>
    <thetext>aha! I got it to work with the OvmfPkg stuff.

OvmfPkg/SioBusDxe/SioBusDxe.inf + MdeModulePkg/Bus/Isa/Ps2KeyboardDxe/Ps2KeyboardDxe.inf + &quot;Register Keyboard&quot; block in UefiPayloadPkg/Library/PlatformBootManagerLib/PlatformConsole.c before &quot;Register COM1&quot; - copied from OvmfPkg/Library/PlatformBootManagerLib/BdsPlatform.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10073</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:31:15 +0000</bug_when>
    <thetext>Please have a look and see if PS/2 support is something that we can easily integrate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10279</commentid>
    <comment_count>3</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2019-11-01 14:06:35 +0000</bug_when>
    <thetext>Thanks for the comments. will take a look at this requirement to add PS2 keyboard in UEFI payload.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11027</commentid>
    <comment_count>4</comment_count>
    <who name="Tim Crawford">crawfxrd</who>
    <bug_when>2020-01-30 12:27:15 +0000</bug_when>
    <thetext>Is this resolved with https://github.com/tianocore/edk2/pull/264?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11028</commentid>
    <comment_count>5</comment_count>
    <who name="Greg V [:myfreeweb]">edk</who>
    <bug_when>2020-01-30 12:46:29 +0000</bug_when>
    <thetext>(In reply to Tim Crawford from comment #4)
&gt; Is this resolved with https://github.com/tianocore/edk2/pull/264?

Let&apos;s say.. yes.

I do wish it was enabled by default though — it&apos;s not true that &quot;PS2 keyboard is not common used&quot;, many laptops supported by Coreboot have PS/2 keyboards — but whatever.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11029</commentid>
    <comment_count>6</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2020-01-30 12:57:03 +0000</bug_when>
    <thetext>Yes. this issue was addressed by  https://github.com/tianocore/edk2/pull/264.
User could build UEFI payload with -D PS2_KEYBOARD_ENABLE for PS2 keyboard support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18149</commentid>
    <comment_count>7</comment_count>
    <who name="dong_guo@126.com">guo.dong</who>
    <bug_when>2022-01-14 17:33:47 +0000</bug_when>
    <thetext>I think we could close this issue since patch was merged and user has a way to build with PS2 support without changing any UEFI payload files.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2698</bug_id>
          
          <creation_ts>2020-04-29 21:32:42 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: Support Multi-Phase silicon initialization and debug handlers.</short_desc>
          <delta_ts>2020-05-27 04:30:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12355</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-04-29 21:32:42 +0000</bug_when>
    <thetext>To enhance FSP silicon initialization flexibility an optional Multi-Phase API is introduced and FSP header needs update for new API offset.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12356</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-04-29 21:33:07 +0000</bug_when>
    <thetext>Will send code review for this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12440</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-05-07 00:31:44 +0000</bug_when>
    <thetext>Besides Multi-Phase SiInit API, there is also new ARCH_UPD for bootloader to provide debug handler function pointer to handle FSP debug message.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12519</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-05-18 22:12:36 +0000</bug_when>
    <thetext>SHA-1: f2cdb268ef04eeec51948b5d81eeca5cab5ed9af

* IntelFsp2Pkg: Support Multi-Phase SiInit and debug handlers.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2698

To enhance FSP silicon initialization flexibility an optional
Multi-Phase API is introduced and FSP header needs update for
new API offset. Also new SecCore module created for
FspMultiPhaseSiInit API

New ARCH_UPD introduced for enhancing FSP debug message
flexibility now bootloader can pass its own debug handler
function pointer and FSP will call the function to handle
debug message.
To support calling bootloader functions, a FspGlobalData field
added to indicate if FSP needs to switch stack when FSP running
on separate stack from bootloader.

Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Cc: Star Zeng &lt;star.zeng@intel.com&gt;
Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2125</bug_id>
          
          <creation_ts>2019-08-23 14:57:53 +0000</creation_ts>
          <short_desc>[IGNORE] find a way for preventing Bugzilla from wrapping code snippets</short_desc>
          <delta_ts>2019-08-23 15:16:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9217</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 14:57:53 +0000</bug_when>
    <thetext>Sometimes I&apos;d like to paste code snippets or patch hunks in bugzilla
comments. The TianoCore Bugzilla wraps them, which is wrong. The Red Hat
Bugzilla instance has a bunch of downstream customizations on top of
upstream bugzilla 5.0.4. I don&apos;t think the TianoCore community would
like to maintain such bugzilla customizations, hence it would be great
to find a pattern that lets us paste code / patch snippets / ASCII
diagrems without auto-wrapping. Otherwise, the auto-wrapping is quite
beneficial.

I&apos;ve experimented with two options thus far.

- Inserting &quot;&gt; &quot; (= email quoting) at the front of every line. That&apos;s
not good enough because empty lines break up the full quote into
multiple segments.

&gt; line 1
&gt; line 2
&gt;
&gt; line 4
&gt; line 5

This is quite sad as this style of quoting is supposed to disable
wrapping, otherwise.

- using &quot;|&quot; (pipe sign) rather than &quot;&gt;&quot;. This does not suffer from the
empty line breakage, but it does not prevent wrapping on display.

| diff --git a/OvmfPkg/OvmfXen.dsc b/OvmfPkg/OvmfXen.dsc
| index 5e07b372797f..5a31f75f05d0 100644
| --- a/OvmfPkg/OvmfXen.dsc
| +++ b/OvmfPkg/OvmfXen.dsc
| @@ -199,6 +199,7 @@ [LibraryClasses]
|
|    Tcg2PhysicalPresenceLib|OvmfPkg/Library/Tcg2PhysicalPresenceLibNull/DxeTcg2PhysicalPresenceLib.inf
|    TpmMeasurementLib|MdeModulePkg/Library/TpmMeasurementLibNull/TpmMeasurementLibNull.inf
| +  RealTimeClockLib|OvmfPkg/Library/XenRealTimeClockLib/XenRealTimeClockLib.inf
|
|  [LibraryClasses.common]
|    BaseCryptLib|CryptoPkg/Library/BaseCryptLib/BaseCryptLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9218</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 15:00:15 +0000</bug_when>
    <thetext>What if I combine both tricks? Use &quot;&gt; &quot; at the left, for triggering
quote recognition (i.e., to disable wrapping), and place &quot;|&quot; right
after, for preventing empty lines from breaking up the quote.

&gt; | diff --git a/OvmfPkg/OvmfXen.dsc b/OvmfPkg/OvmfXen.dsc
&gt; | index 5e07b372797f..5a31f75f05d0 100644
&gt; | --- a/OvmfPkg/OvmfXen.dsc
&gt; | +++ b/OvmfPkg/OvmfXen.dsc
&gt; | @@ -199,6 +199,7 @@ [LibraryClasses]
&gt; |
&gt; |    Tcg2PhysicalPresenceLib|OvmfPkg/Library/Tcg2PhysicalPresenceLibNull/DxeTcg2PhysicalPresenceLib.inf
&gt; |    TpmMeasurementLib|MdeModulePkg/Library/TpmMeasurementLibNull/TpmMeasurementLibNull.inf
&gt; | +  RealTimeClockLib|OvmfPkg/Library/XenRealTimeClockLib/XenRealTimeClockLib.inf
&gt; |
&gt; |  [LibraryClasses.common]
&gt; |    BaseCryptLib|CryptoPkg/Library/BaseCryptLib/BaseCryptLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9219</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 15:02:40 +0000</bug_when>
    <thetext>Heh, this worked :) If only I could disable that ugly scroll bar and let
the width extend to the full browser window width. Oh well.

Next, let me see if I can remove the space character from &quot;&gt; |&quot;.

&gt;| diff --git a/OvmfPkg/OvmfXen.dsc b/OvmfPkg/OvmfXen.dsc
&gt;| index 5e07b372797f..5a31f75f05d0 100644
&gt;| --- a/OvmfPkg/OvmfXen.dsc
&gt;| +++ b/OvmfPkg/OvmfXen.dsc
&gt;| @@ -199,6 +199,7 @@ [LibraryClasses]
&gt;|
&gt;|    Tcg2PhysicalPresenceLib|OvmfPkg/Library/Tcg2PhysicalPresenceLibNull/DxeTcg2PhysicalPresenceLib.inf
&gt;|    TpmMeasurementLib|MdeModulePkg/Library/TpmMeasurementLibNull/TpmMeasurementLibNull.inf
&gt;| +  RealTimeClockLib|OvmfPkg/Library/XenRealTimeClockLib/XenRealTimeClockLib.inf
&gt;|
&gt;|  [LibraryClasses.common]
&gt;|    BaseCryptLib|CryptoPkg/Library/BaseCryptLib/BaseCryptLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9220</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 15:04:33 +0000</bug_when>
    <thetext>Awesome, the &quot;&gt;| &quot; prefix works too, not just &quot;&gt; | &quot;.

What happens if we quote such a comment?

(In reply to Laszlo Ersek from comment #2)
&gt; &gt;| diff --git a/OvmfPkg/OvmfXen.dsc b/OvmfPkg/OvmfXen.dsc
&gt; &gt;| index 5e07b372797f..5a31f75f05d0 100644
&gt; &gt;| --- a/OvmfPkg/OvmfXen.dsc
&gt; &gt;| +++ b/OvmfPkg/OvmfXen.dsc
&gt; &gt;| @@ -199,6 +199,7 @@ [LibraryClasses]
&gt; &gt;|
&gt; &gt;|    Tcg2PhysicalPresenceLib|OvmfPkg/Library/Tcg2PhysicalPresenceLibNull/DxeTcg2PhysicalPresenceLib.inf
&gt; &gt;|    TpmMeasurementLib|MdeModulePkg/Library/TpmMeasurementLibNull/TpmMeasurementLibNull.inf
&gt; &gt;| +  RealTimeClockLib|OvmfPkg/Library/XenRealTimeClockLib/XenRealTimeClockLib.inf
&gt; &gt;|
&gt; &gt;|  [LibraryClasses.common]
&gt; &gt;|    BaseCryptLib|CryptoPkg/Library/BaseCryptLib/BaseCryptLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9221</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 15:05:34 +0000</bug_when>
    <thetext>Pretty good. I&apos;ll use &quot;&gt;| &quot; for pasting code, ASCII diagrams, and diff hunks, in the future. Closing this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9222</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 15:12:25 +0000</bug_when>
    <thetext>Is it still readable if I use &quot;&gt;|&quot; rather than &quot;&gt;| &quot;?

&gt;| diff --git a/OvmfPkg/OvmfXen.dsc b/OvmfPkg/OvmfXen.dsc
&gt;| index 5e07b372797f..5a31f75f05d0 100644
&gt;| --- a/OvmfPkg/OvmfXen.dsc
&gt;| +++ b/OvmfPkg/OvmfXen.dsc
&gt;| @@ -199,6 +199,7 @@ [LibraryClasses]
&gt;|
&gt;|    Tcg2PhysicalPresenceLib|OvmfPkg/Library/Tcg2PhysicalPresenceLibNull/DxeTcg2PhysicalPresenceLib.inf
&gt;|    TpmMeasurementLib|MdeModulePkg/Library/TpmMeasurementLibNull/TpmMeasurementLibNull.inf
&gt;| +  RealTimeClockLib|OvmfPkg/Library/XenRealTimeClockLib/XenRealTimeClockLib.inf
&gt;|
&gt;|  [LibraryClasses.common]
&gt;|    BaseCryptLib|CryptoPkg/Library/BaseCryptLib/BaseCryptLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9223</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 15:12:55 +0000</bug_when>
    <thetext>OK, let me try that again...

&gt;|diff --git a/OvmfPkg/OvmfXen.dsc b/OvmfPkg/OvmfXen.dsc
&gt;|index 5e07b372797f..5a31f75f05d0 100644
&gt;|--- a/OvmfPkg/OvmfXen.dsc
&gt;|+++ b/OvmfPkg/OvmfXen.dsc
&gt;|@@ -199,6 +199,7 @@ [LibraryClasses]
&gt;|
&gt;|   Tcg2PhysicalPresenceLib|OvmfPkg/Library/Tcg2PhysicalPresenceLibNull/DxeTcg2PhysicalPresenceLib.inf
&gt;|   TpmMeasurementLib|MdeModulePkg/Library/TpmMeasurementLibNull/TpmMeasurementLibNull.inf
&gt;|+  RealTimeClockLib|OvmfPkg/Library/XenRealTimeClockLib/XenRealTimeClockLib.inf
&gt;|
&gt;| [LibraryClasses.common]
&gt;|   BaseCryptLib|CryptoPkg/Library/BaseCryptLib/BaseCryptLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9224</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 15:16:06 +0000</bug_when>
    <thetext>Hmmm. Not quite sure. The look in comment 5 feels more familiar.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2491</bug_id>
          
          <creation_ts>2020-01-29 13:52:16 +0000</creation_ts>
          <short_desc>Issue in AutoGen.py splitting filename and extension</short_desc>
          <delta_ts>2020-05-08 03:29:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ajay Iyengar">aiyengar</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11000</commentid>
    <comment_count>0</comment_count>
    <who name="Ajay Iyengar">aiyengar</who>
    <bug_when>2020-01-29 13:52:16 +0000</bug_when>
    <thetext>When trying to split the filename into base filename and extension, split(&apos;.s&apos;) will split the filename at all locations where &quot;.s&quot; is located. So if you have a file name like &quot;foo.sbar.s&quot; then split(&apos;.s&apos;) will return [&apos;foo&apos;, &apos;bar&apos;, &apos;&apos;]. What we really want is to split it up so that the filename is without the actual extension. The correct way to do that is to call os.path.splitext(). This will correctly return (&apos;foo.sbar&apos;, &apos;.s&apos;)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11001</commentid>
    <comment_count>1</comment_count>
    <who name="Ajay Iyengar">aiyengar</who>
    <bug_when>2020-01-29 14:03:12 +0000</bug_when>
    <thetext>The following in class ModuleAutoGen(AutoGen):
key = SingleFile.Path.split(SingleFile.Ext)[0]

could be updated to:
key,ext = path.splitext(SingleFile.Path)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11140</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 20:23:08 +0000</bug_when>
    <thetext>reasonable change in Basetools.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11619</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-08 22:54:36 +0000</bug_when>
    <thetext>Assign Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12449</commentid>
    <comment_count>4</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-05-08 03:29:13 +0000</bug_when>
    <thetext>This error will not occur; it has been fixed before
Here is the current code:
key = SingleFile.Path.rsplit(SingleFile.Ext,1)[0]</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2363</bug_id>
          
          <creation_ts>2019-11-19 21:17:25 +0000</creation_ts>
          <short_desc>Basetool: Missing IMAGE= in the platform .map file</short_desc>
          <delta_ts>2019-11-29 01:47:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10479</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-11-19 21:17:25 +0000</bug_when>
    <thetext>The line of IMAGE=*** is missing in platform .map file.
For example, in Ovmf.map, there is no line of (IMAGE= ) under each of modules item.
This is a regression issue.

SecMain (Fixed Flash Address, BaseAddress=0x00fffcc094, EntryPoint=0x00fffcc314)
(GUID=DF1CCEF6-F301-4A63-9661-FC6030DCC880 .textbaseaddress=0x00fffcc314 .databaseaddress=0x00fffd16d4)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10480</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-11-19 21:18:45 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10583</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-29 01:47:24 +0000</bug_when>
    <thetext>Fix at e0f8261ad02217fa8ed57c95c379c2fc8fd67210</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2841</bug_id>
          
          <creation_ts>2020-07-06 01:30:06 +0000</creation_ts>
          <short_desc>Add capability to let PEIM extend TcgEvent</short_desc>
          <delta_ts>2020-08-14 01:42:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to name="qi1.zhang@intel.com">qi1.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13049</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-07-06 01:30:06 +0000</bug_when>
    <thetext>Currently, we have TCG/TCG2 protocol and DxeTpmMeasurementLib to let DXE module extend the TCG event.

There is more and more use case in PEI phase that a PEIM need extend TCG event, such as BootGuard, FSP, Microcode measurement. Currently, we dont have API to do that so that each module need create TCG/TCG2 event log, which is a burden.

This bugzilla requests to add PeiTpmMeasurementLib instance.

The implementation includes:
1) A EDKII_TCG_PPI which abstracts the HashLogExtendEvent service.
2) A PeiTpmMeasurementLib instance, so that a PEIM can call this API to add TCG event.
3) Add more API in TpmMeasurementLib, such as MeasureFirmwareBlob, MeasureHandoffTable for TPM PFP rev 105 support - add description for the FirmwareBlob and HandoffTable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13050</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-07-06 01:33:32 +0000</bug_when>
    <thetext>Sample implementation is at https://github.com/jyao1/edk2/tree/FspManifest</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13055</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-07-07 21:40:31 +0000</bug_when>
    <thetext>Reasonable request</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13107</commentid>
    <comment_count>3</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-07-14 20:31:14 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/62486</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13118</commentid>
    <comment_count>4</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-07-16 20:44:13 +0000</bug_when>
    <thetext>v2:
https://edk2.groups.io/g/devel/message/62693</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13125</commentid>
    <comment_count>5</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-07-19 22:50:30 +0000</bug_when>
    <thetext>v4:
https://edk2.groups.io/g/devel/message/62759</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13151</commentid>
    <comment_count>6</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-07-21 22:43:16 +0000</bug_when>
    <thetext>Move this requirement to https://bugzilla.tianocore.org/show_bug.cgi?id=2376

3) Add more API in TpmMeasurementLib, such as MeasureFirmwareBlob, MeasureHandoffTable for TPM PFP rev 105 support - add description for the FirmwareBlob and HandoffTable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13162</commentid>
    <comment_count>7</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-07-22 21:46:34 +0000</bug_when>
    <thetext>check in b630feee025564f794599f1f514aa4ac7f0a0c63..b87f31f034340c73ca072b65386f58c8ca1bc87b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13398</commentid>
    <comment_count>8</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-14 01:42:08 +0000</bug_when>
    <thetext>This belongs to new feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2258</bug_id>
          
          <creation_ts>2019-10-09 19:49:38 +0000</creation_ts>
          <short_desc>FEATURE: Add TlsLibNull so dependent packages can compile faster</short_desc>
          <delta_ts>2019-10-23 17:53:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9983</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 19:49:38 +0000</bug_when>
    <thetext>https://github.com/spbrogan/edk2/commit/d30ac75aa7739de8e5eeafb26ecb9b2a7cd93d4e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10066</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:24:52 +0000</bug_when>
    <thetext>All these errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10174</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 16:39:59 +0000</bug_when>
    <thetext>Why are the following 2 lines required in CryptoPkg/Library/TlsLibNull/InternalTlsLib.h?

#undef _WIN32
#undef _WIN64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10175</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 16:41:13 +0000</bug_when>
    <thetext>This Null library instance can also be used as a template for new implementations of the TlsLib class.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10176</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 17:08:46 +0000</bug_when>
    <thetext>Is there a reason that this new lib instance can not be type BASE and support all module types?

Most of the APIs in the patch provided have an ASSERT (FALSE) statement.  A few do not.  Is that on purpose?  What is the reason for not having an ASSERT (FALSE) for every API in the TlsLib class?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10177</commentid>
    <comment_count>5</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-22 17:21:18 +0000</bug_when>
    <thetext>The undef in the internal header file is based on the real lib instance.  This change goes way back to 2007 and we have noticed issues with openssl building on Windows without this.  Since this is a null lib it probably doesn&apos;t need that but i have not tested if any of the included headers have issues. 

As for the type.  I agree make it base.  There is no caller other than DXE today but it should be of type base.  

On the inconsistent usage of ASSERT it should be cleaned up. 

I am can have my team do these changes and provide a new commit but they are pretty trivial and you probably already have the changes made.  Let me know. 

Thanks
Sean</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10178</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 17:40:03 +0000</bug_when>
    <thetext>I will take care of these changes and will send patch email</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10179</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 17:41:34 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/49363</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10198</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-23 17:53:50 +0000</bug_when>
    <thetext>pushed as 412c963842..79cd636f3e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2150</bug_id>
          
          <creation_ts>2019-09-03 12:25:52 +0000</creation_ts>
          <short_desc>#AC split lock caused by exception handler</short_desc>
          <delta_ts>2019-09-20 12:50:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="John Lofgren">john.e.lofgren</reporter>
          <assigned_to name="John Lofgren">john.e.lofgren</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.e.lofgren</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9446</commentid>
    <comment_count>0</comment_count>
    <who name="John Lofgren">john.e.lofgren</who>
    <bug_when>2019-09-03 12:25:52 +0000</bug_when>
    <thetext>#AC split locks stalls have a heavy cost on execution time, even when only running on one active core.

#AC split lock is being caused in UefiCpuPkg\Library\CpuExceptionHandlerLib\X64\ExceptionHandlerAsm.nasm

sidt saves 8-byte base and 2-byte limit to memory.  xchg is used to separate limit and base.  sgdt saves 8-byte base and 2-byte limit to memory. xchg is used to separate limit and base.  xchg is atomic so if it operand crosses cache line it will cause a #AC split lock.  To stop it from crossing cache line, we can use xchg with 32-bit operand instead of 64-bit operand to separate base and limit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9659</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-13 12:43:53 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH] UefiCpuPkg/CpuExceptionHandlerLib: Fix #AC split lock
  https://edk2.groups.io/g/devel/message/46723
  http://mid.mail-archive.com/20190903181524.1132-1-john.e.lofgren@intel.com

* [edk2-devel] [Patch V2] UefiCpuPkg/CpuExceptionHandlerLib: Fix #AC split lock
  https://edk2.groups.io/g/devel/message/47045
  http://mid.mail-archive.com/20190909184039.1648-1-john.e.lofgren@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9710</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-18 13:52:32 +0000</bug_when>
    <thetext>[edk2-devel] [Patch V3] UefiCpuPkg/CpuExceptionHandlerLib: Fix split lock
https://edk2.groups.io/g/devel/message/47484
http://mid.mail-archive.com/20190918154323.20804-1-john.e.lofgren@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9747</commentid>
    <comment_count>3</comment_count>
    <who name="John Lofgren">john.e.lofgren</who>
    <bug_when>2019-09-20 12:50:20 +0000</bug_when>
    <thetext>Checkin: f4c898f2b2db2819c519cdce05403d4ba0234979</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2513</bug_id>
          
          <creation_ts>2020-02-10 14:42:17 +0000</creation_ts>
          <short_desc>HostBasedUnitTestRunner plugin only runs on Windows and thus HostUnitTests are only automatically run during CI on windows.  Fix this by enabling Linux in plugin</short_desc>
          <delta_ts>2020-05-11 20:57:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Sean Brogan">sean.brogan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11186</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-02-10 14:42:17 +0000</bug_when>
    <thetext>Minor change to enable automatic running of HostBasedUnitTests on Linux

1. Update CISettings to avoid custom Windows only scope 
2. Update Plugin
   A. Change plugin scope to be generic (OS agnostic) 
   B. Add logic to find HostTests in Linux environments
   C. Remove logic for setup of host environment on Windows since this is now a requirement of the edk2 build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11187</commentid>
    <comment_count>1</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-02-10 14:46:00 +0000</bug_when>
    <thetext>Part 1: https://github.com/spbrogan/edk2/commit/986201dad9f0d9f012bc4bca6c7f1f0916711008

Part 2: 
https://github.com/spbrogan/edk2/commit/9579b73a1055cd6f4eb90c01f8f82bd9ee3047f1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11369</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:32:24 +0000</bug_when>
    <thetext>Sean, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12199</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-13 14:02:40 +0000</bug_when>
    <thetext>Two commit here: 
https://github.com/spbrogan/edk2/tree/TCBZ_2513_Improve_runner_for_linux</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12220</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-15 16:32:53 +0000</bug_when>
    <thetext>V1 patch series is on the mailing list - https://edk2.groups.io/g/devel/message/57429.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12447</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-08 01:31:18 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/599 is created.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12476</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-11 20:57:27 +0000</bug_when>
    <thetext>Fix f355b986068a4d79caab6ec86471bcadf9a7ad47..c8543b8d830d22882dab4ece47f0413f9c6eb431</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2393</bug_id>
          
          <creation_ts>2019-11-28 21:08:37 +0000</creation_ts>
          <short_desc>OFFSET_OF() not treated as integral constant with CLANGPDB toolchain</short_desc>
          <delta_ts>2020-01-31 14:42:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Alex James">theracermaster</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10575</commentid>
    <comment_count>0</comment_count>
    <who name="Alex James">theracermaster</who>
    <bug_when>2019-11-28 21:08:37 +0000</bug_when>
    <thetext>The definition of OFFSET_OF() in Base.h uses a builtin if GNUC is defined (this builtin is supported by Clang and GCC). The CLANGPDB toolchain does not define this, so the fallback macro implementation is used. Clang does not treat such expressions with casts as an integral constant, causing static assertions with OFFSET_OF to give a compilation error (as the expression used in the static assertion is not a constant expression).

The following example gives a compilation error with the CLANGPDB toolchain:

#include &lt;Uefi.h&gt;

typedef struct {
  UINT32 a;
  UINT32 b;
} A;

STATIC_ASSERT (OFFSET_OF(A, a) == 0, &quot;Invalid structure layout&quot;);
STATIC_ASSERT (OFFSET_OF(A, b) == 4, &quot;Invalid structure layout&quot;);

edk2/ExamplePkg/ClangTest/ClangTest.c:8:16: error: static_assert expression is not an integral constant expression
STATIC_ASSERT (OFFSET_OF(A, a) == 0, &quot;Invalid structure layout&quot;);
               ^~~~~~~~~~~~~~~~~~~~
edk2/MdePkg/Include/Base.h:791:32: note: expanded from macro &apos;OFFSET_OF&apos;
#define OFFSET_OF(TYPE, Field) ((UINTN) &amp;(((TYPE *)0)-&gt;Field))
                               ^
edk2/ExamplePkg/ClangTest/ClangTest.c:8:16: note: cast that performs the conversions of a reinterpret_cast is not allowed in a constant expression
edk2/MdePkg/Include/Base.h:791:33: note: expanded from macro &apos;OFFSET_OF&apos;
#define OFFSET_OF(TYPE, Field) ((UINTN) &amp;(((TYPE *)0)-&gt;Field))
                                ^
edk2/ExamplePkg/ClangTest/ClangTest.c:9:16: error: static_assert expression is not an integral constant expression
STATIC_ASSERT (OFFSET_OF(A, b) == 4, &quot;Invalid structure layout&quot;);
               ^~~~~~~~~~~~~~~~~~~~
edk2/MdePkg/Include/Base.h:791:32: note: expanded from macro &apos;OFFSET_OF&apos;
#define OFFSET_OF(TYPE, Field) ((UINTN) &amp;(((TYPE *)0)-&gt;Field))
                               ^
edk2/ExamplePkg/ClangTest/ClangTest.c:9:16: note: cast that performs the conversions of a reinterpret_cast is not allowed in a constant expression
edk2/MdePkg/Include/Base.h:791:33: note: expanded from macro &apos;OFFSET_OF&apos;
#define OFFSET_OF(TYPE, Field) ((UINTN) &amp;(((TYPE *)0)-&gt;Field))
                                ^
2 errors generated.

A patch for this issue is available on the mailing list: https://edk2.groups.io/g/devel/message/51446</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11035</commentid>
    <comment_count>1</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-01-31 14:42:56 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/796b380ca7d263ca504b82fe5317a78d3546d537</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2282</bug_id>
          
          <creation_ts>2019-10-16 15:25:27 +0000</creation_ts>
          <short_desc>Reduce GalagoPro3 boot time to less than 1 second</short_desc>
          <delta_ts>2020-01-22 20:16:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10049</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 15:25:27 +0000</bug_when>
    <thetext>The total boot time to OS hand off for the System 76 Galago Pro 3 (supported in KabylakeOpenBoardPkg/GalagoPro3) should be reduced to 1 second or less under the following conditions:

* NVMe OS boot device
* Built-in display
* Cold boot path (S5 exit) after at least 2 boot cycles with the presently flashed firmware
* This can be done in a &quot;fast boot&quot; path (as selected by a FeaturePCD) which skips the BDS hotkey timeout and console input enumeration

This is a starting list of conditions. Other assumptions/conditions required can be noted in this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10246</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-30 18:30:54 +0000</bug_when>
    <thetext>Please treat this as lower priority to tasks in MinPlatformPkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10966</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-22 20:16:41 +0000</bug_when>
    <thetext>We will not fix this as we&apos;re focusing on other open source board support.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2174</bug_id>
          
          <creation_ts>2019-09-09 09:36:13 +0000</creation_ts>
          <short_desc>Ip6ProcessRouterAdvertise DoS through infinite loop</short_desc>
          <delta_ts>2020-04-01 09:23:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2655</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2550</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Maciej Rabeda">maciej.rabeda</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.mathews</cc>
    
    <cc>Ken_Taylor</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9542</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-09 09:36:13 +0000</bug_when>
    <thetext>There appears to be an infinite loop condition in the Ip6ProcessRouterAdvertise() function when looping over the option headers. This is a result of taking an untrusted &quot;Length&quot; field from the packet and adding it to the current &quot;Offset&quot;. In cases where a packet contains many such options, it&apos;s possible to overflow the &quot;UINT16 Offset&quot; back to a small number, causing the while predicate to enter an infinite loop situation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9543</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-09 09:36:45 +0000</bug_when>
    <thetext>Medium 5.9 https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:N/I:N/A:H</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9544</commentid>
    <comment_count>2</comment_count>
      <attachid>397</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-09 09:37:52 +0000</bug_when>
    <thetext>Created attachment 397
v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9799</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-25 02:34:35 +0000</bug_when>
    <thetext>CVE-2019-14559 (share with BZ2031)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9847</commentid>
    <comment_count>4</comment_count>
    <who name="Ken Taylor">Ken_Taylor</who>
    <bug_when>2019-09-27 20:18:21 +0000</bug_when>
    <thetext>I think this patch only covers the case in which the length of an undefined type overflows the Offset.

What, for example, stops someone from overflowing the Offset with a Ip6OptionEtherSource?  Shouldn&apos;t there be an overflow check for *every* piece of code in that loop which advances Offset?

Couldn&apos;t *any* option be placed at the end of a packet in a manner that could overflow Offset?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10163</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-22 11:08:18 +0000</bug_when>
    <thetext>Per discussion at https://edk2.groups.io/g/infosec/message/29, make this BZ public.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11406</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-23 04:09:34 +0000</bug_when>
    <thetext>Jian, can you please post the patch to edk2-devel for review? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11479</commentid>
    <comment_count>7</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-02-28 08:50:03 +0000</bug_when>
    <thetext>Taking over the tracker. Patch attached (v1) seems to be bugged.

(UINT16) Length * 8 &gt; MAX_UINT16 - Offset)

Head-&gt;PayloadLength should be used instead of MAX_UINT16 to see whether Length falls out of the packet.

As for whole message validation: when option presence in the message is detected, before processing those options, Ip6IsNDOptionValid() is called to validate length of the options.

While loop following that check should consider recognized options boundaries as valid.

Ip6IsNDOptionValid() function is to be analyzed whether all of the checks inside are done correctly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11483</commentid>
    <comment_count>8</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-03-02 07:44:56 +0000</bug_when>
    <thetext>Patch is under review.
https://www.mail-archive.com/devel@edk2.groups.io/msg15971.html
https://edk2.groups.io/g/devel/message/55170</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11485</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-02 15:00:49 +0000</bug_when>
    <thetext>(In reply to Maciej Rabeda from comment #8)
&gt; Patch is under review.
&gt; https://www.mail-archive.com/devel@edk2.groups.io/msg15971.html
&gt; https://edk2.groups.io/g/devel/message/55170

Subject:
[edk2-devel] [PATCH v1] NetworkPkg/Ip6Dxe: Improve Neightbor Discovery message validation (CVE-2019-14559)

message-id: 20200302123852.575-1-maciej.rabeda@linux.intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11915</commentid>
    <comment_count>10</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-03-30 09:19:20 +0000</bug_when>
    <thetext>Patch merged with EDK2.

https://github.com/tianocore/edk2/commit/9c20342eed70ec99ec50cd73cb81804299f05403</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11927</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-30 15:53:47 +0000</bug_when>
    <thetext>Thank you Maciej for the fix -- only bug 2032 is blocking bug 2550 now!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11988</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-01 09:11:03 +0000</bug_when>
    <thetext>(In reply to Maciej Rabeda from comment #10)
&gt; Patch merged with EDK2.
&gt; 
&gt; https://github.com/tianocore/edk2/commit/
&gt; 9c20342eed70ec99ec50cd73cb81804299f05403

From the following thread:

[edk2-devel] [PATCH v2]
NetworkPkg/Ip6Dxe: Improve Neightbor Discovery message validation.

https://edk2.groups.io/g/devel/message/56630
http://mid.mail-archive.com/20200330122351.1229-1-maciej.rabeda@linux.intel.com

(Note regression report in the same thread.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11989</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-01 09:15:19 +0000</bug_when>
    <thetext>Regression fix on the list:

[edk2-devel] [PATCH]
NetworkPkg/Ip6Dxe: Fix ASSERT logic in Ip6ProcessRouterAdvertise()

https://edk2.groups.io/g/devel/message/56829
http://mid.mail-archive.com/20200401095321.1966-1-maciej.rabeda@linux.intel.com</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>397</attachid>
            <date>2019-09-09 09:37:52 +0000</date>
            <delta_ts>2019-09-09 09:37:52 +0000</delta_ts>
            <desc>v1</desc>
            <filename>bz2174-v1.patch</filename>
            <type>text/plain</type>
            <size>792</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2060</bug_id>
          
          <creation_ts>2019-08-07 14:13:33 +0000</creation_ts>
          <short_desc>UefiCpuPkg: remove useless &quot;ConsoleLogLock&quot; from RegisterCpuFeaturesLib and PiSmmCpuDxeSmm</short_desc>
          <delta_ts>2019-08-09 02:41:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8835</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-07 14:13:33 +0000</bug_when>
    <thetext>After commit 02031cfc920e (&quot;UefiCpuPkg/PiSmmCpuDxeSmm: Remove debug message.&quot;, 2019-08-06), RegisterCpuFeaturesLib and PiSmmCpuDxeSmm are each left with a useless spinlock called &quot;ConsoleLogLock&quot;.

Please eliminate the spinlock fields themselves, building upon the series ending in 02031cfc920e, as the present state -- with spinlocks that are initialized but otherwise unused -- is confusing. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8866</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-08-08 09:43:49 +0000</bug_when>
    <thetext>Take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8907</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-08-09 02:41:04 +0000</bug_when>
    <thetext>SHA-1: 800aeeda74919d302c71ae01262a60d682e505f2

* UefiCpuPkg/RegisterCpuFeaturesLib: Clean up useless ConsoleLogLock spinlock.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2060

Remove the useless ConsoleLogLock spinlock.

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Cc: Ray Ni &lt;ray.ni@intel.com&gt;
Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;


SHA-1: 466f5e89c3e97a76c9a4a94c8fdb59f44ec5dd13

* UefiCpuPkg/PiSmmCpuDxeSmm: Clean up useless ConsoleLogLock spinlock.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2060

Remove the useless ConsoleLogLock spinlock.

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Cc: Ray Ni &lt;ray.ni@intel.com&gt;
Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2772</bug_id>
          
          <creation_ts>2020-05-28 03:12:03 +0000</creation_ts>
          <short_desc>Update Component and Package field for Edk2 Platform Product</short_desc>
          <delta_ts>2020-06-23 18:43:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12755</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-05-28 03:12:03 +0000</bug_when>
    <thetext>Now the bugzilla system for Edk2-Platform has some problems for the Component and Package field.
For the Component filed, it lists all some packages in edk2-platform repo. for the package field, it lists all the packages in edk2 repo.

Propose to do below change:
for Component filed, lists same options as edk2 product, list options: Code, Documentation, Test, Tool.

for the Package field, lists the packages in edk2-Platform repo. Because there are too many packages in edk2-platform repo, I propose two options for this field:
option 1: change this field to let submitter input the package name.
option 2: base on request to the packages.

if use option 2, I request to
1. Move current packages in the Component field to the Package field.
2. add below packages:

DisplayLink
OptionRomPkg

AcpiDebugFeaturePkg
Usb3DebugFeaturePkg

NetworkFeaturePkg

IpmiFeaturePkg
SpcrFeaturePkg

S3FeaturePkg

SmbiosFeaturePkg

LogoFeaturePkg
UserAuthFeaturePkg
VirtualKeyboardFeaturePkg

IntelSeliconPkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12775</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-02 21:56:11 +0000</bug_when>
    <thetext>Remove the Package filed for edk2-platform product. 
And update Component fields to include new packages base on request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12779</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-02 22:23:31 +0000</bug_when>
    <thetext>confirmed this is an issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12938</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-23 18:20:55 +0000</bug_when>
    <thetext>Package field removed from Product &quot;EDK2 Platforms&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12939</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-23 18:43:19 +0000</bug_when>
    <thetext>Added the requested packages to the Edk2 Platform Components list</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2198</bug_id>
          
          <creation_ts>2019-09-17 15:33:21 +0000</creation_ts>
          <short_desc>Add support to OVMF for AMD SEV-ES</short_desc>
          <delta_ts>2021-05-14 07:10:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3373</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>2340</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter>thomas.lendacky</reporter>
          <assigned_to>thomas.lendacky</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9701</commentid>
    <comment_count>0</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2019-09-17 15:33:21 +0000</bug_when>
    <thetext>Currently, OVMF supports the AMD Secure Encrypted Virtualization (SEV) feature. There is an extension to SEV called Secure Encrypted Virtualization - Encrypted State (SEV-ES). This is a request to add the SEV-ES functionality to OVMF.

SEV-ES provides protection of the guest register state from the hypervisor. An SEV-ES guest&apos;s register state is encrypted during world switches and cannot be directly accessed for modified by the hypervisor.

SEV-ES includes architectural support for notifying a guest OS when certain types of world switches are about to occur, called Non-Automatic Exits (NAE). These events allow the guest OS to selective share information with the hypervisor through an unencrypted page of memory called the Guest-Hypervisor Communication Block.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9728</commentid>
    <comment_count>1</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2019-09-19 16:58:21 +0000</bug_when>
    <thetext>RFC V1: https://edk2.groups.io/g/devel/message/46102</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9729</commentid>
    <comment_count>2</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2019-09-19 17:00:21 +0000</bug_when>
    <thetext>RFC V2: https://edk2.groups.io/g/devel/message/47634</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9777</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-24 07:40:56 +0000</bug_when>
    <thetext>setting status to IN_PROGRESS per comment 1 / comment 2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10494</commentid>
    <comment_count>4</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2019-11-20 15:12:52 +0000</bug_when>
    <thetext>RFC V3: https://edk2.groups.io/g/devel/message/50940</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11068</commentid>
    <comment_count>5</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-02-05 09:00:39 +0000</bug_when>
    <thetext>V4: https://edk2.groups.io/g/devel/message/53747</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11496</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-03 07:01:13 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v5 00/42] SEV-ES guest support
http://mid.mail-archive.com/cover.1583190432.git.thomas.lendacky@amd.com
https://edk2.groups.io/g/devel/message/55240

[edk2-devel] [PATCH v5.1 27/43]
OvmfPkg: Create a GHCB page for use during Sec phase
http://mid.mail-archive.com/8117635dcd78f11a98716630d51832f6fca36d50.1583192181.git.thomas.lendacky@amd.com
https://edk2.groups.io/g/devel/message/55288</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11807</commentid>
    <comment_count>7</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-03-24 13:46:12 +0000</bug_when>
    <thetext>V6:
  https://www.mail-archive.com/devel@edk2.groups.io/msg16961.html
  https://edk2.groups.io/g/devel/message/56174</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12285</commentid>
    <comment_count>8</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-04-23 00:39:21 +0000</bug_when>
    <thetext>V7:
  https://www.mail-archive.com/devel@edk2.groups.io/msg18617.html
  https://edk2.groups.io/g/devel/message/57831</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12573</commentid>
    <comment_count>9</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-05-20 17:53:50 +0000</bug_when>
    <thetext>V8:
  https://www.mail-archive.com/devel@edk2.groups.io/msg20597.html
  https://edk2.groups.io/g/devel/message/59857</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12638</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 12:21:03 +0000</bug_when>
    <thetext>Catching up on this now, incrementally.

I&apos;ve verified that the v6 series indeed addressed all my v5 comments (even improved on the commit message of &quot;OvmfPkg/Sec: Add #VC exception handling for Sec phase&quot; without my asking). So indeed v6 was fully &amp; justifiedly marked as Reviewed-by myself, as far as the OvmfPkg content was concerned. I&apos;m going to proceed with the v6-&gt;v7 and v7-&gt;v8 updates now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12639</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 12:41:12 +0000</bug_when>
    <thetext>I&apos;ll try to cover the v6-&gt;v8 changes in one go, on the list, under v8.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13153</commentid>
    <comment_count>12</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-07-22 00:13:34 +0000</bug_when>
    <thetext>V9:
  https://www.mail-archive.com/devel@edk2.groups.io/msg21505.html
  https://edk2.groups.io/g/devel/message/60771</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13154</commentid>
    <comment_count>13</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-07-22 00:14:41 +0000</bug_when>
    <thetext>V10:
  https://www.mail-archive.com/devel@edk2.groups.io/msg23214.html
  https://edk2.groups.io/g/devel/message/62503</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13155</commentid>
    <comment_count>14</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-07-22 00:15:48 +0000</bug_when>
    <thetext>V11:
  https://www.mail-archive.com/devel@edk2.groups.io/msg23696.html
  https://edk2.groups.io/g/devel/message/62991</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13177</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-27 12:58:03 +0000</bug_when>
    <thetext>v12:
[edk2-devel] [PATCH v12 00/46] SEV-ES guest support
https://edk2.groups.io/g/devel/message/63304
http://mid.mail-archive.com/cover.1595863587.git.thomas.lendacky@amd.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13243</commentid>
    <comment_count>16</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-07-30 14:50:54 +0000</bug_when>
    <thetext>V13:
  https://www.mail-archive.com/devel@edk2.groups.io/msg24174.html
  https://edk2.groups.io/g/devel/message/63477</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13355</commentid>
    <comment_count>17</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-10 07:39:32 +0000</bug_when>
    <thetext>v14:
https://edk2.groups.io/g/devel/message/63842
http://mid.mail-archive.com/cover.1596829170.git.thomas.lendacky@amd.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13357</commentid>
    <comment_count>18</comment_count>
    <who name="">thomas.lendacky</who>
    <bug_when>2020-08-10 09:25:16 +0000</bug_when>
    <thetext>edk2-platforms changes:
  https://www.mail-archive.com/devel@edk2.groups.io/msg24600.html
  https://edk2.groups.io/g/devel/message/63913</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13414</commentid>
    <comment_count>19</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-17 01:44:15 +0000</bug_when>
    <thetext>Merge them on edk2 7f7f511c5a74676523ed48435350f6e35282b62b..7f0b28415cb464832155d5b3ff6eb63612f58645. 

Merge the change in edk2 platforms c475b1bbda25df302bbaeecde837299e3b4ba818</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15270</commentid>
    <comment_count>20</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-10 14:00:30 +0000</bug_when>
    <thetext>Related:

* [edk2-devel] [PATCH 0/2]
  Maintainers: create the &quot;OvmfPkg: Confidential Computing&quot; subsystem

message-id: 20210310185649.19801-1-lersek@redhat.com
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00384.html
https://edk2.groups.io/g/devel/message/72637</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15364</commentid>
    <comment_count>21</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-18 14:14:27 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #20)
&gt; Related:
&gt; 
&gt; * [edk2-devel] [PATCH 0/2]
&gt;   Maintainers: create the &quot;OvmfPkg: Confidential Computing&quot; subsystem
&gt; 
&gt; message-id: 20210310185649.19801-1-lersek@redhat.com
&gt; https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00384.
&gt; html
&gt; https://edk2.groups.io/g/devel/message/72637

Merged as commit range 9fd7e88c23f6..eb07bfb09ef5, via &lt;https://github.com/tianocore/edk2/pull/1506&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2083</bug_id>
          
          <creation_ts>2019-08-13 21:46:31 +0000</creation_ts>
          <short_desc>Add platform code for Intel Whiskey Lake</short_desc>
          <delta_ts>2019-08-20 00:01:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8992</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-13 21:46:31 +0000</bug_when>
    <thetext>Platform code should be made available in edk2-platforms that can be used to support open source platforms based on Intel Coffee Lake and Intel Whiskey Lake products. This code should follow the EDK II Minimum Platform specification (https://edk2-docs.gitbooks.io/edk-ii-minimum-platform-specification). Consequentially, the code must use the MinPlatformPkg (https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/MinPlatformPkg).

Similar to the code currently in KabylakeOpenBoardPkg (https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/KabylakeOpenBoardPkg), the support necessary to boot a Whiskey Lake U Reference Validation Platform (RVP) should be provided. This will allow other boards sample code to quickly enable Coffee Lake and Whiskey Lake board support code.

The package for Whiskey Lake should be called WhiskeylakeOpenBoardPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8994</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-13 21:47:50 +0000</bug_when>
    <thetext>Work is in progress to create this package</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9081</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-20 00:01:31 +0000</bug_when>
    <thetext>Completed in the following commits:

1. 911b689876771403207102b31a5bf51f50b64ce3
2. 1de248b5ab3a1efbe5f271504be30dce22e0fb80
3. e8f28a5407479752d83add08659b4636cee71026
4. 818fbb88ccc3fb64cd0fe79934567cad116273e6
5. 9cdbe4a813aa1fea243ac57e6743b581cb430ebb
6. 9a698e3b9cddfc1142605bbdd8d309df3f7a89b2
7. f86c932ba5b3944ba3cab3b199796ae7cb4d203b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2439</bug_id>
          
          <creation_ts>2019-12-31 01:22:51 +0000</creation_ts>
          <short_desc>Add TCG PFP revision 105 support and NIST SP800-155 event</short_desc>
          <delta_ts>2020-01-08 19:22:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10764</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-12-31 01:22:51 +0000</bug_when>
    <thetext>TCG published Platform Firmware Profile spec revision 105 (https://trustedcomputinggroup.org/wp-content/uploads/TCG_PCClient_PFP_r1p05_05_3feb20.pdf)
and Firmware Integrity Measurement spec (https://trustedcomputinggroup.org/wp-content/uploads/TCG_PC_Client-FIM_v1r24_3feb20.pdf)

2 major impact to the BIOS:

1) Need add 800-155 event at the beginning of the TCG2 event log.

2) Need use EV_EFI_PLATFORM_FIRMWARE_BLOB2 to replace EV_EFI_PLATFORM_FIRMWARE_BLOB and use EV_EFI_HANDOFF_TABLES2 to replace EV_EFI_HANDOFF_TABLES.

We need support both in EDKII.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10765</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-12-31 01:43:22 +0000</bug_when>
    <thetext>Patch submitted to EDKII.

This patch series is tested on EmulatorPkg with TPM2 simulator.
(https://github.com/jyao1/edk2/tree/feature_tpm_emulator).

The new entries - 800-155 event, EV_EFI_PLATFORM_FIRMWARE_BLOB2, EV_EFI_HANDOFF_TABLES2,
can be dumpped with UEFI Tcg2DumpLog tool.
(https://github.com/jyao1/EdkiiShellTool/tree/master/EdkiiShellToolPkg/Tcg2DumpLog)

NOTE: To support the full 800-155 requirement in TCG, a platform need report the
platform specific 800-155 event.

If the platform chooses to report in PEI, it can refer to the example at
https://github.com/jyao1/edk2/tree/feature_tpm_emulator/EmulatorPkg/Tpm2/Platform800155EventPei.

If the platform chooses to report in DXE, it can refer to the example at
https://github.com/jyao1/edk2/tree/feature_tpm_emulator/EmulatorPkg/Tpm2/Platform800155EventDxe.

Multiple 800-155 events are support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10804</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-01-08 19:22:15 +0000</bug_when>
    <thetext>pushed df73a69faf34f17b4dcacfc373b0b2621db62bd3..0286fe8176375feaf4af5ac24f8dc46284451ad5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2324</bug_id>
          
          <creation_ts>2019-11-01 14:48:01 +0000</creation_ts>
          <short_desc>Remove PurleySktPkg</short_desc>
          <delta_ts>2019-11-05 16:30:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>PurleySktPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10282</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-01 14:48:01 +0000</bug_when>
    <thetext>There is no plan from the current set of maintainers to maintain PurleySktPkg moving forward. Simply leaving the code as unmaintained is undesirable for several reasons including presence of build issues, functional issues, and lack of consistency with other Intel platform/silicon code in design and usage.

It is suggested to remove the package for the next stable tag due to lack of recent testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10286</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-01 14:51:23 +0000</bug_when>
    <thetext>Work in progress.

No concerns were raised in the RFC sent to the mailing list over a week ago - https://edk2.groups.io/g/devel/message/49360.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10329</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-05 16:30:32 +0000</bug_when>
    <thetext>Change pushed in the following commit https://github.com/tianocore/edk2-platforms/commit/54e949a7cf49a0d09dafc77e16cb86636ac4a202.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2217</bug_id>
          
          <creation_ts>2019-09-24 16:35:53 +0000</creation_ts>
          <short_desc>Add __pycache__/ to edk2-platforms .gitignore</short_desc>
          <delta_ts>2019-09-26 18:45:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9785</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-24 16:35:53 +0000</bug_when>
    <thetext>Python build scripts are being used to build board flash files in edk2-platforms/Platform/Intel (see build_bios.py). An artifact of building is the Python cache files created that should not be checked in and should be ignored by git.

For example, if the following command is given on Windows 10 &quot;py -3 build_bios.py -p KabylakeRvp3&quot;, the following Python cache file is created &quot;edk2-platforms/Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/__pycache__/build_board.cpython-37.pyc&quot;.

By adding the __pycache__ directory to a .gitignore file for the edk2-platforms repository these files can be ignored by git.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9827</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-25 21:54:35 +0000</bug_when>
    <thetext>Change is sent for review - https://edk2.groups.io/g/devel/message/47994</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9835</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-26 18:45:37 +0000</bug_when>
    <thetext>Change is committed to edk2-platforms master - https://github.com/tianocore/edk2-platforms/commit/9d52bba7568c24ade9c2b54fa9bc484da4406cd9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2105</bug_id>
          
          <creation_ts>2019-08-21 20:51:06 +0000</creation_ts>
          <short_desc>Fix regression in EmulatorPkg WinHost when image is loaded more than one or unloaded</short_desc>
          <delta_ts>2019-08-21 21:00:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2104</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>tim.lewis</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9131</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-21 20:51:06 +0000</bug_when>
    <thetext>The Nt32Pkg supported loading of images as DLL to support source level debug.
This debug feature is limited to the first instance of the image.  If an
image is loaded more than once, then only the first instance supports
source level debug.

The EmulatorPkg WinHost is missing the unload feature and does not track
when the same image is loaded more than once.  This actually results in
unexpected behavior when the same image is loaded more than once because
the same DLL is used again instead of loading the image into a new location.

This is a regression from the Nt32Pkg behavior and actually crashes in
use cases such as loading the shell from the shell.

The recommended fix is to update EmulatorPkg/Host/Win to match the 
behavior of Nt32Pkg in the implementation of the PeCoffExtraActionLib
APIs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9132</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-21 21:00:46 +0000</bug_when>
    <thetext>Duplicate of 2104

*** This bug has been marked as a duplicate of bug 2104 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2573</bug_id>
          
          <creation_ts>2020-03-06 14:15:18 +0000</creation_ts>
          <short_desc>Add Report Status Code Events to NVMe to trigger when timeout occurs in NvmExpressPassThru</short_desc>
          <delta_ts>2020-03-06 16:45:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>1408</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11592</commentid>
    <comment_count>0</comment_count>
      <attachid>468</attachid>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-06 14:15:18 +0000</bug_when>
    <thetext>Created attachment 468
Suggested patch

Related to bugs #1398 and #1408.

Add Report Status Code events in the NvmExpressPassThru when timeout occurs.

Patch attached:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11595</commentid>
    <comment_count>1</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-06 16:45:18 +0000</bug_when>
    <thetext>This is too close to the other bugs

*** This bug has been marked as a duplicate of bug 1408 ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>468</attachid>
            <date>2020-03-06 14:15:18 +0000</date>
            <delta_ts>2020-03-06 14:15:18 +0000</delta_ts>
            <desc>Suggested patch</desc>
            <filename>ReportStatusCodesNvme.patch</filename>
            <type>application/octet-stream</type>
            <size>3206</size>
            <attacher name="Matthew Carlson">macarl</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2346</bug_id>
          
          <creation_ts>2019-11-15 09:51:48 +0000</creation_ts>
          <short_desc>spelling mistake, &quot;cancal&quot; should be &quot;cancel&quot;</short_desc>
          <delta_ts>2020-08-18 20:13:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10457</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-15 09:51:48 +0000</bug_when>
    <thetext>Spelling mistake in SecurityPkg/Tcg/Opal/OpalPassword/OpalHii.c 

   CreatePopUp(
        EFI_LIGHTGRAY | EFI_BACKGROUND_BLUE,
        &amp;Key,
        Unicode,
        L&quot; System should not be powered off until action completion &quot;,
        L&quot; &quot;,
        L&quot; Press &apos;Y/y&apos; to continue, press &apos;N/n&apos; to cancal &quot;,
        NULL
    );

cancal should be cancel</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13290</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 21:21:43 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13291</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 21:22:16 +0000</bug_when>
    <thetext>Patch review

https://edk2.groups.io/g/devel/message/63615</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13432</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-08-18 20:13:39 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/9b851fd6b22c45631c7026773ce927d3f28d0f67

PR:

https://github.com/tianocore/edk2/pull/891</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2242</bug_id>
          
          <creation_ts>2019-10-07 12:50:37 +0000</creation_ts>
          <short_desc>Consolidate OpenBoardPkgConfig.dsc and OpenBoardPkgPcd.dsc</short_desc>
          <delta_ts>2019-10-16 14:49:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9923</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-07 12:50:37 +0000</bug_when>
    <thetext>The location for PCD configuration is currently inconsistent in KabylakeOpenBoardPkg. A large set of FeaturePCD definitions are in OpenBoardPkgConfig.dsc while other PCD definitions (including FeaturePCD) are located in OpenBoardPkgPcd.dsc.

It is recommended to simply use the OpenBoardPkgPcd.dsc file to manage PCD configuration and include this into the main DSC file OpenBoardPkg.dsc at the top of the file.

In addition, the PCDs should be easier to find to reduce lookup time and prevent accidental duplication. PCDs should be organized in each section (e.g. [PcdsFixedAtBuild]) by the location the PCD is pulled from in terms of the following categories:
 * EDK2 Configuration (defined in a package namespace in the edk2 repository)
 * Silicon Initialization Configuration (the silicon package used by the board)
 * Platform Configuration (the MinPlatformPkg in this case)
 * Board Configuration (the KabylakeOpenBoardPkg in this case)
 * Board-specific Configuration (KabylakeRvp3 board directory in this case)

This should be done for both boards currently in KabylakeOpenBoardPkg - KabylakeRvp3 and GalagoPro3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9956</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:25:12 +0000</bug_when>
    <thetext>Patch list sent for code review on the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10046</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 14:49:47 +0000</bug_when>
    <thetext>Submitted in the following commits for KabylakeRvp3:
1. ce0c637a904ae53ed8960d81cf5f5e3a4fbd9305
2. 38b4ff7f28f16fb8b40604af38f4dc46603cbc6a

Submitted in the following commits for GalagoPro3:
1. 546ce880cd15f047a41cbd70cf6a82c63de3a365
2. 2f78c1d8f782f8a246771ac555fc4e7f00bee398</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2700</bug_id>
          
          <creation_ts>2020-05-01 08:34:32 +0000</creation_ts>
          <short_desc>Support Hikey970 ?</short_desc>
          <delta_ts>2020-05-06 07:58:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pei JIA">jp4work</reporter>
          <assigned_to name="Leif Lindholm">quic_llindhol</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12364</commentid>
    <comment_count>0</comment_count>
    <who name="Pei JIA">jp4work</who>
    <bug_when>2020-05-01 08:34:32 +0000</bug_when>
    <thetext>Hi, this is not a bug, but a feature requested from me... I wonder if you&apos;ve got a plan to support Hikey970? I&apos;ve been searching that file: hikey970.dsc...

Thank you very much...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12400</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-05 21:51:26 +0000</bug_when>
    <thetext>Leif: can you give the comments for this request?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12416</commentid>
    <comment_count>2</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2020-05-06 07:57:58 +0000</bug_when>
    <thetext>There seems to have been some work done under
https://github.com/96boards-hikey/OpenPlatformPkg/tree/hikey970_v1.0/Platforms/Hisilicon/HiKey970 a couple of years ago.

I would recommend talking to 96boards/Linaro or Hisilicon to actually upstream this code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12417</commentid>
    <comment_count>3</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2020-05-06 07:58:52 +0000</bug_when>
    <thetext>Someone else is free to upstream the code, we will not bring it up to date and merge it ourselves.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2126</bug_id>
          
          <creation_ts>2019-08-24 11:49:30 +0000</creation_ts>
          <short_desc>SCT does not build for X64 using GCC - missing EFIAPI</short_desc>
          <delta_ts>2023-12-15 04:39:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Carolyn Gjertsen">Carolyn.Gjertsen</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>eric.jin</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>stephano</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          
          <cf_releases_to_fix>edk2-stable202105</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9230</commentid>
    <comment_count>0</comment_count>
      <attachid>386</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-08-24 11:49:30 +0000</bug_when>
    <thetext>Created attachment 386
Fix definitions for HttpServiceBindingENTSTestCase - missing EFIAPI

Due to conflicting function interface definitions GCC cannot be used to build SCT for the X64 target architecture.

Here is an example:

edk2-build/edk2/SctPkg/TestCase/RIVL/Protocol/Http/HttpServiceBinding/HttpServiceBindingENTSTest.c:35:5: warning: initialization of ‘EFI_STATUS (__attribute__((ms_abi)) *)(void *)’ from incompatible pointer type ‘EFI_STATUS (*)(void *)’ {aka ‘long long unsigned int (*)(void *)’} [-Wincompatible-pointer-types]

It is all about EFIAPI missing in lot of places. The appended patch fixes only one of many locations.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9784</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-24 16:22:00 +0000</bug_when>
    <thetext>Partial fix with

[PATCH 1/1] uefi-sct/SctPkg: network: missing EFIAPI
https://edk2.groups.io/g/devel/message/47992</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9884</commentid>
    <comment_count>2</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-09-30 12:50:54 +0000</bug_when>
    <thetext>Since its X64, Eric can you look at it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17457</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-10-07 10:50:19 +0000</bug_when>
    <thetext>Carolyn to track as part of her Build related ticket.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17733</commentid>
    <comment_count>4</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-11-11 09:48:43 +0000</bug_when>
    <thetext>The patch from AMD is as below:

https://edk2.groups.io/g/devel/message/82682?p=%2C%2C%2C20%2C0%2C0%2C0%3A%3Arecentpostdate%2Fsticky%2C%2CSctPkg%3A+Fix+X64+build+errors+for+GCC+toolchain%2C20%2C2%2C0%2C86600279

to be reviewed and upstreamed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17899</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-12-02 08:23:40 +0000</bug_when>
    <thetext>I downloaded the patch from
https://patchew.org/EDK2/20211006134820.16436-2-abdattar@amd.com/mbox

&apos;git am mbox --keep-cr&apos; leads to lots of &quot;patch does not apply&quot; errors. Maybe something was wrong with the format in which the patch was sent. You could use SetupGit.py to adjust your edk2-test repository to adjust the Git configuration:

    python3 ../edk2/BaseTools/Scripts/SetupGit.py

Please, append an applicable copy of the patch to the bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17900</commentid>
    <comment_count>6</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-12-02 09:31:28 +0000</bug_when>
    <thetext>Raw patch to be updated to BZ by Carolyn</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17950</commentid>
    <comment_count>7</comment_count>
      <attachid>897</attachid>
    <who name="Carolyn Gjertsen">Carolyn.Gjertsen</who>
    <bug_when>2021-12-07 18:17:07 +0000</bug_when>
    <thetext>Created attachment 897
SctPkg-Fix-X64-build-errors-for-GCC-toolchain</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18127</commentid>
    <comment_count>8</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-01-13 09:10:24 +0000</bug_when>
    <thetext>Please raise this patch as per edk2 developer&apos;s process, for review and upstreaming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18931</commentid>
    <comment_count>9</comment_count>
    <who name="Carolyn Gjertsen">Carolyn.Gjertsen</who>
    <bug_when>2022-05-05 10:04:02 +0000</bug_when>
    <thetext>Still in progress.  Will push changes to begin feedback process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22242</commentid>
    <comment_count>10</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2023-12-09 07:32:52 +0000</bug_when>
    <thetext>The relevant changes are contained in mails

https://edk2.groups.io/g/devel/message/90396
https://edk2.groups.io/g/devel/message/90397

@Samer, Edhaya
Could you, please review an apply the patches.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22243</commentid>
    <comment_count>11</comment_count>
      <attachid>1447</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2023-12-09 08:22:34 +0000</bug_when>
    <thetext>Created attachment 1447
PATCH v2 1/2] SctPkg: Fix X64 build errors for GCC toolchain

https://edk2.groups.io/g/devel/message/90396</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22244</commentid>
    <comment_count>12</comment_count>
      <attachid>1448</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2023-12-09 08:24:37 +0000</bug_when>
    <thetext>Created attachment 1448
[PATCH v2 2/2] SctPkg: Fix the UefiSct -Wincompatible-pointer-types warnings

https://edk2.groups.io/g/devel/message/90397</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22245</commentid>
    <comment_count>13</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2023-12-09 08:37:11 +0000</bug_when>
    <thetext>Patch v2 1/2 applies cleanly.

Patch v2 2/2 contains two non-applicable hunks that only change line endings and may be removed from the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22256</commentid>
    <comment_count>14</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2023-12-11 01:06:15 +0000</bug_when>
    <thetext>Thank you, Heinrich. 
We will review and upstream the patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22260</commentid>
    <comment_count>15</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2023-12-11 10:34:52 +0000</bug_when>
    <thetext>Hi Heinrich,

  The patch 
[PATCH v2 2/2] SctPkg: Fix the UefiSct -Wincompatible-pointer-types warnings
as attached to this ticket is corrupted. 

 uefi-sct/SctPkg/TestCase/RIVL/Protocol/InternetProtocol4/Ip4ServiceBinding=Ip4ServiceBindingENTSTestCase.h                                       |   = +
 uefi-sct/SctPkg/TestCase/RIVL/Protocol/InternetProtocol6/Ip6/Ip6ENTSTestCa=e.h                                                                   |   = +
 uefi-sct/SctPkg/TestCase/RIVL/Protocol/InternetProtocol6/Ip6Config/Ip6Conf=gENTSTestCase.h                                                       |   = +
 uefi-sct/SctPkg/TestCase/RIVL/Protocol/InternetProtocol6/Ip6ServiceBinding=Ip6ServiceBindingENTSTestCase.h                                       |   = +
 uefi-sct/SctPkg/TestCase/RIVL/Protocol/ManagedNetwork/MNP/MnpENTSTestCase.=                                                                      |  1= +

it has unwanted &apos;=&apos; symbols

I could not even take the contents from 
https://edk2.groups.io/g/devel/message/90397
as the message in it is truncated.

Could you please upload a new patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22265</commentid>
    <comment_count>16</comment_count>
      <attachid>1451</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2023-12-13 02:26:49 +0000</bug_when>
    <thetext>Created attachment 1451
PATCH v2 1/2] SctPkg: Fix X64 build errors for GCC toolchain

Mail message converted to applicable patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22266</commentid>
    <comment_count>17</comment_count>
      <attachid>1452</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2023-12-13 02:28:38 +0000</bug_when>
    <thetext>Created attachment 1452
[PATCH v2 2/2] SctPkg: Fix the UefiSct -Wincompatible-pointer-types warnings

Mail message converted to applicable patch.

Two non-applicable hunks removed which only contained formatting differences.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22267</commentid>
    <comment_count>18</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2023-12-13 02:30:09 +0000</bug_when>
    <thetext>I have created merge request https://github.com/tianocore/edk2-test/pull/79 for https://github.com/xypron/edk2-test branch fix_x64_build.

I hope that makes reviewing the two patches easierr.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22274</commentid>
    <comment_count>19</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2023-12-15 04:39:08 +0000</bug_when>
    <thetext>Thank you Heinrich.
The patches are now merged.

https://github.com/tianocore/edk2-test/commit/847e0363e846296881c238dc43766fd40f6c2aec

https://github.com/tianocore/edk2-test/commit/1a083b245670fe143a9978b49ea5c54b59a01e1f

These are reviewed my Sunny Wang and I.

Closing this ticket.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22275</commentid>
    <comment_count>20</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2023-12-15 04:39:31 +0000</bug_when>
    <thetext>Fixed</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>386</attachid>
            <date>2019-08-24 11:49:30 +0000</date>
            <delta_ts>2021-12-07 18:17:07 +0000</delta_ts>
            <desc>Fix definitions for HttpServiceBindingENTSTestCase - missing EFIAPI</desc>
            <filename>0001-HttpServiceBindingENTSTestCase-does-not-build-on-X86.patch</filename>
            <type>text/plain</type>
            <size>2252</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>897</attachid>
            <date>2021-12-07 18:17:07 +0000</date>
            <delta_ts>2021-12-07 18:17:07 +0000</delta_ts>
            <desc>SctPkg-Fix-X64-build-errors-for-GCC-toolchain</desc>
            <filename>0001-SctPkg-Fix-X64-build-errors-for-GCC-toolchain.patch</filename>
            <type>text/plain</type>
            <size>71329</size>
            <attacher name="Carolyn Gjertsen">Carolyn.Gjertsen</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1447</attachid>
            <date>2023-12-09 08:22:34 +0000</date>
            <delta_ts>2023-12-09 08:22:34 +0000</delta_ts>
            <desc>PATCH v2 1/2] SctPkg: Fix X64 build errors for GCC toolchain</desc>
            <filename>0001-SctPkg-Fix-X64-build-errors-for-GCC-toolchain.patch.eml</filename>
            <type>message/rfc822</type>
            <size>81217</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1448</attachid>
            <date>2023-12-09 08:24:37 +0000</date>
            <delta_ts>2023-12-09 08:24:37 +0000</delta_ts>
            <desc>[PATCH v2 2/2] SctPkg: Fix the UefiSct -Wincompatible-pointer-types warnings</desc>
            <filename>0002-SctPkg-Fix-the-UefiSct-Wincompatible-pointer-types-w.patch.eml.gz</filename>
            <type>application/gzip</type>
            <size>136775</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1451</attachid>
            <date>2023-12-13 02:26:49 +0000</date>
            <delta_ts>2023-12-13 02:26:49 +0000</delta_ts>
            <desc>PATCH v2 1/2] SctPkg: Fix X64 build errors for GCC toolchain</desc>
            <filename>0001-SctPkg-Fix-X64-build-errors-for-GCC-toolchain.patch.gz</filename>
            <type>text/plain</type>
            <size>7975</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1452</attachid>
            <date>2023-12-13 02:28:38 +0000</date>
            <delta_ts>2023-12-13 02:28:38 +0000</delta_ts>
            <desc>[PATCH v2 2/2] SctPkg: Fix the UefiSct -Wincompatible-pointer-types warnings</desc>
            <filename>0002-SctPkg-Fix-the-UefiSct-Wincompatible-pointer-types-w.patch.gz</filename>
            <type>text/plain</type>
            <size>124887</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2595</bug_id>
          
          <creation_ts>2020-03-12 13:08:09 +0000</creation_ts>
          <short_desc>Build Fail EmulatorPkg VS2017 -Cannot find the path specified ... UefiBootManagerLib.inf</short_desc>
          <delta_ts>2020-03-12 19:12:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Laurie Jarlstrom">laurie</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11682</commentid>
    <comment_count>0</comment_count>
      <attachid>481</attachid>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2020-03-12 13:08:09 +0000</bug_when>
    <thetext>Created attachment 481
Error message after the build

Build Fails on the edk2-stable202002 TAG for EmulatorPkg 
command: Build -p EmulatorPkg\EmulatorPkg.dsc -t VS2017 -a X64

The build fails on the first file it is trying to find, see builderror.txt attached.

Also included my environment for win 10 and VS2017</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11683</commentid>
    <comment_count>1</comment_count>
      <attachid>482</attachid>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2020-03-12 13:09:52 +0000</bug_when>
    <thetext>Created attachment 482
Build environment Win 10 VS2017

attached build environment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11684</commentid>
    <comment_count>2</comment_count>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2020-03-12 14:04:00 +0000</bug_when>
    <thetext>Also Fails on Stable201911 with warnings about MetaFile missing local header.

Here is the build ERROR:

D:\FW\edk2-ws200309\edk2&gt;build -p EmulatorPkg\EmulatorPkg.dsc -t VS2017 -a X64 -n 1
Build environment: Windows-10-10.0.18362-SP0
Build start time: 10:58:38, Mar.12 2020

WORKSPACE        = d:\fw\edk2-ws200309
PACKAGES_PATH    = d:\fw\edk2-ws200309\edk2;d:\fw\edk2-ws200309\edk2-libc
EDK_TOOLS_PATH   = d:\fw\edk2-ws200309\edk2\basetools
EDK_TOOLS_BIN    = d:\fw\edk2-ws200309\edk2\basetools\bin\win32
CONF_PATH        = d:\fw\edk2-ws200309\edk2\conf
PYTHON_COMMAND   = py -3



Processing meta-data .Architecture(s)  = X64
Build target     = DEBUG
Toolchain        = VS2017

Active Platform          = d:\fw\edk2-ws200309\edk2\EmulatorPkg\EmulatorPkg.dsc
......build: : warning: Module MetaFile [Sources] is missing local header!
    Local Header: d:\fw\edk2-ws200309\edk2\emulatorpkg\sec\sec.h not found in d:\fw\edk2-ws200309\edk2\EmulatorPkg\Sec\Sec.inf
build: : warning: Module MetaFile [Sources] is missing local header!
    Local Header: d:\fw\edk2-ws200309\edk2\emulatorpkg\emusnpdxe\emusnpdxe.h not found in d:\fw\edk2-ws200309\edk2\EmulatorPkg\EmuSnpDxe\EmuSnpDxe.inf
....build: : warning: Module MetaFile [Sources] is missing local header!
    Local Header: d:\fw\edk2-ws200309\edk2\emulatorpkg\fvbservicesruntimedxe\fwblockservice.h not found in d:\fw\edk2-ws200309\edk2\EmulatorPkg\FvbServicesRuntimeDxe\FvbServicesRuntimeDxe.inf
build: : warning: Module MetaFile [Sources] is missing local header!
    Local Header: d:\fw\edk2-ws200309\edk2\emulatorpkg\emubusdriverdxe\emubusdriverdxe.h not found in d:\fw\edk2-ws200309\edk2\EmulatorPkg\EmuBusDriverDxe\EmuBusDriverDxe.inf
.build: : warning: Module MetaFile [Sources] is missing local header!
    Local Header: d:\fw\edk2-ws200309\edk2\emulatorpkg\emusimplefilesystemdxe\emusimplefilesystem.h not found in d:\fw\edk2-ws200309\edk2\EmulatorPkg\EmuSimpleFileSystemDxe\EmuSimpleFileSystemDxe.inf
.. done!
Building ... d:\fw\edk2-ws200309\edk2\MdePkg\Library\UefiLib\UefiLib.inf [X64]
The system cannot find the path specified.


build.py...
 : error 7000: Failed to execute command
        bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\fw\edk2-ws200309\Build\EmulatorX64\DEBUG_VS2017\X64\MdePkg\Library\UefiLib\UefiLib]


build.py...
 : error 7000: Failed to execute command
        bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\fw\edk2-ws200309\Build\EmulatorX64\DEBUG_VS2017\X64\MdePkg\Library\UefiDriverEntryPoint\UefiDriverEntryPoint]


build.py...
 : error F002: Failed to build module
        d:\fw\edk2-ws200309\edk2\MdePkg\Library\UefiLib\UefiLib.inf [X64, VS2017, DEBUG]

- Failed -
Build end time: 10:58:54, Mar.12 2020
Build total time: 00:00:16


D:\FW\edk2-ws200309\edk2&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11687</commentid>
    <comment_count>3</comment_count>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2020-03-12 19:12:28 +0000</bug_when>
    <thetext>The issue is with VS2017 fixed by Updating to the latest VS2017, V15.9.21 and it is no longer an issue.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>481</attachid>
            <date>2020-03-12 13:08:09 +0000</date>
            <delta_ts>2020-03-12 13:08:09 +0000</delta_ts>
            <desc>Error message after the build</desc>
            <filename>builderror.txt</filename>
            <type>text/plain</type>
            <size>1589</size>
            <attacher name="Laurie Jarlstrom">laurie</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>482</attachid>
            <date>2020-03-12 13:09:52 +0000</date>
            <delta_ts>2020-03-12 13:09:52 +0000</delta_ts>
            <desc>Build environment Win 10 VS2017</desc>
            <filename>mysetenviornment.log</filename>
            <type>application/octet-stream</type>
            <size>9287</size>
            <attacher name="Laurie Jarlstrom">laurie</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2492</bug_id>
          
          <creation_ts>2020-01-29 18:05:06 +0000</creation_ts>
          <short_desc>Deprecate PPTT Type 2 - Processor Id</short_desc>
          <delta_ts>2020-12-10 18:51:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.garry</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>ACPI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11004</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-01-29 18:05:06 +0000</bug_when>
    <thetext>The PPTT Type 2 structure was proposed to enable SoC vendors of certain architectures (e.g. Arm) to have a way to provide the SoC ID to the OS kernel and to other software.

However, SoC vendors cannot guarantee that the Type 2 structure will always be available on all platforms.

Given that the SoC ID is used for critical security patches and fixing Si sightings, it is our belief that this structure cannot be relied upon for such crucial tasks. Instead, we believe that SoC vendors (or CPU vendors) provide a more canonical format that is a fundamental part of the SoC.

We are therefore requesting that the PPTT Type 2 be deprecated before any OS has had a chance to support it.

For Arm SoCs, a replacement will be in the form of an SMCCC API architectural call (SMCCC_ARCH_SOC_ID) that is being defined in SMCCC v 1.2 spec available at https://developer.arm.com/docs/den0028/c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11005</commentid>
    <comment_count>1</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-01-29 18:06:49 +0000</bug_when>
    <thetext>This request is to deprecate PPTT Type 2 in 

1. ACPI Specification

2. TianoCore EDK2 and EDK2-Platform code (no complete implementation exists, just a reference to the structure in header files, and a stub in most platform implementations)

3. Linux kernel (not implemented yet)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11037</commentid>
    <comment_count>2</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-01-31 16:54:58 +0000</bug_when>
    <thetext>Please note that per the new code first process proposal (https://edk2.groups.io/g/devel/message/53420) the product category here would be ACPI Specification, as the request is to deprecate an ACPI structure that is not used

Product category 
  * ACPI Specification

Components:
  * Specification
  * Reference implementation

Question: Do we need to wait for edk2-spec-update to be created before submitting the proposed spec / code ? Do we just put in BZ for now?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11139</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 20:21:45 +0000</bug_when>
    <thetext>Wait for code first process finalization.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11686</commentid>
    <comment_count>4</comment_count>
      <attachid>483</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-03-12 17:28:36 +0000</bug_when>
    <thetext>Created attachment 483
ACPI-6_3-ECR-Deprecate PPTT Type 2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12145</commentid>
    <comment_count>5</comment_count>
      <attachid>507</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-04-08 07:31:00 +0000</bug_when>
    <thetext>Created attachment 507
Patchset</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14552</commentid>
    <comment_count>6</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-12-10 18:51:17 +0000</bug_when>
    <thetext>This is now published in ACPI 6.3 Errata A (https://uefi.org/sites/default/files/resources/ACPI_Spec_6_3_A_Oct_6_2020.pdf) and can be closed</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>483</attachid>
            <date>2020-03-12 17:28:36 +0000</date>
            <delta_ts>2020-03-12 17:28:36 +0000</delta_ts>
            <desc>ACPI-6_3-ECR-Deprecate PPTT Type 2</desc>
            <filename>ACPI-6_3-ECR-Deprecate PPTT Type 2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>48553</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>507</attachid>
            <date>2020-04-08 07:31:00 +0000</date>
            <delta_ts>2020-04-08 07:31:00 +0000</delta_ts>
            <desc>Patchset</desc>
            <filename>Remove PPTT Type 2 - Patchset.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>5585</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2957</bug_id>
          <alias>CVE-2021-28216</alias>
          <creation_ts>2020-09-09 19:36:28 +0000</creation_ts>
          <short_desc>BootPerformanceTable pointer is read from an NVRAM variable in PEI</short_desc>
          <delta_ts>2021-11-12 02:53:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="John Mathews">john.mathews</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>arose</cc>
    
    <cc>bret.barkelew</cc>
    
    <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>jerecox</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>kevinj</cc>
    
    <cc>timothy_hoppen</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13654</commentid>
    <comment_count>0</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-09-09 19:36:28 +0000</bug_when>
    <thetext>See the code here:
https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Universal/Acpi/FirmwarePerformanceDataTablePei/FirmwarePerformancePei.c#L149

In the function FpdtStatusCodeListenerPei(), the pointer BootPerformanceTable is read directly from an NVRAM variable (&quot;FirmwarePerformance&quot;). Memory is then updated at that address. 
A local attacker may modify the variable at his will, and after reboot the vulnerable code will update memory at the attacker-supplied address. 

Should we be locking the FirmwarePerformance variable?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13921</commentid>
    <comment_count>1</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-10-08 10:44:55 +0000</bug_when>
    <thetext>Moving status to &apos;confirmed&apos;, based on discussion in the 10/7 Infosec mtg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15046</commentid>
    <comment_count>2</comment_count>
    <who name="">arose</who>
    <bug_when>2021-02-08 18:06:06 +0000</bug_when>
    <thetext>Hi, when is this issue targeted to be fixed? Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15192</commentid>
    <comment_count>3</comment_count>
      <attachid>662</attachid>
    <who name="">kevinj</who>
    <bug_when>2021-03-03 11:50:21 +0000</bug_when>
    <thetext>Created attachment 662
CVE .json file

I have attached the .json file for CVE classification. Please review and provide feedback.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15200</commentid>
    <comment_count>4</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-03-03 13:04:33 +0000</bug_when>
    <thetext>(In reply to arose from comment #2)
&gt; Hi, when is this issue targeted to be fixed? Thanks

Hi,
We are looking for someone from community to take ownership and prepare a patch. Currently there is no assigned owner. Would Nvidia be interested in submitting a patch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15201</commentid>
    <comment_count>5</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-03-03 13:04:47 +0000</bug_when>
    <thetext>Attacking before EndOfDxe is invalid, but attacking between EndOfDxe and ExitBootServices is valid. Locking the variable could be a solution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15291</commentid>
    <comment_count>6</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-03-12 16:02:32 +0000</bug_when>
    <thetext>A CVE-ID has been assigned to this bug. Please review the .json file again, especially the version this bug is observed in and inform me when you plan to publicly disclose this bug, so we know when to submit this CVE back to MITRE. Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15296</commentid>
    <comment_count>7</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-03-12 16:06:06 +0000</bug_when>
    <thetext>A CVE-ID has been assigned to this bug. Please review the .json file again, especially the version this bug is observed in and inform me when you plan to publicly disclose this bug, so we know when to submit this CVE back to MITRE. Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15303</commentid>
    <comment_count>8</comment_count>
    <who name="">arose</who>
    <bug_when>2021-03-12 17:03:32 +0000</bug_when>
    <thetext>Hi, we aren&apos;t able to submit a patch, but would like to have proper coordinated disclosure for the bug to be addressed before publicly disclosing. Are there plans for fixing this soon? thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16268</commentid>
    <comment_count>9</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-06-04 12:46:27 +0000</bug_when>
    <thetext>For https://www.blackhat.com/us-21/briefings/schedule/index.html#safeguarding-uefi-ecosystem-firmware-supply-chain-is-hardcoded-23685
 
Does comment “Some issues related to Intel EDKII (reported to Intel in September 2020).” from that link refer to this bug?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16269</commentid>
    <comment_count>10</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-06-04 15:54:01 +0000</bug_when>
    <thetext>How about in 

https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Universal/Acpi/FirmwarePerformanceDataTableDxe/FirmwarePerformanceDxe.c

after line

  //
  // Save Runtime Performance Table pointers to Variable.
  // Don&apos;t check SetVariable return status. It doesn&apos;t impact FPDT table generation.
  //
  gRT-&gt;SetVariable (
        EFI_FIRMWARE_PERFORMANCE_VARIABLE_NAME,
        &amp;gEfiFirmwarePerformanceGuid,
        EFI_VARIABLE_NON_VOLATILE | EFI_VARIABLE_BOOTSERVICE_ACCESS,
        sizeof (PerformanceVariable),
        &amp;PerformanceVariable
        );

we add
  
  EDKII_VARIABLE_LOCK_PROTOCOL  *VariableLock;

  VariableLock = NULL;
  Status = gBS-&gt;LocateProtocol(
      &amp;gEdkiiVariableLockProtocolGuid,
      NULL,
      (VOID **)&amp;VariableLock
  );

  if (EFI_ERROR(Status) || VariableLock == NULL) {
     DEBUG((DEBUG_ERROR, &quot;FpdtDxe(%s): Failed to locate Variable Lock Protocol (%r).\n&quot;, mImageIdName, Status));
     return Status;
  }

  Status = VariableLock-&gt;RequestToLock(
      VariableLock,
      EFI_FIRMWARE_PERFORMANCE_VARIABLE_NAME,
      &amp;gEfiFirmwarePerformanceGuid
  );

  if (!EFI_ERROR(Status)) {
    DEBUG((DEBUG_ERROR, &quot;FpdtDxe(%s): Failed to lock (%r).\n&quot;, mImageIdName, Status));
    return Status;
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16337</commentid>
    <comment_count>11</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2021-06-10 19:15:07 +0000</bug_when>
    <thetext>We should do this with policies rather than VariableLock, since VariableLock will be deprecated soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16366</commentid>
    <comment_count>12</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-06-15 10:46:52 +0000</bug_when>
    <thetext>given the history of this feature https://edk2-docs.gitbook.io/security-advisory/overwrite_from_firmwareperformance_variable, maybe there should be a test around protecting this asset, too?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16371</commentid>
    <comment_count>13</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2021-06-15 14:42:13 +0000</bug_when>
    <thetext>S3 is on its way out.  S3 performance is not a priority.  Could this be removed, or disabled by default?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16411</commentid>
    <comment_count>14</comment_count>
    <who name="">arose</who>
    <bug_when>2021-06-21 15:21:56 +0000</bug_when>
    <thetext>Is this issue able to be addressed before BH 2021?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16421</commentid>
    <comment_count>15</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2021-06-22 15:52:11 +0000</bug_when>
    <thetext>@Vincent and @Bret

The variable in question is created in DXE with attributes NV+BS (note that RT is present).  Thus a successful attack requires an attacker to have already compromised SMM or bypassed UEFI Secure Boot (to bypass the attribute check).

Reference:
https://github.com/tianocore/edk2/blob/0ecdcb6142037dd1cdd08660a2349960bcf0270a/MdeModulePkg/Universal/Acpi/FirmwarePerformanceDataTableDxe/FirmwarePerformanceDxe.c#L367

This appears to be a non-issue when gEfiMdeModulePkgTokenSpaceGuid.PcdFirmwarePerformanceDataTableS3Support is set to FALSE (the vulnerable FPDT code for S3 is skipped).

I agree with Bret, VariablePolicy is preferred, as it allows us to pin sizes and attributes also (as defense in depth), though backports may need to use VariableLock.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16424</commentid>
    <comment_count>16</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-06-22 18:30:40 +0000</bug_when>
    <thetext>speaking of reducing the attack surface, does anyone on the list know why this has to be runtime accessible?  would NV+BS suffice?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16425</commentid>
    <comment_count>17</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-06-22 18:33:16 +0000</bug_when>
    <thetext>dandan:
It looks like you did some pretty significant updates to this component in the past. Can you create a patch and ensure that there are no functionality regressions?  If not, please suggest an alternate person.
thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16426</commentid>
    <comment_count>18</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-22 20:48:20 +0000</bug_when>
    <thetext>Talked with Dandan. Confirmed she will fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16427</commentid>
    <comment_count>19</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-06-22 21:12:57 +0000</bug_when>
    <thetext>thanks Jiewen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16457</commentid>
    <comment_count>20</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2021-06-24 16:53:52 +0000</bug_when>
    <thetext>NVidia confirms this is the 1 (singular) and only EDK2 vulnerability to be disclosed at BlackHat 2021:
https://www.blackhat.com/us-21/briefings/schedule/index.html#safeguarding-uefi-ecosystem-firmware-supply-chain-is-hardcoded-23685</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16476</commentid>
    <comment_count>21</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-06-28 22:52:13 +0000</bug_when>
    <thetext>Synced with Dandan.

It is easy to add Lock for this variable. That should happen in EndOdDxe.
Current variable is created at ReadyToBoot.
If we need lock, then we need ReadyToBoot move EndOfDxe.

An extra problem we will handle is to preserve some memory to hold the performance data since EndOfDxe to ReadyToBoot.

Dandan will collect data on a typical server and client, to see how many memory will be preserved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16478</commentid>
    <comment_count>22</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-06-29 01:10:29 +0000</bug_when>
    <thetext>Collecting perf data on Server and Client platforms now.
Will provide the final fix after data analysis.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16516</commentid>
    <comment_count>23</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-07-02 03:57:11 +0000</bug_when>
    <thetext>1. Following are the Perf data size collected on Client and Server platforms:
_______________________________________________________________________
|                  |        |           |                             |
|Perf Data (Bytes) |EndOfDxe|ReadyToBoot|Delta (EndOfDxe-&gt;ReadyToBoot)|
|__________________|________|___________|_____________________________|
|                  |        |           |                             |
|Platform 1        |0x1D9E4 |0x2BE0A    |0xE426                       |
|__________________|________|___________|_____________________________|
|                  |        |           |                             |
|Platform 2        |0x123CE |0x1FEE4    |0xDB16                       |
|__________________|________|___________|_____________________________|

2. Plan to do:
   a. Allocate performance data table at EndOfDxe and then lock the varible 
      which store the table address at EndOfDxe.

   b. Enlarge PCD gEfiMdeModulePkgTokenSpaceGuid.PcdExtFpdtBootRecordPadSize 
      from 0x20000 to 0x30000 in order to hold the Delta performance data 
      between EndOfDxe and ReadyToBoot.

   c. SMM performance data is collected by DXE modules through SMM communication 
      at ReadyToBoot now.
      Plan to do SMM communication twice, one for allocating the performance 
      table at EndOfDxe, another is at ReadyToBoot to get SMM performance data 
      between EndOfDxe and ReadyToBoot.

If you have any comment, please let me know.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16581</commentid>
    <comment_count>24</comment_count>
    <who name="Jeremiah Cox">jerecox</who>
    <bug_when>2021-07-07 13:55:10 +0000</bug_when>
    <thetext>Short-term I would advise setting PcdFirmwarePerformanceDataTableS3Support to FALSE.  Long term, feel free to remove the code that adds S3 records to ACPI and FPDT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16582</commentid>
    <comment_count>25</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-07-07 14:01:38 +0000</bug_when>
    <thetext>7/7/2021 infosec meeting feedback:

Recommend &quot;PcdFirmwarePerformanceDataTableS3Support to FALSE&quot; to the system firmware implementation community.

Kevin @ AMI - please update the .json with that statement.

All - please review attached json and subsequent posting w/ the above language

Kevin @ AMI - please submit the CVE to Mitre for publication in order to be public no later than 8/4/2021 in order to be referenced by https://www.blackhat.com/us-21/briefings/schedule/index.html#safeguarding-uefi-ecosystem-firmware-supply-chain-is-hardcoded-23685 presentation on that day.

If Mitre typically takes 2 weeks to process a CVE request, keep that in mind everyone on the content curation and review.

Next infosec meeting is 8/4/21 so any further oppty to discuss this item should be done as part of this ticket.

Given the &apos;disable&apos; recommendation, the long-term fix proposed by Dandan should not be a gating criteria for CVE publication and information dissemination on this topic.

Thanks again for everyone&apos;s input on this topic and Kevin for CVE creation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16674</commentid>
    <comment_count>26</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-07-21 12:07:16 +0000</bug_when>
    <thetext>Kevin @ AMI - any update?  Has this been submitted to Mitre?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16683</commentid>
    <comment_count>27</comment_count>
      <attachid>774</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-07-22 09:21:44 +0000</bug_when>
    <thetext>Created attachment 774
Fix patch based on the latest trunk

Attach the fix patch based on the latest trunk for review firstly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16696</commentid>
    <comment_count>28</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-07-26 04:15:51 +0000</bug_when>
    <thetext>Hi Jiewen, Jian and Hao,

Could you help review the attached patch?


Thanks,
Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16747</commentid>
    <comment_count>29</comment_count>
      <attachid>785</attachid>
    <who name="">kevinj</who>
    <bug_when>2021-08-03 15:48:37 +0000</bug_when>
    <thetext>Created attachment 785
CVE .json file v2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16748</commentid>
    <comment_count>30</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-08-03 15:50:58 +0000</bug_when>
    <thetext>(In reply to Vincent Zimmer from comment #26)
&gt; Kevin @ AMI - any update?  Has this been submitted to Mitre?

Vincent, sorry for the delay. I have updated the .json file as requested. I have submitted to Mitre for publication, however not in enough time to be available for the Black Hat briefing. Sorry about that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16783</commentid>
    <comment_count>31</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2021-08-04 23:42:20 +0000</bug_when>
    <thetext>thanks Kevin

As discussed in today&apos;s infosec mtg, even though the CVE isn&apos;t live, the details of the issue are public.  See https://i.blackhat.com/USA21/Wednesday-Handouts/us-21-Safeguarding-UEFI-Ecosystem-Firmware-Supply-Chain-Is-Hardcoded.pdf starting on page 47.  As such, the decision in the meeting was to open the bugzilla up to be public so that others can assess the details of the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16816</commentid>
    <comment_count>32</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-08-05 18:56:09 +0000</bug_when>
    <thetext>(In reply to Vincent Zimmer from comment #31)
&gt; thanks Kevin
&gt; 
&gt; As discussed in today&apos;s infosec mtg, even though the CVE isn&apos;t live, the
&gt; details of the issue are public.  See
&gt; https://i.blackhat.com/USA21/Wednesday-Handouts/us-21-Safeguarding-UEFI-
&gt; Ecosystem-Firmware-Supply-Chain-Is-Hardcoded.pdf starting on page 47.  As
&gt; such, the decision in the meeting was to open the bugzilla up to be public
&gt; so that others can assess the details of the patch.

Message from MITRE on 8/5/2021 4:46pm below:

&quot;Hello,
 
Regarding your CVE service request, we have the following question or update:
Expect CVE-2021-28216 to be updated/populated on http://cve.mitre.org in the next few hours. &quot;

Regards,
Kevin Jones</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16817</commentid>
    <comment_count>33</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-08-05 18:58:35 +0000</bug_when>
    <thetext>I just checked the MITRE site. The CVE has been populated, thus made public. Link is below.

https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-28216

Regards,
Kevin Jones</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16889</commentid>
    <comment_count>34</comment_count>
      <attachid>794</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-08-11 21:52:57 +0000</bug_when>
    <thetext>Created attachment 794
V2 patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16890</commentid>
    <comment_count>35</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-08-11 21:54:48 +0000</bug_when>
    <thetext>As the bug is open, could we send the patch to edk2 community for review?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17417</commentid>
    <comment_count>36</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-09-29 14:06:04 +0000</bug_when>
    <thetext>Has the EDK2 community reviewed this patch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17476</commentid>
    <comment_count>37</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-10-10 23:52:51 +0000</bug_when>
    <thetext>(In reply to kevinj from comment #36)
&gt; Has the EDK2 community reviewed this patch?

Patch is under community review now.
https://edk2.groups.io/g/devel/message/81743</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17744</commentid>
    <comment_count>38</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-11-11 19:15:41 +0000</bug_when>
    <thetext>Has the EDKII team finished reviewing the patch? If so, has it been pushed to the EDKII master?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17746</commentid>
    <comment_count>39</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2021-11-12 02:53:29 +0000</bug_when>
    <thetext>Pushed to edk2 master via https://github.com/tianocore/edk2/commit/466ebdd2e0919c1538d03cd59833704bd5e1c028</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>662</attachid>
            <date>2021-03-03 11:50:21 +0000</date>
            <delta_ts>2021-03-03 11:50:21 +0000</delta_ts>
            <desc>CVE .json file</desc>
            <filename>2957.json</filename>
            <type>application/json</type>
            <size>904</size>
            <attacher>kevinj</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>774</attachid>
            <date>2021-07-22 09:21:44 +0000</date>
            <delta_ts>2021-07-22 09:21:44 +0000</delta_ts>
            <desc>Fix patch based on the latest trunk</desc>
            <filename>0001-MdeModulePkg-Performance-CVE-2021-28216-Lock-boot-pe.patch</filename>
            <type>application/octet-stream</type>
            <size>70985</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>785</attachid>
            <date>2021-08-03 15:48:37 +0000</date>
            <delta_ts>2021-08-03 15:48:37 +0000</delta_ts>
            <desc>CVE .json file v2</desc>
            <filename>2957_v2.json</filename>
            <type>application/json</type>
            <size>1997</size>
            <attacher>kevinj</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>794</attachid>
            <date>2021-08-11 21:52:57 +0000</date>
            <delta_ts>2021-08-11 21:52:57 +0000</delta_ts>
            <desc>V2 patch</desc>
            <filename>V2-MdeModulePkg-Performance-CVE-2021-28216-Lock-boot-pe.patch</filename>
            <type>application/octet-stream</type>
            <size>53158</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2842</bug_id>
          
          <creation_ts>2020-07-06 02:31:44 +0000</creation_ts>
          <short_desc>Using LLVM compiler set to build BaseTools in Linux</short_desc>
          <delta_ts>2020-07-21 00:39:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13052</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-07-06 02:31:44 +0000</bug_when>
    <thetext>We have enabled CLANGPDB tool chain for edk2, which uses LLVM compiler set.
However, in Linux machine, we still have to depend on GCC to build BaseTools.
I proposal to add a option to let the user to decide to use which compiler to build BaseTools, so one can build edk2 totally without GCC.
I suggest to add &quot;CXX=llvm&quot; to choose clang from LLVM when using make command.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13054</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-07-07 21:37:19 +0000</bug_when>
    <thetext>Confirm this is workable, assign to the submitter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13120</commentid>
    <comment_count>2</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-07-17 00:32:01 +0000</bug_when>
    <thetext>Patch is sent at https://edk2.groups.io/g/devel/message/62063
Here is the usage
First, set the CLANG_BIN environment value, for example:
export CLANG_BIN=~/code/llvm10/source/bin/
Then, when using the make command, add &quot;CXX=llvm&quot; to choose LLVM compiler, for example:
make CXX=llvm -C BaseTools</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13140</commentid>
    <comment_count>3</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-07-21 00:39:48 +0000</bug_when>
    <thetext>fix at 02539e900854488343a1efa435d4dded1ddd66a2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2259</bug_id>
          
          <creation_ts>2019-10-09 19:51:58 +0000</creation_ts>
          <short_desc>Network Pkg DSC is incomplete thus making invalid for CI builds</short_desc>
          <delta_ts>2019-10-24 14:20:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9984</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 19:51:58 +0000</bug_when>
    <thetext>Change is here.  This change also updates dsc to include the TlsNull and BaseCryptNull which have been requested in Features for 2019011 stable tag

https://github.com/spbrogan/edk2/commit/e869ceb74b02457812d10c0e117797ea60de9844</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10065</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:24:42 +0000</bug_when>
    <thetext>All these errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10153</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-21 20:36:48 +0000</bug_when>
    <thetext>Patch for review

https://edk2.groups.io/g/devel/message/49319</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10213</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-24 14:20:42 +0000</bug_when>
    <thetext>pushed as 703232b8e8..6996ec88a2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2723</bug_id>
          
          <creation_ts>2020-05-18 22:09:52 +0000</creation_ts>
          <short_desc>enable edk2 to be built for AARCH64 with gcc10</short_desc>
          <delta_ts>2022-11-11 03:18:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gary Lin">glin</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>mliska</cc>
    
    <cc>nobody</cc>
    
    <cc>pgnet.dev</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12518</commentid>
    <comment_count>0</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2020-05-18 22:09:52 +0000</bug_when>
    <thetext>When building ArmVirtPkg with gcc10, it failed with the following messages:

/usr/lib64/gcc/aarch64-suse-linux/10/ld: /tmp/SecureBootConfigDxe.dll.TGvO1O.ltrans1.ltrans.o: in function `getrn.lto_priv.0&apos;:
/home/abuild/rpmbuild/BUILD/edk2-edk2-stable202002/CryptoPkg/Library/OpensslLib/openssl/crypto/lhash/lhash.c:303: undefined reference to `__aarch64_ldadd8_relax&apos;
/usr/lib64/gcc/aarch64-suse-linux/10/ld: /home/abuild/rpmbuild/BUILD/edk2-edk2-stable202002/CryptoPkg/Library/OpensslLib/openssl/crypto/lhash/lhash.c:313: undefined reference to `__aarch64_ldadd8_relax&apos;
/usr/lib64/gcc/aarch64-suse-linux/10/ld: /home/abuild/rpmbuild/BUILD/edk2-edk2-stable202002/CryptoPkg/Library/OpensslLib/openssl/crypto/lhash/lhash.c:318: undefined reference to `__aarch64_ldadd8_relax&apos;
/usr/lib64/gcc/aarch64-suse-linux/10/ld: /tmp/SecureBootConfigDxe.dll.TGvO1O.ltrans1.ltrans.o: in function `OPENSSL_LH_retrieve&apos;:
/home/abuild/rpmbuild/BUILD/edk2-edk2-stable202002/CryptoPkg/Library/OpensslLib/openssl/crypto/lhash/lhash.c:171: undefined reference to `__aarch64_ldadd8_relax&apos;
/usr/lib64/gcc/aarch64-suse-linux/10/ld: /tmp/SecureBootConfigDxe.dll.TGvO1O.ltrans5.ltrans.o: in function `CRYPTO_DOWN_REF.constprop.0&apos;:
/home/abuild/rpmbuild/BUILD/edk2-edk2-stable202002/CryptoPkg/Library/OpensslLib/openssl/include/internal/refcount.h:50: undefined reference to `__aarch64_ldadd4_relax&apos;
/usr/lib64/gcc/aarch64-suse-linux/10/ld: /tmp/SecureBootConfigDxe.dll.TGvO1O.ltrans5.ltrans.o: in function `EVP_PKEY_up_ref.isra.0&apos;:
/home/abuild/rpmbuild/BUILD/edk2-edk2-stable202002/CryptoPkg/Library/OpensslLib/openssl/include/internal/refcount.h:34: undefined reference to `__aarch64_ldadd4_relax&apos;
collect2: error: ld returned 1 exit status
make: *** [GNUmakefile:425: /home/abuild/rpmbuild/BUILD/edk2-edk2-stable202002/Build/ArmVirtQemu-AARCH64/DEBUG_GCC5/AARCH64/SecurityPkg/VariableAuthenticated/SecureBootConfigDxe/SecureBootConfigDxe/DEBUG/SecureBootConfigDxe.dll] Error 1

The complete log: https://paste.opensuse.org/949a8539

We thought it&apos;s caused but LTO at first, and it turned out to be related to a new option added to gcc10:
```
The option -moutline-atomics has been added to aid deployment of the Large System Extensions (LSE) on GNU/Linux systems built with a baseline architecture targeting Armv8-A. When the option is specified code is emitted to detect the presence of LSE instructions at runtime and use them for standard atomic operations. For more information please refer to the documentation.
```

The build succeeded after adding &quot;-mno-outline-atomics&quot;. Since this option is only for gcc10 and above, should we add a new GCC10 family to BaseTools/Conf/tools_def.template?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12522</commentid>
    <comment_count>1</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2020-05-18 23:10:00 +0000</bug_when>
    <thetext>Update the link to the complete log since it&apos;s going to expire in 1 day...
https://paste.opensuse.org/6607e593</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12524</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-19 06:02:10 +0000</bug_when>
    <thetext>Thanks for the report; CC&apos;ing Ard, Leif, Liming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12525</commentid>
    <comment_count>3</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-05-19 06:13:26 +0000</bug_when>
    <thetext>This problem is not specific to ARM or GCC-10: it appears we are building OpenSSL in a way that relies on C11 atomics if the compiler supports them.

We should probably #define __STDC_NO_ATOMICS__ for all GCC based toolchains on all architectures to work around this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12533</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 21:42:28 +0000</bug_when>
    <thetext>Is this issue also for IA32 or X64 arch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12546</commentid>
    <comment_count>5</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2020-05-19 22:56:56 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #4)
&gt; Is this issue also for IA32 or X64 arch?

No. Actually, OvmfPkg was built successfully without any modification, that&apos;s why we suspect it&apos;s specific to ARM. Anyway, will try __STDC_NO_ATOMICS__ and see how it works.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12555</commentid>
    <comment_count>6</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2020-05-20 03:24:59 +0000</bug_when>
    <thetext>Adding __STDC_NO_ATOMICS__ to gcc cflags seems not working. For example, CRYPTO_UP_REF() is one of the function caused the failure. With __STDC_NO_ATOMICS__, it replaces atomic_fetch_add_explicit() with __atomic_fetch_add(). However, per stdatomic.h, atomic_fetch_add_explicit() is just an alias of __atomic_fetch_add(), so the issue persists. The only fix I see now is to add &quot;-mno-outline-atomics&quot; to aarch64 gcc cflags.

(*) in CryptoPkg/Library/OpensslLib/openssl/include/internal/refcount.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12556</commentid>
    <comment_count>7</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-05-20 03:34:15 +0000</bug_when>
    <thetext>In my version of refcount.h, CRYPTO_UP_REF() is not emitted when __STDC_NO_ATOMICS__ is defined, since HAVE_C11_ATOMICS will not be defined in that case.

Instead, line 131 will take effect

# define CRYPTO_UP_REF(val, ret, lock) CRYPTO_atomic_add(val, 1, ret, lock)

which ties it to an implementation that is not based on C atomics.

So it looks like __STDC_NO_ATOMICS__ is not taking effect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12557</commentid>
    <comment_count>8</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-05-20 04:12:16 +0000</bug_when>
    <thetext>Never mind, there is another branch to the #if that tests __ATOMIC_RELAXED

Let me dig into this a bit deeper.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12562</commentid>
    <comment_count>9</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-05-20 06:07:04 +0000</bug_when>
    <thetext>I have sent out a patch to edk2-devel that adds the atomics intrinsics to the compiler intrinsics library. This approach is preferable to adding an entirely new GCC10 toolchain profile just for AARCH64.

Please confirm whether that fixes the build issue, and that the resulting build works as expected.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12563</commentid>
    <comment_count>10</comment_count>
    <who name="Martin Liška">mliska</who>
    <bug_when>2020-05-20 06:37:47 +0000</bug_when>
    <thetext>(In reply to Ard Biesheuvel from comment #9)
&gt; I have sent out a patch to edk2-devel that adds the atomics intrinsics to
&gt; the compiler intrinsics library. This approach is preferable to adding an
&gt; entirely new GCC10 toolchain profile just for AARCH64.
&gt; 

I disagree here. You are duplicating an assembly code that can change in the future in GCC run-time library.
I would prefer to do a version detection and append -mno-outline-atomics.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12564</commentid>
    <comment_count>11</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-05-20 07:13:36 +0000</bug_when>
    <thetext>(In reply to Martin Liška from comment #10)
&gt; (In reply to Ard Biesheuvel from comment #9)
&gt; &gt; I have sent out a patch to edk2-devel that adds the atomics intrinsics to
&gt; &gt; the compiler intrinsics library. This approach is preferable to adding an
&gt; &gt; entirely new GCC10 toolchain profile just for AARCH64.
&gt; &gt; 
&gt; 
&gt; I disagree here. You are duplicating an assembly code that can change in the
&gt; future in GCC run-time library.

Whether the library itself changes is irrelevant. The question is whether the prototypes are likely to change, and given the fact that they are exposed through a shared object (libgcc.so), that is highly unlikely.

Note that we don&apos;t need LSE and LL/SC versions for UEFI: there is no concurrency, so even on LSE capable hardware, we can use the LL/SC sequences without any performance impact. Also, the OpenSSL code that refers to these functions is likely to be dead code anyway, as we don&apos;t rely on refcounts and dynamically instantiated objects.


&gt; I would prefer to do a version detection and append -mno-outline-atomics.

How would we do a version detection? No infrastructure currently exists for that in EDK2, so the only recourse we have is cloning the entire toolchain definition, only to add -mno-outline-atomics to the AARCH64 version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12565</commentid>
    <comment_count>12</comment_count>
    <who name="Martin Liška">mliska</who>
    <bug_when>2020-05-20 08:46:06 +0000</bug_when>
    <thetext>&gt; 
&gt; How would we do a version detection? No infrastructure currently exists for
&gt; that in EDK2, so the only recourse we have is cloning the entire toolchain
&gt; definition, only to add -mno-outline-atomics to the AARCH64 version.

You can do a standard configure detection for an option. If the option is present, add it to options. If not, skip it.

I see that the capability is missing, but duplication of run-time library code seems to me as ugly work around.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12566</commentid>
    <comment_count>13</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-05-20 08:55:50 +0000</bug_when>
    <thetext>(In reply to Martin Liška from comment #12)
&gt; &gt; 
&gt; &gt; How would we do a version detection? No infrastructure currently exists for
&gt; &gt; that in EDK2, so the only recourse we have is cloning the entire toolchain
&gt; &gt; definition, only to add -mno-outline-atomics to the AARCH64 version.
&gt; 
&gt; You can do a standard configure detection for an option. If the option is
&gt; present, add it to options. If not, skip it.
&gt; 

Patches welcome. In the mean time, adding a GCC10 toolchain definition is really not an option.

&gt; I see that the capability is missing, but duplication of run-time library
&gt; code seems to me as ugly work around.

Just must be new here :-)

EDK2 cannot use any toolchain supplied runtime libraries to begin with. We cannot use libgcc or anything else that GCC might expect to be there, for various reasons, one being that the codegen is not always compatible (some of the code runs with the MMU and caches off, for instance, and in some cases we cannot use the FP/SIMD registers, which are part of the standard ABI for hosted binaries on AArch64)

Not having to provide these intrinsics would be preferable, but having an EDK2 specific implementation otherwise is business as usual.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12567</commentid>
    <comment_count>14</comment_count>
    <who name="Martin Liška">mliska</who>
    <bug_when>2020-05-20 09:13:25 +0000</bug_when>
    <thetext>(In reply to Ard Biesheuvel from comment #13)
&gt; (In reply to Martin Liška from comment #12)
&gt; &gt; &gt; 
&gt; &gt; &gt; How would we do a version detection? No infrastructure currently exists for
&gt; &gt; &gt; that in EDK2, so the only recourse we have is cloning the entire toolchain
&gt; &gt; &gt; definition, only to add -mno-outline-atomics to the AARCH64 version.
&gt; &gt; 
&gt; &gt; You can do a standard configure detection for an option. If the option is
&gt; &gt; present, add it to options. If not, skip it.
&gt; &gt; 
&gt; 
&gt; Patches welcome. In the mean time, adding a GCC10 toolchain definition is
&gt; really not an option.

Ok.

&gt; 
&gt; &gt; I see that the capability is missing, but duplication of run-time library
&gt; &gt; code seems to me as ugly work around.
&gt; 
&gt; Just must be new here :-)
&gt; 
&gt; EDK2 cannot use any toolchain supplied runtime libraries to begin with. We
&gt; cannot use libgcc or anything else that GCC might expect to be there, for
&gt; various reasons, one being that the codegen is not always compatible (some
&gt; of the code runs with the MMU and caches off, for instance, and in some
&gt; cases we cannot use the FP/SIMD registers, which are part of the standard
&gt; ABI for hosted binaries on AArch64)

An alternative solution can be usage of #pragma GCC target &quot;mno-outline-atomics&quot;
for the problematic functions. One can close that in a macro detection for a GCC version:

https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html
https://gcc.gnu.org/onlinedocs/gcc/Function-Specific-Option-Pragmas.html

&gt; 
&gt; Not having to provide these intrinsics would be preferable, but having an
&gt; EDK2 specific implementation otherwise is business as usual.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12568</commentid>
    <comment_count>15</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-05-20 11:02:41 +0000</bug_when>
    <thetext>(In reply to Martin Liška from comment #14)
&gt; (In reply to Ard Biesheuvel from comment #13)
...
&gt; &gt; EDK2 cannot use any toolchain supplied runtime libraries to begin with. We
&gt; &gt; cannot use libgcc or anything else that GCC might expect to be there, for
&gt; &gt; various reasons, one being that the codegen is not always compatible (some
&gt; &gt; of the code runs with the MMU and caches off, for instance, and in some
&gt; &gt; cases we cannot use the FP/SIMD registers, which are part of the standard
&gt; &gt; ABI for hosted binaries on AArch64)
&gt; 
&gt; An alternative solution can be usage of #pragma GCC target
&gt; &quot;mno-outline-atomics&quot;
&gt; for the problematic functions. One can close that in a macro detection for a
&gt; GCC version:
&gt; 
&gt; https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html
&gt; https://gcc.gnu.org/onlinedocs/gcc/Function-Specific-Option-Pragmas.html
&gt; 

That is the first thing I tried, but I could not get it to work. What exact syntax did you use to enable that?

We could put that in MdePkg/Include/AArch64/ProcessorBind.h (for __GNUC__ &gt;= 9), in which case we wouldn&apos;t need to fix anything at all elsewhere.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12578</commentid>
    <comment_count>16</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-20 19:53:12 +0000</bug_when>
    <thetext>Ard posted:

* [edk2-devel] [PATCH]
  ArmPkg/CompilerIntrinsicsLib: provide atomics intrinsics

  http://mid.mail-archive.com/20200520100503.22065-1-ard.biesheuvel@arm.com
  https://edk2.groups.io/g/devel/message/59950

* [edk2-devel] [PATCH v2]
  ArmPkg/CompilerIntrinsicsLib: provide atomics intrinsics

  http://mid.mail-archive.com/20200520114448.26104-1-ard.biesheuvel@arm.com
  https://edk2.groups.io/g/devel/message/59961</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12611</commentid>
    <comment_count>17</comment_count>
    <who name="Martin Liška">mliska</who>
    <bug_when>2020-05-21 02:57:17 +0000</bug_when>
    <thetext>&gt; That is the first thing I tried, but I could not get it to work. What exact
&gt; syntax did you use to enable that?

So the option is not supported in target attribute. I can propose a patch that can do that..

&gt; 
&gt; We could put that in MdePkg/Include/AArch64/ProcessorBind.h (for __GNUC__ &gt;=
&gt; 9), in which case we wouldn&apos;t need to fix anything at all elsewhere.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12612</commentid>
    <comment_count>18</comment_count>
    <who name="Martin Liška">mliska</who>
    <bug_when>2020-05-21 03:26:12 +0000</bug_when>
    <thetext>I proposed a patch:
https://gcc.gnu.org/pipermail/gcc-patches/2020-May/546203.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12632</commentid>
    <comment_count>19</comment_count>
    <who name="Martin Liška">mliska</who>
    <bug_when>2020-05-21 06:50:55 +0000</bug_when>
    <thetext>So the attribute support has just landed to master:
https://gcc.gnu.org/git/?p=gcc.git;a=commit;h=9e02b45ffc60e0078bde3c56a14f00c54b7f8039

and you&apos;ll be able to use the attribute like this:
https://gcc.gnu.org/git/?p=gcc.git;a=blob;f=gcc/testsuite/gcc.target/aarch64/target_attr_20.c;h=509fb039e8476327a0659c43a3e5c8801b476ca6;hb=9e02b45ffc60e0078bde3c56a14f00c54b7f8039#l8

I&apos;m planning doing backport to all active branches, so also to 10.2 which will be released in couple of weeks from now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12635</commentid>
    <comment_count>20</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-05-21 07:19:16 +0000</bug_when>
    <thetext>(In reply to Martin Liška from comment #19)
&gt; So the attribute support has just landed to master:
&gt; https://gcc.gnu.org/git/?p=gcc.git;a=commit;
&gt; h=9e02b45ffc60e0078bde3c56a14f00c54b7f8039
&gt; 
&gt; and you&apos;ll be able to use the attribute like this:
&gt; https://gcc.gnu.org/git/?p=gcc.git;a=blob;f=gcc/testsuite/gcc.target/aarch64/
&gt; target_attr_20.c;h=509fb039e8476327a0659c43a3e5c8801b476ca6;
&gt; hb=9e02b45ffc60e0078bde3c56a14f00c54b7f8039#l8
&gt; 
&gt; I&apos;m planning doing backport to all active branches, so also to 10.2 which
&gt; will be released in couple of weeks from now.

Thanks for fixing that. Does it support the #pragma as well? The function attribute is not that useful in our case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12636</commentid>
    <comment_count>21</comment_count>
    <who name="Martin Liška">mliska</who>
    <bug_when>2020-05-21 07:19:47 +0000</bug_when>
    <thetext>&gt; 
&gt; Thanks for fixing that. Does it support the #pragma as well? The function
&gt; attribute is not that useful in our case.

Yes, that will work as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12676</commentid>
    <comment_count>22</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-22 16:09:42 +0000</bug_when>
    <thetext>I consider this a feature request. As I just said on the list, &quot;gcc-10 is a new
toolchain; so even if we don&apos;t introduce a new toolchain tag such as GCC10 for it, whatever we do in order to make it work, that&apos;s feature enablement in my book&quot;.

Updating some fields accordingly (Product, Title, affected Packages). If there&apos;s strong disagreement, we can revert these BZ field changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19989</commentid>
    <comment_count>23</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-11-10 23:03:23 +0000</bug_when>
    <thetext>Is this still an open issue?

I think these packages are building with latest GCC in EDK II CI now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19998</commentid>
    <comment_count>24</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2022-11-11 03:18:50 +0000</bug_when>
    <thetext>Gcc10 is not an issue anymore. Let&apos;s close the bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2151</bug_id>
          
          <creation_ts>2019-09-03 12:54:53 +0000</creation_ts>
          <short_desc>Enable Unified API for UEFI drivers utilizing HASH/RSA Authentication Mechanism</short_desc>
          <delta_ts>2020-02-03 19:23:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2389</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Amol Sukerkar">amol.n.sukerkar</reporter>
          <assigned_to name="Amol Sukerkar">amol.n.sukerkar</assigned_to>
          <cc>amol.n.sukerkar</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>sachin.agrawal</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9449</commentid>
    <comment_count>0</comment_count>
    <who name="Amol Sukerkar">amol.n.sukerkar</who>
    <bug_when>2019-09-03 12:54:53 +0000</bug_when>
    <thetext>Currently, the calls to HASH algo are hard-coded to use SHA1 and SHA256 to authenticate a variable such as HDD password or to calculate HASH in drivers such as PeiBootguardEventLog.

This feature introduces a Unified API in SecurityPkg to which can be used instead of hard-coded calls to HASH algorithms. This API can also be extended to SHA384 and SM3_256 HASH algorithms.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10492</commentid>
    <comment_count>1</comment_count>
      <attachid>434</attachid>
    <who name="Amol Sukerkar">amol.n.sukerkar</who>
    <bug_when>2019-11-20 11:18:09 +0000</bug_when>
    <thetext>Created attachment 434
Design Proposal for Unified Hashing API

Attached is the design proposal for Unified Hash API implementation in EDK2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10564</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-27 05:42:31 +0000</bug_when>
    <thetext>(In reply to Amol Sukerkar from comment #0)
&gt; This API can also be extended to SHA384 and SM3_256 HASH algorithms.

see also: bug 2389</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10565</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-27 05:43:11 +0000</bug_when>
    <thetext>Discussion on edk2-rfc:

[edk2-rfc] Unified API for Hashing Algorithms in EDK2
https://edk2.groups.io/g/rfc/message/194</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11057</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-03 16:31:48 +0000</bug_when>
    <thetext>Patch email for review V1:
    https://edk2.groups.io/g/devel/message/52374
Patch email for review V2:
    https://edk2.groups.io/g/devel/message/53227
Patch email for review V3:
    https://edk2.groups.io/g/devel/message/53282
Patch email for review V4:
    https://edk2.groups.io/g/devel/message/53375
Patch email for review V5:
    https://edk2.groups.io/g/devel/message/53452
Patch email for review V6:
    https://edk2.groups.io/g/devel/message/53513
Patch email for review V7:
    https://edk2.groups.io/g/devel/message/53552
Patch email for review V8:
    https://edk2.groups.io/g/devel/message/53619
    https://edk2.groups.io/g/devel/message/53620
Patch email for review V9:
    https://edk2.groups.io/g/devel/message/53677

Branch V9:
    https://github.com/mdkinney/edk2/tree/BZ_2151_HashApiLib_V9

GitHub PR:
    https://github.com/tianocore/edk2/pull/328</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11058</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-03 18:42:09 +0000</bug_when>
    <thetext>A couple minor issues were found by EDK II CI and were reviewed
and accepted:

    https://edk2.groups.io/g/devel/message/53685

These were resolved on the following branch and PR.

    https://github.com/mdkinney/edk2/tree/BZ_2151_HashApiLib_V9
    https://github.com/tianocore/edk2/pull/328

V10 was posted to the mailing list to archive the version
with the minor changes that were reviewed and accepted.

    https://edk2.groups.io/g/devel/message/53686</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11059</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-03 19:21:56 +0000</bug_when>
    <thetext>Update target package to CryptoPkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11060</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-03 19:23:56 +0000</bug_when>
    <thetext>Commit range
    2c061de063..3feea54eae

GitHub PR
    https://github.com/tianocore/edk2/pull/328</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>434</attachid>
            <date>2019-11-20 11:18:09 +0000</date>
            <delta_ts>2019-11-20 11:18:09 +0000</delta_ts>
            <desc>Design Proposal for Unified Hashing API</desc>
            <filename>Hash Unified API Support in EDK2.pdf</filename>
            <type>application/pdf</type>
            <size>300733</size>
            <attacher name="Amol Sukerkar">amol.n.sukerkar</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2614</bug_id>
          
          <creation_ts>2020-03-23 02:38:24 +0000</creation_ts>
          <short_desc>Arrays might use invalid index</short_desc>
          <delta_ts>2020-05-20 05:24:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>maciej.rabeda</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11764</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-03-23 02:38:24 +0000</bug_when>
    <thetext>NetworkPkg\IScsiDxe\IScsiDhcp.c   line 129
Array &apos;TargetUrl&apos; of size 255 may use index value(s) 255..256

NetworkPkg\IScsiDxe\IScsiDhcp.c   line 168
Array &apos;TargetUrl&apos; of size 255 may use index value(s) 255..256</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11766</commentid>
    <comment_count>1</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-03-23 08:53:55 +0000</bug_when>
    <thetext>Code reviewed - risk exists.
Moving to CONFIRMED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11770</commentid>
    <comment_count>2</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-03-23 10:47:10 +0000</bug_when>
    <thetext>IScsiDhcpExtractRootPath() and IScsiDhcp6ExtractRootPath() from identified problematic lines process DHCP root-path. Lines identified are copying server name identified as DNS domain name.

According to RFC 1035, section 2.3.4 (https://www.freesoft.org/CIE/RFC/1035/9.htm), full domain name should be no longer than 255 octets. Furthermore, it should be not more than 253 readable characters (255 minus length and zero termination) - see https://devblogs.microsoft.com/oldnewthing/?p=7873.

IMHO, can easily fix this by turning &quot;&gt;&quot; into &quot;&gt;=&quot; in the lines identified.

if (Field-&gt;Len &gt;= sizeof (ConfigNvData-&gt;TargetUrl)) {...}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12560</commentid>
    <comment_count>3</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-05-20 05:24:20 +0000</bug_when>
    <thetext>Fixed.
Patch message: https://edk2.groups.io/g/devel/message/58045
Commit ID: 0f1946b6626e263c7f764c21cc241cc9faf8a1ae
PR: https://github.com/tianocore/edk2/pull/546</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2041</bug_id>
          
          <creation_ts>2019-08-01 02:05:36 +0000</creation_ts>
          <short_desc>Improve FSP Python scripts to support 3.x.</short_desc>
          <delta_ts>2019-08-02 03:05:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ching Jen, Cheng">ching.jenx.cheng</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8673</commentid>
    <comment_count>0</comment_count>
      <attachid>370</attachid>
    <who name="Ching Jen, Cheng">ching.jenx.cheng</who>
    <bug_when>2019-08-01 02:05:36 +0000</bug_when>
    <thetext>Created attachment 370
fail message

Improve Python3.x support with IntelFsp2Pkg/Tools/GenCfgOpt.py,
Base on &lt;&lt;, print(&apos;%x&apos; % ) is only support for int, not float..</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8678</commentid>
    <comment_count>1</comment_count>
    <who name="Ching Jen, Cheng">ching.jenx.cheng</who>
    <bug_when>2019-08-01 03:59:00 +0000</bug_when>
    <thetext>this error only happen while using python3(py -3) to build bios.
Here is my error log

Start of PreBuild ...
Traceback (most recent call last):
  File &quot;xxxxx\Edk2\IntelFsp2Pkg\Tools\GenCfgOpt.py&quot;, line 1549, in &lt;module&gt;
    sys.exit(Main())
  File &quot;xxxxx\Edk2\IntelFsp2Pkg\Tools\GenCfgOpt.py&quot;, line 1512, in Main
    if GenCfgOpt.ParseDscFile(DscFile, FvDir) != 0:
  File &quot;xxxxx\Edk2\IntelFsp2Pkg\Tools\GenCfgOpt.py&quot;, line 649, in ParseDscFile
    ConfigDict[&apos;order&apos;] = ConfigDict[&apos;offset&apos;] &lt;&lt; 8
TypeError: unsupported operand type(s) for &lt;&lt;: &apos;float&apos; and &apos;int&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8739</commentid>
    <comment_count>2</comment_count>
    <who name="Ching Jen, Cheng">ching.jenx.cheng</who>
    <bug_when>2019-08-02 03:05:06 +0000</bug_when>
    <thetext>This issue has been fixed in commit 5e4ebd9ea5d72c1a2824d23a5dc92c7b50694719</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>370</attachid>
            <date>2019-08-01 02:05:36 +0000</date>
            <delta_ts>2019-08-01 02:05:36 +0000</delta_ts>
            <desc>fail message</desc>
            <filename>3.png</filename>
            <type>image/png</type>
            <size>1509</size>
            <attacher name="Ching Jen, Cheng">ching.jenx.cheng</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2514</bug_id>
          
          <creation_ts>2020-02-10 15:13:17 +0000</creation_ts>
          <short_desc>Disable EBC for UnitTestFrameworkPkg and all unit tests</short_desc>
          <delta_ts>2020-02-11 18:58:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11188</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-10 15:13:17 +0000</bug_when>
    <thetext>The UnitTestLib uses vararg macros, and these are not supported
by the EBC compiler.  Disable the EBC in the UnitTestFrameworkPkg
and all unit tests in packages that use the UnitTestLib class.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11189</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-10 15:13:32 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11212</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-11 18:52:27 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11213</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-11 18:54:50 +0000</bug_when>
    <thetext>Path email for review:

https://edk2.groups.io/g/devel/message/54162
https://edk2.groups.io/g/devel/message/54163
https://edk2.groups.io/g/devel/message/54164</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11214</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-11 18:58:45 +0000</bug_when>
    <thetext>Pushed as b3407223c5..27fb01a0b0

EDK II CI PR: https://github.com/tianocore/edk2/pull/365</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11215</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-11 18:58:57 +0000</bug_when>
    <thetext>Finished</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2395</bug_id>
          
          <creation_ts>2019-11-29 02:55:04 +0000</creation_ts>
          <short_desc>InternalShellExecuteDevicePath: Return invalid argument error instead of ASSERT while error happened during arguments parsing</short_desc>
          <delta_ts>2020-06-03 16:31:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10588</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-11-29 02:55:04 +0000</bug_when>
    <thetext>Errors happened in the arguments parsing is not a critical error in below code:
    Status = UpdateArgcArgv(&amp;ShellParamsProtocol, NewCmdLine, Efi_Application, NULL, NULL);
    ASSERT_EFI_ERROR(Status);
And it would miss the error status code in the release version of shell. So replace the ASSERT with the return error status code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10589</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-11-29 02:55:35 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10734</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-12-19 00:23:26 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/95bb203861c5e19b7b7d5d9318e16d82108f2134</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2284</bug_id>
          
          <creation_ts>2019-10-17 03:18:14 +0000</creation_ts>
          <short_desc>MemoryAllocationServicesBBTestFunction - some MemType print value is not correct</short_desc>
          <delta_ts>2021-09-07 04:35:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</reporter>
          <assigned_to name="Edhay">edhaya.chandran</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10052</commentid>
    <comment_count>0</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2019-10-17 03:18:14 +0000</bug_when>
    <thetext>In some instances of the test assertion print outs, the value of MemType is not formatted correctly

For example:

&quot;BS.AllocatePages - AllocateAddress return Address -- PASS
BD3EABA7-8C6D-420C-8456-9D37617C8ECB
/home/samer/dev/git/tianocore/edk2/SctPkg/TestCase/UEFI/EFI/BootServices/MemoryAllocationServices/BlackBoxTest/MemoryAllocationServicesBBTestFunction.c:786:TPL - 8, MemType - 2147483648
&quot;

vs in other cases when it prints out the correct value:

&quot;BS.AllocatePages - AllocateAddress address page-aligned -- PASS
CA38BFCB-036F-4F3B-8921-E7276C91452E
/home/samer/dev/git/tianocore/edk2/SctPkg/TestCase/UEFI/EFI/BootServices/MemoryAllocationServices/BlackBoxTest/MemoryAllocationServicesBBTestFunction.c:764:TPL - 8, MemType - 13
&quot;

The errornous output (MemType - 21474836480) seems to be setting bit[32]:
2147483648 = 0x8000 0000‬</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10150</commentid>
    <comment_count>1</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-10-21 12:58:17 +0000</bug_when>
    <thetext>Acked. In pipeline for next version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15857</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-04-30 14:50:49 +0000</bug_when>
    <thetext>In BBTestAllocatePagesInterfaceTest() AllocatePagesMemoryType[] is of type EFI_MEMORY_TYPE. EFI_MEMORY_TYPE is an enum which may be modeled as a 32 integer. SctPrint() with &apos;%d&apos; expects type UNITN. We have to add the missing conversions to UINTN.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15858</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-04-30 15:36:42 +0000</bug_when>
    <thetext>AllocatePagesMemoryType contains values

  0x80000000 = 2147483648
  0xC0000000 = 3221225472
  0xFFFFFFFF = 4294967295

The values are valid. Only the range EfiMaxMemoryType..0x6FFFFFFF is illegal.

These values are not mal-formatted but expected.

We still have to convert the enum to the type expect by SctPrint().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15859</commentid>
    <comment_count>4</comment_count>
      <attachid>714</attachid>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-04-30 15:43:17 +0000</bug_when>
    <thetext>Created attachment 714
[PATCH edk2-test 1/1] uefi-sct/SctPkg: correct print code for EFI_MEMORY_TYPE

Patch appended and sent to mailing list:

[PATCH edk2-test 1/1] uefi-sct/SctPkg: correct print code for EFI_MEMORY_TYPE
https://edk2.groups.io/g/devel/message/74678</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16007</commentid>
    <comment_count>5</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-05-11 17:38:18 +0000</bug_when>
    <thetext>Heinrich sent patch to EDK2 Dev list</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16034</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-12 02:26:10 +0000</bug_when>
    <thetext>For the appended patch

Reviewed-by: Samer El-Haj-Mahmoud &lt;Samer.El-Haj-Mahmoud@arm.com&gt;
https://edk2.groups.io/g/devel/message/75034</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16746</commentid>
    <comment_count>7</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-08-03 12:13:14 +0000</bug_when>
    <thetext>Reviewed-by: G Edhaya Chandran&lt;edhaya.chandran@arm.com&gt;
https://edk2.groups.io/g/devel/message/77653

Kindly consider the appended patch for merging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17151</commentid>
    <comment_count>8</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-02 11:23:54 +0000</bug_when>
    <thetext>Patch to be merged by the maintainers</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17180</commentid>
    <comment_count>9</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-07 04:35:13 +0000</bug_when>
    <thetext>The patch is upstreamed through the commit-id : 1abfd7a6e48eab8c1434dd657c7864aaf6ed7a11

Closing the ticket</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>714</attachid>
            <date>2021-04-30 15:43:17 +0000</date>
            <delta_ts>2021-04-30 15:43:17 +0000</delta_ts>
            <desc>[PATCH edk2-test 1/1] uefi-sct/SctPkg: correct print code for EFI_MEMORY_TYPE</desc>
            <filename>0001-uefi-sct-SctPkg-correct-print-code-for-EFI_MEMORY_TY.patch</filename>
            <type>text/plain</type>
            <size>21053</size>
            <attacher name="Heinrich Schuchardt">xypron.glpk</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2752</bug_id>
          
          <creation_ts>2020-05-21 07:05:07 +0000</creation_ts>
          <short_desc>OvmfPkg/Tcg2ConfigPei: trivial cleanups</short_desc>
          <delta_ts>2020-06-09 15:19:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>2728</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>marcandre.lureau</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12633</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 07:05:07 +0000</bug_when>
    <thetext>Once we have bug 2728 fixed (for edk2-stable202005), we should clean up the following two oversights in OvmfPkg/Tcg2ConfigPei:

(1) The leading comments in &quot;Tcg2ConfigPei.inf&quot; and &quot;Tcg2ConfigPeim.c&quot; say,

&quot;In OvmfPkg, the module only performs TPM2 hardware detection.&quot;

The statement hasn&apos;t been correct since commit 89236992913f (&quot;OvmfPkg: detect TPM 1.2 in Tcg2ConfigPei&quot;, 2020-03-04). Thus the idea is to replace &quot;TPM2&quot; with &quot;TPM&quot; (without stating a version) in those file-top comments.

(2) BaseLib interfaces (SwapBytesXx()) are only used in &quot;Tpm12Support.c&quot;, therefore the BaseLib class dependency should also be restricted to IA32 &amp; X64, in the INF file. (This is already implied by the &quot;#include &lt;Library/BaseLib.h&gt;&quot; directive being present only in &quot;Tpm12Support.c&quot;.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12634</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 07:05:27 +0000</bug_when>
    <thetext>Plan to work on this after edk2-stable202005.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12786</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-03 13:05:19 +0000</bug_when>
    <thetext>Posted

* [edk2-devel] [PATCH 0/2] OvmfPkg/Tcg2ConfigPei: trivial cleanups

http://mid.mail-archive.com/20200603170413.23936-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/60690</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12826</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-09 15:19:24 +0000</bug_when>
    <thetext>Merged in commit range 6aa48ab791ec..82e0b2f043c1, via &lt;https://github.com/tianocore/edk2/pull/670&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2305</bug_id>
          
          <creation_ts>2019-10-23 04:09:16 +0000</creation_ts>
          <short_desc>Add support for SMBIOS 3.3.0</short_desc>
          <delta_ts>2019-11-14 22:18:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Sai Chaganty">rangasai.v.chaganty</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10189</commentid>
    <comment_count>0</comment_count>
    <who name="Sai Chaganty">rangasai.v.chaganty</who>
    <bug_when>2019-10-23 04:09:16 +0000</bug_when>
    <thetext>DMTF has released SMBIOS 3.3.0 specification - https://www.dmtf.org/sites/default/files/standards/documents/DSP0134_3.3.0.pdf

The following changes were made to version 3.2.0 of the document to produce this
version:
• System Slots (Type 9):
– Add PCI Express Gen 4 values
– Clarify bus number usage for PCI Express
• Memory Device (Type 17):
– Add new memory device type value (HBM) and new form factor value (Die)
– Update the string for Intel persistent memory
• Various:
– Add support for RISC-V processors, add structure type 44 (processor-additional information)
– add support for CXL Flexbus</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10262</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-01 02:32:05 +0000</bug_when>
    <thetext>RISC-V definition has been added into Edk2. Please see BZ https://bugzilla.tianocore.org/show_bug.cgi?id=2202</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10305</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-11-04 00:01:37 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10429</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-11-14 05:02:19 +0000</bug_when>
    <thetext>fixed at 70c50f19205e7c93292306fa67998b59b1f137c0..da178f5c5c5832476d37c8a3734815ceea16af86.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10451</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 22:18:04 +0000</bug_when>
    <thetext>This is a feature, not bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2774</bug_id>
          
          <creation_ts>2020-05-28 14:10:34 +0000</creation_ts>
          <short_desc>BS.GetNextMonotonicCount - high 32 bit increase by 1 FAILURE.</short_desc>
          <delta_ts>2022-04-19 08:17:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tuan Phan">tphan</reporter>
          <assigned_to name="Edhay">edhaya.chandran</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>eric.jin</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12758</commentid>
    <comment_count>0</comment_count>
    <who name="Tuan Phan">tphan</who>
    <bug_when>2020-05-28 14:10:34 +0000</bug_when>
    <thetext>Hi All,
I think i found the corner case of this test.

The log:
BS.GetNextMonotonicCount - high 32 bit increase by 1 -- FAILURE
0EC16C83-177D-461A-9622-42508C99D966
/home/edhcha01/RELEASE_V2.4/arm-enterprise-acs/luv/build/tmp/work/aarch64-oe-linux/sbbr/v1.1+gitAUTOINC+b558bad254-r0/edk2/SctPkg/TestCase/UEFI/EFI/BootServices/MiscBootServices/BlackBoxTest/MiscBootServicesBBTestFunction.c:1722:Count - F0000000F, Count2 - 110000000C, TPL - 16

During the reboot, the high 32bit monotonic counter can be increased more than 1. Before SCT app can be re-run, other drivers such as network can call GetNextMonotonicCount many times which can cause overflow low 32bit monotonic. Therefore, the high 32bit monotonic counter will be increased to 1 plus the 1 during every reboot so the test that just compares if old counter value plus 1 is equal or not the new value will fail.

Any ideas on this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12770</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-02 21:36:47 +0000</bug_when>
    <thetext>hi Tuan Phan,

can you help to contribute a patch for this issue? The SCT owner can help to review the change. Appreciate your contribution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17143</commentid>
    <comment_count>2</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-02 10:37:46 +0000</bug_when>
    <thetext>Have a reasonable value to check the increase of the counter.
Edhay to work on the fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17894</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-12-02 02:58:30 +0000</bug_when>
    <thetext>To be discussed:
For Discussion:

From the UEFI Spec:
&quot;The platform’s monotonic counter is comprised of two parts: the high 32 bits and the low 32 bits. The low 32-bit value is volatile and is reset to zero on every system reset. It is increased by 1 on every call to GetNextMonotonicCount(). The high 32-bit value is nonvolatile and is increased by one on whenever the system resets or the low 32-bit counter overflows.&quot;



From the above:
1. The low 32 bits is reset to 0 after every reset. This means that if has to overflow then the GetNextMonotonicCount() must be called atleast 2^32 times by other drivers till the time SCT executes.

From the logs:
Original count = 0F 0000000F  
New Count      = 11 0000000C



Here the higher 64 bit is incremented by 2. From 0F to 11. One for restart, 1 for overflow
GetNextMonotonicCount() was called 2^32 + C times.
Is this practical?

2. Is checking the counter with oldcount+1 and oldcount+2 is enough?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17901</commentid>
    <comment_count>4</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-12-02 09:38:41 +0000</bug_when>
    <thetext>Throw an error if the count is less or equal
Display Warning if count is greater than oldcount+1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18527</commentid>
    <comment_count>5</comment_count>
      <attachid>949</attachid>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-03-03 05:28:00 +0000</bug_when>
    <thetext>Created attachment 949
Updated the check for monotonic count after restart</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18528</commentid>
    <comment_count>6</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-03-03 05:29:05 +0000</bug_when>
    <thetext>Solution patch is sent for review: 
https://edk2.groups.io/g/devel/topic/patch_1_1_uefi_sct_sctpkg/89521751?p=,,,20,0,0,0::recentpostdate/sticky,,,20,2,0,89521751,previd=1646301982875003639,nextid=1646234597505926768&amp;previd=1646301982875003639&amp;nextid=1646234597505926768</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18837</commentid>
    <comment_count>7</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-04-19 08:17:41 +0000</bug_when>
    <thetext>The patch is upstreamed through commit-id : 
https://github.com/tianocore/edk2-test/commit/dedfd87f76a9b48bfc03511c19beba285c4f5a81</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>949</attachid>
            <date>2022-03-03 05:28:00 +0000</date>
            <delta_ts>2022-03-03 05:28:00 +0000</delta_ts>
            <desc>Updated the check for monotonic count after restart</desc>
            <filename>0001-UEFI-SCT-SctPkg-Updated-the-check-for-monotonic-coun.patch</filename>
            <type>text/plain</type>
            <size>3051</size>
            <attacher name="Edhay">edhaya.chandran</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2199</bug_id>
          
          <creation_ts>2019-09-17 17:24:03 +0000</creation_ts>
          <short_desc>Convert Hisilicon and Marvel UNI files from UTF-16 to UTF-8</short_desc>
          <delta_ts>2019-10-03 18:06:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9702</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-09-17 17:24:03 +0000</bug_when>
    <thetext>The following files in the edk2-platforms repo are in UTF-16 format and should be converted to UTF-8.

Platform/Hisilicon/D03/Library/OemMiscLib2P/BoardFeature2PHi1610Strings.uni
Silicon/Hisilicon/Drivers/Smbios/SmbiosMiscDxe/Type09/MiscSystemSlotDesignation.uni
Silicon/Marvell/Applications/EepromCmd/EepromCmd.uni
Silicon/Marvell/Applications/FirmwareUpdate/FUpdate.uni
Silicon/Marvell/Applications/SpiTool/SpiFlashCmd.uni</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9711</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-09-18 20:23:41 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9712</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-09-18 20:24:42 +0000</bug_when>
    <thetext>Patch emails for review

https://edk2.groups.io/g/devel/message/47511
https://edk2.groups.io/g/devel/message/47512
https://edk2.groups.io/g/devel/message/47513</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9919</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-03 18:06:10 +0000</bug_when>
    <thetext>Push as 777573818e..34f049a2b2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2085</bug_id>
          
          <creation_ts>2019-08-15 23:10:32 +0000</creation_ts>
          <short_desc>Process_files.pl needs to be updated to add missing header files in generated inf files</short_desc>
          <delta_ts>2019-10-29 22:41:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9019</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-15 23:10:32 +0000</bug_when>
    <thetext>There is missing header files message when building CryptoPkg.
The header files are needed in OpensslLib.inf and OpensslLibCrypto.inf, which are generated by Process_files.pl.
So we need to update the perl script to make the generated infs include the missing header files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9020</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-15 23:11:03 +0000</bug_when>
    <thetext>Assign to Shenglei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10238</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-29 22:41:54 +0000</bug_when>
    <thetext>Reviewed @ https://edk2.groups.io/g/devel/topic/39393851#49580
Pushed @ 9f4fbd56d43054cc73d722c1643659f9741c0fcf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2555</bug_id>
          
          <creation_ts>2020-02-24 12:02:06 +0000</creation_ts>
          <short_desc>QemuVideoDxe no longer binds &quot;secondary-vga&quot; and &quot;bochs-display&quot;</short_desc>
          <delta_ts>2020-02-26 11:51:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1880</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11420</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-24 12:02:06 +0000</bug_when>
    <thetext>Edk2 commit 662bd0da7fd7 (&quot;OvmfPkg/QemuVideoDxe: Shouldn&apos;t assume system in VGA alias mode.&quot;, 2019-06-06), which was made for bug 1880, intended to replace the hard-coded EFI_PCI_IO_ATTRIBUTE_VGA_IO in the &quot;EfiPciIoAttributeOperationEnable&quot; operation, with EFI_PCI_IO_ATTRIBUTE_VGA_IO or EFI_PCI_IO_ATTRIBUTE_VGA_IO_16, dependent on what the device supported. Hence the new query (the EfiPciIoAttributeOperationSupported operation).

However, the following hunk:

+  if (SupportedVgaIo == 0) {
+    Status = EFI_UNSUPPORTED;
+    goto ClosePciIo;
+  }

was wrong -- it now prevents QemuVideoDxe from binding devices that have no VGA compat IO stuff. The affected QEMU device models are &quot;secondary-vga&quot; and &quot;bochs-display&quot;.

The problematic commit was first released in edk2-stable201908.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11421</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-24 12:18:46 +0000</bug_when>
    <thetext>Posted
[edk2-devel] [PATCH edk2-stable202002]
OvmfPkg/QemuVideoDxe: unbreak &quot;secondary-vga&quot; and &quot;bochs-display&quot; support

http://mid.mail-archive.com/20200224171741.7494-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/54760</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11443</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-26 11:51:39 +0000</bug_when>
    <thetext>Resolved in commit edfe16a6d9f8, via &lt;https://github.com/tianocore/edk2/pull/404&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2917</bug_id>
          
          <creation_ts>2020-08-21 01:35:40 +0000</creation_ts>
          <short_desc>Add NETWORK_HTTP_ENABLE macro for generic HTTP modules enabled in  NetworkPkg</short_desc>
          <delta_ts>2020-12-03 12:18:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13483</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-21 01:35:40 +0000</bug_when>
    <thetext>Current NETWORK_HTTP_BOOT_ENABLE macro is defined to enable HTTP boot feature in POST, this macro is not only enabling HTTP Boot related modules but also enabling other generic HTTP modules such as HttpDxe and HttpUtilitiesDxe. We sould have a dedicate macro to enable HTTP function on Network stack and additionally provide NETWORK_HTTP_BOOT_ENABLE for HTTP boot functionality.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13491</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-21 08:58:05 +0000</bug_when>
    <thetext>In NetworkComponents.dsc.inc, we have

  !if $(NETWORK_HTTP_BOOT_ENABLE) == TRUE
    NetworkPkg/DnsDxe/DnsDxe.inf
    NetworkPkg/HttpDxe/HttpDxe.inf
    NetworkPkg/HttpUtilitiesDxe/HttpUtilitiesDxe.inf
    NetworkPkg/HttpBootDxe/HttpBootDxe.inf
  !endif

&quot;HttpBootDxe.inf&quot; lists the following dependencies (among others):

  gEfiHttpServiceBindingProtocolGuid              ## CONSUMES
  gEfiHttpProtocolGuid                            ## CONSUMES

  gEfiDns6ServiceBindingProtocolGuid              ## SOMETIMES_CONSUMES
  gEfiDns6ProtocolGuid                            ## SOMETIMES_CONSUMES

The first two quoted here are provided by &quot;HttpDxe.inf&quot;.

The last two quoted here are provided by &quot;DnsDxe.inf&quot;.

In turn, &quot;HttpDxe.inf&quot; has the following dependency:

  gEfiHttpUtilitiesProtocolGuid                    ## CONSUMES

Which is provided by &quot;HttpUtilitiesDxe.inf&quot;.

So I think the granularity of NETWORK_HTTP_BOOT_ENABLE is appropriate.

What&apos;s your reason for excluding any one (or more) of the HttpUtilitiesDxe, HttpDxe, DnsDxe drivers? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13492</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-21 08:59:49 +0000</bug_when>
    <thetext>Or do you want a way for including HttpUtilitiesDxe / HttpDxe / DnsDxe *without* including HttpBootDxe?

Such a setup might make sense, but I don&apos;t think NetworkPkg needs a dedicated build macro for that -- just include the necessary drivers in your platform DSC.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13493</commentid>
    <comment_count>3</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-21 23:18:05 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; Or do you want a way for including HttpUtilitiesDxe / HttpDxe / DnsDxe
&gt; *without* including HttpBootDxe?
&gt; 
&gt; Such a setup might make sense, but I don&apos;t think NetworkPkg needs a
&gt; dedicated build macro for that -- just include the necessary drivers in your
&gt; platform DSC.

You are right, Laszlo. The only common use case of HTTP so far is HTTP boot, now we will have Redfish implementation over HTTP. So that is ncessary to have separate options in Network stack for the desired Network/Http features, even DNS function may need the separate option.

NetworkPkg currently provides the centralized DSC/FDF and also has the organized macros for the functionalities enablement. Platform DSC/FDF can just pull in it and use macros to enable certain functions. So it is unecessary to pullin the individule NetworkPkg drivers/librareis by platform itself.

I also realize that I didn&apos;t have the clear description of the intention for this issue submission, will update it.
Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13494</commentid>
    <comment_count>4</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-21 23:58:45 +0000</bug_when>
    <thetext>(In reply to Chang, Abner from comment #0)
&gt; Current NETWORK_HTTP_BOOT_ENABLE macro is defined to enable HTTP boot
&gt; feature in POST, this macro is not only enabling HTTP Boot related modules
&gt; but also enabling other generic HTTP modules such as HttpDxe and
&gt; HttpUtilitiesDxe. We sould have a dedicate macro to enable HTTP function on
&gt; Network stack and additionally provide NETWORK_HTTP_BOOT_ENABLE for HTTP
&gt; boot functionality.

Update the description of this issue,

Current NETWORK_HTTP_BOOT_ENABLE macro is defined to enable HTTP boot
feature in POST, this macro is not only enabling HTTP Boot related modules
but also enabling other generic HTTP modules such as HttpDxe and
HttpUtilitiesDxe. These two HTTP base drivers would not be only used by HTTP boot once we introduce the use case of Redfish implementation over HTTP to edk2. 
We should have a dedicate macro to enable generic HTTP function on
Network stack and additionally provide NETWORK_HTTP_BOOT_ENABLE for HTTP
boot functionality for the use case if the platform doesn&apos;t require HTTP boot.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13502</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-24 08:51:08 +0000</bug_when>
    <thetext>Makes sense, thank you for the update.

I think it would be nice if NETWORK_HTTP_BOOT_ENABLE *continued* to pull in the requisite drivers.

Such as, if the platform builder defined at least one of the NETWORK_HTTP_BOOT_ENABLE and (say) NETWORK_REDFISH_ENABLE macros on the &quot;build&quot; command line, then DnsDxe, HttpDxe, HttpUtilitiesDxe would be included automatically.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14374</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-19 07:22:29 +0000</bug_when>
    <thetext>v1:
* [edk2-devel] [NETWORK_HTTP_ENABLE PATCH 0/1]
  NetworkPkg: Add NETWORK_HTTP_ENABLE macro
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00443.html
https://edk2.groups.io/g/devel/message/67286
msgid &lt;20201111131927.21323-1-abner.chang@hpe.com&gt;

v2:
* [edk2-devel] [PATCH v2] NetworkPkg: Add NETWORK_HTTP_ENABLE macro
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00532.html
https://edk2.groups.io/g/devel/message/67373
msgid &lt;20201112061030.22734-1-abner.chang@hpe.com&gt;

v3:
* [edk2-devel] [PATCH v3] NetworkPkg: Add NETWORK_HTTP_ENABLE macro
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00847.html
https://edk2.groups.io/g/devel/message/67689
msgid &lt;20201119015810.16755-1-abner.chang@hpe.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14475</commentid>
    <comment_count>7</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-12-03 12:18:54 +0000</bug_when>
    <thetext>Merged.
PR: https://github.com/tianocore/edk2/pull/1172
Commit: https://github.com/tianocore/edk2/commit/126115a9fb3f89f8609336c87aa82fe7da19a9aa

Closing as fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2325</bug_id>
          
          <creation_ts>2019-11-01 14:48:53 +0000</creation_ts>
          <short_desc>Remove LewisburgPkg</short_desc>
          <delta_ts>2019-11-05 16:34:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>LewisburgPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10283</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-01 14:48:53 +0000</bug_when>
    <thetext>There is no plan from the current set of maintainers to maintain LewisburgPkg moving forward. Simply leaving the code as unmaintained is undesirable for several reasons including presence of build issues, functional issues, and lack of consistency with other Intel platform/silicon code in design and usage.

It is suggested to remove the package for the next stable tag due to lack of recent testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10287</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-01 14:51:32 +0000</bug_when>
    <thetext>Work in progress.

No concerns were raised in the RFC sent to the mailing list over a week ago - https://edk2.groups.io/g/devel/message/49360.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10332</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-05 16:34:15 +0000</bug_when>
    <thetext>Chnage pushed in the following patch series - https://edk2.groups.io/g/devel/message/49843.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2793</bug_id>
          
          <creation_ts>2020-06-11 00:43:09 +0000</creation_ts>
          <short_desc>[TPM] Bios to verify TPM2_ChangeEPS Support through TPM Capabilities command request and enable it if available</short_desc>
          <delta_ts>2020-08-14 01:44:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="qi1.zhang@intel.com">qi1.zhang</reporter>
          <assigned_to name="qi1.zhang@intel.com">qi1.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12846</commentid>
    <comment_count>0</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-06-11 00:43:09 +0000</bug_when>
    <thetext>TPM2_ChangeEPS command is optional in TPM 2.0 command sets. Bios need to verify the whether the command is supported through TPM Capabilities command request and enable it if available.

In current implementation TPM2_ChangeEPS command is always available in the TPM2 operation pull down list in TCG2 Configuration(see below), which is confusing when the command is not supported by specific TPM chip. As a user experience improvement, TPM2_ChangeEPS command should be removed from the list when it is not supported.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12847</commentid>
    <comment_count>1</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-06-11 00:47:10 +0000</bug_when>
    <thetext>Will implememt this feature</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13115</commentid>
    <comment_count>2</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-07-16 00:29:42 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/topic/75351137#62112</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13399</commentid>
    <comment_count>3</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-14 01:44:54 +0000</bug_when>
    <thetext>The change was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2218</bug_id>
          
          <creation_ts>2019-09-24 23:11:33 +0000</creation_ts>
          <short_desc>[SdMmcPciHcDxe] Fix bus speed mode changing sequence for eMMC devices</short_desc>
          <delta_ts>2019-09-28 21:28:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9787</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-09-24 23:11:33 +0000</bug_when>
    <thetext>According to the SD Host Controller Simplified Specification Ver4.20, Section
3.9, it recommends that controller&apos;s bus timing should be switched after card&apos;s
bus timing has been switched.

Meanwhile, no corresponding contents are mentioned in the Embedded Multi-Media
Card (eMMC) Electrical Standard 5.1 (JESD84-B51) spec. So I think the same
recommendation should be applied to the eMMC case as well.

But for the current SdMmcPciHcDxe driver (eMMC part) implementation, every host
controller switch has been done before call to EmmcSwitchBusTiming, which is
causing issues on some eMMC controllers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9788</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-09-24 23:13:01 +0000</bug_when>
    <thetext>Confirmed.

The patch has been proposed by Albecki, Mateusz &lt;mateusz.albecki@intel.com&gt; at:
https://edk2.groups.io/g/devel/message/47832</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9862</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-09-28 21:23:36 +0000</bug_when>
    <thetext>V2 series has been proposed by Albecki, Mateusz &lt;mateusz.albecki@intel.com&gt; at:
https://edk2.groups.io/g/devel/message/48113</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9865</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-09-28 21:28:43 +0000</bug_when>
    <thetext>Resolved via commits:

https://github.com/tianocore/edk2/commit/206783aa7f96870cc7d252d8ff93128c33b0a927
https://github.com/tianocore/edk2/commit/a8c1fc70dbd56e367464c976ef8aa43e9349b87d
https://github.com/tianocore/edk2/commit/76e1e5631f1ad9b2275ff31fefe83258c0812b3d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2677</bug_id>
          
          <creation_ts>2020-04-17 06:43:06 +0000</creation_ts>
          <short_desc>Brotli submodule move breaks build</short_desc>
          <delta_ts>2020-09-06 20:46:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2558</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2779</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Patrik Tesarik">patrik.tesarik</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12232</commentid>
    <comment_count>0</comment_count>
    <who name="Patrik Tesarik">patrik.tesarik</who>
    <bug_when>2020-04-17 06:43:06 +0000</bug_when>
    <thetext>Hello everyone,

after commit 06033f5abad3815e8d80de22c97ba38a05017262 on 16.04.20 the documented ways of building tianocore don&apos;t seem to work anymore. 

The submodule does not get cloned or initialised in the tool chain before building. Therefore after cloning via

git clone https://github.com/tianocore/edk2

and 

make -C BaseTools

build fails with missing brotli source files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12253</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-20 08:57:31 +0000</bug_when>
    <thetext>Hi Patrik,

can you please provide specific docs references? Because I think those should be updated then, to reflect the additionally needed steps.

Note that &quot;Readme.md&quot; was updated as part of the commit you mention:

$ git show 06033f5abad38 -- Readme.md

It listed &quot;BaseTools/Source/C/BrotliCompress/brotli&quot; under the &quot;# Submodules&quot; section. And that section mentions &quot;git submodule update --init&quot;.

Do you encounter a build issue after &quot;git submodule update --init&quot; too? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12334</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-28 21:45:45 +0000</bug_when>
    <thetext>This should not be code issue. Please confirm. If yes, I will close this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12352</commentid>
    <comment_count>3</comment_count>
    <who name="Patrik Tesarik">patrik.tesarik</who>
    <bug_when>2020-04-29 07:53:20 +0000</bug_when>
    <thetext>Sorry for the unclear description;

I see that it was updated in README.md, but I did not check that initally. 

I referred to https://github.com/tianocore/tianocore.github.io/wiki/Common-instructions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12402</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-05 21:58:14 +0000</bug_when>
    <thetext>Shenglei: please update wiki page https://github.com/tianocore/tianocore.github.io/wiki/Common-instructions to include submodule update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13624</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-06 20:46:34 +0000</bug_when>
    <thetext>Done. Wiki page has been updated.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2470</bug_id>
          
          <creation_ts>2020-01-16 22:25:03 +0000</creation_ts>
          <short_desc>Using WaitForEven instead of busy loop for TCG/TCG2 read user key function</short_desc>
          <delta_ts>2022-02-14 01:33:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10928</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-01-16 22:25:03 +0000</bug_when>
    <thetext>Use WaitForEvent instead of a busy loop in ReadUserKey function. Using WaitForEvent is more resource-conservative.

Adjust the ConfirmKey logic to more clear form.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10929</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-01-16 22:25:24 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18346</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2022-02-14 01:33:15 +0000</bug_when>
    <thetext>Close it because I am no longer the role to make this change.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2347</bug_id>
          
          <creation_ts>2019-11-15 09:55:16 +0000</creation_ts>
          <short_desc>spelling mistake &quot;comamnd&quot; should be &quot;command&quot;, &quot;agaist&quot; should be &quot;against&quot;</short_desc>
          <delta_ts>2020-07-31 21:17:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SourceLevelDebugPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10458</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-15 09:55:16 +0000</bug_when>
    <thetext>2 spelling mistakes, &quot;comamnd&quot; should be &quot;command&quot;, &quot;agaist&quot; should be &quot;against&quot;

in SourceLevelDebugPkg/Library/DebugAgent/DebugAgentCommon/DebugAgent.c

DebugAgentMsgPrint (DEBUG_AGENT_WARNING, &quot;Receive one invalid comamnd[%x] agaist command[%x]\n&quot;, DebugHeader-&gt;SequenceNo, Mailbox-&gt;HostSequenceNo);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13289</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 21:17:56 +0000</bug_when>
    <thetext>This issue was resolved by the following commit:

https://github.com/tianocore/edk2/commit/a302263ebb33018bccaeb3c10152e7f8ea4cda6f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2243</bug_id>
          
          <creation_ts>2019-10-07 12:52:06 +0000</creation_ts>
          <short_desc>Consolidate OpenBoardPkgConfig.dsc and OpenBoardPkgPcd.dsc</short_desc>
          <delta_ts>2019-10-16 14:48:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9924</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-07 12:52:06 +0000</bug_when>
    <thetext>The location for PCD configuration is currently inconsistent in WhiskeylakeOpenBoardPkg. A large set of FeaturePCD definitions are in OpenBoardPkgConfig.dsc while other PCD definitions (including FeaturePCD) are located in OpenBoardPkgPcd.dsc.

It is recommended to simply use the OpenBoardPkgPcd.dsc file to manage PCD configuration and include this into the main DSC file OpenBoardPkg.dsc at the top of the file. In addition, the PCDs should be easier to find to reduce lookup time and prevent accidental duplication. PCDs should be organized in each section (e.g. [PcdsFixedAtBuild]) by the location the PCD is pulled from in terms of the following categories:
 * EDK2 Configuration (defined in a package namespace in the edk2 repository)
 * Silicon Initialization Configuration (the silicon package used by the board)
 * Platform Configuration (the MinPlatformPkg in this case)
 * Board Configuration (the WhiskeylakeOpenBoardPkg in this case)
 * Board-specific Configuration (WhiskeylakeURvp board directory in this case)

This should be done for the WhiskeylakeURvp board currently in WhiskeylakeOpenBoardPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9955</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:24:58 +0000</bug_when>
    <thetext>Patch list sent for code review on the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9959</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:27:05 +0000</bug_when>
    <thetext>WIP</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10045</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 14:48:15 +0000</bug_when>
    <thetext>Submitted in commits aa1013327118466ecdfdf5f6e5b244f36435f826 and 6f52d3117fd59a84cfa74e434717c44f4961dfc5.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2596</bug_id>
          
          <creation_ts>2020-03-13 16:11:38 +0000</creation_ts>
          <short_desc>FltUsedLib</short_desc>
          <delta_ts>2020-07-21 20:25:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11689</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-13 16:11:38 +0000</bug_when>
    <thetext>OpenSSL requires _fltused to be defined as a constant anywhere floating point is used. This is to satisfy the linker, however, it is possible to compile a module with multiple definitions of fltused. This causes the MSVC compiler to fail the build. To solve this problem, the FltUsedLib was created that is one spot that the global static can exist.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11690</commentid>
    <comment_count>1</comment_count>
      <attachid>484</attachid>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-13 16:12:05 +0000</bug_when>
    <thetext>Created attachment 484
proposed patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11691</commentid>
    <comment_count>2</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-13 16:13:27 +0000</bug_when>
    <thetext>This makes a lot of situations easier (CryptoPkg\Library\IntrinsicLib\MemoryIntrinsics.c for example) as it can be included as a library.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11716</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-17 22:05:45 +0000</bug_when>
    <thetext>guomin: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11751</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-20 03:41:31 +0000</bug_when>
    <thetext>Hi Matthew,

Have you encountered this type issue?

If define library class, it may conflict with IntrinsicLib library class.

If consumer override the IntrinsicLib rather than define new?

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11809</commentid>
    <comment_count>5</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-24 15:52:30 +0000</bug_when>
    <thetext>Not sure i follow your question but the reason we moved to a library to define this symbol was to deal with two libraries within the same module.  If both libs defined it then there were problems.  If they both claimed dependent on the same library then it would only be defined once for the whole module.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11826</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-24 22:22:21 +0000</bug_when>
    <thetext>Propose the generic null type IntrinsicLib to include the common used intrinsic APIs, such as memcpy, memset. This library can be linked to every module.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11906</commentid>
    <comment_count>7</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-30 04:54:38 +0000</bug_when>
    <thetext>Post patch at message https://edk2.groups.io/g/devel/message/56613</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11908</commentid>
    <comment_count>8</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-30 07:42:48 +0000</bug_when>
    <thetext>Guomin: please discuss the proposal on the generic null type IntrinsicLib first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11914</commentid>
    <comment_count>9</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-30 09:06:25 +0000</bug_when>
    <thetext>Hi Liming,

The IntrinsicLib is just for CryptoLib. when you use openssl, it will intrinsic memset() and memcmp() provided by compiler.

But in edk2 implement, we have disabled the intrinsic feature from compiler, and it will occur that build error so we add the IntrinsicLib.

If we provide the null implement, although it can build pass, but the function will fail when memset() and memcmp() is invoked, so i think it is not a good idea.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12112</commentid>
    <comment_count>10</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:14:49 +0000</bug_when>
    <thetext>Guomin: please summary current feedback in edk2 community.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12180</commentid>
    <comment_count>11</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-10 01:53:27 +0000</bug_when>
    <thetext>Summarize the current status&lt;br/&gt;

Problem: It may occur that _fltused symbol is defined in two library and both are dependent by one module.&lt;br/&gt;

Goal: The reporter want to separate the _fltused symbol into single library and all other libraries which need _fltused symbol depend on the library, so it can resolve the problem.&lt;br/&gt;

Candidate Proposal 1: Define a NULL library for fltused.
  Michael D Kinney &lt;michael.d.kinney@intel.com&gt; exhibit that ARM use NULL library class for intrinsic.
  Sean &lt;sean.brogan=microsoft.com@groups.io&gt; think that it will affect it will affect size, optimization, and suggest that use new library.
  Michael D Kinney &lt;michael.d.kinney@intel.com&gt; think it will have no effect on size.

Candidate Proposal 2: Define FltUsedLib and IntrinsicLib separately.
  Bret Barkelew &lt;bret.barkelew@microsoft.com&gt; have provide the reviewed-by and seem that he/she agree define FltUsedLib
  Ard Biesheuvel &lt;ard.biesheuvel@linaro.org&gt; have consider that it affect all platform, and it is a problem.
  Laszlo Ersek &lt;lersek@redhat.com&gt; suggest that only add file on OpensslLib rather create new library and add limitation only for MSVC and disagree that add new FltusedLib.
  Matthew Carlson &lt;macarl=microsoft.com@groups.io&gt; point that it is required by MSVC compiler, but this is not just for openssl, for example, OnScreenKeyboard and UiToolKit driver will need this as well.
  Ard Biesheuvel &lt;ard.biesheuvel@linaro.org&gt; think it should belong to IntrinsicsLib and think can add fltused in a single file and add it to EntryPointLib(PEIMs, DXEs, etc).
  Laszlo Ersek &lt;lersek@redhat.com&gt; agree with Adr Biesheuvel
  I &lt;guomin.jiang@intel.com&gt; test add file FloatUsed.c with MSFT, it still fail because it will need /GL-.
  Ard Biesheuvel &lt;ard.biesheuvel@linaro.org&gt; think it should add EntryPointLib, but it seem that build fail.
  Michael D Kinney &lt;michael.d.kinney@intel.com&gt; think can use EntryPointLib or NULL</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12257</commentid>
    <comment_count>12</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-20 17:45:13 +0000</bug_when>
    <thetext>I recently got confirmation from the Microsoft compiler team that fltused doesn&apos;t do anything anymore.  It is still required (bug filed for next version to remove).  I am now aligned with Mike K in that we should just add it to a baselib (both H and C files) for the Microsoft compiler toolchain.  We can then remove it from all other libraries.  

Thoughts? 

Thanks
Sean</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12284</commentid>
    <comment_count>13</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-22 23:12:31 +0000</bug_when>
    <thetext>Post Patch v2 at https://edk2.groups.io/g/devel/message/57900.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12347</commentid>
    <comment_count>14</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-29 03:21:15 +0000</bug_when>
    <thetext>Hi All,

When i add FltUsed.c into BaseLib, it have below build error
UefiDriverEntryPoint.lib(DriverEntryPoint.obj) : fatal error LNK1237: during code generation, compiler introduced reference to symbol &apos;_fltused&apos; defined in module &apos;BaseLib.lib(FltUsed.obj)&apos; compiled with /GL

Another thing:
I will not follow up the bug until Quarter 3 or July, thanks for your patience.

Best Regards
guomin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13079</commentid>
    <comment_count>15</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-07-09 20:54:51 +0000</bug_when>
    <thetext>I want to drop the request, because it seem that not necessary.

I want to get feedback from you, if no comments, i will close it next Friday.

Best Regards
Guomin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13148</commentid>
    <comment_count>16</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-07-21 20:25:57 +0000</bug_when>
    <thetext>Close it because it seem that no one care it.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>484</attachid>
            <date>2020-03-13 16:12:05 +0000</date>
            <delta_ts>2020-03-13 16:12:05 +0000</delta_ts>
            <desc>proposed patch</desc>
            <filename>fltused.patch</filename>
            <type>text/plain</type>
            <size>2334</size>
            <attacher name="Matthew Carlson">macarl</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2022</bug_id>
          
          <creation_ts>2019-07-25 22:21:54 +0000</creation_ts>
          <short_desc>Add Module Arch to BuildRebuild Module Section</short_desc>
          <delta_ts>2019-08-07 21:00:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          <cf_documents>EDK II Build Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8603</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-07-25 22:21:54 +0000</bug_when>
    <thetext>Added arch output to build report so it&apos;s easy to tell which arch is being generated. 
Code change https://bugzilla.tianocore.org/show_bug.cgi?id=2016 will be done.
The spec change is also required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8842</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-07 20:52:47 +0000</bug_when>
    <thetext>Build Spec has been fixed at 541a0cf74c33160e8777a5cda3ef621adafee0f8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8843</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-07 21:00:20 +0000</bug_when>
    <thetext>Build Spec has been fixed at 541a0cf74c33160e8777a5cda3ef621adafee0f8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2493</bug_id>
          
          <creation_ts>2020-01-29 19:07:55 +0000</creation_ts>
          <short_desc>CryptoPkg/BaseCryptLibNull: Add missing HkdfSha256ExtractAndExpand() service</short_desc>
          <delta_ts>2020-02-04 17:07:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11011</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 19:07:55 +0000</bug_when>
    <thetext>The BaseCryptLib class defines the HkdfSha256ExtractAndExpand() service, but this service is missing from the BaseCryptLibNull implementation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11012</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 19:08:09 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11013</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 19:34:39 +0000</bug_when>
    <thetext>Patch email for review:

https://edk2.groups.io/g/devel/message/53549

Branch for review:

https://github.com/mdkinney/edk2/tree/Bug_4293_CryptoPkg_BaseCryptLibNull_Add_HkdfSha256ExtractAndExpand

EDK II CI PR for review:

https://github.com/tianocore/edk2/pull/320</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11066</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-04 17:07:24 +0000</bug_when>
    <thetext>Commit:

    https://github.com/tianocore/edk2/commit/422da35375c6d95dae9d5c56530d255b672b1f59

EDK II CI Pull Request:

    https://github.com/tianocore/edk2/pull/331</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2959</bug_id>
          
          <creation_ts>2020-09-11 01:23:36 +0000</creation_ts>
          <short_desc>Support FD type in [FD] section of FDF file</short_desc>
          <delta_ts>2022-03-01 22:12:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13660</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-11 01:23:36 +0000</bug_when>
    <thetext>[FD] section in FDF file supports FV, FILE, INF file. But, FD is not supported. FD can be placed into another FD. This can be supported.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13677</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-15 22:10:12 +0000</bug_when>
    <thetext>Include tool package maintainer for the comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18497</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 22:12:52 +0000</bug_when>
    <thetext>Don&apos;t neeed to support it now, because no real usage case.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2365</bug_id>
          
          <creation_ts>2019-11-20 02:35:27 +0000</creation_ts>
          <short_desc>Basetool: Build failed on Non-English OS if structurePcd is used in platform dsc file</short_desc>
          <delta_ts>2020-03-23 22:53:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>zhijux.fan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10489</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-11-20 02:35:27 +0000</bug_when>
    <thetext>Build failed on Non-English OS if structurePcd is used in platform dsc file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10490</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-11-20 02:35:48 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11513</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-03-03 21:31:42 +0000</bug_when>
    <thetext>patch in https://edk2.groups.io/g/devel/message/51515</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11617</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-08 22:52:42 +0000</bug_when>
    <thetext>Assign Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11788</commentid>
    <comment_count>4</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-03-23 22:53:49 +0000</bug_when>
    <thetext>fixed it in 0dee1d1358c95e07637876af1f508f0fd694a809</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2261</bug_id>
          
          <creation_ts>2019-10-09 20:00:31 +0000</creation_ts>
          <short_desc>MdePkg dsc isn&apos;t complete and thus not a valid build for all modules and libraries in the package</short_desc>
          <delta_ts>2019-10-22 19:19:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9986</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 20:00:31 +0000</bug_when>
    <thetext>please see DSC change here
https://github.com/spbrogan/edk2/commit/34bf0ea95e10d0ea14d8def52f13c8d78d24a632</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10063</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:24:19 +0000</bug_when>
    <thetext>All these errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10120</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-18 16:38:56 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/49246</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10184</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 19:19:27 +0000</bug_when>
    <thetext>Pushed as 46bb812007..8d89159245</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2726</bug_id>
          
          <creation_ts>2020-05-19 23:22:37 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: Add FunctionParametePtr to FspGlobalData.</short_desc>
          <delta_ts>2020-05-21 06:04:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12551</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-05-19 23:22:37 +0000</bug_when>
    <thetext>When FSP switching stack and calling bootloader functions, the function parameter in stack may not be accessible easily. We can store the function parameter pointer to FspGlobalData and retrieve it after stack switched.

Also need to add Loader2PeiSwitchStack () to header file as public function for platform FSP code to consume.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12552</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-05-19 23:22:58 +0000</bug_when>
    <thetext>working on this bug fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12631</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-05-21 06:04:52 +0000</bug_when>
    <thetext>SHA-1: 3f89db869028fa65a37756fd7f391cbd69f4579c

* IntelFsp2Pkg: Add FunctionParametePtr to FspGlobalData.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2726

When FSP switching stack and calling bootloader functions,
the function parameter in stack may not be accessible easily.
We can store the function parameter pointer to FspGlobalData
and retrieve it after stack switched.

Also need to add Loader2PeiSwitchStack () to header file
as public function for platform FSP code to consume.

Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Cc: Star Zeng &lt;star.zeng@intel.com&gt;
Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2153</bug_id>
          
          <creation_ts>2019-09-04 04:45:29 +0000</creation_ts>
          <short_desc>UefiCpuPkg/SecCore: support only EFI_PEI_CORE_FV_LOCATION_PPI in PpiList</short_desc>
          <delta_ts>2019-09-05 08:45:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9456</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-09-04 04:45:29 +0000</bug_when>
    <thetext>Current logic will skip searching EFI_PEI_CORE_FV_LOCATION_PPI when the PPI in PpiList having EFI_PEI_PPI_DESCRIPTOR_TERMINATE_LIST flag, but platform may pass single PPI in PpiList that should be supported.

Changed the logic to verify PpiList first before checking EFI_PEI_PPI_DESCRIPTOR_TERMINATE_LIST flag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9474</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-09-05 08:45:22 +0000</bug_when>
    <thetext>commit 8a1305a11f3bda2d6c1ab758e4aea79ee021dd1c (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Wed Sep 4 16:37:46 2019 +0800

    UefiCpuPkg: support single EFI_PEI_CORE_FV_LOCATION_PPI in PpiList

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2153

    Current logic will skip searching EFI_PEI_CORE_FV_LOCATION_PPI when the
    PPI in PpiList having EFI_PEI_PPI_DESCRIPTOR_TERMINATE_LIST flag,
    but platform may pass single PPI in PpiList that should be supported.

    Changed the logic to verify PpiList first before checking
    EFI_PEI_PPI_DESCRIPTOR_TERMINATE_LIST flag.

    Test: Verified both single EFI_PEI_CORE_FV_LOCATION_PPI and multiple
          PPIs in PpiList cases and both can boot with the PeiCore
          specified by EFI_PEI_CORE_FV_LOCATION_PPI.

    Cc: Eric Dong &lt;eric.dong@intel.com&gt;
    Cc: Ray Ni &lt;ray.ni@intel.com&gt;
    Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Eric Dong &lt;eric.dong@intel.com&gt;
    Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2044</bug_id>
          
          <creation_ts>2019-08-01 20:06:08 +0000</creation_ts>
          <short_desc>PatchCheck .py is producing false positives in patch evaluation</short_desc>
          <delta_ts>2019-08-08 01:14:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8714</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-01 20:06:08 +0000</bug_when>
    <thetext>There are a few scenerios where PatchCheck.py is producing false 
positives for issues in patches.

1) Auto conversion of binary files to text files and generating
   errors for incorrect line endings.  One example is in the 
   edk2-non-osi repository for SHA 46f14e24b56313df668cf97d7c08b6a1da5873d8

    PatchCheck.py 46f14e24b56313df668cf97d7c08b6a1da5873d8
    Checking git commit: 46f14e24b56313df668cf97d7c08b6a1da5873d8
    . . .
     * Line ending (&apos;\n&apos;) is not CRLF
       File: Silicon/Intel/PurleySiliconBinPkg/FSP
       Line:                               INTEL CORPORATION RESTRICTED USE

  This line of text is not present in the source tree.  This
  text is form a PDF file and the &apos;git show&apos; command is converting
  the PDF binary to readable text using LF line endings.

  If the git show command is run on the following repo, the same
  text output is seen.

    https://github.com/tianocore/edk2-non-osi.git

    git show 46f14e24b56313df668cf97d7c08b6a1da5873d8

  Since the PDF is a binary file, the PatchCheck.py tool
  should treat it as a binary for patch evaluation.  The 
  recommended fix is to add the &apos;--no-textconv&apos; flag to
  the &apos;git show&apos; command PatchCheck.py uses.

2) PatchCheck.py stops checking a patch if there is a blank
   line associated with line ending fixes.

  One example is in the edk2-platforms repo at SHA hash
  3124becd26b1b3b70419020c5db78df954498dcc.

    https://github.com/tianocore/edk2-platforms.git

    PatchCheck.py 3124becd26b1b3b70419020c5db78df954498dcc
    Checking git commit: 3124becd26b1b3b70419020c5db78df954498dcc
    The commit message format passed all checks.
    Code format is not valid:
     * Patch format error: diff found after end of patch
       Line:

  If git show 3124becd26b1b3b70419020c5db78df954498dcc is run, the
  following diff is present.  The issue is between lines 5 and 6 of 
  this diff.  Due to the line ending change, the PatchCheck.py tool
  has an extra line between what is shows as lines 5 and 6 that is 
  empty.  This causes PatchCheck.py to go into a bad state and skip
  checking the rest of the patch.  The recommended fix is to ignore
  these empty lines in the middle of a patch.

 1    @@ -4,10 +4,12 @@
 2    # ICH SMM Library that layers on top of the I/O Library to directly
 3    #  access SMM power management registers.
 4    # Copyright (c) 2007 - 2018, Intel Corporation. All rights reserved.&lt;BR&gt;
 5   -#                                                                                  ^M
 6   +#                                                                                  ^M
 7   +^M
 8    # SPDX-License-Identifier: BSD-2-Clause-Patent
 9   
10   -#                                                                                  ^M
11   +#                                                                                  ^M
12   +^M
13    #
14    #
15    #
16   @@ -30,7 +32,7 @@ [Defines]

3) PatchCheck.py stops checking if there is a patch that uses the
  &apos;copy from&apos; and &apos;copy to&apos; actions to copy a file and then apply
  differences.

  One example is in the edk2-platforms repo at SHA hash
  6a728b4b7d6b45a9e044f3fe261f732b0f1958e2.

    https://github.com/tianocore/edk2-platforms.git

    PatchCheck.py 6a728b4b7d6b45a9e044f3fe261f732b0f1958e2
    Checking git commit: 6a728b4b7d6b45a9e044f3fe261f732b0f1958e2
    The commit message format passed all checks.
    Code format is not valid:
     * Patch format error: didn&apos;t find diff hunk marker (@@)
       Line: copy from Platform/Intel/Vlv2TbltDevicePkg/PlatformPkgIA32.dsc

  The recommended fix is to add &apos;copy from &apos; and &apos;copy to &apos; to 
  the pre_patch_prefixes tuple.

   pre_patch_prefixes = (
        &apos;--- &apos;,
        &apos;+++ &apos;,
        &apos;index &apos;,
        &apos;new file &apos;,
        &apos;deleted file &apos;,
        &apos;old mode &apos;,
        &apos;new mode &apos;,
        &apos;similarity index &apos;,
        &apos;copy from &apos;,
        &apos;copy to &apos;,
        &apos;rename &apos;,
        )</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8715</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-01 20:09:32 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8716</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-01 20:19:21 +0000</bug_when>
    <thetext>Patch review email sent

https://edk2.groups.io/g/devel/message/44817
https://edk2.groups.io/g/devel/message/44818
https://edk2.groups.io/g/devel/message/44819
https://edk2.groups.io/g/devel/message/44820</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8855</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-08 01:14:49 +0000</bug_when>
    <thetext>pushed 111bbcf876..96603b4f02</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2979</bug_id>
          
          <creation_ts>2020-09-21 03:21:33 +0000</creation_ts>
          <short_desc>EmulatorPkg: CI Enablement for SECURE_BOOT_ENABLE option</short_desc>
          <delta_ts>2020-09-28 16:27:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2949</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Divneil Wadhawan">divneil.r.wadhawan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch>sean.brogan@microsoft.com</cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13718</commentid>
    <comment_count>0</comment_count>
    <who name="Divneil Wadhawan">divneil.r.wadhawan</who>
    <bug_when>2020-09-21 03:21:33 +0000</bug_when>
    <thetext>Currently, the CI job for EmulatorPkg is not available. This bug is to track its enablement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13719</commentid>
    <comment_count>1</comment_count>
    <who name="Divneil Wadhawan">divneil.r.wadhawan</who>
    <bug_when>2020-09-21 03:22:37 +0000</bug_when>
    <thetext>Edit:
Currently, the CI job for EmulatorPkg *with SECURE_BOOT_ENABLE* is not available</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13749</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 21:52:16 +0000</bug_when>
    <thetext>Agree this change. We can make the default CI test with SECURITY_BOOT enable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13760</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 22:24:29 +0000</bug_when>
    <thetext>Include Sean.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13784</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-09-24 19:58:34 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13785</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-09-24 19:59:32 +0000</bug_when>
    <thetext>Use implementation suggestion from Sean Brogan:

https://edk2.groups.io/g/devel/message/65587</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13818</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-09-28 16:16:23 +0000</bug_when>
    <thetext>Patch V1 for review:

  https://edk2.groups.io/g/devel/message/65589

Patch V2 for review:

  https://edk2.groups.io/g/devel/message/65634

Patch V3 for review

  https://edk2.groups.io/g/devel/message/65637</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13819</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-09-28 16:27:25 +0000</bug_when>
    <thetext>Committed as:

https://github.com/tianocore/edk2/commit/2e14ee75c09f8d212cabb9e06ac2b8fd6c0bb1ff
https://github.com/tianocore/edk2/commit/2793a49565488e419d10ba029c838f4b7efdba38</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2397</bug_id>
          
          <creation_ts>2019-11-30 02:28:02 +0000</creation_ts>
          <short_desc>_MSC_EXTENSIONS is not an indication of MSVC compiler, _MSC_VER should be used</short_desc>
          <delta_ts>2020-02-11 14:10:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nikolai Saoukh">nms</reporter>
          <assigned_to name="Vitaly Cheptsov">vit9696</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10593</commentid>
    <comment_count>0</comment_count>
      <attachid>439</attachid>
    <who name="Nikolai Saoukh">nms</who>
    <bug_when>2019-11-30 02:28:02 +0000</bug_when>
    <thetext>Created attachment 439
_MSC_EXTENSIONS is not an indication of MSVC compiler, _MSC_VER should be used

See subject. Discovered with CLANGPDB toolchain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11036</commentid>
    <comment_count>1</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-01-31 16:19:31 +0000</bug_when>
    <thetext>Ok, I can confirm that it is a bigger problem that may have been underestimated. Clang defines _MSC_EXTENSIONS macro when MicrosoftExt is set[1], and MicrosoftExt is set when -fms-compatibility is passed to the compiler, which is true for CLANGPDB[3].

As requested by Michael Kinney during the STATIC_ASSERT patch review[4], current implementation uses _MSC_EXTENSIONS to determine the use of a non-standard static_assert keyword for STATIC_ASSERT macro definition[5].

This extension is not supported at all by clang 8, and has limited support by clang 9. As an example, try compiling the following code with clang 9:

#ifdef _MSC_EXTENSIONS
#warning &quot;Extensions defined&quot;
#else
#warning &quot;Extensions not defined&quot;
#endif
static_assert(sizeof(int) == 4, &quot;wtf&quot;);
void f() {
 static_assert(sizeof(int) == 4, &quot;wtf&quot;);
}

While the first static_assert will pass, the second will error with the following output:

$ clang -target x86_64-unknown-windows -c -fno-ms-extensions -fms-compatibility t.c
t.c:2:2: warning: &quot;Extensions defined&quot; [-W#warnings]
#warning &quot;Extensions defined&quot;
 ^
t.c:8:1: error: expected expression
static_assert(sizeof(int) == 4, &quot;wtf&quot;);
^
1 warning and 1 error generated.

To summarise:

1. The error above is a limitation of particular implementation of MS extension in clang, as I tried compiling this code with native MSVC through godbolt[6] (I do not have Windows), and apart from incompatible warnings, it compiles just fine.

2. Using a standard implementation of static assertion from C11, i.e. _Static_assert instead of static_assert, works just fine with clang in both cases. 

3. Quick replace of defined(_MSC_EXTENSIONS) with defined(_MSC_VER) works fine. So does replacing it with defined(_MSC_EXTENSIONS) &amp;&amp; !defined(__clang__), but this is ugly.

4. We believe we need to take action before edk2-stable202002, as this issue makes CLANGPDB toolchain partially unusable. In particular, our code simply does not compile on platforms where we want to use CLANGPDB.

5. We agree with Nikolai that _MSC_EXTENSIONS is an incorrect an inadequate way to determine the compiler specifics and believe its usage should be eliminated from EDK II, especially since:
- EDK II says it does not use ms extensions via -fno-ms-extensions argument[3]
- #pragma warning ( disable : XXX ) are just ignored by clang
- Implementation of MSVC extensions (like this static_assert) is simply not guaranteed and bug-prone.
- Clang does not define _MSC_VER, and there is code that relies on _MSC_EXTENSIONS defining _MSC_VER in EDK II[7][8]. First example is broken, because clang will be treated as ancient MSVC due to _MSC_VER being implicitly 0. Second example is broken, as some MSVC specific code will be used instead of __builtin_return_address.

6. As a replacement we suggest to deprecate _MSC_EXTENSIONS and start to iteratively  using _MSC_VER. We submitted a patch[9] doing this for MdePkg, and request other maintainers handle issues of other packages on their own as necessary.

[1] https://github.com/llvm/llvm-project/blob/1e487e4/clang/lib/Basic/Targets/OSTargets.cpp#L192
[2] https://github.com/llvm/llvm-project/blob/fd09f12/clang/lib/Frontend/CompilerInvocation.cpp#L2740
[3] https://github.com/tianocore/edk2/blob/69ebe82/BaseTools/Conf/tools_def.template#L2762
[4] https://edk2.groups.io/g/devel/message/45467
[5] https://github.com/tianocore/edk2/blob/63653ff/MdePkg/Include/Base.h#L802
[6] https://godbolt.org
[7] https://github.com/tianocore/edk2/blob/63653ff/MdePkg/Include/Base.h#L36
[8] https://github.com/tianocore/edk2/blob/63653ff/MdePkg/Include/Base.h#L1259
[9] https://edk2.groups.io/g/devel/topic/70882955</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11179</commentid>
    <comment_count>2</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-02-10 06:01:32 +0000</bug_when>
    <thetext>Additional issues as discovered in https://edk2.groups.io/g/devel/topic/70882954:

1. CLANGPDB uses -target x86_64-unknown-windows, and this basically means different behaviour for Windows and other operating systems:
- On Windows it will &quot;attach&quot; to installed Visual Studio and will gather the parameters from this installation, i.e. it will define _MSC_VER to installed Visual Studio version. For example, for me it is implicitly passing -fms-compatibility-version=19.16.27026 and setting full triple to x86_64-unknown-windows-msvc19.16.27026.
- On Mac and Linux it will obviously not find Visual Studio, and as a result the full triple will be x86_64-unknown-windows-msvc with _MSC_VER macro not being defined.

There basically is no control to it except -U_MSC_VER, which is ugly, as different include directories, other defines will still happen between installations.

2. EDK II relies on UINT32_MAX being a valid value for enum. This is not the case in the specification, as it requires enum to be either INT32 or UINT32:

Element of a standard ANSI C enum type declaration. Type INT32.or UINT32. ANSI C does not define the size of sign of an enum so they should never be used in structures. ANSI C integer promotion rules make INT32 or UINT32 interchangeable when passed as an argument to a function.

However, since I am not positive that no existing code relies on this, it is best to preserve the current behaviour. Supporting this is valid for GNU flavour or as a Microsoft Extension. Disabling -fms-compatibility will result in a compile error for enums having 0xFFFFFFFF values, like in Base.h.

All in all, we believe that CLANGPDB simply has an overlook in the -target argument due to a misconsideration of the clang triple implementation. Normally for target only 3 words are provided, but for Windows it is crucial to have 4, as there are different drivers with different automatics. To resolve the problem, we should use GNU targets i686-unknown-windows-gnu and x86_64-unknown-windows-gnu. This is basically the only and the least hurtful solution, as using MSVC mode will define _MSC_EXTENSIONS, which already breaks many places and will require a heavy codebase refactoring, and randomly define _MSC_VER and use Visual Studio headers and configuration, which makes reproducible builds on different operating systems questionable if not impossible.

New patch submitted:
https://edk2.groups.io/g/devel/topic/71134287</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11198</commentid>
    <comment_count>3</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-02-11 02:18:27 +0000</bug_when>
    <thetext>V2 patch submitted:
https://edk2.groups.io/g/devel/message/54184</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11206</commentid>
    <comment_count>4</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-02-11 14:10:25 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/69c135462d9ef28b59a065ad45dc0089d8dacdd0</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>439</attachid>
            <date>2019-11-30 02:28:02 +0000</date>
            <delta_ts>2019-11-30 02:28:02 +0000</delta_ts>
            <desc>_MSC_EXTENSIONS is not an indication of MSVC compiler, _MSC_VER should be used</desc>
            <filename>msc_ver.diff</filename>
            <type>application/octet-stream</type>
            <size>402</size>
            <attacher name="Nikolai Saoukh">nms</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2867</bug_id>
          
          <creation_ts>2020-07-29 02:11:49 +0000</creation_ts>
          <short_desc>[VT-d] PMR enabling set by pre-boot DMA protection is cleared by RC when boot guard is enabled</short_desc>
          <delta_ts>2021-12-05 22:29:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>IntelSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Sheng Wei">w.sheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13215</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-07-29 02:11:49 +0000</bug_when>
    <thetext>To Fix this issue, pre-boot DMA protection should only reset VT-d BAR when it is 0 and reset PMR region when it is not programmed to protect all memory address. The VT-d platform driver should install a null root entry table ppi. The VT-d core driver should support to enable TE  w/ null pointer in pre-mem phase to accommodate the design for any platforms use EDKII master.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13216</commentid>
    <comment_count>1</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-07-29 02:16:06 +0000</bug_when>
    <thetext>The issue is root caused.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13218</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-07-29 03:44:17 +0000</bug_when>
    <thetext>Patch is send to review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17925</commentid>
    <comment_count>3</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2021-12-05 22:29:04 +0000</bug_when>
    <thetext>patch is merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2641</bug_id>
          
          <creation_ts>2020-03-29 02:14:25 +0000</creation_ts>
          <short_desc>tftpDynamicCommand.efi load error in debug mode</short_desc>
          <delta_ts>2020-06-09 21:50:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="jimmyw">jimmy89628</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11891</commentid>
    <comment_count>0</comment_count>
    <who name="jimmyw">jimmy89628</who>
    <bug_when>2020-03-29 02:14:25 +0000</bug_when>
    <thetext>I test edk2 on raspberry pi 3B in debug mode。
error code is：

Command/TftpDynamicCommand/DEBUG/tftpDynamicCommand.dll 0x36ECB000
Loading driver at 0x00036ECA000 EntryPoint=0x00036ED1D48 tftpDynamicCommand.efi
InstallProtocolInterface: BC62157E-3E33-4FEC-9920-2D3B36D750DF 35BC1918
InstallProtocolInterface: 6A1EE763-D47A-43B4-AABE-EF1DE2AB56FC 36ED6070
ProtectUefiImageCommon - 0x35BC13C0
  - 0x0000000036ECA000 - 0x000000000000F000
SetUefiImageMemoryAttributes - 0x0000000036ECA000 - 0x0000000000001000 (0x0000000000004008)
SetUefiImageMemoryAttributes - 0x0000000036ECB000 - 0x000000000000A000 (0x0000000000020008)
SetUefiImageMemoryAttributes - 0x0000000036ED5000 - 0x0000000000004000 (0x0000000000004008)
Status: 0x0000000E

ASSERT_EFI_ERROR (Status = Not Found)
/TftpDynamicCommand/TftpDynamicCommand/DEBUG/AutoGen.c(520): !EFI_ERROR (Status)

how to fix this？thank u</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11962</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 21:52:21 +0000</bug_when>
    <thetext>Can you attach TftpDynamicCommand/TftpDynamicCommand/DEBUG/AutoGen.c file for investigation?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11984</commentid>
    <comment_count>2</comment_count>
      <attachid>504</attachid>
    <who name="jimmyw">jimmy89628</who>
    <bug_when>2020-04-01 04:26:18 +0000</bug_when>
    <thetext>Created attachment 504
AutoGen.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11992</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-01 09:46:17 +0000</bug_when>
    <thetext>Error status return from ShellLibConstructor(). Include ShellPkg maintainer to check it. Zhichao, can you help check it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12816</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2020-06-08 23:12:13 +0000</bug_when>
    <thetext>This should alreasy be fixed in

https://github.com/tianocore/edk2-platforms/commit/42838e91620ddf55e83a1287025adc7a7fb1e38b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12832</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-09 21:50:44 +0000</bug_when>
    <thetext>It has been fixed.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>504</attachid>
            <date>2020-04-01 04:26:18 +0000</date>
            <delta_ts>2020-04-01 04:26:18 +0000</delta_ts>
            <desc>AutoGen.c</desc>
            <filename>AutoGen.c</filename>
            <type>text/plain</type>
            <size>38852</size>
            <attacher name="jimmyw">jimmy89628</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2420</bug_id>
          
          <creation_ts>2019-12-15 22:02:47 +0000</creation_ts>
          <short_desc>Add new BaseCryptLib instances to compile independently from callers</short_desc>
          <delta_ts>2020-02-07 11:40:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>2494</dependson>
    
    <dependson>2495</dependson>
    
    <dependson>2496</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter>fan.wang</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10705</commentid>
    <comment_count>0</comment_count>
    <who name="">fan.wang</who>
    <bug_when>2019-12-15 22:02:47 +0000</bug_when>
    <thetext>There are no solutions to provide a wrapper around BaseCryptLib without having to compile the underlying Crypto Library. In the past, it was a source of pain in both compile times and FV size, and moreover, since BaseCryptLib kernel code (openssl) is statically linked to caller drivers, security updates become more complicated.

So a new set of BaseCryptLib is needed to save compiling time and simplify platform security updates, it shall use dynamic interfaces to interactive with silicon, platform or other components, and shall not provide static interfaces to link to callers. These dynamic interfaces may include UEFI variables, HOBs, PPIs, protocols and events.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10723</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-12-17 21:22:40 +0000</bug_when>
    <thetext>Fan will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11025</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-30 01:19:09 +0000</bug_when>
    <thetext>The proposed solution is to wrap the BaseCryptLib in a PPI, DXE Protocol, and an SMM Protocol and produce a PEIM, DXE Driver, and SMM Driver with these services.

The BaseCryptLib services mapped into the Protocols/PPIs should be configurable
so the size of these drivers can match the usage of these services in PEI, DXE, and SMM.

A version of this concept is implemented here:

https://github.com/microsoft/mu_plus/tree/dev/201908/SharedCryptoPkg

Instead of introducing a new package, this code should be ported into the CryptoPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11030</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-30 13:08:08 +0000</bug_when>
    <thetext>Patch email for review:

https://edk2.groups.io/g/devel/message/53560

Branch for review:

https://github.com/mdkinney/edk2/tree/CryptoPkg_PPI_Protocol_Proposal_V6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11165</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-07 11:35:10 +0000</bug_when>
    <thetext>Updated patch series for review

    https://edk2.groups.io/g/devel/message/53804

New in V7
* Sync with edk2/master to align with HashApiLib commits
* Fix typos and comment spelling
* Update supported archs</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11166</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-07 11:40:12 +0000</bug_when>
    <thetext>Commits:
  668621362f..bd33a385ee

  https://github.com/tianocore/edk2/commit/668621362fa4f0ca87fda5b9abba4fc49bac291b
  https://github.com/tianocore/edk2/commit/3b0e04305b2559da8deec7e1acba2d9e9902b80e
  https://github.com/tianocore/edk2/commit/cc1d13c9228d988071834b12c8494efb28b55802
  https://github.com/tianocore/edk2/commit/cd70de1cc0c954dd9608e63093fac0d4f50be630
  https://github.com/tianocore/edk2/commit/bd33a385eec746e33ff3e8a628193913d52861ef

EDK II CI PR:
  https://github.com/tianocore/edk2/pull/351</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2307</bug_id>
          
          <creation_ts>2019-10-23 12:03:23 +0000</creation_ts>
          <short_desc>Remove use of binary module UefiCpuPkg/ResetVector/Vtf0/Bin/ResetVector.inf</short_desc>
          <delta_ts>2019-10-28 19:24:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>SimicsX58Sktpkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2306</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>david.y.wei</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>prince.agyeman</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10194</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-23 12:03:23 +0000</bug_when>
    <thetext>UefiCpuPkg/ResetVector/Vtf0/Bin/ResetVector.inf is a binary module that
need to be removed from UefiCpuPkg.

The SimicsX58SktPkg should be updated to use the source version of this component, so the binary module can be removed from the UefiCpuPkg.  The following are the usages of this binary module:

* edk2-platforms\Silicon\Intel\SimicsX58SktPkg\SktPkgPei.dsc(13):  UefiCpuPkg/ResetVector/Vtf0/Bin/ResetVector.inf

* edk2-platforms\Silicon\Intel\SimicsX58SktPkg\SktSecInclude.fdf(16):INF  RuleOverride=RESET_VECTOR USE = IA32 UefiCpuPkg/ResetVector/Vtf0/Bin/ResetVector.inf

Email thread on this toipic:

https://edk2.groups.io/g/devel/topic/patch_ueficpupkg_add/36448030</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10207</commentid>
    <comment_count>1</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-10-23 22:25:35 +0000</bug_when>
    <thetext>Patches have been submitted to the edk2 mailing list</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10225</commentid>
    <comment_count>2</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-10-28 19:24:03 +0000</bug_when>
    <thetext>Patches have been merged to edk2-platforms master branch
Commit ID : 98dfee70691b021ab25969894090c76bc05fa79b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2327</bug_id>
          
          <creation_ts>2019-11-03 22:59:58 +0000</creation_ts>
          <short_desc>SecurityPkg/OpalPassword: Remove dependency on EFI_BLOCK_IO_PROTOCOL</short_desc>
          <delta_ts>2020-06-03 16:27:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Maggie Chu">maggie.chu</reporter>
          <assigned_to name="Maggie Chu">maggie.chu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10303</commentid>
    <comment_count>0</comment_count>
    <who name="Maggie Chu">maggie.chu</who>
    <bug_when>2019-11-03 22:59:58 +0000</bug_when>
    <thetext>RAID drivers abstract their physical drives that make up the array into a single unit, and do not supply individual EFI_BLOCK_IO_PROTOCOL instances for each physical drive in the array.
This breaks support for the Security Storage Command Protocol, which currently requires an EFI_BLOCK_IO_PROTOCOL to be associated with the same device the protocol is installed on and provide all the same parameters.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10304</commentid>
    <comment_count>1</comment_count>
    <who name="Maggie Chu">maggie.chu</who>
    <bug_when>2019-11-03 23:00:52 +0000</bug_when>
    <thetext>confirmed to file bugzilla to track issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10586</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-29 01:53:32 +0000</bug_when>
    <thetext>Fix at 1a04951309f807958cf54d38c29796737718e65f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2219</bug_id>
          
          <creation_ts>2019-09-25 07:49:58 +0000</creation_ts>
          <short_desc>Enhance the terminal console to support the arrow keys</short_desc>
          <delta_ts>2019-10-07 22:39:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9811</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-09-25 07:49:58 +0000</bug_when>
    <thetext>Refer to https://www.ssh.com/ssh/putty/putty-manuals/0.68/Chapter4.html#config-appcursor
In normal mode, arrow key would send ESC [A through to ESC [D.
In application mode, arrow key would send ESC OA through to
ESC OD.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9812</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-09-25 07:50:30 +0000</bug_when>
    <thetext>take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9839</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-09-26 21:16:03 +0000</bug_when>
    <thetext>Only add the support for ESC [A through to ESC [D.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9933</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-10-07 22:39:38 +0000</bug_when>
    <thetext>fixed at e86664d2b03d0a84b8b952f3d5111424b3e9c916</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2678</bug_id>
          
          <creation_ts>2020-04-20 05:37:35 +0000</creation_ts>
          <short_desc>commit 4c0f6e349d32 marks &quot;MpLib.h&quot; as executable, breaking downstream packaging</short_desc>
          <delta_ts>2020-05-06 11:42:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2556</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="LeoDuran@AMD">leo.duran</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>glin</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12248</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-20 05:37:35 +0000</bug_when>
    <thetext>Gary Lin reports that since 4c0f6e349d32 (&quot;UefiCpuPkg/MpInitLib: Skip reading PlatformId on AMD processors.&quot;, 2020-03-02), &quot;UefiCpuPkg/Library/MpInitLib/MpLib.h&quot; has been &quot;executable&quot;.

This a small wart only at the first sight, as the package systems in various Linux distros tend to sanity-check the file mode bits on the files packaged or processed otherwise. A header file is not supposed to be &quot;executable&quot;.

Leo, can you please submit a small patch to fix this issue? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12249</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-20 05:39:16 +0000</bug_when>
    <thetext>Confirming. On a checkout at c884b23ac40a (&quot;MdePkg: Add AML FieldList OpCode definitions&quot;, 2020-04-17):

$ ls -go UefiCpuPkg/Library/MpInitLib/MpLib.h
-rwx------. 1 22581 2020-04-08 11:12:56 +0200 UefiCpuPkg/Library/MpInitLib/MpLib.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12250</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-20 05:40:14 +0000</bug_when>
    <thetext>Original report:

http://mid.mail-archive.com/20200417081447.GC26140@GaryWorkstation
https://edk2.groups.io/g/devel/message/57502</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12280</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-22 12:56:36 +0000</bug_when>
    <thetext>Patch from Leo on the list:

[PATCH] UefiCpuPkg/MpInitLib: Remove Executable attribute from MpLib.h
http://mid.mail-archive.com/1587506704-2232-1-git-send-email-leo.duran@amd.com
https://edk2.groups.io/g/devel/message/57803</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12395</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:22:27 +0000</bug_when>
    <thetext>Pinged the package owners on the list, in order to ACK and merge Leo&apos;s patch noted in comment 3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12403</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-05 22:02:14 +0000</bug_when>
    <thetext>I think we may add the checker in patchcheck.py to check the source file attribute setting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12431</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-06 11:42:49 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #5)
&gt; I think we may add the checker in patchcheck.py to check the source file
&gt; attribute setting.

Liming, that&apos;s a good idea -- in theory anyway.

In practice, I&apos;ve just closed two other PatchCheck.py feature requests that I had reported (bug 703, bug 1526), because there seems to have been no capacity for implementing them in 1-2 years. So I don&apos;t really see new PatchCheck.py feature requests useful.

Regarding the present BZ, I&apos;m closing it as FIXED, due to commit 8dd962a657b2 (&quot;UefiCpuPkg/MpInitLib: Remove Executable attribute from MpLib.h&quot;, 2020-05-06).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2471</bug_id>
          
          <creation_ts>2020-01-16 22:27:31 +0000</creation_ts>
          <short_desc>Add new pcd to control TCG/TCG2 user confirmation time out</short_desc>
          <delta_ts>2022-02-14 01:34:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10930</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-01-16 22:27:31 +0000</bug_when>
    <thetext>Add a pcd named PcdPhysicalPresenceUserConfirmTimeout to control the TCG/TCG2 user confirmation time out. Default value is 0 and means wait for user input key forever.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10931</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-01-16 22:27:40 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18347</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2022-02-14 01:34:47 +0000</bug_when>
    <thetext>Close it as I am no longer the role to implement it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2348</bug_id>
          
          <creation_ts>2019-11-15 09:58:55 +0000</creation_ts>
          <short_desc>spelling mistake &quot;conenction&quot; should be &quot;connection&quot;</short_desc>
          <delta_ts>2020-04-14 08:06:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Maciej Rabeda">maciej.rabeda</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>maciej.rabeda</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10459</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-15 09:58:55 +0000</bug_when>
    <thetext>In NetworkPkg/TcpDxe/TcpTimer.c conenction should be connection:

    DEBUG (
      (EFI_D_ERROR,
      &quot;TcpConnectTimeout: connection closed because conenction timer timeout for TCB %p\n&quot;,
      Tcb)
      );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10848</commentid>
    <comment_count>1</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-01-10 09:19:04 +0000</bug_when>
    <thetext>Already reviewed a patch done by Antoine Coeur and Philippe Mathieu-Daude which addresses this. Waiting for PR to tianocore/edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12203</commentid>
    <comment_count>2</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-04-14 08:06:48 +0000</bug_when>
    <thetext>Fix contributed by Antoine Coeur &amp; Phil Daude, merged by Laszlo Ersek.
https://github.com/tianocore/edk2/commit/81c6f1762e9c70efbbaf24358ece67fec74e2083</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2244</bug_id>
          
          <creation_ts>2019-10-07 12:55:46 +0000</creation_ts>
          <short_desc>Consolidate OpenBoardPkgConfig.dsc and OpenBoardPkgPcd.dsc</short_desc>
          <delta_ts>2019-10-16 14:47:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>SimicsOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9925</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-07 12:55:46 +0000</bug_when>
    <thetext>The location for PCD configuration is currently inconsistent in SimicsOpenBoardPkg. A large set of FeaturePCD definitions are in OpenBoardPkgConfig.dsc while other PCD definitions (including FeaturePCD) are located in OpenBoardPkgPcd.dsc.

It is recommended to simply use the OpenBoardPkgPcd.dsc file to manage PCD configuration and include this into the main DSC file OpenBoardPkg.dsc at the top of the file. In addition, the PCDs should be easier to find to reduce lookup time and prevent accidental duplication. PCDs should be organized in each section (e.g. [PcdsFixedAtBuild]) by the location the PCD is pulled from in terms of the following categories:
 * EDK2 Configuration (defined in a package namespace in the edk2 repository)
 * Silicon Initialization Configuration (the silicon package used by the board)
 * Platform Configuration (the MinPlatformPkg in this case)
 * Board Configuration (the SimicsOpenBoardPkg in this case)
 * Board-specific Configuration (BoardX58Ich10 board directory in this case)

This should be done for the BoardX58Ich10 board currently in SimicsOpenBoardPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9954</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:24:46 +0000</bug_when>
    <thetext>Patch list sent for code review on the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10044</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 14:47:33 +0000</bug_when>
    <thetext>Submitted in commits 7cb7065023c075dba7c8442a6ad35fdf67c66a31 adn 8efdb07eeee339ed1d99a1976326a77f68210388.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2703</bug_id>
          
          <creation_ts>2020-05-05 22:32:45 +0000</creation_ts>
          <short_desc>ECC fails to run with Py38 interpreter</short_desc>
          <delta_ts>2020-05-12 22:25:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2707</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12405</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-05-05 22:32:45 +0000</bug_when>
    <thetext>ecc --help
Traceback (most recent call last):
  File &quot;C:\Users\rni2\AppData\Local\Programs\Python\Python38\lib\runpy.py&quot;, line 192, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File &quot;C:\Users\rni2\AppData\Local\Programs\Python\Python38\lib\runpy.py&quot;, line 85, in _run_code
    exec(code, run_globals)
  File &quot;E:\Work\10nm\Edk2\BaseTools\Source\Python\Ecc\EccMain.py&quot;, line 409, in &lt;module&gt;
    StartTime = time.clock()
AttributeError: module &apos;time&apos; has no attribute &apos;clock&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12491</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-12 22:25:12 +0000</bug_when>
    <thetext>Duplicated one.

*** This bug has been marked as a duplicate of bug 2707 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2598</bug_id>
          <alias>DVSEC</alias>
          <creation_ts>2020-03-15 10:47:42 +0000</creation_ts>
          <short_desc>[MdePkg/PciExpress40.h] DVSEC definition missing</short_desc>
          <delta_ts>2020-07-11 07:10:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashraf Javeed">ashraf.javeed</reporter>
          <assigned_to name="Ashraf Javeed">ashraf.javeed</assigned_to>
          <cc>ashraf.javeed</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11694</commentid>
    <comment_count>0</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-03-15 10:47:42 +0000</bug_when>
    <thetext>The PCI Express Base Specification 4.0 defined the PCI Express Designated Vendor Specific Capability (DVSEC) structure in chapter 7.9.6; whose definition is not defined in the MdePkg&apos;s PciExpress40.h file.

This definition is necessary to define the new technologies based on PCIe specifications.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11695</commentid>
    <comment_count>1</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-03-15 10:51:39 +0000</bug_when>
    <thetext>DVSEC not defined in PciExpress40.h.
Assigning to self.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11696</commentid>
    <comment_count>2</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-03-15 10:53:58 +0000</bug_when>
    <thetext>I shall own the change to PciExpress40.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11698</commentid>
    <comment_count>3</comment_count>
      <attachid>485</attachid>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-03-16 01:27:22 +0000</bug_when>
    <thetext>Created attachment 485
Change to define the DVSEC in the PciExpress40.h

Patch sent to devel@edk2.groups.io</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11752</commentid>
    <comment_count>4</comment_count>
      <attachid>491</attachid>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-03-20 06:40:45 +0000</bug_when>
    <thetext>Created attachment 491
Patch 2:- Change to define the DVSEC in the PciExpress40.h

EDK2 repo Merge @1b6b4a83e1d85e48837068dfe409f5557b50d71d</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13086</commentid>
    <comment_count>5</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-07-11 07:09:25 +0000</bug_when>
    <thetext>Confirmed the changes are already into the EDK2/MdePkg/../IndustryStandard/PciExpress40.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13087</commentid>
    <comment_count>6</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2020-07-11 07:10:04 +0000</bug_when>
    <thetext>Good to close</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>485</attachid>
            <date>2020-03-16 01:27:22 +0000</date>
            <delta_ts>2020-03-20 06:40:45 +0000</delta_ts>
            <desc>Change to define the DVSEC in the PciExpress40.h</desc>
            <filename>0001-MdePkg-PciExpress40.h-DVSEC-definition-missing.patch</filename>
            <type>text/plain</type>
            <size>2813</size>
            <attacher name="Ashraf Javeed">ashraf.javeed</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>491</attachid>
            <date>2020-03-20 06:40:45 +0000</date>
            <delta_ts>2020-03-20 06:40:45 +0000</delta_ts>
            <desc>Patch 2:- Change to define the DVSEC in the PciExpress40.h</desc>
            <filename>0001-MdePkg-PciExpress40.h-DVSEC-definition-missing.patch</filename>
            <type>application/octet-stream</type>
            <size>2911</size>
            <attacher name="Ashraf Javeed">ashraf.javeed</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2494</bug_id>
          
          <creation_ts>2020-01-29 19:38:30 +0000</creation_ts>
          <short_desc>BaseTools/DscBuildData: Fix PCD autogen include file conflict with standard includes such as &lt;stdio.h&gt;</short_desc>
          <delta_ts>2020-02-04 16:19:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2503</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2420</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11014</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 19:38:30 +0000</bug_when>
    <thetext>When using structured PCDs, a C application is auto generated
to fill in the structured PCD value.  The C application uses
the standard include files &lt;stdio.h&gt;, &lt;stdlib.h&gt;, and &lt;string.h&gt;.
This C application also supports include paths from package DEC
files when a structured PCD declaration provides a &lt;Packages&gt;
list.  The complete list of include paths are -I options for
include paths from package DEC files and the compiler&apos;s standard
include paths.

-I include paths are higher priority than the standard include
paths.  If the -I included paths from package DEC files contain
&lt;stdio.h&gt;, &lt;stdlib.h&gt;, or &lt;string.h&gt; the wrong include files are
used to compile the C application for the structured PCD value.

The fix is to update GenerateByteArrayValue() to skip any package
DEC include paths that contain &lt;stdio.h&gt;, &lt;stdlib.h&gt;, or
&lt;string.h&gt;.

Build failures were observed when adding a structured PCD to
CryptoPkg.  CryptoPkg contains &lt;stdio.h&gt;, &lt;stdlib.h&gt;, and
&lt;string.h&gt; in the path CryptoPkg/Library/Include to support
building Open SSL.  The Library/Include path is listed as a
private include path in CryptoPkg.dec.  Without this change, the
standard include files designed to support build OpenSLL are
used to build the structured PCD C application, and that build
fails.

Other packages that provide a standard C lib or a gasket for
a subset of the standard C lib will run into this same issue
if they also define and use a Structured PCD.  So this issue
is not limited to the CryptoPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11015</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 19:38:43 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11017</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 19:48:33 +0000</bug_when>
    <thetext>Patch email for review:

https://edk2.groups.io/g/devel/message/53551

Branch for review:

https://github.com/mdkinney/edk2/tree/Bug_2494_BaseTools_DscBuildData_Structured_Pcd_Autogen_Include_Conflict

EDK II CI PR for review:

https://github.com/tianocore/edk2/pull/321</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11065</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-04 16:19:56 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/b47fe2655da2279620fe86d55977a29e1626569e

EDK II CI Pull Request:

https://github.com/tianocore/edk2/pull/330</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2960</bug_id>
          
          <creation_ts>2020-09-11 04:32:47 +0000</creation_ts>
          <short_desc>Up Xtreme board hang at boot time</short_desc>
          <delta_ts>2020-10-12 22:51:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2963</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13661</commentid>
    <comment_count>0</comment_count>
      <attachid>552</attachid>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-09-11 04:32:47 +0000</bug_when>
    <thetext>Created attachment 552
log of Up Xtreme board getting hang

Up Xtreme board hang at boot time, the last log is:

Loading PEIM at 0x000FFFEA840 EntryPoint=0x000FFFEAC2D SiliconPolicyPeiPreMem.efi
PROGRESS CODE: V03020002 I0
FSP UpdatePeiPchPolicyPreMem
FspmUpd = 0x0
WYQ UpdatePeiPchPolicyPreMem</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13662</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-09-11 04:36:31 +0000</bug_when>
    <thetext>I am working on it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13945</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-12 22:51:28 +0000</bug_when>
    <thetext>This is duplicate of https://bugzilla.tianocore.org/show_bug.cgi?id=2963, issue had been fixed by https://github.com/tianocore/edk2/pull/930

*** This bug has been marked as a duplicate of bug 2963 ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>552</attachid>
            <date>2020-09-11 04:32:47 +0000</date>
            <delta_ts>2020-09-11 04:32:47 +0000</delta_ts>
            <desc>log of Up Xtreme board getting hang</desc>
            <filename>upx-fail.log</filename>
            <type>application/octet-stream</type>
            <size>42552</size>
            <attacher name="Heng Luo">heng.luo</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2844</bug_id>
          
          <creation_ts>2020-07-09 23:00:50 +0000</creation_ts>
          <short_desc>SetVariable() returns EFI_SUCCESS after Reclaim() when variable is not actually set</short_desc>
          <delta_ts>2020-07-31 17:53:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13080</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-09 23:00:50 +0000</bug_when>
    <thetext>The UEFI Runtime Service SetVariable() can return EFI_SUCCESS even
when the variable is not actually set.  This can occur when the variable
store is almost full and the new variable being set causes the 
Reclaim() services to be run to free up some space.  If there is
enough space for the variable, then the variable is set and EFI_SUCCESS
is correctly returned.

However, if there is not enough space for the new variable after all
free space has been reclaimed, the variable is not actually set, but
SetVariable() still returns EFI_SUCCESS, and the caller incorrectly
believes the variable was set.

This issue can be reproduced with the EmulatorPkg:

1) Build and run the EmulatorPkg for IA32

  build -a IA32 -t VS2015x86 -p EmulatorPkg\EmulatorPkg.dsc
  WinHost.exe

2) Run the following script to attempt set 100 large NV variables.

  echo -off
  set -v LongVar 0123456789
  set -v LongVar %LongVar%%LongVar%
  set -v LongVar %LongVar%%LongVar%
  set -v LongVar %LongVar%%LongVar%
  set -v LongVar %LongVar%%LongVar%
  set -v LongVar %LongVar%%LongVar%
  for %a run (1, 80)
  set A%a %LongVar%
  endfor

This script completes without any without errors.  If the set command is run
without any parameters, all the variables are shown, including all 80 of the
new variables.

However, if the WinHost.exe is restarted (clearing the UEFI Shell variable cache)
only variables 1 to 66 are present.  Variables 67 to 80 are missing.  This is 
means there is a silent SetVariable() failure.

3) The following script cleans up the NV variables

  echo -off  
  for %a run (1, 80)
  set -d A%a
  endfor

This issue is in the return status from the Reclaim() function in the file
MdeModulePkg\Universal\Variable\RuntimeDxe\Variable.c.  When Reclaim() frees
space and attempts to set the variable but fails because there is not enough
space, Status is correctly set to EFI_OUT_OF_RESOURCES.  However, the Done:
section of the Reclaim() function may call SynchronizeRuntimeVariableCache()
and the failed Status value is overwritten with the status from the call to
SynchronizeRuntimeVariableCache() which is usually EFI_SUCCESS. 

The fix is to only return the error status from SynchronizeRuntimeVariableCache()
if the variable was set successfully.

After applying this fix in Reclaim(), the script above produces the expected
output:

  FS0:\&gt; echo -off
  set: Unable to set A67
  set: Unable to set A68
  set: Unable to set A69
  set: Unable to set A70
  set: Unable to set A71
  set: Unable to set A72
  set: Unable to set A73
  set: Unable to set A74
  set: Unable to set A75
  set: Unable to set A76
  set: Unable to set A77
  set: Unable to set A78
  set: Unable to set A79
  set: Unable to set A80

The set command also only shows variables A1 to A66.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13082</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-09 23:09:43 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13083</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-09 23:10:08 +0000</bug_when>
    <thetext>Patch review email:

https://edk2.groups.io/g/devel/message/62327</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13253</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 17:53:51 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/256c4470f86e53661c070f8c64a1052e975f9ef0

Pull Request:

https://github.com/tianocore/edk2/pull/793</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2262</bug_id>
          
          <creation_ts>2019-10-09 20:02:14 +0000</creation_ts>
          <short_desc>fix spelling errors in FmpDevicePkg</short_desc>
          <delta_ts>2019-10-23 11:13:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9987</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 20:02:14 +0000</bug_when>
    <thetext>Lots of errors.  Fixed here. 
https://github.com/spbrogan/edk2/commit/f9c3e83048914a173b5447f3d0f464c1a7d41dbb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10062</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:22:36 +0000</bug_when>
    <thetext>All these spelling errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10119</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-18 16:25:37 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/49245</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10191</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-23 11:13:52 +0000</bug_when>
    <thetext>pushed as 5c7006c9de..95d2883647</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2727</bug_id>
          
          <creation_ts>2020-05-20 04:24:56 +0000</creation_ts>
          <short_desc>Support for OS debug memory buffer when the OS debugger loader supports EFI_PCI_PROTOCOL or EFI_IOMMU_PROTOCOL</short_desc>
          <delta_ts>2020-05-26 22:11:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Sheng Wei">w.sheng</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12558</commentid>
    <comment_count>0</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-05-20 04:24:56 +0000</bug_when>
    <thetext>Whenever the platform supports Pre-boot DMA protection it should allocate additional pages for OS debugger when it support EFI_PCI_PROTOCOL to require DMA buffer in RS_DATA or BS_DATA.

The platform sample code should also define a PCD to customize the number of pages to be allocated to support various debugger request for future OS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12733</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-26 22:07:05 +0000</bug_when>
    <thetext>This may be the issue in OS debugger, not in firmware code issue. So, it is not required to be tracked here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12734</commentid>
    <comment_count>2</comment_count>
    <who name="Sheng Wei">w.sheng</who>
    <bug_when>2020-05-26 22:11:52 +0000</bug_when>
    <thetext>The solution is still in discuss.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2154</bug_id>
          
          <creation_ts>2019-09-04 23:52:16 +0000</creation_ts>
          <short_desc>Add S3Advanced folder in AdvancedFeaturePkg and implement required S3 implementation in S3Advanced PEIM driver</short_desc>
          <delta_ts>2019-09-17 05:32:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Marc Chen">marc.w.chen</reporter>
          <assigned_to name="Marc Chen">marc.w.chen</assigned_to>
          <cc>michael.a.kubacki</cc>
    
    <cc>nobody</cc>
    
    <cc>rangasai.v.chaganty</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9464</commentid>
    <comment_count>0</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-09-04 23:52:16 +0000</bug_when>
    <thetext>Add S3Advanced folder in AdvancedFeaturePkg and implement required S3 implementation in S3Advanced PEIM driver, currently we need to install SmmAccessPpi for S3 resume.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9465</commentid>
    <comment_count>1</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-09-04 23:52:48 +0000</bug_when>
    <thetext>acknowledged</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9698</commentid>
    <comment_count>2</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-09-17 05:32:46 +0000</bug_when>
    <thetext>it is push @fbab48fb133d80fa9376131ebdce079edfa9bea5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2045</bug_id>
          
          <creation_ts>2019-08-01 22:29:16 +0000</creation_ts>
          <short_desc>EmulatorPkg build fails VS2015x86 if VS2017 is also installed</short_desc>
          <delta_ts>2019-08-06 12:35:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8719</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-01 22:29:16 +0000</bug_when>
    <thetext>The EmulatorPkg build fails to find the linker when VS2015x86
tool chain tag is used on a host that has installed both 
VS2015 and VS2017.

The issue is that the wrong environment variables are used to 
find the VS2015x86 tools.

%VS2015_PREFIX% should be used instead of $(VCINSTALLDIR)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8723</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-01 22:41:17 +0000</bug_when>
    <thetext>When VS2015x86 tool chain tag is used, edksetup.bat VS2015 should be called to make sure the correct environment is set.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8730</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-01 23:28:28 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8733</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-01 23:34:11 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/44841</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8799</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-06 12:35:34 +0000</bug_when>
    <thetext>Pushed at 02031cfc92..c30fbac4e2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2516</bug_id>
          
          <creation_ts>2020-02-10 21:26:07 +0000</creation_ts>
          <short_desc>Add new package for XML support in Edk2</short_desc>
          <delta_ts>2022-02-10 22:46:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2517</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Sean Brogan">sean.brogan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11191</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-02-10 21:26:07 +0000</bug_when>
    <thetext>Would like this to be part of 2020 Q2 Stable Tag. 

Code is ready here: https://github.com/spbrogan/edk2-staging/commit/24bfea619c21e51ab86f4bcd5b269aacd307629f


Add a new package for XML.  This package has general purpose XML lib for 
serializing and de-serializing to XML.  It also has a simple query interface work traversing and finding nodes within XML.  

Includes host and target unit tests.

See Package Readme for more details.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11368</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:30:23 +0000</bug_when>
    <thetext>Sean, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18333</commentid>
    <comment_count>2</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2022-02-10 22:46:41 +0000</bug_when>
    <thetext>cancel request</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2980</bug_id>
          
          <creation_ts>2020-09-21 17:02:15 +0000</creation_ts>
          <short_desc>Should OVMF VirtioGpuDxe install GOP on secondary child handle?</short_desc>
          <delta_ts>2020-09-22 04:10:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13727</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-09-21 17:02:15 +0000</bug_when>
    <thetext>Right now in VirtioGpuDxe/DriverBinding.c it installs the GOP on a secondary handle.

``` c
 Status = gBS-&gt;InstallProtocolInterface (&amp;VgpuGop-&gt;GopHandle,
                  &amp;gEfiGraphicsOutputProtocolGuid, EFI_NATIVE_INTERFACE,
                  &amp;VgpuGop-&gt;Gop);
  if (EFI_ERROR (Status)) {
    goto UninitGop;
  }
```

Is this proper/desired behavior?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13732</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-22 04:10:54 +0000</bug_when>
    <thetext>Hi Matthew,

I think that, by &quot;secondary handle&quot;, you mean &quot;child handle&quot;. Is my understanding correct?

If it is, then the answer is, &quot;yes, that&apos;s intentional&quot;. The driver is supposed to be a bus driver. Please see in &quot;OvmfPkg/VirtioGpuDxe/VirtioGpu.h&quot;:

  //
  // GopHandle is the UEFI child handle that carries the device path ending
  // with the ACPI ADR node, and the Graphics Output Protocol. Never NULL.
  //
  EFI_HANDLE                           GopHandle;

References:
- the &quot;ACPI _ADR&quot; discussion in the UEFI-2.8 spec, in section &quot;12.10 Rules for PCI/AGP Devices&quot;
- section &quot;23.2 Graphics Output Protocol Implementation&quot; in the Driver Writer&apos;s Guide for UEFI 2.3.1 (v1.01)

Closing the BZ. Thanks!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2398</bug_id>
          
          <creation_ts>2019-12-01 20:01:29 +0000</creation_ts>
          <short_desc>Fix EBC build failure caused by change of size_t&apos;s definition</short_desc>
          <delta_ts>2019-12-04 19:51:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10594</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-12-01 20:01:29 +0000</bug_when>
    <thetext>The below bug mentions that it breaks EBC build.

https://bugzilla.tianocore.org/show_bug.cgi?id=2338

This is because LzmaCustomDecompressLib.inf doesn&apos;t support EBC after the definition of size_t is changed.
So the MdeModule.dsc and LzmaCustomDecompressLib.inf should be changed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10616</commentid>
    <comment_count>1</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-12-04 19:51:12 +0000</bug_when>
    <thetext>fixed at 6cc63aee53264d4375c2245cd098addc27c08a5a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2869</bug_id>
          
          <creation_ts>2020-07-30 13:08:18 +0000</creation_ts>
          <short_desc>FMP Protocol Function Parameter Input Validation Could be Improved in FmpDxe</short_desc>
          <delta_ts>2020-08-06 23:13:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13240</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-07-30 13:08:18 +0000</bug_when>
    <thetext>There&apos;s several instances in FmpDxe where functions that back a given EFI_FIRMWARE_MANAGEMENT_PROTOCOL instance (exposed to external callers) do not fully validate pointer input before consuming it.

The most common case is when FIRMWARE_MANAGEMENT_PRIVATE_DATA_FROM_THIS () is used to retrieve the private context structure from the user passed protocol pointer (&quot;This&quot; parameter).

At a minimum, the function should confirm the pointer is not NULL before it is dereferenced.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13241</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-07-30 13:08:51 +0000</bug_when>
    <thetext>I have a patch I&apos;ll send to the list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13333</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-08-06 23:13:18 +0000</bug_when>
    <thetext>Code is reviewed and submitted to edk2/master.

Patch series rev3 (final): https://edk2.groups.io/g/devel/message/63794
Patch series rev2: https://edk2.groups.io/g/devel/message/63741
Patch series rev1:https://edk2.groups.io/g/devel/message/63535

Commit: https://github.com/tianocore/edk2/commit/b4b9496b3c17c76fab3ebb5a59d4c8d9b6b5c505</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2642</bug_id>
          
          <creation_ts>2020-03-29 08:57:52 +0000</creation_ts>
          <short_desc>XCODE5 built OVMF does not support memory attributes</short_desc>
          <delta_ts>2020-04-01 10:37:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=559</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=564</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vitaly Cheptsov">vit9696</reporter>
          <assigned_to name="Vitaly Cheptsov">vit9696</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11892</commentid>
    <comment_count>0</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-03-29 08:57:52 +0000</bug_when>
    <thetext>Current OVMF .dsc files leave unaligned PE sections for runtime and SMM drivers, which results in CoreDxe failing to use memory attributes when OVMF is compiled with XCODE5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11893</commentid>
    <comment_count>1</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-03-29 09:23:03 +0000</bug_when>
    <thetext>Patch submitted:
https://edk2.groups.io/g/devel/message/56559

Requesting for merge in edk2-stable202005.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11907</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-30 07:38:55 +0000</bug_when>
    <thetext>IN_PROGRESS per comment 1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11910</commentid>
    <comment_count>3</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-03-30 08:27:06 +0000</bug_when>
    <thetext>Hrm, according to:

https://bugzilla.tianocore.org/show_bug.cgi?id=564

XCODE5 is believed to be incompatible with memory protection. However, memory attributes work fine for me if I merge the patch I submitted (confirmed in Linux). I believe memory protection in OVMF itself also works unless it requires some extra configuration. Currently I build OVMF as follows:
build -a X64 -t XCODE5 -b NOOPT -p OvmfPkg/OvmfPkgX64.dsc

Let me know whether I miss anything. If I do not, then 564 should also be closed once this change gets merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11911</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-30 08:45:23 +0000</bug_when>
    <thetext>Could the difference be to the MTOC flags pointed out by Andrew in &lt;https://bugzilla.tianocore.org/show_bug.cgi?id=564#c4&gt;?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11913</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-30 08:46:13 +0000</bug_when>
    <thetext>(The patch linked in comment 1 does contain the MTOC flag changes.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11916</commentid>
    <comment_count>6</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-03-30 09:26:12 +0000</bug_when>
    <thetext>Hmm, I think not. We happened to come up with the same idea with Mike, my and his changes are pretty much the same. And -align implicitly adds -section_alignment flag with the same value.

To be honest I can only imagine some buggy MTOC or some misconfigured build. We compile MTOC ourselves, and it works just fine[1], at least for our needs.

It will be nice if you let me know about any kind of special configurations to test if they exist.

[1] https://github.com/acidanthera/ocbuild/tree/master/external</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12004</commentid>
    <comment_count>7</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-04-01 10:18:17 +0000</bug_when>
    <thetext>Ok, I believe I now see the issue with XCODE5. The problem apparently is only reproducible with SMM enabled. To reproduce it I built used the following command to launch OVMF with SMM:

qemu-system-x86_64 -L . -global driver=cfi.pflash01,property=secure,value=on -drive if=pflash,format=raw,unit=0,file=&quot;$OVMF_BUILD&quot;/OVMF_CODE.fd,readonly=on -drive if=pflash,format=raw,unit=1,file=&quot;$OVMF_BUILD&quot;/OVMF_VARS.fd -hda fat:rw:ESP -global ICH9-LPC.disable_s3=1 -machine q35,smm=on,accel=tcg -m 2048 -cpu Penryn -smp 4,cores=2 -cdrom /Users/user/Downloads/debian-10.3.0-amd64-netinst.iso -gdb tcp::8865 -serial stdio &gt; output.txt

And the following commands to build OVMF with SMM:

build -a X64 -t XCODE5 -b NOOPT -p OvmfPkg/OvmfPkgX64.dsc -D SMM_REQUIRE=1 -D DEBUG_ON_SERIAL_PORT=1

build -a X64 -t CLANGPDB -b NOOPT -p OvmfPkg/OvmfPkgX64.dsc -D SMM_REQUIRE=1 -D DEBUG_ON_SERIAL_PORT=1

CLANGPDB version boots fine, yet XCODE5 version crashes:

!!!! X64 Exception Type - 0E(#PF - Page-Fault)  CPU Apic ID - 00000000 !!!!
ExceptionData - 0000000000000003  I:0 R:0 U:0 W:1 P:1 PK:0 SS:0 SGX:0
RIP  - 000000007FFD5C4B, CS  - 0000000000000038, RFLAGS - 0000000000000002
RAX  - 0000000000000001, RCX - FFFFFFFFFFFFFFFF, RDX - 000000007FF603F8
RBX  - 0000000000000000, RSP - 000000007FF624D0, RBP - 000000007FF62520
RSI  - 00000000FFFCD9A3, RDI - 000000007FF6D000
R8   - 000000007FF62317, R9  - 0000000000000000, R10 - 0000000000000001
R11  - 0000000000000001, R12 - 0000000000000000, R13 - 0000000000000000
R14  - 0000000000000000, R15 - 0000000000000000
DS   - 0000000000000020, ES  - 0000000000000020, FS  - 0000000000000020
GS   - 0000000000000020, SS  - 0000000000000020
CR0  - 0000000080010033, CR2 - 000000007FFFCB68, CR3 - 000000007FF53000
CR4  - 0000000000000668, CR8 - 0000000000000000
DR0  - 0000000000000000, DR1 - 0000000000000000, DR2 - 0000000000000000
DR3  - 0000000000000000, DR6 - 00000000FFFF0FF0, DR7 - 0000000000000400
GDTR - 000000007FF16000 000000000000004F, LDTR - 0000000000000000
IDTR - 000000007FF5C000 00000000000001FF,   TR - 0000000000000040
FXSAVE_STATE - 000000007FF5DC60
SMM exception at access (0x7FFFCB68)
It is invoked from the instruction before IP(0x7FFD5C4B) in module (/Users/user/Documents/UefiWorkspace/Build/OvmfX64/NOOPT_XCODE5/X64/MdeModulePkg/Core/PiSmmCore/PiSmmCore/DEBUG/PiSmmCore.dll)

The crash happens in SmmCpuMemoryManagement.c during the call to SetUefiMemMapAttributes, which eventually reaches SmmAllocatePages, which then increments a global variable (mMapDepth integer). The cause of this increment causing a crash is a bug in mtoc utility, which marks .data section as RWX (regardless of the fact that the original Mach-O has it RW). After patching mtoc to resolve the issue I can now boot OVMF built with XCODE5 with SMM just fine. The patch to mtoc is posted in a separate bugreport dedicated to XCODE5 issues[1].

Given all that I suggest to merge the patch I posted and close this bug as resolved.

[1] https://bugzilla.tianocore.org/show_bug.cgi?id=564</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12007</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-01 10:37:20 +0000</bug_when>
    <thetext>Fixed in commit 4fb393aaa8bb029dc98a1330f40303bf16e2b092, via &lt;https://github.com/tianocore/edk2/pull/491&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2063</bug_id>
          
          <creation_ts>2019-08-07 16:47:33 +0000</creation_ts>
          <short_desc>KabylakeOpenBoardPkg Should Have  a Unique PLATFORM_GUID</short_desc>
          <delta_ts>2019-08-08 17:17:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8838</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-07 16:47:33 +0000</bug_when>
    <thetext>The PLATFORM_GUID currently the same in the following DSC files:

 - Platform/Intel/ClevoOpenBoardPkg/N1xxWU/OpenBoardPkg.dsc
 - Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/OpenBoardPkg.dsc
 - Platform/Intel/Vlv2TbltDevicePkg/PlatformPkgX64.dsc

The PLATFORM_GUID in KabylakeOpenBoardPkg/KabylakeRvp3/OpenBoardPkg.dsc should be unique.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8880</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-08 17:17:24 +0000</bug_when>
    <thetext>Committed in 821e89ef95e8ded9aa7a481945ebffc7cf320660.

https://github.com/tianocore/edk2-platforms/commit/821e89ef95e8ded9aa7a481945ebffc7cf320660</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2421</bug_id>
          
          <creation_ts>2019-12-16 00:39:24 +0000</creation_ts>
          <short_desc>FmpDxe: Support capsule dependency</short_desc>
          <delta_ts>2020-03-03 20:50:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>wei6.xu</reporter>
          <assigned_to>wei6.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10706</commentid>
    <comment_count>0</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-12-16 00:39:24 +0000</bug_when>
    <thetext>There are situations where a platform may have separately updatable firmware components (e.g. motherboard, BMC, EC, etc.) and in some cases, there may be dependencies between them. For instance, FWx requires FWy to be at least version 2.0 to install. Today, we don’t have a way to express that in our infrastructure. 

Capsule Dependency is an incremental change of FMP capsule update to support that capability. The capsule format is extended to include a set of binary encoded dependency expression. The dependency expression is evaluated after signature authentication before update is applied.

This feature is defined in chapter 23 of UEFI Spec 2.8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10722</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-12-17 21:20:12 +0000</bug_when>
    <thetext>Xu, Wei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11506</commentid>
    <comment_count>2</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2020-03-03 20:50:55 +0000</bug_when>
    <thetext>This feature is implemented at:
https://github.com/tianocore/edk2/commit/2ed845b3c3cd4dd9f4b0b3cf259ad5f92e28cb6c
https://github.com/tianocore/edk2/commit/48997fe4d38f51c8fa362fca849a400ed8b01f51</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2201</bug_id>
          
          <creation_ts>2019-09-18 05:34:47 +0000</creation_ts>
          <short_desc>An error occurs using special VpdPcd that is not used in the Inf file</short_desc>
          <delta_ts>2019-09-19 06:49:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9705</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-18 05:34:47 +0000</bug_when>
    <thetext>In dsc:
[PcdsDynamicExVpd.common.DEFAULT]
gBoardModuleTokenSpaceGuid.test1|*|{CODE({
  {0x0}  // terminator
})}

In dec:
[PcdsDynamicEx]
# Vpd GPIO table
  gBoardModuleTokenSpaceGuid.test1|{0}|GPIO_INIT_CONFIG[]|0x50000018 {
  &lt;HeaderFiles&gt;
    Library/GpioLib.h
  &lt;Packages&gt;
    MdePkg/MdePkg.dec
}

Error:
build.py...
 : error C0DE: Unknown fatal error when generating build report
        ReportFile.txt
(Python 3.6.6 on win32
Traceback (most recent call last):
  File &quot;C:\WP\AllPkg\CometLake\Edk2\BaseTools\Source\Python\build\BuildReport.py&quot;, line 2271, in GenerateReport
    PlatformReport(Wa, MaList, self.ReportType).GenerateReport(File, BuildDuration, AutoGenTime, MakeTime, GenFdsTime, self.ReportType)
  File &quot;C:\WP\AllPkg\CometLake\Edk2\BaseTools\Source\Python\build\BuildReport.py&quot;, line 2204, in GenerateReport
    FdReportListItem.GenerateReport(File)
  File &quot;C:\WP\AllPkg\CometLake\Edk2\BaseTools\Source\Python\build\BuildReport.py&quot;, line 2059, in GenerateReport
    VPDPcdList.sort(key=lambda x: int(x[2], 0))
  File &quot;C:\WP\AllPkg\CometLake\Edk2\BaseTools\Source\Python\build\BuildReport.py&quot;, line 2059, in &lt;lambda&gt;
    VPDPcdList.sort(key=lambda x: int(x[2], 0))
ValueError: invalid literal for int() with base 0: &apos;*&apos;
)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9713</commentid>
    <comment_count>1</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-18 21:57:22 +0000</bug_when>
    <thetext>Assign it to Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9722</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-19 06:49:46 +0000</bug_when>
    <thetext>fix it in 85ccbee2abf4ac9ed006409d1b02a3bdd660261c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2662</bug_id>
          
          <creation_ts>2020-04-04 15:07:13 +0000</creation_ts>
          <short_desc>OvmfPkg has numerous public libraries not declared in the DEC file</short_desc>
          <delta_ts>2020-04-08 05:34:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12067</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-04-04 15:07:13 +0000</bug_when>
    <thetext>Working on adding the Core CI tests to OvmfPkg. 

OvmfPkg has numerous public libraries (header files in public include folder) not declared in the DEC file

ERROR - Library Header File Include/Library/MemEncryptSevLib.h not declared in package DEC OvmfPkg/OvmfPkg.dec
ERROR - Library Header File Include/Library/PlatformFvbLib.h not declared in package DEC OvmfPkg/OvmfPkg.dec
ERROR - Library Header File Include/Library/VirtioLib.h not declared in package DEC OvmfPkg/OvmfPkg.dec
ERROR - Library Header File Include/Library/VirtioMmioDeviceLib.h not declared in package DEC OvmfPkg/OvmfPkg.dec
ERROR - ---&gt;Test Failed: Library Class Check Test NO-TARGET returned 4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12081</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-07 06:07:20 +0000</bug_when>
    <thetext>Posted

* [edk2-devel] [PATCH]
  OvmfPkg: supply missing lib class declarations in the DEC file

http://mid.mail-archive.com/20200407100545.25406-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/57020</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12142</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-08 05:34:24 +0000</bug_when>
    <thetext>Fix merged as commit 7cfc48fe4f97, via &lt;https://github.com/tianocore/edk2/pull/511&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2087</bug_id>
          
          <creation_ts>2019-08-16 01:46:04 +0000</creation_ts>
          <short_desc>ECC reports an false positive error</short_desc>
          <delta_ts>2020-01-14 02:18:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9027</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-16 01:46:04 +0000</bug_when>
    <thetext>In CryptHkdf.c  line 42

  EVP_PKEY_CTX *pHkdfCtx;

Variable pHkdfCtx begins with lower case &apos;p&apos;, which should be acceptable because it it is a pointer.(Refer to CCS_2_1_Draft, 4.3.3.3)
So ECC tool should be improved to handle issues like this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9028</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-16 01:46:43 +0000</bug_when>
    <thetext>Assigned to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10810</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-08 20:31:29 +0000</bug_when>
    <thetext>Zhiju will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10839</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-01-09 23:52:54 +0000</bug_when>
    <thetext>patch in 57c0eb52448ff96974159d04672c4552cdc35d17</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10885</commentid>
    <comment_count>4</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-01-14 02:18:36 +0000</bug_when>
    <thetext>fixed it in 072b9c28393d191733187e701307cdab166a4c4d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2919</bug_id>
          
          <creation_ts>2020-08-21 02:58:13 +0000</creation_ts>
          <short_desc>Reference implement of EFI Redfish BIOS resource provisioning transport protocol</short_desc>
          <delta_ts>2022-03-03 22:21:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Reference Implementation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chang, Abner">abner.chang</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>aaron.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nickle.wang</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13485</commentid>
    <comment_count>0</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-21 02:58:13 +0000</bug_when>
    <thetext>This protocol provides the API to transfer Redfish BIOS resource provisioning payload. For example, Redfish BIOS resource provisioning transport could be over TCP/IP. However, it could be IPMI over KCS, PMCI, MCTP or others in early POST, which is implemetation-specific.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13521</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-08-25 21:55:06 +0000</bug_when>
    <thetext>Start the reference implemenation in Edk2. Plan to design review in TianoCore. 
100% disucssion and implemenation in Edk2 community first. 

Submit BZ for the spec change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18551</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-03-03 22:21:33 +0000</bug_when>
    <thetext>The EDK2 Redfish solution is all upstream to edk2 RedfishPkg. This issue is no longer valid because the implementation was changed and moved to RedfishClientPkg.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2576</bug_id>
          
          <creation_ts>2020-03-06 18:56:54 +0000</creation_ts>
          <short_desc>Expand PcdEmbeddedFdBaseAddress, PcdEmbeddedFdSize, PcdFlashFvMainSize, PcdPrePiStackSize, and a few other PCD&apos;s in EmbeddedPkg to support addresses above 4G</short_desc>
          <delta_ts>2020-03-25 14:10:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmbeddedPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11604</commentid>
    <comment_count>0</comment_count>
      <attachid>469</attachid>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-06 18:56:54 +0000</bug_when>
    <thetext>Created attachment 469
proposed patch

Resize some PCDs in EmbeddedPkg to UINT64 to fit addresses above 4G</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11726</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-17 22:18:25 +0000</bug_when>
    <thetext>@Ard, can you check it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11841</commentid>
    <comment_count>2</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-25 13:21:45 +0000</bug_when>
    <thetext>Check what exactly? This is a bugzilla ticket with a very long title, and a single line of content that says &apos;resize some PCDs&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11845</commentid>
    <comment_count>3</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-25 13:51:27 +0000</bug_when>
    <thetext>Basically, this patch changes the size of some PCD&apos;s from UINT32 to UINT64. This allow memory addresses above the UINT32 for systems with more than 4GB of memory in those PCD&apos;s.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11846</commentid>
    <comment_count>4</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-25 13:55:20 +0000</bug_when>
    <thetext>Ah apologies - I did not notice there was a patch attached.

Patches should be sent to the mailing list for review. Feel free to add me on cc when you do (ard.biesheuvel@linaro.org)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11847</commentid>
    <comment_count>5</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-25 14:00:11 +0000</bug_when>
    <thetext>No worries- I agree, the title is more than a little esoteric and could be much better.

It&apos;s just a proposed patch (it has MS_CHANGE tags on it for example). I can prepare a patch and send it to the mailing list if it&apos;s confirmed and accepted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11848</commentid>
    <comment_count>6</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-25 14:10:52 +0000</bug_when>
    <thetext>(In reply to Matthew Carlson from comment #5)
&gt; No worries- I agree, the title is more than a little esoteric and could be
&gt; much better.
&gt; 
&gt; It&apos;s just a proposed patch (it has MS_CHANGE tags on it for example). I can
&gt; prepare a patch and send it to the mailing list if it&apos;s confirmed and
&gt; accepted.

Please submit your patch to the list once you think it is ready for inclusion.

Please don&apos;t attach half baked patches to bugzilla entries and waste reviewer time by omitting changes that you know are necessary (such as MS_CHANGE tags that need to be removed)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>469</attachid>
            <date>2020-03-06 18:56:54 +0000</date>
            <delta_ts>2020-03-06 18:56:54 +0000</delta_ts>
            <desc>proposed patch</desc>
            <filename>ResizeEmbeddedPkgPcds.patch</filename>
            <type>application/octet-stream</type>
            <size>2425</size>
            <attacher name="Matthew Carlson">macarl</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2472</bug_id>
          
          <creation_ts>2020-01-16 23:45:44 +0000</creation_ts>
          <short_desc>Replace the ASSERT with return error code in TcgPhysicalPresenceLib</short_desc>
          <delta_ts>2020-02-11 20:45:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10932</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-01-16 23:45:44 +0000</bug_when>
    <thetext>Replace the ASSERT with the error code return in the TpmPhysicalPresence
and GetTpmCapability.

Add missing error checking after call TpmPhysicalPresence in
TcgPhysicalPresenceLibProcessRequest.

Catching the error code is better than ASSERT. ASSERT may not work in release version BIOS which would cause the error missing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10935</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-01-16 23:47:44 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11221</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-02-11 20:45:42 +0000</bug_when>
    <thetext>Fixed at 01712e65089297581036f17c0dca2801f4b694b3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2349</bug_id>
          
          <creation_ts>2019-11-15 10:02:29 +0000</creation_ts>
          <short_desc>spelling mistake &quot;consistant&quot; should be &quot;consistent&quot;</short_desc>
          <delta_ts>2022-01-14 20:38:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10460</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-15 10:02:29 +0000</bug_when>
    <thetext>BaseTools/Source/C/VolInfo/VolInfo.c spelling mistake &quot;consistant&quot; should be consistent:

printf (&quot;ERROR: Volume Size not consistant with Block Maps!\n&quot;);

Actually, there are lots more spelling mistakes in EDK2, I think I may run out of will power to file bugs for all of them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13275</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:20:14 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13276</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:30:34 +0000</bug_when>
    <thetext>Patch for review:

https://edk2.groups.io/g/devel/message/63602</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18160</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-01-14 20:38:20 +0000</bug_when>
    <thetext>Email code review:
    https://edk2.groups.io/g/devel/message/63602

Commit:
    https://github.com/tianocore/edk2/commit/e188ecc8b4aed8fdd26b731d43883861f5e5e7b4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2245</bug_id>
          
          <creation_ts>2019-10-07 13:14:02 +0000</creation_ts>
          <short_desc>KabylakeSiliconPkg DSC library include files should include section tags</short_desc>
          <delta_ts>2019-10-16 14:46:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9926</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-07 13:14:02 +0000</bug_when>
    <thetext>The DSC LibraryClass files in KabylakeSiliconPkg that are intended to be included elsewhere such as SiPkgPeiLib.dsc, SiPkgDxeLib.dsc, SiPkgCommonLib.dsc
should have section tags for the libraries so that they are not dependent on the top-level DSC file to place the include file in the correct location in the DSC file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9953</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:24:38 +0000</bug_when>
    <thetext>Patch list sent for code review on the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10043</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 14:46:42 +0000</bug_when>
    <thetext>Submitted in commit 70672702a086a291884f4143bf934f6b73d6b9b4.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2131</bug_id>
          
          <creation_ts>2019-08-26 11:05:35 +0000</creation_ts>
          <short_desc>Incorrect entropy computation</short_desc>
          <delta_ts>2024-04-10 17:38:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>brent.holtsclaw</reporter>
          <assigned_to name="John Mathews">john.mathews</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kraxel</cc>
    
    <cc>miki.demeter</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9248</commentid>
    <comment_count>0</comment_count>
    <who name="">brent.holtsclaw</who>
    <bug_when>2019-08-26 11:05:35 +0000</bug_when>
    <thetext>Found that the entropy within edk2-platforms -MinPlatformPkg/ is incorrectly generated.  Believe this to be a functional issue due to when it is used within the flow, however due to the location of the code wanted to be safe and allow others that are more familiar with the code to make the call.

Under edk2-platforms the RdRandGenerateEntropy function improperly generates entropy within:
Platform/Intel/MinPlatformPkg/Tcg/Tcg2PlatformDxe/Tcg2PlatformDxe.c
Platform/Intel/MinPlatformPkg/Tcg/Tcg2PlatformPei/Tcg2PlatformPei.c

The function correctly generates entropy within edk2:
SecurityPkg/RandomNumberGenerator/RngDxe/RdRand.c

Fix:
Update the functionality of the above files to use the logic from SecurityPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10675</commentid>
    <comment_count>1</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-12-11 11:56:48 +0000</bug_when>
    <thetext>from 12/4 meeting - agree that this is an issue

request infosec members to assess their closed source code to see if the same issue exists

if so, this will impact potential embargo and other disposition details</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11076</commentid>
    <comment_count>2</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:30:20 +0000</bug_when>
    <thetext>assign to intel&apos;s min pkg owner.  

in 2/5/2020 meeting haven&apos;t hear any feedback from attendees on their potential platform impact</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13191</commentid>
    <comment_count>3</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-28 17:49:15 +0000</bug_when>
    <thetext>I recommend fixing this as a normal bug, in the open.

The incorrect RdRandGenerateEntropy() function will initialize 16 bytes of random data for every 64 bytes in the buffer. 

This function is only called in one place, in an S3 resume error handling flow, to generate a random TPM PlatformAuth value. 16 bytes of random data is probably sufficient for this corner case usage.  Exposure seems low.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13213</commentid>
    <comment_count>4</comment_count>
      <attachid>534</attachid>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-29 00:32:02 +0000</bug_when>
    <thetext>Created attachment 534
v1 patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15006</commentid>
    <comment_count>5</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2021-02-03 14:14:17 +0000</bug_when>
    <thetext>Moving the status to &quot;IN_PROGRESS&quot; because a patch is provided.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15008</commentid>
    <comment_count>6</comment_count>
    <who name="">brent.holtsclaw</who>
    <bug_when>2021-02-03 17:15:38 +0000</bug_when>
    <thetext>CVSS scoring:
Initial reaction
CVSS  4.0 Medium:
https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:L/AC:H/PR:N/UI:N/S:U/C:L/I:L/A:N

Unsure if Confidentiality is actually impacted though.  Could also be 
2.9 Low 
https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:L/AC:H/PR:N/UI:N/S:U/C:N/I:L/A:N
or 5.1 Medium
https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:L/AC:H/PR:N/UI:N/S:U/C:N/I:H/A:N</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18820</commentid>
    <comment_count>7</comment_count>
    <who name="Miki Demeter">miki.demeter</who>
    <bug_when>2022-04-18 14:06:08 +0000</bug_when>
    <thetext>Is this patch going to be submitted upstream? it is not currently in the minplatform package. 

If not can we close this and open it to public?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22903</commentid>
    <comment_count>8</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2024-04-10 15:02:08 +0000</bug_when>
    <thetext>We think this issue has been resolved already by below two commits:
(1) https://github.com/tianocore/edk2-platforms/commit/970b621c04ed4596ca003fd39b32f0c3022dd3fd
Removed RdRandGenerateEntropy from Tcg2PlatformPei.c
(2) https://github.com/tianocore/edk2-platforms/commit/6dfc9b39cc2e2dded96a585eee8e8fbcb1a61dcc
Removed RdRandGenerateEntropy from Tcg2PlatformDxe.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22904</commentid>
    <comment_count>9</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2024-04-10 17:38:43 +0000</bug_when>
    <thetext>I confirmed with Brent Holtsclaw that issue has been resolved in edk2-platforms by commits 970b621c04ed4596ca003fd39b32f0c3022dd3fd and 6dfc9b39cc2e2dded96a585eee8e8fbcb1a61dcc. 

Opening the bug to public, and closing it.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>534</attachid>
            <date>2020-07-29 00:32:02 +0000</date>
            <delta_ts>2020-07-29 00:32:02 +0000</delta_ts>
            <desc>v1 patch</desc>
            <filename>v1.patch</filename>
            <type>text/plain</type>
            <size>2851</size>
            <attacher name="John Mathews">john.mathews</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2599</bug_id>
          
          <creation_ts>2020-03-16 03:53:57 +0000</creation_ts>
          <short_desc>HTTP Communication failed in Host Name Validation when wild card certificates are used</short_desc>
          <delta_ts>2020-03-23 10:10:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2600</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="sivaraman">sivaramann</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11699</commentid>
    <comment_count>0</comment_count>
    <who name="sivaraman">sivaramann</who>
    <bug_when>2020-03-16 03:53:57 +0000</bug_when>
    <thetext>We are seeing the failure in the HTTP communication after the Host Name Validation support added in HTTP module</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11714</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-17 22:02:01 +0000</bug_when>
    <thetext>Is this duplicated?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11767</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-23 10:10:40 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #1)
&gt; Is this duplicated?

I think so, yes.

*** This bug has been marked as a duplicate of bug 2600 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2495</bug_id>
          
          <creation_ts>2020-01-29 20:57:27 +0000</creation_ts>
          <short_desc>BaseTools/Build: Make sure host environment supports building Structured PCD POSIX application</short_desc>
          <delta_ts>2020-03-03 20:41:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2420</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11019</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 20:57:27 +0000</bug_when>
    <thetext>Structured PCD processing requires a host POSIX build
environment.

BaseTools/Build currently assumes that &apos;nmake&apos; and a Visual
Studio compiler are in the path when &apos;build.py&apos; is run on
Windows and that &apos;make&apos; and a GCC compiler are in the path
when &apos;build.py&apos; is run on Linux/OSX.  For most developers this
is a reasonable assumption.

However, the EDK II CI environment that runs in Azure 
Pipelines does not meet this requirement.  This may be true
for many production build environments that do not have the
same requirements as developer build requirements.

This issue is only exposed when Structure PCDs are used
in a build.  The proposed solution is to try to use
&apos;nmake&apos;.  If that build fails, then use the tool chain tag
to determine the path to the script that sets up the 
Visual Studio environment to build POSIX apps, and run
that script before running &apos;nmake&apos;.  This proposal should
have no impact on build systems that meet the assumption 
listed above, and will have a minor performance impact
on build systems that do not make that assumption.

Additional changes to BaseTools may be able to reduce 
the performance impact when Structured PCDs are used by
many packages/modules.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11020</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 20:57:38 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11023</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 21:41:10 +0000</bug_when>
    <thetext>Patch emails for review:

https://edk2.groups.io/g/devel/message/53555

Branch for review:

https://github.com/mdkinney/edk2/tree/Bug_2495_2496_Structured_Pcd_Host_Env_Compiler_Compat

EDK II CI PR for review:

https://github.com/tianocore/edk2/pull/323</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11119</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-05 22:25:21 +0000</bug_when>
    <thetext>An alternate solution is proposed to setup the Visual Studio
environment before the build steps are run.  This is more
efficient and can be added to the BaseTools WindowsVsToolChain
plugin.

https://edk2.groups.io/g/devel/message/53630</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11128</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-06 18:11:17 +0000</bug_when>
    <thetext>Patch email for review:
    https://edk2.groups.io/g/devel/message/53881

Branch for review:
    https://github.com/mdkinney/edk2/tree/Bug_2495_2496_Structured_Pcd_Host_Env_Compiler_Compat_V2

EDK II CI PullRequest for review:
    https://github.com/tianocore/edk2/pull/343</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11504</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-03 20:41:25 +0000</bug_when>
    <thetext>Fix at 3b4ad37ebef1cd3635fde821b43a0edc116b256b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2961</bug_id>
          
          <creation_ts>2020-09-12 03:03:31 +0000</creation_ts>
          <short_desc>EFI_BLOCK_IO_PROTOCOL_REVISION3 value is incorrect</short_desc>
          <delta_ts>2020-09-22 16:20:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13666</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-12 03:03:31 +0000</bug_when>
    <thetext>The value of EFI_BLOCK_IO_PROTOCOL_REVISION3 is currently
0x00020031. However, the value assigned in the UEFI Specification
2.8B is ((2&lt;&lt;16) | (31)) which is 0x0002001F.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13667</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-12 03:05:50 +0000</bug_when>
    <thetext>I&apos;ll send a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13671</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-14 14:12:30 +0000</bug_when>
    <thetext>Patch v1 on the list: https://edk2.groups.io/g/devel/message/65228</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13740</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-22 16:20:40 +0000</bug_when>
    <thetext>Submitted to edk2 in the following commit https://github.com/tianocore/edk2/commit/32b0a492d505434c6f5e6c3578cd34fee39cd25e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2263</bug_id>
          
          <creation_ts>2019-10-09 20:03:00 +0000</creation_ts>
          <short_desc>Fix spelling errors in PcAtChipsetPkg</short_desc>
          <delta_ts>2019-10-22 20:29:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>PcAtChipsetPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9988</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 20:03:00 +0000</bug_when>
    <thetext>Fix lots of errors here.
https://github.com/spbrogan/edk2/commit/1475506a453bd00e7950cbdcfd278b300c0c2f01</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10061</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:22:27 +0000</bug_when>
    <thetext>All these spelling errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10116</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-18 15:35:29 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/49244</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10188</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 20:29:39 +0000</bug_when>
    <thetext>Pushed as 44c9618a3f..53b1dd1036</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2728</bug_id>
          
          <creation_ts>2020-05-20 12:28:23 +0000</creation_ts>
          <short_desc>&quot;ArmVirtPkg/ArmVirtQemu.dsc&quot; build failure with &quot;-D TPM2_ENABLE&quot;</short_desc>
          <delta_ts>2020-05-21 08:26:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2752</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>marcandre.lureau</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12569</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-20 12:28:23 +0000</bug_when>
    <thetext>When building ArmVirtQemu.dsc with &quot;-D TPM2_ENABLE&quot; at commit
bc5012b8fbf9 (&quot;SignedCapsulePkg: Add FMP Capsule Image Header
extension&quot;, 2020-05-20), the build fails:

&gt;| build.py...
&gt;| ArmVirtPkg/ArmVirtQemu.dsc(...): error 4000: Instance of library class [Tpm12CommandLib] is not found
&gt;|         in [OvmfPkg/Tcg/Tcg2Config/Tcg2ConfigPei.inf] [AARCH64]
&gt;|         consumed by module [OvmfPkg/Tcg/Tcg2Config/Tcg2ConfigPei.inf]

(1) We introduced the TPM2_ENABLE define to &quot;ArmVirtQemu.dsc&quot; in commit
f5cb3767038e (&quot;ArmVirtPkg/ArmVirtQemu: add ResetSystem PEIM for upcoming
TPM2 support&quot;, 2020-03-04), for bug 2560.

(2) &quot;OvmfPkg/Tcg/Tcg2Config/Tcg2ConfigPei.inf&quot; was extended with the
Tpm12CommandLib class dependency in 89236992913f (&quot;OvmfPkg: detect TPM
1.2 in Tcg2ConfigPei&quot;, 2020-03-04).

These commits are extremely close to each other in the git history. I
believe their containing patch sets may have been reviewed mostly in
parallel, and the &quot;semantic merge conflict&quot; was never detected (until
now).

Technically, commit (2) -- 89236992913f, &quot;OvmfPkg: detect TPM 1.2 in
Tcg2ConfigPei&quot;, 2020-03-04 -- appears second in the git history,
therefore it is the one that introduced the build regression for
ArmVirtPkg. I failed to notice the build regression until now because my
regular ArmVirtQemu build script does not include &quot;-D TPM2_ENABLE&quot;.

In order to fix this regression, we should restrict the TPM-1.2-specific
additions from commit 89236992913f to IA32 and X64. For this, we can
continue with just one module INF file, but we should put the
arch-specific sections capability to use.

I&apos;ll send a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12575</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-20 19:01:40 +0000</bug_when>
    <thetext>Posted

* [edk2-devel] [PATCH 0/3]
  OvmfPkg/Tcg2ConfigPei: fix ARM/AARCH64 build failure

  http://mid.mail-archive.com/20200520225841.17793-1-lersek@redhat.com
  https://edk2.groups.io/g/devel/message/60005</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12637</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 08:26:51 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; Posted
&gt; 
&gt; * [edk2-devel] [PATCH 0/3]
&gt;   OvmfPkg/Tcg2ConfigPei: fix ARM/AARCH64 build failure
&gt; 
&gt;   http://mid.mail-archive.com/20200520225841.17793-1-lersek@redhat.com
&gt;   https://edk2.groups.io/g/devel/message/60005

Merged in commit range 3f89db869028..74f90d38c446, via &lt;https://github.com/tianocore/edk2/pull/639&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2155</bug_id>
          
          <creation_ts>2019-09-05 04:49:07 +0000</creation_ts>
          <short_desc>[SCT] Expect to automate to generation the test result file of the &quot;EFICompliantTest&quot; test item.</short_desc>
          <delta_ts>2019-10-20 22:39:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Arvin Chen">arvin.chen</reporter>
          <assigned_to name="eric.jin">eric.jin</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>supreeth.venkatesh</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9471</commentid>
    <comment_count>0</comment_count>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2019-09-05 04:49:07 +0000</bug_when>
    <thetext>Now the test item &quot;EFICompliantTest&quot; will be gen in the XXX.csv. However I find most of the SCT user will not know what platform config they test is, so I think  we can independently generate a file of the &quot;EFICompliantTest&quot; tests, then the SCT tester can send this file to the platform owner and let them directly handle the compliant issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9511</commentid>
    <comment_count>1</comment_count>
      <attachid>393</attachid>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2019-09-09 03:03:04 +0000</bug_when>
    <thetext>Created attachment 393
File format example.

The file attach it the example that will gen in the report folder.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9887</commentid>
    <comment_count>2</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-09-30 14:04:48 +0000</bug_when>
    <thetext>No Objections on this Feature Request.

Eric, 
Comments? Will Arvin drive the design changes and contribute the feature?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9897</commentid>
    <comment_count>3</comment_count>
    <who name="Arvin Chen">arvin.chen</who>
    <bug_when>2019-09-30 23:07:52 +0000</bug_when>
    <thetext>Hi Supreeth,

  Yes, I have already submit the change, Eric think it still have parts that can be improved, so I will submit the new change today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10143</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-10-20 22:39:46 +0000</bug_when>
    <thetext>pushed at bd239933cf41f882a9342d39fcca65266a6280ad</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>393</attachid>
            <date>2019-09-09 03:03:04 +0000</date>
            <delta_ts>2019-09-09 03:03:04 +0000</delta_ts>
            <desc>File format example.</desc>
            <filename>PlatformConfig000.ini</filename>
            <type>application/octet-stream</type>
            <size>6422</size>
            <attacher name="Arvin Chen">arvin.chen</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2046</bug_id>
          
          <creation_ts>2019-08-01 22:53:50 +0000</creation_ts>
          <short_desc>EmulatorPkg builds fail with XCODE5 toolchain tag for IA32 and X64</short_desc>
          <delta_ts>2019-09-28 21:01:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>chasontang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8724</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-01 22:53:50 +0000</bug_when>
    <thetext>* EmulatorPkg/Unix/Host.inf fails to build due to missing network
  related content.  The network content has moved to the NetworkPkg,
  so the NetworkPkg must be added to the Unix/Host.inf [Packages]
  section.

* Building EmulatorPkg/Unix/Host.h generates an error that the 
  macros NTOHLL and HTONLL are redefined.  This is a conflict between
  edk2 includes and the MacOS XCODE5 includes.  These macros can
  be renamed like similar defines in Host.h to avoid this redefinition.

* XCODE5 IA32 does not build due to missing X11 include files.  This
  is a path issue that has been resolved in XCODE5 X64 builds.  Need
  to use same solution for XCODE IA32.

* XCODE5 X64 builds require the following changes to [BuildOptions]
  to address API mismatches and code generation issues.
  * Add &quot;-DEFIAPI=__attribute__((ms_abi))&quot; to CC_FLAGS
  * Add -target x86_64-apple-darwin to CC_FLAGS
  * Add Wl,-no_pie to DLINK_FLAGS

* XCODE5 reports a function type mismatch in the reverse gasket
  callback between UEFI ABI and MacOS ABI.  The recommended solution
  is to change the function type to a UINTN value and pass the
  function address to assembly code and a UINTN value.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8725</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-01 22:56:49 +0000</bug_when>
    <thetext>XCODE5 build for X64 generate a relocation issue when linking
Unix/Host.inf.  This is due to the addition of the following 
pragma in MdePkg/Include/X64/ProcessorBind.h

    #pragma GCC visibility push (hidden)

This pragma should not be active for XCODE5 X64 builds.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8731</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-01 23:30:53 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8732</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-01 23:31:03 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/44842
https://edk2.groups.io/g/devel/message/44843
https://edk2.groups.io/g/devel/message/44844</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8800</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-06 12:35:51 +0000</bug_when>
    <thetext>pushed at 02031cfc92..c30fbac4e2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9856</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 21:01:47 +0000</bug_when>
    <thetext>*** Bug 1471 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2517</bug_id>
          
          <creation_ts>2020-02-10 21:39:04 +0000</creation_ts>
          <short_desc>Add a target based unit test reporting library that outputs XML in a commonly accepted schema</short_desc>
          <delta_ts>2022-02-10 22:47:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>2516</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Sean Brogan">sean.brogan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11192</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-02-10 21:39:04 +0000</bug_when>
    <thetext>would like this included in 2020 Q2 stable tag

UnitTestFrameworkPkg has an API for outputting report.  Implement library that outputs to Xml format in a commonly accepted schema.  

Implementation here: https://github.com/spbrogan/edk2-staging/commit/5f988ab81d171a965d13eb2e4d0861800102881a

Depends on BZ2516</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11367</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:29:52 +0000</bug_when>
    <thetext>Sean, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18334</commentid>
    <comment_count>2</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2022-02-10 22:47:21 +0000</bug_when>
    <thetext>cancel request for now</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2400</bug_id>
          
          <creation_ts>2019-12-03 01:22:49 +0000</creation_ts>
          <short_desc>BaseTools: Dsc Parser, included dsc file is parsed always no matter if its condition is False</short_desc>
          <delta_ts>2019-12-08 20:43:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10598</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-12-03 01:22:49 +0000</bug_when>
    <thetext>For example, in a.dsc

!if Pcd == true
   !include b.dsc
!else
   !include c.dsc
!endif

Currently, the dsc parser parse all included files. 

a.line1
a.line2
....
b.line1   enable
b.line2   enable
c.line1   disable
c.line2   disable
...
a.line n

We expect the parser behavior would be like this:

if Pcd is True
a.line1
a.line2
....
b.line1   enable
b.line2   enable
...
a.line n

if Pcd is False

a.line1
a.line2
....
c.line1   enable
c.line2   enable
...
a.line n</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10599</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-12-03 01:24:03 +0000</bug_when>
    <thetext>assign to Fan, Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10638</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-12-08 20:43:00 +0000</bug_when>
    <thetext>fix it in c8ff8e05afb6a20b1ae66aa80bb8636b664be0b2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2870</bug_id>
          
          <creation_ts>2020-07-31 11:49:30 +0000</creation_ts>
          <short_desc>SCT ignores GetTime() return status</short_desc>
          <delta_ts>2020-11-07 00:03:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Grant Likely">grant.likely</reporter>
          <assigned_to name="Edhay">edhaya.chandran</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>grant.likely</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13247</commentid>
    <comment_count>0</comment_count>
    <who name="Grant Likely">grant.likely</who>
    <bug_when>2020-07-31 11:49:30 +0000</bug_when>
    <thetext>The SCT test framework uses GetTime() to record test time and duration. If a platform doesn&apos;t implement GetTime() it will return EFI_UNSUPPORTED. However, the SCT doesn&apos;t check the return code, so it tries to interpret the garbage data in the EFI_TIME* argument resulting in nonsense results. For example:

  Test Finished: 66/00/47  96:00p
  Elapsed Time: དྷ3 Days 07:34:57
SCT should check the return code on every call to GetTime()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13295</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-08-01 09:02:25 +0000</bug_when>
    <thetext>Patch submitted. See https://edk2.groups.io/g/devel/message/63588

Please, review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14107</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-10-27 15:46:48 +0000</bug_when>
    <thetext>Could somebody with commit rights, please, review the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14258</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-07 00:03:45 +0000</bug_when>
    <thetext>Fixed with the following commit:

cf364d100690e635897f48ade769583d19a78ed0
Check return status on calls to GetTime()</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2182</bug_id>
          
          <creation_ts>2019-09-09 23:16:29 +0000</creation_ts>
          <short_desc>Add VS2019 Toolchain def</short_desc>
          <delta_ts>2019-11-14 22:15:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ching Jen, Cheng">ching.jenx.cheng</reporter>
          <assigned_to name="Ching Jen, Cheng">ching.jenx.cheng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9565</commentid>
    <comment_count>0</comment_count>
    <who name="Ching Jen, Cheng">ching.jenx.cheng</who>
    <bug_when>2019-09-09 23:16:29 +0000</bug_when>
    <thetext>In order to support VS2019, the first thing need to do is add 2019 toolchain on tools_def.template</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9737</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-09-19 20:20:44 +0000</bug_when>
    <thetext>Patch has been submitted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9752</commentid>
    <comment_count>2</comment_count>
    <who name="Ching Jen, Cheng">ching.jenx.cheng</who>
    <bug_when>2019-09-23 22:07:02 +0000</bug_when>
    <thetext>The patches was pushed with 2 commit.

7a25b3da78444c2400a5be6555b2735de2d4acb0
Add VS2019 Toolchain def

670c903a68f214463f12c0c9619c162a0f342518
Add VS2019 Support on ToolSetup Batches</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10448</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 22:15:58 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2644</bug_id>
          
          <creation_ts>2020-03-29 22:56:30 +0000</creation_ts>
          <short_desc>Fix build error of OpenBoard caused by change of AdvancedFeaturePkg</short_desc>
          <delta_ts>2020-04-07 22:01:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>AppPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11899</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-03-29 22:56:30 +0000</bug_when>
    <thetext>Need to fix the build error of OpenBoard caused by change of AdvancedFeaturePkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11900</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-03-29 22:58:06 +0000</bug_when>
    <thetext>It will submit a patch for this issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12028</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-04-02 03:40:33 +0000</bug_when>
    <thetext>Patches are pushed:
commit fa69439a66c2223d6222a9d36c879a782398e7fc
commit 55a8c4ee2f7dbc3773c27eabaf2ea01e4dfef489
commit 5780623dc5c846cf610118e14adeebcb2b7a12b8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12100</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:01:47 +0000</bug_when>
    <thetext>This one has been fixed. Change status.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2064</bug_id>
          
          <creation_ts>2019-08-07 16:49:13 +0000</creation_ts>
          <short_desc>ClevoOpenBoardPkg Should Have a Unique PLATFORM_GUID</short_desc>
          <delta_ts>2019-08-08 17:16:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>ClevoOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8839</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-07 16:49:13 +0000</bug_when>
    <thetext>The PLATFORM_GUID currently the same in the following DSC files:

 - Platform/Intel/ClevoOpenBoardPkg/N1xxWU/OpenBoardPkg.dsc
 - Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/OpenBoardPkg.dsc
 - Platform/Intel/Vlv2TbltDevicePkg/PlatformPkgX64.dsc

The PLATFORM_GUID in ClevoOpenBoardPkg/N1xxWU/OpenBoardPkg.dsc should be unique.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8879</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-08 17:16:31 +0000</bug_when>
    <thetext>Committed in 821e89ef95e8ded9aa7a481945ebffc7cf320660

https://github.com/tianocore/edk2-platforms/commit/821e89ef95e8ded9aa7a481945ebffc7cf320660</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2422</bug_id>
          
          <creation_ts>2019-12-16 14:28:25 +0000</creation_ts>
          <short_desc>FirwareVersion should be FirmwareVersion.</short_desc>
          <delta_ts>2020-05-19 21:50:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2718</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10710</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2019-12-16 14:28:25 +0000</bug_when>
    <thetext>Smbios.h [1] SMBIOS_TABLE_TYPE17 type has FirwareVersion. It should be FirmwareVersion. 


[1] https://github.com/tianocore/edk2/blob/master/MdePkg/Include/IndustryStandard/SmBios.h#L1837</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12537</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-19 21:50:49 +0000</bug_when>
    <thetext>Duplicate with 2718

*** This bug has been marked as a duplicate of bug 2718 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2905</bug_id>
          
          <creation_ts>2020-08-19 01:54:16 +0000</creation_ts>
          <short_desc>BaseTools : Build Failure for VfrCompile</short_desc>
          <delta_ts>2020-08-22 14:37:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>naveenchaudhary2010</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>naveenchaudhary2010</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13461</commentid>
    <comment_count>0</comment_count>
    <who name="">naveenchaudhary2010</who>
    <bug_when>2020-08-19 01:54:16 +0000</bug_when>
    <thetext>Build fails when try to build BaseTools with the command

make -C BaseTools

Host : Ubuntu 18
GCC : 4.8

Error
=======
$ make -C BaseTools/
make: Entering directory &apos;/home/naveen/Desktop/workspace/edk2/BaseTools&apos;
make -C Source/C
make[1]: Entering directory &apos;/home/naveen/Desktop/workspace/edk2/BaseTools/Source/C&apos;
Attempting to detect HOST_ARCH from &apos;uname -m&apos;: x86_64
Detected HOST_ARCH of X64 using uname.
mkdir -p .
make -C Common
make[2]: Entering directory &apos;/home/naveen/Desktop/workspace/edk2/BaseTools/Source/C/Common&apos;
make[2]: Nothing to be done for &apos;all&apos;.
make[2]: Leaving directory &apos;/home/naveen/Desktop/workspace/edk2/BaseTools/Source/C/Common&apos;
make -C BrotliCompress
make[2]: Entering directory &apos;/home/naveen/Desktop/workspace/edk2/BaseTools/Source/C/BrotliCompress&apos;
make[2]: Nothing to be done for &apos;all&apos;.
make[2]: Leaving directory &apos;/home/naveen/Desktop/workspace/edk2/BaseTools/Source/C/BrotliCompress&apos;
make -C VfrCompile
make[2]: Entering directory &apos;/home/naveen/Desktop/workspace/edk2/BaseTools/Source/C/VfrCompile&apos;
g++ -o ../bin/VfrCompile  AParser.o DLexerBase.o ATokenBuffer.o EfiVfrParser.o VfrLexer.o VfrSyntax.o VfrFormPkg.o VfrError.o VfrUtilityLib.o VfrCompiler.o -L../libs -lCommon
/usr/bin/x86_64-linux-gnu-ld: ../libs/libCommon.a(CommonLib.o): relocation R_X86_64_32 against `.rodata.str1.1&apos; can not be used when making a PIE object; recompile with -fPIC
/usr/bin/x86_64-linux-gnu-ld: ../libs/libCommon.a(EfiUtilityMsgs.o): relocation R_X86_64_32 against `.rodata.str1.1&apos; can not be used when making a PIE object; recompile with -fPIC
/usr/bin/x86_64-linux-gnu-ld: ../libs/libCommon.a(ParseInf.o): relocation R_X86_64_32 against `.rodata.str1.1&apos; can not be used when making a PIE object; recompile with -fPIC
/usr/bin/x86_64-linux-gnu-ld: final link failed: Nonrepresentable section on output
collect2: error: ld returned 1 exit status
GNUmakefile:44: recipe for target &apos;../bin/VfrCompile&apos; failed
make[2]: *** [../bin/VfrCompile] Error 1
make[2]: Leaving directory &apos;/home/naveen/Desktop/workspace/edk2/BaseTools/Source/C/VfrCompile&apos;
GNUmakefile:74: recipe for target &apos;VfrCompile&apos; failed
make[1]: *** [VfrCompile] Error 2
make[1]: Leaving directory &apos;/home/naveen/Desktop/workspace/edk2/BaseTools/Source/C&apos;
GNUmakefile:19: recipe for target &apos;Source/C&apos; failed
make: *** [Source/C] Error 2
make: Leaving directory &apos;/home/naveen/Desktop/workspace/edk2/BaseTools&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13462</commentid>
    <comment_count>1</comment_count>
    <who name="">naveenchaudhary2010</who>
    <bug_when>2020-08-19 02:39:57 +0000</bug_when>
    <thetext>With this patch, I am able to build it fine. But I am still wondering that did someone else experienced this before?

diff --git a/BaseTools/Source/C/Makefiles/header.makefile b/BaseTools/Source/C/Makefiles/header.makefile
index 1c105ee7d4..4026b7f1ce 100644
--- a/BaseTools/Source/C/Makefiles/header.makefile
+++ b/BaseTools/Source/C/Makefiles/header.makefile
@@ -88,7 +88,7 @@ else
 BUILD_CFLAGS = -MD -fshort-wchar -fno-strict-aliasing -fwrapv \
 -fno-delete-null-pointer-checks -Wall -Werror \
 -Wno-deprecated-declarations -Wno-stringop-truncation -Wno-restrict \
--Wno-unused-result -nostdlib -g
+-Wno-unused-result -nostdlib -fPIC -g^M
 endif
 endif
 ifeq ($(CXX), llvm)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13465</commentid>
    <comment_count>2</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2020-08-19 15:16:56 +0000</bug_when>
    <thetext>How are you using GCC 4.8 on Ubuntu 18? (Assuming you mean 18.04?)
It shipped with GCC 7.3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13495</commentid>
    <comment_count>3</comment_count>
    <who name="">naveenchaudhary2010</who>
    <bug_when>2020-08-22 14:09:58 +0000</bug_when>
    <thetext>I might not remember correctly but last time when I tried few months back building with GCC7.3 it failed and at that time I read that the preferred compiler is GCC4.6 (at that time).

Now also when we pull the code, the target.txt file has GCC4.8 set. So this time I directly installed GCC4.8 using Ubuntu respositories (aptitude).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13496</commentid>
    <comment_count>4</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2020-08-22 14:37:16 +0000</bug_when>
    <thetext>OK.

A bug report is not a useful way to investigate whatever is going wrong for you, and we are building BaseTools successfully across many different Linux distributions and toolchain versions.

If BaseTools fails to build with the default toolhain shipped with a modern Linux distributions (where I would include any LTS version still supported), that is something we would try to fix. But trying to support legacy toolchains that may also be provided with those is not useful.

Please send an email to devel@edk2.groups.io (or use the web gui if you prefer) stating:
- what documentation you are trying to follow (I am not aware of any that states gcc 4.8 as recommended).
- where your source comes from, and what version of that you have checked out (upstream Conf/target.txt does not have a GCC toolchain as default at all, it has VS2015x86).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2778</bug_id>
          
          <creation_ts>2020-06-03 11:25:07 +0000</creation_ts>
          <short_desc>Maintainers.txt: disorder between subsystem headers</short_desc>
          <delta_ts>2020-06-09 14:16:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12784</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-03 11:25:07 +0000</bug_when>
    <thetext>We originally meant to keep the subsystem (package) titles sorted, in
&quot;Maintainers.txt&quot;.

However, as of 7191dd3c5990 (&quot;ArmPkg/PlatformBootManagerLib: reject
&apos;default&apos; parity and stop bit count&quot;, 2020-06-03), we have some disorder
introduced.

The following script collects the subsystem / package titles:

&gt;| $ dos2unix &lt; Maintainers.txt \
&gt;|   | sed -n -e &apos;/^EDK II Packages:$/,$p&apos; \
&gt;|   | tail -n +3 \
&gt;|   | grep -E -v &apos;^($|[LMRWTSFX]:)&apos;

(&quot;dos2unix&quot; strips CRs; &quot;sed&quot; removes the first part of the file that
precedes the &quot;EDK II Packages:&quot; heading; &quot;tail&quot; removes that heading
(plus the underline on the next line); and &quot;grep&quot; removes empty lines
and the section entries. What remains is the section headers.)

This is how we should reorder the subsystem blocks, to restore the
original intent:

&gt;| --- current     2020-06-03 17:10:56.403592725 +0200
&gt;| +++ sorted      2020-06-03 17:11:04.785497210 +0200
&gt;| @@ -12,8 +12,8 @@
&gt;|  IntelFsp2Pkg
&gt;|  IntelFsp2WrapperPkg
&gt;|  MdeModulePkg
&gt;| -MdeModulePkg: ACPI modules
&gt;|  MdeModulePkg: ACPI S3 modules
&gt;| +MdeModulePkg: ACPI modules
&gt;|  MdeModulePkg: BDS modules
&gt;|  MdeModulePkg: Console and Graphics modules
&gt;|  MdeModulePkg: Core services (PEI, DXE and Runtime) modules
&gt;| @@ -27,16 +27,16 @@
&gt;|  MdePkg
&gt;|  NetworkPkg
&gt;|  OvmfPkg
&gt;| -OvmfPkg: Xen-related modules
&gt;| -OvmfPkg: TCG- and TPM2-related modules
&gt;|  OvmfPkg: CSM modules
&gt;|  OvmfPkg: MptScsi and PVSCSI driver
&gt;| +OvmfPkg: TCG- and TPM2-related modules
&gt;| +OvmfPkg: Xen-related modules
&gt;|  PcAtChipsetPkg
&gt;|  SecurityPkg
&gt;|  ShellPkg
&gt;|  SignedCapsulePkg
&gt;|  SourceLevelDebugPkg
&gt;| +StandaloneMmPkg
&gt;|  UefiCpuPkg
&gt;|  UefiPayloadPkg
&gt;|  UnitTestFrameworkPkg
&gt;| -StandaloneMmPkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12785</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-03 12:08:46 +0000</bug_when>
    <thetext>Posted:

[edk2-devel] [PATCH 0/3] Maintainers.txt: restore lexicographical order between package / subsystem headers

http://mid.mail-archive.com/20200603160627.3594-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/60681</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12825</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-09 14:16:46 +0000</bug_when>
    <thetext>Merged as commit range 6ff7c838d092..6aa48ab791ec, via &lt;https://github.com/tianocore/edk2/pull/669&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2088</bug_id>
          
          <creation_ts>2019-08-16 02:33:56 +0000</creation_ts>
          <short_desc>BaseTools: Incorrect Module UniqueName generated if there are more than one instance for the same module</short_desc>
          <delta_ts>2019-08-18 21:29:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9032</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-16 02:33:56 +0000</bug_when>
    <thetext>This is a regression issue introduced by multiple-process-autogen feature.
If there are more than one instance for the same module, the module&apos;s UniqueName is generated incorrectly.

For example the module FmpDxe in FmpDevicePkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9033</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-16 02:34:28 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9034</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-16 02:42:22 +0000</bug_when>
    <thetext>This is the critical bug fix for 201908 stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9048</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-18 21:29:58 +0000</bug_when>
    <thetext>fixed at 76e12fa33416f3133c41c6e396a69abbe32f2edb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2920</bug_id>
          
          <creation_ts>2020-08-21 04:22:12 +0000</creation_ts>
          <short_desc>False positive issue in edk2 open Ci</short_desc>
          <delta_ts>2020-08-21 08:49:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2904</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13487</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-08-21 04:22:12 +0000</bug_when>
    <thetext>A false positive issue exists in a pull request.
https://dev.azure.com/tianocore/edk2-ci/_build/results?buildId=11223&amp;view=logs&amp;jobId=7cd61938-4509-589a-75ed-329528680800&amp;j=7cd61938-4509-589a-75ed-329528680800&amp;t=034af207-5d29-5aa2-ab37-219d2471999c

A ecc issue whose error code is 10014 is reported. But it ought not to appear.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13489</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-21 08:49:42 +0000</bug_when>
    <thetext>Please copy the actual error message into the BZ ticket, as Azure will presumably not hang on forever to the build output.

I&apos;m including the message now.

PROGRESS - ---&gt;Test Success: Spell Check Test NO-TARGET
PROGRESS - --Running SecurityPkg: EccCheck Test NO-TARGET --
ERROR - 
ERROR - 
ERROR - EFI coding style error
ERROR - *Error code: 10014
ERROR - *No used module files found
ERROR - *file: //home/vsts/work/1/s/SecurityPkg/Library/TcgEventLogRecordLib/TcgEventLogRecordLib.c
ERROR - *Line number: 1
ERROR - *The source file [//home/vsts/work/1/s/SecurityPkg/Library/TcgEventLogRecordLib/TcgEventLogRecordLib.c] is existing in module directory but it is not described in INF file.
ERROR - 
ERROR - 

This seems to be related to the ECC feature introduced under bug 2606.

The patch series that triggers the issue seems to be related to bug 2376.

By the way... I don&apos;t understand why we need a new bug report here; I think this ticket is a duplicate of bug 2904. I&apos;m going to close this bug now; please reopen it if I&apos;m wrong. Thanks.

*** This bug has been marked as a duplicate of bug 2904 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2329</bug_id>
          
          <creation_ts>2019-11-05 02:00:04 +0000</creation_ts>
          <short_desc>Remove ExecutionDisable feature logic from UefiCpuPkg/CpuCommonFeaturesLib</short_desc>
          <delta_ts>2019-11-21 02:15:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10325</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-11-05 02:00:04 +0000</bug_when>
    <thetext>XD (ExecutionDisable) feature, when turned on, allows page table entry BIT63 set to 1 indicating the memory pointed by the page table is disallowed to execute.
DxeIpl::CreateIdentityMappingPageTables() enables the XD when CPU supports it.
Later DxeCore modifies the page table to set the BIT63 to protect the stack/heap to disallow code execution in stack/heap.

UefiCpuPkg/CpuCommonFeaturesLib enables/disables the XD feature according to PcdCpuFeaturesSetting.
When XD is disabled, GP fault is generated immediately because some page entries have BIT63 set.

To fix this issue, I propose to remove the XD feature logic from UefiCpuPkg/CpuCommonFeaturesLib so the XD feature is only taken care of by DxeIpl.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10382</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-11-10 21:43:18 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10502</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-11-21 02:14:21 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10503</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-11-21 02:15:11 +0000</bug_when>
    <thetext>fixed in below commits:
c801f33d818b8010fabb93092c661c6f30d42b13
6d17c9c24aa6d5fd78795084e5822929a88720fb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2797</bug_id>
          
          <creation_ts>2020-06-12 16:59:59 +0000</creation_ts>
          <short_desc>Allow NULL library instances for HOST_APPLICATION modules</short_desc>
          <delta_ts>2020-07-31 18:06:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12855</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 16:59:59 +0000</bug_when>
    <thetext>The following commit added support for the new module type HOST_APPLICATION

https://github.com/tianocore/edk2/commit/a79841a0244ab2afd1efc3b9d4cc91e27fa90d71

This commit applied the USER_DEFINED modules type rules to HOST_APPLICATION modules types including the rule that NULL library instances can not be used.

There are use cases for host based unit testing where using a NULL library instance with a module of type HOST_APPLICATION needs to be supported.

Support for HOST_APPLICATION modules should be updated to allow use of NULL library instances.

The suggested change is to remove the SUP_MODULE_HOST_APPLICATION filter in BaseTools/Sources/Python/Workspace/WorkspaceCommon.py:

diff --git a/BaseTools/Source/Python/Workspace/WorkspaceCommon.py b/BaseTools/Source/Python/Workspace/WorkspaceCommon.py
index 913e710fd9..53027a0e30 100644
--- a/BaseTools/Source/Python/Workspace/WorkspaceCommon.py
+++ b/BaseTools/Source/Python/Workspace/WorkspaceCommon.py
@@ -1,7 +1,7 @@
 ## @file
 # Common routines used by workspace
 #
-# Copyright (c) 2012 - 2018, Intel Corporation. All rights reserved.&lt;BR&gt;
+# Copyright (c) 2012 - 2020, Intel Corporation. All rights reserved.&lt;BR&gt;^M
 # SPDX-License-Identifier: BSD-2-Clause-Patent
 #

@@ -100,7 +100,7 @@ def GetModuleLibInstances(Module, Platform, BuildDatabase, Arch, Target, Toolcha
     # If a module has a MODULE_TYPE of USER_DEFINED,
     # do not link in NULL library class instances from the global [LibraryClasses.*] sections.
     #
-    if Module.ModuleType != SUP_MODULE_USER_DEFINED and Module.ModuleType != SUP_MODULE_HOST_APPLICATION:
+    if Module.ModuleType != SUP_MODULE_USER_DEFINED:^M
         for LibraryClass in Platform.LibraryClasses.GetKeys():
             if LibraryClass.startswith(&quot;NULL&quot;) and Platform.LibraryClasses[LibraryClass, Module.ModuleType]:
                 Module.LibraryClasses[LibraryClass] = Platform.LibraryClasses[LibraryClass, Module.ModuleType]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12856</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 17:00:51 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13264</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:01:45 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13265</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:06:25 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/5d29e2d020e8b0ad70f3f766c38429c3bfad0d41
https://github.com/tianocore/edk2/commit/9a6c4ac68e3d9590cf17914e07e929a1f0e7c190
https://github.com/tianocore/edk2/commit/133891b712a9ceda0fbdb9649b559773e4cdc6db
https://github.com/tianocore/edk2/commit/75e92c13541672a3af349067a040b9dda3d4452d
https://github.com/tianocore/edk2/commit/26824851b041d9e81921ec7ef97220d2a2576157
https://github.com/tianocore/edk2/commit/425df6923ec00df32bb6f20d1440a2e920f0e1e7
https://github.com/tianocore/edk2/commit/77e42ca4dfbf51918d677f32ab64bb99dd07cc40
https://github.com/tianocore/edk2/commit/813c2b15255406f587484ffcedfd01ca9ab5d056
https://github.com/tianocore/edk2/commit/f08715947ad52ee4fd67358660860ea63a532e15
https://github.com/tianocore/edk2/commit/35f9d7c41b380d67953dabc5994a65e32baa7d39
https://github.com/tianocore/edk2/commit/a0a49eb87c5819a76a0a5fea81d2b51ffdfcb3aa
https://github.com/tianocore/edk2/commit/540fd45f755f1646e019099c90c9f59286604228
https://github.com/tianocore/edk2/commit/d3c9e40abcc839f59d56b7fca7787647533d96fe
https://github.com/tianocore/edk2/commit/0a81a98e900118857395b101f413c1c17b66c073
https://github.com/tianocore/edk2/commit/9af8a299cec10656b757ae30a71c1310260d3c31
https://github.com/tianocore/edk2/commit/5b86bbf891677882a9d097f87cd0128562c12c43

Pull Request:

https://github.com/tianocore/edk2/pull/779</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2681</bug_id>
          
          <creation_ts>2020-04-20 16:03:46 +0000</creation_ts>
          <short_desc>Pass parameter from QEMU to control PXE IPv4/v6 boot</short_desc>
          <delta_ts>2020-04-28 18:40:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1695</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>per_sundstrom</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12256</commentid>
    <comment_count>0</comment_count>
    <who name="">per_sundstrom</who>
    <bug_when>2020-04-20 16:03:46 +0000</bug_when>
    <thetext>Today it is impossible to have a QEMU/KVM hosted PXE client boot boot using IPv6 without first changing the boot order through the TUI.

This makes it hard/impossible to automatically deploy a large set of clients using OVMF.

There is a discussion here: https://edk2.groups.io/g/devel/topic/72590544#56503 about a possible way to accomplish this.

Thanks,
(Not sure what &quot;Package&quot; to register this to, OvmfPkg? )

  /Per</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12265</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-21 13:32:24 +0000</bug_when>
    <thetext>(In reply to per_sundstrom from comment #0)

&gt; (Not sure what &quot;Package&quot; to register this to, OvmfPkg? )

After re-reading my suggestion at &lt;http://mid.mail-archive.com/1fc582e2-5c62-76d9-a5ff-571d0e21a694@redhat.com&gt;: that&apos;s correct.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12303</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-23 10:39:37 +0000</bug_when>
    <thetext>working on patches</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12307</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-24 03:55:23 +0000</bug_when>
    <thetext>Posted

* [edk2-devel] [PATCH 0/7]
  OvmfPkg, ArmVirtPkg: control PXE v4/v6 boot support from the QEMU cmdline

  https://edk2.groups.io/g/devel/message/58030
  http://mid.mail-archive.com/20200424075353.8489-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12330</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-28 18:40:15 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Posted
&gt;
&gt; * [edk2-devel] [PATCH 0/7]
&gt;   OvmfPkg, ArmVirtPkg: control PXE v4/v6 boot support from the QEMU cmdline
&gt;
&gt;   https://edk2.groups.io/g/devel/message/58030
&gt;   http://mid.mail-archive.com/20200424075353.8489-1-lersek@redhat.com

Merged as commit range 64ab457d1f21..cdc3fa54184a, via &lt;https://github.com/tianocore/edk2/pull/556&gt;.

The QEMU command line options listed below control whether the guest
firmware supports PXEv4 / PXEv6 boot. And correspondingly, whether
UefiBootManagerLib generates *new* PXEv4 / PXEv6 boot options
automatically. (Existent boot options are never deleted in response to
just the flags below.)

  -fw_cfg name=opt/org.tianocore/IPv4PXESupport,string=[yn]

  -fw_cfg name=opt/org.tianocore/IPv6PXESupport,string=[yn]</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2577</bug_id>
          
          <creation_ts>2020-03-06 19:03:34 +0000</creation_ts>
          <short_desc>Add MemoryTypeInformationChangeLib to Dsc</short_desc>
          <delta_ts>2020-03-09 22:02:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11606</commentid>
    <comment_count>0</comment_count>
      <attachid>471</attachid>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-06 19:03:34 +0000</bug_when>
    <thetext>Created attachment 471
proposed patch

Add MemoryTypeInformationChangeLib to the ShellPkg DSC</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11638</commentid>
    <comment_count>1</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-09 22:02:12 +0000</bug_when>
    <thetext>This is a Project MU specific bug</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>471</attachid>
            <date>2020-03-06 19:03:34 +0000</date>
            <delta_ts>2020-03-06 19:03:34 +0000</delta_ts>
            <desc>proposed patch</desc>
            <filename>ShellPkg.dsc.patch</filename>
            <type>application/octet-stream</type>
            <size>890</size>
            <attacher name="Matthew Carlson">macarl</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2003</bug_id>
          
          <creation_ts>2019-07-19 09:12:59 +0000</creation_ts>
          <short_desc>Basetools: misuse of lstrip</short_desc>
          <delta_ts>2019-07-24 21:03:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8520</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-07-19 09:12:59 +0000</bug_when>
    <thetext>lstrip(parameter) do the match based on the char in parameter but not only the whole parameter string.

In GenMake,
if SingleCommandList[-1].endswith(&quot;%s%s.c&quot; % (TAB_SLASH, CmdSumDict[CmdSign.lstrip(&apos;/Fo&apos;).rsplit(TAB_SLASH, 1)[0]])):

CmdSign.lstrip(&apos;/Fo&apos;) will strip the &apos;/&apos; or &apos;F&apos; or &apos;o&apos; on the left of CmdSign.

If the build workspace is under F: or o: , build will fail.

we also need to check if lstrip is misused in other place.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8561</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-07-24 21:03:38 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8562</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-07-24 21:03:55 +0000</bug_when>
    <thetext>fixed at bb824f685d760f560bb3c3fb14af394ab3b3544f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2474</bug_id>
          
          <creation_ts>2020-01-17 00:41:59 +0000</creation_ts>
          <short_desc>[UefiCpuPkg/MpInitLib] The &apos;InitFlag&apos; field of CPU_MP_DATA structure may be uninitialized under some cases</short_desc>
          <delta_ts>2020-01-19 03:50:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10936</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-01-17 00:41:59 +0000</bug_when>
    <thetext>Commit d786a17232
UefiCpuPkg/MpInitLib: Reduce the size when loading microcode patches

Removed the below assignments for the &apos;InitFlag&apos; field of CPU_MP_DATA structure
in function MpInitLibInitialize() when APs are waken up to do some initialize
sync:

CpuMpData-&gt;InitFlag  = ApInitReconfig;
...
CpuMpData-&gt;InitFlag = ApInitDone;

Under some cases (e.g. when variable OldCpuMpData is not NULL, which means
function CollectProcessorCount() will not be called), this will left the
&apos;InitFlag&apos; field being uninitialized with a value of 0, which is a invalid
value for the type of &apos;InitFlag&apos; (AP_INIT_STATE).

It will potentially cause the WakeUpAP() function to run some unnecessary
codes when the APs have been successfully waken up before:

  if (CpuMpData-&gt;WakeUpByInitSipiSipi ||
      CpuMpData-&gt;InitFlag   != ApInitDone) {
    ResetVectorRequired = TRUE;
    AllocateResetVector (CpuMpData);
    FillExchangeInfoData (CpuMpData);
    SaveLocalApicTimerSetting (CpuMpData);
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10937</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-01-17 00:42:44 +0000</bug_when>
    <thetext>Take this one and will provide a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10940</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-01-17 03:37:40 +0000</bug_when>
    <thetext>V1 patch has been proposed at:
https://edk2.groups.io/g/devel/message/53344</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10942</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-01-17 06:36:14 +0000</bug_when>
    <thetext>V2 patch has been proposed at:
https://edk2.groups.io/g/devel/message/53359</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10951</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-01-19 03:50:16 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/18fcb3759888ef2415a9fefe1fffb7f8b9b9211d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2823</bug_id>
          
          <creation_ts>2020-06-24 01:35:23 +0000</creation_ts>
          <short_desc>Update the MBR partition child handler to skip the table added for windows compatibility</short_desc>
          <delta_ts>2020-08-20 00:54:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>glin</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12941</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-06-24 01:35:23 +0000</bug_when>
    <thetext>UDF &amp; ISO 9600 fils system would leave the first 32KB of disk reserved. But some linux ISO like redhat would put MBR info in the first 512 bytes.
The partition driver would choose one of the GPT, MBR, and UDF to install the related partition protocol. That is incorrect for the linux isos that have both MBR info and UDF volume info. It should install both.
So the partition driver should change to check UDF and MBR/GPT separately.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12942</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-06-24 01:36:02 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12977</commentid>
    <comment_count>2</comment_count>
      <attachid>528</attachid>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-06-30 20:32:26 +0000</bug_when>
    <thetext>Created attachment 528
The first 512 bytes of the linux image</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12978</commentid>
    <comment_count>3</comment_count>
      <attachid>529</attachid>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-06-30 20:33:00 +0000</bug_when>
    <thetext>Created attachment 529
The first 512 bytes of the linux image(Ubuntu)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13023</commentid>
    <comment_count>4</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-07-01 20:51:42 +0000</bug_when>
    <thetext>Refer to http://manpages.ubuntu.com/manpages/bionic/man8/mkudffs.8.html
&quot;WHOLE DISK VS PARTITION&quot; Section:
Linux ISO image may keep the MBR info for compatibility with Windows. And Linux kernel ignores MBR table if the disk contains partition which starts at sector 0.
So add the check to skip the MBR table that has partition entry with &quot;start_LAB == 0&quot;.
Fixed the continuous check when the partition check return &quot;already started&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13108</commentid>
    <comment_count>5</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-07-14 21:19:56 +0000</bug_when>
    <thetext>fixed at a35de0aff3e92c8584419720be199ccfff9b6a43..c7195b9ec3c5f8f40119c96ac4a0ab1e8cebe9dc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13145</commentid>
    <comment_count>6</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2020-07-21 02:54:32 +0000</bug_when>
    <thetext>Reopen this bug since the following patch broke the loading of openSUSE iso image(*)

c7195b9ec3c5f8f40119c96ac4a0ab1e8cebe9dc
MdeModulePkg/PartitionDxe: Add already start check for child hanldes

(*) http://download.opensuse.org/distribution/leap/15.2/iso/openSUSE-Leap-15.2-NET-x86_64.iso</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13150</commentid>
    <comment_count>7</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-07-21 22:15:12 +0000</bug_when>
    <thetext>(In reply to Gary Lin from comment #6)
&gt; Reopen this bug since the following patch broke the loading of openSUSE iso
&gt; image(*)
&gt; 
&gt; c7195b9ec3c5f8f40119c96ac4a0ab1e8cebe9dc
&gt; MdeModulePkg/PartitionDxe: Add already start check for child hanldes
&gt; 
&gt; (*)
&gt; http://download.opensuse.org/distribution/leap/15.2/iso/openSUSE-Leap-15.2-
&gt; NET-x86_64.iso

The issue is because the Linux ISO image has the MBR table at the top 512 bytes. I add the logic to skip the ISO that has the partition entry with start LBA 0 and entire disk size.
But the ISO for SUSE is not like that. It contains two partition entry:
1: 00 08 15 00 ef 0c 10 04 14 01 00 00 7c 20 00 00
2: 80 0c 11 04 17 3f 20 89 90 21 00 00 70 2e 04 00
The two partition is valid but its FAT file system would fail to be observed because of the issue https://bugzilla.tianocore.org/show_bug.cgi?id=2843.
With 2843 fixed, all the linux ISO image can be detected as MBR partition. But that is not expected. The expected result is they should be detected as CD device and add the CD device path with FAT on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13334</commentid>
    <comment_count>8</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2020-08-06 23:33:55 +0000</bug_when>
    <thetext>Can we revert the commit in question[*] before bug#2843 getting fixed? It introduces the damaging regression to us and I really don&apos;t want to see it merged into the next stable release without a proper follow-up fix.

[*] c7195b9ec3c5f8f40119c96ac4a0ab1e8cebe9dc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13344</commentid>
    <comment_count>9</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-08-09 21:31:52 +0000</bug_when>
    <thetext>(In reply to Gary Lin from comment #8)
&gt; Can we revert the commit in question[*] before bug#2843 getting fixed? It
&gt; introduces the damaging regression to us and I really don&apos;t want to see it
&gt; merged into the next stable release without a proper follow-up fix.
&gt; 
&gt; [*] c7195b9ec3c5f8f40119c96ac4a0ab1e8cebe9dc

Hi Gary,

The commit you point out is a bug fix. So I don&apos;t think it can be revert. I have sent a email to the community for some discussion. And the solution I provide may fix your issue. But I would like to get more opinion before I send the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13466</commentid>
    <comment_count>10</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-08-20 00:54:45 +0000</bug_when>
    <thetext>New fixed at f0f7140150f673f96602a83f16c4015ba2cc4fe1..94b7df5c4a6cfb6bd7e80719fe85b11c3408e430</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>528</attachid>
            <date>2020-06-30 20:32:26 +0000</date>
            <delta_ts>2020-06-30 20:32:26 +0000</delta_ts>
            <desc>The first 512 bytes of the linux image</desc>
            <filename>fedora_512b.bin</filename>
            <type>application/octet-stream</type>
            <size>512</size>
            <attacher name="Zhichao Gao">zhichao.gao</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>529</attachid>
            <date>2020-06-30 20:33:00 +0000</date>
            <delta_ts>2020-06-30 20:33:00 +0000</delta_ts>
            <desc>The first 512 bytes of the linux image(Ubuntu)</desc>
            <filename>ubuntu_18_04_amd64_512b.bin</filename>
            <type>application/octet-stream</type>
            <size>512</size>
            <attacher name="Zhichao Gao">zhichao.gao</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2246</bug_id>
          
          <creation_ts>2019-10-07 13:14:56 +0000</creation_ts>
          <short_desc>CoffeelakeSiliconPkg DSC library include files should include section tags</short_desc>
          <delta_ts>2019-10-16 14:46:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>CoffelakeSiliconPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9927</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-07 13:14:56 +0000</bug_when>
    <thetext>The DSC LibraryClass files in CoffeelakeSiliconPkg that are intended to be included elsewhere such as SiPkgPeiLib.dsc, SiPkgDxeLib.dsc, SiPkgCommonLib.dsc
should have section tags for the libraries so that they are not dependent on the top-level DSC file to place the include file in the correct location in the DSC file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9952</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:24:29 +0000</bug_when>
    <thetext>Patch list sent for code review on the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10042</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 14:46:13 +0000</bug_when>
    <thetext>Submitted in commit 96ac5b889bc38ca4043f3cd98a20c0cd14c79557.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2601</bug_id>
          
          <creation_ts>2020-03-16 07:28:40 +0000</creation_ts>
          <short_desc>ArmVirtQemu ompilation failure for RELEASE with GCC49 profile (gcc 8.3)</short_desc>
          <delta_ts>2020-03-28 13:35:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Leif Lindholm">quic_llindhol</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11701</commentid>
    <comment_count>0</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2020-03-16 07:28:40 +0000</bug_when>
    <thetext>Commit 82662a3b5f56 (&quot;ArmVirtPkg/PlatformPeiLib: discover the TPM base address from the DT&quot;) introduces a build error for ArmVirtQemu if using GCC49 profile:

/work/git/edk2/ArmVirtPkg/Library/PlatformPeiLib/PlatformPeiLib.c: In function ‘PlatformPeim’:
/work/git/edk2/ArmVirtPkg/Library/PlatformPeiLib/PlatformPeiLib.c:132:24: error: ‘Parent’ may be used uninitialized in this function [-Werror=maybe-uninitialized]
           RangesProp = fdt_getprop (Base, Parent, &quot;ranges&quot;, &amp;RangesLen);
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

I think LTO hides the behaviour, which is why it&apos;s not triggered with GCC5 and the same underlying toolchain.

Steps to reproduce: build RELEASE with GCC49 profile (verified with Debian 8.3.0-2 toolchain).

DEBUG and NOOPT targets are unaffected.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11712</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-17 22:00:07 +0000</bug_when>
    <thetext>Ard, can you check it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11769</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-23 10:42:48 +0000</bug_when>
    <thetext>The code seems safe to me -- fdt_next_node() performs a depth-first traversal, per source code, and per &lt;https://github.com/dgibson/dtc/blob/62cb4ad286ff82648232f769f78401bf6b00deda/Documentation/manual.txt#L599&gt;.

Therefore (Depth &gt; 1) implies (Depth == 1) will have occurred previously, and so &quot;Parent&quot; will be set.

I think we can simply add

  //
  // Set Parent to suppress incorrect compiler/analyzer warnings.
  //
  Parent = 0;

just before the outer loop, in PlatformPeim() [ArmVirtPkg/Library/PlatformPeiLib/PlatformPeiLib.c].</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11882</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-28 13:35:55 +0000</bug_when>
    <thetext>Fixed in commit f52b30e73dde (&quot;ArmVirtPkg/PlatformPeiLib: add dummy assignment to work around older GCC&quot;, 2020-03-26).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2026</bug_id>
          
          <creation_ts>2019-07-28 23:33:12 +0000</creation_ts>
          <short_desc>Strings are missing in SecurityPkg.uni</short_desc>
          <delta_ts>2019-08-15 22:00:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8612</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-07-28 23:33:12 +0000</bug_when>
    <thetext>STR_gEfiSecurityPkgTokenSpaceGuid_PcdStatusCodeFvVerificationPass_PROMPT is missing in the SecurityPkg.uni file.
STR_gEfiSecurityPkgTokenSpaceGuid_PcdStatusCodeFvVerificationPass_HELP is missing in the SecurityPkg.uni file.
STR_gEfiSecurityPkgTokenSpaceGuid_PcdStatusCodeFvVerificationFail_PROMPT is missing in the SecurityPkg.uni file.
STR_gEfiSecurityPkgTokenSpaceGuid_PcdStatusCodeFvVerificationFail_HELP is missing in the SecurityPkg.uni file.
STR_gEfiSecurityPkgTokenSpaceGuid_PcdSkipOpalPasswordPrompt_PROMPT is missing in the SecurityPkg.uni file.
STR_gEfiSecurityPkgTokenSpaceGuid_PcdSkipOpalPasswordPrompt_HELP is missing in the SecurityPkg.uni file.
STR_gEfiSecurityPkgTokenSpaceGuid_PcdSkipHddPasswordPrompt_PROMPT is missing in the SecurityPkg.uni file.
STR_gEfiSecurityPkgTokenSpaceGuid_PcdSkipHddPasswordPrompt_HELP is missing in the SecurityPkg.uni file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8618</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-07-29 04:10:27 +0000</bug_when>
    <thetext>Assign this to Jian and Maggie</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9015</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-08-15 22:00:54 +0000</bug_when>
    <thetext>Pushed@f516a5144e495d4ead7288aaf15722b14514bcbe
Reviewed@https://edk2.groups.io/g/devel/topic/32861906#45597</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2496</bug_id>
          
          <creation_ts>2020-01-29 21:03:21 +0000</creation_ts>
          <short_desc>BaseTools/Build: Improved compiler compatibility with Structured PCDs</short_desc>
          <delta_ts>2020-03-03 20:41:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2420</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11021</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 21:03:21 +0000</bug_when>
    <thetext>Structured PCDs use an auto generated POSIX application to 
set the value of a Structured PCD.  The auto generated code
depends on common C code in BaseTools/Source/C/Common/PcdValueCommon.c.
This dependency is currently being resolved using a common 
library that contains other source files.  When using some 
versions of visual studio, the extra components in the common
library cause link errors.

The simplest solution is to compile the auto generated C code
and the one file BaseTools/Source/C/Common/PcdValueCommon.c and
stop using the larger common library.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11022</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 21:03:31 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11024</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-01-29 21:41:33 +0000</bug_when>
    <thetext>Patch emails for review:

https://edk2.groups.io/g/devel/message/53555

Branch for review:

https://github.com/mdkinney/edk2/tree/Bug_2495_2496_Structured_Pcd_Host_Env_Compiler_Compat

EDK II CI PR for review:

https://github.com/tianocore/edk2/pull/323</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11118</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-05 21:22:21 +0000</bug_when>
    <thetext>The current patch set that addresses both 2495 and 2496 is being set aside.

The focus will be on a patch set that improved compiler compat.

A couple additional compat issues were found

1) Another reason to remove the dependency on common.lib is that
   not all envs build BaseTools.  If BaseTools is not built, then
   common.lib is not available.

2) BaseTools/Source/C/Common/PcdValueCommon.c build for 32-bit
   hot env, but not a 64-bit hot env.  The return type from
   fread() generates a build error with 64-bit VS2019.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11129</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-02-06 18:11:40 +0000</bug_when>
    <thetext>Patch email for review:
    https://edk2.groups.io/g/devel/message/53881

Branch for review:
    https://github.com/mdkinney/edk2/tree/Bug_2495_2496_Structured_Pcd_Host_Env_Compiler_Compat_V2

EDK II CI PullRequest for review:
    https://github.com/tianocore/edk2/pull/343</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11503</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-03 20:41:04 +0000</bug_when>
    <thetext>Fix at c6a6193d122a9cb0d11373b8fa43ce95724271f7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2962</bug_id>
          
          <creation_ts>2020-09-14 04:17:15 +0000</creation_ts>
          <short_desc>The EmbeddedPkg TimeBaseLib cannot pass MS VS X64 build</short_desc>
          <delta_ts>2022-03-22 22:00:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3723</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmbeddedPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13669</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-09-14 04:17:15 +0000</bug_when>
    <thetext>The TimeBaseLib in EmbeddedPkg cannot pass MS VS X64 build because below code:
&apos;&apos;&apos;
  UINT32 EpochDays;   // Number of days elapsed since EPOCH_JULIAN_DAY
  UINT32 EpochSeconds;

  EpochDays = EfiGetEpochDays (Time);
&apos;&apos;&apos;
EfiGetEpochDays return UINTN and it would casue warning when assign UINTN to UINT32.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13675</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-15 22:08:18 +0000</bug_when>
    <thetext>Include Leif for the comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18688</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-22 22:00:35 +0000</bug_when>
    <thetext>Duplicate request.

*** This bug has been marked as a duplicate of bug 3723 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2847</bug_id>
          
          <creation_ts>2020-07-13 04:03:40 +0000</creation_ts>
          <short_desc>Configuring UART2 in edk2-platform IntelAtomProcessorE3900 failed</short_desc>
          <delta_ts>2020-07-13 05:14:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="andreyv">andrey.vinokurtsev</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13090</commentid>
    <comment_count>0</comment_count>
    <who name="andreyv">andrey.vinokurtsev</who>
    <bug_when>2020-07-13 04:03:40 +0000</bug_when>
    <thetext>Hi

We are trying to make LeafHill IFWI image for E3900 and generate the BIOS according to the : https://github.com/tianocore/edk2-platforms/tree/devel-IntelAtomProcessorE3900
Following the step-by-step build process the IFWI image is generated successfully for LeafHill, and flashed to the board with SP100
1.	The build line is: “./BiuldBios.sh /LH /D Broxton Debug”
However, the serial debug port which is UART2 is not getting any debug information during a boot process

The document in pp15:
https://software.intel.com/content/dam/develop/external/us/en/documents/uefi-firmware-porting-guide-for-the-intel-atom-processor-e3900-series-820187.pdf
recommends to make a following changes to customise UART settings: 
 gPlatformModuleTokenSpaceGuid.PcdSerialIoUartNumber|2|UINT8|0x10001011

Umfortunately, we’ve not be able to see any serial output.

Would you be able to navigate us what is wrong with our settings ?

Regards,
Andrey</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13091</commentid>
    <comment_count>1</comment_count>
    <who name="andreyv">andrey.vinokurtsev</who>
    <bug_when>2020-07-13 05:14:39 +0000</bug_when>
    <thetext>sorry for opening that
I can confirm the cable was broken, fixing the cable can see the UART2 prints out all required information</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2264</bug_id>
          
          <creation_ts>2019-10-09 20:04:00 +0000</creation_ts>
          <short_desc>Fix spelling errors in FatPkg</short_desc>
          <delta_ts>2019-10-22 20:25:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FatPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9989</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 20:04:00 +0000</bug_when>
    <thetext>Lots of spelling errors. 

see https://github.com/spbrogan/edk2/commit/2f82f5f003e09c7ef9a385cba90896c88fcaa99e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10060</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:22:16 +0000</bug_when>
    <thetext>All these spelling errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10115</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-18 15:16:13 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/49243</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10187</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 20:25:46 +0000</bug_when>
    <thetext>Pushed as 8d89159245..44c9618a3f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2730</bug_id>
          
          <creation_ts>2020-05-20 16:35:35 +0000</creation_ts>
          <short_desc>[aarch64] [OVMF] Translation Fault upon attempting to execute EFI_FILE-&gt;GetInfo</short_desc>
          <delta_ts>2020-05-28 09:16:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Dylan Green">greenepicman</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12572</commentid>
    <comment_count>0</comment_count>
      <attachid>514</attachid>
    <who name="Dylan Green">greenepicman</who>
    <bug_when>2020-05-20 16:35:35 +0000</bug_when>
    <thetext>Created attachment 514
Recent log

Upon porting a UEFI bootloader from x86_64 to Aarch64, I&apos;ve encountered a problem that does not occur on other firmware implementations of Aarch64 UEFI (including on real hardware).

Attempting to call &quot;GetInfo&quot; from an existing EFI_FILE throws a Synchronous Exception. Although manipulating the final argument (the EFI_FILE_INFO pointer in this case) yields different precise errors, I&apos;ve always been able to produce a Translation fault as the exception itself. On other implementations, there would be no exception or fault, and the expected EFI_STATUS would be returned (in my case, it&apos;s supposed to return an error, as the final argument is NULL or is too small to hold the EFI_FILE_INFO structure, but it is not supposed to throw any kind of processor exception).

Here is the particular call that throws the exception (written in C with GNU_EFI)

EFI_FILE *KernelFile; //This would be set to a valid file before the call below
UINTN FileInfoSize;

EFI_STATUS BootStatus = uefi_call_wrapper(KernelFile-&gt;GetInfo, 4, KernelFile, &amp;gEfiFileInfoGuid, &amp;FileInfoSize, NULL);


The code I use is the same, as is the compiler framework, the headers, and the method of creating the images. Although I have not fully diagnosed the cause of the issue, this leads me to believe OVMF for Aarch64 is the source of the problem. Although this does work when compiling for and testing this code on x86_64 implementations of OVMF.

I&apos;ve attached a copy of the command I&apos;ve used as well as the logs that appeared when the exception was thrown.

Here is the QEMU command I&apos;m using to run it:
qemu-system-aarch64 -m 1024 -cpu cortex-a72 -M virt -drive format=raw,file=flash0.img,if=pflash -drive format=raw,file=flash1.img,if=pflash -drive if=none,file=Pious.img,id=hd0,format=raw -device virtio-blk-device,drive=hd0 -d guest_errors -device virtio-gpu-pci -device qemu-xhci -device usb-mouse -device usb-kbd -serial stdio

(flash1.img is a non-truncated copy of the firmware image, and flash0.img is completely zeroed out)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12576</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-20 19:42:40 +0000</bug_when>
    <thetext>(+Ard)

(In reply to Dylan Green from comment #0)
&gt; Created attachment 514 [details]
&gt; Recent log
&gt; 
&gt; Upon porting a UEFI bootloader from x86_64 to Aarch64, I&apos;ve encountered a
&gt; problem that does not occur on other firmware implementations of Aarch64
&gt; UEFI (including on real hardware).
&gt; 
&gt; Attempting to call &quot;GetInfo&quot; from an existing EFI_FILE throws a Synchronous
&gt; Exception. Although manipulating the final argument (the EFI_FILE_INFO
&gt; pointer in this case) yields different precise errors, I&apos;ve always been able
&gt; to produce a Translation fault as the exception itself. On other
&gt; implementations, there would be no exception or fault, and the expected
&gt; EFI_STATUS would be returned (in my case, it&apos;s supposed to return an error,
&gt; as the final argument is NULL or is too small to hold the EFI_FILE_INFO
&gt; structure, but it is not supposed to throw any kind of processor exception).
&gt; 
&gt; Here is the particular call that throws the exception (written in C with
&gt; GNU_EFI)
&gt; 
&gt; EFI_FILE *KernelFile; //This would be set to a valid file before the call
&gt; below
&gt; UINTN FileInfoSize;
&gt; 
&gt; EFI_STATUS BootStatus = uefi_call_wrapper(KernelFile-&gt;GetInfo, 4,
&gt; KernelFile, &amp;gEfiFileInfoGuid, &amp;FileInfoSize, NULL);

(1) Per UEFI spec v2.8, chapter 13.5, the EFI_FILE_PROTOCOL.GetInfo() member function is not required to check for (Buffer==NULL), and to return (for example) EFI_INVALID_PARAMETER. The Buffer parameter is not marked as OPTIONAL in the spec, and the Status Codes Returned table does not list EFI_INVALID_PARAMETER at all.

Based on your attachment in comment 0, your GetInfo() call lands in FatPkg/EnhancedFatDxe. And in accordance with the spec, the following call tree in that driver does *not* check against (Buffer==NULL) -- it is not required to:

  FatGetInfo() [FatPkg/EnhancedFatDxe/Info.c]
    FatSetOrGetInfo() [FatPkg/EnhancedFatDxe/Info.c]
      FatGetFileInfo() [FatPkg/EnhancedFatDxe/Info.c]
        FatGetDirEntInfo() [FatPkg/EnhancedFatDxe/DirectoryManage.c]

FatGetDirEntInfo() dereferences Buffer, so if you&apos;ve passed in NULL, you get undefined behavior. And the caller of EFI_FILE_PROTOCOL.GetInfo() is responsible, because it broke the spec; again, Buffer is not marked OPTIONAL.

(2) Per the same location in the UEFI spec, BufferSize is an IN OUT parameter. The spec says,

  BufferSize  On input, the size of Buffer. On output, the amount of data
              returned in Buffer. In both cases, the size is measured in bytes.

  [...]

  If the buffer is not large enough to fit the requested structure,
  EFI_BUFFER_TOO_SMALL is returned and the BufferSize is set to the size of
  buffer that is required to make the request.

  [...]

  EFI_BUFFER_TOO_SMALL  The BufferSize is too small to read the current
                        directory entry. BufferSize has been updated with the
                        size needed to complete the request.

The FatGetDirEntInfo() function correctly calculates the size of the buffer it needs for returning the information requested, and then compares that size against the provided buffer size:

  Size        = SIZE_OF_EFI_FILE_INFO;
  NameSize    = StrSize (DirEnt-&gt;FileString);
  ResultSize  = Size + NameSize;

  Status      = EFI_BUFFER_TOO_SMALL;
  if (*BufferSize &gt;= ResultSize) {

The problem is that your code -- at least your example code -- does not initialize &quot;FileInfoSize&quot;; on input to GetInfo(), it carries an indeterminate value. Consequently, you get undefined behavior in this case too (and the caller is responsible again, due to breaking the spec).

Where you say &quot;the final argument is [...] too small to hold the EFI_FILE_INFO structure&quot;, you refer to the final argument only. Does the 3rd argument (BufferSize) accurately reflect the number of bytes that *are* available in Buffer?

If not, then it&apos;s a bug in your code, and we should close this BZ as &quot;INVALID&quot;. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12577</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-20 19:43:27 +0000</bug_when>
    <thetext>(tweaking some metadata on the ticket)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12613</commentid>
    <comment_count>3</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-05-21 04:21:19 +0000</bug_when>
    <thetext>(In reply to Dylan Green from comment #0)
&gt; Created attachment 514 [details]
&gt; Recent log
&gt; 
&gt; Upon porting a UEFI bootloader from x86_64 to Aarch64, I&apos;ve encountered a
&gt; problem that does not occur on other firmware implementations of Aarch64
&gt; UEFI (including on real hardware).
&gt; 

DRAM starts at 0x0 on x86, and on some AArch64 platforms, often masking NULL deference errors. We deliberately unmapped the first page of NOR flash on ArmVirtQemu (which lives at address 0x0 as well) to prevent NULL pointer dereferences from triggering an error in KVM, and instead, a translation error will result. This is expected behavior.

This does imply that ArmVirtQemu is less forgiving when it comes to incorrect use of the APIs, but I actually see that as a good thing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12614</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-21 05:15:32 +0000</bug_when>
    <thetext>Thank you, Ard, for reviewing this ticket!

Let&apos;s wait for an update from Dylan until 2020-05-28, and close the BZ then, unless there is new information suggesting a bug in edk2. (Setting the &quot;need_info&quot; keyword.) Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12756</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-28 09:16:29 +0000</bug_when>
    <thetext>Symptom explained by invalid application code; closing BZ as invalid.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>514</attachid>
            <date>2020-05-20 16:35:35 +0000</date>
            <delta_ts>2020-05-20 16:35:35 +0000</delta_ts>
            <desc>Recent log</desc>
            <filename>README.txt</filename>
            <type>text/plain</type>
            <size>5460</size>
            <attacher name="Dylan Green">greenepicman</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2156</bug_id>
          
          <creation_ts>2019-09-05 05:41:34 +0000</creation_ts>
          <short_desc>CheckGloballyDefinedVariables() does not consider UEFI specification version</short_desc>
          <delta_ts>2021-11-11 09:34:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Sunny Wang">Sunny.Wang</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>eric.jin</cc>
    
    <cc>stephano</cc>
    
    <cc>Sunny.Wang</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9472</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-05 05:41:34 +0000</bug_when>
    <thetext>CheckGloballyDefinedVariables() uses table VariableArray[] to check that only know n variables are using the GUID EFI_GLOBAL_VARIABLE.

The known variables depend on the UEFI specification version. E.g. in UEFI 2.8 we have RuntimeServicesSupported which does not exist in version 2.6.

So I think it would make sense to add a fields minimum and maximum version to the table. This will allow to make a version dependent check.

In any case RuntimeServicesSupported should be added to the table.

Best regards

Heinrich</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9886</commentid>
    <comment_count>1</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-09-30 14:00:43 +0000</bug_when>
    <thetext>Currently, uefi-sct is for UEFI specification version 2.7A or B.
However, I acknowledge the VariableArray should include &quot;RuntimeServicesSupported&quot; globally defined variable, when uefi-sct is enabled for UEFI specification version 2.8.

Also, the EfiCompliantBBTestRequired_uefi.c file is hard coded in many places.

Hence, EfiCompliantBBTestRequired_uefi.c file will be restructured when uefi-sct is enabled for UEFI specification version 2.8.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17150</commentid>
    <comment_count>2</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-02 10:56:15 +0000</bug_when>
    <thetext>The original issue is solved as RuntimeServicesSupported is removed from the spec.

How to treat firmware with different compatibility value?

Sunny Wang to further investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17719</commentid>
    <comment_count>3</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2021-11-10 12:56:11 +0000</bug_when>
    <thetext>Hi Heinrich, 

After taking a further look, although your suggestion is good and will prevent fake failure (UEFI spec version compatibility issue), it may still not be worth doing it at this moment because of two reasons below: 

1. It would cause additional maintenance effort and we may not have resources for it. If we add the checks for minimum and maximum versions for CheckGloballyDefinedVariables(), we may also need to add the checks to other places for consistency. Then, we will need to maintain the checks when a new version of UEFI spec get released. Then, if we don&apos;t maintain it well, we may get more issues and confusion. As you know, we don&apos;t even have the resources to fix the existing issues and implement new tests for the changes in the new version of the UEFI specifications. 
 
2. The fake failure caused by the spec change looks acceptable at this moment. If my understanding is correct, it is expected to see the failures with newly added/modified stuff in the latest UEFI spec (v2.8) with the latest SCT because there is no SCT link for v2.8 in https://uefi.org/testtools. 


Therefore, I think we can close this issue like other enhancements we discussed before for now. Once we get more people to join SCT activities, we can re-open this issue. I&apos;m also fine with changing it as an enhancement. If you still think we need to solve this UEFI spec version compatibility issue at this moment, how about we just add code/test case to check the firmware&apos;s supported UEFI spec version (gtST-&gt;Hdr.Revision) and show the failure to indicate the compatibility issue? This will be easier for maintenance.   

Best Regards,
Sunny</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17728</commentid>
    <comment_count>4</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-11-11 09:34:39 +0000</bug_when>
    <thetext>Closing this ticket as this issue does not exist anymore.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2624</bug_id>
          
          <creation_ts>2020-03-23 19:21:37 +0000</creation_ts>
          <short_desc>GenMake.py is adding make requirements for files that may not exist.</short_desc>
          <delta_ts>2020-07-22 23:11:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to>yunhuax.feng</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yunhuax.feng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11781</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-23 19:21:37 +0000</bug_when>
    <thetext>A change in GenMake.py went from this:

$(FFS_OUTPUT_DIR)\$(MODULE_GUID).map :
	if exist $(OUTPUT_DIR)\&lt;some_file&gt;.map $(CP) $(OUTPUT_DIR)\&lt;some_file&gt;.map $(FFS_OUTPUT_DIR)\$(MODULE_GUID).map

to this:

$(FFS_OUTPUT_DIR)\$(MODULE_GUID).map : $(OUTPUT_DIR)\&lt;some_file&gt;.map
	if exist $(OUTPUT_DIR)\&lt;some_file&gt;.map $(CP) $(OUTPUT_DIR)\&lt;some_file&gt;.map $(FFS_OUTPUT_DIR)\$(MODULE_GUID).map

For custom source files that do not generate maps, the change will fail. The &apos;if&apos; statement on the second line should be sufficient to cover the &quot;missing file&quot; case without breaking the build.

Patch can be found here:
https://github.com/microsoft/mu_basecore/pull/58</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11782</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-23 20:39:50 +0000</bug_when>
    <thetext>Looks related to commit:
tianocore/edk2@b34ed98

Is related. And this fixes a good issue, so we actually need both, somehow.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11783</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-23 20:44:05 +0000</bug_when>
    <thetext>Take the ownership.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11785</commentid>
    <comment_count>3</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-23 21:38:32 +0000</bug_when>
    <thetext>Looks like it&apos;s this FDF entry that&apos;s causing it, not the INF entry:

[Rule.Common.DXE_DRIVER.SPECIAL]
  FILE DRIVER = $(NAMED_GUID) {
    RAW       BIN                     copied_binary.efi
    DXE_DEPEX DXE_DEPEX Optional      $(INF_OUTPUT)/$(MODULE_NAME).depex
    PE32      PE32   Align = Auto     $(INF_OUTPUT)/$(MODULE_NAME).efi
    UI        STRING=&quot;$(MODULE_NAME)&quot; Optional
    VERSION   STRING=&quot;$(INF_VERSION)&quot; Optional BUILD_NUM=$(BUILD_NUMBER)
  }

If I comment out that RAW section, the broken .map file requirement goes away, but we need this section to make sure the binary makes it into the final FFS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11790</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-23 23:14:26 +0000</bug_when>
    <thetext>Bret, would you check if this patch works for you?
https://edk2.groups.io/g/devel/message/56126</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11800</commentid>
    <comment_count>5</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-24 02:58:54 +0000</bug_when>
    <thetext>It does *build* with that patch, but gives this new warning:

NMAKE : warning U4004: too many rules for target &apos;c:\_uefi\devicesintel\Build\&lt;platform&gt;\DEBUG_VS2017\FV\Ffs\&lt;guid&gt;&lt;driver_name&gt;\&lt;same_guid&gt;.map&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11801</commentid>
    <comment_count>6</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-24 02:59:36 +0000</bug_when>
    <thetext>If needed, I can try to re-roll this driver as a dummy driver so you can repro. Right now it&apos;s a Surface internal thing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11813</commentid>
    <comment_count>7</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-24 21:30:17 +0000</bug_when>
    <thetext>OK. If I can repro this issue, that will be fine. In my local test, I did not see the warning message.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11854</commentid>
    <comment_count>8</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-26 01:17:31 +0000</bug_when>
    <thetext>I&apos;ve attached the driver. All you should have to do is add the driver to the X64 section of your DSC, and add the following two things in the FDF...

INF RuleOverride = INTDRIVER DemoWrapperDriver/DemoWrapperDriver.inf

[Rule.Common.DXE_DRIVER.INTDRIVER]
  FILE DRIVER = $(NAMED_GUID) {
    RAW       BIN                     PayloadDxe.efi
    DXE_DEPEX DXE_DEPEX Optional      $(INF_OUTPUT)/$(MODULE_NAME).depex
    PE32      PE32   Align = Auto     $(INF_OUTPUT)/$(MODULE_NAME).efi
    UI        STRING=&quot;$(MODULE_NAME)&quot; Optional
    VERSION   STRING=&quot;$(INF_VERSION)&quot; Optional BUILD_NUM=$(BUILD_NUMBER)
  }

Then I see this in my output...
c:\_uefi\devicesintel\Build\MsftAvilaPkg\DEBUG_VS2017\FV\Ffs\9E355B17-CC80-4763-B408-3466C5752139DemoWrapperDriver\9E355B17-CC80-4763-B408-3466C5752139.map

I&apos;ve also attached the generated makefile.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11855</commentid>
    <comment_count>9</comment_count>
      <attachid>496</attachid>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-26 01:18:06 +0000</bug_when>
    <thetext>Created attachment 496
Generated Makefile</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11856</commentid>
    <comment_count>10</comment_count>
      <attachid>497</attachid>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-26 01:18:40 +0000</bug_when>
    <thetext>Created attachment 497
Demo Driver</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11948</commentid>
    <comment_count>11</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-31 16:38:23 +0000</bug_when>
    <thetext>Bob, any update here? Anything else I can get you?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12107</commentid>
    <comment_count>12</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:11:07 +0000</bug_when>
    <thetext>Bob: have you any update on this one?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12189</commentid>
    <comment_count>13</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-04-12 22:02:56 +0000</bug_when>
    <thetext>Bret, sorry for late. I can&apos;t build this driver successfully. I think that is because I don&apos;t have Ms* packages. would you update the driver or share me the Ms* packages?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12208</commentid>
    <comment_count>14</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-04-14 15:53:59 +0000</bug_when>
    <thetext>Apologies. You should be able to drop the MS packages from the INF and the MsManufacturingModeLib.h and lines 53-57 from the C file and it should work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12209</commentid>
    <comment_count>15</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-04-14 15:55:20 +0000</bug_when>
    <thetext>You may also have to change gEfiEventPostReadyToBootGuid to gEfiEventReadyToBootGuid.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12299</commentid>
    <comment_count>16</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-04-23 06:01:00 +0000</bug_when>
    <thetext>Bret, I have reproduced this problem. I&apos;ll work out a solution and create a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12304</commentid>
    <comment_count>17</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-04-23 12:39:10 +0000</bug_when>
    <thetext>Awesome! Thanks! Let me know if I can do anything to help.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12465</commentid>
    <comment_count>18</comment_count>
    <who name="">yunhuax.feng</who>
    <bug_when>2020-05-09 05:39:15 +0000</bug_when>
    <thetext>please try this patch: https://edk2.groups.io/g/devel/message/58954</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13142</commentid>
    <comment_count>19</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-07-21 01:29:11 +0000</bug_when>
    <thetext>Can confirm that the patch from 05/09 resolves the build issue.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13146</commentid>
    <comment_count>20</comment_count>
    <who name="">yunhuax.feng</who>
    <bug_when>2020-07-21 03:35:59 +0000</bug_when>
    <thetext>I have verified the case before send patch, The build issue should be resolved</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13147</commentid>
    <comment_count>21</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-07-21 12:58:20 +0000</bug_when>
    <thetext>Sorry, I meant to say &quot;I can confirm&quot;.

I tested the patch and it works in our build. Thanks again!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13163</commentid>
    <comment_count>22</comment_count>
    <who name="">yunhuax.feng</who>
    <bug_when>2020-07-22 23:11:21 +0000</bug_when>
    <thetext>patch merged</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>496</attachid>
            <date>2020-03-26 01:18:06 +0000</date>
            <delta_ts>2020-03-26 01:18:06 +0000</delta_ts>
            <desc>Generated Makefile</desc>
            <filename>Makefile</filename>
            <type>application/octet-stream</type>
            <size>24037</size>
            <attacher name="Bret Barkelew">bret.barkelew</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>497</attachid>
            <date>2020-03-26 01:18:40 +0000</date>
            <delta_ts>2020-03-26 01:18:40 +0000</delta_ts>
            <desc>Demo Driver</desc>
            <filename>DemoWrapperDriver.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>8448</size>
            <attacher name="Bret Barkelew">bret.barkelew</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2047</bug_id>
          
          <creation_ts>2019-08-02 02:37:37 +0000</creation_ts>
          <short_desc>BaseTools: Build raise exception if there is libraryclass missing in dsc file and --pcd build option is used</short_desc>
          <delta_ts>2019-08-12 03:05:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8735</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-02 02:37:37 +0000</bug_when>
    <thetext>Build raise exception if there is libraryclass missing in dsc file and --pcd build option is used. 

Build tool should provide meaningful error message rather than a call stack.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8736</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-02 02:38:14 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8940</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-12 03:05:29 +0000</bug_when>
    <thetext>Fixed at a0792697bc54e5472e2126c6fbff8031868426a9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2518</bug_id>
          
          <creation_ts>2020-02-10 21:49:19 +0000</creation_ts>
          <short_desc>Issues reported by ECC in edk2-platforms</short_desc>
          <delta_ts>2020-03-27 01:55:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>newexplorerj</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11193</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-10 21:49:19 +0000</bug_when>
    <thetext>IntelSiliconPkg\Include\IndustryStandard\FirmwareInterfaceTable.h
The file name for [IntelSiliconPkg\Include\IndustryStandard\FirmwareInterfaceTable.h] is duplicate

IntelSiliconPkg\Library\BaseConfigBlockLib\BaseConfigBlockLib.c          
line 14,53,96
Comment description should end with period &apos;.&apos; 

IntelSiliconPkg\Include\Library\ConfigBlockLib.h   line 12，29，46
Comment description should end with period &apos;.&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11334</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 09:05:03 +0000</bug_when>
    <thetext>Shenglei: 
  What means FirmwareInterfaceTable.h file name duplication?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11340</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 10:02:30 +0000</bug_when>
    <thetext>Please check</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11363</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-02-20 20:22:18 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #1)
&gt; Shenglei: 
&gt;   What means FirmwareInterfaceTable.h file name duplication?

This issue doesn&apos;t exist any longer. FirmwareInterfaceTable.h in edk2 is removed on 2/14.
edk2: 5b45b44e6f303dd421110a109ff5cfc2ae8f7555</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11535</commentid>
    <comment_count>4</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-04 20:35:40 +0000</bug_when>
    <thetext>Post commit at https://edk2.groups.io/g/devel/message/54517, waiting for reviewing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11551</commentid>
    <comment_count>5</comment_count>
    <who name="">newexplorerj</who>
    <bug_when>2020-03-05 00:52:34 +0000</bug_when>
    <thetext>Update the subject and post the patch v2 at https://edk2.groups.io/g/devel/message/55472.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11873</commentid>
    <comment_count>6</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-27 01:55:15 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2-platforms/commit/d4a752ea611b10b94a50a6de322d489f1c51efd2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2871</bug_id>
          
          <creation_ts>2020-08-03 02:56:04 +0000</creation_ts>
          <short_desc>DHCP support for RFC 3021 addresses? Question/Feature reuquest</short_desc>
          <delta_ts>2020-08-10 05:05:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>722</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Robert Socha">robert</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13301</commentid>
    <comment_count>0</comment_count>
    <who name="Robert Socha">robert</who>
    <bug_when>2020-08-03 02:56:04 +0000</bug_when>
    <thetext>Hello,

We have a lot of Supermicro servers. I&apos;m not 100% sure but their firmware is based on EDK2.

We have problem with network booting. We are using RFC 3021 ip addresses for our servers (ie. netmask 255.255.255.254 or prefix /31).
With BIOS PXE&apos;s boot (Intel&apos;s nics) there is no problem with booting from /31 network address. 

But unfortunately with UEFI firmware this is not working.
UEFI DHCP client refuse to accept this subnets (with message:

&quot;Lease is denied upon entering bound&quot; from NetworkPkg/Dhcp4Dxe/Dhcp4Io.c

IS there any possibility to implement RFC 3021 support to EDK2? (and sooner or later this will pass to other MB vendors)

 
Best regards</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13324</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-05 22:11:48 +0000</bug_when>
    <thetext>Is there any overlap between this request and bug 722?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13343</commentid>
    <comment_count>2</comment_count>
    <who name="Robert Socha">robert</who>
    <bug_when>2020-08-07 16:24:34 +0000</bug_when>
    <thetext>Yes. This is the same issue. Thank you.

So this change was not picked up by my MB vendor.

Best regards</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13352</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-10 05:05:05 +0000</bug_when>
    <thetext>Hi Robert,

based on your comment 2 here, I&apos;m closing this BZ as a duplicate of 722.

Thanks,
Laszlo

*** This bug has been marked as a duplicate of bug 722 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2183</bug_id>
          
          <creation_ts>2019-09-10 05:03:56 +0000</creation_ts>
          <short_desc>BaseTools:  Remove unnecessary the operation of renaming a file.</short_desc>
          <delta_ts>2019-09-16 22:23:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9570</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-10 05:03:56 +0000</bug_when>
    <thetext>The rename call in SaveFileOnChange and CopyFileOnChange was to avoid writing file conflict in multiple process runtime. Since there&apos;s already been file_lock to protect the code of copy or write, the rename call can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9682</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-16 22:23:09 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9683</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-16 22:23:28 +0000</bug_when>
    <thetext>pushed at 22e75231aee6361c9c13c0be7f3dd083db8f308e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2537</bug_id>
          
          <creation_ts>2020-02-20 05:55:16 +0000</creation_ts>
          <short_desc>AsmWriteCR0() halts execution</short_desc>
          <delta_ts>2020-03-06 11:41:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vishal">vishalsmails</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>Linux</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11330</commentid>
    <comment_count>0</comment_count>
    <who name="Vishal">vishalsmails</who>
    <bug_when>2020-02-20 05:55:16 +0000</bug_when>
    <thetext>I am able to set the bit XCR0[2] using the AsmWriteCR0() method, however, after this method is executed, the execution breaks and hangs forever.

Working on Intel platforms.

Could you please help? Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11357</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:13:50 +0000</bug_when>
    <thetext>Please provide more information on Intel platform, such as cpu type.

And, collect the log info for the exception type.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11417</commentid>
    <comment_count>2</comment_count>
    <who name="Vishal">vishalsmails</who>
    <bug_when>2020-02-24 02:23:49 +0000</bug_when>
    <thetext>I&apos;m working on CooperLake.

There are no exceptions. The system hangs right after making the call to AsmWriteCR0. No Print statements/exception handling works either.

Please advise.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11497</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-03 09:31:52 +0000</bug_when>
    <thetext>AsmWriteCR0() is used to operate CR0 register. But, this usage is for XCR0 register. So, AsmWriteCR0() can&apos;t be used for this purpose.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11577</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-05 20:24:42 +0000</bug_when>
    <thetext>this is not an issue in the code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11590</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-06 11:41:12 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #4)
&gt; this is not an issue in the code.

Then I think we should close this report as invalid.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2423</bug_id>
          
          <creation_ts>2019-12-16 21:53:55 +0000</creation_ts>
          <short_desc>change UTF-8 characters to asci character</short_desc>
          <delta_ts>2019-12-17 21:20:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10713</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-12-16 21:53:55 +0000</bug_when>
    <thetext>In Conf\tools_def.template

There is tow lines of 

#                        Notes: Since this tool chain is obsolete, it doesn’t enable the compiler option for included header file list generation,


That commit 13c5e34a1b introduces the first two UTF-8 characters (the quote ’ ) in an otherwise all-ascii file. And that prevent our CI from building 
OVMF.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10721</commentid>
    <comment_count>1</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-12-17 21:20:06 +0000</bug_when>
    <thetext>fix it in 69ebe8280672589d8f5826f74c0fa92c103c8042</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2310</bug_id>
          
          <creation_ts>2019-10-25 03:48:21 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg/SplitFspBin.py: Command crashed when FV almost full.</short_desc>
          <delta_ts>2019-10-27 22:35:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10216</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-10-25 03:48:21 +0000</bug_when>
    <thetext>When FSP FV almost full, SplitFspBin.py may crash with below error:
  File &quot;SplitFspBin.py&quot;, line 457, in ParseFv
    ffshdr = EFI_FFS_FILE_HEADER.from_buffer (self.FvData, offset)
ValueError: Buffer size too small (40960 instead of at least 40968 bytes)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10222</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-10-27 22:35:21 +0000</bug_when>
    <thetext>commit 9e639c1cb6abd5ffed0f9017de26f93d2ee99eac (HEAD -&gt; master, origin/master, origin/HEAD, SplitFspBinFix)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Oct 25 15:46:19 2019 +0800

    IntelFsp2Pkg/SplitFspBin.py: Command crashed when FV almost full.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2310

    When target FV 99% used and only few bytes space left,
    SplitFspBin.py may crash with below error:

      File &quot;SplitFspBin.py&quot;, line 457, in ParseFv
        ffshdr = EFI_FFS_FILE_HEADER.from_buffer (self.FvData, offset)
    ValueError: Buffer size too small
      (40960 instead of at least 40968 bytes)

    It was because the offset used by FFS_HEADER parser out of bounds.
    It should stop parsing when offset equal or larger than
    (buffer size - FFS_HEADER size).

    This patch also fixed another crash issue when running script with
    Python 3.x and no input parameter given:

      File &quot;SplitFspBin.py&quot;, line 868, in main
        if args.which in [&apos;rebase&apos;, &apos;split&apos;, &apos;genhdr&apos;, &apos;info&apos;]:
    AttributeError: &apos;Namespace&apos; object has no attribute &apos;which&apos;

    Test:
    1. Ran script with both py2 and py3 with no input and no crash observed.
    2. Compare the script result before and after the patch are identical.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2779</bug_id>
          
          <creation_ts>2020-06-03 14:22:31 +0000</creation_ts>
          <short_desc>Brotli sources are not included into released source archive</short_desc>
          <delta_ts>2020-06-09 12:33:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2677</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2558</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Anatol">anatol.pomozov</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12787</commentid>
    <comment_count>0</comment_count>
    <who name="Anatol">anatol.pomozov</who>
    <bug_when>2020-06-03 14:22:31 +0000</bug_when>
    <thetext>Arch Linux uses following link for its package:

https://github.com/tianocore/edk2/releases/tag/edk2-stable202005

The source tarball edk2-202005.tar.gz does not include any sources under BaseTools/Source/C/BrotliCompress/brotli that lead to following compilation failure:

make[2]: Leaving directory &apos;/build/edk2/src/edk2-202005/BaseTools/Source/C/VfrCompile&apos;
make -C BrotliCompress
make[2]: Entering directory &apos;/build/edk2/src/edk2-202005/BaseTools/Source/C/BrotliCompress&apos;
gcc -o ../bin/Brotli  brotli/c/tools/brotli.o brotli/c/common/dictionary.o brotli/c/common/transform.o brotli/c/dec/bit_reader.o brotli/c/dec/decode.o brotli/c/dec/huffman.o brotli/c/dec/state.o brotli/c/enc/backward_references.o brotli/c/enc/backward_references_hq.o brotli/c/enc/bit_cost.o brotli/c/enc/block_splitter.o brotli/c/enc/brotli_bit_stream.o brotli/c/enc/cluster.o brotli/c/enc/compress_fragment.o brotli/c/enc/compress_fragment_two_pass.o brotli/c/enc/dictionary_hash.o brotli/c/enc/encode.o brotli/c/enc/encoder_dict.o brotli/c/enc/entropy_encode.o brotli/c/enc/histogram.o brotli/c/enc/literal_cost.o brotli/c/enc/memory.o brotli/c/enc/metablock.o brotli/c/enc/static_dict.o brotli/c/enc/utf8_util.o -L../libs -lm
gcc: error: brotli/c/tools/brotli.o: No such file or directory
gcc: error: brotli/c/common/dictionary.o: No such file or directory
gcc: error: brotli/c/common/transform.o: No such file or directory
gcc: error: brotli/c/dec/bit_reader.o: No such file or directory
gcc: error: brotli/c/dec/decode.o: No such file or directory
gcc: error: brotli/c/dec/huffman.o: No such file or directory
gcc: error: brotli/c/dec/state.o: No such file or directory
gcc: error: brotli/c/enc/backward_references.o: No such file or directory
gcc: error: brotli/c/enc/backward_references_hq.o: No such file or directory
gcc: error: brotli/c/enc/bit_cost.o: No such file or directory
gcc: error: brotli/c/enc/block_splitter.o: No such file or directory
gcc: error: brotli/c/enc/brotli_bit_stream.o: No such file or directory
gcc: error: brotli/c/enc/cluster.o: No such file or directory
gcc: error: brotli/c/enc/compress_fragment.o: No such file or directory
gcc: error: brotli/c/enc/compress_fragment_two_pass.o: No such file or directory
gcc: error: brotli/c/enc/dictionary_hash.o: No such file or directory
gcc: error: brotli/c/enc/encode.o: No such file or directory
gcc: error: brotli/c/enc/encoder_dict.o: No such file or directory
gcc: error: brotli/c/enc/entropy_encode.o: No such file or directory
gcc: error: brotli/c/enc/histogram.o: No such file or directory
gcc: error: brotli/c/enc/literal_cost.o: No such file or directory
gcc: error: brotli/c/enc/memory.o: No such file or directory
gcc: error: brotli/c/enc/metablock.o: No such file or directory
gcc: error: brotli/c/enc/static_dict.o: No such file or directory
gcc: error: brotli/c/enc/utf8_util.o: No such file or directory
make[2]: *** [../Makefiles/app.makefile:18: ../bin/Brotli] Error 1
make[2]: Leaving directory &apos;/build/edk2/src/edk2-202005/BaseTools/Source/C/BrotliCompress&apos;
make[1]: *** [GNUmakefile:74: BrotliCompress] Error 2
make[1]: Leaving directory &apos;/build/edk2/src/edk2-202005/BaseTools/Source/C&apos;
make: *** [GNUmakefile:19: Source/C] Error 2
make: Leaving directory &apos;/build/edk2/src/edk2-202005/BaseTools&apos;




Please re-release a new source tarball with brotli sources included.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12823</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-09 12:32:21 +0000</bug_when>
    <thetext>Edk2 consumes a number of other software projects, for example OpenSSL, Oniguruma, Brotli,  SoftFloat, CMocka, etc. These projects are consumed as git submodules. Some of these projects may have been originally embedded into the edk2 tree itself, and recently factored into git submodules.

For example, regarding Brotli, see bug 2558 and bug 2559.

The tianocore project does not distribute tarballs for those submodules. Please update your distro to provide separate source tarballs for those subprojects, and use those tarballs when building edk2. I reckon you already solve this problem for OpenSSL in Arch Linux.

Closing this as INVALID, because it&apos;s not tianocore&apos;s job to provide brotli etc. tarballs.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12824</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-09 12:32:49 +0000</bug_when>
    <thetext>It is true however that this change can be confusing for edk2 consumers; see e.g. bug 2677.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2665</bug_id>
          
          <creation_ts>2020-04-08 01:33:31 +0000</creation_ts>
          <short_desc>Report status code might cause page fault when executes the out of resource path</short_desc>
          <delta_ts>2020-04-20 23:54:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12126</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-04-08 01:33:31 +0000</bug_when>
    <thetext>All of the following needs to be satisfied when triggering this specific page fault:
1.	Report status code is called at a higher level than one of the registered listeners, this will make the signaled event to happen later;
2.	More report status code is incoming, this will make the router keeps (virtually) appending data to the buffer;
3.	This report status code is from inside a memory allocation call. Although router will reallocate data buffer, but Dxe has memory lock to prevent reentrant allocation calls;

One expample is: CreatePageEntryAttribute&apos;s verbose logging from CpuPageTable.c. This routine is called from CoreAllocatePoolPagesI, which is inside the mPoolMemoryLock protection, and router’s ReallocatePool will fail to execute. Thus router will simply move the CallbackEntry-&gt;EndPointer to cover the . But once TPL is low enough for the event signal to fire, EndPointer is already in the middle of nowhere.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12128</commentid>
    <comment_count>1</comment_count>
      <attachid>506</attachid>
    <who name="">kun.qin</who>
    <bug_when>2020-04-08 01:39:35 +0000</bug_when>
    <thetext>Created attachment 506
Proposed fix for page fault</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12152</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 15:52:41 +0000</bug_when>
    <thetext>I&apos;ll take ownership since I&apos;m already working on similar changes in ReportStatusCodeRouterRuntimeDxe - https://bugzilla.tianocore.org/show_bug.cgi?id=1969.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12182</commentid>
    <comment_count>3</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-04-10 03:16:31 +0000</bug_when>
    <thetext>Updated patch is published here:
https://github.com/microsoft/mu_basecore/commit/b6e05d90348fc3605a6e1e9aab9fd8b5a16c60ee</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12187</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-10 16:50:44 +0000</bug_when>
    <thetext>V1 patch on the mailing list - https://edk2.groups.io/g/devel/message/57241</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12238</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 14:26:29 +0000</bug_when>
    <thetext>Fork with R-bs: https://github.com/makubacki/edk2/tree/bz2665_rsc_add_failsafeendpointer</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12260</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-20 23:54:19 +0000</bug_when>
    <thetext>Submitted to edk2 in commit https://github.com/tianocore/edk2/commit/1a258c7703e587f85885099dd57236cb45af82f8</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>506</attachid>
            <date>2020-04-08 01:39:35 +0000</date>
            <delta_ts>2020-04-08 01:39:35 +0000</delta_ts>
            <desc>Proposed fix for page fault</desc>
            <filename>0001-Revert-the-end-pointer-if-we-cannot-report-this-one.patch</filename>
            <type>text/plain</type>
            <size>1912</size>
            <attacher>kun.qin</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2090</bug_id>
          
          <creation_ts>2019-08-16 04:26:43 +0000</creation_ts>
          <short_desc>BaseTools: Incremental build genmake failed on python3</short_desc>
          <delta_ts>2019-08-22 23:29:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9038</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-16 04:26:43 +0000</bug_when>
    <thetext>The second time of build genmake failed on python3.

File &quot;D:\edk2\BaseTools\Source\Python\AutoGen\ModuleAutoGen.py&quot;, line 1905, in CanSkip
    if SrcTimeStamp &gt; DstTimeStamp:
TypeError: &apos;&gt;&apos; not supported between instances of &apos;NoneType&apos; and &apos;int&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9039</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-16 04:27:15 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9202</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-22 23:29:50 +0000</bug_when>
    <thetext>fixed at 5f7bb39117167018729dc938452c65ea7572eb1f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2448</bug_id>
          
          <creation_ts>2020-01-06 21:23:44 +0000</creation_ts>
          <short_desc>Basetools: Enable build option group setting</short_desc>
          <delta_ts>2022-02-11 10:19:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10793</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-01-06 21:23:44 +0000</bug_when>
    <thetext>Edk2 build tool supports to set module build option for single module in INF file or &lt;buildoptions&gt; subsection of a components in DSC file; it also supports to set build option globally based on Arch, Code Base(Edk or EdkII) or Edk2ModuleType.

But in real project, there is a requirement that build to need to support customized build option group. A group of modules need a set of build option while another group of modules need a different set of build option. Build tool does not support this usage model now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10794</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-01-06 21:24:01 +0000</bug_when>
    <thetext>take the ownership.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18337</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-11 10:19:52 +0000</bug_when>
    <thetext>This requirement is not valid anymore.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2921</bug_id>
          
          <creation_ts>2020-08-23 01:03:11 +0000</creation_ts>
          <short_desc>Include Red Hat certificate in default OvmfPkg DB certs</short_desc>
          <delta_ts>2020-08-24 11:51:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Daniel Black">daniel</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13497</commentid>
    <comment_count>0</comment_count>
    <who name="Daniel Black">daniel</who>
    <bug_when>2020-08-23 01:03:11 +0000</bug_when>
    <thetext>Installing a secure boot OVMF of a windows guest with virtio hits the problem tha the viostor.sys or vioscsi.sys driver isn&apos;t signed in the secure boot database.

https://bugzilla.redhat.com/show_bug.cgi?id=1844726

If I understand it correctly (and I&apos;m far from sure that I do), adding the correct Red Hat certs that they use to sign their virtio-win sys drivers would prevent the secure boot guest failure of Windows (and quite literally hours of trying to understand secure book enough to try to enroll the right cert in the right database).

code ref: https://github.com/tianocore/edk2/blob/master/OvmfPkg/EnrollDefaultKeys/EnrollDefaultKeys.c#L610

The same Red Hat certificate is the same for all virtio-win drivers:

openssl x509 -inform der  -in ~dan/Downloads/cert.cer -text --noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            5d:10:cb:18:eb:3a:79:00:87:83:ab:74:77:f9:d3:19
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = US, O = Symantec Corporation, OU = Symantec Trust Network, CN = Symantec Class 3 SHA256 Code Signing CA - G2
        Validity
            Not Before: Nov 27 00:00:00 2018 GMT
            Not After : Jan 25 23:59:59 2022 GMT
        Subject: C = US, ST = North Carolina, L = Raleigh, O = &quot;Red Hat, Inc.&quot;, CN = &quot;Red Hat, Inc.&quot;
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: (2048 bit)
                Modulus:
                    00:de:ad:2d:68:8b:5d:95:e7:60:34:5c:eb:2f:6a:
                    79:0a:e7:37:9f:6a:3f:9c:6e:b6:34:38:00:76:58:
                    fe:6f:44:68:d3:11:cc:a3:8e:36:06:a5:5b:a6:13:
                    41:1a:d6:e9:e9:88:b1:ca:a5:c1:e4:73:bc:39:eb:
                    17:88:6f:fe:ef:d2:7c:8a:b5:e9:72:ea:75:58:8b:
                    d2:d6:63:98:55:98:86:28:db:b4:53:f5:72:31:19:
                    35:e4:b8:ee:6d:98:9d:08:13:a5:3b:0a:99:9e:40:
                    eb:af:e8:8a:ac:e0:f2:88:0d:6f:1c:62:95:43:a8:
                    8d:0f:ab:8f:38:70:b2:f7:c9:02:09:da:1a:13:8c:
                    79:1f:35:71:ad:98:b2:0c:c5:5f:76:30:7f:b8:b2:
                    e8:0f:c2:b6:31:c8:3a:1e:fc:c1:cc:11:d0:c6:89:
                    5b:a4:2f:3a:13:9a:0a:55:61:1c:6b:6a:f3:22:14:
                    03:b9:3f:de:4f:2c:08:2e:31:23:17:22:d9:4a:85:
                    39:7a:29:c3:41:14:bd:df:f1:9d:ce:5b:cb:c9:bb:
                    2d:87:43:3b:4e:3c:b0:e3:34:94:04:ad:d9:de:0f:
                    2a:78:8e:bd:49:14:fc:ba:6a:88:54:98:a3:fe:b6:
                    ef:68:fe:29:10:43:60:25:b6:22:03:c2:2b:91:d6:
                    95:93
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Basic Constraints: 
                CA:FALSE
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 CRL Distribution Points: 

                Full Name:
                  URI:http://rb.symcb.com/rb.crl

            X509v3 Certificate Policies: 
                Policy: 2.23.140.1.4.1
                  CPS: https://d.symcb.com/cps
                  User Notice:
                    Explicit Text: https://d.symcb.com/rpa

            X509v3 Extended Key Usage: 
                Code Signing
            Authority Information Access: 
                OCSP - URI:http://rb.symcd.com
                CA Issuers - URI:http://rb.symcb.com/rb.crt

            X509v3 Authority Key Identifier: 
                keyid:D4:C0:06:22:49:EB:39:4B:DD:93:E2:5C:A1:B8:47:76:09:72:03:58

            X509v3 Subject Key Identifier: 
                6F:46:65:44:26:18:05:37:7E:51:30:BE:43:41:D0:38:71:DB:7C:69
    Signature Algorithm: sha256WithRSAEncryption
         57:df:a0:11:52:88:43:3a:17:55:e7:64:f7:8a:66:fe:61:15:
         5d:96:6e:24:f5:e5:f8:9a:d1:3f:67:ed:ef:4e:e4:06:78:22:
         a0:44:5a:35:d3:0f:78:81:0a:d1:09:10:90:75:f7:b2:46:c2:
         47:4a:f6:05:6e:07:46:7f:e3:5b:a0:ec:57:d8:c0:d0:17:d0:
         11:1b:0e:83:98:87:b3:56:f3:49:0a:79:e0:bf:5f:54:2e:8d:
         55:ac:30:c7:f6:dc:92:69:f9:9b:d4:f1:63:91:8c:1c:97:c6:
         bf:8b:63:16:42:a3:3f:7a:b9:de:cb:d6:87:14:71:a2:5a:21:
         9f:5a:ef:06:59:cd:5f:9a:76:5d:1b:42:e3:97:32:d6:9f:ec:
         ef:60:a9:91:13:7d:2f:fc:76:fc:ad:18:57:a4:40:14:52:f6:
         81:e2:d3:68:f1:a8:50:0a:5d:34:9c:40:6c:af:bb:4d:28:b6:
         9b:7f:d3:9f:c5:72:e9:de:88:8c:45:fc:d6:2c:11:b8:4d:ab:
         c7:e6:05:92:e4:c8:17:06:23:fa:5b:18:9d:7f:dd:ef:32:43:
         37:91:a6:11:46:3f:b7:de:51:dd:72:16:a9:c8:ab:56:ce:0b:
         e1:1d:af:24:8c:30:41:e6:83:97:62:17:34:f3:3a:9b:7c:ca:
         5f:f6:f3:66

I wish I could say I have a work around however at least the 20200201stable fc32 packaged versions of edk2-ovmffor OVMF_CODE.secboot.fd fails to save the Secure Boot Mode = Custom Mode and also in DB Options -&gt; Enroll Signature Using file x509 DER formatted Redhat.der (is a signature GUID required? where&apos;s this from?) fais to save (Looking at the delete signature list theres theres a 00000...0000 GUID entry)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13504</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-24 11:42:40 +0000</bug_when>
    <thetext>Hi Daniel,

given that this is vendor-specific, I suggest that we continue discussing it in RHBZ#1844726 (as you linked it in comment#0). I&apos;m going to close the upstream tracker as INVALID for now, as EnrollDefaultKeys.efi would likely spiral out-of-hand if we attempted to include certificates from numerous vendors in it.

What EnrollDefaultKeys is supposed to do at the moment is to mirror physical platforms. On a physical platform, you generally find the Microsoft certificates enrolled:
- &quot;Microsoft Corporation KEK CA 2011&quot; in KEK,
- &quot;Microsoft Windows Production PCA 2011&quot; in db,
- &quot;Microsoft Corporation UEFI CA 2011&quot; in db,
- the platform vendor&apos;s certificate in PK and KEK,
- some forbidden hashes in dbx.

EnrollDefaultKeys.efi lets you specify the platform vendor&apos;s certificate (for PK and KEK) in the &quot;OEM Strings&quot; (type 11) SMBIOS table. The RHEL package already uses a RH-specific certificate for that -- on the other hand, that one probably doesn&apos;t make Windows accept the *unsigned* virtio-win drivers. (And I&apos;m not sure about the Fedora status.)

Either way, this is an OS-driver signing question. Let&apos;s continue in the RHBZ, and I&apos;ll ask some colleagues that work on virtio-win to look at it.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13505</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-24 11:51:17 +0000</bug_when>
    <thetext>(Update to comment 1: for comments on the &quot;dbx&quot; put in place by EnrollDefaultKeys.efi, see the &quot;mSha256OfDevNull&quot; variable in &quot;OvmfPkg/EnrollDefaultKeys/AuthData.c&quot;. There is no intent to distribute and/or keep refreshing &lt;http://www.uefi.org/revocationlistfile&gt; within OvmfPkg.)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2330</bug_id>
          
          <creation_ts>2019-11-06 18:16:28 +0000</creation_ts>
          <short_desc>Replace CMOS magic addresses with macros</short_desc>
          <delta_ts>2019-12-11 20:41:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>SimicsOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10348</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-06 18:16:28 +0000</bug_when>
    <thetext>Code that calls CmosRead* () and CmosWrite* () in SimicsOpenBoardPkg currently have hard coded addresses that should be replaced by macros with names that represent the data found at that address.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10349</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-06 18:16:57 +0000</bug_when>
    <thetext>Assigned to Prince</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10682</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-12-11 20:41:59 +0000</bug_when>
    <thetext>Patch pushed in the following commit - https://github.com/tianocore/edk2-platforms/commit/c682c58b3a29aaeb63302d3eae08fc9aed61e914.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2798</bug_id>
          
          <creation_ts>2020-06-12 17:07:45 +0000</creation_ts>
          <short_desc>Add BaseCpuLibNull instance of CpuLib to MdePkg</short_desc>
          <delta_ts>2020-07-31 18:06:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12857</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 17:07:45 +0000</bug_when>
    <thetext>The MdePkg contains a full implementation of CpuLib.  The services in CpuLib use privileged instructions that generate exceptions when executed in host based unit test application.

A Null implementation of this library that does not use any privileged instructions would allow host based unit tests for components that use CpuLib to execute without exceptions.

A BaseCpuLibNull instance can also be used as a template for new CpuLib instances.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12858</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 17:08:04 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13263</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:01:33 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13266</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:06:49 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/5d29e2d020e8b0ad70f3f766c38429c3bfad0d41
https://github.com/tianocore/edk2/commit/9a6c4ac68e3d9590cf17914e07e929a1f0e7c190
https://github.com/tianocore/edk2/commit/133891b712a9ceda0fbdb9649b559773e4cdc6db
https://github.com/tianocore/edk2/commit/75e92c13541672a3af349067a040b9dda3d4452d
https://github.com/tianocore/edk2/commit/26824851b041d9e81921ec7ef97220d2a2576157
https://github.com/tianocore/edk2/commit/425df6923ec00df32bb6f20d1440a2e920f0e1e7
https://github.com/tianocore/edk2/commit/77e42ca4dfbf51918d677f32ab64bb99dd07cc40
https://github.com/tianocore/edk2/commit/813c2b15255406f587484ffcedfd01ca9ab5d056
https://github.com/tianocore/edk2/commit/f08715947ad52ee4fd67358660860ea63a532e15
https://github.com/tianocore/edk2/commit/35f9d7c41b380d67953dabc5994a65e32baa7d39
https://github.com/tianocore/edk2/commit/a0a49eb87c5819a76a0a5fea81d2b51ffdfcb3aa
https://github.com/tianocore/edk2/commit/540fd45f755f1646e019099c90c9f59286604228
https://github.com/tianocore/edk2/commit/d3c9e40abcc839f59d56b7fca7787647533d96fe
https://github.com/tianocore/edk2/commit/0a81a98e900118857395b101f413c1c17b66c073
https://github.com/tianocore/edk2/commit/9af8a299cec10656b757ae30a71c1310260d3c31
https://github.com/tianocore/edk2/commit/5b86bbf891677882a9d097f87cd0128562c12c43

Pull Request:

https://github.com/tianocore/edk2/pull/779</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2222</bug_id>
          
          <creation_ts>2019-09-26 23:50:05 +0000</creation_ts>
          <short_desc>CpuTimerLib cannot be built for AARCH64, but is included in the standard Components.</short_desc>
          <delta_ts>2019-10-17 21:54:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Bret Barkelew">bret.barkelew</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9840</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-09-26 23:50:05 +0000</bug_when>
    <thetext>UefiCpuPkg.dsc includes the three instances of CpuTimerLib, but CpuTimerLib.c references AsmCpuid() and AsmReadTsc(), which are not defined in BaseLib.h for platforms other than IA32 and X64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10082</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:44:12 +0000</bug_when>
    <thetext>Please confirm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10093</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-17 21:52:38 +0000</bug_when>
    <thetext>This is not an issue. UefiCpuPkg.dsc supports IA32|X64 arch. So, it is fine to list those modules in common section.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10094</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-17 21:54:26 +0000</bug_when>
    <thetext>This is not an issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2683</bug_id>
          
          <creation_ts>2020-04-21 21:28:27 +0000</creation_ts>
          <short_desc>ASSERT when AP try to use CpuMpData</short_desc>
          <delta_ts>2020-05-10 22:48:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12268</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-04-21 21:28:27 +0000</bug_when>
    <thetext>Current code base in one platform, system boot will report an assert, detail log like below:
ShadowMicrocodePatchByPcd: 0x1 microcode patches will be loaded into memory, with size 0x16400.
ShadowMicrocodePatchWorker: Required microcode patches have been loaded at 0x96E1F000, with size 0x16400.
Updated microcode signature [0x000000BD] does not match                 loaded microcode signature [0x000000BE]
Register PPI Notify: 8F9D4825-797D-48FC-8471-845025792EF6
WakeUpAP Trigged!
CpuMpPei: 5-Level Paging = 0
AP 1 CpuData-&gt;StartupApSignal Changed!
AP 2 CpuData-&gt;StartupApSignal Changed!
AP 3 CpuData-&gt;StartupApSignal Changed!
Aps began run!
Ap return Idt base = 0x98776004, CpuMpData = 0x98776114

PEI_ASSERT!: g:\Edk2\UefiCpuPkg\Library\MpInitLib\MpLib.c (440): ((BOOLEAN)(0==1))
Aps began run!
Aps began run!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12269</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-04-21 21:28:57 +0000</bug_when>
    <thetext>confirmed this is a real issue and follow up to fix it now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12278</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-04-22 09:26:10 +0000</bug_when>
    <thetext>Patches under review now.

https://edk2.groups.io/g/devel/topic/patch_v2_1_2/73191434?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,73191434


https://edk2.groups.io/g/devel/topic/patch_v2_2_2/73191564?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,73191564</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12470</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-05-10 22:48:01 +0000</bug_when>
    <thetext>SHA-1: f07fb43b2d3f92a15d6992205b72ba5df0e74fe2

* UefiCpuPkg/MpInitLib: Avoid ApInitReconfig in PEI.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2683

In PEI phase, AP already been waked up through ApInitConfig,
so it can directly wake up it through change wakup buffer
instead of use ApInitReconfig flag. It can save some time.

Change code to only use ApInitReconfig flag in DXE phase
which must need to update the wake up buffer.

Regression-tested-by: Laszlo Ersek &lt;lersek@redhat.com&gt;
Cc: Chandana Kumar &lt;chandana.c.kumar@intel.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;


SHA-1: 052aa07da46d96d7069d12f28fc31deb68a6d75e

* UefiCpuPkg/MpInitLib: Restore IDT context for APs.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2683

This patch fixes an assertion because AP can&apos;t find the CpuMpData.
When AP is waken up through Init-Sipi-Sipi, AP&apos;s IDT should
be restored to pre-allocated buffer so AP can get the CpuMpData
through the IDT base address.
Current code already has logic to handle this when CpuMpData-&gt;
InitFlag is ApInitConfig but misses the logic
when CpuMpData-&gt;InitFlag is ApInitReconfig.
This patch fixes this gap.

Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Regression-tested-by: Laszlo Ersek &lt;lersek@redhat.com&gt;
Cc: Chandana Kumar &lt;chandana.c.kumar@intel.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2579</bug_id>
          
          <creation_ts>2020-03-07 11:10:22 +0000</creation_ts>
          <short_desc>Variable runtime cache overwritten during initializaiton</short_desc>
          <delta_ts>2020-03-07 11:21:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11611</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-03-07 11:10:22 +0000</bug_when>
    <thetext>(https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Universal/Variable/RuntimeDxe/VariableSmmRuntimeDxe.c#L178)

  //
  // Allocate NV Storage Cache and initialize it to all 1&apos;s (like an erased FV)
  //
  *VariableCacheBuffer =  (VARIABLE_STORE_HEADER *) AllocateRuntimePages (
                            EFI_SIZE_TO_PAGES (*TotalVariableCacheSize)
                            );
  if (*VariableCacheBuffer == NULL) {
    return EFI_OUT_OF_RESOURCES;
  }
  VariableCacheStorePtr = *VariableCacheBuffer;
  SetMem32 ((VOID *) VariableCacheStorePtr, *TotalVariableCacheSize, (UINT32) 0xFFFFFFFF);

&quot;*TotalVariableCacheSize&quot; is bytes number of allocated cache buffer. SetMem32 writes memory in the unit of UINT32 (4-byte). The Length parameter of SetMem32 should be number of UINT32. The correct way is passing &quot;*TotalVariableCacheSize/sizeof (UINT32)&quot;. Otherwise the buffer will be overwritten.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11612</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-03-07 11:21:42 +0000</bug_when>
    <thetext>Close it. Not a defect. It&apos;s caused by wrong implementation of SetMem32, which should divide the Length by 4.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2580</bug_id>
          
          <creation_ts>2020-03-08 10:46:32 +0000</creation_ts>
          <short_desc>OvmfPkg build failed on windows with MSVC</short_desc>
          <delta_ts>2020-03-11 22:14:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11613</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-08 10:46:32 +0000</bug_when>
    <thetext>This is a regression issue caused by patch set 6ae2d31ca2 ... ced77332ca

The error message is like below.

Generating code
d:\edk2\OvmfPkg\QemuKernelLoaderFsDxe\QemuKernelLoaderFsDxe.c(130): error C2220: warning treated as error - no &apos;object&apos; file generated
d:\edk2\OvmfPkg\QemuKernelLoaderFsDxe\QemuKernelLoaderFsDxe.c(130): warning C4132: &apos;mEfiFileProtocolTemplate&apos;: const object should be initialized TcpTimer.c Finished generating code NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\cl.exe&quot;&apos; : return code &apos;0x2&apos;
Stop.


build.py...
 : error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\edk2\Build\OvmfIa32\DEBUG_VS2017\IA32\OvmfPkg\QemuKernelLoaderFsDxe\QemuKernelLoaderFsDxe]


build.py...
 : error F002: Failed to build module
        d:\edk2\OvmfPkg\QemuKernelLoaderFsDxe\QemuKernelLoaderFsDxe.inf [IA32, VS2017, DEBUG]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11635</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-09 19:23:10 +0000</bug_when>
    <thetext>This is a bug in the compiler.

It has been worked around in the following edk2 commit:

40d572f70dc1 (&quot;OvmfPkg/QemuKernelLoaderFsDxe: drop tentative const object definition&quot;, 2020-03-08)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11642</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-10 04:47:44 +0000</bug_when>
    <thetext>Update to the 40d572f70dc1 (&quot;OvmfPkg/QemuKernelLoaderFsDxe: drop tentative const object definition&quot;, 2020-03-08)

Ovmf still build failed on windows with VS2017. The error message like below:

Building ... d:\edk2maintain\edk2\MdeModulePkg\Universal\Metronome\Metronome.inf [IA32]
d:\edk2maintain\edk2\OvmfPkg\LinuxInitrdDynamicShellCommand\LinuxInitrdDynamicShellCommand.c(199): error C2220: warning treated as error - no &apos;object&apos; file generated
d:\edk2maintain\edk2\OvmfPkg\LinuxInitrdDynamicShellCommand\LinuxInitrdDynamicShellCommand.c(199): warning C4244: &apos;=&apos;: conversion from &apos;UINT64&apos; to &apos;UINTN&apos;, possible loss of data</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11643</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-10 04:48:45 +0000</bug_when>
    <thetext>A patch for the second build failure.

https://edk2.groups.io/g/devel/message/55708</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11668</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-11 22:14:26 +0000</bug_when>
    <thetext>fixed at

https://github.com/tianocore/edk2/commit/5a8bc527b32b4ff7e2f8879c5d71ecd9dfdc61b4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2939</bug_id>
          
          <creation_ts>2020-08-28 00:55:19 +0000</creation_ts>
          <short_desc>add library FspMeasurementLib and TcgEventLogRecordLib to OpenBoardPkg</short_desc>
          <delta_ts>2020-08-30 21:25:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>CometlakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="qi1.zhang@intel.com">qi1.zhang</reporter>
          <assigned_to name="qi1.zhang@intel.com">qi1.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13559</commentid>
    <comment_count>0</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-28 00:55:19 +0000</bug_when>
    <thetext>add library FspMeasurementLib and TcgEventLogRecordLib to OpenBoardPkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13560</commentid>
    <comment_count>1</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-28 00:56:44 +0000</bug_when>
    <thetext>add these library to fix OpenBoard build errors</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13564</commentid>
    <comment_count>2</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-28 02:17:39 +0000</bug_when>
    <thetext>These build errors fix also deppend on one edk2 fix: https://bugzilla.tianocore.org/show_bug.cgi?id=2940</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13566</commentid>
    <comment_count>3</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-28 03:32:28 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/64732</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13573</commentid>
    <comment_count>4</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-30 21:25:05 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/64748</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2353</bug_id>
          
          <creation_ts>2019-11-19 04:05:12 +0000</creation_ts>
          <short_desc>Enhance the binary cache to leverage compiler to output the dependency files</short_desc>
          <delta_ts>2022-02-10 22:15:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10467</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-11-19 04:05:12 +0000</bug_when>
    <thetext>A previous patch set (https://edk2.groups.io/g/devel/message/50360) enhances Incremental Build, which is to use c preprocessor and trim tool to generate dependency files for the source file. Need to enhance the binary cache to follow the new method of dependency files generation through compiler, and redesign the binary cache intermediate meta files format.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10468</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-11-19 04:05:47 +0000</bug_when>
    <thetext>Confirm and take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18330</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2022-02-10 22:15:13 +0000</bug_when>
    <thetext>No need to fix it</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2247</bug_id>
          
          <creation_ts>2019-10-07 14:06:46 +0000</creation_ts>
          <short_desc>Assign unique token space GUID to KabylakeOpenBoardPkg PCDs</short_desc>
          <delta_ts>2019-10-16 14:45:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9928</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-07 14:06:46 +0000</bug_when>
    <thetext>PCDs declared in the KabylakeOpenBoardPkg currently use the GUID gBoardModuleTokenSpaceGuid.

The same name is used in other board packages (updates are tracked in dedicated BZ) and a package has been added called BoardModulePkg so this name is now misleading.

The name should be changed to a unique GUID value and name for the package such as gKabylakeOpenBoardPkgTokenSpaceGuid.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9951</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:24:20 +0000</bug_when>
    <thetext>Patch list sent for code review on the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10040</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 14:45:26 +0000</bug_when>
    <thetext>Submitted in commit 1f8d7ba3b0417c7e74adaf6ff06b62775cd8ba38.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2602</bug_id>
          
          <creation_ts>2020-03-16 23:30:36 +0000</creation_ts>
          <short_desc>FmpDxe::EvaluateImageDependencies can reference an uninitialized pointer</short_desc>
          <delta_ts>2020-05-06 00:42:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>wei6.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guomin.jiang</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11705</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-16 23:30:36 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/blob/master/FmpDevicePkg/FmpDxe/Dependency.c#L582

Since the allocated memory is never zeroed if this path occurs the pointer value will not be NULL and in later iterations it will access invalid memory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11706</commentid>
    <comment_count>1</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-16 23:56:59 +0000</bug_when>
    <thetext>proposed fix
https://github.com/microsoft/mu_tiano_plus/commit/1375310b7dd2f7e26afda6374c40c351b6412156</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11711</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-17 21:58:52 +0000</bug_when>
    <thetext>Wei, please fix this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11771</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-23 12:12:42 +0000</bug_when>
    <thetext>Kun already updated the mailing list but i will paste his response here.  
Yes it was seen on a device. Hope this helps.



I did encounter a GP fault because of this issue:


If Line 582 is triggered when the first Fmp-&gt;GetImageInfo failed, this specific mFmpImageInfoBuf[Index] will remain to be uninitialized value (0xFAFAFAFAFAF in my case). Later on when it comes to line 632, it will pass the null pointer check and try to dereference it, which leads to GP fault. Please let me know if you need further clarification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12413</commentid>
    <comment_count>4</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-05-06 00:42:45 +0000</bug_when>
    <thetext>Fixed in https://github.com/tianocore/edk2/commit/55d6e39f72ba2003ef59aac91af34e96a09060db</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2963</bug_id>
          
          <creation_ts>2020-09-15 01:46:29 +0000</creation_ts>
          <short_desc>remove TPM related ppi from Depex for Fsp wrapper PEIM driver</short_desc>
          <delta_ts>2020-10-12 22:51:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="qi1.zhang@intel.com">qi1.zhang</reporter>
          <assigned_to name="qi1.zhang@intel.com">qi1.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>heng.luo</cc>
    
    <cc>jiewen.yao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2WrapperPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13673</commentid>
    <comment_count>0</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-09-15 01:46:29 +0000</bug_when>
    <thetext>Some open board are TPM disabled. So the boot may hang because the PPI can&apos;t arrive.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13674</commentid>
    <comment_count>1</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-09-15 01:47:33 +0000</bug_when>
    <thetext>code change</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13690</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-09-16 05:32:50 +0000</bug_when>
    <thetext>The pull request was

   https://github.com/tianocore/edk2/pull/930
 
and the commit range is a62fb4229d14..7bcb021a6d54.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13946</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-10-12 22:51:28 +0000</bug_when>
    <thetext>*** Bug 2960 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2379</bug_id>
          
          <creation_ts>2019-11-24 05:24:25 +0000</creation_ts>
          <short_desc>ShellPkg/edit: typo &quot;Lines Wrote&quot;</short_desc>
          <delta_ts>2019-12-05 20:22:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>xypron.glpk</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EdkShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10533</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-11-24 05:24:25 +0000</bug_when>
    <thetext>When a file is saved in the editor a status message L&quot;%d Lines Wrote&quot; is displayed.

This should be changed to L&quot;%d Lines Written&quot;.

The hexedit command has the same typo.

ShellPkg/Library/UefiShellDebug1CommandsLib/Edit/FileBuffer.c:1611:  Str = CatSPrint (NULL, L&quot;%d Lines Wrote&quot;, NumLines);#
ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit/FileImage.c:371:  Str = CatSPrint(NULL, L&quot;%d Lines Wrote&quot;, NumLines);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10534</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-11-24 05:36:14 +0000</bug_when>
    <thetext>Patch provided:

[edk2] [PATCH] ShellPkg/edit: typo &quot;%d Lines Wrote&quot; 
https://edk2.groups.io/g/devel/message/51206</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10621</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-12-05 20:22:54 +0000</bug_when>
    <thetext>fixed at 2926498f01e6d8b77dff933e3e9c87eb56c709b4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2848</bug_id>
          
          <creation_ts>2020-07-13 14:04:41 +0000</creation_ts>
          <short_desc>&quot;OpensslLib.inf&quot; and &quot;OpensslLibCrypto.inf&quot; use different RISCV64_CC_FLAGS</short_desc>
          <delta_ts>2020-08-20 01:13:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13093</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-13 14:04:41 +0000</bug_when>
    <thetext>As of commit f45e3a4afa65 (and dating back to commit 9025a014f9d9a), RISCV64_CC_FLAGS in &quot;OpensslLib.inf&quot; has one extra flag in addition to RISCV64_CC_FLAGS in &quot;OpensslLibCrypto.inf&quot;: &quot;-Wno-error=format&quot;.

These INF files should be easily diffable against each other. The only
differences should be (a) in the generated file list (the
&quot;OpensslLib.inf&quot; file should list a bunch of &quot;ssl/...&quot; pathnames, while
the other INF file should list none), and (b) in the BASE_NAME /
MODULE_UNI_FILE / FILE_GUID defines.

For restoring consistency between both INF files, please either remove &quot;-Wno-error=format&quot; from &quot;OpensslLib.inf&quot;, or else please add it to &quot;OpensslLibCrypto.inf&quot;.

FWIW, RISCV64_CC_FLAGS in both INF files already contains &quot;-Wno-format&quot;, therefore &quot;-Wno-error=format&quot; seems redundant in &quot;OpensslLib.inf&quot; in isolation.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13094</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-13 14:06:32 +0000</bug_when>
    <thetext>Mailing list thread:

https://edk2.groups.io/g/devel/message/62411
http://mid.mail-archive.com/4ec64acb-bd72-40c2-c994-38835cdc0a3e@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13469</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2020-08-20 01:13:23 +0000</bug_when>
    <thetext>At edk2 commit ID be01087e07809d20aa2db27b37029c324c824407</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2265</bug_id>
          
          <creation_ts>2019-10-09 20:06:23 +0000</creation_ts>
          <short_desc>Fix spelling errors in SecurityPkg</short_desc>
          <delta_ts>2019-10-23 13:25:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9990</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-09 20:06:23 +0000</bug_when>
    <thetext>Fix spelling errors in SecurityPkg.  

Lots of errors.  Not all of them resolved but many of them in this commit. 
https://github.com/spbrogan/edk2/commit/76b3ec287480af537cdfb068dbb52bc7135ba79d

Will update with more links to commits if i resolve the remaining ones.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10059</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-10-17 20:21:46 +0000</bug_when>
    <thetext>All these spelling errors are related to the CI tests that Sean is enabling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10113</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-18 14:44:25 +0000</bug_when>
    <thetext>I see a few lines in the referenced commit with the following contents:

      //spell-checker:disable-line

Are these required to pass spell check, or are these left over from fixing
spelling errors?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10114</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-18 15:04:24 +0000</bug_when>
    <thetext>Patch email for review

https://edk2.groups.io/g/devel/message/49242</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10118</commentid>
    <comment_count>4</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-10-18 16:05:41 +0000</bug_when>
    <thetext>Those are needed.  
There are three way that I propose we handle spelling issues or false positives.

https://github.com/spbrogan/edk2/blob/prtest/master/ci/Plugin/SpellCheck/Readme.md</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10185</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 20:13:50 +0000</bug_when>
    <thetext>Patch V3 for review

https://edk2.groups.io/g/devel/message/49375
https://edk2.groups.io/g/devel/message/49374
https://edk2.groups.io/g/devel/message/49376

Split out DEBUG() macro change of EFI_D_INFO -&gt; DEBUG_INFO into it own patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10186</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-22 20:17:37 +0000</bug_when>
    <thetext>(In reply to Sean Brogan from comment #4)
&gt; Those are needed.  
&gt; There are three way that I propose we handle spelling issues or false
&gt; positives.
&gt; 
&gt; https://github.com/spbrogan/edk2/blob/prtest/master/ci/Plugin/SpellCheck/
&gt; Readme.md

Sean,

I recommend we do not use the In-Line File.

I prefer the &quot;ExtendWords&quot;: [] method for these use cases.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10195</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-23 13:25:13 +0000</bug_when>
    <thetext>pushed as 95d2883647..d6b926e76e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2731</bug_id>
          
          <creation_ts>2020-05-20 21:50:31 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-20 22:17:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2736</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12580</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 21:50:31 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12609</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:17:08 +0000</bug_when>
    <thetext>Oops. Too much automation.

*** This bug has been marked as a duplicate of bug 2736 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2157</bug_id>
          
          <creation_ts>2019-09-05 05:42:54 +0000</creation_ts>
          <short_desc>Basetool: The default variable value would be generated incorrect</short_desc>
          <delta_ts>2019-09-09 21:56:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9473</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-05 05:42:54 +0000</bug_when>
    <thetext>if the VPD gEfiMdeModulePkgTokenSpaceGuid.PcdNvStoreDefaultValueBuffer is used in dsc file, build tool will generate efi variable default value and save it into VPD gEfiMdeModulePkgTokenSpaceGuid.PcdNvStoreDefaultValueBuffer.

Hii Pcd links to a efi variable. The Variable default value is evaluated by related Hii Pcds setting. If multiple Hii Pcds links to one variable, and the offset overlap, the later Hii Pcds setting should be effective. There is a tool bug that is if the Pcds are in different dsc file which are included
into the platform dsc file, build tool does not get the Pcds relative position correctly. That means build tool does not know which Pcd is the later one. As the result, the variable default value will be incorrect. 

This bug would only happen when VPD gEfiMdeModulePkgTokenSpaceGuid.PcdNvStoreDefaultValueBuffer is used and the Pcds, which link to one variable, are in different included dsc file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9504</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-08 22:32:37 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9505</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-08 22:33:05 +0000</bug_when>
    <thetext>patch review at
https://edk2.groups.io/g/devel/message/46890</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9560</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-09 21:56:31 +0000</bug_when>
    <thetext>commit at cbe7543ebbf9bb3e8531a2235ff205713b569605</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2626</bug_id>
          
          <creation_ts>2020-03-23 23:55:32 +0000</creation_ts>
          <short_desc>Typo in Python development Process and coding standards draft spec</short_desc>
          <delta_ts>2020-12-09 13:59:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kondal Purma">kondal.r.purma</reporter>
          <assigned_to name="Kondal Purma">kondal.r.purma</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>kondal.r.purma</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II Python Development Process and Coding Standards Spec</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11791</commentid>
    <comment_count>0</comment_count>
    <who name="Kondal Purma">kondal.r.purma</who>
    <bug_when>2020-03-23 23:55:32 +0000</bug_when>
    <thetext>In Python development Process and coding standards draft spec Chapter2, there is a typo.
&quot;Flake8&quot; instead of &quot;flake8&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11829</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-24 22:32:18 +0000</bug_when>
    <thetext>Kondal, please follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14537</commentid>
    <comment_count>2</comment_count>
    <who name="Kondal Purma">kondal.r.purma</who>
    <bug_when>2020-12-09 13:46:19 +0000</bug_when>
    <thetext>Hi Liming,
This bug was fixed in draft version and spec initial version released. We can close this bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14538</commentid>
    <comment_count>3</comment_count>
    <who name="Kondal Purma">kondal.r.purma</who>
    <bug_when>2020-12-09 13:59:55 +0000</bug_when>
    <thetext>commit  and its link for fix.
1da01d6ed1d85a56e0fc9480c03861376c9eafa6
and 
https://github.com/tianocore-docs/edk2-PythonDevelopmentProcessSpecification/commit/1da01d6ed1d85a56e0fc9480c03861376c9eafa6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2067</bug_id>
          
          <creation_ts>2019-08-08 08:49:03 +0000</creation_ts>
          <short_desc>BaseTools/Scripts: Add GetUtcDateTime script.</short_desc>
          <delta_ts>2019-08-15 03:53:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8864</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-08-08 08:49:03 +0000</bug_when>
    <thetext>A script that can return UTC date and time in ascii format which is convenient for patching build time information in any binary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8865</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-08-08 08:49:22 +0000</bug_when>
    <thetext>working on the code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9011</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-08-15 03:53:26 +0000</bug_when>
    <thetext>commit caa7d3a896f6aa82de3d741aa5236a62ba91ac48 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Thu Aug 8 20:43:46 2019 +0800

    BaseTools/Scripts: Add GetUtcDateTime script.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2067

    A script that can return UTC date and time in ascii
    format which is convenient for patching build time
    information in any binary.

    Cc: Bob Feng &lt;bob.c.feng@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Cc: Leif Lindholm &lt;leif.lindholm@linaro.org&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Bob Feng &lt;bob.c.feng@intel.com&gt;
    Acked-by: Leif Lindholm &lt;leif.lindholm@linaro.org&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2204</bug_id>
          
          <creation_ts>2019-09-19 03:09:21 +0000</creation_ts>
          <short_desc>AdvancedFeaturePkg build failure with GCC tool chain</short_desc>
          <delta_ts>2019-09-30 17:04:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9720</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-09-19 03:09:21 +0000</bug_when>
    <thetext>GCC48/GCC49:
/work/690948657a9640e6/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/IpmiFru/IpmiFru.c:18:1: error: conflicting types for ‘InitializeFru’
  InitializeFru (
  ^
 In file included from &lt;command-line&gt;:0:0:
/work/690948657a9640e6/Build/AdvancedFeaturePkg/DEBUG_GCC48/X64/AdvancedFeaturePkg/Ipmi/IpmiFru/IpmiFru/DEBUG/AutoGen.h:71:1: note: previous declaration of ‘InitializeFru’ was here
  InitializeFru (
  ^
 &quot;gcc&quot; -o/work/690948657a9640e6/Build/AdvancedFeaturePkg/DEBUG_GCC48/X64/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt/DEBUG/OsWdt.dll -nostdlib -Wl,-n,-q,--gc-sections -z common-page-size=0x20 -Wl,--entry,_ModuleEntryPoint -u _ModuleEntryPoint -Wl,-Map,/work/690948657a9640e6/Build/AdvancedFeaturePkg/DEBUG_GCC48/X64/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt/DEBUG/OsWdt.map,--whole-archive -Wl,-melf_x86_64,--oformat=elf64-x86-64,-pie -Wl,--start-group,@/work/690948657a9640e6/Build/AdvancedFeaturePkg/DEBUG_GCC48/X64/AdvancedFeaturePkg/Ipmi/OsWdt/OsWdt/OUTPUT/static_library_files.lst,--end-group -g -fshort-wchar -fno-builtin -fno-strict-aliasing -Wall -Werror -Wno-array-bounds -ffunction-sections -fdata-sections -include AutoGen.h -fno-common -DSTRING_ARRAY_NAME=OsWdtStrings -m64 -fno-stack-protector &quot;-DEFIAPI=__attribute__((ms_abi))&quot; -maccumulate-outgoing-args -mno-red-zone -Wno-address -mcmodel=small -fpie -fno-asynchronous-unwind-tables -Wno-address -Os -D DISABLE_NEW_DEPRECATED_INTERFACES -Wl,--defsym=PECOFF_HEADER_SIZE=0x228 -Wl,--script=/work/690948657a9640e6/Edk2/BaseTools/Scripts/GccBase.lds
 GNUmakefile:330: recipe for target &apos;/work/690948657a9640e6/Build/AdvancedFeaturePkg/DEBUG_GCC48/X64/AdvancedFeaturePkg/Ipmi/IpmiFru/IpmiFru/OUTPUT/IpmiFru.obj&apos; failed
 make: *** [/work/690948657a9640e6/Build/AdvancedFeaturePkg/DEBUG_GCC48/X64/AdvancedFeaturePkg/Ipmi/IpmiFru/IpmiFru/OUTPUT/IpmiFru.obj] Error 1
 
 
 build.py...
  : error 7000: Failed to execute command
 	make tbuild [/work/690948657a9640e6/Build/AdvancedFeaturePkg/DEBUG_GCC48/X64/AdvancedFeaturePkg/Ipmi/IpmiFru/IpmiFru]
 
 
 build.py...
  : error 7000: Failed to execute command
 	make tbuild [/work/690948657a9640e6/Build/AdvancedFeaturePkg/DEBUG_GCC48/X64/AdvancedFeaturePkg/Ipmi/Frb/FrbPei]
 
 
 build.py...
  : error F002: Failed to build module
 	/work/690948657a9640e6/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/IpmiFru/IpmiFru.inf [X64, GCC48, DEBUG]
 
 - Failed -

GCC54:
/work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcElog/BmcElog.c:174:1: error: conflicting types for ‘InitializeBmcElogLayer’
  InitializeBmcElogLayer (
  ^
 In file included from &lt;command-line&gt;:0:0:
/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/BmcElog/BmcElog/DEBUG/AutoGen.h:42:1: note: previous declaration of ‘InitializeBmcElogLayer’ was here
  InitializeBmcElogLayer (
  ^
 make: *** [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/BmcElog/BmcElog/OUTPUT/BmcElog.obj] Error 1
 GNUmakefile:320: recipe for target &apos;/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/BmcElog/BmcElog/OUTPUT/BmcElog.obj&apos; failed
 
 
 build.py...
  : error 7000: Failed to execute command
 	make tbuild [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/BmcElog/BmcElog]
 
 
 build.py...
  : error 7000: Failed to execute command
 	make tbuild [/work/9351e829c0118101/Build/AdvancedFeaturePkg/DEBUG_GCC5/X64/AdvancedFeaturePkg/Ipmi/Frb/FrbPei]
 
 
 build.py...
  : error F002: Failed to build module
 	/work/9351e829c0118101/Edk2Platforms/Platform/Intel/AdvancedFeaturePkg/Ipmi/BmcElog/BmcElog.inf [X64, GCC5, DEBUG]
 
 - Failed -</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9727</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-19 14:25:41 +0000</bug_when>
    <thetext>Fixed. Patch sent for review - https://edk2.groups.io/g/devel/message/47619</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9893</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-30 17:04:10 +0000</bug_when>
    <thetext>Patch committed - https://github.com/tianocore/edk2-platforms/commit/2910a1814df05169ac0297e3f581f8968dcfcbd9.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2666</bug_id>
          
          <creation_ts>2020-04-08 01:37:33 +0000</creation_ts>
          <short_desc>Assert in FwuPartitionVersionFromFlash (FreePool on a NULL pointer)</short_desc>
          <delta_ts>2020-09-25 05:16:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sing Wee">sing.wee</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nobody</cc>
    
    <cc>wei6.xu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12127</commentid>
    <comment_count>0</comment_count>
    <who name="Sing Wee">sing.wee</who>
    <bug_when>2020-04-08 01:37:33 +0000</bug_when>
    <thetext>Intel BIOS Team has recommended we file this bug as a Bugzilla.


Working (no assert) with: https://github.com/tianocore/edk2/tree/edk2-stable201903/FmpDevicePkg/FmpDxe

Asserting with: https://github.com/tianocore/edk2/tree/edk2-stable201908/FmpDevicePkg/FmpDxe”



We have a library from Intel that includes IntelMeFwUpdateLib that has a .slib file as a pre-built version.  We have tried multiple versions of CSME.


We iterate through all the FMPs and when calling GetFwFlashVersion on the IntelMeFmpDeviceLib.h we call into the slib function FwuPartitionVersionFromFlash. We never return from this call.


14:57:35.635 : FmpDxe(Intel Management Engine): Lock GUID: 02CE967A-DD7E-4FFC-9EE7-810CF0470880
14:57:35.636 : FmpDxe(Intel Management Engine): FmpDeviceLib registration returned EFI_UNSUPPORTED.  Installing single FMP instance.
14:57:35.637 : FmpDeviceGetImageTypeIdGuidPtr - PartitionId 52505446
14:57:35.637 : FmpDxe(Intel Management Engine): Variable 9B69B1B2-4ECD-4249-9E49-4D0DDF62949F FmpVersion
14:57:35.638 : FmpDxe(Intel Management Engine): Variable 9B69B1B2-4ECD-4249-9E49-4D0DDF62949F FmpLsv
14:57:35.638 : FmpDxe(Intel Management Engine): Variable 9B69B1B2-4ECD-4249-9E49-4D0DDF62949F LastAttemptStatus
14:57:35.639 : FmpDxe(Intel Management Engine): Variable 9B69B1B2-4ECD-4249-9E49-4D0DDF62949F LastAttemptVersion
14:57:35.640 : FmpDxe(Intel Management Engine): Variable 9B69B1B2-4ECD-4249-9E49-4D0DDF62949F FmpState
14:57:35.640 : FmpDxe(Intel Management Engine): Failed to get the controller state.  Status = Not Found
14:57:35.641 : FmpDxe(Intel Management Engine): Create controller state
14:57:35.641 : FvbProtocolWrite: Lba: 0x0 Offset: 0xD2BC NumBytes: 0x3C, Buffer: 0x90F06018
14:57:35.642 : FvbProtocolWrite: Lba: 0x0 Offset: 0xD2BE NumBytes: 0x1, Buffer: 0x90F0601A
14:57:35.642 : FvbProtocolWrite: Lba: 0x0 Offset: 0xD2F8 NumBytes: 0x26, Buffer: 0x90F06054
14:57:35.643 : FvbProtocolWrite: Lba: 0x0 Offset: 0xD2BE NumBytes: 0x1, Buffer: 0x90F0601A
14:57:35.645 : FmpDeviceGetVersion - PartitionId 52505446
14:57:35.645 : GetFwFlashVersion - enter
14:57:35.646 : GetFwFlashVersion - partitionID 52505446
14:57:35.647 : GetFwFlashVersion - calling into FwuPartitionVersionFromFlash
14:57:35.647 :
14:57:35.647 : ASSERT_EFI_ERROR (Status = Invalid Parameter)
14:57:35.648 : ASSERT [FmpDxe] c:\git\devices\MU_BASECORE\MdePkg\Library\UefiMemoryAllocationLib\MemoryAllocationLib.c(813): !EFI_ERROR (Status)
14:57:35.649 : !!!! X64 Exception Type - 03(#BP - Breakpoint)  CPU Apic ID - 00000000 !!!!
14:57:35.649 : RIP  - 0000000076C0FF51, CS  - 0000000000000038, RFLAGS - 0000000000000206
14:57:35.650 : RAX  - 0000000000000083, RCX - 000000007A5744C0, RDX - 000000007BE99808
14:57:35.651 : RBX  - 000000000000001C, RSP - 000000007A574900, RBP - 000000007A574B00
14:57:35.651 : RSI  - 0000000000000001, RDI - 000000007A574BD8
14:57:35.652 : R8   - 000000007A5743B0, R9  - 0000000000000020, R10 - 000000007A57453A
14:57:35.653 : R11  - 000000007A5748C0, R12 - 0000000000000000, R13 - 000000007A5903D0
14:57:35.653 : R14  - 000000007A574B50, R15 - 0000000052505446
14:57:35.654 : DS   - 0000000000000030, ES  - 0000000000000030, FS  - 0000000000000030
14:57:35.654 : GS   - 0000000000000030, SS  - 0000000000000030
14:57:35.655 : CR0  - 0000000080010013, CR2 - 0000000000000000, CR3 - 000000007A001000
14:57:35.655 : CR4  - 0000000000000668, CR8 - 0000000000000000
14:57:35.656 : DR0  - 0000000000000000, DR1 - 0000000000000000, DR2 - 0000000000000000
14:57:35.656 : DR3  - 0000000000000000, DR6 - 00000000FFFF0FF0, DR7 - 0000000000000400
14:57:35.657 : GDTR - 000000007BF3AE40 0000000000000057, LDTR - 0000000000000000
14:57:35.657 : IDTR - 0000000077DDE000 0000000000000FFF,   TR - 0000000000000048
14:57:35.657 : FXSAVE_STATE - 000000007A574560
14:57:35.658 : !!!! Find image based on IP(0x76C0FF51) FmpDxe.pdb (ImageBase=0000000076C0C000, EntryPoint=0000000076C0C4DC) !!!!


They belief is that there is a FreePool on a null pointer inside the code.  Since Intel stopped taking Tianocore updates, they did not see the issue in their testing.  It was only when we ran with an updated Tianocore that it exposed the issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12216</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-14 21:43:28 +0000</bug_when>
    <thetext>Wei: please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12221</commentid>
    <comment_count>2</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2020-04-15 22:00:09 +0000</bug_when>
    <thetext>Liming and Sing,

Do you know who owns the slid of IntelMeFwUpdateLib?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12222</commentid>
    <comment_count>3</comment_count>
    <who name="Sing Wee">sing.wee</who>
    <bug_when>2020-04-16 00:21:46 +0000</bug_when>
    <thetext>Kevin Manalo (@Intel) is my usual customer CSME contact, and he is usually able to find the actual owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12341</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-28 22:03:24 +0000</bug_when>
    <thetext>Close this one, because it doesn&apos;t show the error in open source Edk2 FmpDxe driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13790</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-25 05:16:05 +0000</bug_when>
    <thetext>Close it now.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2091</bug_id>
          
          <creation_ts>2019-08-16 05:46:56 +0000</creation_ts>
          <short_desc>Python run fail if env variable PYTHON_HOME is not set</short_desc>
          <delta_ts>2019-08-19 22:49:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ching Jen, Cheng">ching.jenx.cheng</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9040</commentid>
    <comment_count>0</comment_count>
    <who name="Ching Jen, Cheng">ching.jenx.cheng</who>
    <bug_when>2019-08-16 05:46:56 +0000</bug_when>
    <thetext>In
Platform\Intel\MinPlatformPkg\Tools\Fsp\RebaseFspBinBaseAddress.py
It will run another python code.
But if the environment variable &quot;PYTHON_HOME&quot; is not exist and we didn&apos;t add any python&apos;s path to &quot;PATH&quot;.
It will cause error because python command not found.

the error message as below:
&apos;python&apos; is not recognized as an internal or external command,
operable program or batch file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9080</commentid>
    <comment_count>1</comment_count>
    <who name="Ching Jen, Cheng">ching.jenx.cheng</who>
    <bug_when>2019-08-19 22:49:34 +0000</bug_when>
    <thetext>This issue has been fixed in commit 05e9ca3abfcf89795d90e31415bac28a9f350299</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2922</bug_id>
          
          <creation_ts>2020-08-23 04:27:59 +0000</creation_ts>
          <short_desc>SMM_REQUIRE=TRUE triggers kvm internal error</short_desc>
          <delta_ts>2020-08-26 21:10:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Daniel Black">daniel</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13498</commentid>
    <comment_count>0</comment_count>
    <who name="Daniel Black">daniel</who>
    <bug_when>2020-08-23 04:27:59 +0000</bug_when>
    <thetext>Master build at commit 5a6d764e1d073d28e8f398289ccb5592bf9a72ba

SECURE_BOOT_ENABLE also set to TRUE, however its not until SMM_REQUIRE=TRUE is enabled that this fault occurs.

qemu/kernel versions are significantly ahead of the prequisites.

the libvirt defination of the vm is fairly basic so anything on in the qemu command line is the default

  &lt;os&gt;
    &lt;type arch=&apos;x86_64&apos; machine=&apos;pc-q35-4.2&apos;&gt;hvm&lt;/type&gt;
    &lt;loader readonly=&apos;yes&apos; secure=&apos;yes&apos; type=&apos;pflash&apos;&gt;/usr/share/edk2/ovmf/OVMF_CODE_5a6d764e1d073d28e8f398289ccb5592bf9a72ba.fd&lt;/loader&gt;
    &lt;nvram&gt;/var/lib/libvirt/qemu/nvram/win2k19_VARS.fd&lt;/nvram&gt;
    &lt;bootmenu enable=&apos;yes&apos;/&gt;
  &lt;/os&gt;

from  /var/log/libvirt/qemu/win2k19.log

2020-08-23 08:20:41.304+0000: starting up libvirt version: 6.1.0, package: 4.fc32 (Fedora Project, 2020-06-02-17:50:10, ), qemu version: 4.2.1qemu-4.2.1-1.fc32, kernel: 5.7.15-200.fc32.x86_64, hostname: grit.fritz.box
LC_ALL=C \
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/var/lib/snapd/snap/bin \
HOME=/var/lib/libvirt/qemu/domain-44-win2k19 \
XDG_DATA_HOME=/var/lib/libvirt/qemu/domain-44-win2k19/.local/share \
XDG_CACHE_HOME=/var/lib/libvirt/qemu/domain-44-win2k19/.cache \
XDG_CONFIG_HOME=/var/lib/libvirt/qemu/domain-44-win2k19/.config \
QEMU_AUDIO_DRV=spice \
/usr/bin/qemu-system-x86_64 \
-name guest=win2k19,debug-threads=on \
-S \
-object secret,id=masterKey0,format=raw,file=/var/lib/libvirt/qemu/domain-44-win2k19/master-key.aes \
-blockdev &apos;{&quot;driver&quot;:&quot;file&quot;,&quot;filename&quot;:&quot;/usr/share/edk2/ovmf/OVMF_CODE_5a6d764e1d073d28e8f398289ccb5592bf9a72ba.fd&quot;,&quot;node-name&quot;:&quot;libvirt-pflash0-storage&quot;,&quot;auto-read-only&quot;:true,&quot;discard&quot;:&quot;unmap&quot;}&apos; \
-blockdev &apos;{&quot;node-name&quot;:&quot;libvirt-pflash0-format&quot;,&quot;read-only&quot;:true,&quot;driver&quot;:&quot;raw&quot;,&quot;file&quot;:&quot;libvirt-pflash0-storage&quot;}&apos; \
-blockdev &apos;{&quot;driver&quot;:&quot;file&quot;,&quot;filename&quot;:&quot;/var/lib/libvirt/qemu/nvram/win2k19_VARS.fd&quot;,&quot;node-name&quot;:&quot;libvirt-pflash1-storage&quot;,&quot;auto-read-only&quot;:true,&quot;discard&quot;:&quot;unmap&quot;}&apos; \
-blockdev &apos;{&quot;node-name&quot;:&quot;libvirt-pflash1-format&quot;,&quot;read-only&quot;:false,&quot;driver&quot;:&quot;raw&quot;,&quot;file&quot;:&quot;libvirt-pflash1-storage&quot;}&apos; \
-machine pc-q35-4.2,accel=kvm,usb=off,vmport=off,smm=on,dump-guest-core=off,pflash0=libvirt-pflash0-format,pflash1=libvirt-pflash1-format \
-cpu host,hv-time,hv-relaxed,hv-vapic,hv-spinlocks=0x1fff \
-global driver=cfi.pflash01,property=secure,value=on \
-m 24384 \
-overcommit mem-lock=off \
-smp 4,maxcpus=8,sockets=8,cores=1,threads=1 \
-uuid 186978af-b622-4571-af3d-183401b21e91 \
-no-user-config \
-nodefaults \
-chardev socket,id=charmonitor,fd=35,server,nowait \
-mon chardev=charmonitor,id=monitor,mode=control \
-rtc base=localtime,driftfix=slew \
-global kvm-pit.lost_tick_policy=delay \
-no-hpet \
-no-shutdown \
-global ICH9-LPC.disable_s3=1 \
-global ICH9-LPC.disable_s4=1 \
-boot menu=on,strict=on \
-device pcie-root-port,port=0x10,chassis=1,id=pci.1,bus=pcie.0,multifunction=on,addr=0x2 \
-device pcie-root-port,port=0x11,chassis=2,id=pci.2,bus=pcie.0,addr=0x2.0x1 \
-device pcie-root-port,port=0x12,chassis=3,id=pci.3,bus=pcie.0,addr=0x2.0x2 \
-device pcie-root-port,port=0x13,chassis=4,id=pci.4,bus=pcie.0,addr=0x2.0x3 \
-device pcie-root-port,port=0x14,chassis=5,id=pci.5,bus=pcie.0,addr=0x2.0x4 \
-device pcie-root-port,port=0x15,chassis=6,id=pci.6,bus=pcie.0,addr=0x2.0x5 \
-device pcie-root-port,port=0x16,chassis=7,id=pci.7,bus=pcie.0,addr=0x2.0x6 \
-device pcie-root-port,port=0x17,chassis=8,id=pci.8,bus=pcie.0,addr=0x2.0x7 \
-device pcie-root-port,port=0x18,chassis=9,id=pci.9,bus=pcie.0,multifunction=on,addr=0x3 \
-device pcie-root-port,port=0x19,chassis=10,id=pci.10,bus=pcie.0,addr=0x3.0x1 \
-device pcie-root-port,port=0x1a,chassis=11,id=pci.11,bus=pcie.0,addr=0x3.0x2 \
-device pcie-root-port,port=0x1b,chassis=12,id=pci.12,bus=pcie.0,addr=0x3.0x3 \
-device qemu-xhci,p2=15,p3=15,id=usb,bus=pci.2,addr=0x0 \
-blockdev &apos;{&quot;driver&quot;:&quot;host_device&quot;,&quot;filename&quot;:&quot;/dev/kvm_pool/Windows&quot;,&quot;aio&quot;:&quot;native&quot;,&quot;node-name&quot;:&quot;libvirt-3-storage&quot;,&quot;cache&quot;:{&quot;direct&quot;:true,&quot;no-flush&quot;:false},&quot;auto-read-only&quot;:true,&quot;discard&quot;:&quot;unmap&quot;}&apos; \
-blockdev &apos;{&quot;node-name&quot;:&quot;libvirt-3-format&quot;,&quot;read-only&quot;:false,&quot;cache&quot;:{&quot;direct&quot;:true,&quot;no-flush&quot;:false},&quot;driver&quot;:&quot;raw&quot;,&quot;file&quot;:&quot;libvirt-3-storage&quot;}&apos; \
-device virtio-blk-pci,scsi=off,bus=pci.3,addr=0x0,drive=libvirt-3-format,id=virtio-disk2,bootindex=1,write-cache=on \
-blockdev &apos;{&quot;driver&quot;:&quot;file&quot;,&quot;filename&quot;:&quot;/var/lib/libvirt/images/Win10_2004_English_x64.iso&quot;,&quot;node-name&quot;:&quot;libvirt-2-storage&quot;,&quot;auto-read-only&quot;:true,&quot;discard&quot;:&quot;unmap&quot;}&apos; \
-blockdev &apos;{&quot;node-name&quot;:&quot;libvirt-2-format&quot;,&quot;read-only&quot;:true,&quot;driver&quot;:&quot;raw&quot;,&quot;file&quot;:&quot;libvirt-2-storage&quot;}&apos; \
-device ide-cd,bus=ide.0,drive=libvirt-2-format,id=sata0-0-0 \
-blockdev &apos;{&quot;driver&quot;:&quot;file&quot;,&quot;filename&quot;:&quot;/usr/share/virtio-win/virtio-win-0.1.171.iso&quot;,&quot;node-name&quot;:&quot;libvirt-1-storage&quot;,&quot;auto-read-only&quot;:true,&quot;discard&quot;:&quot;unmap&quot;}&apos; \
-blockdev &apos;{&quot;node-name&quot;:&quot;libvirt-1-format&quot;,&quot;read-only&quot;:true,&quot;driver&quot;:&quot;raw&quot;,&quot;file&quot;:&quot;libvirt-1-storage&quot;}&apos; \
-device ide-cd,bus=ide.1,drive=libvirt-1-format,id=sata0-0-1 \
-netdev tap,fd=39,id=hostnet0,vhost=on,vhostfd=40 \
-device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:9c:60:21,bus=pci.1,addr=0x0 \
-chardev pty,id=charserial0 \
-device isa-serial,chardev=charserial0,id=serial0 \
-device virtio-tablet-pci,id=input2,bus=pci.5,addr=0x0 \
-device virtio-keyboard-pci,id=input3,bus=pci.6,addr=0x0 \
-spice port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on \
-device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=16,max_outputs=1,bus=pcie.0,addr=0x1 \
-device ich9-intel-hda,id=sound0,bus=pcie.0,addr=0x1b \
-device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 \
-device vfio-pci,host=0000:01:00.0,id=hostdev0,bus=pci.7,addr=0x0,rombar=1,romfile=/var/lib/libvirt/vbios/nvidia-bios-extracted.rom \
-device vfio-pci,host=0000:01:00.1,id=hostdev1,bus=pci.9,addr=0x0 \
-device vfio-pci,host=0000:01:00.2,id=hostdev2,bus=pci.10,addr=0x0 \
-device vfio-pci,host=0000:01:00.3,id=hostdev3,bus=pci.11,addr=0x0 \
-device virtio-balloon-pci,id=balloon0,bus=pci.4,addr=0x0 \
-sandbox on,obsolete=deny,elevateprivileges=deny,spawn=deny,resourcecontrol=deny \
-device vhost-vsock-pci,id=vsock0,guest-cid=3,vhostfd=30,bus=pci.8,multifunction=on,addr=0x0 \
-msg timestamp=on
2020-08-23 08:20:41.304+0000: Domain id=44 is tainted: host-cpu
char device redirected to /dev/pts/2 (label charserial0)
KVM internal error. Suberror: 1
emulation failure
RAX=0000000000000000 RBX=ffffffffffffffff RCX=0000000000000000 RDX=0000000000000000
RSI=000000007e8ed018 RDI=000000007efa30b8 RBP=000000007ef8cea8 RSP=000000007ef8ce38
R8 =0000000000000000 R9 =0000000003041001 R10=0000000000000036 R11=000000000000000c
R12=000000007e8ea018 R13=0000000000000001 R14=000000008000f880 R15=000000008000f844
RIP=00000000000a0000 RFL=00010246 [---Z-P-] CPL=0 II=0 A20=1 SMM=0 HLT=0
ES =0030 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
CS =0038 0000000000000000 ffffffff 00a09b00 DPL=0 CS64 [-RA]
SS =0030 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
DS =0030 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
FS =0030 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
GS =0030 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
LDT=0000 0000000000000000 0000ffff 00008200 DPL=0 LDT
TR =0000 0000000000000000 0000ffff 00008b00 DPL=0 TSS64-busy
GDT=     000000007e9eea98 00000047
IDT=     000000007e602018 00000fff
CR0=80010033 CR2=0000000000000000 CR3=000000007ec01000 CR4=00000668
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d00
Code=00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 &lt;00&gt; 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13506</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-24 12:44:09 +0000</bug_when>
    <thetext>Hello Daniel,

(In reply to Daniel Black from comment #0)
&gt; Master build at commit 5a6d764e1d073d28e8f398289ccb5592bf9a72ba

You did not specify the build command line, but I&apos;m going to assume that you passed none of the following macros on the build command line:
- FD_SIZE_1MB (aka FD_SIZE_IN_KB=1024)
- FD_SIZE_2MB (aka FD_SIZE_IN_KB=2048)

If my assumption is correct, then your upstream edk2 build produced a firmware binary and a variable store template that are, in combination, 4MB in size. This is fine, in itself -- the 4MB unified size is the default for upstream (and for RHEL8).

&gt;   &lt;os&gt;
&gt;     &lt;type arch=&apos;x86_64&apos; machine=&apos;pc-q35-4.2&apos;&gt;hvm&lt;/type&gt;
&gt;     &lt;loader readonly=&apos;yes&apos; secure=&apos;yes&apos;
&gt; type=&apos;pflash&apos;&gt;/usr/share/edk2/ovmf/
&gt; OVMF_CODE_5a6d764e1d073d28e8f398289ccb5592bf9a72ba.fd&lt;/loader&gt;
&gt;     &lt;nvram&gt;/var/lib/libvirt/qemu/nvram/win2k19_VARS.fd&lt;/nvram&gt;
&gt;     &lt;bootmenu enable=&apos;yes&apos;/&gt;
&gt;   &lt;/os&gt;

Here, I&apos;m going to assume that the filename &quot;win2k19_VARS.fd&quot; stands for the same file that you describe in &lt;https://bugzilla.redhat.com/show_bug.cgi?id=1871403#c0&gt;:

&gt; 2. cp /usr/share/edk2/ovmf/OVMF_VARS.secboot.fd 
&gt; /var/lib/libvirt/qemu/nvram/win2k19_VARS.fd

with the important fact noted that &quot;/usr/share/edk2/ovmf/OVMF_VARS.secboot.fd&quot; comes from a Fedora 32 system.

If this assumption of mine is also correct, then the behavior that you&apos;re experiencing is expected.

That&apos;s because Fedora builds OVMF with FD_SIZE_2MB. And a firmware binary built with FD_SIZE_2MB is *incompatible* with a FD_SIZE_4MB variable store file.

The firmware binary hard-codes addresses of, and offsets into, the varstore chip. If you mismatch both files, then you&apos;ll see various crashes, such as executing data as code etc.

Such mismatches are not dynamically detectable; hence the user-unfriendly behavior. It is mitigated by libvirtd&apos;s firmware auto-selection feature, which is based on the firmware metadata (descriptor) files. (See the *.json files under /usr/share/qemu/firmware/ in the Fedora edk2-ovmf package, for example.) Each descriptor describes a &quot;firmware use case&quot;, and each descriptor associates a firmware binary with a compatible variable store template.

Please try one of the following:

- build upstream OVMF like you did (that is, 4MB unified size). Use the resultant OVMF_CODE.fd file the same. However, create the domain&apos;s varstore file  &quot;win2k19_VARS.fd&quot; *also* from the upstream build output, namely OVMF_VARS.fd.

- alternatively, stick with your current &quot;win2k19_VARS.fd&quot; file (coming from Fedora), and build the firmware binary (using the upstream tree) with the same switch as seen in the Fedora spec file: &quot;-D FD_SIZE_2MB&quot;.

If you are still experiencing problems, please reopen the ticket. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13543</commentid>
    <comment_count>2</comment_count>
    <who name="Daniel Black">daniel</who>
    <bug_when>2020-08-26 21:10:19 +0000</bug_when>
    <thetext>Thanks for the explanation. This helps a lot. I&apos;d never looked at the way the firmware auto selection worked (or why it existed), so this explanation fills that gap.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2799</bug_id>
          
          <creation_ts>2020-06-12 17:09:51 +0000</creation_ts>
          <short_desc>Add BaseCacheMaintenanceLibNull instance of CacheMaintenanceLib to MdePkg</short_desc>
          <delta_ts>2020-07-31 18:07:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12859</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 17:09:51 +0000</bug_when>
    <thetext>The MdePkg contains a full implementation of CacheMaintenanceLib.  The services in CacheMaintenanceLib use privileged instructions that generate exceptions when executed in host based unit test application.

A Null implementation of this library that does not use any privileged instructions would allow host based unit tests for components that use CacheMaintenanceLib to execute without exceptions.

A BaseCacheMaintenanceLibNull instance can also be used as a template for new CacheMaintenanceLib instances.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12860</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 17:10:42 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13262</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:01:16 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13267</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:07:37 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/5d29e2d020e8b0ad70f3f766c38429c3bfad0d41
https://github.com/tianocore/edk2/commit/9a6c4ac68e3d9590cf17914e07e929a1f0e7c190
https://github.com/tianocore/edk2/commit/133891b712a9ceda0fbdb9649b559773e4cdc6db
https://github.com/tianocore/edk2/commit/75e92c13541672a3af349067a040b9dda3d4452d
https://github.com/tianocore/edk2/commit/26824851b041d9e81921ec7ef97220d2a2576157
https://github.com/tianocore/edk2/commit/425df6923ec00df32bb6f20d1440a2e920f0e1e7
https://github.com/tianocore/edk2/commit/77e42ca4dfbf51918d677f32ab64bb99dd07cc40
https://github.com/tianocore/edk2/commit/813c2b15255406f587484ffcedfd01ca9ab5d056
https://github.com/tianocore/edk2/commit/f08715947ad52ee4fd67358660860ea63a532e15
https://github.com/tianocore/edk2/commit/35f9d7c41b380d67953dabc5994a65e32baa7d39
https://github.com/tianocore/edk2/commit/a0a49eb87c5819a76a0a5fea81d2b51ffdfcb3aa
https://github.com/tianocore/edk2/commit/540fd45f755f1646e019099c90c9f59286604228
https://github.com/tianocore/edk2/commit/d3c9e40abcc839f59d56b7fca7787647533d96fe
https://github.com/tianocore/edk2/commit/0a81a98e900118857395b101f413c1c17b66c073
https://github.com/tianocore/edk2/commit/9af8a299cec10656b757ae30a71c1310260d3c31
https://github.com/tianocore/edk2/commit/5b86bbf891677882a9d097f87cd0128562c12c43

Pull Request:

https://github.com/tianocore/edk2/pull/779</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2684</bug_id>
          
          <creation_ts>2020-04-22 04:31:56 +0000</creation_ts>
          <short_desc>Remove temporary build workaround for Features\Intel\AdvancedFeaturePkg</short_desc>
          <delta_ts>2020-04-23 03:08:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2688</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12271</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-04-22 04:31:56 +0000</bug_when>
    <thetext>This temporary build workaround was added to allow the advanced feature PCDs to be used in conditional statements in DSC files even if they are not referenced in INF files.

Support to allow a FeaturePCD to be used in a conditional statement without being referenced in an INF file has been requested in the following Bugzilla item:
https://bugzilla.tianocore.org/show_bug.cgi?id=2270

Now this feature request had been implemented, so the workaround can be removed and use new way to support building advanced feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12272</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-04-22 04:37:10 +0000</bug_when>
    <thetext>I will submit patch for this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12293</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-04-23 03:08:57 +0000</bug_when>
    <thetext>mark duplicate of https://bugzilla.tianocore.org/show_bug.cgi?id=2688

*** This bug has been marked as a duplicate of bug 2688 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2112</bug_id>
          
          <creation_ts>2019-08-22 03:36:31 +0000</creation_ts>
          <short_desc>BaseTools will report &quot;unresolved external symbol _ModuleEntryPoint&quot; while the actual reason is a missing lib instance in DSC.</short_desc>
          <delta_ts>2019-08-22 15:11:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2099</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Shao, Ming">ming.shao</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9150</commentid>
    <comment_count>0</comment_count>
    <who name="Shao, Ming">ming.shao</who>
    <bug_when>2019-08-22 03:36:31 +0000</bug_when>
    <thetext>For a LibClass that is used by a module, such as a UEFI_APPLICATION, if it is not listed in the [LibraryClasses] section of the DSC file, below *misleading* build error will show.


LINK : error LNK2001: unresolved external symbol _ModuleEntryPoint


Actually, this symbol comes from the UefiApplicationEntryPoint and it is indeed listed in the DSC file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9166</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-22 15:11:51 +0000</bug_when>
    <thetext>Please see bug 2099.

*** This bug has been marked as a duplicate of bug 2099 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2582</bug_id>
          
          <creation_ts>2020-03-08 23:55:26 +0000</creation_ts>
          <short_desc>OvmfPkg/X86QemuLoadImageLib: UINTN to UINT32, possible loss of data compiler warning in VS2015/VS2019</short_desc>
          <delta_ts>2020-06-03 18:24:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2636</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11625</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-03-08 23:55:26 +0000</bug_when>
    <thetext>VS2019 compiler warning:
\OvmfPkg\Library\X86QemuLoadImageLib\X86QemuLoadImageLib.c(387): warning C4244: &apos;=&apos;: conversion from &apos;UINTN&apos; to &apos;UINT32&apos;, possible loss of data

The local variable CommandLineSize in QemuLoadKernelImage () is declared a UINTN type variable. It is initialized with a UINT32 value and later another UINT32 variable (KernelLoadedImage-&gt;LoadOptionsSize) is set to the value of CommandLineSize.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11626</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-03-08 23:56:14 +0000</bug_when>
    <thetext>Since this is a relatively simple change and it blocked my building on VS2019, I&apos;ll take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11636</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-09 19:28:24 +0000</bug_when>
    <thetext>Looks like a build regression from commit 7c47d89003a6 (&quot;OvmfPkg: implement QEMU loader library for X86 with legacy fallback&quot;, 2020-03-05).

Thank you, Michael, for taking it! Hopefully, once bug 2570 is addressed, we&apos;re going to catch such issues before pushing the patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11653</commentid>
    <comment_count>3</comment_count>
      <attachid>477</attachid>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-10 17:22:11 +0000</bug_when>
    <thetext>Created attachment 477
patch_v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11654</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-10 17:22:23 +0000</bug_when>
    <thetext>I&apos;m just waiting on an internal SMTP access approval and then I&apos;ll send the attached patch to the list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11674</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-12 03:48:35 +0000</bug_when>
    <thetext>Meanwhile Liming posted an alternative patch, which I happen to like more than the one in comment 3:

[edk2-devel] [patch v2] OvmfPkg: Fix build failure with VS2015 tool chain
http://mid.mail-archive.com/20200312043008.1389-1-liming.gao@intel.com
https://edk2.groups.io/g/devel/message/55782</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11677</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-12 04:00:01 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #5)
&gt; Meanwhile Liming posted an alternative patch, which I happen to like more
&gt; than the one in comment 3:
&gt; 
&gt; [edk2-devel] [patch v2] OvmfPkg: Fix build failure with VS2015 tool chain
&gt; http://mid.mail-archive.com/20200312043008.1389-1-liming.gao@intel.com
&gt; https://edk2.groups.io/g/devel/message/55782

The value is initialized with a UINT32 and this assignment is to a UINT32 so it seems natural for the variable data type to be a UINT32 to avoid an explicit cast. But I don&apos;t have a strong opinion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11678</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-12 04:19:08 +0000</bug_when>
    <thetext>That&apos;s a valid point, from the &quot;data flow&quot; perspective. However,

- the CommandLineSize variable expresses a size, which we generally represent with UINTN (see also the return type of the sizeof operator),
- the variable is passed to AllocatePool() and QemuFwCfgReadBytes(), which both take UINTNs.

Both patches are correct, I just feel the one linked in comment 5 is (a) more natural and (b) easier to review (it doesn&apos;t require the investigation of all uses of the variable in the function, unlike the type change).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11679</commentid>
    <comment_count>8</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-12 04:23:00 +0000</bug_when>
    <thetext>I am OK for this change. Michael: when will you send the patch? I just want to resolve this issue quickly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11680</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-12 04:25:34 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #8)
&gt; I am OK for this change. Michael: when will you send the patch? I just want
&gt; to resolve this issue quickly.

I also took the factors Laszlo mentioned into account and chose to favor the spirit of the compiler warning and not explicitly cast. But it sounds like we&apos;re in agreement that either can work.

Liming, please take ownership of the BZ and proceed with your patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11688</commentid>
    <comment_count>10</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-12 21:03:29 +0000</bug_when>
    <thetext>Sure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11704</commentid>
    <comment_count>11</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-16 20:32:17 +0000</bug_when>
    <thetext>Fix @a2c3bf1f2f991614ac97ddcf4b31742e4366c3a5</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>477</attachid>
            <date>2020-03-10 17:22:11 +0000</date>
            <delta_ts>2020-03-10 17:22:11 +0000</delta_ts>
            <desc>patch_v1</desc>
            <filename>0001-OvmfPkg-X86QemuLoadImageLib-Fix-compiler-warning.patch</filename>
            <type>text/plain</type>
            <size>2304</size>
            <attacher name="Michael Kubacki">michael.kubacki</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2479</bug_id>
          
          <creation_ts>2020-01-19 22:07:32 +0000</creation_ts>
          <short_desc>Add EFI Device Authentication Signature Database</short_desc>
          <delta_ts>2024-04-29 22:40:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Code First</product>
          <component>Specification Update</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.a.rothman</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>UEFI Specification</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10956</commentid>
    <comment_count>0</comment_count>
      <attachid>450</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2020-01-19 22:07:32 +0000</bug_when>
    <thetext>Created attachment 450
ECR - Device Authentication Signature Database

This tracker is to add EFI Device Authentication Signature Database, to support SPDM device authentication in the UEFI BIOS.

[ECR]
See the attachment for the detail proposal.

[POC]
The EFI Device Authentication Signature Database definition is at https://github.com/jyao1/edk2/blob/DeviceSecurity/DeviceSecurityPkg/Include/Guid/DeviceAuthentication.h

The whole device authentication POC is at https://github.com/jyao1/edk2/tree/DeviceSecurity/DeviceSecurityPkg.

The SpdmDeviceSecurityDxe is a generic consumer of EFI Device Authentication Signature Database to verify the device via the GET_DIGESTS/GET_CERTIFICATE/CHALLENGE message and response. (https://github.com/jyao1/edk2/tree/DeviceSecurity/DeviceSecurityPkg/SpdmDeviceSecurityDxe)

The Unit Test is at https://github.com/jyao1/edk2/tree/DeviceSecurity/DeviceSecurityPkg/Test.
where the SpdmStub is faked SPDM device to send SPDM message back. The SpdmStub driver need return the public certificate chain and sign the challenge with the private key. (https://github.com/jyao1/edk2/tree/DeviceSecurity/DeviceSecurityPkg/Test/SpdmStub).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11246</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-02-13 15:24:18 +0000</bug_when>
    <thetext>Can we consider alternate names for the package? Right now it seems a little ambiguous. Would &quot;EndpointDeviceSecurityPkg&quot; work? Or &quot;ExternalDev...&quot;?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11251</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-02-13 19:22:48 +0000</bug_when>
    <thetext>Sure. Current DeviceSecurityPkg is just a temp name. I do not intent to add DeviceSecurityPkg to EDKII repo. Sorry for the confusing.

I will plan to put things into MdePkg (for industry standard) and SecurityPkg (for implementation).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15440</commentid>
    <comment_count>3</comment_count>
      <attachid>678</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-03-27 20:23:44 +0000</bug_when>
    <thetext>Created attachment 678
ECR - Device Authentication Signature Database v2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15447</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-29 21:18:12 +0000</bug_when>
    <thetext>this is new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15466</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-03-30 21:37:46 +0000</bug_when>
    <thetext>Jiewen is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15501</commentid>
    <comment_count>6</comment_count>
      <attachid>687</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-04-01 20:29:44 +0000</bug_when>
    <thetext>Created attachment 687
CodeFirst - Device Authentication Signature Database</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15502</commentid>
    <comment_count>7</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-04-01 20:30:26 +0000</bug_when>
    <thetext>Change ECR to CodeFirst template.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15508</commentid>
    <comment_count>8</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-04-02 03:35:08 +0000</bug_when>
    <thetext>related bugzilla: https://bugzilla.tianocore.org/show_bug.cgi?id=3295</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15633</commentid>
    <comment_count>9</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-13 13:21:50 +0000</bug_when>
    <thetext>USB authentication does not use SPDM. SPDM was derived from USB Authentication spec, but improvements to SPDM do not exactly map to what&apos;s in USB Authentication spec. 

the ECR, as defined, assumes all device authentication uses SPDM (with explicit referenced to SPDM). But that should not be the case for USB (as suggested in the background / introductory sections of the ECR)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15641</commentid>
    <comment_count>10</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2021-04-13 20:35:33 +0000</bug_when>
    <thetext>Thanks to point out. Yes, good idea to mention USB Authentication spec and PCIe CMA. I will update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15700</commentid>
    <comment_count>11</comment_count>
      <attachid>698</attachid>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-04-15 11:09:34 +0000</bug_when>
    <thetext>Created attachment 698
Arm feedback on ver2 of ECR

Attached is some initial feedback from Arm on the ECR</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15717</commentid>
    <comment_count>12</comment_count>
      <attachid>700</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-04-17 20:55:51 +0000</bug_when>
    <thetext>Created attachment 700
CodeFirst - Device Authentication Signature Database - v3

Address ARM&apos;s feedback in v2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15794</commentid>
    <comment_count>13</comment_count>
      <attachid>705</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-04-27 21:01:24 +0000</bug_when>
    <thetext>Created attachment 705
CodeFirst - Device Authentication Signature Database - v4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16118</commentid>
    <comment_count>14</comment_count>
      <attachid>726</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2021-05-23 02:37:23 +0000</bug_when>
    <thetext>Created attachment 726
CodeFirst - Device Authentication Signature Database - v5

Add threat model section.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16365</commentid>
    <comment_count>15</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-06-15 09:33:10 +0000</bug_when>
    <thetext>This BZ product should be &quot;EDK2 Code First&quot; as a proposed modification to the UEFI Specification</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18664</commentid>
    <comment_count>16</comment_count>
      <attachid>964</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2022-03-22 05:00:23 +0000</bug_when>
    <thetext>Created attachment 964
CodeFirst - Device Authentication Signature Database - v6

Add v6 - refresh the content to reflect the latest discussion result in DMTF SPDM spec and TCG WG.

It is ready for revisit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18759</commentid>
    <comment_count>17</comment_count>
      <attachid>969</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2022-04-04 11:57:29 +0000</bug_when>
    <thetext>Created attachment 969
CodeFirst - Device Authentication Signature Database - v7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22989</commentid>
    <comment_count>18</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2024-04-29 22:40:44 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/5605</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>450</attachid>
            <date>2020-01-19 22:07:32 +0000</date>
            <delta_ts>2021-03-27 20:24:41 +0000</delta_ts>
            <desc>ECR - Device Authentication Signature Database</desc>
            <filename>ECR - Device Authentication Signature Database.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>570889</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>678</attachid>
            <date>2021-03-27 20:23:44 +0000</date>
            <delta_ts>2021-04-01 20:30:02 +0000</delta_ts>
            <desc>ECR - Device Authentication Signature Database v2</desc>
            <filename>ECR - Device Authentication Signature Database v2.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>572177</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>687</attachid>
            <date>2021-04-01 20:29:44 +0000</date>
            <delta_ts>2021-04-17 20:56:19 +0000</delta_ts>
            <desc>CodeFirst - Device Authentication Signature Database</desc>
            <filename>CodeFirst - Device Authentication Signature Database.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>559460</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>698</attachid>
            <date>2021-04-15 11:09:34 +0000</date>
            <delta_ts>2021-04-15 11:09:34 +0000</delta_ts>
            <desc>Arm feedback on ver2 of ECR</desc>
            <filename>ECR - Device Authentication Signature Database v2_arm_feedbac.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>576775</size>
            <attacher name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>700</attachid>
            <date>2021-04-17 20:55:51 +0000</date>
            <delta_ts>2021-04-27 21:01:53 +0000</delta_ts>
            <desc>CodeFirst - Device Authentication Signature Database - v3</desc>
            <filename>CodeFirst - Device Authentication Signature Database - v3.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>559067</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>705</attachid>
            <date>2021-04-27 21:01:24 +0000</date>
            <delta_ts>2021-05-23 02:37:47 +0000</delta_ts>
            <desc>CodeFirst - Device Authentication Signature Database - v4</desc>
            <filename>CodeFirst - Device Authentication Signature Database - v4.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>570571</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>726</attachid>
            <date>2021-05-23 02:37:23 +0000</date>
            <delta_ts>2022-03-22 05:00:23 +0000</delta_ts>
            <desc>CodeFirst - Device Authentication Signature Database - v5</desc>
            <filename>CodeFirst - Device Authentication Signature Database - v5.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>571579</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>964</attachid>
            <date>2022-03-22 05:00:23 +0000</date>
            <delta_ts>2022-04-04 11:57:29 +0000</delta_ts>
            <desc>CodeFirst - Device Authentication Signature Database - v6</desc>
            <filename>CodeFirst - Device Authentication Signature Database - v6.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>568534</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>969</attachid>
            <date>2022-04-04 11:57:29 +0000</date>
            <delta_ts>2022-04-04 11:57:29 +0000</delta_ts>
            <desc>CodeFirst - Device Authentication Signature Database - v7</desc>
            <filename>CodeFirst - Device Authentication Signature Database - v7.docx</filename>
            <type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</type>
            <size>568283</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2940</bug_id>
          
          <creation_ts>2020-08-28 02:07:37 +0000</creation_ts>
          <short_desc>change TpmMeasurementLibNull to BASE library</short_desc>
          <delta_ts>2020-09-02 08:32:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="qi1.zhang@intel.com">qi1.zhang</reporter>
          <assigned_to name="qi1.zhang@intel.com">qi1.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13561</commentid>
    <comment_count>0</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-28 02:07:37 +0000</bug_when>
    <thetext>TpmMeasurementLib has included DxeTpmMeasurementLib and PeiTpmMeasurementLib. So need to change TpmMeasurementLibNull to BASE library to avoid build error in some platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13562</commentid>
    <comment_count>1</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-28 02:08:17 +0000</bug_when>
    <thetext>change TpmMeasurementLibNull to BASE library</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13565</commentid>
    <comment_count>2</comment_count>
    <who name="qi1.zhang@intel.com">qi1.zhang</who>
    <bug_when>2020-08-28 03:29:48 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/64728</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13600</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-02 07:54:48 +0000</bug_when>
    <thetext>More precisely, the goal is to allow SEC and PEIM to consume
TpmMeasurementLibNull. The platform that needs this change is
OpenBoardPkg in the edk2-platforms tree:

https://edk2.groups.io/g/devel/message/64736
http://mid.mail-archive.com/SN6PR11MB27977EB7627981921CF1A9EAB2520@SN6PR11MB2797.namprd11.prod.outlook.com

v2 patch from Qi Zhang:

* [edk2-devel] [PATCH v2]
  MdeModulePkg/Library: add PEIM and SEC module type to TpmMeasurementLibNull

  https://edk2.groups.io/g/devel/message/64867
  http://mid.mail-archive.com/20200901013557.9249-1-qi1.zhang@intel.com

v3 patch from Qi Zhang:

* [edk2-devel] [PATCH v3]
  MdeModulePkg/Library: add PEIM and SEC module type to TpmMeasurementLibNull

  http://mid.mail-archive.com/20200901072622.9391-1-qi1.zhang@intel.com
  https://edk2.groups.io/g/devel/message/64873</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13601</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-02 08:02:04 +0000</bug_when>
    <thetext>The change qualifies as a bugfix because Null instances (of any library classes) should be as widely usable as possible, out of the box (regardless of known or expected use cases).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13604</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-02 08:32:40 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)

&gt; v3 patch from Qi Zhang:
&gt; 
&gt; * [edk2-devel] [PATCH v3]
&gt;   MdeModulePkg/Library: add PEIM and SEC module type to TpmMeasurementLibNull
&gt; 
&gt;   http://mid.mail-archive.com/20200901072622.9391-1-qi1.zhang@intel.com
&gt;   https://edk2.groups.io/g/devel/message/64873

Merged as commit e8453aa373e9, via &lt;https://github.com/tianocore/edk2/pull/912&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2354</bug_id>
          
          <creation_ts>2019-11-19 04:26:30 +0000</creation_ts>
          <short_desc>Structure CPU_MP_DATA should not put MicrocodePatchRegionSize after UINTN field</short_desc>
          <delta_ts>2020-01-06 22:24:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2435</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="sfu5">siyuan.fu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10469</commentid>
    <comment_count>0</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2019-11-19 04:26:30 +0000</bug_when>
    <thetext>CPU_MP_DATA defined in UefiCpuPkg\Library\MpInitLib\MpLib.h contains many UINTN fields, while a memory block of this structure is created by PeiMpInitLib.inf, and a pointer to that memory is saved in a HOB. Then DxeMpInitLib.inf will read the HOB and try to get infomation from that memory block.
On X64 platform, a PEI module is IA32 so UINTN is 32bits, while the DXE module is X64 component so UINTN become 64bits. As a result, any code in DxeMpInitLib.inf which want to read data from this memory will get incorrect offset and invalid value. Such as &quot;
    CpuMpData-&gt;MicrocodePatchRegionSize = OldCpuMpData-&gt;MicrocodePatchRegionSize;&quot; in MpInitLibInitialize.

struct _CPU_MP_DATA {
  UINT64                         CpuInfoInHob;
  UINT32                         CpuCount;
  UINT32                         BspNumber;
  //
  // The above fields data will be passed from PEI to DXE
  // Please make sure the fields offset same in the different
  // architecture.
  //
  SPIN_LOCK                      MpLock;    &lt;- This is also UINTN
  UINTN                          Buffer;    &lt;- This one
  UINTN                          CpuApStackSize;  &lt;- This one
  MP_ASSEMBLY_ADDRESS_MAP        AddressMap;   &lt;- Many other fields inside this one
  UINTN                          WakeupBuffer;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10470</commentid>
    <comment_count>1</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2019-11-19 04:34:23 +0000</bug_when>
    <thetext>The DxeMpInitLib will try to access below 5 fields, must put all of them at the begining of the structure.
  UINT64                         CpuInfoInHob;
  UINT32                         CpuCount;
  UINT32                         BspNumber;
  UINT64                         MicrocodePatchAddress;
  UINT64                         MicrocodePatchRegionSize;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10780</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-03 13:12:37 +0000</bug_when>
    <thetext>See also bug 2435.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10796</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2020-01-06 22:24:28 +0000</bug_when>
    <thetext>Fixed by Wu Hao in 88bd06616617ef2569f093f7b51893c11ad78e26</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2825</bug_id>
          
          <creation_ts>2020-06-25 23:56:07 +0000</creation_ts>
          <short_desc>Use InitializeFloatingPointUnits defined in UefiCpuLib</short_desc>
          <delta_ts>2020-07-06 05:43:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12947</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-25 23:56:07 +0000</bug_when>
    <thetext>edk2\IntelFsp2Pkg\FspSecCore\FspSecCoreM.inf defined InitializeFloatingPointUnits function. But this function already export by UefiCpuLib.

submit this bugz to use the InitializeFloatingPointUnits defined in UefiCpuLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12967</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-29 10:37:35 +0000</bug_when>
    <thetext>confirmed this issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12968</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-29 10:39:28 +0000</bug_when>
    <thetext>SHA-1: 0060e0a694f3f249c3ec081b0e61287c36f64ebb

* IntelFsp2Pkg/FspSecCore: Use UefiCpuLib.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2825

UefiCpuLib has API InitializeFloatingPointUnits.
Remove internal copy of InitializeFloatingPointUnits
in FspSecCoreM, use UefiCpuLib API.

This change also avoid later potential conflict when
use UefiCpuLib for FspSecCoreM module.

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Cc: Star Zeng &lt;star.zeng@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2248</bug_id>
          
          <creation_ts>2019-10-07 14:07:58 +0000</creation_ts>
          <short_desc>Assign unique token space GUID to WhiskeylakeOpenBoardPkg PCDs</short_desc>
          <delta_ts>2019-10-16 14:45:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9929</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-07 14:07:58 +0000</bug_when>
    <thetext>PCDs declared in the WhiskeylakeOpenBoardPkg currently use the GUID gBoardModuleTokenSpaceGuid.

The same name is used in other board packages (updates are tracked in dedicated BZ) and a package has been added called BoardModulePkg so this name is now misleading.

The name should be changed to a unique GUID value and name for the package such as gWhiskeylakeOpenBoardPkgTokenSpaceGuid.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9950</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:24:13 +0000</bug_when>
    <thetext>Patch list sent for code review on the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10041</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 14:45:50 +0000</bug_when>
    <thetext>Submitted in commit 4b3bf5d6c18bed9b7b467d41a20259e1bdb914a9.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2707</bug_id>
          
          <creation_ts>2020-05-08 22:04:27 +0000</creation_ts>
          <short_desc>Ecc Fails with Python 3.8</short_desc>
          <delta_ts>2020-05-14 04:15:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12458</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-05-08 22:04:27 +0000</bug_when>
    <thetext>EccMain.py uses time.clock() which has been deprecated since Python 3.3. Message when running with earlier versions of Python 3.

&quot;DeprecationWarning: time.clock has been deprecated in Python 3.3 and will be removed from Python 3.8: use time.perf_counter or time.process_time instead&quot;

Python 3.8 is released now and EccMain.py fails:

Ecc -t c:\src\edk2\MdeModulePkg -r ecc_result.csv
Traceback (most recent call last):
  File &quot;C:\Users\user\AppData\Local\Programs\Python\Python38-32\lib\runpy.py&quot;, line 193, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File &quot;C:\Users\user\AppData\Local\Programs\Python\Python38-32\lib\runpy.py&quot;, line 86, in _run_code
    exec(code, run_globals)
  File &quot;C:\src\edk2\BaseTools\Source\Python\Ecc\EccMain.py&quot;, line 409, in &lt;module&gt;
    StartTime = time.clock()
AttributeError: module &apos;time&apos; has no attribute &apos;clock&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12459</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-05-08 22:08:13 +0000</bug_when>
    <thetext>I made a change locally to use time.perf_counter() that I can send to the list. It was added in Python 3.3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12487</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-12 22:09:12 +0000</bug_when>
    <thetext>Please check this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12490</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-05-12 22:12:22 +0000</bug_when>
    <thetext>Please note that a v1 patch was sent on the mailing list - https://edk2.groups.io/g/devel/message/58931</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12492</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-12 22:25:12 +0000</bug_when>
    <thetext>*** Bug 2703 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12504</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-05-14 04:15:09 +0000</bug_when>
    <thetext>Bob submitted to edk2 in the following commit - https://github.com/tianocore/edk2/commit/242ab73d7f255d5d859eaf74a23b9d68c686d177.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2136</bug_id>
          
          <creation_ts>2019-08-28 02:37:27 +0000</creation_ts>
          <short_desc>Save AllSecPpiList after SecPlatformMain function.</short_desc>
          <delta_ts>2019-09-01 20:35:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9370</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-08-28 02:37:27 +0000</bug_when>
    <thetext>Current code logic in SecStartupPhase2 like below:

  AllSecPpiList = (EFI_PEI_PPI_DESCRIPTOR *) SecCoreData-&gt;PeiTemporaryRamBase;

  //
  // Perform platform specific initialization before entering PeiCore.
  //
  PpiList = SecPlatformMain (SecCoreData);
  ......
  if (PpiList != NULL) {
    //
    // Remove the terminal flag from the terminal PPI
    //
    CopyMem (AllSecPpiList, mPeiSecPlatformInformationPpi, sizeof (mPeiSecPlatformInformationPpi));
  ......


SecPlatformMain function is a hook point for platform code. 

Some platform may change SecCoreData-&gt;PeiTemporaryRamBase value in SecPlatformMain. But SecStartupPhase2 function not update AllSecPpiList variable after SecPlatformMain, so the old saved AllSecPpiList value is not correct and may override platform valid data. 

Submit this bugz to save AllSecPpiList after SecPlatformMain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9371</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-08-28 02:38:05 +0000</bug_when>
    <thetext>Confirmed this is an real issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9403</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-29 15:14:09 +0000</bug_when>
    <thetext>Eric, can you please add a link to the patch you posted? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9404</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-08-29 20:25:22 +0000</bug_when>
    <thetext>Attach the link for the patch
https://edk2.groups.io/g/devel/topic/33054478#46529</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9413</commentid>
    <comment_count>4</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-09-01 20:35:09 +0000</bug_when>
    <thetext>SHA-1: 47f167f47e8e4b637411f7547128f3036f5a2f5e

* UefiCpuPkg/SecCore: get AllSecPpiList after SecPlatformMain.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2136

SecPlatformMain is a platform hook function which let platform does
some update. Some platform may adjust SecCoreData-&gt;PeiTemporaryRamBase
which caused former saved AllSecPpiList variable invalid.

This patch update the logic to get AllSecPpiList after SecPlatformMain.
If SecPlatformMain() returns no platform-specific PPI list, then there
is nothing to merge, so we don&apos;t need &quot;AllSecPpiList&quot; at all.

Cc: Ray Ni &lt;ray.ni@intel.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2603</bug_id>
          
          <creation_ts>2020-03-17 03:36:00 +0000</creation_ts>
          <short_desc>Add a feature package to support virtual keyboard</short_desc>
          <delta_ts>2020-06-08 04:49:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>UserInterfaceFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>amy.chan</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>gua.guo</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11707</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-03-17 03:36:00 +0000</bug_when>
    <thetext>In Features/Intel/UserInterface, add a new feature package to support the virtual keyboard.
It is used for touch panel, simulate a keyboard in the screen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11708</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-03-17 03:38:10 +0000</bug_when>
    <thetext>I will summit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12811</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-08 04:49:54 +0000</bug_when>
    <thetext>A patch already merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2498</bug_id>
          
          <creation_ts>2020-02-02 19:29:44 +0000</creation_ts>
          <short_desc>[UefiCpuPkg/MpInitLib] CPUID and PlatformID information can be uninitialized in MicrocodeDetect()</short_desc>
          <delta_ts>2020-02-05 20:39:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>siyuan.fu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11044</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-02 19:29:44 +0000</bug_when>
    <thetext>Commit fd30b00707 updated the logic in function MicrocodeDetect() that
will directly use the CPUID and PlatformID information from the &apos;CpuData&apos;
field in the CPU_MP_DATA structure, instead of collecting these
information for each processor via AsmCpuid() and AsmReadMsr64() calls
respectively.

At that moment, this approach worked fine for APs. Since:
a) When the APs are waken up for the 1st time (1st MpInitLibInitialize()
   entry at PEI phase), the function InitializeApData() will be called for
   each AP and the CPUID and PlatformID information will be collected.

b) During the 2nd entry of MpInitLibInitialize() at DXE phase, when the
   APs are waken up again, the function InitializeApData() will not be
   called, which means the CPUID and PlatformID information will not be
   collected. However, the below logics in MicrocodeDetect() function:

|&gt;  CurrentRevision = GetCurrentMicrocodeSignature ();
|&gt;  IsBspCallIn     = (ProcessorNumber == (UINTN)CpuMpData-&gt;BspNumber) ? TRUE : FALSE;
|&gt;  if (CurrentRevision != 0 &amp;&amp; !IsBspCallIn) {
|&gt;    //
|&gt;    // Skip loading microcode if it has been loaded successfully
|&gt;    //
|&gt;    return;
|&gt;  }

   will ensure that the microcode detection and application will be
   skipped due to the fact that such process has already been done in the
   PEI phase.

But after commit 396e791059, which removes the above skip loading logics,
the CPUID and PlatformID information on APs will be used upon the 2nd
entry of the MpInitLibInitialize(). But since the CPUID and PlatformID
information has not been collected, it will bring issue to the microcode
detection process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11045</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-02 19:30:51 +0000</bug_when>
    <thetext>Take this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11046</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-02 19:36:03 +0000</bug_when>
    <thetext>V1 patch has been proposed at:
https://edk2.groups.io/g/devel/message/53633</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11116</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-05 20:39:58 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/a9e3458ba7dcdab2793e2fb69ed4fa92e1301625</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2380</bug_id>
          
          <creation_ts>2019-11-24 15:18:02 +0000</creation_ts>
          <short_desc>Blind assignment of UINT64 to UINT32 in VirtualRealTimeClockLib.c</short_desc>
          <delta_ts>2020-10-27 07:02:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Pete Batard">pete</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>macarl</cc>
    
    <cc>pete</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmbeddedPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10535</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-11-24 15:18:02 +0000</bug_when>
    <thetext>There are two locations in this file that assign UINT64 values to a UINT32.

~Line 205:
Time-&gt;Nanosecond = MultU64x64 (Remainder, 1000000000U) / Freq;

~Line 212:
Capabilities-&gt;Resolution = Freq;

If these casts are both safe, they should be explicit.
Otherwise, bounds should be checked.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13889</commentid>
    <comment_count>1</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-07 00:01:03 +0000</bug_when>
    <thetext>What&apos;s the status on this bug?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13893</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-07 11:05:20 +0000</bug_when>
    <thetext>CC&apos;ing EmbeddedPkg maintainers:

$ python BaseTools/Scripts/GetMaintainer.py -l \
    EmbeddedPkg/Library/VirtualRealTimeClockLib/VirtualRealTimeClockLib.c

EmbeddedPkg/Library/VirtualRealTimeClockLib/VirtualRealTimeClockLib.c
  Leif Lindholm &lt;leif@nuviainc.com&gt;
  Ard Biesheuvel &lt;ard.biesheuvel@arm.com&gt;
  devel@edk2.groups.io

Furthermore, given that this code seems to originate from commit 64a17fadcb79 (&quot;EmbeddedPkg/Library: Add VirtualRealTimeClockLib&quot;, 2019-02-15), per &quot;git-blame&quot;, I&apos;m assigning this bug to the author of that commit, namely Pete Batard &lt;pete@akeo.ie&gt;.

Bret, Matt: I think you can speed up bug triage if you perform the above steps up-front (run GetMaintainer.py and git-blame, and CC / assign the BZ to the folks identified by the output of those commands).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13897</commentid>
    <comment_count>3</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2020-10-07 11:24:18 +0000</bug_when>
    <thetext>Thanks for the notice. I&apos;ll take a look when I get a chance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13904</commentid>
    <comment_count>4</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-07 14:17:35 +0000</bug_when>
    <thetext>Thanks Lazlo and Pete for the timely response. 

Lazlo, in the future, I&apos;ll do a better job with bug triage. Thanks for the suggestion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13907</commentid>
    <comment_count>5</comment_count>
      <attachid>571</attachid>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-07 14:55:39 +0000</bug_when>
    <thetext>Created attachment 571
suggested patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13908</commentid>
    <comment_count>6</comment_count>
      <attachid>572</attachid>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-07 14:56:08 +0000</bug_when>
    <thetext>Created attachment 572
suggested patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13909</commentid>
    <comment_count>7</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-07 14:57:40 +0000</bug_when>
    <thetext>Added a suggested patch that should be good to use. Marking as confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13916</commentid>
    <comment_count>8</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2020-10-08 06:10:53 +0000</bug_when>
    <thetext>Thanks Bret. I ended up using a different patch, as assigning Freq as Resolution for the Capabilities field could have resulted in an overflow, and using the frequency as Resolution was the wrong approach anyway.

Patch submitted as: https://edk2.groups.io/g/devel/message/66010</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13917</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-08 09:06:11 +0000</bug_when>
    <thetext>IN_PROGRESS per comment 8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14101</commentid>
    <comment_count>10</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2020-10-27 07:01:53 +0000</bug_when>
    <thetext>Bugfix has been committed in https://github.com/tianocore/edk2/commit/24cf72726564eac7ba9abb24f3d05795164d0a70.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14102</commentid>
    <comment_count>11</comment_count>
    <who name="Pete Batard">pete</who>
    <bug_when>2020-10-27 07:02:38 +0000</bug_when>
    <thetext>Fixed with https://github.com/tianocore/edk2/commit/24cf72726564eac7ba9abb24f3d05795164d0a70.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>571</attachid>
            <date>2020-10-07 14:55:39 +0000</date>
            <delta_ts>2020-10-07 14:56:08 +0000</delta_ts>
            <desc>suggested patch</desc>
            <filename>0001-EmbeddedPkg-Explicit-cast-to-UINT32.patch</filename>
            <type>application/octet-stream</type>
            <size>1528</size>
            <attacher name="Matthew Carlson">macarl</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>572</attachid>
            <date>2020-10-07 14:56:08 +0000</date>
            <delta_ts>2020-10-07 14:56:08 +0000</delta_ts>
            <desc>suggested patch</desc>
            <filename>0001-EmbeddedPkg-Explicit-cast-to-UINT32.patch</filename>
            <type>text/plain</type>
            <size>1528</size>
            <attacher name="Matthew Carlson">macarl</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2849</bug_id>
          
          <creation_ts>2020-07-13 22:16:16 +0000</creation_ts>
          <short_desc>Remove unnecessary APIs from MtrrLib</short_desc>
          <delta_ts>2020-08-14 01:17:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13095</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-07-13 22:16:16 +0000</bug_when>
    <thetext>MtrrLib exposes some unnecessary APIs. Those APIs provide duplicated services as other APIs. Such as:
MtrrGetVariableMtrr
MtrrSetVariableMtrr
MtrrSetFixedMtrr</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13097</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-07-14 02:10:42 +0000</bug_when>
    <thetext>3 APIs were removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13098</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-07-14 02:11:22 +0000</bug_when>
    <thetext>fixed in abc16e2531dc62d40fef40e62ac65a55604ddb54, 3c9291288540f48a6812857fd59cf635aa294aa1, 9c6f3545aee0808b78a0ad4480b6eb9d24989dc1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13397</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-14 01:17:15 +0000</bug_when>
    <thetext>Ray fixes them.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2732</bug_id>
          
          <creation_ts>2020-05-20 21:51:08 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-20 22:16:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2736</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12581</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 21:51:08 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12607</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:16:59 +0000</bug_when>
    <thetext>Oops. Too much automation.

*** This bug has been marked as a duplicate of bug 2736 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2627</bug_id>
          
          <creation_ts>2020-03-24 01:35:04 +0000</creation_ts>
          <short_desc>[UefiCpuPkg/MpInitLib] Add a PCD to configure the periodic interval for AP status checking</short_desc>
          <delta_ts>2020-03-26 20:50:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11792</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-03-24 01:35:04 +0000</bug_when>
    <thetext>Propose to add a static PCD which will be consumed by the MpInitLib (DXE phase
instance) to specify the periodic interval for checking the AP status when
MP services StartupAllAPs() and StartupThisAP() are being executed in a
non-blocking manner (in function CheckApsStatus()).

Doing so can grant the platform owners with the flexibility to choose the
proper interval value to execute the periodic callback CheckApsStatus()
according to:
  a) The number of processors in their system;
  b) How MP service is being used in their system.
for better system performance.

Using a small interval value can benefit the performance for the case when the
BSP uses WaitForEvent() or uses CheckEvent() in a loop to wait for AP(s) to
complete the task, especially when the task can be finished considerably fast
on AP(s).

Using a big interval value can reduce the impact on BSP by the time being
consumed in CheckApsStatus(), especially when the number of processors in the
system is huge so that the time consumed in CheckApsStatus() is not negligible.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11793</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-03-24 01:35:33 +0000</bug_when>
    <thetext>Take it and will provide a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11797</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-03-24 02:38:25 +0000</bug_when>
    <thetext>V1 (RFC) patch was previously sent at:
https://edk2.groups.io/g/devel/message/55846

V2 patch has been proposed at:
https://edk2.groups.io/g/devel/message/56130</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11825</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-24 22:16:10 +0000</bug_when>
    <thetext>IN_PROGRESS, based on comment#2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11831</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-03-25 01:08:46 +0000</bug_when>
    <thetext>V3 patch has been proposed at:
https://edk2.groups.io/g/devel/message/56243

V4 patch has been proposed at:
https://edk2.groups.io/g/devel/message/56250</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11867</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-03-26 20:50:20 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/a1c35ff312efb1452427e695d58fb1f26b67661e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2984</bug_id>
          
          <creation_ts>2020-09-23 07:51:28 +0000</creation_ts>
          <short_desc>Bochs MMIO GOP driver does not work in ovmf (BarIndex confusion)</short_desc>
          <delta_ts>2020-09-24 03:01:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Christian Ehrhardt">ehrhardt</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>kraxel</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13773</commentid>
    <comment_count>0</comment_count>
      <attachid>560</attachid>
    <who name="Christian Ehrhardt">ehrhardt</who>
    <bug_when>2020-09-23 07:51:28 +0000</bug_when>
    <thetext>Created attachment 560
Patch

The EFI PCI protocol uses logical BAR numbers and not BAR register offsets to designate BAR regions of a PCI device. The BOCHS MMIO region is at offset 0x18 in the PCI config space. This is BAR register number #2 (counting from zero). However, the MMIO region is logically region #1 (counting from zero) as the BAR register #1 is unused or used as the high 32-bits of region #0.

Thus BarIndex == 1 must be used to access the MMIO registers of the BOCHS graphics card. However, current code uses PCI_BAR_IDX2 which is 2.

As a result MMIO registers are not used and the GOP driver falls back to port based io (which is why this was not noticed earlier).

Attached is a patch that replaces all uses of PCI_BAR_IDX[0-9] with the correct number</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13774</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-23 09:58:46 +0000</bug_when>
    <thetext>Hi Christian,

(CC&apos;ing Gerd)


(1) At the syntax level, I believe that PCI_BAR_IDXn is correct; there
should be no need to replace the macro usage with naked magic numbers.

That&apos;s because the UEFI spec defines 0..5 as the valid (inclusive)
argument range for the BarIndex parameters of the various PciIo protocol
member functions, and &quot;MdePkg/Include/IndustryStandard/Pci22.h&quot; #defines
PCI_BAR_IDX0 .. PCI_BAR_IDX5, accordingly.


(2) As of master being at @ dd5c7e3c5282, I&apos;ve just checked with
&quot;-device VGA&quot;, and the OVMF log says,

&gt; QemuVideo: QEMU Standard VGA detected
&gt; QemuVideo: Using mmio bar @ 0xC1E11000

I have also checked with &quot;-device bochs-display&quot;, and the OVMF log says,

&gt; QemuVideo: QEMU Standard VGA (secondary) detected
&gt; QemuVideo: Using mmio bar @ 0x81009000

I have also checked with &quot;-device virtio-vga&quot;, and the OVMF log says,

&gt; QemuVideo: QEMU VirtIO VGA detected
&gt; QemuVideo: Using mmio bar @ 0x800500000

Additionally, the three log files collected above do *not* contain the
message &quot;QemuVideo: BochsID mismatch&quot;.

So not only does PCI_BAR_IDX2 satisfy the condition

  MmioDesc-&gt;ResType == ACPI_ADDRESS_SPACE_TYPE_MEM

but -- via BochsRead() -- it also satisfies the stricter check

  (BochsId &amp; 0xFFF0) == VBE_DISPI_ID0

Thus, none of the three device models marked as QEMU_VIDEO_BOCHS_MMIO in
the &quot;gQemuVideoCardList&quot; array [OvmfPkg/QemuVideoDxe/Driver.c] are
downgraded to QEMU_VIDEO_BOCHS.

This contradicts your claim that &quot;the GOP driver falls back to port
based io (which is why this was not noticed earlier)&quot;.

Does your OVMF binary perhaps lack the fix for bug 2555 (that is, commit
edfe16a6d9f8)?


(3) Regarding the change you are proposing for QemuVideoBochsModeSetup()
[OvmfPkg/QemuVideoDxe/Initialize.c], the sanity checks for the &quot;QXRO&quot;
signature, and a zero &quot;DrawStart&quot; -- which are both based on
PCI_BAR_IDX2 -- definitely used to work. If those sanity checks had
failed, then we would have seen the message

  &quot;can&apos;t read size of drawable buffer from QXL ROM&quot;

in the OVMF log.

So, I&apos;ve now attempted to re-test this branch of the code as well, using
&quot;-device qxl-vga&quot;.

To my surprise, the qxl-vga device model does not work. The OVMF log
contains:

&gt; QemuVideo: QEMU QXL VGA detected
&gt; QemuVideo: BochsID mismatch (got 0xFFFF)

which causes QemuVideoControllerDriverStart() to return EFI_DEVICE_ERROR
(and the display window to remain blank).

This is almost certainly a QEMU regression however. In February 2020,
that is, when I wrote the patch that would become edk2 commit
edfe16a6d9f8 (see above), I definitely *regression-tested* qxl-vga --
and it worked.

(The reference I have for proving that is unfortunately internal to Red
Hat: &lt;https://bugzilla.redhat.com/show_bug.cgi?id=1806359#c15&gt;. I&apos;m
pasting it here for Gerd. Unfortunately that RHBZ comment is private.)


Summary (of my current opinion):

- If you are currently using a &quot;bochs-display&quot; or &quot;secondary-vga&quot; device
  model, then your OVMF version could be missing commit edfe16a6d9f8.

- QEMU has suffered a regression with regard to qxl-vga. Bisecting that
  would be nice.

- At the moment I don&apos;t see any changes as necessary to
  OvmfPkg/QemuVideoDxe.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13775</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-23 11:48:44 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)

&gt; - QEMU has suffered a regression with regard to qxl-vga. Bisecting that
&gt;   would be nice.

I&apos;m really sorry, I was incorrect above. My libvirt domain configuration had placed the graphics card on a pcie-to-pci-bridge. While MMIO works fine like that, VGA / VBE port IO is not expected to do so. (Note that QXL is marked with QEMU_VIDEO_BOCHS in &quot;gQemuVideoCardList&quot; -- the only card in the array that&apos;s marked like that. It means that BochsRead() will write IO port VBE_DISPI_IOPORT_INDEX and read IO port VBE_DISPI_IOPORT_DATA.)

I have now made the qxl-vga device an endpoint that&apos;s integrated into the root complex (root bridge), in my domain config, and now there is no &quot;BochsID mismatch&quot; any longer.

So -- there is no QEMU regression; instead, the domain config I used for checking qxl-vga in comment 1 was invalid for qxl-vga.

And that only leaves me with the suggestion to close this BZ as WORKSFORME -- the code both looks correct to me and works correctly on my end, for all of the QEMU_VIDEO_BOCHS_MMIO cards (&quot;QEMU Standard VGA&quot;, &quot;QEMU Standard VGA (secondary)&quot;, &quot;QEMU VirtIO VGA&quot;), and the one QEMU_VIDEO_BOCHS card (&quot;QEMU QXL VGA&quot;).

Christian, if you can clarify the symptom you&apos;ve encountered, and provide instructions for reproducing it, then please reopen this BZ. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13780</commentid>
    <comment_count>3</comment_count>
    <who name="Christian Ehrhardt">ehrhardt</who>
    <bug_when>2020-09-24 03:01:05 +0000</bug_when>
    <thetext>Sorry for the noise. BarIndex counting does count unused BARs.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>560</attachid>
            <date>2020-09-23 07:51:28 +0000</date>
            <delta_ts>2020-09-23 07:51:28 +0000</delta_ts>
            <desc>Patch</desc>
            <filename>bochs.diff</filename>
            <type>text/plain</type>
            <size>3696</size>
            <attacher name="Christian Ehrhardt">ehrhardt</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2404</bug_id>
          
          <creation_ts>2019-12-06 01:30:29 +0000</creation_ts>
          <short_desc>Steps to enable LLVM build in Windows is too complex</short_desc>
          <delta_ts>2020-03-03 21:10:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>zhiguang.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10625</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-12-06 01:30:29 +0000</bug_when>
    <thetext>Per https://github.com/tianocore/tianocore.github.io/wiki/CLANG9-Tools-Chain, at least two environment variables need to be set:

  set CLANG_HOST_BIN=n
  set CLANG_BIN=C:\Program Files\LLVM\bin\

Two suggestions:
1. We enhance edksetup.bat to auto-set CLANG_HOST_BIN=n.
2. We change the WIKI page to require user either:
   a. Add LLVM Bin directory to %PATH%, or
   b. Set CLANG_BIN=&lt;LLVM Bin directory&gt;


Some other minor comments to the WIKI page:
1. Add a diagram to show the relationship between MSVC and LLVM. This is to tell users that only installing LLVM is not sufficient for LLVM build environment setup. Today&apos;s LLVM toolchain (CLANGPDB) generates MSVC style make files and relies on nmake utility from MSVC.
2. Remove the IASL_PREFIX setting from the WIKI or explain that this step is not mandatory for LLVM environment setup.
3. What&apos;s the goal of having a section &quot;Cross OS/Host Reproducible Build&quot;?
4. The chapter &quot;The verbos build and run steps in Windows:&quot; looks confusing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11511</commentid>
    <comment_count>1</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-03-03 21:10:58 +0000</bug_when>
    <thetext>Thanks for the suggestions, add the feature at cc617b6e1430242f8d042c71c2d923dbc6436a36.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2185</bug_id>
          
          <creation_ts>2019-09-11 03:23:02 +0000</creation_ts>
          <short_desc>The request to add FMP test to IHV</short_desc>
          <delta_ts>2019-09-24 04:37:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="eric.jin">eric.jin</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>supreeth.venkatesh</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9602</commentid>
    <comment_count>0</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-11 03:23:02 +0000</bug_when>
    <thetext>Add FMP test to IHV. 
Currently, FMP test is only existed in UEFI part for platform/system level test. Adding it to IHV part will be convenient for IHV to validate their device.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9772</commentid>
    <comment_count>1</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-24 04:37:18 +0000</bug_when>
    <thetext>Has been resolved in fd26c74e0857c4bd5874a4430165c48c0bda66a2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2649</bug_id>
          
          <creation_ts>2020-03-30 15:05:53 +0000</creation_ts>
          <short_desc>FvIsBeingProcessed references uninitialized variable KNownFwVol in DEBUG statement</short_desc>
          <delta_ts>2020-10-28 03:44:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Eugene Cohen">eugene</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>StandaloneMmPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11926</commentid>
    <comment_count>0</comment_count>
    <who name="Eugene Cohen">eugene</who>
    <bug_when>2020-03-30 15:05:53 +0000</bug_when>
    <thetext>Summary says it all

https://github.com/tianocore/edk2/blob/f34c7645bd87c61f72c2bc4a8f88afabc69de512/StandaloneMmPkg/Core/Dispatcher.c#L819</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11958</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 21:34:00 +0000</bug_when>
    <thetext>Assign it to StandaloneMmPkg maintainer to check it first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11998</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-01 09:58:52 +0000</bug_when>
    <thetext>Ard: have you any comments for this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12012</commentid>
    <comment_count>3</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-04-01 12:09:34 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #2)
&gt; Ard: have you any comments for this issue?

Agreed that this is a bug. Patches welcome :-)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12102</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:03:40 +0000</bug_when>
    <thetext>Eugene: can you send the patch to edk2 mail list for review?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14137</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-28 03:44:46 +0000</bug_when>
    <thetext>Fixed at edk2 bd7c73ba7706d82a974799aac39e48e05dccd169</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2426</bug_id>
          
          <creation_ts>2019-12-17 21:05:57 +0000</creation_ts>
          <short_desc>BaseTools: Remove unused PCD_TOKEN_ macro definition for FixedAtBuild PCD</short_desc>
          <delta_ts>2019-12-20 04:09:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10719</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-12-17 21:05:57 +0000</bug_when>
    <thetext>Build tool generate PCD_TOKEN_xxx Macro for FixedAtBuild Pcd in Autogen.c and Autogen.h but there is no code use that Macro.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10720</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-12-17 21:06:12 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10737</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-12-20 04:08:38 +0000</bug_when>
    <thetext>edk2\SecurityPkg\Library\DxeRsa2048Sha256GuidedSectionExtractLib\DxeRsa2048Sha256GuidedSectionExtractLib.c 

use the PcdToken of a FixedAtBuild Pcd in the following line.

DEBUG ((DEBUG_VERBOSE, &quot;DxePcdRsa2048Sha256: PublicKeyBuffer Token = %08x\n&quot;, PcdToken (PcdRsa2048Sha256PublicKeyBuffer)));</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10738</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-12-20 04:09:27 +0000</bug_when>
    <thetext>So close this bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2312</bug_id>
          
          <creation_ts>2019-10-27 23:59:10 +0000</creation_ts>
          <short_desc>MdeModulePkg/NvmExpressPei: Fix Opal S3 unlock issue</short_desc>
          <delta_ts>2019-11-29 01:56:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Maggie Chu">maggie.chu</reporter>
          <assigned_to name="Maggie Chu">maggie.chu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10223</commentid>
    <comment_count>0</comment_count>
    <who name="Maggie Chu">maggie.chu</who>
    <bug_when>2019-10-27 23:59:10 +0000</bug_when>
    <thetext>create bug sighting to track issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10224</commentid>
    <comment_count>1</comment_count>
    <who name="Maggie Chu">maggie.chu</who>
    <bug_when>2019-10-28 00:00:39 +0000</bug_when>
    <thetext>Because BlockIo Ppi leverage NvmExpressPei Ppi to transit
Nvm command to device, we should make sure NvmePassThruPpi installed before BlockIo PPI</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10587</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-29 01:56:28 +0000</bug_when>
    <thetext>Fix at dc254af6a492d554efaba924c4903463a1d56f36</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2781</bug_id>
          
          <creation_ts>2020-06-04 02:48:07 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: Add FSP*_ARCH_UPD.</short_desc>
          <delta_ts>2020-06-23 02:47:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12795</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-06-04 02:48:07 +0000</bug_when>
    <thetext>Introduce FSPT_ARCH_UPD and FSPS_ARCH_UPD to support debug events and multi-phase silicon initialization.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12796</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-06-04 02:48:26 +0000</bug_when>
    <thetext>Will send code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12935</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-06-23 02:47:44 +0000</bug_when>
    <thetext>commit 1a992030522622c42aa063788b3276789c56c1e1
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Thu Jun 18 20:59:37 2020 +0800

    IntelFsp2WrapperPkg: Add FSP*_ARCH_UPD.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2781

    Provides sample code to include FSPT_ARCH_UPD initial values with
    UPD header revision set to 2.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;

commit 89f569ae8e759dc867009f396a516b7af5a3c0e7
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Thu Jun 4 14:43:40 2020 +0800

    IntelFsp2Pkg: Add FSP*_ARCH_UPD.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2781

    Introduce FSPT_ARCH_UPD and FSPS_ARCH_UPD to support debug events
    and multi-phase silicon initialization.
    For backward compatibility the original structures are kept and
    new ARCH_UPD structures will be included only when UPD header
    revision equal or greater than 2.

    GenCfgOpt script also updated to prevent from generating duplicate
    FSPT_ARCH_UPD and FSPS_ARCH_UPD typedef structures.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2205</bug_id>
          
          <creation_ts>2019-09-19 13:12:13 +0000</creation_ts>
          <short_desc>Convert UNI files from UTF-16 to UTF-8</short_desc>
          <delta_ts>2019-10-21 12:57:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>supreeth.venkatesh</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9726</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-09-19 13:12:13 +0000</bug_when>
    <thetext>The following files are in UTF-16 format and should be converted to UTF-8

uefi-sct/SctPkg/TestCase/UEFI/EFI/BootServices/ImageServices/BlackBoxTest/Dependency/ValidHiiImage1/SampleStrings.uni
uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/ConfigKeywordHandler/BlackBoxTest/Dependency/SampleDriver/DriverSample.uni
uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/ConfigKeywordHandler/BlackBoxTest/Dependency/SampleDriver/DriverSampleExtra.uni
uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/ConfigKeywordHandler/BlackBoxTest/Dependency/SampleDriver/InventoryStrings.uni
uefi-sct/SctPkg/TestCase/UEFI/EFI/Protocol/ConfigKeywordHandler/BlackBoxTest/Dependency/SampleDriver/VfrStrings.uni

The edk2\BaseTools\Scripts\ConvertUni.py tool can be used to do these conversions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9883</commentid>
    <comment_count>1</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-09-30 12:48:52 +0000</bug_when>
    <thetext>Patch sent to the mailing list with log:
&quot;No Functional Change.
edk2\BaseTools\Scripts\ConvertUni.py tool is used to convert uni files
from UTF-16 to UTF-8.&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10149</commentid>
    <comment_count>2</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-10-21 12:57:33 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2-test/commit/1e509eb07d5fa4ce93653cd4410b04cf6c815ea5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2093</bug_id>
          
          <creation_ts>2019-08-19 05:30:07 +0000</creation_ts>
          <short_desc>&apos;PlatformAutoGen&apos; object has no attribute &apos;DataPile&apos; in BuildReport</short_desc>
          <delta_ts>2019-08-20 03:58:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9055</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-08-19 05:30:07 +0000</bug_when>
    <thetext>When I sync to newer EDK2, I got build error to generate the build report.(BIOS binary is built successfully) the error is related to the change in edk2\BaseTools\Source\Python\build\BuildReport.py:

Ma = ModuleAutoGen(Wa, InfClass, Pa.BuildTarget, Pa.ToolChain, Pa.Arch, Wa.MetaFile,Pa.DataPile) 

The error message:
(Python 3.6.6 on win32
Traceback (most recent call last):
  File &quot;C:\proj\simics\seabios\patch\1\edk2\BaseTools\Source\Python\build\BuildReport.py&quot;, line 2273, in GenerateReport
    PlatformReport(Wa, MaList, self.ReportType).GenerateReport(File, BuildDuration, AutoGenTime, MakeTime, GenFdsTime, self.ReportType)
  File &quot;C:\proj\simics\seabios\patch\1\edk2\BaseTools\Source\Python\build\BuildReport.py&quot;, line 2145, in __init__
    Ma = ModuleAutoGen(Wa, InfClass, Pa.BuildTarget, Pa.ToolChain, Pa.Arch, Wa.MetaFile,Pa.DataPile)
AttributeError: &apos;PlatformAutoGen&apos; object has no attribute &apos;DataPile&apos;
)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9087</commentid>
    <comment_count>1</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-08-20 03:58:42 +0000</bug_when>
    <thetext>fixed it in 0970a80583a9a0595eb357f380e604b57136fa26</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2923</bug_id>
          
          <creation_ts>2020-08-23 04:42:36 +0000</creation_ts>
          <short_desc>Selecting the Secure Boot Mode = &quot;Custom Mode&quot; is never saved</short_desc>
          <delta_ts>2020-08-26 21:03:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Daniel Black">daniel</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13499</commentid>
    <comment_count>0</comment_count>
    <who name="Daniel Black">daniel</who>
    <bug_when>2020-08-23 04:42:36 +0000</bug_when>
    <thetext>Compiled master 5a6d764e1d073d28e8f398289ccb5592bf9a72ba SECURE_BOOT_ENABLE=TRUE

Followed these steps https://bugzilla.redhat.com/show_bug.cgi?id=1871403 to attempt to set a Custom Mode and still fails to save in the latest version.

Due to #2922 I didn&apos;t get a fw where &quot;Attempt Secure Boot&quot; could actually be enabled (was greyed out).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13507</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-24 13:24:16 +0000</bug_when>
    <thetext>repeating my comment
&lt;https://bugzilla.redhat.com/show_bug.cgi?id=1871403#c2&gt; here:

&quot;Custom Mode&quot; is not defined in the UEFI specification, it is an
edk2-specific Secure Boot operational mode.

&quot;Custom Mode&quot; means that updates to the PK, KEK, db, and dbx
authenticated UEFI variables are not verified.

Therefore, you certainly do *not* want to boot a guest operating system
in &quot;Custom Mode&quot; (as long as you care for Secure Boot at all, that is,
with that particular guest OS). Because in &quot;Custom Mode&quot;, the guest OS
could trivially replace the certificates and hashes that control Secure
Boot.

&quot;Custom Mode&quot; is therefore a shortcut for a &quot;trusted agent&quot; to enroll
PK, KEK, db, dbx, without being subject to verification against existent
PK, KEK, etc contents.

Thus, &quot;Custom Mode&quot; is temporary. Once you have your certificates
enrolled, the SB operational mode flips back to &quot;Standard Mode&quot; --
meaning that *further* updates against those authenticated UEFI
variables will be verified (as they should).


The visual form on which you manipulate these settings in the Setup TUI
is implemented in edk2 by the
&quot;SecurityPkg/VariableAuthenticated/SecureBootConfigDxe&quot; driver. In
&quot;SecureBootConfigImpl.c&quot;, function SecureBootCallback(), which is sort
of the &quot;user action handler&quot; for the form
(EFI_HII_ACCESS_FORM_CALLBACK), we have the following snippet:

&gt;|   } else if (Action == EFI_BROWSER_ACTION_FORM_CLOSE) {
&gt;|     //
&gt;|     // Force the platform back to Standard Mode once user leave the setup screen.
&gt;|     //
&gt;|     GetVariable2 (EFI_CUSTOM_MODE_NAME, &amp;gEfiCustomModeEnableGuid, (VOID**)&amp;SecureBootMode, NULL);
&gt;|     if (NULL != SecureBootMode &amp;&amp; *SecureBootMode == CUSTOM_SECURE_BOOT_MODE) {
&gt;|       IfrNvData-&gt;SecureBootMode = STANDARD_SECURE_BOOT_MODE;
&gt;|       SetSecureBootMode(STANDARD_SECURE_BOOT_MODE);
&gt;|     }

(This comes from historical commit f71ed839e1b5, dated 2013-01-09, which
says &quot;Set the secure boot state to Standard Mode when user leaving
secure boot setup page&quot;.)

Another example, from &quot;OvmfPkg/EnrollDefaultKeys/EnrollDefaultKeys.c&quot;:

&gt;|   //
&gt;|   // Enter Custom Mode so we can enroll PK, KEK, db, and dbx without signature
&gt;|   // checks on those variable writes.
&gt;|   //
&gt;| ...
&gt;|   //
&gt;|   // Leave Custom Mode, so that updates to PK, KEK, db, and dbx require valid
&gt;|   // signatures.
&gt;|   //
&gt;| ...

So the behavior you are seeing is by design -- &quot;Custom Mode&quot; is not a
permanent setting, but a temporary mode for agents such as
SecureBootConfigDxe, and OVMF&apos;s &quot;EnrollDefaultKeys.efi&quot;.


At the end of &quot;EnrollDefaultKeys/EnrollDefaultKeys.c&quot;, there is a
&quot;diagram&quot; which attempts to organize the SB-related &quot;control variables&quot;
into a tree:

&gt;|   //                                 [SetupMode]
&gt;|   //                        (read-only, standardized by UEFI)
&gt;|   //                                /                \_
&gt;|   //                               0               1, default
&gt;|   //                              /                    \_
&gt;|   //                      PK enrolled                   no PK enrolled yet,
&gt;|   //              (this is called &quot;User Mode&quot;)          PK enrollment possible
&gt;|   //                             |
&gt;|   //                             |
&gt;|   //                     [SecureBootEnable]
&gt;|   //         (read-write, edk2-specific, boot service only)
&gt;|   //                /                           \_
&gt;|   //               0                         1, default
&gt;|   //              /                               \_
&gt;|   //       [SecureBoot]=0                     [SecureBoot]=1
&gt;|   // (read-only, standardized by UEFI)  (read-only, standardized by UEFI)
&gt;|   //     images are not verified         images are verified, platform is
&gt;|   //                                      operating in Secure Boot mode
&gt;|   //                                                 |
&gt;|   //                                                 |
&gt;|   //                                           [CustomMode]
&gt;|   //                          (read-write, edk2-specific, boot service only)
&gt;|   //                                /                           \_
&gt;|   //                          0, default                         1
&gt;|   //                              /                               \_
&gt;|   //                      PK, KEK, db, dbx                PK, KEK, db, dbx
&gt;|   //                    updates are verified          updates are not verified

&quot;Standard mode&quot; is just a symbolic name for CustomMode=0.

This upstream tracker does not have a NOTABUG resolution, so I&apos;m closing
this ticket as INVALID. Please reopen it if you encounter further
issues. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13542</commentid>
    <comment_count>2</comment_count>
    <who name="Daniel Black">daniel</who>
    <bug_when>2020-08-26 21:03:28 +0000</bug_when>
    <thetext>Thanks for the detailed explanation.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2332</bug_id>
          
          <creation_ts>2019-11-10 20:19:07 +0000</creation_ts>
          <short_desc>Exiting a shell application using StdLib does not flush the file buffers.</short_desc>
          <delta_ts>2019-12-06 14:53:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Tim Lewis">tim.lewis</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>StdLib</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10380</commentid>
    <comment_count>0</comment_count>
    <who name="Tim Lewis">tim.lewis</who>
    <bug_when>2019-11-10 20:19:07 +0000</bug_when>
    <thetext>If there is a \n at the end of the fprintf statement, it will show. If there is none, it will not.

usage(void)
{
  (void)fprintf(stderr, &quot;usage: which [-as] program ...\n&quot;);
  exit(0);
}

Per the opengroup standard:

OpenGroup says:
https://pubs.opengroup.org/onlinepubs/009695399/functions/exit.html

The exit() function shall then flush all open streams with unwritten buffered data, close all open streams, and remove all files created by tmpfile(). Finally, control shall be terminated with the consequences described below.

I believe all the other standard C library definitions have the same language.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10442</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 20:25:47 +0000</bug_when>
    <thetext>Mike: find the people for StdLib issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10635</commentid>
    <comment_count>2</comment_count>
    <who name="Tim Lewis">tim.lewis</who>
    <bug_when>2019-12-06 14:53:05 +0000</bug_when>
    <thetext>The StdLib does in fact flush all buffers upon exit in the _cleanup function. There are two cases that make the StdLib appear to malfunction:

1) printf &quot;abc&quot;
In this case, the characters &quot;abc&quot; are in fact written to the console, but upon return from the app, the FS0: characters are written over the top. This can be verified by breaking just after the fflush(NULL) call in _cleanup.

2) printf
In this case, the printf app is trying to print out the usage information to stderr, which is normal for most BSD apps. However, stderr is mapped to ConSplitter which does not have any consoles attached to ErrOut. As a result the output is just thrown away. I think perhaps the shell should re-route stderr to stdout if there is no valid stderr device specified by the firmware implementation

But in either case StdLib is still ok.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2800</bug_id>
          
          <creation_ts>2020-06-12 18:26:30 +0000</creation_ts>
          <short_desc>Add new instance of BaseLib that for host based unit tests called UnitTestHostBaseLib</short_desc>
          <delta_ts>2020-08-14 01:54:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>ard.biesheuvel</cc>
    
    <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12861</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 18:26:30 +0000</bug_when>
    <thetext>The MdePkg contains a full implementation of BaseLib.  Some of the services in BaseLib use privileged instructions that generate exceptions when executed in host based unit test application.

A new version of the BaseLib that does not use any privileged instructions would allow host based unit tests for components that use BaseLib to execute without exceptions.  The recommended name of this new version is UnitTestHostBaseLib.

The BaseLib is special because some of its services are used by the Unit Test Framework or unit test code itself.  BaseLib services may also be used by the code under test in a unit test.  A unit test may also need to provide some basic emulation of the BaseLib services that typically use privileged instructions or provide information about the execution environment.  In order to avoid requiring a unit test to provide a full copy of the BaseLib sources, a simple mechanism for a unit test to hook BaseLib services that typically use privileged instructions or system state info would minimize the size of the unit test sources.  For example a unit test for a function that uses AsmReadMsr64() and AsmWriteMsr64() may need to provide some basic emulation of a few MSR registers.

Requirements
------------
* New BaseLib instance that is safe for use host base unit test
* Allow unit tests to hook individual BaseLib services that typically use privileged instructions or provide system state.

Options to consider for hooking BaseLib services:
------------------------------------------------
1) Make a full copy of BaseLib into unit test and customize the implementation services that need emulation.

2) Define a new library class for BaseLib services that typically use privileged instructions or provide system state info.  Update current BaseLib implementation to produce both BaseLib and the new library class and update all DSC files to provide a lib mapping for the new library class.  Add a new implementation of the new library class that calls all the services through a protocol like structure and provide a default implementation of the services in the protocol like structure that are safe for host based unit test applications.

3) Similar to (2) without the new lib class and no need to update any DSC files.
A new instance of BaseLib uses a protocol like structure to provide services that typically use privileged instructions or provide system state info and the BaseLib functions call the services in the protocol like structure.  The default services registered in the protocol like structure provide basic emulation of the services that use privileged instructions.

NOTE: Option (2) and (3) both require some minor changes to the current BaseLib implementation to make sure source files do not contain a mix of services that do and do not use privileged instructions.

In order to reduce duplicate source files and reduce the impact to DSC files, Option (3) is recommended.

Common BaseLib Service Hooks
----------------------------
EnableInterrupts
DisableInterrupts
EnableDisableInterrupts
GetInterruptState

IA32/X64 BaseLib Service Hooks
------------------------------
AsmCpuid
AsmCpuidEx
AsmDisableCache
AsmEnableCache
Asm Read/Write Msr64
Asm Read/Write Crx
Asm Read/Write Drx
Asm Read/Write Cs/ds/Ex/Fs/Gs/SS/Tr/Ldtr
Asm Read/Write Idtr/Gdtr
AsmReadPmc
AsmMonitor
AsmMwait
AsmWbinvd
AsmInvd
AsmFlushCacheLine
Asm Enable/Disable Paging 32/64
*Thunk16*
AsmLfence
PatchInstructionX86

ARM BaseLib Service Hooks
-------------------------
Need input from ARM community members

AARCH64 BaseLib Service Hooks
-----------------------------
Need input from AARCH64 community members

RISCV BaseLib Service Hooks
---------------------------
Need input from RISCV community members

BaseLib Hook Data Structure
----------------------------
The structure used to hook BaseLib function is only needed by host based unit test applications and should not ever be used by firmware components.  The structure should be defined in a include file below MdePkg/Test so it is clear that this structure is related to tests. The proposed location is:

    MdePkg/Test/UnitTest/Include/HostTest/UnitTestHostBaseLib.h

The MdePkg/MdePkg.dec [Includes] section need a new path added:

    [Includes]
      Include
      Test/UnitTest/Include

The new BaseLib implementation for host based unit tests and unit tests that need to hook BaseLib services need to include the file that defines this new structure:

    #include &lt;HostTest/UnitTestHostBaseLib.h&gt;

The recommended name for this new structure is UNIT_TEST_HOST_BASE_LIB.

Open Issues
------------
1) Should UNIT_TEST_HOST_BASE_LIB provide hooks for common services and all CPU 
specific services.  Or should there be one structure for common services and a separate structure for each supported CPU architecture?

2) Should hooks for all CPU architecture be available at once, or should only the hooks for one active CPU architecture be available.  Current BaseLib implementation uses #ifdef to produce different set of services for the active CPU arch.  A host based unit test could be for code under test that supports multiple CPU archs and may need to provide hooks for multiple CPU arch specific BaseLib services.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12862</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 18:26:44 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13073</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-09 00:14:22 +0000</bug_when>
    <thetext>Open #1: Decided to split hooks into a Common structure and an X86 structure
and have the main structure be pointers to the Common and X86 structures.
This allows new Common or CPU specific services to be added to the end of the 
associated structure.  New CPU archs can be added to the end of the 
main structure.

typedef struct {
  UNIT_TEST_HOST_BASE_LIB_VOID          EnableInterrupts;
  UNIT_TEST_HOST_BASE_LIB_VOID          DisableInterrupts;
  UNIT_TEST_HOST_BASE_LIB_VOID          EnableDisableInterrupts;
  UNIT_TEST_HOST_BASE_LIB_READ_BOOLEAN  GetInterruptState;
} UNIT_TEST_HOST_BASE_LIB_COMMON;

typedef struct {
  UNIT_TEST_HOST_BASE_LIB_ASM_CPUID                    AsmCpuid;
  UNIT_TEST_HOST_BASE_LIB_ASM_CPUID_EX                 AsmCpuidEx;
...
} UNIT_TEST_HOST_BASE_LIB_X86;

typedef struct {
  UNIT_TEST_HOST_BASE_LIB_COMMON  *Common;
  UNIT_TEST_HOST_BASE_LIB_X86     *X86;
} UNIT_TEST_HOST_BASE_LIB;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13074</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-09 00:16:42 +0000</bug_when>
    <thetext>Open #2: To start with, all the services are available at once.  This
is easy now with support for only IA32/X64.  The main limitation is the
CPU arch of the Host CI system which is X64 in Azure Pipelines.

Some #ifdefs on CPU arch may have to be added int he future if more
CPU arch are supported in the CI host envs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13261</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:01:01 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13268</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:07:53 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/5d29e2d020e8b0ad70f3f766c38429c3bfad0d41
https://github.com/tianocore/edk2/commit/9a6c4ac68e3d9590cf17914e07e929a1f0e7c190
https://github.com/tianocore/edk2/commit/133891b712a9ceda0fbdb9649b559773e4cdc6db
https://github.com/tianocore/edk2/commit/75e92c13541672a3af349067a040b9dda3d4452d
https://github.com/tianocore/edk2/commit/26824851b041d9e81921ec7ef97220d2a2576157
https://github.com/tianocore/edk2/commit/425df6923ec00df32bb6f20d1440a2e920f0e1e7
https://github.com/tianocore/edk2/commit/77e42ca4dfbf51918d677f32ab64bb99dd07cc40
https://github.com/tianocore/edk2/commit/813c2b15255406f587484ffcedfd01ca9ab5d056
https://github.com/tianocore/edk2/commit/f08715947ad52ee4fd67358660860ea63a532e15
https://github.com/tianocore/edk2/commit/35f9d7c41b380d67953dabc5994a65e32baa7d39
https://github.com/tianocore/edk2/commit/a0a49eb87c5819a76a0a5fea81d2b51ffdfcb3aa
https://github.com/tianocore/edk2/commit/540fd45f755f1646e019099c90c9f59286604228
https://github.com/tianocore/edk2/commit/d3c9e40abcc839f59d56b7fca7787647533d96fe
https://github.com/tianocore/edk2/commit/0a81a98e900118857395b101f413c1c17b66c073
https://github.com/tianocore/edk2/commit/9af8a299cec10656b757ae30a71c1310260d3c31
https://github.com/tianocore/edk2/commit/5b86bbf891677882a9d097f87cd0128562c12c43

Pull Request:

https://github.com/tianocore/edk2/pull/779</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13402</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-08-14 01:50:09 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2225</bug_id>
          
          <creation_ts>2019-09-29 21:18:04 +0000</creation_ts>
          <short_desc>GCC build failure in SimicsOpenBoardPkg</short_desc>
          <delta_ts>2019-11-06 18:17:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>SimicsOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          <cc>michael.a.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9876</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-09-29 21:18:04 +0000</bug_when>
    <thetext>GCC5 failure log:
/work/18aeee8667f69f6c/edk2-platforms/Platform/Intel/SimicsOpenBoardPkg/Library/PlatformBootManagerLib/BdsPlatform.c: In function ‘PlatformBootManagerBeforeConsole’:
 /work/18aeee8667f69f6c/edk2-platforms/Platform/Intel/SimicsOpenBoardPkg/Library/PlatformBootManagerLib/BdsPlatform.c:344:33: error: variable ‘Status’ set but not used [-Werror=unused-but-set-variable]
    EFI_STATUS                    Status;
                                  ^
 cc1: all warnings being treated as errors
 make: *** [/work/18aeee8667f69f6c/Build/SimicsX58Ia32X64/DEBUG_GCC5/X64/SimicsOpenBoardPkg/Library/PlatformBootManagerLib/PlatformBootManagerLib/OUTPUT/BdsPlatform.obj] Error 1
 
 
 GNUmakefile:402: recipe for target &apos;/work/18aeee8667f69f6c/Build/SimicsX58Ia32X64/DEBUG_GCC5/X64/SimicsOpenBoardPkg/Library/PlatformBootManagerLib/PlatformBootManagerLib/OUTPUT/BdsPlatform.obj&apos; failed
 build.py...
  : error 7000: Failed to execute command
    make tbuild [/work/18aeee8667f69f6c/Build/SimicsX58Ia32X64/DEBUG_GCC5/X64/SimicsOpenBoardPkg/Library/PlatformBootManagerLib/PlatformBootManagerLib]
 
 
 build.py...
  : error F002: Failed to build module
    /work/18aeee8667f69f6c/edk2-platforms/Platform/Intel/SimicsOpenBoardPkg/Library/PlatformBootManagerLib/PlatformBootManagerLib.inf [X64, GCC5, DEBUG]
 
 - Failed -</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10240</commentid>
    <comment_count>1</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-10-30 14:19:17 +0000</bug_when>
    <thetext>patch sent to the edk2 mailing list for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10350</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-06 18:17:41 +0000</bug_when>
    <thetext>Fixed in the following commit - https://github.com/tianocore/edk2-platforms/commit/9cd22ae579f4d4eb45e7b05973c2640134f8c8a5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2686</bug_id>
          
          <creation_ts>2020-04-22 07:09:56 +0000</creation_ts>
          <short_desc>PCD default value is unexpected when using GUID(gXXXX) syntax to describe a list GUIDs in PCD</short_desc>
          <delta_ts>2020-05-18 03:05:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dakota Chiang">dakota.chiang</reporter>
          <assigned_to>yunhuax.feng</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yunhuax.feng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable201908</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12275</commentid>
    <comment_count>0</comment_count>
    <who name="Dakota Chiang">dakota.chiang</who>
    <bug_when>2020-04-22 07:09:56 +0000</bug_when>
    <thetext>In platform sample code, I set a MdeModulePkg PCD in dsc file with GUID data array by using the syntax GUID(gXXXGuid) as below:

gEfiMdeModulePkgTokenSpaceGuid.PcdSystemFmpCapsuleImageTypeIdGuid|{GUID(gFmpDevicePlatformMonolithicGuid), GUID(gFmpDevicePlatformBiosGuid), GUID(gFmpDevicePlatformMeGuid), GUID(gFmpDevicePlatformEcGuid)}

GUID value is defined in platform DEC file:

gFmpDevicePlatformMonolithicGuid      =  {0x7FEB1D5D, 0x33F4, 0x48D3, {0xBD, 0x11, 0xC4, 0xB3, 0x6B, 0x6D, 0x0E, 0x57}}
gFmpDevicePlatformBiosGuid            =  {0x6C8E136F, 0xD3E6, 0x4131, {0xAC, 0x32, 0x46, 0x87, 0xCB, 0x4A, 0xBD, 0x27}}
gFmpDevicePlatformMeGuid              =  {0x0EAB05C1, 0x766A, 0x4805, {0xA0, 0x39, 0x30, 0x81, 0xDE, 0x02, 0x10, 0xC7}}
gFmpDevicePlatformEcGuid              =  {0x3DD84775, 0xEC79, 0x4ECB, {0x84, 0x04, 0x74, 0xDE, 0x03, 0x0C, 0x3F, 0x77}}

But somehow the value of GUID(gFmpDevicePlatformBiosGuid) is not correctly built in PCD database. The GUID value is replaced by another one which I have no idea where it came from:
  {0x5D,0x1D,0xEB,0x7F,0xF4,0x33,0xD3,0x48,0xBD,0x11,0xC4,0xB3,0x6B,0x6D,0x0E,0x57,0x62,0x22,0x6F,0x5C,0x78,0x31,0x33,0x5C,0x78,0x38,0x65,0x6C,0x5C,0x78,0x65,0x36,0xC1,0x05,0xAB,0x0E,0x6A,0x76,0x05,0x48,0xA0,0x39,0x30,0x81,0xDE,0x02,0x10,0xC7,0x75,0x47,0xD8,0x3D,0x79,0xEC,0xCB,0x4E,0x84,0x04,0x74,0xDE,0x03,0x0C,0x3F,0x77}, /* PcdSystemFmpCapsuleImageTypeIdGuid_a1aff049_fdeb_442a_b320_13ab4cb72bbc */</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12337</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-28 21:51:41 +0000</bug_when>
    <thetext>Bob, please take it and check what&apos;s wrong here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12441</commentid>
    <comment_count>2</comment_count>
    <who name="">yunhuax.feng</who>
    <bug_when>2020-05-07 05:31:13 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/58683</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12444</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-05-07 23:35:25 +0000</bug_when>
    <thetext>change status to in progress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12445</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-05-07 23:35:54 +0000</bug_when>
    <thetext>change status to in progress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12515</commentid>
    <comment_count>5</comment_count>
    <who name="">yunhuax.feng</who>
    <bug_when>2020-05-18 03:05:52 +0000</bug_when>
    <thetext>Fixed at edk2 master commit: ceacd9e992cd12f3c07ae1a28a75a6b8750718aa</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2481</bug_id>
          
          <creation_ts>2020-01-22 12:19:20 +0000</creation_ts>
          <short_desc>Makefile choice based on OS</short_desc>
          <delta_ts>2020-02-27 07:22:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2563</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pierre Gondois">pierre.gondois</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>sami.mujawar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10959</commentid>
    <comment_count>0</comment_count>
    <who name="Pierre Gondois">pierre.gondois</who>
    <bug_when>2020-01-22 12:19:20 +0000</bug_when>
    <thetext>Hello,

I am trying to build edk2 on a Windows host, with GCC and using GNU makefile.

It seems that currently, the build system is choosing the makefile type (nmake or GNU make) based on the toolchain used (cf. BaseTools\Conf\tools_defs.template). However, it is also choosing the makefile directives based on the host (Windows or not Windows).

Since I am using GCC, the build system generates GNU makefiles. I am on a Windows host, thus the build system is using nmake makefile directives. This leads to an error while building:

Output:
Makefile:296: *** missing separator.  Stop.

In the GNU makfile, l.296:
!INCLUDE $(MODULE_BUILD_DIR)\dependency

A nmake makefile directive has been generated in a GNU makefile.

I posted with the name &quot;[PATCH v1 1/1] BaseTools: Rationalise makefile generation &quot;. This should correct this. It is available at https://edk2.groups.io/g/devel/message/53190

Regards,
Pierre</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10970</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-23 06:48:30 +0000</bug_when>
    <thetext>Setting IN_PROGRESS status due to Pierre&apos;s patch from comment#0 already pending review on the list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11453</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 07:21:52 +0000</bug_when>
    <thetext>Patch committed as 818283de3f6d (&quot;BaseTools: Rationalise makefile generation&quot;, 2020-02-12).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11454</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 07:22:18 +0000</bug_when>
    <thetext>The commit caused a regression, see bug 2563.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2941</bug_id>
          
          <creation_ts>2020-08-28 12:31:42 +0000</creation_ts>
          <short_desc>HttpParseMessageBody spins forever in for loop when HTTP server does not provide Content-Length header</short_desc>
          <delta_ts>2020-10-09 07:03:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="Vladimir Olovyannikov">vladimir.olovyannikov</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>vladimir.olovyannikov</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13569</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2020-08-28 12:31:42 +0000</bug_when>
    <thetext>Consider this scenario.
An HTTP client sends a request
GET / HTTP/1.1
Host: www.server.com

And receives this reply from the HTTP server:
HTTP/1.1 200 OK
Server: nginx
Content-type: text/html

&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
Some text here
&lt;/body&gt;
&lt;/html&gt;

In this case, the header Content-Length is not defined.
Now, an HTTP parser starts its work (DxeHttpLib.c, HttpParseMessageBody() ).
It gets BodyLength as the length of the html section above with Parser-&gt;ContentLength set to 0. Therer is a for loop (line 1166)
for (Char = Body; Char &lt; Body + BodyLength; ) {
...
}

which will never break:
In line 1187 of the DxeHttpLib.c we have:

Char += MIN (BodyLength, Parser-&gt;ContentLength - Parser-&gt;ParsedBodyLength);
Note that we have Parser-&gt;ContentLength == 0, so this Char will always sit at Body address, and will never satisfy Char &gt;= Body + BodyLength.

This part must be rewritten like following:
1. declare a new var as a function variable:
UINTN PortionLength;

    case BodyParserBodyIdentity:
      //
      // Identity transfer-coding, just notify user to save the body data.
      //
      PortionLength = MIN (
                        BodyLength,
                        Parser-&gt;ContentLength - Parser-&gt;ParsedBodyLength
                        );
      if (!PortionLength) {
        PortionLength = BodyLength;
        Parser-&gt;ContentLength = PortionLength;
      }

      if (Parser-&gt;Callback != NULL) {
        Status = Parser-&gt;Callback (
                           BodyParseEventOnData,
                           Char,
                           PortionLength,
                           Parser-&gt;Context
                           );
        if (EFI_ERROR (Status)) {
          return Status;
        }
      }
      Char += PortionLength;
      Parser-&gt;ParsedBodyLength += PortionLength;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13570</commentid>
    <comment_count>1</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2020-08-28 14:29:19 +0000</bug_when>
    <thetext>Patch submitted for review here:
https://edk2.groups.io/g/devel/message/64765</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13928</commentid>
    <comment_count>2</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-10-09 07:03:39 +0000</bug_when>
    <thetext>Patch merged.
https://edk2.groups.io/g/devel/message/66062
https://github.com/tianocore/edk2/commit/70c2f10fde5b67b0d7d62ba7ea3271fc514ebcc4
https://github.com/tianocore/edk2/pull/997</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2355</bug_id>
          
          <creation_ts>2019-11-19 10:34:32 +0000</creation_ts>
          <short_desc>spelling mistake, &quot;defualt&quot; should be &quot;default&quot;</short_desc>
          <delta_ts>2020-08-03 15:09:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10471</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-19 10:34:32 +0000</bug_when>
    <thetext>Spelling mistake in debug message, spelling mistake &quot;defualt&quot; should be &quot;default&quot;

MdeModulePkg/Universal/BdsDxe/BdsEntry.c:    

DEBUG ((DEBUG_ERROR, &quot;Fail to allocate memory for defualt boot file path. Unable to boot.\n&quot;));</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13287</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 21:09:58 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13288</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 21:12:07 +0000</bug_when>
    <thetext>Patch review

https://edk2.groups.io/g/devel/message/63614</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13305</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-08-03 15:09:58 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/92b9639503ed1268e54bc5f6815702bb2876d85d

Pull Request

https://github.com/tianocore/edk2/pull/852</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2826</bug_id>
          
          <creation_ts>2020-06-26 13:56:13 +0000</creation_ts>
          <short_desc>OVMF bios corrupts files in shared folder of QEMU</short_desc>
          <delta_ts>2020-06-26 16:30:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Valentine">val15032008</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12950</commentid>
    <comment_count>0</comment_count>
      <attachid>526</attachid>
    <who name="Valentine">val15032008</who>
    <bug_when>2020-06-26 13:56:13 +0000</bug_when>
    <thetext>Created attachment 526
Corruption test archive.

OVMF bios stably corrupts files.

1) I&apos;m using QEMU 4.0 port for Android &quot;Limbo&quot; ( https://github.com/limboemu/limbo ).

2) Tried several versions of OVMF:
– Gerd Hoffmann’s OVMF ia32 and x64 builds from https://www.kraxel.org/repos/jenkins/edk2/ ;
– Debian OVMF package from https://packages.debian.org/sid/all/ovmf/download ;
– some older 32/64-bit builds dated from 08.2019.

Steps to reproduce:
– create Intel x86/x64 VM;
– setup the VM to use OVMF x86/x64 bios, &quot;-bios efi32.fd&quot;, for example;
– mount only 1 HDD – the QEMU Shared folder;
– unpack to shared folder the attached archive __BIOS-TEST__.zip (there will be file &quot;uniide.exe.zip&quot;, leave it in shared folder as it is);
– run the Virtual Machine, wait for &quot;UEFI Interactive Shell&quot; prompt to appear (the shared folder should be mounted as FS0: by this time);
– reboot the VM either by &lt;Ctrl&gt;+&lt;Alt&gt;+&lt;Del&gt; or by &quot;hardware&quot; reset;
– wait again for UEFI shell prompt;
– shutdown the VM.

In shared folder will appear file &quot;NvVars&quot;, and the file &quot;uniide.exe.zip&quot; will become corrupted (size is not changed, different bytes at 0x1c000, doesn&apos;t open as zip anymore).

Did it several times, the file is always becomes broken.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12951</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-26 14:52:17 +0000</bug_when>
    <thetext>Hello Valentine,

I&apos;m going to close this BZ as INVALID, for the following two reasons.


(1) QEMU&apos;s &quot;-bios&quot; option should not be used for running  OVMF.

Please see &lt;https://edk2.groups.io/g/discuss/message/287&gt; why.

The &quot;NvVars&quot; file that you see appear is related to the &quot;fake the UEFI variable runtime services&quot; that I mention in the above-linked mailing list message.

Please see the following message for the basic QEMU command line options that are related to OVMF: &lt;https://edk2.groups.io/g/discuss/message/285&gt;.


(2) The more important reason for this BZ to be invalid is that the FAT file system is not a concurrent-access filesystem. When the FAT driver in edk2 (which is built into OVMF) accesses a FAT filesystem, it does not expect any other agent to manipulate the same filesystem concurrently.

I don&apos;t exactly know how &quot;limboemu&quot; prepares the FAT filesystem / HDD that is accessed from within the guest (with OVMF), but you&apos;re calling it &quot;QEMU Shared folder&quot;, and &quot;shared folder&quot; is a *huge* red flag. It implies that both the host and the guest are accessing it at the same time. (Alternatively, two guests, at the same time.)

That&apos;s bound to break *by design*, as the FAT filesystem is simply unsuitable for concurrent accesses by separate agents / drivers.

As a special case of the above, I can imagine that &quot;limboemu&quot; uses the &quot;vvfat&quot; block driver of QEMU, and with &quot;write support&quot; enabled at that. I&apos;m uncertain if that&apos;s the case, but &quot;vvfat&quot; is utterly unusable for production purposes.

--*--

If you want to share files between host and guest, the following are your options, speaking in general:

- NFS, set up between host and guest, using networking,
- sshfs / sftp, ditto,
- &quot;usb-mtp&quot; device model of QEMU (see &quot;hw/usb/dev-mtp.c&quot;),
- virtio-fs &lt;https://virtio-fs.gitlab.io/&gt;

As far as I know however, none of these options are available to the guest UEFI environment provided by OVMF, at this time. Currently, there is no way to exchange files (back and forth) between the host, and (for example) the UEFI shell in the guest. For such a file exchange, you have to pre-format a FAT disk image, give it to the guest (the host must not access it concurrently), let the UEFI agent do whatever it has to do, power down the guest, and *then* re-open the disk image on the host again, and consume the output.

Thanks
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12952</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-26 15:04:36 +0000</bug_when>
    <thetext>If the corruption reproduces even under the following conditions:

- host access to the filesystem / guest disk image is strictly isolated from the guest&apos;s entire lifetime, and

- the VM is rebooted with the &quot;reset -c&quot; or &quot;reset -w&quot; UEFI shell commands (and not by a simulated power loss),

then a ticket, related to write caching, should be opened for the FAT driver (&quot;FatPkg/EnhancedFatDxe&quot;).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12953</commentid>
    <comment_count>3</comment_count>
    <who name="Valentine">val15032008</who>
    <bug_when>2020-06-26 16:30:35 +0000</bug_when>
    <thetext>Wow, thank you very much, &quot;-pflash&quot; helped completely!

Just a thought: maybe a stop with a message suggesting to mount bios file as flash memory instead of ROM (if it is possible to detect it from bios) would be better than corrupted files on virtual disks. :)

Anyway, the solution is: use &quot;-pflash uefi.fd&quot; instead of &quot;-bios uefi.fd&quot;.

Thank you for help and good luck!
With best regards,
Valentine.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>526</attachid>
            <date>2020-06-26 13:56:13 +0000</date>
            <delta_ts>2020-06-26 13:56:13 +0000</delta_ts>
            <desc>Corruption test archive.</desc>
            <filename>__BIOS-TEST__.zip</filename>
            <type>application/zip</type>
            <size>151331</size>
            <attacher name="Valentine">val15032008</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2249</bug_id>
          
          <creation_ts>2019-10-07 14:21:43 +0000</creation_ts>
          <short_desc>Assign unique token space GUID to SimicsOpenBoardPkg PCDs</short_desc>
          <delta_ts>2019-10-16 14:44:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>SimicsOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9930</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-07 14:21:43 +0000</bug_when>
    <thetext>PCDs declared in the SimicsOpenBoardPkg currently use the GUID gBoardModuleTokenSpaceGuid.

The same name is used in other board packages (updates are tracked in dedicated BZ) and a package has been added called BoardModulePkg so this name is now misleading.

The name should be changed to a unique GUID value and name for the package such as gSimicsOpenBoardPkgTokenSpaceGuid.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9957</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-08 17:25:18 +0000</bug_when>
    <thetext>Patch list sent for code review on the mailing list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10039</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-10-16 14:44:53 +0000</bug_when>
    <thetext>Submitted in commit cd022cf92de820fb0ebc5f9eb3e73d54a9004bfc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2710</bug_id>
          
          <creation_ts>2020-05-09 02:15:07 +0000</creation_ts>
          <short_desc>Add Features/Intel/OutOfBandManagement/SpcrFeaturePkg</short_desc>
          <delta_ts>2020-06-08 04:50:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>ming.tan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12462</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-05-09 02:15:07 +0000</bug_when>
    <thetext>Add SpcrFeaturePkg in Add Features/Intel/OutOfBandManagement.
It is used to support the Serial Port Console Redirection Table (SPCR).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12463</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-05-09 02:15:57 +0000</bug_when>
    <thetext>I will summit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12464</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-05-09 02:18:02 +0000</bug_when>
    <thetext>A patch is read for code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12812</commentid>
    <comment_count>3</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-08 04:50:30 +0000</bug_when>
    <thetext>A patch already was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2604</bug_id>
          
          <creation_ts>2020-03-18 05:02:54 +0000</creation_ts>
          <short_desc>Build fail with VS2019</short_desc>
          <delta_ts>2020-04-01 10:20:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2637</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>guomin.jiang</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11730</commentid>
    <comment_count>0</comment_count>
      <attachid>486</attachid>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-18 05:02:54 +0000</bug_when>
    <thetext>Created attachment 486
Add Dlink Flags For VS2019 X64

Build fail with command &apos;build -p EmulatorPkg\EmulatorPkg.dsc -b DEBUG -t VS2019 -a X64&apos;.

The reason is because VS2019 have no valid link flag, as attachment.
the left is original code, the right is the change which can fix the issue.

It is only for VS2019 X64, IA32 should be considered when fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11749</commentid>
    <comment_count>1</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-20 01:38:50 +0000</bug_when>
    <thetext>Provide the patch https://edk2.groups.io/g/devel/message/56049 for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12005</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-04-01 10:20:35 +0000</bug_when>
    <thetext>Duplicate with https://bugzilla.tianocore.org/show_bug.cgi?id=2637.

*** This bug has been marked as a duplicate of bug 2637 ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>486</attachid>
            <date>2020-03-18 05:02:54 +0000</date>
            <delta_ts>2020-03-18 05:02:54 +0000</delta_ts>
            <desc>Add Dlink Flags For VS2019 X64</desc>
            <filename>AddDlinkFlagsForVS2019.PNG</filename>
            <type>image/png</type>
            <size>45019</size>
            <attacher>guomin.jiang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2967</bug_id>
          
          <creation_ts>2020-09-16 06:08:35 +0000</creation_ts>
          <short_desc>GenCfgOpt.py should take the consistent behavior for the different options</short_desc>
          <delta_ts>2020-10-11 22:47:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>gaoliming</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13692</commentid>
    <comment_count>0</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-16 06:08:35 +0000</bug_when>
    <thetext>For option UPDTXT, if DSC has no change, GenCfgOpt will report the message &quot;INFO: No DSC file change, skip to create UPD TXT file !&quot;

For option HEADER, if DSC has no change, GenCfgOpt will continue to do. It should check whether there is the change, then decide to do or not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13756</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 22:13:45 +0000</bug_when>
    <thetext>chasel.chiu@intel.com, can you check it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13759</commentid>
    <comment_count>2</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-22 22:21:10 +0000</bug_when>
    <thetext>Add Chasel</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13851</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-09-30 21:51:23 +0000</bug_when>
    <thetext>working on that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13940</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-10-11 22:47:47 +0000</bug_when>
    <thetext>commit cc942105ede58a300ba46f3df0edfa86b3abd4dd 
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Thu Oct 1 09:48:50 2020 +0800

    IntelFsp2Pkg/GenCfgOpt: skip unnecessarily header/BSF recreating.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2967

    When no change in FSP UPD DSC files, GenCfgOpt.py should skip
    recreating UPD header and BSF files.
    This patch added a check to handle this case.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2381</bug_id>
          
          <creation_ts>2019-11-24 15:28:04 +0000</creation_ts>
          <short_desc>Duplicate FILE_GUID used in PrePiLib and PrePiHobLib.</short_desc>
          <delta_ts>2021-03-17 14:34:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Matthew Carlson">macarl</assigned_to>
          <cc>afish</cc>
    
    <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>macarl</cc>
    
    <cc>quic_llindhol</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmbeddedPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10536</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-11-24 15:28:04 +0000</bug_when>
    <thetext>Illegal duplication of FILE_GUID 1F3A3278-82EB-4C0D-86F1-5BCDA5846CB2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13888</commentid>
    <comment_count>1</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-06 23:59:53 +0000</bug_when>
    <thetext>What&apos;s the status on this one?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13894</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-07 11:11:23 +0000</bug_when>
    <thetext>Not &quot;illegal&quot; but &quot;invalid&quot; (it&apos;s not unlawful, just wrong, to duplicate GUIDs). Otherwise, yes, this problem exists. Setting status to CONFIRMED.

The GUID in question was first given to &quot;EmbeddedPkg/Library/PrePiLib/PrePiLib.inf&quot;, in commit 2ef2b01e07c0, dated 2009-Dec-06. Then the GUID was reintroduced in &quot;EmbeddedPkg/Library/PrePiHobLib/PrePiHobLib.inf&quot;, in commit 65568970764e (&quot;Add supported for performance libraries.&quot;, 2010-04-13). So the bug is from commit 65568970764e.

A simple patch with a new GUID for &quot;EmbeddedPkg/Library/PrePiHobLib/PrePiHobLib.inf&quot; (from uuidgen) should suffice, IMO.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13902</commentid>
    <comment_count>3</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-07 14:09:27 +0000</bug_when>
    <thetext>Thanks Lazlo for the timely update. I agree that it&apos;s a small patch to fix. Just roll the GUID to something new. It&apos;s small enough that I&apos;ll stage a patch for this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13903</commentid>
    <comment_count>4</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-10-07 14:16:44 +0000</bug_when>
    <thetext>Patch sent to the mailing list</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15315</commentid>
    <comment_count>5</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2021-03-15 17:13:28 +0000</bug_when>
    <thetext>It looks like this was never merged in. Would a PR on GitHub help?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15316</commentid>
    <comment_count>6</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2021-03-15 19:34:19 +0000</bug_when>
    <thetext>It looks like this was never merged in. Would a PR on GitHub help?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15318</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-16 12:09:15 +0000</bug_when>
    <thetext>Hi Matthew,

assuming I found the proper patch thread (alluded to in comment 4): the patch wasn&apos;t merged because Ard requested some corrections. Please see here:

https://edk2.groups.io/g/devel/message/66001</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15319</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-16 12:09:37 +0000</bug_when>
    <thetext>(Patch was posted, setting IN_PROGRESS.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15323</commentid>
    <comment_count>9</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2021-03-16 14:14:01 +0000</bug_when>
    <thetext>Thanks, Lazlo, I missed that email from Ard (since it goes to my personal email, not my work). Ard had some great points and I will repost the series with corrections.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15349</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-17 14:34:34 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH v2 0/1] Fix GUID in PrePiHobLib

msgid: &lt;20210316195312.1762-1-matthewfcarlson@gmail.com&gt;
https://edk2.groups.io/g/devel/message/72935
https://listman.redhat.com/archives/edk2-devel-archive/2021-March/msg00682.html


Merged by Ard as commit 66a31de7eeed (&quot;EmbeddedPkg/PrePiHobLib: replace duplicate GUID&quot;, 2021-03-16), via &lt;https://github.com/tianocore/edk2/pull/1496&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2850</bug_id>
          
          <creation_ts>2020-07-14 02:07:43 +0000</creation_ts>
          <short_desc>Generate compile_commands.json file needed by clangd VS Code plugin</short_desc>
          <delta_ts>2023-03-13 16:35:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Guillermo A Palomino Sosa">guillermo.a.palomino.sosa</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>daniel.schaefer</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>guillermo.a.palomino.sosa</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>nobody</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13096</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-07-14 02:07:43 +0000</bug_when>
    <thetext>In order for clangd to understand the source code, a compile_commands.json file needs to supplied to clangd.

Refer to http://clang.llvm.org/docs/JSONCompilationDatabase.html for detailed information on how the file looks like.

Basically the file contains the information of how each source file is compiled.

In my opinion, the information is similar to what a top-level make file contains.

CMake project can generate such file by
 setting -DCMAKE_EXPORT_COMPILE_COMMANDS=1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13204</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-28 22:05:46 +0000</bug_when>
    <thetext>Ray: can you provide more background for this request?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13765</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-09-23 02:34:23 +0000</bug_when>
    <thetext>I am using Visual Studio Code and found its default source code navigation doesn&apos;t work very well. There is a clangd extension that supports code navigation as well but it needs the compile_commands.json. Actually this json file is very similar to the top level make file once we discussed in tool domain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13846</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-29 21:48:48 +0000</bug_when>
    <thetext>Ray: would you contribute the proposal and change for this request?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15065</commentid>
    <comment_count>4</comment_count>
    <who name="Daniel Schaefer">daniel.schaefer</who>
    <bug_when>2021-02-12 03:49:15 +0000</bug_when>
    <thetext>Someone has made a patch for EDK2 to support this: https://github.com/makaleks/edk2-tools/tree/master/compilation_database_patch
I tried it on the edk2-stable202008 tag but it doesn&apos;t work anymore. My build crashes without a useful error message. I haven&apos;t tried to debug this.
Since it&apos;s a very simple patch, I think it&apos;s not a bad idea to try to make this work again.

What I did instead was to use the bear [1] tool and run the EDK2 build using that. It intercepts all the compiler calls and records them. That works fine.

[1] https://github.com/rizsotto/Bear</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20997</commentid>
    <comment_count>5</comment_count>
    <who name="Guillermo A Palomino Sosa">guillermo.a.palomino.sosa</who>
    <bug_when>2023-02-07 12:26:04 +0000</bug_when>
    <thetext>I have sent a patch that extends Build report functions to create the build database +some other useful files:
https://edk2.groups.io/g/devel/message/99716

This adds the -Y REPORT_INFO and will create following files in the build folder:

&lt;Build&gt;/&lt;BuildTarget&gt;/&lt;ToolChain&gt;/CompileInfo

* compile_commands.json - Compilation Database. To be used by IDE&apos;s
  to enable advance features
* cscope.files - List of files used in compilation. Used by Cscope to parse
  C code and provide browse functionality.
* module_report.json - Module data form buildReport in Json format.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20998</commentid>
    <comment_count>6</comment_count>
      <attachid>1320</attachid>
    <who name="Guillermo A Palomino Sosa">guillermo.a.palomino.sosa</who>
    <bug_when>2023-02-07 12:27:19 +0000</bug_when>
    <thetext>Created attachment 1320
Extends build report functionality with -Y REPORT_INFO</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21059</commentid>
    <comment_count>7</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2023-02-14 21:59:02 +0000</bug_when>
    <thetext>Include Bob. 

For new feature, it should be added into BaseTools Python project first (https://github.com/tianocore/edk2-basetools).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21123</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2023-02-28 21:34:42 +0000</bug_when>
    <thetext>Guillermo has sent the patch for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21182</commentid>
    <comment_count>9</comment_count>
    <who name="Guillermo A Palomino Sosa">guillermo.a.palomino.sosa</who>
    <bug_when>2023-03-13 16:35:39 +0000</bug_when>
    <thetext>Code has been submitted:
 https://github.com/tianocore/edk2/commit/4ad7ea9c842289aed6ed519f9fce33cf37cfc2a9</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1320</attachid>
            <date>2023-02-07 12:27:19 +0000</date>
            <delta_ts>2023-02-07 12:27:19 +0000</delta_ts>
            <desc>Extends build report functionality with -Y REPORT_INFO</desc>
            <filename>0001-BaseTools-Generate-compile-information-in-build-repo.patch</filename>
            <type>text/plain</type>
            <size>12750</size>
            <attacher name="Guillermo A Palomino Sosa">guillermo.a.palomino.sosa</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2733</bug_id>
          
          <creation_ts>2020-05-20 21:56:37 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-20 22:16:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2736</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12582</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 21:56:37 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12605</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:16:48 +0000</bug_when>
    <thetext>Oops. Too much automation.

*** This bug has been marked as a duplicate of bug 2736 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2159</bug_id>
          
          <creation_ts>2019-09-06 02:24:14 +0000</creation_ts>
          <short_desc>KabylakeOpenBoardPkg: Missed 64KB Temporary RAM in Dispatch mode.</short_desc>
          <delta_ts>2019-09-11 01:09:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9483</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-09-06 02:24:14 +0000</bug_when>
    <thetext>In FSP Dispatch mode FSP will share the same Stack and Heap with bootloader, no need to reserve separate temporary RAM for FSP.
Set PcdFspTemporaryRamSize to 0 in Dispatch mode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9597</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-09-11 01:09:16 +0000</bug_when>
    <thetext>commit 56853b02df78b7ba5653c919f0b470545849f868 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Sep 6 11:54:20 2019 +0800

    KabylakeOpenBoardPkg: Missed 64KB Temporary RAM in Dispatch mode.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2159

    FSP Dispatch mode will share same stack and heap with
    bootloader so we should not reserve separate temporary
    ram for FSP.
    Set PcdFspTemporaryRamSize to 0 in Dispatch mode.

    Test: internal platform can boot with FSP Dispatch mode
          with 64KB temporary RAM back.

    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2628</bug_id>
          
          <creation_ts>2020-03-24 02:02:02 +0000</creation_ts>
          <short_desc>CLANGPDB toolchain in IA32 mode generates large binaries</short_desc>
          <delta_ts>2020-04-09 05:32:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to name="Vitaly Cheptsov">vit9696</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nms</cc>
    
    <cc>nobody</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11794</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-03-24 02:02:02 +0000</bug_when>
    <thetext>In https://bugzilla.tianocore.org/show_bug.cgi?id=2397 and https://github.com/tianocore/edk2/commit/69c135462d9ef28b59a065ad45dc0089d8dacdd0 , CLANGPDB tool chain target was switched to GNU mode, which is a decent way to fix the static_assert issue.
However, I notice switching to GNU mode will increase image size of IA32 FV and reduce image size of X64 FV. Below is the data of OVMF.

Case 1:
  DEFINE CLANGPDB_IA32_TARGET          = -target i686-unknown-windows-gnu
  DEFINE CLANGPDB_X64_TARGET           = -target x86_64-unknown-windows-gnu
FV Space Information
  SECFV [11%Full] 212992 total, 24032 used, 188960 free
  PEIFV [22%Full] 917504 total, 201896 used, 715608 free
  DXEFV [31%Full] 12582912 total, 3927384 used, 8655528 free
  FVMAIN_COMPACT [34%Full] 3440640 total, 1179880 used, 2260760 free

Case 2:
  DEFINE CLANGPDB_IA32_TARGET          = -target i686-unknown-windows
  DEFINE CLANGPDB_X64_TARGET           = -target x86_64-unknown-windows
FV Space Information
  SECFV [10%Full] 212992 total, 21536 used, 191456 free
  PEIFV [18%Full] 917504 total, 174088 used, 743416 free
  DXEFV [32%Full] 12582912 total, 4035704 used, 8547208 free
  FVMAIN_COMPACT [35%Full] 3440640 total, 1212296 used, 2228344 free 

As we all know, image size is very important for firmware development. I suggest to use the following target to get the minimal image size.

DEFINE CLANGPDB_IA32_TARGET          = -target i686-unknown-windows
DEFINE CLANGPDB_X64_TARGET           = -target x86_64-unknown-windows-gnu

Using target i686-unknown-windows, clang will define _MSC_EXTENSIONS and _MSC_VER. Therefore, for the static_assert issue, I suggest to use &quot;defined(_MSC_EXTENSIONS) &amp;&amp; !defined(__clang__)&quot;, which I agree is ugly, but have no better idea for now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11796</commentid>
    <comment_count>1</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-03-24 02:10:39 +0000</bug_when>
    <thetext>Hello,

Doing this straightforwardly sounds like a bad idea to me. Please do not do it. We should first try to investigate what exactly happens first at the very least.

1. 3 KB does not sound too much to me to require an immediate solution. Did it break more for you with Intel RC targets?

2. Is that RELEASE mode? Did you compare the resulting binaries and the particular reasons for size increase with e.g. BinDiff? If not, could you upload a couple of drivers?

3. Also, we have an ongoing discussion on CLANGPDB debugging issues here: https://edk2.groups.io/g/devel/topic/72100961.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11798</commentid>
    <comment_count>2</comment_count>
      <attachid>495</attachid>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-03-24 02:51:06 +0000</bug_when>
    <thetext>Created attachment 495
some driver generated by different target</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11799</commentid>
    <comment_count>3</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-03-24 02:53:06 +0000</bug_when>
    <thetext>Hi Vitaly, thanks for the immediate response. I give my answer below.

(In reply to Vitaly Cheptsov from comment #1)
&gt; Hello,
&gt; 
&gt; Doing this straightforwardly sounds like a bad idea to me. Please do not do
&gt; it. We should first try to investigate what exactly happens first at the
&gt; very least.
&gt; 
&gt; 1. 3 KB does not sound too much to me to require an immediate solution. Did
&gt; it break more for you with Intel RC targets?

Actaully, if you see the PEI FV, the difference is 27 KB, which is over 10%. 

&gt; 2. Is that RELEASE mode? Did you compare the resulting binaries and the
&gt; particular reasons for size increase with e.g. BinDiff? If not, could you
&gt; upload a couple of drivers?

No, it is Debug mode. I have upload some drivers, maybe you can help investigate.

&gt; 3. Also, we have an ongoing discussion on CLANGPDB debugging issues here:
&gt; https://edk2.groups.io/g/devel/topic/72100961.

Maybe we can discuss this issue there</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11802</commentid>
    <comment_count>4</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-03-24 03:29:46 +0000</bug_when>
    <thetext>The reason for the size increase is the last section of the file. It is named /4 in both of your files. This section looks like debug data of some kind, and it should be possible to strip it.

Unfortunately current llvm-objcopy has a bug, since it fails to parse a PE/COFF file with /4 section name. If you find 2F 34 00 00 00 00 bytes and replace them with 2E 64 65 62 75 67 via a hex editor, and then run llvm-objcopy --strip-unneeded on both files, the sizes will be identical.

I will need some time to investigate what is going on with LLD and llvm-objcopy. How soon do you need a fix? Depending on the results we can either build a custom tool or wait for an update in LLVM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11814</commentid>
    <comment_count>5</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-03-24 21:37:49 +0000</bug_when>
    <thetext>(In reply to Vitaly Cheptsov from comment #4)
Hi Vitaly,
Thanks very much for your explanation, this way will reduce the image size.
Do you know when LLVM community will fix this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11836</commentid>
    <comment_count>6</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-03-25 09:14:38 +0000</bug_when>
    <thetext>Zhiguang, this depends on how soon we report it. The issue with llvm-objcopy/llvm-readobj is a minor thing. The bigger issue is why LLD generates this section in the first place, this needs some debugging. Depending on how soon you need it I can prioritise looking at this on my schedule.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11866</commentid>
    <comment_count>7</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-03-26 19:24:32 +0000</bug_when>
    <thetext>So, the issue is as follows:

LLVM has SEH exception model used only for x86_64, and for i686 it will default to DWARF[1]. As a result .debug_frame section will be added.

The resulting binary is not stripped for CLANGPDB, so this .debug_frame is section is preserved.

GenSec utility removes symbol table, so after running GenSec the PE binary is not valid, and therefore llvm-objcopy/llvm-readobj will fail to parse it. This is not a problem, as we can use these utilities before running GenSec, but it is not nice that GenSec borks PE images.

I will need to think how to fix it best. There is a nuance of EDK II using legacy-style LTO linking by calling lld-link directly (which is barely supported by LLVM). Unlike clang, where -fseh-exceptions exists, LLD does not let you to configure exception handling model.

[1] https://github.com/CTSRD-CHERI/llvm-project/blob/c164b18dcba255b8df72e1914349f9b20d624233/llvm/lib/Target/X86/MCTargetDesc/X86MCAsmInfo.cpp#L151</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11875</commentid>
    <comment_count>8</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2020-03-27 06:51:53 +0000</bug_when>
    <thetext>Patch submitted:

https://edk2.groups.io/g/devel/message/56481

While the change I submitted works fine, this is really a workaround. What we do need is to properly resolve it on LLVM side. 

Directly related bugs:

https://bugs.llvm.org/show_bug.cgi?id=45324
https://bugs.llvm.org/show_bug.cgi?id=45325

Partially related bugs:

https://bugs.llvm.org/show_bug.cgi?id=45273
https://bugs.llvm.org/show_bug.cgi?id=45277

I request this bugzilla to not be closed until all the 4 are resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12115</commentid>
    <comment_count>9</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-07 22:17:18 +0000</bug_when>
    <thetext>Patch has been reviewed, to be merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12169</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-09 05:32:25 +0000</bug_when>
    <thetext>Apparently merged in commit d4bc5378e003 (&quot;BaseTools: Use SEH exceptions in CLANGPDB for IA32&quot;, 2020-04-08).</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>495</attachid>
            <date>2020-03-24 02:51:06 +0000</date>
            <delta_ts>2020-03-24 02:51:06 +0000</delta_ts>
            <desc>some driver generated by different target</desc>
            <filename>some_drive.7z</filename>
            <type>application/octet-stream</type>
            <size>22365</size>
            <attacher>zhiguang.liu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2522</bug_id>
          
          <creation_ts>2020-02-11 19:45:03 +0000</creation_ts>
          <short_desc>Adopt VariablePolicy, Deprecate VarLock and VarCheckPolicy.</short_desc>
          <delta_ts>2020-11-25 15:36:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3092</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Bret Barkelew">bret.barkelew</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11217</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-02-11 19:45:03 +0000</bug_when>
    <thetext>VariablePolicy is a proposal for an expanded “VarLock-like” interface to constrain and govern platform variables.
Full details can be found in the RFC email on the RFC and Devel mailing lists (subject: &quot;[RFC] VariablePolicy - Protocol, Libraries, and Implementation for VariableLock Alternative&quot;).

This BZ is being used to track the patches, discussion, and final adoption.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11218</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-02-11 19:57:34 +0000</bug_when>
    <thetext>Have started breaking the RFC up into code review patches in this branch:
https://github.com/corthon/edk2/tree/personal/brbarkel/var_policy_dev_submission</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11365</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:25:33 +0000</bug_when>
    <thetext>Bret, please take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11736</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-19 01:21:15 +0000</bug_when>
    <thetext>Bret is driving it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11740</commentid>
    <comment_count>4</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-19 14:29:38 +0000</bug_when>
    <thetext>Liming,
What&apos;s the next step? Start attaching patches?

I&apos;m going to email the edk2-platform maintainers today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12184</commentid>
    <comment_count>5</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-04-10 14:44:24 +0000</bug_when>
    <thetext>v1 patches can be found here:
https://edk2.groups.io/g/devel/message/57217</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12658</commentid>
    <comment_count>6</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 17:50:18 +0000</bug_when>
    <thetext>v4 of patches will be going out the mailing list, the TC wiki is updated with platform instructions, and all edk2-platform maintainers have been informed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12659</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-05-21 18:47:37 +0000</bug_when>
    <thetext>(In reply to Bret Barkelew from comment #6)
&gt; v4 of patches will be going out the mailing list, the TC wiki is updated
&gt; with platform instructions, and all edk2-platform maintainers have been
&gt; informed.

v3 patch series is on the list - https://edk2.groups.io/g/devel/message/60070

Bret, I think the list version is one behind what you&apos;re tracking on your fork.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12662</commentid>
    <comment_count>8</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-21 20:00:50 +0000</bug_when>
    <thetext>Agreed. v3 it is.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13769</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-23 04:55:56 +0000</bug_when>
    <thetext>Summary of patch set versions:

* [edk2-devel] [PATCH v1 0/9] Add the VariablePolicy feature
http://mid.mail-archive.com/MWHPR07MB3440C61EDC28D3447901CAEAE9DE0@MWHPR07MB3440.namprd07.prod.outlook.com
https://edk2.groups.io/g/devel/message/57217

* [edk2-devel] [PATCH v2 00/12] Add the VariablePolicy feature
http://mid.mail-archive.com/MWHPR07MB3440F5CB92F0D7DCF94AA14FE9BE0@MWHPR07MB3440.namprd07.prod.outlook.com
https://edk2.groups.io/g/devel/message/59233

* [edk2-devel] [PATCH v3 00/14] Add the VariablePolicy feature
http://mid.mail-archive.com/MWHPR07MB344099884131EEBACE77E6D9E9B70@MWHPR07MB3440.namprd07.prod.outlook.com
https://edk2.groups.io/g/devel/message/60070

* [edk2-devel] [PATCH v4 00/14] Add the VariablePolicy feature
http://mid.mail-archive.com/20200601163310.1718-1-brbarkel@microsoft.com
https://edk2.groups.io/g/devel/message/60528

* [edk2-devel] [PATCH v5 00/14] Add the VariablePolicy feature
http://mid.mail-archive.com/20200603065810.806-1-brbarkel@microsoft.com
https://edk2.groups.io/g/devel/message/60651

* [edk2-devel] [PATCH v6 00/14] Add the VariablePolicy feature
http://mid.mail-archive.com/20200623064104.1908-1-brbarkel@microsoft.com
https://edk2.groups.io/g/devel/message/61593

* [edk2-devel] [PATCH v7 00/14] Add the VariablePolicy feature
http://mid.mail-archive.com/20200828055127.1610-1-brbarkel@microsoft.com
https://edk2.groups.io/g/devel/message/64712

* [edk2-devel] [PATCH v8 00/14] Add the VariablePolicy feature
http://mid.mail-archive.com/20200923060748.3795-1-bret.barkelew@microsoft.com
https://edk2.groups.io/g/devel/message/65494</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14361</commentid>
    <comment_count>10</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-16 20:01:12 +0000</bug_when>
    <thetext>PR https://github.com/tianocore/edk2/pull/1128 is created.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14362</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-17 13:15:36 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #10)
&gt; PR https://github.com/tianocore/edk2/pull/1128 is created.

Commit range: d448574e7310..124b3f9289f1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14406</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-23 13:07:00 +0000</bug_when>
    <thetext>platform porting described at:

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14425</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-25 15:36:02 +0000</bug_when>
    <thetext>Note: commit 355b181f7405 (&quot;MdeModulePkg: Define the VariablePolicyLib&quot;, 2020-11-17) may cause a regression at OS runtime; see BZ 3092 for details.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2186</bug_id>
          
          <creation_ts>2019-09-11 20:58:55 +0000</creation_ts>
          <short_desc>Introduce new terminal type for terminal console driver</short_desc>
          <delta_ts>2019-10-07 22:39:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9630</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-09-11 20:58:55 +0000</bug_when>
    <thetext>Refer to https://www.ssh.com/ssh/putty/putty-manuals/0.68/Chapter4.html#config-funkeys. Introduce 4 terminal types for the terminal console driver. They are Linux, XtermR6, VT400 and SCO. Only add the support of function key.
And enhance the exist type VT100+.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9631</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-09-11 20:59:50 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9632</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-09-11 21:00:16 +0000</bug_when>
    <thetext>update the status</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9932</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-10-07 22:39:17 +0000</bug_when>
    <thetext>fixed at da63ba5174b67d10b8692298dd2fedff34d55014..590c9d58280bb0fad144f760c4da2acaf16622aa</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2650</bug_id>
          
          <creation_ts>2020-03-30 16:43:42 +0000</creation_ts>
          <short_desc>SCT2.7 &quot;BootServicesTest\ImageServicesTest&quot; Test Fail</short_desc>
          <delta_ts>2022-07-11 11:33:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashley.lu">ashley.lu</reporter>
          <assigned_to name="Edhay">edhaya.chandran</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>karunakaran.sagadevan</cc>
    
    <cc>nobody</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202002</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11930</commentid>
    <comment_count>0</comment_count>
      <attachid>502</attachid>
    <who name="Ashley.lu">ashley.lu</who>
    <bug_when>2020-03-30 16:43:42 +0000</bug_when>
    <thetext>Created attachment 502
Bugzila_attached

[Reproduce Step]
1. Run SCT2.7. (sct.efi -u) under Shell.
2. Select &quot;Test Case Management&quot;. Make sure &quot;BootServicesTest&quot; is selected.
3. After test finished, &quot;BootServicesTest\ImageServicesTest&quot; Test Fail.

Details:
This is related with UEFI-SCT tool.

Recently, edk2 has some improvements in Security function, it adds defense check with input parameters. 
Function checks File (EFI_DEVICE_PATH_PROTOCOL*) is NULL or not. 
https://github.com/tianocore/edk2/pull/356  
(Refer to the attached, &quot;DxeTpm2MeasureBootHandler-return-NULL.bmp&quot;)

But in the SCT2.7 BootServiceTest/ImageServicesTest, it calls gBS-&gt;LoadImage to load EFI images for verification and above functions verify input as well. 
(Refer to the attached, &quot;gtBS_LoadImage.png&quot;)
Then, it will get EFI_ACCESS_DENIED result because the input is NULL in BBTestLoadImageInterfaceTestCheckPoint3() and BBTestLoadImageInterfaceTestCheckPoint9(). 
That’s reason why ImageServiceTest is failed.
Moreover, UEFI spec also points out that input is not optional so it should not be NULL. 
(Refer to the attached, &quot;UEFI-spec.png&quot;.)
Hence, it looks like UEFI-SCT issue in our BIOS core team&apos;s opinion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11971</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-31 22:29:04 +0000</bug_when>
    <thetext>Supreeth, please check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12148</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-04-08 09:54:02 +0000</bug_when>
    <thetext>Edhaya: can you check it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14259</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-07 00:54:52 +0000</bug_when>
    <thetext>The UEFI spec writes for LoadImage() concerning return values:

EFI_NOT_FOUND | Both SourceBuffer and DevicePath are NULL.

So according to the spec it is allowable to have SourceBuffer or DevicePath with value NULL but not both. Calling LoadImage() with DevicePath=NULL is allowable in BBTestLoadImageInterfaceTestCheckPoint9().

On the other hand LoadImage() may return EFI_ACCESS_DENIED if the platform policy does not allow the image to be loaded.

LoadImage() returning EFI_ACCESS_DENIED should not result in FAIL. But as we cannot test the LoadImage() service if access is denied we cannot count it at a PASS either. Instead we should write a warning, e.g.

+  if (Status == EFI_ACCESS_DENIED) {^M
+    StandardLib-&gt;RecordMessage(^M
+                   StandardLib,^M
+                   EFI_VERBOSE_LEVEL_QUIET,^M
+                   L&quot;Platform policy denies access, Status - %r\n&quot;,^M
+                   Status^M
+                   );^M</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14261</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-11-07 01:03:06 +0000</bug_when>
    <thetext>https://bugzilla.tianocore.org/show_bug.cgi?id=2975
might be a duplicate bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14321</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-10 20:53:52 +0000</bug_when>
    <thetext>*** Bug 2975 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15477</commentid>
    <comment_count>6</comment_count>
    <who name="Ashley.lu">ashley.lu</who>
    <bug_when>2021-03-31 06:44:19 +0000</bug_when>
    <thetext>I&apos;ve re-Build edk2-stable202011 SCT.efi, re-Run BootServicesTest\ImageServicesTest on Apollo4200 Gen10Plus, Total 22 and PASS 22.

These failures have been fixed.
Please refer to the attached pass log file, edk2stable202011_PASS.csv.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15480</commentid>
    <comment_count>7</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-03-31 07:41:15 +0000</bug_when>
    <thetext>There has not been any change in uefi-sct/SctPkg/TestCase/UEFI/EFI/BootServices/ImageServices/BlackBoxTest/ImageBBTestFunction.c since 2018.

Handling EFI_ACCESS_DENIED is still not handled appropriately.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15481</commentid>
    <comment_count>8</comment_count>
    <who name="Ashley.lu">ashley.lu</who>
    <bug_when>2021-03-31 07:49:27 +0000</bug_when>
    <thetext>(In reply to Heinrich Schuchardt from comment #7)
&gt; There has not been any change in
&gt; uefi-sct/SctPkg/TestCase/UEFI/EFI/BootServices/ImageServices/BlackBoxTest/
&gt; ImageBBTestFunction.c since 2018.
&gt; 
&gt; Handling EFI_ACCESS_DENIED is still not handled appropriately.

Thanks. Then, it might be ROM fix?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17145</commentid>
    <comment_count>9</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-02 10:43:32 +0000</bug_when>
    <thetext>Heinrich to further analyse.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17292</commentid>
    <comment_count>10</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-09-17 00:28:47 +0000</bug_when>
    <thetext>The UEFI specification is kind of self-contradictory for LoadImage:

EFI_NOT_FOUND is to be returned if &quot;Both SourceBuffer and DevicePath are NULL.&quot;. This implies that it is allowable that any one of both may be NULL. It is not required to return EFI_INVALID_PARAMETER if DevicePath is NULL.

But DevicePath is not marked as optional.

Here a clarification in the specification is needed.

The UEFI specification is quite vague concerning what a platform policy might look like. So returning EFI_ACCESS_DENIED for whatever reason seems allowable.

In U-Boot when calling LoadImage() with a SourceBuffer of which we do not know from where it was loaded we supply a /MemoryMapped() device path. We could do the same in the test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17529</commentid>
    <comment_count>11</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-10-13 07:44:48 +0000</bug_when>
    <thetext>With commit
https://github.com/tianocore/edk2/commit/1755932f89e0b32fa09232661a5ae6c357f4e471
the devicepath argument in DxeTpm2MeasureBootHandler() has been declared optional.

We should mark DevicePath argument for boot-service LoadImage() as Optional in the spec too to avoid contradictions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17890</commentid>
    <comment_count>12</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-12-02 00:36:56 +0000</bug_when>
    <thetext>Edhay is following up the raising of ECR in UEFI Spec to change devicePath to OPTIONAL parameter in LoadImage()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19227</commentid>
    <comment_count>13</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-07-11 11:32:57 +0000</bug_when>
    <thetext>The ECR is raised and approved as below:
https://mantis.uefi.org/mantis/view.php?id=2311

This will be part of UEFI Spec 2.9 Errata A 
For the draft, please check the below:
https://members.uefi.org/wg/uswg/document/1333

Closing this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19228</commentid>
    <comment_count>14</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-07-11 11:33:10 +0000</bug_when>
    <thetext>The ECR is raised and approved as below:
https://mantis.uefi.org/mantis/view.php?id=2311

This will be part of UEFI Spec 2.9 Errata A 
For the draft, please check the below:
https://members.uefi.org/wg/uswg/document/1333

Closing this issue.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>502</attachid>
            <date>2020-03-30 16:43:42 +0000</date>
            <delta_ts>2020-03-30 16:43:42 +0000</delta_ts>
            <desc>Bugzila_attached</desc>
            <filename>Bugzila_attach.7z</filename>
            <type>application/octet-stream</type>
            <size>611904</size>
            <attacher name="Ashley.lu">ashley.lu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2541</bug_id>
          
          <creation_ts>2020-02-20 19:04:38 +0000</creation_ts>
          <short_desc>TlsLib should not have a list of Ciphers which may or may not agree with what is available.</short_desc>
          <delta_ts>2023-10-08 08:05:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=929</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2852</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Gerd Hoffmann">kraxel</assigned_to>
          <cc>chao-jui.huang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>kraxel</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11349</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2020-02-20 19:04:38 +0000</bug_when>
    <thetext>The list should be derived by querying openssl.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11351</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:05:50 +0000</bug_when>
    <thetext>CryptoPkg Owner checks it first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11356</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2020-02-20 20:13:43 +0000</bug_when>
    <thetext>For the CryptoPkg use as is, this may be acceptable, but it is not acceptable when a platform runs the perl configuration that changes the ciphers that are available.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11377</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 21:35:10 +0000</bug_when>
    <thetext>Turner: can you list more detail about platform runs the perl configuration?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13105</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2020-07-14 15:21:34 +0000</bug_when>
    <thetext>Today, we have to run the perl configuration to select the cipher suites that are available for communicating over HTTPS with our servers.  The included set from Tianocore is not sufficient.  In TlsLib, there is another specified list of chiphers.  While this list matches the built in set, it does not match one we configure with perl.  TlsLib should generate the list based on what is available.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13111</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-15 09:14:56 +0000</bug_when>
    <thetext>Hello Michael,

I think this BZ (that is, bug 2541) is more or less a duplicate of bug 929. More precisely, the present feature request looks like a superset of the request in bug 929.

In bug 929, I asked for a one-time manual synchronization, but the request here asks for automatic synching, whenever &quot;CryptoPkg/Library/OpensslLib/process_files.pl&quot; is re-run.

Do you agree?

If so, then I think we should perhaps close 929 as a duplicate of this one (because this one has the larger scope).

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13112</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-15 09:30:15 +0000</bug_when>
    <thetext>BTW, I think the following would be optimal:

(1) Upstream a patch for &quot;process_files.pl&quot;, such that the resultant
cipher suites in the INF files satisfy the product requirements at
Microsoft.

(2) Upstream the resultant INF files as well, of course.

(3) Statically update &quot;TlsCipherMappingTable&quot; in
&quot;CryptoPkg/Library/TlsLib/TlsConfig.c&quot;, per bug 929.

(4) Platforms can always *narrow* the set of cipher suites they like,
via the

  gEdkiiHttpTlsCipherListGuid:EDKII_HTTP_TLS_CIPHER_LIST_VARIABLE

variable.

This provides an incentive to build as many ciphers into the OpenSSL INF
files, and accordingly into &quot;TlsCipherMappingTable&quot;, as tolerable
security-wise.

In the mailing list discussion linked in bug 929, I made the argument
that we should include every single cipher in the INF files, and in
&quot;TlsCipherMappingTable&quot; respectively, that is supported *at all* by
OpenSSL. But the then-maintainer of CryptoPkg, Qin Long, rejected my
request with the -- valid -- justification that not all ciphers in
OpenSSL were universally considered to have good security, and that the
set listed in &quot;TlsCipherMappingTable&quot; represented a kind of conservative
consensus, IIRC.

So at this point it seems to make sense to keep &quot;conservative consensus&quot;
as the main principle, but still extend &quot;TlsCipherMappingTable&quot;. I think
considering actual product needs in that effort would be most welcome.

(

  If I&apos;m allowed to digress towards QEMU and OVMF, we actually dictate
  the EDKII_HTTP_TLS_CIPHER_LIST_VARIABLE dynamically from the host
  side. See SetCipherSuites() in
  &quot;OvmfPkg/Library/TlsAuthConfigLib/TlsAuthConfigLib.c&quot;. We fetch the
  cipher ID list via fw_cfg, and (re)create the variable as a *volatile*
  one.

  The QEMU-side feature for populating the fw_cfg blob in question has
  been completed recently by my colleague Phil; I&apos;ve requested today in
  bug 2852 that he please document the usage in &quot;OvmfPkg/README&quot;.

)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13329</commentid>
    <comment_count>7</comment_count>
    <who name="Matthew Huang">chao-jui.huang</who>
    <bug_when>2020-08-06 06:54:23 +0000</bug_when>
    <thetext>Recently I&apos;m working on enabling TLSv1.3 and got into this. TBH maintaining TlsCipherMappingTable is not a hard job, but still worth discussing.

IMHO the security level of the cipher should not be the reason for having to maintain another array &quot;TlsCipherMappingTable&quot;, which could be auto-generated in order to reflect the actual status of cipher support based on process_files.pl, which is to produce INF file, etc.

Also we have gEdkiiHttpTlsCipherListGuid:EDKII_HTTP_TLS_CIPHER_LIST_VARIABLE for second pass filtering if users have concerns about the default ciphers provided.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21951</commentid>
    <comment_count>8</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2023-10-04 05:21:22 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/109312</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21967</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-10-08 08:05:17 +0000</bug_when>
    <thetext>(In reply to Gerd Hoffmann from comment #8)
&gt; https://edk2.groups.io/g/devel/message/109312

https://github.com/tianocore/edk2/pull/4898

commit 4ddd8ac3a29d (&quot;CryptoPkg/TlsLib: fix tls cipher configuration&quot;, 2023-10-08)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2427</bug_id>
          
          <creation_ts>2019-12-17 21:58:18 +0000</creation_ts>
          <short_desc>SPDM Nonce structure definition error</short_desc>
          <delta_ts>2019-12-21 02:01:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10724</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-12-17 21:58:18 +0000</bug_when>
    <thetext>According to SPDM 1.0.0, the Nonce structure should be UINT8 Nonce[32].
but in the Spdm.h, it is defined to be UINT32 Nonce.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10743</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-12-21 02:01:52 +0000</bug_when>
    <thetext>fixed in c7a0aca0ed0e9b51efe0c437ff77b30cf1457f8a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2207</bug_id>
          
          <creation_ts>2019-09-20 13:12:52 +0000</creation_ts>
          <short_desc>Remove ClevoOpenBoardPkg</short_desc>
          <delta_ts>2019-09-25 21:52:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>ClevoOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9748</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-20 13:12:52 +0000</bug_when>
    <thetext>ClevoOpenBoardPkg should be removed. The N1xxWU board contents should be moved to a GalagoPro3 directory in KabylakeOpenBoardPkg. The specific systems being tested are System 76 galp2 (Kaby Lake) and System 76 galp3 (Kaby Lake-R) which from a board support perspective are generically referred to as GalagoPro3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9749</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-20 13:15:51 +0000</bug_when>
    <thetext>Work in progress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9823</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-25 21:52:15 +0000</bug_when>
    <thetext>Change is committed.

Commit range begins with - https://github.com/tianocore/edk2-platforms/commit/b968b57c9118f2eede5e3f47d35772043bd4771e

Commit range ends with - https://github.com/tianocore/edk2-platforms/commit/f2abb978aa144a290d28116187be6a7ee4dfe20a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2669</bug_id>
          
          <creation_ts>2020-04-08 16:09:37 +0000</creation_ts>
          <short_desc>Data Buffers May be Handled Incorrectly in ReportStatusCodeRouterRuntimeDxe</short_desc>
          <delta_ts>2020-04-20 23:54:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12153</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 16:09:37 +0000</bug_when>
    <thetext>EFI_STATUS_CODE_DATA has a HeaderSize field that allows the header size to be different than the compiled sizeof of the header. Algorithms that walk the buffer should take this into account.

The custom HeaderSize might also affect the EndPointer and calculation of the EndPointer should take this size into account.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12156</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 16:29:02 +0000</bug_when>
    <thetext>Moving to confirmed. Taking ownership.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12158</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 17:46:52 +0000</bug_when>
    <thetext>V1 on the mailing list - https://edk2.groups.io/g/devel/message/57088</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12239</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 14:26:51 +0000</bug_when>
    <thetext>Fork with R-bs: https://github.com/makubacki/edk2/tree/bz2669_handle_data_buffer_header_size</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12261</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-20 23:54:42 +0000</bug_when>
    <thetext>Submitted to edk2 in commit https://github.com/tianocore/edk2/commit/05db94018bdd7c904efb6463884bd1ab30d5ccb7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2095</bug_id>
          
          <creation_ts>2019-08-19 18:55:55 +0000</creation_ts>
          <short_desc>Potential memory leak in HMAC Sha256 flow</short_desc>
          <delta_ts>2020-07-09 06:04:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>1792</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian Delgado">brian.delgado</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.mathews</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9072</commentid>
    <comment_count>0</comment_count>
    <who name="Brian Delgado">brian.delgado</who>
    <bug_when>2019-08-19 18:55:55 +0000</bug_when>
    <thetext>Filing in security bugzilla due to possibility of attacker exhausting memory due to repeated HMAC SHA256 operations. 

Using latest edk2 master or Minnowboard instructions to check out vUDK2017 (git clone https://github.com/tianocore/edk2.git -b UDK2017&quot;
   ii)  Enter folder edk2
  iii)  Run the command &quot;git checkout vUDK2017&quot;)...

Issuing repeated Hmac SHA256 flows appears to cause memory exhaustion. 

Using the Cryptest.efi EFI shell application provided in vUDK2017 to replicate, add an infinite loop around the following code and one line of instrumentation as shown below:

[Begin loop]
          ZeroMem (Digest, MAX_DIGEST_SIZE);
	  CtxSize = HmacSha256GetContextSize ();
	  HmacCtx = AllocatePool (CtxSize);
	  Print (L&quot;HmacCtx = %x&quot;, HmacCtx); &lt;-- Add instrumentation and monitor HmacCtx address for changes
	  Print (L&quot;Init... &quot;);
	  

	  Status  = HmacSha256Init (HmacCtx, HmacSha256Key, sizeof (HmacSha256Key));
	  if (!Status) {
		Print (L&quot;[Fail]&quot;);
		return EFI_ABORTED;
	  }

	  Print (L&quot;Update... &quot;);
	  Status  = HmacSha256Update (HmacCtx, HmacData, 8);
	  if (!Status) {
		Print (L&quot;[Fail]&quot;);
		return EFI_ABORTED;
	  }

	  Print (L&quot;Finalize... &quot;);
	  Status  = HmacSha256Final (HmacCtx, Digest);
	  if (!Status) {
		Print (L&quot;[Fail]&quot;);
		return EFI_ABORTED;
	  }

	  FreePool (HmacCtx);

	  Print (L&quot;Check Value... &quot;);
	  if (CompareMem (Digest, HmacSha256Digest, SHA256_DIGEST_SIZE) != 0) {
		Print (L&quot;[Fail]&quot;);
		return EFI_ABORTED;
	  }

	  Print (L&quot;[Pass]\n&quot;);
[End loop]

Observe that the HmacCtx address keeps dropping, eventually it will exhaust the memory. In instrumentation, it appears also that it is the call to HmacSha256Final() which may be causing the memory leak. 

HmacCtx = 758E2018[Pass]
. . .
HmacCtx = 758E1018[Pass]
. . .
HmacCtx = 758E0018[Pass]

I also replicated this issue using the tip of edk2 and with a custom SMI handler that does repeated HmacSha256 operations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9209</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-23 09:14:24 +0000</bug_when>
    <thetext>I can&apos;t see any obvious leaks in the edk2 CryptoPkg functions HmacSha256Init(), HmacSha256Update(), HmacSha256Final(). From some web searches, it seems that the OpenSSL HMAC_*() functions have had some leaks on occasion, in the past. That could be the case again.

Can you please collect more info? Please build EmulatorPkg on Linux, and run your test UEFI application on EmulatorPkg -- but, please replace the infinite loop with a finite loop (e.g. running for a 100 iterations), and please run the &quot;Host&quot; utility under &quot;valgrind&quot;. Hopefully, valgrind will report the leaks with source code references (allocation places).

(I&apos;ve tried to do that myself now; however, for me, the Host utility crashes with a SIGSEGV in the first place -- I don&apos;t even get a UEFI shell or similar.)

The above applies to edk2 master @ 1237517b2130.

Alternatively, clang&apos;s LeakSanitizer could do the same, perhaps:
https://clang.llvm.org/docs/LeakSanitizer.html

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12428</commentid>
    <comment_count>2</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-05-06 11:24:59 +0000</bug_when>
    <thetext>from 4/1/2020 infosec meeting:

memory leak
security issue?

run better tool for more info
open up as functionality issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13011</commentid>
    <comment_count>3</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-01 12:43:34 +0000</bug_when>
    <thetext>Moving this to public, per 7/1 infosec mtg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13044</commentid>
    <comment_count>4</comment_count>
    <who name="Brian Delgado">brian.delgado</who>
    <bug_when>2020-07-05 19:39:54 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; I can&apos;t see any obvious leaks in the edk2 CryptoPkg functions
&gt; HmacSha256Init(), HmacSha256Update(), HmacSha256Final(). From some web
&gt; searches, it seems that the OpenSSL HMAC_*() functions have had some leaks
&gt; on occasion, in the past. That could be the case again.
&gt; 
&gt; Can you please collect more info? Please build EmulatorPkg on Linux, and run
&gt; your test UEFI application on EmulatorPkg -- but, please replace the
&gt; infinite loop with a finite loop (e.g. running for a 100 iterations), and
&gt; please run the &quot;Host&quot; utility under &quot;valgrind&quot;. Hopefully, valgrind will
&gt; report the leaks with source code references (allocation places).
&gt; 
&gt; (I&apos;ve tried to do that myself now; however, for me, the Host utility crashes
&gt; with a SIGSEGV in the first place -- I don&apos;t even get a UEFI shell or
&gt; similar.)
&gt; 
&gt; The above applies to edk2 master @ 1237517b2130.
&gt; 
&gt; Alternatively, clang&apos;s LeakSanitizer could do the same, perhaps:
&gt; https://clang.llvm.org/docs/LeakSanitizer.html
&gt; 
&gt; Thanks!

Sorry for the delay, to report back on this: I also ran into an issue running EmulatorPkg as it also got a seg fault during launch. One workaround for this was to disable compiler optimizations. (Link: https://bugzilla.tianocore.org/show_bug.cgi?id=2639). After this, unfortunately Valgrind did not show anything useful for the test app. However, I turned on Memory Profiling in MdeModulePkg (https://github.com/tianocore/tianocore.github.io/wiki/Memory-leak-detection-with-memory-profile-feature) and have some additional data, although not yet a root cause. Writing that up now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13045</commentid>
    <comment_count>5</comment_count>
      <attachid>531</attachid>
    <who name="Brian Delgado">brian.delgado</who>
    <bug_when>2020-07-05 20:09:01 +0000</bug_when>
    <thetext>Created attachment 531
Memory Profile report for Hmac test application</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13046</commentid>
    <comment_count>6</comment_count>
    <who name="Brian Delgado">brian.delgado</who>
    <bug_when>2020-07-05 20:09:44 +0000</bug_when>
    <thetext>Method: 
1. Turn on Memory Profiling in MdeModulePkg and enable profiling of EfiBootServicesData memory. 
2. Build the MemoryProfileInfo.efi application. 
3. Run the test app in EmulatorPkg. Make note of addresses given for the HmacCtx, with a memory leak, they will change over time.  
4. Run MemoryProfileInfo.efi and look for test application&apos;s memory accesses. 
5. I used Ghidra to cross-reference CallerAddress (RIP) with the test app binary and dbh on the PDB file to locate the C code. 

Findings: Memory allocations come from four locations as described below. So far, I haven&apos;t checked for corresponding memory freeing operations.  

1. File: edk2\mdemodulepkg\library\uefimemoryallocationprofilelib\memoryallocationlib.c

Function: InternalAllocatePool (
  IN EFI_MEMORY_TYPE  MemoryType,  
  IN UINTN            AllocationSize
  )
{
  EFI_STATUS  Status;
  VOID        *Memory;

  Status = gBS-&gt;AllocatePool (MemoryType, AllocationSize, &amp;Memory);   &lt;--- Allocation 1
  if (EFI_ERROR (Status)) {
    Memory = NULL;
  }
  return Memory;
}

 MEMORY_PROFILE_ALLOC_INFO (0x0)
      Signature     - 0x4941504D
      Length        - 0x0030
      Revision      - 0x0002
      CallerAddress - 0x0000000048B73758 (Offset: 0x00000758)
      SequenceId    - 0x0000A27E
      Action        - 0x00000003 (gBS-&gt;AllocatePool)
      MemoryType    - 0x00000004 (EfiBootServicesData)
      Buffer        - 0x0000000048E6C498
      Size          - 0x0000000000000070

2. File: edk2\cryptopkg\library\openssllib\openssl\crypto\mem.c

Function: void *CRYPTO_zalloc(size_t num, const char *file, int line)
{
    void *ret = CRYPTO_malloc(num, file, line);  &lt;-- Allocation 2
	...

	
MEMORY_PROFILE_ALLOC_INFO (0x1)
  Signature     - 0x4941504D
  Length        - 0x0030
  Revision      - 0x0002
  CallerAddress - 0x0000000048B78BBB (Offset: 0x00005BBB)
  SequenceId    - 0x0000A27E
  Action        - 0x00008003 (Lib:AllocatePool)
  MemoryType    - 0x00000004 (EfiBootServicesData)
  Buffer        - 0x0000000048E6C498
  Size          - 0x0000000000000070

3. File: edk2\cryptopkg\library\openssllib\openssl\crypto\objects\o_names.c

Function: int OBJ_NAME_add(const char *name, int type, const char *data)
	. . .
	onp = OPENSSL_malloc(sizeof(*onp)); &lt;-- Allocation 3
	

MEMORY_PROFILE_ALLOC_INFO (0x5)
      Signature     - 0x4941504D
      Length        - 0x0030
      Revision      - 0x0002
      CallerAddress - 0x0000000048B77581 (Offset: 0x00004581)
      SequenceId    - 0x0000A280
      Action        - 0x00008003 (Lib:AllocatePool)
      MemoryType    - 0x00000004 (EfiBootServicesData)
      Buffer        - 0x0000000048E6C098
      Size          - 0x0000000000000018
	
	
4. File: edk2\cryptopkg\library\openssllib\openssl\crypto\lhash\lhash.c

Function: OPENSSL_LH_insert(..)
			. . .
			if ((nn = OPENSSL_malloc(sizeof(*nn))) == NULL) {  &lt;-- Allocation 4
			
			
MEMORY_PROFILE_ALLOC_INFO (0x7)
      Signature     - 0x4941504D
      Length        - 0x0030
      Revision      - 0x0002
      CallerAddress - 0x0000000048B79CB2 (Offset: 0x00006CB2)
      SequenceId    - 0x0000A281
      Action        - 0x00008003 (Lib:AllocatePool)
      MemoryType    - 0x00000004 (EfiBootServicesData)
      Buffer        - 0x0000000048E6C118
      Size          - 0x0000000000000018

====================================
The pattern of the first set of accesses is:
1, 2, 1, 2, 1, 3, 1, 4, 1, ...  (refer to log-cryptest.txt file)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13053</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-07 10:53:09 +0000</bug_when>
    <thetext>Hello Brian,

earlier, the HMAC set of APIs in CryptoPkg could be used in two ways:

(1) The client code in edk2 would itself allocate the HMAC context. The
    client code would retrieve the allocation *size* by calling
    Hmac(Md5|Sha1|Sha256)GetContextSize() first.

    Then the client code in edk2 would call Init(), Update() -- possibly
    multiple times --, and Final().

    Finally, the client code would itself free the HMAC context.

(2) The client code would call Hmac(Md5|Sha1|Sha256)New() for allocating
    the HMAC context. (The client code wouldn&apos;t try to learn about the
    allocation *size*, with Hmac(Md5|Sha1|Sha256)GetContextSize().)

    Then the client code in edk2 would call Init(), Update() -- possibly
    multiple times --, and Final().

    Finally, the client code would free the HMAC context with the
    Hmac(Md5|Sha1|Sha256)Free() helper function.

The memory leak pertains to usage (1). It does not impact usage (2).
I&apos;ll explain below why I think so, but first a few &quot;side comments&quot;.

- In &quot;CryptoPkg/Application/Cryptest/HmacVerify.c&quot;, function
  ValidateCryptHmac(), pattern (1) is used. Therefore, it suffers from
  the memory leak.

  Your modification in comment#1 amplifies the leak, by wrapping usage
  (1) in a loop.

  The test program (the Cryptest application) was removed in commit
  4a75acbed352 (&quot;CryptoPkg: Remove Cryptest Application from CryptoPkg&quot;,
  2017-12-27), for BZ#819. So now it&apos;s not feasible to convert the
  Cryptest program from usage (1) to usage (2) any longer, on the edk2
  master branch, in order to remedy the memory leak that&apos;s inherent to
  usage (1) (but not to usage (2)).

- Note that the problematic usage (1) is no longer possible at all,
  considering edk2 master. That&apos;s because the
  Hmac(Md5|Sha1|Sha256)GetContextSize() API was wrong per se -- OpenSSL
  intends to abstract away context sizes, and the Hmac*GetContextSize()
  API in CryptoPkg was breaking that abstraction.

  Therefore, in BZ#1792, we removed the GetContextSize() API; see the
  following commits:

  - a23fdff6fb99 (&quot;CryptoPkg/BaseCryptLib: replace HmacXxxInit API with
    HmacXxxSetKey&quot;, 2020-01-20)

  - 9a1f14ad721b (&quot;CryptoPkg/BaseCryptLib: remove HmacXxxGetContextSize
    interface&quot;, 2020-01-20)

  And now only pattern (2) is possible -- which should not suffer from
  the memory leak.

  Additionally, Init() has been replaced with SetKey(), and it is no
  longer a mandatory call.

OK, so let me explain why usage (1) has a problem:

The HmacSha256Final() function finishes with the following call tree
(all pathnames relative to &quot;CryptoPkg/Library/&quot;):

  HmacSha256Final()        [BaseCryptLib/Hmac/CryptHmacSha256.c]
    HMAC_CTX_reset()       [OpensslLib/openssl/crypto/hmac/hmac.c]
      hmac_ctx_cleanup()   [OpensslLib/openssl/crypto/hmac/hmac.c]
      hmac_ctx_alloc_mds() [OpensslLib/openssl/crypto/hmac/hmac.c]
        EVP_MD_CTX_new()   [OpensslLib/openssl/crypto/evp/digest.c]
          OPENSSL_zalloc()
        EVP_MD_CTX_new()   [OpensslLib/openssl/crypto/evp/digest.c]
          OPENSSL_zalloc()
        EVP_MD_CTX_new()   [OpensslLib/openssl/crypto/evp/digest.c]
          OPENSSL_zalloc()

This means that HmacSha256Final() *reallocates* some context-internal
structures, as a part of HMAC_CTX_reset(). And when the edk2 client code
itself releases the context ultimately, these internals (&quot;i_ctx&quot;,
&quot;o_ctx&quot;, &quot;md_ctx&quot;) are leaked.

In usage (2), this does not occur. That&apos;s because in usage (2), the edk2
client code calls HmacSha256Free() for finishing up, in order to mirror
the initial HmacSha256New(). And in HmacSha256Free() we have:

  HmacSha256Free()       [BaseCryptLib/Hmac/CryptHmacSha256.c]
    HMAC_CTX_free()      [OpensslLib/openssl/crypto/hmac/hmac.c]
      hmac_ctx_cleanup() [OpensslLib/openssl/crypto/hmac/hmac.c]
      EVP_MD_CTX_free()  [OpensslLib/openssl/crypto/evp/digest.c]
      EVP_MD_CTX_free()  [OpensslLib/openssl/crypto/evp/digest.c]
      EVP_MD_CTX_free()  [OpensslLib/openssl/crypto/evp/digest.c]
      OPENSSL_free()

The EVP_MD_CTX_free() calls release &quot;i_ctx&quot;, &quot;o_ctx&quot;, and &quot;md_ctx&quot;.

--*--

Thus, usage (1) suffers from the leak because the manual context
release, performed by the edk2 client code, cannot release &quot;i_ctx&quot;,
&quot;o_ctx&quot;, and &quot;md_ctx&quot; -- which are re-allocated internally to
HmacSha256Final().

Usage (2) does not suffer from this issue because the context can *only*
be released with HmacSha256Free() -- reflecting HmacSha256New() --, and
HmacSha256Free() does release &quot;i_ctx&quot;, &quot;o_ctx&quot;, and &quot;md_ctx&quot;, before
releasing the context.

I wouldn&apos;t say the leak is *in* HmacSha256Final(). Instead, I&apos;d say that
pattern (1) didn&apos;t permit a leak-less usage of HmacSha256Final().

--*--

You mention, at the end of comment#0, that you reproduced the leak
against &quot;then-master&quot; of edk2, with a custom SMI handler that does
repeated HmacSha256 operations.

Your comment#0 is dated 2019-08-20. The patches for BZ#1792, which made
pattern (1) impossible, were committed on 2020-01-20. Therefore I think
your custom reproducer used pattern (1), and not pattern (2).

Given that the Cryptest application is dead now, can you please port
your custom SMI handler to usage (2), and see if the leak is gone?

(Replace the manual context allocation &amp; release with HmacSha256New()
and HmacSha256Free(). And, set the key with HmacSha256SetKey().)

If the issue disappears like that, then we should close this bug as a
duplicate of BZ#1792.

Thanks,
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13068</commentid>
    <comment_count>8</comment_count>
    <who name="Brian Delgado">brian.delgado</who>
    <bug_when>2020-07-08 20:27:53 +0000</bug_when>
    <thetext>Thanks Laszlo. That was extremely helpful!

I created a new EFI shell app that uses flow #2 and tested in EmulatorPkg. (This turned out to be easier to test than my Minnowboard-based SMI handler.)

I did flow #2, e.g.:
  HmacSha256New()
  HmacSha256SetKey
  HmacSha256Update
  HmaSca256Final
  HmacSha256Free

and did not see any signs of a memory leak. I think this issue can now be closed. Thanks for the advice!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13077</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-09 06:04:23 +0000</bug_when>
    <thetext>Thank you, Brian, for confirming!

Closing the BZ as proposed in comment 7.

*** This bug has been marked as a duplicate of bug 1792 ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>531</attachid>
            <date>2020-07-05 20:09:01 +0000</date>
            <delta_ts>2020-07-05 20:09:01 +0000</delta_ts>
            <desc>Memory Profile report for Hmac test application</desc>
            <filename>log-cryptest.txt</filename>
            <type>text/plain</type>
            <size>537944</size>
            <attacher name="Brian Delgado">brian.delgado</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2455</bug_id>
          
          <creation_ts>2020-01-10 03:25:47 +0000</creation_ts>
          <short_desc>GenFds issue for Using the GenFds tool alone displays the build tool</short_desc>
          <delta_ts>2020-01-14 02:37:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10845</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-01-10 03:25:47 +0000</bug_when>
    <thetext>If you use the GenFds tool alone(e.g. python3 -m GenFds.GenFds -h)

The results:
Usage: build.exe [options] [all|fds|genc|genmake|clean|cleanall|cleanlib|modules|libraries|run]

It displays the help message for build tool</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10886</commentid>
    <comment_count>1</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-01-14 02:37:42 +0000</bug_when>
    <thetext>fixed it in 4465cd124fbcf5490faad6a1a834299b30b5d009</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2801</bug_id>
          
          <creation_ts>2020-06-12 19:31:12 +0000</creation_ts>
          <short_desc>Add UT_EXPECT_ASSERT_FAILURE() to UnitTestLib</short_desc>
          <delta_ts>2020-07-31 18:08:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UnitTestFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12863</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 19:31:12 +0000</bug_when>
    <thetext>Add UT_EXPECT_ASSERT_FAILURE() macro to the UnitTestLib to test of a function under test triggers an ASSERT() condition.  The use of this macro passes if the ASSERT() is triggered.  It fails the unit test of the function under test completes without generating an ASSERT().  If ASSERT() macros are disabled, then the use of this macro skips the test case.

/**
  This macro uses the framework assertion logic to check whether a function call
  triggers an ASSERT() condition.  The BaseLib SetJump()/LongJump() services
  are used to establish a safe return point when an ASSERT() is triggered.
  If an ASSERT() is triggered, unit test execution continues and Status is set
  to UNIT_TEST_PASSED.  Otherwise, a unit test case failure is raised and
  Status is set to UNIT_TEST_ERROR_TEST_FAILED.

  If ASSERT() macros are disabled, then the test case is skipped and a warning
  message is added to the unit test log.  Status is set to UNIT_TEST_SKIPPED.

  @param[in]  FunctionCall  Function call that is expected to trigger ASSERT().
  @param[out] Status        Pointer to a UNIT_TEST_STATUS return value.  This
                            is an optional parameter that may be NULL.
**/
#define UT_EXPECT_ASSERT_FAILURE(FunctionCall, Status)

The implementation of this macro is complex because it requires the use of SetJump() to call the function under test and the use of LongJump() when an ASSERT() is triggered.  The ASSERT() macro is implemented in the DebugLib and there are many different DebugLib implementations.  The ASSERT() macro calls the function DebugAssert() when an ASSERT() is triggered.  The DebugAssert() functions needs to be hooked so the LongJump() back can be performed.

The recommended approach is to update DebugLib.h to call a new function called UnitTestDebugAssert() instead of DebugAssert() when building unit tests.  The UnitTestDebugtAssert() will perform the LongJump() operation.

In order to make the UnitTestDebugAssert() function available to all modules, it is implemented in a NULL library instance that is added to the common [LibraryClasses] section for all DSC file that build unit tests.  This mapping is added to UnitTestFrameworkPkg/UnitTestFrameworkPkgTarget.dsc.inc.

The set of tasks required for this feature are:
1) Add NULL UnitTestDebugAssertLib to the UnitTestFranmeworkPkg that contains the UnitTestDebugAssert() service and the JUMP_BUFFER context used by SetJump() and LongJump().
2) Define EDKII_UNIT_TEST_FRAMEWORK_ENABLED in UnitTestFrameworkPkg/UnitTestFrameworkPkgTarget.dsc.inc to know if the current build is for host based or target based unit tests.
3) Use EDKII_UNIT_TEST_FRAMEWORK_ENABLED in MdePkg/Include/Library/DebugLib.h to use UnitTestDebugAssert() instead of DebugAssert() from the _ASSERT() macros.
4) Add UT_EXPECT_ASSERT_FAILURE() to MdePkg/Include/Library/UnitTestLib.h that uses SetJump() to detect if an ASSERT() was triggered by a function call or not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12864</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 19:31:23 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12865</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-06-12 19:32:08 +0000</bug_when>
    <thetext>Add update the sample unit test in the UnitTestFrameworkPkg to provide positive/negative test cases that use this new macro().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13075</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-09 00:19:26 +0000</bug_when>
    <thetext>Adding negative test cases for the UnitTestLib is complex because a negative test case generates a unit test failure and the CI system will reject changes that generate unit test failures.

A special type of test that tests the UnitTestLib macros with negative conditions will be required and this will take some time, so the negative samples are not part of this BZ.

Instead, the positive test cases for all macros in the UnitTestLib should 
be added to the Sample so there is a good example usage for every macro.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13260</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:00:41 +0000</bug_when>
    <thetext>Patch series for review

V1: https://edk2.groups.io/g/devel/message/61243
V2: https://edk2.groups.io/g/devel/message/62277
V3: https://edk2.groups.io/g/devel/message/62353</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13269</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 18:08:06 +0000</bug_when>
    <thetext>Commits:

https://github.com/tianocore/edk2/commit/5d29e2d020e8b0ad70f3f766c38429c3bfad0d41
https://github.com/tianocore/edk2/commit/9a6c4ac68e3d9590cf17914e07e929a1f0e7c190
https://github.com/tianocore/edk2/commit/133891b712a9ceda0fbdb9649b559773e4cdc6db
https://github.com/tianocore/edk2/commit/75e92c13541672a3af349067a040b9dda3d4452d
https://github.com/tianocore/edk2/commit/26824851b041d9e81921ec7ef97220d2a2576157
https://github.com/tianocore/edk2/commit/425df6923ec00df32bb6f20d1440a2e920f0e1e7
https://github.com/tianocore/edk2/commit/77e42ca4dfbf51918d677f32ab64bb99dd07cc40
https://github.com/tianocore/edk2/commit/813c2b15255406f587484ffcedfd01ca9ab5d056
https://github.com/tianocore/edk2/commit/f08715947ad52ee4fd67358660860ea63a532e15
https://github.com/tianocore/edk2/commit/35f9d7c41b380d67953dabc5994a65e32baa7d39
https://github.com/tianocore/edk2/commit/a0a49eb87c5819a76a0a5fea81d2b51ffdfcb3aa
https://github.com/tianocore/edk2/commit/540fd45f755f1646e019099c90c9f59286604228
https://github.com/tianocore/edk2/commit/d3c9e40abcc839f59d56b7fca7787647533d96fe
https://github.com/tianocore/edk2/commit/0a81a98e900118857395b101f413c1c17b66c073
https://github.com/tianocore/edk2/commit/9af8a299cec10656b757ae30a71c1310260d3c31
https://github.com/tianocore/edk2/commit/5b86bbf891677882a9d097f87cd0128562c12c43

Pull Request:

https://github.com/tianocore/edk2/pull/779</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2584</bug_id>
          
          <creation_ts>2020-03-10 02:36:59 +0000</creation_ts>
          <short_desc>Add LogoFeaturePkg to provide logo image and driver</short_desc>
          <delta_ts>2020-03-31 03:12:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heng Luo">heng.luo</reporter>
          <assigned_to name="Heng Luo">heng.luo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11639</commentid>
    <comment_count>0</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-03-10 02:36:59 +0000</bug_when>
    <thetext>The function &quot;BootLogoEnableLogo&quot; in Edk2\MdeModulePkg\Library\BootLogoLib gets logo image via protocol EDKII_PLATFORM_LOGO_PROTOCOL and shows the it on setup screen.
Add LogoFeaturePkg to provide default logo file and DXE driver, the driver decodes the logo file and provides the image data via EDKII_PLATFORM_LOGO_PROTOCOL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11640</commentid>
    <comment_count>1</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-03-10 02:40:31 +0000</bug_when>
    <thetext>I will summit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11734</commentid>
    <comment_count>2</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-03-18 23:31:49 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/55977</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11830</commentid>
    <comment_count>3</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-03-24 22:58:30 +0000</bug_when>
    <thetext>Patch V2: https://edk2.groups.io/g/devel/message/56238</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11937</commentid>
    <comment_count>4</comment_count>
    <who name="Heng Luo">heng.luo</who>
    <bug_when>2020-03-31 03:12:25 +0000</bug_when>
    <thetext>Patch V3:https://edk2.groups.io/g/devel/topic/72536345#56454
Code pushed: SHA-1: 28d572fb96cd2697d903f6a3af94f6cb76948869</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2482</bug_id>
          
          <creation_ts>2020-01-22 17:31:16 +0000</creation_ts>
          <short_desc>SMBIOS spec 3.3+ Type17 support isn&apos;t included for final DWORDS</short_desc>
          <delta_ts>2020-02-11 01:14:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          <deadline>2020-02-14</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10965</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-01-22 17:31:16 +0000</bug_when>
    <thetext>https://www.dmtf.org/sites/default/files/standards/documents/DSP0134_3.3.0.pdf 7.18 shows two additional DWORDS added for Type 17. The lack of these fields can cause strange errors in some operating systems in reporting memory speed and size when the OS indexes past the end of a Type 17 object.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11143</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 20:29:50 +0000</bug_when>
    <thetext>Zhichao will check MS fix for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11144</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-06 20:32:34 +0000</bug_when>
    <thetext>please refer to the fix
https://github.com/microsoft/mu_basecore/commit/c7146016392c95c8daf29d8db1a2e3a36d97255e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11197</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-02-11 01:14:02 +0000</bug_when>
    <thetext>Fix at 67ead55b35e16a5de5f4695eb61cb484465e0009.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2943</bug_id>
          
          <creation_ts>2020-08-30 21:52:40 +0000</creation_ts>
          <short_desc>Disable the SHA1 support of DxeImageVerificationLib base on the MACRO DISABLE_SHA1_DEPRECATED_INTERFACES</short_desc>
          <delta_ts>2020-11-19 00:26:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13574</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-08-30 21:52:40 +0000</bug_when>
    <thetext>Disable SHA1 base on the MACRO DISABLE_SHA1_DEPRECATED_INTERFACES. SHA1 is deprecated function and the MACRO is used to remove the wholeimplementation of the SHA1. For the platforms that do not need SHA1 for security, the MACRO should works for this library DxeImageVerificationLib as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13575</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-08-30 21:54:28 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13626</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-09-06 22:19:30 +0000</bug_when>
    <thetext>A reminder: As a full solution to remove SHA1 from SecureBoot, I think we should also remove SHA1 from AuthVariableLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13627</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-09-06 23:29:32 +0000</bug_when>
    <thetext>UEFI secure boot - https://github.com/tianocore/edk2/tree/master/SecurityPkg/Library/AuthVariableLib

For example:

  {EFI_CERT_SHA1_GUID,            0,               20           },
  {EFI_CERT_RSA2048_SHA1_GUID,    0,               256          },

EFI_GUID mSignatureSupport[] = {EFI_CERT_SHA1_GUID, EFI_CERT_SHA256_GUID, EFI_CERT_RSA2048_GUID, EFI_CERT_X509_GUID};

I believe we should give DISABLE_SHA1_DEPRECATED_INTERFACES around them</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14369</commentid>
    <comment_count>4</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-11-19 00:26:12 +0000</bug_when>
    <thetext>The BZ is already done at cdfc7ed34fd1ddfc9cb1dfbc339f940950638f8d. Future progress on SHA1 removal from SecureBoot would be discussed at https://bugzilla.tianocore.org/show_bug.cgi?id=3079.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2356</bug_id>
          
          <creation_ts>2019-11-19 10:37:22 +0000</creation_ts>
          <short_desc>spelling mistake, &quot;devies&quot; should be &quot;devices&quot;</short_desc>
          <delta_ts>2020-08-07 14:53:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Colin Ian King">colin.king</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10472</commentid>
    <comment_count>0</comment_count>
    <who name="Colin Ian King">colin.king</who>
    <bug_when>2019-11-19 10:37:22 +0000</bug_when>
    <thetext>spelling mistake, &quot;devies&quot; should be &quot;devices&quot; in  MdeModulePkg/Application/CapsuleApp/CapsuleOnDisk.c:    

Print (L&quot;CapsuleApp: 
cannot find a valid file system on boot devies. Status = %r\n&quot;, Status);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13281</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 20:33:26 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13282</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-07-31 20:34:30 +0000</bug_when>
    <thetext>Patch review

https://edk2.groups.io/g/devel/message/63606</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13341</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-08-07 14:53:33 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/a3741780fe3535e19e02efa869a7cac481891129

PR:

https://github.com/tianocore/edk2/pull/862</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2712</bug_id>
          
          <creation_ts>2020-05-10 21:56:23 +0000</creation_ts>
          <short_desc>Build failure with XCODE and CLANG9 when building MdeModulePkg</short_desc>
          <delta_ts>2020-05-22 04:05:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12468</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-05-10 21:56:23 +0000</bug_when>
    <thetext>Below is error message.

lld-link: error: undefined symbol: _memcpy
&gt;&gt;&gt; referenced by edk2\MdeModulePkg\Universal\RegularExpressionDxe\oniguruma\src\regcomp.c:6683
&gt;&gt;&gt;               lto.tmp:(_optimize_nodes)
&gt;&gt;&gt; referenced by edk2\MdeModulePkg\Universal\RegularExpressionDxe\oniguruma\src\regcomp.c:6517
&gt;&gt;&gt;               lto.tmp:(_optimize_nodes)
&gt;&gt;&gt; referenced by edk2\MdeModulePkg\Universal\RegularExpressionDxe\oniguruma\src\regcomp.c:6630
&gt;&gt;&gt;               lto.tmp:(_optimize_nodes)
&gt;&gt;&gt; referenced by edk2\MdeModulePkg\Universal\RegularExpressionDxe\oniguruma\src\regcomp.c:6461
&gt;&gt;&gt;               lto.tmp:(_concat_left_node_opt_info)
NMAKE : fatal error U1077: &apos;&quot;C:\Program Files\LLVM\bin\lld-link.EXE&quot;&apos; : return code &apos;0x1&apos;
Stop.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12469</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2020-05-10 21:56:54 +0000</bug_when>
    <thetext>Assigned to Shenglei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12475</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-11 20:54:27 +0000</bug_when>
    <thetext>Shenglei has sent the patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12667</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-22 04:05:16 +0000</bug_when>
    <thetext>Fix at 8b680e4af113fbd913d57777a12dd1dd34d0f6f7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2605</bug_id>
          
          <creation_ts>2020-03-18 05:25:59 +0000</creation_ts>
          <short_desc>The behavior of ShellReadFile is unexpected.</short_desc>
          <delta_ts>2020-03-22 21:44:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>guomin.jiang</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11731</commentid>
    <comment_count>0</comment_count>
      <attachid>487</attachid>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-18 05:25:59 +0000</bug_when>
    <thetext>Created attachment 487
Return Buffer Too Small when meet it

According to the definition of ShellReadFile, it should return EFI_BUFFER_TO_SMALL if the buffer size is too small and return the required size.

In practise, i found it will return SUCCESS even i pass 0 to the *BufferSize, after i debug, the error occurred in WinNtFileRead() of WinFileSystem.c file.

According the logic of WinNtFileRead, if you are reading file, it will get file information and get file size from FileInfo-&gt;Size, but it will not judge and invoke ReadFile(), the ReadFile() is from kernel32.lib not EFI interface, but the EFI_STATUS will capture the result into Status local vars, it seem unreasonable and return 0 which is meaningless for Status.

In addition, it allocate memory but not free it after exit and it seem that no other function need it.

The attachment is my solution for how to do when *BufferSize is too small to place the file content.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11750</commentid>
    <comment_count>1</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-20 03:09:43 +0000</bug_when>
    <thetext>After double check, it have freed pool before exit, and the Status is right as well because it is ?: express.

For the EFI_BUFFER_TOO_SMALL will not be returned, provide patch https://edk2.groups.io/g/devel/message/56050 for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11761</commentid>
    <comment_count>2</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-03-22 21:44:37 +0000</bug_when>
    <thetext>I have review the UEFI spec and code, the logic is ok, it my mistake.

In my test, I pass the *BufferSize with 0, but it is unexpected input value.

The ReadFile should return EFI_BUFFER_TOO_SMALL only when the directory size is too small, if you read file, you should pass the desired size you need.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>487</attachid>
            <date>2020-03-18 05:25:59 +0000</date>
            <delta_ts>2020-03-18 05:25:59 +0000</delta_ts>
            <desc>Return Buffer Too Small when meet it</desc>
            <filename>ReturnBufferToSmallWhenMeetIt.PNG</filename>
            <type>image/png</type>
            <size>82575</size>
            <attacher>guomin.jiang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2968</bug_id>
          
          <creation_ts>2020-09-16 14:28:07 +0000</creation_ts>
          <short_desc>Request to Place PLATFORM_GUID Macro in AutoGen.h</short_desc>
          <delta_ts>2020-09-16 14:40:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>yuwei.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13697</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-16 14:28:07 +0000</bug_when>
    <thetext>Currently there is special handling BaseTools/Source/Python/AutoGen/GenC.py to place the EFI_CALLER_ID_GUID as a macro into a module&apos;s AutoGen.h (last line of below snippet):

    if &apos;PcdLib&apos; in Info.Module.LibraryClasses or Info.Module.Pcds:
        AutoGenH.Append(&quot;#include &lt;Library/PcdLib.h&gt;\n&quot;)

    AutoGenH.Append(&apos;\nextern GUID  gEfiCallerIdGuid;&apos;)
    AutoGenH.Append(&apos;\nextern CHAR8 *gEfiCallerBaseName;\n\n&apos;)

    if Info.IsLibrary:
        return

    AutoGenH.Append(&quot;#define EFI_CALLER_ID_GUID \\\n  %s\n&quot; % GuidStringToGuidStructureString(Info.Guid))

We are working on a feature called Platform Runtime Mechanism (PRM) [https://github.com/tianocore/edk2-staging/tree/PlatformRuntimeMechanism] where we need to have the PLATFORM_GUID available as a pre-compile time value so it can be statically placed into a data structure (the value like above, not a pointer to the value).

So I&apos;d like to request this support as it would efficiently give the PLATFORM_GUID value at pre-compile time and fit naturally into the pre-existing infrastructure. I don&apos;t foresee this impacting existing functionality in any way.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13699</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-16 14:40:34 +0000</bug_when>
    <thetext>I meant to file this as a feature request and I just realized this was filed as a bug.

Therefore, I filed the following feature request
https://bugzilla.tianocore.org/show_bug.cgi?id=2969

And I&apos;m closing this BZ.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2382</bug_id>
          
          <creation_ts>2019-11-24 20:09:19 +0000</creation_ts>
          <short_desc>Add ARM/Aarch64 which were missing to VALID_ARCHITECTURES in LzmaCustomDecompressLib.inf</short_desc>
          <delta_ts>2019-12-04 19:51:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10537</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-11-24 20:09:19 +0000</bug_when>
    <thetext>Add ARM/Aarch64 which were missing to VALID_ARCHITECTURES in LzmaCustomDecompressLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10617</commentid>
    <comment_count>1</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-12-04 19:51:31 +0000</bug_when>
    <thetext>fixed at c9416efeef0d4a0554db01f3fd1cdaede14856d7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2852</bug_id>
          
          <creation_ts>2020-07-15 06:44:28 +0000</creation_ts>
          <short_desc>please update / extend the HTTPS cipher suite notes in OvmfPkg/README</short_desc>
          <delta_ts>2020-09-22 12:57:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2541</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>glin</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13109</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-15 06:44:28 +0000</bug_when>
    <thetext>In QEMU commit range 4abf70a661a5..69699f3055a5, Phil implemented a QEMU facility for exposing the host-side TLS cipher suite configuration to OVMF. The purpose is to control the permitted ciphers in the guest&apos;s UEFI HTTPS boot. This complements the forwarding of the host-side crypto policy from the host to the guest -- the other facet was the set of CA certificates (for which p11-kit patches had been upstreamed, on the host side).

The &quot;OvmfPkg/README&quot; file documents both facets under section &quot;HTTPS Boot&quot;.

- The documentation on the &quot;CA certificates&quot; facet can be considered final, as it refers to &quot;-fw_cfg&quot; and &quot;p11-kit&quot;.

- However, the docs on the &quot;cipher suites&quot; facet is temporary, as it references &quot;-fw_cfg&quot; and &quot;openssl&quot;. Note the following reminder:

&gt;| * In the future (after release 2.12), QEMU should populate both above fw_cfg
&gt;|   files automatically from the local host configuration, and enable the user
&gt;|   to override either with dedicated options or properties.

Actions being requested in this BZ:

(1) Please remove the reminder.

(2) Locate the bullet starting with &quot;Besides the trusted certificates, it&apos;s also possible to configure the trusted cipher suites for HTTPS through another fw_cfg entry...&quot;. Please refresh this section to recommend the new QEMU facility first and foremost.

I think it would be fine to keep the &quot;old way&quot; for setting the cipher suites for now, as QEMU commit range 4abf70a661a5..69699f3055a5 has not yet been released, and even afterwards, users will need some time to update to QEMU 5.1.

Phil: can you please take this BZ?

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13113</commentid>
    <comment_count>1</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2020-07-15 09:59:40 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #0)
&gt; Actions being requested in this BZ:
&gt; 
&gt; (1) Please remove the reminder.
&gt; 
&gt; (2) Locate the bullet starting with &quot;Besides the trusted certificates, it&apos;s
&gt; also possible to configure the trusted cipher suites for HTTPS through
&gt; another fw_cfg entry...&quot;. Please refresh this section to recommend the new
&gt; QEMU facility first and foremost.
&gt; 
&gt; I think it would be fine to keep the &quot;old way&quot; for setting the cipher suites
&gt; for now, as QEMU commit range 4abf70a661a5..69699f3055a5 has not yet been
&gt; released, and even afterwards, users will need some time to update to QEMU
&gt; 5.1.
&gt; 
&gt; Phil: can you please take this BZ?

I&apos;ll take care of it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13630</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-07 12:19:19 +0000</bug_when>
    <thetext>Posted

* [edk2-devel] [PATCH]
  OvmfPkg/README: HTTPS Boot: describe host-side TLS cipher suites forwarding

https://edk2.groups.io/g/devel/message/65088
http://mid.mail-archive.com/20200907161825.10893-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13700</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-16 15:01:08 +0000</bug_when>
    <thetext>QEMU patch that blocks v2 of the OVMF README patch:

[PATCH] hw/nvram/fw_cfg: fix FWCfgDataGeneratorClass::get_data() consumption
http://mid.mail-archive.com/20200916151510.22767-1-lersek@redhat.com
https://lists.gnu.org/archive/html/qemu-devel/2020-09/msg05911.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13733</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-22 04:52:04 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; QEMU patch that blocks v2 of the OVMF README patch:
&gt; 
&gt; [PATCH] hw/nvram/fw_cfg: fix FWCfgDataGeneratorClass::get_data() consumption
&gt; http://mid.mail-archive.com/20200916151510.22767-1-lersek@redhat.com
&gt; https://lists.gnu.org/archive/html/qemu-devel/2020-09/msg05911.html

Merged in upstream QEMU as commit 4318432ccd3f.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13734</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-22 05:20:22 +0000</bug_when>
    <thetext>Posted v2 (alas, I forgot to add &quot;v2&quot; to the subject prefix):

* [edk2-devel] [PATCH]
  OvmfPkg/README: HTTPS Boot: describe host-side TLS cipher suites forwarding

https://edk2.groups.io/g/devel/message/65433
http://mid.mail-archive.com/20200922091827.12617-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13739</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-22 12:57:15 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #5)
&gt; Posted v2 (alas, I forgot to add &quot;v2&quot; to the subject prefix):
&gt; 
&gt; * [edk2-devel] [PATCH]
&gt;   OvmfPkg/README: HTTPS Boot: describe host-side TLS cipher suites forwarding
&gt; 
&gt; https://edk2.groups.io/g/devel/message/65433
&gt; http://mid.mail-archive.com/20200922091827.12617-1-lersek@redhat.com

Merged as commit 3f3daf893089, via &lt;https://github.com/tianocore/edk2/pull/948&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2268</bug_id>
          
          <creation_ts>2019-10-14 10:48:53 +0000</creation_ts>
          <short_desc>ASSERT occurs in MpService.c when calling ReleaseSpinLock()</short_desc>
          <delta_ts>2019-12-24 23:50:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ching Jen, Cheng">ching.jenx.cheng</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10009</commentid>
    <comment_count>0</comment_count>
    <who name="Ching Jen, Cheng">ching.jenx.cheng</who>
    <bug_when>2019-10-14 10:48:53 +0000</bug_when>
    <thetext>There will have chances to assert during boot.

There were the error message as below.
ASSERT [PiSmmCpuDxeSmm] xxxx\Edk2\MdePkg\Library\BaseSynchronizationLib\SynchronizationMsc.c(232): LockValue == ((UINTN) 2) || LockValue == ((UINTN) 1)
ASSERT [PiSmmCpuDxeSmm] xxxx\Edk2\MdePkg\Library\BaseSynchronizationLib\SynchronizationMsc.c(159): Total &lt; Timeout

But after reverting 51dd408ae1022e5c9378492451a62b38d5b101c5, the issue will not occures</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10013</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-14 15:10:03 +0000</bug_when>
    <thetext>Eric, please work with Ching Jen to triage this issue. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10018</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-10-14 22:29:38 +0000</bug_when>
    <thetext>yes, i&apos;m checking the issue with him.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10645</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-12-09 21:24:30 +0000</bug_when>
    <thetext>With below change, this issue also can&apos;t reproduced. so mark it as fixed.

SHA-1: 9caaa79dd7e078ebb4012dde3b3d3a5d451df609

* UefiCpuPkg/PiSmmCpuDxeSmm: Avoid allocate Token every time

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2388

Token is new introduced by MM MP Protocol. Current logic allocate Token
every time when need to use it. The logic caused SMI latency raised to
very high. Update logic to allocate Token buffer at driver&apos;s entry point.
Later use the token from the allocated token buffer. Only when all the
buffer have been used, then need to allocate new buffer.

Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Acked-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10735</commentid>
    <comment_count>4</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-12-19 01:32:05 +0000</bug_when>
    <thetext>Reopen it. Root cause this issue caused by race condition for the Token used by each AP. Will send out patch for this issue soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10749</commentid>
    <comment_count>5</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-12-24 23:50:26 +0000</bug_when>
    <thetext>SHA-1: a457823f27e5410d00c1f47b5f841b5a88a926e4

* UefiCpuPkg/PiSmmCpuDxeSmm: Remove dependence between APs

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=2268

In current implementation, when check whether APs called by StartUpAllAPs
or StartUpThisAp, it checks the Tokens value used by other APs. Also the AP
will update the Token value for itself if its task finished. In this
case, the potential race condition  issues happens for the tokens.
Because of this, system may trig ASSERT during cycling test.

This change enhance the code logic, add new attributes for the token to
remove the reference for the tokens belongs to other APs.

Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2734</bug_id>
          
          <creation_ts>2020-05-20 22:06:36 +0000</creation_ts>
          <short_desc>Add the VariablePolicy engine to your EDK2 platform</short_desc>
          <delta_ts>2020-05-20 22:16:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>AdvancedFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2736</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12583</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:06:36 +0000</bug_when>
    <thetext>The VariablePolicy protocol is proposed in the following bug:
https://bugzilla.tianocore.org/show_bug.cgi?id=2522

All of the changes are staged and patches exist for all dev platforms in the
&apos;edk2&apos; repo. Please update your platform according to the instructions below.
Thanks!

https://github.com/tianocore/tianocore.github.io/wiki/VariablePolicy-Protocol---Enhanced-Method-for-Managing-Variables#platform-porting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12603</commentid>
    <comment_count>1</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-05-20 22:16:40 +0000</bug_when>
    <thetext>Oops. Too much automation.

*** This bug has been marked as a duplicate of bug 2736 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2160</bug_id>
          
          <creation_ts>2019-09-06 03:49:54 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: SNP Statistics may be unsupported</short_desc>
          <delta_ts>2019-09-11 04:50:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>stephano</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9484</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-06 03:49:54 +0000</bug_when>
    <thetext>If EFI_SIMPLE_NETWORK.Statistics() is not supported, it will return
EFI_UNSUPPORTED. In this case do not expect input parameters to be
checked for conformance.

sct/SctPkg/TestCase/UEFI/EFI/Protocol/SimpleNetwork/BlackBoxTest/Simpl
eNetworkBBTestConformance.c - BBTestStatisticsConformanceTest()

cf.
https://edk2.groups.io/g/devel/message/46773
https://edk2.groups.io/g/devel/message/46963</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9485</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-06 03:52:26 +0000</bug_when>
    <thetext>I will rework the patch according to Eric&apos;s comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9530</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-09 05:34:04 +0000</bug_when>
    <thetext>Revised patch
https://edk2.groups.io/g/devel/message/47032

Eric, could you, please, review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9604</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-11 04:50:02 +0000</bug_when>
    <thetext>Merged patch
269f8a35e44f2093625b3671f372f68e2983c49d
uefi-sct/SctPkg: SNP Statistics may be unsupported</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2524</bug_id>
          
          <creation_ts>2020-02-11 20:36:48 +0000</creation_ts>
          <short_desc>remove -DNO_MSABI_VA_FUNCS option in CLANGPDB tool chain</short_desc>
          <delta_ts>2020-02-19 00:45:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11220</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-02-11 20:36:48 +0000</bug_when>
    <thetext>After CLANGPDB is switched to GNU mode, it can use MS ABI version of GCC built-in macros for variable argument lists as same as CLANG38 tool chain, so -DNO_MSABI_VA_FUNCS option isn&apos;t required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11299</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-19 00:43:28 +0000</bug_when>
    <thetext>Zhiguang, this issue has been fixed. Please close it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11300</commentid>
    <comment_count>2</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2020-02-19 00:45:31 +0000</bug_when>
    <thetext>Fixed at 58bccfa57cc4b417f01bffe487ee8ed2fb2acca7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2407</bug_id>
          
          <creation_ts>2019-12-08 10:49:23 +0000</creation_ts>
          <short_desc>uefi-sct/SctPkg: typo Verity in uefi-sct/SctPkg: typo Verity in</short_desc>
          <delta_ts>2020-09-16 01:35:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10636</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-12-08 10:49:23 +0000</bug_when>
    <thetext>In uefi-sct/SctPkg/TestCase/UEFI/EFI/RuntimeServices/TimeServices/BlackBoxTest/TimeServicesBBTestFunction.c there are four instances of

L&quot;RT.SetTime - Verity * after change&quot;

%s/Verity/Verify/g</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10637</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-12-08 10:53:34 +0000</bug_when>
    <thetext>Patch submitted:

https://edk2.groups.io/g/devel/message/52030</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13686</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2020-09-16 01:35:51 +0000</bug_when>
    <thetext>Patch merged:

uefi-sct/SctPkg: typo Verity in TimeServicesBBTestFunction 
https://github.com/tianocore/edk2-test/commit/011d3f2939d85c99445fdc5973369dc7cd706e11</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2187</bug_id>
          
          <creation_ts>2019-09-11 22:40:57 +0000</creation_ts>
          <short_desc>The request to add HiiConfigAccess test to IHV</short_desc>
          <delta_ts>2019-09-24 04:38:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="eric.jin">eric.jin</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>supreeth.venkatesh</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9633</commentid>
    <comment_count>0</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-11 22:40:57 +0000</bug_when>
    <thetext>Add HiiConfigAccess test to IHV. 
Currently, HiiConfigAccess test is only existed in UEFI part for platform/system level test. Adding it to IHV part will be convenient for IHV to validate their device.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9773</commentid>
    <comment_count>1</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-24 04:38:02 +0000</bug_when>
    <thetext>Has been resolved in a7b07ad68ec345210718fb135ef991414b736bc5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2651</bug_id>
          
          <creation_ts>2020-03-30 18:04:36 +0000</creation_ts>
          <short_desc>Commit c4c15b870239c2c23442dfc29c4421ac98d00ee0 breaks OVMF with VS2019 fails in PvScsi.c</short_desc>
          <delta_ts>2020-04-01 10:47:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Liran Alon">liran.alon</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>liran.alon</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11932</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-30 18:04:36 +0000</bug_when>
    <thetext>Building latest master OVMF with VS2019 fails in PvScsi

INFO - 	&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.24.28314\bin\Hostx86\x64\link.exe&quot; /OUT:d:\a\1\s\Build\Ovmf3264\RELEASE_VS2019\X64\OvmfPkg\QemuKernelLoaderFsDxe\QemuKernelLoaderFsDxe\DEBUG\QemuKernelLoaderFsDxe.dll /NOLOGO /NODEFAULTLIB /IGNORE:4001 /IGNORE:4281 /IGNORE:4254 /OPT:REF /OPT:ICF=10 /MAP /ALIGN:32 /SECTION:.xdata,D /SECTION:.pdata,D /Machine:X64 /LTCG /DLL /ENTRY:_ModuleEntryPoint /SUBSYSTEM:EFI_BOOT_SERVICE_DRIVER /SAFESEH:NO /BASE:0 /DRIVER /MERGE:.rdata=.data  @d:\a\1\s\Build\Ovmf3264\RELEASE_VS2019\X64\OvmfPkg\QemuKernelLoaderFsDxe\QemuKernelLoaderFsDxe\OUTPUT\static_library_files.lst
INFO - PvScsi.c
INFO - Generating code
INFO - d:\a\1\s\OvmfPkg\PvScsiDxe\PvScsi.c(459): error C2220: the following warning is treated as an error
INFO - d:\a\1\s\OvmfPkg\PvScsiDxe\PvScsi.c(459): warning C4244: &apos;=&apos;: conversion from &apos;const UINT16&apos; to &apos;UINT8&apos;, possible loss of data
INFO - Finished generating code
INFO - NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.24.28314\bin\Hostx86\x64\cl.exe&quot;&apos; : return code &apos;0x2&apos;
INFO - Stop.
INFO - 	&quot;GenFw&quot; -e DXE_DRIVER -o d:\a\1\s\Build\Ovmf3264\RELEASE_VS2019\X64\OvmfPkg\QemuKernelLoaderFsDxe\QemuKernelLoaderFsDxe\OUTPUT\QemuKernelLoaderFsDxe.efi d:\a\1\s\Build\Ovmf3264\RELEASE_VS2019\X64\OvmfPkg\QemuKernelLoaderFsDxe\QemuKernelLoaderFsDxe\DEBUG\QemuKernelLoaderFsDxe.dll
INFO - 
INFO - 
INFO - build.py...
INFO -  : error 7000: Failed to execute command
INFO - 	C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.24.28314\bin\Hostx86\x86\nmake.exe /nologo tbuild [d:\a\1\s\Build\Ovmf3264\RELEASE_VS2019\X64\OvmfPkg\PvScsiDxe\PvScsiDxe]
INFO - 
INFO - 
INFO - build.py...
INFO -  : error F002: Failed to build module
INFO - 	d:\a\1\s\OvmfPkg\PvScsiDxe\PvScsiDxe.inf [X64, VS2019, RELEASE]
INFO - 
INFO - - Failed -</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11940</commentid>
    <comment_count>1</comment_count>
    <who name="Liran Alon">liran.alon</who>
    <bug_when>2020-03-31 07:35:23 +0000</bug_when>
    <thetext>Can you verify the following patch fix the issue?
https://edk2.groups.io/g/devel/topic/patch_ovmfpkg_pvscsidxe/72673992</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11947</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-31 15:35:18 +0000</bug_when>
    <thetext>IN_PROGRESS &amp; assigned to Liran Alon, per comment 1. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11949</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-31 17:13:44 +0000</bug_when>
    <thetext>V1 patch does resolve the build issue on vs2019</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12009</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-04-01 10:47:05 +0000</bug_when>
    <thetext>Fixed in commit 98936dc4f44b4ef47e7221d435de06a0813aa00a, via &lt;https://github.com/tianocore/edk2/pull/491&gt;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2542</bug_id>
          
          <creation_ts>2020-02-20 20:06:23 +0000</creation_ts>
          <short_desc>Remove redundant Fsp Fv installation in PeiReportFvLib</short_desc>
          <delta_ts>2022-07-19 14:57:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Miki Shindo">miki.shindo</reporter>
          <assigned_to name="Miki Shindo">miki.shindo</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11352</commentid>
    <comment_count>0</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-02-20 20:06:23 +0000</bug_when>
    <thetext>ReportPreMemFv () has a redundant call to install FspM FV. 
FspM FV does not need to be installed when Fsp Wrapper Boot Mode is disabled.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11371</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-02-20 20:46:37 +0000</bug_when>
    <thetext>Miki: will you take it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11373</commentid>
    <comment_count>2</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-02-20 20:51:00 +0000</bug_when>
    <thetext>yes. I am working on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11375</commentid>
    <comment_count>3</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2020-02-20 21:19:47 +0000</bug_when>
    <thetext>This ticket will take care of cleaning up all redundant FSP FV installations from PeiReportFvLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19270</commentid>
    <comment_count>4</comment_count>
    <who name="Miki Shindo">miki.shindo</who>
    <bug_when>2022-07-19 14:57:54 +0000</bug_when>
    <thetext>I left this ticket open long though I merged the patch to PeiReportFvLib. 
Mark this as &quot;RESOLVED&quot;.

Link to the patch merged. 
https://github.com/tianocore/edk2-platforms/commit/d5f7c68948a30b1dba28dda410214fa6d0cb13e9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2428</bug_id>
          
          <creation_ts>2019-12-18 02:15:48 +0000</creation_ts>
          <short_desc>Need add SPDM device measurement definition in TCG PFP spec.</short_desc>
          <delta_ts>2019-12-21 02:00:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10725</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-12-18 02:15:48 +0000</bug_when>
    <thetext>This is follow-up on https://bugzilla.tianocore.org/show_bug.cgi?id=2303.

After TCG published https://trustedcomputinggroup.org/wp-content/uploads/TCG_PCClient_PFP_r1p05_05_3feb20.pdf, the SPDM device measurement data structure and related new PFP content should be added to UefiTcgPlatform.h.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10742</commentid>
    <comment_count>1</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-12-21 02:00:55 +0000</bug_when>
    <thetext>fixed in ec8c74e8bcc66a43ff766254e68b0504f68e024f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2315</bug_id>
          
          <creation_ts>2019-10-29 15:06:07 +0000</creation_ts>
          <short_desc>Enable Phase 1 of Continuous Integration (CI) on the edk2 repository</short_desc>
          <delta_ts>2019-11-29 01:39:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>bob.c.feng</cc>
    
    <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10233</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-29 15:06:07 +0000</bug_when>
    <thetext>RFC Proposals:
* https://edk2.groups.io/g/rfc/message/93
* https://edk2.groups.io/g/devel/message/46607

Wiki Page:
* https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Continuous-Integration

The ideas from these 2 RFCs and follow discussions and prototyping resulted in a refined proposal for the initial phase of CI for EDK II projects

1) Use a combination of GitHub, Azure Pipelines, Mergify, and edk2-pytool features.
   * GitHub Pull Requests + Labels, Branch Protections,  Notifications
   * Mergify Pull Request Rules with auto commit if all checks pass
   * 3 pre-commit jobs in Azure Pipelines (PatchCheck, Windows/VS, Linux/GCC)
   * 2 post-commit jobs in Azure Pipelines (Windows/VS, Linux/GCC)
   * https://github.com/tianocore/edk2-pytool-library
   * https://github.com/tianocore/edk2-pytool-extensions
2) Support GitHub Pull Requests for developers to run personal build with status
3) Enable the following pre-commit checks
   * Request to commit after all checks pass must be from EDK II Maintainer
   * PatchCheck
   * CharEncodingCheck
   * CompilerPlugin
   * DependencyCheck
   * DscCompleteCheck
   * GuidCheck
   * LibraryClassCheck
   * SpellCheck

GitHub References
* https://github.com/
* https://help.github.com/en/github/managing-your-work-on-github/about-labels
* https://help.github.com/en/github/administering-a-repository/about-protected-branches
* https://help.github.com/en/github/receiving-notifications-about-activity-on-github/about-notifications

Azure Pipelines References
* https://azure.microsoft.com/en-us/services/devops/pipelines
* https://docs.microsoft.com/en-us/azure/devops/pipelines/yaml-schema

Mergify References
* https://github.com/apps/mergify
* https://doc.mergify.io/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10234</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-29 15:12:01 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10235</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-10-29 15:59:09 +0000</bug_when>
    <thetext>Patch series for review
* https://edk2.groups.io/g/devel/message/49584

Branch for review:
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V3

Previous versions of branches for reference:
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V2
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V1

Active branch for testing/evaluation:
* https://github.com/tianocore/edk2-staging/tree/edk2-ci
* To test, fork edk2-staging repo, create a branch with a change, and submit
  a pull request targeting edk2-staging/edk2-ci.  NOTE: the default branch for
  the edk2-staging is &apos;about&apos;.  You must select the &apos;edk2-ci&apos; branch when
  a pull request is opened.  Set the &apos;push&apos; label to require commit if all
  checks pass.

Pull request history on active branch for testing/evaluation:
* https://github.com/tianocore/edk2-staging/pulls?q=is%3Apr+is%3Aclosed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10391</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-11-11 16:06:11 +0000</bug_when>
    <thetext>Patch series for review:
* https://edk2.groups.io/g/devel/message/50126

Branch for review:
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V4

Previous versions of branches for reference:
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V3
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V2
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V1

Active branch for testing/evaluation:
* https://github.com/tianocore/edk2-staging/tree/edk2-ci
* To test, fork edk2-staging repo, create a branch with a change, and submit
  a pull request targeting edk2-staging/edk2-ci.  NOTE: the default branch for
  the edk2-staging is &apos;about&apos;.  You must select the &apos;edk2-ci&apos; branch when
  a pull request is opened.  Set the &apos;push&apos; label to require commit if all
  checks pass.

Pull request history on active branch for testing/evaluation:
* https://github.com/tianocore/edk2-staging/pulls?q=is%3Apr+is%3Aclosed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10392</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-11-11 16:07:09 +0000</bug_when>
    <thetext>Changes in V4
* Only copy BaseTools build logs if BaseTools are built
* Add FINISHED and FAILED jobs to prevent multiple email notifications from 
  Mergify for PR close and PR comment actions
* Reformat .pytools/Readme.md to 80 columns
* Set WINSDK_PATH_FOR_RC_EXE in BaseTools/set_vsprefix_env.bat for VS2017/VS2019
* Update .gitignore to alphabetic ordering
* Update Maintainers.txt to alphabetic ordering
* Add file header comment block to requirements.txt
* Remove license badge and formatting changes from Readme.md</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10393</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-11-11 16:08:19 +0000</bug_when>
    <thetext>Patch series for review:
* https://edk2.groups.io/g/devel/message/50337

Branch for review:
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V5

Previous versions of branches for reference:
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V4
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V3
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V2
* https://github.com/tianocore/edk2-staging/tree/edk2-ci_V1

Changes in V5
* Rename requirements.txt -&gt; pip_requirements.txt
* Use HTML syntax for Build Status in Readme.md in root
* Add @file to YML and YAML file headers
* Format Readme.md files to 80 columns
* Add missing Readme.md in .pytool CompilerPlugin
* Add missing Readme.md in .pytool DependencyCheck
* Rename readme.md -&gt; Readme.md in .pytool DscCompleteCheck
* Rename readme.md -&gt; Readme.md in .pytool LibraryClassCheck
* Remove commented out SecurityPkg dependency from CryptoPkg YAML
* Remove SerialPortLib IgnoreDuplicates from MdeModulePkg YAML</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10394</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-11-11 16:10:35 +0000</bug_when>
    <thetext>EDK II CI Unit Tests

https://edk2.groups.io/g/devel/message/50150

The following link performs a query on the pull requests in
edk2-staging/edk2-ci branch that shows the unit tests cases
that have been run.  

https://github.com/tianocore/edk2-staging/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+0005h+in%3Atitle+OR+0005+in%3Atitle

It includes unit tests from maintainers and non-maintainers
for patch series that pass and fail the enabled checks and
include the use of the &apos;push&apos; label by maintainers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10395</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-11-11 16:14:22 +0000</bug_when>
    <thetext>Pushed as cc6854506c..f8dd7c7018

Next step is to activate Azure Pipelines, GitHub, and Mergify services
on edk2/master.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10398</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-11-11 18:51:59 +0000</bug_when>
    <thetext>Patch email review of hyperlink updates to Build Status in Readme.md.
These links changed when new Azure Pipelines were created for edk2/master.

https://edk2.groups.io/g/devel/message/50382</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10581</commentid>
    <comment_count>9</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-29 01:39:44 +0000</bug_when>
    <thetext>Phase 1 has been done.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2784</bug_id>
          
          <creation_ts>2020-06-05 05:51:08 +0000</creation_ts>
          <short_desc>UefiPayloadPkg doesn&apos;t include network support</short_desc>
          <delta_ts>2022-02-17 14:57:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Mahesh">shehamb</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>guo.dong</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12802</commentid>
    <comment_count>0</comment_count>
    <who name="Mahesh">shehamb</who>
    <bug_when>2020-06-05 05:51:08 +0000</bug_when>
    <thetext>Hello, 
I have built the uefi payload for Slimbootloader as per the instructions here:
https://github.com/tianocore/edk2/blob/master/UefiPayloadPkg/BuildAndIntegrationInstructions.txt
I am able to boot to the UEFI shell using this payload, from Slimbootloader BIOS. But i don&apos;t see any network support. When i do ifconfig -l, it doesn&apos;t show any interface. I suspect i need to add driver support somewhere. But i am clueless about where to do that. 
And just to let you know, when i build UEFI bios (using instructions here:
https://software.intel.com/content/www/us/en/develop/articles/uefi-firmware-project-for-intel-atom-processor-e3900-series-processor-platforms.html), i do get the network support. 
Thanks in advance.
Mahesh.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12835</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-09 21:55:46 +0000</bug_when>
    <thetext>Include package maintainer for comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18406</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-02-17 14:57:46 +0000</bug_when>
    <thetext>This feature request has been implemented



PR:
https://github.com/tianocore/edk2/pull/1959

Commit:
https://github.com/tianocore/edk2/pull/1959/commits/a369173909040c2bbe0062f5158176333c3ef80b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2208</bug_id>
          
          <creation_ts>2019-09-23 04:35:42 +0000</creation_ts>
          <short_desc>[MdeMoudlePkg - UFS] edk2 UFS stack does not handle the &apos;FLAG VALUE&apos; field of the QUERY RESPONSE UPIU properly</short_desc>
          <delta_ts>2019-10-14 21:56:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Sachin Agrawal">sachin.agrawal</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9750</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-09-23 04:35:42 +0000</bug_when>
    <thetext>According to the UFS spec Version 2.1 (JESD220C), Table 10-48 &amp; Table 10-49,
the &quot;FLAG VALUE&quot; field in the Read/Write Flag Response Data Format is at byte
offset 23 of the structure.

However, both

* UfsBlockIoPei:  UfsHci.c         - UfsRwFlags(), line 980
* UfsPassThruDxe: UfsPassThruHci.c - UfsGetReturnDataFromQueryResponse(), line 866

is fetching this field at byte offset 20 of the UTP Query Response UPIU structure.

This behavior may cause wrong flag value being returned, and the issue should be
addressed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9751</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-09-23 09:03:06 +0000</bug_when>
    <thetext>Confirmed.

Patch has been proposed by Agrawal, Sachin &lt;sachin.agrawal@intel.com&gt; at:
https://edk2.groups.io/g/devel/message/47849</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10017</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-10-14 21:56:50 +0000</bug_when>
    <thetext>Resolved by Sachin Agrawal &lt;sachin.agrawal@intel.com&gt; via commit:
https://github.com/tianocore/edk2/commit/cd70b1a71d30d0fff4c549a309682fdf127aaae6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2670</bug_id>
          
          <creation_ts>2020-04-08 16:24:20 +0000</creation_ts>
          <short_desc>Update the RSC Data Buffer on Buffer Reallocation in ReportStatusCodeRouterRuntimeDxe</short_desc>
          <delta_ts>2020-04-20 23:55:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12154</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 16:24:20 +0000</bug_when>
    <thetext>The RSC router data buffer may be reallocated when the buffer is nearing exhaustion (7/8 portion of the buffer used), the buffer will be reallocated. While several pointers are updated to point to the newly allocated buffer, the RscData is not updated so it should be updated as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12157</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 16:29:26 +0000</bug_when>
    <thetext>Moving to confirmed. Taking ownership.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12162</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 20:05:53 +0000</bug_when>
    <thetext>V1 patch on mailing list - https://edk2.groups.io/g/devel/message/57090</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12240</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 14:27:06 +0000</bug_when>
    <thetext>Fork with R-bs: https://github.com/makubacki/edk2/tree/bz2670_update_rsc_data_buffer_on_reallocation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12262</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-20 23:55:27 +0000</bug_when>
    <thetext>Submitted to edk2 in commit https://github.com/tianocore/edk2/commit/0f127f31871a439250556d8ae93a325d4ff985c6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2098</bug_id>
          
          <creation_ts>2019-08-21 01:58:45 +0000</creation_ts>
          <short_desc>The enhancement to eliminate the even execution request of ExitBootServices() test</short_desc>
          <delta_ts>2019-08-29 04:36:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="eric.jin">eric.jin</reporter>
          <assigned_to name="eric.jin">eric.jin</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>supreeth.venkatesh</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9105</commentid>
    <comment_count>0</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-21 01:58:45 +0000</bug_when>
    <thetext>In the ExitBootServices() test, after ExitBootServices() call, all boot services will be forbidden to be used. The original design is to save the return status value of ExitBootServices() in variable with variable service and reset. But this need the 2nd or even execution of this test to retrieve the value from variable. This tricky design confused user sometimes.

In the enhancement, it leverages the RecoveryLib to restore execution after reset automatically, and only one execution is required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9106</commentid>
    <comment_count>1</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-21 02:00:59 +0000</bug_when>
    <thetext>Eric will work out the patch to enhance it before next stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9392</commentid>
    <comment_count>2</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-29 04:36:24 +0000</bug_when>
    <thetext>It has been fixed in 4d3395a9a54d575850fa12ca04326c797b7e1fe9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2564</bug_id>
          
          <creation_ts>2020-02-27 14:22:56 +0000</creation_ts>
          <short_desc>implement support for Linux v5.7+ initrd and mixed mode loading</short_desc>
          <delta_ts>2020-03-04 13:22:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2566</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11469</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-02-27 14:22:56 +0000</bug_when>
    <thetext>In version v5.7, Linux will introduce a new, simplified and architecture agnostic method to load the initial ramdisk (initrd) into memory from storage. This should allow us to remove a fair amount of knowledge regarding Linux/x86 internals.

At the same time, Linux introduces a new method to load mixed mode kernels (i.e, loading a X86 targeted OS from IA32 firmware running on X86 capable hardware)

This ticket tracks the following changes to OvmfPkg and ArmVirtPkg:
- add an &apos;initrd&apos; command to the UEFI shell via a dynamic command
- add support for new-style mixed mode loading via LoadImage/StartImage, using an implementation of the PE/COFF emulator

v3: https://edk2.groups.io/g/devel/message/54932
v2: https://edk2.groups.io/g/devel/message/54769
v1: https://edk2.groups.io/g/devel/message/54452
    https://edk2.groups.io/g/devel/message/54451</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11476</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 16:18:56 +0000</bug_when>
    <thetext>Moving to IN_PROGRESS status, because patches have been posted (see
comment 0).

Capturing blurb subjects and providing alternative links:

(In reply to Ard Biesheuvel from comment #0)

&gt; v3: https://edk2.groups.io/g/devel/message/54932

* [edk2-devel] [PATCH v3 0/6]
  OvmfPkg: implement initrd shell command and mixed mode loader

  http://mid.mail-archive.com/20200226194343.2985-1-ard.biesheuvel@linaro.org

&gt; v2: https://edk2.groups.io/g/devel/message/54769

* [edk2-devel] [PATCH v2 0/6]
  OvmfPkg: implement initrd shell command and mixed mode loader

  http://mid.mail-archive.com/20200225093908.6707-1-ard.biesheuvel@linaro.org

&gt; v1: https://edk2.groups.io/g/devel/message/54452
&gt;     https://edk2.groups.io/g/devel/message/54451

* [edk2-devel] [PATCH 1/1]
  OvmfPkg IA32: add support for loading X64 Linux images

  http://mid.mail-archive.com/20200214114155.22859-1-ard.biesheuvel@arm.com

* [edk2-devel] [RFC PATCH 1/1]
  OvmfPkg: add &apos;initrd&apos; shell command to expose Linux initrd via device path

  http://mid.mail-archive.com/20200211180304.21669-1-ard.biesheuvel@arm.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11498</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-03 15:22:28 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v4 0/7]
OvmfPkg: implement initrd shell command and mixed mode loader

https://edk2.groups.io/g/devel/message/55328
http://mid.mail-archive.com/20200303140117.7288-1-ard.biesheuvel@linaro.org</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11522</commentid>
    <comment_count>3</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2020-03-04 04:28:51 +0000</bug_when>
    <thetext>Merged as 0980779a9ddc..ecb30848fdc9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2334</bug_id>
          
          <creation_ts>2019-11-11 06:14:45 +0000</creation_ts>
          <short_desc>Static Code Fixes in Network Package</short_desc>
          <delta_ts>2019-12-04 05:20:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="sivaraman">sivaramann</reporter>
          <assigned_to name="Maciej Rabeda">maciej.rabeda</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>maciej.rabeda</cc>
    
    <cc>nobody</cc>
    
    <cc>sivaramann</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable201905</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10387</commentid>
    <comment_count>0</comment_count>
    <who name="sivaraman">sivaramann</who>
    <bug_when>2019-11-11 06:14:45 +0000</bug_when>
    <thetext>Hello All,

Please find the list of static code issues reported in networkpkg and recommended solution for each. Could this can be reviewed and updated in EDK2 trunk.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10388</commentid>
    <comment_count>1</comment_count>
      <attachid>426</attachid>
    <who name="sivaraman">sivaramann</who>
    <bug_when>2019-11-11 06:18:25 +0000</bug_when>
    <thetext>Created attachment 426
File changes

TCPDxe - Memory Leak Changes
IP4Dxe - Memory Leak Changes
DHCPDxe- Memory Leak Changes
HTTPBootDxe - In Release Mode if the SelectIndex is zero it will misbehave</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10441</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 20:22:47 +0000</bug_when>
    <thetext>Wu, Jiaxin, can you review these changes first?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10446</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2019-11-14 20:36:18 +0000</bug_when>
    <thetext>Maciej, could you help to review these changes if have time?

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10461</commentid>
    <comment_count>4</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2019-11-15 11:54:31 +0000</bug_when>
    <thetext>Jiaxin,

Sure. It would be good to get your input on the HttpBootClient.c case as well. Here is the review:

Dhcp6Io.c, TcpDispatcher.c - OK, good catch. Comments are not necessary.

Ip4If.c - I would write it a bit differently. In Ip4CreateInterface(), check if Mnp is NULL first, if yes return NULL. If not, try to allocate the memory for IP4_INTERFACE. If it fails, return NULL. This way, there is no need to call FreePool().

HttpBootClient.c - there is a potential index underflow if Private-&gt;SelectIndex == 0. However, this will not happen. Private-&gt;SelectIndex value is set during blocking DHCP operation, in HttpBootDhcp4CallBack()/HttpBootDhcp6CallBack(). If no valid DHCP offers are received, DHCP operation will be cancelled with EFI_ABORTED (making DHCP-&gt;Start() calls to return EFI_ABORTED. The only place where HttpBootDhcp4ExtractUriInfo() and HttpBootDhcp6ExtractUriInfo() are called is HttpBootDiscoverBootInfo(). Calls to those functions are preceded with HttpBootDhcp() and they won&apos;t be called when HttpBootDhcp() returns an error (which happens when DHCP-&gt;Start() fails).

Since Private-&gt;SelectIndex being 0 is most likely a driver issue and not a device issue, I have a concern about using EFI_DEVICE_ERROR status. Status propagates up to HttpBootDxeLoadFile (which is an implementation of EFI_LOAD_FILE_PROTOCOL-&gt;LoadFile()) and showing that a device issue occured is a bit sketchy. I would suggest leaving the ASSERT for debug purposes and using EFI_NO_RESPONSE status for release builds, which will indicate some problems with communication with the server (DHCP).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10548</commentid>
    <comment_count>5</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2019-11-26 05:52:00 +0000</bug_when>
    <thetext>I&apos;ll prepare the patch based on the provided code diff.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10606</commentid>
    <comment_count>6</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2019-12-04 05:20:42 +0000</bug_when>
    <thetext>Fixes introduced in commit 4f47eaf9456e1a4f22553fe0c97587c2124e2fba.
HttpBootClient.c has been omitted as N/A for now.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>426</attachid>
            <date>2019-11-11 06:18:25 +0000</date>
            <delta_ts>2019-11-11 06:18:25 +0000</delta_ts>
            <desc>File changes</desc>
            <filename>StaticCodeFixes.zip</filename>
            <type>text/plain</type>
            <size>71902</size>
            <attacher name="sivaraman">sivaramann</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2802</bug_id>
          
          <creation_ts>2020-06-13 00:31:24 +0000</creation_ts>
          <short_desc>Extend usage of LastAttemptStatus in FmpDxe</short_desc>
          <delta_ts>2020-11-09 21:08:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kun.qin</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12867</commentid>
    <comment_count>0</comment_count>
    <who name="">kun.qin</who>
    <bug_when>2020-06-13 00:31:24 +0000</bug_when>
    <thetext>The definition of Last Attempt Status has been extended to include vendor specific attempt status.

This ticket is created to extend the usage of LastAttemptStatus in FmpDxe to provide better granularity for failed capsule updates (CheckImage and SetImage). 

Specifically, LastAttemptStatus will be passed down to FmpDeviceLib to populate appropriate vendor specific status and stored to nv variable storage.

Here is a proposed change: https://github.com/microsoft/mu_tiano_plus/commit/70dbc81470394b255b96b7786ea729e15bc0cd87</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12890</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-06-15 18:48:53 +0000</bug_when>
    <thetext>I&apos;ll take ownership for now. The CheckImage () changes will be available soon and those should be considered as a complete proposal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12979</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-30 21:39:25 +0000</bug_when>
    <thetext>Kubacki takes it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13358</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-08-10 14:59:17 +0000</bug_when>
    <thetext>V1 of patch series on the list: https://edk2.groups.io/g/devel/message/63811</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13360</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-08-10 16:54:42 +0000</bug_when>
    <thetext>V2 of patch series on the list: https://edk2.groups.io/g/devel/message/63922</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13664</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-12 03:02:02 +0000</bug_when>
    <thetext>V3 of patch series on the list: https://edk2.groups.io/g/devel/message/64401</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13665</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-12 03:02:17 +0000</bug_when>
    <thetext>I am awaiting some feedback from Mike Kinney on how to coordinate the edk2 patch series with edk2-platforms and then I will send out the v4 series.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13743</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-22 20:59:25 +0000</bug_when>
    <thetext>Mike Kinney has been out of office recently, I should have feedback soon to proceed with the v4 series.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13808</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-09-25 22:21:39 +0000</bug_when>
    <thetext>V4 of patch series on the list: https://edk2.groups.io/g/devel/message/65646</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14001</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-15 17:23:43 +0000</bug_when>
    <thetext>V4 sat for a weeks with no feedback.

In the meantime, I made a small change for a v5 series sent to the list today: https://edk2.groups.io/g/devel/message/66287</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14038</commentid>
    <comment_count>10</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-19 20:01:09 +0000</bug_when>
    <thetext>v6 of patch series on the list: https://edk2.groups.io/g/devel/message/66418</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14136</commentid>
    <comment_count>11</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-10-28 02:26:03 +0000</bug_when>
    <thetext>This is like a new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14138</commentid>
    <comment_count>12</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-28 14:28:58 +0000</bug_when>
    <thetext>The outstanding patch series was merged to edk2 beginning in the following commit:

https://github.com/tianocore/edk2/commit/da29cc0e98c2b91af1c0c9e41f8a386e2ae91000</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14139</commentid>
    <comment_count>13</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-10-28 14:29:30 +0000</bug_when>
    <thetext>This change was split into two pieces for backward compatibility with edk2-platforms. The only platform found to be impacted was Vlv2TbltDevicePkg. There&apos;s a commit on the mailing list (for several weeks now) to bring to align that package to the new API.

So the second patch series to complete the change will need to be submitted before this BZ can be called done.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14287</commentid>
    <comment_count>14</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-11-09 20:44:43 +0000</bug_when>
    <thetext>V1 of the patch needed to complete the change is on the mailing list: https://edk2.groups.io/g/devel/message/66834</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14288</commentid>
    <comment_count>15</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-11-09 21:08:13 +0000</bug_when>
    <thetext>Final patch for the feature was merged to edk2/master in the following commit:
https://github.com/tianocore/edk2/commit/b96b44feab7aad2b9ae73a3602924b42d148bb03</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2386</bug_id>
          
          <creation_ts>2019-11-26 06:05:27 +0000</creation_ts>
          <short_desc>BBTestReadKeyStrokeExFunctionAutoTestCheckpoint1() can&apos;t identify the problem of wrong implementation of ReadKeyStrokeEx</short_desc>
          <delta_ts>2024-03-18 06:52:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="JamesWang">jameswang</reporter>
          <assigned_to name="Barton Gao">gaojie</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jameswang</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10549</commentid>
    <comment_count>0</comment_count>
    <who name="JamesWang">jameswang</who>
    <bug_when>2019-11-26 06:05:27 +0000</bug_when>
    <thetext>SCT commit (e9c21711c17e066a94f74b1d401799e7b1dde4da) added BBTestReadKeyStrokeExFunctionAutoTestCheckpoint1() for ReadKeyStrokeEx Toggle state.

However it still can&apos;t identify the problem of wrong implementation.

Mantis 1865 specifically emphasized that shift and toggle state are not implemented correctly when no key is present.

In BBTestReadKeyStrokeExFunctionAutoTestCheckpoint1() of SimpleTextInputExBBTestFunction.c, the first call of ReadKeyStrokeEx():

Line#1163:
  //
  //Read next keystroke from the input device
  //
  Status = SimpleTextInputEx-&gt;ReadKeyStrokeEx (
                                SimpleTextInputEx,
                                &amp;Key
                                );
  if ((Status != EFI_SUCCESS) &amp;&amp; (Status != EFI_NOT_READY)) {
    return Status;
  }

  if ((Key.KeyState.KeyToggleState &amp; EFI_TOGGLE_STATE_VALID) == 0) {
    return EFI_UNSUPPORTED;
  }

The &quot;Key&quot; here is not initialized and if there is a bad ReadKeyStrokeEx implementation which returns EFI_NOT_FOUND without even touching KeyToggleState, it could be random value.
So after the checking of KeyToggleState, it may or may not &quot;return&quot;.

If my analysis/understanding is correct, is it possible for SCT to intercept the problem of not always returning KeyToggleState by ReadKeyStrokeEx?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15868</commentid>
    <comment_count>1</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 04:22:25 +0000</bug_when>
    <thetext>@James:
Could you supply a patch, please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15880</commentid>
    <comment_count>2</comment_count>
    <who name="JamesWang">jameswang</who>
    <bug_when>2021-05-03 01:41:00 +0000</bug_when>
    <thetext>@Heinrich,

It would be something like below.  Making all valid and reserved bits ON and see if it is still the same after calling ReadKeyStrokeEx.

BBTestReadKeyStrokeExFunctionAutoTestCheckpoint1():
  //
  // Set all bits to one (invalid values) for both KeyShiftState and KeyToggleState
  //
  Key.KeyState.KeyShiftState = 0xFFFFFFFF;
  Key.KeyState.KeyToggleState = 0xFF

  //
  //Read next keystroke from the input device
  //
  Status = SimpleTextInputEx-&gt;ReadKeyStrokeEx (
                                SimpleTextInputEx,
                                &amp;Key
                                );
  if ((Status != EFI_SUCCESS) &amp;&amp; (Status != EFI_NOT_READY)) {
    return Status;
  }
  
  if ((Key.KeyState.KeyShiftState == 0xFFFFFFFF) || (Key.KeyState.KeyToggleState == 0xFF)) {
    //
    // Log the error here and return key states are not supported
    //
    return EFI_UNSUPPORTED;
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16024</commentid>
    <comment_count>3</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-11 22:02:45 +0000</bug_when>
    <thetext>it has been assigned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17146</commentid>
    <comment_count>4</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-02 10:44:59 +0000</bug_when>
    <thetext>Barton to further investigate</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17734</commentid>
    <comment_count>5</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-11-11 09:50:32 +0000</bug_when>
    <thetext>Barton: The patch is under verification and will be sent for review soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17827</commentid>
    <comment_count>6</comment_count>
    <who name="Barton Gao">gaojie</who>
    <bug_when>2021-11-23 22:19:23 +0000</bug_when>
    <thetext>Patch has been sent for review:
https://edk2.groups.io/g/devel/message/84011</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18775</commentid>
    <comment_count>7</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-04-07 10:08:54 +0000</bug_when>
    <thetext>A new patch to be published based on Sunny&apos;s comments</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21622</commentid>
    <comment_count>8</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2023-06-01 10:46:37 +0000</bug_when>
    <thetext>Hi Barton,

   Could you please update on the below ticket based on Sunny&apos;s comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22749</commentid>
    <comment_count>9</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2024-03-07 09:32:54 +0000</bug_when>
    <thetext>To be upstreamed: 
https://edk2.groups.io/g/devel/topic/87274606#84011</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22804</commentid>
    <comment_count>10</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2024-03-18 06:52:19 +0000</bug_when>
    <thetext>The patch is upstreamed through commit:
https://github.com/tianocore/edk2-test/commit/032822757792c5d4d0bfed1fd8524e69ef4f2d17</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2191</bug_id>
          
          <creation_ts>2019-09-13 12:46:25 +0000</creation_ts>
          <short_desc>Add Up Xtreme board support to WhiskeylakeOpenBoardPkg</short_desc>
          <delta_ts>2020-06-01 12:50:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>WhiskeylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9660</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-13 12:46:25 +0000</bug_when>
    <thetext>Support for the Up Xtreme board will be added to WhiskeylakeOpenBoardPkg. It is expected that the initial support will specifically target the Up Xtreme board with an Intel Core i7-8665UE processor and 16GB of on-board dual channel DDR4 memory.

The board support will leverage common code already used by the Whiskey Lake U DDR4 RVP in WhiskeylakeOpenBoardPkg:
  * https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/WhiskeylakeOpenBoardPkg

In addition to the same FSP binary already used by the Whiskey Lake U DDR4 RVP in CoffeeLakeFspBinPkg:
  * https://github.com/IntelFsp/FSP/tree/master/CoffeeLakeFspBinPkg

The change is expected to be ready by early October 2019.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9824</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-25 21:52:51 +0000</bug_when>
    <thetext>Work in progress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10560</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-27 00:16:09 +0000</bug_when>
    <thetext>The code is complete and functional but progress has been constrained by board availability. This should improve in the next couple weeks and I expect the support can be committed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11039</commentid>
    <comment_count>3</comment_count>
      <attachid>454</attachid>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-31 18:21:29 +0000</bug_when>
    <thetext>Created attachment 454
Initial Patch Series</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11040</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-31 18:23:09 +0000</bug_when>
    <thetext>Initial patch series created that boots to EFI shell and Windows 10. Prince will take ownership to address the following issues before sending the series to the mailing list.

 1. Boot hangs in Windows 10
 2. USB support is unstable

Then a BZ will be filed to add multi-model support. Currently, only the model with SK Hynix memory is supported.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11043</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-31 18:39:31 +0000</bug_when>
    <thetext>The attached patch series is also posted on this fork: https://github.com/makubacki/edk2-platforms/tree/add_upxtreme_board_support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11245</commentid>
    <comment_count>6</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2020-02-13 12:46:23 +0000</bug_when>
    <thetext>Patches are up for review.

The current status
* The model below boots to x64 windows 10 home edition and Ubuntu 18.04
  * Xtreme Intel(R) Core(TM) i3-8145UE CPU @ 2.20GHz with 8GB RAM
  * Xtreme Intel(R) Core(TM) i7-8565U CPU @ 1.80GHz with 16GB RAM
  * Intel(R) Celeron(R) CPU 4305UE @ 2.00GHz with 4GB RAM hangs during memory initialization</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12761</commentid>
    <comment_count>7</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2020-06-01 12:50:31 +0000</bug_when>
    <thetext>The UP Xtreme board has been merged to edk2-platforms repository

https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/WhiskeylakeOpenBoardPkg/UpXtreme

The UP Xtreme boards below boot to x64 windows 10 home edition and Ubuntu 18.04
UP Xtreme Intel(R) Core(TM) i3-8145UE CPU @ 2.20GHz with 8GB RAM
UP Xtreme Intel(R) Core(TM) i7-8565U CPU @ 1.80GHz with 16GB RAM
UP Xtreme Intel(R) Core(TM) i7-8665UE CPU @ 1.70GHz with 16GB RAM
UP Xtreme Intel(R) Celeron(R) CPU 4305UE @ 2.00GHz with 4GB RAM</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>454</attachid>
            <date>2020-01-31 18:21:29 +0000</date>
            <delta_ts>2020-01-31 18:21:29 +0000</delta_ts>
            <desc>Initial Patch Series</desc>
            <filename>UpXtreme_InitialPatchSeries.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>75881</size>
            <attacher name="Michael Kubacki">michael.a.kubacki</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2655</bug_id>
          
          <creation_ts>2020-04-01 09:19:26 +0000</creation_ts>
          <short_desc>NetworkPkg/Ip6Dxe: Reversed logic of ASSERTs in Ip6ProcessRouterAdvertise</short_desc>
          <delta_ts>2020-04-02 05:30:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2174</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2550</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Maciej Rabeda">maciej.rabeda</reporter>
          <assigned_to name="Maciej Rabeda">maciej.rabeda</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11990</commentid>
    <comment_count>0</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-04-01 09:19:26 +0000</bug_when>
    <thetext>ASSERTs in Ip6ProcessRouterAdvertise introduced in patch for BZ 2174 have been reported by Laszlo Ersek to fire up upon processing of packet containing Neighbor Discovery message options [RFC 4861].

ASSERT NetworkPkg/Ip6Dxe/Ip6Nd.c(2167): Offset + (UINT32) PrefixOption.Length * 8 &gt;= (UINT32) Head-&gt;PayloadLength

Identified ASSERT fired up due to incorrect (reversed) logic.

By design, that assert should fire up when current position within the packet
(Offset) moved past the size of the option (Option.Length) * 8 (it&apos;s in
8-byte units) is outside the packet (further than first byte outside the
packet).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11991</commentid>
    <comment_count>1</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-04-01 09:21:17 +0000</bug_when>
    <thetext>Patch submitted for review.

https://edk2.groups.io/g/devel/message/56829</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12031</commentid>
    <comment_count>2</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2020-04-02 05:30:05 +0000</bug_when>
    <thetext>Patch merged to EDK2.

https://github.com/tianocore/edk2/commit/4deef2d865efdc61d1a53ad7bd48f9dd42560b45</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2593</bug_id>
          
          <creation_ts>2020-03-11 22:25:48 +0000</creation_ts>
          <short_desc>SpellCheck plugin should increase the number of Max Failures</short_desc>
          <delta_ts>2020-04-17 16:46:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Test</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11670</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-11 22:25:48 +0000</bug_when>
    <thetext>In order to catch as many issues as possible in a single pass (to allow devs to fix test failures in one commit rather than several), recommend increasing the max failure count and max duplicate count in SpellCheck plugin.

Easy fix is to add the following keys:
&quot;maxNumberOfProblems&quot;: 200,
&quot;maxDuplicateProblems&quot;: 200,

To the .pytool\Plugin\SpellCheck\cspell.base.yaml file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11717</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-17 22:08:23 +0000</bug_when>
    <thetext>Shenglei: please create the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12176</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-09 17:17:15 +0000</bug_when>
    <thetext>To help expedite BZ closure, I&apos;ll take ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12177</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-09 17:32:51 +0000</bug_when>
    <thetext>V1 patch on the mailing list - https://edk2.groups.io/g/devel/message/57159</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12188</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-10 17:22:01 +0000</bug_when>
    <thetext>Bret, Sean, Bob, Liming can you please review the patch on the list?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12243</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 15:09:37 +0000</bug_when>
    <thetext>Fork with R-bs: https://github.com/makubacki/edk2/tree/bz2593_increase_spellcheck_plugin_max_failures</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12244</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 16:46:49 +0000</bug_when>
    <thetext>Submitted to edk2 - https://github.com/tianocore/edk2/commit/be7295b36405d9029a0008f6bff0d5e19fb6209a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2574</bug_id>
          
          <creation_ts>2020-03-06 18:46:15 +0000</creation_ts>
          <short_desc>Components are missing in ArmPkg.dsc</short_desc>
          <delta_ts>2020-03-26 17:34:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11602</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-03-06 18:46:15 +0000</bug_when>
    <thetext>The following components are missing from ArmPkg.dsc:

  ArmPkg/Drivers/ArmCrashDumpDxe/ArmCrashDumpDxe.inf
  ArmPkg/Drivers/MmCommunicationDxe/MmCommunication.inf
  ArmPkg/Library/ArmMtlNullLib/ArmMtlNullLib.inf
  ArmPkg/Library/ArmSmcPsciResetSystemLib/ArmSmcPsciResetSystemLib.inf

These should be added so they will be included in the package DSC build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11631</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-09 12:43:03 +0000</bug_when>
    <thetext>Taking the BZ. Updated email address.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11655</commentid>
    <comment_count>2</comment_count>
      <attachid>478</attachid>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-10 17:23:00 +0000</bug_when>
    <thetext>Created attachment 478
patch_v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11656</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-10 17:23:12 +0000</bug_when>
    <thetext>I&apos;m just waiting on an internal SMTP access approval and then I&apos;ll send the attached patch to the list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11811</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-24 18:25:13 +0000</bug_when>
    <thetext>V1 patch is on the mailing list: https://edk2.groups.io/g/devel/message/56142</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11864</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-26 17:34:58 +0000</bug_when>
    <thetext>Pushed to edk2 in commit https://github.com/tianocore/edk2/commit/045e4b84c18f46c100a63aee2533a7a0bafcb518.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>478</attachid>
            <date>2020-03-10 17:23:00 +0000</date>
            <delta_ts>2020-03-10 17:23:00 +0000</delta_ts>
            <desc>patch_v1</desc>
            <filename>0001-ArmPkg-ArmPkg.dsc-Add-missing-components.patch</filename>
            <type>text/plain</type>
            <size>2098</size>
            <attacher name="Michael Kubacki">michael.kubacki</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2575</bug_id>
          
          <creation_ts>2020-03-06 18:47:35 +0000</creation_ts>
          <short_desc>Components are missing in ArmPlatformPkg.dsc</short_desc>
          <delta_ts>2020-03-26 17:36:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11603</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-03-06 18:47:35 +0000</bug_when>
    <thetext>The following components are missing from ArmPlatformPkg.dsc:

  ArmPlatformPkg/Library/HdLcd/HdLcd.inf
  ArmPlatformPkg/Library/PL111Lcd/PL111Lcd.inf

These should be added so they will be included in the package DSC build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11632</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-09 12:43:58 +0000</bug_when>
    <thetext>Taking the BZ. Updated email address.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11657</commentid>
    <comment_count>2</comment_count>
      <attachid>479</attachid>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-10 17:23:38 +0000</bug_when>
    <thetext>Created attachment 479
patch_v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11658</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-10 17:24:51 +0000</bug_when>
    <thetext>I&apos;m just waiting on an internal SMTP access approval and then I&apos;ll send the attached patch to the list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11812</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-24 18:25:39 +0000</bug_when>
    <thetext>V1 patch is on the mailing list: https://edk2.groups.io/g/devel/message/56217</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11865</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-03-26 17:36:01 +0000</bug_when>
    <thetext>Pushed to edk2 in commit https://github.com/tianocore/edk2/commit/e24529a5c324b07dd0e555206b35d1a56be834a6.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>479</attachid>
            <date>2020-03-10 17:23:38 +0000</date>
            <delta_ts>2020-03-10 17:23:38 +0000</delta_ts>
            <desc>patch_v1</desc>
            <filename>0001-ArmPlatformPkg-ArmPlatformPkg.dsc-Add-missing-compon.patch</filename>
            <type>text/plain</type>
            <size>2144</size>
            <attacher name="Michael Kubacki">michael.kubacki</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2985</bug_id>
          
          <creation_ts>2020-09-24 03:20:53 +0000</creation_ts>
          <short_desc>Private Include Section in MdeModulePkg lead Emulator Platform Build Fail</short_desc>
          <delta_ts>2020-09-29 21:52:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="qiuguoguang">michael_chiu</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13781</commentid>
    <comment_count>0</comment_count>
      <attachid>562</attachid>
    <who name="qiuguoguang">michael_chiu</who>
    <bug_when>2020-09-24 03:20:53 +0000</bug_when>
    <thetext>Created attachment 562
Common Private Include Section in MdeModulePkg will lead Edk2 Build fail

Common Private Include Section in MdeModulePkg will lead Edk2 Build fail;
&apos;Cause No Actual Dir in the designated tree for brotli;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13845</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-29 21:45:45 +0000</bug_when>
    <thetext>please to submodule update, here is command

git submodule update --init</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13847</commentid>
    <comment_count>2</comment_count>
    <who name="qiuguoguang">michael_chiu</who>
    <bug_when>2020-09-29 21:52:32 +0000</bug_when>
    <thetext>updated with git cmd, no block build any more;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>562</attachid>
            <date>2020-09-24 03:20:53 +0000</date>
            <delta_ts>2020-09-24 03:20:53 +0000</delta_ts>
            <desc>Common Private Include Section in MdeModulePkg will lead Edk2 Build fail</desc>
            <filename>build fail.PNG</filename>
            <type>image/png</type>
            <size>54307</size>
            <attacher name="qiuguoguang">michael_chiu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2138</bug_id>
          
          <creation_ts>2019-08-28 13:42:21 +0000</creation_ts>
          <short_desc>MdePkg/DxeHstiLib: An issue was observed on Dell Poweredge R740, where the Dell PERC H740P controller UEFI driver returned InfoTypesBuffer = NULL, InfoTypesBufferCount = 0 and caused an FreePool assert.</short_desc>
          <delta_ts>2019-09-03 13:01:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jayanth Raghuram">Jayanth.Raghuram</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9382</commentid>
    <comment_count>0</comment_count>
      <attachid>388</attachid>
    <who name="Jayanth Raghuram">Jayanth.Raghuram</who>
    <bug_when>2019-08-28 13:42:21 +0000</bug_when>
    <thetext>Created attachment 388
0001-MdePkg-DxeHstiLib-Added-checks-to-improve-error-hand.patch

MdePkg/DxeHstiLib: An issue was observed on Dell Poweredge R740, where the Dell PERC H740P controller UEFI driver returned InfoTypesBuffer = NULL, InfoTypesBufferCount = 0 and caused an FreePool assert.

Patch created based on EDK2 main trunk code.
[PATCH] MdePkg/DxeHstiLib: Added checks to improve error handling.
Added checks for return parameters of LocateHandleBuffer &amp; GetSupportedTypes
function calls in InternalHstiFindAip to improve error handling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9383</commentid>
    <comment_count>1</comment_count>
    <who name="Jayanth Raghuram">Jayanth.Raghuram</who>
    <bug_when>2019-08-28 13:45:33 +0000</bug_when>
    <thetext>Being reviewed by liming.gao@intel.com

Will upload the patch in an forked branch as well for ease of review process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9402</commentid>
    <comment_count>2</comment_count>
      <attachid>390</attachid>
    <who name="Jayanth Raghuram">Jayanth.Raghuram</who>
    <bug_when>2019-08-29 12:34:55 +0000</bug_when>
    <thetext>Created attachment 390
[PATCH v2] MdePkg/DxeHstiLib: Added checks to improve error handling

Added [PATCH v2] MdePkg/DxeHstiLib: Added checks to improve error handling</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9450</commentid>
    <comment_count>3</comment_count>
    <who name="Jayanth Raghuram">Jayanth.Raghuram</who>
    <bug_when>2019-09-03 13:01:32 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/17f8c9e97d770c74f84194576bcd97322fbed21e
Signed-off-by: Jayanth Raghuram &lt;Jayanth.Raghuram@Dell.com&gt;
Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>388</attachid>
            <date>2019-08-28 13:42:21 +0000</date>
            <delta_ts>2019-08-29 12:34:55 +0000</delta_ts>
            <desc>0001-MdePkg-DxeHstiLib-Added-checks-to-improve-error-hand.patch</desc>
            <filename>0001-MdePkg-DxeHstiLib-Added-checks-to-improve-error-hand.patch</filename>
            <type>application/octet-stream</type>
            <size>1643</size>
            <attacher name="Jayanth Raghuram">Jayanth.Raghuram</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>390</attachid>
            <date>2019-08-29 12:34:55 +0000</date>
            <delta_ts>2019-08-29 12:34:55 +0000</delta_ts>
            <desc>[PATCH v2] MdePkg/DxeHstiLib: Added checks to improve error handling</desc>
            <filename>0001-MdePkg-DxeHstiLib-Added-checks-to-improve-error-hand.patch</filename>
            <type>text/plain</type>
            <size>1421</size>
            <attacher name="Jayanth Raghuram">Jayanth.Raghuram</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>2990</bug_id>
          
          <creation_ts>2020-09-29 14:33:49 +0000</creation_ts>
          <short_desc>Core CI usage instructions do not build BaseTools</short_desc>
          <delta_ts>2023-01-03 04:16:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>trivial</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Sean Brogan">sean.brogan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13833</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-29 14:33:49 +0000</bug_when>
    <thetext>As of edk2 commit 52dbaaeace64, the Platform CI instructions such as
those in &quot;OvmfPkg/PlatformCI/ReadMe.md&quot; contain the following step:

&gt;| 6. Compile the basetools if necessary - only when basetools C source files change
&gt;|
&gt;|     ``` bash
&gt;|     python BaseTools/Edk2ToolsBuild.py -t &lt;ToolChainTag&gt;
&gt;|     ```

placed between &quot;stuart_update&quot; and &quot;stuart_build&quot;.

However, the Core CI instructions in &quot;.pytool/Readme.md&quot; lack the same
step, between &quot;stuart_update&quot; and &quot;stuart_ci_build&quot;:

&gt;| 4. Update other dependencies (done more often)
&gt;|    * `stuart_update -c .pytool/CISettings.py TOOL_CHAIN_TAG=&lt;your tag here&gt;`
&gt;| 5. Run CI build (--help will give you options)
&gt;|    * `stuart_ci_build -c .pytool/CISettings.py TOOL_CHAIN_TAG=&lt;your tag here&gt;`

This omission may cause CompilerPlugin to fail.

Please insert the instruction to build BaseTools. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13840</commentid>
    <comment_count>1</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-29 21:34:33 +0000</bug_when>
    <thetext>Sean: can you give your feedback?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20394</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 04:16:16 +0000</bug_when>
    <thetext>This issue has been obviated by commit 0e3e62fc2b9a (&quot;.pytool/Readme.md: Add reference to new build instructions&quot;, 2022-12-16), removing the entire list of steps that was in need of updating.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2100</bug_id>
          
          <creation_ts>2019-08-21 05:05:26 +0000</creation_ts>
          <short_desc>MdePkg: UefiLib: Add a function to check if a language is supported</short_desc>
          <delta_ts>2019-09-30 10:04:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc>https://github.com/TMZhao/edk2/tree/implement_check_if_supported_lang</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tom Zhao">tzhao</reporter>
          <assigned_to name="Tom Zhao">tzhao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>tzhao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9109</commentid>
    <comment_count>0</comment_count>
    <who name="Tom Zhao">tzhao</who>
    <bug_when>2019-08-21 05:05:26 +0000</bug_when>
    <thetext>MdePkg: UefiLib: Add a function to check if a language is supported

This is intended for use in functions where the UEFI specification requires a return of EFI_UNSUPPORTED if the language is not supported, such as those listed below. This will allow the supported status of the language to be checked using a library function without retrieving the error string using a function such as LookupUnicodeString2().

UEFI Protocol.function intended for use (identified by SCT, there are possibly others):
EFI_DRIVER_DIAGNOSTIC2_PROTOCOL.RunDiagnostics()
COMPONENT_NAME2_PROTOCOL.GetControllerName()
COMPONENT_NAME2_PROTOCOL.GetDriverName()

LookupUnicodeString2() and AddUnicodeString2() updated to use this function for consistency.

https://github.com/TMZhao/edk2/tree/implement_check_if_supported_lang</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9181</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-22 20:17:29 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9879</commentid>
    <comment_count>2</comment_count>
    <who name="Tom Zhao">tzhao</who>
    <bug_when>2019-09-30 10:04:23 +0000</bug_when>
    <thetext>Change was pushed

commit:
ea331a5c21f7d71980fe0ea2e4aa425474f8ffb2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2789</bug_id>
          
          <creation_ts>2020-06-09 00:24:45 +0000</creation_ts>
          <short_desc>BIOS failed to use default year value if user set year to out-of-range value intentionally after Boot time</short_desc>
          <delta_ts>2020-06-09 21:49:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Kai Yau">kaiyau</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>PcAtChipsetPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12817</commentid>
    <comment_count>0</comment_count>
    <who name="Kai Yau">kaiyau</who>
    <bug_when>2020-06-09 00:24:45 +0000</bug_when>
    <thetext>PcdMaximalValidYear is set to 2097 currently.
If an user change the YEAR to 2099 in OS, and then reset the computer.

ConvertRtcTimeToEfiTime() will force 2099 to 1999. (due to UINT8 limit)
Since 1999 is within the range, RtcTimeFieldsValid() will not catch this error.

As a result, CMOS time may not sync the year with OS.

Note:
Reading CMOS Century value could resolve this issue, but Century address is not a standard; so that edk2 folder cannot use a hardcoded address.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12829</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-09 21:41:12 +0000</bug_when>
    <thetext>Move this topic to be discussed in edk2 community.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12830</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-09 21:47:25 +0000</bug_when>
    <thetext>Please give the real usage model and impact. Seemly, 2099 is not real case. If only for 2099 case, we don&apos;t need to fix it now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12831</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-06-09 21:49:14 +0000</bug_when>
    <thetext>We don&apos;t see the reasonable solution now. And, this problem is not real.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2776</bug_id>
          
          <creation_ts>2020-06-01 17:48:32 +0000</creation_ts>
          <short_desc>Add a pre-memory AP vector at 0xFF000</short_desc>
          <delta_ts>2020-08-05 13:50:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>deric.cole</reporter>
          <assigned_to>deric.cole</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12762</commentid>
    <comment_count>0</comment_count>
    <who name="">deric.cole</who>
    <bug_when>2020-06-01 17:48:32 +0000</bug_when>
    <thetext>CpuMpPei only works once memory is available. In order to support (platform-specific) pre-memory multiprocessing, create a vector in nonvolatile memory (SPI flash) that can be passed to Init-SIPI-SIPI to wake APs.

Requirements for the vector are that it be in the first 1M of memory, and that it be aligned to 4K. Proximity to the standard reset vector of 0xFFFF0 is desirable, making 0xFF000 the best candidate for this new vector.

The code at this vector should call the same SEC entry point as the ordinary reset vector, but with a special value
of &quot;AP&quot; in the DI register. The platform-specific SEC code will be expected
to check for that value and take a different path for APs, if this
feature is supported by the platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12763</commentid>
    <comment_count>1</comment_count>
    <who name="">deric.cole</who>
    <bug_when>2020-06-01 17:54:40 +0000</bug_when>
    <thetext>Proposed code change is forthcoming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12764</commentid>
    <comment_count>2</comment_count>
    <who name="">deric.cole</who>
    <bug_when>2020-06-01 19:08:58 +0000</bug_when>
    <thetext>Patch email sent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13320</commentid>
    <comment_count>3</comment_count>
    <who name="">deric.cole</who>
    <bug_when>2020-08-05 13:50:17 +0000</bug_when>
    <thetext>Pushed:
SHA-1: 00b8bf7eda00fb6f0197d3968b6078cfdb4870fa

* UefiCpuPkg/SecCore: Add pre-memory AP vector

REF:https://bugzilla.tianocore.org/show_bug.cgi?id=2776</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2478</bug_id>
          
          <creation_ts>2020-01-19 22:04:12 +0000</creation_ts>
          <short_desc>Add library to get PostCode from status code</short_desc>
          <delta_ts>2020-06-28 02:59:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>DebugFeaturePkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ming Tan">ming.tan</reporter>
          <assigned_to name="Ming Tan">ming.tan</assigned_to>
          <cc>amy.chan</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10954</commentid>
    <comment_count>0</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-01-19 22:04:12 +0000</bug_when>
    <thetext>In Features/Intel/Debugging, add a new pkg PostCodeFeaturePkg, and add a new library PlatformPostCodeMapLib. It is used to get PostCode from status code type and value.
The general use case is when report the status code, also find and report the post code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10955</commentid>
    <comment_count>1</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-01-19 22:04:55 +0000</bug_when>
    <thetext>I will summit a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12840</commentid>
    <comment_count>2</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-10 02:13:50 +0000</bug_when>
    <thetext>Now also add a library of PostCodeStatusCodeHandlerLib, used to get the post code from status code, and show it.
Also rename the PlatformPostCodeMapLib to PostCodeMapLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12965</commentid>
    <comment_count>3</comment_count>
    <who name="Ming Tan">ming.tan</who>
    <bug_when>2020-06-28 02:59:15 +0000</bug_when>
    <thetext>The patch was merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2929</bug_id>
          
          <creation_ts>2020-08-26 16:34:42 +0000</creation_ts>
          <short_desc>race conditions in VCPU hotplug</short_desc>
          <delta_ts>2020-12-21 09:39:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1512</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3132</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13539</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-26 16:34:42 +0000</bug_when>
    <thetext>The &quot;virsh setvcpus&quot; (plural) command results in several &quot;device_add&quot;
monitor commands being sent to QEMU. The &quot;device_add&quot; commands
manipulate the CPU hotplug register block asynchronously to (a) the ACPI
code that runs in the guest OS, (b) the CPU hotplug driver in OVMF
(OvmfPkg/CpuHotplugSmm).

While &quot;virsh setvcpu&quot; (singular) commands work OK with OVMF as of edk2
commit 63d92674d240, &quot;virsh setvcpus&quot; (plural) can hit trigger two kinds
of races.

(

Regarding the QEMU side of the environment, it is QEMU at commit
44423107e7b5, plus the following patches (on qemu-devel):

#1 x86: lpc9: let firmware negotiate &apos;CPU hotplug with SMI&apos; features
https://lists.gnu.org/archive/html/qemu-devel/2020-08/msg05712.html
http://mid.mail-archive.com/20200824110038.1365178-1-imammedo@redhat.com

(should be applied first on 3ff3c5d31740, then rebased to 44423107e7b5)

#2 x86: cphp: prevent guest crash on CPU hotplug when broadcast SMI is in use
https://lists.gnu.org/archive/html/qemu-devel/2020-08/msg03893.html
http://mid.mail-archive.com/20200818122208.1243901-3-imammedo@redhat.com

#3 x86: cpuhp: refuse cpu hot-unplug request earlier if not supported
https://lists.gnu.org/archive/html/qemu-devel/2020-08/msg03894.html
http://mid.mail-archive.com/20200818122208.1243901-4-imammedo@redhat.com

#4 acpi: add aml_land() and aml_break() primitives
https://lists.gnu.org/archive/html/qemu-devel/2020-08/msg03895.html
http://mid.mail-archive.com/20200818122208.1243901-5-imammedo@redhat.com

#5 tests: acpi: mark to be changed tables in bios-tables-test-allowed-diff
https://lists.gnu.org/archive/html/qemu-devel/2020-08/msg03896.html
http://mid.mail-archive.com/20200818122208.1243901-6-imammedo@redhat.com

#6 x68: acpi: trigger SMI before sending hotplug Notify event to OSPM
https://lists.gnu.org/archive/html/qemu-devel/2020-08/msg03897.html
http://mid.mail-archive.com/20200818122208.1243901-7-imammedo@redhat.com

#7 tests: acpi: update acpi blobs with new AML
https://lists.gnu.org/archive/html/qemu-devel/2020-08/msg03898.html
http://mid.mail-archive.com/20200818122208.1243901-8-imammedo@redhat.com

#8 the following update:
https://lists.gnu.org/archive/html/qemu-devel/2020-08/msg06230.html
http://mid.mail-archive.com/382e54cc-1ac0-61e5-bf5d-0653480222a0@redhat.com

&gt;| diff --git a/hw/acpi/cpu.c b/hw/acpi/cpu.c
&gt;| index 4864c3b39694..2bea6144fd5e 100644
&gt;| --- a/hw/acpi/cpu.c
&gt;| +++ b/hw/acpi/cpu.c
&gt;| @@ -564,8 +564,11 @@ void build_cpus_aml(Aml *table, MachineState *machine, CPUHotplugFeatures opts,
&gt;|              aml_append(method, aml_store(zero, cpu_idx));
&gt;|              while_ctx = aml_while(aml_lless(cpu_idx, num_added_cpus));
&gt;|              {
&gt;| -                aml_append(while_ctx, aml_call2(CPU_NOTIFY_METHOD,
&gt;| -                    aml_derefof(aml_index(new_cpus, cpu_idx)), dev_chk));
&gt;| +                aml_append(while_ctx,
&gt;| +                    aml_store(aml_derefof(aml_index(new_cpus, cpu_idx)), uid));
&gt;| +                aml_append(while_ctx,
&gt;| +                    aml_call2(CPU_NOTIFY_METHOD, uid, dev_chk));
&gt;| +                aml_append(while_ctx, aml_store(uid, cpu_selector));
&gt;|                  aml_append(while_ctx, aml_store(one, ins_evt));
&gt;|                  aml_append(while_ctx, aml_increment(cpu_idx));
&gt;|              }

The next version of the QEMU series is expected next week, with no
significant logic changes.

)

The races are described in the following message:

https://lists.gnu.org/archive/html/qemu-devel/2020-08/msg06579.html
http://mid.mail-archive.com/cfd4dd52-4827-2288-4b4e-b396d48494f0@redhat.com

&gt;| (1) When a &quot;device_add&quot; occurs after the ACPI loop collects the CPUS
&gt;|     from the register block, but before the SMI.
&gt;|
&gt;|     Here, the &quot;stray CPU&quot; is processed fine by the firmware. However,
&gt;|     the CTFY loop in ACPI does not know about the CPU, so it doesn&apos;t
&gt;|     clear the pending insert event for it. And when the firmware is
&gt;|     entered with an SMI for the *next* time, the firmware sees the
&gt;|     same CPU *again* as pending, and tries to relocate it again. Bad
&gt;|     things happen.
&gt;|
&gt;| (2) When a &quot;device_add&quot; occurs after the SMI, but before the firmware
&gt;|     collects the pending CPUs from the register block.
&gt;|
&gt;|     Here, the firmware collects the &quot;stray CPU&quot;. However, the
&gt;|     &quot;broadcast SMI&quot;, with which we entered the firmware, did *not*
&gt;|     cover the stray CPU -- the CPU_FOREACH() loop in
&gt;|     ich9_apm_ctrl_changed() could not make the SMI pending for the
&gt;|     new CPU, because at that time, the CPU had not been added yet. As
&gt;|     a result, when the firmware sends an INIT-SIPI-SIPI to the new
&gt;|     CPU, expecting it to boot right into SMM, the new CPU instead
&gt;|     boots straight into the post-RSM (normal mode) &quot;pen&quot;, skipping
&gt;|     its initial SMI handler. Meaning that the CPU halts nicely, but
&gt;|     its SMBASE is never relocated, and the SMRAM message exchange
&gt;|     with the BSP falls apart.

Possible mitigations (from the same email):

&gt;| For problem (1):
&gt;|
&gt;|   (1a) Change the firmware so it notices that it has relocated the
&gt;|        &quot;stray&quot; CPU before -- such CPUs should be simply skipped in
&gt;|        the firmware. The next time the CTFY loop runs in ACPI, it
&gt;|        will clear the pending event.
&gt;|
&gt;|   (1b) Alternatively, stop consuming the hotplug register block in
&gt;|        the firmware altogether, and work out general message passing,
&gt;|        from ACPI to firmware. See the outline here:
&gt;|
&gt;|          http://mid.mail-archive.com/cf887d74-f65d-602a-9629-3d25cef93a69@redhat.com
&gt;|
&gt;| For problem (2):
&gt;|
&gt;|   (2a) Change the firmware so that it sends a directed SMI as well to
&gt;|        each CPU, just before sending an INIT-SIPI-SIPI. This should
&gt;|        be idempotent -- if the broadcast SMI *has* covered the the
&gt;|        CPU, then sending a directed SMI should make no difference.
&gt;|
&gt;|   (2b) Alternatively, change the &quot;device_add&quot; command in QEMU so
&gt;|        that, if &quot;CPU hotplug with SMI&quot; has been negotiated, the new
&gt;|        CPU is added with the SMI made pending for it at once. (That
&gt;|        is, no hot-plugged CPU would exist with the directed SMI *not*
&gt;|        pending for it.)
&gt;|
&gt;|   (2c) Alternatively, approach (1b) would fix problem (2) as well --
&gt;|        the firmware would only relocate such CPUs that ACPI collected
&gt;|        before injecting the SMI. So all those CPUs would have the SMI
&gt;|        pending.

I&apos;m going to post bugfixes to edk2-devel soon that implement (1a) and
(2a). The patches should be merged for edk2-stable202008 (they are
bugfixes).

If they are not acceptable for some reason, then we should revert edk2
commit 5ba203b54e59 (&quot;OvmfPkg/SmmControl2Dxe: negotiate
ICH9_LPC_SMI_F_CPU_HOTPLUG&quot;, 2020-08-24) instead. That&apos;s because we
shouldn&apos;t make an edk2 release with OVMF negotiating
ICH9_LPC_SMI_F_CPU_HOTPLUG with QEMU, while we know that there are
races.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13540</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-26 18:26:17 +0000</bug_when>
    <thetext>Posted

* [edk2-devel] [PATCH 0/2]
  OvmfPkg: fix race conditions in VCPU hotplug (for edk2-stable202008)

https://edk2.groups.io/g/devel/message/64659
http://mid.mail-archive.com/20200826222129.25798-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13555</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-08-27 14:14:53 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; Posted
&gt; 
&gt; * [edk2-devel] [PATCH 0/2]
&gt;   OvmfPkg: fix race conditions in VCPU hotplug (for edk2-stable202008)
&gt; 
&gt; https://edk2.groups.io/g/devel/message/64659
&gt; http://mid.mail-archive.com/20200826222129.25798-1-lersek@redhat.com

Merged as commit range 63d92674d240..cbccf995920a, via &lt;https://github.com/tianocore/edk2/pull/905&gt;.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>